"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(st,Ie,k)=>{k.d(Ie,{Dh:()=>Re,GT:()=>ge,cc:()=>Pe,on:()=>De,pX:()=>te,xv:()=>Fe});var d=k(5879),V=k(120);st=k.hmd(st);const F=["ngOnDestroy"],te=(Ae,Te,tt,at={})=>new Proxy(Ae,{get:(ee,he)=>tt.runOutsideAngular(()=>{var re;if(Ae[he])return!(null===(re=at?.spy)||void 0===re)&&re.get&&at.spy.get(he,Ae[he]),Ae[he];if(F.indexOf(he)>-1)return()=>{};const fe=Te.toPromise().then(ke=>{const B=ke&&ke[he];return"function"==typeof B?B.bind(ke):B&&B.then?B.then(Ce=>tt.run(()=>Ce)):tt.run(()=>B)});return new Proxy(()=>{},{get:(ke,B)=>fe[B],apply:(ke,B,Ce)=>fe.then(Ue=>{var ct;const Xt=Ue&&Ue(...Ce);return!(null===(ct=at?.spy)||void 0===ct)&&ct.apply&&at.spy.apply(he,Ce,Xt),Xt})})})}),ge=(Ae,Te)=>{Te.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(at=>{Object.defineProperty(Ae.prototype,at,Object.getOwnPropertyDescriptor(tt.prototype||tt,at))})})};class Ee{constructor(Te){return Te}}const Re=new d.OlP("angularfire2.app.options"),Fe=new d.OlP("angularfire2.app.name");function De(Ae,Te,tt){const ee="object"==typeof tt&&tt||{};ee.name=ee.name||"string"==typeof tt&&tt||"[DEFAULT]";const re=V.Z.apps.filter(fe=>fe&&fe.name===ee.name)[0]||Te.runOutsideAngular(()=>V.Z.initializeApp(Ae,ee));try{JSON.stringify(Ae)!==JSON.stringify(re.options)&&U("error",`${re.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(re)}const U=(Ae,...Te)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ae](...Te)};function Pe(Ae,Te,tt,at,ee){const[,he,re]=globalThis.\u0275AngularfireInstanceCache.find(fe=>fe[0]===Ae)||[];if(he)return function Me(Ae,Te){try{return Ae.toString()===Te.toString()}catch{return Ae===Te}}(ee,re)||(ve("error",`${Te} was already initialized on the ${tt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:ee,was:re})),he;{const fe=at();return globalThis.\u0275AngularfireInstanceCache.push([Ae,fe,ee]),fe}}const Je=!!st.hot,ve=(Ae,...Te)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ae](...Te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6710:(st,Ie,k)=>{k.d(Ie,{$:()=>lh,A:()=>W,D:()=>Me,I:()=>Yd,J:()=>Ec,L:()=>je,N:()=>Vt,P:()=>wn,Q:()=>Ea,R:()=>hg,U:()=>$p,V:()=>qo,W:()=>fs,X:()=>Us,Y:()=>ih,Z:()=>sh,_:()=>Dc,a:()=>nu,a0:()=>_E,a1:()=>On,a2:()=>hx,a3:()=>fx,a4:()=>ky,a5:()=>fo,a6:()=>Ac,a7:()=>dh,a8:()=>hh,a9:()=>Fy,aA:()=>B,aB:()=>Ra,aC:()=>ot,aD:()=>qn,aE:()=>wo,aF:()=>Vc,aG:()=>Co,aH:()=>Pn,aL:()=>Pc,aO:()=>Pi,aa:()=>Wp,ab:()=>Ly,ac:()=>qp,ad:()=>Vy,ae:()=>Yl,af:()=>By,ai:()=>vE,aj:()=>px,ak:()=>$y,an:()=>oh,ao:()=>xc,aq:()=>Ch,ar:()=>tu,as:()=>Ue,at:()=>Ze,au:()=>me,av:()=>ee,aw:()=>Ni,ax:()=>Nh,ay:()=>Zt,az:()=>he,b:()=>Eh,c:()=>Pr,d:()=>ou,e:()=>Zo,f:()=>cu,g:()=>si,h:()=>an,i:()=>gs,j:()=>nv,k:()=>Ks,l:()=>fg,m:()=>La,o:()=>ta,p:()=>Fe,r:()=>dt,s:()=>Gr,u:()=>Wr});var d=k(5861),V=k(9058),F=k(7592),te=k(7582),ge=k(7879),Ee=k(4537);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Je=function Pe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Te=new ge.Yd("@firebase/auth");function at(w,...m){Te.logLevel<=ge.in.ERROR&&Te.error(`Auth (${F.SDK_VERSION}): ${w}`,...m)}function ee(w,...m){throw ke(w,...m)}function he(w,...m){return ke(w,...m)}function re(w,m,_){const I=Object.assign(Object.assign({},Je()),{[m]:_});return new V.LL("auth","Firebase",I).create(m,{appName:w.name})}function fe(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&ee(w,"argument-error"),re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ke(w,...m){if("string"!=typeof w){const _=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return ve.create(w,...m)}function B(w,m,..._){if(!w)throw ke(m,..._)}function Ce(w){const m="INTERNAL ASSERTION FAILED: "+w;throw at(m),new Error(m)}function Ue(w,m){w||Ce(m)}function ct(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Xt(){return"http:"===Ln()||"https:"===Ln()}function Ln(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class dn{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ue(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Cn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xt()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fr(w,m){Ue(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class ie{static initialize(m,_,I){this.fetchImpl=m,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},le=new dn(3e4,6e4);function se(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function pe(w,m,_,I){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,d.Z)(function*(w,m,_,I,S={}){return Qe(w,S,(0,d.Z)(function*(){let P={},Z={};I&&("GET"===m?Z=I:P={body:JSON.stringify(I)});const oe=(0,V.xO)(Object.assign({key:w.config.apiKey},Z)).slice(1),Le=yield w._getAdditionalHeaders();return Le["Content-Type"]="application/json",w.languageCode&&(Le["X-Firebase-Locale"]=w.languageCode),ie.fetch()(qt(w,w.config.apiHost,_,oe),Object.assign({method:m,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Qe(w,m,_){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,d.Z)(function*(w,m,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},ce),m);try{const S=new pt(w),P=yield Promise.race([_(),S.promise]);S.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw tn(w,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const oe=P.ok?Z.errorMessage:Z.error.message,[Le,$e]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw tn(w,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Le)throw tn(w,"email-already-in-use",Z);if("USER_DISABLED"===Le)throw tn(w,"user-disabled",Z);const rt=I[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw re(w,rt,$e);ee(w,rt)}}catch(S){if(S instanceof V.ZR)throw S;ee(w,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function en(w,m,_,I){return ft.apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(w,m,_,I,S={}){const P=yield pe(w,m,_,I,S);return"mfaPendingCredential"in P&&ee(w,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function qt(w,m,_,I){const S=`${m}${_}?${I}`;return w.config.emulator?Fr(w.config,S):`${w.config.apiScheme}://${S}`}class pt{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(he(this.auth,"network-request-failed")),le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tn(w,m,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const S=he(w,m,I);return S.customData._tokenResponse=_,S}function En(){return(En=(0,d.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Un(){return(Un=(0,d.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Mr(){return(Mr=(0,d.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function cr(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function ds(){return(ds=(0,d.Z)(function*(w,m=!1){const _=(0,V.m9)(w),I=yield _.getIdToken(m),S=_t(I);B(S&&S.exp&&S.auth_time&&S.iat,_.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,Z=P?.sign_in_provider;return{claims:S,token:I,authTime:cr(ht(S.auth_time)),issuedAtTime:cr(ht(S.iat)),expirationTime:cr(ht(S.exp)),signInProvider:Z||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function ht(w){return 1e3*Number(w)}function _t(w){const[m,_,I]=w.split(".");if(void 0===m||void 0===_||void 0===I)return at("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,V.tV)(_);return S?JSON.parse(S):(at("Failed to decode base64 JWT payload"),null)}catch(S){return at("Caught error parsing JWT payload as JSON",S?.toString()),null}}function rn(w,m){return ti.apply(this,arguments)}function ti(){return(ti=(0,d.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(I){throw I instanceof V.ZR&&function Ur({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}class Rt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const S=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),I)}iteration(){var m=this;return(0,d.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class Mn{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=cr(this.lastLoginAt),this.creationTime=cr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function hs(w){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,d.Z)(function*(w){var m;const _=w.auth,I=yield w.getIdToken(),S=yield rn(w,function fi(w,m){return Mr.apply(this,arguments)}(_,{idToken:I}));B(S?.users.length,_,"internal-error");const P=S.users[0];w._notifyReloadListener(P);const Z=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?function Ai(w){return w.map(m=>{var{providerId:_}=m,I=(0,te._T)(m,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(P.providerUserInfo):[],oe=function xn(w,m){return[...w.filter(I=>!m.some(S=>S.providerId===I.providerId)),...m]}(w.providerData,Z),rt=!!w.isAnonymous&&!(w.email&&P.passwordHash||oe?.length),Ot={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:oe,metadata:new Mn(P.createdAt,P.lastLoginAt),isAnonymous:rt};Object.assign(w,Ot)}),Gt.apply(this,arguments)}function Ut(){return(Ut=(0,d.Z)(function*(w){const m=(0,V.m9)(w);yield hs(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Ki(){return(Ki=(0,d.Z)(function*(w,m){const _=yield Qe(w,{},(0,d.Z)(function*(){const I=(0,V.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:S,apiKey:P}=w.config,Z=qt(w,S,"/v1/token",`key=${P}`),oe=yield w._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(Z,{method:"POST",headers:oe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class lr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){B(m.idToken,"internal-error"),B(typeof m.idToken<"u","internal-error"),B(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function bt(w){const m=_t(w);return B(m,"internal-error"),B(typeof m.exp<"u","internal-error"),B(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var I=this;return(0,d.Z)(function*(){return B(!I.accessToken||I.refreshToken,m,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var I=this;return(0,d.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:Z}=yield function Zi(w,m){return Ki.apply(this,arguments)}(m,_);I.updateTokensAndExpiration(S,P,Number(Z))})()}updateTokensAndExpiration(m,_,I){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,_){const{refreshToken:I,accessToken:S,expirationTime:P}=_,Z=new lr;return I&&(B("string"==typeof I,"internal-error",{appName:m}),Z.refreshToken=I),S&&(B("string"==typeof S,"internal-error",{appName:m}),Z.accessToken=S),P&&(B("number"==typeof P,"internal-error",{appName:m}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new lr,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function ze(w,m){B("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class _e{constructor(m){var{uid:_,auth:I,stsTokenManager:S}=m,P=(0,te._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Mn(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,d.Z)(function*(){const I=yield rn(_,_.stsTokenManager.getToken(_.auth,m));return B(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(m){return function Lr(w){return ds.apply(this,arguments)}(this,m)}reload(){return function co(w){return Ut.apply(this,arguments)}(this)}_assign(m){this!==m&&(B(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new _e(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var I=this;return(0,d.Z)(function*(){let S=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),S=!0),_&&(yield hs(I)),yield I.auth._persistUserIfCurrent(I),S&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,d.Z)(function*(){const _=yield m.getIdToken();return yield rn(m,function An(w,m){return En.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var I,S,P,Z,oe,Le,$e,rt;const Ot=null!==(I=_.displayName)&&void 0!==I?I:void 0,Or=null!==(S=_.email)&&void 0!==S?S:void 0,Ri=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Ys=null!==(Z=_.photoURL)&&void 0!==Z?Z:void 0,Tg=null!==(oe=_.tenantId)&&void 0!==oe?oe:void 0,Hc=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,na=null!==($e=_.createdAt)&&void 0!==$e?$e:void 0,ra=null!==(rt=_.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:vu,emailVerified:zc,isAnonymous:ki,providerData:Ba,stsTokenManager:Qs}=_;B(vu&&Qs,m,"internal-error");const Gc=lr.fromJSON(this.name,Qs);B("string"==typeof vu,m,"internal-error"),ze(Ot,m.name),ze(Or,m.name),B("boolean"==typeof zc,m,"internal-error"),B("boolean"==typeof ki,m,"internal-error"),ze(Ri,m.name),ze(Ys,m.name),ze(Tg,m.name),ze(Hc,m.name),ze(na,m.name),ze(ra,m.name);const So=new _e({uid:vu,auth:m,email:Or,emailVerified:zc,displayName:Ot,isAnonymous:ki,photoURL:Ys,phoneNumber:Ri,tenantId:Tg,stsTokenManager:Gc,createdAt:na,lastLoginAt:ra});return Ba&&Array.isArray(Ba)&&(So.providerData=Ba.map(Cu=>Object.assign({},Cu))),Hc&&(So._redirectEventId=Hc),So}static _fromIdTokenResponse(m,_,I=!1){return(0,d.Z)(function*(){const S=new lr;S.updateFromServerResponse(_);const P=new _e({uid:_.localId,auth:m,stsTokenManager:S,isAnonymous:I});return yield hs(P),P})()}}const Xe=new Map;function ot(w){Ue(w instanceof Function,"Expected a class definition");let m=Xe.get(w);return m?(Ue(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Xe.set(w,m),m)}const Vt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,I){var S=this;return(0,d.Z)(function*(){S.storage[_]=I})()}_get(_){var I=this;return(0,d.Z)(function*(){const S=I.storage[_];return void 0===S?null:S})()}_remove(_){var I=this;return(0,d.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function qn(w,m,_){return`firebase:${w}:${m}:${_}`}class H{constructor(m,_,I){this.persistence=m,this.auth=_,this.userKey=I;const{config:S,name:P}=this.auth;this.fullUserKey=qn(this.userKey,S.apiKey,P),this.fullPersistenceKey=qn("persistence",S.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,d.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?_e._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,d.Z)(function*(){if(_.persistence===m)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,I="authUser"){return(0,d.Z)(function*(){if(!_.length)return new H(ot(Vt),m,I);const S=(yield Promise.all(_.map(function(){var $e=(0,d.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return $e.apply(this,arguments)}}()))).filter($e=>$e);let P=S[0]||ot(Vt);const Z=qn(I,m.config.apiKey,m.name);let oe=null;for(const $e of _)try{const rt=yield $e._get(Z);if(rt){const Ot=_e._fromJSON(m,rt);$e!==P&&(oe=Ot),P=$e;break}}catch{}const Le=S.filter($e=>$e._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],oe&&(yield P._set(Z,oe.toJSON())),yield Promise.all(_.map(function(){var $e=(0,d.Z)(function*(rt){if(rt!==P)try{yield rt._remove(Z)}catch{}});return function(rt){return $e.apply(this,arguments)}}())),new H(P,m,I)):new H(P,m,I)})()}}function $(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(K(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Be(m))return"Blackberry";if(vt(m))return"Webos";if(N(m))return"Safari";if((m.includes("chrome/")||x(m))&&!m.includes("edge/"))return"Chrome";if(me(m))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function O(w=(0,V.z$)()){return/firefox\//i.test(w)}function N(w=(0,V.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function x(w=(0,V.z$)()){return/crios\//i.test(w)}function K(w=(0,V.z$)()){return/iemobile/i.test(w)}function me(w=(0,V.z$)()){return/android/i.test(w)}function Be(w=(0,V.z$)()){return/blackberry/i.test(w)}function vt(w=(0,V.z$)()){return/webos/i.test(w)}function Ze(w=(0,V.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Zt(w=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function xt(w=(0,V.z$)()){return Ze(w)||me(w)||vt(w)||Be(w)||/windows phone/i.test(w)||K(w)}function Cc(w,m=[]){let _;switch(w){case"Browser":_=$((0,V.z$)());break;case"Worker":_=`${$((0,V.z$)())}-${w}`;break;default:_=w}const I=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${F.SDK_VERSION}/${I}`}function lo(){return(lo=(0,d.Z)(function*(w){return(yield pe(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Os(w,m){return xi.apply(this,arguments)}function xi(){return(xi=(0,d.Z)(function*(w,m){return pe(w,"GET","/v2/recaptchaConfig",se(w,m))})).apply(this,arguments)}function Wt(w){return void 0!==w&&void 0!==w.getResponse}function zo(w){return void 0!==w&&void 0!==w.enterprise}class va{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Ll(w){return new Promise((m,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=m,I.onerror=S=>{const P=he("internal-error");P.customData=S,_(P)},I.type="text/javascript",I.charset="UTF-8",function Fl(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(I)})}function Ns(w){return`__${w}${Math.floor(1e6*Math.random())}`}class wa{constructor(m){this.type="recaptcha-enterprise",this.auth=Pn(m)}verify(m="verify",_=!1){var I=this;return(0,d.Z)(function*(){function P(){return P=(0,d.Z)(function*(oe){if(!_){if(null==oe.tenantId&&null!=oe._agentRecaptchaConfig)return oe._agentRecaptchaConfig.siteKey;if(null!=oe.tenantId&&void 0!==oe._tenantRecaptchaConfigs[oe.tenantId])return oe._tenantRecaptchaConfigs[oe.tenantId].siteKey}return new Promise(function(){var Le=(0,d.Z)(function*($e,rt){Os(oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ot=>{if(void 0!==Ot.recaptchaKey){const Or=new va(Ot);return null==oe.tenantId?oe._agentRecaptchaConfig=Or:oe._tenantRecaptchaConfigs[oe.tenantId]=Or,$e(Or.siteKey)}rt(new Error("recaptcha Enterprise site key undefined"))}).catch(Ot=>{rt(Ot)})});return function($e,rt){return Le.apply(this,arguments)}}())}),P.apply(this,arguments)}function Z(oe,Le,$e){const rt=window.grecaptcha;zo(rt)?rt.enterprise.ready(()=>{rt.enterprise.execute(oe,{action:m}).then(Ot=>{Le(Ot)}).catch(()=>{Le("NO_RECAPTCHA")})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((oe,Le)=>{(function S(oe){return P.apply(this,arguments)})(I.auth).then($e=>{if(!_&&zo(window.grecaptcha))Z($e,oe,Le);else{if(typeof window>"u")return void Le(new Error("RecaptchaVerifier is only supported in browser"));Ll("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{Z($e,oe,Le)}).catch(rt=>{Le(rt)})}}).catch($e=>{Le($e)})})})()}}function Rs(w,m,_){return wc.apply(this,arguments)}function wc(){return(wc=(0,d.Z)(function*(w,m,_,I=!1){const S=new wa(w);let P;try{P=yield S.verify(_)}catch{P=yield S.verify(_,!0)}const Z=Object.assign({},m);return Object.assign(Z,I?{captchaResp:P}:{captchaResponse:P}),Object.assign(Z,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Z,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Z})).apply(this,arguments)}class Ic{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const I=P=>new Promise((Z,oe)=>{try{Z(m(P))}catch(Le){oe(Le)}});I.onAbort=_,this.queue.push(I);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===m)return;const I=[];try{for(const S of _.queue)yield S(m),S.onAbort&&I.push(S.onAbort)}catch(S){I.reverse();for(const P of I)try{P()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Go{constructor(m,_,I,S){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=I,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ey(this),this.idTokenSubscription=new Ey(this),this.beforeStateQueue=new Ic(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(m,_){var I=this;return _&&(this._popupRedirectResolver=ot(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var S,P;if(!I._deleted&&(I.persistenceManager=yield H.create(I,m),!I._deleted)){if(null!==(S=I._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(P=I.currentUser)||void 0===P?void 0:P.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,d.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,d.Z)(function*(){var I;const S=yield _.assertedPersistence.getCurrentUser();let P=S,Z=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const oe=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,Le=P?._redirectEventId,$e=yield _.tryRedirectSignIn(m);(!oe||oe===Le)&&$e?.user&&(P=$e.user,Z=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield _.beforeStateQueue.runMiddleware(P)}catch(oe){P=S,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(oe))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return B(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,d.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,d.Z)(function*(){try{yield hs(m)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function In(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,d.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,d.Z)(function*(){const I=m?(0,V.m9)(m):null;return I&&B(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(m,_=!1){var I=this;return(0,d.Z)(function*(){if(!I._deleted)return m&&B(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,d.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,d.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(ot(m))}))}initializeRecaptchaConfig(){var m=this;return(0,d.Z)(function*(){const _=yield Os(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new va(_);null==m.tenantId?m._agentRecaptchaConfig=I:m._tenantRecaptchaConfigs[m.tenantId]=I,I.emailPasswordEnabled&&new wa(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new V.LL("auth","Firebase",m())}onAuthStateChanged(m,_,I){return this.registerStateListener(this.authStateSubscription,m,_,I)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,I){return this.registerStateListener(this.idTokenSubscription,m,_,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var I=this;return(0,d.Z)(function*(){const S=yield I.getOrInitRedirectPersistenceManager(_);return null===m?S.removeCurrentUser():S.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const I=m&&ot(m)||_._popupRedirectResolver;B(I,_,"argument-error"),_.redirectPersistenceManager=yield H.create(_,[ot(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,d.Z)(function*(){var I,S;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===m?_._currentUser:(null===(S=_.redirectUser)||void 0===S?void 0:S._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,d.Z)(function*(){if(m===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,I,S){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return B(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,I,S):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Cc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,d.Z)(function*(){var _;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const S=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();S&&(I["X-Firebase-Client"]=S);const P=yield m._getAppCheckToken();return P&&(I["X-Firebase-AppCheck"]=P),I})()}_getAppCheckToken(){var m=this;return(0,d.Z)(function*(){var _;const I=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return I?.error&&function tt(w,...m){Te.logLevel<=ge.in.WARN&&Te.warn(`Auth (${F.SDK_VERSION}): ${w}`,...m)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Pn(w){return(0,V.m9)(w)}class Ey{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yd(w,m,_){const I=Pn(w);B(I._canInitEmulator,I,"emulator-config-failed"),B(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const S=!!_?.disableWarnings,P=ni(m),{host:Z,port:oe}=function Qd(w){const m=ni(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(I);if(S){const P=S[1];return{host:P,port:Jd(I.substr(P.length+1))}}{const[P,Z]=I.split(":");return{host:P,port:Jd(Z)}}}(m);I.config.emulator={url:`${P}//${Z}${null===oe?"":`:${oe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Z,port:oe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Ty(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function ni(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function Jd(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class Ec{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return Ce("not implemented")}_getIdTokenResponse(m){return Ce("not implemented")}_linkToIdToken(m,_){return Ce("not implemented")}_getReauthenticationResolver(m){return Ce("not implemented")}}function Xd(w,m){return Up.apply(this,arguments)}function Up(){return(Up=(0,d.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:resetPassword",se(w,m))})).apply(this,arguments)}function Vp(w,m){return Bp.apply(this,arguments)}function Bp(){return(Bp=(0,d.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function gi(){return(gi=(0,d.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",se(w,m))})).apply(this,arguments)}function Vl(w,m){return eh.apply(this,arguments)}function eh(){return(eh=(0,d.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithPassword",se(w,m))})).apply(this,arguments)}function Bl(w,m){return th.apply(this,arguments)}function th(){return(th=(0,d.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendOobCode",se(w,m))})).apply(this,arguments)}function nh(){return(nh=(0,d.Z)(function*(w,m){return Bl(w,m)})).apply(this,arguments)}function $l(w,m){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,d.Z)(function*(w,m){return Bl(w,m)})).apply(this,arguments)}function zl(w,m){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(w,m){return Bl(w,m)})).apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(w,m){return Bl(w,m)})).apply(this,arguments)}function Vr(){return(Vr=(0,d.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}function Gl(){return(Gl=(0,d.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}class uo extends Ec{constructor(m,_,I,S=null){super("password",I),this._email=m,this._password=_,this._tenantId=S}static _fromEmailAndPassword(m,_){return new uo(m,_,"password")}static _fromEmailAndCode(m,_,I=null){return new uo(m,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,d.Z)(function*(){var I;switch(_.signInMethod){case"password":const S={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=m._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const P=yield Rs(m,S,"signInWithPassword");return Vl(m,P)}return Vl(m,S).catch(function(){var P=(0,d.Z)(function*(Z){if("auth/missing-recaptcha-token"===Z.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const oe=yield Rs(m,S,"signInWithPassword");return Vl(m,oe)}return Promise.reject(Z)});return function(Z){return P.apply(this,arguments)}}());case"emailLink":return function Ia(w,m){return Vr.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:ee(m,"internal-error")}})()}_linkToIdToken(m,_){var I=this;return(0,d.Z)(function*(){switch(I.signInMethod){case"password":return Vp(m,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function jp(w,m){return Gl.apply(this,arguments)}(m,{idToken:_,email:I._email,oobCode:I._password});default:ee(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function ks(w,m){return rh.apply(this,arguments)}function rh(){return(rh=(0,d.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithIdp",se(w,m))})).apply(this,arguments)}class je extends Ec{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new je(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):ee("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:S}=_,P=(0,te._T)(_,["providerId","signInMethod"]);if(!I||!S)return null;const Z=new je(I,S);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(m){return ks(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,ks(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,ks(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,V.xO)(_)}return m}}function fn(){return(fn=(0,d.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendVerificationCode",se(w,m))})).apply(this,arguments)}function Fs(){return(Fs=(0,d.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m))})).apply(this,arguments)}function Wo(){return(Wo=(0,d.Z)(function*(w,m){const _=yield en(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m));if(_.temporaryProof)throw tn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Bn={USER_NOT_FOUND:"user-not-found"};function ho(){return(ho=(0,d.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Bn)})).apply(this,arguments)}class gt extends Ec{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new gt({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new gt({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function mi(w,m){return Fs.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function _r(w,m){return Wo.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Ls(w,m){return ho.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:I,verificationCode:S}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:I,code:S}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:I,phoneNumber:S,temporaryProof:P}=m;return I||_||S||P?new gt({verificationId:_,verificationCode:I,phoneNumber:S,temporaryProof:P}):null}}class _i{constructor(m){var _,I,S,P,Z,oe;const Le=(0,V.zd)((0,V.pd)(m)),$e=null!==(_=Le.apiKey)&&void 0!==_?_:null,rt=null!==(I=Le.oobCode)&&void 0!==I?I:null,Ot=function bc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Le.mode)&&void 0!==S?S:null);B($e&&rt&&Ot,"argument-error"),this.apiKey=$e,this.operation=Ot,this.code=rt,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Le.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(m){const _=function Dy(w){const m=(0,V.zd)((0,V.pd)(w)).link,_=m?(0,V.zd)((0,V.pd)(m)).deep_link_id:null,I=(0,V.zd)((0,V.pd)(w)).deep_link_id;return(I?(0,V.zd)((0,V.pd)(I)).link:null)||I||_||m||w}(m);try{return new _i(_)}catch{return null}}}let Ea=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return uo._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const S=_i.parseLink(I);return B(S,"argument-error"),uo._fromEmailAndCode(_,S.code,S.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class yi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Br extends yi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Us extends Br{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return B("providerId"in _&&"signInMethod"in _,"argument-error"),je._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return B(m.idToken||m.accessToken,"argument-error"),je._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Us.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Us.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:S,pendingToken:P,nonce:Z,providerId:oe}=m;if(!I&&!S&&!_&&!P||!oe)return null;try{return new Us(oe)._credential({idToken:_,accessToken:I,nonce:Z,pendingToken:P})}catch{return null}}}let $p=(()=>{class w extends Br{constructor(){super("facebook.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),qo=(()=>{class w extends Br{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:S}=_;if(!I&&!S)return null;try{return w.credential(I,S)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),fs=(()=>{class w extends Br{constructor(){super("github.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Pi extends Ec{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return ks(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,ks(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,ks(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:S,pendingToken:P}=_;return I&&S&&P&&I===S?new Pi(I,P):null}static _create(m,_){return new Pi(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ih extends yi{constructor(m){B(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return ih.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return ih.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Pi.fromJSON(m);return B(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:I}=m;if(!_||!I)return null;try{return Pi._create(I,_)}catch{return null}}}let sh=(()=>{class w extends Br{constructor(){super("twitter.com")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:S}=_;if(!I||!S)return null;try{return w.credential(I,S)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Tc(w,m){return jr.apply(this,arguments)}function jr(){return(jr=(0,d.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signUp",se(w,m))})).apply(this,arguments)}class $r{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,I,S=!1){return(0,d.Z)(function*(){const P=yield _e._fromIdTokenResponse(m,I,S),Z=ba(I);return new $r({user:P,providerId:Z,_tokenResponse:I,operationType:_})})()}static _forOperation(m,_,I){return(0,d.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const S=ba(I);return new $r({user:m,providerId:S,_tokenResponse:I,operationType:_})})()}}function ba(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Dc(w){return er.apply(this,arguments)}function er(){return(er=(0,d.Z)(function*(w){var m;const _=Pn(w);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new $r({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield Tc(_,{returnSecureToken:!0}),S=yield $r._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class Hp extends V.ZR{constructor(m,_,I,S){var P;super(_.code,_.message),this.operationType=I,this.user=S,Object.setPrototypeOf(this,Hp.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,_,I,S){return new Hp(m,_,I,S)}}function ri(w,m,_,I){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Hp._fromErrorAndOperation(w,P,m,I):P})}function xr(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function oh(w,m){return Vs.apply(this,arguments)}function Vs(){return Vs=(0,d.Z)(function*(w,m){const _=(0,V.m9)(w);yield Ta(!0,_,m);const{providerUserInfo:I}=yield function nn(w,m){return Un.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),S=xr(I||[]);return _.providerData=_.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Vs.apply(this,arguments)}function Sc(w,m){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,d.Z)(function*(w,m,_=!1){const I=yield rn(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return $r._forOperation(w,"link",I)})).apply(this,arguments)}function Ta(w,m,_){return ah.apply(this,arguments)}function ah(){return(ah=(0,d.Z)(function*(w,m,_){yield hs(m);const S=!1===w?"provider-already-linked":"no-such-provider";B(xr(m.providerData).has(_)===w,m.auth,S)})).apply(this,arguments)}function zp(w,m){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,d.Z)(function*(w,m,_=!1){const{auth:I}=w,S="reauthenticate";try{const P=yield rn(w,ri(I,S,m,w),_);B(P.idToken,I,"internal-error");const Z=_t(P.idToken);B(Z,I,"internal-error");const{sub:oe}=Z;return B(w.uid===oe,I,"user-mismatch"),$r._forOperation(w,S,P)}catch(P){throw"auth/user-not-found"===P?.code&&ee(I,"user-mismatch"),P}})).apply(this,arguments)}function Ay(w,m){return ch.apply(this,arguments)}function ch(){return(ch=(0,d.Z)(function*(w,m,_=!1){const I="signIn",S=yield ri(w,I,m),P=yield $r._fromIdTokenResponse(w,I,S);return _||(yield w._updateCurrentUser(P.user)),P})).apply(this,arguments)}function lh(w,m){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,d.Z)(function*(w,m){return Ay(Pn(w),m)})).apply(this,arguments)}function _E(w,m){return My.apply(this,arguments)}function My(){return(My=(0,d.Z)(function*(w,m){const _=(0,V.m9)(w);return yield Ta(!1,_,m.providerId),Sc(_,m)})).apply(this,arguments)}function On(w,m){return xy.apply(this,arguments)}function xy(){return(xy=(0,d.Z)(function*(w,m){return zp((0,V.m9)(w),m)})).apply(this,arguments)}function Py(){return(Py=(0,d.Z)(function*(w,m){return en(w,"POST","/v1/accounts:signInWithCustomToken",se(w,m))})).apply(this,arguments)}function hx(w,m){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,d.Z)(function*(w,m){const _=Pn(w),I=yield function dx(w,m){return Py.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),S=yield $r._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(S.user),S}),Oy.apply(this,arguments)}class uh{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Ny._fromServerResponse(m,_):"totpInfo"in _?ql._fromServerResponse(m,_):ee(m,"internal-error")}}class Ny extends uh{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Ny(_)}}class ql extends uh{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new ql(_)}}function Da(w,m,_){var I;B((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),B(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(B(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(B(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function fx(w,m,_){return Ry.apply(this,arguments)}function Ry(){return Ry=(0,d.Z)(function*(w,m,_){var I;const S=Pn(w),P={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Z=yield Rs(S,P,"getOobCode",!0);_&&Da(S,Z,_),yield $l(S,Z)}else _&&Da(S,P,_),yield $l(S,P).catch(function(){var Z=(0,d.Z)(function*(oe){if("auth/missing-recaptcha-token"!==oe.code)return Promise.reject(oe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Le=yield Rs(S,P,"getOobCode",!0);_&&Da(S,Le,_),yield $l(S,Le)}});return function(oe){return Z.apply(this,arguments)}}())}),Ry.apply(this,arguments)}function ky(w,m,_){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(w,m,_){yield Xd((0,V.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function fo(w,m){return Zl.apply(this,arguments)}function Zl(){return Zl=(0,d.Z)(function*(w,m){yield function mE(w,m){return gi.apply(this,arguments)}((0,V.m9)(w),{oobCode:m})}),Zl.apply(this,arguments)}function Ac(w,m){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(w,m){const _=(0,V.m9)(w),I=yield Xd(_,{oobCode:m}),S=I.requestType;switch(B(S,_,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(I.mfaInfo,_,"internal-error");default:B(I.email,_,"internal-error")}let P=null;return I.mfaInfo&&(P=uh._fromServerResponse(Pn(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function dh(w,m){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,d.Z)(function*(w,m){const{data:_}=yield Ac((0,V.m9)(w),m);return _.email})).apply(this,arguments)}function hh(w,m,_){return fh.apply(this,arguments)}function fh(){return fh=(0,d.Z)(function*(w,m,_){var I;const S=Pn(w),P={returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"};let Z;if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const $e=yield Rs(S,P,"signUpPassword");Z=Tc(S,$e)}else Z=Tc(S,P).catch(function(){var $e=(0,d.Z)(function*(rt){if("auth/missing-recaptcha-token"===rt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Ot=yield Rs(S,P,"signUpPassword");return Tc(S,Ot)}return Promise.reject(rt)});return function(rt){return $e.apply(this,arguments)}}());const oe=yield Z.catch($e=>Promise.reject($e)),Le=yield $r._fromIdTokenResponse(S,"signIn",oe);return yield S._updateCurrentUser(Le.user),Le}),fh.apply(this,arguments)}function Fy(w,m,_){return lh((0,V.m9)(w),Ea.credential(m,_))}function Wp(w,m,_){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,d.Z)(function*(w,m,_){var I;const S=Pn(w),P={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function Z(oe,Le){B(Le.handleCodeInApp,S,"argument-error"),Le&&Da(S,oe,Le)}if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const oe=yield Rs(S,P,"getOobCode",!0);Z(oe,_),yield zl(S,oe)}else Z(P,_),yield zl(S,P).catch(function(){var oe=(0,d.Z)(function*(Le){if("auth/missing-recaptcha-token"!==Le.code)return Promise.reject(Le);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield Rs(S,P,"getOobCode",!0);Z($e,_),yield zl(S,$e)}});return function(Le){return oe.apply(this,arguments)}}())}),Sa.apply(this,arguments)}function Ly(w,m){const _=_i.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}function qp(w,m,_){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,d.Z)(function*(w,m,_){const I=(0,V.m9)(w),S=Ea.credentialWithLink(m,_||ct());return B(S._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),lh(I,S)})).apply(this,arguments)}function ph(){return(ph=(0,d.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:createAuthUri",se(w,m))})).apply(this,arguments)}function Vy(w,m){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,d.Z)(function*(w,m){const I={identifier:m,continueUri:Xt()?ct():"http://localhost"},{signinMethods:S}=yield function Uy(w,m){return ph.apply(this,arguments)}((0,V.m9)(w),I);return S||[]}),Mc.apply(this,arguments)}function Yl(w,m){return po.apply(this,arguments)}function po(){return po=(0,d.Z)(function*(w,m){const _=(0,V.m9)(w),S={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Da(_.auth,S,m);const{email:P}=yield function jl(w,m){return nh.apply(this,arguments)}(_.auth,S);P!==w.email&&(yield w.reload())}),po.apply(this,arguments)}function By(w,m,_){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,d.Z)(function*(w,m,_){const I=(0,V.m9)(w),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&Da(I.auth,P,_);const{email:Z}=yield function gr(w,m){return mr.apply(this,arguments)}(I.auth,P);Z!==w.email&&(yield w.reload())}),Zp.apply(this,arguments)}function jy(){return(jy=(0,d.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function vE(w,m){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,d.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const I=(0,V.m9)(w),P={idToken:yield I.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},Z=yield rn(I,function yE(w,m){return jy.apply(this,arguments)}(I.auth,P));I.displayName=Z.displayName||null,I.photoURL=Z.photoUrl||null;const oe=I.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=I.displayName,oe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Z)}),Kp.apply(this,arguments)}function px(w,m){return gh((0,V.m9)(w),m,null)}function $y(w,m){return gh((0,V.m9)(w),null,m)}function gh(w,m,_){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,d.Z)(function*(w,m,_){const{auth:I}=w,P={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const Z=yield rn(w,Vp(I,P));yield w._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Ql{constructor(m,_,I={}){this.isNewUser=m,this.providerId=_,this.profile=I}}class CE extends Ql{constructor(m,_,I,S){super(m,_,I),this.username=S}}class Jl extends Ql{constructor(m,_){super(m,"facebook.com",_)}}class Hy extends CE{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Jp extends Ql{constructor(m,_){super(m,"google.com",_)}}class mh extends CE{constructor(m,_,I){super(m,"twitter.com",_,I)}}function xc(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Qp(w){var m,_;if(!w)return null;const{providerId:I}=w,S=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},P=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const Z=null===(_=null===(m=_t(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(Z)return new Ql(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!I)return null;switch(I){case"facebook.com":return new Jl(P,S);case"github.com":return new Hy(P,S);case"google.com":return new Jp(P,S);case"twitter.com":return new mh(P,S,w.screenName||null);case"custom":case"anonymous":return new Ql(P,null);default:return new Ql(P,I,S)}}(_)}class js{constructor(m,_,I){this.type=m,this.credential=_,this.auth=I}static _fromIdtoken(m,_){return new js("enroll",m,_)}static _fromMfaPendingCredential(m){return new js("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,I;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return js._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return js._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Aa{constructor(m,_,I){this.session=m,this.hints=_,this.signInResolver=I}static _fromError(m,_){const I=Pn(m),S=_.customData._serverResponse,P=(S.mfaInfo||[]).map(oe=>uh._fromServerResponse(I,oe));B(S.mfaPendingCredential,I,"internal-error");const Z=js._fromMfaPendingCredential(S.mfaPendingCredential);return new Aa(Z,P,function(){var oe=(0,d.Z)(function*(Le){const $e=yield Le._process(I,Z);delete S.mfaInfo,delete S.mfaPendingCredential;const rt=Object.assign(Object.assign({},S),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(_.operationType){case"signIn":const Ot=yield $r._fromIdTokenResponse(I,_.operationType,rt);return yield I._updateCurrentUser(Ot.user),Ot;case"reauthenticate":return B(_.user,I,"internal-error"),$r._forOperation(_.user,_.operationType,rt);default:ee(I,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,d.Z)(function*(){return _.signInResolver(m)})()}}function Ch(w,m){var _;const I=(0,V.m9)(w),S=m;return B(m.customData.operationType,I,"argument-error"),B(null===(_=S.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),Aa._fromError(I,S)}class eu{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>uh._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new eu(m)}getSession(){var m=this;return(0,d.Z)(function*(){return js._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var I=this;return(0,d.Z)(function*(){const S=m,P=yield I.getSession(),Z=yield rn(I.user,S._process(I.user.auth,P,_));return yield I.user._updateTokensIfNecessary(Z),I.user.reload()})()}unenroll(m){var _=this;return(0,d.Z)(function*(){const I="string"==typeof m?m:m.uid,S=yield _.user.getIdToken();try{const P=yield rn(_.user,function eg(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:withdraw",se(w,m))}(_.user.auth,{idToken:S,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Z})=>Z!==I),yield _.user._updateTokensIfNecessary(P),yield _.user.reload()}catch(P){throw P}})()}}const sn=new WeakMap;function tu(w){const m=(0,V.m9)(w);return sn.has(m)||sn.set(m,eu._fromUser(m)),sn.get(m)}const $s="__sak";class zr{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem($s,"1"),this.storage.removeItem($s),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Eh=(()=>{class w extends zr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bE(){const w=(0,V.z$)();return N(w)||Ze(w)}()&&function Mi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const S=this.storage.getItem(I),P=this.localCache[I];S!==P&&_(I,P,S)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((oe,Le,$e)=>{this.notifyListeners(oe,$e)});const S=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(S);if(_.newValue!==oe)null!==_.newValue?this.storage.setItem(S,_.newValue):this.storage.removeItem(S);else if(this.localCache[S]===_.newValue&&!I)return}const P=()=>{const oe=this.storage.getItem(S);!I&&this.localCache[S]===oe||this.notifyListeners(S,oe)},Z=this.storage.getItem(S);!function hn(){return(0,V.w1)()&&10===document.documentMode}()||Z===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,I){this.localCache[_]=I;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var S=()=>super._set,P=this;return(0,d.Z)(function*(){yield S().call(P,_,I),P.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,S=this;return(0,d.Z)(function*(){const P=yield I().call(S,_);return S.localCache[_]=JSON.stringify(P),P})()}_remove(_){var I=()=>super._remove,S=this;return(0,d.Z)(function*(){yield I().call(S,_),delete S.localCache[_]})()}}return w.type="LOCAL",w})(),nu=(()=>{class w extends zr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let tg=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(P=>P.isListeningto(_));if(I)return I;const S=new w(_);return this.receivers.push(S),S}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,d.Z)(function*(){const S=_,{eventId:P,eventType:Z,data:oe}=S.data,Le=I.handlersMap[Z];if(!Le?.size)return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const $e=Array.from(Le).map(function(){var Ot=(0,d.Z)(function*(Or){return Or(S.origin,oe)});return function(Or){return Ot.apply(this,arguments)}}()),rt=yield function go(w){return Promise.all(w.map(function(){var m=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return m.apply(this,arguments)}}()))}($e);S.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:rt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Pc(w="",m=10){let _="";for(let I=0;I<m;I++)_+=Math.floor(10*Math.random());return w+_}class Zy{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,I=50){var S=this;return(0,d.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,oe;return new Promise((Le,$e)=>{const rt=Pc("",20);P.port1.start();const Ot=setTimeout(()=>{$e(new Error("unsupported_event"))},I);oe={messageChannel:P,onMessage(Or){const Ri=Or;if(Ri.data.eventId===rt)switch(Ri.data.status){case"ack":clearTimeout(Ot),Z=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Le(Ri.data.response);break;default:clearTimeout(Ot),clearTimeout(Z),$e(new Error("invalid_response"))}}},S.handlers.add(oe),P.port1.addEventListener("message",oe.onMessage),S.target.postMessage({eventType:m,eventId:rt,data:_},[P.port2])}).finally(()=>{oe&&S.removeMessageHandler(oe)})})()}}function Zn(){return window}function ng(){return typeof Zn().WorkerGlobalScope<"u"&&"function"==typeof Zn().importScripts}function ru(){return(ru=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ig="firebaseLocalStorageDb",xa="firebaseLocalStorage",mo="fbase_key";class Oc{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Th(w,m){return w.transaction([xa],m?"readwrite":"readonly").objectStore(xa)}function sg(){const w=indexedDB.open(ig,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(xa,{keyPath:mo})}catch(S){_(S)}}),w.addEventListener("success",(0,d.Z)(function*(){const I=w.result;I.objectStoreNames.contains(xa)?m(I):(I.close(),yield function Yy(){const w=indexedDB.deleteDatabase(ig);return new Oc(w).toPromise()}(),m(yield sg()))}))})}function og(w,m,_){return ye.apply(this,arguments)}function ye(){return(ye=(0,d.Z)(function*(w,m,_){const I=Th(w,!0).put({[mo]:m,value:_});return new Oc(I).toPromise()})).apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(w,m){const _=Th(w,!1).get(m),I=yield new Oc(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Dh(w,m){const _=Th(w,!0).delete(m);return new Oc(_).toPromise()}const gs=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield sg()),_.db})()}_withRetries(_){var I=this;return(0,d.Z)(function*(){let S=0;for(;;)try{const P=yield I._openDb();return yield _(P)}catch(P){if(S++>3)throw P;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return ng()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=tg._getInstance(function rg(){return ng()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,d.Z)(function*(S,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(S,P){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,d.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var I,S;if(_.activeServiceWorker=yield function yt(){return ru.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Zy(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(I=P[0])&&void 0!==I&&I.fulfilled&&null!==(S=P[0])&&void 0!==S&&S.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,d.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function DE(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield sg();return yield og(_,$s,"1"),yield Dh(_,$s),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,d.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var S=this;return(0,d.Z)(function*(){return S._withPendingWrite((0,d.Z)(function*(){return yield S._withRetries(P=>og(P,_,I)),S.localCache[_]=I,S.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,d.Z)(function*(){const S=yield I._withRetries(P=>function Bt(w,m){return Yi.apply(this,arguments)}(P,_));return I.localCache[_]=S,S})()}_remove(_){var I=this;return(0,d.Z)(function*(){return I._withPendingWrite((0,d.Z)(function*(){return yield I._withRetries(S=>Dh(S,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const I=yield _._withRetries(Z=>{const oe=Th(Z,!1).getAll();return new Oc(oe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:Z,value:oe}of I)P.add(Z),JSON.stringify(_.localCache[Z])!==JSON.stringify(oe)&&(_.notifyListeners(Z,oe),S.push(Z));for(const Z of Object.keys(_.localCache))_.localCache[Z]&&!P.has(Z)&&(_.notifyListeners(Z,null),S.push(Z));return S})()}notifyListeners(_,I){this.localCache[_]=I;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),vr=1e12;class _o{constructor(m){this.auth=m,this.counter=vr,this._widgets=new Map}render(m,_){const I=this.counter;return this._widgets.set(I,new Xy(m,this.auth.name,_||{})),this.counter++,I}reset(m){var _;const I=m||vr;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(m){var _;return(null===(_=this._widgets.get(m||vr))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,d.Z)(function*(){var I;return null===(I=_._widgets.get(m||vr))||void 0===I||I.execute(),""})()}}class Xy{constructor(m,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof m?document.getElementById(m):m;B(S,"argument-error",{appName:_}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Rc(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ms=Ns("rcb"),SE=new dn(3e4,6e4);class ug{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Zn().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return B(function AE(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Wt(Zn().grecaptcha)?Promise.resolve(Zn().grecaptcha):new Promise((I,S)=>{const P=Zn().setTimeout(()=>{S(he(m,"network-request-failed"))},SE.get());Zn()[ms]=()=>{Zn().clearTimeout(P),delete Zn()[ms];const oe=Zn().grecaptcha;if(!oe||!Wt(oe))return void S(he(m,"internal-error"));const Le=oe.render;oe.render=($e,rt)=>{const Ot=Le($e,rt);return this.counter++,Ot},this.hostLanguage=_,I(oe)},Ll(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:ms,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),S(he(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Zn().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class dg{load(m){return(0,d.Z)(function*(){return new _o(m)})()}clearedOneInstance(){}}const Sh="recaptcha",ev={theme:"light",type:"image"};class hg{constructor(m,_=Object.assign({},ev),I){this.parameters=_,this.type=Sh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pn(I),this.isInvisible="invisible"===this.parameters.size,B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof m?document.getElementById(m):m;B(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dg:new ug,this.validateStartingState()}verify(){var m=this;return(0,d.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(_)||new Promise(P=>{const Z=oe=>{oe&&(m.tokenChangeListeners.delete(Z),P(oe))};m.tokenChangeListeners.add(Z),m.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof m)m(_);else if("string"==typeof m){const I=Zn()[m];"function"==typeof I&&I(_)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,d.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,d.Z)(function*(){B(Xt()&&!ng(),m.auth,"internal-error"),yield function ME(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Ps(w){return lo.apply(this,arguments)}(m.auth);B(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ah{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=gt._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Gr(w,m,_){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,d.Z)(function*(w,m,_){const I=Pn(w),S=yield su(I,m,(0,V.m9)(_));return new Ah(S,P=>lh(I,P))})).apply(this,arguments)}function fg(w,m,_){return pn.apply(this,arguments)}function pn(){return(pn=(0,d.Z)(function*(w,m,_){const I=(0,V.m9)(w);yield Ta(!1,I,"phone");const S=yield su(I.auth,m,(0,V.m9)(_));return new Ah(S,P=>_E(I,P))})).apply(this,arguments)}function dt(w,m,_){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,d.Z)(function*(w,m,_){const I=(0,V.m9)(w),S=yield su(I.auth,m,(0,V.m9)(_));return new Ah(S,P=>On(I,P))})).apply(this,arguments)}function su(w,m,_){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,d.Z)(function*(w,m,_){var I;const S=yield _.verify();try{let P;if(B("string"==typeof S,w,"argument-error"),B(_.type===Sh,w,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const Z=P.session;if("phoneNumber"in P)return B("enroll"===Z.type,w,"internal-error"),(yield function qy(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:start",se(w,m))}(w,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{B("signin"===Z.type,w,"internal-error");const oe=(null===(I=P.multiFactorHint)||void 0===I?void 0:I.uid)||P.multiFactorUid;return B(oe,w,"missing-multi-factor-info"),(yield function ag(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:start",se(w,m))}(w,{mfaPendingCredential:Z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield function Et(w,m){return fn.apply(this,arguments)}(w,{phoneNumber:P.phoneNumber,recaptchaToken:S});return Z}}finally{_._reset()}}),Mh.apply(this,arguments)}function Wr(w,m){return zs.apply(this,arguments)}function zs(){return(zs=(0,d.Z)(function*(w,m){yield Sc((0,V.m9)(w),m)})).apply(this,arguments)}let wn=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Pn(_)}verifyPhoneNumber(_,I){return su(this.auth,_,(0,V.m9)(I))}static credential(_,I){return gt._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:S}=_;return I&&S?gt._fromTokenResponse(I,S):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function yo(w,m){return m?ot(m):(B(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class vo extends Ec{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return ks(m,this._buildIdpRequest())}_linkToIdToken(m,_){return ks(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return ks(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function wt(w){return Ay(w.auth,new vo(w),w.bypassAuthState)}function tv(w){const{auth:m,user:_}=w;return B(_,m,"internal-error"),zp(_,new vo(w),w.bypassAuthState)}function pg(w){return kc.apply(this,arguments)}function kc(){return(kc=(0,d.Z)(function*(w){const{auth:m,user:_}=w;return B(_,m,"internal-error"),Sc(_,new vo(w),w.bypassAuthState)})).apply(this,arguments)}class Gs{constructor(m,_,I,S,P=!1){this.auth=m,this.resolver=I,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,d.Z)(function*(I,S){m.pendingPromise={resolve:I,reject:S};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(I,S){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,d.Z)(function*(){const{urlResponse:I,sessionId:S,postBody:P,tenantId:Z,error:oe,type:Le}=m;if(oe)return void _.reject(oe);const $e={auth:_.auth,requestUri:I,sessionId:S,tenantId:Z||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)($e))}catch(rt){_.reject(rt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return wt;case"linkViaPopup":case"linkViaRedirect":return pg;case"reauthViaPopup":case"reauthViaRedirect":return tv;default:ee(this.auth,"internal-error")}}resolve(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ws=new dn(2e3,1e4);function Pr(w,m,_){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(w,m,_){const I=Pn(w);fe(w,m,yi);const S=yo(I,_);return new qs(I,"signInViaPopup",m,S).executeNotNull()})).apply(this,arguments)}function Zo(w,m,_){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,d.Z)(function*(w,m,_){const I=(0,V.m9)(w);fe(I.auth,m,yi);const S=yo(I.auth,_);return new qs(I.auth,"reauthViaPopup",m,S,I).executeNotNull()})).apply(this,arguments)}function ou(w,m,_){return au.apply(this,arguments)}function au(){return(au=(0,d.Z)(function*(w,m,_){const I=(0,V.m9)(w);fe(I.auth,m,yi);const S=yo(I.auth,_);return new qs(I.auth,"linkViaPopup",m,S,I).executeNotNull()})).apply(this,arguments)}let qs=(()=>{class w extends Gs{constructor(_,I,S,P,Z){super(_,I,P,Z),this.provider=S,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const I=yield _.execute();return B(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,d.Z)(function*(){Ue(1===_.filter.length,"Popup operations only handle one event");const I=Pc();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(S=>{_.reject(S)}),_.resolver._isIframeWebStorageSupported(_.auth,S=>{S||_.reject(he(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(he(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,S;this.pollId=null!==(S=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(he(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Ws.get())};_()}}return w.currentPopupAction=null,w})();const Fc="pendingRedirect",_s=new Map;class Ko extends Gs{constructor(m,_,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,d.Z)(function*(){let I=_s.get(_.auth._key());if(!I){try{const P=(yield function Lc(w,m){return xh.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;I=()=>Promise.resolve(P)}catch(S){I=()=>Promise.reject(S)}_s.set(_.auth._key(),I)}return _.bypassAuthState||_s.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,I=this;return(0,d.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(I,m);if("unknown"!==m.type){if(m.eventId){const S=yield I.auth._redirectUserForId(m.eventId);if(S)return I.user=S,_().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function xh(){return(xh=(0,d.Z)(function*(w,m){const _=Ph(m),I=qr(w);if(!(yield I._isAvailable()))return!1;const S="true"===(yield I._get(_));return yield I._remove(_),S})).apply(this,arguments)}function Uc(w,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,d.Z)(function*(w,m){return qr(w)._set(Ph(m),"true")})).apply(this,arguments)}function Co(){_s.clear()}function Vc(w,m){_s.set(w._key(),m)}function qr(w){return ot(w._redirectPersistence)}function Ph(w){return qn(Fc,w.config.apiKey,w.name)}function cu(w,m,_){return function vi(w,m,_){return Tn.apply(this,arguments)}(w,m,_)}function Tn(){return(Tn=(0,d.Z)(function*(w,m,_){const I=Pn(w);fe(w,m,yi),yield I._initializationPromise;const S=yo(I,_);return yield Uc(S,I),S._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function an(w,m,_){return function Na(w,m,_){return wr.apply(this,arguments)}(w,m,_)}function wr(){return(wr=(0,d.Z)(function*(w,m,_){const I=(0,V.m9)(w);fe(I.auth,m,yi),yield I.auth._initializationPromise;const S=yo(I.auth,_);yield Uc(S,I.auth);const P=yield Qi(I);return S._openRedirect(I.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function si(w,m,_){return function Bc(w,m,_){return jc.apply(this,arguments)}(w,m,_)}function jc(){return(jc=(0,d.Z)(function*(w,m,_){const I=(0,V.m9)(w);fe(I.auth,m,yi),yield I.auth._initializationPromise;const S=yo(I.auth,_);yield Ta(!1,I,m.providerId),yield Uc(S,I.auth);const P=yield Qi(I);return S._openRedirect(I.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function nv(w,m){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(w,m){return yield Pn(w)._initializationPromise,wo(w,m,!1)})).apply(this,arguments)}function wo(w,m){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,d.Z)(function*(w,m,_=!1){const I=Pn(w),S=yo(I,m),Z=yield new Ko(I,S,_).execute();return Z&&!_&&(delete Z.user._redirectEventId,yield I._persistUserIfCurrent(Z.user),yield I._setRedirectUser(null,m)),Z})).apply(this,arguments)}function Qi(w){return lu.apply(this,arguments)}function lu(){return(lu=(0,d.Z)(function*(w){const m=Pc(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class Ra{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(_=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function ka(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oh(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var I;if(m.error&&!Oh(m)){const S=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(he(this.auth,S))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const I=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gg(m))}saveEventToCache(m){this.cachedEventUids.add(gg(m)),this.lastProcessedEventTime=Date.now()}}function gg(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Oh({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Nh(w){return uu.apply(this,arguments)}function uu(){return(uu=(0,d.Z)(function*(w,m={}){return pe(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Tt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Io=/^https?/;function Eo(){return(Eo=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Nh(w);for(const _ of m)try{if(mg(_))return}catch{}ee(w,"unauthorized-domain")})).apply(this,arguments)}function mg(w){const m=ct(),{protocol:_,hostname:I}=new URL(m);if(w.startsWith("chrome-extension://")){const Z=new URL(w);return""===Z.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&Z.hostname===I}if(!Io.test(_))return!1;if(Tt.test(w))return I===w;const S=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(I)}const _g=new dn(3e4,6e4);function Zr(){const w=Zn().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let nr=null;const vg=new dn(5e3,15e3),du="__/auth/iframe",Cg="emulator/auth/iframe",wg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fa(w){const m=w.config;B(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?Fr(m,Cg):`https://${w.config.authDomain}/${du}`,I={apiKey:m.apiKey,appName:w.name,v:F.SDK_VERSION},S=hu.get(w.config.apiHost);S&&(I.eid=S);const P=w._getFrameworks();return P.length&&(I.fw=P.join(",")),`${_}?${(0,V.xO)(I).slice(1)}`}function Zs(){return Zs=(0,d.Z)(function*(w){const m=yield function bo(w){return nr=nr||function yg(w){return new Promise((m,_)=>{var I,S,P;function Z(){Zr(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Zr(),_(he(w,"network-request-failed"))},timeout:_g.get()})}if(null!==(S=null===(I=Zn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==S&&S.Iframe)m(gapi.iframes.getContext());else{if(null===(P=Zn().gapi)||void 0===P||!P.load){const oe=Ns("iframefcb");return Zn()[oe]=()=>{gapi.load?Z():_(he(w,"network-request-failed"))},Ll(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>_(Le))}Z()}}).catch(m=>{throw nr=null,m})}(w),nr}(w),_=Zn().gapi;return B(_,w,"internal-error"),m.open({where:document.body,url:Fa(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wg,dontclear:!0},I=>new Promise(function(){var S=(0,d.Z)(function*(P,Z){yield I.restyle({setHideOnLeave:!1});const oe=he(w,"network-request-failed"),Le=Zn().setTimeout(()=>{Z(oe)},vg.get());function $e(){Zn().clearTimeout(Le),P(I)}I.ping($e).then($e,()=>{Z(oe)})});return function(P,Z){return S.apply(this,arguments)}}()))}),Zs.apply(this,arguments)}const $c={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ea{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ig="__/auth/handler",PE="emulator/auth/handler",Rh=encodeURIComponent("fac");function Ni(w,m,_,I,S,P){return gu.apply(this,arguments)}function gu(){return(gu=(0,d.Z)(function*(w,m,_,I,S,P){B(w.config.authDomain,w,"auth-domain-config-required"),B(w.config.apiKey,w,"invalid-api-key");const Z={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:F.SDK_VERSION,eventId:S};if(m instanceof yi){m.setDefaultLanguage(w.languageCode),Z.providerId=m.providerId||"",(0,V.xb)(m.getCustomParameters())||(Z.customParameters=JSON.stringify(m.getCustomParameters()));for(const[rt,Ot]of Object.entries(P||{}))Z[rt]=Ot}if(m instanceof Br){const rt=m.getScopes().filter(Ot=>""!==Ot);rt.length>0&&(Z.scopes=rt.join(","))}w.tenantId&&(Z.tid=w.tenantId);const oe=Z;for(const rt of Object.keys(oe))void 0===oe[rt]&&delete oe[rt];const Le=yield w._getAppCheckToken(),$e=Le?`#${Rh}=${encodeURIComponent(Le)}`:"";return`${function mu({config:w}){return w.emulator?Fr(w,PE):`https://${w.authDomain}/${Ig}`}(w)}?${(0,V.xO)(oe).slice(1)}${$e}`})).apply(this,arguments)}const jn="webStorageSupport",Ks=class kh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nu,this._completeRedirectFn=wo,this._overrideRedirectResult=Vc}_openPopup(m,_,I,S){var P=this;return(0,d.Z)(function*(){var Z;Ue(null===(Z=P.eventManagers[m._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const oe=yield Ni(m,_,I,ct(),S);return function xE(w,m,_,I=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),Z=Math.max((window.screen.availWidth-I)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},$c),{width:I.toString(),height:S.toString(),top:P,left:Z}),$e=(0,V.z$)().toLowerCase();_&&(oe=x($e)?"_blank":_),O($e)&&(m=m||"http://localhost",Le.scrollbars="yes");const rt=Object.entries(Le).reduce((Or,[Ri,Ys])=>`${Or}${Ri}=${Ys},`,"");if(function Ct(w=(0,V.z$)()){var m;return Ze(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}($e)&&"_self"!==oe)return function pu(w,m){const _=document.createElement("a");_.href=w,_.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(m||"",oe),new ea(null);const Ot=window.open(m||"",oe,rt);B(Ot,w,"popup-blocked");try{Ot.focus()}catch{}return new ea(Ot)}(m,oe,Pc())})()}_openRedirect(m,_,I,S){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(m),function bh(w){Zn().location.href=w}(yield Ni(m,_,I,ct(),S)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:S,promise:P}=this.eventManagers[_];return S?Promise.resolve(S):(Ue(P,"If manager is not set, promise should be"),P)}const I=this.initAndGetManager(m);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(m){var _=this;return(0,d.Z)(function*(){const I=yield function Xo(w){return Zs.apply(this,arguments)}(m),S=new Ra(m);return I.register("authEvent",P=>(B(P?.authEvent,m,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:S},_.iframes[m._key()]=I,S})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(jn,{type:jn},S=>{var P;const Z=null===(P=S?.[0])||void 0===P?void 0:P[jn];void 0!==Z&&_(!!Z),ee(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Jo(w){return Eo.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return xt()||N()||Ze()}};class Eg{constructor(m){this.factorId=m}_process(m,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,I);case"signin":return this._finalizeSignIn(m,_.credential);default:return Ce("unexpected MultiFactorSessionType")}}}class Kr extends Eg{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Kr(m)}_finalizeEnroll(m,_,I){return function wh(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:finalize",se(w,m))}(m,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function cg(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:finalize",se(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let La=(()=>{class w{constructor(){}static assertion(_){return Kr._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var sv="@firebase/auth";class OE{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(I=>{m(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ov=(0,V.Pz)("authIdTokenMaxAge")||300;let yu=null;const av=w=>function(){var m=(0,d.Z)(function*(_){const I=_&&(yield _.getIdTokenResult()),S=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(S&&S>ov)return;const P=I?.token;yu!==P&&(yu=P,yield fetch(w,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function ta(w=(0,F.getApp)()){const m=(0,F._getProvider)(w,"auth");if(m.isInitialized())return m.getImmediate();const _=function pi(w,m){const _=(0,F._getProvider)(w,"auth");if(_.isInitialized()){const S=_.getImmediate(),P=_.getOptions();if((0,V.vZ)(P,m??{}))return S;ee(S,"already-initialized")}return _.initialize({options:m})}(w,{popupRedirectResolver:Ks,persistence:[gs,Eh,nu]}),I=(0,V.Pz)("authTokenSyncURL");if(I){const P=av(I);(function Xp(w,m,_){(0,V.m9)(w).beforeAuthStateChanged(m,_)})(_,P,()=>P(_.currentUser)),function zy(w,m,_,I){(0,V.m9)(w).onIdTokenChanged(m,_,I)}(_,Z=>P(Z))}const S=(0,V.q4)("auth");return S&&Yd(_,`http://${S}`),_}!function Fh(w){(0,F._registerComponent)(new Ee.wA("auth",(m,{options:_})=>{const I=m.getProvider("app").getImmediate(),S=m.getProvider("heartbeat"),P=m.getProvider("app-check-internal"),{apiKey:Z,authDomain:oe}=I.options;B(Z&&!Z.includes(":"),"invalid-api-key",{appName:I.name});const Le={apiKey:Z,authDomain:oe,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cc(w)},$e=new Go(I,S,P,Le);return function by(w,m){const _=m?.persistence||[],I=(Array.isArray(_)?_:[_]).map(ot);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(I,m?.popupRedirectResolver)}($e,_),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,I)=>{m.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new Ee.wA("auth-internal",m=>{const _=Pn(m.getProvider("auth").getImmediate());return new OE(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(sv,"0.23.2",function Ci(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,F.registerVersion)(sv,"0.23.2","esm2017")}("Browser")},9058:(st,Ie,k)=>{k.d(Ie,{$s:()=>ot,BH:()=>re,DV:()=>Un,G6:()=>Fr,GJ:()=>En,L:()=>De,LL:()=>Oe,P0:()=>at,Pz:()=>he,Sg:()=>fe,UG:()=>Ce,UI:()=>Mr,US:()=>Ee,Wl:()=>ft,Yr:()=>dn,ZB:()=>X,ZR:()=>pe,aH:()=>ee,b$:()=>Xt,cI:()=>en,dS:()=>Ai,eu:()=>ce,g5:()=>F,gK:()=>Gt,gQ:()=>bt,h$:()=>Fe,hl:()=>ie,hu:()=>V,jU:()=>Ue,m9:()=>qn,ne:()=>rn,p$:()=>W,pd:()=>_t,q4:()=>tt,r3:()=>nn,ru:()=>ct,tV:()=>U,uI:()=>B,ug:()=>Zi,vZ:()=>cr,w1:()=>Cn,w9:()=>An,xO:()=>ds,xb:()=>fi,z$:()=>ke,zI:()=>le,zd:()=>ht});const d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},V=function(H,$){if(!H)throw F($)},F=function(H){return new Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},te=function(H){const $=[];let O=0;for(let N=0;N<H.length;N++){let x=H.charCodeAt(N);x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):55296==(64512&x)&&N+1<H.length&&56320==(64512&H.charCodeAt(N+1))?(x=65536+((1023&x)<<10)+(1023&H.charCodeAt(++N)),$[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,$){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,N=[];for(let x=0;x<H.length;x+=3){const K=H[x],me=x+1<H.length,Be=me?H[x+1]:0,vt=x+2<H.length,Ze=vt?H[x+2]:0;let hn=(15&Be)<<2|Ze>>6,xt=63&Ze;vt||(xt=64,me||(hn=64)),N.push(O[K>>2],O[(3&K)<<4|Be>>4],O[hn],O[xt])}return N.join("")},encodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(H):this.encodeByteArray(te(H),$)},decodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(H):function(H){const $=[];let O=0,N=0;for(;O<H.length;){const x=H[O++];if(x<128)$[N++]=String.fromCharCode(x);else if(x>191&&x<224){const K=H[O++];$[N++]=String.fromCharCode((31&x)<<6|63&K)}else if(x>239&&x<365){const vt=((7&x)<<18|(63&H[O++])<<12|(63&H[O++])<<6|63&H[O++])-65536;$[N++]=String.fromCharCode(55296+(vt>>10)),$[N++]=String.fromCharCode(56320+(1023&vt))}else{const K=H[O++],me=H[O++];$[N++]=String.fromCharCode((15&x)<<12|(63&K)<<6|63&me)}}return $.join("")}(this.decodeStringToByteArray(H,$))},decodeStringToByteArray(H,$){this.init_();const O=$?this.charToByteMapWebSafe_:this.charToByteMap_,N=[];for(let x=0;x<H.length;){const K=O[H.charAt(x++)],Be=x<H.length?O[H.charAt(x)]:0;++x;const Ze=x<H.length?O[H.charAt(x)]:64;++x;const Ct=x<H.length?O[H.charAt(x)]:64;if(++x,null==K||null==Be||null==Ze||null==Ct)throw new Re;N.push(K<<2|Be>>4),64!==Ze&&(N.push(Be<<4&240|Ze>>2),64!==Ct&&N.push(Ze<<6&192|Ct))}return N},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class Re extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(H){const $=te(H);return Ee.encodeByteArray($,!0)},De=function(H){return Fe(H).replace(/\./g,"")},U=function(H){try{return Ee.decodeString(H,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function W(H){return X(void 0,H)}function X(H,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return $}for(const O in $)!$.hasOwnProperty(O)||!Pe(O)||(H[O]=X(H[O],$[O]));return H}function Pe(H){return"__proto__"!==H}const Te=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=H&&U(H[1]);return $&&JSON.parse($)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},tt=H=>{var $,O;return null===(O=null===($=Te())||void 0===$?void 0:$.emulatorHosts)||void 0===O?void 0:O[H]},at=H=>{const $=tt(H);if(!$)return;const O=$.lastIndexOf(":");if(O<=0||O+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const N=parseInt($.substring(O+1),10);return"["===$[0]?[$.substring(1,O-1),N]:[$.substring(0,O),N]},ee=()=>{var H;return null===(H=Te())||void 0===H?void 0:H.config},he=H=>{var $;return null===($=Te())||void 0===$?void 0:$[`_${H}`]};class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,O)=>{this.resolve=$,this.reject=O})}wrapCallback($){return(O,N)=>{O?this.reject(O):this.resolve(N),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(O):$(O,N))}}}function fe(H,$){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const N=$||"demo-project",x=H.iat||0,K=H.sub||H.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${N}`,aud:N,iat:x,exp:x+3600,auth_time:x,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},H);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(me)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function B(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function Ce(){var H;const $=null===(H=Te())||void 0===H?void 0:H.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function ct(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Xt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Cn(){const H=ke();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function dn(){return!0===d.NODE_CLIENT||!0===d.NODE_ADMIN}function Fr(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ce(){return new Promise((H,$)=>{try{let O=!0;const N="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(N);x.onsuccess=()=>{x.result.close(),O||self.indexedDB.deleteDatabase(N),H(!0)},x.onupgradeneeded=()=>{O=!1},x.onerror=()=>{var K;$((null===(K=x.error)||void 0===K?void 0:K.message)||"")}}catch(O){$(O)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class pe extends Error{constructor($,O,N){super(O),this.code=$,this.customData=N,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oe.prototype.create)}}class Oe{constructor($,O,N){this.service=$,this.serviceName=O,this.errors=N}create($,...O){const N=O[0]||{},x=`${this.service}/${$}`,K=this.errors[$],me=K?function Qe(H,$){return H.replace(Ve,(O,N)=>{const x=$[N];return null!=x?String(x):`<${N}?>`})}(K,N):"Error";return new pe(x,`${this.serviceName}: ${me} (${x}).`,N)}}const Ve=/\{\$([^}]+)}/g;function en(H){return JSON.parse(H)}function ft(H){return JSON.stringify(H)}const qt=function(H){let $={},O={},N={},x="";try{const K=H.split(".");$=en(U(K[0])||""),O=en(U(K[1])||""),x=K[2],N=O.d||{},delete O.d}catch{}return{header:$,claims:O,data:N,signature:x}},An=function(H){const O=qt(H).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},En=function(H){const $=qt(H).claims;return"object"==typeof $&&!0===$.admin};function nn(H,$){return Object.prototype.hasOwnProperty.call(H,$)}function Un(H,$){if(Object.prototype.hasOwnProperty.call(H,$))return H[$]}function fi(H){for(const $ in H)if(Object.prototype.hasOwnProperty.call(H,$))return!1;return!0}function Mr(H,$,O){const N={};for(const x in H)Object.prototype.hasOwnProperty.call(H,x)&&(N[x]=$.call(O,H[x],x,H));return N}function cr(H,$){if(H===$)return!0;const O=Object.keys(H),N=Object.keys($);for(const x of O){if(!N.includes(x))return!1;const K=H[x],me=$[x];if(Vn(K)&&Vn(me)){if(!cr(K,me))return!1}else if(K!==me)return!1}for(const x of N)if(!O.includes(x))return!1;return!0}function Vn(H){return null!==H&&"object"==typeof H}function ds(H){const $=[];for(const[O,N]of Object.entries(H))Array.isArray(N)?N.forEach(x=>{$.push(encodeURIComponent(O)+"="+encodeURIComponent(x))}):$.push(encodeURIComponent(O)+"="+encodeURIComponent(N));return $.length?"&"+$.join("&"):""}function ht(H){const $={};return H.replace(/^\?/,"").split("&").forEach(N=>{if(N){const[x,K]=N.split("=");$[decodeURIComponent(x)]=decodeURIComponent(K)}}),$}function _t(H){const $=H.indexOf("?");if(!$)return"";const O=H.indexOf("#",$);return H.substring($,O>0?O:void 0)}class bt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,O){O||(O=0);const N=this.W_;if("string"==typeof $)for(let Ct=0;Ct<16;Ct++)N[Ct]=$.charCodeAt(O)<<24|$.charCodeAt(O+1)<<16|$.charCodeAt(O+2)<<8|$.charCodeAt(O+3),O+=4;else for(let Ct=0;Ct<16;Ct++)N[Ct]=$[O]<<24|$[O+1]<<16|$[O+2]<<8|$[O+3],O+=4;for(let Ct=16;Ct<80;Ct++){const hn=N[Ct-3]^N[Ct-8]^N[Ct-14]^N[Ct-16];N[Ct]=4294967295&(hn<<1|hn>>>31)}let Ze,Zt,x=this.chain_[0],K=this.chain_[1],me=this.chain_[2],Be=this.chain_[3],vt=this.chain_[4];for(let Ct=0;Ct<80;Ct++){Ct<40?Ct<20?(Ze=Be^K&(me^Be),Zt=1518500249):(Ze=K^me^Be,Zt=1859775393):Ct<60?(Ze=K&me|Be&(K|me),Zt=2400959708):(Ze=K^me^Be,Zt=3395469782);const hn=(x<<5|x>>>27)+Ze+vt+Zt+N[Ct]&4294967295;vt=Be,Be=me,me=4294967295&(K<<30|K>>>2),K=x,x=hn}this.chain_[0]=this.chain_[0]+x&4294967295,this.chain_[1]=this.chain_[1]+K&4294967295,this.chain_[2]=this.chain_[2]+me&4294967295,this.chain_[3]=this.chain_[3]+Be&4294967295,this.chain_[4]=this.chain_[4]+vt&4294967295}update($,O){if(null==$)return;void 0===O&&(O=$.length);const N=O-this.blockSize;let x=0;const K=this.buf_;let me=this.inbuf_;for(;x<O;){if(0===me)for(;x<=N;)this.compress_($,x),x+=this.blockSize;if("string"==typeof $){for(;x<O;)if(K[me]=$.charCodeAt(x),++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}else for(;x<O;)if(K[me]=$[x],++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}this.inbuf_=me,this.total_+=O}digest(){const $=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let x=this.blockSize-1;x>=56;x--)this.buf_[x]=255&O,O/=256;this.compress_(this.buf_);let N=0;for(let x=0;x<5;x++)for(let K=24;K>=0;K-=8)$[N]=this.chain_[x]>>K&255,++N;return $}}function rn(H,$){const O=new ti(H,$);return O.subscribe.bind(O)}class ti{constructor($,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{$(this)}).catch(N=>{this.error(N)})}next($){this.forEachObserver(O=>{O.next($)})}error($){this.forEachObserver(O=>{O.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,O,N){let x;if(void 0===$&&void 0===O&&void 0===N)throw new Error("Missing Observer.");x=function Rt(H,$){if("object"!=typeof H||null===H)return!1;for(const O of $)if(O in H&&"function"==typeof H[O])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:O,complete:N},void 0===x.next&&(x.next=Mn),void 0===x.error&&(x.error=Mn),void 0===x.complete&&(x.complete=Mn);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),K}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,$)}sendOne($,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{O(this.observers[$])}catch(N){typeof console<"u"&&console.error&&console.error(N)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mn(){}function Gt(H,$){return`${H} failed: ${$} argument `}const Ai=function(H){const $=[];let O=0;for(let N=0;N<H.length;N++){let x=H.charCodeAt(N);if(x>=55296&&x<=56319){const K=x-55296;N++,V(N<H.length,"Surrogate pair missing trail surrogate."),x=65536+(K<<10)+(H.charCodeAt(N)-56320)}x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):x<65536?($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},Zi=function(H){let $=0;for(let O=0;O<H.length;O++){const N=H.charCodeAt(O);N<128?$++:N<2048?$+=2:N>=55296&&N<=56319?($+=4,O++):$+=3}return $},lr=1e3,ze=2,_e=144e5,Xe=.5;function ot(H,$=lr,O=ze){const N=$*Math.pow(O,H),x=Math.round(Xe*N*(Math.random()-.5)*2);return Math.min(_e,N+x)}function qn(H){return H&&H._delegate?H._delegate:H}},9754:(st,Ie,k)=>{var d=k(5879);let V=null;function F(){return V}class ge{}const Ee=new d.OlP("DocumentToken");let Re=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(De)},providedIn:"platform"})}return n})();const Fe=new d.OlP("Location Initialized");let De=(()=>{class n extends Re{constructor(){super(),this._doc=(0,d.f3M)(Ee),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function W(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Je)},providedIn:"root"})}return n})();const Me=new d.OlP("appBaseHref");let Je=(()=>{class n extends Pe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(Ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+X(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+X(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Re),d.LFG(Me,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ve=(()=>{class n extends Pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=U(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+X(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+X(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Re),d.LFG(Me,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})(),Ae=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(W(at(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function tt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,at(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=X;static#t=this.joinWithSlash=U;static#n=this.stripTrailingSlash=W;static#r=this.\u0275fac=function(r){return new(r||n)(d.LFG(Pe))};static#i=this.\u0275prov=d.Yz7({token:n,factory:function(){return function Te(){return new Ae((0,d.LFG)(Pe))}()},providedIn:"root"})}return n})();function at(n){return n.replace(/\/index.html$/,"")}var re=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(re||{}),Ue=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Ue||{});function pe(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Ue.CurrencyDecimal)return t[d.wAp.NumberSymbols][Ue.Decimal];if(e===Ue.CurrencyGroup)return t[d.wAp.NumberSymbols][Ue.Group]}return r}const x=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function zo(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Ca(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}const Ul=/\s+/,Kd=[];let wa=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=Kd,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Ul):Kd}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Ul):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Ul).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Ic{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Go=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ic(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),Pn(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Pn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Pn(n,e){n.context.$implicit=e.item}let pi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new by,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Yd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Yd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class by{constructor(){this.$implicit=null,this.ngIf=null}}function Yd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}function gi(n,e){return new d.vHH(2100,!1)}class Vl{createSubscription(e,t){return(0,d.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,d.rg0)(()=>e.unsubscribe())}}class eh{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Bl=new eh,th=new Vl;let jl=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return Bl;if((0,d.F4k)(t))return th;throw gi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.sBO,16))};static#t=this.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),je=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function mi(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Ps(n,e,t){return function xt(n,e,t,r,i,a,l=!1){let f="",g=!1;if(isFinite(n)){let y=function xi(n){let r,i,a,l,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(i<0&&(i=a),i+=+e.slice(a+1),e=e.substring(0,a)):i<0&&(i=e.length),a=0;"0"===e.charAt(a);a++);if(a===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=a,r=[],l=0;a<=f;a++,l++)r[l]=Number(e.charAt(a))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(y=function Os(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let E=e.minInt,T=e.minFrac,A=e.maxFrac;if(a){const He=a.match(x);if(null===He)throw new Error(`${a} is not a valid digit info`);const Ne=He[1],Ye=He[3],mt=He[5];null!=Ne&&(E=zo(Ne)),null!=Ye&&(T=zo(Ye)),null!=mt?A=zo(mt):null!=Ye&&T>A&&(A=T)}!function Wt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const a=Math.min(Math.max(e,i),t);let l=a+n.integerLen,f=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let T=l;T<r.length;T++)r[T]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=a+1),r[0]=0;for(let T=1;T<l;T++)r[T]=0}if(f>=5)if(l-1<0){for(let T=0;T>l;T--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,a);i++)r.push(0);let g=0!==a;const y=e+n.integerLen,E=r.reduceRight(function(T,A,R,G){return G[R]=(A+=T)<10?A:A-10,g&&(0===G[R]&&R>=y?G.pop():g=!1),A>=10?1:0},0);E&&(r.unshift(E),n.integerLen++)}(y,T,A);let R=y.digits,G=y.integerLen;const Q=y.exponent;let J=[];for(g=R.every(He=>!He);G<E;G++)R.unshift(0);for(;G<0;G++)R.unshift(0);G>0?J=R.splice(G,R.length):(J=R,R=[0]);const we=[];for(R.length>=e.lgSize&&we.unshift(R.splice(-e.lgSize,R.length).join(""));R.length>e.gSize;)we.unshift(R.splice(-e.gSize,R.length).join(""));R.length&&we.unshift(R.join("")),f=we.join(pe(t,r)),J.length&&(f+=pe(t,i)+J.join("")),Q&&(f+=pe(t,Ue.Exponential)+"+"+Q)}else f=pe(t,Ue.Infinity);return f=n<0&&!g?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function lo(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],a=r[1],l=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=l[0],g=l[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let E=0;E<g.length;E++){const T=g.charAt(E);"0"===T?t.minFrac=t.maxFrac=E+1:"#"===T?t.maxFrac=E+1:t.posSuf+=T}const y=f.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,a){const E=i.length-t.posPre.length-t.posSuf.length,T=a.indexOf("#");t.negPre=a.substring(0,T).replace(/'/g,""),t.negSuf=a.slice(T+E).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Oe(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,re.Decimal),pe(e,Ue.MinusSign)),e,Ue.Group,Ue.Decimal,t)}(function Fs(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(a){throw gi()}}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.soG,16))};static#t=this.\u0275pipe=d.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let _r=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw gi();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),Bn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function _i(n){return"server"===n}let Br=(()=>{class n{static#e=this.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Us((0,d.LFG)(Ee),window)})}return n})();class Us{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $p(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class fs{}class Jp extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class mh extends Jp{static makeCurrent(){!function te(n){V||(V=n)}(new mh)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function wE(){return xc=xc||document.querySelector("base"),xc?xc.getAttribute("href"):null}();return null==t?null:function zy(n){_h=_h||document.createElement("a"),_h.setAttribute("href",n);const e=_h.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){xc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ca(document.cookie,e)}}let _h,xc=null,IE=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const Gy=new d.OlP("EventManagerPlugins");let Wy=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Gy),d.LFG(d.R0b))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class yh{constructor(e){this._doc=e}}const vh="ng-app-id";let Xl=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_i(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${vh}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(vh),a;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(vh,this.appId),l}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,l=a.get(r)?.elements;l?l.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const js={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Aa=/%COMP%/g,ps=new d.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function sn(n,e){return e.map(t=>t.replace(Aa,n))}let tu=(()=>{class n{constructor(t,r,i,a,l,f,g,y=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=l,this.platformId=f,this.ngZone=g,this.nonce=y,this.rendererByCompId=new Map,this.platformIsServer=_i(f),this.defaultRenderer=new $s(t,l,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===d.ifc.ShadowDom&&(r={...r,encapsulation:d.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Eh?i.applyToHost(t):i instanceof ii&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const l=this.doc,f=this.ngZone,g=this.eventManager,y=this.sharedStylesHost,E=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(r.encapsulation){case d.ifc.Emulated:a=new Eh(g,y,r,this.appId,E,l,f,T);break;case d.ifc.ShadowDom:return new Ma(g,y,t,r,l,f,this.nonce,T);default:a=new ii(g,y,r,E,l,f,T)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Wy),d.LFG(Xl),d.LFG(d.AFp),d.LFG(ps),d.LFG(Ee),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class $s{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(js[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Ih(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ih(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new d.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=js[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=js[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=F().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Ih(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ma extends $s{constructor(e,t,r,i,a,l,f,g){super(e,a,l,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const y=sn(i.id,i.styles);for(const E of y){const T=document.createElement("style");f&&T.setAttribute("nonce",f),T.textContent=E,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ii extends $s{constructor(e,t,r,i,a,l,f,g){super(e,a,l,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?sn(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Eh extends ii{constructor(e,t,r,i,a,l,f,g){const y=i+"-"+r.id;super(e,t,r,a,l,f,g,y),this.contentAttr=function eg(n){return"_ngcontent-%COMP%".replace(Aa,n)}(y),this.hostAttr=function eu(n){return"_nghost-%COMP%".replace(Aa,n)}(y)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let TE=(()=>{class n extends yh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const nu=["alt","control","meta","shift"],go={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Pc=(()=>{class n extends yh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),nu.forEach(y=>{const E=r.indexOf(y);E>-1&&(r.splice(E,1),l+=y+".")}),l+=a,0!=r.length||0===a.length)return null;const g={};return g.domEventName=i,g.fullKey=l,g}static matchEventFullKeyCode(t,r){let i=go[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),nu.forEach(l=>{l!==i&&(0,tg[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const ig=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function yt(){mh.makeCurrent()},multi:!0},{provide:Ee,useFactory:function DE(){return(0,d.RDi)(document),document},deps:[]}]),Ky=new d.OlP(""),xa=[{provide:d.rWj,useClass:class Xp{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new d.vHH(5103,!1);return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(g){l=l||g,a--,0==a&&r(l)};i.forEach(g=>{g.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],mo=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function ru(){return new d.qLn},deps:[]},{provide:Gy,useClass:TE,multi:!0,deps:[Ee,d.R0b,d.Lbi]},{provide:Gy,useClass:Pc,multi:!0,deps:[Ee]},tu,Xl,Wy,{provide:d.FYo,useExisting:tu},{provide:fs,useClass:IE,deps:[]},[]];let Oc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ky,12))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[...mo,...xa],imports:[Bn,d.hGG]})}return n})(),ye=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee))};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function og(){return new ye((0,d.LFG)(Ee))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var Gr=k(5592),Hs=k(4674),pn=k(2459),dt=k(2096),Cr=k(5619);const{isArray:su}=Array,{getPrototypeOf:Mh,prototype:Wr,keys:zs}=Object;function wn(n){if(1===n.length){const e=n[0];if(su(e))return{args:e,keys:null};if(function yo(n){return n&&"object"==typeof n&&Mh(n)===Wr}(e)){const t=zs(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var vo=k(2737),wt=k(7398);const{isArray:tv}=Array;function kc(n){return(0,wt.U)(e=>function pg(n,e){return tv(e)?n(...e):n(e)}(n,e))}var Gs=k(9940);function Ws(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Pr=k(8251),Pa=k(7103);function Zo(...n){const e=(0,Gs.yG)(n),t=(0,Gs.jO)(n),{args:r,keys:i}=wn(n);if(0===r.length)return(0,pn.D)([],e);const a=new Gr.y(function Oa(n,e,t=vo.y){return r=>{ou(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let g=0;g<i;g++)ou(e,()=>{const y=(0,pn.D)(n[g],e);let E=!1;y.subscribe((0,Pr.x)(r,T=>{a[g]=T,E||(E=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Ws(i,l):vo.y));return t?a.pipe(kc(t)):a}function ou(n,e,t){n?(0,Pa.f)(t,n,e):e()}const qs=(0,k(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Fc=k(7537);function Ko(...n){return function _s(){return(0,Fc.J)(1)}()((0,pn.D)(n,(0,Gs.yG)(n)))}var Lc=k(4829);function xh(n){return new Gr.y(e=>{(0,Lc.Xf)(n()).subscribe(e)})}var Uc=k(8407);function Yo(n,e){const t=(0,Hs.m)(n)?n:()=>n,r=i=>i.error(t());return new Gr.y(e?i=>e.schedule(r,0,i):r)}var Co=k(6232),Vc=k(7394),qr=k(9360);function Ph(){return(0,qr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Pr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cu extends Gr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,qr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Vc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Pr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Vc.w0.EMPTY)}return e}refCount(){return Ph()(this)}}var vi=k(8645),Tn=k(4664);function an(n){return n<=0?()=>Co.E:(0,qr.e)((e,t)=>{let r=0;e.subscribe((0,Pr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Na(...n){const e=(0,Gs.yG)(n);return(0,qr.e)((t,r)=>{(e?Ko(n,t,e):Ko(n,t)).subscribe(r)})}function wr(n,e){return(0,qr.e)((t,r)=>{let i=0;t.subscribe((0,Pr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var si=k(1631);function Bc(n){return(0,qr.e)((e,t)=>{let r=!1;e.subscribe((0,Pr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function jc(n=nv){return(0,qr.e)((e,t)=>{let r=!1;e.subscribe((0,Pr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function nv(){return new qs}function tr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wr((i,a)=>n(i,a,r)):vo.y,an(1),t?Bc(e):jc(()=>new qs))}function wo(n,e){return(0,Hs.m)(e)?(0,si.z)(n,e,1):(0,si.z)(n,1)}function Dn(n,e,t){const r=(0,Hs.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,qr.e)((i,a)=>{var l;null===(l=r.subscribe)||void 0===l||l.call(r);let f=!0;i.subscribe((0,Pr.x)(a,g=>{var y;null===(y=r.next)||void 0===y||y.call(r,g),a.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),a.complete()},g=>{var y;f=!1,null===(y=r.error)||void 0===y||y.call(r,g),a.error(g)},()=>{var g,y;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(y=r.finalize)||void 0===y||y.call(r)}))}):vo.y}function Qi(n){return(0,qr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Pr.x)(t,void 0,void 0,l=>{a=(0,Lc.Xf)(n(l,Qi(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Qo(n,e){return(0,qr.e)(function lu(n,e,t,r,i){return(a,l)=>{let f=t,g=e,y=0;a.subscribe((0,Pr.x)(l,E=>{const T=y++;g=f?n(g,E,T):(f=!0,E),r&&l.next(g)},i&&(()=>{f&&l.next(g),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Ra(n){return n<=0?()=>Co.E:(0,qr.e)((e,t)=>{let r=[];e.subscribe((0,Pr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ka(n){return(0,qr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Nh=k(2420);const Tt="primary",Io=Symbol("RouteTitle");class Jo{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Eo(n){return new Jo(n)}function mg(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!yg(n[i],e[i]))return!1;return!0}function yg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function nr(n){return n.length>0?n[n.length-1]:null}function bo(n){return function fg(n){return!!n&&(n instanceof Gr.y||(0,Hs.m)(n.lift)&&(0,Hs.m)(n.subscribe))}(n)?n:(0,d.QGY)(n)?(0,pn.D)(Promise.resolve(n)):(0,dt.of)(n)}const vg={exact:function hu(n,e,t){if(!ea(n.segments,e.segments)||!$c(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!hu(n.children[r],e.children[r],t))return!1;return!0},subset:Xo},du={exact:function wg(n,e){return Zr(n,e)},subset:function Fa(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yg(n[t],e[t]))},ignored:()=>!0};function Cg(n,e,t){return vg[t.paths](n.root,e.root,t.matrixParams)&&du[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Xo(n,e,t){return Zs(n,e,e.segments,t)}function Zs(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ea(i,t)||e.hasChildren()||!$c(i,t,r))}if(n.segments.length===t.length){if(!ea(n.segments,t)||!$c(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Xo(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ea(n.segments,i)&&$c(n.segments,i,r)&&n.children[Tt])&&Zs(n.children[Tt],e,a,r)}}function $c(n,e,t){return e.every((r,i)=>du[t](n[i].parameters,r.parameters))}class To{constructor(e=new Ht([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Eo(this.queryParams)),this._queryParamMap}toString(){return PE.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rh(this)}}class fu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Eo(this.parameters)),this._parameterMap}toString(){return Kr(this)}}function ea(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let pu=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new Ig},providedIn:"root"})}return n})();class Ig{parse(e){const t=new Va(e);return new To(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ni(e.root,!0)}`,r=function iv(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${mu(t)}=${mu(i)}`).join("&"):`${mu(t)}=${mu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function jn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const PE=new Ig;function Rh(n){return n.segments.map(e=>Kr(e)).join("/")}function Ni(n,e){if(!n.hasChildren())return Rh(n);if(e){const t=n.children[Tt]?Ni(n.children[Tt],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==Tt&&r.push(`${i}:${Ni(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function xE(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Tt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Tt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Tt?[Ni(n.children[Tt],!1)]:[`${i}:${Ni(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${Rh(n)}/${t[0]}`:`${Rh(n)}/(${t.join("//")})`}}function gu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mu(n){return gu(n).replace(/%3B/gi,";")}function kh(n){return gu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ks(n){return decodeURIComponent(n)}function Eg(n){return Ks(n.replace(/\+/g,"%20"))}function Kr(n){return`${kh(n.path)}${function La(n){return Object.keys(n).map(e=>`;${kh(e)}=${kh(n[e])}`).join("")}(n.parameters)}`}const Ua=/^[^\/()?;#]+/;function Do(n){const e=n.match(Ua);return e?e[0]:""}const _u=/^[^\/()?;=#]+/,bg=/^[^=?&#]+/,Ci=/^[^&#]+/;class Va{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new Ht(e,t)),r}parseSegment(){const e=Do(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new fu(Ks(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function sv(n){const e=n.match(_u);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Do(this.remaining);i&&(r=i,this.capture(r))}e[Ks(t)]=Ks(r)}parseQueryParam(e){const t=function OE(n){const e=n.match(bg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Fh(n){const e=n.match(Ci);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Eg(t),a=Eg(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Do(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Tt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Tt]:new Ht([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function ov(n){return n.segments.length>0?new Ht([],{[Tt]:n}):n}function yu(n){const e={};for(const r of Object.keys(n.children)){const a=yu(n.children[r]);if(r===Tt&&0===a.segments.length&&a.hasChildren())for(const[l,f]of Object.entries(a.children))e[l]=f;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function av(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}function ta(n){return n instanceof To}function m(n){let e;const i=ov(function t(a){const l={};for(const g of a.children){const y=t(g);l[g.outlet]=y}const f=new Ht(a.url,l);return a===n&&(e=f),f}(n.root));return e??i}function _(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return P(i,i,i,t,r);const a=function Le(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oe(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([g,y])=>{f[g]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new oe(t,e,r)}(e);if(a.toRoot())return P(i,i,new Ht([],{}),t,r);const l=function rt(n,e,t){if(n.isAbsolute)return new $e(e,!0,0);if(!t)return new $e(e,!1,NaN);if(null===t.parent)return new $e(t,!0,0);const r=I(n.commands[0])?0:1;return function Ot(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new $e(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),f=l.processChildren?Ys(l.segmentGroup,l.index,a.commands):Ri(l.segmentGroup,l.index,a.commands);return P(i,l.segmentGroup,f,t,r)}function I(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function S(n){return"object"==typeof n&&null!=n&&n.outlets}function P(n,e,t,r,i){let l,a={};r&&Object.entries(r).forEach(([g,y])=>{a[g]=Array.isArray(y)?y.map(E=>`${E}`):`${y}`}),l=n===e?t:Z(n,e,t);const f=ov(yu(l));return new To(f,a,i)}function Z(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:Z(a,e,t)}),new Ht(n.segments,r)}class oe{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&I(r[0]))throw new d.vHH(4003,!1);const i=r.find(S);if(i&&i!==nr(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $e{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ri(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return Ys(n,e,t);const r=function Tg(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(S(f))break;const g=`${f}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!vu(g,y,l))return a;r+=2}else{if(!vu(g,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Ht(n.segments.slice(0,r.pathIndex),{});return a.children[Tt]=new Ht(n.segments.slice(r.pathIndex),n.children),Ys(a,0,i)}return r.match&&0===i.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?Hc(n,e,t):r.match?Ys(n,0,i):Hc(n,e,t)}function Ys(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function Or(n){return S(n[0])?n[0].outlets:{[Tt]:n}}(t),i={};if(Object.keys(r).some(a=>a!==Tt)&&n.children[Tt]&&1===n.numberOfChildren&&0===n.children[Tt].segments.length){const a=Ys(n.children[Tt],e,t);return new Ht(n.segments,a.children)}return Object.entries(r).forEach(([a,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[a]=Ri(n.children[a],e,l))}),Object.entries(n.children).forEach(([a,l])=>{void 0===r[a]&&(i[a]=l)}),new Ht(n.segments,i)}}function Hc(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(S(a)){const g=na(a.outlets);return new Ht(r,g)}if(0===i&&I(t[0])){r.push(new fu(n.segments[e].path,ra(t[0]))),i++;continue}const l=S(a)?a.outlets[Tt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&I(f)?(r.push(new fu(l,ra(f))),i+=2):(r.push(new fu(l,{})),i++)}return new Ht(r,{})}function na(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Hc(new Ht([],{}),0,r))}),e}function ra(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function vu(n,e,t){return n==t.path&&Zr(e,t.parameters)}const zc="imperative";class ki{constructor(e,t){this.id=e,this.url=t}}class Ba extends ki{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qs extends ki{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gc extends ki{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class So extends ki{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Cu extends ki{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lh extends ki{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NE extends ki{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mx extends ki{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class RE extends ki{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kU extends ki{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class FU{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _x{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yx{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cv{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LU{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Uh{}class FE{constructor(e){this.url=e}}class UU{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Dg,this.attachRef=null}}let Dg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new UU,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Cx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=lv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=lv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=wu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wu(e,this._root).map(t=>t.value)}}function lv(n,e){if(n===e.value)return e;for(const t of e.children){const r=lv(n,t);if(r)return r}return null}function wu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=wu(n,t);if(r.length)return r.unshift(e),r}return[]}class ys{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Wc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class uv extends Cx{constructor(e,t){super(e),this.snapshot=t,fv(this,e)}toString(){return this.snapshot.toString()}}function dv(n,e){const t=function Iu(n,e){const l=new Zc([],{},{},"",{},Tt,e,null,{});return new Vh("",new ys(l,[]))}(0,e),r=new Cr.X([new fu("",{})]),i=new Cr.X({}),a=new Cr.X({}),l=new Cr.X({}),f=new Cr.X(""),g=new qc(r,i,l,f,a,Tt,e,t.root);return g.snapshot=t.root,new uv(new ys(g,[]),t)}class qc{constructor(e,t,r,i,a,l,f,g){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=l,this.component=f,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,wt.U)(y=>y[Io]))??(0,dt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>Eo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>Eo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hv(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Sg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Zc{get title(){return this.data?.[Io]}constructor(e,t,r,i,a,l,f,g,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=g,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Eo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Eo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vh extends Cx{constructor(e,t){super(t),this.url=e,fv(this,t)}toString(){return LE(this._root)}}function fv(n,e){e.value._routerState=n,e.children.forEach(t=>fv(n,t))}function LE(n){const e=n.children.length>0?` { ${n.children.map(LE).join(", ")} } `:"";return`${n.value}${e}`}function pv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Zr(e.params,t.params)||n.paramsSubject.next(t.params),function _g(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Zr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ag(n,e){const t=Zr(n.params,e.params)&&function rv(n,e){return ea(n,e)&&n.every((t,r)=>Zr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ag(n.parent,e.parent))}let Bh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Dg),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)(Mg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new wx(t,f,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]})}return n})();class wx{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===qc?this.route:e===Dg?this.childContexts:this.parent.get(e,t)}}const Mg=new d.OlP("");let UE=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Zo([r.queryParams,r.params,r.data]).pipe((0,Tn.w)(([a,l,f],g)=>(f={...a,...l,...f},0===g?(0,dt.of)(f):Promise.resolve(f)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,d.qFp)(r.component);if(l)for(const{templateName:f}of l.inputs)t.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function jh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Ix(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return jh(n,r,i);return jh(n,r)})}(n,e,t);return new ys(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>jh(n,f)),l}}const r=function Fi(n){return new qc(new Cr.X(n.url),new Cr.X(n.params),new Cr.X(n.queryParams),new Cr.X(n.fragment),new Cr.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>jh(n,a));return new ys(r,i)}}const $h="ngNavigationCancelingError";function gv(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ta(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xg(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function xg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[$h]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Eu(n){return n&&n[$h]}let mv=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(r,i){1&r&&d._UZ(0,"router-outlet")},dependencies:[Bh],encapsulation:2})}return n})();function Hh(n){const e=n.children&&n.children.map(Hh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=mv),t}function Ji(n){return n.outlet||Tt}function ia(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class jE{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),pv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Wc(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Wc(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Wc(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Wc(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new LU(a.value.snapshot))}),e.children.length&&this.forwardEvent(new yx(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(pv(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),pv(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=ia(i.snapshot);l.attachRef=null,l.route=i,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class _v{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zh{constructor(e,t){this.component=e,this.route=t}}function bu(n,e,t){const r=n._root;return Yc(r,e?e._root:null,t,[r.value])}function Kc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Yc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Wc(e);return n.children.forEach(l=>{(function Og(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const g=function Px(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ea(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ea(n.url,e.url)||!Zr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ag(n,e)||!Zr(n.queryParams,e.queryParams);default:return!Ag(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new _v(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Yc(n,e,a.component?f?f.children:null:t,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new zh(f.outlet.component,l))}else l&&Gh(e,f,i),i.canActivateChecks.push(new _v(r)),Yc(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Object.entries(a).forEach(([l,f])=>Gh(f,t.getContext(l),i)),i}function Gh(n,e,t){const r=Wc(n),i=n.value;Object.entries(r).forEach(([a,l])=>{Gh(l,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new zh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Wh(n){return"function"==typeof n}function zE(n){return n instanceof qs||"EmptyError"===n?.name}const Tu=Symbol("INITIAL_VALUE");function Qc(){return(0,Tn.w)(n=>Zo(n.map(e=>e.pipe(an(1),Na(Tu)))).pipe((0,wt.U)(e=>{for(const t of e)if(!0!==t){if(t===Tu)return Tu;if(!1===t||t instanceof To)return t}return!0}),wr(e=>e!==Tu),an(1)))}function vv(n){return(0,Uc.z)(Dn(e=>{if(ta(e))throw gv(0,e)}),(0,wt.U)(e=>!0===e))}class qh{constructor(e){this.segmentGroup=e||null}}class Zh{constructor(e){this.urlTree=e}}function Ao(n){return Yo(new qh(n))}function wv(n){return Yo(new Zh(n))}class KE{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new d.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,dt.of)(r);if(i.numberOfChildren>1||!i.children[Tt])return Yo(new d.vHH(4e3,!1));i=i.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new To(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const f=a.substring(1);r[i]=t[f]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Object.entries(t.children).forEach(([f,g])=>{l[f]=this.createSegmentGroup(e,g,r,i)}),new Ht(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Kh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yh(n,e,t,r,i){const a=Ev(n,e,t);return a.matched?(r=function BE(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Cv(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,dt.of)(!0);const a=i.map(l=>{const f=Kc(l,n);return bo(function yv(n){return n&&Wh(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,dt.of)(a).pipe(Qc(),vv())}(r,e,t).pipe((0,wt.U)(l=>!0===l?a:{...Kh}))):(0,dt.of)(a)}function Ev(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Kh}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||mg)(t,n,e);if(!i)return{...Kh};const a={};Object.entries(i.posParams??{}).forEach(([f,g])=>{a[f]=g.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function bv(n,e,t,r){return t.length>0&&function Bx(n,e,t){return t.some(r=>Qh(n,e,r)&&Ji(r)!==Tt)}(n,t,r)?{segmentGroup:new Ht(e,Vx(r,new Ht(t,n.children))),slicedSegments:[]}:0===t.length&&function YE(n,e,t){return t.some(r=>Qh(n,e,r))}(n,t,r)?{segmentGroup:new Ht(n.segments,Ux(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ht(n.segments,n.children),slicedSegments:t}}function Ux(n,e,t,r,i){const a={};for(const l of r)if(Qh(n,t,l)&&!i[Ji(l)]){const f=new Ht([],{});a[Ji(l)]=f}return{...i,...a}}function Vx(n,e){const t={};t[Tt]=e;for(const r of n)if(""===r.path&&Ji(r)!==Tt){const i=new Ht([],{});t[Ji(r)]=i}return t}function Qh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class jx{constructor(e,t,r,i,a,l,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new KE(this.urlSerializer,this.urlTree)}noMatchError(e){return new d.vHH(4002,!1)}recognize(){const e=bv(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe(Qi(t=>{if(t instanceof Zh)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof qh?this.noMatchError(t):t}),(0,wt.U)(t=>{const r=new Zc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,{}),i=new ys(r,t),a=new Vh("",i),l=function w(n,e,t=null,r=null){return _(m(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(a._root),{state:a,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Tt).pipe(Qi(r=>{throw r instanceof qh?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=hv(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,pn.D)(i).pipe(wo(a=>{const l=r.children[a],f=function Mx(n,e){const t=n.filter(r=>Ji(r)===e);return t.push(...n.filter(r=>Ji(r)!==e)),t}(t,a);return this.processSegmentGroup(e,f,l,a)}),Qo((a,l)=>(a.push(...l),a)),Bc(null),function gg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wr((i,a)=>n(i,a,r)):vo.y,Ra(1),t?Bc(e):jc(()=>new qs))}(),(0,si.z)(a=>{if(null===a)return Ao(r);const l=QE(a);return function $x(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,dt.of)(l)}))}processSegment(e,t,r,i,a,l){return(0,pn.D)(t).pipe(wo(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,a,l).pipe(Qi(g=>{if(g instanceof qh)return(0,dt.of)(null);throw g}))),tr(f=>!!f),Qi(f=>{if(zE(f))return function Tv(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,dt.of)([]):Ao(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,a,l,f){return function Fg(n,e,t,r){return!!(Ji(n)===r||r!==Tt&&Qh(e,t,n))&&("**"===n.path||Ev(e,n,t).matched)}(r,i,a,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,l,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,l):Ao(i):Ao(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wv(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,si.z)(l=>{const f=new Ht(l,{});return this.processSegment(e,t,f,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:g,remainingSegments:y,positionalParamSegments:E}=Ev(t,i,a);if(!f)return Ao(t);const T=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,E);return i.redirectTo.startsWith("/")?wv(T):this.applyRedirects.lineralizeSegments(i,T).pipe((0,si.z)(A=>this.processSegment(e,r,t,A.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,l){let f;if("**"===r.path){const g=i.length>0?nr(i).parameters:{},y=new Zc(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,XE(r),Ji(r),r.component??r._loadedComponent??null,r,Xc(r));f=(0,dt.of)({snapshot:y,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=Yh(t,r,i,e).pipe((0,wt.U)(({matched:g,consumedSegments:y,remainingSegments:E,parameters:T})=>g?{snapshot:new Zc(y,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,XE(r),Ji(r),r.component??r._loadedComponent??null,r,Xc(r)),consumedSegments:y,remainingSegments:E}:null));return f.pipe((0,Tn.w)(g=>null===g?Ao(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Tn.w)(({routes:y})=>{const E=r._loadedInjector??e,{snapshot:T,consumedSegments:A,remainingSegments:R}=g,{segmentGroup:G,slicedSegments:Q}=bv(t,A,R,y);if(0===Q.length&&G.hasChildren())return this.processChildren(E,y,G).pipe((0,wt.U)(we=>null===we?null:[new ys(T,we)]));if(0===y.length&&0===Q.length)return(0,dt.of)([new ys(T,[])]);const J=Ji(r)===a;return this.processSegment(E,y,G,Q,J?Tt:a,!0).pipe((0,wt.U)(we=>[new ys(T,we)]))}))))}getChildConfig(e,t,r){return t.children?(0,dt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,dt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function ZE(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,dt.of)(!0);const a=i.map(l=>{const f=Kc(l,n);return bo(function Nx(n){return n&&Wh(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,dt.of)(a).pipe(Qc(),vv())}(e,t,r).pipe((0,si.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(Dn(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function kg(n){return Yo(xg(!1,3))}())):(0,dt.of)({routes:[],injector:e})}}function HU(n){const e=n.value.routeConfig;return e&&""===e.path}function QE(n){const e=[],t=new Set;for(const r of n){if(!HU(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=QE(r.children);e.push(new ys(r.value,i))}return e.filter(r=>!t.has(r))}function XE(n){return n.data||{}}function Xc(n){return n.resolve||{}}function ib(n){return"string"==typeof n.title||null===n.title}function Sv(n){return(0,Tn.w)(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,wt.U)(()=>e)):(0,dt.of)(e)})}const Su=new d.OlP("ROUTES");let Av=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,dt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=bo(t.loadComponent()).pipe((0,wt.U)(Au),Dn(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),ka(()=>{this.componentLoaders.delete(t)})),i=new cu(r,()=>new vi.x).pipe(Ph());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,dt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function Hx(n,e,t,r){return bo(n.loadChildren()).pipe((0,wt.U)(Au),(0,si.z)(i=>i instanceof d.YKP||Array.isArray(i)?(0,dt.of)(i):(0,pn.D)(e.compileModuleAsync(i))),(0,wt.U)(i=>{r&&r(n);let a,l,f=!1;return Array.isArray(i)?(l=i,!0):(a=i.create(t).injector,l=a.get(Su,[],{optional:!0,self:!0}).flat()),{routes:l.map(Hh),injector:a}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(ka(()=>{this.childrenLoaders.delete(r)})),l=new cu(a,()=>new vi.x).pipe(Ph());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Au(n){return function ja(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ug=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new vi.x,this.transitionAbortSubject=new vi.x,this.configLoader=(0,d.f3M)(Av),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(pu),this.rootContexts=(0,d.f3M)(Dg),this.inputBindingEnabled=null!==(0,d.f3M)(Mg,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,dt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new FU(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new kE(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new Cr.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:zc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wr(a=>0!==a.id),(0,wt.U)(a=>({...a,extractedUrl:t.urlHandlingStrategy.extract(a.rawUrl)})),(0,Tn.w)(a=>{this.currentTransition=a;let l=!1,f=!1;return(0,dt.of)(a).pipe(Dn(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Tn.w)(g=>{const y=g.currentBrowserUrl.toString(),E=!t.navigated||g.extractedUrl.toString()!==y||y!==g.currentUrlTree.toString();if(!E&&"reload"!==(g.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new So(g.id,this.urlSerializer.serialize(g.rawUrl),A,0)),g.resolve(null),Co.E}if(t.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return(0,dt.of)(g).pipe((0,Tn.w)(A=>{const R=this.transitions?.getValue();return this.events.next(new Ba(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),R!==this.transitions?.getValue()?Co.E:Promise.resolve(A)}),function Lg(n,e,t,r,i,a){return(0,si.z)(l=>function Du(n,e,t,r,i,a,l="emptyOnly"){return new jx(n,e,t,r,i,l,a).recognize()}(n,e,t,r,l.extractedUrl,i,a).pipe((0,wt.U)(({state:f,tree:g})=>({...l,targetSnapshot:f,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Dn(A=>{a.targetSnapshot=A.targetSnapshot,a.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects};const R=new Lh(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(R)}));if(E&&t.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:A,extractedUrl:R,source:G,restoredState:Q,extras:J}=g,we=new Ba(A,this.urlSerializer.serialize(R),G,Q);this.events.next(we);const He=dv(0,this.rootComponentType).snapshot;return this.currentTransition=a={...g,targetSnapshot:He,urlAfterRedirects:R,extras:{...J,skipLocationChange:!1,replaceUrl:!1}},(0,dt.of)(a)}{const A="";return this.events.next(new So(g.id,this.urlSerializer.serialize(g.extractedUrl),A,1)),g.resolve(null),Co.E}}),Dn(g=>{const y=new NE(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}),(0,wt.U)(g=>(this.currentTransition=a={...g,guards:bu(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},a)),function Jc(n,e){return(0,si.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?(0,dt.of)({...t,guardsResult:!0}):function GE(n,e,t,r){return(0,pn.D)(n).pipe((0,si.z)(i=>function qE(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,dt.of)(!0);const l=a.map(f=>{const g=ia(e)??i,y=Kc(f,g);return bo(function Ng(n){return n&&Wh(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):g.runInContext(()=>y(n,e,t,r))).pipe(tr())});return(0,dt.of)(l).pipe(Qc())}(i.component,i.route,t,e,r)),tr(i=>!0!==i,!0))}(l,r,i,n).pipe((0,si.z)(f=>f&&function Ox(n){return"boolean"==typeof n}(f)?function WE(n,e,t,r){return(0,pn.D)(e).pipe(wo(i=>Ko(function $U(n,e){return null!==n&&e&&e(new _x(n)),(0,dt.of)(!0)}(i.route.parent,r),function Fx(n,e){return null!==n&&e&&e(new cv(n)),(0,dt.of)(!0)}(i.route,r),function Lx(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function Pg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>xh(()=>{const f=l.guards.map(g=>{const y=ia(l.node)??t,E=Kc(g,y);return bo(function $E(n){return n&&Wh(n.canActivateChild)}(E)?E.canActivateChild(r,n):y.runInContext(()=>E(r,n))).pipe(tr())});return(0,dt.of)(f).pipe(Qc())}));return(0,dt.of)(a).pipe(Qc())}(n,i.path,t),function Rg(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,dt.of)(!0);const i=r.map(a=>xh(()=>{const l=ia(e)??t,f=Kc(a,l);return bo(function Rx(n){return n&&Wh(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(tr())}));return(0,dt.of)(i).pipe(Qc())}(n,i.route,t))),tr(i=>!0!==i,!0))}(r,a,n,e):(0,dt.of)(f)),(0,wt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,g=>this.events.next(g)),Dn(g=>{if(a.guardsResult=g.guardsResult,ta(g.guardsResult))throw gv(0,g.guardsResult);const y=new mx(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(y)}),wr(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",3),!1)),Sv(g=>{if(g.guards.canActivateChecks.length)return(0,dt.of)(g).pipe(Dn(y=>{const E=new RE(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(E)}),(0,Tn.w)(y=>{let E=!1;return(0,dt.of)(y).pipe(function Dv(n,e){return(0,si.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,dt.of)(t);let a=0;return(0,pn.D)(i).pipe(wo(l=>function eb(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!ib(i)&&(a[Io]=i.title),function tb(n,e,t,r){const i=function nb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,dt.of)({});const a={};return(0,pn.D)(i).pipe((0,si.z)(l=>function rb(n,e,t,r){const i=ia(e)??r,a=Kc(n,i);return bo(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(tr(),Dn(f=>{a[l]=f}))),Ra(1),function Oh(n){return(0,wt.U)(()=>n)}(a),Qi(l=>zE(l)?Co.E:Yo(l)))}(a,n,e,r).pipe((0,wt.U)(l=>(n._resolvedData=l,n.data=hv(n,t).resolve,i&&ib(i)&&(n.data[Io]=i.title),null)))}(l.route,r,n,e)),Dn(()=>a++),Ra(1),(0,si.z)(l=>a===i.length?(0,dt.of)(t):Co.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),Dn({next:()=>E=!0,complete:()=>{E||this.cancelNavigationTransition(y,"",2)}}))}),Dn(y=>{const E=new kU(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(E)}))}),Sv(g=>{const y=E=>{const T=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(E.routeConfig).pipe(Dn(A=>{E.component=A}),(0,wt.U)(()=>{})));for(const A of E.children)T.push(...y(A));return T};return Zo(y(g.targetSnapshot.root)).pipe(Bc(),an(1))}),Sv(()=>this.afterPreactivation()),(0,wt.U)(g=>{const y=function VE(n,e,t){const r=jh(n,e._root,t?t._root:void 0);return new uv(r,e)}(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=a={...g,targetRouterState:y},a}),Dn(()=>{this.events.next(new Uh)}),((n,e,t,r)=>(0,wt.U)(i=>(new jE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),an(1),Dn({next:g=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qs(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),t.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{l=!0}}),function uu(n){return(0,qr.e)((e,t)=>{(0,Lc.Xf)(n).subscribe((0,Pr.x)(t,()=>t.complete(),Nh.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Dn(g=>{throw g}))),ka(()=>{l||f||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),Qi(g=>{if(f=!0,Eu(g))this.events.next(new Gc(a.id,this.urlSerializer.serialize(a.extractedUrl),g.message,g.cancellationCode)),function oi(n){return Eu(n)&&ta(n.url)}(g)?this.events.next(new FE(g.url)):a.resolve(!1);else{this.events.next(new Cu(a.id,this.urlSerializer.serialize(a.extractedUrl),g,a.targetSnapshot??void 0));try{a.resolve(t.errorHandler(g))}catch(y){a.reject(y)}}return Co.E}))}))}cancelNavigationTransition(t,r,i){const a=new Gc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zx(n){return n!==zc}let Gx=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[Io]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(zU)},providedIn:"root"})}return n})(),zU=(()=>{class n extends Gx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ye))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(sb)},providedIn:"root"})}return n})();class WU{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let sb=(()=>{class n extends WU{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=d.n5z(n)))(i||n)}}();static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Vg=new d.OlP("",{providedIn:"root",factory:()=>({})});let Wx=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(qx)},providedIn:"root"})}return n})(),qx=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Jh=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Jh||{});function Bg(n,e){n.events.pipe(wr(t=>t instanceof Qs||t instanceof Gc||t instanceof Cu||t instanceof So),(0,wt.U)(t=>t instanceof Qs||t instanceof So?Jh.COMPLETE:t instanceof Gc&&(0===t.code||1===t.code)?Jh.REDIRECTING:Jh.FAILED),wr(t=>t!==Jh.REDIRECTING),an(1)).subscribe(()=>{e()})}function sa(n){throw n}function Xh(n,e,t){return e.parse("/")}const ob={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ab={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let rr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this._events=new vi.x,this.options=(0,d.f3M)(Vg,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||sa,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Xh,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(Wx),this.routeReuseStrategy=(0,d.f3M)(GU),this.titleStrategy=(0,d.f3M)(Gx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(Su,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(Ug),this.urlSerializer=(0,d.f3M)(pu),this.location=(0,d.f3M)(Ae),this.componentInputBindingEnabled=!!(0,d.f3M)(Mg,{optional:!0}),this.eventsSubscription=new Vc.w0,this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new To,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=dv(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(Zx(r)&&this._events.next(r));if(r instanceof Ba)zx(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof So)this.rawUrlTree=i.rawUrl;else if(r instanceof Lh){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(a,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof Uh)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Gc)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof FE){const a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zx(i.source)};this.scheduleNavigation(a,zc,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Cu&&this.restoreHistory(i,!0),r instanceof Qs&&(this.navigated=!0),Zx(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),zc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Hh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:g}=r,y=g?this.currentUrlTree.fragment:l;let T,E=null;switch(f){case"merge":E={...this.currentUrlTree.queryParams,...a};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=a||null}null!==E&&(E=this.removeEmptyProps(E));try{T=m(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),T=this.currentUrlTree.root}return _(T,t,E,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ta(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,zc,null,r)}navigate(t,r={skipLocationChange:!1}){return function qU(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new d.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ob}:!1===r?{...ab}:r,ta(t))return Cg(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Cg(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,g,y;l?(f=l.resolve,g=l.reject,y=l.promise):y=new Promise((T,A)=>{f=T,g=A});const E=this.pendingTasks.add();return Bg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(E))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:a,resolve:f,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zx(n){return!(n instanceof Uh||n instanceof FE)}let jg=(()=>{class n{constructor(t,r,i,a,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new vi.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const g=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof Qs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(rr),d.Y36(qc),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Pe))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&d.NdJ("click",function(l){return i.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&r&&d.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",d.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",d.VuI],replaceUrl:["replaceUrl","replaceUrl",d.VuI],routerLink:"routerLink"},standalone:!0,features:[d.Xq5,d.TTD]})}return n})(),ef=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,a,l){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof Qs&&this.update()})}ngAfterContentInit(){(0,dt.of)(this.links.changes,(0,dt.of)(null)).pipe((0,Fc.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,pn.D)(t).pipe((0,Fc.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Mv(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(rr),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(jg,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,a){if(1&r&&d.Suo(a,jg,5),2&r){let l;d.iGM(l=d.CRH())&&(i.links=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]})}return n})();class Kx{}let Qx=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(wr(t=>t instanceof Qs),wo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,pn.D)(i).pipe((0,Fc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,dt.of)(null);const a=i.pipe((0,si.z)(l=>null===l?(0,dt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,pn.D)([a,l]).pipe((0,Fc.J)())}return a})}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(rr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Kx),d.LFG(Av))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xv=new d.OlP("");let cb=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ba?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qs?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof So&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new vx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){d.$Z()};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function vs(n,e){return{\u0275kind:n,\u0275providers:e}}function ub(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(rr),i=n.get(db);1===n.get(nf)&&r.initialNavigation(),n.get(fb,null,d.XFs.Optional)?.setUpPreloading(),n.get(xv,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const db=new d.OlP("",{factory:()=>new vi.x}),nf=new d.OlP("",{providedIn:"root",factory:()=>1}),fb=new d.OlP("");function eP(n){return vs(0,[{provide:fb,useExisting:Qx},{provide:Kx,useExisting:n}])}const Mu=new d.OlP("ROUTER_FORROOT_GUARD"),pb=[Ae,{provide:pu,useClass:Ig},rr,Dg,{provide:qc,useFactory:function Pv(n){return n.routerState.root},deps:[rr]},Av,[]];function gb(){return new d.PXZ("Router",rr)}let $g=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[pb,[],{provide:Su,multi:!0,useValue:t},{provide:Mu,useFactory:_b,deps:[[rr,new d.FiY,new d.tp0]]},{provide:Vg,useValue:r||{}},r?.useHash?{provide:Pe,useClass:ve}:{provide:Pe,useClass:Je},{provide:xv,useFactory:()=>{const n=(0,d.f3M)(Br),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Vg),r=(0,d.f3M)(Ug),i=(0,d.f3M)(pu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new cb(i,r,n,e,t)}},r?.preloadingStrategy?eP(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:gb},r?.initialNavigation?Hg(r):[],r?.bindToComponentInputs?vs(8,[UE,{provide:Mg,useExisting:UE}]).\u0275providers:[],[{provide:rP,useFactory:ub},{provide:d.tb,multi:!0,useExisting:rP}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Su,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Mu,8))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function _b(n){return"guarded"}function Hg(n){return["disabled"===n.initialNavigation?vs(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(rr);return()=>{e.setUpLocationChangeListener()}}},{provide:nf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?vs(2,[{provide:nf,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(Fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(rr),a=e.get(db);Bg(i,()=>{r(!0)}),e.get(Ug).afterPreactivation=()=>(r(!0),a.closed?(0,dt.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const rP=new d.OlP("");var j=k(5861);class zg extends Vc.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const Gg={setInterval(n,e,...t){const{delegate:r}=Gg;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Gg;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Rv=k(9039);class sf extends zg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(a,this.id,t),this}requestAsyncId(e,t,r=0){return Gg.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Gg.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(a){r=!0,i=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Rv.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Cs={now:()=>(Cs.delegate||Date).now(),delegate:void 0};class $a{constructor(e,t=$a.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}$a.now=Cs.now;class Wg extends $a{constructor(e,t=$a.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const kv=new Wg(sf),oP=kv;var vb=k(671);var lP=k(305);function el(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const a=new lP.Hp({next:l=>{r(l),a.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new qs)}});n.subscribe(a)})}const qg=function wb(n,e){return n===e||n!=n&&e!=e},Fv=function XU(n,e){for(var t=n.length;t--;)if(qg(n[t][0],e))return t;return-1};var hP=Array.prototype.splice;function Ha(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ha.prototype.clear=function Cb(){this.__data__=[],this.size=0},Ha.prototype.delete=function e3(n){var e=this.__data__,t=Fv(e,n);return!(t<0||(t==e.length-1?e.pop():hP.call(e,t,1),--this.size,0))},Ha.prototype.get=function Zg(n){var e=this.__data__,t=Fv(e,n);return t<0?void 0:e[t][1]},Ha.prototype.has=function Lv(n){return Fv(this.__data__,n)>-1},Ha.prototype.set=function Ou(n,e){var t=this.__data__,r=Fv(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const za=Ha,Hv="object"==typeof global&&global&&global.Object===Object&&global;var gP="object"==typeof self&&self&&self.Object===Object&&self;const ws=Hv||gP||Function("return this")(),Ru=ws.Symbol;var Eb=Object.prototype,r3=Eb.hasOwnProperty,_P=Eb.toString,Ga=Ru?Ru.toStringTag:void 0;var Gv=Object.prototype.toString;var Wv=Ru?Ru.toStringTag:void 0;const cf=function i3(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":Wv&&Wv in Object(n)?function zv(n){var e=r3.call(n,Ga),t=n[Ga];try{n[Ga]=void 0;var r=!0}catch{}var i=_P.call(n);return r&&(e?n[Ga]=t:delete n[Ga]),i}(n):function Qg(n){return Gv.call(n)}(n)},lf=function Jg(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},Sb=function IP(n){if(!lf(n))return!1;var e=cf(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var n,EP=ws["__core-js_shared__"],qv=(n=/[^.]+$/.exec(EP&&EP.keys&&EP.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var Ab=Function.prototype.toString;const tl=function bP(n){if(null!=n){try{return Ab.call(n)}catch{}try{return n+""}catch{}}return""};var TP=/^\[object .+?Constructor\]$/,Pb=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Js=function Ob(n){return!(!lf(n)||function Zv(n){return!!qv&&qv in n}(n))&&(Sb(n)?Pb:TP).test(tl(n))},Li=function Yv(n,e){var t=function Nb(n,e){return n?.[e]}(n,e);return Js(t)?t:void 0},df=Li(ws,"Map"),hf=Li(Object,"create");var MP=Object.prototype.hasOwnProperty;var e0=Object.prototype.hasOwnProperty;function Fu(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Fu.prototype.clear=function Jv(){this.__data__=hf?hf(null):{},this.size=0},Fu.prototype.delete=function Rb(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},Fu.prototype.get=function Xv(n){var e=this.__data__;if(hf){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return MP.call(e,n)?e[n]:void 0},Fu.prototype.has=function kb(n){var e=this.__data__;return hf?void 0!==e[n]:e0.call(e,n)},Fu.prototype.set=function Lb(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=hf&&void 0===e?"__lodash_hash_undefined__":e,this};const Vb=Fu,em=function Uu(n,e){var t=n.__data__;return function Lu(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function Vu(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Vu.prototype.clear=function NP(){this.size=0,this.__data__={hash:new Vb,map:new(df||za),string:new Vb}},Vu.prototype.delete=function RP(n){var e=em(this,n).delete(n);return this.size-=e?1:0,e},Vu.prototype.get=function $b(n){return em(this,n).get(n)},Vu.prototype.has=function ff(n){return em(this,n).has(n)},Vu.prototype.set=function Hb(n,e){var t=em(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const kP=Vu;function pf(n){var e=this.__data__=new za(n);this.size=e.size}pf.prototype.clear=function Kg(){this.__data__=new za,this.size=0},pf.prototype.delete=function Bv(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},pf.prototype.get=function Yg(n){return this.__data__.get(n)},pf.prototype.has=function $v(n){return this.__data__.has(n)},pf.prototype.set=function LP(n,e){var t=this.__data__;if(t instanceof za){var r=t.__data__;if(!df||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new kP(r)}return t.set(n,e),this.size=t.size,this};const UP=pf;var Wb=function(){try{var n=Li(Object,"defineProperty");return n({},"",{}),n}catch{}}();const n0=Wb,gf=function h3(n,e,t){"__proto__"==e&&n0?n0(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var qb=Object.prototype.hasOwnProperty;const Kb=function Zb(n,e,t){var r=n[e];(!qb.call(n,e)||!qg(r,t)||void 0===t&&!(e in n))&&gf(n,e,t)},mf=function Yb(n,e,t,r){var i=!t;t||(t={});for(var a=-1,l=e.length;++a<l;){var f=e[a],g=r?r(t[f],n[f],f,t,n):void 0;void 0===g&&(g=n[f]),i?gf(t,f,g):Kb(t,f,g)}return t},xo=function Jb(n){return null!=n&&"object"==typeof n},_f=function VP(n){return xo(n)&&"[object Arguments]"==cf(n)};var nl=Object.prototype,r0=nl.hasOwnProperty,yf=nl.propertyIsEnumerable,eT=_f(function(){return arguments}())?_f:function(n){return xo(n)&&r0.call(n,"callee")&&!yf.call(n,"callee")};const s0=eT,vf=Array.isArray;var nT="object"==typeof exports&&exports&&!exports.nodeType&&exports,rT=nT&&"object"==typeof module&&module&&!module.nodeType&&module,c0=rT&&rT.exports===nT?ws.Buffer:void 0;const iT=(c0?c0.isBuffer:void 0)||function tT(){return!1};var sT=/^(?:0|[1-9]\d*)$/;const zP=function oT(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&sT.test(n))&&n>-1&&n%1==0&&n<e},aT=function Xi(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991};var mn={};mn["[object Float32Array]"]=mn["[object Float64Array]"]=mn["[object Int8Array]"]=mn["[object Int16Array]"]=mn["[object Int32Array]"]=mn["[object Uint8Array]"]=mn["[object Uint8ClampedArray]"]=mn["[object Uint16Array]"]=mn["[object Uint32Array]"]=!0,mn["[object Arguments]"]=mn["[object Array]"]=mn["[object ArrayBuffer]"]=mn["[object Boolean]"]=mn["[object DataView]"]=mn["[object Date]"]=mn["[object Error]"]=mn["[object Function]"]=mn["[object Map]"]=mn["[object Number]"]=mn["[object Object]"]=mn["[object RegExp]"]=mn["[object Set]"]=mn["[object String]"]=mn["[object WeakMap]"]=!1;const rm=function pT(n){return function(e){return n(e)}};var h0="object"==typeof exports&&exports&&!exports.nodeType&&exports,rl=h0&&"object"==typeof module&&module&&!module.nodeType&&module,f0=rl&&rl.exports===h0&&Hv.process;const Wa=function(){try{return rl&&rl.require&&rl.require("util").types||f0&&f0.binding&&f0.binding("util")}catch{}}();var gT=Wa&&Wa.isTypedArray;const oO=gT?rm(gT):function g3(n){return xo(n)&&aT(n.length)&&!!mn[cf(n)]};var Cf=Object.prototype.hasOwnProperty;const wf=function _T(n,e){var t=vf(n),r=!t&&s0(n),i=!t&&!r&&iT(n),a=!t&&!r&&!i&&oO(n),l=t||r||i||a,f=l?function Dt(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],g=f.length;for(var y in n)(e||Cf.call(n,y))&&(!l||!("length"==y||i&&("offset"==y||"parent"==y)||a&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||zP(y,g)))&&f.push(y);return f};var m3=Object.prototype;const sm=function aO(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||m3)},vT=function yT(n,e){return function(t){return n(e(t))}},CT=vT(Object.keys,Object);var If=Object.prototype.hasOwnProperty;const bT=function ET(n){return null!=n&&aT(n.length)&&!Sb(n)},il=function uO(n){return bT(n)?wf(n):function lO(n){if(!sm(n))return CT(n);var e=[];for(var t in Object(n))If.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n)};var mO=Object.prototype.hasOwnProperty;const yO=function _O(n){if(!lf(n))return function fO(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=sm(n),t=[];for(var r in n)"constructor"==r&&(e||!mO.call(n,r))||t.push(r);return t},Ef=function TT(n){return bT(n)?wf(n,!0):yO(n)};var DT="object"==typeof exports&&exports&&!exports.nodeType&&exports,ST=DT&&"object"==typeof module&&module&&!module.nodeType&&module,AT=ST&&ST.exports===DT?ws.Buffer:void 0,MT=AT?AT.allocUnsafe:void 0;const p0=function OT(){return[]};var am=Object.prototype.propertyIsEnumerable,NT=Object.getOwnPropertySymbols,bO=NT?function(n){return null==n?[]:(n=Object(n),function EO(n,e){for(var t=-1,r=null==n?0:n.length,i=0,a=[];++t<r;){var l=n[t];e(l,t,n)&&(a[i++]=l)}return a}(NT(n),function(e){return am.call(n,e)}))}:p0;const bf=bO,Yr=function Tf(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n},Df=vT(Object.getPrototypeOf,Object);var g0=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)Yr(e,bf(n)),n=Df(n);return e}:p0;const ol=g0,al=function $u(n,e,t){var r=e(n);return vf(n)?r:Yr(r,t(n))},zu=function Hu(n){return al(n,il,bf)},Wu=function Gu(n){return al(n,Ef,ol)},cm=Li(ws,"DataView"),lm=Li(ws,"Promise"),um=Li(ws,"Set"),dm=Li(ws,"WeakMap");var m0="[object Map]",UT="[object Promise]",DO="[object Set]",SO="[object WeakMap]",VT="[object DataView]",AO=tl(cm),v3=tl(df),MO=tl(lm),C3=tl(um),xO=tl(dm),cl=cf;(cm&&cl(new cm(new ArrayBuffer(1)))!=VT||df&&cl(new df)!=m0||lm&&cl(lm.resolve())!=UT||um&&cl(new um)!=DO||dm&&cl(new dm)!=SO)&&(cl=function(n){var e=cf(n),t="[object Object]"==e?n.constructor:void 0,r=t?tl(t):"";if(r)switch(r){case AO:return VT;case v3:return m0;case MO:return UT;case C3:return DO;case xO:return SO}return e});const y0=cl;var Sf=Object.prototype.hasOwnProperty;const qu=ws.Uint8Array,w0=function jT(n){var e=new n.constructor(n.byteLength);return new qu(e).set(new qu(n)),e};var OO=/\w*$/;var fm=Ru?Ru.prototype:void 0,Mf=fm?fm.valueOf:void 0;const GO=function zO(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return w0(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function Af(n,e){var t=e?w0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function kO(n,e){var t=e?w0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function NO(n){var e=new n.constructor(n.source,OO.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function pm(n){return Mf?Object(Mf.call(n)):{}}(n)}};var ZT=Object.create,D0=function(){function n(){}return function(e){if(!lf(e))return{};if(ZT)return ZT(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const S0=D0;var _m=Wa&&Wa.isMap;const A0=_m?rm(_m):function qO(n){return xo(n)&&"[object Map]"==y0(n)};var M0=Wa&&Wa.isSet;const nD=M0?rm(M0):function ZO(n){return xo(n)&&"[object Set]"==y0(n)};var ym="[object Arguments]",x0="[object Function]",P0="[object Object]",_n={};_n[ym]=_n["[object Array]"]=_n["[object ArrayBuffer]"]=_n["[object DataView]"]=_n["[object Boolean]"]=_n["[object Date]"]=_n["[object Float32Array]"]=_n["[object Float64Array]"]=_n["[object Int8Array]"]=_n["[object Int16Array]"]=_n["[object Int32Array]"]=_n["[object Map]"]=_n["[object Number]"]=_n[P0]=_n["[object RegExp]"]=_n["[object Set]"]=_n["[object String]"]=_n["[object Symbol]"]=_n["[object Uint8Array]"]=_n["[object Uint8ClampedArray]"]=_n["[object Uint16Array]"]=_n["[object Uint32Array]"]=!0,_n["[object Error]"]=_n[x0]=_n["[object WeakMap]"]=!1;const iN=function wm(n,e,t,r,i,a){var l,f=1&e,g=2&e,y=4&e;if(t&&(l=i?t(n,r,i,a):t(n)),void 0!==l)return l;if(!lf(n))return n;var E=vf(n);if(E){if(l=function C0(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&Sf.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!f)return function xT(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(n,l)}else{var T=y0(n),A=T==x0||"[object GeneratorFunction]"==T;if(iT(n))return function wO(n,e){if(e)return n.slice();var t=n.length,r=MT?MT(t):new n.constructor(t);return n.copy(r),r}(n,f);if(T==P0||T==ym||A&&!i){if(l=g||A?{}:function KT(n){return"function"!=typeof n.constructor||sm(n)?{}:S0(Df(n))}(n),!f)return g?function Bu(n,e){return mf(n,ol(n),e)}(n,function vO(n,e){return n&&mf(e,Ef(e),n)}(l,n)):function TO(n,e){return mf(n,bf(n),e)}(n,function dO(n,e){return n&&mf(e,il(e),n)}(l,n))}else{if(!_n[T])return i?n:{};l=GO(n,T,f)}}a||(a=new UP);var R=a.get(n);if(R)return R;a.set(n,l),nD(n)?n.forEach(function(J){l.add(wm(J,e,t,J,n,a))}):A0(n)&&n.forEach(function(J,we){l.set(we,wm(J,e,t,we,n,a))});var Q=E?void 0:(y?g?Wu:zu:g?Ef:il)(n);return function u3(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(Q||n,function(J,we){Q&&(J=n[we=J]),Kb(l,we,wm(J,e,t,we,n,a))}),l},xf=function dD(n){return iN(n,5)};var ln=k(7592);(0,ln.registerVersion)("firebase","9.23.0","app");var Er=k(4537),Ui=k(7879),z=k(9058),b3=k(1878);class hD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function k0(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const Es="@firebase/app",Za=new Ui.Yd("@firebase/app"),ul="[DEFAULT]",U0={[Es]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ka=new Map,Of=new Map;function ID(n,e){try{n.container.addComponent(e)}catch(t){Za.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vi(n){const e=n.name;if(Of.has(e))return Za.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,n);for(const t of Ka.values())ID(t,n);return!0}function Zu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const ca=new z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wN{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Er.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ca.create("app-deleted",{appName:this._name})}}function bD(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:ul,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw ca.create("bad-app-name",{appName:String(i)});if(t||(t=(0,z.aH)()),!t)throw ca.create("no-options");const a=Ka.get(i);if(a){if((0,z.vZ)(t,a.options)&&(0,z.vZ)(r,a.config))return a;throw ca.create("duplicate-app",{appName:i})}const l=new Er.H0(i);for(const g of Of.values())l.addComponent(g);const f=new wN(t,r,l);return Ka.set(i,f),f}function TD(n=ul){const e=Ka.get(n);if(!e&&n===ul&&(0,z.aH)())return bD();if(!e)throw ca.create("no-app",{appName:n});return e}function wi(n,e,t){var r;let i=null!==(r=U0[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const f=[`Unable to register library "${i}" with version "${e}":`];return a&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&f.push("and"),l&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Za.warn(f.join(" "))}Vi(new Er.wA(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const IN="firebase-heartbeat-database",EN=1,Nf="firebase-heartbeat-store";let B0=null;function DD(){return B0||(B0=(0,b3.X3)(IN,EN,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Nf)}}).catch(n=>{throw ca.create("idb-open",{originalErrorMessage:n.message})})),B0}function Em(){return Em=(0,j.Z)(function*(n){try{return yield(yield DD()).transaction(Nf).objectStore(Nf).get($0(n))}catch(e){if(e instanceof z.ZR)Za.warn(e.message);else{const t=ca.create("idb-get",{originalErrorMessage:e?.message});Za.warn(t.message)}}}),Em.apply(this,arguments)}function j0(n,e){return bm.apply(this,arguments)}function bm(){return bm=(0,j.Z)(function*(n,e){try{const r=(yield DD()).transaction(Nf,"readwrite");yield r.objectStore(Nf).put(e,$0(n)),yield r.done}catch(t){if(t instanceof z.ZR)Za.warn(t.message);else{const r=ca.create("idb-set",{originalErrorMessage:t?.message});Za.warn(r.message)}}}),bm.apply(this,arguments)}function $0(n){return`${n.name}!${n.options.appId}`}class xD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,j.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=H0();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(a=>a.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,j.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=H0(),{heartbeatsToSend:r,unsentEntries:i}=function PD(n,e=1024){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),Ya(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Ya(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),a=(0,z.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),a})()}}function H0(){return(new Date).toISOString().substring(0,10)}class OD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,j.Z)(function*(){return!!(0,z.hl)()&&(0,z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,j.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function SD(n){return Em.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,j.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return j0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,j.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return j0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}})()}}function Ya(n){return(0,z.L)(JSON.stringify({version:2,heartbeats:n})).length}!function bN(n){Vi(new Er.wA("platform-logger",e=>new hD(e),"PRIVATE")),Vi(new Er.wA("heartbeat",e=>new xD(e),"PRIVATE")),wi(Es,"0.9.20",n),wi(Es,"0.9.20","esm2017"),wi("fire-js","")}("");const TN=(n,e)=>e.some(t=>n instanceof t);let dl,DN;const G0=new WeakMap,Tm=new WeakMap,SN=new WeakMap,Qa=new WeakMap,W0=new WeakMap;let Ja={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Tm.get(n);if("objectStoreNames"===e)return n.objectStoreNames||SN.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ir(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Sm(n){return"function"==typeof n?function Dm(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function x3(){return DN||(DN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(ND(this),e),ir(G0.get(this))}:function(...e){return ir(n.apply(ND(this),e))}:function(e,...t){const r=n.call(ND(this),e,...t);return SN.set(r,e.sort?e.sort():[e]),ir(r)}}(n):(n instanceof IDBTransaction&&function MN(n){if(Tm.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Tm.set(n,e)}(n),TN(n,function z0(){return dl||(dl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Ja):n)}function ir(n){if(n instanceof IDBRequest)return function AN(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(ir(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&G0.set(t,n)}).catch(()=>{}),W0.set(e,n),e}(n);if(Qa.has(n))return Qa.get(n);const e=Sm(n);return e!==n&&(Qa.set(n,e),W0.set(e,n)),e}const ND=n=>W0.get(n),ON=["get","getKey","getAll","getAllKeys","count"],kD=["put","add","delete","clear"],Am=new Map;function q0(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Am.get(e))return Am.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=kD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ON.includes(t))return;const a=function(){var l=(0,j.Z)(function*(f,...g){const y=this.transaction(f,i?"readwrite":"readonly");let E=y.store;return r&&(E=E.index(g.shift())),(yield Promise.all([E[t](...g),i&&y.done]))[0]});return function(g){return l.apply(this,arguments)}}();return Am.set(e,a),a}!function xN(n){Ja=n(Ja)}(n=>({...n,get:(e,t,r)=>q0(e,t)||n.get(e,t,r),has:(e,t)=>!!q0(e,t)||n.has(e,t)}));const Z0="@firebase/installations",K0="0.6.4",FD=1e4,LD=`w:${K0}`,Ku="FIS_v2",NN="https://firebaseinstallations.googleapis.com/v1",RN=36e5,Ro=new z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Y0(n){return n instanceof z.ZR&&n.code.includes("request-failed")}function Q0({projectId:n}){return`${NN}/projects/${n}/installations`}function Yu(n){return{token:n.token,requestStatus:2,expiresIn:jD(n.expiresIn),creationTime:Date.now()}}function hl(n,e){return J0.apply(this,arguments)}function J0(){return J0=(0,j.Z)(function*(n,e){const r=(yield e.json()).error;return Ro.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}),J0.apply(this,arguments)}function VD({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function xm(n){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,j.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),Pm.apply(this,arguments)}function jD(n){return Number(n.replace("s","000"))}function X0(){return X0=(0,j.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Q0(n),i=VD(n),a=e.getImmediate({optional:!0});if(a){const y=yield a.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const f={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:Ku,appId:n.appId,sdkVersion:LD})},g=yield xm(()=>fetch(r,f));if(g.ok){const y=yield g.json();return{fid:y.fid||t,registrationStatus:2,refreshToken:y.refreshToken,authToken:Yu(y.authToken)}}throw yield hl("Create Installation",g)}),X0.apply(this,arguments)}function HD(n){return new Promise(e=>{setTimeout(e,n)})}const O3=/^[cdef][\w-]{21}$/,zD="";function N3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function GD(n){return function P3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return O3.test(t)?t:zD}catch{return zD}}function la(n){return`${n.appName}!${n.appId}`}const Qu=new Map;function WD(n,e){const t=la(n);ZD(t,e),function LN(n,e){const t=function KD(){return!fl&&"BroadcastChannel"in self&&(fl=new BroadcastChannel("[Firebase] FID Change"),fl.onmessage=n=>{ZD(n.data.key,n.data.fid)}),fl}();t&&t.postMessage({key:n,fid:e}),function UN(){0===Qu.size&&fl&&(fl.close(),fl=null)}()}(t,e)}function ZD(n,e){const t=Qu.get(n);if(t)for(const r of t)r(e)}let fl=null;const VN="firebase-installations-database",YD=1,pl="firebase-installations-store";let eC=null;function gl(){return eC||(eC=function RD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),f=ir(l);return r&&l.addEventListener("upgradeneeded",g=>{r(ir(l.result),g.oldVersion,g.newVersion,ir(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),f.then(g=>{a&&g.addEventListener("close",()=>a()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}(VN,YD,{upgrade:(n,e)=>{0===e&&n.createObjectStore(pl)}})),eC}function Om(n,e){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,j.Z)(function*(n,e){const t=la(n),i=(yield gl()).transaction(pl,"readwrite"),a=i.objectStore(pl),l=yield a.get(t);return yield a.put(e,t),yield i.done,(!l||l.fid!==e.fid)&&WD(n,e.fid),e}),Nm.apply(this,arguments)}function tC(n){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,j.Z)(function*(n){const e=la(n),r=(yield gl()).transaction(pl,"readwrite");yield r.objectStore(pl).delete(e),yield r.done}),Rm.apply(this,arguments)}function kf(n,e){return km.apply(this,arguments)}function km(){return km=(0,j.Z)(function*(n,e){const t=la(n),i=(yield gl()).transaction(pl,"readwrite"),a=i.objectStore(pl),l=yield a.get(t),f=e(l);return void 0===f?yield a.delete(t):yield a.put(f,t),yield i.done,f&&(!l||l.fid!==f.fid)&&WD(n,f.fid),f}),km.apply(this,arguments)}function nC(n){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,j.Z)(function*(n){let e;const t=yield kf(n.appConfig,r=>{const i=function BN(n){return XD(n||{fid:N3(),registrationStatus:0})}(r),a=function QD(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ro.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function JD(n,e){return rC.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:jN(n)}:{installationEntry:e}}(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===zD?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),Ff.apply(this,arguments)}function rC(){return rC=(0,j.Z)(function*(n,e){try{const t=yield function $D(n,e){return X0.apply(this,arguments)}(n,e);return Om(n.appConfig,t)}catch(t){throw Y0(t)&&409===t.customData.serverCode?yield tC(n.appConfig):yield Om(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),rC.apply(this,arguments)}function jN(n){return iC.apply(this,arguments)}function iC(){return iC=(0,j.Z)(function*(n){let e=yield Fm(n.appConfig);for(;1===e.registrationStatus;)yield HD(100),e=yield Fm(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield nC(n);return r||t}return e}),iC.apply(this,arguments)}function Fm(n){return kf(n,e=>{if(!e)throw Ro.create("installation-not-found");return XD(e)})}function XD(n){return function e1(n){return 1===n.registrationStatus&&n.registrationTime+FD<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function sC(){return sC=(0,j.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function HN(n,{fid:e}){return`${Q0(n)}/${e}/authTokens:generate`}(n,t),i=function BD(n,{refreshToken:e}){const t=VD(n);return t.append("Authorization",function FN(n){return`${Ku} ${n}`}(e)),t}(n,t),a=e.getImmediate({optional:!0});if(a){const y=yield a.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const f={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:LD,appId:n.appId}})},g=yield xm(()=>fetch(r,f));if(g.ok)return Yu(yield g.json());throw yield hl("Generate Auth Token",g)}),sC.apply(this,arguments)}function oC(n){return aC.apply(this,arguments)}function aC(){return aC=(0,j.Z)(function*(n,e=!1){let t;const r=yield kf(n.appConfig,a=>{if(!r1(a))throw Ro.create("not-registered");const l=a.authToken;if(!e&&function GN(n){return 2===n.requestStatus&&!function s1(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+RN}(n)}(l))return a;if(1===l.requestStatus)return t=function zN(n,e){return cC.apply(this,arguments)}(n,e),a;{if(!navigator.onLine)throw Ro.create("app-offline");const f=function WN(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(a);return t=function n1(n,e){return Lm.apply(this,arguments)}(n,f),f}});return t?yield t:r.authToken}),aC.apply(this,arguments)}function cC(){return cC=(0,j.Z)(function*(n,e){let t=yield t1(n.appConfig);for(;1===t.authToken.requestStatus;)yield HD(100),t=yield t1(n.appConfig);const r=t.authToken;return 0===r.requestStatus?oC(n,e):r}),cC.apply(this,arguments)}function t1(n){return kf(n,e=>{if(!r1(e))throw Ro.create("not-registered");return function qN(n){return 1===n.requestStatus&&n.requestTime+FD<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Lm(){return Lm=(0,j.Z)(function*(n,e){try{const t=yield function $N(n,e){return sC.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Om(n.appConfig,r),t}catch(t){if(!Y0(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Om(n.appConfig,r)}else yield tC(n.appConfig);throw t}}),Lm.apply(this,arguments)}function r1(n){return void 0!==n&&2===n.registrationStatus}function lC(){return lC=(0,j.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield nC(e);return r?r.catch(console.error):oC(e).catch(console.error),t.fid}),lC.apply(this,arguments)}function Lf(){return Lf=(0,j.Z)(function*(n,e=!1){const t=n;return yield function o1(n){return Uf.apply(this,arguments)}(t),(yield oC(t,e)).token}),Lf.apply(this,arguments)}function Uf(){return Uf=(0,j.Z)(function*(n){const{registrationPromise:e}=yield nC(n);e&&(yield e)}),Uf.apply(this,arguments)}function a1(n){return Ro.create("missing-app-config-values",{valueName:n})}const Vm="installations",JN=n=>{const e=n.getProvider("app").getImmediate(),t=function QN(n){if(!n||!n.options)throw a1("App Configuration");if(!n.name)throw a1("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw a1(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Zu(e,"heartbeat"),_delete:()=>Promise.resolve()}},c1=n=>{const t=Zu(n.getProvider("app").getImmediate(),Vm).getImmediate();return{getId:()=>function ZN(n){return lC.apply(this,arguments)}(t),getToken:i=>function uC(n){return Lf.apply(this,arguments)}(t,i)}};(function l1(){Vi(new Er.wA(Vm,JN,"PUBLIC")),Vi(new Er.wA("installations-internal",c1,"PRIVATE"))})(),wi(Z0,K0),wi(Z0,K0,"esm2017");const pC="@firebase/remote-config",Ii=new z.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class oR{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,j.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const a=yield t.client.fetch(e),l=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===a.status&&l.push(t.storage.setLastSuccessfulFetchResponse(a)),yield Promise.all(l),a})()}}function aR(n=navigator){return n.languages&&n.languages[0]||n.language}class cR{constructor(e,t,r,i,a,l){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=l}fetch(e){var t=this;return(0,j.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,f={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},g={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:aR()},y={method:"POST",headers:f,body:JSON.stringify(g)},E=fetch(l,y),T=new Promise((we,He)=>{e.signal.addEventListener(()=>{const Ne=new Error("The operation was aborted.");Ne.name="AbortError",He(Ne)})});let A;try{yield Promise.race([E,T]),A=yield E}catch(we){let He="fetch-client-network";throw"AbortError"===we?.name&&(He="fetch-timeout"),Ii.create(He,{originalErrorMessage:we?.message})}let R=A.status;const G=A.headers.get("ETag")||void 0;let Q,J;if(200===A.status){let we;try{we=yield A.json()}catch(He){throw Ii.create("fetch-client-parse",{originalErrorMessage:He?.message})}Q=we.entries,J=we.state}if("INSTANCE_STATE_UNSPECIFIED"===J?R=500:"NO_CHANGE"===J?R=304:("NO_TEMPLATE"===J||"EMPTY_CONFIG"===J)&&(Q={}),304!==R&&200!==R)throw Ii.create("fetch-status",{httpStatus:R});return{status:R,eTag:G,config:Q}})()}}class p1{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,j.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,j.Z)(function*(){yield function lR(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Ii.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const a=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),a}catch(a){if(!function Vf(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(a))throw a;const l={throttleEndTimeMillis:Date.now()+(0,z.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(l),i.attemptFetch(e,l)}})()}}class _1{constructor(e,t,r,i,a){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bf(n,e){const t=n.target.error||void 0;return Ii.create(e,{originalErrorMessage:t&&t?.message})}const Xa="app_namespace_store";class y1{constructor(e,t,r,i=function B3(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Bf(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Xa,{keyPath:"compositeKey"})}}catch(t){e(Ii.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,j.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const f=r.transaction([Xa],"readonly").objectStore(Xa),g=t.createCompositeKey(e);try{const y=f.get(g);y.onerror=E=>{a(Bf(E,"storage-get"))},y.onsuccess=E=>{const T=E.target.result;i(T?T.value:void 0)}}catch(y){a(Ii.create("storage-get",{originalErrorMessage:y?.message}))}})})()}set(e,t){var r=this;return(0,j.Z)(function*(){const i=yield r.openDbPromise;return new Promise((a,l)=>{const g=i.transaction([Xa],"readwrite").objectStore(Xa),y=r.createCompositeKey(e);try{const E=g.put({compositeKey:y,value:t});E.onerror=T=>{l(Bf(T,"storage-set"))},E.onsuccess=()=>{a()}}catch(E){l(Ii.create("storage-set",{originalErrorMessage:E?.message}))}})})()}delete(e){var t=this;return(0,j.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const f=r.transaction([Xa],"readwrite").objectStore(Xa),g=t.createCompositeKey(e);try{const y=f.delete(g);y.onerror=E=>{a(Bf(E,"storage-delete"))},y.onsuccess=()=>{i()}}catch(y){a(Ii.create("storage-delete",{originalErrorMessage:y?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class dR{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,j.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),a=yield t;a&&(e.lastFetchStatus=a);const l=yield r;l&&(e.lastSuccessfulFetchTimestampMillis=l);const f=yield i;f&&(e.activeConfig=f)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function jf(){return wC.apply(this,arguments)}function wC(){return(wC=(0,j.Z)(function*(){if(!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}!function v1(){Vi(new Er.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ii.create("registration-window");if(!(0,z.hl)())throw Ii.create("indexed-db-unavailable");const{projectId:a,apiKey:l,appId:f}=r.options;if(!a)throw Ii.create("registration-project-id");if(!l)throw Ii.create("registration-api-key");if(!f)throw Ii.create("registration-app-id");const g=new y1(f,r.name,t=t||"firebase"),y=new dR(g),E=new Ui.Yd(pC);E.logLevel=Ui.in.ERROR;const T=new cR(i,"10.5.0",t,a,l,f),A=new p1(T,g),R=new oR(A,g,y,E),G=new _1(r,R,y,g,E);return function nR(n){const e=(0,z.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(G),G},"PUBLIC").setMultipleInstances(!0)),wi(pC,"0.4.4"),wi(pC,"0.4.4","esm2017")}();const IC=(n,e)=>e.some(t=>n instanceof t);let C1,hR;const Xu=new WeakMap,EC=new WeakMap,w1=new WeakMap,bC=new WeakMap,ed=new WeakMap;let $m={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return EC.get(n);if("objectStoreNames"===e)return n.objectStoreNames||w1.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ko(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function mR(n){return"function"==typeof n?function gR(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $3(){return hR||(hR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(TC(this),e),ko(Xu.get(this))}:function(...e){return ko(n.apply(TC(this),e))}:function(e,...t){const r=n.call(TC(this),e,...t);return w1.set(r,e.sort?e.sort():[e]),ko(r)}}(n):(n instanceof IDBTransaction&&function pR(n){if(EC.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});EC.set(n,e)}(n),IC(n,function fR(){return C1||(C1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,$m):n)}function ko(n){if(n instanceof IDBRequest)return function I1(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(ko(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Xu.set(t,n)}).catch(()=>{}),ed.set(e,n),e}(n);if(bC.has(n))return bC.get(n);const e=mR(n);return e!==n&&(bC.set(n,e),ed.set(e,n)),e}const TC=n=>ed.get(n);function E1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),f=ko(l);return r&&l.addEventListener("upgradeneeded",g=>{r(ko(l.result),g.oldVersion,g.newVersion,ko(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),f.then(g=>{a&&g.addEventListener("close",()=>a()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}function zm(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),ko(t).then(()=>{})}const Gm=["get","getKey","getAll","getAllKeys","count"],_R=["put","add","delete","clear"],DC=new Map;function SC(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(DC.get(e))return DC.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=_R.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Gm.includes(t))return;const a=function(){var l=(0,j.Z)(function*(f,...g){const y=this.transaction(f,i?"readwrite":"readonly");let E=y.store;return r&&(E=E.index(g.shift())),(yield Promise.all([E[t](...g),i&&y.done]))[0]});return function(g){return l.apply(this,arguments)}}();return DC.set(e,a),a}!function Hm(n){$m=n($m)}(n=>({...n,get:(e,t,r)=>SC(e,t)||n.get(e,t,r),has:(e,t)=>!!SC(e,t)||n.has(e,t)}));const b1="/firebase-messaging-sw.js",AC="/firebase-cloud-messaging-push-scope",MC="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yR="https://fcmregistrations.googleapis.com/v1",xC="google.c.a.c_id",T1="google.c.a.c_l",vR="google.c.a.ts";var td=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(td||{});function Fo(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function OC(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}const $f="fcm_token_details_db",wR=5,D1="fcm_token_object_Store";function NC(){return NC=(0,j.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(a=>a.name).includes($f))return null;let e=null;return(yield E1($f,wR,{upgrade:(r=(0,j.Z)(function*(i,a,l,f){var g;if(a<2||!i.objectStoreNames.contains(D1))return;const y=f.objectStore(D1),E=yield y.index("fcmSenderId").get(n);if(yield y.clear(),E)if(2===a){const T=E;if(!T.auth||!T.p256dh||!T.endpoint)return;e={token:T.fcmToken,createTime:null!==(g=T.createTime)&&void 0!==g?g:Date.now(),subscriptionOptions:{auth:T.auth,p256dh:T.p256dh,endpoint:T.endpoint,swScope:T.swScope,vapidKey:"string"==typeof T.vapidKey?T.vapidKey:Fo(T.vapidKey)}}}else if(3===a){const T=E;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Fo(T.auth),p256dh:Fo(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Fo(T.vapidKey)}}}else if(4===a){const T=E;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Fo(T.auth),p256dh:Fo(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Fo(T.vapidKey)}}}}),function(a,l,f,g){return r.apply(this,arguments)})})).close(),yield zm($f),yield zm("fcm_vapid_details_db"),yield zm("undefined"),function S1(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),NC.apply(this,arguments)}const RC="firebase-messaging-database",A1=1,ml="firebase-messaging-store";let Wm=null;function qm(){return Wm||(Wm=E1(RC,A1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ml)}})),Wm}function M1(n){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,j.Z)(function*(n){const e=Qr(n),r=yield(yield qm()).transaction(ml).objectStore(ml).get(e);if(r)return r;{const i=yield function IR(n){return NC.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield Km(n,i),i}}),Zm.apply(this,arguments)}function Km(n,e){return kC.apply(this,arguments)}function kC(){return kC=(0,j.Z)(function*(n,e){const t=Qr(n),i=(yield qm()).transaction(ml,"readwrite");return yield i.objectStore(ml).put(e,t),yield i.done,e}),kC.apply(this,arguments)}function Ym(){return Ym=(0,j.Z)(function*(n){const e=Qr(n),r=(yield qm()).transaction(ml,"readwrite");yield r.objectStore(ml).delete(e),yield r.done}),Ym.apply(this,arguments)}function Qr({appConfig:n}){return n.appId}const Jr=new z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ER(n,e){return P1.apply(this,arguments)}function P1(){return P1=(0,j.Z)(function*(n,e){const t=yield R1(n),r=k1(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(N1(n.appConfig),i)).json()}catch(l){throw Jr.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(a.error)throw Jr.create("token-subscribe-failed",{errorInfo:a.error.message});if(!a.token)throw Jr.create("token-subscribe-no-token");return a.token}),P1.apply(this,arguments)}function Qm(){return Qm=(0,j.Z)(function*(n,e){const t=yield R1(n),r=k1(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(`${N1(n.appConfig)}/${e.token}`,i)).json()}catch(l){throw Jr.create("token-update-failed",{errorInfo:l?.toString()})}if(a.error)throw Jr.create("token-update-failed",{errorInfo:a.error.message});if(!a.token)throw Jr.create("token-update-no-token");return a.token}),Qm.apply(this,arguments)}function Jm(n,e){return O1.apply(this,arguments)}function O1(){return O1=(0,j.Z)(function*(n,e){const r={method:"DELETE",headers:yield R1(n)};try{const a=yield(yield fetch(`${N1(n.appConfig)}/${e}`,r)).json();if(a.error)throw Jr.create("token-unsubscribe-failed",{errorInfo:a.error.message})}catch(i){throw Jr.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}}),O1.apply(this,arguments)}function N1({projectId:n}){return`${yR}/projects/${n}/registrations`}function R1(n){return _l.apply(this,arguments)}function _l(){return _l=(0,j.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),_l.apply(this,arguments)}function k1({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==MC&&(i.web.applicationPubKey=r),i}const FC=6048e5;function Xm(){return Xm=(0,j.Z)(function*(n){const e=yield function e_(n,e){return zf.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Fo(e.getKey("auth")),p256dh:Fo(e.getKey("p256dh"))},r=yield M1(n.firebaseDependencies);if(r){if(function z3(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+FC?function TR(n,e){return Hf.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield Jm(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return UC(n.firebaseDependencies,t)}return UC(n.firebaseDependencies,t)}),Xm.apply(this,arguments)}function LC(){return LC=(0,j.Z)(function*(n){const e=yield M1(n.firebaseDependencies);e&&(yield Jm(n.firebaseDependencies,e.token),yield function x1(n){return Ym.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),LC.apply(this,arguments)}function Hf(){return Hf=(0,j.Z)(function*(n,e){try{const t=yield function H3(n,e){return Qm.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Km(n.firebaseDependencies,r),t}catch(t){throw yield function F1(n){return LC.apply(this,arguments)}(n),t}}),Hf.apply(this,arguments)}function UC(n,e){return VC.apply(this,arguments)}function VC(){return VC=(0,j.Z)(function*(n,e){const r={token:yield ER(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Km(n,r),r.token}),VC.apply(this,arguments)}function zf(){return zf=(0,j.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:OC(e)})}),zf.apply(this,arguments)}function BC(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function DR(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const a=e.notification.icon;a&&(n.notification.icon=a)}(e,n),function L1(n,e){e.data&&(n.data=e.data)}(e,n),function rd(n,e){var t,r,i,a,l;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const f=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(a=e.notification)||void 0===a?void 0:a.click_action;f&&(n.fcmOptions.link=f);const g=null===(l=e.fcmOptions)||void 0===l?void 0:l.analytics_label;g&&(n.fcmOptions.analyticsLabel=g)}(e,n),e}function jC(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function U1(n){return Jr.create("missing-app-config-values",{valueName:n})}jC("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),jC("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class AR{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function $C(n){if(!n||!n.options)throw U1("App Configuration Object");if(!n.name)throw U1("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw U1(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function HC(){return HC=(0,j.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(b1,{scope:AC}),n.swRegistration.update().catch(()=>{})}catch(e){throw Jr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}),HC.apply(this,arguments)}function zC(){return zC=(0,j.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function MR(n){return HC.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Jr.create("invalid-sw-registration");n.swRegistration=e}}),zC.apply(this,arguments)}function t_(){return t_=(0,j.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=MC)}),t_.apply(this,arguments)}function n_(){return n_=(0,j.Z)(function*(n,e){if(!navigator)throw Jr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Jr.create("permission-blocked");return yield function V1(n,e){return t_.apply(this,arguments)}(n,e?.vapidKey),yield function xR(n,e){return zC.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function bR(n){return Xm.apply(this,arguments)}(n)}),n_.apply(this,arguments)}function GC(){return GC=(0,j.Z)(function*(n,e,t){const r=function PR(n){switch(n){case td.NOTIFICATION_CLICKED:return"notification_open";case td.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[xC],message_name:t[T1],message_time:t[vR],message_device_time:Math.floor(Date.now()/1e3)})}),GC.apply(this,arguments)}function WC(){return WC=(0,j.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===td.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(BC(t)):n.onMessageHandler.next(BC(t)));const r=t.data;(function SR(n){return"object"==typeof n&&!!n&&xC in n})(r)&&"1"===r["google.c.a.e"]&&(yield function j1(n,e,t){return GC.apply(this,arguments)}(n,t.messageType,r))}),WC.apply(this,arguments)}const qC="@firebase/messaging",H1=n=>{const e=new AR(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function $1(n,e){return WC.apply(this,arguments)}(e,t)),e},z1=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function B1(n,e){return n_.apply(this,arguments)}(e,r)}};function G1(){return W1.apply(this,arguments)}function W1(){return(W1=(0,j.Z)(function*(){try{yield(0,z.eu)()}catch{return!1}return typeof window<"u"&&(0,z.hl)()&&(0,z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function W3(n=TD()){return G1().then(e=>{if(!e)throw Jr.create("unsupported-browser")},e=>{throw Jr.create("indexed-db-unsupported")}),Zu((0,z.m9)(n),"messaging").getImmediate()}!function OR(){Vi(new Er.wA("messaging",H1,"PUBLIC")),Vi(new Er.wA("messaging-internal",z1,"PRIVATE")),wi(qC,"0.12.4"),wi(qC,"0.12.4","esm2017")}();const KC="analytics",q3="firebase_id",Y1="origin",YC=6e4,Q1="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",QC="https://www.googletagmanager.com/gtag/js",sr=new Ui.Yd("@firebase/analytics"),Bi=new z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Z3(n){if(!n.startsWith(QC)){const e=Bi.create("invalid-gtag-resource",{gtagURL:n});return sr.warn(e.message),""}return n}function J1(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function eS(){return eS=(0,j.Z)(function*(n,e,t,r,i,a){const l=r[i];try{if(l)yield e[l];else{const g=(yield J1(t)).find(y=>y.measurementId===i);g&&(yield e[g.appId])}}catch(f){sr.error(f)}n("config",i,a)}),eS.apply(this,arguments)}function yl(){return yl=(0,j.Z)(function*(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const f=yield J1(t);for(const g of l){const y=f.find(T=>T.measurementId===g),E=y&&e[y.appId];if(!E){a=[];break}a.push(E)}}0===a.length&&(a=Object.values(e)),yield Promise.all(a),n("event",r,i||{})}catch(a){sr.error(a)}}),yl.apply(this,arguments)}const BR=30,tS=new class $R{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function JC(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function XC(){return XC=(0,j.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:JC(r)},a=Q1.replace("{app-id}",t),l=yield fetch(a,i);if(200!==l.status&&304!==l.status){let f="";try{const g=yield l.json();null!==(e=g.error)&&void 0!==e&&e.message&&(f=g.error.message)}catch{}throw Bi.create("config-fetch-failed",{httpStatus:l.status,responseMessage:f})}return l.json()}),XC.apply(this,arguments)}function ew(){return ew=(0,j.Z)(function*(n,e=tS,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Bi.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Bi.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new qR;return setTimeout((0,j.Z)(function*(){f.abort()}),void 0!==t?t:YC),nS({appId:r,apiKey:i,measurementId:a},l,f,e)}),ew.apply(this,arguments)}function nS(n,e,t){return tw.apply(this,arguments)}function tw(){return tw=(0,j.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=tS){var a;const{appId:l,measurementId:f}=n;try{yield function GR(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Bi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(g){if(f)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:f};throw g}try{const g=yield function HR(n){return XC.apply(this,arguments)}(n);return i.deleteThrottleMetadata(l),g}catch(g){const y=g;if(!function WR(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(y)){if(i.deleteThrottleMetadata(l),f)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:l,measurementId:f};throw g}const E=503===Number(null===(a=y?.customData)||void 0===a?void 0:a.httpStatus)?(0,z.$s)(t,i.intervalMillis,BR):(0,z.$s)(t,i.intervalMillis),T={throttleEndTimeMillis:Date.now()+E,backoffCount:t+1};return i.setThrottleMetadata(l,T),sr.debug(`Calling attemptFetch again in ${E} millis`),nS(n,T,r,i)}}),tw.apply(this,arguments)}class qR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let i_,Gf;function rw(){return rw=(0,j.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const a=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:a}))}}),rw.apply(this,arguments)}function Wf(){return Wf=(0,j.Z)(function*(){if(!(0,z.hl)())return sr.warn(Bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,z.eu)()}catch(n){return sr.warn(Bi.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0}),Wf.apply(this,arguments)}function aS(){return aS=(0,j.Z)(function*(n,e,t,r,i,a,l){var f;const g=function zR(n){return ew.apply(this,arguments)}(n);g.then(R=>{t[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>sr.error(R)),e.push(g);const y=function aw(){return Wf.apply(this,arguments)}().then(R=>{if(R)return r.getId()}),[E,T]=yield Promise.all([g,y]);(function VR(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(QC)&&t.src.includes(n))return t;return null})(a)||function RR(n,e){const t=function X1(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:Z3}),r=document.createElement("script"),i=`${QC}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(a,E.measurementId),Gf&&(i("consent","default",Gf),function ua(n){Gf=n}(void 0)),i("js",new Date);const A=null!==(f=l?.config)&&void 0!==f?f:{};return A[Y1]="firebase",A.update=!0,null!=T&&(A[q3]=T),i("config",E.measurementId,A),i_&&(i("set",i_),function ow(n){i_=n}(void 0)),E.measurementId}),aS.apply(this,arguments)}class cS{constructor(e){this.app=e}_delete(){return delete Lo[this.app.options.appId],Promise.resolve()}}let Lo={},lS=[];const uS={};let YR,to,a_="dataLayer",lw=!1;function uw(n,e,t){!function K3(){const n=[];if((0,z.ru)()&&n.push("This is a browser extension environment."),(0,z.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Bi.create("invalid-analytics-context",{errorInfo:e});sr.warn(t.message)}}();const r=n.options.appId;if(!r)throw Bi.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Bi.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Lo[r])throw Bi.create("already-exists",{id:r});if(!lw){!function kR(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(a_);const{wrappedGtag:a,gtagCore:l}=function UR(n,e,t,r,i){let a=function(...l){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function r_(n,e,t,r){function a(){return a=(0,j.Z)(function*(l,...f){try{if("event"===l){const[g,y]=f;yield function LR(n,e,t,r,i){return yl.apply(this,arguments)}(n,e,t,g,y)}else if("config"===l){const[g,y]=f;yield function FR(n,e,t,r,i,a){return eS.apply(this,arguments)}(n,e,t,r,g,y)}else if("consent"===l){const[g]=f;n("consent","update",g)}else if("get"===l){const[g,y,E]=f;n("get",g,y,E)}else if("set"===l){const[g]=f;n("set",g)}else n(l,...f)}catch(g){sr.error(g)}}),a.apply(this,arguments)}return function i(l){return a.apply(this,arguments)}}(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}(Lo,lS,uS,a_,"gtag");to=a,YR=l,lw=!0}return Lo[r]=function KR(n,e,t,r,i,a,l){return aS.apply(this,arguments)}(n,lS,uS,e,YR,a_,t),new cS(n)}function XR(){return c_.apply(this,arguments)}function c_(){return(c_=(0,j.Z)(function*(){if((0,z.ru)()||!(0,z.zI)()||!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}const hS="@firebase/analytics";!function X3(){Vi(new Er.wA(KC,(e,{options:t})=>uw(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Vi(new Er.wA("analytics-internal",function n(e){try{const t=e.getProvider(KC).getImmediate();return{logEvent:(r,i,a)=>function J3(n,e,t,r){n=(0,z.m9)(n),function nw(n,e,t,r,i){return rw.apply(this,arguments)}(to,Lo[n.app.options.appId],e,t,r).catch(i=>sr.error(i))}(t,r,i,a)}}catch(t){throw Bi.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),wi(hS,"0.10.0"),wi(hS,"0.10.0","esm2017")}();const pS=new class tV extends Wg{}(class eV extends sf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var Zf=k(5137),sd=k(3093);const od=new d.GfV("7.6.1"),gS="__angularfire_symbol__analyticsIsSupportedValue",mS="__angularfire_symbol__analyticsIsSupported",_S="__angularfire_symbol__remoteConfigIsSupportedValue",yS="__angularfire_symbol__remoteConfigIsSupported",dw="__angularfire_symbol__messagingIsSupportedValue",ad="__angularfire_symbol__messagingIsSupported";globalThis[mS]||(globalThis[mS]=XR().then(n=>globalThis[gS]=n).catch(()=>globalThis[gS]=!1)),globalThis[ad]||(globalThis[ad]=G1().then(n=>globalThis[dw]=n).catch(()=>globalThis[dw]=!1)),globalThis[yS]||(globalThis[yS]=jf().then(n=>globalThis[_S]=n).catch(()=>globalThis[_S]=!1));const l_={async:()=>globalThis[ad],sync:()=>{const n=globalThis[dw];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function vl(n,e,t){if(e){if(1===e.length)return e[0];const a=e.filter(l=>l.app===t);if(1===a.length)return a[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const ec=(n,e)=>{const t=e?[e]:(0,ln.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(l=>{r.includes(l)||r.push(l)})}),r};function tc(){}class vS{constructor(e,t=pS){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(l){i.runGuarded(()=>{e.apply(this,[l])})},t,r)}}class fw{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tc,{},tc,tc)),t.pipe(Dn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Uo=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new vS(Zone.current)),this.insideAngular=t.run(()=>new vS(Zone.current,kv)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Vo(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function ld(n){return Vo().ngZone.run(()=>n())}function es(n){return Vo(),function ok(n){return function(t){return(t=t.lift(new fw(n.ngZone))).pipe((0,Zf.R)(n.outsideAngular),(0,sd.Q)(n.insideAngular))}}(Vo())(n)}const ak=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),ld(()=>n.apply(void 0,r))},ud=(n,e)=>function(){let t;const r=arguments;for(let a=0;a<arguments.length;a++)"function"==typeof r[a]&&(e&&(t||(t=ld(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tc,{},tc,tc)))),r[a]=ak(r[a],t));const i=function rV(n){return Vo().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Gr.y){const a=Vo();return i.pipe((0,Zf.R)(a.outsideAngular),(0,sd.Q)(a.insideAngular))}return ld(()=>i)}return i instanceof Gr.y?i.pipe(es):i instanceof Promise?ld(()=>new Promise((a,l)=>i.then(f=>ld(()=>a(f)),f=>ld(()=>l(f))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:ld(()=>i)};function u_(){return(0,qr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Pr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Ke,CS=k(3997),bs=k(6304),ck=(k(8661),k(3399)),wS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ts={},d_=d_||{},It=wS||self;function h_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var IS="closure_uid_"+(1e9*Math.random()>>>0),lk=0;function uk(n,e,t){return n.call.apply(n.bind,arguments)}function dk(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ai(n,e,t){return(ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?uk:dk).apply(null,arguments)}function Yf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function br(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function nc(){this.s=this.s,this.o=this.o}nc.prototype.s=!1,nc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function sV(n){Object.prototype.hasOwnProperty.call(n,IS)&&n[IS]||(n[IS]=++lk)}(this)},nc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function bS(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function TS(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(h_(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Rr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Rr.prototype.h=function(){this.defaultPrevented=!0};var DS=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",()=>{},e),It.removeEventListener("test",()=>{},e)}catch{}return n}();function dd(n){return/^[\s\xa0]*$/.test(n)}function f_(){var n=It.navigator;return n&&(n=n.userAgent)?n:""}function ns(n){return-1!=f_().indexOf(n)}function gw(n){return gw[" "](n),n}gw[" "]=function(){};var AS,SS=ns("Opera"),Cl=ns("Trident")||ns("MSIE"),fk=ns("Edge"),mw=fk||Cl,pk=ns("Gecko")&&!(-1!=f_().toLowerCase().indexOf("webkit")&&!ns("Edge"))&&!(ns("Trident")||ns("MSIE"))&&!ns("Edge"),gk=-1!=f_().toLowerCase().indexOf("webkit")&&!ns("Edge");function mk(){var n=It.document;return n?n.documentMode:void 0}e:{var _w="",yw=function(){var n=f_();return pk?/rv:([^\);]+)(\)|;)/.exec(n):fk?/Edge\/([\d\.]+)/.exec(n):Cl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):gk?/WebKit\/(\S+)/.exec(n):SS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(yw&&(_w=yw?yw[1]:""),Cl){var MS=mk();if(null!=MS&&MS>parseFloat(_w)){AS=String(MS);break e}}AS=_w}var oV=It.document&&Cl&&(mk()||parseInt(AS,10))||void 0;function p_(n,e){if(Rr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(pk){e:{try{gw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yk[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&p_.$.h.call(this)}}br(p_,Rr);var yk={2:"touch",3:"pen",4:"mouse"};p_.prototype.h=function(){p_.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var g_="closure_listenable_"+(1e6*Math.random()|0),aV=0;function cV(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++aV,this.fa=this.ia=!1}function vw(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function PS(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Ck(n){const e={};for(const t in n)e[t]=n[t];return e}const s="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function o(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<s.length;a++)t=s[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function c(n){this.src=n,this.g={},this.h=0}function u(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=pw(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(vw(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function h(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}c.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=h(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new cV(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var p="closure_lm_"+(1e6*Math.random()|0),v={};function C(n,e,t,r,i){if(r&&r.once)return M(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)C(n,e[a],t,r,i);return null}return t=it(t),n&&n[g_]?n.O(e,t,Kf(r)?!!r.capture:!!r,i):b(n,e,t,!1,r,i)}function b(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Kf(i)?!!i.capture:!!i,f=Se(n);if(f||(n[p]=f=new c(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function D(){const e=ue;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)DS||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Y(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function M(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)M(n,e[a],t,r,i);return null}return t=it(t),n&&n[g_]?n.P(e,t,Kf(r)?!!r.capture:!!r,i):b(n,e,t,!0,r,i)}function L(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)L(n,e[a],t,r,i);else r=Kf(r)?!!r.capture:!!r,t=it(t),n&&n[g_]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=h(a=n.g[e],t,r,i))&&(vw(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Se(n))&&(e=n.g[e.toString()],n=-1,e&&(n=h(e,t,r,i)),(t=-1<n?e[n]:null)&&q(t))}function q(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[g_])u(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Y(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Se(e))?(u(t,n),0==t.h&&(t.src=null,e[p]=null)):vw(n)}}}function Y(n){return n in v?v[n]:v[n]="on"+n}function ue(n,e){if(n.fa)n=!0;else{e=new p_(e,this);var t=n.listener,r=n.la||n.src;n.ia&&q(n),n=t.call(r,e)}return n}function Se(n){return(n=n[p])instanceof c?n:null}var Ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(n){return"function"==typeof n?n:(n[Ge]||(n[Ge]=function(e){return n.handleEvent(e)}),n[Ge])}function de(){nc.call(this),this.i=new c(this),this.S=this,this.J=null}function nt(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Rr(e,n);else if(e instanceof Rr)e.target=e.target||n;else{var i=e;o(e=new Rr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Mt(l,r,!0,e)&&i}if(i=Mt(l=e.g=n,r,!0,e)&&i,i=Mt(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Mt(l=e.g=t[a],r,!1,e)&&i}function Mt(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==t){var f=l.listener,g=l.la||l.src;l.ia&&u(n.i,l),i=!1!==f.call(g,r)&&i}}return i&&!r.defaultPrevented}br(de,nc),de.prototype[g_]=!0,de.prototype.removeEventListener=function(n,e,t,r){L(this,n,e,t,r)},de.prototype.N=function(){if(de.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)vw(t[r]);delete n.g[e],n.h--}}this.J=null},de.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},de.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var on=It.JSON.stringify;function da(){var n=Ek;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var m_=new class $i{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new wk,n=>n.reset());class wk{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ik(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function MH(n){It.setTimeout(()=>{throw n},0)}let Cw,ww=!1,Ek=new class hd{constructor(){this.h=this.g=null}add(e,t){const r=m_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},lV=()=>{const n=It.Promise.resolve(void 0);Cw=()=>{n.then(xH)}};var xH=()=>{for(var n;n=da();){try{n.h.call(n.g)}catch(t){MH(t)}var e=m_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ww=!1};function OS(n,e){de.call(this),this.h=n||1,this.g=e||It,this.j=ai(this.qb,this),this.l=Date.now()}function bk(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Tk(n,e,t){if("function"==typeof n)t&&(n=ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function uV(n){n.g=Tk(()=>{n.g=null,n.i&&(n.i=!1,uV(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}br(OS,de),(Ke=OS.prototype).ga=!1,Ke.T=null,Ke.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),nt(this,"tick"),this.ga&&(bk(this),this.start()))}},Ke.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.N=function(){OS.$.N.call(this),bk(this),delete this.g};class PH extends nc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uV(this)}N(){super.N(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Iw(n){nc.call(this),this.h=n,this.g={}}br(Iw,nc);var dV=[];function hV(n,e,t,r){Array.isArray(t)||(t&&(dV[0]=t.toString()),t=dV);for(var i=0;i<t.length;i++){var a=C(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function fV(n){PS(n.g,function(e,t){this.g.hasOwnProperty(t)&&q(e)},n),n.g={}}function NS(){this.g=!0}function __(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function kH(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return on(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Iw.prototype.N=function(){Iw.$.N.call(this),fV(this)},Iw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},NS.prototype.Ea=function(){this.g=!1},NS.prototype.info=function(){};var Qf={},pV=null;function RS(){return pV=pV||new de}function gV(n){Rr.call(this,Qf.Ta,n)}function Ew(n){const e=RS();nt(e,new gV(e))}function mV(n,e){Rr.call(this,Qf.STAT_EVENT,n),this.stat=e}function rs(n){const e=RS();nt(e,new mV(e,n))}function _V(n,e){Rr.call(this,Qf.Ua,n),this.size=e}function bw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Qf.Ta="serverreachability",br(gV,Rr),Qf.STAT_EVENT="statevent",br(mV,Rr),Qf.Ua="timingevent",br(_V,Rr);var kS={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},yV={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Dk(){}function CV(){}Dk.prototype.h=null;var Mk,Tw={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Sk(){Rr.call(this,"d")}function Ak(){Rr.call(this,"c")}function FS(){}function Dw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Iw(this),this.P=FH,this.V=new OS(n=mw?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new wV}function wV(){this.i=null,this.g="",this.h=!1}br(Sk,Rr),br(Ak,Rr),br(FS,Dk),FS.prototype.g=function(){return new XMLHttpRequest},FS.prototype.i=function(){return{}},Mk=new FS;var FH=45e3,xk={},LS={};function Pk(n,e,t){n.L=1,n.v=jS(wl(e)),n.s=t,n.S=!0,IV(n,null)}function IV(n,e){n.G=Date.now(),Sw(n),n.A=wl(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),OV(t.i,"t",r),n.C=0,t=n.l.J,n.h=new wV,n.g=n5(n.l,t?e:null,!n.s),0<n.O&&(n.M=new PH(ai(n.Pa,n,n.g),n.O)),hV(n.U,n.g,"readystatechange",n.nb),e=n.I?Ck(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ew(),function OH(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),g=0;g<f.length;g++){var y=f[g].split("=");if(1<y.length){var E=y[0];y=y[1];var T=E.split("_");l=2<=T.length&&"type"==T[1]?l+(E+"=")+y+"&":l+(E+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function EV(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function bV(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=LH(n,t),i==LS){4==e&&(n.o=4,rs(14),r=!1),__(n.j,n.m,null,"[Incomplete Response]");break}if(i==xk){n.o=4,rs(15),__(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}__(n.j,n.m,i,null),Ok(n,i)}EV(n)&&i!=LS&&i!=xk&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,rs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Vk(e),e.M=!0,rs(11))):(__(n.j,n.m,t,"[Invalid Chunked Response]"),Jf(n),Aw(n))}function LH(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?LS:(t=Number(e.substring(t,r)),isNaN(t)?xk:(r+=1)+t>e.length?LS:(e=e.slice(r,r+t),n.C=r+t,e))}function Sw(n){n.Y=Date.now()+n.P,TV(n,n.P)}function TV(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bw(ai(n.lb,n),e)}function US(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function Aw(n){0==n.l.H||n.J||JV(n.l,n)}function Jf(n){US(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,bk(n.V),fV(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Ok(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Nk(t.i,n)))if(!n.K&&Nk(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;qS(t),GS(t)}Uk(t),rs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=bw(ai(t.ib,t),6e3));if(1>=kV(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ep(t,11)}else if((n.K||t.g==n)&&qS(t),!dd(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const E=y[3];null!=E&&(t.ra=E,t.l.info("VER="+t.ra));const T=y[4];null!=T&&(t.Ga=T,t.l.info("SVER="+t.Ga));const A=y[5];null!=A&&"number"==typeof A&&0<A&&(t.L=r=1.5*A,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const R=n.g;if(R){const G=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.i;a.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Rk(a,a.h),a.h=null))}if(r.F){const Q=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,$n(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=t5(r,r.J?r.pa:null,r.Y),l.K){FV(r.i,l);var f=l,g=r.L;g&&f.setTimeout(g),f.B&&(US(f),Sw(f)),r.g=l}else YV(r);0<t.j.length&&WS(t)}else"stop"!=y[0]&&"close"!=y[0]||ep(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?ep(t,7):Lk(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}Ew()}catch{}}function DV(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(h_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function VH(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(h_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function UH(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(h_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Ke=Dw.prototype).setTimeout=function(n){this.P=n},Ke.nb=function(n){n=n.target;const e=this.M;e&&3==rc(n)?e.l():this.Pa(n)},Ke.Pa=function(n){try{if(n==this.g)e:{const E=rc(this.g);var e=this.g.Ia();if(this.g.da(),!(3>E)&&(3!=E||mw||this.g&&(this.h.h||this.g.ja()||zV(this.g)))){this.J||4!=E||7==e||Ew(),US(this);var t=this.g.da();this.ca=t;t:if(EV(this)){var r=zV(this.g);n="";var i=r.length,a=4==rc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Jf(this),Aw(this);var l="";break t}this.h.i=new It.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function NH(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.W,E,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,g=this.g;if((f=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dd(f)){var y=f;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,rs(12),Jf(this),Aw(this);break e}__(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ok(this,t)}this.S?(bV(this,E,l),mw&&this.i&&3==E&&(hV(this.U,this.V,"tick",this.mb),this.V.start())):(__(this.j,this.m,l,null),Ok(this,l)),4==E&&Jf(this),this.i&&!this.J&&(4==E?JV(this.l,this):(this.i=!1,Sw(this)))}else(function rz(n){const e={};n=(n.g&&2<=rc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(dd(n[r]))continue;var t=Ik(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function vk(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,rs(12)):(this.o=0,rs(13)),Jf(this),Aw(this)}}}catch{}},Ke.mb=function(){if(this.g){var n=rc(this.g),e=this.g.ja();this.C<e.length&&(US(this),bV(this,n,e),this.i&&4!=n&&Sw(this))}},Ke.cancel=function(){this.J=!0,Jf(this)},Ke.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function RH(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ew(),rs(17)),Jf(this),this.o=2,Aw(this)):TV(this,this.Y-n)};var SV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xf(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Xf){this.h=n.h,VS(this,n.j),this.s=n.s,this.g=n.g,BS(this,n.m),this.l=n.l;var e=n.i,t=new Pw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),AV(this,t),this.o=n.o}else n&&(e=String(n).match(SV))?(this.h=!1,VS(this,e[1]||"",!0),this.s=Mw(e[2]||""),this.g=Mw(e[3]||"",!0),BS(this,e[4]),this.l=Mw(e[5]||"",!0),AV(this,e[6]||"",!0),this.o=Mw(e[7]||"")):(this.h=!1,this.i=new Pw(null,this.h))}function wl(n){return new Xf(n)}function VS(n,e,t){n.j=t?Mw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function BS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function AV(n,e,t){e instanceof Pw?(n.i=e,function WH(n,e){e&&!n.j&&(fd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(xV(this,r),OV(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=xw(e,zH)),n.i=new Pw(e,n.h))}function $n(n,e,t){n.i.set(e,t)}function jS(n){return $n(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Mw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function xw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,jH),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function jH(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(xw(e,MV,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(xw(e,MV,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(xw(t,"/"==t.charAt(0)?HH:$H,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",xw(t,GH)),n.join("")};var MV=/[#\/\?@]/g,$H=/[#\?:]/g,HH=/[#\?]/g,zH=/[#\?@]/g,GH=/#/g;function Pw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function fd(n){n.g||(n.g=new Map,n.h=0,n.i&&function BH(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xV(n,e){fd(n),e=y_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function PV(n,e){return fd(n),e=y_(n,e),n.g.has(e)}function OV(n,e,t){xV(n,e),0<t.length&&(n.i=null,n.g.set(y_(n,e),bS(t)),n.h+=t.length)}function y_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function NV(n){this.l=n||ZH,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ka&&It.g.Ka()&&It.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=Pw.prototype).add=function(n,e){fd(this),this.i=null,n=y_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){fd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ke.ta=function(){fd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Ke.Z=function(n){fd(this);let e=[];if("string"==typeof n)PV(this,n)&&(e=e.concat(this.g.get(y_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ke.set=function(n,e){return fd(this),this.i=null,PV(this,n=y_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var ZH=10;function RV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function kV(n){return n.h?1:n.g?n.g.size:0}function Nk(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Rk(n,e){n.g?n.g.add(e):n.h=e}function FV(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function LV(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return bS(n.i)}NV.prototype.cancel=function(){if(this.i=LV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var KH=class{stringify(n){return It.JSON.stringify(n,void 0)}parse(n){return It.JSON.parse(n,void 0)}};function YH(){this.g=new KH}function QH(n,e,t){const r=t||"";try{DV(n,function(i,a){let l=i;Kf(i)&&(l=on(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function $S(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ow(n){this.l=n.fc||null,this.j=n.ob||!1}function HS(n,e){de.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=kk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}br(Ow,Dk),Ow.prototype.g=function(){return new HS(this.l,this.j)},Ow.prototype.i=function(n){return function(){return n}}({}),br(HS,de);var kk=0;function UV(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Nw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Rw(n)}function Rw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=HS.prototype).open=function(n,e){if(this.readyState!=kk)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Rw(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||It).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nw(this)),this.readyState=kk},Ke.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Rw(this)),this.g&&(this.readyState=3,Rw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof It.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;UV(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ke.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Nw(this):Rw(this),3==this.readyState&&UV(this)}},Ke.Za=function(n){this.g&&(this.response=this.responseText=n,Nw(this))},Ke.Ya=function(n){this.g&&(this.response=n,Nw(this))},Ke.ka=function(){this.g&&Nw(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(HS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var XH=It.JSON.parse;function dr(n){de.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=VV,this.L=this.M=!1}br(dr,de);var VV="",ez=/^https?$/i,tz=["POST","PUT"];function BV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,jV(n),zS(n)}function jV(n){n.F||(n.F=!0,nt(n,"complete"),nt(n,"error"))}function $V(n){if(n.h&&typeof d_<"u"&&(!n.C[1]||4!=rc(n)||2!=n.da()))if(n.v&&4==rc(n))Tk(n.La,0,n);else if(nt(n,"readystatechange"),4==rc(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(SV)[1]||null;!i&&It.self&&It.self.location&&(i=It.self.location.protocol.slice(0,-1)),r=!ez.test(i?i.toLowerCase():"")}t=r}if(t)nt(n,"complete"),nt(n,"success");else{n.m=6;try{var a=2<rc(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",jV(n)}}finally{zS(n)}}}function zS(n,e){if(n.g){HV(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||nt(n,"ready");try{t.onreadystatechange=r}catch{}}}function HV(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function rc(n){return n.g?n.g.readyState:0}function zV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case VV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function GV(n){let e="";return PS(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Fk(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=GV(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):$n(n,e,t))}function kw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function WV(n){this.Ga=0,this.j=[],this.l=new NS,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=kw("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=kw("baseRetryDelayMs",5e3,n),this.hb=kw("retryDelaySeedMs",1e4,n),this.eb=kw("forwardChannelMaxRetries",2,n),this.xa=kw("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new NV(n&&n.concurrentRequestLimit),this.Ja=new YH,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Lk(n){if(qV(n),3==n.H){var e=n.W++,t=wl(n.I);if($n(t,"SID",n.K),$n(t,"RID",e),$n(t,"TYPE","terminate"),Fw(n,t),(e=new Dw(n,n.l,e)).L=2,e.v=jS(wl(t)),t=!1,It.navigator&&It.navigator.sendBeacon)try{t=It.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=n5(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Sw(e)}e5(n)}function GS(n){n.g&&(Vk(n),n.g.cancel(),n.g=null)}function qV(n){GS(n),n.u&&(It.clearTimeout(n.u),n.u=null),qS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function WS(n){if(!RV(n.i)&&!n.m){n.m=!0;var e=n.Na;Cw||lV(),ww||(Cw(),ww=!0),Ek.add(e,n),n.C=0}}function ZV(n,e){var t;t=e?e.m:n.W++;const r=wl(n.I);$n(r,"SID",n.K),$n(r,"RID",t),$n(r,"AID",n.V),Fw(n,r),n.o&&n.s&&Fk(r,n.o,n.s),t=new Dw(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=KV(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Rk(n.i,t),Pk(t,r,e)}function Fw(n,e){n.na&&PS(n.na,function(t,r){$n(e,r,t)}),n.h&&DV({},function(t,r){$n(e,r,t)})}function KV(n,e,t){t=Math.min(n.j.length,t);var r=n.h?ai(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let g=0;g<t;g++){let y=i[g].g;const E=i[g].map;if(y-=a,0>y)a=Math.max(0,i[g].g-100),f=!1;else try{QH(E,l,"req"+y+"_")}catch{r&&r(E)}}if(f){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function YV(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Cw||lV(),ww||(Cw(),ww=!0),Ek.add(e,n),n.A=0}}function Uk(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=bw(ai(n.Ma,n),XV(n,n.A)),n.A++,0))}function Vk(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function QV(n){n.g=new Dw(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=wl(n.wa);$n(e,"RID","rpc"),$n(e,"SID",n.K),$n(e,"AID",n.V),$n(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&$n(e,"TO",n.qa),$n(e,"TYPE","xmlhttp"),Fw(n,e),n.o&&n.s&&Fk(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=jS(wl(e)),t.s=null,t.S=!0,IV(t,n)}function qS(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function JV(n,e){var t=null;if(n.g==e){qS(n),Vk(n),n.g=null;var r=2}else{if(!Nk(n.i,e))return;t=e.F,FV(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;nt(r=RS(),new _V(r,t)),WS(n)}else YV(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function iz(n,e){return!(kV(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=bw(ai(n.Na,n,e),XV(n,n.C)),n.C++,0)))}(n,e)||2==r&&Uk(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ep(n,5);break;case 4:ep(n,10);break;case 3:ep(n,6);break;default:ep(n,2)}}function XV(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ep(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=ai(n.pb,n);t||(t=new Xf("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||VS(t,"https"),jS(t)),function JH(n,e){const t=new NS;if(It.Image){const r=new Image;r.onload=Yf($S,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yf($S,t,r,"TestLoadImage: error",!1,e),r.onabort=Yf($S,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yf($S,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else rs(2);n.H=0,n.h&&n.h.za(e),e5(n),qV(n)}function e5(n){if(n.H=0,n.ma=[],n.h){const e=LV(n.i);(0!=e.length||0!=n.j.length)&&(TS(n.ma,e),TS(n.ma,n.j),n.i.i.length=0,bS(n.j),n.j.length=0),n.h.ya()}}function t5(n,e,t){var r=t instanceof Xf?wl(t):new Xf(t);if(""!=r.g)e&&(r.g=e+"."+r.g),BS(r,r.m);else{var i=It.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Xf(null);r&&VS(a,r),e&&(a.g=e),i&&BS(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&$n(r,t,e),$n(r,"VER",n.ra),Fw(n,r),r}function n5(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dr(t&&n.Ha&&!n.va?new Ow({ob:!0}):n.va)).Oa(n.J),e}function r5(){}function ZS(){if(Cl&&!(10<=Number(oV)))throw Error("Environmental error: no available transport.")}function no(n,e){de.call(this),this.g=new WV(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!dd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dd(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new v_(this)}function i5(n){Sk.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function s5(){Ak.call(this),this.status=1}function v_(n){this.g=n}function ha(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Bk(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],l=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;l=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(l<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((a=(e=t+((l=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=a+((l=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function yn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(Ke=dr.prototype).Oa=function(n){this.M=n},Ke.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Mk.g(),this.C=function vV(n){return n.h||(n.h=n.i())}(this.u?this.u:Mk),this.g.onreadystatechange=ai(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void BV(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=It.FormData&&n instanceof It.FormData,!(0<=pw(tz,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{HV(this),0<this.B&&((this.L=function nz(n){return Cl&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.ua,this)):this.A=Tk(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){BV(this,a)}},Ke.ua=function(){typeof d_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nt(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,nt(this,"complete"),nt(this,"abort"),zS(this))},Ke.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zS(this,!0)),dr.$.N.call(this)},Ke.La=function(){this.s||(this.G||this.v||this.l?$V(this):this.kb())},Ke.kb=function(){$V(this)},Ke.isActive=function(){return!!this.g},Ke.da=function(){try{return 2<rc(this)?this.g.status:-1}catch{return-1}},Ke.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ke.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),XH(e)}},Ke.Ia=function(){return this.m},Ke.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=WV.prototype).ra=8,Ke.H=1,Ke.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Dw(this,this.l,n);let a=this.s;if(this.U&&(a?(a=Ck(a),o(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=KV(this,i,e),$n(t=wl(this.I),"RID",n),$n(t,"CVER",22),this.F&&$n(t,"X-HTTP-Session-Id",this.F),Fw(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(GV(a)))+"&"+e:this.o&&Fk(t,this.o,a)),Rk(this.i,i),this.bb&&$n(t,"TYPE","init"),this.P?($n(t,"$req",e),$n(t,"SID","null"),i.aa=!0,Pk(i,t,null)):Pk(i,t,e),this.H=2}}else 3==this.H&&(n?ZV(this,n):0==this.j.length||RV(this.i)||ZV(this))},Ke.Ma=function(){if(this.u=null,QV(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=bw(ai(this.jb,this),n)}},Ke.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,rs(10),GS(this),QV(this))},Ke.ib=function(){null!=this.v&&(this.v=null,GS(this),Uk(this),rs(19))},Ke.pb=function(n){n?(this.l.info("Successfully pinged google.com"),rs(2)):(this.l.info("Failed to ping google.com"),rs(1))},Ke.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ke=r5.prototype).Ba=function(){},Ke.Aa=function(){},Ke.za=function(){},Ke.ya=function(){},Ke.isActive=function(){return!0},Ke.Va=function(){},ZS.prototype.g=function(n,e){return new no(n,e)},br(no,de),no.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;rs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=t5(n,null,n.Y),WS(n)},no.prototype.close=function(){Lk(this.g)},no.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=on(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&WS(e)},no.prototype.N=function(){this.g.h=null,delete this.j,Lk(this.g),delete this.g,no.$.N.call(this)},br(i5,Sk),br(s5,Ak),br(v_,r5),v_.prototype.Ba=function(){nt(this.g,"a")},v_.prototype.Aa=function(n){nt(this.g,new i5(n))},v_.prototype.za=function(n){nt(this.g,new s5)},v_.prototype.ya=function(){nt(this.g,"b")},br(ha,function sz(){this.blockSize=-1}),ha.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ha.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)Bk(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){Bk(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){Bk(this,r),i=0;break}}this.h=i,this.i+=e},ha.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var oz={};function jk(n){return-128<=n&&128>n?function hk(n,e){var t=oz;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new yn([0|e],0>e?-1:0)}):new yn([0|n],0>n?-1:0)}function ic(n){if(isNaN(n)||!isFinite(n))return C_;if(0>n)return Ei(ic(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=$k;return new yn(e,0)}var $k=4294967296,C_=jk(0),Hk=jk(1),a5=jk(16777216);function Il(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Bo(n){return-1==n.h}function Ei(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new yn(t,~n.h).add(Hk)}function KS(n,e){return n.add(Ei(e))}function YS(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Lw(n,e){this.g=n,this.h=e}function QS(n,e){if(Il(e))throw Error("division by zero");if(Il(n))return new Lw(C_,C_);if(Bo(n))return e=QS(Ei(n),e),new Lw(Ei(e.g),Ei(e.h));if(Bo(e))return e=QS(n,Ei(e)),new Lw(Ei(e.g),e.h);if(30<n.g.length){if(Bo(n)||Bo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Hk,r=e;0>=r.X(n);)t=c5(t),r=c5(r);var i=w_(t,1),a=w_(r,1);for(r=w_(r,2),t=w_(t,2);!Il(r);){var l=a.add(r);0>=l.X(n)&&(i=i.add(t),a=l),r=w_(r,1),t=w_(t,1)}return e=KS(n,i.R(e)),new Lw(i,e)}for(i=C_;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(a=ic(t)).R(e);Bo(l)||0<l.X(n);)l=(a=ic(t-=r)).R(e);Il(a)&&(a=Hk),i=i.add(a),n=KS(n,l)}return new Lw(i,n)}function c5(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new yn(t,n.h)}function w_(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new yn(i,n.h)}(Ke=yn.prototype).ea=function(){if(Bo(this))return-Ei(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:$k+r)*e,e*=$k}return n},Ke.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Il(this))return"0";if(Bo(this))return"-"+Ei(this).toString(n);for(var e=ic(Math.pow(n,6)),t=this,r="";;){var i=QS(t,e).g,a=((0<(t=KS(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Il(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ke.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ke.X=function(n){return Bo(n=KS(this,n))?-1:Il(n)?0:1},Ke.abs=function(){return Bo(this)?Ei(this):this},Ke.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),l=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(a&=65535)}return new yn(t,-2147483648&t[t.length-1]?-1:0)},Ke.R=function(n){if(Il(this)||Il(n))return C_;if(Bo(this))return Bo(n)?Ei(this).R(Ei(n)):Ei(Ei(this).R(n));if(Bo(n))return Ei(this.R(Ei(n)));if(0>this.X(a5)&&0>n.X(a5))return ic(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,l=65535&this.D(r),f=n.D(i)>>>16,g=65535&n.D(i);t[2*r+2*i]+=l*g,YS(t,2*r+2*i),t[2*r+2*i+1]+=a*g,YS(t,2*r+2*i+1),t[2*r+2*i+1]+=l*f,YS(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,YS(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new yn(t,0)},Ke.gb=function(n){return QS(this,n).h},Ke.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new yn(t,this.h&n.h)},Ke.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new yn(t,this.h|n.h)},Ke.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new yn(t,this.h^n.h)},ZS.prototype.createWebChannel=ZS.prototype.g,no.prototype.send=no.prototype.u,no.prototype.open=no.prototype.m,no.prototype.close=no.prototype.close,kS.NO_ERROR=0,kS.TIMEOUT=8,kS.HTTP_ERROR=6,yV.COMPLETE="complete",CV.EventType=Tw,Tw.OPEN="a",Tw.CLOSE="b",Tw.ERROR="c",Tw.MESSAGE="d",de.prototype.listen=de.prototype.O,dr.prototype.listenOnce=dr.prototype.P,dr.prototype.getLastError=dr.prototype.Sa,dr.prototype.getLastErrorCode=dr.prototype.Ia,dr.prototype.getStatus=dr.prototype.da,dr.prototype.getResponseJson=dr.prototype.Wa,dr.prototype.getResponseText=dr.prototype.ja,dr.prototype.send=dr.prototype.ha,dr.prototype.setWithCredentials=dr.prototype.Oa,ha.prototype.digest=ha.prototype.l,ha.prototype.reset=ha.prototype.reset,ha.prototype.update=ha.prototype.j,yn.prototype.add=yn.prototype.add,yn.prototype.multiply=yn.prototype.R,yn.prototype.modulo=yn.prototype.gb,yn.prototype.compare=yn.prototype.X,yn.prototype.toNumber=yn.prototype.ea,yn.prototype.toString=yn.prototype.toString,yn.prototype.getBits=yn.prototype.D,yn.fromNumber=ic,yn.fromString=function o5(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ei(o5(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ic(Math.pow(e,8)),r=C_,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);8>a?(a=ic(Math.pow(e,a)),r=r.R(a).add(ic(l))):r=(r=r.R(t)).add(ic(l))}return r};var az=ts.createWebChannelTransport=function(){return new ZS},cz=ts.getStatEventTarget=function(){return RS()},zk=ts.ErrorCode=kS,lz=ts.EventType=yV,uz=ts.Event=Qf,l5=ts.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},dz=ts.FetchXmlHttpFactory=Ow,JS=ts.WebChannel=CV,hz=ts.XhrIo=dr,fz=ts.Md5=ha,I_=ts.Integer=yn;const u5="@firebase/firestore";class ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");let E_="9.23.0";const pd=new Ui.Yd("@firebase/firestore");function Gk(){return pd.logLevel}function xe(n,...e){if(pd.logLevel<=Ui.in.DEBUG){const t=e.map(Wk);pd.debug(`Firestore (${E_}): ${n}`,...t)}}function Tr(n,...e){if(pd.logLevel<=Ui.in.ERROR){const t=e.map(Wk);pd.error(`Firestore (${E_}): ${n}`,...t)}}function jo(n,...e){if(pd.logLevel<=Ui.in.WARN){const t=e.map(Wk);pd.warn(`Firestore (${E_}): ${n}`,...t)}}function Wk(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${E_}) INTERNAL ASSERTION FAILED: `+n;throw Tr(e),new Error(e)}function lt(n,e){n||et()}function qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class d5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ci.UNAUTHENTICATED))}shutdown(){}}class _z{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yz{constructor(e){this.t=e,this.currentUser=ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const y=l;e.enqueueRetryable((0,j.Z)(function*(){yield y.promise,yield a(r.currentUser)}))},g=y=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt("string"==typeof r.accessToken),new d5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return lt(null===e||"string"==typeof e),new ci(e)}}class vz{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ci.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Cz{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new vz(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class h5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wz{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,xe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt("string"==typeof t.token),this.T=t.token,new h5(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Iz(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class f5{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Iz(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function St(n,e){return n<e?-1:n>e?1:0}function b_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function p5(n){return n+"\0"}class Kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ut(e)}static min(){return new ut(new Kn(0,0))}static max(){return new ut(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Uw{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Uw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends Uw{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const Ez=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends Uw{construct(e,t,r){return new hr(e,t,r)}static isValidIdentifier(e){return Ez.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new be(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new be(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new be(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new be(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(t)}static emptyPath(){return new hr([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(Qt.fromString(e))}static fromName(e){return new We(Qt.fromString(e).popFirst(5))}static empty(){return new We(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Qt(e.slice()))}}class XS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function qk(n){return n.fields.find(e=>2===e.kind)}function tp(n){return n.fields.filter(e=>2!==e.kind)}XS.UNKNOWN_ID=-1;class eA{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vw(0,ro.min())}}function g5(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ut.fromTimestamp(1e9===r?new Kn(t+1,0):new Kn(t,r));return new ro(i,We.empty(),e)}function m5(n){return new ro(n.readTime,n.key,-1)}class ro{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ro(ut.min(),We.empty(),-1)}static max(){return new ro(ut.max(),We.empty(),-1)}}function Zk(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:St(n.largestBatchId,e.largestBatchId))}const _5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function gd(n){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,j.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==_5)throw n;xe("LocalStore","Unexpectedly lost primary lease")}),Kk.apply(this,arguments)}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},g=>r(g))}),l=!0,a===i&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(i=>i?ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let g=0;g<a;g++){const y=g;t(e[y]).next(E=>{l[y]=E,++f,f===a&&r(l)},E=>i(E))}})}static doWhile(e,t){return new ne((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class tA{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Xr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Bw(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Yk(r.target.error);this.v.reject(new Bw(e,i))}}static open(e,t,r,i){try{return new tA(t,e.transaction(i,r))}catch(a){throw new Bw(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Sz(t)}}class fa{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===fa.S((0,z.z$)())&&Tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xe("SimpleDb","Removing database:",e),np(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,z.hl)())return!1;if(fa.C())return!0;const e=(0,z.z$)(),t=fa.S(e),r=0<t&&t<10,i=fa.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,j.Z)(function*(){return t.db||(xe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Bw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new be(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new be(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Bw(e,f))},a.onupgradeneeded=l=>{xe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{xe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,j.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const g=tA.open(a.db,e,l?"readonly":"readwrite",r),y=i(g).next(E=>(g.P(),E)).catch(E=>(g.abort(E),ne.reject(E))).toPromise();return y.catch(()=>{}),yield g.R,y}catch(g){const y=g,E="FirebaseError"!==y.name&&f<3;if(xe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),a.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Dz{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return np(this.L.delete())}}class Bw extends be{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function md(n){return"IndexedDbTransactionError"===n.name}class Sz{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(xe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),np(r)}add(e){return xe("SimpleDb","ADD",this.store.name,e,e),np(this.store.add(e))}get(e){return np(this.store.get(e)).next(t=>(void 0===t&&(t=null),xe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xe("SimpleDb","DELETE",this.store.name,e),np(this.store.delete(e))}count(){return xe("SimpleDb","COUNT",this.store.name),np(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ne((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ne((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){xe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ne((r,i)=>{t.onerror=a=>{const l=Yk(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}W(e,t){const r=[];return new ne((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const g=new Dz(f),y=t(f.primaryKey,f.value,g);if(y instanceof ne){const E=y.catch(T=>(g.done(),ne.reject(T)));r.push(E)}g.isDone?i():null===g.K?f.continue():f.continue(g.K)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function np(n){return new ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Yk(r.target.error);t(i)}})}let v5=!1;function Yk(n){const e=fa.S((0,z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return v5||(v5=!0,setTimeout(()=>{throw r},0)),r}}return n}class Az{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;xe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,j.Z)(function*(){t.task=null;try{xe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){md(r)?xe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield gd(r)}yield t.et(6e4)}))}}class Mz{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,j.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ne.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return xe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(f=>(xe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=m5(a);Zk(l,r)>0&&(r=l)}),new ro(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let io=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function jw(n){return null==n}function $w(n){return 0===n&&1/n==-1/0}function C5(n){return"number"==typeof n&&Number.isInteger(n)&&!$w(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Hi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=w5(e)),e=xz(n.get(t),e);return w5(e)}function xz(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function w5(n){return n+"\x01\x01"}function sc(n){const e=n.length;if(lt(e>=2),2===e)return lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&et(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let g;0===i.length?g=f:(i+=f,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:et()}a=l+2}return new Qt(r)}const I5=["userId","batchId"];function nA(n,e){return[n,Hi(e)]}function E5(n,e,t){return[n,Hi(e),t]}const Pz={},Oz=["prefixPath","collectionGroup","readTime","documentId"],Nz=["prefixPath","collectionGroup","documentId"],Rz=["collectionGroup","readTime","prefixPath","documentId"],kz=["canonicalId","targetId"],Fz=["targetId","path"],Lz=["path","targetId"],Uz=["collectionId","parent"],Vz=["indexId","uid"],Bz=["uid","sequenceNumber"],jz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$z=["indexId","uid","orderedDocumentKey"],Hz=["userId","collectionPath","documentId"],zz=["userId","collectionPath","largestBatchId"],Gz=["userId","collectionGroup","largestBatchId"],b5=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Wz=[...b5,"documentOverlays"],T5=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],D5=T5,qz=[...D5,"indexConfiguration","indexState","indexEntries"];class Qk extends y5{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function li(n,e){const t=qe(n);return fa.M(t.ht,e)}function S5(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _d(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function A5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Nn{constructor(e,t){this.comparator=e,this.root=t||bi.EMPTY}insert(e,t){return new Nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(e){return new Nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rA(this.root,e,this.comparator,!1)}getReverseIterator(){return new rA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rA(this.root,e,this.comparator,!0)}}class rA{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??bi.RED,this.left=i??bi.EMPTY,this.right=a??bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new bi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return bi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1,bi.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new bi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new M5(this.data.getIterator())}getIteratorFrom(e){return new M5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class M5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function T_(n){return n.hasNext()?n.getNext():void 0}class Ts{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new Ts([])}unionWith(e){let t=new Hn(hr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return b_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class x5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new x5("Invalid base64 string: "+i):i}}(e);return new ei(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const Kz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yd(n){if(lt(!!n),"string"==typeof n){let e=0;const t=Kz.exec(n);if(lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function El(n){return"string"==typeof n?ei.fromBase64String(n):ei.fromUint8Array(n)}function iA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function sA(n){const e=n.mapValue.fields.__previous_value__;return iA(e)?sA(e):e}function Hw(n){const e=yd(n.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}class Yz{constructor(e,t,r,i,a,l,f,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y}}class vd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vd&&e.projectId===this.projectId&&e.database===this.database}}const Cd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},oA={nullValue:"NULL_VALUE"};function wd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?iA(n)?4:R5(n)?9007199254740991:10:et()}function oc(n,e){if(n===e)return!0;const t=wd(n);if(t!==wd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hw(n).isEqual(Hw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=yd(r.timestampValue),l=yd(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,El(n.bytesValue).isEqual(El(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return fr(r.geoPointValue.latitude)===fr(i.geoPointValue.latitude)&&fr(r.geoPointValue.longitude)===fr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return fr(r.integerValue)===fr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=fr(r.doubleValue),l=fr(i.doubleValue);return a===l?$w(a)===$w(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return b_(n.arrayValue.values||[],e.arrayValue.values||[],oc);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(S5(a)!==S5(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!oc(a[f],l[f])))return!1;return!0}(n,e);default:return et()}var i}function zw(n,e){return void 0!==(n.values||[]).find(t=>oc(t,e))}function Id(n,e){if(n===e)return 0;const t=wd(n),r=wd(e);if(t!==r)return St(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return St(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=fr(i.integerValue||i.doubleValue),f=fr(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return P5(n.timestampValue,e.timestampValue);case 4:return P5(Hw(n),Hw(e));case 5:return St(n.stringValue,e.stringValue);case 6:return function(i,a){const l=El(i),f=El(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let g=0;g<l.length&&g<f.length;g++){const y=St(l[g],f[g]);if(0!==y)return y}return St(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=St(fr(i.latitude),fr(a.latitude));return 0!==l?l:St(fr(i.longitude),fr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let g=0;g<l.length&&g<f.length;++g){const y=Id(l[g],f[g]);if(y)return y}return St(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Cd.mapValue&&a===Cd.mapValue)return 0;if(i===Cd.mapValue)return 1;if(a===Cd.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),g=a.fields||{},y=Object.keys(g);f.sort(),y.sort();for(let E=0;E<f.length&&E<y.length;++E){const T=St(f[E],y[E]);if(0!==T)return T;const A=Id(l[f[E]],g[y[E]]);if(0!==A)return A}return St(f.length,y.length)}(n.mapValue,e.mapValue);default:throw et()}}function P5(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return St(n,e);const t=yd(n),r=yd(e),i=St(t.seconds,r.seconds);return 0!==i?i:St(t.nanos,r.nanos)}function D_(n){return Jk(n)}function Jk(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=yd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?El(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Jk(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${Jk(r.fields[f])}`;return a+"}"}(n.mapValue):et();var e}function rp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xk(n){return!!n&&"integerValue"in n}function Gw(n){return!!n&&"arrayValue"in n}function O5(n){return!!n&&"nullValue"in n}function N5(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cA(n){return!!n&&"mapValue"in n}function Ww(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _d(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ww(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ww(n.arrayValue.values[t]);return e}return Object.assign({},n)}function R5(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Qz(n){return"nullValue"in n?oA:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?rp(vd.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function Jz(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?rp(vd.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Cd:et()}function k5(n,e){const t=Id(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function F5(n,e){const t=Id(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ti{constructor(e){this.value=e}static empty(){return new Ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!cA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ww(t)}setAll(e){let t=hr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=Ww(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());cA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];cA(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_d(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ti(Ww(this.value))}}function L5(n){const e=[];return _d(n.fields,(t,r)=>{const i=new hr([t]);if(cA(r)){const a=L5(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ts(e)}class zn{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new zn(e,0,ut.min(),ut.min(),ut.min(),Ti.empty(),0)}static newFoundDocument(e,t,r,i){return new zn(e,1,t,ut.min(),r,i,0)}static newNoDocument(e,t){return new zn(e,2,t,ut.min(),ut.min(),Ti.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,ut.min(),ut.min(),Ti.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ut.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ed{constructor(e,t){this.position=e,this.inclusive=t}}function U5(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(l.referenceValue),t.key):Id(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function V5(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!oc(n.position[t],e.position[t]))return!1;return!0}class S_{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class B5{}class Kt extends B5{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new eG(e,t,r):"array-contains"===t?new rG(e,r):"in"===t?new W5(e,r):"not-in"===t?new iG(e,r):"array-contains-any"===t?new sG(e,r):new Kt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new tG(e,r):new nG(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Id(t,this.value)):null!==t&&wd(this.value)===wd(t)&&this.matchesComparison(Id(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class vn extends B5{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new vn(e,t)}matches(e){return A_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function A_(n){return"and"===n.op}function e2(n){return"or"===n.op}function t2(n){return j5(n)&&A_(n)}function j5(n){for(const e of n.filters)if(e instanceof vn)return!1;return!0}function n2(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+D_(n.value);if(t2(n))return n.filters.map(e=>n2(e)).join(",");{const e=n.filters.map(t=>n2(t)).join(",");return`${n.op}(${e})`}}function $5(n,e){return n instanceof Kt?(t=n,(r=e)instanceof Kt&&t.op===r.op&&t.field.isEqual(r.field)&&oc(t.value,r.value)):n instanceof vn?function(t,r){return r instanceof vn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&$5(a,r.filters[l]),!0)}(n,e):void et();var t,r}function H5(n,e){const t=n.filters.concat(e);return vn.create(t,n.op)}function z5(n){return n instanceof Kt?`${(e=n).field.canonicalString()} ${e.op} ${D_(e.value)}`:n instanceof vn?function(e){return e.op.toString()+" {"+e.getFilters().map(z5).join(" ,")+"}"}(n):"Filter";var e}class eG extends Kt{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class tG extends Kt{constructor(e,t){super(e,"in",t),this.keys=G5(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nG extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=G5(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function G5(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class rG extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gw(t)&&zw(t.arrayValue,this.value)}}class W5 extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zw(this.value.arrayValue,t)}}class iG extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(zw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zw(this.value.arrayValue,t)}}class sG extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zw(this.value.arrayValue,r))}}class oG{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.dt=null}}function r2(n,e=null,t=[],r=[],i=null,a=null,l=null){return new oG(n,e,t,r,i,a,l)}function ip(n){const e=qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>n2(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),jw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>D_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>D_(r)).join(",")),e.dt=t}return e.dt}function qw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Xz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$5(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!V5(n.startAt,e.startAt)&&V5(n.endAt,e.endAt)}function lA(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function uA(n,e){return n.filters.filter(t=>t instanceof Kt&&t.field.isEqual(e))}function q5(n,e,t){let r=oA,i=!0;for(const a of uA(n,e)){let l=oA,f=!0;switch(a.op){case"<":case"<=":l=Qz(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=oA}k5({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];k5({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function Z5(n,e,t){let r=Cd,i=!0;for(const a of uA(n,e)){let l=Cd,f=!0;switch(a.op){case">=":case">":l=Jz(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=Cd}F5({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];F5({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class bl{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=g,this.wt=null,this._t=null}}function K5(n,e,t,r,i,a,l,f){return new bl(n,e,t,r,i,a,l,f)}function M_(n){return new bl(n)}function Y5(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function i2(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function dA(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function s2(n){return null!==n.collectionGroup}function sp(n){const e=qe(n);if(null===e.wt){e.wt=[];const t=dA(e),r=i2(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new S_(t)),e.wt.push(new S_(hr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new S_(hr.keyField(),a))}}}return e.wt}function is(n){const e=qe(n);if(!e._t)if("F"===e.limitType)e._t=r2(e.path,e.collectionGroup,sp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of sp(e))t.push(new S_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ed(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ed(e.startAt.position,e.startAt.inclusive):null;e._t=r2(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function o2(n,e){e.getFirstInequalityField(),dA(n);const t=n.filters.concat([e]);return new bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function hA(n,e,t){return new bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zw(n,e){return qw(is(n),is(e))&&n.limitType===e.limitType}function Q5(n){return`${ip(is(n))}|lt:${n.limitType}`}function a2(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>z5(r)).join(", ")}]`),jw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>D_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>D_(r)).join(",")),`Target(${t})`}(is(n))}; limitType=${n.limitType})`}function Kw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of sp(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=U5(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,sp(t),r)||t.endAt&&!function(i,a,l){const f=U5(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,sp(t),r)));var t,r}function J5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function X5(n){return(e,t)=>{let r=!1;for(const i of sp(n)){const a=aG(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function aG(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),g=l.data.field(i);return null!==f&&null!==g?Id(f,g):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}class Tl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_d(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return A5(this.inner)}size(){return this.innerSize}}const cG=new Nn(We.comparator);function Ds(){return cG}const e6=new Nn(We.comparator);function Yw(...n){let e=e6;for(const t of n)e=e.insert(t.key,t);return e}function t6(n){let e=e6;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ac(){return Qw()}function n6(){return Qw()}function Qw(){return new Tl(n=>n.toString(),(n,e)=>n.isEqual(e))}const lG=new Nn(We.comparator),uG=new Hn(We.comparator);function Nt(...n){let e=uG;for(const t of n)e=e.add(t);return e}const dG=new Hn(St);function c2(){return dG}function r6(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$w(e)?"-0":e}}function i6(n){return{integerValue:""+n}}function s6(n,e){return C5(e)?i6(e):r6(n,e)}class fA{constructor(){this._=void 0}}function hG(n,e,t){return n instanceof x_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&iA(i)&&(i=sA(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof op?a6(n,e):n instanceof ap?c6(n,e):function(r,i){const a=o6(r,i),l=l6(a)+l6(r.gt);return Xk(a)&&Xk(r.gt)?i6(l):r6(r.serializer,l)}(n,e)}function fG(n,e,t){return n instanceof op?a6(n,e):n instanceof ap?c6(n,e):t}function o6(n,e){return n instanceof P_?Xk(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class x_ extends fA{}class op extends fA{constructor(e){super(),this.elements=e}}function a6(n,e){const t=u6(e);for(const r of n.elements)t.some(i=>oc(i,r))||t.push(r);return{arrayValue:{values:t}}}class ap extends fA{constructor(e){super(),this.elements=e}}function c6(n,e){let t=u6(e);for(const r of n.elements)t=t.filter(i=>!oc(i,r));return{arrayValue:{values:t}}}class P_ extends fA{constructor(e,t){super(),this.serializer=e,this.gt=t}}function l6(n){return fr(n.integerValue||n.doubleValue)}function u6(n){return Gw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Jw{constructor(e,t){this.field=e,this.transform=t}}class gG{constructor(e,t){this.version=e,this.transformResults=t}}class Yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pA(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gA{}function d6(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new N_(n.key,Yn.none()):new O_(n.key,n.data,Yn.none());{const t=n.data,r=Ti.empty();let i=new Hn(hr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Dl(n.key,r,new Ts(i.toArray()),Yn.none())}}function mG(n,e,t){n instanceof O_?function(r,i,a){const l=r.value.clone(),f=p6(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Dl?function(r,i,a){if(!pA(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=p6(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(f6(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Xw(n,e,t,r){return n instanceof O_?function(i,a,l,f){if(!pA(i.precondition,a))return l;const g=i.value.clone(),y=g6(i.fieldTransforms,f,a);return g.setAll(y),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Dl?function(i,a,l,f){if(!pA(i.precondition,a))return l;const g=g6(i.fieldTransforms,f,a),y=a.data;return y.setAll(f6(i)),y.setAll(g),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(l=t,pA(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function _G(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=o6(r.transform,i||null);null!=a&&(null===t&&(t=Ti.empty()),t.set(r.field,a))}return t||null}function h6(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&b_(t,r,(i,a)=>function pG(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof op&&r instanceof op||t instanceof ap&&r instanceof ap?b_(t.elements,r.elements,oc):t instanceof P_&&r instanceof P_?oc(t.gt,r.gt):t instanceof x_&&r instanceof x_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class O_ extends gA{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Dl extends gA{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function f6(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function p6(n,e,t){const r=new Map;lt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,fG(l,f,t[i]))}return r}function g6(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,hG(a,l,e))}return r}class N_ extends gA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l2 extends gA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class u2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&mG(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Xw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=n6();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const g=d6(l,f);null!==g&&r.set(i.key,g),l.isValidDocument()||l.convertToNoDocument(ut.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&b_(this.mutations,e.mutations,(t,r)=>h6(t,r))&&b_(this.baseMutations,e.baseMutations,(t,r)=>h6(t,r))}}class d2{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){lt(e.mutations.length===r.length);let i=lG;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new d2(e,t,r,i)}}class h2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class vG{constructor(e,t){this.count=e,this.unchangedNames=t}}var kr,Jt;function m6(n){switch(n){default:return et();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function _6(n){if(void 0===n)return Tr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case kr.OK:return ae.OK;case kr.CANCELLED:return ae.CANCELLED;case kr.UNKNOWN:return ae.UNKNOWN;case kr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case kr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case kr.INTERNAL:return ae.INTERNAL;case kr.UNAVAILABLE:return ae.UNAVAILABLE;case kr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case kr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case kr.NOT_FOUND:return ae.NOT_FOUND;case kr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case kr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case kr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case kr.ABORTED:return ae.ABORTED;case kr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case kr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case kr.DATA_LOSS:return ae.DATA_LOSS;default:return et()}}(Jt=kr||(kr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class f2{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return mA}static getOrCreateInstance(){return null===mA&&(mA=new f2),mA}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let mA=null;function y6(){return new TextEncoder}const CG=new I_([4294967295,4294967295],0);function v6(n){const e=y6().encode(n),t=new fz;return t.update(e),new Uint8Array(t.digest())}function C6(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new I_([t,r],0),new I_([i,a],0)]}class p2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new eI(`Invalid padding: ${t}`);if(r<0)throw new eI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new eI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new eI(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=I_.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(I_.fromNumber(r)));return 1===i.compare(CG)&&(i=new I_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=v6(e),[r,i]=C6(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new p2(a,i,t);return r.forEach(f=>l.insert(f)),l}insert(e){if(0===this.It)return;const t=v6(e),[r,i]=C6(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class eI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tI{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,nI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new tI(ut.min(),i,new Nn(St),Ds(),Nt())}}class nI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new nI(r,t,Nt(),Nt(),Nt())}}class _A{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class w6{constructor(e,t){this.targetId=e,this.Vt=t}}class I6{constructor(e,t,r=ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class E6{constructor(){this.St=0,this.Dt=T6(),this.Ct=ei.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Nt(),t=Nt(),r=Nt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new nI(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=T6()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class wG{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ds(),this.zt=b6(),this.Wt=new Nn(St)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const l=a.target;if(lA(l))if(0===i){const f=new We(l.path);this.Yt(r,f,zn.newNoDocument(f,ut.min()))}else lt(1===i);else{const f=this.ie(r);if(f!==i){const g=this.re(e,f);0!==g&&(this.ee(r),this.Wt=this.Wt.insert(r,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=f2.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,E,T){var A,R,G,Q,J,we;const He={localCacheCount:E,existenceFilterCount:T.count},Ne=T.unchangedNames;return Ne&&(He.bloomFilter={applied:0===y,hashCount:null!==(A=Ne?.hashCount)&&void 0!==A?A:0,bitmapLength:null!==(Q=null===(G=null===(R=Ne?.bits)||void 0===R?void 0:R.bitmap)||void 0===G?void 0:G.length)&&void 0!==Q?Q:0,padding:null!==(we=null===(J=Ne?.bits)||void 0===J?void 0:J.padding)&&void 0!==we?we:0}),He}(g,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:f=0}=r;let g,y;try{g=El(a).toUint8Array()}catch(E){if(E instanceof x5)return jo("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw E}try{y=new p2(g,l,f)}catch(E){return jo(E instanceof eI?"BloomFilter error: ":"Applying bloom filter failed: ",E),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const l=this.Gt.ue(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,l)=>{const f=this.se(l);if(f){if(a.current&&lA(f.target)){const g=new We(f.target.path);null!==this.jt.get(g)||this.ae(l,g)||this.Yt(l,g,zn.newNoDocument(g,e))}a.Mt&&(t.set(l,a.Ot()),a.Ft())}});let r=Nt();this.zt.forEach((a,l)=>{let f=!0;l.forEachWhile(g=>{const y=this.se(g);return!y||"TargetPurposeLimboResolution"===y.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const i=new tI(e,t,this.Wt,this.jt,r);return this.jt=Ds(),this.zt=b6(),this.Wt=new Nn(St),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new E6,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Hn(St),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||xe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new E6),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function b6(){return new Nn(We.comparator)}function T6(){return new Nn(We.comparator)}const IG={asc:"ASCENDING",desc:"DESCENDING"},EG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bG={and:"AND",or:"OR"};class TG{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function g2(n,e){return n.useProto3Json||jw(e)?e:{value:e}}function R_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D6(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DG(n,e){return R_(n,e.toTimestamp())}function Dr(n){return lt(!!n),ut.fromTimestamp(function(e){const t=yd(e);return new Kn(t.seconds,t.nanos)}(n))}function m2(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function S6(n){const e=Qt.fromString(n);return lt(F6(e)),e}function rI(n,e){return m2(n.databaseId,e.path)}function cc(n,e){const t=S6(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(M6(t))}function _2(n,e){return m2(n.databaseId,e)}function A6(n){const e=S6(n);return 4===e.length?Qt.emptyPath():M6(e)}function iI(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function M6(n){return lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function x6(n,e,t){return{name:rI(n,e),fields:t.value.mapValue.fields}}function P6(n,e,t){const r=cc(n,e.name),i=Dr(e.updateTime),a=e.createTime?Dr(e.createTime):ut.min(),l=new Ti({mapValue:{fields:e.fields}}),f=zn.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function sI(n,e){let t;if(e instanceof O_)t={update:x6(n,e.key,e.value)};else if(e instanceof N_)t={delete:rI(n,e.key)};else if(e instanceof Dl)t={update:x6(n,e.key,e.data),updateMask:RG(e.fieldMask)};else{if(!(e instanceof l2))return et();t={verify:rI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof x_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof op)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ap)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof P_)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:DG(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function y2(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Yn.updateTime(Dr(i.updateTime)):void 0!==i.exists?Yn.exists(i.exists):Yn.none():Yn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(lt("REQUEST_TIME"===l.setToServerValue),f=new x_):"appendMissingElements"in l?f=new op(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new ap(l.removeAllFromArray.values||[]):"increment"in l?f=new P_(a,l.increment):et();const g=hr.fromServerFormat(l.fieldPath);return new Jw(g,f)}(n,i)):[];var i;if(e.update){const i=cc(n,e.update.name),a=new Ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ts((e.updateMask.fieldPaths||[]).map(y=>hr.fromServerFormat(y)));return new Dl(i,a,l,t,r)}return new O_(i,a,t,r)}if(e.delete){const i=cc(n,e.delete);return new N_(i,t)}if(e.verify){const i=cc(n,e.verify);return new l2(i,t)}return et()}function O6(n,e){return{documents:[_2(n,e.path)]}}function v2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_2(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_2(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return k6(vn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(y=>{return{field:bd((E=y).field),direction:PG(E.dir)};var E})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=g2(n,e.limit);var f,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function N6(n){let e=A6(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){lt(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let a=[];t.where&&(a=function(E){const T=R6(E);return T instanceof vn&&t2(T)?T.getFilters():[T]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(E=>{return new S_(k_((T=E).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let f=null;t.limit&&(f=function(E){let T;return T="object"==typeof E?E.value:E,jw(T)?null:T}(t.limit));let g=null;var E;t.startAt&&(g=new Ed((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new Ed(E.values||[],!E.before)}(t.endAt)),K5(e,i,l,a,f,"F",g,y)}function R6(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=k_(e.unaryFilter.field);return Kt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=k_(e.unaryFilter.field);return Kt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=k_(e.unaryFilter.field);return Kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=k_(e.unaryFilter.field);return Kt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?Kt.create(k_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return vn.create(e.compositeFilter.filters.map(t=>R6(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function PG(n){return IG[n]}function OG(n){return EG[n]}function NG(n){return bG[n]}function bd(n){return{fieldPath:n.canonicalString()}}function k_(n){return hr.fromServerFormat(n.fieldPath)}function k6(n){return n instanceof Kt?function(e){if("=="===e.op){if(N5(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NAN"}};if(O5(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(N5(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NOT_NAN"}};if(O5(e.value))return{unaryFilter:{field:bd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bd(e.field),op:OG(e.op),value:e.value}}}(n):n instanceof vn?function(e){const t=e.getFilters().map(r=>k6(r));return 1===t.length?t[0]:{compositeFilter:{op:NG(e.op),filters:t}}}(n):et()}function RG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function F6(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Sl{constructor(e,t,r,i,a=ut.min(),l=ut.min(),f=ei.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Sl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class L6{constructor(e){this.fe=e}}function U6(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yA(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:rI(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:R_(i,a.version.toTimestamp()),createTime:R_(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:cp(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:cp(e.version)}}var i,a;return r}function yA(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function cp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lp(n){const e=new Kn(n.seconds,n.nanoseconds);return ut.fromTimestamp(e)}function up(n,e){const t=(e.baseMutations||[]).map(a=>y2(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>y2(n.fe,a)),i=Kn.fromMillis(e.localWriteTimeMs);return new u2(e.batchId,i,t,r)}function oI(n){const e=lp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?lp(n.lastLimboFreeSnapshotVersion):ut.min();let r;var i;return void 0!==n.query.documents?(lt(1===(i=n.query).documents.length),r=is(M_(A6(i.documents[0])))):r=is(N6(n.query)),new Sl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ei.fromBase64String(n.resumeToken))}function V6(n,e){const t=cp(e.snapshotVersion),r=cp(e.lastLimboFreeSnapshotVersion);let i;i=lA(e.target)?O6(n.fe,e.target):v2(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ip(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function C2(n){const e=N6({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?hA(e,e.limit,"L"):e}function w2(n,e){return new h2(e.largestBatchId,y2(n.fe,e.overlayMutation))}function B6(n,e){const t=e.path.lastSegment();return[n,Hi(e.path.popLast()),t]}function j6(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:cp(r.readTime),documentKey:Hi(r.documentKey.path),largestBatchId:r.largestBatchId}}class FG{getBundleMetadata(e,t){return $6(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:lp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return $6(e).put({bundleId:(r=t).id,createTime:cp(Dr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return H6(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:C2(i.bundledQuery),readTime:lp(i.readTime)};var i})}saveNamedQuery(e,t){return H6(e).put({name:(r=t).name,readTime:cp(Dr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function $6(n){return li(n,"bundles")}function H6(n){return li(n,"namedQueries")}class vA{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new vA(e,t.uid||"")}getOverlay(e,t){return aI(e).get(B6(this.userId,t)).next(r=>r?w2(this.serializer,r):null)}getOverlays(e,t){const r=ac();return ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new h2(t,l);i.push(this.we(e,f))}),ne.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Hi(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(aI(e).J("collectionPathOverlayIndex",f))}),ne.waitFor(a)}getOverlaysForCollection(e,t,r){const i=ac(),a=Hi(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return aI(e).j("collectionPathOverlayIndex",l).next(f=>{for(const g of f){const y=w2(this.serializer,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=ac();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return aI(e).X({index:"collectionGroupOverlayIndex",range:f},(g,y,E)=>{const T=w2(this.serializer,y);a.size()<i||T.largestBatchId===l?(a.set(T.getKey(),T),l=T.largestBatchId):E.done()}).next(()=>a)}we(e,t){return aI(e).put(function(r,i,a){const[l,f,g]=B6(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:sI(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function aI(n){return li(n,"documentOverlays")}class dp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(fr(e.integerValue));else if("doubleValue"in e){const r=fr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),$w(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(El(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?R5(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),We.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function LG(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function z6(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=LG(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}dp.Ve=new dp;class UG{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=z6(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=z6(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class VG{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class BG{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class cI{constructor(){this.je=new UG,this.ze=new VG(this.je),this.We=new BG(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class hp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hp(this.indexId,this.documentKey,this.arrayValue,r)}}function Td(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=G6(n.arrayValue,e.arrayValue),0!==t?t:(t=G6(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function G6(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class jG{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){lt(e.collectionGroup===this.collectionId);const t=qk(e);if(void 0!==t&&!this.en(t))return!1;const r=tp(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[l++],f))return!1}++a}for(;a<r.length;++a)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function W6(n){var e,t;if(lt(n instanceof Kt||n instanceof vn),n instanceof Kt){if(n instanceof W5){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>Kt.create(n.field,"==",a)))||[];return vn.create(i,"or")}return n}const r=n.filters.map(i=>W6(i));return vn.create(r,n.op)}function $G(n){if(0===n.getFilters().length)return[];const e=b2(W6(n));return lt(q6(e)),I2(e)||E2(e)?[e]:e.getFilters()}function I2(n){return n instanceof Kt}function E2(n){return n instanceof vn&&t2(n)}function q6(n){return I2(n)||E2(n)||function(e){if(e instanceof vn&&e2(e)){for(const t of e.getFilters())if(!I2(t)&&!E2(t))return!1;return!0}return!1}(n)}function b2(n){if(lt(n instanceof Kt||n instanceof vn),n instanceof Kt)return n;if(1===n.filters.length)return b2(n.filters[0]);const e=n.filters.map(r=>b2(r));let t=vn.create(e,n.op);return t=CA(t),q6(t)?t:(lt(t instanceof vn),lt(A_(t)),lt(t.filters.length>1),t.filters.reduce((r,i)=>T2(r,i)))}function T2(n,e){let t;return lt(n instanceof Kt||n instanceof vn),lt(e instanceof Kt||e instanceof vn),t=n instanceof Kt?e instanceof Kt?vn.create([n,e],"and"):Z6(n,e):e instanceof Kt?Z6(e,n):function(r,i){if(lt(r.filters.length>0&&i.filters.length>0),A_(r)&&A_(i))return H5(r,i.getFilters());const a=e2(r)?r:i,l=e2(r)?i:r,f=a.filters.map(g=>T2(g,l));return vn.create(f,"or")}(n,e),CA(t)}function Z6(n,e){if(A_(e))return H5(e,n.getFilters());{const t=e.filters.map(r=>T2(n,r));return vn.create(t,"or")}}function CA(n){if(lt(n instanceof Kt||n instanceof vn),n instanceof Kt)return n;const e=n.getFilters();if(1===e.length)return CA(e[0]);if(j5(n))return n;const t=e.map(i=>CA(i)),r=[];return t.forEach(i=>{i instanceof Kt?r.push(i):i instanceof vn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:vn.create(r,n.op)}class HG{constructor(){this.rn=new D2}addToCollectionParentIndex(e,t){return this.rn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(ro.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class D2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Hn(Qt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hn(Qt.comparator)).toArray()}}const wA=new Uint8Array(0);class zG{constructor(e,t){this.user=e,this.databaseId=t,this.on=new D2,this.un=new Tl(r=>ip(r),(r,i)=>qw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Hi(i)};return K6(e).put(a)}return ne.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[p5(t),""],!1,!0);return K6(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(sc(l.parent))}return r})}addFieldIndex(e,t){const r=IA(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=uI(e);return a.next(f=>{l.put(j6(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=IA(e),i=uI(e),a=lI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=lI(e);let i=!0;const a=new Map;return ne.forEach(this.cn(t),l=>this.an(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=Nt();const f=[];return ne.forEach(a,(g,y)=>{var E;xe("IndexedDbIndexManager",`Using index ${E=g,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Ne=>`${Ne.fieldPath}:${Ne.kind}`).join(",")}`} to execute ${ip(t)}`);const T=function(Ne,Ye){const mt=qk(Ye);if(void 0===mt)return null;for(const At of uA(Ne,mt.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(y,g),A=function(Ne,Ye){const mt=new Map;for(const At of tp(Ye))for(const Ar of uA(Ne,At.fieldPath))switch(Ar.op){case"==":case"in":mt.set(At.fieldPath.canonicalString(),Ar.value);break;case"not-in":case"!=":return mt.set(At.fieldPath.canonicalString(),Ar.value),Array.from(mt.values())}return null}(y,g),R=function(Ne,Ye){const mt=[];let At=!0;for(const Ar of tp(Ye)){const xs=0===Ar.kind?q5(Ne,Ar.fieldPath,Ne.startAt):Z5(Ne,Ar.fieldPath,Ne.startAt);mt.push(xs.value),At&&(At=xs.inclusive)}return new Ed(mt,At)}(y,g),G=function(Ne,Ye){const mt=[];let At=!0;for(const Ar of tp(Ye)){const xs=0===Ar.kind?Z5(Ne,Ar.fieldPath,Ne.endAt):q5(Ne,Ar.fieldPath,Ne.endAt);mt.push(xs.value),At&&(At=xs.inclusive)}return new Ed(mt,At)}(y,g),Q=this.hn(g,y,R),J=this.hn(g,y,G),we=this.ln(g,y,A),He=this.fn(g.indexId,T,Q,R.inclusive,J,G.inclusive,we);return ne.forEach(He,Ne=>r.H(Ne,t.limit).next(Ye=>{Ye.forEach(mt=>{const At=We.fromSegments(mt.documentKey);l.has(At)||(l=l.add(At),f.push(At))})}))}).next(()=>f)}return ne.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:$G(vn.create(e.filters,"and")).map(r=>r2(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,l,f){const g=(null!=t?t.length:1)*Math.max(r.length,a.length),y=g/(null!=t?t.length:1),E=[];for(let T=0;T<g;++T){const A=t?this.dn(t[T/y]):wA,R=this.wn(e,A,r[T%y],i),G=this._n(e,A,a[T%y],l),Q=f.map(J=>this.wn(e,A,J,!0));E.push(...this.createRange(R,G,Q))}return E}wn(e,t,r,i){const a=new hp(e,We.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new hp(e,We.empty(),t,r);return i?a.Je():a}an(e,t){const r=new jG(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.tn(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return ne.forEach(i,a=>this.an(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let g=new Hn(hr.comparator),y=!1;for(const E of f.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?y=!0:g=g.add(T.field));for(const E of f.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(y?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new cI;for(const i of tp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.He(i.kind);dp.Ve._e(a,l)}return r.Qe()}dn(e){const t=new cI;return dp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new cI;return dp.Ve._e(rp(this.databaseId,t),r.He(function(i){const a=tp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new cI);let a=0;for(const l of tp(e)){const f=r[a++];for(const g of i)if(this.yn(t,l.fieldPath)&&Gw(f))i=this.pn(i,l,f);else{const y=g.He(l.kind);dp.Ve._e(f,y)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const g=new cI;g.seed(f.Qe()),dp.Ve._e(l,g.He(t.kind)),a.push(g)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof Kt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=IA(e),i=uI(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return ne.forEach(a,f=>i.get([f.indexId,this.uid]).next(g=>{l.push(function(y,E){const T=E?new Vw(E.sequenceNumber,new ro(lp(E.readTime),new We(sc(E.documentKey)),E.largestBatchId)):Vw.empty(),A=y.fields.map(([R,G])=>new eA(hr.fromServerFormat(R),G));return new XS(y.indexId,y.collectionGroup,A,T)}(f,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:St(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=IA(e),a=uI(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ne.forEach(f,g=>a.put(j6(g.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ne.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ne.forEach(f,g=>this.En(e,i,g).next(y=>{const E=this.An(a,g);return y.isEqual(E)?ne.resolve():this.vn(e,a,g,y,E)}))))})}Rn(e,t,r,i){return lI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return lI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=lI(e);let a=new Hn(Td);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,f)=>{a=a.add(new hp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new Hn(Td);const i=this.mn(t,e);if(null==i)return r;const a=qk(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Gw(l))for(const f of l.arrayValue.values||[])r=r.add(new hp(t.indexId,e.key,this.dn(f),i))}else r=r.add(new hp(t.indexId,e.key,wA,i));return r}vn(e,t,r,i,a){xe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,g,y,E,T){const A=f.getIterator(),R=g.getIterator();let G=T_(A),Q=T_(R);for(;G||Q;){let J=!1,we=!1;if(G&&Q){const He=y(G,Q);He<0?we=!0:He>0&&(J=!0)}else null!=G?we=!0:J=!0;J?(E(Q),Q=T_(R)):we?(T(G),G=T_(A)):(G=T_(A),Q=T_(R))}}(i,a,Td,f=>{l.push(this.Rn(e,t,r,f))},f=>{l.push(this.Pn(e,t,r,f))}),ne.waitFor(l)}Tn(e){let t=1;return uI(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>Td(l,f)).filter((l,f,g)=>!f||0!==Td(l,g[f-1]));const i=[];i.push(e);for(const l of r){const f=Td(l,e),g=Td(l,t);if(0===f)i[0]=e.Je();else if(f>0&&g<0)i.push(l),i.push(l.Je());else if(g>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,wA,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,wA,[]]))}return a}bn(e,t){return Td(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Y6)}getMinOffset(e,t){return ne.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||et())).next(Y6)}}function K6(n){return li(n,"collectionParents")}function lI(n){return li(n,"indexEntries")}function IA(n){return li(n,"indexConfiguration")}function uI(n){return li(n,"indexState")}function Y6(n){lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Zk(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ro(e.readTime,e.documentKey,t)}const Q6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zi(e,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function J6(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const g=r.X({range:l},(E,T,A)=>(f++,A.delete()));a.push(g.next(()=>{lt(1===f)}));const y=[];for(const E of t.mutations){const T=E5(e,E.key.path,t.batchId);a.push(i.delete(T)),y.push(E.key)}return ne.waitFor(a).next(()=>y)}function EA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}zi.DEFAULT_COLLECTION_PERCENTILE=10,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zi.DEFAULT=new zi(41943040,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zi.DISABLED=new zi(-1,0,0);class bA{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){lt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new bA(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dd(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=F_(e),l=Dd(e);return l.add({}).next(f=>{lt("number"==typeof f);const g=new u2(f,t,r,i),y=function(A,R,G){const Q=G.baseMutations.map(we=>sI(A.fe,we)),J=G.mutations.map(we=>sI(A.fe,we));return{userId:R,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:Q,mutations:J}}(this.serializer,this.userId,g),E=[];let T=new Hn((A,R)=>St(A.canonicalString(),R.canonicalString()));for(const A of i){const R=E5(this.userId,A.key.path,f);T=T.add(A.key.path.popLast()),E.push(l.put(y)),E.push(a.put(R,Pz))}return T.forEach(A=>{E.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Vn[f]=g.keys()}),ne.waitFor(E).next(()=>g)})}lookupMutationBatch(e,t){return Dd(e).get(t).next(r=>r?(lt(r.userId===this.userId),up(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ne.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Dd(e).X({index:"userMutationsIndex",range:i},(l,f,g)=>{f.userId===this.userId&&(lt(f.batchId>=r),a=up(this.serializer,f)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Dd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dd(e).j("userMutationsIndex",t).next(r=>r.map(i=>up(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=nA(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return F_(e).X({range:i},(l,f,g)=>{const[y,E,T]=l,A=sc(E);if(y===this.userId&&t.path.isEqual(A))return Dd(e).get(T).next(R=>{if(!R)throw et();lt(R.userId===this.userId),a.push(up(this.serializer,R))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(St);const i=[];return t.forEach(a=>{const l=nA(this.userId,a.path),f=IDBKeyRange.lowerBound(l),g=F_(e).X({range:f},(y,E,T)=>{const[A,R,G]=y,Q=sc(R);A===this.userId&&a.path.isEqual(Q)?r=r.add(G):T.done()});i.push(g)}),ne.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=nA(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new Hn(St);return F_(e).X({range:l},(g,y,E)=>{const[T,A,R]=g,G=sc(A);T===this.userId&&r.isPrefixOf(G)?G.length===i&&(f=f.add(R)):E.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Dd(e).get(a).next(l=>{if(null===l)throw et();lt(l.userId===this.userId),r.push(up(this.serializer,l))}))}),ne.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return J6(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ne.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return F_(e).X({range:r},(a,l,f)=>{if(a[0]===this.userId){const g=sc(a[1]);i.push(g)}else f.done()}).next(()=>{lt(0===i.length)})})}containsKey(e,t){return X6(e,this.userId,t)}xn(e){return eB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function X6(n,e,t){const r=nA(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return F_(n).X({range:a,Y:!0},(f,g,y)=>{const[E,T,A]=f;E===e&&T===i&&(l=!0),y.done()}).next(()=>l)}function Dd(n){return li(n,"mutations")}function F_(n){return li(n,"documentMutations")}function eB(n){return li(n,"mutationQueues")}class fp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new fp(0)}static Mn(){return new fp(-1)}}class GG{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new fp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>ut.fromTimestamp(new Kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>L_(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(lt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return L_(e).X((l,f)=>{const g=oI(f);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>ne.waitFor(a)).next(()=>i)}forEachTarget(e,t){return L_(e).X((r,i)=>{const a=oI(i);t(a)})}$n(e){return tB(e).get("targetGlobalKey").next(t=>(lt(null!==t),t))}On(e,t){return tB(e).put("targetGlobalKey",t)}Fn(e,t){return L_(e).put(V6(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ip(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return L_(e).X({range:i,index:"queryTargetsIndex"},(l,f,g)=>{const y=oI(f);qw(t,y.target)&&(a=y,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Sd(e);return t.forEach(l=>{const f=Hi(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),ne.waitFor(i)}removeMatchingKeys(e,t,r){const i=Sd(e);return ne.forEach(t,a=>{const l=Hi(a.path);return ne.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Sd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sd(e);let a=Nt();return i.X({range:r,Y:!0},(l,f,g)=>{const y=sc(l[1]),E=new We(y);a=a.add(E)}).next(()=>a)}containsKey(e,t){const r=Hi(t.path),i=IDBKeyRange.bound([r],[p5(r)],!1,!0);let a=0;return Sd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,f],g,y)=>{0!==l&&(a++,y.done())}).next(()=>a>0)}le(e,t){return L_(e).get(t).next(r=>r?oI(r):null)}}function L_(n){return li(n,"targets")}function tB(n){return li(n,"targetGlobal")}function Sd(n){return li(n,"targetDocuments")}function nB([n,e],[t,r]){const i=St(n,t);return 0===i?St(e,r):i}class WG{constructor(e){this.Ln=e,this.buffer=new Hn(nB),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nB(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rB{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,j.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){md(r)?xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield gd(r)}yield t.Qn(3e5)}))}}class qG{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ne.resolve(io.ct);const r=new WG(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Q6)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Q6):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,l,f,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,l=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,f=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),Gk()<=Ui.in.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-E}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(g-f)+`ms\n\tRemoved ${T} documents in `+(y-g)+`ms\nTotal Duration: ${y-E}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class ZG{constructor(e,t){this.db=e,this.garbageCollector=function iB(n,e){return new qG(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return TA(e,r)}removeReference(e,t,r){return TA(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return TA(e,t)}Xn(e,t){return function(r,i){let a=!1;return eB(r).Z(l=>X6(r,l,i).next(f=>(f&&(a=!0),ne.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(l,f)=>{if(f<=t){const g=this.Xn(e,l).next(y=>{if(!y)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,ut.min()),Sd(e).delete([0,Hi(l.path)])))});i.push(g)}}).next(()=>ne.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return TA(e,t)}Yn(e,t){const r=Sd(e);let i,a=io.ct;return r.X({index:"documentTargetsIndex"},([l,f],{path:g,sequenceNumber:y})=>{0===l?(a!==io.ct&&t(new We(sc(i)),a),a=y,i=g):a=io.ct}).next(()=>{a!==io.ct&&t(new We(sc(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function TA(n,e){return Sd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Hi(e.path),sequenceNumber:r}));var r}class sB{constructor(){this.changes=new Tl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class KG{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pp(e).put(r)}removeEntry(e,t,r){return pp(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],yA(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=zn.newInvalidDocument(t);return pp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(dI(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:zn.newInvalidDocument(t)};return pp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(dI(t))},(i,a)=>{r={document:this.ts(t,a),size:EA(a)}}).next(()=>r)}getEntries(e,t){let r=Ds();return this.ns(e,t,(i,a)=>{const l=this.ts(i,a);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=Ds(),i=new Nn(We.comparator);return this.ns(e,t,(a,l)=>{const f=this.ts(a,l);r=r.insert(a,f),i=i.insert(a,EA(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ne.resolve();let i=new Hn(lB);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(dI(i.first()),dI(i.last())),l=i.getIterator();let f=l.getNext();return pp(e).X({index:"documentKeyIndex",range:a},(g,y,E)=>{const T=We.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;f&&lB(f,T)<0;)r(f,null),f=l.getNext();f&&f.isEqual(T)&&(r(f,y),f=l.hasNext()?l.getNext():null),f?E.G(dI(f)):E.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),yA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pp(e).j(IDBKeyRange.bound(l,f,!0)).next(g=>{let y=Ds();for(const E of g){const T=this.ts(We.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(Kw(t,T)||i.has(T.key))&&(y=y.insert(T.key,T))}return y})}getAllFromCollectionGroup(e,t,r,i){let a=Ds();const l=cB(t,r),f=cB(t,ro.max());return pp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(g,y,E)=>{const T=this.ts(We.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(T.key,T),a.size===i&&E.done()}).next(()=>a)}newChangeBuffer(e){return new YG(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return aB(e).get("remoteDocumentGlobalKey").next(t=>(lt(!!t),t))}Zn(e,t){return aB(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function kG(n,e){let t;if(e.document)t=P6(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=lp(e.noDocument.readTime);t=zn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=We.fromSegments(e.unknownDocument.path),i=lp(e.unknownDocument.version);t=zn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Kn(r[0],r[1]);return ut.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ut.min()))return r}return zn.newInvalidDocument(e)}}function oB(n){return new KG(n)}class YG extends sB{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Tl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Hn((a,l)=>St(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),l.isValidDocument()){const g=U6(this.os.serializer,l);i=i.add(a.path.popLast());const y=EA(g);r+=y-f.size,t.push(this.os.addEntry(e,a,g))}else if(r-=f.size,this.trackRemovals){const g=U6(this.os.serializer,l.convertToNoDocument(ut.min()));t.push(this.os.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,l)=>{this.us.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function aB(n){return li(n,"remoteDocumentGlobal")}function pp(n){return li(n,"remoteDocumentsV14")}function dI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cB(n,e){const t=e.documentKey.path.toArray();return[n,yA(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function lB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=St(t[a],r[a]),i)return i;return i=St(t.length,r.length),i||(i=St(t[t.length-2],r[r.length-2]),i||St(t[t.length-1],r[r.length-1]))}class QG{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Xw(r.mutation,i,Ts.empty(),Kn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Nt()){const i=ac();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Yw();return a.forEach((f,g)=>{l=l.insert(f,g.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ac();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Nt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=Ds();const l=Qw(),f=Qw();return t.forEach((g,y)=>{const E=r.get(y.key);i.has(y.key)&&(void 0===E||E.mutation instanceof Dl)?a=a.insert(y.key,y):void 0!==E?(l.set(y.key,E.mutation.getFieldMask()),Xw(E.mutation,y,E.mutation.getFieldMask(),Kn.now())):l.set(y.key,Ts.empty())}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((y,E)=>l.set(y,E)),t.forEach((y,E)=>{var T;return f.set(y,new QG(E,null!==(T=l.get(y))&&void 0!==T?T:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Qw();let i=new Nn((l,f)=>l-f),a=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(g=>{const y=t.get(g);if(null===y)return;let E=r.get(g)||Ts.empty();E=f.applyToLocalView(y,E),r.set(g,E);const T=(i.get(f.batchId)||Nt()).add(g);i=i.insert(f.batchId,T)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,E=g.value,T=n6();E.forEach(A=>{if(!a.has(A)){const R=d6(t.get(A),r.get(A));null!==R&&T.set(A,R),a=a.add(A)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,T))}return ne.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):s2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ne.resolve(ac());let f=-1,g=a;return l.next(y=>ne.forEach(y,(E,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(E)?ne.resolve():this.remoteDocumentCache.getEntry(e,E).next(A=>{g=g.insert(E,A)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,g,y,Nt())).next(E=>({batchId:f,changes:t6(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let i=Yw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Yw();return this.indexManager.getCollectionParents(e,i).next(l=>ne.forEach(l,f=>{const g=(y=t,E=f.child(i),new bl(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(y=>{y.forEach((E,T)=>{a=a.insert(E,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,g)=>{const y=g.getKey();null===a.get(y)&&(a=a.insert(y,zn.newInvalidDocument(y)))});let l=Yw();return a.forEach((f,g)=>{const y=i.get(f);void 0!==y&&Xw(y.mutation,g,Ts.empty(),Kn.now()),Kw(t,g)&&(l=l.insert(f,g))}),l})}}class JG{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ne.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Dr(r.createTime)}),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:C2(r.bundledQuery),readTime:Dr(r.readTime)}),ne.resolve();var r}}class XG{constructor(){this.overlays=new Nn(We.comparator),this.ls=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ac();return ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const i=ac(),a=t.length+1,l=new We(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Nn((y,E)=>y-E);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=a.get(y.largestBatchId);null===E&&(E=ac(),a=a.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const f=ac(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,E)=>f.set(y,E)),!(f.size()>=i)););return ne.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new h2(t,r));let a=this.ls.get(t);void 0===a&&(a=Nt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class S2{constructor(){this.fs=new Hn(ui.ds),this.ws=new Hn(ui._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ui(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ui(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new We(new Qt([])),r=new ui(t,e),i=new ui(t,e+1),a=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new We(new Qt([])),r=new ui(t,e),i=new ui(t,e+1);let a=Nt();return this.ws.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new ui(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ui{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return We.comparator(e.key,t.key)||St(e.As,t.As)}static _s(e,t){return St(e.As,t.As)||We.comparator(e.key,t.key)}}class eW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Hn(ui.ds)}checkEmpty(e){return ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const l=new u2(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.Rs=this.Rs.add(new ui(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ne.resolve(l)}lookupMutationBatch(e,t){return ne.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ui(t,0),i=new ui(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],l=>{const f=this.Ps(l.As);a.push(f)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(St);return t.forEach(i=>{const a=new ui(i,0),l=new ui(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],f=>{r=r.add(f.As)})}),ne.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const l=new ui(new We(a),0);let f=new Hn(St);return this.Rs.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(f=f.add(g.As)),!0)},l),ne.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){lt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ne.forEach(t.mutations,i=>{const a=new ui(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ui(t,0),i=this.Rs.firstAfterOrEqual(r);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ne.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class tW{constructor(e){this.Ds=e,this.docs=new Nn(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=Ds();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():zn.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Ds();const l=t.path,f=new We(l.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!l.isPrefixOf(y.path))break;y.path.length>l.length+1||Zk(m5(E),r)<=0||(i.has(E.key)||Kw(t,E))&&(a=a.insert(E.key,E.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,i){et()}Cs(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nW(this)}getSize(e){return ne.resolve(this.size)}}class nW extends sB{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class rW{constructor(e){this.persistence=e,this.xs=new Tl(t=>ip(t),qw),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.Ns=0,this.ks=new S2,this.targetCount=0,this.Ms=fp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ne.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new fp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Fn(t),ne.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ne.waitFor(a).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.ks.containsKey(t))}}class A2{constructor(e,t){this.$s={},this.overlays={},this.Os=new io(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new rW(this),this.indexManager=new HG,this.remoteDocumentCache=new tW(r=>this.referenceDelegate.Ls(r)),this.serializer=new L6(t),this.qs=new JG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XG,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new eW(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const i=new iW(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return ne.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class iW extends y5{constructor(e){super(),this.currentSequenceNumber=e}}class DA{constructor(e){this.persistence=e,this.Qs=new S2,this.js=null}static zs(e){return new DA(e)}get Ws(){if(this.js)return this.js;throw et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Ws,r=>{const i=We.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,ut.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ne.or([()=>ne.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class sW{constructor(e){this.serializer=e}O(e,t,r,i){const a=new tA("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I5,{unique:!0}),f.createObjectStore("documentMutations"),dB(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=ne.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),dB(e)),l=l.next(()=>function(f){const g=f.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ut.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,g){return g.store("mutations").j().next(y=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I5,{unique:!0});const E=g.store("mutations"),T=y.map(A=>E.put(A));return ne.waitFor(T)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(a))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const g=f.createObjectStore("documentOverlays",{keyPath:Hz});g.createIndex("collectionPathOverlayIndex",zz,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",Gz,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const g=f.createObjectStore("remoteDocumentsV14",{keyPath:Oz});g.createIndex("documentKeyIndex",Nz),g.createIndex("collectionGroupIndex",Rz)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:Vz}).createIndex("sequenceNumberIndex",Bz,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:jz}).createIndex("documentKeyIndex",$z,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=EA(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ne.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(f=>ne.forEach(f,g=>{lt(g.userId===a.userId);const y=up(this.serializer,g);return J6(e,a.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,f)=>{const g=new Qt(l),y=[0,Hi(g)];a.push(t.get(y).next(E=>E?ne.resolve():t.put({targetId:0,path:Hi(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ne.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Uz});const r=t.store("collectionParents"),i=new D2,a=l=>{if(i.add(l)){const f=l.lastSegment(),g=l.popLast();return r.put({collectionId:f,parent:Hi(g)})}};return t.store("remoteDocuments").X({Y:!0},(l,f)=>{const g=new Qt(l);return a(g.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,f,g],y)=>{const E=sc(f);return a(E.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=oI(i),l=V6(this.serializer,a);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const f=t.store("remoteDocumentsV14"),g=(y=l,y.document?new We(Qt.fromString(y.document.name).popFirst(5)):y.noDocument?We.fromSegments(y.noDocument.path):y.unknownDocument?We.fromSegments(y.unknownDocument.path):et()).path.toArray();var y;const E={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(E))}).next(()=>ne.waitFor(i))}si(e,t){const r=t.store("mutations"),i=oB(this.serializer),a=new A2(DA.zs,this.serializer.fe);return r.j().next(l=>{const f=new Map;return l.forEach(g=>{var y;let E=null!==(y=f.get(g.userId))&&void 0!==y?y:Nt();up(this.serializer,g).keys().forEach(T=>E=E.add(T)),f.set(g.userId,E)}),ne.forEach(f,(g,y)=>{const E=new ci(y),T=vA.de(this.serializer,E),A=a.getIndexManager(E),R=bA.de(E,this.serializer,A,a.referenceDelegate);return new uB(i,R,T,A).recalculateAndSaveOverlaysForDocumentKeys(new Qk(t,io.ct),g).next()})})}}function dB(n){n.createObjectStore("targetDocuments",{keyPath:Fz}).createIndex("documentTargetsIndex",Lz,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kz,{unique:!0}),n.createObjectStore("targetGlobal")}const M2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class x2{constructor(e,t,r,i,a,l,f,g,y,E,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=l,this.document=f,this.ri=y,this.oi=E,this.ui=T,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=A=>Promise.resolve(),!x2.D())throw new be(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZG(this,i),this.di=t+"main",this.serializer=new L6(g),this.wi=new fa(this.di,this.ui,new sW(this.serializer)),this.Bs=new GG(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oB(this.serializer),this.qs=new FG,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===E&&Tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(ae.FAILED_PRECONDITION,M2);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new io(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,j.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,j.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,j.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>AA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(md(e))return xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return hI(e).get("owner").next(t=>ne.resolve(this.Ri(t)))}Pi(e){return AA(e).delete(this.clientId)}bi(){var e=this;return(0,j.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=li(r,"clientMetadata");return i.j().next(a=>{const l=e.Si(a,18e5),f=a.filter(g=>-1===l.indexOf(g));return ne.forEach(f,g=>i.delete(g.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ne.resolve(!0):hI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new be(ae.FAILED_PRECONDITION,M2);return!1}}return!(!this.networkEnabled||!this.inForeground)||AA(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&xe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,j.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Qk(t,io.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>AA(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return bA.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zG(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return vA.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){xe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ui)?qz:14===l?D5:13===l?T5:12===l?Wz:11===l?b5:void et();var l;let f;return this.wi.runTransaction(e,i,a,g=>(f=new Qk(g,this.Os?this.Os.next():io.ct),"readwrite-primary"===t?this.Ti(f).next(y=>!!y||this.Ei(f)).next(y=>{if(!y)throw Tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new be(ae.FAILED_PRECONDITION,_5);return r(f)}).next(y=>this.vi(f).next(()=>y)):this.Oi(f).next(()=>r(f)))).then(g=>(f.raiseOnCommittedEvent(),g))}Oi(e){return hI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(ae.FAILED_PRECONDITION,M2)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hI(e).put("owner",t)}static D(){return fa.D()}Ai(e){const t=hI(e);return t.get("owner").next(r=>this.Ri(r)?(xe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ne.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,z.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return xe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Tr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hI(n){return li(n,"owner")}function AA(n){return li(n,"clientMetadata")}function P2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class O2{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Nt(),i=Nt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new O2(e,t.fromCache,r,i)}}class hB{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(Y5(t))return ne.resolve(null);let r=is(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=hA(t,null,"F"),r=is(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Nt(...a);return this.Ui.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.ji(t,f);return this.zi(t,y,l,g.readTime)?this.Ki(e,hA(t,null,"F")):this.Wi(e,y,t,g)}))})))}Gi(e,t,r,i){return Y5(t)||i.isEqual(ut.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const l=this.ji(t,a);return this.zi(t,l,r,i)?this.Qi(e,t):(Gk()<=Ui.in.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),a2(t)),this.Wi(e,l,t,g5(i,-1)))})}ji(e,t){let r=new Hn(X5(e));return t.forEach((i,a)=>{Kw(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return Gk()<=Ui.in.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",a2(t)),this.Ui.getDocumentsMatchingQuery(e,t,ro.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class oW{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Nn(St),this.Yi=new Tl(a=>ip(a),qw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uB(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function fB(n,e,t,r){return new oW(n,e,t,r)}function pB(n,e){return N2.apply(this,arguments)}function N2(){return N2=(0,j.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let g=Nt();for(const y of i){l.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of a){f.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(r,g).next(y=>({er:y,removedBatchIds:l,addedBatchIds:f}))})})}),N2.apply(this,arguments)}function gB(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function mB(n,e,t){let r=Nt(),i=Nt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Ds();return t.forEach((f,g)=>{const y=a.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(f)),g.isNoDocument()&&g.version.isEqual(ut.min())?(e.removeEntry(f,g.readTime),l=l.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),l=l.insert(f,g)):xe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)}),{nr:l,sr:i}})}function lW(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function U_(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,ne.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Sl(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function V_(n,e,t){return R2.apply(this,arguments)}function R2(){return R2=(0,j.Z)(function*(n,e,t){const r=qe(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!md(l))throw l;xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),R2.apply(this,arguments)}function MA(n,e,t){const r=qe(n);let i=ut.min(),a=Nt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,g,y){const E=qe(f),T=E.Yi.get(y);return void 0!==T?ne.resolve(E.Ji.get(T)):E.Bs.getTargetData(g,y)}(r,l,is(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,f.targetId).next(g=>{a=g})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:ut.min(),t?a:Nt())).next(f=>(vB(r,J5(e),f),{documents:f,ir:a})))}function _B(n,e){const t=qe(n),r=qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(l=>l?l.target:null))}function yB(n,e){const t=qe(n),r=t.Xi.get(e)||ut.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,g5(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(vB(t,e,i),i))}function vB(n,e,t){let r=n.Xi.get(e)||ut.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function k2(){return k2=(0,j.Z)(function*(n,e,t,r){const i=qe(n);let a=Nt(),l=Ds();for(const y of t){const E=e.rr(y.metadata.name);y.document&&(a=a.add(E));const T=e.ur(y);T.setReadTime(e.cr(y.metadata.readTime)),l=l.insert(E,T)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),g=yield U_(i,(y=r,is(M_(Qt.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>mB(y,f,l).next(E=>(f.apply(y),E)).next(E=>i.Bs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.Bs.addMatchingKeys(y,a,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,E.nr,E.sr)).next(()=>E.nr)))}),k2.apply(this,arguments)}function dW(n,e){return F2.apply(this,arguments)}function F2(){return F2=(0,j.Z)(function*(n,e,t=Nt()){const r=yield U_(n,is(C2(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Dr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(ei.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),F2.apply(this,arguments)}function CB(n,e){return`firestore_clients_${n}_${e}`}function wB(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function L2(n,e){return`firestore_targets_${n}_${e}`}class xA{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new be(i.error.code,i.error.message))),l?new xA(e,t,i.state,a):(Tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new be(r.error.code,r.error.message))),a?new fI(e,r.state,i):(Tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class PA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=c2();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=C5(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new PA(e,a):(Tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class U2{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new U2(t.clientId,t.onlineState):(Tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class V2{constructor(){this.activeTargetIds=c2()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B2{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Nn(St),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=CB(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new V2),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,j.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(CB(e.persistenceKey,i));if(a){const l=PA.ar(i,a);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(L2(this.persistenceKey,e));if(r){const i=fI.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(L2(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xe("SharedClientState","READ",e,t),t}setItem(e,t){xe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(xe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,j.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let l=io.ct;if(null!=a)try{const f=JSON.parse(a);lt("number"==typeof f),l=f}catch(f){Tr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==io.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new xA(this.currentUser,e,t,r),a=wB(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=wB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=L2(this.persistenceKey,e),a=new fI(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return PA.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return xA.ar(new ci(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return fI.ar(i,t)}br(e){return U2.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,j.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),l=[],f=[];return a.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{a.has(g)||f.push(g)}),this.syncEngine.Wr(l,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=c2();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class IB{constructor(){this.Hr=new V2,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new V2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hW{Yr(e){}shutdown(){}}class EB{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let OA=null;function j2(){return null===OA?OA=268435456+Math.round(2147483648*Math.random()):OA++,"0x"+OA.toString(16)}const fW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pW{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Gi="WebChannelConnection";class gW extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const l=j2(),f=this.To(e,t);xe("RestConnection",`Sending RPC '${e}' ${l}:`,f,r);const g={};return this.Eo(g,i,a),this.Ao(e,f,g,r).then(y=>(xe("RestConnection",`Received RPC '${e}' ${l}: `,y),y),y=>{throw jo("RestConnection",`RPC '${e}' ${l} failed with error: `,y,"url: ",f,"request:",r),y})}vo(e,t,r,i,a,l){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+E_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${fW[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=j2();return new Promise((l,f)=>{const g=new hz;g.setWithCredentials(!0),g.listenOnce(lz.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case zk.NO_ERROR:const E=g.getResponseJson();xe(Gi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(E)),l(E);break;case zk.TIMEOUT:xe(Gi,`RPC '${e}' ${a} timed out`),f(new be(ae.DEADLINE_EXCEEDED,"Request time out"));break;case zk.HTTP_ERROR:const T=g.getStatus();if(xe(Gi,`RPC '${e}' ${a} failed with status:`,T,"response text:",g.getResponseText()),T>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A?.error;if(R&&R.status&&R.message){const G=function(Q){const J=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(J)>=0?J:ae.UNKNOWN}(R.status);f(new be(G,R.message))}else f(new be(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new be(ae.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{xe(Gi,`RPC '${e}' ${a} completed.`)}});const y=JSON.stringify(i);xe(Gi,`RPC '${e}' ${a} sending request:`,i),g.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=j2(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=az(),f=cz(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.xmlHttpFactory=new dz({})),this.Eo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const E=a.join("");xe(Gi,`Creating RPC '${e}' stream ${i}: ${E}`,g);const T=l.createWebChannel(E,g);let A=!1,R=!1;const G=new pW({ro:J=>{R?xe(Gi,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(A||(xe(Gi,`Opening RPC '${e}' stream ${i} transport.`),T.open(),A=!0),xe(Gi,`RPC '${e}' stream ${i} sending:`,J),T.send(J))},oo:()=>T.close()}),Q=(J,we,He)=>{J.listen(we,Ne=>{try{He(Ne)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return Q(T,JS.EventType.OPEN,()=>{R||xe(Gi,`RPC '${e}' stream ${i} transport opened.`)}),Q(T,JS.EventType.CLOSE,()=>{R||(R=!0,xe(Gi,`RPC '${e}' stream ${i} transport closed`),G.wo())}),Q(T,JS.EventType.ERROR,J=>{R||(R=!0,jo(Gi,`RPC '${e}' stream ${i} transport errored:`,J),G.wo(new be(ae.UNAVAILABLE,"The operation could not be completed")))}),Q(T,JS.EventType.MESSAGE,J=>{var we;if(!R){const He=J.data[0];lt(!!He);const Ye=He.error||(null===(we=He[0])||void 0===we?void 0:we.error);if(Ye){xe(Gi,`RPC '${e}' stream ${i} received error:`,Ye);const mt=Ye.status;let At=function(xs){const Iy=kr[xs];if(void 0!==Iy)return _6(Iy)}(mt),Ar=Ye.message;void 0===At&&(At=ae.INTERNAL,Ar="Unknown error status: "+mt+" with message "+Ye.message),R=!0,G.wo(new be(At,Ar)),T.close()}else xe(Gi,`RPC '${e}' stream ${i} received:`,He),G._o(He)}}),Q(f,uz.STAT_EVENT,J=>{J.stat===l5.PROXY?xe(Gi,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===l5.NOPROXY&&xe(Gi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{G.fo()},0),G}}function bB(){return typeof window<"u"?window:null}function NA(){return typeof document<"u"?document:null}function pI(n){return new TG(n,!0)}class $2{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class TB{constructor(e,t,r,i,a,l,f,g){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new $2(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,j.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,j.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,j.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Tr(t.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new be(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,j.Z)(function*(){e.state=0,e.start()}))}tu(e){return xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mW extends TB{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function AG(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:et(),i=e.targetChange.targetIds||[],a=function(g,y){return g.useProto3Json?(lt(void 0===y||"string"==typeof y),ei.fromBase64String(y||"")):(lt(void 0===y||y instanceof Uint8Array),ei.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(g){const y=void 0===g.code?ae.UNKNOWN:_6(g.code);return new be(y,g.message||"")}(l);t=new I6(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=cc(n,r.document.name),a=Dr(r.document.updateTime),l=r.document.createTime?Dr(r.document.createTime):ut.min(),f=new Ti({mapValue:{fields:r.document.fields}}),g=zn.newFoundDocument(i,a,l,f);t=new _A(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=cc(n,r.document),a=r.readTime?Dr(r.readTime):ut.min(),l=zn.newNoDocument(i,a);t=new _A([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=cc(n,r.document);t=new _A([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,{count:i=0,unchangedNames:a}=r,l=new vG(i,a);t=new w6(r.targetId,l)}}var g;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return ut.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ut.min():a.readTime?Dr(a.readTime):ut.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=iI(this.serializer),t.addTarget=function(i,a){let l;const f=a.target;if(l=lA(f)?{documents:O6(i,f)}:{query:v2(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=D6(i,a.resumeToken);const g=g2(i,a.expectedCount);null!==g&&(l.expectedCount=g)}else if(a.snapshotVersion.compareTo(ut.min())>0){l.readTime=R_(i,a.snapshotVersion.toTimestamp());const g=g2(i,a.expectedCount);null!==g&&(l.expectedCount=g)}return l}(this.serializer,e);const r=function xG(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=iI(this.serializer),t.removeTarget=e,this.Wo(t)}}class _W extends TB{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function MG(n,e){return n&&n.length>0?(lt(void 0!==e),n.map(t=>function(r,i){let a=Dr(r.updateTime?r.updateTime:i);return a.isEqual(ut.min())&&(a=Dr(i)),new gG(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.cu(r,t)}return lt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=iI(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>sI(this.serializer,r))};this.Wo(t)}}class yW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new be(ae.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(ae.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class CW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Tr(t),this.mu=!1):xe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class wW{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,j.Z)(function*(){var g;Ad(l)&&(xe("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,j.Z)(function*(y){const E=qe(y);E.vu.add(4),yield B_(E),E.bu.set("Unknown"),E.vu.delete(4),yield gI(E)}),function(y){return g.apply(this,arguments)})(l))}))}),this.bu=new CW(r,i)}}function gI(n){return z2.apply(this,arguments)}function z2(){return z2=(0,j.Z)(function*(n){if(Ad(n))for(const e of n.Ru)yield e(!0)}),z2.apply(this,arguments)}function B_(n){return G2.apply(this,arguments)}function G2(){return G2=(0,j.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),G2.apply(this,arguments)}function RA(n,e){const t=qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Z2(t)?q2(t):$_(t).Ko()&&W2(t,e))}function mI(n,e){const t=qe(n),r=$_(t);t.Au.delete(e),r.Ko()&&DB(t,e),0===t.Au.size&&(r.Ko()?r.jo():Ad(t)&&t.bu.set("Unknown"))}function W2(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$_(n).su(e)}function DB(n,e){n.Vu.qt(e),$_(n).iu(e)}function q2(n){n.Vu=new wG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),$_(n).start(),n.bu.gu()}function Z2(n){return Ad(n)&&!$_(n).Uo()&&n.Au.size>0}function Ad(n){return 0===qe(n).vu.size}function SB(n){n.Vu=void 0}function IW(n){return K2.apply(this,arguments)}function K2(){return K2=(0,j.Z)(function*(n){n.Au.forEach((e,t)=>{W2(n,e)})}),K2.apply(this,arguments)}function EW(n,e){return Y2.apply(this,arguments)}function Y2(){return Y2=(0,j.Z)(function*(n,e){SB(n),Z2(n)?(n.bu.Iu(e),q2(n)):n.bu.set("Unknown")}),Y2.apply(this,arguments)}function bW(n,e,t){return Q2.apply(this,arguments)}function Q2(){return Q2=(0,j.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof I6&&2===e.state&&e.cause)try{yield(r=(0,j.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield kA(n,r)}else if(e instanceof _A?n.Vu.Ht(e):e instanceof w6?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(ut.min()))try{const r=yield gB(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Vu.ce(a);return l.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const y=i.Au.get(g);y&&i.Au.set(g,y.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach((f,g)=>{const y=i.Au.get(f);if(!y)return;i.Au.set(f,y.withResumeToken(ei.EMPTY_BYTE_STRING,y.snapshotVersion)),DB(i,f);const E=new Sl(y.target,f,g,y.sequenceNumber);W2(i,E)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){xe("RemoteStore","Failed to raise snapshot:",r),yield kA(n,r)}var r}),Q2.apply(this,arguments)}function kA(n,e,t){return J2.apply(this,arguments)}function J2(){return J2=(0,j.Z)(function*(n,e,t){if(!md(e))throw e;n.vu.add(1),yield B_(n),n.bu.set("Offline"),t||(t=()=>gB(n.localStore)),n.asyncQueue.enqueueRetryable((0,j.Z)(function*(){xe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield gI(n)}))}),J2.apply(this,arguments)}function AB(n,e){return e().catch(t=>kA(n,t,e))}function j_(n){return X2.apply(this,arguments)}function X2(){return X2=(0,j.Z)(function*(n){const e=qe(n),t=Md(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;TW(e);)try{const i=yield lW(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,DW(e,i)}catch(i){yield kA(e,i)}MB(e)&&xB(e)}),X2.apply(this,arguments)}function TW(n){return Ad(n)&&n.Eu.length<10}function DW(n,e){n.Eu.push(e);const t=Md(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function MB(n){return Ad(n)&&!Md(n).Uo()&&n.Eu.length>0}function xB(n){Md(n).start()}function SW(n){return eF.apply(this,arguments)}function eF(){return eF=(0,j.Z)(function*(n){Md(n).hu()}),eF.apply(this,arguments)}function AW(n){return tF.apply(this,arguments)}function tF(){return tF=(0,j.Z)(function*(n){const e=Md(n);for(const t of n.Eu)e.uu(t.mutations)}),tF.apply(this,arguments)}function MW(n,e,t){return nF.apply(this,arguments)}function nF(){return nF=(0,j.Z)(function*(n,e,t){const r=n.Eu.shift(),i=d2.from(r,e,t);yield AB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield j_(n)}),nF.apply(this,arguments)}function xW(n,e){return rF.apply(this,arguments)}function rF(){return rF=(0,j.Z)(function*(n,e){var t;e&&Md(n).ou&&(yield(t=(0,j.Z)(function*(r,i){if(m6(a=i.code)&&a!==ae.ABORTED){const l=r.Eu.shift();Md(r).Qo(),yield AB(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield j_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),MB(n)&&xB(n)}),rF.apply(this,arguments)}function PB(n,e){return iF.apply(this,arguments)}function iF(){return iF=(0,j.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),xe("RemoteStore","RemoteStore received new credentials");const r=Ad(t);t.vu.add(3),yield B_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield gI(t)}),iF.apply(this,arguments)}function sF(n,e){return oF.apply(this,arguments)}function oF(){return oF=(0,j.Z)(function*(n,e){const t=qe(n);e?(t.vu.delete(2),yield gI(t)):e||(t.vu.add(2),yield B_(t),t.bu.set("Unknown"))}),oF.apply(this,arguments)}function $_(n){return n.Su||(n.Su=function(e,t,r){const i=qe(e);return i.fu(),new mW(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:IW.bind(null,n),ao:EW.bind(null,n),nu:bW.bind(null,n)}),n.Ru.push(function(){var e=(0,j.Z)(function*(t){t?(n.Su.Qo(),Z2(n)?q2(n):n.bu.set("Unknown")):(yield n.Su.stop(),SB(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Md(n){return n.Du||(n.Du=function(e,t,r){const i=qe(e);return i.fu(),new _W(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:SW.bind(null,n),ao:xW.bind(null,n),au:AW.bind(null,n),cu:MW.bind(null,n)}),n.Ru.push(function(){var e=(0,j.Z)(function*(t){t?(n.Du.Qo(),yield j_(n)):(yield n.Du.stop(),n.Eu.length>0&&(xe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class aF{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new aF(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new be(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H_(n,e){if(Tr("AsyncQueue",`${e}: ${n}`),md(n))return new be(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class z_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=Yw(),this.sortedSet=new Nn(this.comparator)}static emptySet(e){return new z_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof z_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new z_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class OB{constructor(){this.Cu=new Nn(We.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class G_{constructor(e,t,r,i,a,l,f,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new G_(e,t,z_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class PW{constructor(){this.Nu=void 0,this.listeners=[]}}class OW{constructor(){this.queries=new Tl(e=>Q5(e),Zw),this.onlineState="Unknown",this.ku=new Set}}function cF(n,e){return lF.apply(this,arguments)}function lF(){return lF=(0,j.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new PW),i)try{a.Nu=yield t.onListen(r)}catch(l){const f=H_(l,`Initialization of query '${a2(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&hF(t)}),lF.apply(this,arguments)}function uF(n,e){return dF.apply(this,arguments)}function dF(){return dF=(0,j.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),dF.apply(this,arguments)}function NW(n,e){const t=qe(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.$u(i)&&(r=!0);l.Nu=i}}r&&hF(t)}function RW(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function hF(n){n.ku.forEach(e=>{e.next()})}class fF{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new G_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=G_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class kW{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class NB{constructor(e){this.serializer=e}rr(e){return cc(this.serializer,e)}ur(e){return e.metadata.exists?P6(this.serializer,e.document,!1):zn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Dr(e)}}class FW{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RB(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Qt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new NB(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Nt()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,j.Z)(function*(){const t=yield function uW(n,e,t,r){return k2.apply(this,arguments)}(e.localStore,new NB(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield dW(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function RB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class kB{constructor(e){this.key=e}}class FB{constructor(e){this.key=e}}class LB{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Nt(),this.mutatedKeys=Nt(),this.tc=X5(e),this.ec=new z_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new OB,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,T)=>{const A=i.get(E),R=Kw(this.query,T)?T:null,G=!!A&&this.mutatedKeys.has(A.key),Q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let J=!1;A&&R?A.data.isEqual(R.data)?G!==Q&&(r.track({type:3,doc:R}),J=!0):this.rc(A,R)||(r.track({type:2,doc:R}),J=!0,(g&&this.tc(R,g)>0||y&&this.tc(R,y)<0)&&(f=!0)):!A&&R?(r.track({type:0,doc:R}),J=!0):A&&!R&&(r.track({type:1,doc:A}),J=!0,(g||y)&&(f=!0)),J&&(R?(l=l.add(R),a=Q?a.add(E):a.delete(E)):(l=l.delete(E),a=a.delete(E)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const E="F"===this.query.limitType?l.last():l.first();l=l.delete(E.key),a=a.delete(E.key),r.track({type:1,doc:E})}return{ec:l,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((y,E)=>function(T,A){const R=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return R(T)-R(A)}(y.type,E.type)||this.tc(y.doc,E.doc)),this.oc(r);const l=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,g=f!==this.Xu;return this.Xu=f,0!==a.length||g?{snapshot:new G_(this.query,e.ec,i,a,e.mutatedKeys,0===f,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new OB,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Nt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new FB(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new kB(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Nt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return G_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class LW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UW{constructor(e){this.key=e,this.fc=!1}}class VW{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Tl(f=>Q5(f),Zw),this._c=new Map,this.mc=new Set,this.gc=new Nn(We.comparator),this.yc=new Map,this.Ic=new S2,this.Tc={},this.Ec=new Map,this.Ac=fp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function BW(n,e){return pF.apply(this,arguments)}function pF(){return pF=(0,j.Z)(function*(n,e){const t=LF(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const l=yield U_(t.localStore,is(e)),f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield gF(t,e,r,"current"===f,l.resumeToken),t.isPrimaryClient&&RA(t.remoteStore,l)}return i}),pF.apply(this,arguments)}function gF(n,e,t,r,i){return mF.apply(this,arguments)}function mF(){return mF=(0,j.Z)(function*(n,e,t,r,i){n.Rc=(T,A,R)=>{return(G=(0,j.Z)(function*(Q,J,we,He){let Ne=J.view.sc(we);Ne.zi&&(Ne=yield MA(Q.localStore,J.query,!1).then(({documents:At})=>J.view.sc(At,Ne)));const Ye=He&&He.targetChanges.get(J.targetId),mt=J.view.applyChanges(Ne,Q.isPrimaryClient,Ye);return DF(Q,J.targetId,mt.cc),mt.snapshot}),function(Q,J,we,He){return G.apply(this,arguments)})(n,T,A,R);var G};const a=yield MA(n.localStore,e,!0),l=new LB(e,a.ir),f=l.sc(a.documents),g=nI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=l.applyChanges(f,n.isPrimaryClient,g);DF(n,t,y.cc);const E=new LW(e,t,l);return n.wc.set(e,E),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),mF.apply(this,arguments)}function jW(n,e){return _F.apply(this,arguments)}function _F(){return _F=(0,j.Z)(function*(n,e){const t=qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!Zw(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield V_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),mI(t.remoteStore,r.targetId),W_(t,r.targetId)}).catch(gd))):(W_(t,r.targetId),yield V_(t.localStore,r.targetId,!0))}),_F.apply(this,arguments)}function yF(){return yF=(0,j.Z)(function*(n,e,t){const r=UF(n);try{const i=yield function(a,l){const f=qe(a),g=Kn.now(),y=l.reduce((A,R)=>A.add(R.key),Nt());let E,T;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=Ds(),G=Nt();return f.Zi.getEntries(A,y).next(Q=>{R=Q,R.forEach((J,we)=>{we.isValidDocument()||(G=G.add(J))})}).next(()=>f.localDocuments.getOverlayedDocuments(A,R)).next(Q=>{E=Q;const J=[];for(const we of l){const He=_G(we,E.get(we.key).overlayedDocument);null!=He&&J.push(new Dl(we.key,He,L5(He.value.mapValue),Yn.exists(!0)))}return f.mutationQueue.addMutationBatch(A,g,J,l)}).next(Q=>{T=Q;const J=Q.applyToLocalDocumentSet(E,G);return f.documentOverlayCache.saveOverlays(A,Q.batchId,J)})}).then(()=>({batchId:T.batchId,changes:t6(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let g=a.Tc[a.currentUser.toKey()];g||(g=new Nn(St)),g=g.insert(l,f),a.Tc[a.currentUser.toKey()]=g}(r,i.batchId,t),yield Al(r,i.changes),yield j_(r.remoteStore)}catch(i){const a=H_(i,"Failed to persist write");t.reject(a)}}),yF.apply(this,arguments)}function UB(n,e){return vF.apply(this,arguments)}function vF(){return vF=(0,j.Z)(function*(n,e){const t=qe(n);try{const r=yield function cW(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((E,T)=>{const A=i.get(T);if(!A)return;f.push(t.Bs.removeMatchingKeys(a,E.removedDocuments,T).next(()=>t.Bs.addMatchingKeys(a,E.addedDocuments,T)));let R=A.withSequenceNumber(a.currentSequenceNumber);var G,Q,J;null!==e.targetMismatches.get(T)?R=R.withResumeToken(ei.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):E.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(E.resumeToken,r)),i=i.insert(T,R),Q=R,J=E,(0===(G=A).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,R))});let g=Ds(),y=Nt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),f.push(mB(a,l,e.documentUpdates).next(E=>{g=E.nr,y=E.sr})),!r.isEqual(ut.min())){const E=t.Bs.getLastRemoteSnapshotVersion(a).next(T=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(E)}return ne.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,y)).next(()=>g)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.yc.get(a);l&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?lt(l.fc):i.removedDocuments.size>0&&(lt(l.fc),l.fc=!1))}),yield Al(t,r,e)}catch(r){yield gd(r)}}),vF.apply(this,arguments)}function VB(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,l)=>{const f=l.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=qe(a);f.onlineState=l;let g=!1;f.queries.forEach((y,E)=>{for(const T of E.listeners)T.Mu(l)&&(g=!0)}),g&&hF(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function HW(n,e,t){return CF.apply(this,arguments)}function CF(){return CF=(0,j.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let l=new Nn(We.comparator);l=l.insert(a,zn.newNoDocument(a,ut.min()));const f=Nt().add(a),g=new tI(ut.min(),new Map,new Nn(St),l,f);yield UB(r,g),r.gc=r.gc.remove(a),r.yc.delete(e),SF(r)}else yield V_(r.localStore,e,!1).then(()=>W_(r,e,t)).catch(gd)}),CF.apply(this,arguments)}function zW(n,e){return wF.apply(this,arguments)}function wF(){return wF=(0,j.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield function aW(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,f,g,y){const E=g.batch,T=E.keys();let A=ne.resolve();return T.forEach(R=>{A=A.next(()=>y.getEntry(f,R)).next(G=>{const Q=g.docVersions.get(R);lt(null!==Q),G.version.compareTo(Q)<0&&(E.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),y.addEntry(G)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(f,E))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Nt();for(let g=0;g<l.mutationResults.length;++g)l.mutationResults[g].transformResults.length>0&&(f=f.add(l.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);TF(t,r,null),bF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Al(t,i)}catch(i){yield gd(i)}}),wF.apply(this,arguments)}function GW(n,e,t){return IF.apply(this,arguments)}function IF(){return IF=(0,j.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(a,l){const f=qe(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return f.mutationQueue.lookupMutationBatch(g,l).next(E=>(lt(null!==E),y=E.keys(),f.mutationQueue.removeMutationBatch(g,E))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,y,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>f.localDocuments.getDocuments(g,y))})}(r.localStore,e);TF(r,e,t),bF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Al(r,i)}catch(i){yield gd(i)}}),IF.apply(this,arguments)}function EF(){return EF=(0,j.Z)(function*(n,e){const t=qe(n);Ad(t.remoteStore)||xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=qe(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=H_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),EF.apply(this,arguments)}function bF(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function TF(n,e,t){const r=qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function W_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||BB(n,r)})}function BB(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(mI(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),SF(n))}function DF(n,e,t){for(const r of t)r instanceof kB?(n.Ic.addReference(r.key,e),qW(n,r)):r instanceof FB?(xe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||BB(n,r.key)):et()}function qW(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(xe("SyncEngine","New document in limbo: "+t),n.mc.add(r),SF(n))}function SF(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new We(Qt.fromString(e)),r=n.Ac.next();n.yc.set(r,new UW(t)),n.gc=n.gc.insert(t,r),RA(n.remoteStore,new Sl(is(M_(t.path)),r,"TargetPurposeLimboResolution",io.ct))}}function Al(n,e,t){return AF.apply(this,arguments)}function AF(){return AF=(0,j.Z)(function*(n,e,t){const r=qe(n),i=[],a=[],l=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,g)=>{l.push(r.Rc(g,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const E=O2.Li(g.targetId,y);a.push(E)}}))}),yield Promise.all(l),r.dc.nu(i),yield(f=(0,j.Z)(function*(g,y){const E=qe(g);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ne.forEach(y,A=>ne.forEach(A.Fi,R=>E.persistence.referenceDelegate.addReference(T,A.targetId,R)).next(()=>ne.forEach(A.Bi,R=>E.persistence.referenceDelegate.removeReference(T,A.targetId,R)))))}catch(T){if(!md(T))throw T;xe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const A=T.targetId;if(!T.fromCache){const R=E.Ji.get(A),Q=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);E.Ji=E.Ji.insert(A,Q)}}}),function(g,y){return f.apply(this,arguments)})(r.localStore,a))}),AF.apply(this,arguments)}function ZW(n,e){return MF.apply(this,arguments)}function MF(){return MF=(0,j.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){xe("SyncEngine","User change. New user:",e.toKey());const r=yield pB(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(f=>{f.reject(new be(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Al(t,r.er)}var i}),MF.apply(this,arguments)}function KW(n,e){const t=qe(n),r=t.yc.get(e);if(r&&r.fc)return Nt().add(r.key);{let i=Nt();const a=t._c.get(e);if(!a)return i;for(const l of a){const f=t.wc.get(l);i=i.unionWith(f.view.nc)}return i}}function YW(n,e){return xF.apply(this,arguments)}function xF(){return xF=(0,j.Z)(function*(n,e){const t=qe(n),r=yield MA(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&DF(t,e.targetId,i.cc),i}),xF.apply(this,arguments)}function QW(n,e){return PF.apply(this,arguments)}function PF(){return PF=(0,j.Z)(function*(n,e){const t=qe(n);return yB(t.localStore,e).then(r=>Al(t,r))}),PF.apply(this,arguments)}function JW(n,e,t,r){return OF.apply(this,arguments)}function OF(){return OF=(0,j.Z)(function*(n,e,t,r){const i=qe(n),a=yield function(l,f){const g=qe(l),y=qe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.Sn(E,f).next(T=>T?g.localDocuments.getDocuments(E,T):ne.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield j_(i.remoteStore):"acknowledged"===t||"rejected"===t?(TF(i,e,r||null),bF(i,e),f=e,qe(qe(i.localStore).mutationQueue).Cn(f)):et(),yield Al(i,a)):xe("SyncEngine","Cannot apply mutation batch with id: "+e)}),OF.apply(this,arguments)}function NF(){return NF=(0,j.Z)(function*(n,e){const t=qe(n);if(LF(t),UF(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield jB(t,r.toArray());t.vc=!0,yield sF(t.remoteStore,!0);for(const a of i)RA(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(W_(t,l),V_(t.localStore,l,!0))),mI(t.remoteStore,l)}),yield i,yield jB(t,r),function(a){const l=qe(a);l.yc.forEach((f,g)=>{mI(l.remoteStore,g)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Nn(We.comparator)}(t),t.vc=!1,yield sF(t.remoteStore,!1)}}),NF.apply(this,arguments)}function jB(n,e,t){return RF.apply(this,arguments)}function RF(){return RF=(0,j.Z)(function*(n,e,t){const r=qe(n),i=[],a=[];for(const l of e){let f;const g=r._c.get(l);if(g&&0!==g.length){f=yield U_(r.localStore,is(g[0]));for(const y of g){const E=r.wc.get(y),T=yield YW(r,E);T.snapshot&&a.push(T.snapshot)}}else{const y=yield _B(r.localStore,l);f=yield U_(r.localStore,y),yield gF(r,$B(y),l,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),RF.apply(this,arguments)}function $B(n){return K5(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function eq(n){const e=qe(n);return qe(qe(e.localStore).persistence).$i()}function tq(n,e,t,r){return kF.apply(this,arguments)}function kF(){return kF=(0,j.Z)(function*(n,e,t,r){const i=qe(n);if(i.vc)return void xe("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield yB(i.localStore,J5(a[0])),f=tI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ei.EMPTY_BYTE_STRING);yield Al(i,l,f);break}case"rejected":yield V_(i.localStore,e,!0),W_(i,e,r);break;default:et()}}),kF.apply(this,arguments)}function nq(n,e,t){return FF.apply(this,arguments)}function FF(){return FF=(0,j.Z)(function*(n,e,t){const r=LF(n);if(r.vc){for(const i of e){if(r._c.has(i)){xe("SyncEngine","Adding an already active target "+i);continue}const a=yield _B(r.localStore,i),l=yield U_(r.localStore,a);yield gF(r,$B(a),l.targetId,!1,l.resumeToken),RA(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield V_(r.localStore,i,!1).then(()=>{mI(r.remoteStore,i),W_(r,i)}).catch(gd))}}),FF.apply(this,arguments)}function LF(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HW.bind(null,e),e.dc.nu=NW.bind(null,e.eventManager),e.dc.Pc=RW.bind(null,e.eventManager),e}function UF(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GW.bind(null,e),e}class _I{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,j.Z)(function*(){t.serializer=pI(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return fB(this.persistence,new hB,e.initialUser,this.serializer)}createPersistence(e){return new A2(DA.zs,this.serializer)}createSharedClientState(e){return new IB}terminate(){var e=this;return(0,j.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class VF extends _I{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,j.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield UF(r.Vc.syncEngine),yield j_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return fB(this.persistence,new hB,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new rB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Mz(t,this.persistence);return new Az(e.asyncQueue,r)}createPersistence(e){const t=P2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?zi.withCacheSize(this.cacheSizeBytes):zi.DEFAULT;return new x2(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,bB(),NA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new IB}}class HB extends VF{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,j.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof B2&&(r.sharedClientState.syncEngine={jr:JW.bind(null,i),zr:tq.bind(null,i),Wr:nq.bind(null,i),$i:eq.bind(null,i),Qr:QW.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,j.Z)(function*(l){yield function XW(n,e){return NF.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=bB();if(!B2.D(t))throw new be(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=P2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new B2(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class q_{initialize(e,t){var r=this;return(0,j.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>VB(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=ZW.bind(null,r.syncEngine),yield sF(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OW}createDatastore(e){const t=pI(e.databaseInfo.databaseId),r=new gW(e.databaseInfo);return new yW(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>VB(this.syncEngine,f,0),l=EB.D()?new EB:new hW,new wW(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,g,y){const E=new VW(r,i,a,l,f,g);return y&&(E.vc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,j.Z)(function*(t){const r=qe(t);xe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield B_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function zB(n,e=10240){let t=0;return{read:()=>(0,j.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,j.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class FA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class sq{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Xr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,j.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,j.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,j.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new kW(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,j.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,j.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,j.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class oq{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,j.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new be(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,j.Z)(function*(a,l){const f=qe(a),g=iI(f.serializer)+"/documents",y={documents:l.map(R=>rI(f.serializer,R))},E=yield f.vo("BatchGetDocuments",g,y,l.length),T=new Map;E.forEach(R=>{const G=function SG(n,e){return"found"in e?function(t,r){lt(!!r.found);const i=cc(t,r.found.name),a=Dr(r.found.updateTime),l=r.found.createTime?Dr(r.found.createTime):ut.min(),f=new Ti({mapValue:{fields:r.found.fields}});return zn.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){lt(!!r.missing),lt(!!r.readTime);const i=cc(t,r.missing),a=Dr(r.readTime);return zn.newNoDocument(i,a)}(n,e):et()}(f.serializer,R);T.set(G.key.toString(),G)});const A=[];return l.forEach(R=>{const G=T.get(R.toString());lt(!!G),A.push(G)}),A}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new N_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,j.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=We.fromPath(i);e.mutations.push(new l2(a,e.precondition(a)))}),yield(r=(0,j.Z)(function*(i,a){const l=qe(i),f=iI(l.serializer)+"/documents",g={writes:a.map(y=>sI(l.serializer,y))};yield l.Io("Commit",f,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new be(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ut.min())?Yn.exists(!1):Yn.updateTime(t):Yn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ut.min()))throw new be(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yn.updateTime(t)}return Yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class aq{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new $2(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,j.Z)(function*(){const t=new oq(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!jw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!m6(t)}return!1}}class cq{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ci.UNAUTHENTICATED,this.clientId=f5.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,j.Z)(function*(f){xe("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(xe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,j.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,j.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=H_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function LA(n,e){return BF.apply(this,arguments)}function BF(){return BF=(0,j.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),xe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,j.Z)(function*(a){r.isEqual(a)||(yield pB(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),BF.apply(this,arguments)}function jF(n,e){return $F.apply(this,arguments)}function $F(){return $F=(0,j.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield HF(n);xe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>PB(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>PB(e.remoteStore,a)),n._onlineComponents=e}),$F.apply(this,arguments)}function GB(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function HF(n){return zF.apply(this,arguments)}function zF(){return zF=(0,j.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){xe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield LA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!GB(t))throw t;jo("Error using user provided cache. Falling back to memory cache: "+t),yield LA(n,new _I)}}else xe("FirestoreClient","Using default OfflineComponentProvider"),yield LA(n,new _I);return n._offlineComponents}),zF.apply(this,arguments)}function UA(n){return GF.apply(this,arguments)}function GF(){return GF=(0,j.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(xe("FirestoreClient","Using user provided OnlineComponentProvider"),yield jF(n,n._uninitializedComponentsProvider._online)):(xe("FirestoreClient","Using default OnlineComponentProvider"),yield jF(n,new q_))),n._onlineComponents}),GF.apply(this,arguments)}function WB(n){return HF(n).then(e=>e.persistence)}function VA(n){return HF(n).then(e=>e.localStore)}function qB(n){return UA(n).then(e=>e.remoteStore)}function WF(n){return UA(n).then(e=>e.syncEngine)}function Z_(n){return qF.apply(this,arguments)}function qF(){return qF=(0,j.Z)(function*(n){const e=yield UA(n),t=e.eventManager;return t.onListen=BW.bind(null,e.syncEngine),t.onUnlisten=jW.bind(null,e.syncEngine),t}),qF.apply(this,arguments)}function KB(n,e,t={}){const r=new Xr;return n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return function(i,a,l,f,g){const y=new FA({next:T=>{a.enqueueAndForget(()=>uF(i,E));const A=T.docs.has(l);!A&&T.fromCache?g.reject(new be(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&f&&"server"===f.source?g.reject(new be(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new fF(M_(l.path),y,{includeMetadataChanges:!0,Ku:!0});return cF(i,E)}(yield Z_(n),n.asyncQueue,e,t,r)})),r.promise}function YB(n,e,t={}){const r=new Xr;return n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return function(i,a,l,f,g){const y=new FA({next:T=>{a.enqueueAndForget(()=>uF(i,E)),T.fromCache&&"server"===f.source?g.reject(new be(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new fF(l,y,{includeMetadataChanges:!0,Ku:!0});return cF(i,E)}(yield Z_(n),n.asyncQueue,e,t,r)})),r.promise}function QB(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const JB=new Map;function ZF(n,e,t){if(!t)throw new be(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XB(n,e,t,r){if(!0===e&&!0===r)throw new be(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ej(n){if(!We.isDocumentKey(n))throw new be(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tj(n){if(We.isDocumentKey(n))throw new be(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=BA(n);throw new be(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nj(n,e){if(e<=0)throw new be(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class rj{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new be(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new be(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=QB(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rj({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new be(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new be(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rj(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mz;switch(t.type){case"firstParty":return new Cz(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new be(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=JB.get(e);t&&(xe("ComponentProvider","Removing Datastore"),JB.delete(e),t.terminate())}(this),Promise.resolve()}}function ij(n,e,t,r={}){var i;const a=(n=Yt(n,yI))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==l&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let f,g;if("string"==typeof r.mockUserToken)f=r.mockUserToken,g=ci.MOCK_USER;else{f=(0,z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new be(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ci(y)}n._authCredentials=new _z(new d5(f,g))}}class Gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}}class Di{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Di(this.firestore,e,this._query)}}class lc extends Di{constructor(e,t,r){super(e,t,M_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new We(e))}withConverter(e){return new lc(this.firestore,e,this._path)}}function sj(n,e,...t){if(n=(0,z.m9)(n),ZF("collection","path",e),n instanceof yI){const r=Qt.fromString(e,...t);return tj(r),new lc(n,null,r)}{if(!(n instanceof Gn||n instanceof lc))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return tj(r),new lc(n.firestore,null,r)}}function jA(n,e,...t){if(n=(0,z.m9)(n),1===arguments.length&&(e=f5.A()),ZF("doc","path",e),n instanceof yI){const r=Qt.fromString(e,...t);return ej(r),new Gn(n,null,new We(r))}{if(!(n instanceof Gn||n instanceof lc))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return ej(r),new Gn(n.firestore,n instanceof lc?n.converter:null,new We(r))}}function oj(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),(n instanceof Gn||n instanceof lc)&&(e instanceof Gn||e instanceof lc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function KF(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),n instanceof Di&&e instanceof Di&&n.firestore===e.firestore&&Zw(n._query,e._query)&&n.converter===e.converter}class yq{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new $2(this,"async_queue_retry"),this.Xc=()=>{const t=NA();t&&xe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=NA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=NA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Xr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,j.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!md(t))throw t;xe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Tr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=aF.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&et()}verifyOperationInProgress(){}sa(){var e=this;return(0,j.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function YF(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class vq{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends yI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new yq,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||aj(this),this._firestoreClient.terminate()}}function wq(n,e){const t="object"==typeof n?n:(0,ln.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,ln._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,z.P0)("firestore");a&&ij(i,...a)}return i}function Sr(n){return n._firestoreClient||aj(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function aj(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Yz(n._databaseId,f,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,QB(y.experimentalLongPollingOptions),y.useFetchStreams));var f,y;n._firestoreClient=new cq(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function cj(n,e,t){const r=new Xr;return n.asyncQueue.enqueue((0,j.Z)(function*(){try{yield LA(n,t),yield jF(n,e),r.resolve()}catch(i){const a=i;if(!GB(a))throw a;jo("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function lj(n){if(n._initialized||n._terminated)throw new be(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class uc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uc(ei.fromBase64String(e))}catch(t){throw new be(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uc(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ml{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new be(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gp{constructor(e){this._methodName=e}}class $A{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}const Pq=/^__.*__$/;class Oq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Dl(e,this.data,this.fieldMask,t,this.fieldTransforms):new O_(e,this.data,t,this.fieldTransforms)}}class uj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Dl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class HA{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new HA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return WA(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(dj(this.ca)&&Pq.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Nq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pI(e)}ya(e,t,r,i=!1){return new HA({ca:e,methodName:t,ga:r,path:hr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mp(n){const e=n._freezeSettings(),t=pI(n._databaseId);return new Nq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zA(n,e,t,r,i,a={}){const l=n.ya(a.merge||a.mergeFields?2:0,e,t,i);eL("Data must be an object, but it was:",l,r);const f=pj(r,l);let g,y;if(a.merge)g=new Ts(l.fieldMask),y=l.fieldTransforms;else if(a.mergeFields){const E=[];for(const T of a.mergeFields){const A=wI(e,T,t);if(!l.contains(A))throw new be(ae.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);mj(E,A)||E.push(A)}g=new Ts(E),y=l.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,y=l.fieldTransforms;return new Oq(new Ti(f),g,y)}class CI extends gp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof CI}}function hj(n,e,t){return new HA({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class QF extends gp{_toFieldTransform(e){return new Jw(e.path,new x_)}isEqual(e){return e instanceof QF}}class Rq extends gp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=hj(this,e,!0),r=this.pa.map(a=>_p(a,t)),i=new op(r);return new Jw(e.path,i)}isEqual(e){return this===e}}class kq extends gp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=hj(this,e,!0),r=this.pa.map(a=>_p(a,t)),i=new ap(r);return new Jw(e.path,i)}isEqual(e){return this===e}}class Fq extends gp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new P_(e.serializer,s6(e.serializer,this.Ia));return new Jw(e.path,t)}isEqual(e){return this===e}}function JF(n,e,t,r){const i=n.ya(1,e,t);eL("Data must be an object, but it was:",i,r);const a=[],l=Ti.empty();_d(r,(g,y)=>{const E=GA(e,g,t);y=(0,z.m9)(y);const T=i.da(E);if(y instanceof CI)a.push(E);else{const A=_p(y,T);null!=A&&(a.push(E),l.set(E,A))}});const f=new Ts(a);return new uj(l,f,i.fieldTransforms)}function XF(n,e,t,r,i,a){const l=n.ya(1,e,t),f=[wI(e,r,t)],g=[i];if(a.length%2!=0)throw new be(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)f.push(wI(e,a[A])),g.push(a[A+1]);const y=[],E=Ti.empty();for(let A=f.length-1;A>=0;--A)if(!mj(y,f[A])){const R=f[A];let G=g[A];G=(0,z.m9)(G);const Q=l.da(R);if(G instanceof CI)y.push(R);else{const J=_p(G,Q);null!=J&&(y.push(R),E.set(R,J))}}const T=new Ts(y);return new uj(E,T,l.fieldTransforms)}function fj(n,e,t,r=!1){return _p(t,n.ya(r?4:3,e))}function _p(n,e){if(gj(n=(0,z.m9)(n)))return eL("Unsupported field value:",e,n),pj(n,e);if(n instanceof gp)return function(t,r){if(!dj(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=_p(l,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return s6(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Kn.fromDate(t);return{timestampValue:R_(r.serializer,i)}}if(t instanceof Kn){const i=new Kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:R_(r.serializer,i)}}if(t instanceof $A)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uc)return{bytesValue:D6(r.serializer,t._byteString)};if(t instanceof Gn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:m2(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${BA(t)}`)}(n,e)}function pj(n,e){const t={};return A5(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_d(n,(r,i)=>{const a=_p(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function gj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Kn||n instanceof $A||n instanceof uc||n instanceof Gn||n instanceof gp)}function eL(n,e,t){if(!gj(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=BA(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function wI(n,e,t){if((e=(0,z.m9)(e))instanceof Ml)return e._internalPath;if("string"==typeof e)return GA(n,e);throw WA("Field path arguments must be of type string or ",n,!1,void 0,t)}const Lq=new RegExp("[~\\*/\\[\\]]");function GA(n,e,t){if(e.search(Lq)>=0)throw WA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ml(...e.split("."))._internalPath}catch{throw WA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function WA(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(a||l)&&(g+=" (found",a&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new be(ae.INVALID_ARGUMENT,f+n+g)}function mj(n,e){return n.some(t=>t.isEqual(e))}class II{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uq extends II{data(){return super.data()}}function qA(n,e){return"string"==typeof e?GA(n,e):e instanceof Ml?e._internalPath:e._delegate._internalPath}function _j(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new be(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tL{}class EI extends tL{}function xd(n,e,...t){let r=[];e instanceof tL&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof K_).length,l=i.filter(f=>f instanceof bI).length;if(a>1||a>0&&l>0)throw new be(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class bI extends EI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new bI(e,t,r)}_apply(e){const t=this._parse(e);return wj(e._query,t),new Di(e.firestore,e.converter,o2(e._query,t))}_parse(e){const t=mp(e.firestore);return function(i,a,l,f,g,y,E){let T;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){Cj(E,y);const A=[];for(const R of E)A.push(vj(f,i,R));T={arrayValue:{values:A}}}else T=vj(f,i,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||Cj(E,y),T=fj(l,"where",E,"in"===y||"not-in"===y);return Kt.create(g,y,T)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class K_ extends tL{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new K_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)wj(a,f),a=o2(a,f)}(e._query,t),new Di(e.firestore,e.converter,o2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class nL extends EI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new nL(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new S_(i,a);return function(f,g){if(null===i2(f)){const y=dA(f);null!==y&&Ij(0,y,g.field)}}(r,l),l}(e._query,this._field,this._direction);return new Di(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new bl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ZA extends EI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ZA(e,t,r)}_apply(e){return new Di(e.firestore,e.converter,hA(e._query,this._limit,this._limitType))}}class KA extends EI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new KA(e,t,r)}_apply(e){const t=yj(e,this.type,this._docOrFields,this._inclusive);return new Di(e.firestore,e.converter,(i=t,new bl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class YA extends EI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new YA(e,t,r)}_apply(e){const t=yj(e,this.type,this._docOrFields,this._inclusive);return new Di(e.firestore,e.converter,(i=t,new bl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function yj(n,e,t,r){if(t[0]=(0,z.m9)(t[0]),t[0]instanceof II)return function(i,a,l,f,g){if(!f)throw new be(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const E of sp(i))if(E.field.isKeyField())y.push(rp(a,f.key));else{const T=f.data.field(E.field);if(iA(T))throw new be(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const A=E.field.canonicalString();throw new be(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(T)}return new Ed(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=mp(n.firestore);return function(a,l,f,g,y,E){const T=a.explicitOrderBy;if(y.length>T.length)throw new be(ae.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let R=0;R<y.length;R++){const G=y[R];if(T[R].field.isKeyField()){if("string"!=typeof G)throw new be(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof G}`);if(!s2(a)&&-1!==G.indexOf("/"))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${G}' contains a slash.`);const Q=a.path.child(Qt.fromString(G));if(!We.isDocumentKey(Q))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const J=new We(Q);A.push(rp(l,J))}else{const Q=fj(f,g,G);A.push(Q)}}return new Ed(A,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function vj(n,e,t){if("string"==typeof(t=(0,z.m9)(t))){if(""===t)throw new be(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s2(e)&&-1!==t.indexOf("/"))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!We.isDocumentKey(r))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rp(n,new We(r))}if(t instanceof Gn)return rp(n,t._key);throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${BA(t)}.`)}function Cj(n,e){if(!Array.isArray(n)||0===n.length)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wj(n,e){if(e.isInequality()){const r=dA(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new be(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=i2(n);null!==a&&Ij(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new be(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ij(n,e,t){if(!t.isEqual(e))throw new be(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class rL{convertValue(e,t="none"){switch(wd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(El(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return _d(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new $A(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=sA(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hw(e));default:return null}}convertTimestamp(e){const t=yd(e);return new Kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);lt(F6(r));const i=new vd(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(t)||Tr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function QA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qq extends rL{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}class yp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xl extends II{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new TI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class TI extends xl{data(e={}){return super.data(e)}}class Pd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new TI(this._firestore,this._userDataWriter,r.key,r,new yp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new TI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new TI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==l.type&&(g=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),y=a.indexOf(l.doc.key)),{type:Kq(l.type),doc:f,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function bj(n,e){return n instanceof xl&&e instanceof xl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pd&&e instanceof Pd&&n._firestore===e._firestore&&KF(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Od extends rL{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}function Tj(n,e,t){n=Yt(n,Gn);const r=Yt(n.firestore,Wn),i=QA(n.converter,e,t);return Y_(r,[zA(mp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Yn.none())])}function Dj(n,e,t,...r){n=Yt(n,Gn);const i=Yt(n.firestore,Wn),a=mp(i);let l;return l="string"==typeof(e=(0,z.m9)(e))||e instanceof Ml?XF(a,"updateDoc",n._key,e,t,r):JF(a,"updateDoc",n._key,e),Y_(i,[l.toMutation(n._key,Yn.exists(!0))])}function Sj(n,...e){var t,r,i;n=(0,z.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||YF(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(YF(e[l])){const T=e[l];e[l]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[l+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[l+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let g,y,E;if(n instanceof Gn)y=Yt(n.firestore,Wn),E=M_(n._key.path),g={next:T=>{e[l]&&e[l](iL(y,n,T))},error:e[l+1],complete:e[l+2]};else{const T=Yt(n,Di);y=Yt(T.firestore,Wn),E=T._query;const A=new Od(y);g={next:R=>{e[l]&&e[l](new Pd(y,A,T,R))},error:e[l+1],complete:e[l+2]},_j(n._query)}return function(T,A,R,G){const Q=new FA(G),J=new fF(A,Q,R);return T.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return cF(yield Z_(T),J)})),()=>{Q.Dc(),T.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return uF(yield Z_(T),J)}))}}(Sr(y),E,f,g)}function Y_(n,e){return function(t,r){const i=new Xr;return t.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return function $W(n,e,t){return yF.apply(this,arguments)}(yield WF(t),r,i)})),i.promise}(Sr(n),e)}function iL(n,e,t){const r=t.docs.get(e._key),i=new Od(n);return new xl(n,i,e._key,r,new yp(t.hasPendingWrites,t.fromCache),e.converter)}const fZ={maxAttempts:5};class Aj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mp(e)}set(e,t,r){this._verifyNotCommitted();const i=Nd(e,this._firestore),a=QA(i.converter,t,r),l=zA(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Yn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Nd(e,this._firestore);let l;return l="string"==typeof(t=(0,z.m9)(t))||t instanceof Ml?XF(this._dataReader,"WriteBatch.update",a._key,t,r,i):JF(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nd(e,this._firestore);return this._mutations=this._mutations.concat(new N_(t._key,Yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nd(n,e){if((n=(0,z.m9)(n)).firestore!==e)throw new be(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class pZ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mp(e)}get(e){const t=Nd(e,this._firestore),r=new qq(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const a=i[0];if(a.isFoundDocument())return new II(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new II(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=Nd(e,this._firestore),a=QA(i.converter,t,r),l=zA(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Nd(e,this._firestore);let l;return l="string"==typeof(t=(0,z.m9)(t))||t instanceof Ml?XF(this._dataReader,"Transaction.update",a._key,t,r,i):JF(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Nd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nd(e,this._firestore),r=new Od(this._firestore);return super.get(e).then(i=>new xl(this._firestore,r,t._key,i._document,new yp(!1,!1),t.converter))}}function sL(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function xj(){if(typeof Uint8Array>"u")throw new be("unimplemented","Uint8Arrays are not available in this environment.")}function Pj(){if(!function Zz(){return typeof atob<"u"}())throw new be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){E_=ln.SDK_VERSION,(0,ln._registerComponent)(new Er.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new Wn(new yz(t.getProvider("auth-internal")),new wz(t.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new be(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vd(f.options.projectId,g)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,ln.registerVersion)(u5,"3.13.0",n),(0,ln.registerVersion)(u5,"3.13.0","esm2017")}();class DI{constructor(e){this._delegate=e}static fromBase64String(e){return Pj(),new DI(uc.fromBase64String(e))}static fromUint8Array(e){return xj(),new DI(uc.fromUint8Array(e))}toBase64(){return Pj(),this._delegate.toBase64()}toUint8Array(){return xj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function oL(n){return function EZ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class bZ{enableIndexedDbPersistence(e,t){return function Iq(n,e){lj(n=Yt(n,Wn));const t=Sr(n);if(t._uninitializedComponentsProvider)throw new be(ae.FAILED_PRECONDITION,"SDK cache is already specified.");jo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new q_;return cj(t,i,new VF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Eq(n){lj(n=Yt(n,Wn));const e=Sr(n);if(e._uninitializedComponentsProvider)throw new be(ae.FAILED_PRECONDITION,"SDK cache is already specified.");jo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new q_;return cj(e,r,new HB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function bq(n){if(n._initialized&&!n._terminated)throw new be(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,j.Z)(function*(){try{yield(t=(0,j.Z)(function*(r){if(!fa.D())return Promise.resolve();const i=r+"main";yield fa.delete(i)}),function(r){return t.apply(this,arguments)})(P2(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Oj{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&jo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){ij(this._delegate,e,t,r)}enableNetwork(){return function Dq(n){return function lq(n){return n.asyncQueue.enqueue((0,j.Z)(function*(){const e=yield WB(n),t=yield qB(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.vu.delete(0),gI(i)}(t)}))}(Sr(n=Yt(n,Wn)))}(this._delegate)}disableNetwork(){return function Sq(n){return function uq(n){return n.asyncQueue.enqueue((0,j.Z)(function*(){const e=yield WB(n),t=yield qB(n);return e.setNetworkEnabled(!1),(r=(0,j.Z)(function*(i){const a=qe(i);a.vu.add(0),yield B_(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Sr(n=Yt(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,XB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Tq(n){return function(e){const t=new Xr;return e.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return function WW(n,e){return EF.apply(this,arguments)}(yield WF(e),t)})),t.promise}(Sr(n=Yt(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function iZ(n,e){return function fq(n,e){const t=new FA(e);return n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return r=yield Z_(n),i=t,qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return r=yield Z_(n),i=t,void qe(r).ku.delete(i);var r,i}))}}(Sr(n=Yt(n,Wn)),YF(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Q_(this,sj(this._delegate,e))}catch(t){throw ss(t,"collection()","Firestore.collection()")}}doc(e){try{return new $o(this,jA(this._delegate,e))}catch(t){throw ss(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new os(this,function _q(n,e){if(n=Yt(n,yI),ZF("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new be(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Di(n,null,(t=e,new bl(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ss(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gZ(n,e,t){n=Yt(n,Wn);const r=Object.assign(Object.assign({},fZ),t);return function(i){if(i.maxAttempts<1)throw new be(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new Xr;return i.asyncQueue.enqueueAndForget((0,j.Z)(function*(){const g=yield function ZB(n){return UA(n).then(e=>e.datastore)}(i);new aq(i.asyncQueue,g,l,a,f).run()})),f.promise}(Sr(n),i=>e(new pZ(n,i)),r)}(this._delegate,t=>e(new Nj(this,t)))}batch(){return Sr(this._delegate),new Rj(new Aj(this._delegate,e=>Y_(this._delegate,e)))}loadBundle(e){return function Aq(n,e){const t=Sr(n=Yt(n,Wn)),r=new vq;return function pq(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?y6().encode(a):a,g=function(g,y){if(g instanceof Uint8Array)return zB(g,y);if(g instanceof ArrayBuffer)return zB(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new sq(g,l);var g}(t,pI(e));n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){!function rq(n,e,t){const r=qe(n);var i;(i=(0,j.Z)(function*(a,l,f){try{const g=yield l.getMetadata();if(yield function(A,R){const G=qe(A),Q=Dr(R.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",J=>G.qs.getBundleMetadata(J,R.id)).then(J=>!!J&&J.createTime.compareTo(Q)>=0)}(a.localStore,g))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(A=g).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);f._updateProgress(RB(g));const y=new FW(g,a.localStore,l.serializer);let E=yield l.bc();for(;E;){const A=yield y.zu(E);A&&f._updateProgress(A),E=yield l.bc()}const T=yield y.complete();return yield Al(a,T.Ju,void 0),yield function(A,R){const G=qe(A);return G.persistence.runTransaction("Save bundle","readwrite",Q=>G.qs.saveBundleMetadata(Q,R))}(a.localStore,g),f._completeWith(T.progress),Promise.resolve(T.Hu)}catch(g){return jo("SyncEngine",`Loading bundle failed with ${g}`),f._failWith(g),Promise.resolve(new Set)}var A}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield WF(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Mq(n,e){return function gq(n,e){return n.asyncQueue.enqueue((0,j.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield VA(n),e)}))}(Sr(n=Yt(n,Wn)),e).then(t=>t?new Di(n,null,t.query):null)}(this._delegate,e).then(t=>t?new os(this,t):null)}}class JA extends rL{constructor(e){super(),this.firestore=e}convertBytes(e){return new DI(new uc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $o.forKey(t,this.firestore,null)}}class Nj{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new JA(e)}get(e){const t=Cp(e);return this._delegate.get(t).then(r=>new SI(this._firestore,new xl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Cp(e);return r?(sL("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Cp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}}class Rj{constructor(e){this._delegate=e}set(e,t,r){const i=Cp(e);return r?(sL("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Cp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new TI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new AI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=vp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new vp(e,new JA(e),t),i.set(t,a)),a}}vp.INSTANCES=new WeakMap;class $o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $o(t,new Gn(t._delegate,r,new We(e)))}static forKey(e,t,r){return new $o(t,new Gn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Q_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Q_(this.firestore,sj(this._delegate,e))}catch(t){throw ss(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,z.m9)(e))instanceof Gn&&oj(this._delegate,e)}set(e,t){t=sL("DocumentReference.set",t);try{return t?Tj(this._delegate,e,t):Tj(this._delegate,e)}catch(r){throw ss(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Dj(this._delegate,e):Dj(this._delegate,e,t,...r)}catch(i){throw ss(i,"updateDoc()","DocumentReference.update()")}}delete(){return function nZ(n){return Y_(Yt(n.firestore,Wn),[new N_(n._key,Yn.none())])}(this._delegate)}onSnapshot(...e){const t=kj(e),r=Fj(e,i=>new SI(this.firestore,new xl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Sj(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Qq(n){n=Yt(n,Gn);const e=Yt(n.firestore,Wn),t=Sr(e),r=new Od(e);return function dq(n,e){const t=new Xr;return n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return(r=(0,j.Z)(function*(i,a,l){try{const f=yield function(g,y){const E=qe(g);return E.persistence.runTransaction("read document","readonly",T=>E.localDocuments.getDocument(T,y))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new be(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const g=H_(f,`Failed to get document '${a} from cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield VA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new xl(e,r,n._key,i,new yp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Jq(n){n=Yt(n,Gn);const e=Yt(n.firestore,Wn);return KB(Sr(e),n._key,{source:"server"}).then(t=>iL(e,n,t))}(this._delegate):function Yq(n){n=Yt(n,Gn);const e=Yt(n.firestore,Wn);return KB(Sr(e),n._key).then(t=>iL(e,n,t))}(this._delegate),t.then(r=>new SI(this.firestore,new xl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new $o(this.firestore,this._delegate.withConverter(e?vp.getInstance(this.firestore,e):null))}}function ss(n,e,t){return n.message=n.message.replace(e,t),n}function kj(n){for(const e of n)if("object"==typeof e&&!oL(e))return e;return{}}function Fj(n,e){var t,r;let i;return i=oL(n[0])?n[0]:oL(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class SI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $o(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bj(this._delegate,e._delegate)}}class AI extends SI{data(e){const t=this._delegate.data(e);return function gz(n,e){n||et()}(void 0!==t),t}}class os{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JA(e)}where(e,t,r){try{return new os(this.firestore,xd(this._delegate,function Vq(n,e,t){const r=e,i=qA("where",n);return bI._create(i,r,t)}(e,t,r)))}catch(i){throw ss(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new os(this.firestore,xd(this._delegate,function Bq(n,e="asc"){const t=e,r=qA("orderBy",n);return nL._create(r,t)}(e,t)))}catch(r){throw ss(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new os(this.firestore,xd(this._delegate,function jq(n){return nj("limit",n),ZA._create("limit",n,"F")}(e)))}catch(t){throw ss(t,"limit()","Query.limit()")}}limitToLast(e){try{return new os(this.firestore,xd(this._delegate,function $q(n){return nj("limitToLast",n),ZA._create("limitToLast",n,"L")}(e)))}catch(t){throw ss(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new os(this.firestore,xd(this._delegate,function Hq(...n){return KA._create("startAt",n,!0)}(...e)))}catch(t){throw ss(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new os(this.firestore,xd(this._delegate,function zq(...n){return KA._create("startAfter",n,!1)}(...e)))}catch(t){throw ss(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new os(this.firestore,xd(this._delegate,function Gq(...n){return YA._create("endBefore",n,!1)}(...e)))}catch(t){throw ss(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new os(this.firestore,xd(this._delegate,function Wq(...n){return YA._create("endAt",n,!0)}(...e)))}catch(t){throw ss(t,"endAt()","Query.endAt()")}}isEqual(e){return KF(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function eZ(n){n=Yt(n,Di);const e=Yt(n.firestore,Wn),t=Sr(e),r=new Od(e);return function hq(n,e){const t=new Xr;return n.asyncQueue.enqueueAndForget((0,j.Z)(function*(){return(r=(0,j.Z)(function*(i,a,l){try{const f=yield MA(i,a,!0),g=new LB(a,f.ir),y=g.sc(f.documents),E=g.applyChanges(y,!1);l.resolve(E.snapshot)}catch(f){const g=H_(f,`Failed to execute query '${a} against cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield VA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Pd(e,r,n,i))}(this._delegate):"server"===e?.source?function tZ(n){n=Yt(n,Di);const e=Yt(n.firestore,Wn),t=Sr(e),r=new Od(e);return YB(t,n._query,{source:"server"}).then(i=>new Pd(e,r,n,i))}(this._delegate):function Xq(n){n=Yt(n,Di);const e=Yt(n.firestore,Wn),t=Sr(e),r=new Od(e);return _j(n._query),YB(t,n._query).then(i=>new Pd(e,r,n,i))}(this._delegate),t.then(r=>new aL(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=kj(e),r=Fj(e,i=>new aL(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Sj(this._delegate,t,r)}withConverter(e){return new os(this.firestore,this._delegate.withConverter(e?vp.getInstance(this.firestore,e):null))}}class DZ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new AI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aL{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new os(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new AI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new DZ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new AI(this._firestore,r))})}isEqual(e){return bj(this._delegate,e._delegate)}}class Q_ extends os{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $o(this.firestore,e):null}doc(e){try{return new $o(this.firestore,void 0===e?jA(this._delegate):jA(this._delegate,e))}catch(t){throw ss(t,"doc()","CollectionReference.doc()")}}add(e){return function rZ(n,e){const t=Yt(n.firestore,Wn),r=jA(n),i=QA(n.converter,e);return Y_(t,[zA(mp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new $o(this.firestore,t))}isEqual(e){return oj(this._delegate,e._delegate)}withConverter(e){return new Q_(this.firestore,this._delegate.withConverter(e?vp.getInstance(this.firestore,e):null))}}function Cp(n){return Yt(n,Gn)}class cL{constructor(...e){this._delegate=new Ml(...e)}static documentId(){return new cL(hr.keyField().canonicalString())}isEqual(e){return(e=(0,z.m9)(e))instanceof Ml&&this._delegate._internalPath.isEqual(e._internalPath)}}class wp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _Z(){return new QF("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new wp(e)}static delete(){const e=function mZ(){return new CI("deleteField")}();return e._methodName="FieldValue.delete",new wp(e)}static arrayUnion(...e){const t=function yZ(...n){return new Rq("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new wp(t)}static arrayRemove(...e){const t=function vZ(...n){return new kq("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new wp(t)}static increment(e){const t=function CZ(n){return new Fq("increment",n)}(e);return t._methodName="FieldValue.increment",new wp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const SZ={Firestore:Oj,GeoPoint:$A,Timestamp:Kn,Blob:DI,Transaction:Nj,WriteBatch:Rj,DocumentReference:$o,DocumentSnapshot:SI,Query:os,QueryDocumentSnapshot:AI,QuerySnapshot:aL,CollectionReference:Q_,FieldPath:cL,FieldValue:wp,setLogLevel:function TZ(n){!function pz(n){pd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function MZ(n){(function AZ(n,e){n.INTERNAL.registerComponent(new Er.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},SZ)))})(n,(e,t)=>new Oj(e,t,new bZ)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(ck.Z);var xZ=k(3019);class PZ extends vi.x{constructor(e=1/0,t=1/0,r=Cs){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)f=g;f&&r.splice(0,f+1)}}}var OZ=k(3020);function Lj(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,OZ.B)({connector:()=>new PZ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Uj(n,e){return(0,Hs.m)(e)?(0,Tn.w)(()=>n,e):(0,Tn.w)(()=>n)}class Pl{constructor(e){return e}}class J_{constructor(){return(0,ln.getApps)()}}const lL=new d.OlP("angularfire2._apps"),RZ={provide:Pl,useFactory:function NZ(n){return n&&1===n.length?n[0]:new Pl((0,ln.getApp)())},deps:[[new d.FiY,lL]]},kZ={provide:J_,deps:[[new d.FiY,lL]]};function FZ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Pl(r)}}let LZ=(()=>{class n{constructor(t){(0,ln.registerVersion)("angularfire",od.full,"core"),(0,ln.registerVersion)("angularfire",od.full,"app"),(0,ln.registerVersion)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[RZ,kZ]}),n})();function UZ(n,...e){return{ngModule:LZ,providers:[{provide:lL,useFactory:FZ(n),multi:!0,deps:[d.R0b,d.zs3,Uo,...e]}]}}const VZ=ud(ln.initializeApp,!0),uL=new Map,Vj={activated:!1,tokenObservers:[]},BZ={initialized:!1,enabled:!1};function pr(n){return uL.get(n)||Object.assign({},Vj)}function XA(){return BZ}const dL="https://content-firebaseappcheck.googleapis.com/v1",zZ="exchangeDebugToken",Bj={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class WZ{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,j.Z)(function*(){t.stop();try{t.pending=new z.BH,yield function qZ(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Si=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hL(n){if(!pr(n).activated)throw Si.create("use-before-activation",{appName:n.name})}function nM(n,e){return pL.apply(this,arguments)}function pL(){return pL=(0,j.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(T){throw Si.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==l.status)throw Si.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(T){throw Si.create("fetch-parse-error",{originalErrorMessage:T?.message})}const g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Si.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const y=1e3*Number(g[1]),E=Date.now();return{token:f.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}}),pL.apply(this,arguments)}function jj(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${dL}/projects/${t}/apps/${r}:${zZ}?key=${i}`,body:{debug_token:e}}}const QZ="firebase-app-check-database",JZ=1,MI="firebase-app-check-store";let rM=null;function gL(){return gL=(0,j.Z)(function*(n,e){const r=(yield function Hj(){return rM||(rM=new Promise((n,e)=>{try{const t=indexedDB.open(QZ,JZ);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Si.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(MI,{keyPath:"compositeKey"})}}catch(t){e(Si.create("storage-open",{originalErrorMessage:t?.message}))}}),rM)}()).transaction(MI,"readwrite"),a=r.objectStore(MI).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=g=>{l()},r.onerror=g=>{var y;f(Si.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})}),gL.apply(this,arguments)}const xI=new Ui.Yd("@firebase/app-check");function yL(n,e){return(0,z.hl)()?function eK(n,e){return function zj(n,e){return gL.apply(this,arguments)}(function Wj(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{xI.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function CL(){return XA().enabled}function wL(){return IL.apply(this,arguments)}function IL(){return IL=(0,j.Z)(function*(){const n=XA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),IL.apply(this,arguments)}const oK={error:"UNKNOWN_ERROR"};function aK(n){return z.US.encodeString(JSON.stringify(n),!1)}function iM(n){return EL.apply(this,arguments)}function EL(){return EL=(0,j.Z)(function*(n,e=!1){const t=n.app;hL(t);const r=pr(t);let a,i=r.token;if(i&&!X_(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(X_(g)?i=g:yield yL(t,void 0))}if(!e&&i&&X_(i))return{token:i.token};let f,l=!1;if(CL()){r.exchangeTokenPromise||(r.exchangeTokenPromise=nM(jj(t,yield wL()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const g=yield r.exchangeTokenPromise;return yield yL(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield pr(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?xI.warn(g.message):xI.error(g),a=g}return i?a?f=X_(i)?{token:i.token,internalError:a}:Yj(a):(f={token:i.token},r.token=i,yield yL(t,i)):f=Yj(a),l&&function Kj(n,e){const t=pr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),EL.apply(this,arguments)}function bL(){return bL=(0,j.Z)(function*(n){const e=n.app;hL(e);const{provider:t}=pr(e);if(CL()){const r=yield wL(),{token:i}=yield nM(jj(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),bL.apply(this,arguments)}function DL(n,e){const t=pr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Zj(n){const{app:e}=n,t=pr(e);let r=t.tokenRefresher;r||(r=function cK(n){const{app:e}=n;return new WZ((0,j.Z)(function*(){let r;if(r=pr(e).token?yield iM(n,!0):yield iM(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Bj.RETRIAL_MIN_WAIT,Bj.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function X_(n){return n.expireTimeMillis-Date.now()>0}function Yj(n){return{token:aK(oK),error:n}}class lK{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=pr(this.app);for(const t of e)DL(this.app,t.next);return Promise.resolve()}}const i7="app-check-internal";!function EK(){Vi(new Er.wA("app-check",n=>function uK(n,e){return new lK(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(i7).initialize()})),Vi(new Er.wA(i7,n=>function dK(n){return{getToken:e=>iM(n,e),getLimitedUseToken:()=>function qj(n){return bL.apply(this,arguments)}(n),addTokenListener:e=>function TL(n,e,t,r){const{app:i}=n,a=pr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&X_(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),Zj(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Zj(n))}(n,"INTERNAL",e),removeTokenListener:e=>DL(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),wi("@firebase/app-check","0.8.0")}();class Ip{constructor(){return ec("app-check")}}typeof window<"u"&&window,k(120);const o7=new d.OlP("angularfire2.auth.use-emulator"),a7=new d.OlP("angularfire2.auth.settings"),c7=new d.OlP("angularfire2.auth.tenant-id"),l7=new d.OlP("angularfire2.auth.langugage-code"),u7=new d.OlP("angularfire2.auth.use-device-language"),d7=new d.OlP("angularfire.auth.persistence"),h7=(n,e,t,r,i,a,l,f)=>(0,bs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),l)for(const[y,E]of Object.entries(l))g.settings[y]=E;return f&&g.setPersistence(f),g},[t,r,i,a,l,f]);let PL=(()=>{class n{constructor(t,r,i,a,l,f,g,y,E,T,A,R){const G=new vi.x,Q=(0,dt.of)(void 0).pipe((0,sd.Q)(l.outsideAngular),(0,Tn.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,8661)))),(0,wt.U)(()=>(0,bs.on)(t,a,r)),(0,wt.U)(J=>h7(J,a,f,y,E,T,g,A)),Lj({bufferSize:1,refCount:!1}));if(_i(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,dt.of)(null);else{Q.pipe(tr()).subscribe();const we=Q.pipe((0,Tn.w)(Ye=>Ye.getRedirectResult().then(mt=>mt,()=>null)),es,Lj({bufferSize:1,refCount:!1})),He=Q.pipe((0,Tn.w)(Ye=>new Gr.y(mt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onAuthStateChanged(At=>mt.next(At),At=>mt.error(At),()=>mt.complete()))})))),Ne=Q.pipe((0,Tn.w)(Ye=>new Gr.y(mt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onIdTokenChanged(At=>mt.next(At),At=>mt.error(At),()=>mt.complete()))}))));this.authState=we.pipe(Uj(He),(0,Zf.R)(l.outsideAngular),(0,sd.Q)(l.insideAngular)),this.user=we.pipe(Uj(Ne),(0,Zf.R)(l.outsideAngular),(0,sd.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Tn.w)(Ye=>Ye?(0,pn.D)(Ye.getIdToken()):(0,dt.of)(null))),this.idTokenResult=this.user.pipe((0,Tn.w)(Ye=>Ye?(0,pn.D)(Ye.getIdTokenResult()):(0,dt.of)(null))),this.credential=(0,xZ.T)(we,G,this.authState.pipe(wr(Ye=>!Ye))).pipe((0,wt.U)(Ye=>Ye?.user?Ye:null),(0,Zf.R)(l.outsideAngular),(0,sd.Q)(l.insideAngular))}return(0,bs.pX)(this,Q,a,{spy:{apply:(J,we,He)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&He.then(Ne=>G.next(Ne))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(bs.Dh),d.LFG(bs.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Uo),d.LFG(o7,8),d.LFG(a7,8),d.LFG(c7,8),d.LFG(l7,8),d.LFG(u7,8),d.LFG(d7,8),d.LFG(Ip,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function f7(n,e){return function MK(n,e=kv){return new Gr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function OL(n,e){return f7(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function oM(n,e){return OL(n,e).pipe(Na(void 0),u_(),(0,wt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const g=i.find(E=>E.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(E=>E.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function p7(n,e,t){return oM(n,t).pipe(Qo((r,i)=>function PK(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function OK(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return NL(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return NL(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return NL(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,CS.x)(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function NL(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function g7(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class m7{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=oM(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Na(void 0),u_(),wr(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),es)}auditTrail(e){return this.stateChanges(e).pipe(Qo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=g7(e);return p7(this.query,t,this.afs.schedulers.outsideAngular).pipe(es)}valueChanges(e={}){return OL(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),es)}get(e){return(0,pn.D)(this.query.get(e)).pipe(es)}add(e){return this.ref.add(e)}doc(e){return new _7(this.ref.doc(e),this.afs)}}class _7{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=y7(r,t);return new m7(i,a,this.afs)}snapshotChanges(){return function xK(n,e){return f7(n,e).pipe(Na(void 0),u_(),(0,wt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(es)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(es)}}class NK{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?oM(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),wr(t=>t.length>0),es):oM(this.query,this.afs.schedulers.outsideAngular).pipe(es)}auditTrail(e){return this.stateChanges(e).pipe(Qo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=g7(e);return p7(this.query,t,this.afs.schedulers.outsideAngular).pipe(es)}valueChanges(e={}){return OL(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),es)}get(e){return(0,pn.D)(this.query.get(e)).pipe(es)}}const RK=new d.OlP("angularfire2.enableFirestorePersistence"),kK=new d.OlP("angularfire2.firestore.persistenceSettings"),FK=new d.OlP("angularfire2.firestore.settings"),LK=new d.OlP("angularfire2.firestore.use-emulator");function y7(n,e=(t=>t)){return{query:e(n),ref:n}}let aM=(()=>{class n{constructor(t,r,i,a,l,f,g,y,E,T,A,R,G,Q,J,we,He){this.schedulers=g;const Ne=(0,bs.on)(t,f,r),Ye=E;T&&h7(Ne,f,A,G,Q,J,R,we),[this.firestore,this.persistenceEnabled$]=(0,bs.cc)(`${Ne.name}.firestore`,"AngularFirestore",Ne.name,()=>{const mt=f.runOutsideAngular(()=>Ne.firestore());if(a&&mt.settings(a),Ye&&mt.useEmulator(...Ye),i&&!_i(l)){const At=()=>{try{return(0,pn.D)(mt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Ar){return typeof console<"u"&&console.warn(Ar),(0,dt.of)(!1)}};return[mt,f.runOutsideAngular(At)]}return[mt,(0,dt.of)(!1)]},[a,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=y7(i,r),f=this.schedulers.ngZone.run(()=>a);return new m7(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new NK(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new _7(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(bs.Dh),d.LFG(bs.xv,8),d.LFG(RK,8),d.LFG(FK,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Uo),d.LFG(kK,8),d.LFG(LK,8),d.LFG(PL,8),d.LFG(o7,8),d.LFG(a7,8),d.LFG(c7,8),d.LFG(l7,8),d.LFG(u7,8),d.LFG(d7,8),d.LFG(Ip,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var v7=k(6710);let Ss=(()=>{class n{constructor(t,r){this.afAuth=t,this.db=r,this._loggedInUser$=new Cr.X(JSON.parse(sessionStorage.getItem("loggedInUser"))||null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,j.Z)(function*(){try{const r=yield t.afAuth.signInWithPopup(new v7.V);return yield t.createOrUpdateUserOnDB(r),sessionStorage.setItem("loggedInUser",JSON.stringify(r)),t._loggedInUser$.next(r),r}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,j.Z)(function*(){try{const i=yield r.afAuth.signInWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(i,t),sessionStorage.setItem("loggedInUser",JSON.stringify(i)),r._loggedInUser$.next(i),i}catch(i){throw console.error(i.message),i.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,j.Z)(function*(){try{const i=yield r.afAuth.createUserWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(i,t),sessionStorage.setItem("loggedInUser",JSON.stringify(i)),r._loggedInUser$.next(i),i}catch(i){throw console.error(i.message),i.message}})()}logOut(){var t=this;return(0,j.Z)(function*(){try{yield t.afAuth.signOut(),sessionStorage.removeItem("loggedInUser"),t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}createOrUpdateUserOnDB(t,r=null){var i=this;return(0,j.Z)(function*(){var a;i.db.collection("users").doc(t.user.uid).get().pipe(an(1)).subscribe({next:(a=(0,j.Z)(function*(l){if(l.exists){const f=l.data();f.notifications||(yield i.db.collection("users").doc(t.user.uid).update({notifications:[]})),f._id||(yield i.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),f.fullName||(yield i.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.additionalUserInfo?.profile?.name})),f.imgUrl||(yield i.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),f.followedByUsers||(yield i.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),f.followingUsers||(yield i.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield i.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.additionalUserInfo?.profile?.name,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[],notifications:[]})}),function(f){return a.apply(this,arguments)}),error:a=>{console.error(a)}})})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}getLoggedInUser(){return this._loggedInUser$.value}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(PL),d.LFG(aM))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var so=function(n){return n[n.Up=1]="Up",n[n.Down=3]="Down",n[n.Right=6]="Right",n[n.Left=8]="Left",n[n.UpMirrored=2]="UpMirrored",n[n.DownMirrored=4]="DownMirrored",n[n.LeftMirrored=5]="LeftMirrored",n[n.RightMirrored=7]="RightMirrored",n[n.Default=0]="Default",n[n.NotJpeg=-1]="NotJpeg",n[n.NotDefined=-2]="NotDefined",n}(so||{});class Rn{}Rn.getOrientation=n=>new Promise((e,t)=>{try{const r=new FileReader;r.onload=()=>{const i=new DataView(r.result);if(!i.byteLength||65496!==i.getUint16(0,!1))return e(so.NotDefined);const a=i.byteLength;let l=2;for(;l<a;){const f=i.getUint16(l,!1);if(l+=2,65505===f){if(1165519206!==i.getUint32(l+=2,!1))return e(so.NotJpeg);const g=18761===i.getUint16(l+=6,!1);l+=i.getUint32(l+4,g);const y=i.getUint16(l,g);l+=2;for(let E=0;E<y;E++)if(274===i.getUint16(l+12*E,g))return e(i.getUint16(l+12*E+8,g))}else{if(65280!=(65280&f))break;l+=i.getUint16(l,!1)}}return e(so.NotJpeg)},r.readAsArrayBuffer(n)}catch{return t(so.Default)}}),Rn.uploadFile=(n,e=!0,t=!1)=>new Promise(function(r,i){const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),l=/iPad|iPhone|iPod/i.test(navigator.userAgent);Promise.resolve(a||l).then(f=>f?Rn.generateUploadInputNative(window.document,e,t):Rn.generateUploadInputRenderer(n,e,t)).then(f=>{const g=f?Array.from(f):[],y=g.map(A=>Rn.getOrientation(A)),E=g.map(A=>Rn.fileToDataURL(A));let T=[];Promise.all(y).then(A=>(T=A,Promise.all(E))).then(A=>{const R=A.map((G,Q)=>({image:G.dataUrl,orientation:T[Q],fileName:G.fileName}));r(e?R:R[0])})}).catch(f=>i(f))}),Rn.fileToDataURL=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=i=>{e({dataUrl:i.target.result,fileName:n.name})};try{r.readAsDataURL(n)}catch(i){t(`ngx-image-compress - probably no file have been selected: ${i}`)}}),Rn.generateUploadInputRenderer=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,a)=>{const l=n.createElement("input");n.setStyle(l,"display","none"),n.setProperty(l,"type","file"),n.setProperty(l,"accept","image/*"),e&&n.setProperty(l,"multiple","true"),n.listen(l,"click",f=>{f.target.value=""}),n.listen(l,"change",f=>{r=!0,i(f.target.files)}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{r||a(new Error("file upload on blur - no file selected"))},300)},{once:!0}),l.click()})},Rn.generateUploadInputNative=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,a)=>{const l=n.createElement("input");l.id="upload-input"+new Date,l.style.display="none",l.setAttribute("type","file"),l.setAttribute("accept","image/*"),e&&l.setAttribute("multiple","true"),n.body.appendChild(l),l.addEventListener("change",()=>{r=!0,i(l.files),n.body.removeChild(n.getElementById(l.id))},{once:!0}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{!r&&n.getElementById(l.id)&&(a(new Error("file upload on blur - no file selected")),n.body.removeChild(n.getElementById(l.id)))},300)},{once:!0}),l.click()})},Rn.compress=(n,e,t,r=50,i=50,a=0,l=0)=>new Promise(function(f,g){i/=100,r/=100;const y=new Image;y.onload=()=>{const E=t.createElement("canvas"),T=E.getContext("2d");if(!T)return g("No canvas context available");let A=y.naturalWidth,R=y.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(e===so.Right||e===so.Left)){const Ne=A;A=R,R=Ne}r=Math.min(r,a?a/A:1,l?l/R:1),E.width=A*r,E.height=R*r;const J=Math.PI/180;CSS.supports("image-orientation","from-image")||e===so.Up?T.drawImage(y,0,0,E.width,E.height):e===so.Right?(T.save(),T.rotate(90*J),T.translate(0,-E.width),T.drawImage(y,0,0,E.height,E.width),T.restore()):e===so.Left?(T.save(),T.rotate(-90*J),T.translate(-E.width,0),T.drawImage(y,0,0,E.height,E.width),T.restore()):e===so.Down?(T.save(),T.rotate(180*J),T.translate(-E.width,-E.height),T.drawImage(y,0,0,E.width,E.height),T.restore()):T.drawImage(y,0,0,E.width,E.height);const we=n.substr(5,n.split(";")[0].length-5),He=E.toDataURL(we,i);f(He)},y.onerror=E=>g(E),y.src=n}),Rn.byteCount=n=>encodeURI(n).split(/%..|./).length-1,Rn.getImageMaxSize=function(){var n=(0,j.Z)(function*(e,t,r,i=!1){const l=y=>(y/1024/1024).toFixed(2);t&&console.debug("NgxImageCompress - Opening upload window");const f=yield Rn.uploadFile(r,!1,i);let g;for(let y=0;y<10;y++){const E=Rn.byteCount(f.image);g=yield Rn.compress(f.image,f.orientation,r,50,100);const T=Rn.byteCount(g);if(console.debug("NgxImageCompress -","Compression from",l(E),"MB to",l(T),"MB"),T>=E)throw 0===y?(t&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",l(E),"MB large"),{...f,image:g}):(t&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",l(E),"MB large"),{...f,image:g});if(T<1024*e*1024)return t&&console.debug("NgxImageCompress -","Here your file",l(T),"MB large"),{...f,image:g};if(9===y)throw t&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",l(E),"MB large"),{...f,image:g};t&&console.debug("NgxImageCompress -","Reached",l(T),"MB large. Trying another time after",y+1,"times"),f.image=g}throw t&&console.debug("NgxImageCompress - Unexpected error"),{}});return function(e,t,r){return n.apply(this,arguments)}}();let VK=(()=>{class n{constructor(t){this.DOC_ORIENTATION=so,this.render=t.createRenderer(null,null)}byteCount(t){return Rn.byteCount(t)}getOrientation(t){return Rn.getOrientation(t)}uploadFile(){return Rn.uploadFile(this.render,!1)}uploadMultipleFiles(){return Rn.uploadFile(this.render,!0)}uploadFileOrReject(){return Rn.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return Rn.uploadFile(this.render,!0,!0)}compressFile(t,r,i=50,a=50,l=0,f=0){return Rn.compress(t,r,this.render,i,a,l,f)}uploadAndGetImageWithMaxSize(t=1,r=!1,i=!1){return Rn.getImageMaxSize(t,r,this.render,i).then(a=>a.image).catch(a=>{throw a.image})}uploadAndGetImageWithMaxSizeAndMetas(t=1,r=!1,i=!1){return Rn.getImageMaxSize(t,r,this.render,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ey=(()=>{class n{constructor(t,r,i){this.db=t,this.authService=r,this.imageCompress=i,this._posts$=new Cr.X([]),this.posts$=this._posts$.asObservable()}getPosts(){var t=this;return this.db.collection("posts",i=>i.orderBy("createdAt","desc")).valueChanges().pipe(an(1),(0,Tn.w)(i=>{let a=i.reduce((f,g)=>f.concat(g.likedByUsers||[]),[]);const l=Array.from(new Set(a));return l.length?Zo(l.map(f=>this.authService.getUserById(f))).pipe((0,wt.U)(f=>i.map(g=>(g.likedByUsers=g.likedByUsers?g.likedByUsers.map(y=>f.find(E=>E._id===y)):[],g))),function cP(n=1/0){let e;e=n&&"object"==typeof n?n:{count:n};const{count:t=1/0,delay:r,resetOnSuccess:i=!1}=e;return t<=0?vo.y:(0,qr.e)((a,l)=>{let g,f=0;const y=()=>{let E=!1;g=a.subscribe((0,Pr.x)(l,T=>{i&&(f=0),l.next(T)},void 0,T=>{if(f++<t){const A=()=>{g?(g.unsubscribe(),g=null,y()):E=!0};if(null!=r){const R="number"==typeof r?function aP(n=0,e,t=oP){let r=-1;return null!=e&&((0,vb.K)(e)?t=e:r=e),new Gr.y(i=>{let a=function Pu(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(r):(0,Lc.Xf)(r(T,f)),G=(0,Pr.x)(l,()=>{G.unsubscribe(),A()},()=>{l.complete()});R.subscribe(G)}else A()}else l.error(T)})),E&&(g.unsubscribe(),g=null,y())};y()})}(1),Qi(this._handleError)):[i]}),Dn(function(){var i=(0,j.Z)(function*(a){const l=t.authService.getLoggedInUser();if(!l)return;const f=t.db.collection("users").doc(l?.user?.uid).valueChanges(),g=yield el(f),y=a.filter(E=>{const T=g.followingUsers.find(R=>R===E.creatorId);return E.creatorId===l.user.uid||T||!1});t._posts$.next([...y])});return function(a){return i.apply(this,arguments)}}()))}toggleLike(t,r){var i=this;return(0,j.Z)(function*(){return t?yield i.addLike(r):yield i.removeLike(r)})()}addLike(t){var r=this;return(0,j.Z)(function*(){return new Promise(function(){var i=(0,j.Z)(function*(a,l){try{const f=xf(t),y=r.authService.getLoggedInUser().user.uid;r.db.collection("users").doc(y).valueChanges().pipe(an(1)).subscribe({next:(E=(0,j.Z)(function*(T){const A=T,R=f.likedByUsers.slice();R.push(A),f.likedByUsers=f.likedByUsers.map(we=>we._id),f.likedByUsers.push(y),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...f.likedByUsers]});const G=r._posts$.value,Q=G.findIndex(we=>we._id===t._id),J={...f,likedByUsers:[...R]};G.splice(Q,1,J),r._posts$.next([...G]),a("Add like done")}),function(A){return E.apply(this,arguments)})})}catch(f){throw l("Add like failed:"),f}var E});return function(a,l){return i.apply(this,arguments)}}())})()}removeLike(t){var r=this;return(0,j.Z)(function*(){return new Promise(function(){var i=(0,j.Z)(function*(a,l){try{const f=xf(t),y=r.authService.getLoggedInUser().user.uid,E=f.likedByUsers.findIndex(G=>G._id===y);f.likedByUsers.splice(E,1),f.likedByUsers=f.likedByUsers.map(G=>G._id),yield r.db.collection("posts").doc(f._id).update({likedByUsers:[...f.likedByUsers]});const T=r._posts$.value,A=T.findIndex(G=>G._id===t._id);t.likedByUsers.splice(E,1);const R={...t,likedByUsers:[...t.likedByUsers]};T.splice(A,1,R),r._posts$.next([...T]),a("Remove like done")}catch(f){throw a("Remove like failed!"),f}});return function(a,l){return i.apply(this,arguments)}}())})()}uploadMedia(){var t=this;return(0,j.Z)(function*(){try{const{image:r,orientation:i}=yield t.imageCompress.uploadFile();console.log("orientation",i),console.log("Size in bytes of the uploaded image was:",t.imageCompress.byteCount(r));const a=yield t.imageCompress.compressFile(r,i,50,50);return console.log("Size in bytes after compression is now:",t.imageCompress.byteCount(a)),a}catch(r){return console.error(r),null}})()}createPost(t){var r=this;return(0,j.Z)(function*(){const i=r.authService.getLoggedInUser();t.creatorId=i.user.uid,t.creatorFullName=i.user.displayName,t.createdAt=Date.now();const a=yield r.db.collection("posts").add(t);console.log("docData",a),yield r.db.collection("posts").doc(a.id).update({_id:a.id})})()}getCommentsByPostId(t){return this.db.collection("comments",i=>i.where("postId","==",t).orderBy("createdAt","desc")).valueChanges()}addComment(t,r){var i=this;return(0,j.Z)(function*(){t.createdAt=Date.now();const a=yield i.db.collection("comments").add(t);yield i.db.collection("comments").doc(a.id).update({_id:a.id,parentId:a.id})})()}_makeId(t=5){let r="";for(let a=0;a<t;a++)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return r}_handleError(t){return console.log("err:",t),Yo(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(aM),d.LFG(Ss),d.LFG(VK))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cM(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let l,a=!1;n.subscribe({next:f=>{l=f,a=!0},error:i,complete:()=>{a?r(l):t?r(e.defaultValue):i(new qs)}})})}let BK=(()=>{class n{constructor(t,r){this.authService=t,this.db=r}toggleFollow(t,r,i){var a=this;return(0,j.Z)(function*(){t?yield a.addFollow(r,i):yield a.removeFollow(r,i)})()}addFollow(t,r){var i=this;return(0,j.Z)(function*(){var y;i.authService.loggedInUser$.pipe(an(1)).subscribe({next:(y=(0,j.Z)(function*(E){yield i.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,E?.user?.uid]})}),function(T){return y.apply(this,arguments)})});const a=i.authService.loggedInUser$.pipe(an(1)),l=yield cM(a),f=i.db.collection("users").doc(l?.user?.uid).valueChanges().pipe(an(1)),g=yield cM(f);yield i.db.collection("users").doc(g._id).update({followingUsers:[...g.followingUsers,t._id]})})()}removeFollow(t,r){var i=this;return(0,j.Z)(function*(){const a=i.authService.loggedInUser$.pipe(an(1)),l=yield cM(a),f=i.db.collection("users").doc(l?.user?.uid).valueChanges().pipe(an(1)),g=yield cM(f),y=xf(t.followedByUsers),E=y.findIndex(A=>A===l?.user?.uid);if(-1===E)return;y.splice(E,1),yield i.db.collection("users").doc(t._id).update({followedByUsers:y});const T=g.followingUsers.findIndex(A=>A===t._id);g.followingUsers.splice(T,1),yield i.db.collection("users").doc(g._id).update({followingUsers:g.followingUsers})})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ss),d.LFG(aM))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),C7=(()=>{class n{constructor(t){this.db=t}addNotification(t,r){var i=this;return(0,j.Z)(function*(){"likeAction"===r&&(t.message="liked your post"),t.createdAt=Date.now();const a=yield i.db.collection("notifications").add(t);yield i.db.collection("notifications").doc(a.id).update({_id:a.id})})()}getNotificationsForUser(t){return this.db.collection("notifications",r=>r.where("recipient","==",t).orderBy("createdAt","desc")).valueChanges()}markAsRead(t){var r=this;return(0,j.Z)(function*(){yield r.db.doc(`notifications/${t}`).update({read:!0})})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(aM))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RL=(()=>{class n{transform(t){const i=Math.floor(Date.now()/1e3)-t/1e3;return i<60?"just now":i<3600?`${Math.floor(i/60)}m`:i<86400?`${Math.floor(i/3600)}h`:`${Math.floor(i/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function jK(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",12),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(3);return d.KtG(i.toggleFollow())}),d._uU(1),d.qZA()}if(2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function $K(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",10)(1,"ul"),d.YNc(2,jK,2,1,"li",11),d.qZA()()),2&n){const t=d.oxw(2);d.xp6(2),d.Q6J("ngIf",t.creator._id!==t.loggedInUser.user.uid)}}function HK(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",1)(1,"div",2),d._UZ(2,"img",3),d.TgZ(3,"h5"),d._uU(4),d.TgZ(5,"span"),d._uU(6),d.ALo(7,"timeAgo"),d.qZA()()(),d.TgZ(8,"button",4),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.isMoreOptionsModalShown=!i.isMoreOptionsModalShown)}),d.O4$(),d.TgZ(9,"svg",5),d._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),d.qZA(),d.YNc(13,$K,3,1,"div",9),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(2),d.Q6J("src",t.creator.imgUrl,d.LSH),d.xp6(2),d.hij(" ",t.creator.fullName," "),d.xp6(2),d.hij("\u2022 ",d.lcZ(7,4,t.post.createdAt),""),d.xp6(7),d.Q6J("ngIf",t.isMoreOptionsModalShown)}}let zK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new d.vpe,this.isMoreOptionsModalShown=!1,this.isFollowClicked=!1}ngOnInit(){var t=this;return(0,j.Z)(function*(){const r=t.authService.getUserById(t.creator._id),i=yield el(r),a=t.authService.getLoggedInUser();t.loggedInUser=a,t.isFollowClicked=!!i.followedByUsers.find(l=>l===a.user.uid)})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.creator,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Ss))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post",isComponentInitialized:"isComponentInitialized"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options",3,"click"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"],["class","more-options-modal",4,"ngIf"],[1,"more-options-modal"],[3,"click",4,"ngIf"],[3,"click"]],template:function(r,i){1&r&&d.YNc(0,HK,14,6,"div",0),2&r&&d.Q6J("ngIf",i.creator&&i.isComponentInitialized)},dependencies:[pi,RL],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center;position:relative}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]   .more-options-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;right:0;top:30px;z-index:20;background-color:#262626;width:-moz-fit-content;width:fit-content;min-height:50px;padding-inline:1.5em;padding-block:1em;color:#f5f5f5;font-size:17px;border-radius:.4em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})();const GK=function(n){return{"btn-toggle-follow":!0,following:n}};function WK(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",3),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.toggleFollow())}),d._uU(1),d.qZA()}if(2&n){const t=d.oxw(2);d.Q6J("ngClass",d.VKq(2,GK,t.isFollowClicked)),d.xp6(1),d.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function qK(n,e){if(1&n&&(d.TgZ(0,"li"),d._UZ(1,"img",1),d.TgZ(2,"h4"),d._uU(3),d.qZA(),d.YNc(4,WK,2,4,"button",2),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("src",t.user.imgUrl,d.LSH),d.xp6(2),d.Oqu(t.user.fullName),d.xp6(1),d.Q6J("ngIf",t.user._id!==t.loggedInUser.user.uid)}}let ZK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new d.vpe,this.isFollowClicked=!1,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,j.Z)(function*(){const r=t.authService.getUserById(t.user._id),i=yield el(r),a=t.authService.getLoggedInUser();t.loggedInUser=a,t.isFollowClicked=!!i.followedByUsers.find(l=>l===a?.user?.uid),t.isComponentInitialized=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.user,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Ss))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[[4,"ngIf"],["alt","user",3,"src"],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(r,i){1&r&&d.YNc(0,qK,5,3,"li",0),2&r&&d.Q6J("ngIf",i.isComponentInitialized)},dependencies:[wa,pi],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:45px;border-radius:50%;flex:1}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function KK(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-user-row",7),d.NdJ("onToggleFollow",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleFollow.emit(i))}),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw();d.Q6J("post",r.post)("user",t)}}let YK=(()=>{class n{constructor(){this.onToggleLikedByUsersModal=new d.vpe,this.onToggleFollow=new d.vpe}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow"},decls:12,vars:1,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","user","onToggleFollow"]],template:function(r,i){1&r&&(d.TgZ(0,"article",0)(1,"div",1)(2,"h3"),d._uU(3,"Likes"),d.qZA(),d.TgZ(4,"button",2),d.NdJ("click",function(){return i.toggleLikedByUsersModal()}),d.O4$(),d.TgZ(5,"svg",3)(6,"title"),d._uU(7,"Close"),d.qZA(),d._UZ(8,"polyline",4)(9,"line",5),d.qZA()()(),d.kcU(),d.TgZ(10,"ul"),d.YNc(11,KK,1,2,"liked-by-user-row",6),d.qZA()()),2&r&&(d.xp6(11),d.Q6J("ngForOf",i.post.likedByUsers))},dependencies:[Go,ZK],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:calc(100vw - 70px);max-width:27em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3.5em;position:relative}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1.2em;top:50%;transform:translateY(-50%);cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em}"]})}return n})(),w7=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq))};static#t=this.\u0275dir=d.lG2({type:n})}return n})(),Ep=(()=>{class n extends w7{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=d.n5z(n)))(i||n)}}();static#t=this.\u0275dir=d.lG2({type:n,features:[d.qOj]})}return n})();const dc=new d.OlP("NgValueAccessor"),XK={provide:dc,useExisting:(0,d.Gpc)(()=>ty),multi:!0},tY=new d.OlP("CompositionEventMode");let ty=(()=>{class n extends w7{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function eY(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(tY,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&d.NdJ("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[d._Bn([XK]),d.qOj]})}return n})();const Wi=new d.OlP("NgValidators"),kd=new d.OlP("NgAsyncValidators");function O7(n){return null!=n}function N7(n){return(0,d.QGY)(n)?(0,pn.D)(n):n}function R7(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function k7(n,e){return e.map(t=>t(n))}function F7(n){return n.map(e=>function rY(n){return!n.validate}(e)?e:t=>e.validate(t))}function kL(n){return null!=n?function L7(n){if(!n)return null;const e=n.filter(O7);return 0==e.length?null:function(t){return R7(k7(t,e))}}(F7(n)):null}function FL(n){return null!=n?function U7(n){if(!n)return null;const e=n.filter(O7);return 0==e.length?null:function(t){return function QK(...n){const e=(0,Gs.jO)(n),{args:t,keys:r}=wn(n),i=new Gr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let g=l,y=l;for(let E=0;E<l;E++){let T=!1;(0,Lc.Xf)(t[E]).subscribe((0,Pr.x)(a,A=>{T||(T=!0,y--),f[E]=A},()=>g--,void 0,()=>{(!g||!T)&&(y||a.next(r?Ws(r,f):f),a.complete())}))}});return e?i.pipe(kc(e)):i}(k7(t,e).map(N7)).pipe((0,wt.U)(R7))}}(F7(n)):null}function V7(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function LL(n){return n?Array.isArray(n)?n:[n]:[]}function uM(n,e){return Array.isArray(n)?n.includes(e):n===e}function $7(n,e){const t=LL(e);return LL(n).forEach(i=>{uM(t,i)||t.push(i)}),t}function H7(n,e){return LL(e).filter(t=>!uM(n,t))}class z7{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class as extends z7{get formDirective(){return null}get path(){return null}}class Fd extends z7{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class G7{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let dM=(()=>{class n extends G7{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Fd,2))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&d.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[d.qOj]})}return n})(),hM=(()=>{class n extends G7{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(as,10))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&d.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[d.qOj]})}return n})();const PI="VALID",pM="INVALID",ny="PENDING",OI="DISABLED";function BL(n){return(gM(n)?n.validators:n)||null}function jL(n,e){return(gM(e)?e.asyncValidators:n)||null}function gM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class K7{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===PI}get invalid(){return this.status===pM}get pending(){return this.status==ny}get disabled(){return this.status===OI}get enabled(){return this.status!==OI}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($7(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($7(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(H7(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(H7(e,this._rawAsyncValidators))}hasValidator(e){return uM(this._rawValidators,e)}hasAsyncValidator(e){return uM(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ny,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=OI,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=PI,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===PI||this.status===ny)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?OI:PI}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ny,this._hasOwnPendingAsyncValidator=!0;const t=N7(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?OI:this.errors?pM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ny)?ny:this._anyControlsHaveStatus(pM)?pM:PI}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gM(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function aY(n){return Array.isArray(n)?kL(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function cY(n){return Array.isArray(n)?FL(n):n||null}(this._rawAsyncValidators)}}class $L extends K7{constructor(e,t,r){super(BL(t),jL(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Z7(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function q7(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const bp=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>NI}),NI="always";function RI(n,e,t=NI){HL(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function dY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Y7(n,e)})}(n,e),function fY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function hY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Y7(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function uY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function yM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function HL(n,e){const t=function B7(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(V7(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function j7(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(V7(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();yM(e._rawValidators,i),yM(e._rawAsyncValidators,i)}function Y7(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const yY={provide:as,useExisting:(0,d.Gpc)(()=>ry)},kI=(()=>Promise.resolve())();let ry=(()=>{class n extends as{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new $L({},kL(t),FL(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){kI.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),RI(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){kI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){kI.then(()=>{const r=this._findContainer(t.path),i=new $L({});(function Q7(n,e){HL(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){kI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){kI.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function J7(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Wi,10),d.Y36(kd,10),d.Y36(bp,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&d.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([yY]),d.qOj]})}return n})();function X7(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function e9(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const t9=class extends K7{constructor(e=null,t,r){super(BL(t),jL(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gM(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=e9(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){X7(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){X7(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){e9(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wY={provide:Fd,useExisting:(0,d.Gpc)(()=>FI)},i9=(()=>Promise.resolve())();let FI=(()=>{class n extends Fd{constructor(t,r,i,a,l,f){super(),this._changeDetectorRef=l,this.callSetDisabledState=f,this.control=new t9,this._registered=!1,this.name="",this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function WL(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===ty?t=a:function mY(n){return Object.getPrototypeOf(n.constructor)===Ep}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function GL(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){RI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){i9.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.VuI)(r);i9.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function mM(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(as,9),d.Y36(Wi,10),d.Y36(kd,10),d.Y36(dc,10),d.Y36(d.sBO,8),d.Y36(bp,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([wY]),d.qOj,d.TTD]})}return n})(),CM=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),o9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();const qL=new d.OlP("NgModelWithFormControlWarning");let E9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[o9]})}return n})(),WY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bp,useValue:t.callSetDisabledState??NI}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[E9]})}return n})(),qY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:qL,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:bp,useValue:t.callSetDisabledState??NI}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[E9]})}return n})();function ZY(n,e){if(1&n&&(d.TgZ(0,"li",10),d._UZ(1,"img",11),d.TgZ(2,"div",12)(3,"div",13)(4,"span",14),d._uU(5),d.qZA(),d.TgZ(6,"span",15),d._uU(7),d.ALo(8,"timeAgo"),d.qZA()(),d.TgZ(9,"p"),d._uU(10),d.qZA(),d.TgZ(11,"button",16),d._uU(12,"Reply"),d.qZA()()()),2&n){const t=e.$implicit;d.xp6(1),d.Q6J("src",t.createdByUserId.imgUrl,d.LSH),d.xp6(4),d.Oqu(t.createdByUserId.fullName),d.xp6(2),d.Oqu(d.lcZ(8,4,t.createdAt)),d.xp6(3),d.hij(" ",t.message," ")}}let KY=(()=>{class n{constructor(t,r){this.postService=t,this.authService=r,this.onAddComment=new d.vpe,this.onToggleCommentsModal=new d.vpe,this.onGetCommentsLength=new d.vpe,this.comment={_id:"",parentId:"",postId:"",createdByUserId:"",message:"",createdAt:0}}ngOnInit(){var t=this;this.comment.postId=this.post._id,this.comment.createdByUserId=this.loggedInUser.user.uid,this.commentsSubscription=this.postService.getCommentsByPostId(this.post._id).pipe((0,Tn.w)(function(){var r=(0,j.Z)(function*(i){const a=i.map(function(){var l=(0,j.Z)(function*(f){const g=t.authService.getUserById(f.createdByUserId),y=yield el(g);return f.createdByUserId=y,f});return function(f){return l.apply(this,arguments)}}());return yield Promise.all(a)});return function(i){return r.apply(this,arguments)}}())).subscribe({next:r=>{this.comments=r,this.onGetCommentsLength.emit(this.comments.length)}})}addComment(){this.onAddComment.emit({comment:this.comment,post:this.post}),this.comment.message=""}ngOnDestroy(){this.commentsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(ey),d.Y36(Ss))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["comments-modal"]],inputs:{post:"post",loggedInUser:"loggedInUser"},outputs:{onAddComment:"onAddComment",onToggleCommentsModal:"onToggleCommentsModal",onGetCommentsLength:"onGetCommentsLength"},decls:13,vars:3,consts:[[1,"comment-modal"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[1,"comments"],[1,"comment-list"],["class","comment",4,"ngFor","ngForOf"],["alt","",3,"src"],["type","text","name","message","id","comment","placeholder","Add a comment...",3,"ngModel","ngModelChange"],[1,"btn-add-comment",3,"click"],[1,"comment"],["alt","user",3,"src"],[1,"content"],[1,"inner-container"],[1,"fullname"],[1,"created-at"],[1,"btn-reply"]],template:function(r,i){1&r&&(d.TgZ(0,"div",0)(1,"button",1),d.NdJ("click",function(){return i.onToggleCommentsModal.emit()}),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()(),d.kcU(),d.TgZ(4,"div",4)(5,"div",5)(6,"ul"),d.YNc(7,ZY,13,6,"li",6),d.qZA()()(),d.TgZ(8,"form"),d._UZ(9,"img",7),d.TgZ(10,"input",8),d.NdJ("ngModelChange",function(l){return i.comment.message=l}),d.qZA(),d.TgZ(11,"button",9),d.NdJ("click",function(){return i.addComment()}),d._uU(12,"Post"),d.qZA()()()),2&r&&(d.xp6(7),d.Q6J("ngForOf",i.comments),d.xp6(2),d.Q6J("src",i.loggedInUser.user.photoURL,d.LSH),d.xp6(1),d.Q6J("ngModel",i.comment.message))},dependencies:[Go,CM,ty,dM,hM,FI,ry,RL],styles:["[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]{padding-inline:1.5em;padding-block:5em;position:fixed;top:0;left:0;z-index:30;width:100%;height:100vh;background-color:#000;border-block-start:1px solid rgba(245,245,245,.42);display:flex;flex-direction:column;justify-content:space-between;gap:1em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;right:1.5em;background-color:#000;cursor:pointer;border:none;padding-inline:.5em;padding-block-end:.5em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;padding-block-end:2em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.6em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;border-radius:50%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#919191;font-size:13px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000;border:none;color:#f5f5f5;width:-moz-fit-content;width:fit-content;padding-inline-end:.8em;font-size:12px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;height:2em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:unset;border-radius:50%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:3;height:100%;border:none;color:#f5f5f5;background-color:#000}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f5f5f5;font-family:Arial,sans-serif}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:100%;border:none;cursor:pointer;background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder}"]})}return n})();function YY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",21),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.toggleLike())}),d.O4$(),d.TgZ(1,"svg",22)(2,"title"),d._uU(3,"Like"),d.qZA(),d._UZ(4,"path",23),d.qZA()()}}function QY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",21),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.toggleLike())}),d.O4$(),d.TgZ(1,"svg",24)(2,"title"),d._uU(3,"Unlike"),d.qZA(),d._UZ(4,"path",25),d.qZA()()}}function JY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span"),d._uU(1," and "),d.TgZ(2,"span",31),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(3);return d.KtG(i.isLikedByUsersModalShown=!i.isLikedByUsersModalShown)}),d._uU(3),d.ALo(4,"number"),d.qZA()()}if(2&n){const t=d.oxw(3);d.xp6(3),d.AsE("",d.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function XY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-users-list",32),d.NdJ("onToggleLikedByUsersModal",function(i){d.CHM(t);const a=d.oxw(3);return d.KtG(a.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){d.CHM(t);const a=d.oxw(3);return d.KtG(a.onToggleFollow.emit(i))}),d.qZA()}if(2&n){const t=d.oxw(3);d.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function eQ(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",26),d._UZ(1,"img",27),d.TgZ(2,"p"),d._uU(3," Liked by "),d.TgZ(4,"span",28),d._uU(5),d.qZA(),d.YNc(6,JY,5,4,"span",29),d.qZA(),d.YNc(7,XY,1,2,"liked-by-users-list",30),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("src",t.post.likedByUsers[0].imgUrl,d.LSH),d.xp6(4),d.Oqu(t.post.likedByUsers[0].fullName),d.xp6(1),d.Q6J("ngIf",t.post.likedByUsers.length>1),d.xp6(1),d.Q6J("ngIf",t.isLikedByUsersModalShown)}}function tQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",37),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(4);return d.KtG(i.isMoreClicked=!i.isMoreClicked)}),d._uU(1," more "),d.qZA()}}function nQ(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",35),d._uU(2),d.qZA(),d._uU(3),d.ALo(4,"slice"),d.YNc(5,tQ,2,0,"button",36),d.qZA()),2&n){const t=d.oxw(3);d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.AsE(" ",d.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120?"...":""," "),d.xp6(2),d.Q6J("ngIf",t.post.content.length>=120)}}function rQ(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",35),d._uU(2),d.qZA(),d._uU(3),d.qZA()),2&n){const t=d.oxw(3);d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.hij(" ",t.post.content," ")}}function iQ(n,e){if(1&n&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&n){const t=d.oxw(3);d.xp6(1),d.hij("View ",t.commentsLength," comment")}}function sQ(n,e){if(1&n&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&n){const t=d.oxw(3);d.xp6(1),d.hij("View all ",t.commentsLength," comments")}}function oQ(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",33),d.YNc(1,nQ,6,8,"p",29),d.YNc(2,rQ,4,2,"p",29),d.TgZ(3,"p",34),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.onToggleCommentModal())}),d.YNc(4,iQ,2,1,"span",29),d.YNc(5,sQ,2,1,"span",29),d.qZA()()}if(2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",!t.isMoreClicked),d.xp6(1),d.Q6J("ngIf",t.isMoreClicked),d.xp6(2),d.Q6J("ngIf",1===t.commentsLength),d.xp6(1),d.Q6J("ngIf",t.commentsLength>=2)}}function aQ(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"comments-modal",38),d.NdJ("onAddComment",function(i){d.CHM(t);const a=d.oxw(2);return d.KtG(a.onAddComment.emit(i))})("onToggleCommentsModal",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.onToggleCommentModal())})("onGetCommentsLength",function(i){d.CHM(t);const a=d.oxw(2);return d.KtG(a.commentsLength=i)}),d.qZA()}if(2&n){const t=d.oxw(2);d.Q6J("post",t.post)("loggedInUser",t.loggedInUser)}}function cQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",1)(1,"post-header",2),d.NdJ("onToggleFollow",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleFollow.emit(i))}),d.qZA(),d._UZ(2,"img",3),d.TgZ(3,"div",4)(4,"div",5)(5,"div",6),d.YNc(6,YY,5,0,"button",7),d.YNc(7,QY,5,0,"button",7),d.TgZ(8,"button",8),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onToggleCommentModal())}),d.O4$(),d.TgZ(9,"svg",9)(10,"title"),d._uU(11,"CommentModel"),d.qZA(),d._UZ(12,"path",10),d.qZA()(),d.kcU(),d.TgZ(13,"button",11),d.O4$(),d.TgZ(14,"svg",12)(15,"title"),d._uU(16,"Share PostModel"),d.qZA(),d._UZ(17,"line",13)(18,"polygon",14),d.qZA()()(),d.kcU(),d.TgZ(19,"button",15),d.O4$(),d.TgZ(20,"svg",16)(21,"title"),d._uU(22,"Save"),d.qZA(),d._UZ(23,"polygon",17),d.qZA()()(),d.YNc(24,eQ,8,4,"div",18),d.YNc(25,oQ,6,4,"div",19),d.qZA(),d.YNc(26,aQ,1,2,"comments-modal",20),d.qZA()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("post",t.post)("creator",t.creator)("isComponentInitialized",t.isComponentInitialized),d.xp6(1),d.Tol(t.post.filterSelected),d.Q6J("src",t.post.imgUrl,d.LSH),d.xp6(4),d.Q6J("ngIf",!t.isLikeClicked),d.xp6(1),d.Q6J("ngIf",t.isLikeClicked),d.xp6(17),d.Q6J("ngIf",t.post.likedByUsers.length),d.xp6(1),d.Q6J("ngIf",t.creator),d.xp6(1),d.Q6J("ngIf",t.isCommentModalShown)}}let lQ=(()=>{class n{constructor(t,r){this.authService=t,this.postService=r,this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe,this.onAddNotification=new d.vpe,this.onAddComment=new d.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.loggedInUser=this.authService.getLoggedInUser(),this.isLikeClicked=!1,this.isComponentInitialized=!1,this.isCommentModalShown=!1,this.commentsLength=0}ngOnInit(){var t=this;this.authService.getUserById(this.post.creatorId).pipe(an(1)).subscribe({next:r=>{this.creator=r,this.post.likedByUsers.find(a=>a._id===this.loggedInUser?.user?.uid)&&(this.isLikeClicked=!0)}}),this.postService.getCommentsByPostId(this.post._id).pipe(an(1),(0,Tn.w)(function(){var r=(0,j.Z)(function*(i){const a=i.map(function(){var l=(0,j.Z)(function*(f){const g=t.authService.getUserById(f.createdByUserId),y=yield el(g);return f.createdByUserId=y,f});return function(f){return l.apply(this,arguments)}}());return yield Promise.all(a)});return function(i){return r.apply(this,arguments)}}())).subscribe({next:r=>{this.commentsLength=r.length,this.isComponentInitialized=!0}})}toggleLike(){this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:xf(this.post),isLikeClicked:this.isLikeClicked}),this.isLikeClicked&&this.onAddNotification.emit(this.post)}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}onToggleCommentModal(){this.isCommentModalShown=!this.isCommentModalShown,document.body.classList.toggle("body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Ss),d.Y36(ey))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment"},decls:1,vars:1,consts:[["class","post-card",4,"ngIf"],[1,"post-card"],[3,"post","creator","isComponentInitialized","onToggleFollow"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment",3,"click"],["aria-label","CommentModel","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],["class","content",4,"ngIf"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength",4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24",1,"x1lliihq","x1n2onr6"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src"],[1,"username"],[4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"content"],[1,"comments-length",3,"click"],[1,"creatorFullName"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength"]],template:function(r,i){1&r&&d.YNc(0,cQ,27,11,"li",0),2&r&&d.Q6J("ngIf",i.isComponentInitialized)},dependencies:[pi,zK,YK,KY,_r,je],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em;position:relative}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .comments-length[_ngcontent-%COMP%]{font-size:14px;color:#919191;cursor:pointer}"]})}return n})();function uQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"post-card",2),d.NdJ("onToggleLike",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleLike.emit(i))})("onToggleFollow",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleFollow.emit(i))})("onAddNotification",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onAddNotification.emit(i))})("onAddComment",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onAddComment.emit(i))}),d.qZA()}2&n&&d.Q6J("post",e.$implicit)}let dQ=(()=>{class n{constructor(){this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe,this.onAddNotification=new d.vpe,this.onAddComment=new d.vpe}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment"},decls:3,vars:1,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment",4,"ngFor","ngForOf"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment"]],template:function(r,i){1&r&&(d.TgZ(0,"section",0)(1,"ul"),d.YNc(2,uQ,1,1,"post-card",1),d.qZA()()),2&r&&(d.xp6(2),d.Q6J("ngForOf",i.posts))},dependencies:[Go,lQ],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function hQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"post-list",3),d.NdJ("onToggleLike",function(i){d.CHM(t);const a=d.oxw(2);return d.KtG(a.onToggleLike(i))})("onToggleFollow",function(i){d.CHM(t);const a=d.oxw(2);return d.KtG(a.onToggleFollow(i))})("onAddNotification",function(i){d.CHM(t);const a=d.oxw(2);return d.KtG(a.onAddNotification(i))})("onAddComment",function(i){d.CHM(t);const a=d.oxw(2);return d.KtG(a.onAddComment(i))}),d.qZA()}if(2&n){const t=d.oxw().ngIf;d.Q6J("posts",t)}}function fQ(n,e){if(1&n&&(d.TgZ(0,"section",1),d.YNc(1,hQ,1,1,"post-list",2),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.isComponentInitialized)}}let pQ=(()=>{class n{constructor(t,r,i,a){this.postService=t,this.authService=r,this.userService=i,this.notificationService=a,this.isComponentInitialized=!1,this.isToggleLikeProcessing=!1}ngOnInit(){this.postService.getPosts().pipe(an(1)).subscribe({error:t=>{console.error(t)},complete:()=>{this.posts$=this.postService.posts$,this.isComponentInitialized=!0}})}onToggleLike(t){var r=this;return(0,j.Z)(function*(){r.isToggleLikeProcessing||(r.isToggleLikeProcessing=!0,yield r.postService.toggleLike(t.isLikeClicked,t.post),r.isToggleLikeProcessing=!1)})()}onToggleFollow(t){var r=this;this.authService.getUserById(t.user._id).pipe(an(1)).subscribe(function(){var i=(0,j.Z)(function*(a){t.user=a,yield r.userService.toggleFollow(t.isFollowClicked,t.user,t.post)});return function(a){return i.apply(this,arguments)}}())}onAddNotification(t){var r=this;return(0,j.Z)(function*(){const i={sender:r.authService.getLoggedInUser().user.uid,recipient:t.creatorId,message:"",createdAt:0,madeAt:t,read:!1};yield r.notificationService.addNotification(i,"likeAction")})()}onAddComment({comment:t,post:r}){this.postService.addComment(t,r)}ngOnDestroy(){}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(ey),d.Y36(Ss),d.Y36(BK),d.Y36(C7))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["home-page"]],decls:2,vars:3,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment",4,"ngIf"],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment"]],template:function(r,i){1&r&&(d.YNc(0,fQ,2,1,"section",0),d.ALo(1,"async")),2&r&&d.Q6J("ngIf",d.lcZ(1,1,i.posts$))},dependencies:[pi,dQ,jl],styles:["[_nghost-%COMP%]{display:block;padding-block:2em}"]})}return n})();function gQ(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onLogInWithEmailAndPassword())}),d.TgZ(1,"input",13),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.email=i)}),d.qZA(),d.TgZ(2,"input",14),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.password=i)}),d.qZA(),d.TgZ(3,"button",15),d._uU(4,"Log in"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}function mQ(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onRegisterWithEmailAndPassword())}),d.TgZ(1,"input",16),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.fullName=i)}),d.qZA(),d.TgZ(2,"input",13),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.email=i)}),d.qZA(),d.TgZ(3,"input",14),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.password=i)}),d.qZA(),d.TgZ(4,"button",17),d._uU(5,"Register"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.fullName),d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}let _Q=(()=>{class n{constructor(t,r,i){this.authService=t,this.postService=r,this.router=i,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0}ngOnInit(){}onLogInWithGoogle(){var t=this;return(0,j.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(an(1)).subscribe({next:i=>{i&&t.router.navigateByUrl("/")},error:i=>{console.error(i)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,j.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(an(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,j.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(an(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.postService.getPosts().pipe(an(1)).subscribe({error:t=>{console.error(t)}})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Ss),d.Y36(ey),d.Y36(rr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,i){1&r&&(d.TgZ(0,"section",0)(1,"div",1),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()(),d.YNc(4,gQ,5,2,"form",4),d.YNc(5,mQ,6,3,"form",4),d.kcU(),d.TgZ(6,"p",5),d.NdJ("click",function(){return i.isLogInFormShown=!i.isLogInFormShown}),d._uU(7," Don't you have a user? Register here "),d.qZA(),d.TgZ(8,"button",6),d.NdJ("click",function(){return i.onLogInWithGoogle()}),d.O4$(),d.TgZ(9,"svg",7),d._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),d.qZA(),d.kcU(),d.TgZ(14,"span"),d._uU(15,"Log in with Google"),d.qZA()()()),2&r&&(d.xp6(4),d.Q6J("ngIf",i.isLogInFormShown),d.xp6(1),d.Q6J("ngIf",!i.isLogInFormShown))},dependencies:[pi,CM,ty,dM,hM,FI,ry],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})(),yQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["message-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(d.TgZ(0,"p"),d._uU(1,"message-page works!"),d.qZA())}})}return n})();function vQ(n,e){if(1&n&&(d.TgZ(0,"li",1)(1,"div",2),d._UZ(2,"img",3),d.TgZ(3,"p")(4,"span",4),d._uU(5),d.qZA(),d._uU(6),d.qZA(),d.TgZ(7,"span",5),d._uU(8),d.ALo(9,"timeAgo"),d.qZA()(),d._UZ(10,"img",6),d.qZA()),2&n){const t=d.oxw();d.xp6(2),d.s9C("src",t.sender.imgUrl,d.LSH),d.xp6(3),d.Oqu(t.sender.fullName),d.xp6(1),d.hij(" ",t.notification.message," "),d.xp6(2),d.hij(" ",d.lcZ(9,5,t.notification.createdAt),""),d.xp6(2),d.s9C("src",t.notification.madeAt.imgUrl,d.LSH)}}let CQ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.getUserById(this.notification.sender).pipe(an(1)).subscribe({next:t=>{this.sender=t}})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Ss))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["notification-preview"]],inputs:{notification:"notification"},decls:1,vars:1,consts:[["class","notification-preview",4,"ngIf"],[1,"notification-preview"],[1,"inner-container"],["alt","sender",1,"img-sender",3,"src"],[1,"full-name"],[1,"created-at"],["alt","content",1,"img-made-at",3,"src"]],template:function(r,i){1&r&&d.YNc(0,vQ,11,7,"li",0),2&r&&d.Q6J("ngIf",i.sender)},dependencies:[pi,RL],styles:["[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:3em;gap:1em;font-size:15px}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .img-sender[_ngcontent-%COMP%]{width:40px;border-radius:50%}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .full-name[_ngcontent-%COMP%]{font-size:13px;font-weight:bolder}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{font-size:13.5px;color:#a8a8a8}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .img-made-at[_ngcontent-%COMP%]{aspect-ratio:1/1;object-fit:cover;width:3em}"]})}return n})();function wQ(n,e){1&n&&d._UZ(0,"notification-preview",2),2&n&&d.Q6J("notification",e.$implicit)}let IQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["notification-list"]],inputs:{notifications:"notifications"},decls:3,vars:1,consts:[[1,"notification-list"],[3,"notification",4,"ngFor","ngForOf"],[3,"notification"]],template:function(r,i){1&r&&(d.TgZ(0,"section",0)(1,"ul"),d.YNc(2,wQ,1,1,"notification-preview",1),d.qZA()()),2&r&&(d.xp6(2),d.Q6J("ngForOf",i.notifications))},dependencies:[Go,CQ],styles:["[_nghost-%COMP%]   .notification-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}"]})}return n})();function EQ(n,e){1&n&&(d.TgZ(0,"p"),d._uU(1,"You dont have notifications yet!"),d.qZA())}function bQ(n,e){if(1&n&&(d.TgZ(0,"section",1),d._UZ(1,"notification-list",2),d.YNc(2,EQ,2,0,"p",3),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("notifications",t.notifications),d.xp6(1),d.Q6J("ngIf",!t.notifications.length)}}let TQ=(()=>{class n{constructor(t,r){this.notificationService=t,this.authService=r}ngOnInit(){var t=this;return(0,j.Z)(function*(){t.notificationService.getNotificationsForUser(t.authService.getLoggedInUser().user.uid).pipe(an(1)).subscribe({next:r=>{t.notifications=r}})})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(C7),d.Y36(Ss))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","notifications-page",4,"ngIf"],[1,"notifications-page"],[3,"notifications"],[4,"ngIf"]],template:function(r,i){1&r&&d.YNc(0,bQ,3,2,"section",0),2&r&&d.Q6J("ngIf",i.notifications)},dependencies:[pi,IQ],styles:["[_nghost-%COMP%]{padding-block:2em}"]})}return n})();function DQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",4)(1,"button",5),d.NdJ("click",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onMediaSelected(i))}),d.TgZ(2,"span"),d._uU(3," Upload photos and videos here "),d.qZA(),d.TgZ(4,"div"),d.O4$(),d.TgZ(5,"svg",6),d._UZ(6,"path",7)(7,"path",8)(8,"path",9),d.qZA()()()()}}const SQ=function(n){return{active:n}};function AQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"article",21),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw(2);return d.KtG(l.onSelectFilterPreview(a.value))}),d.TgZ(1,"span"),d._uU(2),d.qZA(),d._UZ(3,"img",22),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw(2);d.Q6J("ngClass",d.VKq(6,SQ,t.value===r.post.filterSelected)),d.xp6(2),d.Oqu(t.name),d.xp6(1),d.Tol(t.value),d.MGl("alt","",t," - filter preview"),d.Q6J("src",r.post.imgUrl,d.LSH)}}function MQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",10)(1,"div",11)(2,"button",12),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return i.isFilterMediaShown=!1,d.KtG(i.isSelectMediaShown=!0)}),d.O4$(),d.TgZ(3,"svg",13),d._UZ(4,"line",14)(5,"polyline",15),d.qZA()(),d.kcU(),d.TgZ(6,"button",16),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return i.isFilterMediaShown=!1,d.KtG(i.isFormMediaShown=!0)}),d._uU(7," Next "),d.qZA()(),d.TgZ(8,"article",17),d._UZ(9,"img",18),d.qZA(),d.TgZ(10,"div",19),d.YNc(11,AQ,4,8,"article",20),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(9),d.Tol(t.post.filterSelected),d.s9C("src",t.post.imgUrl,d.LSH),d.xp6(2),d.Q6J("ngForOf",t.filterPreviews)}}function xQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",23)(1,"div",11)(2,"button",12),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return i.isFormMediaShown=!1,d.KtG(i.isFilterMediaShown=!0)}),d.O4$(),d.TgZ(3,"svg",13),d._UZ(4,"line",14)(5,"polyline",15),d.qZA()(),d.kcU(),d.TgZ(6,"button",24),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onCreatePost())}),d._uU(7," Share "),d.qZA()(),d.TgZ(8,"form")(9,"div",25),d._UZ(10,"img",26),d.TgZ(11,"textarea",27),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.post.content=i)}),d.qZA()()()()}if(2&n){const t=d.oxw();d.xp6(10),d.Tol(t.post.filterSelected),d.Q6J("src",t.post.imgUrl,d.LSH),d.xp6(1),d.Q6J("ngModel",t.post.content)}}let PQ=(()=>{class n{constructor(t,r){this.postService=t,this.router=r,this.isSelectMediaShown=!0,this.isFilterMediaShown=!1,this.isFormMediaShown=!1,this.filterPreviews=[{name:"Normal",value:"normal"},{name:"Paris",value:"paris"},{name:"Los Angeles",value:"los-angeles"},{name:"Oslo",value:"oslo"},{name:"Abu Dhabi",value:"abu-dhabi"},{name:"Tokyo",value:"tokyo"}],this.post={_id:"",creatorFullName:"",creatorId:"",createdAt:0,imgUrl:"",content:"",likedByUsers:[],comments:[],filterSelected:"normal"}}onMediaSelected(t){var r=this;return(0,j.Z)(function*(){try{const i=yield r.postService.uploadMedia();i?r.post.imgUrl=i:console.error(null),r.isSelectMediaShown=!1,r.isFilterMediaShown=!0}catch(i){console.error("Error:",i)}})()}onSelectFilterPreview(t){this.post.filterSelected=t}onCreatePost(){var t=this;return(0,j.Z)(function*(){yield t.postService.createPost(t.post),yield t.router.navigateByUrl("/")})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(ey),d.Y36(rr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["create-post-page"]],hostAttrs:[1,"page-cmp-layout"],decls:4,vars:3,consts:[[1,"create-post-page"],["class","select-media",4,"ngIf"],["class","filter-media",4,"ngIf"],["class","form-media",4,"ngIf"],[1,"select-media"],[3,"click"],["aria-label","Icon to represent media such as images or videos","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","77","role","img","viewBox","0 0 97.6 77.3","width","96",1,"x1lliihq","x1n2onr6"],["d","M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z","fill","currentColor"],["d","M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z","fill","currentColor"],["d","M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z","fill","currentColor"],[1,"filter-media"],[1,"actions"],["title","Back",1,"btn-back",3,"click"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["title","Next",1,"btn-next",3,"click"],[1,"media-preview"],["alt","media preview",3,"src"],[1,"filter-list"],["class","filter-preview",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"filter-preview",3,"ngClass","click"],[3,"src","alt"],[1,"form-media"],["title","Share",1,"btn-share",3,"click"],[1,"content"],["alt","post image",3,"src"],["name","content","placeholder","Write your caption...",3,"ngModel","ngModelChange"]],template:function(r,i){1&r&&(d.TgZ(0,"section",0),d.YNc(1,DQ,9,0,"div",1),d.YNc(2,MQ,12,4,"div",2),d.YNc(3,xQ,12,4,"div",3),d.qZA()),2&r&&(d.xp6(1),d.Q6J("ngIf",i.isSelectMediaShown),d.xp6(1),d.Q6J("ngIf",i.isFilterMediaShown),d.xp6(1),d.Q6J("ngIf",i.isFormMediaShown))},dependencies:[wa,Go,pi,CM,ty,dM,hM,FI,ry],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{height:100%;width:100%;position:relative}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f5f5f5;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1em;width:100%;height:100%;font-size:17px;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;gap:2em;position:relative}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:3.5em;z-index:10;background-color:#000}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 50px);display:flex;align-items:center;gap:1em;overflow-x:auto;white-space:nowrap}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.4em;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d3d3d369;font-size:12px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:5em;height:5em;aspect-ratio:1/1}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:3.5em;z-index:10;background-color:#000}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7em;height:70px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:unset;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100%;resize:none;background-color:transparent;border:none;color:#f5f5f5;font-size:16px;font-family:Arial,sans-serif}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#f5f5f5d9;font-style:italic;font-size:14px;font-family:Arial,sans-serif;font-weight:400}"]})}return n})();const LI=()=>!!(0,d.f3M)(Ss).getLoggedInUser()||(console.error("LoggedInUser doesnt exists - no access to that page!"),(0,d.f3M)(rr).navigateByUrl("/login"),!1),OQ=[{path:"",component:pQ,canActivate:[LI]},{path:"login",component:_Q,canActivate:[()=>!(0,d.f3M)(Ss).getLoggedInUser()||(console.error("LoggedInUser exists - no access to login page!"),(0,d.f3M)(rr).navigateByUrl("/"),!1)]},{path:"message",component:yQ,canActivate:[LI]},{path:"notification",component:TQ,canActivate:[LI]},{path:"create-post",component:PQ,canActivate:[LI]},{path:"profile",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["profile"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(d.TgZ(0,"p"),d._uU(1,"profile works!"),d.qZA())}})}return n})(),canActivate:[LI]}];let NQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[$g.forRoot(OQ,{useHash:!0}),$g]})}return n})();function RQ(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",31),d.qZA())}function kQ(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",32),d.qZA())}function FQ(n,e){if(1&n&&d._UZ(0,"img",33),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function LQ(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",34),d._UZ(1,"path",35)(2,"circle",36),d.qZA())}function UQ(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",37)(1,"ul")(2,"li",38),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const VQ=function(){return{exact:!0}};function BQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"div",3),d.O4$(),d.TgZ(3,"svg",4),d._UZ(4,"path",5),d.qZA()(),d.kcU(),d.TgZ(5,"nav")(6,"ul")(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8),d.qZA()(),d.kcU(),d.TgZ(10,"li",9),d.O4$(),d.TgZ(11,"svg",10),d._UZ(12,"path",11)(13,"path",12),d.qZA()(),d.kcU(),d.TgZ(14,"li",13,14),d.YNc(16,RQ,2,0,"svg",15),d.YNc(17,kQ,2,0,"svg",15),d.qZA(),d.TgZ(18,"li",16),d.O4$(),d.TgZ(19,"svg",17),d._UZ(20,"path",18)(21,"line",19)(22,"line",20),d.qZA()(),d.kcU(),d.TgZ(23,"li",21),d.YNc(24,FQ,1,1,"img",22),d.YNc(25,LQ,3,0,"ng-template",null,23,d.W1O),d.qZA()()()(),d.TgZ(27,"div",24),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),d.O4$(),d.TgZ(28,"svg",25),d._UZ(29,"line",26)(30,"line",27)(31,"line",28),d.qZA(),d.YNc(32,UQ,4,0,"div",29),d.qZA()()}if(2&n){const t=d.MAs(15),r=d.MAs(26),i=d.oxw();d.xp6(7),d.Q6J("routerLinkActiveOptions",d.DdM(6,VQ)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",i.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",i.isExtraMenuOpen)}}let jQ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,j.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Ss),d.Y36(rr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&d.YNc(0,BQ,33,7,"section",0),2&r&&d.Q6J("ngIf",i.user&&i.user.user)},dependencies:[pi,jg,ef],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;z-index:99;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.19);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:55px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function $Q(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",28),d.qZA())}function HQ(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",29),d.qZA())}function zQ(n,e){if(1&n&&d._UZ(0,"img",30),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function GQ(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",31),d._UZ(1,"path",32)(2,"circle",33),d.qZA())}function WQ(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",34)(1,"ul")(2,"li",35),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const qQ=function(){return{exact:!0}};function ZQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),d.O4$(),d.TgZ(5,"svg",4),d._UZ(6,"path",5),d.qZA()(),d.kcU(),d.TgZ(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8)(10,"path",9),d.qZA()(),d.kcU(),d.TgZ(11,"li",10,11),d.YNc(13,$Q,2,0,"svg",12),d.YNc(14,HQ,2,0,"svg",12),d.qZA(),d.TgZ(15,"li",13),d.O4$(),d.TgZ(16,"svg",14),d._UZ(17,"path",15)(18,"line",16)(19,"line",17),d.qZA()(),d.kcU(),d.TgZ(20,"li",18),d.YNc(21,zQ,1,1,"img",19),d.YNc(22,GQ,3,0,"ng-template",null,20,d.W1O),d.qZA(),d.TgZ(24,"li",21),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),d.O4$(),d.TgZ(25,"svg",22),d._UZ(26,"line",23)(27,"line",24)(28,"line",25),d.qZA(),d.YNc(29,WQ,4,0,"div",26),d.qZA()()()()()}if(2&n){const t=d.MAs(12),r=d.MAs(23),i=d.oxw();d.xp6(4),d.Q6J("routerLinkActiveOptions",d.DdM(6,qQ)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",i.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",i.isExtraMenuOpen)}}let KQ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,j.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Ss),d.Y36(rr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&d.YNc(0,ZQ,30,7,"section",0),2&r&&d.Q6J("ngIf",i.user&&i.user.user)},dependencies:[pi,jg,ef],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;z-index:99;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#262626;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})(),YQ=(()=>{class n{constructor(t){this.router=t}onClickLogo(){this.router.navigateByUrl("/")}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(rr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-header-mobile"]],decls:4,vars:0,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"]],template:function(r,i){1&r&&(d.TgZ(0,"header",0)(1,"div",1),d.NdJ("click",function(){return i.onClickLogo()}),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()()())},styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:99;top:0;border-block-end:1px solid rgba(255,255,255,.27);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}"]})}return n})();function QQ(n,e){1&n&&d._UZ(0,"router-outlet")}function JQ(n,e){1&n&&d._UZ(0,"app-header-mobile")}function XQ(n,e){1&n&&d._UZ(0,"aside-menu")}function eJ(n,e){1&n&&(d.TgZ(0,"main",2),d._UZ(1,"router-outlet"),d.qZA())}function tJ(n,e){1&n&&d._UZ(0,"menu-mobile")}let nJ=(()=>{class n{constructor(t,r){this.router=t,this.postService=r,this.routerUrl=this.router.url}ngOnInit(){var t=this;return(0,j.Z)(function*(){t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof Qs&&(t.routerUrl=t.router.url)})})()}ngOnDestroy(){this.routerUrlSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(rr),d.Y36(ey))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:7,consts:[[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,i){1&r&&(d.TgZ(0,"section"),d.YNc(1,QQ,1,0,"router-outlet",0),d.YNc(2,JQ,1,0,"app-header-mobile",0),d.YNc(3,XQ,1,0,"aside-menu",0),d.YNc(4,eJ,2,0,"main",1),d.YNc(5,tJ,1,0,"menu-mobile",0),d.qZA()),2&r&&(d.Tol("/login"===i.routerUrl?"main-app login-layout":"main-app app-layout"),d.xp6(1),d.Q6J("ngIf","/login"===i.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==i.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==i.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==i.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==i.routerUrl))},dependencies:[pi,Bh,jQ,KQ,YQ]})}return n})();class wM{}class IM{}class hc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof hc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new hc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof hc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(f=>-1===a.indexOf(f)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class rJ{encodeKey(e){return b9(e)}encodeValue(e){return b9(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const sJ=/%(\d[a-f0-9])/gi,oJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function b9(n){return encodeURIComponent(n).replace(sJ,(e,t)=>oJ[t]??e)}function EM(n){return`${n}`}class Ld{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new rJ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function iJ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],g=t.get(l)||[];g.push(f),t.set(l,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(EM):[EM(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ld({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(EM(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(EM(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class aJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function T9(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function D9(n){return typeof Blob<"u"&&n instanceof Blob}function S9(n){return typeof FormData<"u"&&n instanceof FormData}class UI{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function cJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new hc),this.context||(this.context=new aJ),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+l}}else this.params=new Ld,this.urlWithParams=t}serializeBody(){return null===this.body?null:T9(this.body)||D9(this.body)||S9(this.body)||function lJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ld?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||S9(this.body)?null:D9(this.body)?this.body.type||null:T9(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ld?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,y=e.params||this.params;const E=e.context??this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((T,A)=>T.set(A,e.setHeaders[A]),g)),e.setParams&&(y=Object.keys(e.setParams).reduce((T,A)=>T.set(A,e.setParams[A]),y)),new UI(t,r,a,{params:y,headers:g,context:E,reportProgress:f,responseType:i,withCredentials:l})}}var iy=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(iy||{});class e4{constructor(e,t=200,r="OK"){this.headers=e.headers||new hc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class t4 extends e4{constructor(e={}){super(e),this.type=iy.ResponseHeader}clone(e={}){return new t4({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class sy extends e4{constructor(e={}){super(e),this.type=iy.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new sy({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class A9 extends e4{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function n4(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let uJ=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof UI)a=t;else{let g,y;g=i.headers instanceof hc?i.headers:new hc(i.headers),i.params&&(y=i.params instanceof Ld?i.params:new Ld({fromObject:i.params})),a=new UI(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=(0,dt.of)(a).pipe(wo(g=>this.handler.handle(g)));if(t instanceof UI||"events"===i.observe)return l;const f=l.pipe(wr(g=>g instanceof sy));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe((0,wt.U)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ld).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,n4(i,r))}post(t,r,i={}){return this.request("POST",t,n4(i,r))}put(t,r,i={}){return this.request("PUT",t,n4(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(wM))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function P9(n,e){return e(n)}function hJ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const pJ=new d.OlP(""),VI=new d.OlP(""),O9=new d.OlP("");function gJ(){let n=null;return(e,t)=>{null===n&&(n=((0,d.f3M)(pJ,{optional:!0})??[]).reduceRight(hJ,P9));const r=(0,d.f3M)(d.HDt),i=r.add();return n(e,t).pipe(ka(()=>r.remove(i)))}}let N9=(()=>{class n extends wM{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,d.f3M)(d.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(VI),...this.injector.get(O9,[])]));this.chain=i.reduceRight((a,l)=>function fJ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(a,l,this.injector),P9)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(ka(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(IM),d.LFG(d.lqb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const vJ=/^\)\]\}',?\n/;let k9=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new d.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,pn.D)(r.\u0275loadImpl()):(0,dt.of)(null)).pipe((0,Tn.w)(()=>new Gr.y(a=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((Q,J)=>l.setRequestHeader(Q,J.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Q=t.detectContentTypeHeader();null!==Q&&l.setRequestHeader("Content-Type",Q)}if(t.responseType){const Q=t.responseType.toLowerCase();l.responseType="json"!==Q?Q:"text"}const f=t.serializeBody();let g=null;const y=()=>{if(null!==g)return g;const Q=l.statusText||"OK",J=new hc(l.getAllResponseHeaders()),we=function CJ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return g=new t4({headers:J,status:l.status,statusText:Q,url:we}),g},E=()=>{let{headers:Q,status:J,statusText:we,url:He}=y(),Ne=null;204!==J&&(Ne=typeof l.response>"u"?l.responseText:l.response),0===J&&(J=Ne?200:0);let Ye=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof Ne){const mt=Ne;Ne=Ne.replace(vJ,"");try{Ne=""!==Ne?JSON.parse(Ne):null}catch(At){Ne=mt,Ye&&(Ye=!1,Ne={error:At,text:Ne})}}Ye?(a.next(new sy({body:Ne,headers:Q,status:J,statusText:we,url:He||void 0})),a.complete()):a.error(new A9({error:Ne,headers:Q,status:J,statusText:we,url:He||void 0}))},T=Q=>{const{url:J}=y(),we=new A9({error:Q,status:l.status||0,statusText:l.statusText||"Unknown Error",url:J||void 0});a.error(we)};let A=!1;const R=Q=>{A||(a.next(y()),A=!0);let J={type:iy.DownloadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),"text"===t.responseType&&l.responseText&&(J.partialText=l.responseText),a.next(J)},G=Q=>{let J={type:iy.UploadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),a.next(J)};return l.addEventListener("load",E),l.addEventListener("error",T),l.addEventListener("timeout",T),l.addEventListener("abort",T),t.reportProgress&&(l.addEventListener("progress",R),null!==f&&l.upload&&l.upload.addEventListener("progress",G)),l.send(f),a.next({type:iy.Sent}),()=>{l.removeEventListener("error",T),l.removeEventListener("abort",T),l.removeEventListener("load",E),l.removeEventListener("timeout",T),t.reportProgress&&(l.removeEventListener("progress",R),null!==f&&l.upload&&l.upload.removeEventListener("progress",G)),l.readyState!==l.DONE&&l.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(fs))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const r4=new d.OlP("XSRF_ENABLED"),F9=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),L9=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class U9{}let EJ=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ca(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee),d.LFG(d.Lbi),d.LFG(F9))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function bJ(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(r4)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(U9).getToken(),i=(0,d.f3M)(L9);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Ud=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ud||{});function TJ(...n){const e=[uJ,k9,N9,{provide:wM,useExisting:N9},{provide:IM,useExisting:k9},{provide:VI,useValue:bJ,multi:!0},{provide:r4,useValue:!0},{provide:U9,useClass:EJ}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const V9=new d.OlP("LEGACY_INTERCEPTOR_FN");function DJ(){return function Dp(n,e){return{\u0275kind:n,\u0275providers:e}}(Ud.LegacyInterceptors,[{provide:V9,useFactory:gJ},{provide:VI,useExisting:V9,multi:!0}])}let SJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[TJ(DJ())]})}return n})();class i4{constructor(e){return e}}class TM{constructor(){return ec("auth")}}const s4=new d.OlP("angularfire2.auth-instances");function RJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new i4(r)}}const kJ={provide:TM,deps:[[new d.FiY,s4]]},FJ={provide:i4,useFactory:function NJ(n,e){const t=vl("auth",n,e);return t&&new i4(t)},deps:[[new d.FiY,s4],Pl]};let LJ=(()=>{class n{constructor(){(0,ln.registerVersion)("angularfire",od.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[FJ,kJ]}),n})();function UJ(n,...e){return{ngModule:LJ,providers:[{provide:s4,useFactory:RJ(n),multi:!0,deps:[d.R0b,d.zs3,Uo,J_,[new d.FiY,Ip],...e]}]}}const VJ=ud(v7.o,!0);class o4{constructor(e){return e}}const j9="firestore",a4=new d.OlP("angularfire2.firestore-instances");function $J(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new o4(r)}}const HJ={provide:class BJ{constructor(){return ec(j9)}},deps:[[new d.FiY,a4]]},zJ={provide:o4,useFactory:function jJ(n,e){const t=vl(j9,n,e);return t&&new o4(t)},deps:[[new d.FiY,a4],Pl]};let GJ=(()=>{class n{constructor(){(0,ln.registerVersion)("angularfire",od.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[zJ,HJ]}),n})();function WJ(n,...e){return{ngModule:GJ,providers:[{provide:a4,useFactory:$J(n),multi:!0,deps:[d.R0b,d.zs3,Uo,J_,[new d.FiY,TM],[new d.FiY,Ip],...e]}]}}const qJ=ud(wq,!0),$9="@firebase/database";let c4="";class KJ{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,z.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class YJ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const z9=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KJ(e)}}catch{}return new YJ},Sp=z9("localStorage"),l4=z9("sessionStorage"),oy=new Ui.Yd("@firebase/database"),G9=function(){let n=1;return function(){return n++}}(),W9=function(n){const e=(0,z.dS)(n),t=new z.gQ;t.update(e);const r=t.digest();return z.US.encodeByteArray(r)},BI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=BI.apply(null,r):e+="object"==typeof r?(0,z.Wl)(r):r,e+=" "}return e};let Ap=null,q9=!0;const di=function(...n){if(!0===q9&&(q9=!1,null===Ap&&!0===l4.get("logging_enabled")&&function(n,e){(0,z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(oy.logLevel=Ui.in.VERBOSE,Ap=oy.log.bind(oy),e&&l4.set("logging_enabled",!0)):"function"==typeof n?Ap=n:(Ap=null,l4.remove("logging_enabled"))}(!0)),Ap){const e=BI.apply(null,n);Ap(e)}},jI=function(n){return function(...e){di(n,...e)}},u4=function(...n){const e="FIREBASE INTERNAL ERROR: "+BI(...n);oy.error(e)},fc=function(...n){const e=`FIREBASE FATAL ERROR: ${BI(...n)}`;throw oy.error(e),new Error(e)},qi=function(...n){const e="FIREBASE WARNING: "+BI(...n);oy.warn(e)},DM=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Vd="[MIN_NAME]",Ol="[MAX_NAME]",Mp=function(n,e){if(n===e)return 0;if(n===Vd||e===Ol)return-1;if(e===Vd||n===Ol)return 1;{const t=Q9(n),r=Q9(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},XJ=function(n,e){return n===e?0:n<e?-1:1},$I=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,z.Wl)(e))},d4=function(n){if("object"!=typeof n||null===n)return(0,z.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,z.Wl)(e[r]),t+=":",t+=d4(n[e[r]]);return t+="}",t},K9=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Y9=function(n){(0,z.hu)(!DM(n),"Invalid JSON number");const r=1023;let i,a,l,f,g;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)y.push(a%2?1:0),a=Math.floor(a/2);y.push(i?1:0),y.reverse();const E=y.join("");let T="";for(g=0;g<64;g+=8){let A=parseInt(E.substr(g,8),2).toString(16);1===A.length&&(A="0"+A),T+=A}return T.toLowerCase()},rX=new RegExp("^-?(0*)\\d{1,10}$"),Q9=function(n){if(rX.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ay=function(n){try{n()}catch(e){setTimeout(()=>{throw qi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},HI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class aX{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){qi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class cX{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(di("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qi(e)}}let zI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const n$=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,s$="websocket",o$="long_polling";class f4{constructor(e,t,r,i,a=!1,l="",f=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Sp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Sp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function a$(n,e,t){let r;if((0,z.hu)("string"==typeof e,"typeof type must == string"),(0,z.hu)("object"==typeof t,"typeof params must == object"),e===s$)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==o$)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function lX(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return hi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class uX{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,z.p$)(this.counters_)}}const p4={},g4={};function m4(n){const e=n.toString();return p4[e]||(p4[e]=new uX),p4[e]}class hX{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ay(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Bd{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jI(e),this.stats_=m4(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),a$(t,o$,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new hX(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _4((...a)=>{const[l,f,g,y,E]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&n$.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bd.forceAllow_=!0}static forceDisallow(){Bd.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!Bd.forceAllow_&&(Bd.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,z.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,z.h$)(t),i=K9(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,z.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class _4{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=G9(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=_4.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){di("frame writing exception"),f.stack&&di(f.stack),di(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||di("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{di("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let AM=null;typeof MozWebSocket<"u"?AM=MozWebSocket:typeof WebSocket<"u"&&(AM=WebSocket);let cy=(()=>{class n{constructor(t,r,i,a,l,f,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jI(this.connId),this.stats_=m4(r),this.connURL=n.connectionURL_(r,f,g,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&n$.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),a$(t,s$,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Sp.set("previous_websocket_failure",!0);try{let i;if((0,z.Yr)()){i={headers:{"User-Agent":`Firebase/5/${c4}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new AM(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==AM&&!n.forceDisallow_}static previouslyFailed(){return Sp.isInMemoryStorage||!0===Sp.get("previous_websocket_failure")}markConnectionHealthy(){Sp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,z.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=K9(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),p$=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Bd,cy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=cy&&cy.isAvailable();let i=r&&!cy.previouslyFailed();if(t.webSocketOnly&&(r||qi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[cy];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class w${constructor(e,t,r,i,a,l,f,g,y,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jI("c:"+this.id+":"),this.transportManager_=new p$(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=HI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=$I("t",e),r=$I("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=$I("t",e),r=$I("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=$I("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?u4("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):u4("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&qi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),HI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):HI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Sp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class I${put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class E${constructor(e){this.allowedEvents_=e,this.listeners_={},(0,z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class MM extends E${constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new MM}getInitialEvent(e){return(0,z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class gn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function un(){return new gn("")}function jt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function jd(n){return n.pieces_.length-n.pieceNum_}function Sn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new gn(n.pieces_,e)}function v4(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function GI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function D$(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new gn(e,0)}function Qn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new gn(t,0)}function $t(n){return n.pieceNum_>=n.pieces_.length}function cs(n,e){const t=jt(n),r=jt(e);if(null===t)return e;if(t===r)return cs(Sn(n),Sn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function C4(n,e){if(jd(n)!==jd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ho(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(jd(n)>jd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class kX{constructor(e,t){this.errorPrefix_=t,this.parts_=GI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,z.ug)(this.parts_[r]);S$(this)}}function S$(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+xp(n))}function xp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class w4 extends E${constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new w4}getInitialEvent(e){return(0,z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const WI=1e3;let PM,Pp=(()=>{class n extends I${constructor(t,r,i,a,l,f,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=jI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=WI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");w4.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&MM.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,z.Wl)(l)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new z.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const g=f.d;"ok"===f.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const y=g.d,E=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==E&&this.removeListen_(i,a),t.onComplete&&t.onComplete(E,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,z.r3)(t,"w")){const i=(0,z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();qi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,z.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):u4("Unrecognized action received from server: "+(0,z.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=WI,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=WI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=WI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,j.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let g=!1,y=null;const E=function(){y?y.close():(g=!0,a())};t.realtime_={close:E,sendRequest:function(R){(0,z.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(R)}};const A=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[R,G]=yield Promise.all([t.authTokenProvider_.getToken(A),t.appCheckTokenProvider_.getToken(A)]);g?di("getToken() completed but was canceled"):(di("getToken() completed. Creating connection."),t.authToken_=R&&R.accessToken,t.appCheckToken_=G&&G.token,y=new w$(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Q=>{qi(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(R){t.log_("Failed to get token: "+R),g||(t.repoInfo_.nodeAdmin&&qi(R),E())}}})()}interrupt(t){di("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){di("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=WI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>d4(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new gn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){di("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){di("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+c4.replace(/\./g,"-")]=1,(0,z.uI)()?t["framework.cordova"]=1:(0,z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=MM.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zt(e,t)}}class xM{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new zt(Vd,e),i=new zt(Vd,t);return 0!==this.compare(r,i)}minPost(){return zt.MIN}}class x$ extends xM{static get __EMPTY_NODE(){return PM}static set __EMPTY_NODE(e){PM=e}compare(e,t){return Mp(e.name,t.name)}isDefinedOn(e){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zt.MIN}maxPost(){return new zt(Ol,PM)}makePost(e,t){return(0,z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new zt(e,PM)}toString(){return".key"}}const pc=new x$;class OM{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let E4,pa=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??As.EMPTY_NODE,this.right=l??As.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return As.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return As.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class As{constructor(e,t=As.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new As(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,pa.BLACK,null,null))}remove(e){return new As(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,pa.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new OM(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new OM(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new OM(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new OM(this.root_,null,this.comparator_,!0,e)}}function HX(n,e){return Mp(n.name,e.name)}function I4(n,e){return Mp(n,e)}As.EMPTY_NODE=new class $X{copy(e,t,r,i,a){return this}insert(e,t,r){return new pa(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const P$=function(n){return"number"==typeof n?"number:"+Y9(n):"string:"+n},O$=function(n){if(n.isLeafNode()){const e=n.val();(0,z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,z.hu)(n===E4||n.isEmpty(),"priority of unexpected type.");(0,z.hu)(n===E4||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let N$,R$,k$,ly=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),O$(this.priorityNode_)}static set __childrenNodeConstructor(t){N$=t}static get __childrenNodeConstructor(){return N$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return $t(t)?this:".priority"===jt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=jt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,z.hu)(".priority"!==i||1===jd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Sn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+P$(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Y9(this.value_):this.value_,this.lazyHash_=W9(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,z.hu)(a>=0,"Unknown leaf type: "+r),(0,z.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const kn=new class qX extends xM{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Mp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(Ol,new ly("[PRIORITY-POST]",k$))}makePost(e,t){const r=R$(e);return new zt(t,new ly("[PRIORITY-POST]",r))}toString(){return".priority"}},ZX=Math.log(2);class KX{constructor(e){this.count=parseInt(Math.log(e+1)/ZX,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const NM=function(n,e,t,r){n.sort(e);const i=function(g,y){const E=y-g;let T,A;if(0===E)return null;if(1===E)return T=n[g],A=t?t(T):T,new pa(A,T.node,pa.BLACK,null,null);{const R=parseInt(E/2,10)+g,G=i(g,R),Q=i(R+1,y);return T=n[R],A=t?t(T):T,new pa(A,T.node,pa.BLACK,G,Q)}},f=function(g){let y=null,E=null,T=n.length;const A=function(G,Q){const J=T-G,we=T;T-=G;const He=i(J+1,we),Ne=n[J],Ye=t?t(Ne):Ne;R(new pa(Ye,Ne.node,Q,null,He))},R=function(G){y?(y.left=G,y=G):(E=G,y=G)};for(let G=0;G<g.count;++G){const Q=g.nextBitIsOne(),J=Math.pow(2,g.count-(G+1));Q?A(J,pa.BLACK):(A(J,pa.BLACK),A(J,pa.RED))}return E}(new KX(n.length));return new As(r||e,f)};let b4;const uy={};class Nl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,z.hu)(uy&&kn,"ChildrenNode.ts has not been loaded"),b4=b4||new Nl({".priority":uy},{".priority":kn}),b4}get(e){const t=(0,z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof As?t:null}hasIndex(e){return(0,z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,z.hu)(e!==pc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(zt.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?NM(r,e.getCompare()):uy;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const E=Object.assign({},this.indexes_);return E[g]=f,new Nl(E,y)}addToIndexes(e,t){const r=(0,z.UI)(this.indexes_,(i,a)=>{const l=(0,z.DV)(this.indexSet_,a);if((0,z.hu)(l,"Missing index implementation for "+a),i===uy){if(l.isDefinedOn(e.node)){const f=[],g=t.getIterator(zt.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&f.push(y),y=g.getNext();return f.push(e),NM(f,l.getCompare())}return uy}{const f=t.get(e.name);let g=i;return f&&(g=g.remove(new zt(e.name,f))),g.insert(e,e.node)}});return new Nl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,z.UI)(this.indexes_,i=>{if(i===uy)return i;{const a=t.get(e.name);return a?i.remove(new zt(e.name,a)):i}});return new Nl(r,this.indexSet_)}}let qI,Pt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&O$(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qI||(qI=new n(new As(I4),null,Nl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qI}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?qI:r}}getChild(t){const r=jt(t);return null===r?this:this.getImmediateChild(r).getChild(Sn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new zt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?qI:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=jt(t);if(null===i)return r;{(0,z.hu)(".priority"!==jt(t)||1===jd(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Sn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(kn,(f,g)=>{r[f]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const g in r)f[g]=r[g];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+P$(this.getPriority().val())+":"),this.forEachChild(kn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":W9(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new zt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ZI?-1:0}withIndex(t){if(t===pc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===pc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(kn),a=r.getIterator(kn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===pc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ZI=new class YX extends Pt{constructor(){super(new As(I4),Pt.EMPTY_NODE,Nl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Pt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(zt,{MIN:{value:new zt(Vd,Pt.EMPTY_NODE)},MAX:{value:new zt(Ol,ZI)}}),x$.__EMPTY_NODE=Pt.EMPTY_NODE,ly.__childrenNodeConstructor=Pt,function zX(n){E4=n}(ZI),function WX(n){k$=n}(ZI);const QX=!0;function or(n,e=null){if(null===n)return Pt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ly(n,or(e));if(n instanceof Array||!QX){let t=Pt.EMPTY_NODE;return hi(n,(r,i)=>{if((0,z.r3)(n,r)&&"."!==r.substring(0,1)){const a=or(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(or(e))}{const t=[];let r=!1;if(hi(n,(l,f)=>{if("."!==l.substring(0,1)){const g=or(f);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new zt(l,g)))}}),0===t.length)return Pt.EMPTY_NODE;const a=NM(t,HX,l=>l.name,I4);if(r){const l=NM(t,kn.getCompare());return new Pt(a,or(e),new Nl({".priority":l},{".priority":kn}))}return new Pt(a,or(e),Nl.Default)}}!function GX(n){R$=n}(or);class T4 extends xM{constructor(e){super(),this.indexPath_=e,(0,z.hu)(!$t(e)&&".priority"!==jt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Mp(e.name,t.name):a}makePost(e,t){const r=or(e),i=Pt.EMPTY_NODE.updateChild(this.indexPath_,r);return new zt(t,i)}maxPost(){const e=Pt.EMPTY_NODE.updateChild(this.indexPath_,ZI);return new zt(Ol,e)}toString(){return GI(this.indexPath_,0).join("/")}}const D4=new class JX extends xM{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Mp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,t){const r=or(e);return new zt(t,r)}toString(){return".value"}};function YI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class A4{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ol}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kn}copy(){const e=new A4;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function L$(n){const e={};if(n.isDefault())return e;let t;if(n.index_===kn?t="$priority":n.index_===D4?t="$value":n.index_===pc?t="$key":((0,z.hu)(n.index_ instanceof T4,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,z.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,z.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,z.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function U$(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==kn&&(e.i=n.index_.toString()),e}class kM extends I${constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=jI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=kM.getListenId_(e,r),f={};this.listens_[l]=f;const g=L$(e._queryParams);this.restRequest_(a+".json",g,(y,E)=>{let T=E;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(a,T,!1,r),(0,z.DV)(this.listens_,l)===f){let A;A=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(A,null)}})}unlisten(e,t){const r=kM.getListenId_(e,t);delete this.listens_[r]}get(e){const t=L$(e._queryParams),r=e._path.toString(),i=new z.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,z.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let g=null;if(f.status>=200&&f.status<300){try{g=(0,z.cI)(f.responseText)}catch{qi("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,g)}else 401!==f.status&&404!==f.status&&qi("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class oee{constructor(){this.rootNode_=Pt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function FM(){return{value:null,children:new Map}}function hy(n,e,t){if($t(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=jt(e);n.children.has(r)||n.children.set(r,FM()),hy(n.children.get(r),e=Sn(e),t)}}function O4(n,e,t){null!==n.value?t(e,n.value):function aee(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{O4(i,new gn(e.toString()+"/"+r),t)})}class cee{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&hi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class dee{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new cee(e);const r=1e4+2e4*Math.random();HI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;hi(e,(i,a)=>{a>0&&(0,z.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),HI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var gc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(gc||{});function k4(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class LM{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=gc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if($t(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new gn(e));return new LM(un(),t,this.revert)}}return(0,z.hu)(jt(this.path)===e,"operationForChild called for unrelated child."),new LM(Sn(this.path),this.affectedTree,this.revert)}}class Op{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=gc.OVERWRITE}operationForChild(e){return $t(this.path)?new Op(this.source,un(),this.snap.getImmediateChild(e)):new Op(this.source,Sn(this.path),this.snap)}}class fy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=gc.MERGE}operationForChild(e){if($t(this.path)){const t=this.children.subtree(new gn(e));return t.isEmpty()?null:t.value?new Op(this.source,un(),t.value):new fy(this.source,un(),t)}return(0,z.hu)(jt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new fy(this.source,Sn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class $d{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($t(e))return this.isFullyInitialized()&&!this.filtered_;const t=jt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function XI(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,g)=>function gee(n,e,t){if(null==e.childName||null==t.childName)throw(0,z.g5)("Should only compare child_ events.");const r=new zt(e.childName,e.snapshotNode),i=new zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,g)),l.forEach(f=>{const g=function pee(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(y=>{y.respondsTo(f.type)&&e.push(y.createEvent(g,n.query_))})})}function UM(n,e){return{eventCache:n,serverCache:e}}function eE(n,e,t,r){return UM(new $d(e,t,r),n.serverCache)}function B$(n,e,t,r){return UM(n.eventCache,new $d(e,t,r))}function VM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Np(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let F4;class Fn{constructor(e,t=(()=>(F4||(F4=new As(XJ)),F4))()){this.value=e,this.children=t}static fromObject(e){let t=new Fn(null);return hi(e,(r,i)=>{t=t.set(new gn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:un(),value:this.value};if($t(e))return null;{const r=jt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Sn(e),t);return null!=a?{path:Qn(new gn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($t(e))return this;{const t=jt(e),r=this.children.get(t);return null!==r?r.subtree(Sn(e)):new Fn(null)}}set(e,t){if($t(e))return new Fn(t,this.children);{const r=jt(e),a=(this.children.get(r)||new Fn(null)).set(Sn(e),t),l=this.children.insert(r,a);return new Fn(this.value,l)}}remove(e){if($t(e))return this.children.isEmpty()?new Fn(null):new Fn(null,this.children);{const t=jt(e),r=this.children.get(t);if(r){const i=r.remove(Sn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Fn(null):new Fn(this.value,a)}return this}}get(e){if($t(e))return this.value;{const t=jt(e),r=this.children.get(t);return r?r.get(Sn(e)):null}}setTree(e,t){if($t(e))return t;{const r=jt(e),a=(this.children.get(r)||new Fn(null)).setTree(Sn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Fn(this.value,l)}}fold(e){return this.fold_(un(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Qn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,un(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if($t(e))return null;{const a=jt(e),l=this.children.get(a);return l?l.findOnPath_(Sn(e),Qn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,un(),t)}foreachOnPath_(e,t,r){if($t(e))return this;{this.value&&r(t,this.value);const i=jt(e),a=this.children.get(i);return a?a.foreachOnPath_(Sn(e),Qn(t,i),r):new Fn(null)}}foreach(e){this.foreach_(un(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Qn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ga{constructor(e){this.writeTree_=e}static empty(){return new ga(new Fn(null))}}function tE(n,e,t){if($t(e))return new ga(new Fn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=cs(i,e);return a=a.updateChild(l,t),new ga(n.writeTree_.set(i,a))}{const i=new Fn(t),a=n.writeTree_.setTree(e,i);return new ga(a)}}}function L4(n,e,t){let r=n;return hi(t,(i,a)=>{r=tE(r,Qn(e,i),a)}),r}function j$(n,e){if($t(e))return ga.empty();{const t=n.writeTree_.setTree(e,new Fn(null));return new ga(t)}}function U4(n,e){return null!=Rp(n,e)}function Rp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(cs(t.path,e)):null}function $$(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(kn,(r,i)=>{e.push(new zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new zt(r,i.value))}),e}function Hd(n,e){if($t(e))return n;{const t=Rp(n,e);return new ga(null!=t?new Fn(t):n.writeTree_.subtree(e))}}function V4(n){return n.writeTree_.isEmpty()}function py(n,e){return H$(un(),n.writeTree_,e)}function H$(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,z.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=H$(Qn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Qn(n,".priority"),r)),t}}function BM(n,e){return Z$(e,n)}function wee(n,e){if(n.snap)return Ho(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ho(Qn(n.path,t),e))return!0;return!1}function Eee(n){return n.visible}function z$(n,e,t){let r=ga.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)Ho(t,l)?(f=cs(t,l),r=tE(r,f,a.snap)):Ho(l,t)&&(f=cs(l,t),r=tE(r,un(),a.snap.getChild(f)));else{if(!a.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(Ho(t,l))f=cs(t,l),r=L4(r,f,a.children);else if(Ho(l,t))if(f=cs(l,t),$t(f))r=L4(r,un(),a.children);else{const g=(0,z.DV)(a.children,jt(f));if(g){const y=g.getChild(Sn(f));r=tE(r,un(),y)}}}}}return r}function G$(n,e,t,r,i){if(r||i){const a=Hd(n.visibleWrites,e);return!i&&V4(a)?t:i||null!=t||U4(a,un())?py(z$(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Ho(y.path,e)||Ho(e,y.path))},e),t||Pt.EMPTY_NODE):null}{const a=Rp(n.visibleWrites,e);if(null!=a)return a;{const l=Hd(n.visibleWrites,e);return V4(l)?t:null!=t||U4(l,un())?py(l,t||Pt.EMPTY_NODE):null}}}function jM(n,e,t,r){return G$(n.writeTree,n.treePath,e,t,r)}function B4(n,e){return function bee(n,e,t){let r=Pt.EMPTY_NODE;const i=Rp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(kn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Hd(n.visibleWrites,e);return t.forEachChild(kn,(l,f)=>{const g=py(Hd(a,new gn(l)),f);r=r.updateImmediateChild(l,g)}),$$(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return $$(Hd(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function W$(n,e,t,r){return function Tee(n,e,t,r,i){(0,z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Qn(e,t);if(U4(n.visibleWrites,a))return null;{const l=Hd(n.visibleWrites,a);return V4(l)?i.getChild(t):py(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function $M(n,e){return function See(n,e){return Rp(n.visibleWrites,e)}(n.writeTree,Qn(n.treePath,e))}function j4(n,e,t){return function Dee(n,e,t,r){const i=Qn(e,t),a=Rp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?py(Hd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function q$(n,e){return Z$(Qn(n.treePath,e),n.writeTree)}function Z$(n,e){return{treePath:n,writeTree:e}}class Pee{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,YI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function KI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function dy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,YI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const K$=new class Oee{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class $4{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new $d(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return j4(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Np(this.viewCache_),a=function xee(n,e,t,r,i,a){return function Aee(n,e,t,r,i,a,l){let f;const g=Hd(n.visibleWrites,e),y=Rp(g,un());if(null!=y)f=y;else{if(null==t)return[];f=py(g,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const E=[],T=l.getCompare(),A=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let R=A.getNext();for(;R&&E.length<i;)0!==T(R,r)&&E.push(R),R=A.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Y$(n,e,t,r,i,a){const l=e.eventCache;if(null!=$M(r,t))return e;{let f,g;if($t(t))if((0,z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Np(e),T=B4(r,y instanceof Pt?y:Pt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const y=jM(r,Np(e));f=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const y=jt(t);if(".priority"===y){(0,z.hu)(1===jd(t),"Can't have a priority with additional path components");const E=l.getNode();g=e.serverCache.getNode();const T=W$(r,t,E,g);f=null!=T?n.filter.updatePriority(E,T):l.getNode()}else{const E=Sn(t);let T;if(l.isCompleteForChild(y)){g=e.serverCache.getNode();const A=W$(r,t,l.getNode(),g);T=null!=A?l.getNode().getImmediateChild(y).updateChild(E,A):l.getNode().getImmediateChild(y)}else T=j4(r,y,e.serverCache);f=null!=T?n.filter.updateChild(l.getNode(),y,T,E,i,a):l.getNode()}}return eE(e,f,l.isFullyInitialized()||$t(t),n.filter.filtersNodes())}}function HM(n,e,t,r,i,a,l,f){const g=e.serverCache;let y;const E=l?n.filter:n.filter.getIndexedFilter();if($t(t))y=E.updateFullNode(g.getNode(),r,null);else if(E.filtersNodes()&&!g.isFiltered()){const R=g.getNode().updateChild(t,r);y=E.updateFullNode(g.getNode(),R,null)}else{const R=jt(t);if(!g.isCompleteForPath(t)&&jd(t)>1)return e;const G=Sn(t),J=g.getNode().getImmediateChild(R).updateChild(G,r);y=".priority"===R?E.updatePriority(g.getNode(),J):E.updateChild(g.getNode(),R,J,G,K$,null)}const T=B$(e,y,g.isFullyInitialized()||$t(t),E.filtersNodes());return Y$(n,T,t,i,new $4(i,T,a),f)}function H4(n,e,t,r,i,a,l){const f=e.eventCache;let g,y;const E=new $4(i,e,a);if($t(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=eE(e,y,!0,n.filter.filtersNodes());else{const T=jt(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=eE(e,y,f.isFullyInitialized(),f.isFiltered());else{const A=Sn(t),R=f.getNode().getImmediateChild(T);let G;if($t(A))G=r;else{const Q=E.getCompleteChild(T);G=null!=Q?".priority"===v4(A)&&Q.getChild(D$(A)).isEmpty()?Q:Q.updateChild(A,r):Pt.EMPTY_NODE}g=R.equals(G)?e:eE(e,n.filter.updateChild(f.getNode(),T,G,A,E,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return g}function Q$(n,e){return n.eventCache.isCompleteForChild(e)}function J$(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function z4(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=$t(t)?r:new Fn(null).setTree(t,r);const E=e.serverCache.getNode();return y.children.inorderTraversal((T,A)=>{if(E.hasChild(T)){const G=J$(0,e.serverCache.getNode().getImmediateChild(T),A);g=HM(n,g,new gn(T),G,i,a,l,f)}}),y.children.inorderTraversal((T,A)=>{const R=!e.serverCache.isCompleteForChild(T)&&null===A.value;if(!E.hasChild(T)&&!R){const Q=J$(0,e.serverCache.getNode().getImmediateChild(T),A);g=HM(n,g,new gn(T),Q,i,a,l,f)}}),g}function zee(n,e){const t=Np(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$t(e)&&!t.getImmediateChild(jt(e)).isEmpty())?t.getChild(e):null}function t8(n,e,t,r){e.type===gc.MERGE&&null!==e.source.queryId&&((0,z.hu)(Np(n.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(VM(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function kee(n,e,t,r,i){const a=new Pee;let l,f;if(t.type===gc.OVERWRITE){const y=t;y.source.fromUser?l=H4(n,e,y.path,y.snap,r,i,a):((0,z.hu)(y.source.fromServer,"Unknown source."),f=y.source.tagged||e.serverCache.isFiltered()&&!$t(y.path),l=HM(n,e,y.path,y.snap,r,i,f,a))}else if(t.type===gc.MERGE){const y=t;y.source.fromUser?l=function Lee(n,e,t,r,i,a,l){let f=e;return r.foreach((g,y)=>{const E=Qn(t,g);Q$(e,jt(E))&&(f=H4(n,f,E,y,i,a,l))}),r.foreach((g,y)=>{const E=Qn(t,g);Q$(e,jt(E))||(f=H4(n,f,E,y,i,a,l))}),f}(n,e,y.path,y.children,r,i,a):((0,z.hu)(y.source.fromServer,"Unknown source."),f=y.source.tagged||e.serverCache.isFiltered(),l=z4(n,e,y.path,y.children,r,i,f,a))}else if(t.type===gc.ACK_USER_WRITE){const y=t;l=y.revert?function Bee(n,e,t,r,i,a){let l;if(null!=$M(r,t))return e;{const f=new $4(r,e,i),g=e.eventCache.getNode();let y;if($t(t)||".priority"===jt(t)){let E;if(e.serverCache.isFullyInitialized())E=jM(r,Np(e));else{const T=e.serverCache.getNode();(0,z.hu)(T instanceof Pt,"serverChildren would be complete if leaf node"),E=B4(r,T)}y=n.filter.updateFullNode(g,E,a)}else{const E=jt(t);let T=j4(r,E,e.serverCache);null==T&&e.serverCache.isCompleteForChild(E)&&(T=g.getImmediateChild(E)),y=null!=T?n.filter.updateChild(g,E,T,Sn(t),f,a):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(g,E,Pt.EMPTY_NODE,Sn(t),f,a):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=jM(r,Np(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=$M(r,un()),eE(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,a):function Uee(n,e,t,r,i,a,l){if(null!=$M(i,t))return e;const f=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if($t(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return HM(n,e,t,g.getNode().getChild(t),i,a,f,l);if($t(t)){let y=new Fn(null);return g.getNode().forEachChild(pc,(E,T)=>{y=y.set(new gn(E),T)}),z4(n,e,t,y,i,a,f,l)}return e}{let y=new Fn(null);return r.foreach((E,T)=>{const A=Qn(t,E);g.isCompleteForPath(A)&&(y=y.set(E,g.getNode().getChild(A)))}),z4(n,e,t,y,i,a,f,l)}}(n,e,y.path,y.affectedTree,r,i,a)}else{if(t.type!==gc.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+t.type);l=function Vee(n,e,t,r,i){const a=e.serverCache;return Y$(n,B$(e,a.getNode(),a.isFullyInitialized()||$t(t),a.isFiltered()),t,r,K$,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function Fee(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=VM(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function F$(n){return{type:"value",snapshotNode:n}}(VM(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function Ree(n,e){(0,z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,z.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function n8(n,e,t,r){return function fee(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function XX(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),XI(n,i,"child_removed",e,r,t),XI(n,i,"child_added",e,r,t),XI(n,i,"child_moved",a,r,t),XI(n,i,"child_changed",e,r,t),XI(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let zM,WM;function G4(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,z.hu)(null!=a,"SyncTree gave us an op for an invalid query."),t8(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(t8(l,e,t,r));return a}}function zd(n,e){let t=null;for(const r of n.views.values())t=t||zee(r,e);return t}class c8{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fn(null),this.pendingWriteTree_=function Mee(){return{visibleWrites:ga.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function W4(n,e,t,r,i){return function _ee(n,e,t,r,i){(0,z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=tE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?gy(n,new Op({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Wd(n,e,t=!1){const r=function vee(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Cee(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&wee(f,r.path)?i=!1:Ho(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function Iee(n){n.visibleWrites=z$(n.allWrites,Eee,un()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=j$(n.visibleWrites,r.path):hi(r.children,g=>{n.visibleWrites=j$(n.visibleWrites,Qn(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new Fn(null);return null!=r.snap?a=a.set(un(),!0):hi(r.children,l=>{a=a.set(new gn(l),!0)}),gy(n,new LM(r.path,a,t))}return[]}function nE(n,e,t){return gy(n,new Op({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function ZM(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const y=zd(f,cs(l,e));if(y)return y});return G$(i,e,a,t,!0)}function gy(n,e){return u8(e,n.syncPointTree_,null,BM(n.pendingWriteTree_,un()))}function u8(n,e,t,r){if($t(n.path))return d8(n,e,t,r);{const i=e.get(un());null==t&&null!=i&&(t=zd(i,un()));let a=[];const l=jt(n.path),f=n.operationForChild(l),g=e.children.get(l);if(g&&f){const y=t?t.getImmediateChild(l):null,E=q$(r,l);a=a.concat(u8(f,g,y,E))}return i&&(a=a.concat(G4(i,n,r,t))),a}}function d8(n,e,t,r){const i=e.get(un());null==t&&null!=i&&(t=zd(i,un()));let a=[];return e.children.inorderTraversal((l,f)=>{const g=t?t.getImmediateChild(l):null,y=q$(r,l),E=n.operationForChild(l);E&&(a=a.concat(d8(E,f,g,y)))}),i&&(a=a.concat(G4(i,n,r,t))),a}function Z4(n,e){return n.tagToQueryMap.get(e)}function K4(n){const e=n.indexOf("$");return(0,z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new gn(n.substr(0,e))}}function Y4(n,e,t){const r=n.syncPointTree_.get(e);return(0,z.hu)(r,"Missing sync point for query tag that we're tracking"),G4(r,t,BM(n.pendingWriteTree_,e),null)}class Q4{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Q4(t)}node(){return this.node_}}class J4{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Qn(this.path_,e);return new J4(this.syncTree_,t)}node(){return ZM(this.syncTree_,this.path_)}}const dte=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},f8=function(n,e,t){return n&&"object"==typeof n?((0,z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?hte(n[".sv"],e,t):"object"==typeof n[".sv"]?fte(n[".sv"],e):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},hte=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,z.hu)(!1,"Unexpected server value: "+n)},fte=function(n,e,t){n.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,z.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},p8=function(n,e,t,r){return eU(e,new J4(t,n),r)},X4=function(n,e,t){return eU(n,new Q4(e),t)};function eU(n,e,t){const r=n.getPriority().val(),i=f8(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=f8(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new ly(f,or(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new ly(i))),l.forEachChild(kn,(f,g)=>{const y=eU(g,e.getImmediateChild(f),t);y!==g&&(a=a.updateImmediateChild(f,y))}),a}}class tU{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function YM(n,e){let t=e instanceof gn?e:new gn(e),r=n,i=jt(t);for(;null!==i;){const a=(0,z.DV)(r.node.children,i)||{children:{},childCount:0};r=new tU(i,r,a),t=Sn(t),i=jt(t)}return r}function kp(n){return n.node.value}function nU(n,e){n.node.value=e,rU(n)}function g8(n){return n.node.childCount>0}function QM(n,e){hi(n.node.children,(t,r)=>{e(new tU(t,n,r))})}function m8(n,e,t,r){t&&!r&&e(n),QM(n,i=>{m8(i,e,!0,r)}),t&&r&&e(n)}function sE(n){return new gn(null===n.parent?n.name:sE(n.parent)+"/"+n.name)}function rU(n){null!==n.parent&&function mte(n,e,t){const r=function pte(n){return void 0===kp(n)&&!g8(n)}(t),i=(0,z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,rU(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,rU(n))}(n.parent,n.name,n)}const _te=/[\[\].#$\/\u0000-\u001F\u007F]/,yte=/[\[\].#$\u0000-\u001F\u007F]/,iU=10485760,JM=function(n){return"string"==typeof n&&0!==n.length&&!_te.test(n)},aE=function(n,e,t){const r=t instanceof gn?new kX(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+xp(r));if("function"==typeof e)throw new Error(n+"contains a function "+xp(r)+" with contents = "+e.toString());if(DM(e))throw new Error(n+"contains "+e.toString()+" "+xp(r));if("string"==typeof e&&e.length>iU/3&&(0,z.ug)(e)>iU)throw new Error(n+"contains a string greater than "+iU+" utf8 bytes "+xp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(hi(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!JM(l)))throw new Error(n+" contains an invalid key ("+l+") "+xp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function FX(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,z.ug)(e),S$(n)})(r,l),aE(n,f,r),function LX(n){const e=n.parts_.pop();n.byteLength_-=(0,z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+xp(r)+" in addition to actual children.")}},v8=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!JM(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!yte.test(n)}(n)}(t))throw new Error((0,z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ite{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function oo(n,e,t){(function XM(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!C4(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function w8(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Ete(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Ho(r,e)||Ho(e,r))}function Ete(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ap&&di("event: "+t.toString()),ay(r)}}}const bte=25;class Tte{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ite,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=FM(),this.transactionQueueTree_=new tU,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function E8(n){const t=n.infoData_.getNode(new gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function lE(n){return dte({timestamp:E8(n)})}function b8(n,e,t,r,i){n.dataUpdateCount++;const a=new gn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,z.UI)(t,y=>or(y));l=function ste(n,e,t,r){const i=Z4(n,r);if(i){const a=K4(i),l=a.path,f=a.queryId,g=cs(l,e),y=Fn.fromObject(t);return Y4(n,l,new fy(k4(f),g,y))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=or(t);l=function l8(n,e,t,r){const i=Z4(n,r);if(null!=i){const a=K4(i),l=a.path,f=a.queryId,g=cs(l,e);return Y4(n,l,new Op(k4(f),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,z.UI)(t,y=>or(y));l=function nte(n,e,t){const r=Fn.fromObject(t);return gy(n,new fy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=or(t);l=nE(n.serverSyncTree_,a,g)}let f=a;l.length>0&&(f=_y(n,a)),oo(n.eventQueue_,f,l)}function T8(n,e){aU(n,"connected",e),!1===e&&function xte(n){my(n,"onDisconnectEvents");const e=lE(n),t=FM();O4(n.onDisconnect_,un(),(i,a)=>{const l=p8(i,a,n.serverSyncTree_,e);hy(t,i,l)});let r=[];O4(t,un(),(i,a)=>{r=r.concat(nE(n.serverSyncTree_,i,a));const l=function dU(n,e){const t=sE(A8(n,e)),r=YM(n.transactionQueueTree_,e);return function gte(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{hU(n,i)}),hU(n,r),m8(r,i=>{hU(n,i)}),t}(n,i);_y(n,l)}),n.onDisconnect_=FM(),oo(n.eventQueue_,un(),r)}(n)}function aU(n,e,t){const r=new gn("/.info/"+e),i=or(t);n.infoData_.updateSnapshot(r,i);const a=nE(n.infoSyncTree_,r,i);oo(n.eventQueue_,r,a)}function ex(n){return n.nextWriteId_++}function my(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),di(t,...e)}function uU(n,e,t){return ZM(n.serverSyncTree_,e,t)||Pt.EMPTY_NODE}function tx(n,e=n.transactionQueueTree_){if(e||nx(n,e),kp(e)){const t=M8(n,e);(0,z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Lte(n,e,t){const r=t.map(y=>y.currentWriteId),i=uU(n,e,r);let a=i;const l=i.hash();for(let y=0;y<t.length;y++){const E=t[y];(0,z.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=cs(e,E.path);a=a.updateChild(T,E.currentOutputSnapshotRaw)}const f=a.val(!0),g=e;n.server_.put(g.toString(),f,y=>{my(n,"transaction put response",{path:g.toString(),status:y});let E=[];if("ok"===y){const T=[];for(let A=0;A<t.length;A++)t[A].status=2,E=E.concat(Wd(n.serverSyncTree_,t[A].currentWriteId)),t[A].onComplete&&T.push(()=>t[A].onComplete(null,!0,t[A].currentOutputSnapshotResolved)),t[A].unwatcher();nx(n,YM(n.transactionQueueTree_,e)),tx(n,n.transactionQueueTree_),oo(n.eventQueue_,e,E);for(let A=0;A<T.length;A++)ay(T[A])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{qi("transaction at "+g.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}_y(n,e)}},l)}(n,sE(e),t)}else g8(e)&&QM(e,t=>{tx(n,t)})}function _y(n,e){const t=A8(n,e),r=sE(t);return function Ute(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const g=e[f],y=cs(t,g.path);let T,E=!1;if((0,z.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)E=!0,T=g.abortReason,i=i.concat(Wd(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=bte)E=!0,T="maxretry",i=i.concat(Wd(n.serverSyncTree_,g.currentWriteId,!0));else{const A=uU(n,g.path,l);g.currentInputSnapshot=A;const R=e[f].update(A.val());if(void 0!==R){aE("transaction failed: Data returned ",R,g.path);let G=or(R);"object"==typeof R&&null!=R&&(0,z.r3)(R,".priority")||(G=G.updatePriority(A.getPriority()));const J=g.currentWriteId,we=lE(n),He=X4(G,A,we);g.currentOutputSnapshotRaw=G,g.currentOutputSnapshotResolved=He,g.currentWriteId=ex(n),l.splice(l.indexOf(J),1),i=i.concat(W4(n.serverSyncTree_,g.path,He,g.currentWriteId,g.applyLocally)),i=i.concat(Wd(n.serverSyncTree_,J,!0))}else E=!0,T="nodata",i=i.concat(Wd(n.serverSyncTree_,g.currentWriteId,!0))}oo(n.eventQueue_,t,i),i=[],E&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===T?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(T),!1,null)))}nx(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)ay(r[f]);tx(n,n.transactionQueueTree_)}(n,M8(n,t),r),r}function A8(n,e){let t,r=n.transactionQueueTree_;for(t=jt(e);null!==t&&void 0===kp(r);)r=YM(r,t),t=jt(e=Sn(e));return r}function M8(n,e){const t=[];return x8(n,e,t),t.sort((r,i)=>r.order-i.order),t}function x8(n,e,t){const r=kp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);QM(e,i=>{x8(n,i,t)})}function nx(n,e){const t=kp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,nU(e,t.length>0?t:void 0)}QM(e,r=>{nx(n,r)})}function hU(n,e){const t=kp(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,z.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,z.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Wd(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?nU(e,void 0):t.length=a+1,oo(n.eventQueue_,sE(e),i);for(let l=0;l<r.length;l++)ay(r[l])}}const fU=function(n,e){const t=jte(n),r=t.namespace;return"firebase.com"===t.domain&&fc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&fc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&qi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new f4(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new gn(t.pathString)}},jte=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(f=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(E,T)),E<T&&(i=function Vte(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(E,T)));const A=function Bte(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(l="https"===f||"wss"===f,g=parseInt(e.substring(y+1),10)):y=e.length;const R=e.slice(0,y);if("localhost"===R.toLowerCase())t="localhost";else if(R.split(".").length<=2)t=R;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in A&&(a=A.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}};class ao{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return $t(this._path)?null:v4(this._path)}get ref(){return new ma(this._repo,this._path)}get _queryIdentifier(){const e=U$(this._queryParams),t=d4(e);return"{}"===t?"default":t}get _queryObject(){return U$(this._queryParams)}isEqual(e){if(!((e=(0,z.m9)(e))instanceof ao))return!1;const t=this._repo===e._repo,r=C4(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function NX(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ma extends ao{constructor(e,t){super(e,t,new A4,!1)}get parent(){const e=D$(this._path);return null===e?null:new ma(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function qee(n){(0,z.hu)(!zM,"__referenceConstructor has already been defined"),zM=n})(ma),function Jee(n){(0,z.hu)(!WM,"__referenceConstructor has already been defined"),WM=n}(ma);const gU={};class ane{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Dte(n,e,t){if(n.stats_=m4(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new kM(n.repoInfo_,(r,i,a,l)=>{b8(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>T8(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Pp(n.repoInfo_,e,(r,i,a,l)=>{b8(n,r,i,a,l)},r=>{T8(n,r)},r=>{!function Ste(n,e){hi(e,(t,r)=>{aU(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function dX(n,e){const t=n.toString();return g4[t]||(g4[t]=e()),g4[t]}(n.repoInfo_,()=>new dee(n.stats_,n.server_)),n.infoData_=new oee,n.infoSyncTree_=new c8({startListening:(r,i,a,l)=>{let f=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(f=nE(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),aU(n,"connected",!1),n.serverSyncTree_=new c8({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,g)=>{const y=l(f,g);oo(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ma(this._repo,un())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ine(n,e){const t=gU[e];(!t||t[n.key]!==n)&&fc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function S8(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&fc("Cannot call "+e+" on a deleted database.")}}function cne(n=(0,ln.getApp)(),e){const t=(0,ln._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,z.P0)("database");r&&function lne(n,e,t,r={}){(n=(0,z.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&fc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&fc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new zI(zI.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,z.Sg)(r.mockUserToken,n.app.options.projectId);a=new zI(l)}!function nne(n,e,t,r){n.repoInfo_=new f4(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r)}return t}Pp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Pp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function une(n){(function ZJ(n){c4=n})(ln.SDK_VERSION),(0,ln._registerComponent)(new Er.wA("database",(e,{instanceIdentifier:t})=>function rne(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||fc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),di("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,l=fU(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,a=`http://${y}?ns=${f.namespace}`,l=fU(a,i),f=l.repoInfo):g=!l.repoInfo.secure;const E=i&&g?new zI(zI.OWNER):new cX(n.name,n.options,e);v8("Invalid Firebase Database URL",l),$t(l.path)||fc("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function sne(n,e,t,r){let i=gU[e.name];i||(i={},gU[e.name]=i);let a=i[n.toURLString()];return a&&fc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Tte(n,!1,t,r),i[n.toURLString()]=a,a}(f,n,E,new aX(n.name,t));return new ane(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ln.registerVersion)($9,"0.14.4",n),(0,ln.registerVersion)($9,"0.14.4","esm2017")}();class mU{constructor(e){return e}}const V8="database",_U=new d.OlP("angularfire2.database-instances");function gne(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new mU(r)}}const mne={provide:class fne{constructor(){return ec(V8)}},deps:[[new d.FiY,_U]]},_ne={provide:mU,useFactory:function pne(n,e){const t=vl(V8,n,e);return t&&new mU(t)},deps:[[new d.FiY,_U],Pl]};let yne=(()=>{class n{constructor(){(0,ln.registerVersion)("angularfire",od.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[_ne,mne]}),n})();function vne(n,...e){return{ngModule:yne,providers:[{provide:_U,useFactory:gne(n),multi:!0,deps:[d.R0b,d.zs3,Uo,J_,[new d.FiY,TM],[new d.FiY,Ip],...e]}]}}const Cne=ud(cne,!0);class yU{constructor(e){return e}}const B8="messaging",vU=new d.OlP("angularfire2.messaging-instances");function Ene(n){return(e,t)=>{if(!l_.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new yU(r)}}const bne={provide:class wne{constructor(){return ec(B8)}},deps:[[new d.FiY,vU]]},Tne={provide:yU,useFactory:function Ine(n,e){if(!l_.sync())return null;const t=vl(B8,n,e);return t&&new yU(t)},deps:[[new d.FiY,vU],Pl]};let Dne=(()=>{class n{constructor(){(0,ln.registerVersion)("angularfire",od.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Tne,bne,{provide:d.ip1,useValue:l_.async,multi:!0}]}),n})();function Sne(n,...e){return{ngModule:Dne,providers:[{provide:vU,useFactory:Ene(n),multi:!0,deps:[d.R0b,d.zs3,Uo,J_,...e]}]}}const Ane=ud(W3,!0),j8="firebasestorage.googleapis.com";class ar extends z.ZR{constructor(e,t,r=0){super(CU(e),`Firebase Storage: ${t} (${CU(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ar.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return CU(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Jn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Jn||{});function CU(n){return"storage/"+n}function IU(n){return new ar(Jn.INVALID_ARGUMENT,n)}function W8(){return new ar(Jn.APP_DELETED,"The Firebase app was deleted.")}class ls{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ls.makeFromUrl(e,t)}catch{return new ls(e,"")}if(""===r.path)return r;throw function Une(n){return new ar(Jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Ye){Ye.path_=decodeURIComponent(Ye.path)}const T=t.replace(/[.]/g,"\\."),Ne=[{regex:f,indices:{bucket:1,path:3},postModify:function a(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===j8?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ye=0;Ye<Ne.length;Ye++){const mt=Ne[Ye],At=mt.regex.exec(e);if(At){let xs=At[mt.indices.path];xs||(xs=""),r=new ls(At[mt.indices.bucket],xs),mt.postModify(r);break}}if(null==r)throw function Lne(n){return new ar(Jn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class zne{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function bU(n,e,t,r){if(r<e)throw IU(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw IU(`Invalid value for '${n}'. Expected ${t} or less.`)}var vy=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(vy||{});class Yne{constructor(e,t,r,i,a,l,f,g,y,E,T,A=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=T,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,G)=>{this.resolve_=R,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());!function qne(n){return void 0!==n}(g)?a():a(g)}catch(g){l(g)}else if(null!==f){const g=function wU(){return new ar(Jn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();g.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,g):g)}else l(i.canceled?this.appDelete_?W8():function z8(){return new ar(Jn.CANCELED,"User canceled the upload/download.")}():function H8(){return new ar(Jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new ax(!1,null,!0)):this.backoffId_=function Gne(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function g(){return 2===f}let y=!1;function E(...J){y||(y=!0,e.apply(null,J))}function T(J){i=setTimeout(()=>{i=null,n(R,g())},J)}function A(){a&&clearTimeout(a)}function R(J,...we){if(y)return void A();if(J)return A(),void E.call(null,J,...we);if(g()||l)return A(),void E.call(null,J,...we);let Ne;r<64&&(r*=2),1===f?(f=2,Ne=0):Ne=1e3*(r+Math.random()),T(Ne)}let G=!1;function Q(J){G||(G=!0,A(),!y&&(null!==i?(J||(f=2),clearTimeout(i),T(0)):J||(f=1)))}return T(0),a=setTimeout(()=>{l=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new ax(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===vy.NO_ERROR,g=a.getStatus();if(!f||function K8(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}(g,this.additionalRetryCodes_)&&this.retry){const E=a.getErrorCode()===vy.ABORT;return void r(!1,new ax(!1,null,E))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new ax(y,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Wne(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ax{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Lp{constructor(e,t){this._service=e,this._location=t instanceof ls?t:ls.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lp(e,t)}get root(){const e=new ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function eH(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function ure(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ls(this._location.bucket,e);return new Lp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function Hne(n){return new ar(Jn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function gH(n,e){const t=e?.storageBucket;return null==t?null:ls.makeFromBucketSpec(t,n)}class PU{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=j8,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ls.makeFromBucketSpec(i,this._host):gH(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ls.makeFromBucketSpec(this._url,e):gH(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bU("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bU("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,j.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,j.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lp(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new zne(W8());{const l=function tre(n,e,t,r,i,a,l=!0){const f=function Z8(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),g=n.url+f,y=Object.assign({},n.headers);return function Xne(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function Qne(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function Jne(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,a),function ere(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new Yne(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,j.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const mH="@firebase/storage",yH="storage";function Kre(n=TD(),e){const r=Zu(n=(0,z.m9)(n),yH).getImmediate({identifier:e}),i=(0,z.P0)("storage");return i&&function Yre(n,e,t,r={}){!function Zre(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,z.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function Qre(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new PU(t,r,i,e,"10.5.0")}!function Jre(){Vi(new Er.wA(yH,Qre,"PUBLIC").setMultipleInstances(!0)),wi(mH,"0.11.2",""),wi(mH,"0.11.2","esm2017")}();class OU{constructor(e){return e}}const vH="storage",NU=new d.OlP("angularfire2.storage-instances");function tie(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new OU(r)}}const nie={provide:class Xre{constructor(){return ec(vH)}},deps:[[new d.FiY,NU]]},rie={provide:OU,useFactory:function eie(n,e){const t=vl(vH,n,e);return t&&new OU(t)},deps:[[new d.FiY,NU],Pl]};let iie=(()=>{class n{constructor(){(0,ln.registerVersion)("angularfire",od.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[rie,nie]}),n})();function sie(n,...e){return{ngModule:iie,providers:[{provide:NU,useFactory:tie(n),multi:!0,deps:[d.R0b,d.zs3,Uo,J_,[new d.FiY,TM],[new d.FiY,Ip],...e]}]}}const oie=ud(Kre,!0),RU={firebase:{projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",databaseURL:"https://instagram-clone-gilshaashua-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"instagram-clone-gilshaashua.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"}};wi("firebase","10.5.0","app"),bD(RU.firebase);let lie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n,bootstrap:[nJ]});static#n=this.\u0275inj=d.cJS({providers:[{provide:bs.Dh,useValue:RU.firebase}],imports:[Oc,NQ,SJ,WY,qY,UZ(()=>VZ(RU.firebase)),UJ(()=>VJ()),WJ(()=>qJ()),sie(()=>oie()),vne(()=>Cne()),Sne(()=>Ane())]})}return n})();ig().bootstrapModule(lie).catch(n=>console.error(n))},5619:(st,Ie,k)=>{k.d(Ie,{X:()=>V});var d=k(8645);class V extends d.x{constructor(te){super(),this._value=te}get value(){return this.getValue()}_subscribe(te){const ge=super._subscribe(te);return!ge.closed&&te.next(this._value),ge}getValue(){const{hasError:te,thrownError:ge,_value:Ee}=this;if(te)throw ge;return this._throwIfClosed(),Ee}next(te){super.next(this._value=te)}}},5592:(st,Ie,k)=>{k.d(Ie,{y:()=>Fe});var d=k(305),V=k(7394),F=k(4850),te=k(8407),ge=k(2653),Ee=k(4674),Re=k(1441);let Fe=(()=>{class X{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Je=new X;return Je.source=this,Je.operator=Me,Je}subscribe(Me,Je,ve){const Ae=function W(X){return X&&X instanceof d.Lv||function U(X){return X&&(0,Ee.m)(X.next)&&(0,Ee.m)(X.error)&&(0,Ee.m)(X.complete)}(X)&&(0,V.Nn)(X)}(Me)?Me:new d.Hp(Me,Je,ve);return(0,Re.x)(()=>{const{operator:Te,source:tt}=this;Ae.add(Te?Te.call(Ae,tt):tt?this._subscribe(Ae):this._trySubscribe(Ae))}),Ae}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Je){Me.error(Je)}}forEach(Me,Je){return new(Je=De(Je))((ve,Ae)=>{const Te=new d.Hp({next:tt=>{try{Me(tt)}catch(at){Ae(at),Te.unsubscribe()}},error:Ae,complete:ve});this.subscribe(Te)})}_subscribe(Me){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(Me)}[F.L](){return this}pipe(...Me){return(0,te.U)(Me)(this)}toPromise(Me){return new(Me=De(Me))((Je,ve)=>{let Ae;this.subscribe(Te=>Ae=Te,Te=>ve(Te),()=>Je(Ae))})}}return X.create=Pe=>new X(Pe),X})();function De(X){var Pe;return null!==(Pe=X??ge.config.Promise)&&void 0!==Pe?Pe:Promise}},8645:(st,Ie,k)=>{k.d(Ie,{x:()=>Re});var d=k(5592),V=k(7394);const te=(0,k(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=k(9039),Ee=k(1441);let Re=(()=>{class De extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const X=new Fe(this,this);return X.operator=W,X}_throwIfClosed(){if(this.closed)throw new te}next(W){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(W)}})}error(W){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:X}=this;for(;X.length;)X.shift().error(W)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:X,isStopped:Pe,observers:Me}=this;return X||Pe?V.Lc:(this.currentObservers=null,Me.push(W),new V.w0(()=>{this.currentObservers=null,(0,ge.P)(Me,W)}))}_checkFinalizedStatuses(W){const{hasError:X,thrownError:Pe,isStopped:Me}=this;X?W.error(Pe):Me&&W.complete()}asObservable(){const W=new d.y;return W.source=this,W}}return De.create=(U,W)=>new Fe(U,W),De})();class Fe extends Re{constructor(U,W){super(),this.destination=U,this.source=W}next(U){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===X||X.call(W,U)}error(U){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===X||X.call(W,U)}complete(){var U,W;null===(W=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===W||W.call(U)}_subscribe(U){var W,X;return null!==(X=null===(W=this.source)||void 0===W?void 0:W.subscribe(U))&&void 0!==X?X:V.Lc}}},305:(st,Ie,k)=>{k.d(Ie,{Hp:()=>ve,Lv:()=>X});var d=k(4674),V=k(7394),F=k(2653),te=k(3894),ge=k(2420);const Ee=De("C",void 0,void 0);function De(ee,he,re){return{kind:ee,value:he,error:re}}var U=k(7599),W=k(1441);class X extends V.w0{constructor(he){super(),this.isStopped=!1,he?(this.destination=he,(0,V.Nn)(he)&&he.add(this)):this.destination=at}static create(he,re,fe){return new ve(he,re,fe)}next(he){this.isStopped?tt(function Fe(ee){return De("N",ee,void 0)}(he),this):this._next(he)}error(he){this.isStopped?tt(function Re(ee){return De("E",void 0,ee)}(he),this):(this.isStopped=!0,this._error(he))}complete(){this.isStopped?tt(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(he){this.destination.next(he)}_error(he){try{this.destination.error(he)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pe=Function.prototype.bind;function Me(ee,he){return Pe.call(ee,he)}class Je{constructor(he){this.partialObserver=he}next(he){const{partialObserver:re}=this;if(re.next)try{re.next(he)}catch(fe){Ae(fe)}}error(he){const{partialObserver:re}=this;if(re.error)try{re.error(he)}catch(fe){Ae(fe)}else Ae(he)}complete(){const{partialObserver:he}=this;if(he.complete)try{he.complete()}catch(re){Ae(re)}}}class ve extends X{constructor(he,re,fe){let ke;if(super(),(0,d.m)(he)||!he)ke={next:he??void 0,error:re??void 0,complete:fe??void 0};else{let B;this&&F.config.useDeprecatedNextContext?(B=Object.create(he),B.unsubscribe=()=>this.unsubscribe(),ke={next:he.next&&Me(he.next,B),error:he.error&&Me(he.error,B),complete:he.complete&&Me(he.complete,B)}):ke=he}this.destination=new Je(ke)}}function Ae(ee){F.config.useDeprecatedSynchronousErrorHandling?(0,W.O)(ee):(0,te.h)(ee)}function tt(ee,he){const{onStoppedNotification:re}=F.config;re&&U.z.setTimeout(()=>re(ee,he))}const at={closed:!0,next:ge.Z,error:function Te(ee){throw ee},complete:ge.Z}},7394:(st,Ie,k)=>{k.d(Ie,{Lc:()=>Ee,w0:()=>ge,Nn:()=>Re});var d=k(4674);const F=(0,k(2306).d)(De=>function(W){De(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((X,Pe)=>`${Pe+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var te=k(9039);class ge{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Me of W)Me.remove(this);else W.remove(this);const{initialTeardown:X}=this;if((0,d.m)(X))try{X()}catch(Me){U=Me instanceof F?Me.errors:[Me]}const{_finalizers:Pe}=this;if(Pe){this._finalizers=null;for(const Me of Pe)try{Fe(Me)}catch(Je){U=U??[],Je instanceof F?U=[...U,...Je.errors]:U.push(Je)}}if(U)throw new F(U)}}add(U){var W;if(U&&U!==this)if(this.closed)Fe(U);else{if(U instanceof ge){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(U)}}_hasParent(U){const{_parentage:W}=this;return W===U||Array.isArray(W)&&W.includes(U)}_addParent(U){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(U),W):W?[W,U]:U}_removeParent(U){const{_parentage:W}=this;W===U?this._parentage=null:Array.isArray(W)&&(0,te.P)(W,U)}remove(U){const{_finalizers:W}=this;W&&(0,te.P)(W,U),U instanceof ge&&U._removeParent(this)}}ge.EMPTY=(()=>{const De=new ge;return De.closed=!0,De})();const Ee=ge.EMPTY;function Re(De){return De instanceof ge||De&&"closed"in De&&(0,d.m)(De.remove)&&(0,d.m)(De.add)&&(0,d.m)(De.unsubscribe)}function Fe(De){(0,d.m)(De)?De():De.unsubscribe()}},2653:(st,Ie,k)=>{k.d(Ie,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(st,Ie,k)=>{k.d(Ie,{E:()=>V});const V=new(k(5592).y)(ge=>ge.complete())},2459:(st,Ie,k)=>{k.d(Ie,{D:()=>he});var d=k(4829),V=k(3093),F=k(5137),Ee=k(5592),Fe=k(4971),De=k(4674),U=k(7103);function X(re,fe){if(!re)throw new Error("Iterable cannot be null");return new Ee.y(ke=>{(0,U.f)(ke,fe,()=>{const B=re[Symbol.asyncIterator]();(0,U.f)(ke,fe,()=>{B.next().then(Ce=>{Ce.done?ke.complete():ke.next(Ce.value)})},0,!0)})})}var Pe=k(8382),Me=k(4026),Je=k(4266),ve=k(3664),Ae=k(5726),Te=k(9853),tt=k(541);function he(re,fe){return fe?function ee(re,fe){if(null!=re){if((0,Pe.c)(re))return function te(re,fe){return(0,d.Xf)(re).pipe((0,F.R)(fe),(0,V.Q)(fe))}(re,fe);if((0,Je.z)(re))return function Re(re,fe){return new Ee.y(ke=>{let B=0;return fe.schedule(function(){B===re.length?ke.complete():(ke.next(re[B++]),ke.closed||this.schedule())})})}(re,fe);if((0,Me.t)(re))return function ge(re,fe){return(0,d.Xf)(re).pipe((0,F.R)(fe),(0,V.Q)(fe))}(re,fe);if((0,Ae.D)(re))return X(re,fe);if((0,ve.T)(re))return function W(re,fe){return new Ee.y(ke=>{let B;return(0,U.f)(ke,fe,()=>{B=re[Fe.h](),(0,U.f)(ke,fe,()=>{let Ce,Ue;try{({value:Ce,done:Ue}=B.next())}catch(ct){return void ke.error(ct)}Ue?ke.complete():ke.next(Ce)},0,!0)}),()=>(0,De.m)(B?.return)&&B.return()})}(re,fe);if((0,tt.L)(re))return function at(re,fe){return X((0,tt.Q)(re),fe)}(re,fe)}throw(0,Te.z)(re)}(re,fe):(0,d.Xf)(re)}},4829:(st,Ie,k)=>{k.d(Ie,{Xf:()=>Pe});var d=k(7582),V=k(4266),F=k(4026),te=k(5592),ge=k(8382),Ee=k(5726),Re=k(9853),Fe=k(3664),De=k(541),U=k(4674),W=k(3894),X=k(4850);function Pe(ee){if(ee instanceof te.y)return ee;if(null!=ee){if((0,ge.c)(ee))return function Me(ee){return new te.y(he=>{const re=ee[X.L]();if((0,U.m)(re.subscribe))return re.subscribe(he);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,V.z)(ee))return function Je(ee){return new te.y(he=>{for(let re=0;re<ee.length&&!he.closed;re++)he.next(ee[re]);he.complete()})}(ee);if((0,F.t)(ee))return function ve(ee){return new te.y(he=>{ee.then(re=>{he.closed||(he.next(re),he.complete())},re=>he.error(re)).then(null,W.h)})}(ee);if((0,Ee.D)(ee))return Te(ee);if((0,Fe.T)(ee))return function Ae(ee){return new te.y(he=>{for(const re of ee)if(he.next(re),he.closed)return;he.complete()})}(ee);if((0,De.L)(ee))return function tt(ee){return Te((0,De.Q)(ee))}(ee)}throw(0,Re.z)(ee)}function Te(ee){return new te.y(he=>{(function at(ee,he){var re,fe,ke,B;return(0,d.mG)(this,void 0,void 0,function*(){try{for(re=(0,d.KL)(ee);!(fe=yield re.next()).done;)if(he.next(fe.value),he.closed)return}catch(Ce){ke={error:Ce}}finally{try{fe&&!fe.done&&(B=re.return)&&(yield B.call(re))}finally{if(ke)throw ke.error}}he.complete()})})(ee,he).catch(re=>he.error(re))})}},3019:(st,Ie,k)=>{k.d(Ie,{T:()=>Ee});var d=k(7537),V=k(4829),F=k(6232),te=k(9940),ge=k(2459);function Ee(...Re){const Fe=(0,te.yG)(Re),De=(0,te._6)(Re,1/0),U=Re;return U.length?1===U.length?(0,V.Xf)(U[0]):(0,d.J)(De)((0,ge.D)(U,Fe)):F.E}},2096:(st,Ie,k)=>{k.d(Ie,{of:()=>F});var d=k(9940),V=k(2459);function F(...te){const ge=(0,d.yG)(te);return(0,V.D)(te,ge)}},8251:(st,Ie,k)=>{k.d(Ie,{x:()=>V});var d=k(305);function V(te,ge,Ee,Re,Fe){return new F(te,ge,Ee,Re,Fe)}class F extends d.Lv{constructor(ge,Ee,Re,Fe,De,U){super(ge),this.onFinalize=De,this.shouldUnsubscribe=U,this._next=Ee?function(W){try{Ee(W)}catch(X){ge.error(X)}}:super._next,this._error=Fe?function(W){try{Fe(W)}catch(X){ge.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=Re?function(){try{Re()}catch(W){ge.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},3997:(st,Ie,k)=>{k.d(Ie,{x:()=>te});var d=k(2737),V=k(9360),F=k(8251);function te(Ee,Re=d.y){return Ee=Ee??ge,(0,V.e)((Fe,De)=>{let U,W=!0;Fe.subscribe((0,F.x)(De,X=>{const Pe=Re(X);(W||!Ee(U,Pe))&&(W=!1,U=Pe,De.next(X))}))})}function ge(Ee,Re){return Ee===Re}},7398:(st,Ie,k)=>{k.d(Ie,{U:()=>F});var d=k(9360),V=k(8251);function F(te,ge){return(0,d.e)((Ee,Re)=>{let Fe=0;Ee.subscribe((0,V.x)(Re,De=>{Re.next(te.call(ge,De,Fe++))}))})}},7537:(st,Ie,k)=>{k.d(Ie,{J:()=>F});var d=k(1631),V=k(2737);function F(te=1/0){return(0,d.z)(V.y,te)}},1631:(st,Ie,k)=>{k.d(Ie,{z:()=>Fe});var d=k(7398),V=k(4829),F=k(9360),te=k(7103),ge=k(8251),Re=k(4674);function Fe(De,U,W=1/0){return(0,Re.m)(U)?Fe((X,Pe)=>(0,d.U)((Me,Je)=>U(X,Me,Pe,Je))((0,V.Xf)(De(X,Pe))),W):("number"==typeof U&&(W=U),(0,F.e)((X,Pe)=>function Ee(De,U,W,X,Pe,Me,Je,ve){const Ae=[];let Te=0,tt=0,at=!1;const ee=()=>{at&&!Ae.length&&!Te&&U.complete()},he=fe=>Te<X?re(fe):Ae.push(fe),re=fe=>{Me&&U.next(fe),Te++;let ke=!1;(0,V.Xf)(W(fe,tt++)).subscribe((0,ge.x)(U,B=>{Pe?.(B),Me?he(B):U.next(B)},()=>{ke=!0},void 0,()=>{if(ke)try{for(Te--;Ae.length&&Te<X;){const B=Ae.shift();Je?(0,te.f)(U,Je,()=>re(B)):re(B)}ee()}catch(B){U.error(B)}}))};return De.subscribe((0,ge.x)(U,he,()=>{at=!0,ee()})),()=>{ve?.()}}(X,Pe,De,W)))}},3093:(st,Ie,k)=>{k.d(Ie,{Q:()=>te});var d=k(7103),V=k(9360),F=k(8251);function te(ge,Ee=0){return(0,V.e)((Re,Fe)=>{Re.subscribe((0,F.x)(Fe,De=>(0,d.f)(Fe,ge,()=>Fe.next(De),Ee),()=>(0,d.f)(Fe,ge,()=>Fe.complete(),Ee),De=>(0,d.f)(Fe,ge,()=>Fe.error(De),Ee)))})}},3020:(st,Ie,k)=>{k.d(Ie,{B:()=>ge});var d=k(4829),V=k(8645),F=k(305),te=k(9360);function ge(Re={}){const{connector:Fe=(()=>new V.x),resetOnError:De=!0,resetOnComplete:U=!0,resetOnRefCountZero:W=!0}=Re;return X=>{let Pe,Me,Je,ve=0,Ae=!1,Te=!1;const tt=()=>{Me?.unsubscribe(),Me=void 0},at=()=>{tt(),Pe=Je=void 0,Ae=Te=!1},ee=()=>{const he=Pe;at(),he?.unsubscribe()};return(0,te.e)((he,re)=>{ve++,!Te&&!Ae&&tt();const fe=Je=Je??Fe();re.add(()=>{ve--,0===ve&&!Te&&!Ae&&(Me=Ee(ee,W))}),fe.subscribe(re),!Pe&&ve>0&&(Pe=new F.Hp({next:ke=>fe.next(ke),error:ke=>{Te=!0,tt(),Me=Ee(at,De,ke),fe.error(ke)},complete:()=>{Ae=!0,tt(),Me=Ee(at,U),fe.complete()}}),(0,d.Xf)(he).subscribe(Pe))})(X)}}function Ee(Re,Fe,...De){if(!0===Fe)return void Re();if(!1===Fe)return;const U=new F.Hp({next:()=>{U.unsubscribe(),Re()}});return(0,d.Xf)(Fe(...De)).subscribe(U)}},5137:(st,Ie,k)=>{k.d(Ie,{R:()=>V});var d=k(9360);function V(F,te=0){return(0,d.e)((ge,Ee)=>{Ee.add(F.schedule(()=>ge.subscribe(Ee),te))})}},4664:(st,Ie,k)=>{k.d(Ie,{w:()=>te});var d=k(4829),V=k(9360),F=k(8251);function te(ge,Ee){return(0,V.e)((Re,Fe)=>{let De=null,U=0,W=!1;const X=()=>W&&!De&&Fe.complete();Re.subscribe((0,F.x)(Fe,Pe=>{De?.unsubscribe();let Me=0;const Je=U++;(0,d.Xf)(ge(Pe,Je)).subscribe(De=(0,F.x)(Fe,ve=>Fe.next(Ee?Ee(Pe,ve,Je,Me++):ve),()=>{De=null,X()}))},()=>{W=!0,X()}))})}},7599:(st,Ie,k)=>{k.d(Ie,{z:()=>d});const d={setTimeout(V,F,...te){const{delegate:ge}=d;return ge?.setTimeout?ge.setTimeout(V,F,...te):setTimeout(V,F,...te)},clearTimeout(V){const{delegate:F}=d;return(F?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4971:(st,Ie,k)=>{k.d(Ie,{h:()=>V});const V=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(st,Ie,k)=>{k.d(Ie,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(st,Ie,k)=>{k.d(Ie,{_6:()=>Ee,jO:()=>te,yG:()=>ge});var d=k(4674),V=k(671);function F(Re){return Re[Re.length-1]}function te(Re){return(0,d.m)(F(Re))?Re.pop():void 0}function ge(Re){return(0,V.K)(F(Re))?Re.pop():void 0}function Ee(Re,Fe){return"number"==typeof F(Re)?Re.pop():Fe}},9039:(st,Ie,k)=>{function d(V,F){if(V){const te=V.indexOf(F);0<=te&&V.splice(te,1)}}k.d(Ie,{P:()=>d})},2306:(st,Ie,k)=>{function d(V){const te=V(ge=>{Error.call(ge),ge.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}k.d(Ie,{d:()=>d})},1441:(st,Ie,k)=>{k.d(Ie,{O:()=>te,x:()=>F});var d=k(2653);let V=null;function F(ge){if(d.config.useDeprecatedSynchronousErrorHandling){const Ee=!V;if(Ee&&(V={errorThrown:!1,error:null}),ge(),Ee){const{errorThrown:Re,error:Fe}=V;if(V=null,Re)throw Fe}}else ge()}function te(ge){d.config.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ge)}},7103:(st,Ie,k)=>{function d(V,F,te,ge=0,Ee=!1){const Re=F.schedule(function(){te(),Ee?V.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(V.add(Re),!Ee)return Re}k.d(Ie,{f:()=>d})},2737:(st,Ie,k)=>{function d(V){return V}k.d(Ie,{y:()=>d})},4266:(st,Ie,k)=>{k.d(Ie,{z:()=>d});const d=V=>V&&"number"==typeof V.length&&"function"!=typeof V},5726:(st,Ie,k)=>{k.d(Ie,{D:()=>V});var d=k(4674);function V(F){return Symbol.asyncIterator&&(0,d.m)(F?.[Symbol.asyncIterator])}},4674:(st,Ie,k)=>{function d(V){return"function"==typeof V}k.d(Ie,{m:()=>d})},8382:(st,Ie,k)=>{k.d(Ie,{c:()=>F});var d=k(4850),V=k(4674);function F(te){return(0,V.m)(te[d.L])}},3664:(st,Ie,k)=>{k.d(Ie,{T:()=>F});var d=k(4971),V=k(4674);function F(te){return(0,V.m)(te?.[d.h])}},4026:(st,Ie,k)=>{k.d(Ie,{t:()=>V});var d=k(4674);function V(F){return(0,d.m)(F?.then)}},541:(st,Ie,k)=>{k.d(Ie,{L:()=>te,Q:()=>F});var d=k(7582),V=k(4674);function F(ge){return(0,d.FC)(this,arguments,function*(){const Re=ge.getReader();try{for(;;){const{value:Fe,done:De}=yield(0,d.qq)(Re.read());if(De)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Fe)}}finally{Re.releaseLock()}})}function te(ge){return(0,V.m)(ge?.getReader)}},671:(st,Ie,k)=>{k.d(Ie,{K:()=>V});var d=k(4674);function V(F){return F&&(0,d.m)(F.schedule)}},9360:(st,Ie,k)=>{k.d(Ie,{A:()=>V,e:()=>F});var d=k(4674);function V(te){return(0,d.m)(te?.lift)}function F(te){return ge=>{if(V(ge))return ge.lift(function(Ee){try{return te(Ee,this)}catch(Re){this.error(Re)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(st,Ie,k)=>{function d(){}k.d(Ie,{Z:()=>d})},8407:(st,Ie,k)=>{k.d(Ie,{U:()=>F,z:()=>V});var d=k(2737);function V(...te){return F(te)}function F(te){return 0===te.length?d.y:1===te.length?te[0]:function(Ee){return te.reduce((Re,Fe)=>Fe(Re),Ee)}}},3894:(st,Ie,k)=>{k.d(Ie,{h:()=>F});var d=k(2653),V=k(7599);function F(te){V.z.setTimeout(()=>{const{onUnhandledError:ge}=d.config;if(!ge)throw te;ge(te)})}},9853:(st,Ie,k)=>{function d(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ie,{z:()=>d})},5879:(st,Ie,k)=>{k.d(Ie,{$8M:()=>hu,$WT:()=>Ia,$Z:()=>Xb,AFp:()=>Cb,ALo:()=>Xa,AaK:()=>X,AsE:()=>U0,CHM:()=>Yi,CRH:()=>qm,DdM:()=>rR,Dn7:()=>v1,EJc:()=>NR,EpF:()=>QT,F4k:()=>JT,FYo:()=>Db,FiY:()=>oe,GfV:()=>Xg,Gpc:()=>Je,HDt:()=>X1,JOm:()=>Vh,KtG:()=>Dh,LFG:()=>Be,LSH:()=>nf,Lbi:()=>qg,Lck:()=>QN,MAs:()=>WT,MGl:()=>vm,MMx:()=>l1,MR2:()=>Ov,NdJ:()=>A0,O4$:()=>yo,Ojb:()=>dP,OlP:()=>cn,Oqu:()=>L0,P3R:()=>tP,PXZ:()=>lS,Q6J:()=>E0,QGY:()=>_m,Qsj:()=>IP,R0b:()=>Nr,RDi:()=>XE,Rgc:()=>Xu,SBq:()=>uf,Sil:()=>kR,Suo:()=>Wm,TTD:()=>yh,TgZ:()=>gm,Tol:()=>Za,VKq:()=>iR,VuI:()=>yw,W1O:()=>Ym,X6Q:()=>fS,XFs:()=>ht,Xpm:()=>Vl,Xq5:()=>p0,Xts:()=>Mu,Y36:()=>xo,YKP:()=>YN,YNc:()=>HT,Yjl:()=>zl,Yz7:()=>pt,Z0I:()=>nn,ZZ4:()=>ts,_Bn:()=>Um,_UZ:()=>T0,_c5:()=>lk,_uU:()=>CD,aQg:()=>It,c2e:()=>Q1,cJS:()=>An,cg1:()=>z0,dDg:()=>iw,dqk:()=>Rt,eFA:()=>to,eJc:()=>Jm,ekj:()=>k0,eoX:()=>oS,f3M:()=>Ze,g9A:()=>wb,h0i:()=>Ju,hGG:()=>uk,hij:()=>ul,iGM:()=>A1,ifc:()=>Os,ip1:()=>Y1,jDz:()=>gC,kL8:()=>G0,kcU:()=>wt,lG2:()=>Hl,lcZ:()=>y1,lqb:()=>Cs,lri:()=>o_,n5z:()=>vg,oAB:()=>jl,oxw:()=>nD,q4F:()=>qv,qFp:()=>vk,qLn:()=>Li,qOj:()=>Ef,qZA:()=>mm,rWj:()=>sS,rg0:()=>_h,s9C:()=>ym,sBO:()=>nV,s_b:()=>Gm,soG:()=>sr,tb:()=>Wf,tp0:()=>$e,uIk:()=>g0,vHH:()=>ee,vpe:()=>Mo,wAp:()=>Qa,xp6:()=>Qb,z2F:()=>qf,zSh:()=>j,zs3:()=>Js});var d=k(8645),V=k(7394),F=k(5592),te=k(3019),ge=k(5619),Ee=k(2096),Re=k(3020),Fe=k(4664),De=k(3997);function U(s){for(let o in s)if(s[o]===U)return o;throw Error("Could not find renamed property on target object.")}function W(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function X(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(X).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function Pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Me=U({__forward_ref__:U});function Je(s){return s.__forward_ref__=Je,s.toString=function(){return X(this())},s}function ve(s){return Ae(s)?s():s}function Ae(s){return"function"==typeof s&&s.hasOwnProperty(Me)&&s.__forward_ref__===Je}function Te(s){return s&&!!s.\u0275providers}const at="https://g.co/ng/security#xss";class ee extends Error{constructor(o,c){super(function he(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,c)),this.code=o}}function re(s){return"string"==typeof s?s:null==s?"":String(s)}function Ue(s,o){throw new ee(-201,!1)}function Qe(s,o){null==s&&function Ve(s,o,c,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${c} ${u} ${o} <=Actual]`))}(o,s,null,"!=")}function pt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function An(s){return{providers:s.providers||[],imports:s.imports||[]}}function En(s){return Un(s,cr)||Un(s,Lr)}function nn(s){return null!==En(s)}function Un(s,o){return s.hasOwnProperty(o)?s[o]:null}function Mr(s){return s&&(s.hasOwnProperty(Vn)||s.hasOwnProperty(ds))?s[Vn]:null}const cr=U({\u0275prov:U}),Vn=U({\u0275inj:U}),Lr=U({ngInjectableDef:U}),ds=U({ngInjectorDef:U});var ht=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(ht||{});let _t;function rn(s){const o=_t;return _t=s,o}function ti(s,o,c){const u=En(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:c&ht.Optional?null:void 0!==o?o:void Ue(X(s))}const Rt=globalThis,ot={},kt="__NG_DI_FLAG__",Vt="ngTempTokenPath",H=/\n/gm,O="__source";let N;function K(s){const o=N;return N=s,o}function me(s,o=ht.Default){if(void 0===N)throw new ee(-203,!1);return null===N?ti(s,void 0,o):N.get(s,o&ht.Optional?null:void 0,o)}function Be(s,o=ht.Default){return(function bt(){return _t}()||me)(ve(s),o)}function Ze(s,o=ht.Default){return Be(s,Zt(o))}function Zt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Ct(s){const o=[];for(let c=0;c<s.length;c++){const u=ve(s[c]);if(Array.isArray(u)){if(0===u.length)throw new ee(900,!1);let h,p=ht.Default;for(let v=0;v<u.length;v++){const C=u[v],b=xt(C);"number"==typeof b?-1===b?h=C.token:p|=b:h=C}o.push(Be(h,p))}else o.push(Be(u))}return o}function hn(s,o){return s[kt]=o,s.prototype[kt]=o,s}function xt(s){return s[kt]}function Ps(s){return{toString:s}.toString()}var lo=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(lo||{}),Os=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(Os||{});const xi={},Wt=[],zo=U({\u0275cmp:U}),va=U({\u0275dir:U}),Fl=U({\u0275pipe:U}),Ll=U({\u0275mod:U}),Ns=U({\u0275fac:U}),Ca=U({__NG_ELEMENT_ID__:U}),Ul=U({__NG_ENV_ID__:U});function Kd(s,o,c){let u=s.length;for(;;){const h=s.indexOf(o,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===u||s.charCodeAt(h+p)<=32)return h}c=h+1}}function wa(s,o,c){let u=0;for(;u<c.length;){const h=c[u];if("number"==typeof h){if(0!==h)break;u++;const p=c[u++],v=c[u++],C=c[u++];s.setAttribute(o,v,C,p)}else{const p=h,v=c[++u];wc(p)?s.setProperty(o,p,v):s.setAttribute(o,p,v),u++}}return u}function Rs(s){return 3===s||4===s||6===s}function wc(s){return 64===s.charCodeAt(0)}function Ic(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let u=0;u<o.length;u++){const h=o[u];"number"==typeof h?c=h:0===c||Go(s,c,h,null,-1===c||2===c?o[++u]:null)}}return s}function Go(s,o,c,u,h){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const C=s[p++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=p-1;break}}}for(;p<s.length;){const C=s[p];if("number"==typeof C)break;if(C===c){if(null===u)return void(null!==h&&(s[p+1]=h));if(u===s[p+1])return void(s[p+2]=h)}p++,null!==u&&p++,null!==h&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,c),null!==u&&s.splice(p++,0,u),null!==h&&s.splice(p++,0,h)}const Pn="ng-template";function Ey(s,o,c){let u=0,h=!0;for(;u<s.length;){let p=s[u++];if("string"==typeof p&&h){const v=s[u++];if(c&&"class"===p&&-1!==Kd(v.toLowerCase(),o,0))return!0}else{if(1===p){for(;u<s.length&&"string"==typeof(p=s[u++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function pi(s){return 4===s.type&&s.value!==Pn}function by(s,o,c){return o===(4!==s.type||c?s.value:Pn)}function Yd(s,o,c){let u=4;const h=s.attrs||[],p=function Ec(s){for(let o=0;o<s.length;o++)if(Rs(s[o]))return o;return s.length}(h);let v=!1;for(let C=0;C<o.length;C++){const b=o[C];if("number"!=typeof b){if(!v)if(4&u){if(u=2|1&u,""!==b&&!by(s,b,c)||""===b&&1===o.length){if(ni(u))return!1;v=!0}}else{const D=8&u?b:o[++C];if(8&u&&null!==s.attrs){if(!Ey(s.attrs,D,c)){if(ni(u))return!1;v=!0}continue}const L=Qd(8&u?"class":b,h,pi(s),c);if(-1===L){if(ni(u))return!1;v=!0;continue}if(""!==D){let q;q=L>p?"":h[L+1].toLowerCase();const Y=8&u?q:null;if(Y&&-1!==Kd(Y,D,0)||2&u&&D!==q){if(ni(u))return!1;v=!0}}}}else{if(!v&&!ni(u)&&!ni(b))return!1;if(v&&ni(b))continue;v=!1,u=b|1&u}}return ni(u)||v}function ni(s){return 0==(1&s)}function Qd(s,o,c,u){if(null===o)return-1;let h=0;if(u||!c){let p=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)p=!0;else{if(1===v||2===v){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=p?1:2}return-1}return function Xd(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const u=s[c];if("number"==typeof u)return-1;if(u===o)return c;c++}return-1}(o,s)}function Jd(s,o,c=!1){for(let u=0;u<o.length;u++)if(Yd(s,o[u],c))return!0;return!1}function Vp(s,o){return s?":not("+o.trim()+")":o}function Bp(s){let o=s[0],c=1,u=2,h="",p=!1;for(;c<s.length;){let v=s[c];if("string"==typeof v)if(2&u){const C=s[++c];h+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&u?h+="."+v:4&u&&(h+=" "+v);else""!==h&&!ni(v)&&(o+=Vp(p,h),h=""),u=v,p=p||!ni(u);c++}return""!==h&&(o+=Vp(p,h)),o}function Vl(s){return Ps(()=>{const o=jp(s),c={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===lo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Os.Emulated,styles:s.styles||Wt,_:null,schemas:s.schemas||null,tView:null,id:""};Gl(c);const u=s.dependencies;return c.directiveDefs=uo(u,!1),c.pipeDefs=uo(u,!0),c.id=function rh(s){let o=0;const c=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of c)o=Math.imul(31,o)+h.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(c),c})}function Bl(s){return Ft(s)||gr(s)}function th(s){return null!==s}function jl(s){return Ps(()=>({type:s.type,bootstrap:s.bootstrap||Wt,declarations:s.declarations||Wt,imports:s.imports||Wt,exports:s.exports||Wt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function $l(s,o){if(null==s)return xi;const c={};for(const u in s)if(s.hasOwnProperty(u)){let h=s[u],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),c[h]=u,o&&(o[h]=p)}return c}function Hl(s){return Ps(()=>{const o=jp(s);return Gl(o),o})}function zl(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ft(s){return s[zo]||null}function gr(s){return s[va]||null}function mr(s){return s[Fl]||null}function Ia(s){const o=Ft(s)||gr(s)||mr(s);return null!==o&&o.standalone}function Vr(s,o){const c=s[Ll]||null;if(!c&&!0===o)throw new Error(`Type ${X(s)} does not have '\u0275mod' property.`);return c}function jp(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||xi,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Wt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$l(s.inputs,o),outputs:$l(s.outputs)}}function Gl(s){s.features?.forEach(o=>o(s))}function uo(s,o){if(!s)return null;const c=o?mr:Bl;return()=>("function"==typeof s?s():s).map(u=>c(u)).filter(th)}const bn=0,je=1,Et=2,fn=3,mi=4,Fs=5,_r=6,Wo=7,Bn=8,Ls=9,ho=10,gt=11,bc=12,Dy=13,_i=14,Xn=15,Ea=16,yi=17,Br=18,Us=19,$p=20,qo=21,fs=22,Wl=23,Pi=24,Lt=25,sh=1,Tc=2,jr=7,ba=9,er=11;function ri(s){return Array.isArray(s)&&"object"==typeof s[sh]}function xr(s){return Array.isArray(s)&&!0===s[sh]}function oh(s){return 0!=(4&s.flags)}function Vs(s){return s.componentOffset>-1}function Sc(s){return 1==(1&s.flags)}function Oi(s){return!!s.template}function Ta(s){return 0!=(512&s[Et])}function Bs(s,o){return s.hasOwnProperty(Ns)?s[Ns]:null}let ur=null,dh=!1;function Hr(s){const o=ur;return ur=s,o}const hh={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Fy(s){if(!Yl(s)||s.dirty){if(!s.producerMustRecompute(s)&&!Uy(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function Ly(s){s.dirty=!0,function Wp(s){if(void 0===s.liveConsumerNode)return;const o=dh;dh=!0;try{for(const c of s.liveConsumerNode)c.dirty||Ly(c)}finally{dh=o}}(s),s.consumerMarkedDirty?.(s)}function qp(s){return s&&(s.nextProducerIndex=0),Hr(s)}function Kl(s,o){if(Hr(o),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(Yl(s))for(let c=s.nextProducerIndex;c<s.producerNode.length;c++)Mc(s.producerNode[c],s.producerIndexOfThis[c]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function Uy(s){po(s);for(let o=0;o<s.producerNode.length;o++){const c=s.producerNode[o],u=s.producerLastReadVersion[o];if(u!==c.version||(Fy(c),u!==c.version))return!0}return!1}function ph(s){if(po(s),Yl(s))for(let o=0;o<s.producerNode.length;o++)Mc(s.producerNode[o],s.producerIndexOfThis[o]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function Mc(s,o){if(function By(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),po(s),1===s.liveConsumerNode.length)for(let u=0;u<s.producerNode.length;u++)Mc(s.producerNode[u],s.producerIndexOfThis[u]);const c=s.liveConsumerNode.length-1;if(s.liveConsumerNode[o]=s.liveConsumerNode[c],s.liveConsumerIndexOfThis[o]=s.liveConsumerIndexOfThis[c],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,o<s.liveConsumerNode.length){const u=s.liveConsumerIndexOfThis[o],h=s.liveConsumerNode[o];po(h),h.producerIndexOfThis[u]=o}}function Yl(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function po(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let $y=null;function _h(s){const o=Hr(null);try{return s()}finally{Hr(o)}}const Xp=()=>{},IE=(()=>({...hh,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:Xp}))();class Wy{constructor(o,c,u){this.previousValue=o,this.currentValue=c,this.firstChange=u}isFirstChange(){return this.firstChange}}function yh(){return vh}function vh(s){return s.type.prototype.ngOnChanges&&(s.setInput=js),Xl}function Xl(){const s=Ch(this),o=s?.current;if(o){const c=s.previous;if(c===xi)s.previous=o;else for(let u in o)c[u]=o[u];s.current=null,this.ngOnChanges(o)}}function js(s,o,c,u){const h=this.declaredInputs[c],p=Ch(s)||function qy(s,o){return s[Aa]=o}(s,{previous:xi,current:null}),v=p.current||(p.current={}),C=p.previous,b=C[h];v[h]=new Wy(b&&b.currentValue,o,C===xi),s[u]=o}yh.ngInherit=!0;const Aa="__ngSimpleChanges__";function Ch(s){return s[Aa]||null}const ps=function(s,o,c){},eg="svg";function sn(s){for(;Array.isArray(s);)s=s[bn];return s}function $s(s,o){return sn(o[s])}function zr(s,o){return sn(o[s.index])}function Ih(s,o){return s.data[o]}function Ma(s,o){return s[o]}function ii(s,o){const c=o[s];return ri(c)?c:c[bn]}function go(s,o){return null==o?null:s[o]}function tg(s){s[yi]=0}function Pc(s){1024&s[Et]||(s[Et]|=1024,Zn(s,1))}function Zy(s){1024&s[Et]&&(s[Et]&=-1025,Zn(s,-1))}function Zn(s,o){let c=s[fn];if(null===c)return;c[Fs]+=o;let u=c;for(c=c[fn];null!==c&&(1===o&&1===u[Fs]||-1===o&&0===u[Fs]);)c[Fs]+=o,u=c,c=c[fn]}const yt={lFrame:fg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function xa(){return yt.bindingsEnabled}function ye(){return yt.lFrame.lView}function Bt(){return yt.lFrame.tView}function Yi(s){return yt.lFrame.contextLView=s,s[Bn]}function Dh(s){return yt.lFrame.contextLView=null,s}function yr(){let s=iu();for(;null!==s&&64===s.type;)s=s.parent;return s}function iu(){return yt.lFrame.currentTNode}function gs(s,o){const c=yt.lFrame;c.currentTNode=s,c.isParent=o}function ag(){return yt.lFrame.isParent}function vr(){const s=yt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Rc(){return yt.lFrame.bindingIndex++}function ms(s){const o=yt.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function ug(s,o){const c=yt.lFrame;c.bindingIndex=c.bindingRootIndex=s,dg(o)}function dg(s){yt.lFrame.currentDirectiveIndex=s}function ev(){return yt.lFrame.currentQueryIndex}function hg(s){yt.lFrame.currentQueryIndex=s}function ME(s){const o=s[je];return 2===o.type?o.declTNode:1===o.type?s[_r]:null}function Ah(s,o,c){if(c&ht.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||c&ht.Host||(h=ME(p),null===h||(p=p[_i],10&h.type))););if(null===h)return!1;o=h,s=p}const u=yt.lFrame=Hs();return u.currentTNode=o,u.lView=s,!0}function Gr(s){const o=Hs(),c=s[je];yt.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function Hs(){const s=yt.lFrame,o=null===s?null:s.child;return null===o?fg(s):o}function fg(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function pn(){const s=yt.lFrame;return yt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const dt=pn;function Cr(){const s=pn();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Wr(){return yt.lFrame.selectedIndex}function zs(s){yt.lFrame.selectedIndex=s}function wn(){const s=yt.lFrame;return Ih(s.tView,s.selectedIndex)}function yo(){yt.lFrame.currentNamespace=eg}function wt(){!function tv(){yt.lFrame.currentNamespace=null}()}let kc=!0;function Gs(){return kc}function Ws(s){kc=s}function Pa(s,o){for(let c=o.directiveStart,u=o.directiveEnd;c<u;c++){const p=s.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:D,ngOnDestroy:M}=p;v&&(s.contentHooks??=[]).push(-c,v),C&&((s.contentHooks??=[]).push(c,C),(s.contentCheckHooks??=[]).push(c,C)),b&&(s.viewHooks??=[]).push(-c,b),D&&((s.viewHooks??=[]).push(c,D),(s.viewCheckHooks??=[]).push(c,D)),null!=M&&(s.destroyHooks??=[]).push(c,M)}}function Zo(s,o,c){au(s,o,3,c)}function Oa(s,o,c,u){(3&s[Et])===c&&au(s,o,c,u)}function ou(s,o){let c=s[Et];(3&c)===o&&(c&=8191,c+=1,s[Et]=c)}function au(s,o,c,u){const p=u??-1,v=o.length-1;let C=0;for(let b=void 0!==u?65535&s[yi]:0;b<v;b++)if("number"==typeof o[b+1]){if(C=o[b],null!=u&&C>=u)break}else o[b]<0&&(s[yi]+=65536),(C<p||-1==p)&&(Fc(s,c,o,b),s[yi]=(4294901760&s[yi])+b+2),b++}function qs(s,o){ps(4,s,o);const c=Hr(null);try{o.call(s)}finally{Hr(c),ps(5,s,o)}}function Fc(s,o,c,u){const h=c[u]<0,p=c[u+1],C=s[h?-c[u]:c[u]];h?s[Et]>>13<s[yi]>>16&&(3&s[Et])===o&&(s[Et]+=8192,qs(C,p)):qs(C,p)}const _s=-1;class Ko{constructor(o,c,u){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=u}}function cu(s){return s!==_s}function vi(s){return 32767&s}function an(s,o){let c=function Tn(s){return s>>16}(s),u=o;for(;c>0;)u=u[_i],c--;return u}let Na=!0;function wr(s){const o=Na;return Na=s,o}const Bc=255,jc=5;let nv=0;const tr={};function Dn(s,o){const c=lu(s,o);if(-1!==c)return c;const u=o[je];u.firstCreatePass&&(s.injectorIndex=o.length,Qi(u.data,s),Qi(o,null),Qi(u.blueprint,null));const h=Qo(s,o),p=s.injectorIndex;if(cu(h)){const v=vi(h),C=an(h,o),b=C[je].data;for(let D=0;D<8;D++)o[p+D]=C[v+D]|b[v+D]}return o[p+8]=h,p}function Qi(s,o){s.push(0,0,0,0,0,0,0,0,o)}function lu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Qo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,u=null,h=o;for(;null!==h;){if(u=wg(h),null===u)return _s;if(c++,h=h[_i],-1!==u.injectorIndex)return u.injectorIndex|c<<16}return _s}function Ra(s,o,c){!function wo(s,o,c){let u;"string"==typeof c?u=c.charCodeAt(0)||0:c.hasOwnProperty(Ca)&&(u=c[Ca]),null==u&&(u=c[Ca]=nv++);const h=u&Bc;o.data[s+(h>>jc)]|=1<<h}(s,o,c)}function Oh(s,o,c){if(c&ht.Optional||void 0!==s)return s;Ue()}function ka(s,o,c,u){if(c&ht.Optional&&void 0===u&&(u=null),!(c&(ht.Self|ht.Host))){const h=s[Ls],p=rn(void 0);try{return h?h.get(o,u,c&ht.Optional):ti(o,u,c&ht.Optional)}finally{rn(p)}}return Oh(u,0,c)}function Nh(s,o,c,u=ht.Default,h){if(null!==s){if(2048&o[Et]&&!(u&ht.Self)){const v=function Cg(s,o,c,u,h){let p=s,v=o;for(;null!==p&&null!==v&&2048&v[Et]&&!(512&v[Et]);){const C=uu(p,v,c,u|ht.Self,tr);if(C!==tr)return C;let b=p.parent;if(!b){const D=v[$p];if(D){const M=D.get(c,tr,u);if(M!==tr)return M}b=wg(v),v=v[_i]}p=b}return h}(s,o,c,u,tr);if(v!==tr)return v}const p=uu(s,o,c,u,tr);if(p!==tr)return p}return ka(o,c,u,h)}function uu(s,o,c,u,h){const p=function Eo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ca)?s[Ca]:void 0;return"number"==typeof o?o>=0?o&Bc:bo:o}(c);if("function"==typeof p){if(!Ah(o,s,u))return u&ht.Host?Oh(h,0,u):ka(o,c,u,h);try{let v;if(v=p(u),null!=v||u&ht.Optional)return v;Ue()}finally{dt()}}else if("number"==typeof p){let v=null,C=lu(s,o),b=_s,D=u&ht.Host?o[Xn][_r]:null;for((-1===C||u&ht.SkipSelf)&&(b=-1===C?Qo(s,o):o[C+8],b!==_s&&_g(u,!1)?(v=o[je],C=vi(b),o=an(b,o)):C=-1);-1!==C;){const M=o[je];if(mg(p,C,M.data)){const L=Tt(C,o,c,v,u,D);if(L!==tr)return L}b=o[C+8],b!==_s&&_g(u,o[je].data[C+8]===D)&&mg(p,C,o)?(v=M,C=vi(b),o=an(b,o)):C=-1}}return h}function Tt(s,o,c,u,h,p){const v=o[je],C=v.data[s+8],M=Io(C,v,c,null==u?Vs(C)&&Na:u!=v&&0!=(3&C.type),h&ht.Host&&p===C);return null!==M?Jo(o,v,M,C):tr}function Io(s,o,c,u,h){const p=s.providerIndexes,v=o.data,C=1048575&p,b=s.directiveStart,M=p>>20,q=h?C+M:s.directiveEnd;for(let Y=u?C:C+M;Y<q;Y++){const ue=v[Y];if(Y<b&&c===ue||Y>=b&&ue.type===c)return Y}if(h){const Y=v[b];if(Y&&Oi(Y)&&Y.type===c)return b}return null}function Jo(s,o,c,u){let h=s[c];const p=o.data;if(function Lc(s){return s instanceof Ko}(h)){const v=h;v.resolving&&function ke(s,o){const c=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ee(-200,`Circular dependency in DI detected for ${s}${c}`)}(function fe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():re(s)}(p[c]));const C=wr(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?rn(v.injectImpl):null;Ah(s,u,ht.Default);try{h=s[c]=v.factory(void 0,p,s,u),o.firstCreatePass&&c>=u.directiveStart&&function Pr(s,o,c){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(u){const v=vh(o);(c.preOrderHooks??=[]).push(s,v),(c.preOrderCheckHooks??=[]).push(s,v)}h&&(c.preOrderHooks??=[]).push(0-s,h),p&&((c.preOrderHooks??=[]).push(s,p),(c.preOrderCheckHooks??=[]).push(s,p))}(c,p[c],o)}finally{null!==D&&rn(D),wr(C),v.resolving=!1,dt()}}return h}function mg(s,o,c){return!!(c[o+(s>>jc)]&1<<s)}function _g(s,o){return!(s&ht.Self||s&ht.Host&&o)}class nr{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,u){return Nh(this._tNode,this._lView,o,Zt(u),c)}}function bo(){return new nr(yr(),ye())}function vg(s){return Ps(()=>{const o=s.prototype.constructor,c=o[Ns]||du(o),u=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==u;){const p=h[Ns]||du(h);if(p&&p!==c)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function du(s){return Ae(s)?()=>{const o=du(ve(s));return o&&o()}:Bs(s)}function wg(s){const o=s[je],c=o.type;return 2===c?o.declTNode:1===c?s[_r]:null}function hu(s){return function gg(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const u=c.length;let h=0;for(;h<u;){const p=c[h];if(Rs(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<u&&"string"==typeof c[h];)h++;else{if(p===o)return c[h+1];h+=2}}}return null}(yr(),s)}const Xo="__parameters__";function Ht(s,o,c){return Ps(()=>{const u=function To(s){return function(...c){if(s){const u=s(...c);for(const h in u)this[h]=u[h]}}}(o);function h(...p){if(this instanceof h)return u.apply(this,p),this;const v=new h(...p);return C.annotation=v,C;function C(b,D,M){const L=b.hasOwnProperty(Xo)?b[Xo]:Object.defineProperty(b,Xo,{value:[]})[Xo];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(v),b}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function La(s,o){s.forEach(c=>Array.isArray(c)?La(c,o):o(c))}function iv(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function Ua(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ci(s,o,c){let u=Va(s,o);return u>=0?s[1|u]=c:(u=~u,function bg(s,o,c,u){let h=s.length;if(h==o)s.push(c,u);else if(1===h)s.push(u,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=c,s[o+1]=u}}(s,u,o,c)),u}function Fh(s,o){const c=Va(s,o);if(c>=0)return s[1|c]}function Va(s,o){return function yu(s,o,c){let u=0,h=s.length>>c;for(;h!==u;){const p=u+(h-u>>1),v=s[p<<c];if(o===v)return p<<c;v>o?h=p:u=p+1}return~(h<<c)}(s,o,1)}const oe=hn(Ht("Optional"),8),$e=hn(Ht("SkipSelf"),4);function Sg(s){return 128==(128&s.flags)}var Vh=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(Vh||{});const Bh=new Map;let wx=0;const xg="__ngContext__";function oi(s,o){ri(o)?(s[xg]=o[Us],function UE(s){Bh.set(s[Us],s)}(o)):s[xg]=o}let Hh;function Ji(s,o){return Hh(s,o)}function ia(s){const o=s[fn];return xr(o)?o[fn]:o}function jE(s){return zh(s[bc])}function _v(s){return zh(s[mi])}function zh(s){for(;null!==s&&!xr(s);)s=s[mi];return s}function bu(s,o,c,u,h){if(null!=u){let p,v=!1;xr(u)?p=u:ri(u)&&(v=!0,u=u[bn]);const C=sn(u);0===s&&null!==c?null==h?GE(o,c,C):Jc(o,c,C,h||null,!0):1===s&&null!==c?Jc(o,c,C,h||null,!0):2===s?function kg(s,o,c){const u=Rg(s,o);u&&function Fx(s,o,c,u){s.removeChild(o,c,u)}(s,u,o,c)}(o,C,v):3===s&&o.destroyNode(C),null!=p&&function Ux(s,o,c,u,h){const p=c[jr];p!==sn(c)&&bu(o,s,u,p,h);for(let C=er;C<c.length;C++){const b=c[C];Yh(b[je],b,s,o,u,p)}}(o,s,p,c,h)}}function Og(s,o,c){return s.createElement(o,c)}function $E(s,o){const c=s[ba],u=c.indexOf(o);Zy(o),c.splice(u,1)}function Ng(s,o){if(s.length<=er)return;const c=er+o,u=s[c];if(u){const h=u[Ea];null!==h&&h!==s&&$E(h,u),o>0&&(s[c-1][mi]=u[mi]);const p=Ua(s,er+o);!function Px(s,o){Yh(s,o,o[gt],2,null,null),o[bn]=null,o[_r]=null}(u[je],u);const v=p[Br];null!==v&&v.detachView(p[je]),u[fn]=null,u[mi]=null,u[Et]&=-129}return u}function yv(s,o){if(!(256&o[Et])){const c=o[gt];o[Wl]&&ph(o[Wl]),o[Pi]&&ph(o[Pi]),c.destroyNode&&Yh(s,o,c,3,null,null),function Ox(s){let o=s[bc];if(!o)return HE(s[je],s);for(;o;){let c=null;if(ri(o))c=o[bc];else{const u=o[er];u&&(c=u)}if(!c){for(;o&&!o[mi]&&o!==s;)ri(o)&&HE(o[je],o),o=o[fn];null===o&&(o=s),ri(o)&&HE(o[je],o),c=o&&o[mi]}o=c}}(o)}}function HE(s,o){if(!(256&o[Et])){o[Et]&=-129,o[Et]|=256,function zE(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let u=0;u<c.length;u+=2){const h=o[c[u]];if(!(h instanceof Ko)){const p=c[u+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const C=h[p[v]],b=p[v+1];ps(4,C,b);try{b.call(C)}finally{ps(5,C,b)}}else{ps(4,h,p);try{p.call(h)}finally{ps(5,h,p)}}}}}(s,o),function kx(s,o){const c=s.cleanup,u=o[Wo];if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const v=c[p+3];v>=0?u[v]():u[-v].unsubscribe(),p+=2}else c[p].call(u[c[p+1]]);null!==u&&(o[Wo]=null);const h=o[qo];if(null!==h){o[qo]=null;for(let p=0;p<h.length;p++)(0,h[p])()}}(s,o),1===o[je].type&&o[gt].destroy();const c=o[Ea];if(null!==c&&xr(o[fn])){c!==o[fn]&&$E(c,o);const u=o[Br];null!==u&&u.detachView(s)}!function jh(s){Bh.delete(s[Us])}(o)}}function Tu(s,o,c){return function Qc(s,o,c){let u=o;for(;null!==u&&40&u.type;)u=(o=u).parent;if(null===u)return c[bn];{const{componentOffset:h}=u;if(h>-1){const{encapsulation:p}=s.data[u.directiveStart+h];if(p===Os.None||p===Os.Emulated)return null}return zr(u,c)}}(s,o.parent,c)}function Jc(s,o,c,u,h){s.insertBefore(o,c,u,h)}function GE(s,o,c){s.appendChild(o,c)}function WE(s,o,c,u,h){null!==u?Jc(s,o,c,u,h):GE(s,o,c)}function Rg(s,o){return s.parentNode(o)}let Cv,JE,Lg,vv=function ZE(s,o,c){return 40&s.type?zr(s,c):null};function Zh(s,o,c,u){const h=Tu(s,u,o),p=o[gt],C=function qE(s,o,c){return vv(s,o,c)}(u.parent||o[_r],u,o);if(null!=h)if(Array.isArray(c))for(let b=0;b<c.length;b++)WE(p,h,c[b],C,!1);else WE(p,h,c,C,!1);void 0!==Cv&&Cv(p,u,o,c,h)}function Ao(s,o){if(null!==o){const c=o.type;if(3&c)return zr(o,s);if(4&c)return Iv(-1,s[o.index]);if(8&c){const u=o.child;if(null!==u)return Ao(s,u);{const h=s[o.index];return xr(h)?Iv(-1,h):sn(h)}}if(32&c)return Ji(o,s)()||sn(s[o.index]);{const u=wv(s,o);return null!==u?Array.isArray(u)?u[0]:Ao(ia(s[Xn]),u):Ao(s,o.next)}}return null}function wv(s,o){return null!==o?s[Xn][_r].projection[o.projection]:null}function Iv(s,o){const c=er+s+1;if(c<o.length){const u=o[c],h=u[je].firstChild;if(null!==h)return Ao(u,h)}return o[jr]}function Kh(s,o,c,u,h,p,v){for(;null!=c;){const C=u[c.index],b=c.type;if(v&&0===o&&(C&&oi(sn(C),u),c.flags|=2),32!=(32&c.flags))if(8&b)Kh(s,o,c.child,u,h,p,!1),bu(o,s,h,C,p);else if(32&b){const D=Ji(c,u);let M;for(;M=D();)bu(o,s,h,M,p);bu(o,s,h,C,p)}else 16&b?bv(s,o,u,c,h,p):bu(o,s,h,C,p);c=v?c.projectionNext:c.next}}function Yh(s,o,c,u,h,p){Kh(c,u,s.firstChild,o,h,p,!1)}function bv(s,o,c,u,h,p){const v=c[Xn],b=v[_r].projection[u.projection];if(Array.isArray(b))for(let D=0;D<b.length;D++)bu(o,s,h,b[D],p);else{let D=b;const M=v[fn];Sg(u)&&(D.flags|=128),Kh(s,o,D,M,h,p,!0)}}function YE(s,o,c){""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c)}function Qh(s,o,c){const{mergedAttrs:u,classes:h,styles:p}=c;null!==u&&wa(s,o,u),null!==h&&YE(s,o,h),null!==p&&function Bx(s,o,c){s.setAttribute(o,"style",c)}(s,o,p)}function XE(s){JE=s}function nb(s){return function Dv(){if(void 0===Lg&&(Lg=null,Rt.trustedTypes))try{Lg=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Lg}()?.createScriptURL(s)||s}class rb{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${at})`}}function ja(s){return s instanceof rb?s.changingThisBreaksApplicationSecurity:s}function Au(s,o){const c=function Ug(s){return s instanceof rb&&s.getTypeName()||null}(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see ${at})`)}return c===o}const Jh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var tf=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(tf||{});function nf(s){const o=rf();return o?o.sanitize(tf.URL,s)||"":Au(s,"URL")?ja(s):function Bg(s){return(s=String(s)).match(Jh)?s:"unsafe:"+s}(re(s))}function hb(s){const o=rf();if(o)return nb(o.sanitize(tf.RESOURCE_URL,s)||"");if(Au(s,"ResourceURL"))return nb(ja(s));throw new ee(904,!1)}function tP(s,o,c){return function eP(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?hb:nf}(o,c)(s)}function rf(){const s=ye();return s&&s[ho].sanitizer}class cn{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=pt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Mu=new cn("ENVIRONMENT_INITIALIZER"),pb=new cn("INJECTOR",-1),gb=new cn("INJECTOR_DEF_TYPES");class $g{get(o,c=ot){if(c===ot){const u=new Error(`NullInjectorError: No provider for ${X(o)}!`);throw u.name="NullInjectorError",u}return c}}function Ov(s){return{\u0275providers:s}}function nP(...s){return{\u0275providers:mb(0,s),\u0275fromNgModule:!0}}function mb(s,...o){const c=[],u=new Set;let h;const p=v=>{c.push(v)};return La(o,v=>{const C=v;Hg(C,p,[],u)&&(h||=[],h.push(C))}),void 0!==h&&_b(h,p),c}function _b(s,o){for(let c=0;c<s.length;c++){const{ngModule:u,providers:h}=s[c];Nv(h,p=>{o(p,u)})}}function Hg(s,o,c,u){if(!(s=ve(s)))return!1;let h=null,p=Mr(s);const v=!p&&Ft(s);if(p||v){if(v&&!v.standalone)return!1;h=s}else{const b=s.ngModule;if(p=Mr(b),!p)return!1;h=b}const C=u.has(h);if(v){if(C)return!1;if(u.add(h),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const D of b)Hg(D,o,c,u)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let D;u.add(h);try{La(p.imports,M=>{Hg(M,o,c,u)&&(D||=[],D.push(M))})}finally{}void 0!==D&&_b(D,o)}if(!C){const D=Bs(h)||(()=>new h);o({provide:h,useFactory:D,deps:Wt},h),o({provide:gb,useValue:h,multi:!0},h),o({provide:Mu,useValue:()=>Be(h),multi:!0},h)}const b=p.providers;if(null!=b&&!C){const D=s;Nv(b,M=>{o(M,D)})}}}return h!==s&&void 0!==s.providers}function Nv(s,o){for(let c of s)Te(c)&&(c=c.\u0275providers),Array.isArray(c)?Nv(c,o):o(c)}const QU=U({provide:String,useValue:U});function yb(s){return null!==s&&"object"==typeof s&&QU in s}function xu(s){return"function"==typeof s}const j=new cn("Set Injector scope."),zg={},Gg={};let Rv;function sf(){return void 0===Rv&&(Rv=new $g),Rv}class Cs{}class $a extends Cs{get destroyed(){return this._destroyed}constructor(o,c,u,h){super(),this.parent=c,this.source=u,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,el(o,v=>this.processProvider(v)),this.records.set(pb,Pu(void 0,this)),h.has("environment")&&this.records.set(Cs,Pu(void 0,this));const p=this.records.get(j);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(gb.multi,Wt,ht.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of o)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const c=K(this),u=rn(void 0);try{return o()}finally{K(c),rn(u)}}get(o,c=ot,u=ht.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Ul))return o[Ul](this);u=Zt(u);const p=K(this),v=rn(void 0);try{if(!(u&ht.SkipSelf)){let b=this.records.get(o);if(void 0===b){const D=function lP(s){return"function"==typeof s||"object"==typeof s&&s instanceof cn}(o)&&En(o);b=D&&this.injectableDefInScope(D)?Pu(Wg(o),zg):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(u&ht.Self?sf():this.parent).get(o,c=u&ht.Optional&&c===ot?null:c)}catch(C){if("NullInjectorError"===C.name){if((C[Vt]=C[Vt]||[]).unshift(X(o)),p)throw C;return function Mi(s,o,c,u){const h=s[Vt];throw o[O]&&h.unshift(o[O]),s.message=function Cc(s,o,c,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=X(o);if(Array.isArray(o))h=o.map(X).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];p.push(v+":"+("string"==typeof C?JSON.stringify(C):X(C)))}h=`{${p.join(", ")}}`}return`${c}${u?"("+u+")":""}[${h}]: ${s.replace(H,"\n  ")}`}("\n"+s.message,h,c,u),s.ngTokenPath=h,s[Vt]=null,s}(C,o,"R3InjectorError",this.source)}throw C}finally{rn(v),K(p)}}resolveInjectorInitializers(){const o=K(this),c=rn(void 0);try{const h=this.get(Mu.multi,Wt,ht.Self);for(const p of h)p()}finally{K(o),rn(c)}}toString(){const o=[],c=this.records;for(const u of c.keys())o.push(X(u));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(o){let c=xu(o=ve(o))?o:ve(o&&o.provide);const u=function oP(s){return yb(s)?Pu(void 0,s.useValue):Pu(vb(s),zg)}(o);if(xu(o)||!0!==o.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=Pu(void 0,zg,!0),h.factory=()=>Ct(h.multi),this.records.set(c,h)),c=o,h.multi.push(o)}this.records.set(c,u)}hydrate(o,c){return c.value===zg&&(c.value=Gg,c.value=c.factory()),"object"==typeof c.value&&c.value&&function cP(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(o){if(!o.providedIn)return!1;const c=ve(o.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(o){const c=this._onDestroyHooks.indexOf(o);-1!==c&&this._onDestroyHooks.splice(c,1)}}function Wg(s){const o=En(s),c=null!==o?o.factory:Bs(s);if(null!==c)return c;if(s instanceof cn)throw new ee(204,!1);if(s instanceof Function)return function kv(s){const o=s.length;if(o>0)throw function Do(s,o){const c=[];for(let u=0;u<s;u++)c.push(o);return c}(o,"?"),new ee(204,!1);const c=function fi(s){return s&&(s[cr]||s[Lr])||null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new ee(204,!1)}function vb(s,o,c){let u;if(xu(s)){const h=ve(s);return Bs(h)||Wg(h)}if(yb(s))u=()=>ve(s.useValue);else if(function sP(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...Ct(s.deps||[]));else if(function iP(s){return!(!s||!s.useExisting)}(s))u=()=>Be(ve(s.useExisting));else{const h=ve(s&&(s.useClass||s.provide));if(!function aP(s){return!!s.deps}(s))return Bs(h)||Wg(h);u=()=>new h(...Ct(s.deps))}return u}function Pu(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function el(s,o){for(const c of s)Array.isArray(c)?el(c,o):c&&Te(c)?el(c.\u0275providers,o):o(c)}const Cb=new cn("AppId",{providedIn:"root",factory:()=>uP}),uP="ng",wb=new cn("Platform Initializer"),qg=new cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),dP=new cn("CSP nonce",{providedIn:"root",factory:()=>function Xc(){if(void 0!==JE)return JE;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Hv=(s,o,c)=>null;function ws(s,o,c=!1){return Hv(s,o,c)}class vP{}class Tb{}class cf{resolveComponentFactory(o){throw function CP(s){const o=Error(`No component factory found for ${X(s)}.`);return o.ngComponent=s,o}(o)}}let Jg=(()=>{class s{static#e=this.NULL=new cf}return s})();function lf(){return ku(yr(),ye())}function ku(s,o){return new uf(zr(s,o))}let uf=(()=>{class s{constructor(c){this.nativeElement=c}static#e=this.__NG_ELEMENT_ID__=lf}return s})();function wP(s){return s instanceof uf?s.nativeElement:s}class Db{}let IP=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Sb(){const s=ye(),c=ii(yr().index,s);return(ri(c)?c:s)[gt]}()}return s})(),EP=(()=>{class s{static#e=this.\u0275prov=pt({token:s,providedIn:"root",factory:()=>null})}return s})();class Xg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const qv=new Xg("16.2.9"),Zv={};function Pb(s,o=null,c=null,u){const h=Ob(s,o,c,u);return h.resolveInjectorInitializers(),h}function Ob(s,o=null,c=null,u,h=new Set){const p=[c||Wt,nP(s)];return u=u||("object"==typeof s?void 0:X(s)),new $a(p,o||sf(),u||null,h)}let Js=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=ot;static#t=this.NULL=new $g;static create(c,u){if(Array.isArray(c))return Pb({name:""},u,c,"");{const h=c.name??"";return Pb({name:h},c.parent,c.providers,h)}}static#n=this.\u0275prov=pt({token:s,providedIn:"any",factory:()=>Be(pb)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function Yv(s){return s.ngOriginalError}class Li{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o);this._console.error("ERROR",o),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&Yv(o);for(;c&&Yv(c);)c=Yv(c);return c||null}}function Jv(s){return o=>{setTimeout(s,void 0,o)}}const Mo=class hf extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,u){let h=o,p=c||(()=>null),v=u;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),p=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(p=Jv(p),h&&(h=Jv(h)),v&&(v=Jv(v)));const C=super.subscribe({next:h,error:p,complete:v});return o instanceof V.w0&&o.add(C),C}};function Rb(...s){}class Nr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mo(!1),this.onMicrotaskEmpty=new Mo(!1),this.onStable=new Mo(!1),this.onError=new Mo(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&c,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function AP(){const s="function"==typeof Rt.requestAnimationFrame;let o=Rt[s?"requestAnimationFrame":"setTimeout"],c=Rt[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&c){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function PP(s){const o=()=>{!function xP(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Rt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,e0(s),s.isCheckStableRunning=!0,Xv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),e0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,u,h,p,v,C)=>{if(function Fu(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(C))return c.invokeTask(h,p,v,C);try{return kb(s),c.invokeTask(h,p,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Fb(s)}},onInvoke:(c,u,h,p,v,C,b)=>{try{return kb(s),c.invoke(h,p,v,C,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),Fb(s)}},onHasTask:(c,u,h,p)=>{c.hasTask(h,p),u===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,e0(s),Xv(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,u,h,p)=>(c.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Nr.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(Nr.isInAngularZone())throw new ee(909,!1)}run(o,c,u){return this._inner.run(o,c,u)}runTask(o,c,u,h){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+h,o,MP,Rb,Rb);try{return p.runTask(v,c,u)}finally{p.cancelTask(v)}}runGuarded(o,c,u){return this._inner.runGuarded(o,c,u)}runOutsideAngular(o){return this._outer.run(o)}}const MP={};function Xv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function e0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function kb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Fb(s){s._nesting--,Xv(s)}class OP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mo,this.onMicrotaskEmpty=new Mo,this.onStable=new Mo,this.onError=new Mo}run(o,c,u){return o.apply(c,u)}runGuarded(o,c,u){return o.apply(c,u)}runOutsideAngular(o){return o()}runTask(o,c,u,h){return o.apply(c,u)}}const Lb=new cn("",{providedIn:"root",factory:Ub});function Ub(){const s=Ze(Nr);let o=!0;const c=new F.y(h=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(o),h.complete()})}),u=new F.y(h=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{Nr.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,h.next(!0))})})});const v=s.onUnstable.subscribe(()=>{Nr.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{p.unsubscribe(),v.unsubscribe()}});return(0,te.T)(c,u.pipe((0,Re.B)()))}function oa(s){return s instanceof Function?s():s}let t0=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=pt({token:s,providedIn:"root",factory:()=>new s})}return s})();function ff(s){for(;s;){s[Et]|=64;const o=ia(s);if(Ta(s)&&!o)return s;s=o}return null}const zb=new cn("",{providedIn:"root",factory:()=>!1});let gf=null;function qb(s,o){return s[o]??mf()}function Zb(s,o){const c=mf();c.producerNode?.length&&(s[o]=gf,c.lView=s,gf=Yb())}const Kb={...hh,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{ff(s.lView)},lView:null};function Yb(){return Object.create(Kb)}function mf(){return gf??=Yb(),gf}const Dt={};function Qb(s){Jb(Bt(),ye(),Wr()+s,!1)}function Jb(s,o,c,u){if(!u)if(3==(3&o[Et])){const p=s.preOrderCheckHooks;null!==p&&Zo(o,p,c)}else{const p=s.preOrderHooks;null!==p&&Oa(o,p,0,c)}zs(c)}function xo(s,o=ht.Default){const c=ye();return null===c?Be(s,o):Nh(yr(),c,ve(s),o)}function Xb(){throw new Error("invalid")}function _f(s,o,c,u,h,p,v,C,b,D,M){const L=o.blueprint.slice();return L[bn]=h,L[Et]=140|u,(null!==D||s&&2048&s[Et])&&(L[Et]|=2048),tg(L),L[fn]=L[_i]=s,L[Bn]=c,L[ho]=v||s&&s[ho],L[gt]=C||s&&s[gt],L[Ls]=b||s&&s[Ls]||null,L[_r]=p,L[Us]=function Mg(){return wx++}(),L[fs]=M,L[$p]=D,L[Xn]=2==o.type?s[Xn]:L,L}function nl(s,o,c,u,h){let p=s.data[o];if(null===p)p=function r0(s,o,c,u,h){const p=iu(),v=ag(),b=s.data[o]=function HP(s,o,c,u,h,p){let v=o?o.injectorIndex:-1,C=0;return function mo(){return null!==yt.skipHydrationRootTNode}()&&(C|=128),{type:c,index:u,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,c,o,u,h);return null===s.firstChild&&(s.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(s,o,c,u,h),function SE(){return yt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=c,p.value=u,p.attrs=h;const v=function Nc(){const s=yt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return gs(p,!0),p}function yf(s,o,c,u){if(0===c)return-1;const h=o.length;for(let p=0;p<c;p++)o.push(u),s.blueprint.push(u),s.data.push(null);return h}function eT(s,o,c,u,h){const p=qb(o,Wl),v=Wr(),C=2&u;try{zs(-1),C&&o.length>Lt&&Jb(s,o,Lt,!1),ps(C?2:0,h);const D=C?p:null,M=qp(D);try{null!==D&&(D.dirty=!1),c(u,h)}finally{Kl(D,M)}}finally{C&&null===o[Wl]&&Zb(o,Wl),zs(v),ps(C?3:1,h)}}function s0(s,o,c){if(oh(o)){const u=Hr(null);try{const p=o.directiveEnd;for(let v=o.directiveStart;v<p;v++){const C=s.data[v];C.contentQueries&&C.contentQueries(1,c[v],v)}}finally{Hr(u)}}}function o0(s,o,c){xa()&&(function KP(s,o,c,u){const h=c.directiveStart,p=c.directiveEnd;Vs(c)&&function nO(s,o,c){const u=zr(o,s),h=tT(c);let v=16;c.signals?v=4096:c.onPush&&(v=64);const C=nm(s,_f(s,h,null,v,u,o,null,s[ho].rendererFactory.createRenderer(u,c),null,null,null));s[o.index]=C}(o,c,s.data[h+c.componentOffset]),s.firstCreatePass||Dn(c,o),oi(u,o);const v=c.initialInputs;for(let C=h;C<p;C++){const b=s.data[C],D=Jo(o,s,C,c);oi(D,o),null!==v&&rO(0,C-h,D,b,0,v),Oi(b)&&(ii(c.index,o)[Bn]=Jo(o,s,C,c))}}(s,o,c,zr(c,o)),64==(64&c.flags)&&lT(s,o,c))}function vf(s,o,c=zr){const u=o.localNames;if(null!==u){let h=o.index+1;for(let p=0;p<u.length;p+=2){const v=u[p+1],C=-1===v?c(o,s):s[v];s[h++]=C}}}function tT(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=a0(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function a0(s,o,c,u,h,p,v,C,b,D,M){const L=Lt+u,q=L+h,Y=function nT(s,o){const c=[];for(let u=0;u<o;u++)c.push(u<s?null:Dt);return c}(L,q),ue="function"==typeof D?D():D;return Y[je]={type:s,blueprint:Y,template:c,queries:null,viewQuery:C,declTNode:o,data:Y.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:ue,incompleteFirstPass:!1,ssrId:M}}let c0=s=>null;function sT(s,o,c,u){for(let h in s)if(s.hasOwnProperty(h)){c=null===c?{}:c;const p=s[h];null===u?oT(c,o,h,p):u.hasOwnProperty(h)&&oT(c,o,u[h],p)}return c}function oT(s,o,c,u){s.hasOwnProperty(c)?s[c].push(o,u):s[c]=[o,u]}function Xi(s,o,c,u,h,p,v,C){const b=zr(o,c);let M,D=o.inputs;!C&&null!=D&&(M=D[u])?(rl(s,c,M,u,h),Vs(o)&&function aT(s,o){const c=ii(o,s);16&c[Et]||(c[Et]|=64)}(c,o.index)):3&o.type&&(u=function GP(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),h=null!=v?v(h,o.value||"",u):h,p.setProperty(b,u,h))}function l0(s,o,c,u){if(xa()){const h=null===u?null:{"":-1},p=function QP(s,o){const c=s.directiveRegistry;let u=null,h=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];if(Jd(o,v.selectors,!1))if(u||(u=[]),Oi(v))if(null!==v.findHostDirectiveDefs){const C=[];h=h||new Map,v.findHostDirectiveDefs(v,C,h),u.unshift(...C,v),u0(s,o,C.length)}else u.unshift(v),u0(s,o,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,u,h),u.push(v)}return null===u?null:[u,h]}(s,c);let v,C;null===p?v=C=null:[v,C]=p,null!==v&&cT(s,o,c,v,h,C),h&&function JP(s,o,c){if(o){const u=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=c[o[h+1]];if(null==p)throw new ee(-301,!1);u.push(o[h],p)}}}(c,u,h)}c.mergedAttrs=Ic(c.mergedAttrs,c.attrs)}function cT(s,o,c,u,h,p){for(let D=0;D<u.length;D++)Ra(Dn(c,o),s,u[D].type);!function eO(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}(c,s.data.length,u.length);for(let D=0;D<u.length;D++){const M=u[D];M.providersResolver&&M.providersResolver(M)}let v=!1,C=!1,b=yf(s,o,u.length,null);for(let D=0;D<u.length;D++){const M=u[D];c.mergedAttrs=Ic(c.mergedAttrs,M.hostAttrs),tO(s,c,o,b,M),XP(b,M,h),null!==M.contentQueries&&(c.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(c.flags|=64);const L=M.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks??=[]).push(c.index),v=!0),!C&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(c.index),C=!0),b++}!function zP(s,o,c){const h=o.directiveEnd,p=s.data,v=o.attrs,C=[];let b=null,D=null;for(let M=o.directiveStart;M<h;M++){const L=p[M],q=c?c.get(L):null,ue=q?q.outputs:null;b=sT(L.inputs,M,b,q?q.inputs:null),D=sT(L.outputs,M,D,ue);const Se=null===b||null===v||pi(o)?null:iO(b,M,v);C.push(Se)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=C,o.inputs=b,o.outputs=D}(s,c,p)}function lT(s,o,c){const u=c.directiveStart,h=c.directiveEnd,p=c.index,v=function AE(){return yt.lFrame.currentDirectiveIndex}();try{zs(p);for(let C=u;C<h;C++){const b=s.data[C],D=o[C];dg(C),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&YP(b,D)}}finally{zs(-1),dg(v)}}function YP(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function u0(s,o,c){o.componentOffset=c,(s.components??=[]).push(o.index)}function XP(s,o,c){if(c){if(o.exportAs)for(let u=0;u<o.exportAs.length;u++)c[o.exportAs[u]]=s;Oi(o)&&(c[""]=s)}}function tO(s,o,c,u,h){s.data[u]=h;const p=h.factory||(h.factory=Bs(h.type)),v=new Ko(p,Oi(h),xo);s.blueprint[u]=v,c[u]=v,function qP(s,o,c,u,h){const p=h.hostBindings;if(p){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~o.index;(function ZP(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(v)!=C&&v.push(C),v.push(c,u,p)}}(s,o,u,yf(s,c,h.hostVars,Dt),h)}function Po(s,o,c,u,h,p){const v=zr(s,o);!function d0(s,o,c,u,h,p,v){if(null==p)s.removeAttribute(o,h,c);else{const C=null==v?re(p):v(p,u||"",h);s.setAttribute(o,h,C,c)}}(o[gt],v,p,s.value,c,u,h)}function rO(s,o,c,u,h,p){const v=p[o];if(null!==v)for(let C=0;C<v.length;)uT(u,c,v[C++],v[C++],v[C++])}function uT(s,o,c,u,h){const p=Hr(null);try{const v=s.inputTransforms;null!==v&&v.hasOwnProperty(u)&&(h=v[u].call(o,h)),null!==s.setInput?s.setInput(o,h,c,u):o[u]=h}finally{Hr(p)}}function iO(s,o,c){let u=null,h=0;for(;h<c.length;){const p=c[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===u&&(u=[]);const v=s[p];for(let C=0;C<v.length;C+=2)if(v[C]===o){u.push(p,v[C+1],c[h+1]);break}}h+=2}else h+=2;else h+=4}return u}function dT(s,o,c,u){return[s,!0,!1,o,null,0,u,c,null,null,null]}function hT(s,o){const c=s.contentQueries;if(null!==c)for(let u=0;u<c.length;u+=2){const p=c[u+1];if(-1!==p){const v=s.data[p];hg(c[u]),v.contentQueries(2,o[p],p)}}}function nm(s,o){return s[bc]?s[Dy][mi]=o:s[bc]=o,s[Dy]=o,o}function mn(s,o,c){hg(0);const u=Hr(null);try{o(s,c)}finally{Hr(u)}}function fT(s){return s[Wo]||(s[Wo]=[])}function pT(s){return s.cleanup||(s.cleanup=[])}function h0(s,o){const c=s[Ls],u=c?c.get(Li,null):null;u&&u.handleError(o)}function rl(s,o,c,u,h){for(let p=0;p<c.length;){const v=c[p++],C=c[p++];uT(s.data[v],o[v],u,C,h)}}function aa(s,o,c){const u=$s(o,s);!function Kc(s,o,c){s.setValue(o,c)}(s[gt],u,c)}function f0(s,o){const c=ii(o,s),u=c[je];!function sO(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])}(u,c);const h=c[bn];null!==h&&null===c[fs]&&(c[fs]=ws(h,c[Ls])),Wa(u,c,c[Bn])}function Wa(s,o,c){Gr(o);try{const u=s.viewQuery;null!==u&&mn(1,u,c);const h=s.template;null!==h&&eT(s,o,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&hT(s,o),s.staticViewQueries&&mn(2,s.viewQuery,c);const p=s.components;null!==p&&function gT(s,o){for(let c=0;c<o.length;c++)f0(s,o[c])}(o,p)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{o[Et]&=-5,Cr()}}let mT=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(c,u,h){const p=typeof Zone>"u"?null:Zone.current,v=function zy(s,o,c){const u=Object.create(IE);c&&(u.consumerAllowSignalWrites=!0),u.fn=s,u.schedule=o;const h=v=>{u.cleanupFn=v};return u.ref={notify:()=>Ly(u),run:()=>{if(u.dirty=!1,u.hasRun&&!Uy(u))return;u.hasRun=!0;const v=qp(u);try{u.cleanupFn(),u.cleanupFn=Xp,u.fn(h)}finally{Kl(u,v)}},cleanup:()=>u.cleanupFn()},u.ref}(c,D=>{this.all.has(D)&&this.queue.set(D,p)},h);let C;this.all.add(v),v.notify();const b=()=>{v.cleanup(),C?.(),this.all.delete(v),this.queue.delete(v)};return C=u?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[c,u]of this.queue)this.queue.delete(c),u?u.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=pt({token:s,providedIn:"root",factory:()=>new s})}return s})();function im(s,o,c){let u=c?s.styles:null,h=c?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?p=C:1==p?h=Pe(h,C):2==p&&(u=Pe(u,C+": "+o[++v]+";"))}c?s.styles=u:s.stylesWithoutHost=u,c?s.classes=h:s.classesWithoutHost=h}function Cf(s,o,c,u,h=!1){for(;null!==c;){const p=o[c.index];null!==p&&u.push(sn(p)),xr(p)&&_T(p,u);const v=c.type;if(8&v)Cf(s,o,c.child,u);else if(32&v){const C=Ji(c,o);let b;for(;b=C();)u.push(b)}else if(16&v){const C=wv(o,c);if(Array.isArray(C))u.push(...C);else{const b=ia(o[Xn]);Cf(b[je],b,C,u,!0)}}c=h?c.projectionNext:c.next}return u}function _T(s,o){for(let c=er;c<s.length;c++){const u=s[c],h=u[je].firstChild;null!==h&&Cf(u[je],u,h,o)}s[jr]!==s[bn]&&o.push(s[jr])}function wf(s,o,c,u=!0){const h=o[ho],p=h.rendererFactory,v=h.afterRenderEventManager;p.begin?.(),v?.begin();try{sm(s,o,s.template,c)}catch(b){throw u&&h0(o,b),b}finally{p.end?.(),h.effectManager?.flush(),v?.end()}}function sm(s,o,c,u){const h=o[Et];if(256!=(256&h)){o[ho].effectManager?.flush(),Gr(o);try{tg(o),function Xy(s){return yt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&eT(s,o,c,2,u);const v=3==(3&h);if(v){const D=s.preOrderCheckHooks;null!==D&&Zo(o,D,null)}else{const D=s.preOrderHooks;null!==D&&Oa(o,D,0,null),ou(o,0)}if(function vT(s){for(let o=jE(s);null!==o;o=_v(o)){if(!o[Tc])continue;const c=o[ba];for(let u=0;u<c.length;u++){Pc(c[u])}}}(o),yT(o,2),null!==s.contentQueries&&hT(s,o),v){const D=s.contentCheckHooks;null!==D&&Zo(o,D)}else{const D=s.contentHooks;null!==D&&Oa(o,D,1),ou(o,1)}!function VP(s,o){const c=s.hostBindingOpCodes;if(null===c)return;const u=qb(o,Pi);try{for(let h=0;h<c.length;h++){const p=c[h];if(p<0)zs(~p);else{const v=p,C=c[++h],b=c[++h];ug(C,v),u.dirty=!1;const D=qp(u);try{b(2,o[v])}finally{Kl(u,D)}}}}finally{null===o[Pi]&&Zb(o,Pi),zs(-1)}}(s,o);const C=s.components;null!==C&&wT(o,C,0);const b=s.viewQuery;if(null!==b&&mn(2,b,u),v){const D=s.viewCheckHooks;null!==D&&Zo(o,D)}else{const D=s.viewHooks;null!==D&&Oa(o,D,2),ou(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Et]&=-73,Zy(o)}finally{Cr()}}}function yT(s,o){for(let c=jE(s);null!==c;c=_v(c))for(let u=er;u<c.length;u++)CT(c[u],o)}function cO(s,o,c){CT(ii(o,s),c)}function CT(s,o){if(!function TE(s){return 128==(128&s[Et])}(s))return;const c=s[je],u=s[Et];if(80&u&&0===o||1024&u||2===o)sm(c,s,c.template,s[Bn]);else if(s[Fs]>0){yT(s,1);const h=c.components;null!==h&&wT(s,h,1)}}function wT(s,o,c){for(let u=0;u<o.length;u++)cO(s,o[u],c)}class If{get rootNodes(){const o=this._lView,c=o[je];return Cf(c,o,c.firstChild,[])}constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bn]}set context(o){this._lView[Bn]=o}get destroyed(){return 256==(256&this._lView[Et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[fn];if(xr(o)){const c=o[8],u=c?c.indexOf(this):-1;u>-1&&(Ng(o,u),Ua(c,u))}this._attachedToViewContainer=!1}yv(this._lView[je],this._lView)}onDestroy(o){!function bh(s,o){if(256==(256&s[Et]))throw new ee(911,!1);null===s[qo]&&(s[qo]=[]),s[qo].push(o)}(this._lView,o)}markForCheck(){ff(this._cdRefInjectingView||this._lView)}detach(){this._lView[Et]&=-129}reattach(){this._lView[Et]|=128}detectChanges(){wf(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wh(s,o){Yh(s,o,o[gt],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=o}}class lO extends If{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;wf(o[je],o,o[Bn],!1)}checkNoChanges(){}get context(){return null}}class IT extends Jg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=Ft(o);return new il(c,this.ngModule)}}function ET(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}class uO{constructor(o,c){this.injector=o,this.parentInjector=c}get(o,c,u){u=Zt(u);const h=this.injector.get(o,Zv,u);return h!==Zv||c===Zv?h:this.parentInjector.get(o,c,u)}}class il extends Tb{get inputs(){const o=this.componentDef,c=o.inputTransforms,u=ET(o.inputs);if(null!==c)for(const h of u)c.hasOwnProperty(h.propName)&&(h.transform=c[h.propName]);return u}get outputs(){return ET(this.componentDef.outputs)}constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function mE(s){return s.map(Bp).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}create(o,c,u,h){let p=(h=h||this.ngModule)instanceof Cs?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new uO(o,p):o,C=v.get(Db,null);if(null===C)throw new ee(407,!1);const L={rendererFactory:C,sanitizer:v.get(EP,null),effectManager:v.get(mT,null),afterRenderEventManager:v.get(t0,null)},q=C.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ue=u?function rT(s,o,c,u){const p=u.get(zb,!1)||c===Os.ShadowDom,v=s.selectRootElement(o,p);return function BP(s){c0(s)}(v),v}(q,u,this.componentDef.encapsulation,v):Og(q,Y,function bT(s){const o=s.toLowerCase();return"svg"===o?eg:"math"===o?"math":null}(Y)),it=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let de=null;null!==ue&&(de=ws(ue,v,!0));const nt=a0(0,null,null,1,0,null,null,null,null,null,null),Mt=_f(null,nt,null,it,null,null,L,q,v,null,de);let on,$i;Gr(Mt);try{const da=this.componentDef;let hd,m_=null;da.findHostDirectiveDefs?(hd=[],m_=new Map,da.findHostDirectiveDefs(da,hd,m_),hd.push(da)):hd=[da];const wk=function hO(s,o){const c=s[je],u=Lt;return s[u]=o,nl(c,u,2,"#host",null)}(Mt,ue),Ik=function fO(s,o,c,u,h,p,v){const C=h[je];!function pO(s,o,c,u){for(const h of s)o.mergedAttrs=Ic(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(im(o,o.mergedAttrs,!0),null!==c&&Qh(u,c,o))}(u,s,o,v);let b=null;null!==o&&(b=ws(o,h[Ls]));const D=p.rendererFactory.createRenderer(o,c);let M=16;c.signals?M=4096:c.onPush&&(M=64);const L=_f(h,tT(c),null,M,h[s.index],s,p,D,null,null,b);return C.firstCreatePass&&u0(C,s,u.length-1),nm(h,L),h[s.index]=L}(wk,ue,da,hd,Mt,L,q);$i=Ih(nt,Lt),ue&&function mO(s,o,c,u){if(u)wa(s,c,["ng-version",qv.full]);else{const{attrs:h,classes:p}=function gi(s){const o=[],c=[];let u=1,h=2;for(;u<s.length;){let p=s[u];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++u]):8===h&&c.push(p);else{if(!ni(h))break;h=p}u++}return{attrs:o,classes:c}}(o.selectors[0]);h&&wa(s,c,h),p&&p.length>0&&YE(s,c,p.join(" "))}}(q,da,ue,u),void 0!==c&&function _O(s,o,c){const u=s.projection=[];for(let h=0;h<o.length;h++){const p=c[h];u.push(null!=p?Array.from(p):null)}}($i,this.ngContentSelectors,c),on=function gO(s,o,c,u,h,p){const v=yr(),C=h[je],b=zr(v,h);cT(C,h,v,c,null,u);for(let M=0;M<c.length;M++)oi(Jo(h,C,v.directiveStart+M,v),h);lT(C,h,v),b&&oi(b,h);const D=Jo(h,C,v.directiveStart+v.componentOffset,v);if(s[Bn]=h[Bn]=D,null!==p)for(const M of p)M(D,o);return s0(C,v,s),D}(Ik,da,hd,m_,Mt,[yO]),Wa(nt,Mt,null)}finally{Cr()}return new dO(this.componentType,on,ku($i,Mt),Mt,$i)}}class dO extends vP{constructor(o,c,u,h,p){super(),this.location=u,this._rootLView=h,this._tNode=p,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new lO(h),this.componentType=o}setInput(o,c){const u=this._tNode.inputs;let h;if(null!==u&&(h=u[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),c))return;const p=this._rootLView;rl(p[je],p,h,o,c),this.previousInputValues.set(o,c),ff(ii(this._tNode.index,p))}}get injector(){return new nr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function yO(){const s=yr();Pa(ye()[je],s)}function Ef(s){let o=function TT(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const u=[s];for(;o;){let h;if(Oi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ee(903,!1);h=o.\u0275dir}if(h){if(c){u.push(h);const v=s;v.inputs=om(s.inputs),v.inputTransforms=om(s.inputTransforms),v.declaredInputs=om(s.declaredInputs),v.outputs=om(s.outputs);const C=h.hostBindings;C&&CO(s,C);const b=h.viewQuery,D=h.contentQueries;if(b&&DT(s,b),D&&ST(s,D),W(s.inputs,h.inputs),W(s.declaredInputs,h.declaredInputs),W(s.outputs,h.outputs),null!==h.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),W(v.inputTransforms,h.inputTransforms)),Oi(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let v=0;v<p.length;v++){const C=p[v];C&&C.ngInherit&&C(s),C===Ef&&(c=!1)}}o=Object.getPrototypeOf(o)}!function vO(s){let o=0,c=null;for(let u=s.length-1;u>=0;u--){const h=s[u];h.hostVars=o+=h.hostVars,h.hostAttrs=Ic(h.hostAttrs,c=Ic(c,h.hostAttrs))}}(u)}function om(s){return s===xi?{}:s===Wt?[]:s}function DT(s,o){const c=s.viewQuery;s.viewQuery=c?(u,h)=>{o(u,h),c(u,h)}:o}function ST(s,o){const c=s.contentQueries;s.contentQueries=c?(u,h,p)=>{o(u,h,p),c(u,h,p)}:o}function CO(s,o){const c=s.hostBindings;s.hostBindings=c?(u,h)=>{o(u,h),c(u,h)}:o}function p0(s){const o=s.inputConfig,c={};for(const u in o)if(o.hasOwnProperty(u)){const h=o[u];Array.isArray(h)&&h[2]&&(c[u]=h[2])}s.inputTransforms=c}function am(s){return!!bf(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function bf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Oo(s,o,c){return s[o]=c}function Yr(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function sl(s,o,c,u){const h=Yr(s,o,c);return Yr(s,o+1,u)||h}function g0(s,o,c,u){const h=ye();return Yr(h,Rc(),o)&&(Bt(),Po(wn(),h,s,o,c,u)),g0}function Bu(s,o,c,u){return Yr(s,Rc(),c)?o+re(c)+u:Dt}function ju(s,o,c,u,h,p){const C=sl(s,function _o(){return yt.lFrame.bindingIndex}(),c,h);return ms(2),C?o+re(c)+u+re(h)+p:Dt}function HT(s,o,c,u,h,p,v,C){const b=ye(),D=Bt(),M=s+Lt,L=D.firstCreatePass?function VO(s,o,c,u,h,p,v,C,b){const D=o.consts,M=nl(o,s,4,v||null,go(D,C));l0(o,c,M,go(D,b)),Pa(o,M);const L=M.tView=a0(2,M,u,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D,null);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,D,b,o,c,u,h,p,v):D.data[M];gs(L,!1);const q=zT(D,b,L,s);Gs()&&Zh(D,b,q,L),oi(q,b),nm(b,b[M]=dT(q,b,q,L)),Sc(L)&&o0(D,b,L),null!=v&&vf(b,L,C)}let zT=function GT(s,o,c,u){return Ws(!0),o[gt].createComment("")};function WT(s){return Ma(function Qy(){return yt.lFrame.contextLView}(),Lt+s)}function E0(s,o,c){const u=ye();return Yr(u,Rc(),o)&&Xi(Bt(),wn(),u,s,o,u[gt],c,!1),E0}function b0(s,o,c,u,h){const v=h?"class":"style";rl(s,c,o.inputs[v],v,u)}function gm(s,o,c,u){const h=ye(),p=Bt(),v=Lt+s,C=h[gt],b=p.firstCreatePass?function HO(s,o,c,u,h,p){const v=o.consts,b=nl(o,s,2,u,go(v,h));return l0(o,c,b,go(v,p)),null!==b.attrs&&im(b,b.attrs,!1),null!==b.mergedAttrs&&im(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(v,p,h,o,c,u):p.data[v],D=qT(p,h,b,C,o,s);h[v]=D;const M=Sc(b);return gs(b,!0),Qh(C,D,b),32!=(32&b.flags)&&Gs()&&Zh(p,h,D,b),0===function rg(){return yt.lFrame.elementDepthCount}()&&oi(D,h),function ig(){yt.lFrame.elementDepthCount++}(),M&&(o0(p,h,b),s0(p,b,h)),null!==u&&vf(h,b),gm}function mm(){let s=yr();ag()?function cg(){yt.lFrame.isParent=!1}():(s=s.parent,gs(s,!1));const o=s;(function Oc(s){return yt.skipHydrationRootTNode===s})(o)&&function og(){yt.skipHydrationRootTNode=null}(),function Ky(){yt.lFrame.elementDepthCount--}();const c=Bt();return c.firstCreatePass&&(Pa(c,s),oh(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Co(s){return 0!=(8&s.flags)}(o)&&b0(c,o,ye(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Vc(s){return 0!=(16&s.flags)}(o)&&b0(c,o,ye(),o.stylesWithoutHost,!1),mm}function T0(s,o,c,u){return gm(s,o,c,u),mm(),T0}let qT=(s,o,c,u,h,p)=>(Ws(!0),Og(u,h,function pg(){return yt.lFrame.currentNamespace}()));function QT(){return ye()}function _m(s){return!!s&&"function"==typeof s.then}function JT(s){return!!s&&"function"==typeof s.subscribe}function A0(s,o,c,u){const h=ye(),p=Bt(),v=yr();return function eD(s,o,c,u,h,p,v){const C=Sc(u),D=s.firstCreatePass&&pT(s),M=o[Bn],L=fT(o);let q=!0;if(3&u.type||v){const Se=zr(u,o),Ge=v?v(Se):Se,it=L.length,de=v?Mt=>v(sn(Mt[u.index])):u.index;let nt=null;if(!v&&C&&(nt=function ZO(s,o,c,u){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const v=h[p];if(v===c&&h[p+1]===u){const C=o[Wo],b=h[p+2];return C.length>b?C[b]:null}"string"==typeof v&&(p+=2)}return null}(s,o,h,u.index)),null!==nt)(nt.__ngLastListenerFn__||nt).__ngNextListenerFn__=p,nt.__ngLastListenerFn__=p,q=!1;else{p=tD(u,o,M,p,!1);const Mt=c.listen(Ge,h,p);L.push(p,Mt),D&&D.push(h,de,it,it+1)}}else p=tD(u,o,M,p,!1);const Y=u.outputs;let ue;if(q&&null!==Y&&(ue=Y[h])){const Se=ue.length;if(Se)for(let Ge=0;Ge<Se;Ge+=2){const on=o[ue[Ge]][ue[Ge+1]].subscribe(p),$i=L.length;L.push(p,on),D&&D.push(h,u.index,$i,-($i+1))}}}(p,h,h[gt],v,s,o,u),A0}function M0(s,o,c,u){try{return ps(6,o,c),!1!==c(u)}catch(h){return h0(s,h),!1}finally{ps(7,o,c)}}function tD(s,o,c,u,h){return function p(v){if(v===Function)return u;ff(s.componentOffset>-1?ii(s.index,o):o);let b=M0(o,c,u,v),D=p.__ngNextListenerFn__;for(;D;)b=M0(o,c,D,v)&&b,D=D.__ngNextListenerFn__;return h&&!1===b&&v.preventDefault(),b}}function nD(s=1){return function su(s){return(yt.lFrame.contextLView=function Mh(s,o){for(;s>0;)o=o[_i],s--;return o}(s,yt.lFrame.contextLView))[Bn]}(s)}function ym(s,o,c){return vm(s,"",o,"",c),ym}function vm(s,o,c,u,h){const p=ye(),v=Bu(p,o,c,u);return v!==Dt&&Xi(Bt(),wn(),p,s,v,p[gt],h,!1),vm}function Cm(s,o){return s<<17|o<<2}function qa(s){return s>>17&32767}function O0(s){return 2|s}function ll(s){return(131068&s)>>2}function N0(s,o){return-131069&s|o<<2}function R0(s){return 1|s}function lD(s,o,c,u,h){const p=s[c+1],v=null===o;let C=u?qa(p):ll(p),b=!1;for(;0!==C&&(!1===b||v);){const M=s[C+1];rN(s[C],o)&&(b=!0,s[C+1]=u?R0(M):O0(M)),C=u?qa(M):ll(M)}b&&(s[c+1]=u?O0(p):R0(p))}function rN(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Va(s,o)>=0}const Ir={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function _n(s){return s.substring(Ir.key,Ir.keyEnd)}function uD(s,o){const c=Ir.textEnd;return c===o?-1:(o=Ir.keyEnd=function oN(s,o,c){for(;o<c&&s.charCodeAt(o)>32;)o++;return o}(s,Ir.key=o,c),ln(s,o,c))}function ln(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function k0(s,o){return function Xs(s,o,c,u){const h=ye(),p=Bt(),v=ms(2);p.firstUpdatePass&&gD(p,s,v,u),o!==Dt&&Yr(h,v,o)&&_D(p,p.data[Wr()],h,h[gt],s,h[v+1]=function gN(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=X(ja(s)))),s}(o,c),u,v)}(s,o,null,!0),k0}function Za(s){!function eo(s,o,c,u){const h=Bt(),p=ms(2);h.firstUpdatePass&&gD(h,null,p,u);const v=ye();if(c!==Dt&&Yr(v,p,c)){const C=h.data[Wr()];if(vD(C,u)&&!pD(h,p)){let b=u?C.classesWithoutHost:C.stylesWithoutHost;null!==b&&(c=Pe(b,c||"")),b0(h,C,v,c,u)}else!function pN(s,o,c,u,h,p,v,C){h===Dt&&(h=Wt);let b=0,D=0,M=0<h.length?h[0]:null,L=0<p.length?p[0]:null;for(;null!==M||null!==L;){const q=b<h.length?h[b+1]:void 0,Y=D<p.length?p[D+1]:void 0;let Se,ue=null;M===L?(b+=2,D+=2,q!==Y&&(ue=L,Se=Y)):null===L||null!==M&&M<L?(b+=2,ue=M):(D+=2,ue=L,Se=Y),null!==ue&&_D(s,o,c,u,ue,Se,v,C),M=b<h.length?h[b]:null,L=D<p.length?p[D]:null}}(h,C,v,v[gt],v[p+1],v[p+1]=function hN(s,o,c){if(null==c||""===c)return Wt;const u=[],h=ja(c);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(u,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(u,p,h[p]);else"string"==typeof h&&o(u,h);return u}(s,o,c),u,p)}}(fN,No,s,!0)}function No(s,o){for(let c=function iN(s){return function xf(s){Ir.key=0,Ir.keyEnd=0,Ir.value=0,Ir.valueEnd=0,Ir.textEnd=s.length}(s),uD(s,ln(s,0,Ir.textEnd))}(o);c>=0;c=uD(o,c))Ci(s,_n(o),!0)}function pD(s,o){return o>=s.expandoStartIndex}function gD(s,o,c,u){const h=s.data;if(null===h[c+1]){const p=h[Wr()],v=pD(s,c);vD(p,u)&&null===o&&!v&&(o=!1),o=function cN(s,o,c,u){const h=function Sh(s){const o=yt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=u?o.residualClasses:o.residualStyles;if(null===h)0===(u?o.classBindings:o.styleBindings)&&(c=Pf(c=F0(null,s,o,c,u),o.attrs,u),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(c=F0(h,s,o,c,u),null===p){let b=function lN(s,o,c){const u=c?o.classBindings:o.styleBindings;if(0!==ll(u))return s[qa(u)]}(s,o,u);void 0!==b&&Array.isArray(b)&&(b=F0(null,s,o,b[1],u),b=Pf(b,o.attrs,u),function uN(s,o,c,u){s[qa(c?o.classBindings:o.styleBindings)]=u}(s,o,u,b))}else p=function dN(s,o,c){let u;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)u=Pf(u,s[p].hostAttrs,c);return Pf(u,o.attrs,c)}(s,o,u)}return void 0!==p&&(u?o.residualClasses=p:o.residualStyles=p),c}(h,p,o,u),function tN(s,o,c,u,h,p){let v=p?o.classBindings:o.styleBindings,C=qa(v),b=ll(v);s[u]=c;let M,D=!1;if(Array.isArray(c)?(M=c[1],(null===M||Va(c,M)>0)&&(D=!0)):M=c,h)if(0!==b){const q=qa(s[C+1]);s[u+1]=Cm(q,C),0!==q&&(s[q+1]=N0(s[q+1],u)),s[C+1]=function XO(s,o){return 131071&s|o<<17}(s[C+1],u)}else s[u+1]=Cm(C,0),0!==C&&(s[C+1]=N0(s[C+1],u)),C=u;else s[u+1]=Cm(b,0),0===C?C=u:s[b+1]=N0(s[b+1],u),b=u;D&&(s[u+1]=O0(s[u+1])),lD(s,M,u,!0),lD(s,M,u,!1),function nN(s,o,c,u,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Va(p,o)>=0&&(c[u+1]=R0(c[u+1]))}(o,M,s,u,p),v=Cm(C,b),p?o.classBindings=v:o.styleBindings=v}(h,p,o,c,v,u)}}function F0(s,o,c,u,h){let p=null;const v=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<v&&(p=o[C],u=Pf(u,p.hostAttrs,h),p!==s);)C++;return null!==s&&(c.directiveStylingLast=C),u}function Pf(s,o,c){const u=c?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?h=v:h===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ci(s,v,!!c||o[++p]))}return void 0===s?null:s}function fN(s,o,c){const u=String(o);""!==u&&!u.includes(" ")&&Ci(s,u,c)}function _D(s,o,c,u,h,p,v,C){if(!(3&o.type))return;const b=s.data,D=b[C+1],M=function eN(s){return 1==(1&s)}(D)?yD(b,o,c,h,ll(D),v):void 0;Im(M)||(Im(p)||function JO(s){return 2==(2&s)}(D)&&(p=yD(b,null,c,h,C,v)),function Vx(s,o,c,u,h){if(o)h?s.addClass(c,u):s.removeClass(c,u);else{let p=-1===u.indexOf("-")?void 0:Vh.DashCase;null==h?s.removeStyle(c,u,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Vh.Important),s.setStyle(c,u,h,p))}}(u,v,$s(Wr(),c),h,p))}function yD(s,o,c,u,h,p){const v=null===o;let C;for(;h>0;){const b=s[h],D=Array.isArray(b),M=D?b[1]:b,L=null===M;let q=c[h+1];q===Dt&&(q=L?Wt:void 0);let Y=L?Fh(q,u):M===u?q:void 0;if(D&&!Im(Y)&&(Y=Fh(b,u)),Im(Y)&&(C=Y,v))return C;const ue=s[h+1];h=v?qa(ue):ll(ue)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(C=Fh(b,u))}return C}function Im(s){return void 0!==s}function vD(s,o){return 0!=(s.flags&(o?8:16))}function CD(s,o=""){const c=ye(),u=Bt(),h=s+Lt,p=u.firstCreatePass?nl(u,h,1,o,null):u.data[h],v=wD(u,c,p,o,s);c[h]=v,Gs()&&Zh(u,c,v,p),gs(p,!1)}let wD=(s,o,c,u,h)=>(Ws(!0),function Pg(s,o){return s.createText(o)}(o[gt],u));function L0(s){return ul("",s,""),L0}function ul(s,o,c){const u=ye(),h=Bu(u,s,o,c);return h!==Dt&&aa(u,Wr(),h),ul}function U0(s,o,c,u,h){const p=ye(),v=ju(p,s,o,c,u,h);return v!==Dt&&aa(p,Wr(),v),U0}const Ya=void 0;var TN=["en",[["a","p"],["AM","PM"],Ya],[["AM","PM"],Ya,Ya],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ya,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ya,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ya,"{1} 'at' {0}",Ya],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function bN(s){const c=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===u?1:5}];let dl={};function z0(s){const o=function W0(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=Tm(o);if(c)return c;const u=o.split("-")[0];if(c=Tm(u),c)return c;if("en"===u)return TN;throw new ee(701,!1)}function G0(s){return z0(s)[Qa.PluralCase]}function Tm(s){return s in dl||(dl[s]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[s]),dl[s]}var Qa=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Qa||{});const Ja="en-US";let RD=Ja;function uC(s,o,c,u,h){if(s=ve(s),Array.isArray(s))for(let p=0;p<s.length;p++)uC(s[p],o,c,u,h);else{const p=Bt(),v=ye(),C=yr();let b=xu(s)?s:ve(s.provide);const D=vb(s),M=1048575&C.providerIndexes,L=C.directiveStart,q=C.providerIndexes>>20;if(xu(s)||!s.multi){const Y=new Ko(D,h,xo),ue=Uf(b,o,h?M:M+q,L);-1===ue?(Ra(Dn(C,v),p,b),Lf(p,s,o.length),o.push(b),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),c.push(Y),v.push(Y)):(c[ue]=Y,v[ue]=Y)}else{const Y=Uf(b,o,M+q,L),ue=Uf(b,o,M,M+q),Ge=ue>=0&&c[ue];if(h&&!Ge||!h&&!(Y>=0&&c[Y])){Ra(Dn(C,v),p,b);const it=function R3(s,o,c,u,h){const p=new Ko(s,c,xo);return p.multi=[],p.index=o,p.componentProviders=0,o1(p,h,u&&!c),p}(h?dC:KN,c.length,h,u,D);!h&&Ge&&(c[ue].providerFactory=it),Lf(p,s,o.length,0),o.push(b),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),c.push(it),v.push(it)}else Lf(p,s,Y>-1?Y:ue,o1(c[h?ue:Y],D,!h&&u));!h&&u&&Ge&&c[ue].componentProviders++}}}function Lf(s,o,c,u){const h=xu(o),p=function JU(s){return!!s.useClass}(o);if(h||p){const b=(p?ve(o.useClass):o).prototype.ngOnDestroy;if(b){const D=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=D.indexOf(c);-1===M?D.push(c,[u,b]):D[M+1].push(u,b)}else D.push(c,b)}}}function o1(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function Uf(s,o,c,u){for(let h=c;h<u;h++)if(o[h]===s)return h;return-1}function KN(s,o,c,u){return hC(this.multi,[])}function dC(s,o,c,u){const h=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=Jo(c,c[je],this.providerFactory.index,u);p=C.slice(0,v),hC(h,p);for(let b=v;b<C.length;b++)p.push(C[b])}else p=[],hC(h,p);return p}function hC(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function Um(s,o=[]){return c=>{c.providersResolver=(u,h)=>function lC(s,o,c){const u=Bt();if(u.firstCreatePass){const h=Oi(s);uC(c,u.data,u.blueprint,h,!0),uC(o,u.data,u.blueprint,h,!1)}}(u,h?h(s):s,o)}}class Ju{}class YN{}function QN(s,o){return new Vm(s,o??null,[])}class Vm extends Ju{constructor(o,c,u){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new IT(this);const h=Vr(o);this._bootstrapComponents=oa(h.bootstrap),this._r3Injector=Ob(o,c,[{provide:Ju,useValue:this},{provide:Jg,useValue:this.componentFactoryResolver},...u],X(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class fC extends YN{constructor(o){super(),this.moduleType=o}create(o){return new Vm(this.moduleType,o,[])}}class c1 extends Ju{constructor(o){super(),this.componentFactoryResolver=new IT(this),this.instance=null;const c=new $a([...o.providers,{provide:Ju,useValue:this},{provide:Jg,useValue:this.componentFactoryResolver}],o.parent||sf(),o.debugName,new Set(["environment"]));this.injector=c,o.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function l1(s,o,c=null){return new c1({providers:s,parent:o,debugName:c,runEnvironmentInitializers:!0}).injector}let pC=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const u=mb(0,c.type),h=u.length>0?l1([u],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,h)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=pt({token:s,providedIn:"environment",factory:()=>new s(Be(Cs))})}return s})();function gC(s){s.getStandaloneInjector=o=>o.get(pC).getOrCreateStandaloneInjector(s)}function rR(s,o,c){const u=vr()+s,h=ye();return h[u]===Dt?Oo(h,u,c?o.call(c):o()):function Tf(s,o){return s[o]}(h,u)}function iR(s,o,c,u){return p1(ye(),vr(),s,o,c,u)}function Vf(s,o){const c=s[o];return c===Dt?void 0:c}function p1(s,o,c,u,h,p){const v=o+c;return Yr(s,v,h)?Oo(s,v+1,p?u.call(p,h):u(h)):Vf(s,v+1)}function m1(s,o,c,u,h,p,v,C){const b=o+c;return function Df(s,o,c,u,h){const p=sl(s,o,c,u);return Yr(s,o+2,h)||p}(s,b,h,p,v)?Oo(s,b+3,C?u.call(C,h,p,v):u(h,p,v)):Vf(s,b+3)}function Xa(s,o){const c=Bt();let u;const h=s+Lt;c.firstCreatePass?(u=function uR(s,o){if(o)for(let c=o.length-1;c>=0;c--){const u=o[c];if(s===u.name)return u}}(o,c.pipeRegistry),c.data[h]=u,u.onDestroy&&(c.destroyHooks??=[]).push(h,u.onDestroy)):u=c.data[h];const p=u.factory||(u.factory=Bs(u.type)),C=rn(xo);try{const b=wr(!1),D=p();return wr(b),function $O(s,o,c,u){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),o[c]=u}(c,ye(),h,D),D}finally{rn(C)}}function y1(s,o,c){const u=s+Lt,h=ye(),p=Ma(h,u);return jf(h,u)?p1(h,vr(),o,p.transform,c,p):p.transform(c)}function v1(s,o,c,u,h){const p=s+Lt,v=ye(),C=Ma(v,p);return jf(v,p)?m1(v,vr(),o,C.transform,c,u,h,C):C.transform(c,u,h)}function jf(s,o){return s[je].data[o].pure}function wC(){return this._results[Symbol.iterator]()}class IC{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Mo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=IC.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=wC)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const u=this;u.dirty=!1;const h=function Kr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Eg(s,o,c){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){let h=s[u],p=o[u];if(c&&(h=c(h),p=c(p)),p!==h)return!1}return!0}(u._results,h,c))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function fR(s,o,c,u=!0){const h=o[je];if(function Nx(s,o,c,u){const h=er+u,p=c.length;u>0&&(c[h-1][mi]=o),u<p-er?(o[mi]=c[h],iv(c,er+u,o)):(c.push(o),o[mi]=null),o[fn]=c;const v=o[Ea];null!==v&&c!==v&&function Rx(s,o){const c=s[ba];o[Xn]!==o[fn][fn][Xn]&&(s[Tc]=!0),null===c?s[ba]=[o]:c.push(o)}(v,o);const C=o[Br];null!==C&&C.insertView(s),o[Et]|=128}(h,o,s,c),u){const p=Iv(c,s),v=o[gt],C=Rg(v,s[jr]);null!==C&&function Gh(s,o,c,u,h,p){u[bn]=h,u[_r]=o,Yh(s,u,c,1,h,p)}(h,s[_r],v,o,C,p)}}let Xu=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=bC}return s})();const EC=Xu,w1=class extends EC{constructor(o,c,u){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=u}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,c){return this.createEmbeddedViewImpl(o,c)}createEmbeddedViewImpl(o,c,u){const h=function C1(s,o,c,u){const h=o.tView,C=_f(s,h,c,4096&s[Et]?4096:16,null,o,null,null,null,u?.injector??null,u?.hydrationInfo??null);C[Ea]=s[o.index];const D=s[Br];return null!==D&&(C[Br]=D.createEmbeddedView(h)),Wa(h,C,c),C}(this._declarationLView,this._declarationTContainer,o,{injector:c,hydrationInfo:u});return new If(h)}};function bC(){return ed(yr(),ye())}function ed(s,o){return 4&s.type?new w1(o,s,ku(s,o)):null}let Gm=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=_R}return s})();function _R(){return MC(yr(),ye())}const DC=Gm,SC=class extends DC{constructor(o,c,u){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=u}get element(){return ku(this._hostTNode,this._hostLView)}get injector(){return new nr(this._hostTNode,this._hostLView)}get parentInjector(){const o=Qo(this._hostTNode,this._hostLView);if(cu(o)){const c=an(o,this._hostLView),u=vi(o);return new nr(c[je].data[u+8],c)}return new nr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=b1(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-er}createEmbeddedView(o,c,u){let h,p;"number"==typeof u?h=u:null!=u&&(h=u.index,p=u.injector);const C=o.createEmbeddedViewImpl(c||{},p,null);return this.insertImpl(C,h,false),C}createComponent(o,c,u,h,p){const v=o&&!function Ks(s){return"function"==typeof s}(o);let C;if(v)C=c;else{const Se=c||{};C=Se.index,u=Se.injector,h=Se.projectableNodes,p=Se.environmentInjector||Se.ngModuleRef}const b=v?o:new il(Ft(o)),D=u||this.parentInjector;if(!p&&null==b.ngModule){const Ge=(v?D:this.parentInjector).get(Cs,null);Ge&&(p=Ge)}Ft(b.componentType??{});const Y=b.create(D,h,null,p);return this.insertImpl(Y.hostView,C,false),Y}insert(o,c){return this.insertImpl(o,c,!1)}insertImpl(o,c,u){const h=o._lView;if(function nu(s){return xr(s[fn])}(h)){const b=this.indexOf(o);if(-1!==b)this.detach(b);else{const D=h[fn],M=new SC(D,D[_r],D[fn]);M.detach(M.indexOf(o))}}const v=this._adjustIndex(c),C=this._lContainer;return fR(C,h,v,!u),o.attachToViewContainerRef(),iv(AC(C),v,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=b1(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),u=Ng(this._lContainer,c);u&&(Ua(AC(this._lContainer),c),yv(u[je],u))}detach(o){const c=this._adjustIndex(o,-1),u=Ng(this._lContainer,c);return u&&null!=Ua(AC(this._lContainer),c)?new If(u):null}_adjustIndex(o,c=0){return o??this.length+c}};function b1(s){return s[8]}function AC(s){return s[8]||(s[8]=[])}function MC(s,o){let c;const u=o[s.index];return xr(u)?c=u:(c=dT(u,o,null,s),o[s.index]=c,nm(o,c)),xC(c,o,s,u),new SC(c,s,o)}let xC=function T1(s,o,c,u){if(s[jr])return;let h;h=8&c.type?sn(u):function yR(s,o){const c=s[gt],u=c.createComment(""),h=zr(o,s);return Jc(c,Rg(c,h),u,function Lx(s,o){return s.nextSibling(o)}(c,h),!1),u}(o,c),s[jr]=h};class PC{constructor(o){this.queryList=o,this.matches=null}clone(){return new PC(this.queryList)}setDirty(){this.queryList.setDirty()}}class td{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const u=null!==o.contentQueries?o.contentQueries[0]:c.length,h=[];for(let p=0;p<u;p++){const v=c.getByIndex(p);h.push(this.queries[v.indexInDeclarationView].clone())}return new td(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==x1(o,c).matches&&this.queries[c].setDirty()}}class Fo{constructor(o,c,u=null){this.predicate=o,this.flags=c,this.read=u}}class OC{constructor(o=[]){this.queries=o}elementStart(o,c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let u=0;u<this.length;u++){const h=null!==c?c.length:0,p=this.getByIndex(u).embeddedTView(o,h);p&&(p.indexInDeclarationView=u,null!==c?c.push(p):c=[p])}return null!==c?new OC(c):null}template(o,c){for(let u=0;u<this.queries.length;u++)this.queries[u].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class $f{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new $f(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let u=o.parent;for(;null!==u&&8&u.type&&u.index!==c;)u=u.parent;return c===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const p=u[h];this.matchTNodeWithReadOption(o,c,wR(c,p)),this.matchTNodeWithReadOption(o,c,Io(c,o,p,!1,!1))}else u===Xu?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,Io(c,o,u,!1,!1))}matchTNodeWithReadOption(o,c,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===uf||h===Gm||h===Xu&&4&c.type)this.addMatch(c.index,-2);else{const p=Io(c,o,h,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,u)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function wR(s,o){const c=s.localNames;if(null!==c)for(let u=0;u<c.length;u+=2)if(c[u]===o)return c[u+1];return null}function IR(s,o,c,u){return-1===c?function D1(s,o){return 11&s.type?ku(s,o):4&s.type?ed(s,o):null}(o,s):-2===c?function NC(s,o,c){return c===uf?ku(o,s):c===Xu?ed(o,s):c===Gm?MC(o,s):void 0}(s,o,u):Jo(s,s[je],c,o)}function S1(s,o,c,u){const h=o[Br].queries[u];if(null===h.matches){const p=s.data,v=c.matches,C=[];for(let b=0;b<v.length;b+=2){const D=v[b];C.push(D<0?null:IR(o,p[D],v[b+1],c.metadata.read))}h.matches=C}return h.matches}function RC(s,o,c,u){const h=s.queries.getByIndex(c),p=h.matches;if(null!==p){const v=S1(s,o,h,c);for(let C=0;C<p.length;C+=2){const b=p[C];if(b>0)u.push(v[C/2]);else{const D=p[C+1],M=o[-b];for(let L=er;L<M.length;L++){const q=M[L];q[Ea]===q[fn]&&RC(q[je],q,D,u)}if(null!==M[ba]){const L=M[ba];for(let q=0;q<L.length;q++){const Y=L[q];RC(Y[je],Y,D,u)}}}}}return u}function A1(s){const o=ye(),c=Bt(),u=ev();hg(u+1);const h=x1(c,u);if(s.dirty&&function Eh(s){return 4==(4&s[Et])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?RC(c,o,u,[]):S1(c,o,h,u);s.reset(p,wP),s.notifyOnChanges()}return!0}return!1}function Wm(s,o,c,u){const h=Bt();if(h.firstCreatePass){const p=yr();(function Km(s,o,c){null===s.queries&&(s.queries=new OC),s.queries.track(new $f(o,c))})(h,new Fo(o,c,u),p.index),function kC(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}!function Zm(s,o,c){const u=new IC(4==(4&c));(function iT(s,o,c,u){const h=fT(o);h.push(c),s.firstCreatePass&&pT(s).push(u,h.length-1)})(s,o,u,u.destroy),null===o[Br]&&(o[Br]=new td),o[Br].queries.push(new PC(u))}(h,ye(),c)}function qm(){return function M1(s,o){return s[Br].queries[o].queryList}(ye(),ev())}function x1(s,o){return s.queries.getByIndex(o)}function Ym(s,o){return ed(s,o)}function Jm(s){return!!Vr(s)}const Y1=new cn("Application Initializer");let YC=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,u)=>{this.resolve=c,this.reject=u}),this.appInits=Ze(Y1,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const h of this.appInits){const p=h();if(_m(p))c.push(p);else if(JT(p)){const v=new Promise((C,b)=>{p.subscribe({complete:C,error:b})});c.push(v)}}const u=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{u()}).catch(h=>{this.reject(h)}),0===c.length&&u(),this.initialized=!0}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Q1=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const sr=new cn("LocaleId",{providedIn:"root",factory:()=>Ze(sr,ht.Optional|ht.SkipSelf)||function QC(){return typeof $localize<"u"&&$localize.locale||Ja}()}),NR=new cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let X1=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class RR{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let kR=(()=>{class s{compileModuleSync(c){return new fC(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const u=this.compileModuleSync(c),p=oa(Vr(c).declarations).reduce((v,C)=>{const b=Ft(C);return b&&v.push(new il(b)),v},[]);return new RR(u,p)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const o_=new cn(""),sS=new cn("");let Gf,iw=(()=>{class s{constructor(c,u,h){this._ngZone=c,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Gf||(function sw(s){Gf=s}(h),h.addToWindow(u)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Nr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(c)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,u,h){let p=-1;u&&u>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),c(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:h})}whenStable(c,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,u,h){return[]}static#e=this.\u0275fac=function(u){return new(u||s)(Be(Nr),Be(oS),Be(sS))};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac})}return s})(),oS=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,u){this._applications.set(c,u)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,u=!0){return Gf?.findTestabilityInTree(this,c,u)??null}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),ua=null;const ow=new cn("AllowMultipleToken"),aw=new cn("PlatformDestroyListeners"),Wf=new cn("appBootstrapListener");class lS{constructor(o,c){this.name=o,this.token=c}}function to(s,o,c=[]){const u=`Platform: ${o}`,h=new cn(u);return(p=[])=>{let v=uw();if(!v||v.injector.get(ow,!1)){const C=[...c,...p,{provide:h,useValue:!0}];s?s(C):function uS(s){if(ua&&!ua.get(ow,!1))throw new ee(400,!1);(function cS(){!function Yp(s){$y=s}(()=>{throw new ee(600,!1)})})(),ua=s;const o=s.get(JR);(function cw(s){s.get(wb,null)?.forEach(c=>c())})(s)}(function QR(s=[],o){return Js.create({name:o,providers:[{provide:j,useValue:"platform"},{provide:aw,useValue:new Set([()=>ua=null])},...s]})}(C,u))}return function lw(s){const o=uw();if(!o)throw new ee(401,!1);return o}()}}function uw(){return ua?.get(JR)??null}let JR=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,u){const h=function XR(s="zone.js",o){return"noop"===s?new OP:"zone.js"===s?new Nr(o):s}(u?.ngZone,function dS(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:u?.ngZoneEventCoalescing,runCoalescing:u?.ngZoneRunCoalescing}));return h.run(()=>{const p=function JN(s,o,c){return new Vm(s,o,c)}(c.moduleType,this.injector,function rk(s){return[{provide:Nr,useFactory:s},{provide:Mu,multi:!0,useFactory:()=>{const o=Ze(Q3,{optional:!0});return()=>o.initialize()}},{provide:nk,useFactory:Y3},{provide:Lb,useFactory:Ub}]}(()=>h)),v=p.injector.get(Li,null);return h.runOutsideAngular(()=>{const C=h.onError.subscribe({next:b=>{v.handleError(b)}});p.onDestroy(()=>{id(this._modules,p),C.unsubscribe()})}),function c_(s,o,c){try{const u=c();return _m(u)?u.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):u}catch(u){throw o.runOutsideAngular(()=>s.handleError(u)),u}}(v,h,()=>{const C=p.injector.get(YC);return C.runInitializers(),C.donePromise.then(()=>(function PN(s){Qe(s,"Expected localeId to be defined"),"string"==typeof s&&(RD=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(sr,Ja)||Ja),this._moduleDoBootstrap(p),p))})})}bootstrapModule(c,u=[]){const h=ek({},u);return function KR(s,o,c){const u=new fC(c);return Promise.resolve(u)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(c){const u=c.injector.get(qf);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new ee(-403,!1);c.instance.ngDoBootstrap(u)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const c=this._injector.get(aw,null);c&&(c.forEach(u=>u()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(u){return new(u||s)(Be(Js))};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function ek(s,o){return Array.isArray(o)?o.reduce(ek,s):{...s,...o}}let qf=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ze(nk),this.zoneIsStable=Ze(Lb),this.componentTypes=[],this.components=[],this.isStable=Ze(X1).hasPendingTasks.pipe((0,Fe.w)(c=>c?(0,Ee.of)(!1):this.zoneIsStable),(0,De.x)(),(0,Re.B)()),this._injector=Ze(Cs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,u){const h=c instanceof Tb;if(!this._injector.get(YC).done)throw!h&&Ia(c),new ee(405,!1);let v;v=h?c:this._injector.get(Jg).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const C=function Lo(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Ju),D=v.create(Js.NULL,[],u||v.selector,C),M=D.location.nativeElement,L=D.injector.get(o_,null);return L?.registerApplication(M),D.onDestroy(()=>{this.detachView(D.hostView),id(this.components,D),L?.unregisterApplication(M)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const u=c;this._views.push(u),u.attachToAppRef(this)}detachView(c){const u=c;id(this._views,u),u.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const u=this._injector.get(Wf,[]);u.push(...this._bootstrapListeners),u.forEach(h=>h(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>id(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ee(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function id(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}const nk=new cn("",{providedIn:"root",factory:()=>Ze(Li).handleError.bind(void 0)});function Y3(){const s=Ze(Nr),o=Ze(Li);return c=>s.runOutsideAngular(()=>o.handleError(c))}let Q3=(()=>{class s{constructor(){this.zone=Ze(Nr),this.applicationRef=Ze(qf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(u){return new(u||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function fS(){return!1}let nV=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=Zf}return s})();function Zf(s){return function sd(s,o,c){if(Vs(s)&&!c){const u=ii(s.index,o);return new If(u,u)}return 47&s.type?new If(o[Xn],o):null}(yr(),ye(),16==(16&s))}class sk{constructor(){}supports(o){return am(o)}create(o){return new ok(o)}}const es=(s,o)=>o;class ok{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||es}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,u=this._removalsHead,h=0,p=null;for(;c||u;){const v=!u||c&&c.currentIndex<CS(u,h,p)?c:u,C=CS(v,h,p),b=v.currentIndex;if(v===u)h--,u=u._nextRemoved;else if(c=c._next,null==v.previousIndex)h++;else{p||(p=[]);const D=C-h,M=b-h;if(D!=M){for(let q=0;q<D;q++){const Y=q<p.length?p[q]:p[q]=0,ue=Y+q;M<=ue&&ue<D&&(p[q]=Y+1)}p[v.previousIndex]=M-D}}C!==b&&o(v,C,b)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!am(o))throw new ee(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,v,c=this._itHead,u=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)p=o[C],v=this._trackByFn(C,p),null!==c&&Object.is(c.trackById,v)?(u&&(c=this._verifyReinsertion(c,p,v,C)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,v,C),u=!0),c=c._next}else h=0,function bO(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[Symbol.iterator]();let u;for(;!(u=c.next()).done;)o(u.value)}}(o,C=>{v=this._trackByFn(h,C),null!==c&&Object.is(c.trackById,v)?(u&&(c=this._verifyReinsertion(c,C,v,h)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,v,h),u=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,u,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,p,h)):o=this._addAfter(new ak(c,u),p,h),o}_verifyReinsertion(o,c,u,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,c,u),this._addToMoves(o,u),o}_moveAfter(o,c,u){return this._unlink(o),this._insertAfter(o,c,u),this._addToMoves(o,u),o}_addAfter(o,c,u){return this._insertAfter(o,c,u),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,u){const h=null===c?this._itHead:c._next;return o._next=h,o._prev=c,null===h?this._itTail=o:h._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new u_),this._linkedRecords.put(o),o.currentIndex=u,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,u=o._next;return null===c?this._itHead=u:c._next=u,null===u?this._itTail=c:u._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new u_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ak{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ud{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===c||c<=u.currentIndex)&&Object.is(u.trackById,o))return u;return null}remove(o){const c=o._prevDup,u=o._nextDup;return null===c?this._head=u:c._nextDup=u,null===u?this._tail=c:u._prevDup=c,null===this._head}}class u_{constructor(){this.map=new Map}put(o){const c=o.trackById;let u=this.map.get(c);u||(u=new ud,this.map.set(c,u)),u.add(o)}get(o,c){const h=this.map.get(o);return h?h.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function CS(s,o,c){const u=s.previousIndex;if(null===u)return u;let h=0;return c&&u<c.length&&(h=c[u]),u+o+h}class bs{constructor(){}supports(o){return o instanceof Map||bf(o)}create(){return new iV}}class iV{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||bf(o)))throw new ee(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(u,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,u),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(h,u);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let u=c;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const u=o._prev;return c._next=o,c._prev=u,o._prev=c,u&&(u._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,c);const p=h._prev,v=h._next;return p&&(p._next=v),v&&(v._prev=p),h._next=null,h._prev=null,h}const u=new ck(o);return this._records.set(o,u),u.currentValue=c,this._addToAdditions(u),u}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(u=>c(o[u],u))}}class ck{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function wS(){return new ts([new sk])}let ts=(()=>{class s{static#e=this.\u0275prov=pt({token:s,providedIn:"root",factory:wS});constructor(c){this.factories=c}static create(c,u){if(null!=u){const h=u.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:u=>s.create(c,u||wS()),deps:[[s,new $e,new oe]]}}find(c){const u=this.factories.find(h=>h.supports(c));if(null!=u)return u;throw new ee(901,!1)}}return s})();function d_(){return new It([new bs])}let It=(()=>{class s{static#e=this.\u0275prov=pt({token:s,providedIn:"root",factory:d_});constructor(c){this.factories=c}static create(c,u){if(u){const h=u.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:u=>s.create(c,u||d_()),deps:[[s,new $e,new oe]]}}find(c){const u=this.factories.find(h=>h.supports(c));if(u)return u;throw new ee(901,!1)}}return s})();const lk=to(null,"core",[]);let uk=(()=>{class s{constructor(c){}static#e=this.\u0275fac=function(u){return new(u||s)(Be(qf))};static#t=this.\u0275mod=jl({type:s});static#n=this.\u0275inj=An({})}return s})();function yw(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function vk(s){const o=Ft(s);if(!o)return null;const c=new il(o);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3399:(st,Ie,k)=>{k.d(Ie,{Z:()=>Je});var d=k(9058),V=k(4537),F=k(7592),te=k(7879);class ge{constructor(Ae,Te){this._delegate=Ae,this.firebase=Te,(0,F._addComponent)(Ae,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=Ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this._delegate.automaticDataCollectionEnabled=Ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ae=>{this._delegate.checkDestroyed(),Ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Ae,Te=F._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const at=this._delegate.container.getProvider(Ae);return!at.isInitialized()&&"EXPLICIT"===(null===(tt=at.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&at.initialize(),at.getImmediate({identifier:Te})}_removeServiceInstance(Ae,Te=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ae).clearInstance(Te)}_addComponent(Ae){(0,F._addComponent)(this._delegate,Ae)}_addOrOverwriteComponent(Ae){(0,F._addOrOverwriteComponent)(this._delegate,Ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Re=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function De(){const ve=function Fe(ve){const Ae={},Te={__esModule:!0,initializeApp:function ee(ke,B={}){const Ce=F.initializeApp(ke,B);if((0,d.r3)(Ae,Ce.name))return Ae[Ce.name];const Ue=new ve(Ce,Te);return Ae[Ce.name]=Ue,Ue},app:at,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function re(ke){const B=ke.name,Ce=B.replace("-compat","");if(F._registerComponent(ke)&&"PUBLIC"===ke.type){const Ue=(ct=at())=>{if("function"!=typeof ct[Ce])throw Re.create("invalid-app-argument",{appName:B});return ct[Ce]()};void 0!==ke.serviceProps&&(0,d.ZB)(Ue,ke.serviceProps),Te[Ce]=Ue,ve.prototype[Ce]=function(...ct){return this._getService.bind(this,B).apply(this,ke.multipleInstances?ct:[])}}return"PUBLIC"===ke.type?Te[Ce]:null},removeApp:function tt(ke){delete Ae[ke]},useAsService:function fe(ke,B){return"serverAuth"===B?null:B},modularAPIs:F}};function at(ke){if(!(0,d.r3)(Ae,ke=ke||F._DEFAULT_ENTRY_NAME))throw Re.create("no-app",{appName:ke});return Ae[ke]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function he(){return Object.keys(Ae).map(ke=>Ae[ke])}}),at.App=ve,Te}(ge);return ve.INTERNAL=Object.assign(Object.assign({},ve.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function Ae(Te){(0,d.ZB)(ve,Te)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ve}(),W=new te.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ve=self.firebase.SDK_VERSION;ve&&ve.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=U;!function Me(ve){(0,F.registerVersion)("@firebase/app-compat","0.2.13",ve)}()},7592:(st,Ie,k)=>{k.r(Ie),k.d(Ie,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>An,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>pe,_addOrOverwriteComponent:()=>Oe,_apps:()=>le,_clearComponents:()=>ft,_components:()=>se,_getProvider:()=>Ve,_registerComponent:()=>Qe,_removeServiceInstance:()=>en,deleteApp:()=>fi,getApp:()=>nn,getApps:()=>Un,initializeApp:()=>En,onLog:()=>Vn,registerVersion:()=>cr,setLogLevel:()=>Lr});var d=k(5861),V=k(4537),F=k(7879),te=k(9058),ge=k(1878);class Ee{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function Re(ze){const _e=ze.getComponent();return"VERSION"===_e?.type}(Xe)){const ot=Xe.getImmediate();return`${ot.library}/${ot.version}`}return null}).filter(Xe=>Xe).join(" ")}}const Fe="@firebase/app",U=new F.Yd("@firebase/app"),ie="[DEFAULT]",ce={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},le=new Map,se=new Map;function pe(ze,_e){try{ze.container.addComponent(_e)}catch(Xe){U.debug(`Component ${_e.name} failed to register with FirebaseApp ${ze.name}`,Xe)}}function Oe(ze,_e){ze.container.addOrOverwriteComponent(_e)}function Qe(ze){const _e=ze.name;if(se.has(_e))return U.debug(`There were multiple attempts to register component ${_e}.`),!1;se.set(_e,ze);for(const Xe of le.values())pe(Xe,ze);return!0}function Ve(ze,_e){const Xe=ze.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),ze.container.getProvider(_e)}function en(ze,_e,Xe=ie){Ve(ze,_e).clearInstance(Xe)}function ft(){se.clear()}const pt=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class tn{constructor(_e,Xe,ot){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=ot,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw pt.create("app-deleted",{appName:this._name})}}const An="9.23.0";function En(ze,_e={}){let Xe=ze;"object"!=typeof _e&&(_e={name:_e});const ot=Object.assign({name:ie,automaticDataCollectionEnabled:!1},_e),kt=ot.name;if("string"!=typeof kt||!kt)throw pt.create("bad-app-name",{appName:String(kt)});if(Xe||(Xe=(0,te.aH)()),!Xe)throw pt.create("no-options");const Vt=le.get(kt);if(Vt){if((0,te.vZ)(Xe,Vt.options)&&(0,te.vZ)(ot,Vt.config))return Vt;throw pt.create("duplicate-app",{appName:kt})}const qn=new V.H0(kt);for(const $ of se.values())qn.addComponent($);const H=new tn(Xe,ot,qn);return le.set(kt,H),H}function nn(ze=ie){const _e=le.get(ze);if(!_e&&ze===ie&&(0,te.aH)())return En();if(!_e)throw pt.create("no-app",{appName:ze});return _e}function Un(){return Array.from(le.values())}function fi(ze){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,d.Z)(function*(ze){const _e=ze.name;le.has(_e)&&(le.delete(_e),yield Promise.all(ze.container.getProviders().map(Xe=>Xe.delete())),ze.isDeleted=!0)})).apply(this,arguments)}function cr(ze,_e,Xe){var ot;let kt=null!==(ot=ce[ze])&&void 0!==ot?ot:ze;Xe&&(kt+=`-${Xe}`);const Vt=kt.match(/\s|\//),qn=_e.match(/\s|\//);if(Vt||qn){const H=[`Unable to register library "${kt}" with version "${_e}":`];return Vt&&H.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),Vt&&qn&&H.push("and"),qn&&H.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void U.warn(H.join(" "))}Qe(new V.wA(`${kt}-version`,()=>({library:kt,version:_e}),"VERSION"))}function Vn(ze,_e){if(null!==ze&&"function"!=typeof ze)throw pt.create("invalid-log-argument");(0,F.Am)(ze,_e)}function Lr(ze){(0,F.Ub)(ze)}const ds="firebase-heartbeat-database",ht=1,_t="firebase-heartbeat-store";let bt=null;function rn(){return bt||(bt=(0,ge.X3)(ds,ht,{upgrade:(ze,_e)=>{0===_e&&ze.createObjectStore(_t)}}).catch(ze=>{throw pt.create("idb-open",{originalErrorMessage:ze.message})})),bt}function Ur(){return(Ur=(0,d.Z)(function*(ze){try{return yield(yield rn()).transaction(_t).objectStore(_t).get(hs(ze))}catch(_e){if(_e instanceof te.ZR)U.warn(_e.message);else{const Xe=pt.create("idb-get",{originalErrorMessage:_e?.message});U.warn(Xe.message)}}})).apply(this,arguments)}function Rt(ze,_e){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,d.Z)(function*(ze,_e){try{const ot=(yield rn()).transaction(_t,"readwrite");yield ot.objectStore(_t).put(_e,hs(ze)),yield ot.done}catch(Xe){if(Xe instanceof te.ZR)U.warn(Xe.message);else{const ot=pt.create("idb-set",{originalErrorMessage:Xe?.message});U.warn(ot.message)}}})).apply(this,arguments)}function hs(ze){return`${ze.name}!${ze.options.appId}`}class Ut{constructor(_e){this.container=_e,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new Zi(Xe),this._heartbeatsCachePromise=this._storage.read().then(ot=>(this._heartbeatsCache=ot,ot))}triggerHeartbeat(){var _e=this;return(0,d.Z)(function*(){const ot=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=xn();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),_e._heartbeatsCache.lastSentHeartbeatDate!==kt&&!_e._heartbeatsCache.heartbeats.some(Vt=>Vt.date===kt))return _e._heartbeatsCache.heartbeats.push({date:kt,agent:ot}),_e._heartbeatsCache.heartbeats=_e._heartbeatsCache.heartbeats.filter(Vt=>{const qn=new Date(Vt.date).valueOf();return Date.now()-qn<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,d.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache||0===_e._heartbeatsCache.heartbeats.length)return"";const Xe=xn(),{heartbeatsToSend:ot,unsentEntries:kt}=function Ai(ze,_e=1024){const Xe=[];let ot=ze.slice();for(const kt of ze){const Vt=Xe.find(qn=>qn.agent===kt.agent);if(Vt){if(Vt.dates.push(kt.date),Ki(Xe)>_e){Vt.dates.pop();break}}else if(Xe.push({agent:kt.agent,dates:[kt.date]}),Ki(Xe)>_e){Xe.pop();break}ot=ot.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:ot}}(_e._heartbeatsCache.heartbeats),Vt=(0,te.L)(JSON.stringify({version:2,heartbeats:ot}));return _e._heartbeatsCache.lastSentHeartbeatDate=Xe,kt.length>0?(_e._heartbeatsCache.heartbeats=kt,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache.heartbeats=[],_e._storage.overwrite(_e._heartbeatsCache)),Vt})()}}function xn(){return(new Date).toISOString().substring(0,10)}class Zi{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,d.Z)(function*(){return(yield _e._canUseIndexedDBPromise)&&(yield function ti(ze){return Ur.apply(this,arguments)}(_e.app))||{heartbeats:[]}})()}overwrite(_e){var Xe=this;return(0,d.Z)(function*(){var ot;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(ot=_e.lastSentHeartbeatDate)&&void 0!==ot?ot:Vt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}})()}add(_e){var Xe=this;return(0,d.Z)(function*(){var ot;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(ot=_e.lastSentHeartbeatDate)&&void 0!==ot?ot:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,..._e.heartbeats]})}})()}}function Ki(ze){return(0,te.L)(JSON.stringify({version:2,heartbeats:ze})).length}!function lr(ze){Qe(new V.wA("platform-logger",_e=>new Ee(_e),"PRIVATE")),Qe(new V.wA("heartbeat",_e=>new Ut(_e),"PRIVATE")),cr(Fe,"0.9.13",ze),cr(Fe,"0.9.13","esm2017"),cr("fire-js","")}("")},120:(st,Ie,k)=>{k.d(Ie,{Z:()=>d.Z});var d=k(3399);d.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(st,Ie,k)=>{k.r(Ie);var d=k(5861),V=k(3399),F=k(6710),te=k(9058),Re=(k(7592),k(7879),k(4537));function Fe(){return window}function W(){return W=(0,d.Z)(function*(O,N,x){var K;const{BuildInfo:me}=Fe();(0,F.as)(N.sessionId,"AuthEvent did not contain a session ID");const Be=yield function Te(O){return tt.apply(this,arguments)}(N.sessionId),vt={};return(0,F.at)()?vt.ibi=me.packageName:(0,F.au)()?vt.apn=me.packageName:(0,F.av)(O,"operation-not-supported-in-this-environment"),me.displayName&&(vt.appDisplayName=me.displayName),vt.sessionId=Be,(0,F.aw)(O,x,N.type,void 0,null!==(K=N.eventId)&&void 0!==K?K:void 0,vt)}),W.apply(this,arguments)}function Pe(){return(Pe=(0,d.Z)(function*(O){const{BuildInfo:N}=Fe(),x={};(0,F.at)()?x.iosBundleId=N.packageName:(0,F.au)()?x.androidPackageName=N.packageName:(0,F.av)(O,"operation-not-supported-in-this-environment"),yield(0,F.ax)(O,x)})).apply(this,arguments)}function ve(){return(ve=(0,d.Z)(function*(O,N,x){const{cordova:K}=Fe();let me=()=>{};try{yield new Promise((Be,vt)=>{let Ze=null;function Zt(){var xt;Be();const Mi=null===(xt=K.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof Mi&&Mi(),"function"==typeof x?.close&&x.close()}function Ct(){Ze||(Ze=window.setTimeout(()=>{vt((0,F.az)(O,"redirect-cancelled-by-user"))},2e3))}function hn(){"visible"===document?.visibilityState&&Ct()}N.addPassiveListener(Zt),document.addEventListener("resume",Ct,!1),(0,F.au)()&&document.addEventListener("visibilitychange",hn,!1),me=()=>{N.removePassiveListener(Zt),document.removeEventListener("resume",Ct,!1),document.removeEventListener("visibilitychange",hn,!1),Ze&&window.clearTimeout(Ze)}})}finally{me()}})).apply(this,arguments)}function tt(){return(tt=(0,d.Z)(function*(O){const N=function at(O){if((0,F.as)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const N=new ArrayBuffer(O.length),x=new Uint8Array(N);for(let K=0;K<O.length;K++)x[K]=O.charCodeAt(K);return x}(O),x=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(x)).map(me=>me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class he extends F.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(N)),super.onEvent(N)}initialized(){var N=this;return(0,d.Z)(function*(){yield N.initPromise})()}}function ke(O){return B.apply(this,arguments)}function B(){return(B=(0,d.Z)(function*(O){const N=yield ct()._get(Xt(O));return N&&(yield ct()._remove(Xt(O))),N})).apply(this,arguments)}function Ue(){const O=[];for(let x=0;x<20;x++){const K=Math.floor(62*Math.random());O.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(K))}return O.join("")}function ct(){return(0,F.aC)(F.b)}function Xt(O){return(0,F.aD)("authEvent",O.config.apiKey,O.name)}function In(O){if(!O?.includes("?"))return{};const[N,...x]=O.split("?");return(0,te.zd)(x.join("?"))}const ie=class Fr{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(N){var x=this;return(0,d.Z)(function*(){const K=N._key();let me=x.eventManagers.get(K);return me||(me=new he(N),x.eventManagers.set(K,me),x.attachCallbackListeners(N,me)),me})()}_openPopup(N){(0,F.av)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,x,K,me){var Be=this;return(0,d.Z)(function*(){!function Ae(O){var N,x,K,me,Be,vt,Ze,Zt,Ct,hn;const xt=Fe();(0,F.aA)("function"==typeof(null===(N=xt?.universalLinks)||void 0===N?void 0:N.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.aA)(typeof(null===(x=xt?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.aA)("function"==typeof(null===(Be=null===(me=null===(K=xt?.cordova)||void 0===K?void 0:K.plugins)||void 0===me?void 0:me.browsertab)||void 0===Be?void 0:Be.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===(Zt=null===(Ze=null===(vt=xt?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===Zt?void 0:Zt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===(hn=null===(Ct=xt?.cordova)||void 0===Ct?void 0:Ct.InAppBrowser)||void 0===hn?void 0:hn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const vt=yield Be._initialize(N);yield vt.initialized(),vt.resetRedirect(),(0,F.aG)(),yield Be._originValidation(N);const Ze=function re(O,N,x=null){return{type:N,eventId:x,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:O.tenantId,error:(0,F.az)(O,"no-auth-event")}}(N,K,me);yield function fe(O,N){return ct()._set(Xt(O),N)}(N,Ze);const Zt=yield function U(O,N,x){return W.apply(this,arguments)}(N,Ze,x),Ct=yield function Me(O){const{cordova:N}=Fe();return new Promise(x=>{N.plugins.browsertab.isAvailable(K=>{let me=null;K?N.plugins.browsertab.openUrl(O):me=N.InAppBrowser.open(O,(0,F.ay)()?"_blank":"_system","location=yes"),x(me)})})}(Zt);return function Je(O,N,x){return ve.apply(this,arguments)}(N,vt,Ct)})()}_isIframeWebStorageSupported(N,x){throw new Error("Method not implemented.")}_originValidation(N){const x=N._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function X(O){return Pe.apply(this,arguments)}(N)),this.originValidationPromises[x]}attachCallbackListeners(N,x){const{universalLinks:K,handleOpenURL:me,BuildInfo:Be}=Fe(),vt=setTimeout((0,d.Z)(function*(){yield ke(N),x.onEvent(ce())}),500),Ze=function(){var hn=(0,d.Z)(function*(xt){clearTimeout(vt);const Mi=yield ke(N);let Cc=null;Mi&&xt?.url&&(Cc=function Ce(O,N){var x,K;const me=function Cn(O){const N=In(O),x=N.link?decodeURIComponent(N.link):void 0,K=In(x).link,me=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return In(me).link||me||K||x||O}(N);if(me.includes("/__/auth/callback")){const Be=In(me),vt=Be.firebaseError?function Ln(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(Be.firebaseError)):null,Ze=null===(K=null===(x=vt?.code)||void 0===x?void 0:x.split("auth/"))||void 0===K?void 0:K[1],Zt=Ze?(0,F.az)(Ze):null;return Zt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:me,postBody:null}}return null}(Mi,xt.url)),x.onEvent(Cc||ce())});return function(Mi){return hn.apply(this,arguments)}}();typeof K<"u"&&"function"==typeof K.subscribe&&K.subscribe(null,Ze);const Zt=me,Ct=`${Be.packageName.toLowerCase()}://`;Fe().handleOpenURL=function(){var hn=(0,d.Z)(function*(xt){if(xt.toLowerCase().startsWith(Ct)&&Ze({url:xt}),"function"==typeof Zt)try{Zt(xt)}catch(Mi){console.error(Mi)}});return function(xt){return hn.apply(this,arguments)}}()}};function ce(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.az)("no-auth-event")}}function Qe(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function en(O=(0,te.z$)()){return!("file:"!==Qe()&&"ionic:"!==Qe()&&"capacitor:"!==Qe()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function An(){try{const O=self.localStorage,N=F.aL();if(O)return O.setItem(N,"1"),O.removeItem(N),!function tn(O=(0,te.z$)()){return function qt(){return(0,te.w1)()&&11===document?.documentMode}()||function pt(O=(0,te.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,te.hl)()}catch{return En()&&(0,te.hl)()}return!1}function En(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function nn(){return(function Ve(){return"http:"===Qe()||"https:"===Qe()}()||(0,te.ru)()||en())&&!function ft(){return(0,te.b$)()||(0,te.UG)()}()&&An()&&!En()}function Un(){return en()&&typeof document<"u"}function Mr(){return(Mr=(0,d.Z)(function*(){return!!Un()&&new Promise(O=>{const N=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),O(!0)})})})).apply(this,arguments)}const Vn={LOCAL:"local",NONE:"none",SESSION:"session"},Lr=F.aA,ds="persistence";function _t(O){return bt.apply(this,arguments)}function bt(){return(bt=(0,d.Z)(function*(O){yield O._initializationPromise;const N=ti(),x=F.aD(ds,O.config.apiKey,O.name);N&&N.setItem(x,O._getPersistence())})).apply(this,arguments)}function ti(){var O;try{return(null===(O=function cr(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Ur=F.aA;class Rt{constructor(){this.browserResolver=F.aC(F.k),this.cordovaResolver=F.aC(ie),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(N){var x=this;return(0,d.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,x,K,me){var Be=this;return(0,d.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openPopup(N,x,K,me)})()}_openRedirect(N,x,K,me){var Be=this;return(0,d.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openRedirect(N,x,K,me)})()}_isIframeWebStorageSupported(N,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,x)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return Un()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ur(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,d.Z)(function*(){if(N.underlyingResolver)return;const x=yield function fi(){return Mr.apply(this,arguments)}();N.underlyingResolver=x?N.cordovaResolver:N.browserResolver})()}}function Mn(O){return O.unwrap()}function Gt(O){return Ut(O)}function Ut(O){const{_tokenResponse:N}=O instanceof te.ZR?O.customData:O;if(!N)return null;if(!(O instanceof te.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return F.P.credentialFromResult(O);const x=N.providerId;if(!x||x===F.p.PASSWORD)return null;let K;switch(x){case F.p.GOOGLE:K=F.V;break;case F.p.FACEBOOK:K=F.U;break;case F.p.GITHUB:K=F.W;break;case F.p.TWITTER:K=F.Z;break;default:const{oauthIdToken:me,oauthAccessToken:Be,oauthTokenSecret:vt,pendingToken:Ze,nonce:Zt}=N;return Be||vt||me||Ze?Ze?x.startsWith("saml.")?F.aO._create(x,Ze):F.L._fromParams({providerId:x,signInMethod:x,pendingToken:Ze,idToken:me,accessToken:Be}):new F.X(x).credential({idToken:me,accessToken:Be,rawNonce:Zt}):null}return O instanceof te.ZR?K.credentialFromError(O):K.credentialFromResult(O)}function xn(O,N){return N.catch(x=>{throw x instanceof te.ZR&&function co(O,N){var x;const K=null===(x=N.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===N?.code)N.resolver=new Ki(O,F.aq(O,N));else if(K){const me=Ut(N),Be=N;me&&(Be.credential=me,Be.tenantId=K.tenantId||void 0,Be.email=K.email||void 0,Be.phoneNumber=K.phoneNumber||void 0)}}(O,x),x}).then(x=>{const me=x.user;return{operationType:x.operationType,credential:Gt(x),additionalUserInfo:F.ao(x),user:lr.getOrCreate(me)}})}function Ai(O,N){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,d.Z)(function*(O,N){const x=yield N;return{verificationId:x.verificationId,confirm:K=>xn(O,x.confirm(K))}})).apply(this,arguments)}class Ki{constructor(N,x){this.resolver=x,this.auth=function hs(O){return O.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return xn(Mn(this.auth),this.resolver.resolveSignIn(N))}}class lr{constructor(N){this._delegate=N,this.multiFactor=F.ar(N)}static getOrCreate(N){return lr.USER_MAP.has(N)||lr.USER_MAP.set(N,new lr(N)),lr.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var x=this;return(0,d.Z)(function*(){return xn(x.auth,F.a0(x._delegate,N))})()}linkWithPhoneNumber(N,x){var K=this;return(0,d.Z)(function*(){return Ai(K.auth,F.l(K._delegate,N,x))})()}linkWithPopup(N){var x=this;return(0,d.Z)(function*(){return xn(x.auth,F.d(x._delegate,N,Rt))})()}linkWithRedirect(N){var x=this;return(0,d.Z)(function*(){return yield _t(F.aH(x.auth)),F.g(x._delegate,N,Rt)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var x=this;return(0,d.Z)(function*(){return xn(x.auth,F.a1(x._delegate,N))})()}reauthenticateWithPhoneNumber(N,x){return Ai(this.auth,F.r(this._delegate,N,x))}reauthenticateWithPopup(N){return xn(this.auth,F.e(this._delegate,N,Rt))}reauthenticateWithRedirect(N){var x=this;return(0,d.Z)(function*(){return yield _t(F.aH(x.auth)),F.h(x._delegate,N,Rt)})()}sendEmailVerification(N){return F.ae(this._delegate,N)}unlink(N){var x=this;return(0,d.Z)(function*(){return yield F.an(x._delegate,N),x})()}updateEmail(N){return F.aj(this._delegate,N)}updatePassword(N){return F.ak(this._delegate,N)}updatePhoneNumber(N){return F.u(this._delegate,N)}updateProfile(N){return F.ai(this._delegate,N)}verifyBeforeUpdateEmail(N,x){return F.af(this._delegate,N,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}lr.USER_MAP=new WeakMap;const ze=F.aA;let _e=(()=>{class O{constructor(x,K){if(this.app=x,K.isInitialized())return this._delegate=K.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:me}=x.options;ze(me,"invalid-api-key",{appName:x.name}),ze(me,"invalid-api-key",{appName:x.name});const Be=typeof window<"u"?Rt:void 0;this._delegate=K.initialize({options:{persistence:ot(me,x.name),popupRedirectResolver:Be}}),this._delegate._updateErrorMap(F.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?lr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,K){F.I(this._delegate,x,K)}applyActionCode(x){return F.a5(this._delegate,x)}checkActionCode(x){return F.a6(this._delegate,x)}confirmPasswordReset(x,K){return F.a4(this._delegate,x,K)}createUserWithEmailAndPassword(x,K){var me=this;return(0,d.Z)(function*(){return xn(me._delegate,F.a8(me._delegate,x,K))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return F.ad(this._delegate,x)}isSignInWithEmailLink(x){return F.ab(this._delegate,x)}getRedirectResult(){var x=this;return(0,d.Z)(function*(){ze(nn(),x._delegate,"operation-not-supported-in-this-environment");const K=yield F.j(x._delegate,Rt);return K?xn(x._delegate,Promise.resolve(K)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function le(O,N){(0,F.aH)(O)._logFramework(N)}(this._delegate,x)}onAuthStateChanged(x,K,me){const{next:Be,error:vt,complete:Ze}=Xe(x,K,me);return this._delegate.onAuthStateChanged(Be,vt,Ze)}onIdTokenChanged(x,K,me){const{next:Be,error:vt,complete:Ze}=Xe(x,K,me);return this._delegate.onIdTokenChanged(Be,vt,Ze)}sendSignInLinkToEmail(x,K){return F.aa(this._delegate,x,K)}sendPasswordResetEmail(x,K){return F.a3(this._delegate,x,K||void 0)}setPersistence(x){var K=this;return(0,d.Z)(function*(){let me;switch(function ht(O,N){Lr(Object.values(Vn).includes(N),O,"invalid-persistence-type"),(0,te.b$)()?Lr(N!==Vn.SESSION,O,"unsupported-persistence-type"):(0,te.UG)()?Lr(N===Vn.NONE,O,"unsupported-persistence-type"):En()?Lr(N===Vn.NONE||N===Vn.LOCAL&&(0,te.hl)(),O,"unsupported-persistence-type"):Lr(N===Vn.NONE||An(),O,"unsupported-persistence-type")}(K._delegate,x),x){case Vn.SESSION:me=F.a;break;case Vn.LOCAL:me=(yield F.aC(F.i)._isAvailable())?F.i:F.b;break;case Vn.NONE:me=F.N;break;default:return F.av("argument-error",{appName:K._delegate.name})}return K._delegate.setPersistence(me)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return xn(this._delegate,F._(this._delegate))}signInWithCredential(x){return xn(this._delegate,F.$(this._delegate,x))}signInWithCustomToken(x){return xn(this._delegate,F.a2(this._delegate,x))}signInWithEmailAndPassword(x,K){return xn(this._delegate,F.a9(this._delegate,x,K))}signInWithEmailLink(x,K){return xn(this._delegate,F.ac(this._delegate,x,K))}signInWithPhoneNumber(x,K){return Ai(this._delegate,F.s(this._delegate,x,K))}signInWithPopup(x){var K=this;return(0,d.Z)(function*(){return ze(nn(),K._delegate,"operation-not-supported-in-this-environment"),xn(K._delegate,F.c(K._delegate,x,Rt))})()}signInWithRedirect(x){var K=this;return(0,d.Z)(function*(){return ze(nn(),K._delegate,"operation-not-supported-in-this-environment"),yield _t(K._delegate),F.f(K._delegate,x,Rt)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return F.a7(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=Vn,O})();function Xe(O,N,x){let K=O;"function"!=typeof O&&({next:K,error:N,complete:x}=O);const me=K;return{next:vt=>me(vt&&lr.getOrCreate(vt)),error:N,complete:x}}function ot(O,N){const x=function rn(O,N){const x=ti();if(!x)return[];const K=F.aD(ds,O,N);switch(x.getItem(K)){case Vn.NONE:return[F.N];case Vn.LOCAL:return[F.i,F.a];case Vn.SESSION:return[F.a];default:return[]}}(O,N);if(typeof self<"u"&&!x.includes(F.i)&&x.push(F.i),typeof window<"u")for(const K of[F.b,F.a])x.includes(K)||x.push(K);return x.includes(F.N)||x.push(F.N),x}class kt{constructor(){this.providerId="phone",this._delegate=new F.P(Mn(V.Z.auth()))}static credential(N,x){return F.P.credential(N,x)}verifyPhoneNumber(N,x){return this._delegate.verifyPhoneNumber(N,x)}unwrap(){return this._delegate}}kt.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,kt.PROVIDER_ID=F.P.PROVIDER_ID;const Vt=F.aA;class qn{constructor(N,x,K=V.Z.app()){var me;Vt(null===(me=K.options)||void 0===me?void 0:me.apiKey,"invalid-api-key",{appName:K.name}),this._delegate=new F.R(N,x,K.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $(O){O.INTERNAL.registerComponent(new Re.wA("auth-compat",N=>{const x=N.getProvider("app-compat").getImmediate(),K=N.getProvider("auth");return new _e(x,K)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.Q,FacebookAuthProvider:F.U,GithubAuthProvider:F.W,GoogleAuthProvider:F.V,OAuthProvider:F.X,SAMLAuthProvider:F.Y,PhoneAuthProvider:kt,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:qn,TwitterAuthProvider:F.Z,Auth:_e,AuthCredential:F.J,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},4537:(st,Ie,k)=>{k.d(Ie,{H0:()=>Fe,wA:()=>F});var d=k(5861),V=k(9058);class F{constructor(U,W,X){this.name=U,this.instanceFactory=W,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const te="[DEFAULT]";class ge{constructor(U,W){this.name=U,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const W=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(W)){const X=new V.BH;if(this.instancesDeferred.set(W,X),this.isInitialized(W)||this.shouldAutoInitialize())try{const Pe=this.getOrInitializeService({instanceIdentifier:W});Pe&&X.resolve(Pe)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(U){var W;const X=this.normalizeInstanceIdentifier(U?.identifier),Pe=null!==(W=U?.optional)&&void 0!==W&&W;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Pe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Me){if(Pe)return null;throw Me}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function Re(De){return"EAGER"===De.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[W,X]of this.instancesDeferred.entries()){const Pe=this.normalizeInstanceIdentifier(W);try{const Me=this.getOrInitializeService({instanceIdentifier:Pe});X.resolve(Me)}catch{}}}}clearInstance(U=te){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,d.Z)(function*(){const W=Array.from(U.instances.values());yield Promise.all([...W.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...W.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=te){return this.instances.has(U)}getOptions(U=te){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:W={}}=U,X=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Pe=this.getOrInitializeService({instanceIdentifier:X,options:W});for(const[Me,Je]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Me)&&Je.resolve(Pe);return Pe}onInit(U,W){var X;const Pe=this.normalizeInstanceIdentifier(W),Me=null!==(X=this.onInitCallbacks.get(Pe))&&void 0!==X?X:new Set;Me.add(U),this.onInitCallbacks.set(Pe,Me);const Je=this.instances.get(Pe);return Je&&U(Je,Pe),()=>{Me.delete(U)}}invokeOnInitCallbacks(U,W){const X=this.onInitCallbacks.get(W);if(X)for(const Pe of X)try{Pe(U,W)}catch{}}getOrInitializeService({instanceIdentifier:U,options:W={}}){let X=this.instances.get(U);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(De=U,De===te?void 0:De),options:W}),this.instances.set(U,X),this.instancesOptions.set(U,W),this.invokeOnInitCallbacks(X,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,X)}catch{}var De;return X||null}normalizeInstanceIdentifier(U=te){return this.component?this.component.multipleInstances?U:te:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const W=this.getProvider(U.name);if(W.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);W.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const W=new ge(U,this);return this.providers.set(U,W),W}getProviders(){return Array.from(this.providers.values())}}},7879:(st,Ie,k)=>{k.d(Ie,{Am:()=>De,Ub:()=>Fe,Yd:()=>Re,in:()=>V});const d=[];var V=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(V||{});const F={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},te=V.INFO,ge={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},Ee=(U,W,...X)=>{if(W<U.logLevel)return;const Pe=(new Date).toISOString(),Me=ge[W];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Me](`[${Pe}]  ${U.name}:`,...X)};class Re{constructor(W){this.name=W,this._logLevel=te,this._logHandler=Ee,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in V))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?F[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...W),this._logHandler(this,V.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...W),this._logHandler(this,V.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,V.INFO,...W),this._logHandler(this,V.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,V.WARN,...W),this._logHandler(this,V.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...W),this._logHandler(this,V.ERROR,...W)}}function Fe(U){d.forEach(W=>{W.setLogLevel(U)})}function De(U,W){for(const X of d){let Pe=null;W&&W.level&&(Pe=F[W.level]),X.userLogHandler=null===U?null:(Me,Je,...ve)=>{const Ae=ve.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch{return null}}).filter(Te=>Te).join(" ");Je>=(Pe??Me.logLevel)&&U({level:V[Je].toLowerCase(),message:Ae,args:ve,type:Me.name})}}}},1878:(st,Ie,k)=>{k.d(Ie,{X3:()=>at});var d=k(5861);const V=(B,Ce)=>Ce.some(Ue=>B instanceof Ue);let F,te;const Re=new WeakMap,Fe=new WeakMap,De=new WeakMap,U=new WeakMap,W=new WeakMap;let Me={get(B,Ce,Ue){if(B instanceof IDBTransaction){if("done"===Ce)return Fe.get(B);if("objectStoreNames"===Ce)return B.objectStoreNames||De.get(B);if("store"===Ce)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return Te(B[Ce])},set:(B,Ce,Ue)=>(B[Ce]=Ue,!0),has:(B,Ce)=>B instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in B};function Ae(B){return"function"==typeof B?function ve(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...Ce){return B.apply(tt(this),Ce),Te(Re.get(this))}:function(...Ce){return Te(B.apply(tt(this),Ce))}:function(Ce,...Ue){const ct=B.call(tt(this),Ce,...Ue);return De.set(ct,Ce.sort?Ce.sort():[Ce]),Te(ct)}}(B):(B instanceof IDBTransaction&&function Pe(B){if(Fe.has(B))return;const Ce=new Promise((Ue,ct)=>{const Xt=()=>{B.removeEventListener("complete",Ln),B.removeEventListener("error",Cn),B.removeEventListener("abort",Cn)},Ln=()=>{Ue(),Xt()},Cn=()=>{ct(B.error||new DOMException("AbortError","AbortError")),Xt()};B.addEventListener("complete",Ln),B.addEventListener("error",Cn),B.addEventListener("abort",Cn)});Fe.set(B,Ce)}(B),V(B,function ge(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,Me):B)}function Te(B){if(B instanceof IDBRequest)return function X(B){const Ce=new Promise((Ue,ct)=>{const Xt=()=>{B.removeEventListener("success",Ln),B.removeEventListener("error",Cn)},Ln=()=>{Ue(Te(B.result)),Xt()},Cn=()=>{ct(B.error),Xt()};B.addEventListener("success",Ln),B.addEventListener("error",Cn)});return Ce.then(Ue=>{Ue instanceof IDBCursor&&Re.set(Ue,B)}).catch(()=>{}),W.set(Ce,B),Ce}(B);if(U.has(B))return U.get(B);const Ce=Ae(B);return Ce!==B&&(U.set(B,Ce),W.set(Ce,B)),Ce}const tt=B=>W.get(B);function at(B,Ce,{blocked:Ue,upgrade:ct,blocking:Xt,terminated:Ln}={}){const Cn=indexedDB.open(B,Ce),In=Te(Cn);return ct&&Cn.addEventListener("upgradeneeded",dn=>{ct(Te(Cn.result),dn.oldVersion,dn.newVersion,Te(Cn.transaction),dn)}),Ue&&Cn.addEventListener("blocked",dn=>Ue(dn.oldVersion,dn.newVersion,dn)),In.then(dn=>{Ln&&dn.addEventListener("close",()=>Ln()),Xt&&dn.addEventListener("versionchange",Fr=>Xt(Fr.oldVersion,Fr.newVersion,Fr))}).catch(()=>{}),In}const he=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],fe=new Map;function ke(B,Ce){if(!(B instanceof IDBDatabase)||Ce in B||"string"!=typeof Ce)return;if(fe.get(Ce))return fe.get(Ce);const Ue=Ce.replace(/FromIndex$/,""),ct=Ce!==Ue,Xt=re.includes(Ue);if(!(Ue in(ct?IDBIndex:IDBObjectStore).prototype)||!Xt&&!he.includes(Ue))return;const Ln=function(){var Cn=(0,d.Z)(function*(In,...dn){const Fr=this.transaction(In,Xt?"readwrite":"readonly");let ie=Fr.store;return ct&&(ie=ie.index(dn.shift())),(yield Promise.all([ie[Ue](...dn),Xt&&Fr.done]))[0]});return function(dn){return Cn.apply(this,arguments)}}();return fe.set(Ce,Ln),Ln}!function Je(B){Me=B(Me)}(B=>({...B,get:(Ce,Ue,ct)=>ke(Ce,Ue)||B.get(Ce,Ue,ct),has:(Ce,Ue)=>!!ke(Ce,Ue)||B.has(Ce,Ue)}))},5861:(st,Ie,k)=>{function d(F,te,ge,Ee,Re,Fe,De){try{var U=F[Fe](De),W=U.value}catch(X){return void ge(X)}U.done?te(W):Promise.resolve(W).then(Ee,Re)}function V(F){return function(){var te=this,ge=arguments;return new Promise(function(Ee,Re){var Fe=F.apply(te,ge);function De(W){d(Fe,Ee,Re,De,U,"next",W)}function U(W){d(Fe,Ee,Re,De,U,"throw",W)}De(void 0)})}}k.d(Ie,{Z:()=>V})},7582:(st,Ie,k)=>{function te(ie,ce){var le={};for(var se in ie)Object.prototype.hasOwnProperty.call(ie,se)&&ce.indexOf(se)<0&&(le[se]=ie[se]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(se=Object.getOwnPropertySymbols(ie);pe<se.length;pe++)ce.indexOf(se[pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,se[pe])&&(le[se[pe]]=ie[se[pe]])}return le}function X(ie,ce,le,se){return new(le||(le=Promise))(function(Oe,Qe){function Ve(qt){try{ft(se.next(qt))}catch(pt){Qe(pt)}}function en(qt){try{ft(se.throw(qt))}catch(pt){Qe(pt)}}function ft(qt){qt.done?Oe(qt.value):function pe(Oe){return Oe instanceof le?Oe:new le(function(Qe){Qe(Oe)})}(qt.value).then(Ve,en)}ft((se=se.apply(ie,ce||[])).next())})}function ee(ie){return this instanceof ee?(this.v=ie,this):new ee(ie)}function he(ie,ce,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,se=le.apply(ie,ce||[]),Oe=[];return pe={},Qe("next"),Qe("throw"),Qe("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function Qe(tn){se[tn]&&(pe[tn]=function(An){return new Promise(function(En,nn){Oe.push([tn,An,En,nn])>1||Ve(tn,An)})})}function Ve(tn,An){try{!function en(tn){tn.value instanceof ee?Promise.resolve(tn.value.v).then(ft,qt):pt(Oe[0][2],tn)}(se[tn](An))}catch(En){pt(Oe[0][3],En)}}function ft(tn){Ve("next",tn)}function qt(tn){Ve("throw",tn)}function pt(tn,An){tn(An),Oe.shift(),Oe.length&&Ve(Oe[0][0],Oe[0][1])}}function fe(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ce=ie[Symbol.asyncIterator];return ce?ce.call(ie):(ie=function ve(ie){var ce="function"==typeof Symbol&&Symbol.iterator,le=ce&&ie[ce],se=0;if(le)return le.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&se>=ie.length&&(ie=void 0),{value:ie&&ie[se++],done:!ie}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),le={},se("next"),se("throw"),se("return"),le[Symbol.asyncIterator]=function(){return this},le);function se(Oe){le[Oe]=ie[Oe]&&function(Qe){return new Promise(function(Ve,en){!function pe(Oe,Qe,Ve,en){Promise.resolve(en).then(function(ft){Oe({value:ft,done:Ve})},Qe)}(Ve,en,(Qe=ie[Oe](Qe)).done,Qe.value)})}}}k.d(Ie,{FC:()=>he,KL:()=>fe,_T:()=>te,mG:()=>X,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},st=>{st(st.s=9754)}]);