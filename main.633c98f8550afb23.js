"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(st,be,L)=>{L.d(be,{Dh:()=>Ae,GT:()=>ge,cc:()=>Oe,on:()=>Me,pX:()=>ne,xv:()=>Fe});var c=L(5879),V=L(120);st=L.hmd(st);const U=["ngOnDestroy"],ne=(Te,Ee,tt,ot={})=>new Proxy(Te,{get:(ee,de)=>tt.runOutsideAngular(()=>{var re;if(Te[de])return!(null===(re=ot?.spy)||void 0===re)&&re.get&&ot.spy.get(de,Te[de]),Te[de];if(U.indexOf(de)>-1)return()=>{};const he=Ee.toPromise().then(Re=>{const j=Re&&Re[de];return"function"==typeof j?j.bind(Re):j&&j.then?j.then(we=>tt.run(()=>we)):tt.run(()=>j)});return new Proxy(()=>{},{get:(Re,j)=>he[j],apply:(Re,j,we)=>he.then(Ue=>{var lt;const tn=Ue&&Ue(...we);return!(null===(lt=ot?.spy)||void 0===lt)&&lt.apply&&ot.spy.apply(de,we,tn),tn})})})}),ge=(Te,Ee)=>{Ee.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(ot=>{Object.defineProperty(Te.prototype,ot,Object.getOwnPropertyDescriptor(tt.prototype||tt,ot))})})};class Ie{constructor(Ee){return Ee}}const Ae=new c.OlP("angularfire2.app.options"),Fe=new c.OlP("angularfire2.app.name");function Me(Te,Ee,tt){const ee="object"==typeof tt&&tt||{};ee.name=ee.name||"string"==typeof tt&&tt||"[DEFAULT]";const re=V.Z.apps.filter(he=>he&&he.name===ee.name)[0]||Ee.runOutsideAngular(()=>V.Z.initializeApp(Te,ee));try{JSON.stringify(Te)!==JSON.stringify(re.options)&&B("error",`${re.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ie(re)}const B=(Te,...Ee)=>{(0,c.X6Q)()&&typeof console<"u"&&console[Te](...Ee)};function Oe(Te,Ee,tt,ot,ee){const[,de,re]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===Te)||[];if(de)return function xe(Te,Ee){try{return Te.toString()===Ee.toString()}catch{return Te===Ee}}(ee,re)||(Ce("error",`${Ee} was already initialized on the ${tt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:ee,was:re})),de;{const he=ot();return globalThis.\u0275AngularfireInstanceCache.push([Te,he,ee]),he}}const Je=!!st.hot,Ce=(Te,...Ee)=>{(0,c.X6Q)()&&typeof console<"u"&&console[Te](...Ee)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6710:(st,be,L)=>{L.d(be,{$:()=>Oh,A:()=>G,D:()=>xe,I:()=>vh,J:()=>$c,L:()=>je,N:()=>Bt,P:()=>In,Q:()=>qa,R:()=>rm,U:()=>kg,V:()=>aa,W:()=>ws,X:()=>Ws,Y:()=>Dh,Z:()=>Sh,_:()=>Gc,a:()=>Ou,a0:()=>tb,a1:()=>Un,a2:()=>aP,a3:()=>cP,a4:()=>Av,a5:()=>Mo,a6:()=>qc,a7:()=>Nh,a8:()=>Rh,a9:()=>Ov,aA:()=>j,aB:()=>sc,aC:()=>it,aD:()=>Xn,aE:()=>Oo,aF:()=>rl,aG:()=>Ao,aH:()=>Ln,aL:()=>Yc,aO:()=>zi,aa:()=>Lg,ab:()=>kv,ac:()=>Ug,ad:()=>Rv,ae:()=>Tu,af:()=>Fv,ai:()=>rb,aj:()=>lP,ak:()=>Uv,an:()=>Ph,ao:()=>Kc,aq:()=>Hh,ar:()=>Au,as:()=>Ue,at:()=>Ke,au:()=>me,av:()=>ee,aw:()=>Zi,ax:()=>nf,ay:()=>Jt,az:()=>de,b:()=>Zh,c:()=>mi,d:()=>Fu,e:()=>nc,f:()=>Bu,g:()=>yi,h:()=>zt,i:()=>bs,j:()=>Jv,k:()=>so,l:()=>im,m:()=>cc,o:()=>ga,p:()=>Fe,r:()=>ut,s:()=>gi,u:()=>ri});var c=L(5861),V=L(9058),U=L(7592),ne=L(7582),ge=L(7879),Ie=L(4537);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Je=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ce=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ee=new ge.Yd("@firebase/auth");function ot(w,...m){Ee.logLevel<=ge.in.ERROR&&Ee.error(`Auth (${U.SDK_VERSION}): ${w}`,...m)}function ee(w,...m){throw Re(w,...m)}function de(w,...m){return Re(w,...m)}function re(w,m,_){const I=Object.assign(Object.assign({},Je()),{[m]:_});return new V.LL("auth","Firebase",I).create(m,{appName:w.name})}function he(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&ee(w,"argument-error"),re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Re(w,...m){if("string"!=typeof w){const _=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return Ce.create(w,...m)}function j(w,m,..._){if(!w)throw Re(m,..._)}function we(w){const m="INTERNAL ASSERTION FAILED: "+w;throw ot(m),new Error(m)}function Ue(w,m){w||we(m)}function lt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function tn(){return"http:"===Gn()||"https:"===Gn()}function Gn(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class dn{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ue(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function wn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(tn()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zr(w,m){Ue(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class ie{static initialize(m,_,I){this.fetchImpl=m,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},le=new dn(3e4,6e4);function se(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function pe(w,m,_,I){return ke.apply(this,arguments)}function ke(){return(ke=(0,c.Z)(function*(w,m,_,I,D={}){return Qe(w,D,(0,c.Z)(function*(){let A={},W={};I&&("GET"===m?W=I:A={body:JSON.stringify(I)});const oe=(0,V.xO)(Object.assign({key:w.config.apiKey},W)).slice(1),Le=yield w._getAdditionalHeaders();return Le["Content-Type"]="application/json",w.languageCode&&(Le["X-Firebase-Locale"]=w.languageCode),ie.fetch()(Qt(w,w.config.apiHost,_,oe),Object.assign({method:m,headers:Le,referrerPolicy:"no-referrer"},A))}))})).apply(this,arguments)}function Qe(w,m,_){return Be.apply(this,arguments)}function Be(){return(Be=(0,c.Z)(function*(w,m,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},ce),m);try{const D=new ft(w),A=yield Promise.race([_(),D.promise]);D.clearNetworkTimeout();const W=yield A.json();if("needConfirmation"in W)throw rn(w,"account-exists-with-different-credential",W);if(A.ok&&!("errorMessage"in W))return W;{const oe=A.ok?W.errorMessage:W.error.message,[Le,He]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw rn(w,"credential-already-in-use",W);if("EMAIL_EXISTS"===Le)throw rn(w,"email-already-in-use",W);if("USER_DISABLED"===Le)throw rn(w,"user-disabled",W);const nt=I[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw re(w,nt,He);ee(w,nt)}}catch(D){if(D instanceof V.ZR)throw D;ee(w,"network-request-failed",{message:String(D)})}})).apply(this,arguments)}function nn(w,m,_,I){return ht.apply(this,arguments)}function ht(){return(ht=(0,c.Z)(function*(w,m,_,I,D={}){const A=yield pe(w,m,_,I,D);return"mfaPendingCredential"in A&&ee(w,"multi-factor-auth-required",{_serverResponse:A}),A})).apply(this,arguments)}function Qt(w,m,_,I){const D=`${m}${_}?${I}`;return w.config.emulator?Zr(w.config,D):`${w.config.apiScheme}://${D}`}class ft{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(de(this.auth,"network-request-failed")),le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rn(w,m,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const D=de(w,m,I);return D.customData._tokenResponse=_,D}function En(){return(En=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Zn(){return(Zn=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Fr(){return(Fr=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function gr(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function vs(){return(vs=(0,c.Z)(function*(w,m=!1){const _=(0,V.m9)(w),I=yield _.getIdToken(m),D=mt(I);j(D&&D.exp&&D.auth_time&&D.iat,_.auth,"internal-error");const A="object"==typeof D.firebase?D.firebase:void 0,W=A?.sign_in_provider;return{claims:D,token:I,authTime:gr(dt(D.auth_time)),issuedAtTime:gr(dt(D.iat)),expirationTime:gr(dt(D.exp)),signInProvider:W||null,signInSecondFactor:A?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(w){return 1e3*Number(w)}function mt(w){const[m,_,I]=w.split(".");if(void 0===m||void 0===_||void 0===I)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,V.tV)(_);return D?JSON.parse(D):(ot("Failed to decode base64 JWT payload"),null)}catch(D){return ot("Caught error parsing JWT payload as JSON",D?.toString()),null}}function on(w,m){return di.apply(this,arguments)}function di(){return(di=(0,c.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(I){throw I instanceof V.ZR&&function Wr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}class Nt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const D=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,c.Z)(function*(){yield _.iteration()}),I)}iteration(){var m=this;return(0,c.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class Rn{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=gr(this.lastLoginAt),this.creationTime=gr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Cs(w){return Kt.apply(this,arguments)}function Kt(){return Kt=(0,c.Z)(function*(w){var m;const _=w.auth,I=yield w.getIdToken(),D=yield on(w,function Ti(w,m){return Fr.apply(this,arguments)}(_,{idToken:I}));j(D?.users.length,_,"internal-error");const A=D.users[0];w._notifyReloadListener(A);const W=null!==(m=A.providerUserInfo)&&void 0!==m&&m.length?function ji(w){return w.map(m=>{var{providerId:_}=m,I=(0,ne._T)(m,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(A.providerUserInfo):[],oe=function Fn(w,m){return[...w.filter(I=>!m.some(D=>D.providerId===I.providerId)),...m]}(w.providerData,W),nt=!!w.isAnonymous&&!(w.email&&A.passwordHash||oe?.length),kt={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:oe,metadata:new Rn(A.createdAt,A.lastLoginAt),isAnonymous:nt};Object.assign(w,kt)}),Kt.apply(this,arguments)}function Ut(){return(Ut=(0,c.Z)(function*(w){const m=(0,V.m9)(w);yield Cs(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function ss(){return(ss=(0,c.Z)(function*(w,m){const _=yield Qe(w,{},(0,c.Z)(function*(){const I=(0,V.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:D,apiKey:A}=w.config,W=Qt(w,D,"/v1/token",`key=${A}`),oe=yield w._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(W,{method:"POST",headers:oe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class mr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){j(m.idToken,"internal-error"),j(typeof m.idToken<"u","internal-error"),j(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Mt(w){const m=mt(w);return j(m,"internal-error"),j(typeof m.exp<"u","internal-error"),j(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var I=this;return(0,c.Z)(function*(){return j(!I.accessToken||I.refreshToken,m,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var I=this;return(0,c.Z)(function*(){const{accessToken:D,refreshToken:A,expiresIn:W}=yield function is(w,m){return ss.apply(this,arguments)}(m,_);I.updateTokensAndExpiration(D,A,Number(W))})()}updateTokensAndExpiration(m,_,I){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,_){const{refreshToken:I,accessToken:D,expirationTime:A}=_,W=new mr;return I&&(j("string"==typeof I,"internal-error",{appName:m}),W.refreshToken=I),D&&(j("string"==typeof D,"internal-error",{appName:m}),W.accessToken=D),A&&(j("number"==typeof A,"internal-error",{appName:m}),W.expirationTime=A),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new mr,this.toJSON())}_performRefresh(){return we("not implemented")}}function Ge(w,m){j("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class _e{constructor(m){var{uid:_,auth:I,stsTokenManager:D}=m,A=(0,ne._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new Rn(A.createdAt||void 0,A.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,c.Z)(function*(){const I=yield on(_,_.stsTokenManager.getToken(_.auth,m));return j(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(m){return function qr(w){return vs.apply(this,arguments)}(this,m)}reload(){return function wo(w){return Ut.apply(this,arguments)}(this)}_assign(m){this!==m&&(j(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new _e(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var I=this;return(0,c.Z)(function*(){let D=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),D=!0),_&&(yield Cs(I)),yield I.auth._persistUserIfCurrent(I),D&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,c.Z)(function*(){const _=yield m.getIdToken();return yield on(m,function Nn(w,m){return En.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var I,D,A,W,oe,Le,He,nt;const kt=null!==(I=_.displayName)&&void 0!==I?I:void 0,Ur=null!==(D=_.email)&&void 0!==D?D:void 0,qi=null!==(A=_.phoneNumber)&&void 0!==A?A:void 0,oo=null!==(W=_.photoURL)&&void 0!==W?W:void 0,mm=null!==(oe=_.tenantId)&&void 0!==oe?oe:void 0,al=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,ma=null!==(He=_.createdAt)&&void 0!==He?He:void 0,_a=null!==(nt=_.lastLoginAt)&&void 0!==nt?nt:void 0,{uid:Yu,emailVerified:cl,isAnonymous:Wi,providerData:dc,stsTokenManager:Ds}=_;j(Yu&&Ds,m,"internal-error");const ll=mr.fromJSON(this.name,Ds);j("string"==typeof Yu,m,"internal-error"),Ge(kt,m.name),Ge(Ur,m.name),j("boolean"==typeof cl,m,"internal-error"),j("boolean"==typeof Wi,m,"internal-error"),Ge(qi,m.name),Ge(oo,m.name),Ge(mm,m.name),Ge(al,m.name),Ge(ma,m.name),Ge(_a,m.name);const Uo=new _e({uid:Yu,auth:m,email:Ur,emailVerified:cl,displayName:kt,isAnonymous:Wi,photoURL:oo,phoneNumber:qi,tenantId:mm,stsTokenManager:ll,createdAt:ma,lastLoginAt:_a});return dc&&Array.isArray(dc)&&(Uo.providerData=dc.map(Qu=>Object.assign({},Qu))),al&&(Uo._redirectEventId=al),Uo}static _fromIdTokenResponse(m,_,I=!1){return(0,c.Z)(function*(){const D=new mr;D.updateFromServerResponse(_);const A=new _e({uid:_.localId,auth:m,stsTokenManager:D,isAnonymous:I});return yield Cs(A),A})()}}const Xe=new Map;function it(w){Ue(w instanceof Function,"Expected a class definition");let m=Xe.get(w);return m?(Ue(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Xe.set(w,m),m)}const Bt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(_,I){var D=this;return(0,c.Z)(function*(){D.storage[_]=I})()}_get(_){var I=this;return(0,c.Z)(function*(){const D=I.storage[_];return void 0===D?null:D})()}_remove(_){var I=this;return(0,c.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function Xn(w,m,_){return`firebase:${w}:${m}:${_}`}class H{constructor(m,_,I){this.persistence=m,this.auth=_,this.userKey=I;const{config:D,name:A}=this.auth;this.fullUserKey=Xn(this.userKey,D.apiKey,A),this.fullPersistenceKey=Xn("persistence",D.apiKey,A),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,c.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?_e._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,c.Z)(function*(){if(_.persistence===m)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,I="authUser"){return(0,c.Z)(function*(){if(!_.length)return new H(it(Bt),m,I);const D=(yield Promise.all(_.map(function(){var He=(0,c.Z)(function*(nt){if(yield nt._isAvailable())return nt});return function(nt){return He.apply(this,arguments)}}()))).filter(He=>He);let A=D[0]||it(Bt);const W=Xn(I,m.config.apiKey,m.name);let oe=null;for(const He of _)try{const nt=yield He._get(W);if(nt){const kt=_e._fromJSON(m,nt);He!==A&&(oe=kt),A=He;break}}catch{}const Le=D.filter(He=>He._shouldAllowMigration);return A._shouldAllowMigration&&Le.length?(A=Le[0],oe&&(yield A._set(W,oe.toJSON())),yield Promise.all(_.map(function(){var He=(0,c.Z)(function*(nt){if(nt!==A)try{yield nt._remove(W)}catch{}});return function(nt){return He.apply(this,arguments)}}())),new H(A,m,I)):new H(A,m,I)})()}}function $(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(K(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Ve(m))return"Blackberry";if(vt(m))return"Webos";if(k(m))return"Safari";if((m.includes("chrome/")||x(m))&&!m.includes("edge/"))return"Chrome";if(me(m))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function O(w=(0,V.z$)()){return/firefox\//i.test(w)}function k(w=(0,V.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function x(w=(0,V.z$)()){return/crios\//i.test(w)}function K(w=(0,V.z$)()){return/iemobile/i.test(w)}function me(w=(0,V.z$)()){return/android/i.test(w)}function Ve(w=(0,V.z$)()){return/blackberry/i.test(w)}function vt(w=(0,V.z$)()){return/webos/i.test(w)}function Ke(w=(0,V.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Jt(w=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function xt(w=(0,V.z$)()){return Ke(w)||me(w)||vt(w)||Ve(w)||/windows phone/i.test(w)||K(w)}function Bc(w,m=[]){let _;switch(w){case"Browser":_=$((0,V.z$)());break;case"Worker":_=`${$((0,V.z$)())}-${w}`;break;default:_=w}const I=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${U.SDK_VERSION}/${I}`}function Io(){return(Io=(0,c.Z)(function*(w){return(yield pe(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $s(w,m){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,c.Z)(function*(w,m){return pe(w,"GET","/v2/recaptchaConfig",se(w,m))})).apply(this,arguments)}function Yt(w){return void 0!==w&&void 0!==w.getResponse}function sa(w){return void 0!==w&&void 0!==w.enterprise}class za{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function fu(w){return new Promise((m,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=m,I.onerror=D=>{const A=de("internal-error");A.customData=D,_(A)},I.type="text/javascript",I.charset="UTF-8",function hu(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(I)})}function Hs(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Kr{constructor(m){this.type="recaptcha-enterprise",this.auth=Ln(m)}verify(m="verify",_=!1){var I=this;return(0,c.Z)(function*(){function A(){return A=(0,c.Z)(function*(oe){if(!_){if(null==oe.tenantId&&null!=oe._agentRecaptchaConfig)return oe._agentRecaptchaConfig.siteKey;if(null!=oe.tenantId&&void 0!==oe._tenantRecaptchaConfigs[oe.tenantId])return oe._tenantRecaptchaConfigs[oe.tenantId].siteKey}return new Promise(function(){var Le=(0,c.Z)(function*(He,nt){$s(oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(kt=>{if(void 0!==kt.recaptchaKey){const Ur=new za(kt);return null==oe.tenantId?oe._agentRecaptchaConfig=Ur:oe._tenantRecaptchaConfigs[oe.tenantId]=Ur,He(Ur.siteKey)}nt(new Error("recaptcha Enterprise site key undefined"))}).catch(kt=>{nt(kt)})});return function(He,nt){return Le.apply(this,arguments)}}())}),A.apply(this,arguments)}function W(oe,Le,He){const nt=window.grecaptcha;sa(nt)?nt.enterprise.ready(()=>{nt.enterprise.execute(oe,{action:m}).then(kt=>{Le(kt)}).catch(()=>{Le("NO_RECAPTCHA")})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((oe,Le)=>{(function D(oe){return A.apply(this,arguments)})(I.auth).then(He=>{if(!_&&sa(window.grecaptcha))W(He,oe,Le);else{if(typeof window>"u")return void Le(new Error("RecaptchaVerifier is only supported in browser"));fu("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{W(He,oe,Le)}).catch(nt=>{Le(nt)})}}).catch(He=>{Le(He)})})})()}}function zs(w,m,_){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,c.Z)(function*(w,m,_,I=!1){const D=new Kr(w);let A;try{A=yield D.verify(_)}catch{A=yield D.verify(_,!0)}const W=Object.assign({},m);return Object.assign(W,I?{captchaResp:A}:{captchaResponse:A}),Object.assign(W,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(W,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),W})).apply(this,arguments)}class jc{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const I=A=>new Promise((W,oe)=>{try{W(m(A))}catch(Le){oe(Le)}});I.onAbort=_,this.queue.push(I);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,c.Z)(function*(){if(_.auth.currentUser===m)return;const I=[];try{for(const D of _.queue)yield D(m),D.onAbort&&I.push(D.onAbort)}catch(D){I.reverse();for(const A of I)try{A()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:D?.message})}})()}}class Yr{constructor(m,_,I,D){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=I,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vv(this),this.idTokenSubscription=new vv(this),this.beforeStateQueue=new jc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ce,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(m,_){var I=this;return _&&(this._popupRedirectResolver=it(_)),this._initializationPromise=this.queue((0,c.Z)(function*(){var D,A;if(!I._deleted&&(I.persistenceManager=yield H.create(I,m),!I._deleted)){if(null!==(D=I._popupRedirectResolver)&&void 0!==D&&D._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(A=I.currentUser)||void 0===A?void 0:A.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,c.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,c.Z)(function*(){var I;const D=yield _.assertedPersistence.getCurrentUser();let A=D,W=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const oe=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,Le=A?._redirectEventId,He=yield _.tryRedirectSignIn(m);(!oe||oe===Le)&&He?.user&&(A=He.user,W=!0)}if(!A)return _.directlySetCurrentUser(null);if(!A._redirectEventId){if(W)try{yield _.beforeStateQueue.runMiddleware(A)}catch(oe){A=D,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(oe))}return A?_.reloadAndSetCurrentUserOrClear(A):_.directlySetCurrentUser(null)}return j(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===A._redirectEventId?_.directlySetCurrentUser(A):_.reloadAndSetCurrentUserOrClear(A)})()}tryRedirectSignIn(m){var _=this;return(0,c.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,c.Z)(function*(){try{yield Cs(m)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function bn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,c.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,c.Z)(function*(){const I=m?(0,V.m9)(m):null;return I&&j(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(m,_=!1){var I=this;return(0,c.Z)(function*(){if(!I._deleted)return m&&j(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,c.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,c.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,c.Z)(function*(){yield _.assertedPersistence.setPersistence(it(m))}))}initializeRecaptchaConfig(){var m=this;return(0,c.Z)(function*(){const _=yield $s(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new za(_);null==m.tenantId?m._agentRecaptchaConfig=I:m._tenantRecaptchaConfigs[m.tenantId]=I,I.emailPasswordEnabled&&new Kr(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new V.LL("auth","Firebase",m())}onAuthStateChanged(m,_,I){return this.registerStateListener(this.authStateSubscription,m,_,I)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,I){return this.registerStateListener(this.idTokenSubscription,m,_,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var I=this;return(0,c.Z)(function*(){const D=yield I.getOrInitRedirectPersistenceManager(_);return null===m?D.removeCurrentUser():D.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,c.Z)(function*(){if(!_.redirectPersistenceManager){const I=m&&it(m)||_._popupRedirectResolver;j(I,_,"argument-error"),_.redirectPersistenceManager=yield H.create(_,[it(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,c.Z)(function*(){var I,D;return _._isInitialized&&(yield _.queue((0,c.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===m?_._currentUser:(null===(D=_.redirectUser)||void 0===D?void 0:D._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,c.Z)(function*(){if(m===_.currentUser)return _.queue((0,c.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,I,D){if(this._deleted)return()=>{};const A="function"==typeof _?_:_.next.bind(_),W=this._isInitialized?Promise.resolve():this._initializationPromise;return j(W,this,"internal-error"),W.then(()=>A(this.currentUser)),"function"==typeof _?m.addObserver(_,I,D):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,c.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Bc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,c.Z)(function*(){var _;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const D=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();D&&(I["X-Firebase-Client"]=D);const A=yield m._getAppCheckToken();return A&&(I["X-Firebase-AppCheck"]=A),I})()}_getAppCheckToken(){var m=this;return(0,c.Z)(function*(){var _;const I=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return I?.error&&function tt(w,...m){Ee.logLevel<=ge.in.WARN&&Ee.warn(`Auth (${U.SDK_VERSION}): ${w}`,...m)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Ln(w){return(0,V.m9)(w)}class vv{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vh(w,m,_){const I=Ln(w);j(I._canInitEmulator,I,"emulator-config-failed"),j(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const D=!!_?.disableWarnings,A=hi(m),{host:W,port:oe}=function Ch(w){const m=hi(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(I);if(D){const A=D[1];return{host:A,port:wh(I.substr(A.length+1))}}{const[A,W]=I.split(":");return{host:A,port:wh(W)}}}(m);I.config.emulator={url:`${A}//${W}${null===oe?"":`:${oe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:W,port:oe,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function wv(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function hi(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function wh(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class $c{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return we("not implemented")}_getIdTokenResponse(m){return we("not implemented")}_linkToIdToken(m,_){return we("not implemented")}_getReauthenticationResolver(m){return we("not implemented")}}function Ih(w,m){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:resetPassword",se(w,m))})).apply(this,arguments)}function xg(w,m){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Di(){return(Di=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",se(w,m))})).apply(this,arguments)}function gu(w,m){return bh.apply(this,arguments)}function bh(){return(bh=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithPassword",se(w,m))})).apply(this,arguments)}function mu(w,m){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendOobCode",se(w,m))})).apply(this,arguments)}function Mh(){return(Mh=(0,c.Z)(function*(w,m){return mu(w,m)})).apply(this,arguments)}function yu(w,m){return vu.apply(this,arguments)}function vu(){return(vu=(0,c.Z)(function*(w,m){return mu(w,m)})).apply(this,arguments)}function Cu(w,m){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(w,m){return mu(w,m)})).apply(this,arguments)}function Tr(){return(Tr=(0,c.Z)(function*(w,m){return mu(w,m)})).apply(this,arguments)}function Qr(){return(Qr=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}function wu(){return(wu=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}class bo extends $c{constructor(m,_,I,D=null){super("password",I),this._email=m,this._password=_,this._tenantId=D}static _fromEmailAndPassword(m,_){return new bo(m,_,"password")}static _fromEmailAndCode(m,_,I=null){return new bo(m,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,c.Z)(function*(){var I;switch(_.signInMethod){case"password":const D={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=m._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const A=yield zs(m,D,"signInWithPassword");return gu(m,A)}return gu(m,D).catch(function(){var A=(0,c.Z)(function*(W){if("auth/missing-recaptcha-token"===W.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const oe=yield zs(m,D,"signInWithPassword");return gu(m,oe)}return Promise.reject(W)});return function(W){return A.apply(this,arguments)}}());case"emailLink":return function Za(w,m){return Qr.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:ee(m,"internal-error")}})()}_linkToIdToken(m,_){var I=this;return(0,c.Z)(function*(){switch(I.signInMethod){case"password":return xg(m,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Og(w,m){return wu.apply(this,arguments)}(m,{idToken:_,email:I._email,oobCode:I._password});default:ee(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Gs(w,m){return Th.apply(this,arguments)}function Th(){return(Th=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithIdp",se(w,m))})).apply(this,arguments)}class je extends $c{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new je(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):ee("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:D}=_,A=(0,ne._T)(_,["providerId","signInMethod"]);if(!I||!D)return null;const W=new je(I,D);return W.idToken=A.idToken||void 0,W.accessToken=A.accessToken||void 0,W.secret=A.secret,W.nonce=A.nonce,W.pendingToken=A.pendingToken||null,W}_getIdTokenResponse(m){return Gs(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,Gs(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Gs(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,V.xO)(_)}return m}}function mn(){return(mn=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendVerificationCode",se(w,m))})).apply(this,arguments)}function Zs(){return(Zs=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m))})).apply(this,arguments)}function oa(){return(oa=(0,c.Z)(function*(w,m){const _=yield nn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m));if(_.temporaryProof)throw rn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Wn={USER_NOT_FOUND:"user-not-found"};function Eo(){return(Eo=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Wn)})).apply(this,arguments)}class pt extends $c{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new pt({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new pt({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Si(w,m){return Zs.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function _r(w,m){return oa.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function qs(w,m){return Eo.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:I,verificationCode:D}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:I,code:D}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:I,phoneNumber:D,temporaryProof:A}=m;return I||_||D||A?new pt({verificationId:_,verificationCode:I,phoneNumber:D,temporaryProof:A}):null}}class Pi{constructor(m){var _,I,D,A,W,oe;const Le=(0,V.zd)((0,V.pd)(m)),He=null!==(_=Le.apiKey)&&void 0!==_?_:null,nt=null!==(I=Le.oobCode)&&void 0!==I?I:null,kt=function Hc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Le.mode)&&void 0!==D?D:null);j(He&&nt&&kt,"argument-error"),this.apiKey=He,this.operation=kt,this.code=nt,this.continueUrl=null!==(A=Le.continueUrl)&&void 0!==A?A:null,this.languageCode=null!==(W=Le.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(m){const _=function Iv(w){const m=(0,V.zd)((0,V.pd)(w)).link,_=m?(0,V.zd)((0,V.pd)(m)).deep_link_id:null,I=(0,V.zd)((0,V.pd)(w)).deep_link_id;return(I?(0,V.zd)((0,V.pd)(I)).link:null)||I||_||m||w}(m);try{return new Pi(_)}catch{return null}}}let qa=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return bo._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const D=Pi.parseLink(I);return j(D,"argument-error"),bo._fromEmailAndCode(_,D.code,D.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class xi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Jr extends xi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Ws extends Jr{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return j("providerId"in _&&"signInMethod"in _,"argument-error"),je._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return j(m.idToken||m.accessToken,"argument-error"),je._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Ws.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Ws.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:D,pendingToken:A,nonce:W,providerId:oe}=m;if(!I&&!D&&!_&&!A||!oe)return null;try{return new Ws(oe)._credential({idToken:_,accessToken:I,nonce:W,pendingToken:A})}catch{return null}}}let kg=(()=>{class w extends Jr{constructor(){super("facebook.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),aa=(()=>{class w extends Jr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:D}=_;if(!I&&!D)return null;try{return w.credential(I,D)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ws=(()=>{class w extends Jr{constructor(){super("github.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class zi extends $c{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Gs(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,Gs(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Gs(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:D,pendingToken:A}=_;return I&&D&&A&&I===D?new zi(I,A):null}static _create(m,_){return new zi(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Dh extends xi{constructor(m){j(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Dh.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Dh.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=zi.fromJSON(m);return j(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:I}=m;if(!_||!I)return null;try{return zi._create(I,_)}catch{return null}}}let Sh=(()=>{class w extends Jr{constructor(){super("twitter.com")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:D}=_;if(!I||!D)return null;try{return w.credential(I,D)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function zc(w,m){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signUp",se(w,m))})).apply(this,arguments)}class ei{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,I,D=!1){return(0,c.Z)(function*(){const A=yield _e._fromIdTokenResponse(m,I,D),W=Wa(I);return new ei({user:A,providerId:W,_tokenResponse:I,operationType:_})})()}static _forOperation(m,_,I){return(0,c.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const D=Wa(I);return new ei({user:m,providerId:D,_tokenResponse:I,operationType:_})})()}}function Wa(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Gc(w){return or.apply(this,arguments)}function or(){return(or=(0,c.Z)(function*(w){var m;const _=Ln(w);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new ei({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield zc(_,{returnSecureToken:!0}),D=yield ei._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(D.user),D})).apply(this,arguments)}class Ng extends V.ZR{constructor(m,_,I,D){var A;super(_.code,_.message),this.operationType=I,this.user=D,Object.setPrototypeOf(this,Ng.prototype),this.customData={appName:m.name,tenantId:null!==(A=m.tenantId)&&void 0!==A?A:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,_,I,D){return new Ng(m,_,I,D)}}function fi(w,m,_,I){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(A=>{throw"auth/multi-factor-auth-required"===A.code?Ng._fromErrorAndOperation(w,A,m,I):A})}function Lr(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Ph(w,m){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w);yield Ka(!0,_,m);const{providerUserInfo:I}=yield function sn(w,m){return Zn.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),D=Lr(I||[]);return _.providerData=_.providerData.filter(A=>D.has(A.providerId)),D.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Ks.apply(this,arguments)}function Zc(w,m){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,c.Z)(function*(w,m,_=!1){const I=yield on(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return ei._forOperation(w,"link",I)})).apply(this,arguments)}function Ka(w,m,_){return xh.apply(this,arguments)}function xh(){return(xh=(0,c.Z)(function*(w,m,_){yield Cs(m);const D=!1===w?"provider-already-linked":"no-such-provider";j(Lr(m.providerData).has(_)===w,m.auth,D)})).apply(this,arguments)}function Rg(w,m){return bv.apply(this,arguments)}function bv(){return(bv=(0,c.Z)(function*(w,m,_=!1){const{auth:I}=w,D="reauthenticate";try{const A=yield on(w,fi(I,D,m,w),_);j(A.idToken,I,"internal-error");const W=mt(A.idToken);j(W,I,"internal-error");const{sub:oe}=W;return j(w.uid===oe,I,"user-mismatch"),ei._forOperation(w,D,A)}catch(A){throw"auth/user-not-found"===A?.code&&ee(I,"user-mismatch"),A}})).apply(this,arguments)}function Ev(w,m){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,c.Z)(function*(w,m,_=!1){const I="signIn",D=yield fi(w,I,m),A=yield ei._fromIdTokenResponse(w,I,D);return _||(yield w._updateCurrentUser(A.user)),A})).apply(this,arguments)}function Oh(w,m){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,c.Z)(function*(w,m){return Ev(Ln(w),m)})).apply(this,arguments)}function tb(w,m){return Mv.apply(this,arguments)}function Mv(){return(Mv=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w);return yield Ka(!1,_,m.providerId),Zc(_,m)})).apply(this,arguments)}function Un(w,m){return Tv.apply(this,arguments)}function Tv(){return(Tv=(0,c.Z)(function*(w,m){return Rg((0,V.m9)(w),m)})).apply(this,arguments)}function Dv(){return(Dv=(0,c.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:signInWithCustomToken",se(w,m))})).apply(this,arguments)}function aP(w,m){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,c.Z)(function*(w,m){const _=Ln(w),I=yield function oP(w,m){return Dv.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),D=yield ei._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(D.user),D}),Sv.apply(this,arguments)}class kh{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Pv._fromServerResponse(m,_):"totpInfo"in _?bu._fromServerResponse(m,_):ee(m,"internal-error")}}class Pv extends kh{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Pv(_)}}class bu extends kh{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new bu(_)}}function Ya(w,m,_){var I;j((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),j(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(j(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(j(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function cP(w,m,_){return xv.apply(this,arguments)}function xv(){return xv=(0,c.Z)(function*(w,m,_){var I;const D=Ln(w),A={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=D._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const W=yield zs(D,A,"getOobCode",!0);_&&Ya(D,W,_),yield yu(D,W)}else _&&Ya(D,A,_),yield yu(D,A).catch(function(){var W=(0,c.Z)(function*(oe){if("auth/missing-recaptcha-token"!==oe.code)return Promise.reject(oe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Le=yield zs(D,A,"getOobCode",!0);_&&Ya(D,Le,_),yield yu(D,Le)}});return function(oe){return W.apply(this,arguments)}}())}),xv.apply(this,arguments)}function Av(w,m,_){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,c.Z)(function*(w,m,_){yield Ih((0,V.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Mo(w,m){return Eu.apply(this,arguments)}function Eu(){return Eu=(0,c.Z)(function*(w,m){yield function eb(w,m){return Di.apply(this,arguments)}((0,V.m9)(w),{oobCode:m})}),Eu.apply(this,arguments)}function qc(w,m){return yr.apply(this,arguments)}function yr(){return(yr=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w),I=yield Ih(_,{oobCode:m}),D=I.requestType;switch(j(D,_,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(I.mfaInfo,_,"internal-error");default:j(I.email,_,"internal-error")}let A=null;return I.mfaInfo&&(A=kh._fromServerResponse(Ln(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:A},operation:D}})).apply(this,arguments)}function Nh(w,m){return ti.apply(this,arguments)}function ti(){return(ti=(0,c.Z)(function*(w,m){const{data:_}=yield qc((0,V.m9)(w),m);return _.email})).apply(this,arguments)}function Rh(w,m,_){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,c.Z)(function*(w,m,_){var I;const D=Ln(w),A={returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"};let W;if(null!==(I=D._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const He=yield zs(D,A,"signUpPassword");W=zc(D,He)}else W=zc(D,A).catch(function(){var He=(0,c.Z)(function*(nt){if("auth/missing-recaptcha-token"===nt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const kt=yield zs(D,A,"signUpPassword");return zc(D,kt)}return Promise.reject(nt)});return function(nt){return He.apply(this,arguments)}}());const oe=yield W.catch(He=>Promise.reject(He)),Le=yield ei._fromIdTokenResponse(D,"signIn",oe);return yield D._updateCurrentUser(Le.user),Le}),Fh.apply(this,arguments)}function Ov(w,m,_){return Oh((0,V.m9)(w),qa.credential(m,_))}function Lg(w,m,_){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,c.Z)(function*(w,m,_){var I;const D=Ln(w),A={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function W(oe,Le){j(Le.handleCodeInApp,D,"argument-error"),Le&&Ya(D,oe,Le)}if(null!==(I=D._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const oe=yield zs(D,A,"getOobCode",!0);W(oe,_),yield Cu(D,oe)}else W(A,_),yield Cu(D,A).catch(function(){var oe=(0,c.Z)(function*(Le){if("auth/missing-recaptcha-token"!==Le.code)return Promise.reject(Le);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield zs(D,A,"getOobCode",!0);W(He,_),yield Cu(D,He)}});return function(Le){return oe.apply(this,arguments)}}())}),Qa.apply(this,arguments)}function kv(w,m){const _=Pi.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}function Ug(w,m,_){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w),D=qa.credentialWithLink(m,_||lt());return j(D._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Oh(I,D)})).apply(this,arguments)}function Lh(){return(Lh=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:createAuthUri",se(w,m))})).apply(this,arguments)}function Rv(w,m){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,c.Z)(function*(w,m){const I={identifier:m,continueUri:tn()?lt():"http://localhost"},{signinMethods:D}=yield function Nv(w,m){return Lh.apply(this,arguments)}((0,V.m9)(w),I);return D||[]}),Wc.apply(this,arguments)}function Tu(w,m){return To.apply(this,arguments)}function To(){return To=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w),D={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Ya(_.auth,D,m);const{email:A}=yield function _u(w,m){return Mh.apply(this,arguments)}(_.auth,D);A!==w.email&&(yield w.reload())}),To.apply(this,arguments)}function Fv(w,m,_){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w),A={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&Ya(I.auth,A,_);const{email:W}=yield function Mr(w,m){return Tr.apply(this,arguments)}(I.auth,A);W!==w.email&&(yield w.reload())}),Bg.apply(this,arguments)}function Lv(){return(Lv=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function rb(w,m){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,c.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const I=(0,V.m9)(w),A={idToken:yield I.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},W=yield on(I,function nb(w,m){return Lv.apply(this,arguments)}(I.auth,A));I.displayName=W.displayName||null,I.photoURL=W.photoUrl||null;const oe=I.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=I.displayName,oe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(W)}),Vg.apply(this,arguments)}function lP(w,m){return Uh((0,V.m9)(w),m,null)}function Uv(w,m){return Uh((0,V.m9)(w),null,m)}function Uh(w,m,_){return jg.apply(this,arguments)}function jg(){return(jg=(0,c.Z)(function*(w,m,_){const{auth:I}=w,A={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(A.email=m),_&&(A.password=_);const W=yield on(w,xg(I,A));yield w._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Du{constructor(m,_,I={}){this.isNewUser=m,this.providerId=_,this.profile=I}}class ib extends Du{constructor(m,_,I,D){super(m,_,I),this.username=D}}class Su extends Du{constructor(m,_){super(m,"facebook.com",_)}}class Bv extends ib{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Hg extends Du{constructor(m,_){super(m,"google.com",_)}}class Bh extends ib{constructor(m,_,I){super(m,"twitter.com",_,I)}}function Kc(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function $g(w){var m,_;if(!w)return null;const{providerId:I}=w,D=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},A=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const W=null===(_=null===(m=mt(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(W)return new Du(A,"anonymous"!==W&&"custom"!==W?W:null)}if(!I)return null;switch(I){case"facebook.com":return new Su(A,D);case"github.com":return new Bv(A,D);case"google.com":return new Hg(A,D);case"twitter.com":return new Bh(A,D,w.screenName||null);case"custom":case"anonymous":return new Du(A,null);default:return new Du(A,I,D)}}(_)}class Qs{constructor(m,_,I){this.type=m,this.credential=_,this.auth=I}static _fromIdtoken(m,_){return new Qs("enroll",m,_)}static _fromMfaPendingCredential(m){return new Qs("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,I;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Qs._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return Qs._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Ja{constructor(m,_,I){this.session=m,this.hints=_,this.signInResolver=I}static _fromError(m,_){const I=Ln(m),D=_.customData._serverResponse,A=(D.mfaInfo||[]).map(oe=>kh._fromServerResponse(I,oe));j(D.mfaPendingCredential,I,"internal-error");const W=Qs._fromMfaPendingCredential(D.mfaPendingCredential);return new Ja(W,A,function(){var oe=(0,c.Z)(function*(Le){const He=yield Le._process(I,W);delete D.mfaInfo,delete D.mfaPendingCredential;const nt=Object.assign(Object.assign({},D),{idToken:He.idToken,refreshToken:He.refreshToken});switch(_.operationType){case"signIn":const kt=yield ei._fromIdTokenResponse(I,_.operationType,nt);return yield I._updateCurrentUser(kt.user),kt;case"reauthenticate":return j(_.user,I,"internal-error"),ei._forOperation(_.user,_.operationType,nt);default:ee(I,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,c.Z)(function*(){return _.signInResolver(m)})()}}function Hh(w,m){var _;const I=(0,V.m9)(w),D=m;return j(m.customData.operationType,I,"argument-error"),j(null===(_=D.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),Ja._fromError(I,D)}class xu{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>kh._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new xu(m)}getSession(){var m=this;return(0,c.Z)(function*(){return Qs._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var I=this;return(0,c.Z)(function*(){const D=m,A=yield I.getSession(),W=yield on(I.user,D._process(I.user.auth,A,_));return yield I.user._updateTokensIfNecessary(W),I.user.reload()})()}unenroll(m){var _=this;return(0,c.Z)(function*(){const I="string"==typeof m?m:m.uid,D=yield _.user.getIdToken();try{const A=yield on(_.user,function Gg(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:withdraw",se(w,m))}(_.user.auth,{idToken:D,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:W})=>W!==I),yield _.user._updateTokensIfNecessary(A),yield _.user.reload()}catch(A){throw A}})()}}const an=new WeakMap;function Au(w){const m=(0,V.m9)(w);return an.has(m)||an.set(m,xu._fromUser(m)),an.get(m)}const Js="__sak";class ni{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Js,"1"),this.storage.removeItem(Js),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zh=(()=>{class w extends ni{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function cb(){const w=(0,V.z$)();return k(w)||Ke(w)}()&&function $i(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const D=this.storage.getItem(I),A=this.localCache[I];D!==A&&_(I,A,D)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((oe,Le,He)=>{this.notifyListeners(oe,He)});const D=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(D);if(_.newValue!==oe)null!==_.newValue?this.storage.setItem(D,_.newValue):this.storage.removeItem(D);else if(this.localCache[D]===_.newValue&&!I)return}const A=()=>{const oe=this.storage.getItem(D);!I&&this.localCache[D]===oe||this.notifyListeners(D,oe)},W=this.storage.getItem(D);!function gn(){return(0,V.w1)()&&10===document.documentMode}()||W===_.newValue||_.newValue===_.oldValue?A():setTimeout(A,10)}notifyListeners(_,I){this.localCache[_]=I;const D=this.listeners[_];if(D)for(const A of Array.from(D))A(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var D=()=>super._set,A=this;return(0,c.Z)(function*(){yield D().call(A,_,I),A.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,D=this;return(0,c.Z)(function*(){const A=yield I().call(D,_);return D.localCache[_]=JSON.stringify(A),A})()}_remove(_){var I=()=>super._remove,D=this;return(0,c.Z)(function*(){yield I().call(D,_),delete D.localCache[_]})()}}return w.type="LOCAL",w})(),Ou=(()=>{class w extends ni{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let Zg=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(A=>A.isListeningto(_));if(I)return I;const D=new w(_);return this.receivers.push(D),D}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,c.Z)(function*(){const D=_,{eventId:A,eventType:W,data:oe}=D.data,Le=I.handlersMap[W];if(!Le?.size)return;D.ports[0].postMessage({status:"ack",eventId:A,eventType:W});const He=Array.from(Le).map(function(){var kt=(0,c.Z)(function*(Ur){return Ur(D.origin,oe)});return function(Ur){return kt.apply(this,arguments)}}()),nt=yield function Do(w){return Promise.all(w.map(function(){var m=(0,c.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return m.apply(this,arguments)}}()))}(He);D.ports[0].postMessage({status:"done",eventId:A,eventType:W,response:nt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Yc(w="",m=10){let _="";for(let I=0;I<m;I++)_+=Math.floor(10*Math.random());return w+_}class zv{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,I=50){var D=this;return(0,c.Z)(function*(){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let W,oe;return new Promise((Le,He)=>{const nt=Yc("",20);A.port1.start();const kt=setTimeout(()=>{He(new Error("unsupported_event"))},I);oe={messageChannel:A,onMessage(Ur){const qi=Ur;if(qi.data.eventId===nt)switch(qi.data.status){case"ack":clearTimeout(kt),W=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Le(qi.data.response);break;default:clearTimeout(kt),clearTimeout(W),He(new Error("invalid_response"))}}},D.handlers.add(oe),A.port1.addEventListener("message",oe.onMessage),D.target.postMessage({eventType:m,eventId:nt,data:_},[A.port2])}).finally(()=>{oe&&D.removeMessageHandler(oe)})})()}}function er(){return window}function qg(){return typeof er().WorkerGlobalScope<"u"&&"function"==typeof er().importScripts}function ku(){return(ku=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Kg="firebaseLocalStorageDb",ec="firebaseLocalStorage",So="fbase_key";class Qc{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Wh(w,m){return w.transaction([ec],m?"readwrite":"readonly").objectStore(ec)}function Yg(){const w=indexedDB.open(Kg,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(ec,{keyPath:So})}catch(D){_(D)}}),w.addEventListener("success",(0,c.Z)(function*(){const I=w.result;I.objectStoreNames.contains(ec)?m(I):(I.close(),yield function Zv(){const w=indexedDB.deleteDatabase(Kg);return new Qc(w).toPromise()}(),m(yield Yg()))}))})}function Qg(w,m,_){return ve.apply(this,arguments)}function ve(){return(ve=(0,c.Z)(function*(w,m,_){const I=Wh(w,!0).put({[So]:m,value:_});return new Qc(I).toPromise()})).apply(this,arguments)}function os(){return(os=(0,c.Z)(function*(w,m){const _=Wh(w,!1).get(m),I=yield new Qc(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Kh(w,m){const _=Wh(w,!0).delete(m);return new Qc(_).toPromise()}const bs=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,c.Z)(function*(){return _.db||(_.db=yield Yg()),_.db})()}_withRetries(_){var I=this;return(0,c.Z)(function*(){let D=0;for(;;)try{const A=yield I._openDb();return yield _(A)}catch(A){if(D++>3)throw A;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,c.Z)(function*(){return qg()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,c.Z)(function*(){_.receiver=Zg._getInstance(function Wg(){return qg()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,c.Z)(function*(D,A){return{keyProcessed:(yield _._poll()).includes(A.key)}});return function(D,A){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,c.Z)(function*(D,A){return["keyChanged"]});return function(D,A){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,c.Z)(function*(){var I,D;if(_.activeServiceWorker=yield function _t(){return ku.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new zv(_.activeServiceWorker);const A=yield _.sender._send("ping",{},800);A&&null!==(I=A[0])&&void 0!==I&&I.fulfilled&&null!==(D=A[0])&&void 0!==D&&D.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,c.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function ub(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Yg();return yield Qg(_,Js,"1"),yield Kh(_,Js),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,c.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var D=this;return(0,c.Z)(function*(){return D._withPendingWrite((0,c.Z)(function*(){return yield D._withRetries(A=>Qg(A,_,I)),D.localCache[_]=I,D.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,c.Z)(function*(){const D=yield I._withRetries(A=>function Vt(w,m){return os.apply(this,arguments)}(A,_));return I.localCache[_]=D,D})()}_remove(_){var I=this;return(0,c.Z)(function*(){return I._withPendingWrite((0,c.Z)(function*(){return yield I._withRetries(D=>Kh(D,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,c.Z)(function*(){const I=yield _._withRetries(W=>{const oe=Wh(W,!1).getAll();return new Qc(oe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const D=[],A=new Set;for(const{fbase_key:W,value:oe}of I)A.add(W),JSON.stringify(_.localCache[W])!==JSON.stringify(oe)&&(_.notifyListeners(W,oe),D.push(W));for(const W of Object.keys(_.localCache))_.localCache[W]&&!A.has(W)&&(_.notifyListeners(W,null),D.push(W));return D})()}notifyListeners(_,I){this.localCache[_]=I;const D=this.listeners[_];if(D)for(const A of Array.from(D))A(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),Sr=1e12;class Po{constructor(m){this.auth=m,this.counter=Sr,this._widgets=new Map}render(m,_){const I=this.counter;return this._widgets.set(I,new Kv(m,this.auth.name,_||{})),this.counter++,I}reset(m){var _;const I=m||Sr;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Sr))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,c.Z)(function*(){var I;return null===(I=_._widgets.get(m||Sr))||void 0===I||I.execute(),""})()}}class Kv{constructor(m,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof m?document.getElementById(m):m;j(D,"argument-error",{appName:_}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xc(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Es=Hs("rcb"),db=new dn(3e4,6e4);class tm{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=er().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return j(function hb(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Yt(er().grecaptcha)?Promise.resolve(er().grecaptcha):new Promise((I,D)=>{const A=er().setTimeout(()=>{D(de(m,"network-request-failed"))},db.get());er()[Es]=()=>{er().clearTimeout(A),delete er()[Es];const oe=er().grecaptcha;if(!oe||!Yt(oe))return void D(de(m,"internal-error"));const Le=oe.render;oe.render=(He,nt)=>{const kt=Le(He,nt);return this.counter++,kt},this.hostLanguage=_,I(oe)},fu(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Es,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(A),D(de(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=er().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nm{load(m){return(0,c.Z)(function*(){return new Po(m)})()}clearedOneInstance(){}}const Yh="recaptcha",Yv={theme:"light",type:"image"};class rm{constructor(m,_=Object.assign({},Yv),I){this.parameters=_,this.type=Yh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(I),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof m?document.getElementById(m):m;j(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nm:new tm,this.validateStartingState()}verify(){var m=this;return(0,c.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(_)||new Promise(A=>{const W=oe=>{oe&&(m.tokenChangeListeners.delete(W),A(oe))};m.tokenChangeListeners.add(W),m.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof m)m(_);else if("string"==typeof m){const I=er()[m];"function"==typeof I&&I(_)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,c.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,c.Z)(function*(){j(tn()&&!qg(),m.auth,"internal-error"),yield function fb(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function js(w){return Io.apply(this,arguments)}(m.auth);j(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qh{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=pt._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function gi(w,m,_){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,c.Z)(function*(w,m,_){const I=Ln(w),D=yield Ru(I,m,(0,V.m9)(_));return new Qh(D,A=>Oh(I,A))})).apply(this,arguments)}function im(w,m,_){return _n.apply(this,arguments)}function _n(){return(_n=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w);yield Ka(!1,I,"phone");const D=yield Ru(I.auth,m,(0,V.m9)(_));return new Qh(D,A=>tb(I,A))})).apply(this,arguments)}function ut(w,m,_){return ar.apply(this,arguments)}function ar(){return(ar=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w),D=yield Ru(I.auth,m,(0,V.m9)(_));return new Qh(D,A=>Un(I,A))})).apply(this,arguments)}function Ru(w,m,_){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,c.Z)(function*(w,m,_){var I;const D=yield _.verify();try{let A;if(j("string"==typeof D,w,"argument-error"),j(_.type===Yh,w,"argument-error"),A="string"==typeof m?{phoneNumber:m}:m,"session"in A){const W=A.session;if("phoneNumber"in A)return j("enroll"===W.type,w,"internal-error"),(yield function Hv(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:start",se(w,m))}(w,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:A.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{j("signin"===W.type,w,"internal-error");const oe=(null===(I=A.multiFactorHint)||void 0===I?void 0:I.uid)||A.multiFactorUid;return j(oe,w,"missing-multi-factor-info"),(yield function Jg(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:start",se(w,m))}(w,{mfaPendingCredential:W.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield function Et(w,m){return mn.apply(this,arguments)}(w,{phoneNumber:A.phoneNumber,recaptchaToken:D});return W}}finally{_._reset()}}),Jh.apply(this,arguments)}function ri(w,m){return eo.apply(this,arguments)}function eo(){return(eo=(0,c.Z)(function*(w,m){yield Zc((0,V.m9)(w),m)})).apply(this,arguments)}let In=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Ln(_)}verifyPhoneNumber(_,I){return Ru(this.auth,_,(0,V.m9)(I))}static credential(_,I){return pt._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:D}=_;return I&&D?pt._fromTokenResponse(I,D):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function xo(w,m){return m?it(m):(j(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class ca extends $c{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Gs(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Gs(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Gs(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function yt(w){return Ev(w.auth,new ca(w),w.bypassAuthState)}function Qv(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),Rg(_,new ca(w),w.bypassAuthState)}function sm(w){return el.apply(this,arguments)}function el(){return(el=(0,c.Z)(function*(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),Zc(_,new ca(w),w.bypassAuthState)})).apply(this,arguments)}class to{constructor(m,_,I,D,A=!1){this.auth=m,this.resolver=I,this.user=D,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,c.Z)(function*(I,D){m.pendingPromise={resolve:I,reject:D};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(A){m.reject(A)}});return function(I,D){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,c.Z)(function*(){const{urlResponse:I,sessionId:D,postBody:A,tenantId:W,error:oe,type:Le}=m;if(oe)return void _.reject(oe);const He={auth:_.auth,requestUri:I,sessionId:D,tenantId:W||void 0,postBody:A||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)(He))}catch(nt){_.reject(nt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return yt;case"linkViaPopup":case"linkViaRedirect":return sm;case"reauthViaPopup":case"reauthViaRedirect":return Qv;default:ee(this.auth,"internal-error")}}resolve(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const no=new dn(2e3,1e4);function mi(w,m,_){return tc.apply(this,arguments)}function tc(){return(tc=(0,c.Z)(function*(w,m,_){const I=Ln(w);he(w,m,xi);const D=xo(I,_);return new ro(I,"signInViaPopup",m,D).executeNotNull()})).apply(this,arguments)}function nc(w,m,_){return rc.apply(this,arguments)}function rc(){return(rc=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,xi);const D=xo(I.auth,_);return new ro(I.auth,"reauthViaPopup",m,D,I).executeNotNull()})).apply(this,arguments)}function Fu(w,m,_){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,xi);const D=xo(I.auth,_);return new ro(I.auth,"linkViaPopup",m,D,I).executeNotNull()})).apply(this,arguments)}let ro=(()=>{class w extends to{constructor(_,I,D,A,W){super(_,I,A,W),this.provider=D,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,c.Z)(function*(){const I=yield _.execute();return j(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,c.Z)(function*(){Ue(1===_.filter.length,"Popup operations only handle one event");const I=Yc();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(D=>{_.reject(D)}),_.resolver._isIframeWebStorageSupported(_.auth,D=>{D||_.reject(de(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(de(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,D;this.pollId=null!==(D=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==D&&D.closed?window.setTimeout(()=>{this.pollId=null,this.reject(de(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,no.get())};_()}}return w.currentPopupAction=null,w})();const tl="pendingRedirect",Ms=new Map;class la extends to{constructor(m,_,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,c.Z)(function*(){let I=Ms.get(_.auth._key());if(!I){try{const A=(yield function Uu(w,m){return Xh.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;I=()=>Promise.resolve(A)}catch(D){I=()=>Promise.reject(D)}Ms.set(_.auth._key(),I)}return _.bypassAuthState||Ms.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,I=this;return(0,c.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(I,m);if("unknown"!==m.type){if(m.eventId){const D=yield I.auth._redirectUserForId(m.eventId);if(D)return I.user=D,_().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Xh(){return(Xh=(0,c.Z)(function*(w,m){const _=ef(m),I=_i(w);if(!(yield I._isAvailable()))return!1;const D="true"===(yield I._get(_));return yield I._remove(_),D})).apply(this,arguments)}function nl(w,m){return ua.apply(this,arguments)}function ua(){return(ua=(0,c.Z)(function*(w,m){return _i(w)._set(ef(m),"true")})).apply(this,arguments)}function Ao(){Ms.clear()}function rl(w,m){Ms.set(w._key(),m)}function _i(w){return it(w._redirectPersistence)}function ef(w){return Xn(tl,w.config.apiKey,w.name)}function Bu(w,m,_){return function Ai(w,m,_){return Tn.apply(this,arguments)}(w,m,_)}function Tn(){return(Tn=(0,c.Z)(function*(w,m,_){const I=Ln(w);he(w,m,xi),yield I._initializationPromise;const D=xo(I,_);return yield nl(D,I),D._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function zt(w,m,_){return function ic(w,m,_){return vr.apply(this,arguments)}(w,m,_)}function vr(){return(vr=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,xi),yield I.auth._initializationPromise;const D=xo(I.auth,_);yield nl(D,I.auth);const A=yield Ts(I);return D._openRedirect(I.auth,m,"reauthViaRedirect",A)})).apply(this,arguments)}function yi(w,m,_){return function il(w,m,_){return sl.apply(this,arguments)}(w,m,_)}function sl(){return(sl=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,xi),yield I.auth._initializationPromise;const D=xo(I.auth,_);yield Ka(!1,I,m.providerId),yield nl(D,I.auth);const A=yield Ts(I);return D._openRedirect(I.auth,m,"linkViaRedirect",A)})).apply(this,arguments)}function Jv(w,m){return cr.apply(this,arguments)}function cr(){return(cr=(0,c.Z)(function*(w,m){return yield Ln(w)._initializationPromise,Oo(w,m,!1)})).apply(this,arguments)}function Oo(w,m){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,c.Z)(function*(w,m,_=!1){const I=Ln(w),D=xo(I,m),W=yield new la(I,D,_).execute();return W&&!_&&(delete W.user._redirectEventId,yield I._persistUserIfCurrent(W.user),yield I._setRedirectUser(null,m)),W})).apply(this,arguments)}function Ts(w){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,c.Z)(function*(w){const m=Yc(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class sc{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(_=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function oc(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tf(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var I;if(m.error&&!tf(m)){const D=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(de(this.auth,D))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const I=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(om(m))}saveEventToCache(m){this.cachedEventUids.add(om(m)),this.lastProcessedEventTime=Date.now()}}function om(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function tf({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function nf(w){return ju.apply(this,arguments)}function ju(){return(ju=(0,c.Z)(function*(w,m={}){return pe(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Tt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ko=/^https?/;function No(){return(No=(0,c.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield nf(w);for(const _ of m)try{if(am(_))return}catch{}ee(w,"unauthorized-domain")})).apply(this,arguments)}function am(w){const m=lt(),{protocol:_,hostname:I}=new URL(m);if(w.startsWith("chrome-extension://")){const W=new URL(w);return""===W.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&W.hostname===I}if(!ko.test(_))return!1;if(Tt.test(w))return I===w;const D=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(I)}const cm=new dn(3e4,6e4);function ii(){const w=er().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let lr=null;const um=new dn(5e3,15e3),$u="__/auth/iframe",dm="emulator/auth/iframe",hm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ac(w){const m=w.config;j(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?Zr(m,dm):`https://${w.config.authDomain}/${$u}`,I={apiKey:m.apiKey,appName:w.name,v:U.SDK_VERSION},D=Hu.get(w.config.apiHost);D&&(I.eid=D);const A=w._getFrameworks();return A.length&&(I.fw=A.join(",")),`${_}?${(0,V.xO)(I).slice(1)}`}function io(){return io=(0,c.Z)(function*(w){const m=yield function Ro(w){return lr=lr||function lm(w){return new Promise((m,_)=>{var I,D,A;function W(){ii(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ii(),_(de(w,"network-request-failed"))},timeout:cm.get()})}if(null!==(D=null===(I=er().gapi)||void 0===I?void 0:I.iframes)&&void 0!==D&&D.Iframe)m(gapi.iframes.getContext());else{if(null===(A=er().gapi)||void 0===A||!A.load){const oe=Hs("iframefcb");return er()[oe]=()=>{gapi.load?W():_(de(w,"network-request-failed"))},fu(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>_(Le))}W()}}).catch(m=>{throw lr=null,m})}(w),lr}(w),_=er().gapi;return j(_,w,"internal-error"),m.open({where:document.body,url:ac(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hm,dontclear:!0},I=>new Promise(function(){var D=(0,c.Z)(function*(A,W){yield I.restyle({setHideOnLeave:!1});const oe=de(w,"network-request-failed"),Le=er().setTimeout(()=>{W(oe)},um.get());function He(){er().clearTimeout(Le),A(I)}I.ping(He).then(He,()=>{W(oe)})});return function(A,W){return D.apply(this,arguments)}}()))}),io.apply(this,arguments)}const ol={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pa{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const fm="__/auth/handler",gb="emulator/auth/handler",rf=encodeURIComponent("fac");function Zi(w,m,_,I,D,A){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,c.Z)(function*(w,m,_,I,D,A){j(w.config.authDomain,w,"auth-domain-config-required"),j(w.config.apiKey,w,"invalid-api-key");const W={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:U.SDK_VERSION,eventId:D};if(m instanceof xi){m.setDefaultLanguage(w.languageCode),W.providerId=m.providerId||"",(0,V.xb)(m.getCustomParameters())||(W.customParameters=JSON.stringify(m.getCustomParameters()));for(const[nt,kt]of Object.entries(A||{}))W[nt]=kt}if(m instanceof Jr){const nt=m.getScopes().filter(kt=>""!==kt);nt.length>0&&(W.scopes=nt.join(","))}w.tenantId&&(W.tid=w.tenantId);const oe=W;for(const nt of Object.keys(oe))void 0===oe[nt]&&delete oe[nt];const Le=yield w._getAppCheckToken(),He=Le?`#${rf}=${encodeURIComponent(Le)}`:"";return`${function qu({config:w}){return w.emulator?Zr(w,gb):`https://${w.authDomain}/${fm}`}(w)}?${(0,V.xO)(oe).slice(1)}${He}`})).apply(this,arguments)}const Kn="webStorageSupport",so=class sf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ou,this._completeRedirectFn=Oo,this._overrideRedirectResult=rl}_openPopup(m,_,I,D){var A=this;return(0,c.Z)(function*(){var W;Ue(null===(W=A.eventManagers[m._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const oe=yield Zi(m,_,I,lt(),D);return function pb(w,m,_,I=500,D=600){const A=Math.max((window.screen.availHeight-D)/2,0).toString(),W=Math.max((window.screen.availWidth-I)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},ol),{width:I.toString(),height:D.toString(),top:A,left:W}),He=(0,V.z$)().toLowerCase();_&&(oe=x(He)?"_blank":_),O(He)&&(m=m||"http://localhost",Le.scrollbars="yes");const nt=Object.entries(Le).reduce((Ur,[qi,oo])=>`${Ur}${qi}=${oo},`,"");if(function wt(w=(0,V.z$)()){var m;return Ke(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(He)&&"_self"!==oe)return function Gu(w,m){const _=document.createElement("a");_.href=w,_.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(m||"",oe),new pa(null);const kt=window.open(m||"",oe,nt);j(kt,w,"popup-blocked");try{kt.focus()}catch{}return new pa(kt)}(m,oe,Yc())})()}_openRedirect(m,_,I,D){var A=this;return(0,c.Z)(function*(){return yield A._originValidation(m),function qh(w){er().location.href=w}(yield Zi(m,_,I,lt(),D)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:D,promise:A}=this.eventManagers[_];return D?Promise.resolve(D):(Ue(A,"If manager is not set, promise should be"),A)}const I=this.initAndGetManager(m);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(m){var _=this;return(0,c.Z)(function*(){const I=yield function fa(w){return io.apply(this,arguments)}(m),D=new sc(m);return I.register("authEvent",A=>(j(A?.authEvent,m,"invalid-auth-event"),{status:D.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:D},_.iframes[m._key()]=I,D})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Kn,{type:Kn},D=>{var A;const W=null===(A=D?.[0])||void 0===A?void 0:A[Kn];void 0!==W&&_(!!W),ee(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ha(w){return No.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return xt()||k()||Ke()}};class pm{constructor(m){this.factorId=m}_process(m,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,I);case"signin":return this._finalizeSignIn(m,_.credential);default:return we("unexpected MultiFactorSessionType")}}}class si extends pm{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new si(m)}_finalizeEnroll(m,_,I){return function zh(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:finalize",se(w,m))}(m,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function Xg(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:finalize",se(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let cc=(()=>{class w{constructor(){}static assertion(_){return si._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var t0="@firebase/auth";class mb{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,c.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(I=>{m(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const n0=(0,V.Pz)("authIdTokenMaxAge")||300;let Ku=null;const r0=w=>function(){var m=(0,c.Z)(function*(_){const I=_&&(yield _.getIdTokenResult()),D=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(D&&D>n0)return;const A=I?.token;Ku!==A&&(Ku=A,yield fetch(w,{method:A?"POST":"DELETE",headers:A?{Authorization:`Bearer ${A}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function ga(w=(0,U.getApp)()){const m=(0,U._getProvider)(w,"auth");if(m.isInitialized())return m.getImmediate();const _=function hn(w,m){const _=(0,U._getProvider)(w,"auth");if(_.isInitialized()){const D=_.getImmediate(),A=_.getOptions();if((0,V.vZ)(A,m??{}))return D;ee(D,"already-initialized")}return _.initialize({options:m})}(w,{popupRedirectResolver:so,persistence:[bs,Zh,Ou]}),I=(0,V.Pz)("authTokenSyncURL");if(I){const A=r0(I);(function zg(w,m,_){(0,V.m9)(w).beforeAuthStateChanged(m,_)})(_,A,()=>A(_.currentUser)),function Vv(w,m,_,I){(0,V.m9)(w).onIdTokenChanged(m,_,I)}(_,W=>A(W))}const D=(0,V.q4)("auth");return D&&vh(_,`http://${D}`),_}!function af(w){(0,U._registerComponent)(new Ie.wA("auth",(m,{options:_})=>{const I=m.getProvider("app").getImmediate(),D=m.getProvider("heartbeat"),A=m.getProvider("app-check-internal"),{apiKey:W,authDomain:oe}=I.options;j(W&&!W.includes(":"),"invalid-api-key",{appName:I.name});const Le={apiKey:W,authDomain:oe,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bc(w)},He=new Yr(I,D,A,Le);return function Cv(w,m){const _=m?.persistence||[],I=(Array.isArray(_)?_:[_]).map(it);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(I,m?.popupRedirectResolver)}(He,_),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,I)=>{m.getProvider("auth-internal").initialize()})),(0,U._registerComponent)(new Ie.wA("auth-internal",m=>{const _=Ln(m.getProvider("auth").getImmediate());return new mb(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,U.registerVersion)(t0,"0.23.2",function Oi(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,U.registerVersion)(t0,"0.23.2","esm2017")}("Browser")},9058:(st,be,L)=>{L.d(be,{$s:()=>it,BH:()=>re,DV:()=>Zn,G6:()=>Zr,GJ:()=>En,L:()=>Me,LL:()=>ke,P0:()=>ot,Pz:()=>de,Sg:()=>he,UG:()=>we,UI:()=>Fr,US:()=>Ie,Wl:()=>ht,Yr:()=>dn,ZB:()=>J,ZR:()=>pe,aH:()=>ee,b$:()=>tn,cI:()=>nn,dS:()=>ji,eu:()=>ce,g5:()=>U,gK:()=>Kt,gQ:()=>Mt,h$:()=>Fe,hl:()=>ie,hu:()=>V,jU:()=>Ue,m9:()=>Xn,ne:()=>on,p$:()=>G,pd:()=>mt,q4:()=>tt,r3:()=>sn,ru:()=>lt,tV:()=>B,uI:()=>j,ug:()=>is,vZ:()=>gr,w1:()=>wn,w9:()=>Nn,xO:()=>vs,xb:()=>Ti,z$:()=>Re,zI:()=>le,zd:()=>dt});const c={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},V=function(H,$){if(!H)throw U($)},U=function(H){return new Error("Firebase Database ("+c.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},ne=function(H){const $=[];let O=0;for(let k=0;k<H.length;k++){let x=H.charCodeAt(k);x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):55296==(64512&x)&&k+1<H.length&&56320==(64512&H.charCodeAt(k+1))?(x=65536+((1023&x)<<10)+(1023&H.charCodeAt(++k)),$[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,$){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let x=0;x<H.length;x+=3){const K=H[x],me=x+1<H.length,Ve=me?H[x+1]:0,vt=x+2<H.length,Ke=vt?H[x+2]:0;let gn=(15&Ve)<<2|Ke>>6,xt=63&Ke;vt||(xt=64,me||(gn=64)),k.push(O[K>>2],O[(3&K)<<4|Ve>>4],O[gn],O[xt])}return k.join("")},encodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(H):this.encodeByteArray(ne(H),$)},decodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(H):function(H){const $=[];let O=0,k=0;for(;O<H.length;){const x=H[O++];if(x<128)$[k++]=String.fromCharCode(x);else if(x>191&&x<224){const K=H[O++];$[k++]=String.fromCharCode((31&x)<<6|63&K)}else if(x>239&&x<365){const vt=((7&x)<<18|(63&H[O++])<<12|(63&H[O++])<<6|63&H[O++])-65536;$[k++]=String.fromCharCode(55296+(vt>>10)),$[k++]=String.fromCharCode(56320+(1023&vt))}else{const K=H[O++],me=H[O++];$[k++]=String.fromCharCode((15&x)<<12|(63&K)<<6|63&me)}}return $.join("")}(this.decodeStringToByteArray(H,$))},decodeStringToByteArray(H,$){this.init_();const O=$?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let x=0;x<H.length;){const K=O[H.charAt(x++)],Ve=x<H.length?O[H.charAt(x)]:0;++x;const Ke=x<H.length?O[H.charAt(x)]:64;++x;const wt=x<H.length?O[H.charAt(x)]:64;if(++x,null==K||null==Ve||null==Ke||null==wt)throw new Ae;k.push(K<<2|Ve>>4),64!==Ke&&(k.push(Ve<<4&240|Ke>>2),64!==wt&&k.push(Ke<<6&192|wt))}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class Ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(H){const $=ne(H);return Ie.encodeByteArray($,!0)},Me=function(H){return Fe(H).replace(/\./g,"")},B=function(H){try{return Ie.decodeString(H,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function G(H){return J(void 0,H)}function J(H,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return $}for(const O in $)!$.hasOwnProperty(O)||!Oe(O)||(H[O]=J(H[O],$[O]));return H}function Oe(H){return"__proto__"!==H}const Ee=()=>{try{return function xe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=H&&B(H[1]);return $&&JSON.parse($)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},tt=H=>{var $,O;return null===(O=null===($=Ee())||void 0===$?void 0:$.emulatorHosts)||void 0===O?void 0:O[H]},ot=H=>{const $=tt(H);if(!$)return;const O=$.lastIndexOf(":");if(O<=0||O+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const k=parseInt($.substring(O+1),10);return"["===$[0]?[$.substring(1,O-1),k]:[$.substring(0,O),k]},ee=()=>{var H;return null===(H=Ee())||void 0===H?void 0:H.config},de=H=>{var $;return null===($=Ee())||void 0===$?void 0:$[`_${H}`]};class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,O)=>{this.resolve=$,this.reject=O})}wrapCallback($){return(O,k)=>{O?this.reject(O):this.resolve(k),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(O):$(O,k))}}}function he(H,$){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const k=$||"demo-project",x=H.iat||0,K=H.sub||H.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${k}`,aud:k,iat:x,exp:x+3600,auth_time:x,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},H);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(me)),""].join(".")}function Re(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function j(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function we(){var H;const $=null===(H=Ee())||void 0===H?void 0:H.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function lt(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function tn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function wn(){const H=Re();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function dn(){return!0===c.NODE_CLIENT||!0===c.NODE_ADMIN}function Zr(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ce(){return new Promise((H,$)=>{try{let O=!0;const k="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(k);x.onsuccess=()=>{x.result.close(),O||self.indexedDB.deleteDatabase(k),H(!0)},x.onupgradeneeded=()=>{O=!1},x.onerror=()=>{var K;$((null===(K=x.error)||void 0===K?void 0:K.message)||"")}}catch(O){$(O)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class pe extends Error{constructor($,O,k){super(O),this.code=$,this.customData=k,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ke.prototype.create)}}class ke{constructor($,O,k){this.service=$,this.serviceName=O,this.errors=k}create($,...O){const k=O[0]||{},x=`${this.service}/${$}`,K=this.errors[$],me=K?function Qe(H,$){return H.replace(Be,(O,k)=>{const x=$[k];return null!=x?String(x):`<${k}?>`})}(K,k):"Error";return new pe(x,`${this.serviceName}: ${me} (${x}).`,k)}}const Be=/\{\$([^}]+)}/g;function nn(H){return JSON.parse(H)}function ht(H){return JSON.stringify(H)}const Qt=function(H){let $={},O={},k={},x="";try{const K=H.split(".");$=nn(B(K[0])||""),O=nn(B(K[1])||""),x=K[2],k=O.d||{},delete O.d}catch{}return{header:$,claims:O,data:k,signature:x}},Nn=function(H){const O=Qt(H).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},En=function(H){const $=Qt(H).claims;return"object"==typeof $&&!0===$.admin};function sn(H,$){return Object.prototype.hasOwnProperty.call(H,$)}function Zn(H,$){if(Object.prototype.hasOwnProperty.call(H,$))return H[$]}function Ti(H){for(const $ in H)if(Object.prototype.hasOwnProperty.call(H,$))return!1;return!0}function Fr(H,$,O){const k={};for(const x in H)Object.prototype.hasOwnProperty.call(H,x)&&(k[x]=$.call(O,H[x],x,H));return k}function gr(H,$){if(H===$)return!0;const O=Object.keys(H),k=Object.keys($);for(const x of O){if(!k.includes(x))return!1;const K=H[x],me=$[x];if(qn(K)&&qn(me)){if(!gr(K,me))return!1}else if(K!==me)return!1}for(const x of k)if(!O.includes(x))return!1;return!0}function qn(H){return null!==H&&"object"==typeof H}function vs(H){const $=[];for(const[O,k]of Object.entries(H))Array.isArray(k)?k.forEach(x=>{$.push(encodeURIComponent(O)+"="+encodeURIComponent(x))}):$.push(encodeURIComponent(O)+"="+encodeURIComponent(k));return $.length?"&"+$.join("&"):""}function dt(H){const $={};return H.replace(/^\?/,"").split("&").forEach(k=>{if(k){const[x,K]=k.split("=");$[decodeURIComponent(x)]=decodeURIComponent(K)}}),$}function mt(H){const $=H.indexOf("?");if(!$)return"";const O=H.indexOf("#",$);return H.substring($,O>0?O:void 0)}class Mt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,O){O||(O=0);const k=this.W_;if("string"==typeof $)for(let wt=0;wt<16;wt++)k[wt]=$.charCodeAt(O)<<24|$.charCodeAt(O+1)<<16|$.charCodeAt(O+2)<<8|$.charCodeAt(O+3),O+=4;else for(let wt=0;wt<16;wt++)k[wt]=$[O]<<24|$[O+1]<<16|$[O+2]<<8|$[O+3],O+=4;for(let wt=16;wt<80;wt++){const gn=k[wt-3]^k[wt-8]^k[wt-14]^k[wt-16];k[wt]=4294967295&(gn<<1|gn>>>31)}let Ke,Jt,x=this.chain_[0],K=this.chain_[1],me=this.chain_[2],Ve=this.chain_[3],vt=this.chain_[4];for(let wt=0;wt<80;wt++){wt<40?wt<20?(Ke=Ve^K&(me^Ve),Jt=1518500249):(Ke=K^me^Ve,Jt=1859775393):wt<60?(Ke=K&me|Ve&(K|me),Jt=2400959708):(Ke=K^me^Ve,Jt=3395469782);const gn=(x<<5|x>>>27)+Ke+vt+Jt+k[wt]&4294967295;vt=Ve,Ve=me,me=4294967295&(K<<30|K>>>2),K=x,x=gn}this.chain_[0]=this.chain_[0]+x&4294967295,this.chain_[1]=this.chain_[1]+K&4294967295,this.chain_[2]=this.chain_[2]+me&4294967295,this.chain_[3]=this.chain_[3]+Ve&4294967295,this.chain_[4]=this.chain_[4]+vt&4294967295}update($,O){if(null==$)return;void 0===O&&(O=$.length);const k=O-this.blockSize;let x=0;const K=this.buf_;let me=this.inbuf_;for(;x<O;){if(0===me)for(;x<=k;)this.compress_($,x),x+=this.blockSize;if("string"==typeof $){for(;x<O;)if(K[me]=$.charCodeAt(x),++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}else for(;x<O;)if(K[me]=$[x],++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}this.inbuf_=me,this.total_+=O}digest(){const $=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let x=this.blockSize-1;x>=56;x--)this.buf_[x]=255&O,O/=256;this.compress_(this.buf_);let k=0;for(let x=0;x<5;x++)for(let K=24;K>=0;K-=8)$[k]=this.chain_[x]>>K&255,++k;return $}}function on(H,$){const O=new di(H,$);return O.subscribe.bind(O)}class di{constructor($,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{$(this)}).catch(k=>{this.error(k)})}next($){this.forEachObserver(O=>{O.next($)})}error($){this.forEachObserver(O=>{O.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,O,k){let x;if(void 0===$&&void 0===O&&void 0===k)throw new Error("Missing Observer.");x=function Nt(H,$){if("object"!=typeof H||null===H)return!1;for(const O of $)if(O in H&&"function"==typeof H[O])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:O,complete:k},void 0===x.next&&(x.next=Rn),void 0===x.error&&(x.error=Rn),void 0===x.complete&&(x.complete=Rn);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),K}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,$)}sendOne($,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{O(this.observers[$])}catch(k){typeof console<"u"&&console.error&&console.error(k)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rn(){}function Kt(H,$){return`${H} failed: ${$} argument `}const ji=function(H){const $=[];let O=0;for(let k=0;k<H.length;k++){let x=H.charCodeAt(k);if(x>=55296&&x<=56319){const K=x-55296;k++,V(k<H.length,"Surrogate pair missing trail surrogate."),x=65536+(K<<10)+(H.charCodeAt(k)-56320)}x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):x<65536?($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},is=function(H){let $=0;for(let O=0;O<H.length;O++){const k=H.charCodeAt(O);k<128?$++:k<2048?$+=2:k>=55296&&k<=56319?($+=4,O++):$+=3}return $},mr=1e3,Ge=2,_e=144e5,Xe=.5;function it(H,$=mr,O=Ge){const k=$*Math.pow(O,H),x=Math.round(Xe*k*(Math.random()-.5)*2);return Math.min(_e,k+x)}function Xn(H){return H&&H._delegate?H._delegate:H}},2286:(st,be,L)=>{var c=L(5879);let V=null;function U(){return V}class ge{}const Ie=new c.OlP("DocumentToken");let Ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Me)},providedIn:"platform"})}return n})();const Fe=new c.OlP("Location Initialized");let Me=(()=>{class n extends Ae{constructor(){super(),this._doc=(0,c.f3M)(Ie),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function B(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function J(n){return n&&"?"!==n[0]?"?"+n:n}let Oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Je)},providedIn:"root"})}return n})();const xe=new c.OlP("appBaseHref");let Je=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return B(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+J(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const u=this.prepareExternalUrl(i+J(o));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){const u=this.prepareExternalUrl(i+J(o));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ae),c.LFG(xe,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ce=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=B(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let u=this.prepareExternalUrl(i+J(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){let u=this.prepareExternalUrl(i+J(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ae),c.LFG(xe,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})(),Te=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(ot(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+J(r))}normalize(t){return n.stripTrailingSlash(function tt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ot(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=J;static#t=this.joinWithSlash=B;static#n=this.stripTrailingSlash=G;static#r=this.\u0275fac=function(r){return new(r||n)(c.LFG(Oe))};static#i=this.\u0275prov=c.Yz7({token:n,factory:function(){return function Ee(){return new Te((0,c.LFG)(Oe))}()},providedIn:"root"})}return n})();function ot(n){return n.replace(/\/index.html$/,"")}var re=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(re||{}),Ue=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Ue||{});function pe(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Ue.CurrencyDecimal)return t[c.wAp.NumberSymbols][Ue.Decimal];if(e===Ue.CurrencyGroup)return t[c.wAp.NumberSymbols][Ue.Group]}return r}const x=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function sa(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Ga(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}const pu=/\s+/,yh=[];let Kr=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=yh,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(pu):yh}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(pu):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(pu).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class jc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yr=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new jc(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===o?void 0:o);else if(null!==o){const f=r.get(o);r.move(f,u),Ln(f,i)}});for(let i=0,o=r.length;i<o;i++){const f=r.get(i).context;f.index=i,f.count=o,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ln(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Ln(n,e){n.context.$implicit=e.item}let hn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Cv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.s_b),c.Y36(c.Rgc))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Cv{constructor(){this.$implicit=null,this.ngIf=null}}function vh(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}function Di(n,e){return new c.vHH(2100,!1)}class gu{createSubscription(e,t){return(0,c.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,c.rg0)(()=>e.unsubscribe())}}class bh{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const mu=new bh,Eh=new gu;let _u=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return mu;if((0,c.F4k)(t))return Eh;throw Di()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.sBO,16))};static#t=this.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),je=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Si(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function js(n,e,t){return function xt(n,e,t,r,i,o,u=!1){let f="",g=!1;if(isFinite(n)){let y=function Hi(n){let r,i,o,u,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;"0"===e.charAt(o);o++);if(o===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=o,r=[],u=0;o<=f;o++,u++)r[u]=Number(e.charAt(o))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);u&&(y=function $s(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let b=e.minInt,M=e.minFrac,S=e.maxFrac;if(o){const ze=o.match(x);if(null===ze)throw new Error(`${o} is not a valid digit info`);const Ne=ze[1],Ye=ze[3],gt=ze[5];null!=Ne&&(b=sa(Ne)),null!=Ye&&(M=sa(Ye)),null!=gt?S=sa(gt):null!=Ye&&M>S&&(S=M)}!function Yt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const o=Math.min(Math.max(e,i),t);let u=o+n.integerLen,f=r[u];if(u>0){r.splice(Math.max(n.integerLen,u));for(let M=u;M<r.length;M++)r[M]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,u=o+1),r[0]=0;for(let M=1;M<u;M++)r[M]=0}if(f>=5)if(u-1<0){for(let M=0;M>u;M--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[u-1]++;for(;i<Math.max(0,o);i++)r.push(0);let g=0!==o;const y=e+n.integerLen,b=r.reduceRight(function(M,S,R,Z){return Z[R]=(S+=M)<10?S:S-10,g&&(0===Z[R]&&R>=y?Z.pop():g=!1),S>=10?1:0},0);b&&(r.unshift(b),n.integerLen++)}(y,M,S);let R=y.digits,Z=y.integerLen;const Q=y.exponent;let X=[];for(g=R.every(ze=>!ze);Z<b;Z++)R.unshift(0);for(;Z<0;Z++)R.unshift(0);Z>0?X=R.splice(Z,R.length):(X=R,R=[0]);const Se=[];for(R.length>=e.lgSize&&Se.unshift(R.splice(-e.lgSize,R.length).join(""));R.length>e.gSize;)Se.unshift(R.splice(-e.gSize,R.length).join(""));R.length&&Se.unshift(R.join("")),f=Se.join(pe(t,r)),X.length&&(f+=pe(t,i)+X.join("")),Q&&(f+=pe(t,Ue.Exponential)+"+"+Q)}else f=pe(t,Ue.Infinity);return f=n<0&&!g?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function Io(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],o=r[1],u=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=u[0],g=u[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let b=0;b<g.length;b++){const M=g.charAt(b);"0"===M?t.minFrac=t.maxFrac=b+1:"#"===M?t.maxFrac=b+1:t.posSuf+=M}const y=f.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,o){const b=i.length-t.posPre.length-t.posSuf.length,M=o.indexOf("#");t.negPre=o.substring(0,M).replace(/'/g,""),t.negSuf=o.slice(M+b).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function ke(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,re.Decimal),pe(e,Ue.MinusSign)),e,Ue.Group,Ue.Decimal,t)}(function Zs(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(o){throw Di()}}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.soG,16))};static#t=this.\u0275pipe=c.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let _r=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw Di();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=c.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),Wn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();function Pi(n){return"server"===n}let Jr=(()=>{class n{static#e=this.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Ws((0,c.LFG)(Ie),window)})}return n})();class Ws{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function kg(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const u=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class ws{}class Hg extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Bh extends Hg{static makeCurrent(){!function ne(n){V||(V=n)}(new Bh)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function sb(){return Kc=Kc||document.querySelector("base"),Kc?Kc.getAttribute("href"):null}();return null==t?null:function Vv(n){Vh=Vh||document.createElement("a"),Vh.setAttribute("href",n);const e=Vh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Kc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ga(document.cookie,e)}}let Vh,Kc=null,ob=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const jv=new c.OlP("EventManagerPlugins");let $v=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new c.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(jv),c.LFG(c.R0b))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();class jh{constructor(e){this._doc=e}}const $h="ng-app-id";let Pu=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Pi(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${$h}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute($h),o;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=r,this.platformIsServer&&u.setAttribute($h,this.appId),u}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const o=this.styleRef,u=o.get(r)?.elements;u?u.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ie),c.LFG(c.AFp),c.LFG(c.Ojb,8),c.LFG(c.Lbi))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const Qs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ja=/%COMP%/g,Is=new c.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function an(n,e){return e.map(t=>t.replace(Ja,n))}let Au=(()=>{class n{constructor(t,r,i,o,u,f,g,y=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=u,this.platformId=f,this.ngZone=g,this.nonce=y,this.rendererByCompId=new Map,this.platformIsServer=Pi(f),this.defaultRenderer=new Js(t,u,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===c.ifc.ShadowDom&&(r={...r,encapsulation:c.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Zh?i.applyToHost(t):i instanceof pi&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const u=this.doc,f=this.ngZone,g=this.eventManager,y=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,M=this.platformIsServer;switch(r.encapsulation){case c.ifc.Emulated:o=new Zh(g,y,r,this.appId,b,u,f,M);break;case c.ifc.ShadowDom:return new Xa(g,y,t,r,u,f,this.nonce,M);default:o=new pi(g,y,r,b,u,f,M)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG($v),c.LFG(Pu),c.LFG(c.AFp),c.LFG(Is),c.LFG(Ie),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(c.Ojb))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();class Js{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Qs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Gh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Gh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new c.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Qs[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Qs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=U().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Gh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Xa extends Js{constructor(e,t,r,i,o,u,f,g){super(e,o,u,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const y=an(i.id,i.styles);for(const b of y){const M=document.createElement("style");f&&M.setAttribute("nonce",f),M.textContent=b,this.shadowRoot.appendChild(M)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class pi extends Js{constructor(e,t,r,i,o,u,f,g){super(e,o,u,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?an(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Zh extends pi{constructor(e,t,r,i,o,u,f,g){const y=i+"-"+r.id;super(e,t,r,o,u,f,g,y),this.contentAttr=function Gg(n){return"_ngcontent-%COMP%".replace(Ja,n)}(y),this.hostAttr=function xu(n){return"_nghost-%COMP%".replace(Ja,n)}(y)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let lb=(()=>{class n extends jh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ie))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ou=["alt","control","meta","shift"],Do={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Yc=(()=>{class n extends jh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),u=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let u="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),u="code."),Ou.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),u+=y+".")}),u+=o,0!=r.length||0===o.length)return null;const g={};return g.domEventName=i,g.fullKey=u,g}static matchEventFullKeyCode(t,r){let i=Do[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ou.forEach(u=>{u!==i&&(0,Zg[u])(t)&&(o+=u+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ie))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const Kg=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function _t(){Bh.makeCurrent()},multi:!0},{provide:Ie,useFactory:function ub(){return(0,c.RDi)(document),document},deps:[]}]),Gv=new c.OlP(""),ec=[{provide:c.rWj,useClass:class zg{addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new c.vHH(5103,!1);return o},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let o=i.length,u=!1;const f=function(g){u=u||g,o--,0==o&&r(u)};i.forEach(g=>{g.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?U().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],So=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function ku(){return new c.qLn},deps:[]},{provide:jv,useClass:lb,multi:!0,deps:[Ie,c.R0b,c.Lbi]},{provide:jv,useClass:Yc,multi:!0,deps:[Ie]},Au,Pu,$v,{provide:c.FYo,useExisting:Au},{provide:ws,useClass:ob,deps:[]},[]];let Qc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Gv,12))};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({providers:[...So,...ec],imports:[Wn,c.hGG]})}return n})(),ve=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ie))};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function Qg(){return new ve((0,c.LFG)(Ie))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var gi=L(5592),Xs=L(4674),_n=L(2459),ut=L(2096),ar=L(5619);const{isArray:Ru}=Array,{getPrototypeOf:Jh,prototype:ri,keys:eo}=Object;function In(n){if(1===n.length){const e=n[0];if(Ru(e))return{args:e,keys:null};if(function xo(n){return n&&"object"==typeof n&&Jh(n)===ri}(e)){const t=eo(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ca=L(2737),yt=L(7398);const{isArray:Qv}=Array;function el(n){return(0,yt.U)(e=>function sm(n,e){return Qv(e)?n(...e):n(e)}(n,e))}var to=L(4564);function no(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var mi=L(8251),tc=L(7103);function nc(...n){const e=(0,to.yG)(n),t=(0,to.jO)(n),{args:r,keys:i}=In(n);if(0===r.length)return(0,_n.D)([],e);const o=new gi.y(function rc(n,e,t=ca.y){return r=>{Fu(e,()=>{const{length:i}=n,o=new Array(i);let u=i,f=i;for(let g=0;g<i;g++)Fu(e,()=>{const y=(0,_n.D)(n[g],e);let b=!1;y.subscribe((0,mi.x)(r,M=>{o[g]=M,b||(b=!0,f--),f||r.next(t(o.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>no(i,u):ca.y));return t?o.pipe(el(t)):o}function Fu(n,e,t){n?(0,tc.f)(t,n,e):e()}const ro=(0,L(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var tl=L(7537);function la(...n){return function Ms(){return(0,tl.J)(1)}()((0,_n.D)(n,(0,to.yG)(n)))}var Uu=L(4829);function Xh(n){return new gi.y(e=>{(0,Uu.Xf)(n()).subscribe(e)})}var nl=L(8407);function ua(n,e){const t=(0,Xs.m)(n)?n:()=>n,r=i=>i.error(t());return new gi.y(e?i=>e.schedule(r,0,i):r)}var Ao=L(6232),rl=L(7394),_i=L(9360);function ef(){return(0,_i.e)((n,e)=>{let t=null;n._refCount++;const r=(0,mi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Bu extends gi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_i.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,mi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rl.w0.EMPTY)}return e}refCount(){return ef()(this)}}var Ai=L(8645),Tn=L(4664);function zt(n){return n<=0?()=>Ao.E:(0,_i.e)((e,t)=>{let r=0;e.subscribe((0,mi.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ic(...n){const e=(0,to.yG)(n);return(0,_i.e)((t,r)=>{(e?la(n,t,e):la(n,t)).subscribe(r)})}function vr(n,e){return(0,_i.e)((t,r)=>{let i=0;t.subscribe((0,mi.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var yi=L(1631);function il(n){return(0,_i.e)((e,t)=>{let r=!1;e.subscribe((0,mi.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sl(n=Jv){return(0,_i.e)((e,t)=>{let r=!1;e.subscribe((0,mi.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Jv(){return new ro}function cr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vr((i,o)=>n(i,o,r)):ca.y,zt(1),t?il(e):sl(()=>new ro))}function Oo(n,e){return(0,Xs.m)(e)?(0,yi.z)(n,e,1):(0,yi.z)(n,1)}function Dn(n,e,t){const r=(0,Xs.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,_i.e)((i,o)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let f=!0;i.subscribe((0,mi.x)(o,g=>{var y;null===(y=r.next)||void 0===y||y.call(r,g),o.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),o.complete()},g=>{var y;f=!1,null===(y=r.error)||void 0===y||y.call(r,g),o.error(g)},()=>{var g,y;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(y=r.finalize)||void 0===y||y.call(r)}))}):ca.y}function Ts(n){return(0,_i.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,mi.x)(t,void 0,void 0,u=>{o=(0,Uu.Xf)(n(u,Ts(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function da(n,e){return(0,_i.e)(function Vu(n,e,t,r,i){return(o,u)=>{let f=t,g=e,y=0;o.subscribe((0,mi.x)(u,b=>{const M=y++;g=f?n(g,b,M):(f=!0,b),r&&u.next(g)},i&&(()=>{f&&u.next(g),u.complete()})))}}(n,e,arguments.length>=2,!0))}function sc(n){return n<=0?()=>Ao.E:(0,_i.e)((e,t)=>{let r=[];e.subscribe((0,mi.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function oc(n){return(0,_i.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var nf=L(2420);const Tt="primary",ko=Symbol("RouteTitle");class ha{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function No(n){return new ha(n)}function am(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const u=r[o],f=n[o];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ii(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!lm(n[i],e[i]))return!1;return!0}function lm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function lr(n){return n.length>0?n[n.length-1]:null}function Ro(n){return function im(n){return!!n&&(n instanceof gi.y||(0,Xs.m)(n.lift)&&(0,Xs.m)(n.subscribe))}(n)?n:(0,c.QGY)(n)?(0,_n.D)(Promise.resolve(n)):(0,ut.of)(n)}const um={exact:function Hu(n,e,t){if(!pa(n.segments,e.segments)||!ol(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Hu(n.children[r],e.children[r],t))return!1;return!0},subset:fa},$u={exact:function hm(n,e){return ii(n,e)},subset:function ac(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lm(n[t],e[t]))},ignored:()=>!0};function dm(n,e,t){return um[t.paths](n.root,e.root,t.matrixParams)&&$u[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function fa(n,e,t){return io(n,e,e.segments,t)}function io(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!pa(i,t)||e.hasChildren()||!ol(i,t,r))}if(n.segments.length===t.length){if(!pa(n.segments,t)||!ol(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!fa(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(pa(n.segments,i)&&ol(n.segments,i,r)&&n.children[Tt])&&io(n.children[Tt],e,o,r)}}function ol(n,e,t){return e.every((r,i)=>$u[t](n[i].parameters,r.parameters))}class Fo{constructor(e=new Gt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=No(this.queryParams)),this._queryParamMap}toString(){return gb.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rf(this)}}class zu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=No(this.parameters)),this._parameterMap}toString(){return si(this)}}function pa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Gu=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return new fm},providedIn:"root"})}return n})();class fm{parse(e){const t=new uc(e);return new Fo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Zi(e.root,!0)}`,r=function e0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${qu(t)}=${qu(i)}`).join("&"):`${qu(t)}=${qu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Kn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const gb=new fm;function rf(n){return n.segments.map(e=>si(e)).join("/")}function Zi(n,e){if(!n.hasChildren())return rf(n);if(e){const t=n.children[Tt]?Zi(n.children[Tt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Tt&&r.push(`${i}:${Zi(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function pb(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Tt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Tt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Tt?[Zi(n.children[Tt],!1)]:[`${i}:${Zi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${rf(n)}/${t[0]}`:`${rf(n)}/(${t.join("//")})`}}function Zu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qu(n){return Zu(n).replace(/%3B/gi,";")}function sf(n){return Zu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function so(n){return decodeURIComponent(n)}function pm(n){return so(n.replace(/\+/g,"%20"))}function si(n){return`${sf(n.path)}${function cc(n){return Object.keys(n).map(e=>`;${sf(e)}=${sf(n[e])}`).join("")}(n.parameters)}`}const lc=/^[^\/()?;#]+/;function Lo(n){const e=n.match(lc);return e?e[0]:""}const Wu=/^[^\/()?;=#]+/,gm=/^[^=?&#]+/,Oi=/^[^&#]+/;class uc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new Gt(e,t)),r}parseSegment(){const e=Lo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,!1);return this.capture(e),new zu(so(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function t0(n){const e=n.match(Wu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Lo(this.remaining);i&&(r=i,this.capture(r))}e[so(t)]=so(r)}parseQueryParam(e){const t=function mb(n){const e=n.match(gm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function af(n){const e=n.match(Oi);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=pm(t),o=pm(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lo(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new c.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Tt);const u=this.parseChildren();t[o]=1===Object.keys(u).length?u[Tt]:new Gt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,!1)}}function n0(n){return n.segments.length>0?new Gt([],{[Tt]:n}):n}function Ku(n){const e={};for(const r of Object.keys(n.children)){const o=Ku(n.children[r]);if(r===Tt&&0===o.segments.length&&o.hasChildren())for(const[u,f]of Object.entries(o.children))e[u]=f;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function r0(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}function ga(n){return n instanceof Fo}function m(n){let e;const i=n0(function t(o){const u={};for(const g of o.children){const y=t(g);u[g.outlet]=y}const f=new Gt(o.url,u);return o===n&&(e=f),f}(n.root));return e??i}function _(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return A(i,i,i,t,r);const o=function Le(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oe(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,u)=>{if("object"==typeof o&&null!=o){if(o.outlets){const f={};return Object.entries(o.outlets).forEach(([g,y])=>{f[g]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===u?(o.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,o]},[]);return new oe(t,e,r)}(e);if(o.toRoot())return A(i,i,new Gt([],{}),t,r);const u=function nt(n,e,t){if(n.isAbsolute)return new He(e,!0,0);if(!t)return new He(e,!1,NaN);if(null===t.parent)return new He(t,!0,0);const r=I(n.commands[0])?0:1;return function kt(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new c.vHH(4005,!1);i=r.segments.length}return new He(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),f=u.processChildren?oo(u.segmentGroup,u.index,o.commands):qi(u.segmentGroup,u.index,o.commands);return A(i,u.segmentGroup,f,t,r)}function I(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function D(n){return"object"==typeof n&&null!=n&&n.outlets}function A(n,e,t,r,i){let u,o={};r&&Object.entries(r).forEach(([g,y])=>{o[g]=Array.isArray(y)?y.map(b=>`${b}`):`${y}`}),u=n===e?t:W(n,e,t);const f=n0(Ku(u));return new Fo(f,o,i)}function W(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:W(o,e,t)}),new Gt(n.segments,r)}class oe{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&I(r[0]))throw new c.vHH(4003,!1);const i=r.find(D);if(i&&i!==lr(r))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class He{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function qi(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return oo(n,e,t);const r=function mm(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const u=n.segments[i],f=t[r];if(D(f))break;const g=`${f}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!Yu(g,y,u))return o;r+=2}else{if(!Yu(g,{},u))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Gt(n.segments.slice(0,r.pathIndex),{});return o.children[Tt]=new Gt(n.segments.slice(r.pathIndex),n.children),oo(o,0,i)}return r.match&&0===i.length?new Gt(n.segments,{}):r.match&&!n.hasChildren()?al(n,e,t):r.match?oo(n,0,i):al(n,e,t)}function oo(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const r=function Ur(n){return D(n[0])?n[0].outlets:{[Tt]:n}}(t),i={};if(Object.keys(r).some(o=>o!==Tt)&&n.children[Tt]&&1===n.numberOfChildren&&0===n.children[Tt].segments.length){const o=oo(n.children[Tt],e,t);return new Gt(n.segments,o.children)}return Object.entries(r).forEach(([o,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(i[o]=qi(n.children[o],e,u))}),Object.entries(n.children).forEach(([o,u])=>{void 0===r[o]&&(i[o]=u)}),new Gt(n.segments,i)}}function al(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(D(o)){const g=ma(o.outlets);return new Gt(r,g)}if(0===i&&I(t[0])){r.push(new zu(n.segments[e].path,_a(t[0]))),i++;continue}const u=D(o)?o.outlets[Tt]:`${o}`,f=i<t.length-1?t[i+1]:null;u&&f&&I(f)?(r.push(new zu(u,_a(f))),i+=2):(r.push(new zu(u,{})),i++)}return new Gt(r,{})}function ma(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=al(new Gt([],{}),0,r))}),e}function _a(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Yu(n,e,t){return n==t.path&&ii(e,t.parameters)}const cl="imperative";class Wi{constructor(e,t){this.id=e,this.url=t}}class dc extends Wi{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ds extends Wi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ll extends Wi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Uo extends Wi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Qu extends Wi{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cf extends Wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _b extends Wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dP extends Wi{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yb extends Wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EF extends Wi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vb{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class MF{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hP{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fP{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TF{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pP{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lf{}class Cb{constructor(e){this.url=e}}class DF{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new _m,this.attachRef=null}}let _m=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new DF,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class gP{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=o0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=o0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ju(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ju(e,this._root).map(t=>t.value)}}function o0(n,e){if(n===e.value)return e;for(const t of e.children){const r=o0(n,t);if(r)return r}return null}function Ju(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ju(n,t);if(r.length)return r.unshift(e),r}return[]}class Ss{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ul(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class a0 extends gP{constructor(e,t){super(e),this.snapshot=t,u0(this,e)}toString(){return this.snapshot.toString()}}function c0(n,e){const t=function Xu(n,e){const u=new dl([],{},{},"",{},Tt,e,null,{});return new uf("",new Ss(u,[]))}(0,e),r=new ar.X([new zu("",{})]),i=new ar.X({}),o=new ar.X({}),u=new ar.X({}),f=new ar.X(""),g=new ya(r,i,u,f,o,Tt,e,t.root);return g.snapshot=t.root,new a0(new Ss(g,[]),t)}class ya{constructor(e,t,r,i,o,u,f,g){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=u,this.component=f,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,yt.U)(y=>y[ko]))??(0,ut.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>No(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>No(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function l0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function ym(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class dl{get title(){return this.data?.[ko]}constructor(e,t,r,i,o,u,f,g,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=f,this.routeConfig=g,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=No(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=No(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uf extends gP{constructor(e,t){super(t),this.url=e,u0(this,t)}toString(){return wb(this._root)}}function u0(n,e){e.value._routerState=n,e.children.forEach(t=>u0(n,t))}function wb(n){const e=n.children.length>0?` { ${n.children.map(wb).join(", ")} } `:"";return`${n.value}${e}`}function d0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ii(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ii(e.params,t.params)||n.paramsSubject.next(t.params),function cm(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ii(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ii(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function vm(n,e){const t=ii(n.params,e.params)&&function Xv(n,e){return pa(n,e)&&n.every((t,r)=>ii(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||vm(n.parent,e.parent))}let df=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(_m),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb),this.inputBinder=(0,c.f3M)(Cm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,!1);this._activatedRoute=t;const i=this.location,u=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new mP(t,f,i.injector);this.activated=i.createComponent(u,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]})}return n})();class mP{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ya?this.route:e===_m?this.childContexts:this.parent.get(e,t)}}const Cm=new c.OlP("");let Ib=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=nc([r.queryParams,r.params,r.data]).pipe((0,Tn.w)(([o,u,f],g)=>(f={...o,...u,...f},0===g?(0,ut.of)(f):Promise.resolve(f)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const u=(0,c.qFp)(r.component);if(u)for(const{templateName:f}of u.inputs)t.activatedComponentRef.setInput(f,o[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function hf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function _P(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return hf(n,r,i);return hf(n,r)})}(n,e,t);return new Ss(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const u=o.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(f=>hf(n,f)),u}}const r=function Ki(n){return new ya(new ar.X(n.url),new ar.X(n.params),new ar.X(n.queryParams),new ar.X(n.fragment),new ar.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>hf(n,o));return new Ss(r,i)}}const ff="ngNavigationCancelingError";function h0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ga(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wm(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function wm(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ff]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ed(n){return n&&n[ff]}let f0=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(r,i){1&r&&c._UZ(0,"router-outlet")},dependencies:[df],encapsulation:2})}return n})();function pf(n){const e=n.children&&n.children.map(pf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=f0),t}function as(n){return n.outlet||Tt}function va(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Mb{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),d0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ul(t);e.children.forEach(o=>{const u=o.value.outlet;this.deactivateRoutes(o,i[u],r),delete i[u]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ul(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);if(r&&r.outlet){const u=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ul(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=ul(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new TF(o.value.snapshot))}),e.children.length&&this.forwardEvent(new fP(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(d0(i),i===o)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),d0(f.route.value),this.activateChildRoutes(e,null,u.children)}else{const f=va(i.snapshot);u.attachRef=null,u.route=i,u.injector=f,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class p0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gf{constructor(e,t){this.component=e,this.route=t}}function td(n,e,t){const r=n._root;return fl(r,e?e._root:null,t,[r.value])}function hl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function fl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ul(e);return n.children.forEach(u=>{(function bm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){const g=function TP(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!pa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!pa(n.url,e.url)||!ii(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vm(n,e)||!ii(n.queryParams,e.queryParams);default:return!vm(n,e)}}(u,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new p0(r)):(o.data=u.data,o._resolvedData=u._resolvedData),fl(n,e,o.component?f?f.children:null:t,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new gf(f.outlet.component,u))}else u&&mf(e,f,i),i.canActivateChecks.push(new p0(r)),fl(n,null,o.component?f?f.children:null:t,r,i)})(u,o[u.value.outlet],t,r.concat([u.value]),i),delete o[u.value.outlet]}),Object.entries(o).forEach(([u,f])=>mf(f,t.getContext(u),i)),i}function mf(n,e,t){const r=ul(n),i=n.value;Object.entries(r).forEach(([o,u])=>{mf(u,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new gf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function _f(n){return"function"==typeof n}function Sb(n){return n instanceof ro||"EmptyError"===n?.name}const nd=Symbol("INITIAL_VALUE");function pl(){return(0,Tn.w)(n=>nc(n.map(e=>e.pipe(zt(1),ic(nd)))).pipe((0,yt.U)(e=>{for(const t of e)if(!0!==t){if(t===nd)return nd;if(!1===t||t instanceof Fo)return t}return!0}),vr(e=>e!==nd),zt(1)))}function m0(n){return(0,nl.z)(Dn(e=>{if(ga(e))throw h0(0,e)}),(0,yt.U)(e=>!0===e))}class yf{constructor(e){this.segmentGroup=e||null}}class vf{constructor(e){this.urlTree=e}}function Bo(n){return ua(new yf(n))}function y0(n){return ua(new vf(n))}class kb{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new c.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,ut.of)(r);if(i.numberOfChildren>1||!i.children[Tt])return ua(new c.vHH(4e3,!1));i=i.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Fo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const f=o.substring(1);r[i]=t[f]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let u={};return Object.entries(t.children).forEach(([f,g])=>{u[f]=this.createSegmentGroup(e,g,r,i)}),new Gt(o,u)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new c.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Cf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wf(n,e,t,r,i){const o=C0(n,e,t);return o.matched?(r=function Eb(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function _0(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,ut.of)(!0);const o=i.map(u=>{const f=hl(u,n);return Ro(function g0(n){return n&&_f(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,ut.of)(o).pipe(pl(),m0())}(r,e,t).pipe((0,yt.U)(u=>!0===u?o:{...Cf}))):(0,ut.of)(o)}function C0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Cf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||am)(t,n,e);if(!i)return{...Cf};const o={};Object.entries(i.posParams??{}).forEach(([f,g])=>{o[f]=g.path});const u=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function w0(n,e,t,r){return t.length>0&&function RP(n,e,t){return t.some(r=>If(n,e,r)&&as(r)!==Tt)}(n,t,r)?{segmentGroup:new Gt(e,NP(r,new Gt(t,n.children))),slicedSegments:[]}:0===t.length&&function Nb(n,e,t){return t.some(r=>If(n,e,r))}(n,t,r)?{segmentGroup:new Gt(n.segments,kP(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Gt(n.segments,n.children),slicedSegments:t}}function kP(n,e,t,r,i){const o={};for(const u of r)if(If(n,t,u)&&!i[as(u)]){const f=new Gt([],{});o[as(u)]=f}return{...i,...o}}function NP(n,e){const t={};t[Tt]=e;for(const r of n)if(""===r.path&&as(r)!==Tt){const i=new Gt([],{});t[as(r)]=i}return t}function If(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class FP{constructor(e,t,r,i,o,u,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=u,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new kb(this.urlSerializer,this.urlTree)}noMatchError(e){return new c.vHH(4002,!1)}recognize(){const e=w0(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe(Ts(t=>{if(t instanceof vf)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof yf?this.noMatchError(t):t}),(0,yt.U)(t=>{const r=new dl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,{}),i=new Ss(r,t),o=new uf("",i),u=function w(n,e,t=null,r=null){return _(m(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(o._root),{state:o,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Tt).pipe(Ts(r=>{throw r instanceof yf?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=l0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,_n.D)(i).pipe(Oo(o=>{const u=r.children[o],f=function EP(n,e){const t=n.filter(r=>as(r)===e);return t.push(...n.filter(r=>as(r)!==e)),t}(t,o);return this.processSegmentGroup(e,f,u,o)}),da((o,u)=>(o.push(...u),o)),il(null),function om(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vr((i,o)=>n(i,o,r)):ca.y,sc(1),t?il(e):sl(()=>new ro))}(),(0,yi.z)(o=>{if(null===o)return Bo(r);const u=Rb(o);return function LP(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),(0,ut.of)(u)}))}processSegment(e,t,r,i,o,u){return(0,_n.D)(t).pipe(Oo(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,o,u).pipe(Ts(g=>{if(g instanceof yf)return(0,ut.of)(null);throw g}))),cr(f=>!!f),Ts(f=>{if(Sb(f))return function I0(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?(0,ut.of)([]):Bo(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,o,u,f){return function Dm(n,e,t,r){return!!(as(n)===r||r!==Tt&&If(e,t,n))&&("**"===n.path||C0(e,n,t).matched)}(r,i,o,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,u,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,u):Bo(i):Bo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?y0(o):this.applyRedirects.lineralizeSegments(r,o).pipe((0,yi.z)(u=>{const f=new Gt(u,{});return this.processSegment(e,t,f,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){const{matched:f,consumedSegments:g,remainingSegments:y,positionalParamSegments:b}=C0(t,i,o);if(!f)return Bo(t);const M=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,b);return i.redirectTo.startsWith("/")?y0(M):this.applyRedirects.lineralizeSegments(i,M).pipe((0,yi.z)(S=>this.processSegment(e,r,t,S.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,u){let f;if("**"===r.path){const g=i.length>0?lr(i).parameters:{},y=new dl(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Lb(r),as(r),r.component??r._loadedComponent??null,r,ml(r));f=(0,ut.of)({snapshot:y,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=wf(t,r,i,e).pipe((0,yt.U)(({matched:g,consumedSegments:y,remainingSegments:b,parameters:M})=>g?{snapshot:new dl(y,M,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Lb(r),as(r),r.component??r._loadedComponent??null,r,ml(r)),consumedSegments:y,remainingSegments:b}:null));return f.pipe((0,Tn.w)(g=>null===g?Bo(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Tn.w)(({routes:y})=>{const b=r._loadedInjector??e,{snapshot:M,consumedSegments:S,remainingSegments:R}=g,{segmentGroup:Z,slicedSegments:Q}=w0(t,S,R,y);if(0===Q.length&&Z.hasChildren())return this.processChildren(b,y,Z).pipe((0,yt.U)(Se=>null===Se?null:[new Ss(M,Se)]));if(0===y.length&&0===Q.length)return(0,ut.of)([new Ss(M,[])]);const X=as(r)===o;return this.processSegment(b,y,Z,Q,X?Tt:o,!0).pipe((0,yt.U)(Se=>[new Ss(M,Se)]))}))))}getChildConfig(e,t,r){return t.children?(0,ut.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,ut.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function Ob(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,ut.of)(!0);const o=i.map(u=>{const f=hl(u,n);return Ro(function SP(n){return n&&_f(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,ut.of)(o).pipe(pl(),m0())}(e,t,r).pipe((0,yi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(Dn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function Tm(n){return ua(wm(!1,3))}())):(0,ut.of)({routes:[],injector:e})}}function OF(n){const e=n.value.routeConfig;return e&&""===e.path}function Rb(n){const e=[],t=new Set;for(const r of n){if(!OF(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Rb(r.children);e.push(new Ss(r.value,i))}return e.filter(r=>!t.has(r))}function Lb(n){return n.data||{}}function ml(n){return n.resolve||{}}function $b(n){return"string"==typeof n.title||null===n.title}function E0(n){return(0,Tn.w)(e=>{const t=n(e);return t?(0,_n.D)(t).pipe((0,yt.U)(()=>e)):(0,ut.of)(e)})}const id=new c.OlP("ROUTES");let M0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,c.f3M)(c.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,ut.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ro(t.loadComponent()).pipe((0,yt.U)(sd),Dn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),oc(()=>{this.componentLoaders.delete(t)})),i=new Bu(r,()=>new Ai.x).pipe(ef());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,ut.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function UP(n,e,t,r){return Ro(n.loadChildren()).pipe((0,yt.U)(sd),(0,yi.z)(i=>i instanceof c.YKP||Array.isArray(i)?(0,ut.of)(i):(0,_n.D)(e.compileModuleAsync(i))),(0,yt.U)(i=>{r&&r(n);let o,u,f=!1;return Array.isArray(i)?(u=i,!0):(o=i.create(t).injector,u=o.get(id,[],{optional:!0,self:!0}).flat()),{routes:u.map(pf),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(oc(()=>{this.childrenLoaders.delete(r)})),u=new Bu(o,()=>new Ai.x).pipe(ef());return this.childrenLoaders.set(r,u),u}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sd(n){return function hc(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Pm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ai.x,this.transitionAbortSubject=new Ai.x,this.configLoader=(0,c.f3M)(M0),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(Gu),this.rootContexts=(0,c.f3M)(_m),this.inputBindingEnabled=null!==(0,c.f3M)(Cm,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ut.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new MF(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new vb(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new ar.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:cl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vr(o=>0!==o.id),(0,yt.U)(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),(0,Tn.w)(o=>{this.currentTransition=o;let u=!1,f=!1;return(0,ut.of)(o).pipe(Dn(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Tn.w)(g=>{const y=g.currentBrowserUrl.toString(),b=!t.navigated||g.extractedUrl.toString()!==y||y!==g.currentUrlTree.toString();if(!b&&"reload"!==(g.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new Uo(g.id,this.urlSerializer.serialize(g.rawUrl),S,0)),g.resolve(null),Ao.E}if(t.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return(0,ut.of)(g).pipe((0,Tn.w)(S=>{const R=this.transitions?.getValue();return this.events.next(new dc(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),R!==this.transitions?.getValue()?Ao.E:Promise.resolve(S)}),function Sm(n,e,t,r,i,o){return(0,yi.z)(u=>function rd(n,e,t,r,i,o,u="emptyOnly"){return new FP(n,e,t,r,i,u,o).recognize()}(n,e,t,r,u.extractedUrl,i,o).pipe((0,yt.U)(({state:f,tree:g})=>({...u,targetSnapshot:f,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Dn(S=>{o.targetSnapshot=S.targetSnapshot,o.urlAfterRedirects=S.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects};const R=new cf(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(R)}));if(b&&t.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:S,extractedUrl:R,source:Z,restoredState:Q,extras:X}=g,Se=new dc(S,this.urlSerializer.serialize(R),Z,Q);this.events.next(Se);const ze=c0(0,this.rootComponentType).snapshot;return this.currentTransition=o={...g,targetSnapshot:ze,urlAfterRedirects:R,extras:{...X,skipLocationChange:!1,replaceUrl:!1}},(0,ut.of)(o)}{const S="";return this.events.next(new Uo(g.id,this.urlSerializer.serialize(g.extractedUrl),S,1)),g.resolve(null),Ao.E}}),Dn(g=>{const y=new _b(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}),(0,yt.U)(g=>(this.currentTransition=o={...g,guards:td(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},o)),function gl(n,e){return(0,yi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:u}}=t;return 0===u.length&&0===o.length?(0,ut.of)({...t,guardsResult:!0}):function Pb(n,e,t,r){return(0,_n.D)(n).pipe((0,yi.z)(i=>function Ab(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,ut.of)(!0);const u=o.map(f=>{const g=va(e)??i,y=hl(f,g);return Ro(function Em(n){return n&&_f(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):g.runInContext(()=>y(n,e,t,r))).pipe(cr())});return(0,ut.of)(u).pipe(pl())}(i.component,i.route,t,e,r)),cr(i=>!0!==i,!0))}(u,r,i,n).pipe((0,yi.z)(f=>f&&function DP(n){return"boolean"==typeof n}(f)?function xb(n,e,t,r){return(0,_n.D)(e).pipe(Oo(i=>la(function AF(n,e){return null!==n&&e&&e(new hP(n)),(0,ut.of)(!0)}(i.route.parent,r),function AP(n,e){return null!==n&&e&&e(new s0(n)),(0,ut.of)(!0)}(i.route,r),function OP(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(u=>function Im(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>Xh(()=>{const f=u.guards.map(g=>{const y=va(u.node)??t,b=hl(g,y);return Ro(function Tb(n){return n&&_f(n.canActivateChild)}(b)?b.canActivateChild(r,n):y.runInContext(()=>b(r,n))).pipe(cr())});return(0,ut.of)(f).pipe(pl())}));return(0,ut.of)(o).pipe(pl())}(n,i.path,t),function Mm(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ut.of)(!0);const i=r.map(o=>Xh(()=>{const u=va(e)??t,f=hl(o,u);return Ro(function PP(n){return n&&_f(n.canActivate)}(f)?f.canActivate(e,n):u.runInContext(()=>f(e,n))).pipe(cr())}));return(0,ut.of)(i).pipe(pl())}(n,i.route,t))),cr(i=>!0!==i,!0))}(r,o,n,e):(0,ut.of)(f)),(0,yt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,g=>this.events.next(g)),Dn(g=>{if(o.guardsResult=g.guardsResult,ga(g.guardsResult))throw h0(0,g.guardsResult);const y=new dP(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(y)}),vr(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",3),!1)),E0(g=>{if(g.guards.canActivateChecks.length)return(0,ut.of)(g).pipe(Dn(y=>{const b=new yb(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(b)}),(0,Tn.w)(y=>{let b=!1;return(0,ut.of)(y).pipe(function b0(n,e){return(0,yi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,ut.of)(t);let o=0;return(0,_n.D)(i).pipe(Oo(u=>function Ub(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!$b(i)&&(o[ko]=i.title),function Bb(n,e,t,r){const i=function Vb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,ut.of)({});const o={};return(0,_n.D)(i).pipe((0,yi.z)(u=>function jb(n,e,t,r){const i=va(e)??r,o=hl(n,i);return Ro(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[u],e,t,r).pipe(cr(),Dn(f=>{o[u]=f}))),sc(1),function tf(n){return(0,yt.U)(()=>n)}(o),Ts(u=>Sb(u)?Ao.E:ua(u)))}(o,n,e,r).pipe((0,yt.U)(u=>(n._resolvedData=u,n.data=l0(n,t).resolve,i&&$b(i)&&(n.data[ko]=i.title),null)))}(u.route,r,n,e)),Dn(()=>o++),sc(1),(0,yi.z)(u=>o===i.length?(0,ut.of)(t):Ao.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),Dn({next:()=>b=!0,complete:()=>{b||this.cancelNavigationTransition(y,"",2)}}))}),Dn(y=>{const b=new EF(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(b)}))}),E0(g=>{const y=b=>{const M=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&M.push(this.configLoader.loadComponent(b.routeConfig).pipe(Dn(S=>{b.component=S}),(0,yt.U)(()=>{})));for(const S of b.children)M.push(...y(S));return M};return nc(y(g.targetSnapshot.root)).pipe(il(),zt(1))}),E0(()=>this.afterPreactivation()),(0,yt.U)(g=>{const y=function bb(n,e,t){const r=hf(n,e._root,t?t._root:void 0);return new a0(r,e)}(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=o={...g,targetRouterState:y},o}),Dn(()=>{this.events.next(new lf)}),((n,e,t,r)=>(0,yt.U)(i=>(new Mb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),zt(1),Dn({next:g=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ds(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),t.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{u=!0}}),function ju(n){return(0,_i.e)((e,t)=>{(0,Uu.Xf)(n).subscribe((0,mi.x)(t,()=>t.complete(),nf.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Dn(g=>{throw g}))),oc(()=>{u||f||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Ts(g=>{if(f=!0,ed(g))this.events.next(new ll(o.id,this.urlSerializer.serialize(o.extractedUrl),g.message,g.cancellationCode)),function vi(n){return ed(n)&&ga(n.url)}(g)?this.events.next(new Cb(g.url)):o.resolve(!1);else{this.events.next(new Qu(o.id,this.urlSerializer.serialize(o.extractedUrl),g,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(g))}catch(y){o.reject(y)}}return Ao.E}))}))}cancelNavigationTransition(t,r,i){const o=new ll(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BP(n){return n!==cl}let VP=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[ko]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(kF)},providedIn:"root"})}return n})(),kF=(()=>{class n extends VP{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(ve))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Hb)},providedIn:"root"})}return n})();class RF{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Hb=(()=>{class n extends RF{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}();static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xm=new c.OlP("",{providedIn:"root",factory:()=>({})});let jP=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)($P)},providedIn:"root"})}return n})(),$P=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bf=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(bf||{});function Am(n,e){n.events.pipe(vr(t=>t instanceof Ds||t instanceof ll||t instanceof Qu||t instanceof Uo),(0,yt.U)(t=>t instanceof Ds||t instanceof Uo?bf.COMPLETE:t instanceof ll&&(0===t.code||1===t.code)?bf.REDIRECTING:bf.FAILED),vr(t=>t!==bf.REDIRECTING),zt(1)).subscribe(()=>{e()})}function Ca(n){throw n}function Ef(n,e,t){return e.parse("/")}const zb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fn=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this._events=new Ai.x,this.options=(0,c.f3M)(xm,{optional:!0})||{},this.pendingTasks=(0,c.f3M)(c.HDt),this.errorHandler=this.options.errorHandler||Ca,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ef,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(jP),this.routeReuseStrategy=(0,c.f3M)(NF),this.titleStrategy=(0,c.f3M)(VP),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,c.f3M)(id,{optional:!0})?.flat()??[],this.navigationTransitions=(0,c.f3M)(Pm),this.urlSerializer=(0,c.f3M)(Gu),this.location=(0,c.f3M)(Te),this.componentInputBindingEnabled=!!(0,c.f3M)(Cm,{optional:!0}),this.eventsSubscription=new rl.w0,this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Fo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=c0(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(HP(r)&&this._events.next(r));if(r instanceof dc)BP(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Uo)this.rawUrlTree=i.rawUrl;else if(r instanceof cf){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof lf)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof ll)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof Cb){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||BP(i.source)};this.scheduleNavigation(o,cl,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Qu&&this.restoreHistory(i,!0),r instanceof Ds&&(this.navigated=!0),HP(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),cl,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},u=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,u,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(pf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:u,queryParamsHandling:f,preserveFragment:g}=r,y=g?this.currentUrlTree.fragment:u;let M,b=null;switch(f){case"merge":b={...this.currentUrlTree.queryParams,...o};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=o||null}null!==b&&(b=this.removeEmptyProps(b));try{M=m(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),M=this.currentUrlTree.root}return _(M,t,b,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ga(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,cl,null,r)}navigate(t,r={skipLocationChange:!1}){return function FF(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new c.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...zb}:!1===r?{...Gb}:r,ga(t))return dm(this.currentUrlTree,t,i);const o=this.parseUrl(t);return dm(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,u){if(this.disposed)return Promise.resolve(!1);let f,g,y;u?(f=u.resolve,g=u.reject,y=u.promise):y=new Promise((M,S)=>{f=M,g=S});const b=this.pendingTasks.add();return Am(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:f,reject:g,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(M=>Promise.reject(M))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",u)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HP(n){return!(n instanceof lf||n instanceof Cb)}let od=(()=>{class n{constructor(t,r,i,o,u,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=u,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new Ai.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const g=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof Ds&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,u){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,c.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(fn),c.Y36(ya),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(Oe))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&c.NdJ("click",function(u){return i.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&r&&c.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",c.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",c.VuI],replaceUrl:["replaceUrl","replaceUrl",c.VuI],routerLink:"routerLink"},standalone:!0,features:[c.Xq5,c.TTD]})}return n})(),Mf=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,u){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=u,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof Ds&&this.update()})}ngAfterContentInit(){(0,ut.of)(this.links.changes,(0,ut.of)(null)).pipe((0,tl.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,_n.D)(t).pipe((0,tl.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function T0(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(fn),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(od,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&c.Suo(o,od,5),2&r){let u;c.iGM(u=c.CRH())&&(i.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[c.TTD]})}return n})();class zP{}let ZP=(()=>{class n{constructor(t,r,i,o,u){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(vr(t=>t instanceof Ds),Oo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,c.MMx)(o.providers,t,`Route: ${o.path}`));const u=o._injector??t,f=o._loadedInjector??u;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(u,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(f,o.children??o._loadedRoutes))}return(0,_n.D)(i).pipe((0,tl.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,ut.of)(null);const o=i.pipe((0,yi.z)(u=>null===u?(0,ut.of)(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,_n.D)([o,u]).pipe((0,tl.J)())}return o})}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(fn),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(zP),c.LFG(M0))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const D0=new c.OlP("");let Zb=(()=>{class n{constructor(t,r,i,o,u={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof dc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ds?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Uo&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){c.$Z()};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function Ps(n,e){return{\u0275kind:n,\u0275providers:e}}function Wb(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(fn),i=n.get(Kb);1===n.get(Df)&&r.initialNavigation(),n.get(Qb,null,c.XFs.Optional)?.setUpPreloading(),n.get(D0,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Kb=new c.OlP("",{factory:()=>new Ai.x}),Df=new c.OlP("",{providedIn:"root",factory:()=>1}),Qb=new c.OlP("");function KP(n){return Ps(0,[{provide:Qb,useExisting:ZP},{provide:zP,useExisting:n}])}const ad=new c.OlP("ROUTER_FORROOT_GUARD"),Jb=[Te,{provide:Gu,useClass:fm},fn,_m,{provide:ya,useFactory:function S0(n){return n.routerState.root},deps:[fn]},M0,[]];function Xb(){return new c.PXZ("Router",fn)}let Om=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Jb,[],{provide:id,multi:!0,useValue:t},{provide:ad,useFactory:tE,deps:[[fn,new c.FiY,new c.tp0]]},{provide:xm,useValue:r||{}},r?.useHash?{provide:Oe,useClass:Ce}:{provide:Oe,useClass:Je},{provide:D0,useFactory:()=>{const n=(0,c.f3M)(Jr),e=(0,c.f3M)(c.R0b),t=(0,c.f3M)(xm),r=(0,c.f3M)(Pm),i=(0,c.f3M)(Gu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Zb(i,r,n,e,t)}},r?.preloadingStrategy?KP(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:Xb},r?.initialNavigation?km(r):[],r?.bindToComponentInputs?Ps(8,[Ib,{provide:Cm,useExisting:Ib}]).\u0275providers:[],[{provide:JP,useFactory:Wb},{provide:c.tb,multi:!0,useExisting:JP}]]}}static forChild(t){return{ngModule:n,providers:[{provide:id,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(ad,8))};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();function tE(n){return"guarded"}function km(n){return["disabled"===n.initialNavigation?Ps(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(fn);return()=>{e.setUpLocationChangeListener()}}},{provide:Df,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ps(2,[{provide:Df,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(Fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(fn),o=e.get(Kb);Am(i,()=>{r(!0)}),e.get(Pm).afterPreactivation=()=>(r(!0),o.closed?(0,ut.of)(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const JP=new c.OlP("");var N=L(5861),Nm=L(305);function Zt(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const o=new Nm.Hp({next:u=>{r(u),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new ro)}});n.subscribe(o)})}class A0 extends rl.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const _l={setInterval(n,e,...t){const{delegate:r}=_l;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=_l;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Vo=L(9039);class Pf extends A0{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return _l.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&_l.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Vo.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const xf={now:()=>(xf.delegate||Date).now(),delegate:void 0};class Af{constructor(e,t=Af.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Af.now=xf.now;class rE extends Af{constructor(e,t=Af.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const O0=new rE(Pf);var Sn=L(7592);(0,Sn.registerVersion)("firebase","9.23.0","app");var Cr=L(4537),ki=L(7879),z=L(9058),iE=L(1878);class k0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function $F(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const sE="@firebase/app",yl=new ki.Yd("@firebase/app"),Um="[DEFAULT]",ZF={[sE]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vl=new Map,Cl=new Map;function $0(n,e){try{n.container.addComponent(e)}catch(t){yl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Yi(n){const e=n.name;if(Cl.has(e))return yl.debug(`There were multiple attempts to register component ${e}.`),!1;Cl.set(e,n);for(const t of vl.values())$0(t,n);return!0}function wl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const wa=new z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class uE{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cr.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wa.create("app-deleted",{appName:this._name})}}function dE(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Um,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw wa.create("bad-app-name",{appName:String(i)});if(t||(t=(0,z.aH)()),!t)throw wa.create("no-options");const o=vl.get(i);if(o){if((0,z.vZ)(t,o.options)&&(0,z.vZ)(r,o.config))return o;throw wa.create("duplicate-app",{appName:i})}const u=new Cr.H0(i);for(const g of Cl.values())u.addComponent(g);const f=new uE(t,r,u);return vl.set(i,f),f}function Rf(n=Um){const e=vl.get(n);if(!e&&n===Um&&(0,z.aH)())return dE();if(!e)throw wa.create("no-app",{appName:n});return e}function Ni(n,e,t){var r;let i=null!==(r=ZF[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${i}" with version "${e}":`];return o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void yl.warn(f.join(" "))}Yi(new Cr.wA(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const ux="firebase-heartbeat-database",dx=1,dd="firebase-heartbeat-store";let Bm=null;function Vm(){return Bm||(Bm=(0,iE.X3)(ux,dx,{upgrade:(n,e)=>{0===e&&n.createObjectStore(dd)}}).catch(n=>{throw wa.create("idb-open",{originalErrorMessage:n.message})})),Bm}function Lf(){return(Lf=(0,N.Z)(function*(n){try{return yield(yield Vm()).transaction(dd).objectStore(dd).get(hE(n))}catch(e){if(e instanceof z.ZR)yl.warn(e.message);else{const t=wa.create("idb-get",{originalErrorMessage:e?.message});yl.warn(t.message)}}})).apply(this,arguments)}function z0(n,e){return G0.apply(this,arguments)}function G0(){return(G0=(0,N.Z)(function*(n,e){try{const r=(yield Vm()).transaction(dd,"readwrite");yield r.objectStore(dd).put(e,hE(n)),yield r.done}catch(t){if(t instanceof z.ZR)yl.warn(t.message);else{const r=wa.create("idb-set",{originalErrorMessage:t?.message});yl.warn(r.message)}}})).apply(this,arguments)}function hE(n){return`${n.name}!${n.options.appId}`}class pE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new JF(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,N.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gE();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(o=>o.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,N.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=gE(),{heartbeatsToSend:r,unsentEntries:i}=function fx(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(u=>u.agent===i.agent);if(o){if(o.dates.push(i.date),Z0(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Z0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=(0,z.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o})()}}function gE(){return(new Date).toISOString().substring(0,10)}class JF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,N.Z)(function*(){return!!(0,z.hl)()&&(0,z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,N.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function QF(n){return Lf.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,N.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return z0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,N.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return z0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function Z0(n){return(0,z.L)(JSON.stringify({version:2,heartbeats:n})).length}!function mE(n){Yi(new Cr.wA("platform-logger",e=>new k0(e),"PRIVATE")),Yi(new Cr.wA("heartbeat",e=>new pE(e),"PRIVATE")),Ni(sE,"0.9.20",n),Ni(sE,"0.9.20","esm2017"),Ni("fire-js","")}("");const ao=(n,e)=>e.some(t=>n instanceof t);let q0,px;const jm=new WeakMap,K0=new WeakMap,gx=new WeakMap,Y0=new WeakMap,Uf=new WeakMap;let Q0={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return K0.get(n);if("objectStoreNames"===e)return n.objectStoreNames||gx.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $o(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function mx(n){return"function"==typeof n?function Br(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fc(){return px||(px=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(J0(this),e),$o(jm.get(this))}:function(...e){return $o(n.apply(J0(this),e))}:function(e,...t){const r=n.call(J0(this),e,...t);return gx.set(r,e.sort?e.sort():[e]),$o(r)}}(n):(n instanceof IDBTransaction&&function _E(n){if(K0.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});K0.set(n,e)}(n),ao(n,function W0(){return q0||(q0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Q0):n)}function $o(n){if(n instanceof IDBRequest)return function jo(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t($o(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&jm.set(t,n)}).catch(()=>{}),Uf.set(e,n),e}(n);if(Y0.has(n))return Y0.get(n);const e=mx(n);return e!==n&&(Y0.set(n,e),Uf.set(e,n)),e}const J0=n=>Uf.get(n),vE=["get","getKey","getAll","getAllKeys","count"],CE=["put","add","delete","clear"],X0=new Map;function eC(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(X0.get(e))return X0.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=CE.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!vE.includes(t))return;const o=function(){var u=(0,N.Z)(function*(f,...g){const y=this.transaction(f,i?"readwrite":"readonly");let b=y.store;return r&&(b=b.index(g.shift())),(yield Promise.all([b[t](...g),i&&y.done]))[0]});return function(g){return u.apply(this,arguments)}}();return X0.set(e,o),o}!function XF(n){Q0=n(Q0)}(n=>({...n,get:(e,t,r)=>eC(e,t)||n.get(e,t,r),has:(e,t)=>!!eC(e,t)||n.has(e,t)}));const tC="@firebase/installations",nC="0.6.4",wE=1e4,IE=`w:${nC}`,rC="FIS_v2",hd="https://firebaseinstallations.googleapis.com/v1",Ia=36e5,Ho=new z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function iC(n){return n instanceof z.ZR&&n.code.includes("request-failed")}function Bf({projectId:n}){return`${hd}/projects/${n}/installations`}function pd(n){return{token:n.token,requestStatus:2,expiresIn:Cx(n.expiresIn),creationTime:Date.now()}}function gd(n,e){return $m.apply(this,arguments)}function $m(){return($m=(0,N.Z)(function*(n,e){const r=(yield e.json()).error;return Ho.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function sC({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function oC(n){return aC.apply(this,arguments)}function aC(){return(aC=(0,N.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function Cx(n){return Number(n.replace("s","000"))}function cC(){return(cC=(0,N.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Bf(n),i=sC(n),o=e.getImmediate({optional:!0});if(o){const y=yield o.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const f={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:rC,appId:n.appId,sdkVersion:IE})},g=yield oC(()=>fetch(r,f));if(g.ok){const y=yield g.json();return{fid:y.fid||t,registrationStatus:2,refreshToken:y.refreshToken,authToken:pd(y.authToken)}}throw yield gd("Create Installation",g)})).apply(this,arguments)}function wx(n){return new Promise(e=>{setTimeout(e,n)})}const ME=/^[cdef][\w-]{21}$/,Hm="";function nL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function zm(n){return function tL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return ME.test(t)?t:Hm}catch{return Hm}}function Vf(n){return`${n.appName}!${n.appId}`}const bl=new Map;function lC(n,e){const t=Vf(n);uC(t,e),function Dt(n,e){const t=function dC(){return!pc&&"BroadcastChannel"in self&&(pc=new BroadcastChannel("[Firebase] FID Change"),pc.onmessage=n=>{uC(n.data.key,n.data.fid)}),pc}();t&&t.postMessage({key:n,fid:e}),function El(){0===bl.size&&pc&&(pc.close(),pc=null)}()}(t,e)}function uC(n,e){const t=bl.get(n);if(t)for(const r of t)r(e)}let pc=null;const DE="firebase-installations-database",bx=1,zo="firebase-installations-store";let gc=null;function jf(){return gc||(gc=function _x(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const u=indexedDB.open(n,e),f=$o(u);return r&&u.addEventListener("upgradeneeded",g=>{r($o(u.result),g.oldVersion,g.newVersion,$o(u.transaction))}),t&&u.addEventListener("blocked",()=>t()),f.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}(DE,bx,{upgrade:(n,e)=>{0===e&&n.createObjectStore(zo)}})),gc}function mc(n,e){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,N.Z)(function*(n,e){const t=Vf(n),i=(yield jf()).transaction(zo,"readwrite"),o=i.objectStore(zo),u=yield o.get(t);return yield o.put(e,t),yield i.done,(!u||u.fid!==e.fid)&&lC(n,e.fid),e})).apply(this,arguments)}function $f(n){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,N.Z)(function*(n){const e=Vf(n),r=(yield jf()).transaction(zo,"readwrite");yield r.objectStore(zo).delete(e),yield r.done})).apply(this,arguments)}function Ml(n,e){return Zm.apply(this,arguments)}function Zm(){return(Zm=(0,N.Z)(function*(n,e){const t=Vf(n),i=(yield jf()).transaction(zo,"readwrite"),o=i.objectStore(zo),u=yield o.get(t),f=e(u);return void 0===f?yield o.delete(t):yield o.put(f,t),yield i.done,f&&(!u||u.fid!==f.fid)&&lC(n,f.fid),f})).apply(this,arguments)}function zf(n){return hC.apply(this,arguments)}function hC(){return hC=(0,N.Z)(function*(n){let e;const t=yield Ml(n.appConfig,r=>{const i=function Ex(n){return gC(n||{fid:nL(),registrationStatus:0})}(r),o=function Mx(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ho.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function SE(n,e){return fC.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Tx(n)}:{installationEntry:e}}(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===Hm?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),hC.apply(this,arguments)}function fC(){return fC=(0,N.Z)(function*(n,e){try{const t=yield function eL(n,e){return cC.apply(this,arguments)}(n,e);return mc(n.appConfig,t)}catch(t){throw iC(t)&&409===t.customData.serverCode?yield $f(n.appConfig):yield mc(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),fC.apply(this,arguments)}function Tx(n){return pC.apply(this,arguments)}function pC(){return(pC=(0,N.Z)(function*(n){let e=yield PE(n.appConfig);for(;1===e.registrationStatus;)yield wx(100),e=yield PE(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield zf(n);return r||t}return e})).apply(this,arguments)}function PE(n){return Ml(n,e=>{if(!e)throw Ho.create("installation-not-found");return gC(e)})}function gC(n){return function xE(n){return 1===n.registrationStatus&&n.registrationTime+wE<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function mC(){return(mC=(0,N.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function cs(n,{fid:e}){return`${Bf(n)}/${e}/authTokens:generate`}(n,t),i=function bE(n,{refreshToken:e}){const t=sC(n);return t.append("Authorization",function EE(n){return`${rC} ${n}`}(e)),t}(n,t),o=e.getImmediate({optional:!0});if(o){const y=yield o.getHeartbeatsHeader();y&&i.append("x-firebase-client",y)}const f={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:IE,appId:n.appId}})},g=yield oC(()=>fetch(r,f));if(g.ok)return pd(yield g.json());throw yield gd("Generate Auth Token",g)})).apply(this,arguments)}function _C(n){return yC.apply(this,arguments)}function yC(){return yC=(0,N.Z)(function*(n,e=!1){let t;const r=yield Ml(n.appConfig,o=>{if(!AE(o))throw Ho.create("not-registered");const u=o.authToken;if(!e&&function OE(n){return 2===n.requestStatus&&!function Px(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Ia}(n)}(u))return o;if(1===u.requestStatus)return t=function rL(n,e){return Gf.apply(this,arguments)}(n,e),o;{if(!navigator.onLine)throw Ho.create("app-offline");const f=function xx(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(o);return t=function Sx(n,e){return CC.apply(this,arguments)}(n,f),f}});return t?yield t:r.authToken}),yC.apply(this,arguments)}function Gf(){return(Gf=(0,N.Z)(function*(n,e){let t=yield vC(n.appConfig);for(;1===t.authToken.requestStatus;)yield wx(100),t=yield vC(n.appConfig);const r=t.authToken;return 0===r.requestStatus?_C(n,e):r})).apply(this,arguments)}function vC(n){return Ml(n,e=>{if(!AE(e))throw Ho.create("not-registered");return function wC(n){return 1===n.requestStatus&&n.requestTime+wE<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function CC(){return CC=(0,N.Z)(function*(n,e){try{const t=yield function Dx(n,e){return mC.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield mc(n.appConfig,r),t}catch(t){if(!iC(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield mc(n.appConfig,r)}else yield $f(n.appConfig);throw t}}),CC.apply(this,arguments)}function AE(n){return void 0!==n&&2===n.registrationStatus}function IC(){return(IC=(0,N.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield zf(e);return r?r.catch(console.error):_C(e).catch(console.error),t.fid})).apply(this,arguments)}function bC(){return bC=(0,N.Z)(function*(n,e=!1){const t=n;return yield function kx(n){return xs.apply(this,arguments)}(t),(yield _C(t,e)).token}),bC.apply(this,arguments)}function xs(){return(xs=(0,N.Z)(function*(n){const{registrationPromise:e}=yield zf(n);e&&(yield e)})).apply(this,arguments)}function NE(n){return Ho.create("missing-app-config-values",{valueName:n})}const SC="installations",FE=n=>{const e=n.getProvider("app").getImmediate(),t=function DC(n){if(!n||!n.options)throw NE("App Configuration");if(!n.name)throw NE("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw NE(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:wl(e,"heartbeat"),_delete:()=>Promise.resolve()}},LE=n=>{const t=wl(n.getProvider("app").getImmediate(),SC).getImmediate();return{getId:()=>function Ax(n){return IC.apply(this,arguments)}(t),getToken:i=>function Ox(n){return bC.apply(this,arguments)}(t,i)}};(function PC(){Yi(new Cr.wA(SC,FE,"PUBLIC")),Yi(new Cr.wA("installations-internal",LE,"PRIVATE"))})(),Ni(tC,nC),Ni(tC,nC,"esm2017");const co="@firebase/remote-config",Ri=new z.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Wf{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,N.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const o=yield t.client.fetch(e),u=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===o.status&&u.push(t.storage.setLastSuccessfulFetchResponse(o)),yield Promise.all(u),o})()}}function Hx(n=navigator){return n.languages&&n.languages[0]||n.language}class zx{constructor(e,t,r,i,o,u){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=u}fetch(e){var t=this;return(0,N.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),u=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,f={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},g={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:Hx()},y={method:"POST",headers:f,body:JSON.stringify(g)},b=fetch(u,y),M=new Promise((Se,ze)=>{e.signal.addEventListener(()=>{const Ne=new Error("The operation was aborted.");Ne.name="AbortError",ze(Ne)})});let S;try{yield Promise.race([b,M]),S=yield b}catch(Se){let ze="fetch-client-network";throw"AbortError"===Se?.name&&(ze="fetch-timeout"),Ri.create(ze,{originalErrorMessage:Se?.message})}let R=S.status;const Z=S.headers.get("ETag")||void 0;let Q,X;if(200===S.status){let Se;try{Se=yield S.json()}catch(ze){throw Ri.create("fetch-client-parse",{originalErrorMessage:ze?.message})}Q=Se.entries,X=Se.state}if("INSTANCE_STATE_UNSPECIFIED"===X?R=500:"NO_CHANGE"===X?R=304:("NO_TEMPLATE"===X||"EMPTY_CONFIG"===X)&&(Q={}),304!==R&&200!==R)throw Ri.create("fetch-status",{httpStatus:R});return{status:R,eTag:Z,config:Q}})()}}class qx{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,N.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,N.Z)(function*(){yield function Gx(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Ri.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const o=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),o}catch(o){if(!function Zx(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o))throw o;const u={throttleEndTimeMillis:Date.now()+(0,z.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(u),i.attemptFetch(e,u)}})()}}class Yx{constructor(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Kf(n,e){const t=n.target.error||void 0;return Ri.create(e,{originalErrorMessage:t&&t?.message})}const ba="app_namespace_store";class Xx{constructor(e,t,r,i=function Jx(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Kf(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ba,{keyPath:"compositeKey"})}}catch(t){e(Ri.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,N.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const f=r.transaction([ba],"readonly").objectStore(ba),g=t.createCompositeKey(e);try{const y=f.get(g);y.onerror=b=>{o(Kf(b,"storage-get"))},y.onsuccess=b=>{const M=b.target.result;i(M?M.value:void 0)}}catch(y){o(Ri.create("storage-get",{originalErrorMessage:y?.message}))}})})()}set(e,t){var r=this;return(0,N.Z)(function*(){const i=yield r.openDbPromise;return new Promise((o,u)=>{const g=i.transaction([ba],"readwrite").objectStore(ba),y=r.createCompositeKey(e);try{const b=g.put({compositeKey:y,value:t});b.onerror=M=>{u(Kf(M,"storage-set"))},b.onsuccess=()=>{o()}}catch(b){u(Ri.create("storage-set",{originalErrorMessage:b?.message}))}})})()}delete(e){var t=this;return(0,N.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const f=r.transaction([ba],"readwrite").objectStore(ba),g=t.createCompositeKey(e);try{const y=f.delete(g);y.onerror=b=>{o(Kf(b,"storage-delete"))},y.onsuccess=()=>{i()}}catch(y){o(Ri.create("storage-delete",{originalErrorMessage:y?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class eA{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,N.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),o=yield t;o&&(e.lastFetchStatus=o);const u=yield r;u&&(e.lastSuccessfulFetchTimestampMillis=u);const f=yield i;f&&(e.activeConfig=f)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function nA(){return t_.apply(this,arguments)}function t_(){return(t_=(0,N.Z)(function*(){if(!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}!function tA(){Yi(new Cr.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ri.create("registration-window");if(!(0,z.hl)())throw Ri.create("indexed-db-unavailable");const{projectId:o,apiKey:u,appId:f}=r.options;if(!o)throw Ri.create("registration-project-id");if(!u)throw Ri.create("registration-api-key");if(!f)throw Ri.create("registration-app-id");const g=new Xx(f,r.name,t=t||"firebase"),y=new eA(g),b=new ki.Yd(co);b.logLevel=ki.in.ERROR;const M=new zx(i,"10.5.0",t,o,u,f),S=new qx(M,g),R=new Wf(S,g,y,b),Z=new Yx(r,R,y,g,b);return function Ux(n){const e=(0,z.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(Z),Z},"PUBLIC").setMultipleInstances(!0)),Ni(co,"0.4.4"),Ni(co,"0.4.4","esm2017")}();const jE=(n,e)=>e.some(t=>n instanceof t);let $E,rA;const iA=new WeakMap,md=new WeakMap,GE=new WeakMap,OC=new WeakMap,Yf=new WeakMap;let Tl={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return md.get(n);if("objectStoreNames"===e)return n.objectStoreNames||GE.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wr(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function n_(n){return"function"==typeof n?function Dl(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function zE(){return rA||(rA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Qf(this),e),wr(iA.get(this))}:function(...e){return wr(n.apply(Qf(this),e))}:function(e,...t){const r=n.call(Qf(this),e,...t);return GE.set(r,e.sort?e.sort():[e]),wr(r)}}(n):(n instanceof IDBTransaction&&function Go(n){if(md.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});md.set(n,e)}(n),jE(n,function HE(){return $E||($E=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Tl):n)}function wr(n){if(n instanceof IDBRequest)return function sA(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(wr(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&iA.set(t,n)}).catch(()=>{}),Yf.set(e,n),e}(n);if(OC.has(n))return OC.get(n);const e=n_(n);return e!==n&&(OC.set(n,e),Yf.set(e,n)),e}const Qf=n=>Yf.get(n);function Sl(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const u=indexedDB.open(n,e),f=wr(u);return r&&u.addEventListener("upgradeneeded",g=>{r(wr(u.result),g.oldVersion,g.newVersion,wr(u.transaction))}),t&&u.addEventListener("blocked",()=>t()),f.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}function _c(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),wr(t).then(()=>{})}const _d=["get","getKey","getAll","getAllKeys","count"],yd=["put","add","delete","clear"],yc=new Map;function Pl(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(yc.get(e))return yc.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=yd.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_d.includes(t))return;const o=function(){var u=(0,N.Z)(function*(f,...g){const y=this.transaction(f,i?"readwrite":"readonly");let b=y.store;return r&&(b=b.index(g.shift())),(yield Promise.all([b[t](...g),i&&y.done]))[0]});return function(g){return u.apply(this,arguments)}}();return yc.set(e,o),o}!function Ci(n){Tl=n(Tl)}(n=>({...n,get:(e,t,r)=>Pl(e,t)||n.get(e,t,r),has:(e,t)=>!!Pl(e,t)||n.has(e,t)}));const vd="/firebase-messaging-sw.js",Cd="/firebase-cloud-messaging-push-scope",xl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ZE="https://fcmregistrations.googleapis.com/v1",kC="google.c.a.c_id",qE="google.c.a.c_l",WE="google.c.a.ts";var Jf=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Jf||{});function Zo(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function QE(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}const Xf="fcm_token_details_db",oA=5,aA="fcm_token_object_Store";function NC(){return NC=(0,N.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(Xf))return null;let e=null;return(yield Sl(Xf,oA,{upgrade:(r=(0,N.Z)(function*(i,o,u,f){var g;if(o<2||!i.objectStoreNames.contains(aA))return;const y=f.objectStore(aA),b=yield y.index("fcmSenderId").get(n);if(yield y.clear(),b)if(2===o){const M=b;if(!M.auth||!M.p256dh||!M.endpoint)return;e={token:M.fcmToken,createTime:null!==(g=M.createTime)&&void 0!==g?g:Date.now(),subscriptionOptions:{auth:M.auth,p256dh:M.p256dh,endpoint:M.endpoint,swScope:M.swScope,vapidKey:"string"==typeof M.vapidKey?M.vapidKey:Zo(M.vapidKey)}}}else if(3===o){const M=b;e={token:M.fcmToken,createTime:M.createTime,subscriptionOptions:{auth:Zo(M.auth),p256dh:Zo(M.p256dh),endpoint:M.endpoint,swScope:M.swScope,vapidKey:Zo(M.vapidKey)}}}else if(4===o){const M=b;e={token:M.fcmToken,createTime:M.createTime,subscriptionOptions:{auth:Zo(M.auth),p256dh:Zo(M.p256dh),endpoint:M.endpoint,swScope:M.swScope,vapidKey:Zo(M.vapidKey)}}}}),function(o,u,f,g){return r.apply(this,arguments)})})).close(),yield _c(Xf),yield _c("fcm_vapid_details_db"),yield _c("undefined"),function cA(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),NC.apply(this,arguments)}const uL="firebase-messaging-database",lA=1,wd="firebase-messaging-store";let RC=null;function FC(){return RC||(RC=Sl(uL,lA,{upgrade:(n,e)=>{0===e&&n.createObjectStore(wd)}})),RC}function JE(n){return ep.apply(this,arguments)}function ep(){return ep=(0,N.Z)(function*(n){const e=Ol(n),r=yield(yield FC()).transaction(wd).objectStore(wd).get(e);if(r)return r;{const i=yield function lL(n){return NC.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield Al(n,i),i}}),ep.apply(this,arguments)}function Al(n,e){return tp.apply(this,arguments)}function tp(){return(tp=(0,N.Z)(function*(n,e){const t=Ol(n),i=(yield FC()).transaction(wd,"readwrite");return yield i.objectStore(wd).put(e,t),yield i.done,e})).apply(this,arguments)}function i_(){return(i_=(0,N.Z)(function*(n){const e=Ol(n),r=(yield FC()).transaction(wd,"readwrite");yield r.objectStore(wd).delete(e),yield r.done})).apply(this,arguments)}function Ol({appConfig:n}){return n.appId}const oi=new z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function np(n,e){return LC.apply(this,arguments)}function LC(){return(LC=(0,N.Z)(function*(n,e){const t=yield bd(n),r=nM(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(Id(n.appConfig),i)).json()}catch(u){throw oi.create("token-subscribe-failed",{errorInfo:u?.toString()})}if(o.error)throw oi.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw oi.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function UC(){return(UC=(0,N.Z)(function*(n,e){const t=yield bd(n),r=nM(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${Id(n.appConfig)}/${e.token}`,i)).json()}catch(u){throw oi.create("token-update-failed",{errorInfo:u?.toString()})}if(o.error)throw oi.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw oi.create("token-update-no-token");return o.token})).apply(this,arguments)}function eM(n,e){return rp.apply(this,arguments)}function rp(){return(rp=(0,N.Z)(function*(n,e){const r={method:"DELETE",headers:yield bd(n)};try{const o=yield(yield fetch(`${Id(n.appConfig)}/${e}`,r)).json();if(o.error)throw oi.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(i){throw oi.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function Id({projectId:n}){return`${ZE}/projects/${n}/registrations`}function bd(n){return tM.apply(this,arguments)}function tM(){return(tM=(0,N.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function nM({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==xl&&(i.web.applicationPubKey=r),i}const dA=6048e5;function VC(){return VC=(0,N.Z)(function*(n){const e=yield function fA(n,e){return zC.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Zo(e.getKey("auth")),p256dh:Zo(e.getKey("p256dh"))},r=yield JE(n.firebaseDependencies);if(r){if(function pA(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+dA?function hA(n,e){return s_.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield eM(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return HC(n.firebaseDependencies,t)}return HC(n.firebaseDependencies,t)}),VC.apply(this,arguments)}function $C(){return $C=(0,N.Z)(function*(n){const e=yield JE(n.firebaseDependencies);e&&(yield eM(n.firebaseDependencies,e.token),yield function r_(n){return i_.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),$C.apply(this,arguments)}function s_(){return s_=(0,N.Z)(function*(n,e){try{const t=yield function uA(n,e){return UC.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Al(n.firebaseDependencies,r),t}catch(t){throw yield function jC(n){return $C.apply(this,arguments)}(n),t}}),s_.apply(this,arguments)}function HC(n,e){return o_.apply(this,arguments)}function o_(){return(o_=(0,N.Z)(function*(n,e){const r={token:yield np(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Al(n,r),r.token})).apply(this,arguments)}function zC(){return(zC=(0,N.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:QE(e)})})).apply(this,arguments)}function GC(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function ZC(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const o=e.notification.icon;o&&(n.notification.icon=o)}(e,n),function qC(n,e){e.data&&(n.data=e.data)}(e,n),function gA(n,e){var t,r,i,o,u;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const f=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(o=e.notification)||void 0===o?void 0:o.click_action;f&&(n.fcmOptions.link=f);const g=null===(u=e.fcmOptions)||void 0===u?void 0:u.analytics_label;g&&(n.fcmOptions.analyticsLabel=g)}(e,n),e}function ip(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function c_(n){return oi.create("missing-app-config-values",{valueName:n})}ip("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ip("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mA{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function WC(n){if(!n||!n.options)throw c_("App Configuration Object");if(!n.name)throw c_("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw c_(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function KC(){return(KC=(0,N.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(vd,{scope:Cd}),n.swRegistration.update().catch(()=>{})}catch(e){throw oi.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function sp(){return(sp=(0,N.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function rM(n){return KC.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw oi.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function l_(){return(l_=(0,N.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=xl)})).apply(this,arguments)}function QC(){return QC=(0,N.Z)(function*(n,e){if(!navigator)throw oi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw oi.create("permission-blocked");return yield function iM(n,e){return l_.apply(this,arguments)}(n,e?.vapidKey),yield function YC(n,e){return sp.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function BC(n){return VC.apply(this,arguments)}(n)}),QC.apply(this,arguments)}function op(){return(op=(0,N.Z)(function*(n,e,t){const r=function aM(n){switch(n){case Jf.NOTIFICATION_CLICKED:return"notification_open";case Jf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[kC],message_name:t[qE],message_time:t[WE],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function u_(){return u_=(0,N.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Jf.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(GC(t)):n.onMessageHandler.next(GC(t)));const r=t.data;(function a_(n){return"object"==typeof n&&!!n&&kC in n})(r)&&"1"===r["google.c.a.e"]&&(yield function oM(n,e,t){return op.apply(this,arguments)}(n,t.messageType,r))}),u_.apply(this,arguments)}const cM="@firebase/messaging",lM=n=>{const e=new mA(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function JC(n,e){return u_.apply(this,arguments)}(e,t)),e},uM=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function sM(n,e){return QC.apply(this,arguments)}(e,r)}};function hM(){return ew.apply(this,arguments)}function ew(){return(ew=(0,N.Z)(function*(){try{yield(0,z.eu)()}catch{return!1}return typeof window<"u"&&(0,z.hl)()&&(0,z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function fM(n=Rf()){return hM().then(e=>{if(!e)throw oi.create("unsupported-browser")},e=>{throw oi.create("indexed-db-unsupported")}),wl((0,z.m9)(n),"messaging").getImmediate()}!function dM(){Yi(new Cr.wA("messaging",lM,"PUBLIC")),Yi(new Cr.wA("messaging-internal",uM,"PRIVATE")),Ni(cM,"0.12.4"),Ni(cM,"0.12.4","esm2017")}();const cp="analytics",pM="firebase_id",gM="origin",f_=6e4,vc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tw="https://www.googletagmanager.com/gtag/js",Vr=new ki.Yd("@firebase/analytics"),ur=new z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function rw(n){if(!n.startsWith(tw)){const e=ur.create("invalid-gtag-resource",{gtagURL:n});return Vr.warn(e.message),""}return n}function mM(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function sw(){return(sw=(0,N.Z)(function*(n,e,t,r,i,o){const u=r[i];try{if(u)yield e[u];else{const g=(yield mM(t)).find(y=>y.measurementId===i);g&&(yield e[g.appId])}}catch(f){Vr.error(f)}n("config",i,o)})).apply(this,arguments)}function ow(){return(ow=(0,N.Z)(function*(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let u=i.send_to;Array.isArray(u)||(u=[u]);const f=yield mM(t);for(const g of u){const y=f.find(M=>M.measurementId===g),b=y&&e[y.appId];if(!b){o=[];break}o.push(b)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Vr.error(o)}})).apply(this,arguments)}const bA=30,aw=new class EA{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function CM(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function cw(){return(cw=(0,N.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:CM(r)},o=vc.replace("{app-id}",t),u=yield fetch(o,i);if(200!==u.status&&304!==u.status){let f="";try{const g=yield u.json();null!==(e=g.error)&&void 0!==e&&e.message&&(f=g.error.message)}catch{}throw ur.create("config-fetch-failed",{httpStatus:u.status,responseMessage:f})}return u.json()})).apply(this,arguments)}function p_(){return(p_=(0,N.Z)(function*(n,e=aw,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw ur.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw ur.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new lw;return setTimeout((0,N.Z)(function*(){f.abort()}),void 0!==t?t:f_),wM({appId:r,apiKey:i,measurementId:o},u,f,e)})).apply(this,arguments)}function wM(n,e,t){return g_.apply(this,arguments)}function g_(){return g_=(0,N.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=aw){var o;const{appId:u,measurementId:f}=n;try{yield function fL(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(ur.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(g){if(f)return Vr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:u,measurementId:f};throw g}try{const g=yield function Ed(n){return cw.apply(this,arguments)}(n);return i.deleteThrottleMetadata(u),g}catch(g){const y=g;if(!function IM(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(y)){if(i.deleteThrottleMetadata(u),f)return Vr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:u,measurementId:f};throw g}const b=503===Number(null===(o=y?.customData)||void 0===o?void 0:o.httpStatus)?(0,z.$s)(t,i.intervalMillis,bA):(0,z.$s)(t,i.intervalMillis),M={throttleEndTimeMillis:Date.now()+b,backoffCount:t+1};return i.setThrottleMetadata(u,M),Vr.debug(`Calling attemptFetch again in ${b} millis`),wM(n,M,r,i)}}),g_.apply(this,arguments)}class lw{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let As,kl;function m_(){return(m_=(0,N.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const o=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function fw(){return(fw=(0,N.Z)(function*(){if(!(0,z.hl)())return Vr.warn(ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,z.eu)()}catch(n){return Vr.warn(ur.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function y_(){return y_=(0,N.Z)(function*(n,e,t,r,i,o,u){var f;const g=function MA(n){return p_.apply(this,arguments)}(n);g.then(R=>{t[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&Vr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>Vr.error(R)),e.push(g);const y=function PA(){return fw.apply(this,arguments)}().then(R=>{if(R)return r.getId()}),[b,M]=yield Promise.all([g,y]);(function IA(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(tw)&&t.src.includes(n))return t;return null})(o)||function dL(n,e){const t=function iw(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:rw}),r=document.createElement("script"),i=`${tw}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(o,b.measurementId),kl&&(i("consent","default",kl),function EM(n){kl=n}(void 0)),i("js",new Date);const S=null!==(f=u?.config)&&void 0!==f?f:{};return S[gM]="firebase",S.update=!0,null!=M&&(S[pM]=M),i("config",b.measurementId,S),As&&(i("set",As),function hw(n){As=n}(void 0)),b.measurementId}),y_.apply(this,arguments)}class v_{constructor(e){this.app=e}_delete(){return delete Wo[this.app.options.appId],Promise.resolve()}}let Wo={},pw=[];const gw={};let DM,Os,up="dataLayer",Md=!1;function PM(n,e,t){!function mw(){const n=[];if((0,z.ru)()&&n.push("This is a browser extension environment."),(0,z.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ur.create("invalid-analytics-context",{errorInfo:e});Vr.warn(t.message)}}();const r=n.options.appId;if(!r)throw ur.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw ur.create("no-api-key");Vr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wo[r])throw ur.create("already-exists",{id:r});if(!Md){!function hL(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(up);const{wrappedGtag:o,gtagCore:u}=function yM(n,e,t,r,i){let o=function(...u){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function Pr(n,e,t,r){function o(){return o=(0,N.Z)(function*(u,...f){try{if("event"===u){const[g,y]=f;yield function _M(n,e,t,r,i){return ow.apply(this,arguments)}(n,e,t,g,y)}else if("config"===u){const[g,y]=f;yield function wA(n,e,t,r,i,o){return sw.apply(this,arguments)}(n,e,t,r,g,y)}else if("consent"===u){const[g]=f;n("consent","update",g)}else if("get"===u){const[g,y,b]=f;n("get",g,y,b)}else if("set"===u){const[g]=f;n("set",g)}else n(u,...f)}catch(g){Vr.error(g)}}),o.apply(this,arguments)}return function i(u){return o.apply(this,arguments)}}(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}(Wo,pw,gw,up,"gtag");Os=o,DM=u,Md=!0}return Wo[r]=function MM(n,e,t,r,i,o,u){return y_.apply(this,arguments)}(n,pw,gw,e,DM,up,t),new v_(n)}function AM(){return C_.apply(this,arguments)}function C_(){return(C_=(0,N.Z)(function*(){if((0,z.ru)()||!(0,z.zI)()||!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}const OM="@firebase/analytics";!function kA(){Yi(new Cr.wA(cp,(e,{options:t})=>PM(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Yi(new Cr.wA("analytics-internal",function n(e){try{const t=e.getProvider(cp).getImmediate();return{logEvent:(r,i,o)=>function OA(n,e,t,r){n=(0,z.m9)(n),function TA(n,e,t,r,i){return m_.apply(this,arguments)}(Os,Wo[n.app.options.appId],e,t,r).catch(i=>Vr.error(i))}(t,r,i,o)}}catch(t){throw ur.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Ni(OM,"0.10.0"),Ni(OM,"0.10.0","esm2017")}();const FA=new class RA extends rE{}(class NA extends Pf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var dp=L(5137),Td=L(3093);const Nl=new c.GfV("7.6.1"),w_="__angularfire_symbol__analyticsIsSupportedValue",I_="__angularfire_symbol__analyticsIsSupported",b_="__angularfire_symbol__remoteConfigIsSupportedValue",E_="__angularfire_symbol__remoteConfigIsSupported",M_="__angularfire_symbol__messagingIsSupportedValue",T_="__angularfire_symbol__messagingIsSupported";globalThis[I_]||(globalThis[I_]=AM().then(n=>globalThis[w_]=n).catch(()=>globalThis[w_]=!1)),globalThis[T_]||(globalThis[T_]=hM().then(n=>globalThis[M_]=n).catch(()=>globalThis[M_]=!1)),globalThis[E_]||(globalThis[E_]=nA().then(n=>globalThis[b_]=n).catch(()=>globalThis[b_]=!1));const hp={async:()=>globalThis[T_],sync:()=>{const n=globalThis[M_];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function Rl(n,e,t){if(e){if(1===e.length)return e[0];const o=e.filter(u=>u.app===t);if(1===o.length)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const ks=(n,e)=>{const t=e?[e]:(0,Sn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(u=>{r.includes(u)||r.push(u)})}),r};function Dd(){}class NM{constructor(e,t=FA){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(u){i.runGuarded(()=>{e.apply(this,[u])})},t,r)}}class Sd{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dd,{},Dd,Dd)),t.pipe(Dn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fl=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new NM(Zone.current)),this.insideAngular=t.run(()=>new NM(Zone.current,O0)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ea(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Cc(n){return Ea().ngZone.run(()=>n())}function jr(n){return Ea(),function VA(n){return function(t){return(t=t.lift(new Sd(n.ngZone))).pipe((0,dp.R)(n.outsideAngular),(0,Td.Q)(n.insideAngular))}}(Ea())(n)}const jA=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Cc(()=>n.apply(void 0,r))},Pd=(n,e)=>function(){let t;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(t||(t=Cc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dd,{},Dd,Dd)))),r[o]=jA(r[o],t));const i=function wL(n){return Ea().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof gi.y){const o=Ea();return i.pipe((0,dp.R)(o.outsideAngular),(0,Td.Q)(o.insideAngular))}return Cc(()=>i)}return i instanceof gi.y?i.pipe(jr):i instanceof Promise?Cc(()=>new Promise((o,u)=>i.then(f=>Cc(()=>o(f)),f=>Cc(()=>u(f))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Cc(()=>i)};function wc(){return(0,_i.e)((n,e)=>{let t,r=!1;n.subscribe((0,mi.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var We,$A=L(3997),Qi=L(6304),Ji=(L(8661),L(3399)),IL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ns={},vw=vw||{},It=IL||self;function fp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function xd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Cw="closure_uid_"+(1e9*Math.random()>>>0),HA=0;function zA(n,e,t){return n.call.apply(n.bind,arguments)}function pp(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function wi(n,e,t){return(wi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zA:pp).apply(null,arguments)}function S_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function $r(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function uo(){this.s=this.s,this.o=this.o}uo.prototype.s=!1,uo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function RM(n){Object.prototype.hasOwnProperty.call(n,Cw)&&n[Cw]||(n[Cw]=++HA)}(this)},uo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ww=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function P_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function LM(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(fp(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let u=0;u<o;u++)n[i+u]=r[u]}else n.push(r)}}function Ir(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ir.prototype.h=function(){this.defaultPrevented=!0};var gp=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",()=>{},e),It.removeEventListener("test",()=>{},e)}catch{}return n}();function mp(n){return/^[\s\xa0]*$/.test(n)}function x_(){var n=It.navigator;return n&&(n=n.userAgent)?n:""}function Ko(n){return-1!=x_().indexOf(n)}function A_(n){return A_[" "](n),n}A_[" "]=function(){};var jM,n,BM=Ko("Opera"),Ad=Ko("Trident")||Ko("MSIE"),Iw=Ko("Edge"),bw=Iw||Ad,VM=Ko("Gecko")&&!(-1!=x_().toLowerCase().indexOf("webkit")&&!Ko("Edge"))&&!(Ko("Trident")||Ko("MSIE"))&&!Ko("Edge"),bL=-1!=x_().toLowerCase().indexOf("webkit")&&!Ko("Edge");function GA(){var n=It.document;return n?n.documentMode:void 0}e:{var $M="",O_=(n=x_(),VM?/rv:([^\);]+)(\)|;)/.exec(n):Iw?/Edge\/([\d\.]+)/.exec(n):Ad?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):bL?/WebKit\/(\S+)/.exec(n):BM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(O_&&($M=O_?O_[1]:""),Ad){var Od=GA();if(null!=Od&&Od>parseFloat($M)){jM=String(Od);break e}}jM=$M}var zM=It.document&&Ad&&(GA()||parseInt(jM,10))||void 0;function Ma(n,e){if(Ir.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(VM){e:{try{A_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ZA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ma.$.h.call(this)}}$r(Ma,Ir);var ZA={2:"touch",3:"pen",4:"mouse"};Ma.prototype.h=function(){Ma.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _p="closure_listenable_"+(1e6*Math.random()|0),qA=0;function WA(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++qA,this.fa=this.ia=!1}function Mw(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Tw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ZM(n){const e={};for(const t in n)e[t]=n[t];return e}const qM="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kd(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<qM.length;o++)t=qM[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function k_(n){this.src=n,this.g={},this.h=0}function N_(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=ww(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Mw(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Dw(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}k_.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var u=Dw(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new WA(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var R_="closure_lm_"+(1e6*Math.random()|0),Sw={};function Pw(n,e,t,r,i){if(r&&r.once)return KM(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Pw(n,e[o],t,r,i);return null}return t=kw(t),n&&n[_p]?n.O(e,t,xd(r)?!!r.capture:!!r,i):WM(n,e,t,!1,r,i)}function WM(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var u=xd(i)?!!i.capture:!!i,f=Ow(n);if(f||(n[R_]=f=new k_(n)),(t=f.add(e,t,r,u,o)).proxy)return t;if(r=function xw(){const e=KA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)gp||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(YM(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function KM(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)KM(n,e[o],t,r,i);return null}return t=kw(t),n&&n[_p]?n.P(e,t,xd(r)?!!r.capture:!!r,i):WM(n,e,t,!0,r,i)}function Aw(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Aw(n,e[o],t,r,i);else r=xd(r)?!!r.capture:!!r,t=kw(t),n&&n[_p]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Dw(o=n.g[e],t,r,i))&&(Mw(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Ow(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Dw(e,t,r,i)),(t=-1<n?e[n]:null)&&F_(t))}function F_(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[_p])N_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(YM(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ow(e))?(N_(t,n),0==t.h&&(t.src=null,e[R_]=null)):Mw(n)}}}function YM(n){return n in Sw?Sw[n]:Sw[n]="on"+n}function KA(n,e){if(n.fa)n=!0;else{e=new Ma(e,this);var t=n.listener,r=n.la||n.src;n.ia&&F_(n),n=t.call(r,e)}return n}function Ow(n){return(n=n[R_])instanceof k_?n:null}var yp="__closure_events_fn_"+(1e9*Math.random()>>>0);function kw(n){return"function"==typeof n?n:(n[yp]||(n[yp]=function(e){return n.handleEvent(e)}),n[yp])}function xr(){uo.call(this),this.i=new k_(this),this.S=this,this.J=null}function ai(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ir(e,n);else if(e instanceof Ir)e.target=e.target||n;else{var i=e;kd(e=new Ir(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var u=e.g=t[o];i=L_(u,r,!0,e)&&i}if(i=L_(u=e.g=n,r,!0,e)&&i,i=L_(u,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=L_(u=e.g=t[o],r,!1,e)&&i}function L_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.fa&&u.capture==t){var f=u.listener,g=u.la||u.src;u.ia&&N_(n.i,u),i=!1!==f.call(g,r)&&i}}return i&&!r.defaultPrevented}$r(xr,uo),xr.prototype[_p]=!0,xr.prototype.removeEventListener=function(n,e,t,r){Aw(this,n,e,t,r)},xr.prototype.N=function(){if(xr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Mw(t[r]);delete n.g[e],n.h--}}this.J=null},xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Nw=It.JSON.stringify;function QA(){var n=U_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var QM=new class YA{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new XA,n=>n.reset());class XA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function JM(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function XM(n){It.setTimeout(()=>{throw n},0)}let vp,Cp=!1,U_=new class JA{constructor(){this.h=this.g=null}add(e,t){const r=QM.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},eT=()=>{const n=It.Promise.resolve(void 0);vp=()=>{n.then(eO)}};var eO=()=>{for(var n;n=QA();){try{n.h.call(n.g)}catch(t){XM(t)}var e=QM;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Cp=!1};function B_(n,e){xr.call(this),this.h=n||1,this.g=e||It,this.j=wi(this.qb,this),this.l=Date.now()}function Rw(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function wp(n,e,t){if("function"==typeof n)t&&(n=wi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wi(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function V_(n){n.g=wp(()=>{n.g=null,n.i&&(n.i=!1,V_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}$r(B_,xr),(We=B_.prototype).ga=!1,We.T=null,We.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ai(this,"tick"),this.ga&&(Rw(this),this.start()))}},We.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.N=function(){B_.$.N.call(this),Rw(this),delete this.g};class tT extends uo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:V_(this)}N(){super.N(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ll(n){uo.call(this),this.h=n,this.g={}}$r(Ll,uo);var nT=[];function rT(n,e,t,r){Array.isArray(t)||(t&&(nT[0]=t.toString()),t=nT);for(var i=0;i<t.length;i++){var o=Pw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function j_(n){Tw(n.g,function(e,t){this.g.hasOwnProperty(t)&&F_(e)},n),n.g={}}function $_(){this.g=!0}function Bl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function EL(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<i.length;u++)i[u]=""}}}return Nw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ll.prototype.N=function(){Ll.$.N.call(this),j_(this)},Ll.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$_.prototype.Ea=function(){this.g=!1},$_.prototype.info=function(){};var Ta={},H_=null;function z_(){return H_=H_||new xr}function Fw(n){Ir.call(this,Ta.Ta,n)}function Nd(n){const e=z_();ai(e,new Fw(e))}function sT(n,e){Ir.call(this,Ta.STAT_EVENT,n),this.stat=e}function Ii(n){const e=z_();ai(e,new sT(e,n))}function G_(n,e){Ir.call(this,Ta.Ua,n),this.size=e}function Rd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Ta.Ta="serverreachability",$r(Fw,Ir),Ta.STAT_EVENT="statevent",$r(sT,Ir),Ta.Ua="timingevent",$r(G_,Ir);var Ip={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Lw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Z_(){}function aT(){}Z_.prototype.h=null;var cT,bp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Uw(){Ir.call(this,"d")}function q_(){Ir.call(this,"c")}function Ep(){}function Mp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Ll(this),this.P=ML,this.V=new B_(n=bw?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new lT}function lT(){this.i=null,this.g="",this.h=!1}$r(Uw,Ir),$r(q_,Ir),$r(Ep,Z_),Ep.prototype.g=function(){return new XMLHttpRequest},Ep.prototype.i=function(){return{}},cT=new Ep;var ML=45e3,Bw={},W_={};function K_(n,e,t){n.L=1,n.v=Sp(Da(e)),n.s=t,n.S=!0,Vw(n,null)}function Vw(n,e){n.G=Date.now(),Tp(n),n.A=Da(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),yT(t.i,"t",r),n.C=0,t=n.l.J,n.h=new lT,n.g=OT(n.l,t?e:null,!n.s),0<n.O&&(n.M=new tT(wi(n.Pa,n,n.g),n.O)),rT(n.U,n.g,"readystatechange",n.nb),e=n.I?ZM(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Nd(),function iT(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var u="",f=o.split("&"),g=0;g<f.length;g++){var y=f[g].split("=");if(1<y.length){var b=y[0];y=y[1];var M=b.split("_");u=2<=M.length&&"type"==M[1]?u+(b+"=")+y+"&":u+(b+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function jw(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function uT(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=nO(n,t),i==W_){4==e&&(n.o=4,Ii(14),r=!1),Bl(n.j,n.m,null,"[Incomplete Response]");break}if(i==Bw){n.o=4,Ii(15),Bl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Bl(n.j,n.m,i,null),jl(n,i)}jw(n)&&i!=W_&&i!=Bw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),oy(e),e.M=!0,Ii(11))):(Bl(n.j,n.m,t,"[Invalid Chunked Response]"),Vl(n),Dp(n))}function nO(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?W_:(t=Number(e.substring(t,r)),isNaN(t)?Bw:(r+=1)+t>e.length?W_:(e=e.slice(r,r+t),n.C=r+t,e))}function Tp(n){n.Y=Date.now()+n.P,dT(n,n.P)}function dT(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Rd(wi(n.lb,n),e)}function Y_(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function Dp(n){0==n.l.H||n.J||uO(n.l,n)}function Vl(n){Y_(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Rw(n.V),j_(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function jl(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||X_(t.i,n)))if(!n.K&&X_(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;oI(t),sy(t)}xT(t),Ii(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Rd(wi(t.ib,t),6e3));if(1>=wT(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ho(t,11)}else if((n.K||t.g==n)&&oI(t),!mp(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const b=y[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const M=y[4];null!=M&&(t.Ga=M,t.l.info("SVER="+t.Ga));const S=y[5];null!=S&&"number"==typeof S&&0<S&&(t.L=r=1.5*S,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const R=n.g;if(R){const Z=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var o=r.i;o.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Kw(o,o.h),o.h=null))}if(r.F){const Q=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,Pn(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=cy(r,r.J?r.pa:null,r.Y),u.K){IT(r.i,u);var f=u,g=r.L;g&&f.setTimeout(g),f.B&&(Y_(f),Tp(f)),r.g=u}else lO(r);0<t.j.length&&Fp(t)}else"stop"!=y[0]&&"close"!=y[0]||ho(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?ho(t,7):iy(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}Nd()}catch{}}function $w(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(fp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function fT(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(fp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function hT(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(fp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(We=Mp.prototype).setTimeout=function(n){this.P=n},We.nb=function(n){n=n.target;const e=this.M;e&&3==Fs(n)?e.l():this.Pa(n)},We.Pa=function(n){try{if(n==this.g)e:{const b=Fs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||bw||this.g&&(this.h.h||this.g.ja()||nI(this.g)))){this.J||4!=b||7==e||Nd(),Y_(this);var t=this.g.da();this.ca=t;t:if(jw(this)){var r=nI(this.g);n="";var i=r.length,o=4==Fs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vl(this),Dp(this);var u="";break t}this.h.i=new It.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function Ul(n,e,t,r,i,o,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,g=this.g;if((f=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mp(f)){var y=f;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ii(12),Vl(this),Dp(this);break e}Bl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jl(this,t)}this.S?(uT(this,b,u),bw&&this.i&&3==b&&(rT(this.U,this.V,"tick",this.mb),this.V.start())):(Bl(this.j,this.m,u,null),jl(this,u)),4==b&&Vl(this),this.i&&!this.J&&(4==b?uO(this.l,this):(this.i=!1,Tp(this)))}else(function ST(n){const e={};n=(n.g&&2<=Fs(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(mp(n[r]))continue;var t=JM(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function GM(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Vl(this),Dp(this)}}}catch{}},We.mb=function(){if(this.g){var n=Fs(this.g),e=this.g.ja();this.C<e.length&&(Y_(this),uT(this,n,e),this.i&&4!=n&&Tp(this))}},We.cancel=function(){this.J=!0,Vl(this)},We.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function tO(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Nd(),Ii(17)),Vl(this),this.o=2,Dp(this)):dT(this,this.Y-n)};var Hw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ic(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ic){this.h=n.h,zw(this,n.j),this.s=n.s,this.g=n.g,Gw(this,n.m),this.l=n.l;var e=n.i,t=new Q_;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Zw(this,t),this.o=n.o}else n&&(e=String(n).match(Hw))?(this.h=!1,zw(this,e[1]||"",!0),this.s=Pp(e[2]||""),this.g=Pp(e[3]||"",!0),Gw(this,e[4]),this.l=Pp(e[5]||"",!0),Zw(this,e[6]||"",!0),this.o=Pp(e[7]||"")):(this.h=!1,this.i=new Q_(null,this.h))}function Da(n){return new Ic(n)}function zw(n,e,t){n.j=t?Pp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Gw(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Zw(n,e,t){e instanceof Q_?(n.i=e,function vT(n,e){e&&!n.j&&(Rs(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(mT(this,r),yT(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=xp(e,TL)),n.i=new Q_(e,n.h))}function Pn(n,e,t){n.i.set(e,t)}function Sp(n){return Pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Pp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function xp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ap),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ap(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ic.prototype.toString=function(){var n=[],e=this.j;e&&n.push(xp(e,gT,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(xp(e,gT,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(xp(t,"/"==t.charAt(0)?rO:qw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",xp(t,iO)),n.join("")};var gT=/[#\/\?@]/g,qw=/[#\?:]/g,rO=/[#\?]/g,TL=/[#\?@]/g,iO=/#/g;function Q_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Rs(n){n.g||(n.g=new Map,n.h=0,n.i&&function pT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function mT(n,e){Rs(n),e=Sa(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function _T(n,e){return Rs(n),e=Sa(n,e),n.g.has(e)}function yT(n,e,t){mT(n,e),0<t.length&&(n.i=null,n.g.set(Sa(n,e),P_(t)),n.h+=t.length)}function Sa(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ww(n){this.l=n||J_,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ka&&It.g.Ka()&&It.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=Q_.prototype).add=function(n,e){Rs(this),this.i=null,n=Sa(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},We.forEach=function(n,e){Rs(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},We.ta=function(){Rs(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},We.Z=function(n){Rs(this);let e=[];if("string"==typeof n)_T(this,n)&&(e=e.concat(this.g.get(Sa(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},We.set=function(n,e){return Rs(this),this.i=null,_T(this,n=Sa(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},We.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=o;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var J_=10;function CT(n){return!!n.h||!!n.g&&n.g.size>=n.j}function wT(n){return n.h?1:n.g?n.g.size:0}function X_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Kw(n,e){n.g?n.g.add(e):n.h=e}function IT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Yw(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return P_(n.i)}Ww.prototype.cancel=function(){if(this.i=Yw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var ey=class{stringify(n){return It.JSON.stringify(n,void 0)}parse(n){return It.JSON.parse(n,void 0)}};function oO(){this.g=new ey}function aO(n,e,t){const r=t||"";try{$w(n,function(i,o){let u=i;xd(i)&&(u=Nw(i)),e.push(r+o+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Op(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function $l(n){this.l=n.fc||null,this.j=n.ob||!1}function kp(n,e){xr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Qw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$r($l,Z_),$l.prototype.g=function(){return new kp(this.l,this.j)},$l.prototype.i=function(n){return function(){return n}}({}),$r(kp,xr);var Qw=0;function Jw(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Fd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Np(n)}function Np(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(We=kp.prototype).open=function(n,e){if(this.readyState!=Qw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Np(this)},We.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||It).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fd(this)),this.readyState=Qw},We.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Np(this)),this.g&&(this.readyState=3,Np(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof It.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Jw(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},We.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Fd(this):Np(this),3==this.readyState&&Jw(this)}},We.Za=function(n){this.g&&(this.response=this.responseText=n,Fd(this))},We.Ya=function(n){this.g&&(this.response=n,Fd(this))},We.ka=function(){this.g&&Fd(this)},We.setRequestHeader=function(n,e){this.v.append(n,e)},We.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(kp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var cO=It.JSON.parse;function Bn(n){xr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ty,this.L=this.M=!1}$r(Bn,xr);var ty="",ET=/^https?$/i,Xw=["POST","PUT"];function MT(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,TT(n),ny(n)}function TT(n){n.F||(n.F=!0,ai(n,"complete"),ai(n,"error"))}function DT(n){if(n.h&&typeof vw<"u"&&(!n.C[1]||4!=Fs(n)||2!=n.da()))if(n.v&&4==Fs(n))wp(n.La,0,n);else if(ai(n,"readystatechange"),4==Fs(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(Hw)[1]||null;!i&&It.self&&It.self.location&&(i=It.self.location.protocol.slice(0,-1)),r=!ET.test(i?i.toLowerCase():"")}t=r}if(t)ai(n,"complete"),ai(n,"success");else{n.m=6;try{var o=2<Fs(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",TT(n)}}finally{ny(n)}}}function ny(n,e){if(n.g){tI(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ai(n,"ready");try{t.onreadystatechange=r}catch{}}}function tI(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function Fs(n){return n.g?n.g.readyState:0}function nI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case ty:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function rI(n){let e="";return Tw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ry(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=rI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Pn(n,e,t))}function Rp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function iI(n){this.Ga=0,this.j=[],this.l=new $_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rp("baseRetryDelayMs",5e3,n),this.hb=Rp("retryDelaySeedMs",1e4,n),this.eb=Rp("forwardChannelMaxRetries",2,n),this.xa=Rp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Ww(n&&n.concurrentRequestLimit),this.Ja=new oO,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function iy(n){if(sI(n),3==n.H){var e=n.W++,t=Da(n.I);if(Pn(t,"SID",n.K),Pn(t,"RID",e),Pn(t,"TYPE","terminate"),Lp(n,t),(e=new Mp(n,n.l,e)).L=2,e.v=Sp(Da(t)),t=!1,It.navigator&&It.navigator.sendBeacon)try{t=It.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=OT(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Tp(e)}AT(n)}function sy(n){n.g&&(oy(n),n.g.cancel(),n.g=null)}function sI(n){sy(n),n.u&&(It.clearTimeout(n.u),n.u=null),oI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function Fp(n){if(!CT(n.i)&&!n.m){n.m=!0;var e=n.Na;vp||eT(),Cp||(vp(),Cp=!0),U_.add(e,n),n.C=0}}function Hl(n,e){var t;t=e?e.m:n.W++;const r=Da(n.I);Pn(r,"SID",n.K),Pn(r,"RID",t),Pn(r,"AID",n.V),Lp(n,r),n.o&&n.s&&ry(r,n.o,n.s),t=new Mp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=PT(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Kw(n.i,t),K_(t,r,e)}function Lp(n,e){n.na&&Tw(n.na,function(t,r){Pn(e,r,t)}),n.h&&$w({},function(t,r){Pn(e,r,t)})}function PT(n,e,t){t=Math.min(n.j.length,t);var r=n.h?wi(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const u=["count="+t];-1==o?0<t?(o=i[0].g,u.push("ofs="+o)):o=0:u.push("ofs="+o);let f=!0;for(let g=0;g<t;g++){let y=i[g].g;const b=i[g].map;if(y-=o,0>y)o=Math.max(0,i[g].g-100),f=!1;else try{aO(b,u,"req"+y+"_")}catch{r&&r(b)}}if(f){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function lO(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;vp||eT(),Cp||(vp(),Cp=!0),U_.add(e,n),n.A=0}}function xT(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Rd(wi(n.Ma,n),dO(n,n.A)),n.A++,0))}function oy(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function ay(n){n.g=new Mp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Da(n.wa);Pn(e,"RID","rpc"),Pn(e,"SID",n.K),Pn(e,"AID",n.V),Pn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Pn(e,"TO",n.qa),Pn(e,"TYPE","xmlhttp"),Lp(n,e),n.o&&n.s&&ry(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Sp(Da(e)),t.s=null,t.S=!0,Vw(t,n)}function oI(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function uO(n,e){var t=null;if(n.g==e){oI(n),oy(n),n.g=null;var r=2}else{if(!X_(n.i,e))return;t=e.F,IT(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;ai(r=z_(),new G_(r,t)),Fp(n)}else lO(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Fi(n,e){return!(wT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Rd(wi(n.Na,n,e),dO(n,n.C)),n.C++,0)))}(n,e)||2==r&&xT(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ho(n,5);break;case 4:ho(n,10);break;case 3:ho(n,6);break;default:ho(n,2)}}function dO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ho(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=wi(n.pb,n);t||(t=new Ic("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||zw(t,"https"),Sp(t)),function bT(n,e){const t=new $_;if(It.Image){const r=new Image;r.onload=S_(Op,t,r,"TestLoadImage: loaded",!0,e),r.onerror=S_(Op,t,r,"TestLoadImage: error",!1,e),r.onabort=S_(Op,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=S_(Op,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.H=0,n.h&&n.h.za(e),AT(n),sI(n)}function AT(n){if(n.H=0,n.ma=[],n.h){const e=Yw(n.i);(0!=e.length||0!=n.j.length)&&(LM(n.ma,e),LM(n.ma,n.j),n.i.i.length=0,P_(n.j),n.j.length=0),n.h.ya()}}function cy(n,e,t){var r=t instanceof Ic?Da(t):new Ic(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Gw(r,r.m);else{var i=It.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Ic(null);r&&zw(o,r),e&&(o.g=e),i&&Gw(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&Pn(r,t,e),Pn(r,"VER",n.ra),Lp(n,r),r}function OT(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Bn(t&&n.Ha&&!n.va?new $l({ob:!0}):n.va)).Oa(n.J),e}function aI(){}function ly(){if(Ad&&!(10<=Number(zM)))throw Error("Environmental error: no available transport.")}function us(n,e){xr.call(this),this.g=new iI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!mp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mp(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zl(this)}function kT(n){Uw.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function uy(){q_.call(this),this.status=1}function zl(n){this.g=n}function Xi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Up(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],u=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;u=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(u<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((o=(e=t+((u=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=o+((u=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function yn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(We=Bn.prototype).Oa=function(n){this.M=n},We.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():cT.g(),this.C=function oT(n){return n.h||(n.h=n.i())}(this.u?this.u:cT),this.g.onreadystatechange=wi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void MT(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=It.FormData&&n instanceof It.FormData,!(0<=ww(Xw,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,u]of t)this.g.setRequestHeader(o,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{tI(this),0<this.B&&((this.L=function eI(n){return Ad&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wi(this.ua,this)):this.A=wp(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){MT(this,o)}},We.ua=function(){typeof vw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ai(this,"timeout"),this.abort(8))},We.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ai(this,"complete"),ai(this,"abort"),ny(this))},We.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ny(this,!0)),Bn.$.N.call(this)},We.La=function(){this.s||(this.G||this.v||this.l?DT(this):this.kb())},We.kb=function(){DT(this)},We.isActive=function(){return!!this.g},We.da=function(){try{return 2<Fs(this)?this.g.status:-1}catch{return-1}},We.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},We.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),cO(e)}},We.Ia=function(){return this.m},We.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=iI.prototype).ra=8,We.H=1,We.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Mp(this,this.l,n);let o=this.s;if(this.U&&(o?(o=ZM(o),kd(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=PT(this,i,e),Pn(t=Da(this.I),"RID",n),Pn(t,"CVER",22),this.F&&Pn(t,"X-HTTP-Session-Id",this.F),Lp(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(rI(o)))+"&"+e:this.o&&ry(t,this.o,o)),Kw(this.i,i),this.bb&&Pn(t,"TYPE","init"),this.P?(Pn(t,"$req",e),Pn(t,"SID","null"),i.aa=!0,K_(i,t,null)):K_(i,t,e),this.H=2}}else 3==this.H&&(n?Hl(this,n):0==this.j.length||CT(this.i)||Hl(this))},We.Ma=function(){if(this.u=null,ay(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Rd(wi(this.jb,this),n)}},We.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ii(10),sy(this),ay(this))},We.ib=function(){null!=this.v&&(this.v=null,sy(this),xT(this),Ii(19))},We.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ii(2)):(this.l.info("Failed to ping google.com"),Ii(1))},We.isActive=function(){return!!this.h&&this.h.isActive(this)},(We=aI.prototype).Ba=function(){},We.Aa=function(){},We.za=function(){},We.ya=function(){},We.isActive=function(){return!0},We.Va=function(){},ly.prototype.g=function(n,e){return new us(n,e)},$r(us,xr),us.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ii(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=cy(n,null,n.Y),Fp(n)},us.prototype.close=function(){iy(this.g)},us.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Nw(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Fp(e)},us.prototype.N=function(){this.g.h=null,delete this.j,iy(this.g),delete this.g,us.$.N.call(this)},$r(kT,Uw),$r(uy,q_),$r(zl,aI),zl.prototype.Ba=function(){ai(this.g,"a")},zl.prototype.Aa=function(n){ai(this.g,new kT(n))},zl.prototype.za=function(n){ai(this.g,new uy)},zl.prototype.ya=function(){ai(this.g,"b")},$r(Xi,function hO(){this.blockSize=-1}),Xi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Xi.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)Up(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){Up(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){Up(this,r),i=0;break}}this.h=i,this.i+=e},Xi.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var NT={};function cI(n){return-128<=n&&128>n?function UM(n,e){var t=NT;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new yn([0|e],0>e?-1:0)}):new yn([0|n],0>n?-1:0)}function fo(n){if(isNaN(n)||!isFinite(n))return Zl;if(0>n)return ci(fo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=lI;return new yn(e,0)}var lI=4294967296,Zl=cI(0),Bp=cI(1),fO=cI(16777216);function Pa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function po(n){return-1==n.h}function ci(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new yn(t,~n.h).add(Bp)}function dy(n,e){return n.add(ci(e))}function hy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Ld(n,e){this.g=n,this.h=e}function Vp(n,e){if(Pa(e))throw Error("division by zero");if(Pa(n))return new Ld(Zl,Zl);if(po(n))return e=Vp(ci(n),e),new Ld(ci(e.g),ci(e.h));if(po(e))return e=Vp(n,ci(e)),new Ld(ci(e.g),e.h);if(30<n.g.length){if(po(n)||po(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Bp,r=e;0>=r.X(n);)t=RT(t),r=RT(r);var i=ql(t,1),o=ql(r,1);for(r=ql(r,2),t=ql(t,2);!Pa(r);){var u=o.add(r);0>=u.X(n)&&(i=i.add(t),o=u),r=ql(r,1),t=ql(t,1)}return e=dy(n,i.R(e)),new Ld(i,e)}for(i=Zl;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(o=fo(t)).R(e);po(u)||0<u.X(n);)u=(o=fo(t-=r)).R(e);Pa(o)&&(o=Bp),i=i.add(o),n=dy(n,u)}return new Ld(i,n)}function RT(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new yn(t,n.h)}function ql(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new yn(i,n.h)}(We=yn.prototype).ea=function(){if(po(this))return-ci(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:lI+r)*e,e*=lI}return n},We.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Pa(this))return"0";if(po(this))return"-"+ci(this).toString(n);for(var e=fo(Math.pow(n,6)),t=this,r="";;){var i=Vp(t,e).g,o=((0<(t=dy(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Pa(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},We.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},We.X=function(n){return po(n=dy(this,n))?-1:Pa(n)?0:1},We.abs=function(){return po(this)?ci(this):this},We.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),u=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(o&=65535)}return new yn(t,-2147483648&t[t.length-1]?-1:0)},We.R=function(n){if(Pa(this)||Pa(n))return Zl;if(po(this))return po(n)?ci(this).R(ci(n)):ci(ci(this).R(n));if(po(n))return ci(this.R(ci(n)));if(0>this.X(fO)&&0>n.X(fO))return fo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,u=65535&this.D(r),f=n.D(i)>>>16,g=65535&n.D(i);t[2*r+2*i]+=u*g,hy(t,2*r+2*i),t[2*r+2*i+1]+=o*g,hy(t,2*r+2*i+1),t[2*r+2*i+1]+=u*f,hy(t,2*r+2*i+1),t[2*r+2*i+2]+=o*f,hy(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new yn(t,0)},We.gb=function(n){return Vp(this,n).h},We.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new yn(t,this.h&n.h)},We.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new yn(t,this.h|n.h)},We.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new yn(t,this.h^n.h)},ly.prototype.createWebChannel=ly.prototype.g,us.prototype.send=us.prototype.u,us.prototype.open=us.prototype.m,us.prototype.close=us.prototype.close,Ip.NO_ERROR=0,Ip.TIMEOUT=8,Ip.HTTP_ERROR=6,Lw.COMPLETE="complete",aT.EventType=bp,bp.OPEN="a",bp.CLOSE="b",bp.ERROR="c",bp.MESSAGE="d",xr.prototype.listen=xr.prototype.O,Bn.prototype.listenOnce=Bn.prototype.P,Bn.prototype.getLastError=Bn.prototype.Sa,Bn.prototype.getLastErrorCode=Bn.prototype.Ia,Bn.prototype.getStatus=Bn.prototype.da,Bn.prototype.getResponseJson=Bn.prototype.Wa,Bn.prototype.getResponseText=Bn.prototype.ja,Bn.prototype.send=Bn.prototype.ha,Bn.prototype.setWithCredentials=Bn.prototype.Oa,Xi.prototype.digest=Xi.prototype.l,Xi.prototype.reset=Xi.prototype.reset,Xi.prototype.update=Xi.prototype.j,yn.prototype.add=yn.prototype.add,yn.prototype.multiply=yn.prototype.R,yn.prototype.modulo=yn.prototype.gb,yn.prototype.compare=yn.prototype.X,yn.prototype.toNumber=yn.prototype.ea,yn.prototype.toString=yn.prototype.toString,yn.prototype.getBits=yn.prototype.D,yn.fromNumber=fo,yn.fromString=function Gl(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ci(Gl(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=fo(Math.pow(e,8)),r=Zl,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+o),e);8>o?(o=fo(Math.pow(e,o)),r=r.R(o).add(fo(u))):r=(r=r.R(t)).add(fo(u))}return r};var FT=Ns.createWebChannelTransport=function(){return new ly},pO=Ns.getStatEventTarget=function(){return z_()},uI=Ns.ErrorCode=Ip,LT=Ns.EventType=Lw,gO=Ns.Event=Ta,dI=Ns.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},UT=Ns.FetchXmlHttpFactory=$l,jp=Ns.WebChannel=aT,BT=Ns.XhrIo=Bn,mO=Ns.Md5=Xi,Ud=Ns.Integer=yn;const _O="@firebase/firestore";class Ar{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");let $p="9.23.0";const Wl=new ki.Yd("@firebase/firestore");function VT(){return Wl.logLevel}function Pe(n,...e){if(Wl.logLevel<=ki.in.DEBUG){const t=e.map(jT);Wl.debug(`Firestore (${$p}): ${n}`,...t)}}function br(n,...e){if(Wl.logLevel<=ki.in.ERROR){const t=e.map(jT);Wl.error(`Firestore (${$p}): ${n}`,...t)}}function go(n,...e){if(Wl.logLevel<=ki.in.WARN){const t=e.map(jT);Wl.warn(`Firestore (${$p}): ${n}`,...t)}}function jT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${$p}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function rt(n,e){n||et()}function qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class yO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ar.UNAUTHENTICATED))}shutdown(){}}class vO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $T{constructor(e){this.t=e,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Or,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=u;e.enqueueRetryable((0,N.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},g=y=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Or)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt("string"==typeof r.accessToken),new yO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new Ar(e)}}class CO{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class wO{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new CO(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PL{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.T;return this.T=o.token,Pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt("string"==typeof t.token),this.T=t.token,new HT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Hp(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class zp{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Hp(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function bt(n,e){return n<e?-1:n>e?1:0}function Bd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function zT(n){return n+"\0"}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class at{constructor(e){this.timestamp=e}static fromTimestamp(e){return new at(e)}static min(){return new at(new Vn(0,0))}static max(){return new at(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Gp{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Gp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),u=t.get(i);if(o<u)return-1;if(o>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends Gp{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const IO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tr extends Gp{construct(e,t,r){return new tr(e,t,r)}static isValidIdentifier(e){return IO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new ye(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new ye(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new ye(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(o(),i++)}if(o(),u)throw new ye(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tr(t)}static emptyPath(){return new tr([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(qt.fromString(e))}static fromName(e){return new Ze(qt.fromString(e).popFirst(5))}static empty(){return new Ze(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new qt(e.slice()))}}class fy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function fI(n){return n.fields.find(e=>2===e.kind)}function Kl(n){return n.fields.filter(e=>2!==e.kind)}fy.UNKNOWN_ID=-1;class py{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vd(0,ds.min())}}function gy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=at.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new ds(i,Ze.empty(),e)}function GT(n){return new ds(n.readTime,n.key,-1)}class ds{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ds(at.min(),Ze.empty(),-1)}static max(){return new ds(at.max(),Ze.empty(),-1)}}function my(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:bt(n.largestBatchId,e.largestBatchId))}const pI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function dr(n){return _y.apply(this,arguments)}function _y(){return _y=(0,N.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==pI)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),_y.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let i=0,o=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++o,u&&o===i&&t()},g=>r(g))}),u=!0,o===i&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(i=>i?te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new te((r,i)=>{const o=e.length,u=new Array(o);let f=0;for(let g=0;g<o;g++){const y=g;t(e[y]).next(b=>{u[y]=b,++f,f===o&&r(u)},b=>i(b))}})}static doWhile(e,t){return new te((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class yy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Or,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Yl(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=gI(r.target.error);this.v.reject(new Yl(e,i))}}static open(e,t,r,i){try{return new yy(t,e.transaction(i,r))}catch(o){throw new Yl(t,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ZT(t)}}class Ls{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Ls.S((0,z.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),xa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,z.hl)())return!1;if(Ls.C())return!0;const e=(0,z.z$)(),t=Ls.S(e),r=0<t&&t<10,i=Ls.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,N.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=u=>{r(u.target.result)},o.onblocked=()=>{i(new Yl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new ye(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new ye(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Yl(e,f))},o.onupgradeneeded=u=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.O(u.target.result,o.transaction,u.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,N.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{o.db=yield o.$(e);const g=yy.open(o.db,e,u?"readonly":"readwrite",r),y=i(g).next(b=>(g.P(),b)).catch(b=>(g.abort(b),te.reject(b))).toPromise();return y.catch(()=>{}),yield g.R,y}catch(g){const y=g,b="FirebaseError"!==y.name&&f<3;if(Pe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),o.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class TO{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return xa(this.L.delete())}}class Yl extends ye{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Li(n){return"IndexedDbTransactionError"===n.name}class ZT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xa(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),xa(this.store.add(e))}get(e){return xa(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),xa(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),xa(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(u,f)=>{o.push(f)}).next(()=>o)}{const i=this.store.getAll(r.range);return new te((o,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{o(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((i,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,u,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new te((r,i)=>{t.onerror=o=>{const u=gI(o.target.error);i(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}W(e,t){const r=[];return new te((i,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const g=new TO(f),y=t(f.primaryKey,f.value,g);if(y instanceof te){const b=y.catch(M=>(g.done(),te.reject(M)));r.push(b)}g.isDone?i():null===g.K?f.continue():f.continue(g.K)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xa(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=gI(r.target.error);t(i)}})}let vy=!1;function gI(n){const e=Ls.S((0,z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vy||(vy=!0,setTimeout(()=>{throw r},0)),r}}return n}class AL{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,N.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Li(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield dr(r)}yield t.et(6e4)}))}}class qT{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,N.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return te.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Pe("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(f=>{i-=f,r.add(u)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,o)).next(f=>(Pe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const u=GT(o);my(u,r)>0&&(r=u)}),new ds(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let hs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Zp(n){return null==n}function qp(n){return 0===n&&1/n==-1/0}function WT(n){return"number"==typeof n&&Number.isInteger(n)&&!qp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mI(e)),e=OL(n.get(t),e);return mI(e)}function OL(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function mI(n){return n+"\x01\x01"}function Yo(n){const e=n.length;if(rt(e>=2),2===e)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const u=n.indexOf("\x01",o);switch((u<0||u>t)&&et(),n.charAt(u+1)){case"\x01":const f=n.substring(o,u);let g;0===i.length?g=f:(i+=f,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(o,u),i+="\0";break;case"\x11":i+=n.substring(o,u+1);break;default:et()}o=u+2}return new qt(r)}const _I=["userId","batchId"];function yI(n,e){return[n,li(e)]}function Cy(n,e,t){return[n,li(e),t]}const KT={},YT=["prefixPath","collectionGroup","readTime","documentId"],DO=["prefixPath","collectionGroup","documentId"],QT=["collectionGroup","readTime","prefixPath","documentId"],JT=["canonicalId","targetId"],jd=["targetId","path"],wy=["path","targetId"],XT=["collectionId","parent"],eD=["indexId","uid"],SO=["uid","sequenceNumber"],PO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kL=["indexId","uid","orderedDocumentKey"],tD=["userId","collectionPath","documentId"],xO=["userId","collectionPath","largestBatchId"],AO=["userId","collectionGroup","largestBatchId"],OO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NL=[...OO,"documentOverlays"],kO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vI=kO,NO=[...vI,"indexConfiguration","indexState","indexEntries"];class CI extends MO{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Hr(n,e){const t=qe(n);return Ls.M(t.ht,e)}function RO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ql(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function FO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xn{constructor(e,t){this.comparator=e,this.root=t||ui.EMPTY}insert(e,t){return new xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wI(this.root,e,this.comparator,!1)}getReverseIterator(){return new wI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wI(this.root,e,this.comparator,!0)}}class wI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??ui.RED,this.left=i??ui.EMPTY,this.right=o??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ui(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ui.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1,ui.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ui(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nD(this.data.getIterator())}getIteratorFrom(e){return new nD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class nD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $d(n){return n.hasNext()?n.getNext():void 0}class Ui{constructor(e){this.fields=e,e.sort(tr.comparator)}static empty(){return new Ui([])}unionWith(e){let t=new vn(tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ui(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class bc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new bc("Invalid base64 string: "+i):i}}(e);return new hr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new hr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hr.EMPTY_BYTE_STRING=new hr("");const II=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ec(n){if(rt(!!n),"string"==typeof n){let e=0;const t=II.exec(n);if(rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(n.seconds),nanos:jn(n.nanos)}}function jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function mo(n){return"string"==typeof n?hr.fromBase64String(n):hr.fromUint8Array(n)}function Jl(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bI(n){const e=n.mapValue.fields.__previous_value__;return Jl(e)?bI(e):e}function Iy(n){const e=Ec(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class RL{constructor(e,t,r,i,o,u,f,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y}}class Aa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Aa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}const Mc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},by={nullValue:"NULL_VALUE"};function Tc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jl(n)?4:LO(n)?9007199254740991:10:et()}function Qo(n,e){if(n===e)return!0;const t=Tc(n);if(t!==Tc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Iy(n).isEqual(Iy(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ec(r.timestampValue),u=Ec(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,mo(n.bytesValue).isEqual(mo(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return jn(r.geoPointValue.latitude)===jn(i.geoPointValue.latitude)&&jn(r.geoPointValue.longitude)===jn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return jn(r.integerValue)===jn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=jn(r.doubleValue),u=jn(i.doubleValue);return o===u?qp(o)===qp(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return Bd(n.arrayValue.values||[],e.arrayValue.values||[],Qo);case 10:return function(r,i){const o=r.mapValue.fields||{},u=i.mapValue.fields||{};if(RO(o)!==RO(u))return!1;for(const f in o)if(o.hasOwnProperty(f)&&(void 0===u[f]||!Qo(o[f],u[f])))return!1;return!0}(n,e);default:return et()}var i}function Hd(n,e){return void 0!==(n.values||[]).find(t=>Qo(t,e))}function Oa(n,e){if(n===e)return 0;const t=Tc(n),r=Tc(e);if(t!==r)return bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return bt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const u=jn(i.integerValue||i.doubleValue),f=jn(o.integerValue||o.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return EI(n.timestampValue,e.timestampValue);case 4:return EI(Iy(n),Iy(e));case 5:return bt(n.stringValue,e.stringValue);case 6:return function(i,o){const u=mo(i),f=mo(o);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),f=o.split("/");for(let g=0;g<u.length&&g<f.length;g++){const y=bt(u[g],f[g]);if(0!==y)return y}return bt(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const u=bt(jn(i.latitude),jn(o.latitude));return 0!==u?u:bt(jn(i.longitude),jn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const u=i.values||[],f=o.values||[];for(let g=0;g<u.length&&g<f.length;++g){const y=Oa(u[g],f[g]);if(y)return y}return bt(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Mc.mapValue&&o===Mc.mapValue)return 0;if(i===Mc.mapValue)return 1;if(o===Mc.mapValue)return-1;const u=i.fields||{},f=Object.keys(u),g=o.fields||{},y=Object.keys(g);f.sort(),y.sort();for(let b=0;b<f.length&&b<y.length;++b){const M=bt(f[b],y[b]);if(0!==M)return M;const S=Oa(u[f[b]],g[y[b]]);if(0!==S)return S}return bt(f.length,y.length)}(n.mapValue,e.mapValue);default:throw et()}}function EI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return bt(n,e);const t=Ec(n),r=Ec(e),i=bt(t.seconds,r.seconds);return 0!==i?i:bt(t.nanos,r.nanos)}function zd(n){return MI(n)}function MI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ec(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?mo(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const u of r.values||[])o?o=!1:i+=",",i+=MI(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",u=!0;for(const f of i)u?u=!1:o+=",",o+=`${f}:${MI(r.fields[f])}`;return o+"}"}(n.mapValue):et();var e}function ka(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iD(n){return!!n&&"integerValue"in n}function Gd(n){return!!n&&"arrayValue"in n}function Ey(n){return!!n&&"nullValue"in n}function sD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function My(n){return!!n&&"mapValue"in n}function Ty(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ql(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ty(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ty(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function UO(n){return"nullValue"in n?by:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ka(Aa.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function BO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ka(Aa.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Mc:et()}function oD(n,e){const t=Oa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function aD(n,e){const t=Oa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!My(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ty(t)}setAll(e){let t=tr.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=Ty(u):i.push(f.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());My(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];My(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ql(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new zr(Ty(this.value))}}function TI(n){const e=[];return Ql(n.fields,(t,r)=>{const i=new tr([t]);if(My(r)){const o=TI(r.mapValue).fields;if(0===o.length)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)}),new Ui(e)}class An{constructor(e,t,r,i,o,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=u,this.documentState=f}static newInvalidDocument(e){return new An(e,0,at.min(),at.min(),at.min(),zr.empty(),0)}static newFoundDocument(e,t,r,i){return new An(e,1,t,at.min(),r,i,0)}static newNoDocument(e,t){return new An(e,2,t,at.min(),at.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,at.min(),at.min(),zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(at.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Na{constructor(e,t){this.position=e,this.inclusive=t}}function DI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],u=n.position[i];if(r=o.field.isKeyField()?Ze.comparator(Ze.fromName(u.referenceValue),t.key):Oa(u,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function VO(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qo(n.position[t],e.position[t]))return!1;return!0}class Zd{constructor(e,t="asc"){this.field=e,this.dir=t}}function SI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class PI{}class jt extends PI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new HO(e,t,r):"array-contains"===t?new zO(e,r):"in"===t?new GO(e,r):"not-in"===t?new UL(e,r):"array-contains-any"===t?new BL(e,r):new jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new FL(e,r):new LL(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Oa(t,this.value)):null!==t&&Tc(this.value)===Tc(t)&&this.matchesComparison(Oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class pn extends PI{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new pn(e,t)}matches(e){return Ra(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ra(n){return"and"===n.op}function xI(n){return"or"===n.op}function AI(n){return OI(n)&&Ra(n)}function OI(n){for(const e of n.filters)if(e instanceof pn)return!1;return!0}function Dy(n){if(n instanceof jt)return n.field.canonicalString()+n.op.toString()+zd(n.value);if(AI(n))return n.filters.map(e=>Dy(e)).join(",");{const e=n.filters.map(t=>Dy(t)).join(",");return`${n.op}(${e})`}}function jO(n,e){return n instanceof jt?(t=n,(r=e)instanceof jt&&t.op===r.op&&t.field.isEqual(r.field)&&Qo(t.value,r.value)):n instanceof pn?function(t,r){return r instanceof pn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,u)=>i&&jO(o,r.filters[u]),!0)}(n,e):void et();var t,r}function cD(n,e){const t=n.filters.concat(e);return pn.create(t,n.op)}function $O(n){return n instanceof jt?`${(e=n).field.canonicalString()} ${e.op} ${zd(e.value)}`:n instanceof pn?function(e){return e.op.toString()+" {"+e.getFilters().map($O).join(" ,")+"}"}(n):"Filter";var e}class HO extends jt{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class FL extends jt{constructor(e,t){super(e,"in",t),this.keys=lD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class LL extends jt{constructor(e,t){super(e,"not-in",t),this.keys=lD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class zO extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gd(t)&&Hd(t.arrayValue,this.value)}}class GO extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Hd(this.value.arrayValue,t)}}class UL extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Hd(this.value.arrayValue,t)}}class BL extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hd(this.value.arrayValue,r))}}class VL{constructor(e,t=null,r=[],i=[],o=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=f,this.dt=null}}function uD(n,e=null,t=[],r=[],i=null,o=null,u=null){return new VL(n,e,t,r,i,o,u)}function Xl(n){const e=qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Dy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Zp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zd(r)).join(",")),e.dt=t}return e.dt}function Sy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!SI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VO(n.startAt,e.startAt)&&VO(n.endAt,e.endAt)}function kI(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function NI(n,e){return n.filters.filter(t=>t instanceof jt&&t.field.isEqual(e))}function ZO(n,e,t){let r=by,i=!0;for(const o of NI(n,e)){let u=by,f=!0;switch(o.op){case"<":case"<=":u=UO(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,f=!1;break;case"!=":case"not-in":u=by}oD({value:r,inclusive:i},{value:u,inclusive:f})<0&&(r=u,i=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];oD({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function qO(n,e,t){let r=Mc,i=!0;for(const o of NI(n,e)){let u=Mc,f=!0;switch(o.op){case">=":case">":u=BO(o.value),f=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,f=!1;break;case"!=":case"not-in":u=Mc}aD({value:r,inclusive:i},{value:u,inclusive:f})>0&&(r=u,i=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];aD({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Fa{constructor(e,t=null,r=[],i=[],o=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=f,this.endAt=g,this.wt=null,this._t=null}}function WO(n,e,t,r,i,o,u,f){return new Fa(n,e,t,r,i,o,u,f)}function s(n){return new Fa(n)}function a(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function l(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function d(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function h(n){return null!==n.collectionGroup}function p(n){const e=qe(n);if(null===e.wt){e.wt=[];const t=d(e),r=l(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Zd(t)),e.wt.push(new Zd(tr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Zd(tr.keyField(),o))}}}return e.wt}function v(n){const e=qe(n);if(!e._t)if("F"===e.limitType)e._t=uD(e.path,e.collectionGroup,p(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of p(e))t.push(new Zd(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new Na(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Na(e.startAt.position,e.startAt.inclusive):null;e._t=uD(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function C(n,e){e.getFirstInequalityField(),d(n);const t=n.filters.concat([e]);return new Fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function E(n,e,t){return new Fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function T(n,e){return Sy(v(n),v(e))&&n.limitType===e.limitType}function P(n){return`${Xl(v(n))}|lt:${n.limitType}`}function F(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>$O(r)).join(", ")}]`),Zp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zd(r)).join(",")),`Target(${t})`}(v(n))}; limitType=${n.limitType})`}function q(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of p(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,u){const f=DI(i,o,u);return i.inclusive?f<=0:f<0}(t.startAt,p(t),r)||t.endAt&&!function(i,o,u){const f=DI(i,o,u);return i.inclusive?f>=0:f>0}(t.endAt,p(t),r)));var t,r}function Y(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ue(n){return(e,t)=>{let r=!1;for(const i of p(n)){const o=De(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function De(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,o,u){const f=o.data.field(i),g=u.data.field(i);return null!==f&&null!==g?Oa(f,g):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}class $e{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ql(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return FO(this.inner)}size(){return this.innerSize}}const ct=new xn(Ze.comparator);function fe(){return ct}const Ct=new xn(Ze.comparator);function St(...n){let e=Ct;for(const t of n)e=e.insert(t.key,t);return e}function ln(n){let e=Ct;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Yn(){return Xo()}function Jo(){return Xo()}function Xo(){return new $e(n=>n.toString(),(n,e)=>n.isEqual(e))}const RI=new xn(Ze.comparator),KO=new vn(Ze.comparator);function At(...n){let e=KO;for(const t of n)e=e.add(t);return e}const f7=new vn(bt);function YO(){return f7}function jL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qp(e)?"-0":e}}function $L(n){return{integerValue:""+n}}function HL(n,e){return WT(e)?$L(e):jL(n,e)}class dD{constructor(){this._=void 0}}function p7(n,e,t){return n instanceof Py?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Jl(i)&&(i=bI(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Kp?GL(n,e):n instanceof Yp?ZL(n,e):function(r,i){const o=zL(r,i),u=qL(o)+qL(r.gt);return iD(o)&&iD(r.gt)?$L(u):jL(r.serializer,u)}(n,e)}function g7(n,e,t){return n instanceof Kp?GL(n,e):n instanceof Yp?ZL(n,e):t}function zL(n,e){return n instanceof xy?iD(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Py extends dD{}class Kp extends dD{constructor(e){super(),this.elements=e}}function GL(n,e){const t=WL(e);for(const r of n.elements)t.some(i=>Qo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Yp extends dD{constructor(e){super(),this.elements=e}}function ZL(n,e){let t=WL(e);for(const r of n.elements)t=t.filter(i=>!Qo(i,r));return{arrayValue:{values:t}}}class xy extends dD{constructor(e,t){super(),this.serializer=e,this.gt=t}}function qL(n){return jn(n.integerValue||n.doubleValue)}function WL(n){return Gd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class FI{constructor(e,t){this.field=e,this.transform=t}}class _7{constructor(e,t){this.version=e,this.transformResults=t}}class nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class fD{}function KL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Oy(n.key,nr.none()):new Ay(n.key,n.data,nr.none());{const t=n.data,r=zr.empty();let i=new vn(tr.comparator);for(let o of e.fields)if(!i.has(o)){let u=t.field(o);null===u&&o.length>1&&(o=o.popLast(),u=t.field(o)),null===u?r.delete(o):r.set(o,u),i=i.add(o)}return new eu(n.key,r,new Ui(i.toArray()),nr.none())}}function y7(n,e,t){n instanceof Ay?function(r,i,o){const u=r.value.clone(),f=JL(r.fieldTransforms,i,o.transformResults);u.setAll(f),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof eu?function(r,i,o){if(!hD(r.precondition,i))return void i.convertToUnknownDocument(o.version);const u=JL(r.fieldTransforms,i,o.transformResults),f=i.data;f.setAll(QL(r)),f.setAll(u),i.convertToFoundDocument(o.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function LI(n,e,t,r){return n instanceof Ay?function(i,o,u,f){if(!hD(i.precondition,o))return u;const g=i.value.clone(),y=XL(i.fieldTransforms,f,o);return g.setAll(y),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof eu?function(i,o,u,f){if(!hD(i.precondition,o))return u;const g=XL(i.fieldTransforms,f,o),y=o.data;return y.setAll(QL(i)),y.setAll(g),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(u=t,hD(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u);var o,u}function v7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=zL(r.transform,i||null);null!=o&&(null===t&&(t=zr.empty()),t.set(r.field,o))}return t||null}function YL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Bd(t,r,(i,o)=>function m7(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Kp&&r instanceof Kp||t instanceof Yp&&r instanceof Yp?Bd(t.elements,r.elements,Qo):t instanceof xy&&r instanceof xy?Qo(t.gt,r.gt):t instanceof Py&&r instanceof Py);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ay extends fD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class eu extends fD{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function QL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function JL(n,e,t){const r=new Map;rt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],u=o.transform,f=e.data.field(o.field);r.set(o.field,g7(u,f,t[i]))}return r}function XL(n,e,t){const r=new Map;for(const i of n){const o=i.transform,u=t.data.field(i.field);r.set(i.field,p7(o,u,e))}return r}class Oy extends fD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QO extends fD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class JO{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&y7(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=LI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=LI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Jo();return this.mutations.forEach(i=>{const o=e.get(i.key),u=o.overlayedDocument;let f=this.applyToLocalView(u,o.mutatedFields);f=t.has(i.key)?null:f;const g=KL(u,f);null!==g&&r.set(i.key,g),u.isValidDocument()||u.convertToNoDocument(at.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),At())}isEqual(e){return this.batchId===e.batchId&&Bd(this.mutations,e.mutations,(t,r)=>YL(t,r))&&Bd(this.baseMutations,e.baseMutations,(t,r)=>YL(t,r))}}class XO{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length);let i=RI;const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new XO(e,t,r,i)}}class e2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class w7{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gr,en;function e4(n){switch(n){default:return et();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function t4(n){if(void 0===n)return br("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Gr.OK:return ae.OK;case Gr.CANCELLED:return ae.CANCELLED;case Gr.UNKNOWN:return ae.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return ae.INTERNAL;case Gr.UNAVAILABLE:return ae.UNAVAILABLE;case Gr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Gr.NOT_FOUND:return ae.NOT_FOUND;case Gr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Gr.ABORTED:return ae.ABORTED;case Gr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Gr.DATA_LOSS:return ae.DATA_LOSS;default:return et()}}(en=Gr||(Gr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class t2{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return pD}static getOrCreateInstance(){return null===pD&&(pD=new t2),pD}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let pD=null;function n4(){return new TextEncoder}const I7=new Ud([4294967295,4294967295],0);function r4(n){const e=n4().encode(n),t=new mO;return t.update(e),new Uint8Array(t.digest())}function i4(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ud([t,r],0),new Ud([i,o],0)]}class n2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new UI(`Invalid padding: ${t}`);if(r<0)throw new UI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new UI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new UI(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Ud.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Ud.fromNumber(r)));return 1===i.compare(I7)&&(i=new Ud([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=r4(e),[r,i]=i4(t);for(let o=0;o<this.hashCount;o++){const u=this.Et(r,i,o);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new n2(o,i,t);return r.forEach(f=>u.insert(f)),u}insert(e){if(0===this.It)return;const t=r4(e),[r,i]=i4(t);for(let o=0;o<this.hashCount;o++){const u=this.Et(r,i,o);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class UI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class BI{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,VI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new BI(at.min(),i,new xn(bt),fe(),At())}}class VI{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new VI(r,t,At(),At(),At())}}class gD{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class s4{constructor(e,t){this.targetId=e,this.Vt=t}}class o4{constructor(e,t,r=hr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class a4{constructor(){this.St=0,this.Dt=l4(),this.Ct=hr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=At(),t=At(),r=At();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new VI(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=l4()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class b7{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=fe(),this.zt=c4(),this.Wt=new xn(bt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const u=o.target;if(kI(u))if(0===i){const f=new Ze(u.path);this.Yt(r,f,An.newNoDocument(f,at.min()))}else rt(1===i);else{const f=this.ie(r);if(f!==i){const g=this.re(e,f);0!==g&&(this.ee(r),this.Wt=this.Wt.insert(r,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=t2.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,b,M){var S,R,Z,Q,X,Se;const ze={localCacheCount:b,existenceFilterCount:M.count},Ne=M.unchangedNames;return Ne&&(ze.bloomFilter={applied:0===y,hashCount:null!==(S=Ne?.hashCount)&&void 0!==S?S:0,bitmapLength:null!==(Q=null===(Z=null===(R=Ne?.bits)||void 0===R?void 0:R.bitmap)||void 0===Z?void 0:Z.length)&&void 0!==Q?Q:0,padding:null!==(Se=null===(X=Ne?.bits)||void 0===X?void 0:X.padding)&&void 0!==Se?Se:0}),ze}(g,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:u=0},hashCount:f=0}=r;let g,y;try{g=mo(o).toUint8Array()}catch(b){if(b instanceof bc)return go("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{y=new n2(g,u,f)}catch(b){return go(b instanceof UI?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const u=this.Gt.ue(),f=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;t.vt(f)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,u)=>{const f=this.se(u);if(f){if(o.current&&kI(f.target)){const g=new Ze(f.target.path);null!==this.jt.get(g)||this.ae(u,g)||this.Yt(u,g,An.newNoDocument(g,e))}o.Mt&&(t.set(u,o.Ot()),o.Ft())}});let r=At();this.zt.forEach((o,u)=>{let f=!0;u.forEachWhile(g=>{const y=this.se(g);return!y||"TargetPurposeLimboResolution"===y.purpose||(f=!1,!1)}),f&&(r=r.add(o))}),this.jt.forEach((o,u)=>u.setReadTime(e));const i=new BI(e,t,this.Wt,this.jt,r);return this.jt=fe(),this.zt=c4(),this.Wt=new xn(bt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new a4,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new vn(bt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new a4),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function c4(){return new xn(Ze.comparator)}function l4(){return new xn(Ze.comparator)}const E7={asc:"ASCENDING",desc:"DESCENDING"},M7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T7={and:"AND",or:"OR"};class D7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function r2(n,e){return n.useProto3Json||Zp(e)?e:{value:e}}function ky(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function S7(n,e){return ky(n,e.toTimestamp())}function kr(n){return rt(!!n),at.fromTimestamp(function(e){const t=Ec(e);return new Vn(t.seconds,t.nanos)}(n))}function i2(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function d4(n){const e=qt.fromString(n);return rt(C4(e)),e}function jI(n,e){return i2(n.databaseId,e.path)}function Dc(n,e){const t=d4(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(f4(t))}function s2(n,e){return i2(n.databaseId,e)}function h4(n){const e=d4(n);return 4===e.length?qt.emptyPath():f4(e)}function $I(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function f4(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function p4(n,e,t){return{name:jI(n,e),fields:t.value.mapValue.fields}}function g4(n,e,t){const r=Dc(n,e.name),i=kr(e.updateTime),o=e.createTime?kr(e.createTime):at.min(),u=new zr({mapValue:{fields:e.fields}}),f=An.newFoundDocument(r,i,o,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function HI(n,e){let t;if(e instanceof Ay)t={update:p4(n,e.key,e.value)};else if(e instanceof Oy)t={delete:jI(n,e.key)};else if(e instanceof eu)t={update:p4(n,e.key,e.data),updateMask:F7(e.fieldMask)};else{if(!(e instanceof QO))return et();t={verify:jI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Py)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Kp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Yp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof xy)return{fieldPath:o.field.canonicalString(),increment:u.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:S7(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function o2(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?nr.updateTime(kr(i.updateTime)):void 0!==i.exists?nr.exists(i.exists):nr.none():nr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,u){let f=null;"setToServerValue"in u?(rt("REQUEST_TIME"===u.setToServerValue),f=new Py):"appendMissingElements"in u?f=new Kp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new Yp(u.removeAllFromArray.values||[]):"increment"in u?f=new xy(o,u.increment):et();const g=tr.fromServerFormat(u.fieldPath);return new FI(g,f)}(n,i)):[];var i;if(e.update){const i=Dc(n,e.update.name),o=new zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Ui((e.updateMask.fieldPaths||[]).map(y=>tr.fromServerFormat(y)));return new eu(i,o,u,t,r)}return new Ay(i,o,t,r)}if(e.delete){const i=Dc(n,e.delete);return new Oy(i,t)}if(e.verify){const i=Dc(n,e.verify);return new QO(i,t)}return et()}function m4(n,e){return{documents:[s2(n,e.path)]}}function a2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=s2(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=s2(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return v4(pn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(g){if(0!==g.length)return g.map(y=>{return{field:qd((b=y).field),direction:k7(b.dir)};var b})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=r2(n,e.limit);var f,g;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function _4(n){let e=h4(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let o=[];t.where&&(o=function(b){const M=y4(b);return M instanceof pn&&AI(M)?M.getFilters():[M]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(b=>{return new Zd(Ny((M=b).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(b){let M;return M="object"==typeof b?b.value:b,Zp(M)?null:M}(t.limit));let g=null;var b;t.startAt&&(g=new Na((b=t.startAt).values||[],!!b.before));let y=null;return t.endAt&&(y=function(b){return new Na(b.values||[],!b.before)}(t.endAt)),WO(e,i,u,o,f,"F",g,y)}function y4(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ny(e.unaryFilter.field);return jt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Ny(e.unaryFilter.field);return jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ny(e.unaryFilter.field);return jt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ny(e.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?jt.create(Ny((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return pn.create(e.compositeFilter.filters.map(t=>y4(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function k7(n){return E7[n]}function N7(n){return M7[n]}function R7(n){return T7[n]}function qd(n){return{fieldPath:n.canonicalString()}}function Ny(n){return tr.fromServerFormat(n.fieldPath)}function v4(n){return n instanceof jt?function(e){if("=="===e.op){if(sD(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NAN"}};if(Ey(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sD(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NOT_NAN"}};if(Ey(e.value))return{unaryFilter:{field:qd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qd(e.field),op:N7(e.op),value:e.value}}}(n):n instanceof pn?function(e){const t=e.getFilters().map(r=>v4(r));return 1===t.length?t[0]:{compositeFilter:{op:R7(e.op),filters:t}}}(n):et()}function F7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function C4(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class tu{constructor(e,t,r,i,o=at.min(),u=at.min(),f=hr.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new tu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class w4{constructor(e){this.fe=e}}function I4(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:jI(i=n.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:ky(i,o.version.toTimestamp()),createTime:ky(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qp(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Qp(e.version)}}var i,o;return r}function mD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Jp(n){const e=new Vn(n.seconds,n.nanoseconds);return at.fromTimestamp(e)}function Xp(n,e){const t=(e.baseMutations||[]).map(o=>o2(n.fe,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>o2(n.fe,o)),i=Vn.fromMillis(e.localWriteTimeMs);return new JO(e.batchId,i,t,r)}function zI(n){const e=Jp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Jp(n.lastLimboFreeSnapshotVersion):at.min();let r;var i;return void 0!==n.query.documents?(rt(1===(i=n.query).documents.length),r=v(s(h4(i.documents[0])))):r=v(_4(n.query)),new tu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,hr.fromBase64String(n.resumeToken))}function b4(n,e){const t=Qp(e.snapshotVersion),r=Qp(e.lastLimboFreeSnapshotVersion);let i;i=kI(e.target)?m4(n.fe,e.target):a2(n.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xl(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function c2(n){const e=_4({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?E(e,e.limit,"L"):e}function l2(n,e){return new e2(e.largestBatchId,o2(n.fe,e.overlayMutation))}function E4(n,e){const t=e.path.lastSegment();return[n,li(e.path.popLast()),t]}function M4(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Qp(r.readTime),documentKey:li(r.documentKey.path),largestBatchId:r.largestBatchId}}class U7{getBundleMetadata(e,t){return T4(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Jp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return T4(e).put({bundleId:(r=t).id,createTime:Qp(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return D4(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:c2(i.bundledQuery),readTime:Jp(i.readTime)};var i})}saveNamedQuery(e,t){return D4(e).put({name:(r=t).name,readTime:Qp(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function T4(n){return Hr(n,"bundles")}function D4(n){return Hr(n,"namedQueries")}class _D{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new _D(e,t.uid||"")}getOverlay(e,t){return GI(e).get(E4(this.userId,t)).next(r=>r?l2(this.serializer,r):null)}getOverlays(e,t){const r=Yn();return te.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,u)=>{const f=new e2(t,u);i.push(this.we(e,f))}),te.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(li(u.getCollectionPath())));const o=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(GI(e).J("collectionPathOverlayIndex",f))}),te.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Yn(),o=li(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return GI(e).j("collectionPathOverlayIndex",u).next(f=>{for(const g of f){const y=l2(this.serializer,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Yn();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return GI(e).X({index:"collectionGroupOverlayIndex",range:f},(g,y,b)=>{const M=l2(this.serializer,y);o.size()<i||M.largestBatchId===u?(o.set(M.getKey(),M),u=M.largestBatchId):b.done()}).next(()=>o)}we(e,t){return GI(e).put(function(r,i,o){const[u,f,g]=E4(i,o.mutation.key);return{userId:i,collectionPath:f,documentId:g,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:HI(r.fe,o.mutation)}}(this.serializer,this.userId,t))}}function GI(n){return Hr(n,"documentOverlays")}class eg{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(jn(e.integerValue));else if("doubleValue"in e){const r=jn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),qp(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(mo(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?LO(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ze.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function B7(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function S4(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=B7(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}eg.Ve=new eg;class V7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=S4(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=S4(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class j7{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class $7{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class ZI{constructor(){this.je=new V7,this.ze=new j7(this.je),this.We=new $7(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class tg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new tg(this.indexId,this.documentKey,this.arrayValue,r)}}function Wd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=P4(n.arrayValue,e.arrayValue),0!==t?t:(t=P4(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function P4(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class H7{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){rt(e.collectionGroup===this.collectionId);const t=fI(e);if(void 0!==t&&!this.en(t))return!1;const r=Kl(e);let i=new Set,o=0,u=0;for(;o<r.length&&this.en(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[o];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[u++],f))return!1}++o}for(;o<r.length;++o)if(u>=this.Ye.length||!this.sn(this.Ye[u++],r[o]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function x4(n){var e,t;if(rt(n instanceof jt||n instanceof pn),n instanceof jt){if(n instanceof GO){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>jt.create(n.field,"==",o)))||[];return pn.create(i,"or")}return n}const r=n.filters.map(i=>x4(i));return pn.create(r,n.op)}function z7(n){if(0===n.getFilters().length)return[];const e=h2(x4(n));return rt(A4(e)),u2(e)||d2(e)?[e]:e.getFilters()}function u2(n){return n instanceof jt}function d2(n){return n instanceof pn&&AI(n)}function A4(n){return u2(n)||d2(n)||function(e){if(e instanceof pn&&xI(e)){for(const t of e.getFilters())if(!u2(t)&&!d2(t))return!1;return!0}return!1}(n)}function h2(n){if(rt(n instanceof jt||n instanceof pn),n instanceof jt)return n;if(1===n.filters.length)return h2(n.filters[0]);const e=n.filters.map(r=>h2(r));let t=pn.create(e,n.op);return t=yD(t),A4(t)?t:(rt(t instanceof pn),rt(Ra(t)),rt(t.filters.length>1),t.filters.reduce((r,i)=>f2(r,i)))}function f2(n,e){let t;return rt(n instanceof jt||n instanceof pn),rt(e instanceof jt||e instanceof pn),t=n instanceof jt?e instanceof jt?pn.create([n,e],"and"):O4(n,e):e instanceof jt?O4(e,n):function(r,i){if(rt(r.filters.length>0&&i.filters.length>0),Ra(r)&&Ra(i))return cD(r,i.getFilters());const o=xI(r)?r:i,u=xI(r)?i:r,f=o.filters.map(g=>f2(g,u));return pn.create(f,"or")}(n,e),yD(t)}function O4(n,e){if(Ra(e))return cD(e,n.getFilters());{const t=e.filters.map(r=>f2(n,r));return pn.create(t,"or")}}function yD(n){if(rt(n instanceof jt||n instanceof pn),n instanceof jt)return n;const e=n.getFilters();if(1===e.length)return yD(e[0]);if(OI(n))return n;const t=e.map(i=>yD(i)),r=[];return t.forEach(i=>{i instanceof jt?r.push(i):i instanceof pn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:pn.create(r,n.op)}class G7{constructor(){this.rn=new p2}addToCollectionParentIndex(e,t){return this.rn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(ds.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class p2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(qt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(qt.comparator)).toArray()}}const vD=new Uint8Array(0);class Z7{constructor(e,t){this.user=e,this.databaseId=t,this.on=new p2,this.un=new $e(r=>Xl(r),(r,i)=>Sy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const o={collectionId:r,parent:li(i)};return k4(e).put(o)}return te.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[zT(t),""],!1,!0);return k4(e).j(i).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(Yo(u.parent))}return r})}addFieldIndex(e,t){const r=CD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var u;delete i.indexId;const o=r.add(i);if(t.indexState){const u=WI(e);return o.next(f=>{u.put(M4(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=CD(e),i=WI(e),o=qI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=qI(e);let i=!0;const o=new Map;return te.forEach(this.cn(t),u=>this.an(e,u).next(f=>{i&&(i=!!f),o.set(u,f)})).next(()=>{if(i){let u=At();const f=[];return te.forEach(o,(g,y)=>{var b;Pe("IndexedDbIndexManager",`Using index ${b=g,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Ne=>`${Ne.fieldPath}:${Ne.kind}`).join(",")}`} to execute ${Xl(t)}`);const M=function(Ne,Ye){const gt=fI(Ye);if(void 0===gt)return null;for(const Pt of NI(Ne,gt.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(y,g),S=function(Ne,Ye){const gt=new Map;for(const Pt of Kl(Ye))for(const Rr of NI(Ne,Pt.fieldPath))switch(Rr.op){case"==":case"in":gt.set(Pt.fieldPath.canonicalString(),Rr.value);break;case"not-in":case"!=":return gt.set(Pt.fieldPath.canonicalString(),Rr.value),Array.from(gt.values())}return null}(y,g),R=function(Ne,Ye){const gt=[];let Pt=!0;for(const Rr of Kl(Ye)){const Vs=0===Rr.kind?ZO(Ne,Rr.fieldPath,Ne.startAt):qO(Ne,Rr.fieldPath,Ne.startAt);gt.push(Vs.value),Pt&&(Pt=Vs.inclusive)}return new Na(gt,Pt)}(y,g),Z=function(Ne,Ye){const gt=[];let Pt=!0;for(const Rr of Kl(Ye)){const Vs=0===Rr.kind?qO(Ne,Rr.fieldPath,Ne.endAt):ZO(Ne,Rr.fieldPath,Ne.endAt);gt.push(Vs.value),Pt&&(Pt=Vs.inclusive)}return new Na(gt,Pt)}(y,g),Q=this.hn(g,y,R),X=this.hn(g,y,Z),Se=this.ln(g,y,S),ze=this.fn(g.indexId,M,Q,R.inclusive,X,Z.inclusive,Se);return te.forEach(ze,Ne=>r.H(Ne,t.limit).next(Ye=>{Ye.forEach(gt=>{const Pt=Ze.fromSegments(gt.documentKey);u.has(Pt)||(u=u.add(Pt),f.push(Pt))})}))}).next(()=>f)}return te.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:z7(pn.create(e.filters,"and")).map(r=>uD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,o,u,f){const g=(null!=t?t.length:1)*Math.max(r.length,o.length),y=g/(null!=t?t.length:1),b=[];for(let M=0;M<g;++M){const S=t?this.dn(t[M/y]):vD,R=this.wn(e,S,r[M%y],i),Z=this._n(e,S,o[M%y],u),Q=f.map(X=>this.wn(e,S,X,!0));b.push(...this.createRange(R,Z,Q))}return b}wn(e,t,r,i){const o=new tg(e,Ze.empty(),t,r);return i?o:o.Je()}_n(e,t,r,i){const o=new tg(e,Ze.empty(),t,r);return i?o.Je():o}an(e,t){const r=new H7(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let u=null;for(const f of o)r.tn(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u})}getIndexType(e,t){let r=2;const i=this.cn(t);return te.forEach(i,o=>this.an(e,o).next(u=>{u?0!==r&&u.fields.length<function(f){let g=new vn(tr.comparator),y=!1;for(const b of f.filters)for(const M of b.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?y=!0:g=g.add(M.field));for(const b of f.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new ZI;for(const i of Kl(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const u=r.He(i.kind);eg.Ve._e(o,u)}return r.Qe()}dn(e){const t=new ZI;return eg.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new ZI;return eg.Ve._e(ka(this.databaseId,t),r.He(function(i){const o=Kl(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new ZI);let o=0;for(const u of Kl(e)){const f=r[o++];for(const g of i)if(this.yn(t,u.fieldPath)&&Gd(f))i=this.pn(i,u,f);else{const y=g.He(u.kind);eg.Ve._e(f,y)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],o=[];for(const u of r.arrayValue.values||[])for(const f of i){const g=new ZI;g.seed(f.Qe()),eg.Ve._e(u,g.He(t.kind)),o.push(g)}return o}yn(e,t){return!!e.filters.find(r=>r instanceof jt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=CD(e),i=WI(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const u=[];return te.forEach(o,f=>i.get([f.indexId,this.uid]).next(g=>{u.push(function(y,b){const M=b?new Vd(b.sequenceNumber,new ds(Jp(b.readTime),new Ze(Yo(b.documentKey)),b.largestBatchId)):Vd.empty(),S=y.fields.map(([R,Z])=>new py(tr.fromServerFormat(R),Z));return new fy(y.indexId,y.collectionGroup,S,M)}(f,g))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=CD(e),o=WI(e);return this.Tn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>te.forEach(f,g=>o.put(M4(g.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(i,o)=>{const u=r.get(i.collectionGroup);return(u?te.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),te.forEach(f,g=>this.En(e,i,g).next(y=>{const b=this.An(o,g);return y.isEqual(b)?te.resolve():this.vn(e,o,g,y,b)}))))})}Rn(e,t,r,i){return qI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return qI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=qI(e);let o=new vn(Wd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(u,f)=>{o=o.add(new tg(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>o)}An(e,t){let r=new vn(Wd);const i=this.mn(t,e);if(null==i)return r;const o=fI(t);if(null!=o){const u=e.data.field(o.fieldPath);if(Gd(u))for(const f of u.arrayValue.values||[])r=r.add(new tg(t.indexId,e.key,this.dn(f),i))}else r=r.add(new tg(t.indexId,e.key,vD,i));return r}vn(e,t,r,i,o){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,g,y,b,M){const S=f.getIterator(),R=g.getIterator();let Z=$d(S),Q=$d(R);for(;Z||Q;){let X=!1,Se=!1;if(Z&&Q){const ze=y(Z,Q);ze<0?Se=!0:ze>0&&(X=!0)}else null!=Z?Se=!0:X=!0;X?(b(Q),Q=$d(R)):Se?(M(Z),Z=$d(S)):(Z=$d(S),Q=$d(R))}}(i,o,Wd,f=>{u.push(this.Rn(e,t,r,f))},f=>{u.push(this.Pn(e,t,r,f))}),te.waitFor(u)}Tn(e){let t=1;return WI(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,f)=>Wd(u,f)).filter((u,f,g)=>!f||0!==Wd(u,g[f-1]));const i=[];i.push(e);for(const u of r){const f=Wd(u,e),g=Wd(u,t);if(0===f)i[0]=e.Je();else if(f>0&&g<0)i.push(u),i.push(u.Je());else if(g>0)break}i.push(t);const o=[];for(let u=0;u<i.length;u+=2){if(this.bn(i[u],i[u+1]))return[];o.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,vD,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,vD,[]]))}return o}bn(e,t){return Wd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(N4)}getMinOffset(e,t){return te.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||et())).next(N4)}}function k4(n){return Hr(n,"collectionParents")}function qI(n){return Hr(n,"indexEntries")}function CD(n){return Hr(n,"indexConfiguration")}function WI(n){return Hr(n,"indexState")}function N4(n){rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;my(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ds(e.readTime,e.documentKey,t)}const R4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class es{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new es(e,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function F4(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],u=IDBKeyRange.only(t.batchId);let f=0;const g=r.X({range:u},(b,M,S)=>(f++,S.delete()));o.push(g.next(()=>{rt(1===f)}));const y=[];for(const b of t.mutations){const M=Cy(e,b.key.path,t.batchId);o.push(i.delete(M)),y.push(b.key)}return te.waitFor(o).next(()=>y)}function wD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}es.DEFAULT_COLLECTION_PERCENTILE=10,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,es.DEFAULT=new es(41943040,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),es.DISABLED=new es(-1,0,0);class ID{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){rt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new ID(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kd(e).X({index:"userMutationsIndex",range:r},(i,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Ry(e),u=Kd(e);return u.add({}).next(f=>{rt("number"==typeof f);const g=new JO(f,t,r,i),y=function(S,R,Z){const Q=Z.baseMutations.map(Se=>HI(S.fe,Se)),X=Z.mutations.map(Se=>HI(S.fe,Se));return{userId:R,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:Q,mutations:X}}(this.serializer,this.userId,g),b=[];let M=new vn((S,R)=>bt(S.canonicalString(),R.canonicalString()));for(const S of i){const R=Cy(this.userId,S.key.path,f);M=M.add(S.key.path.popLast()),b.push(u.put(y)),b.push(o.put(R,KT))}return M.forEach(S=>{b.push(this.indexManager.addToCollectionParentIndex(e,S))}),e.addOnCommittedListener(()=>{this.Vn[f]=g.keys()}),te.waitFor(b).next(()=>g)})}lookupMutationBatch(e,t){return Kd(e).get(t).next(r=>r?(rt(r.userId===this.userId),Xp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?te.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Kd(e).X({index:"userMutationsIndex",range:i},(u,f,g)=>{f.userId===this.userId&&(rt(f.batchId>=r),o=Xp(this.serializer,f)),g.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Kd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kd(e).j("userMutationsIndex",t).next(r=>r.map(i=>Xp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=yI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ry(e).X({range:i},(u,f,g)=>{const[y,b,M]=u,S=Yo(b);if(y===this.userId&&t.path.isEqual(S))return Kd(e).get(M).next(R=>{if(!R)throw et();rt(R.userId===this.userId),o.push(Xp(this.serializer,R))});g.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(bt);const i=[];return t.forEach(o=>{const u=yI(this.userId,o.path),f=IDBKeyRange.lowerBound(u),g=Ry(e).X({range:f},(y,b,M)=>{const[S,R,Z]=y,Q=Yo(R);S===this.userId&&o.path.isEqual(Q)?r=r.add(Z):M.done()});i.push(g)}),te.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=yI(this.userId,r),u=IDBKeyRange.lowerBound(o);let f=new vn(bt);return Ry(e).X({range:u},(g,y,b)=>{const[M,S,R]=g,Z=Yo(S);M===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(f=f.add(R)):b.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Kd(e).get(o).next(u=>{if(null===u)throw et();rt(u.userId===this.userId),r.push(Xp(this.serializer,u))}))}),te.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return F4(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),te.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ry(e).X({range:r},(o,u,f)=>{if(o[0]===this.userId){const g=Yo(o[1]);i.push(g)}else f.done()}).next(()=>{rt(0===i.length)})})}containsKey(e,t){return L4(e,this.userId,t)}xn(e){return U4(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function L4(n,e,t){const r=yI(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return Ry(n).X({range:o,Y:!0},(f,g,y)=>{const[b,M,S]=f;b===e&&M===i&&(u=!0),y.done()}).next(()=>u)}function Kd(n){return Hr(n,"mutations")}function Ry(n){return Hr(n,"documentMutations")}function U4(n){return Hr(n,"mutationQueues")}class ng{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new ng(0)}static Mn(){return new ng(-1)}}class q7{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new ng(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>at.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fy(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Fy(e).X((u,f)=>{const g=zI(f);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,o.push(this.removeTargetData(e,g)))}).next(()=>te.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Fy(e).X((r,i)=>{const o=zI(i);t(o)})}$n(e){return B4(e).get("targetGlobalKey").next(t=>(rt(null!==t),t))}On(e,t){return B4(e).put("targetGlobalKey",t)}Fn(e,t){return Fy(e).put(b4(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Fy(e).X({range:i,index:"queryTargetsIndex"},(u,f,g)=>{const y=zI(f);Sy(t,y.target)&&(o=y,g.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Yd(e);return t.forEach(u=>{const f=li(u.path);i.push(o.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,u))}),te.waitFor(i)}removeMatchingKeys(e,t,r){const i=Yd(e);return te.forEach(t,o=>{const u=li(o.path);return te.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Yd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Yd(e);let o=At();return i.X({range:r,Y:!0},(u,f,g)=>{const y=Yo(u[1]),b=new Ze(y);o=o.add(b)}).next(()=>o)}containsKey(e,t){const r=li(t.path),i=IDBKeyRange.bound([r],[zT(r)],!1,!0);let o=0;return Yd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([u,f],g,y)=>{0!==u&&(o++,y.done())}).next(()=>o>0)}le(e,t){return Fy(e).get(t).next(r=>r?zI(r):null)}}function Fy(n){return Hr(n,"targets")}function B4(n){return Hr(n,"targetGlobal")}function Yd(n){return Hr(n,"targetDocuments")}function V4([n,e],[t,r]){const i=bt(n,t);return 0===i?bt(e,r):i}class W7{constructor(e){this.Ln=e,this.buffer=new vn(V4),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();V4(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class j4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,N.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Li(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield dr(r)}yield t.Qn(3e5)}))}}class K7{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(hs.ct);const r=new W7(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(R4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R4):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,o,u,f,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,u=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(o=M,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(y=Date.now(),VT()<=ki.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-b}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${o} targets in `+(g-f)+`ms\n\tRemoved ${M} documents in `+(y-g)+`ms\nTotal Duration: ${y-b}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:M})))}}class Y7{constructor(e,t){this.db=e,this.garbageCollector=function $4(n,e){return new K7(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return bD(e,r)}removeReference(e,t,r){return bD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return bD(e,t)}Xn(e,t){return function(r,i){let o=!1;return U4(r).Z(u=>L4(r,u,i).next(f=>(f&&(o=!0),te.resolve(!f)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(u,f)=>{if(f<=t){const g=this.Xn(e,u).next(y=>{if(!y)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,at.min()),Yd(e).delete([0,li(u.path)])))});i.push(g)}}).next(()=>te.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return bD(e,t)}Yn(e,t){const r=Yd(e);let i,o=hs.ct;return r.X({index:"documentTargetsIndex"},([u,f],{path:g,sequenceNumber:y})=>{0===u?(o!==hs.ct&&t(new Ze(Yo(i)),o),o=y,i=g):o=hs.ct}).next(()=>{o!==hs.ct&&t(new Ze(Yo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bD(n,e){return Yd(n).put((r=n.currentSequenceNumber,{targetId:0,path:li(e.path),sequenceNumber:r}));var r}class H4{constructor(){this.changes=new $e(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Q7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return rg(e).put(r)}removeEntry(e,t,r){return rg(e).delete(function(i,o){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],mD(o),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=An.newInvalidDocument(t);return rg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(KI(t))},(i,o)=>{r=this.ts(t,o)}).next(()=>r)}es(e,t){let r={size:0,document:An.newInvalidDocument(t)};return rg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(KI(t))},(i,o)=>{r={document:this.ts(t,o),size:wD(o)}}).next(()=>r)}getEntries(e,t){let r=fe();return this.ns(e,t,(i,o)=>{const u=this.ts(i,o);r=r.insert(i,u)}).next(()=>r)}ss(e,t){let r=fe(),i=new xn(Ze.comparator);return this.ns(e,t,(o,u)=>{const f=this.ts(o,u);r=r.insert(o,f),i=i.insert(o,wD(u))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return te.resolve();let i=new vn(q4);t.forEach(g=>i=i.add(g));const o=IDBKeyRange.bound(KI(i.first()),KI(i.last())),u=i.getIterator();let f=u.getNext();return rg(e).X({index:"documentKeyIndex",range:o},(g,y,b)=>{const M=Ze.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;f&&q4(f,M)<0;)r(f,null),f=u.getNext();f&&f.isEqual(M)&&(r(f,y),f=u.hasNext()?u.getNext():null),f?b.G(KI(f)):b.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,u=[o.popLast().toArray(),o.lastSegment(),mD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rg(e).j(IDBKeyRange.bound(u,f,!0)).next(g=>{let y=fe();for(const b of g){const M=this.ts(Ze.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);M.isFoundDocument()&&(q(t,M)||i.has(M.key))&&(y=y.insert(M.key,M))}return y})}getAllFromCollectionGroup(e,t,r,i){let o=fe();const u=Z4(t,r),f=Z4(t,ds.max());return rg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(g,y,b)=>{const M=this.ts(Ze.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(M.key,M),o.size===i&&b.done()}).next(()=>o)}newChangeBuffer(e){return new J7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return G4(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}Zn(e,t){return G4(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function L7(n,e){let t;if(e.document)t=g4(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=Jp(e.noDocument.readTime);t=An.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=Ze.fromSegments(e.unknownDocument.path),i=Jp(e.unknownDocument.version);t=An.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Vn(r[0],r[1]);return at.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(at.min()))return r}return An.newInvalidDocument(e)}}function z4(n){return new Q7(n)}class J7 extends H4{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new $e(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new vn((o,u)=>bt(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const f=this.us.get(o);if(t.push(this.os.removeEntry(e,o,f.readTime)),u.isValidDocument()){const g=I4(this.os.serializer,u);i=i.add(o.path.popLast());const y=wD(g);r+=y-f.size,t.push(this.os.addEntry(e,o,g))}else if(r-=f.size,this.trackRemovals){const g=I4(this.os.serializer,u.convertToNoDocument(at.min()));t.push(this.os.addEntry(e,o,g))}}),i.forEach(o=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.os.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((o,u)=>{this.us.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function G4(n){return Hr(n,"remoteDocumentGlobal")}function rg(n){return Hr(n,"remoteDocumentsV14")}function KI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Z4(n,e){const t=e.documentKey.path.toArray();return[n,mD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function q4(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=bt(t[o],r[o]),i)return i;return i=bt(t.length,r.length),i||(i=bt(t[t.length-2],r[r.length-2]),i||bt(t[t.length-1],r[r.length-1]))}class X7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class W4{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&LI(r.mutation,i,Ui.empty(),Vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,At()).next(()=>r))}getLocalViewOfDocuments(e,t,r=At()){const i=Yn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let u=St();return o.forEach((f,g)=>{u=u.insert(f,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Yn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,At()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,r,i){let o=fe();const u=Xo(),f=Xo();return t.forEach((g,y)=>{const b=r.get(y.key);i.has(y.key)&&(void 0===b||b.mutation instanceof eu)?o=o.insert(y.key,y):void 0!==b?(u.set(y.key,b.mutation.getFieldMask()),LI(b.mutation,y,b.mutation.getFieldMask(),Vn.now())):u.set(y.key,Ui.empty())}),this.recalculateAndSaveOverlays(e,o).next(g=>(g.forEach((y,b)=>u.set(y,b)),t.forEach((y,b)=>{var M;return f.set(y,new X7(b,null!==(M=u.get(y))&&void 0!==M?M:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Xo();let i=new xn((u,f)=>u-f),o=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(g=>{const y=t.get(g);if(null===y)return;let b=r.get(g)||Ui.empty();b=f.applyToLocalView(y,b),r.set(g,b);const M=(i.get(f.batchId)||At()).add(g);i=i.insert(f.batchId,M)})}).next(()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,b=g.value,M=Jo();b.forEach(S=>{if(!o.has(S)){const R=KL(t.get(S),r.get(S));null!==R&&M.set(S,R),o=o.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,M))}return te.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):h(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):te.resolve(Yn());let f=-1,g=o;return u.next(y=>te.forEach(y,(b,M)=>(f<M.largestBatchId&&(f=M.largestBatchId),o.get(b)?te.resolve():this.remoteDocumentCache.getEntry(e,b).next(S=>{g=g.insert(b,S)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,g,y,At())).next(b=>({batchId:f,changes:ln(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=St();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=St();return this.indexManager.getCollectionParents(e,i).next(u=>te.forEach(u,f=>{const g=(y=t,b=f.child(i),new Fa(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,b;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(y=>{y.forEach((b,M)=>{o=o.insert(b,M)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((f,g)=>{const y=g.getKey();null===o.get(y)&&(o=o.insert(y,An.newInvalidDocument(y)))});let u=St();return o.forEach((f,g)=>{const y=i.get(f);void 0!==y&&LI(y.mutation,g,Ui.empty(),Vn.now()),q(t,g)&&(u=u.insert(f,g))}),u})}}class e9{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return te.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:c2(r.bundledQuery),readTime:kr(r.readTime)}),te.resolve();var r}}class t9{constructor(){this.overlays=new xn(Ze.comparator),this.ls=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Yn();return te.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const i=Yn(),o=t.length+1,u=new Ze(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&g.largestBatchId>r&&i.set(g.getKey(),g)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new xn((y,b)=>y-b);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=o.get(y.largestBatchId);null===b&&(b=Yn(),o=o.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const f=Yn(),g=o.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,b)=>f.set(y,b)),!(f.size()>=i)););return te.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new e2(t,r));let o=this.ls.get(t);void 0===o&&(o=At(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class g2{constructor(){this.fs=new vn(bi.ds),this.ws=new vn(bi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new bi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new bi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ze(new qt([])),r=new bi(t,e),i=new bi(t,e+1),o=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),o.push(u.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ze(new qt([])),r=new bi(t,e),i=new bi(t,e+1);let o=At();return this.ws.forEachInRange([r,i],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new bi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class bi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ze.comparator(e.key,t.key)||bt(e.As,t.As)}static _s(e,t){return bt(e.As,t.As)||Ze.comparator(e.key,t.key)}}class n9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new vn(bi.ds)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const u=new JO(o,t,r,i);this.mutationQueue.push(u);for(const f of i)this.Rs=this.Rs.add(new bi(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return te.resolve(u)}lookupMutationBatch(e,t){return te.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bi(t,0),i=new bi(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],u=>{const f=this.Ps(u.As);o.push(f)}),te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(bt);return t.forEach(i=>{const o=new bi(i,0),u=new bi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,u],f=>{r=r.add(f.As)})}),te.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ze.isDocumentKey(o)||(o=o.child(""));const u=new bi(new Ze(o),0);let f=new vn(bt);return this.Rs.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(f=f.add(g.As)),!0)},u),te.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){rt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return te.forEach(t.mutations,i=>{const o=new bi(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new bi(t,0),i=this.Rs.firstAfterOrEqual(r);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return te.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class r9{constructor(e){this.Ds=e,this.docs=new xn(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let r=fe();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():An.newInvalidDocument(i))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=fe();const u=t.path,f=new Ze(u.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||my(GT(b),r)<=0||(i.has(b.key)||q(t,b))&&(o=o.insert(b.key,b.mutableCopy()))}return te.resolve(o)}getAllFromCollectionGroup(e,t,r,i){et()}Cs(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new i9(this)}getSize(e){return te.resolve(this.size)}}class i9 extends H4{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class s9{constructor(e){this.persistence=e,this.xs=new $e(t=>Xl(t),Sy),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.Ns=0,this.ks=new g2,this.targetCount=0,this.Ms=ng.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),te.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new ng(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Fn(t),te.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(u),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),te.waitFor(o).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(u=>{o.push(i.markPotentiallyOrphaned(e,u))}),te.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.ks.containsKey(t))}}class m2{constructor(e,t){this.$s={},this.overlays={},this.Os=new hs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new s9(this),this.indexManager=new G7,this.remoteDocumentCache=new r9(r=>this.referenceDelegate.Ls(r)),this.serializer=new w4(t),this.qs=new e9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new t9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new n9(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new o9(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return te.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class o9 extends MO{constructor(e){super(),this.currentSequenceNumber=e}}class ED{constructor(e){this.persistence=e,this.Qs=new g2,this.js=null}static zs(e){return new ED(e)}get Ws(){if(this.js)return this.js;throw et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),te.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Ws,r=>{const i=Ze.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,at.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return te.or([()=>te.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class a9{constructor(e){this.serializer=e}O(e,t,r,i){const o=new yy("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_I,{unique:!0}),f.createObjectStore("documentMutations"),K4(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=te.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),K4(e)),u=u.next(()=>function(f){const g=f.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:at.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,g){return g.store("mutations").j().next(y=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_I,{unique:!0});const b=g.store("mutations"),M=y.map(S=>b.put(S));return te.waitFor(M)})}(e,o))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ys(o))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(u=u.next(()=>this.Zs(o))),r<8&&i>=8&&(u=u.next(()=>this.ti(e,o))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.ei(o))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const g=f.createObjectStore("documentOverlays",{keyPath:tD});g.createIndex("collectionPathOverlayIndex",xO,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",AO,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const g=f.createObjectStore("remoteDocumentsV14",{keyPath:YT});g.createIndex("documentKeyIndex",DO),g.createIndex("collectionGroupIndex",QT)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.si(e,o))),r<15&&i>=15&&(u=u.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:eD}).createIndex("sequenceNumberIndex",SO,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:PO}).createIndex("documentKeyIndex",kL,{unique:!1})}(e))),u}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=wD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>te.forEach(i,o=>{const u=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(f=>te.forEach(f,g=>{rt(g.userId===o.userId);const y=Xp(this.serializer,g);return F4(e,o.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((u,f)=>{const g=new qt(u),y=[0,li(g)];o.push(t.get(y).next(b=>b?te.resolve():t.put({targetId:0,path:li(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>te.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:XT});const r=t.store("collectionParents"),i=new p2,o=u=>{if(i.add(u)){const f=u.lastSegment(),g=u.popLast();return r.put({collectionId:f,parent:li(g)})}};return t.store("remoteDocuments").X({Y:!0},(u,f)=>{const g=new qt(u);return o(g.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([u,f,g],y)=>{const b=Yo(f);return o(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const o=zI(i),u=b4(this.serializer,o);return t.put(u)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,u)=>{const f=t.store("remoteDocumentsV14"),g=(y=u,y.document?new Ze(qt.fromString(y.document.name).popFirst(5)):y.noDocument?Ze.fromSegments(y.noDocument.path):y.unknownDocument?Ze.fromSegments(y.unknownDocument.path):et()).path.toArray();var y;const b={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(f.put(b))}).next(()=>te.waitFor(i))}si(e,t){const r=t.store("mutations"),i=z4(this.serializer),o=new m2(ED.zs,this.serializer.fe);return r.j().next(u=>{const f=new Map;return u.forEach(g=>{var y;let b=null!==(y=f.get(g.userId))&&void 0!==y?y:At();Xp(this.serializer,g).keys().forEach(M=>b=b.add(M)),f.set(g.userId,b)}),te.forEach(f,(g,y)=>{const b=new Ar(y),M=_D.de(this.serializer,b),S=o.getIndexManager(b),R=ID.de(b,this.serializer,S,o.referenceDelegate);return new W4(i,R,M,S).recalculateAndSaveOverlaysForDocumentKeys(new CI(t,hs.ct),g).next()})})}}function K4(n){n.createObjectStore("targetDocuments",{keyPath:jd}).createIndex("documentTargetsIndex",wy,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JT,{unique:!0}),n.createObjectStore("targetGlobal")}const _2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class y2{constructor(e,t,r,i,o,u,f,g,y,b,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=o,this.window=u,this.document=f,this.ri=y,this.oi=b,this.ui=M,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=S=>Promise.resolve(),!y2.D())throw new ye(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Y7(this,i),this.di=t+"main",this.serializer=new w4(g),this.wi=new Ls(this.di,this.ui,new a9(this.serializer)),this.Bs=new q7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=z4(this.serializer),this.qs=new U7,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ye(ae.FAILED_PRECONDITION,_2);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new hs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,N.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,N.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,N.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>TD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Li(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return YI(e).get("owner").next(t=>te.resolve(this.Ri(t)))}Pi(e){return TD(e).delete(this.clientId)}bi(){var e=this;return(0,N.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Hr(r,"clientMetadata");return i.j().next(o=>{const u=e.Si(o,18e5),f=o.filter(g=>-1===u.indexOf(g));return te.forEach(f,g=>i.delete(g.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?te.resolve(!0):YI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new ye(ae.FAILED_PRECONDITION,_2);return!1}}return!(!this.networkEnabled||!this.inForeground)||TD(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,N.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new CI(t,hs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>TD(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return ID.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Z7(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return _D.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(u=this.ui)?NO:14===u?vI:13===u?kO:12===u?NL:11===u?OO:void et();var u;let f;return this.wi.runTransaction(e,i,o,g=>(f=new CI(g,this.Os?this.Os.next():hs.ct),"readwrite-primary"===t?this.Ti(f).next(y=>!!y||this.Ei(f)).next(y=>{if(!y)throw br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new ye(ae.FAILED_PRECONDITION,pI);return r(f)}).next(y=>this.vi(f).next(()=>y)):this.Oi(f).next(()=>r(f)))).then(g=>(f.raiseOnCommittedEvent(),g))}Oi(e){return YI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ye(ae.FAILED_PRECONDITION,_2)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return YI(e).put("owner",t)}static D(){return Ls.D()}Ai(e){const t=YI(e);return t.get("owner").next(r=>this.Ri(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(br(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,z.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function YI(n){return Hr(n,"owner")}function TD(n){return Hr(n,"clientMetadata")}function v2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class C2{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=At(),i=At();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new C2(e,t.fromCache,r,i)}}class Y4{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(a(t))return te.resolve(null);let r=v(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=E(t,null,"F"),r=v(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=At(...o);return this.Ui.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.ji(t,f);return this.zi(t,y,u,g.readTime)?this.Ki(e,E(t,null,"F")):this.Wi(e,y,t,g)}))})))}Gi(e,t,r,i){return a(t)||i.isEqual(at.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const u=this.ji(t,o);return this.zi(t,u,r,i)?this.Qi(e,t):(VT()<=ki.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),F(t)),this.Wi(e,u,t,gy(i,-1)))})}ji(e,t){let r=new vn(ue(e));return t.forEach((i,o)=>{q(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return VT()<=ki.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",F(t)),this.Ui.getDocumentsMatchingQuery(e,t,ds.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}class c9{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new xn(bt),this.Yi=new $e(o=>Xl(o),Sy),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W4(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Q4(n,e,t,r){return new c9(n,e,t,r)}function J4(n,e){return w2.apply(this,arguments)}function w2(){return w2=(0,N.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],f=[];let g=At();for(const y of i){u.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of o){f.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(r,g).next(y=>({er:y,removedBatchIds:u,addedBatchIds:f}))})})}),w2.apply(this,arguments)}function X4(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function eU(n,e,t){let r=At(),i=At();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=fe();return t.forEach((f,g)=>{const y=o.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(f)),g.isNoDocument()&&g.version.isEqual(at.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):Pe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)}),{nr:u,sr:i}})}function d9(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ly(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,te.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new tu(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Uy(n,e,t){return I2.apply(this,arguments)}function I2(){return I2=(0,N.Z)(function*(n,e,t){const r=qe(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Li(u))throw u;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),I2.apply(this,arguments)}function DD(n,e,t){const r=qe(n);let i=at.min(),o=At();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,g,y){const b=qe(f),M=b.Yi.get(y);return void 0!==M?te.resolve(b.Ji.get(M)):b.Bs.getTargetData(g,y)}(r,u,v(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,f.targetId).next(g=>{o=g})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:at.min(),t?o:At())).next(f=>(rU(r,Y(e),f),{documents:f,ir:o})))}function tU(n,e){const t=qe(n),r=qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.le(o,e).next(u=>u?u.target:null))}function nU(n,e){const t=qe(n),r=t.Xi.get(e)||at.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,gy(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(rU(t,e,i),i))}function rU(n,e,t){let r=n.Xi.get(e)||at.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}function b2(){return b2=(0,N.Z)(function*(n,e,t,r){const i=qe(n);let o=At(),u=fe();for(const y of t){const b=e.rr(y.metadata.name);y.document&&(o=o.add(b));const M=e.ur(y);M.setReadTime(e.cr(y.metadata.readTime)),u=u.insert(b,M)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),g=yield Ly(i,(y=r,v(s(qt.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>eU(y,f,u).next(b=>(f.apply(y),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.Bs.addMatchingKeys(y,o,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,b.nr,b.sr)).next(()=>b.nr)))}),b2.apply(this,arguments)}function f9(n,e){return E2.apply(this,arguments)}function E2(){return E2=(0,N.Z)(function*(n,e,t=At()){const r=yield Ly(n,v(c2(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const u=kr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.qs.saveNamedQuery(o,e);const f=r.withResumeToken(hr.EMPTY_BYTE_STRING,u);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(o,f).next(()=>i.Bs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Bs.addMatchingKeys(o,t,r.targetId)).next(()=>i.qs.saveNamedQuery(o,e))})}),E2.apply(this,arguments)}function iU(n,e){return`firestore_clients_${n}_${e}`}function sU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function M2(n,e){return`firestore_targets_${n}_${e}`}class SD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let o,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(o=new ye(i.error.code,i.error.message))),u?new SD(e,t,i.state,o):(br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class QI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ye(r.error.code,r.error.message))),o?new QI(e,r.state,i):(br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class PD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=YO();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=WT(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return i?new PD(e,o):(br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class T2{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new T2(t.clientId,t.onlineState):(br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class D2{constructor(){this.activeTargetIds=YO()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S2{constructor(e,t,r,i,o){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new xn(bt),this.started=!1,this.yr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.pr=iU(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new D2),this.Tr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,N.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const o=e.getItem(iU(e.persistenceKey,i));if(o){const u=PD.ar(i,o);u&&(e.gr=e.gr.insert(u.clientId,u))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(M2(this.persistenceKey,e));if(r){const i=QI.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(M2(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,N.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(o){let u=hs.ct;if(null!=o)try{const f=JSON.parse(o);rt("number"==typeof f),u=f}catch(f){br("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==hs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Qr(o)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new SD(this.currentUser,e,t,r),o=sU(this.persistenceKey,this.currentUser,e);this.setItem(o,i.hr())}Cr(e){const t=sU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=M2(this.persistenceKey,e),o=new QI(e,t,r);this.setItem(i,o.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return PD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return SD.ar(new Ar(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return QI.ar(i,t)}br(e){return T2.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,N.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),o=this.Sr(r),u=[],f=[];return o.forEach(g=>{i.has(g)||u.push(g)}),i.forEach(g=>{o.has(g)||f.push(g)}),this.syncEngine.Wr(u,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=YO();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class oU{constructor(){this.Hr=new D2,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new D2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class p9{Yr(e){}shutdown(){}}class aU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let xD=null;function P2(){return null===xD?xD=268435456+Math.round(2147483648*Math.random()):xD++,"0x"+xD.toString(16)}const g9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class m9{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ts="WebChannelConnection";class _9 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const u=P2(),f=this.To(e,t);Pe("RestConnection",`Sending RPC '${e}' ${u}:`,f,r);const g={};return this.Eo(g,i,o),this.Ao(e,f,g,r).then(y=>(Pe("RestConnection",`Received RPC '${e}' ${u}: `,y),y),y=>{throw go("RestConnection",`RPC '${e}' ${u} failed with error: `,y,"url: ",f,"request:",r),y})}vo(e,t,r,i,o,u){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+$p,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${g9[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=P2();return new Promise((u,f)=>{const g=new BT;g.setWithCredentials(!0),g.listenOnce(LT.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case uI.NO_ERROR:const b=g.getResponseJson();Pe(ts,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(b)),u(b);break;case uI.TIMEOUT:Pe(ts,`RPC '${e}' ${o} timed out`),f(new ye(ae.DEADLINE_EXCEEDED,"Request time out"));break;case uI.HTTP_ERROR:const M=g.getStatus();if(Pe(ts,`RPC '${e}' ${o} failed with status:`,M,"response text:",g.getResponseText()),M>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const Z=function(Q){const X=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(X)>=0?X:ae.UNKNOWN}(R.status);f(new ye(Z,R.message))}else f(new ye(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ye(ae.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Pe(ts,`RPC '${e}' ${o} completed.`)}});const y=JSON.stringify(i);Pe(ts,`RPC '${e}' ${o} sending request:`,i),g.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=P2(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=FT(),f=pO(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.xmlHttpFactory=new UT({})),this.Eo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const b=o.join("");Pe(ts,`Creating RPC '${e}' stream ${i}: ${b}`,g);const M=u.createWebChannel(b,g);let S=!1,R=!1;const Z=new m9({ro:X=>{R?Pe(ts,`Not sending because RPC '${e}' stream ${i} is closed:`,X):(S||(Pe(ts,`Opening RPC '${e}' stream ${i} transport.`),M.open(),S=!0),Pe(ts,`RPC '${e}' stream ${i} sending:`,X),M.send(X))},oo:()=>M.close()}),Q=(X,Se,ze)=>{X.listen(Se,Ne=>{try{ze(Ne)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return Q(M,jp.EventType.OPEN,()=>{R||Pe(ts,`RPC '${e}' stream ${i} transport opened.`)}),Q(M,jp.EventType.CLOSE,()=>{R||(R=!0,Pe(ts,`RPC '${e}' stream ${i} transport closed`),Z.wo())}),Q(M,jp.EventType.ERROR,X=>{R||(R=!0,go(ts,`RPC '${e}' stream ${i} transport errored:`,X),Z.wo(new ye(ae.UNAVAILABLE,"The operation could not be completed")))}),Q(M,jp.EventType.MESSAGE,X=>{var Se;if(!R){const ze=X.data[0];rt(!!ze);const Ye=ze.error||(null===(Se=ze[0])||void 0===Se?void 0:Se.error);if(Ye){Pe(ts,`RPC '${e}' stream ${i} received error:`,Ye);const gt=Ye.status;let Pt=function(Vs){const yv=Gr[Vs];if(void 0!==yv)return t4(yv)}(gt),Rr=Ye.message;void 0===Pt&&(Pt=ae.INTERNAL,Rr="Unknown error status: "+gt+" with message "+Ye.message),R=!0,Z.wo(new ye(Pt,Rr)),M.close()}else Pe(ts,`RPC '${e}' stream ${i} received:`,ze),Z._o(ze)}}),Q(f,gO.STAT_EVENT,X=>{X.stat===dI.PROXY?Pe(ts,`RPC '${e}' stream ${i} detected buffering proxy`):X.stat===dI.NOPROXY&&Pe(ts,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Z.fo()},0),Z}}function cU(){return typeof window<"u"?window:null}function AD(){return typeof document<"u"?document:null}function JI(n){return new D7(n,!0)}class x2{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class lU{constructor(e,t,r,i,o,u,f,g){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new x2(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,N.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,N.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,N.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new ye(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,N.Z)(function*(){e.state=0,e.start()}))}tu(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y9 extends lU{constructor(e,t,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function x7(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:et(),i=e.targetChange.targetIds||[],o=function(g,y){return g.useProto3Json?(rt(void 0===y||"string"==typeof y),hr.fromBase64String(y||"")):(rt(void 0===y||y instanceof Uint8Array),hr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(g){const y=void 0===g.code?ae.UNKNOWN:t4(g.code);return new ye(y,g.message||"")}(u);t=new o4(r,i,o,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Dc(n,r.document.name),o=kr(r.document.updateTime),u=r.document.createTime?kr(r.document.createTime):at.min(),f=new zr({mapValue:{fields:r.document.fields}}),g=An.newFoundDocument(i,o,u,f);t=new gD(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=Dc(n,r.document),o=r.readTime?kr(r.readTime):at.min(),u=An.newNoDocument(i,o);t=new gD([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Dc(n,r.document);t=new gD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,{count:i=0,unchangedNames:o}=r,u=new w7(i,o);t=new s4(r.targetId,u)}}var g;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return at.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?at.min():o.readTime?kr(o.readTime):at.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=$I(this.serializer),t.addTarget=function(i,o){let u;const f=o.target;if(u=kI(f)?{documents:m4(i,f)}:{query:a2(i,f)},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=u4(i,o.resumeToken);const g=r2(i,o.expectedCount);null!==g&&(u.expectedCount=g)}else if(o.snapshotVersion.compareTo(at.min())>0){u.readTime=ky(i,o.snapshotVersion.toTimestamp());const g=r2(i,o.expectedCount);null!==g&&(u.expectedCount=g)}return u}(this.serializer,e);const r=function O7(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=$I(this.serializer),t.removeTarget=e,this.Wo(t)}}class v9 extends lU{constructor(e,t,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function A7(n,e){return n&&n.length>0?(rt(void 0!==e),n.map(t=>function(r,i){let o=kr(r.updateTime?r.updateTime:i);return o.isEqual(at.min())&&(o=kr(i)),new _7(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.cu(r,t)}return rt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=$I(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>HI(this.serializer,r))};this.Wo(t)}}class C9 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ye(ae.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.vo(e,t,r,o,u,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ae.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class I9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(br(t),this.mu=!1):Pe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class b9{constructor(e,t,r,i,o){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(f=>{r.enqueueAndForget((0,N.Z)(function*(){var g;Qd(u)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,N.Z)(function*(y){const b=qe(y);b.vu.add(4),yield By(b),b.bu.set("Unknown"),b.vu.delete(4),yield XI(b)}),function(y){return g.apply(this,arguments)})(u))}))}),this.bu=new I9(r,i)}}function XI(n){return O2.apply(this,arguments)}function O2(){return O2=(0,N.Z)(function*(n){if(Qd(n))for(const e of n.Ru)yield e(!0)}),O2.apply(this,arguments)}function By(n){return k2.apply(this,arguments)}function k2(){return k2=(0,N.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),k2.apply(this,arguments)}function OD(n,e){const t=qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),F2(t)?R2(t):jy(t).Ko()&&N2(t,e))}function e1(n,e){const t=qe(n),r=jy(t);t.Au.delete(e),r.Ko()&&uU(t,e),0===t.Au.size&&(r.Ko()?r.jo():Qd(t)&&t.bu.set("Unknown"))}function N2(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jy(n).su(e)}function uU(n,e){n.Vu.qt(e),jy(n).iu(e)}function R2(n){n.Vu=new b7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),jy(n).start(),n.bu.gu()}function F2(n){return Qd(n)&&!jy(n).Uo()&&n.Au.size>0}function Qd(n){return 0===qe(n).vu.size}function dU(n){n.Vu=void 0}function E9(n){return L2.apply(this,arguments)}function L2(){return L2=(0,N.Z)(function*(n){n.Au.forEach((e,t)=>{N2(n,e)})}),L2.apply(this,arguments)}function M9(n,e){return U2.apply(this,arguments)}function U2(){return U2=(0,N.Z)(function*(n,e){dU(n),F2(n)?(n.bu.Iu(e),R2(n)):n.bu.set("Unknown")}),U2.apply(this,arguments)}function T9(n,e,t){return B2.apply(this,arguments)}function B2(){return B2=(0,N.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof o4&&2===e.state&&e.cause)try{yield(r=(0,N.Z)(function*(i,o){const u=o.cause;for(const f of o.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield kD(n,r)}else if(e instanceof gD?n.Vu.Ht(e):e instanceof s4?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(at.min()))try{const r=yield X4(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const u=i.Vu.ce(o);return u.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const y=i.Au.get(g);y&&i.Au.set(g,y.withResumeToken(f.resumeToken,o))}}),u.targetMismatches.forEach((f,g)=>{const y=i.Au.get(f);if(!y)return;i.Au.set(f,y.withResumeToken(hr.EMPTY_BYTE_STRING,y.snapshotVersion)),uU(i,f);const b=new tu(y.target,f,g,y.sequenceNumber);N2(i,b)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield kD(n,r)}var r}),B2.apply(this,arguments)}function kD(n,e,t){return V2.apply(this,arguments)}function V2(){return V2=(0,N.Z)(function*(n,e,t){if(!Li(e))throw e;n.vu.add(1),yield By(n),n.bu.set("Offline"),t||(t=()=>X4(n.localStore)),n.asyncQueue.enqueueRetryable((0,N.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield XI(n)}))}),V2.apply(this,arguments)}function hU(n,e){return e().catch(t=>kD(n,t,e))}function Vy(n){return j2.apply(this,arguments)}function j2(){return j2=(0,N.Z)(function*(n){const e=qe(n),t=Jd(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;D9(e);)try{const i=yield d9(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,S9(e,i)}catch(i){yield kD(e,i)}fU(e)&&pU(e)}),j2.apply(this,arguments)}function D9(n){return Qd(n)&&n.Eu.length<10}function S9(n,e){n.Eu.push(e);const t=Jd(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function fU(n){return Qd(n)&&!Jd(n).Uo()&&n.Eu.length>0}function pU(n){Jd(n).start()}function P9(n){return $2.apply(this,arguments)}function $2(){return $2=(0,N.Z)(function*(n){Jd(n).hu()}),$2.apply(this,arguments)}function x9(n){return H2.apply(this,arguments)}function H2(){return H2=(0,N.Z)(function*(n){const e=Jd(n);for(const t of n.Eu)e.uu(t.mutations)}),H2.apply(this,arguments)}function A9(n,e,t){return z2.apply(this,arguments)}function z2(){return z2=(0,N.Z)(function*(n,e,t){const r=n.Eu.shift(),i=XO.from(r,e,t);yield hU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Vy(n)}),z2.apply(this,arguments)}function O9(n,e){return G2.apply(this,arguments)}function G2(){return G2=(0,N.Z)(function*(n,e){var t;e&&Jd(n).ou&&(yield(t=(0,N.Z)(function*(r,i){if(e4(o=i.code)&&o!==ae.ABORTED){const u=r.Eu.shift();Jd(r).Qo(),yield hU(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Vy(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),fU(n)&&pU(n)}),G2.apply(this,arguments)}function gU(n,e){return Z2.apply(this,arguments)}function Z2(){return Z2=(0,N.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Qd(t);t.vu.add(3),yield By(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield XI(t)}),Z2.apply(this,arguments)}function q2(n,e){return W2.apply(this,arguments)}function W2(){return W2=(0,N.Z)(function*(n,e){const t=qe(n);e?(t.vu.delete(2),yield XI(t)):e||(t.vu.add(2),yield By(t),t.bu.set("Unknown"))}),W2.apply(this,arguments)}function jy(n){return n.Su||(n.Su=function(e,t,r){const i=qe(e);return i.fu(),new y9(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:E9.bind(null,n),ao:M9.bind(null,n),nu:T9.bind(null,n)}),n.Ru.push(function(){var e=(0,N.Z)(function*(t){t?(n.Su.Qo(),F2(n)?R2(n):n.bu.set("Unknown")):(yield n.Su.stop(),dU(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Jd(n){return n.Du||(n.Du=function(e,t,r){const i=qe(e);return i.fu(),new v9(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:P9.bind(null,n),ao:O9.bind(null,n),au:x9.bind(null,n),cu:A9.bind(null,n)}),n.Ru.push(function(){var e=(0,N.Z)(function*(t){t?(n.Du.Qo(),yield Vy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class K2{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,o){const u=Date.now()+r,f=new K2(e,t,u,i,o);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ye(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $y(n,e){if(br("AsyncQueue",`${e}: ${n}`),Li(n))return new ye(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Hy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=St(),this.sortedSet=new xn(this.comparator)}static emptySet(e){return new Hy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Hy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class mU{constructor(){this.Cu=new xn(Ze.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class zy{constructor(e,t,r,i,o,u,f,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,o){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new zy(e,t,Hy.emptySet(t),u,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&T(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class k9{constructor(){this.Nu=void 0,this.listeners=[]}}class N9{constructor(){this.queries=new $e(e=>P(e),T),this.onlineState="Unknown",this.ku=new Set}}function Y2(n,e){return Q2.apply(this,arguments)}function Q2(){return Q2=(0,N.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new k9),i)try{o.Nu=yield t.onListen(r)}catch(u){const f=$y(u,`Initialization of query '${F(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&ek(t)}),Q2.apply(this,arguments)}function J2(n,e){return X2.apply(this,arguments)}function X2(){return X2=(0,N.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const u=o.listeners.indexOf(e);u>=0&&(o.listeners.splice(u,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),X2.apply(this,arguments)}function R9(n,e){const t=qe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.$u(i)&&(r=!0);u.Nu=i}}r&&ek(t)}function F9(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function ek(n){n.ku.forEach(e=>{e.next()})}class tk{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new zy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=zy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class L9{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class _U{constructor(e){this.serializer=e}rr(e){return Dc(this.serializer,e)}ur(e){return e.metadata.exists?g4(this.serializer,e.document,!1):An.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return kr(e)}}class U9{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yU(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=qt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new _U(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.rr(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||At()).add(o);t.set(u,f)}}return t}complete(){var e=this;return(0,N.Z)(function*(){const t=yield function h9(n,e,t,r){return b2.apply(this,arguments)}(e.localStore,new _U(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield f9(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function yU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class vU{constructor(e){this.key=e}}class CU{constructor(e){this.key=e}}class wU{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=At(),this.mutatedKeys=At(),this.tc=ue(e),this.ec=new Hy(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new mU,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,M)=>{const S=i.get(b),R=q(this.query,M)?M:null,Z=!!S&&this.mutatedKeys.has(S.key),Q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let X=!1;S&&R?S.data.isEqual(R.data)?Z!==Q&&(r.track({type:3,doc:R}),X=!0):this.rc(S,R)||(r.track({type:2,doc:R}),X=!0,(g&&this.tc(R,g)>0||y&&this.tc(R,y)<0)&&(f=!0)):!S&&R?(r.track({type:0,doc:R}),X=!0):S&&!R&&(r.track({type:1,doc:S}),X=!0,(g||y)&&(f=!0)),X&&(R?(u=u.add(R),o=Q?o.add(b):o.delete(b)):(u=u.delete(b),o=o.delete(b)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const b="F"===this.query.limitType?u.last():u.first();u=u.delete(b.key),o=o.delete(b.key),r.track({type:1,doc:b})}return{ec:u,ic:r,zi:f,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((y,b)=>function(M,S){const R=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return R(M)-R(S)}(y.type,b.type)||this.tc(y.doc,b.doc)),this.oc(r);const u=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,g=f!==this.Xu;return this.Xu=f,0!==o.length||g?{snapshot:new zy(this.query,e.ec,i,o,e.mutatedKeys,0===f,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new mU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=At(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new CU(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new vU(r))}),t}hc(e){this.Yu=e.ir,this.Zu=At();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return zy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class B9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class V9{constructor(e){this.key=e,this.fc=!1}}class j9{constructor(e,t,r,i,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new $e(f=>P(f),T),this._c=new Map,this.mc=new Set,this.gc=new xn(Ze.comparator),this.yc=new Map,this.Ic=new g2,this.Tc={},this.Ec=new Map,this.Ac=ng.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function $9(n,e){return nk.apply(this,arguments)}function nk(){return nk=(0,N.Z)(function*(n,e){const t=Mk(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const u=yield Ly(t.localStore,v(e)),f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield rk(t,e,r,"current"===f,u.resumeToken),t.isPrimaryClient&&OD(t.remoteStore,u)}return i}),nk.apply(this,arguments)}function rk(n,e,t,r,i){return ik.apply(this,arguments)}function ik(){return ik=(0,N.Z)(function*(n,e,t,r,i){n.Rc=(M,S,R)=>{return(Z=(0,N.Z)(function*(Q,X,Se,ze){let Ne=X.view.sc(Se);Ne.zi&&(Ne=yield DD(Q.localStore,X.query,!1).then(({documents:Pt})=>X.view.sc(Pt,Ne)));const Ye=ze&&ze.targetChanges.get(X.targetId),gt=X.view.applyChanges(Ne,Q.isPrimaryClient,Ye);return pk(Q,X.targetId,gt.cc),gt.snapshot}),function(Q,X,Se,ze){return Z.apply(this,arguments)})(n,M,S,R);var Z};const o=yield DD(n.localStore,e,!0),u=new wU(e,o.ir),f=u.sc(o.documents),g=VI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=u.applyChanges(f,n.isPrimaryClient,g);pk(n,t,y.cc);const b=new B9(e,t,u);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),ik.apply(this,arguments)}function H9(n,e){return sk.apply(this,arguments)}function sk(){return sk=(0,N.Z)(function*(n,e){const t=qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!T(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Uy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),e1(t.remoteStore,r.targetId),Gy(t,r.targetId)}).catch(dr))):(Gy(t,r.targetId),yield Uy(t.localStore,r.targetId,!0))}),sk.apply(this,arguments)}function ok(){return ok=(0,N.Z)(function*(n,e,t){const r=Tk(n);try{const i=yield function(o,u){const f=qe(o),g=Vn.now(),y=u.reduce((S,R)=>S.add(R.key),At());let b,M;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>{let R=fe(),Z=At();return f.Zi.getEntries(S,y).next(Q=>{R=Q,R.forEach((X,Se)=>{Se.isValidDocument()||(Z=Z.add(X))})}).next(()=>f.localDocuments.getOverlayedDocuments(S,R)).next(Q=>{b=Q;const X=[];for(const Se of u){const ze=v7(Se,b.get(Se.key).overlayedDocument);null!=ze&&X.push(new eu(Se.key,ze,TI(ze.value.mapValue),nr.exists(!0)))}return f.mutationQueue.addMutationBatch(S,g,X,u)}).next(Q=>{M=Q;const X=Q.applyToLocalDocumentSet(b,Z);return f.documentOverlayCache.saveOverlays(S,Q.batchId,X)})}).then(()=>({batchId:M.batchId,changes:ln(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,f){let g=o.Tc[o.currentUser.toKey()];g||(g=new xn(bt)),g=g.insert(u,f),o.Tc[o.currentUser.toKey()]=g}(r,i.batchId,t),yield nu(r,i.changes),yield Vy(r.remoteStore)}catch(i){const o=$y(i,"Failed to persist write");t.reject(o)}}),ok.apply(this,arguments)}function IU(n,e){return ak.apply(this,arguments)}function ak(){return ak=(0,N.Z)(function*(n,e){const t=qe(n);try{const r=yield function u9(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((b,M)=>{const S=i.get(M);if(!S)return;f.push(t.Bs.removeMatchingKeys(o,b.removedDocuments,M).next(()=>t.Bs.addMatchingKeys(o,b.addedDocuments,M)));let R=S.withSequenceNumber(o.currentSequenceNumber);var Z,Q,X;null!==e.targetMismatches.get(M)?R=R.withResumeToken(hr.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):b.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(b.resumeToken,r)),i=i.insert(M,R),Q=R,X=b,(0===(Z=S).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(o,R))});let g=fe(),y=At();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,b))}),f.push(eU(o,u,e.documentUpdates).next(b=>{g=b.nr,y=b.sr})),!r.isEqual(at.min())){const b=t.Bs.getLastRemoteSnapshotVersion(o).next(M=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));f.push(b)}return te.waitFor(f).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,g,y)).next(()=>g)}).then(o=>(t.Ji=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const u=t.yc.get(o);u&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?rt(u.fc):i.removedDocuments.size>0&&(rt(u.fc),u.fc=!1))}),yield nu(t,r,e)}catch(r){yield dr(r)}}),ak.apply(this,arguments)}function bU(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,u)=>{const f=u.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(o,u){const f=qe(o);f.onlineState=u;let g=!1;f.queries.forEach((y,b)=>{for(const M of b.listeners)M.Mu(u)&&(g=!0)}),g&&ek(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function G9(n,e,t){return ck.apply(this,arguments)}function ck(){return ck=(0,N.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let u=new xn(Ze.comparator);u=u.insert(o,An.newNoDocument(o,at.min()));const f=At().add(o),g=new BI(at.min(),new Map,new xn(bt),u,f);yield IU(r,g),r.gc=r.gc.remove(o),r.yc.delete(e),gk(r)}else yield Uy(r.localStore,e,!1).then(()=>Gy(r,e,t)).catch(dr)}),ck.apply(this,arguments)}function Z9(n,e){return lk.apply(this,arguments)}function lk(){return lk=(0,N.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield function l9(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,f,g,y){const b=g.batch,M=b.keys();let S=te.resolve();return M.forEach(R=>{S=S.next(()=>y.getEntry(f,R)).next(Z=>{const Q=g.docVersions.get(R);rt(null!==Q),Z.version.compareTo(Q)<0&&(b.applyToRemoteDocument(Z,g),Z.isValidDocument()&&(Z.setReadTime(g.commitVersion),y.addEntry(Z)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(f,b))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let f=At();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(f=f.add(u.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);fk(t,r,null),hk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nu(t,i)}catch(i){yield dr(i)}}),lk.apply(this,arguments)}function q9(n,e,t){return uk.apply(this,arguments)}function uk(){return uk=(0,N.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(o,u){const f=qe(o);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return f.mutationQueue.lookupMutationBatch(g,u).next(b=>(rt(null!==b),y=b.keys(),f.mutationQueue.removeMutationBatch(g,b))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,y,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>f.localDocuments.getDocuments(g,y))})}(r.localStore,e);fk(r,e,t),hk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nu(r,i)}catch(i){yield dr(i)}}),uk.apply(this,arguments)}function dk(){return dk=(0,N.Z)(function*(n,e){const t=qe(n);Qd(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const u=qe(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=$y(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),dk.apply(this,arguments)}function hk(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function fk(n,e,t){const r=qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Gy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||EU(n,r)})}function EU(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(e1(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),gk(n))}function pk(n,e,t){for(const r of t)r instanceof vU?(n.Ic.addReference(r.key,e),K9(n,r)):r instanceof CU?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||EU(n,r.key)):et()}function K9(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.mc.add(r),gk(n))}function gk(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ze(qt.fromString(e)),r=n.Ac.next();n.yc.set(r,new V9(t)),n.gc=n.gc.insert(t,r),OD(n.remoteStore,new tu(v(s(t.path)),r,"TargetPurposeLimboResolution",hs.ct))}}function nu(n,e,t){return mk.apply(this,arguments)}function mk(){return mk=(0,N.Z)(function*(n,e,t){const r=qe(n),i=[],o=[],u=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,g)=>{u.push(r.Rc(g,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const b=C2.Li(g.targetId,y);o.push(b)}}))}),yield Promise.all(u),r.dc.nu(i),yield(f=(0,N.Z)(function*(g,y){const b=qe(g);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>te.forEach(y,S=>te.forEach(S.Fi,R=>b.persistence.referenceDelegate.addReference(M,S.targetId,R)).next(()=>te.forEach(S.Bi,R=>b.persistence.referenceDelegate.removeReference(M,S.targetId,R)))))}catch(M){if(!Li(M))throw M;Pe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of y){const S=M.targetId;if(!M.fromCache){const R=b.Ji.get(S),Q=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);b.Ji=b.Ji.insert(S,Q)}}}),function(g,y){return f.apply(this,arguments)})(r.localStore,o))}),mk.apply(this,arguments)}function Y9(n,e){return _k.apply(this,arguments)}function _k(){return _k=(0,N.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield J4(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(f=>{f.reject(new ye(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nu(t,r.er)}var i}),_k.apply(this,arguments)}function Q9(n,e){const t=qe(n),r=t.yc.get(e);if(r&&r.fc)return At().add(r.key);{let i=At();const o=t._c.get(e);if(!o)return i;for(const u of o){const f=t.wc.get(u);i=i.unionWith(f.view.nc)}return i}}function J9(n,e){return yk.apply(this,arguments)}function yk(){return yk=(0,N.Z)(function*(n,e){const t=qe(n),r=yield DD(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&pk(t,e.targetId,i.cc),i}),yk.apply(this,arguments)}function X9(n,e){return vk.apply(this,arguments)}function vk(){return vk=(0,N.Z)(function*(n,e){const t=qe(n);return nU(t.localStore,e).then(r=>nu(t,r))}),vk.apply(this,arguments)}function e8(n,e,t,r){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,N.Z)(function*(n,e,t,r){const i=qe(n),o=yield function(u,f){const g=qe(u),y=qe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",b=>y.Sn(b,f).next(M=>M?g.localDocuments.getDocuments(b,M):te.resolve(null)))}(i.localStore,e);var f;null!==o?("pending"===t?yield Vy(i.remoteStore):"acknowledged"===t||"rejected"===t?(fk(i,e,r||null),hk(i,e),f=e,qe(qe(i.localStore).mutationQueue).Cn(f)):et(),yield nu(i,o)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ck.apply(this,arguments)}function wk(){return wk=(0,N.Z)(function*(n,e){const t=qe(n);if(Mk(t),Tk(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield MU(t,r.toArray());t.vc=!0,yield q2(t.remoteStore,!0);for(const o of i)OD(t.remoteStore,o)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Gy(t,u),Uy(t.localStore,u,!0))),e1(t.remoteStore,u)}),yield i,yield MU(t,r),function(o){const u=qe(o);u.yc.forEach((f,g)=>{e1(u.remoteStore,g)}),u.Ic.Ts(),u.yc=new Map,u.gc=new xn(Ze.comparator)}(t),t.vc=!1,yield q2(t.remoteStore,!1)}}),wk.apply(this,arguments)}function MU(n,e,t){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,N.Z)(function*(n,e,t){const r=qe(n),i=[],o=[];for(const u of e){let f;const g=r._c.get(u);if(g&&0!==g.length){f=yield Ly(r.localStore,v(g[0]));for(const y of g){const b=r.wc.get(y),M=yield J9(r,b);M.snapshot&&o.push(M.snapshot)}}else{const y=yield tU(r.localStore,u);f=yield Ly(r.localStore,y),yield rk(r,TU(y),u,!1,f.resumeToken)}i.push(f)}return r.dc.nu(o),i}),Ik.apply(this,arguments)}function TU(n){return WO(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function n8(n){const e=qe(n);return qe(qe(e.localStore).persistence).$i()}function r8(n,e,t,r){return bk.apply(this,arguments)}function bk(){return bk=(0,N.Z)(function*(n,e,t,r){const i=qe(n);if(i.vc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const o=i._c.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=yield nU(i.localStore,Y(o[0])),f=BI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,hr.EMPTY_BYTE_STRING);yield nu(i,u,f);break}case"rejected":yield Uy(i.localStore,e,!0),Gy(i,e,r);break;default:et()}}),bk.apply(this,arguments)}function i8(n,e,t){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,N.Z)(function*(n,e,t){const r=Mk(n);if(r.vc){for(const i of e){if(r._c.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const o=yield tU(r.localStore,i),u=yield Ly(r.localStore,o);yield rk(r,TU(o),u.targetId,!1,u.resumeToken),OD(r.remoteStore,u)}for(const i of t)r._c.has(i)&&(yield Uy(r.localStore,i,!1).then(()=>{e1(r.remoteStore,i),Gy(r,i)}).catch(dr))}}),Ek.apply(this,arguments)}function Mk(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G9.bind(null,e),e.dc.nu=R9.bind(null,e.eventManager),e.dc.Pc=F9.bind(null,e.eventManager),e}function Tk(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q9.bind(null,e),e}class t1{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,N.Z)(function*(){t.serializer=JI(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Q4(this.persistence,new Y4,e.initialUser,this.serializer)}createPersistence(e){return new m2(ED.zs,this.serializer)}createSharedClientState(e){return new oU}terminate(){var e=this;return(0,N.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Dk extends t1{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,N.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Tk(r.Vc.syncEngine),yield Vy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Q4(this.persistence,new Y4,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new j4(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new qT(t,this.persistence);return new AL(e.asyncQueue,r)}createPersistence(e){const t=v2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?es.withCacheSize(this.cacheSizeBytes):es.DEFAULT;return new y2(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cU(),AD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new oU}}class DU extends Dk{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,N.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof S2&&(r.sharedClientState.syncEngine={jr:e8.bind(null,i),zr:r8.bind(null,i),Wr:i8.bind(null,i),$i:n8.bind(null,i),Qr:X9.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var o=(0,N.Z)(function*(u){yield function t8(n,e){return wk.apply(this,arguments)}(r.Vc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=cU();if(!S2.D(t))throw new ye(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=v2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new S2(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Zy{initialize(e,t){var r=this;return(0,N.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>bU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Y9.bind(null,r.syncEngine),yield q2(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new N9}createDatastore(e){const t=JI(e.databaseInfo.databaseId),r=new _9(e.databaseInfo);return new C9(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=f=>bU(this.syncEngine,f,0),u=aU.D()?new aU:new p9,new b9(t,r,i,o,u);var t,r,i,o,u}createSyncEngine(e,t){return function(r,i,o,u,f,g,y){const b=new j9(r,i,o,u,f,g);return y&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,N.Z)(function*(t){const r=qe(t);Pe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield By(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function SU(n,e=10240){let t=0;return{read:()=>(0,N.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,N.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ND{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class a8{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Or,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,N.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,N.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,N.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const o=yield e.$c(i);return new L9(JSON.parse(o),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,N.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,N.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,N.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class c8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,N.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ye(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,N.Z)(function*(o,u){const f=qe(o),g=$I(f.serializer)+"/documents",y={documents:u.map(R=>jI(f.serializer,R))},b=yield f.vo("BatchGetDocuments",g,y,u.length),M=new Map;b.forEach(R=>{const Z=function P7(n,e){return"found"in e?function(t,r){rt(!!r.found);const i=Dc(t,r.found.name),o=kr(r.found.updateTime),u=r.found.createTime?kr(r.found.createTime):at.min(),f=new zr({mapValue:{fields:r.found.fields}});return An.newFoundDocument(i,o,u,f)}(n,e):"missing"in e?function(t,r){rt(!!r.missing),rt(!!r.readTime);const i=Dc(t,r.missing),o=kr(r.readTime);return An.newNoDocument(i,o)}(n,e):et()}(f.serializer,R);M.set(Z.key.toString(),Z)});const S=[];return u.forEach(R=>{const Z=M.get(R.toString());rt(!!Z),S.push(Z)}),S}),function(o,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Oy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,N.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Ze.fromPath(i);e.mutations.push(new QO(o,e.precondition(o)))}),yield(r=(0,N.Z)(function*(i,o){const u=qe(i),f=$I(u.serializer)+"/documents",g={writes:o.map(y=>HI(u.serializer,y))};yield u.Io("Commit",f,g)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=at.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ye(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(at.min())?nr.exists(!1):nr.updateTime(t):nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(at.min()))throw new ye(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nr.updateTime(t)}return nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class l8{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Bc=r.maxAttempts,this.qo=new x2(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,N.Z)(function*(){const t=new c8(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Uc(o)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Zp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!e4(t)}return!1}}class u8{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ar.UNAUTHENTICATED,this.clientId=zp.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,N.Z)(function*(f){Pe("FirestoreClient","Received user=",f.uid),yield o.authCredentialListener(f),o.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Pe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,N.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,N.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=$y(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function RD(n,e){return Sk.apply(this,arguments)}function Sk(){return Sk=(0,N.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,N.Z)(function*(o){r.isEqual(o)||(yield J4(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Sk.apply(this,arguments)}function Pk(n,e){return xk.apply(this,arguments)}function xk(){return xk=(0,N.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Ak(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>gU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>gU(e.remoteStore,o)),n._onlineComponents=e}),xk.apply(this,arguments)}function PU(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Ak(n){return Ok.apply(this,arguments)}function Ok(){return Ok=(0,N.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield RD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!PU(t))throw t;go("Error using user provided cache. Falling back to memory cache: "+t),yield RD(n,new t1)}}else Pe("FirestoreClient","Using default OfflineComponentProvider"),yield RD(n,new t1);return n._offlineComponents}),Ok.apply(this,arguments)}function FD(n){return kk.apply(this,arguments)}function kk(){return kk=(0,N.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Pk(n,n._uninitializedComponentsProvider._online)):(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield Pk(n,new Zy))),n._onlineComponents}),kk.apply(this,arguments)}function xU(n){return Ak(n).then(e=>e.persistence)}function LD(n){return Ak(n).then(e=>e.localStore)}function AU(n){return FD(n).then(e=>e.remoteStore)}function Nk(n){return FD(n).then(e=>e.syncEngine)}function qy(n){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,N.Z)(function*(n){const e=yield FD(n),t=e.eventManager;return t.onListen=$9.bind(null,e.syncEngine),t.onUnlisten=H9.bind(null,e.syncEngine),t}),Rk.apply(this,arguments)}function kU(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function(i,o,u,f,g){const y=new ND({next:M=>{o.enqueueAndForget(()=>J2(i,b));const S=M.docs.has(u);!S&&M.fromCache?g.reject(new ye(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&M.fromCache&&f&&"server"===f.source?g.reject(new ye(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(M)},error:M=>g.reject(M)}),b=new tk(s(u.path),y,{includeMetadataChanges:!0,Ku:!0});return Y2(i,b)}(yield qy(n),n.asyncQueue,e,t,r)})),r.promise}function NU(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function(i,o,u,f,g){const y=new ND({next:M=>{o.enqueueAndForget(()=>J2(i,b)),M.fromCache&&"server"===f.source?g.reject(new ye(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(M)},error:M=>g.reject(M)}),b=new tk(u,y,{includeMetadataChanges:!0,Ku:!0});return Y2(i,b)}(yield qy(n),n.asyncQueue,e,t,r)})),r.promise}function RU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const FU=new Map;function Fk(n,e,t){if(!t)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LU(n,e,t,r){if(!0===e&&!0===r)throw new ye(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function UU(n){if(!Ze.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BU(n){if(Ze.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function UD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=UD(n);throw new ye(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function VU(n,e){if(e<=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class jU{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ye(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ye(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=RU(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class n1{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ye(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new SL;switch(t.type){case"firstParty":return new wO(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ye(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=FU.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),FU.delete(e),t.terminate())}(this),Promise.resolve()}}function $U(n,e,t,r={}){var i;const o=(n=Xt(n,n1))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==u&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:u,ssl:!1})),r.mockUserToken){let f,g;if("string"==typeof r.mockUserToken)f=r.mockUserToken,g=Ar.MOCK_USER;else{f=(0,z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ye(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ar(y)}n._authCredentials=new vO(new yO(f,g))}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class Bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class Sc extends Bi{constructor(e,t,r){super(e,t,s(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new Ze(e))}withConverter(e){return new Sc(this.firestore,e,this._path)}}function HU(n,e,...t){if(n=(0,z.m9)(n),Fk("collection","path",e),n instanceof n1){const r=qt.fromString(e,...t);return BU(r),new Sc(n,null,r)}{if(!(n instanceof Qn||n instanceof Sc))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return BU(r),new Sc(n.firestore,null,r)}}function BD(n,e,...t){if(n=(0,z.m9)(n),1===arguments.length&&(e=zp.A()),Fk("doc","path",e),n instanceof n1){const r=qt.fromString(e,...t);return UU(r),new Qn(n,null,new Ze(r))}{if(!(n instanceof Qn||n instanceof Sc))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return UU(r),new Qn(n.firestore,n instanceof Sc?n.converter:null,new Ze(r))}}function zU(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),(n instanceof Qn||n instanceof Sc)&&(e instanceof Qn||e instanceof Sc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Lk(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),n instanceof Bi&&e instanceof Bi&&n.firestore===e.firestore&&T(n._query,e._query)&&n.converter===e.converter}class C8{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new x2(this,"async_queue_retry"),this.Xc=()=>{const t=AD();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=AD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=AD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Or;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,N.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Li(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,br("INTERNAL UNHANDLED ERROR: ",function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=K2.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&et()}verifyOperationInProgress(){}sa(){var e=this;return(0,N.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Uk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class w8{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends n1{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new C8,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||GU(this),this._firestoreClient.terminate()}}function b8(n,e){const t="object"==typeof n?n:(0,Sn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Sn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(0,z.P0)("firestore");o&&$U(i,...o)}return i}function Nr(n){return n._firestoreClient||GU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function GU(n){var e,t,r;const i=n._freezeSettings(),o=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new RL(n._databaseId,f,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,RU(y.experimentalLongPollingOptions),y.useFetchStreams));var f,y;n._firestoreClient=new u8(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function ZU(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,N.Z)(function*(){try{yield RD(n,t),yield Pk(n,e),r.resolve()}catch(i){const o=i;if(!PU(o))throw o;go("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function qU(n){if(n._initialized||n._terminated)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pc(hr.fromBase64String(e))}catch(t){throw new ye(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pc(hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ru{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ye(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ig{constructor(e){this._methodName=e}}class VD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}}const k8=/^__.*__$/;class N8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new eu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ay(e,this.data,t,this.fieldTransforms)}}class WU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new eu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function KU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class jD{constructor(e,t,r,i,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new jD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return zD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(KU(this.ca)&&k8.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class R8{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||JI(e)}ya(e,t,r,i=!1){return new jD({ca:e,methodName:t,ga:r,path:tr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sg(n){const e=n._freezeSettings(),t=JI(n._databaseId);return new R8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $D(n,e,t,r,i,o={}){const u=n.ya(o.merge||o.mergeFields?2:0,e,t,i);$k("Data must be an object, but it was:",u,r);const f=JU(r,u);let g,y;if(o.merge)g=new Ui(u.fieldMask),y=u.fieldTransforms;else if(o.mergeFields){const b=[];for(const M of o.mergeFields){const S=o1(e,M,t);if(!u.contains(S))throw new ye(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);e3(b,S)||b.push(S)}g=new Ui(b),y=u.fieldTransforms.filter(M=>g.covers(M.field))}else g=null,y=u.fieldTransforms;return new N8(new zr(f),g,y)}class s1 extends ig{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof s1}}function YU(n,e,t){return new jD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Bk extends ig{_toFieldTransform(e){return new FI(e.path,new Py)}isEqual(e){return e instanceof Bk}}class F8 extends ig{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=YU(this,e,!0),r=this.pa.map(o=>og(o,t)),i=new Kp(r);return new FI(e.path,i)}isEqual(e){return this===e}}class L8 extends ig{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=YU(this,e,!0),r=this.pa.map(o=>og(o,t)),i=new Yp(r);return new FI(e.path,i)}isEqual(e){return this===e}}class U8 extends ig{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new xy(e.serializer,HL(e.serializer,this.Ia));return new FI(e.path,t)}isEqual(e){return this===e}}function Vk(n,e,t,r){const i=n.ya(1,e,t);$k("Data must be an object, but it was:",i,r);const o=[],u=zr.empty();Ql(r,(g,y)=>{const b=HD(e,g,t);y=(0,z.m9)(y);const M=i.da(b);if(y instanceof s1)o.push(b);else{const S=og(y,M);null!=S&&(o.push(b),u.set(b,S))}});const f=new Ui(o);return new WU(u,f,i.fieldTransforms)}function jk(n,e,t,r,i,o){const u=n.ya(1,e,t),f=[o1(e,r,t)],g=[i];if(o.length%2!=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<o.length;S+=2)f.push(o1(e,o[S])),g.push(o[S+1]);const y=[],b=zr.empty();for(let S=f.length-1;S>=0;--S)if(!e3(y,f[S])){const R=f[S];let Z=g[S];Z=(0,z.m9)(Z);const Q=u.da(R);if(Z instanceof s1)y.push(R);else{const X=og(Z,Q);null!=X&&(y.push(R),b.set(R,X))}}const M=new Ui(y);return new WU(b,M,u.fieldTransforms)}function QU(n,e,t,r=!1){return og(t,n.ya(r?4:3,e))}function og(n,e){if(XU(n=(0,z.m9)(n)))return $k("Unsupported field value:",e,n),JU(n,e);if(n instanceof ig)return function(t,r){if(!KU(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const u of t){let f=og(u,r.wa(o));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return HL(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Vn.fromDate(t);return{timestampValue:ky(r.serializer,i)}}if(t instanceof Vn){const i=new Vn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ky(r.serializer,i)}}if(t instanceof VD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pc)return{bytesValue:u4(r.serializer,t._byteString)};if(t instanceof Qn){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:i2(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${UD(t)}`)}(n,e)}function JU(n,e){const t={};return FO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ql(n,(r,i)=>{const o=og(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function XU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof VD||n instanceof Pc||n instanceof Qn||n instanceof ig)}function $k(n,e,t){if(!XU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=UD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function o1(n,e,t){if((e=(0,z.m9)(e))instanceof ru)return e._internalPath;if("string"==typeof e)return HD(n,e);throw zD("Field path arguments must be of type string or ",n,!1,void 0,t)}const B8=new RegExp("[~\\*/\\[\\]]");function HD(n,e,t){if(e.search(B8)>=0)throw zD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ru(...e.split("."))._internalPath}catch{throw zD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zD(n,e,t,r,i){const o=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(o||u)&&(g+=" (found",o&&(g+=` in field ${r}`),u&&(g+=` in document ${i}`),g+=")"),new ye(ae.INVALID_ARGUMENT,f+n+g)}function e3(n,e){return n.some(t=>t.isEqual(e))}class a1{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new V8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class V8 extends a1{data(){return super.data()}}function GD(n,e){return"string"==typeof e?HD(n,e):e instanceof ru?e._internalPath:e._delegate._internalPath}function t3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ye(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hk{}class c1 extends Hk{}function Xd(n,e,...t){let r=[];e instanceof Hk&&r.push(e),r=r.concat(t),function(i){const o=i.filter(f=>f instanceof Wy).length,u=i.filter(f=>f instanceof l1).length;if(o>1||o>0&&u>0)throw new ye(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class l1 extends c1{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new l1(e,t,r)}_apply(e){const t=this._parse(e);return s3(e._query,t),new Bi(e.firestore,e.converter,C(e._query,t))}_parse(e){const t=sg(e.firestore);return function(i,o,u,f,g,y,b){let M;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){i3(b,y);const S=[];for(const R of b)S.push(r3(f,i,R));M={arrayValue:{values:S}}}else M=r3(f,i,b)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||i3(b,y),M=QU(u,"where",b,"in"===y||"not-in"===y);return jt.create(g,y,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Wy extends Hk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:pn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const u=i.getFlattenedFilters();for(const f of u)s3(o,f),o=C(o,f)}(e._query,t),new Bi(e.firestore,e.converter,C(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class zk extends c1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zk(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Zd(i,o);return function(f,g){if(null===l(f)){const y=d(f);null!==y&&o3(0,y,g.field)}}(r,u),u}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Fa(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ZD extends c1{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ZD(e,t,r)}_apply(e){return new Bi(e.firestore,e.converter,E(e._query,this._limit,this._limitType))}}class qD extends c1{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new qD(e,t,r)}_apply(e){const t=n3(e,this.type,this._docOrFields,this._inclusive);return new Bi(e.firestore,e.converter,(i=t,new Fa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class WD extends c1{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new WD(e,t,r)}_apply(e){const t=n3(e,this.type,this._docOrFields,this._inclusive);return new Bi(e.firestore,e.converter,(i=t,new Fa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function n3(n,e,t,r){if(t[0]=(0,z.m9)(t[0]),t[0]instanceof a1)return function(i,o,u,f,g){if(!f)throw new ye(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const b of p(i))if(b.field.isKeyField())y.push(ka(o,f.key));else{const M=f.data.field(b.field);if(Jl(M))throw new ye(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const S=b.field.canonicalString();throw new ye(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}y.push(M)}return new Na(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=sg(n.firestore);return function(o,u,f,g,y,b){const M=o.explicitOrderBy;if(y.length>M.length)throw new ye(ae.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let R=0;R<y.length;R++){const Z=y[R];if(M[R].field.isKeyField()){if("string"!=typeof Z)throw new ye(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof Z}`);if(!h(o)&&-1!==Z.indexOf("/"))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${Z}' contains a slash.`);const Q=o.path.child(qt.fromString(Z));if(!Ze.isDocumentKey(Q))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const X=new Ze(Q);S.push(ka(u,X))}else{const Q=QU(f,g,Z);S.push(Q)}}return new Na(S,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function r3(n,e,t){if("string"==typeof(t=(0,z.m9)(t))){if(""===t)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h(e)&&-1!==t.indexOf("/"))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!Ze.isDocumentKey(r))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ka(n,new Ze(r))}if(t instanceof Qn)return ka(n,t._key);throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${UD(t)}.`)}function i3(n,e){if(!Array.isArray(n)||0===n.length)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s3(n,e){if(e.isInequality()){const r=d(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=l(n);null!==o&&o3(0,i,o)}const t=function(r,i){for(const o of r)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ye(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function o3(n,e,t){if(!t.isEqual(e))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Gk{convertValue(e,t="none"){switch(Tc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ql(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new VD(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=bI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Iy(e));default:return null}}convertTimestamp(e){const t=Ec(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);rt(C4(r));const i=new Aa(r.get(1),r.get(3)),o=new Ze(r.popFirst(5));return i.isEqual(t)||br(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function KD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class K8 extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class ag{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iu extends a1{constructor(e,t,r,i,o,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new u1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(GD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class u1 extends iu{data(e={}){return super.data(e)}}class eh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ag(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new u1(this._firestore,this._userDataWriter,r.key,r,new ag(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new u1(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ag(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new u1(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ag(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==u.type&&(g=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),1!==u.type&&(o=o.add(u.doc),y=o.indexOf(u.doc.key)),{type:Q8(u.type),doc:f,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Q8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function c3(n,e){return n instanceof iu&&e instanceof iu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof eh&&e instanceof eh&&n._firestore===e._firestore&&Lk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class th extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function l3(n,e,t){n=Xt(n,Qn);const r=Xt(n.firestore,Jn),i=KD(n.converter,e,t);return Ky(r,[$D(sg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,nr.none())])}function u3(n,e,t,...r){n=Xt(n,Qn);const i=Xt(n.firestore,Jn),o=sg(i);let u;return u="string"==typeof(e=(0,z.m9)(e))||e instanceof ru?jk(o,"updateDoc",n._key,e,t,r):Vk(o,"updateDoc",n._key,e),Ky(i,[u.toMutation(n._key,nr.exists(!0))])}function d3(n,...e){var t,r,i;n=(0,z.m9)(n);let o={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||Uk(e[u])||(o=e[u],u++);const f={includeMetadataChanges:o.includeMetadataChanges};if(Uk(e[u])){const M=e[u];e[u]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[u+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[u+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let g,y,b;if(n instanceof Qn)y=Xt(n.firestore,Jn),b=s(n._key.path),g={next:M=>{e[u]&&e[u](Zk(y,n,M))},error:e[u+1],complete:e[u+2]};else{const M=Xt(n,Bi);y=Xt(M.firestore,Jn),b=M._query;const S=new th(y);g={next:R=>{e[u]&&e[u](new eh(y,S,M,R))},error:e[u+1],complete:e[u+2]},t3(n._query)}return function(M,S,R,Z){const Q=new ND(Z),X=new tk(S,Q,R);return M.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return Y2(yield qy(M),X)})),()=>{Q.Dc(),M.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return J2(yield qy(M),X)}))}}(Nr(y),b,f,g)}function Ky(n,e){return function(t,r){const i=new Or;return t.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function z9(n,e,t){return ok.apply(this,arguments)}(yield Nk(t),r,i)})),i.promise}(Nr(n),e)}function Zk(n,e,t){const r=t.docs.get(e._key),i=new th(n);return new iu(n,i,e._key,r,new ag(t.hasPendingWrites,t.fromCache),e.converter)}const gj={maxAttempts:5};class h3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sg(e)}set(e,t,r){this._verifyNotCommitted();const i=nh(e,this._firestore),o=KD(i.converter,t,r),u=$D(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,nr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=nh(e,this._firestore);let u;return u="string"==typeof(t=(0,z.m9)(t))||t instanceof ru?jk(this._dataReader,"WriteBatch.update",o._key,t,r,i):Vk(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nh(e,this._firestore);return this._mutations=this._mutations.concat(new Oy(t._key,nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nh(n,e){if((n=(0,z.m9)(n)).firestore!==e)throw new ye(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class mj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=sg(e)}get(e){const t=nh(e,this._firestore),r=new K8(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const o=i[0];if(o.isFoundDocument())return new a1(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new a1(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=nh(e,this._firestore),o=KD(i.converter,t,r),u=$D(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const o=nh(e,this._firestore);let u;return u="string"==typeof(t=(0,z.m9)(t))||t instanceof ru?jk(this._dataReader,"Transaction.update",o._key,t,r,i):Vk(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=nh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nh(e,this._firestore),r=new th(this._firestore);return super.get(e).then(i=>new iu(this._firestore,r,t._key,i._document,new ag(!1,!1),t.converter))}}function qk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ye("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function p3(){if(typeof Uint8Array>"u")throw new ye("unimplemented","Uint8Arrays are not available in this environment.")}function g3(){if(!function rD(){return typeof atob<"u"}())throw new ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){$p=Sn.SDK_VERSION,(0,Sn._registerComponent)(new Cr.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),u=new Jn(new $T(t.getProvider("auth-internal")),new PL(t.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ye(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(f.options.projectId,g)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Sn.registerVersion)(_O,"3.13.0",n),(0,Sn.registerVersion)(_O,"3.13.0","esm2017")}();class d1{constructor(e){this._delegate=e}static fromBase64String(e){return g3(),new d1(Pc.fromBase64String(e))}static fromUint8Array(e){return p3(),new d1(Pc.fromUint8Array(e))}toBase64(){return g3(),this._delegate.toBase64()}toUint8Array(){return p3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Wk(n){return function Mj(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Tj{enableIndexedDbPersistence(e,t){return function E8(n,e){qU(n=Xt(n,Jn));const t=Nr(n);if(t._uninitializedComponentsProvider)throw new ye(ae.FAILED_PRECONDITION,"SDK cache is already specified.");go("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Zy;return ZU(t,i,new Dk(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function M8(n){qU(n=Xt(n,Jn));const e=Nr(n);if(e._uninitializedComponentsProvider)throw new ye(ae.FAILED_PRECONDITION,"SDK cache is already specified.");go("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Zy;return ZU(e,r,new DU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function T8(n){if(n._initialized&&!n._terminated)throw new ye(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,N.Z)(function*(){try{yield(t=(0,N.Z)(function*(r){if(!Ls.D())return Promise.resolve();const i=r+"main";yield Ls.delete(i)}),function(r){return t.apply(this,arguments)})(v2(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class m3{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Aa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&go("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){$U(this._delegate,e,t,r)}enableNetwork(){return function S8(n){return function d8(n){return n.asyncQueue.enqueue((0,N.Z)(function*(){const e=yield xU(n),t=yield AU(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.vu.delete(0),XI(i)}(t)}))}(Nr(n=Xt(n,Jn)))}(this._delegate)}disableNetwork(){return function P8(n){return function h8(n){return n.asyncQueue.enqueue((0,N.Z)(function*(){const e=yield xU(n),t=yield AU(n);return e.setNetworkEnabled(!1),(r=(0,N.Z)(function*(i){const o=qe(i);o.vu.add(0),yield By(o),o.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Nr(n=Xt(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function D8(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return function W9(n,e){return dk.apply(this,arguments)}(yield Nk(e),t)})),t.promise}(Nr(n=Xt(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function oj(n,e){return function g8(n,e){const t=new ND(e);return n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return r=yield qy(n),i=t,qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return r=yield qy(n),i=t,void qe(r).ku.delete(i);var r,i}))}}(Nr(n=Xt(n,Jn)),Uk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Yy(this,HU(this._delegate,e))}catch(t){throw fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ea(this,BD(this._delegate,e))}catch(t){throw fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ps(this,function v8(n,e){if(n=Xt(n,n1),Fk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bi(n,null,(t=e,new Fa(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function _j(n,e,t){n=Xt(n,Jn);const r=Object.assign(Object.assign({},gj),t);return function(i){if(i.maxAttempts<1)throw new ye(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,u){const f=new Or;return i.asyncQueue.enqueueAndForget((0,N.Z)(function*(){const g=yield function OU(n){return FD(n).then(e=>e.datastore)}(i);new l8(i.asyncQueue,g,u,o,f).run()})),f.promise}(Nr(n),i=>e(new mj(n,i)),r)}(this._delegate,t=>e(new _3(this,t)))}batch(){return Nr(this._delegate),new y3(new h3(this._delegate,e=>Ky(this._delegate,e)))}loadBundle(e){return function x8(n,e){const t=Nr(n=Xt(n,Jn)),r=new w8;return function m8(n,e,t,r){const i=function(o,u){let f;return f="string"==typeof o?n4().encode(o):o,g=function(g,y){if(g instanceof Uint8Array)return SU(g,y);if(g instanceof ArrayBuffer)return SU(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new a8(g,u);var g}(t,JI(e));n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){!function s8(n,e,t){const r=qe(n);var i;(i=(0,N.Z)(function*(o,u,f){try{const g=yield u.getMetadata();if(yield function(S,R){const Z=qe(S),Q=kr(R.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",X=>Z.qs.getBundleMetadata(X,R.id)).then(X=>!!X&&X.createTime.compareTo(Q)>=0)}(o.localStore,g))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(S=g).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);f._updateProgress(yU(g));const y=new U9(g,o.localStore,u.serializer);let b=yield u.bc();for(;b;){const S=yield y.zu(b);S&&f._updateProgress(S),b=yield u.bc()}const M=yield y.complete();return yield nu(o,M.Ju,void 0),yield function(S,R){const Z=qe(S);return Z.persistence.runTransaction("Save bundle","readwrite",Q=>Z.qs.saveBundleMetadata(Q,R))}(o.localStore,g),f._completeWith(M.progress),Promise.resolve(M.Hu)}catch(g){return go("SyncEngine",`Loading bundle failed with ${g}`),f._failWith(g),Promise.resolve(new Set)}var S}),function(o,u,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Nk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function A8(n,e){return function _8(n,e){return n.asyncQueue.enqueue((0,N.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.qs.getNamedQuery(o,r))}(yield LD(n),e)}))}(Nr(n=Xt(n,Jn)),e).then(t=>t?new Bi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ps(this,t):null)}}class YD extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new d1(new Pc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ea.forKey(t,this.firestore,null)}}class _3{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new YD(e)}get(e){const t=lg(e);return this._delegate.get(t).then(r=>new h1(this._firestore,new iu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=lg(e);return r?(qk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=lg(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=lg(e);return this._delegate.delete(t),this}}class y3{constructor(e){this._delegate=e}set(e,t,r){const i=lg(e);return r?(qk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=lg(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=lg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class cg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new u1(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new f1(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=cg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new cg(e,new YD(e),t),i.set(t,o)),o}}cg.INSTANCES=new WeakMap;class ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ea(t,new Qn(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new ea(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Yy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Yy(this.firestore,HU(this._delegate,e))}catch(t){throw fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,z.m9)(e))instanceof Qn&&zU(this._delegate,e)}set(e,t){t=qk("DocumentReference.set",t);try{return t?l3(this._delegate,e,t):l3(this._delegate,e)}catch(r){throw fs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?u3(this._delegate,e):u3(this._delegate,e,t,...r)}catch(i){throw fs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function ij(n){return Ky(Xt(n.firestore,Jn),[new Oy(n._key,nr.none())])}(this._delegate)}onSnapshot(...e){const t=v3(e),r=C3(e,i=>new h1(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return d3(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function X8(n){n=Xt(n,Qn);const e=Xt(n.firestore,Jn),t=Nr(e),r=new th(e);return function f8(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return(r=(0,N.Z)(function*(i,o,u){try{const f=yield function(g,y){const b=qe(g);return b.persistence.runTransaction("read document","readonly",M=>b.localDocuments.getDocument(M,y))}(i,o);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new ye(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const g=$y(f,`Failed to get document '${o} from cache`);u.reject(g)}}),function(i,o,u){return r.apply(this,arguments)})(yield LD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new iu(e,r,n._key,i,new ag(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function ej(n){n=Xt(n,Qn);const e=Xt(n.firestore,Jn);return kU(Nr(e),n._key,{source:"server"}).then(t=>Zk(e,n,t))}(this._delegate):function J8(n){n=Xt(n,Qn);const e=Xt(n.firestore,Jn);return kU(Nr(e),n._key).then(t=>Zk(e,n,t))}(this._delegate),t.then(r=>new h1(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ea(this.firestore,this._delegate.withConverter(e?cg.getInstance(this.firestore,e):null))}}function fs(n,e,t){return n.message=n.message.replace(e,t),n}function v3(n){for(const e of n)if("object"==typeof e&&!Wk(e))return e;return{}}function C3(n,e){var t,r;let i;return i=Wk(n[0])?n[0]:Wk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class h1{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return c3(this._delegate,e._delegate)}}class f1 extends h1{data(e){const t=this._delegate.data(e);return function hI(n,e){n||et()}(void 0!==t),t}}class ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YD(e)}where(e,t,r){try{return new ps(this.firestore,Xd(this._delegate,function j8(n,e,t){const r=e,i=GD("where",n);return l1._create(i,r,t)}(e,t,r)))}catch(i){throw fs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ps(this.firestore,Xd(this._delegate,function $8(n,e="asc"){const t=e,r=GD("orderBy",n);return zk._create(r,t)}(e,t)))}catch(r){throw fs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ps(this.firestore,Xd(this._delegate,function H8(n){return VU("limit",n),ZD._create("limit",n,"F")}(e)))}catch(t){throw fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ps(this.firestore,Xd(this._delegate,function z8(n){return VU("limitToLast",n),ZD._create("limitToLast",n,"L")}(e)))}catch(t){throw fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ps(this.firestore,Xd(this._delegate,function G8(...n){return qD._create("startAt",n,!0)}(...e)))}catch(t){throw fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ps(this.firestore,Xd(this._delegate,function Z8(...n){return qD._create("startAfter",n,!1)}(...e)))}catch(t){throw fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ps(this.firestore,Xd(this._delegate,function q8(...n){return WD._create("endBefore",n,!1)}(...e)))}catch(t){throw fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ps(this.firestore,Xd(this._delegate,function W8(...n){return WD._create("endAt",n,!0)}(...e)))}catch(t){throw fs(t,"endAt()","Query.endAt()")}}isEqual(e){return Lk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function nj(n){n=Xt(n,Bi);const e=Xt(n.firestore,Jn),t=Nr(e),r=new th(e);return function p8(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,N.Z)(function*(){return(r=(0,N.Z)(function*(i,o,u){try{const f=yield DD(i,o,!0),g=new wU(o,f.ir),y=g.sc(f.documents),b=g.applyChanges(y,!1);u.resolve(b.snapshot)}catch(f){const g=$y(f,`Failed to execute query '${o} against cache`);u.reject(g)}}),function(i,o,u){return r.apply(this,arguments)})(yield LD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new eh(e,r,n,i))}(this._delegate):"server"===e?.source?function rj(n){n=Xt(n,Bi);const e=Xt(n.firestore,Jn),t=Nr(e),r=new th(e);return NU(t,n._query,{source:"server"}).then(i=>new eh(e,r,n,i))}(this._delegate):function tj(n){n=Xt(n,Bi);const e=Xt(n.firestore,Jn),t=Nr(e),r=new th(e);return t3(n._query),NU(t,n._query).then(i=>new eh(e,r,n,i))}(this._delegate),t.then(r=>new Kk(this.firestore,new eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=v3(e),r=C3(e,i=>new Kk(this.firestore,new eh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return d3(this._delegate,t,r)}withConverter(e){return new ps(this.firestore,this._delegate.withConverter(e?cg.getInstance(this.firestore,e):null))}}class Sj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new f1(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new f1(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Sj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new f1(this._firestore,r))})}isEqual(e){return c3(this._delegate,e._delegate)}}class Yy extends ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ea(this.firestore,e):null}doc(e){try{return new ea(this.firestore,void 0===e?BD(this._delegate):BD(this._delegate,e))}catch(t){throw fs(t,"doc()","CollectionReference.doc()")}}add(e){return function sj(n,e){const t=Xt(n.firestore,Jn),r=BD(n),i=KD(n.converter,e);return Ky(t,[$D(sg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ea(this.firestore,t))}isEqual(e){return zU(this._delegate,e._delegate)}withConverter(e){return new Yy(this.firestore,this._delegate.withConverter(e?cg.getInstance(this.firestore,e):null))}}function lg(n){return Xt(n,Qn)}class Yk{constructor(...e){this._delegate=new ru(...e)}static documentId(){return new Yk(tr.keyField().canonicalString())}isEqual(e){return(e=(0,z.m9)(e))instanceof ru&&this._delegate._internalPath.isEqual(e._internalPath)}}class ug{constructor(e){this._delegate=e}static serverTimestamp(){const e=function vj(){return new Bk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ug(e)}static delete(){const e=function yj(){return new s1("deleteField")}();return e._methodName="FieldValue.delete",new ug(e)}static arrayUnion(...e){const t=function Cj(...n){return new F8("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ug(t)}static arrayRemove(...e){const t=function wj(...n){return new L8("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ug(t)}static increment(e){const t=function Ij(n){return new U8("increment",n)}(e);return t._methodName="FieldValue.increment",new ug(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Pj={Firestore:m3,GeoPoint:VD,Timestamp:Vn,Blob:d1,Transaction:_3,WriteBatch:y3,DocumentReference:ea,DocumentSnapshot:h1,Query:ps,QueryDocumentSnapshot:f1,QuerySnapshot:Kk,CollectionReference:Yy,FieldPath:Yk,FieldValue:ug,setLogLevel:function Dj(n){!function DL(n){Wl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Aj(n){(function xj(n,e){n.INTERNAL.registerComponent(new Cr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Pj)))})(n,(e,t)=>new m3(e,t,new Tj)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Ji.Z);var Oj=L(3019);class kj extends Ai.x{constructor(e=1/0,t=1/0,r=xf){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:u}=this;t||(r.push(e),!i&&r.push(o.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let u=0;u<o.length&&!e.closed;u+=r?1:2)e.next(o[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const u=t.now();let f=0;for(let g=1;g<r.length&&r[g]<=u;g+=2)f=g;f&&r.splice(0,f+1)}}}var Nj=L(3020);function w3(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Nj.B)({connector:()=>new kj(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function I3(n,e){return(0,Xs.m)(e)?(0,Tn.w)(()=>n,e):(0,Tn.w)(()=>n)}class su{constructor(e){return e}}class Qy{constructor(){return(0,Sn.getApps)()}}const Qk=new c.OlP("angularfire2._apps"),Fj={provide:su,useFactory:function Rj(n){return n&&1===n.length?n[0]:new su((0,Sn.getApp)())},deps:[[new c.FiY,Qk]]},Lj={provide:Qy,deps:[[new c.FiY,Qk]]};function Uj(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new su(r)}}let Bj=(()=>{class n{constructor(t){(0,Sn.registerVersion)("angularfire",Nl.full,"core"),(0,Sn.registerVersion)("angularfire",Nl.full,"app"),(0,Sn.registerVersion)("angular",c.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Fj,Lj]}),n})();function Vj(n,...e){return{ngModule:Bj,providers:[{provide:Qk,useFactory:Uj(n),multi:!0,deps:[c.R0b,c.zs3,Fl,...e]}]}}const jj=Pd(Sn.initializeApp,!0),Jk=new Map,b3={activated:!1,tokenObservers:[]},$j={initialized:!1,enabled:!1};function Er(n){return Jk.get(n)||Object.assign({},b3)}function QD(){return $j}const Xk="https://content-firebaseappcheck.googleapis.com/v1",Zj="exchangeDebugToken",E3={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Wj{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,N.Z)(function*(){t.stop();try{t.pending=new z.BH,yield function Kj(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Vi=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function eN(n){if(!Er(n).activated)throw Vi.create("use-before-activation",{appName:n.name})}function eS(n,e){return nN.apply(this,arguments)}function nN(){return nN=(0,N.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const o={method:"POST",body:JSON.stringify(e),headers:r};let u,f;try{u=yield fetch(n,o)}catch(M){throw Vi.create("fetch-network-error",{originalErrorMessage:M?.message})}if(200!==u.status)throw Vi.create("fetch-status-error",{httpStatus:u.status});try{f=yield u.json()}catch(M){throw Vi.create("fetch-parse-error",{originalErrorMessage:M?.message})}const g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Vi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const y=1e3*Number(g[1]),b=Date.now();return{token:f.token,expireTimeMillis:b+y,issuedAtTimeMillis:b}}),nN.apply(this,arguments)}function M3(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Xk}/projects/${t}/apps/${r}:${Zj}?key=${i}`,body:{debug_token:e}}}const Xj="firebase-app-check-database",e$=1,p1="firebase-app-check-store";let tS=null;function rN(){return rN=(0,N.Z)(function*(n,e){const r=(yield function D3(){return tS||(tS=new Promise((n,e)=>{try{const t=indexedDB.open(Xj,e$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Vi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(p1,{keyPath:"compositeKey"})}}catch(t){e(Vi.create("storage-open",{originalErrorMessage:t?.message}))}}),tS)}()).transaction(p1,"readwrite"),o=r.objectStore(p1).put({compositeKey:n,value:e});return new Promise((u,f)=>{o.onsuccess=g=>{u()},r.onerror=g=>{var y;f(Vi.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})}),rN.apply(this,arguments)}const g1=new ki.Yd("@firebase/app-check");function oN(n,e){return(0,z.hl)()?function n$(n,e){return function S3(n,e){return rN.apply(this,arguments)}(function x3(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{g1.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function cN(){return QD().enabled}function lN(){return uN.apply(this,arguments)}function uN(){return uN=(0,N.Z)(function*(){const n=QD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),uN.apply(this,arguments)}const c$={error:"UNKNOWN_ERROR"};function l$(n){return z.US.encodeString(JSON.stringify(n),!1)}function nS(n){return dN.apply(this,arguments)}function dN(){return dN=(0,N.Z)(function*(n,e=!1){const t=n.app;eN(t);const r=Er(t);let o,i=r.token;if(i&&!Jy(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(Jy(g)?i=g:yield oN(t,void 0))}if(!e&&i&&Jy(i))return{token:i.token};let f,u=!1;if(cN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=eS(M3(t,yield lN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const g=yield r.exchangeTokenPromise;return yield oN(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield Er(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?g1.warn(g.message):g1.error(g),o=g}return i?o?f=Jy(i)?{token:i.token,internalError:o}:N3(o):(f={token:i.token},r.token=i,yield oN(t,i)):f=N3(o),u&&function k3(n,e){const t=Er(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),dN.apply(this,arguments)}function hN(){return hN=(0,N.Z)(function*(n){const e=n.app;eN(e);const{provider:t}=Er(e);if(cN()){const r=yield lN(),{token:i}=yield eS(M3(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),hN.apply(this,arguments)}function pN(n,e){const t=Er(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function O3(n){const{app:e}=n,t=Er(e);let r=t.tokenRefresher;r||(r=function u$(n){const{app:e}=n;return new Wj((0,N.Z)(function*(){let r;if(r=Er(e).token?yield nS(n,!0):yield nS(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Er(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},E3.RETRIAL_MIN_WAIT,E3.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Jy(n){return n.expireTimeMillis-Date.now()>0}function N3(n){return{token:l$(c$),error:n}}class d${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Er(this.app);for(const t of e)pN(this.app,t.next);return Promise.resolve()}}const $3="app-check-internal";!function M$(){Yi(new Cr.wA("app-check",n=>function h$(n,e){return new d$(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($3).initialize()})),Yi(new Cr.wA($3,n=>function f$(n){return{getToken:e=>nS(n,e),getLimitedUseToken:()=>function A3(n){return hN.apply(this,arguments)}(n),addTokenListener:e=>function fN(n,e,t,r){const{app:i}=n,o=Er(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&Jy(o.token)){const f=o.token;Promise.resolve().then(()=>{t({token:f.token}),O3(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>O3(n))}(n,"INTERNAL",e),removeTokenListener:e=>pN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Ni("@firebase/app-check","0.8.0")}();class dg{constructor(){return ks("app-check")}}typeof window<"u"&&window,L(120);const z3=new c.OlP("angularfire2.auth.use-emulator"),G3=new c.OlP("angularfire2.auth.settings"),Z3=new c.OlP("angularfire2.auth.tenant-id"),q3=new c.OlP("angularfire2.auth.langugage-code"),W3=new c.OlP("angularfire2.auth.use-device-language"),K3=new c.OlP("angularfire.auth.persistence"),Y3=(n,e,t,r,i,o,u,f)=>(0,Qi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,o&&g.useDeviceLanguage(),u)for(const[y,b]of Object.entries(u))g.settings[y]=b;return f&&g.setPersistence(f),g},[t,r,i,o,u,f]);let vN=(()=>{class n{constructor(t,r,i,o,u,f,g,y,b,M,S,R){const Z=new Ai.x,Q=(0,ut.of)(void 0).pipe((0,Td.Q)(u.outsideAngular),(0,Tn.w)(()=>o.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,8661)))),(0,yt.U)(()=>(0,Qi.on)(t,o,r)),(0,yt.U)(X=>Y3(X,o,f,y,b,M,g,S)),w3({bufferSize:1,refCount:!1}));if(Pi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ut.of)(null);else{Q.pipe(cr()).subscribe();const Se=Q.pipe((0,Tn.w)(Ye=>Ye.getRedirectResult().then(gt=>gt,()=>null)),jr,w3({bufferSize:1,refCount:!1})),ze=Q.pipe((0,Tn.w)(Ye=>new gi.y(gt=>({unsubscribe:o.runOutsideAngular(()=>Ye.onAuthStateChanged(Pt=>gt.next(Pt),Pt=>gt.error(Pt),()=>gt.complete()))})))),Ne=Q.pipe((0,Tn.w)(Ye=>new gi.y(gt=>({unsubscribe:o.runOutsideAngular(()=>Ye.onIdTokenChanged(Pt=>gt.next(Pt),Pt=>gt.error(Pt),()=>gt.complete()))}))));this.authState=Se.pipe(I3(ze),(0,dp.R)(u.outsideAngular),(0,Td.Q)(u.insideAngular)),this.user=Se.pipe(I3(Ne),(0,dp.R)(u.outsideAngular),(0,Td.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,Tn.w)(Ye=>Ye?(0,_n.D)(Ye.getIdToken()):(0,ut.of)(null))),this.idTokenResult=this.user.pipe((0,Tn.w)(Ye=>Ye?(0,_n.D)(Ye.getIdTokenResult()):(0,ut.of)(null))),this.credential=(0,Oj.T)(Se,Z,this.authState.pipe(vr(Ye=>!Ye))).pipe((0,yt.U)(Ye=>Ye?.user?Ye:null),(0,dp.R)(u.outsideAngular),(0,Td.Q)(u.insideAngular))}return(0,Qi.pX)(this,Q,o,{spy:{apply:(X,Se,ze)=>{(X.startsWith("signIn")||X.startsWith("createUser"))&&ze.then(Ne=>Z.next(Ne))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Qi.Dh),c.LFG(Qi.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Fl),c.LFG(z3,8),c.LFG(G3,8),c.LFG(Z3,8),c.LFG(q3,8),c.LFG(W3,8),c.LFG(K3,8),c.LFG(dg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Q3(n,e){return function A$(n,e=O0){return new gi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function CN(n,e){return Q3(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function iS(n,e){return CN(n,e).pipe(ic(void 0),wc(),(0,yt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const g=i.find(b=>b.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(b=>b.ref.isEqual(u.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(u.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||o.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),o}))}function J3(n,e,t){return iS(n,t).pipe(da((r,i)=>function k$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function N$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return wN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),(0,$A.x)(),(0,yt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function wN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function X3(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class e5{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=iS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ic(void 0),wc(),vr(([r,i])=>i.length>0||!r),(0,yt.U)(([r,i])=>i),jr)}auditTrail(e){return this.stateChanges(e).pipe(da((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=X3(e);return J3(this.query,t,this.afs.schedulers.outsideAngular).pipe(jr)}valueChanges(e={}){return CN(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),jr)}get(e){return(0,_n.D)(this.query.get(e)).pipe(jr)}add(e){return this.ref.add(e)}doc(e){return new t5(this.ref.doc(e),this.afs)}}class t5{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=n5(r,t);return new e5(i,o,this.afs)}snapshotChanges(){return function O$(n,e){return Q3(n,e).pipe(ic(void 0),wc(),(0,yt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(jr)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_n.D)(this.ref.get(e)).pipe(jr)}}class R${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?iS(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),vr(t=>t.length>0),jr):iS(this.query,this.afs.schedulers.outsideAngular).pipe(jr)}auditTrail(e){return this.stateChanges(e).pipe(da((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=X3(e);return J3(this.query,t,this.afs.schedulers.outsideAngular).pipe(jr)}valueChanges(e={}){return CN(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),jr)}get(e){return(0,_n.D)(this.query.get(e)).pipe(jr)}}const F$=new c.OlP("angularfire2.enableFirestorePersistence"),L$=new c.OlP("angularfire2.firestore.persistenceSettings"),U$=new c.OlP("angularfire2.firestore.settings"),B$=new c.OlP("angularfire2.firestore.use-emulator");function n5(n,e=(t=>t)){return{query:e(n),ref:n}}let m1=(()=>{class n{constructor(t,r,i,o,u,f,g,y,b,M,S,R,Z,Q,X,Se,ze){this.schedulers=g;const Ne=(0,Qi.on)(t,f,r),Ye=b;M&&Y3(Ne,f,S,Z,Q,X,R,Se),[this.firestore,this.persistenceEnabled$]=(0,Qi.cc)(`${Ne.name}.firestore`,"AngularFirestore",Ne.name,()=>{const gt=f.runOutsideAngular(()=>Ne.firestore());if(o&&gt.settings(o),Ye&&gt.useEmulator(...Ye),i&&!Pi(u)){const Pt=()=>{try{return(0,_n.D)(gt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Rr){return typeof console<"u"&&console.warn(Rr),(0,ut.of)(!1)}};return[gt,f.runOutsideAngular(Pt)]}return[gt,(0,ut.of)(!1)]},[o,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:u}=n5(i,r),f=this.schedulers.ngZone.run(()=>o);return new e5(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),o=this.firestore.collectionGroup(t);return new R$(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new t5(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Qi.Dh),c.LFG(Qi.xv,8),c.LFG(F$,8),c.LFG(U$,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Fl),c.LFG(L$,8),c.LFG(B$,8),c.LFG(vN,8),c.LFG(z3,8),c.LFG(G3,8),c.LFG(Z3,8),c.LFG(q3,8),c.LFG(W3,8),c.LFG(K3,8),c.LFG(dg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var r5=L(6710);let On=(()=>{class n{constructor(t,r){this.afAuth=t,this.db=r,this._loggedInUser$=new ar.X(localStorage.getItem("loggedInUser")?JSON.parse(localStorage.getItem("loggedInUser")):null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,N.Z)(function*(){try{const r=yield t.afAuth.signInWithPopup(new r5.V);yield t._createOrUpdateUserOnDB(r);const i=yield t.afAuth.currentUser;i&&(localStorage.setItem("loggedInUser",JSON.stringify(i)),t._loggedInUser$.next(i))}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,N.Z)(function*(){try{const i=yield r.afAuth.signInWithEmailAndPassword(t.email,t.password);yield r._createOrUpdateUserOnDB(i,t);const o=yield r.afAuth.currentUser;o&&(localStorage.setItem("loggedInUser",JSON.stringify(o)),r._loggedInUser$.next(o))}catch(i){throw console.error(i.message),i.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,N.Z)(function*(){try{const i=yield r.afAuth.createUserWithEmailAndPassword(t.email,t.password);yield r._createOrUpdateUserOnDB(i,t);const o=yield r.afAuth.currentUser;o&&(localStorage.setItem("loggedInUser",JSON.stringify(o)),r._loggedInUser$.next(o))}catch(i){throw console.error(i.message),i.message}})()}logOut(){var t=this;return(0,N.Z)(function*(){try{yield t.afAuth.signOut(),localStorage.removeItem("loggedInUser"),t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}getLoggedInUser(){return this._loggedInUser$.value}_createOrUpdateUserOnDB(t,r=null){var i=this;return(0,N.Z)(function*(){var o;i.db.collection("users").doc(t.user.uid).get().pipe(zt(1)).subscribe({next:(o=(0,N.Z)(function*(u){if(u.exists){const f=u.data();f._id||(yield i.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),f.fullName||(yield i.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.user?.displayName})),f.imgUrl||(yield i.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),f.followedByUsers||(yield i.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),f.followingUsers||(yield i.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield i.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.user?.displayName,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[]})}),function(f){return o.apply(this,arguments)}),error:o=>{console.error(o)}})})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(vN),c.LFG(m1))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hg=(()=>{class n{constructor(t){this.db=t}getChatsForUser(t){return this.db.collection("chats",i=>i.where("users","array-contains",t).orderBy("lastModified","desc")).valueChanges().pipe((0,yt.U)(i=>i.filter(o=>o.shownByUsers.includes(t))))}getChatById(t){return this.db.collection("chats").doc(t).valueChanges()}addMessageToChat(t,r,i,o){var u=this;return(0,N.Z)(function*(){r.sentAt=Date.now();const f=yield u.db.collection("messages").add(r);yield u.db.collection("messages").doc(f.id).update({_id:f.id});const g=u.db.collection("chats").doc(t).valueChanges(),y=yield Zt(g),b=[...y.messages,f.id];yield u.db.collection("chats").doc(t).update({messages:b,lastModified:Date.now()}),i!==o?(y.shownByUsers.includes(i)||(yield u.db.collection("chats").doc(y._id).update({shownByUsers:[...y.shownByUsers,i]})),y.shownByUsers.includes(o)||(yield u.db.collection("chats").doc(y._id).update({shownByUsers:[...y.shownByUsers,o]}))):y.shownByUsers.includes(o)||(yield u.db.collection("chats").doc(y._id).update({shownByUsers:[...y.shownByUsers,o]}))})()}getMessageById(t){return this.db.collection("messages").doc(t).valueChanges()}getMessagesByChatId(t){return this.db.collection("messages",r=>r.where("chatId","==",t).orderBy("sentAt","asc")).valueChanges()}addNewChat(t,r,i){var o=this;return(0,N.Z)(function*(){try{const y=o.db.collection("chats",R=>R.where("users","array-contains",r)).valueChanges(),M=(yield Zt(y)).filter(R=>R.users.includes(i));let S;if(S=M.length>1?M.find(R=>R.users.every(Z=>Z===r)):M[0],S)return S.shownByUsers.includes(r)||(yield o.db.collection("chats").doc(S._id).update({shownByUsers:[...S.shownByUsers,r]})),S}catch(y){console.error("Error checking for existing chat:",y)}t.lastModified=Date.now();const u=yield o.db.collection("chats").add(t);yield o.db.collection("chats").doc(u.id).update({_id:u.id});const f=o.db.collection("chats").doc(u.id).valueChanges();return yield Zt(f)})()}removeChatById(t,r){var i=this;return(0,N.Z)(function*(){const o=i.db.collection("chats").doc(t).valueChanges(),u=yield Zt(o),f=u.shownByUsers.findIndex(g=>g===r);u.shownByUsers.splice(f,1),yield i.db.collection("chats").doc(t).update({shownByUsers:u.shownByUsers})})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(m1))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _o=function(n){return n[n.Up=1]="Up",n[n.Down=3]="Down",n[n.Right=6]="Right",n[n.Left=8]="Left",n[n.UpMirrored=2]="UpMirrored",n[n.DownMirrored=4]="DownMirrored",n[n.LeftMirrored=5]="LeftMirrored",n[n.RightMirrored=7]="RightMirrored",n[n.Default=0]="Default",n[n.NotJpeg=-1]="NotJpeg",n[n.NotDefined=-2]="NotDefined",n}(_o||{});class $n{}$n.getOrientation=n=>new Promise((e,t)=>{try{const r=new FileReader;r.onload=()=>{const i=new DataView(r.result);if(!i.byteLength||65496!==i.getUint16(0,!1))return e(_o.NotDefined);const o=i.byteLength;let u=2;for(;u<o;){const f=i.getUint16(u,!1);if(u+=2,65505===f){if(1165519206!==i.getUint32(u+=2,!1))return e(_o.NotJpeg);const g=18761===i.getUint16(u+=6,!1);u+=i.getUint32(u+4,g);const y=i.getUint16(u,g);u+=2;for(let b=0;b<y;b++)if(274===i.getUint16(u+12*b,g))return e(i.getUint16(u+12*b+8,g))}else{if(65280!=(65280&f))break;u+=i.getUint16(u,!1)}}return e(_o.NotJpeg)},r.readAsArrayBuffer(n)}catch{return t(_o.Default)}}),$n.uploadFile=(n,e=!0,t=!1)=>new Promise(function(r,i){const o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),u=/iPad|iPhone|iPod/i.test(navigator.userAgent);Promise.resolve(o||u).then(f=>f?$n.generateUploadInputNative(window.document,e,t):$n.generateUploadInputRenderer(n,e,t)).then(f=>{const g=f?Array.from(f):[],y=g.map(S=>$n.getOrientation(S)),b=g.map(S=>$n.fileToDataURL(S));let M=[];Promise.all(y).then(S=>(M=S,Promise.all(b))).then(S=>{const R=S.map((Z,Q)=>({image:Z.dataUrl,orientation:M[Q],fileName:Z.fileName}));r(e?R:R[0])})}).catch(f=>i(f))}),$n.fileToDataURL=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=i=>{e({dataUrl:i.target.result,fileName:n.name})};try{r.readAsDataURL(n)}catch(i){t(`ngx-image-compress - probably no file have been selected: ${i}`)}}),$n.generateUploadInputRenderer=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,o)=>{const u=n.createElement("input");n.setStyle(u,"display","none"),n.setProperty(u,"type","file"),n.setProperty(u,"accept","image/*"),e&&n.setProperty(u,"multiple","true"),n.listen(u,"click",f=>{f.target.value=""}),n.listen(u,"change",f=>{r=!0,i(f.target.files)}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{r||o(new Error("file upload on blur - no file selected"))},300)},{once:!0}),u.click()})},$n.generateUploadInputNative=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,o)=>{const u=n.createElement("input");u.id="upload-input"+new Date,u.style.display="none",u.setAttribute("type","file"),u.setAttribute("accept","image/*"),e&&u.setAttribute("multiple","true"),n.body.appendChild(u),u.addEventListener("change",()=>{r=!0,i(u.files),n.body.removeChild(n.getElementById(u.id))},{once:!0}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{!r&&n.getElementById(u.id)&&(o(new Error("file upload on blur - no file selected")),n.body.removeChild(n.getElementById(u.id)))},300)},{once:!0}),u.click()})},$n.compress=(n,e,t,r=50,i=50,o=0,u=0)=>new Promise(function(f,g){i/=100,r/=100;const y=new Image;y.onload=()=>{const b=t.createElement("canvas"),M=b.getContext("2d");if(!M)return g("No canvas context available");let S=y.naturalWidth,R=y.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(e===_o.Right||e===_o.Left)){const Ne=S;S=R,R=Ne}r=Math.min(r,o?o/S:1,u?u/R:1),b.width=S*r,b.height=R*r;const X=Math.PI/180;CSS.supports("image-orientation","from-image")||e===_o.Up?M.drawImage(y,0,0,b.width,b.height):e===_o.Right?(M.save(),M.rotate(90*X),M.translate(0,-b.width),M.drawImage(y,0,0,b.height,b.width),M.restore()):e===_o.Left?(M.save(),M.rotate(-90*X),M.translate(-b.width,0),M.drawImage(y,0,0,b.height,b.width),M.restore()):e===_o.Down?(M.save(),M.rotate(180*X),M.translate(-b.width,-b.height),M.drawImage(y,0,0,b.width,b.height),M.restore()):M.drawImage(y,0,0,b.width,b.height);const Se=n.substr(5,n.split(";")[0].length-5),ze=b.toDataURL(Se,i);f(ze)},y.onerror=b=>g(b),y.src=n}),$n.byteCount=n=>encodeURI(n).split(/%..|./).length-1,$n.getImageMaxSize=function(){var n=(0,N.Z)(function*(e,t,r,i=!1){const u=y=>(y/1024/1024).toFixed(2);t&&console.debug("NgxImageCompress - Opening upload window");const f=yield $n.uploadFile(r,!1,i);let g;for(let y=0;y<10;y++){const b=$n.byteCount(f.image);g=yield $n.compress(f.image,f.orientation,r,50,100);const M=$n.byteCount(g);if(console.debug("NgxImageCompress -","Compression from",u(b),"MB to",u(M),"MB"),M>=b)throw 0===y?(t&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",u(b),"MB large"),{...f,image:g}):(t&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",u(b),"MB large"),{...f,image:g});if(M<1024*e*1024)return t&&console.debug("NgxImageCompress -","Here your file",u(M),"MB large"),{...f,image:g};if(9===y)throw t&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",u(b),"MB large"),{...f,image:g};t&&console.debug("NgxImageCompress -","Reached",u(M),"MB large. Trying another time after",y+1,"times"),f.image=g}throw t&&console.debug("NgxImageCompress - Unexpected error"),{}});return function(e,t,r){return n.apply(this,arguments)}}();let i5=(()=>{class n{constructor(t){this.DOC_ORIENTATION=_o,this.render=t.createRenderer(null,null)}byteCount(t){return $n.byteCount(t)}getOrientation(t){return $n.getOrientation(t)}uploadFile(){return $n.uploadFile(this.render,!1)}uploadMultipleFiles(){return $n.uploadFile(this.render,!0)}uploadFileOrReject(){return $n.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return $n.uploadFile(this.render,!0,!0)}compressFile(t,r,i=50,o=50,u=0,f=0){return $n.compress(t,r,this.render,i,o,u,f)}uploadAndGetImageWithMaxSize(t=1,r=!1,i=!1){return $n.getImageMaxSize(t,r,this.render,i).then(o=>o.image).catch(o=>{throw o.image})}uploadAndGetImageWithMaxSizeAndMetas(t=1,r=!1,i=!1){return $n.getImageMaxSize(t,r,this.render,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ta=(()=>{class n{constructor(t,r,i,o){this.db=t,this.authService=r,this.chatService=i,this.imageCompress=o,this._posts$=new ar.X([]),this.posts$=this._posts$.asObservable()}getPosts(){var t=this;return(0,N.Z)(function*(){const r=t.authService.getLoggedInUser();if(!r)return;const i=t.db.collection("users").doc(r.uid).valueChanges().pipe(zt(1)),o=yield Zt(i);return t.db.collection("posts",f=>f.where("creatorId","in",[r.uid,...o.followingUsers]).orderBy("createdAt","desc")).valueChanges().pipe(Dn(function(){var f=(0,N.Z)(function*(g){t._posts$.next([...g])});return function(g){return f.apply(this,arguments)}}()))})()}getPostById(t){var r=this;return(0,N.Z)(function*(){const i=r.db.collection("posts").doc(t).valueChanges();return yield Zt(i)})()}toggleLike(t,r){var i=this;return(0,N.Z)(function*(){return t?yield i.addLike(r):yield i.removeLike(r)})()}addLike(t){var r=this;return(0,N.Z)(function*(){return new Promise(function(){var i=(0,N.Z)(function*(o,u){try{const f=r.authService.getLoggedInUser();t.likedByUsers=t.likedByUsers.map(g=>g._id),t.likedByUsers.push(f.uid),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...t.likedByUsers]}),o("Add like done")}catch(f){throw u("Add like failed:"),f}});return function(o,u){return i.apply(this,arguments)}}())})()}getPostsForUser(t){return this.db.collection("posts",i=>i.where("creatorId","==",t).orderBy("createdAt","desc")).valueChanges()}removeLike(t){var r=this;return(0,N.Z)(function*(){return new Promise(function(){var i=(0,N.Z)(function*(o,u){try{const g=r.authService.getLoggedInUser().uid;t.likedByUsers=t.likedByUsers.map(b=>b._id);const y=t.likedByUsers.findIndex(b=>b===g);t.likedByUsers.splice(y,1),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...t.likedByUsers]}),o("Remove like done")}catch(f){throw o("Remove like failed!"),f}});return function(o,u){return i.apply(this,arguments)}}())})()}uploadMedia(){var t=this;return(0,N.Z)(function*(){try{const{image:r,orientation:i}=yield t.imageCompress.uploadFile();return yield t.imageCompress.compressFile(r,i,50,50)}catch(r){return console.error(r),null}})()}createPost(t){var r=this;return(0,N.Z)(function*(){const i=r.authService.getLoggedInUser();t.creatorId=i.uid;const o=r.db.collection("users").doc(i.uid).valueChanges().pipe(zt(1)),u=yield Zt(o);t.creatorFullName=i.displayName||u.fullName,t.createdAt=Date.now();const f=yield r.db.collection("posts").add(t);yield r.db.collection("posts").doc(f.id).update({_id:f.id})})()}removePostById(t){var r=this;return(0,N.Z)(function*(){yield r._removeCommentsOfPostId(t),yield r._removeNotificationsOfPostId(t),yield r.db.collection("posts").doc(t).delete()})()}getCommentsByPostId(t){return this.db.collection("comments",i=>i.where("postId","==",t).where("isTopLevel","==",!0).orderBy("createdAt","desc")).valueChanges()}getRepliesForComment(t){return t.replies?.length||(t.replies=[""]),this.db.collection("comments",i=>i.where("isTopLevel","==",!1).where("_id","in",t.replies).orderBy("createdAt","desc")).valueChanges()}addComment(t,r){var i=this;return(0,N.Z)(function*(){t.createdAt=Date.now(),t.isTopLevel=!0;const o=yield i.db.collection("comments").add(t);yield i.db.collection("comments").doc(o.id).update({_id:o.id,parentId:o.id})})()}addReply(t){var r=this;return(0,N.Z)(function*(){t.createdAt=Date.now(),t.createdByUserId=t.createdByUserId._id,t.isTopLevel=!1;const i=r.db.collection("comments").doc(t.parentId).valueChanges().pipe(zt(1)),o=yield Zt(i);o.replies||(o.replies=[]);const u=yield r.db.collection("comments").add(t);yield r.db.collection("comments").doc(u.id).update({_id:u.id}),yield r.db.collection("comments").doc(t.parentId).update({replies:[...o.replies,u.id]})})()}getCommentById(t){return this.db.collection("comments").doc(t).valueChanges()}sendPost(t,r,i,o){var u=this;return(0,N.Z)(function*(){const f=u.db.collection("chats",M=>M.where("users","array-contains",r)).valueChanges(),y=(yield Zt(f)).filter(M=>M.users.includes(t));let b;return y.length>1&&(b=y.find(M=>M.users.every(S=>S===r)),b||(b=yield u.chatService.addNewChat({_id:"",lastModified:0,isRead:!1,shownByUsers:[r],users:[r],messages:[]},r,t))),y.length||(b=yield u.chatService.addNewChat({_id:"",lastModified:0,isRead:!1,shownByUsers:[r,t],users:[r,t],messages:[]},r,t)),1===y.length&&(b=y[0]),o.chatId=b._id,o.postId=i._id,yield u.chatService.addMessageToChat(b._id,o,t,r),b._id})()}_removeCommentsOfPostId(t){var r=this;return(0,N.Z)(function*(){const o=r.db.collection("comments",f=>f.where("postId","==",t)).valueChanges(),u=yield Zt(o);for(const f of u)yield r.db.collection("comments").doc(f._id).delete()})()}_removeNotificationsOfPostId(t){var r=this;return(0,N.Z)(function*(){const i=r.db.collection("notifications",u=>u.where("postId","==",t)).valueChanges(),o=yield Zt(i);for(const u of o)yield r.db.collection("notifications").doc(u._id).delete()})()}_makeId(t=5){let r="";for(let o=0;o<t;o++)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return r}_handleError(t){return console.log("err:",t),ua(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(m1),c.LFG(On),c.LFG(hg),c.LFG(i5))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sS(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let u,o=!1;n.subscribe({next:f=>{u=f,o=!0},error:i,complete:()=>{o?r(u):t?r(e.defaultValue):i(new ro)}})})}let na=(()=>{class n{constructor(t,r,i){this.authService=t,this.db=r,this.imageCompress=i,this._isSearchModalShown$=new ar.X(!1),this.isSearchModalShown$=this._isSearchModalShown$.asObservable()}toggleFollow(t,r){var i=this;return(0,N.Z)(function*(){return new Promise(t?function(){var o=(0,N.Z)(function*(u){yield i.addFollow(r),u("Add follow completed successfully!")});return function(u){return o.apply(this,arguments)}}():function(){var o=(0,N.Z)(function*(u){yield i.removeFollow(r),u("Remove follow completed successfully!")});return function(u){return o.apply(this,arguments)}}())})()}addFollow(t){var r=this;return(0,N.Z)(function*(){var g;r.authService.loggedInUser$.pipe(zt(1)).subscribe({next:(g=(0,N.Z)(function*(y){yield r.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,y?.uid]})}),function(b){return g.apply(this,arguments)})});const i=r.authService.loggedInUser$.pipe(zt(1)),o=yield sS(i),u=r.db.collection("users").doc(o.uid).valueChanges().pipe(zt(1)),f=yield sS(u);yield r.db.collection("users").doc(f._id).update({followingUsers:[...f.followingUsers,t._id]})})()}removeFollow(t){var r=this;return(0,N.Z)(function*(){const i=r.authService.loggedInUser$.pipe(zt(1)),o=yield sS(i),u=r.db.collection("users").doc(o.uid).valueChanges().pipe(zt(1)),f=yield sS(u),g=structuredClone(t.followedByUsers),y=g.findIndex(M=>M===o.uid);if(-1===y)return;g.splice(y,1),yield r.db.collection("users").doc(t._id).update({followedByUsers:g});const b=f.followingUsers.findIndex(M=>M===t._id);f.followingUsers.splice(b,1),yield r.db.collection("users").doc(f._id).update({followingUsers:f.followingUsers})})()}getUsers(t){return this.db.collection("users").valueChanges().pipe((0,yt.U)(r=>{const i=new RegExp(t.account,"i");return r.filter(o=>i.test(o.fullName))}))}uploadMedia(){var t=this;return(0,N.Z)(function*(){try{const{image:r,orientation:i}=yield t.imageCompress.uploadFile();return yield t.imageCompress.compressFile(r,i,50,50)}catch(r){return console.error(r),null}})()}updateUserProfile(t){this.db.collection("users").doc(t._id).set(t)}setIsSearchModalShown(t){this._isSearchModalShown$.next(t)}getLikedByUsers(t){return t=t.map(i=>i._id),this.db.collection("users",i=>i.where("_id","in",t)).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(On),c.LFG(m1),c.LFG(i5))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IN=(()=>{class n{constructor(t){this.db=t}addNotification(t,r){var i=this;return(0,N.Z)(function*(){"likeAction"===r&&(t.message="liked your post"),t.createdAt=Date.now();const o=yield i.db.collection("notifications").add(t);yield i.db.collection("notifications").doc(o.id).update({_id:o.id})})()}getNotificationsForUser(t){return this.db.collection("notifications",r=>r.where("recipient","==",t).orderBy("createdAt","desc")).valueChanges()}markAsRead(t){var r=this;return(0,N.Z)(function*(){yield r.db.doc(`notifications/${t}`).update({read:!0})})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(m1))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function s5(...n){const e=(0,to.jO)(n),{args:t,keys:r}=In(n),i=new gi.y(o=>{const{length:u}=t;if(!u)return void o.complete();const f=new Array(u);let g=u,y=u;for(let b=0;b<u;b++){let M=!1;(0,Uu.Xf)(t[b]).subscribe((0,mi.x)(o,S=>{M||(M=!0,y--),f[b]=S},()=>g--,void 0,()=>{(!g||!M)&&(y||o.next(r?no(r,f):f),o.complete())}))}});return e?i.pipe(el(e)):i}function j$(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",3),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleFollow())}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw(2);c.xp6(1),c.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function $$(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",3),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onRemovePost())}),c._uU(1," Remove "),c.qZA()}}function H$(n,e){if(1&n&&(c.TgZ(0,"div",1)(1,"ul"),c.YNc(2,j$,2,1,"li",2),c.YNc(3,$$,2,0,"li",2),c.qZA()()),2&n){const t=c.oxw();c.xp6(2),c.Q6J("ngIf",t.creator._id!==t.loggedInUser.uid),c.xp6(1),c.Q6J("ngIf",t.creator._id===t.loggedInUser.uid)}}let z$=(()=>{class n{constructor(t,r){this.authService=t,this.postService=r,this.onToggleFollow=new c.vpe,this.isFollowClicked=!1,this.isMoreOptionsModalInited=!1}ngOnInit(){var t=this;return(0,N.Z)(function*(){const r=t.authService.getUserById(t.creator._id),i=yield Zt(r),o=t.authService.getLoggedInUser();t.loggedInUser=o,t.isFollowClicked=!!i.followedByUsers.find(u=>u===o.uid),t.isMoreOptionsModalInited=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.creator,isFollowClicked:this.isFollowClicked})}onRemovePost(){var t=this;return(0,N.Z)(function*(){yield t.postService.removePostById(t.post._id)})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(ta))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["more-options-modal"]],inputs:{post:"post",creator:"creator"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","more-options-modal",4,"ngIf"],[1,"more-options-modal"],[3,"click",4,"ngIf"],[3,"click"]],template:function(r,i){1&r&&c.YNc(0,H$,4,2,"div",0),2&r&&c.Q6J("ngIf",i.loggedInUser)},dependencies:[hn],styles:["[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;right:0;top:30px;z-index:20;background-color:#262626;width:-moz-fit-content;width:fit-content;min-height:50px;padding-inline:1.5em;padding-block:1em;color:#f5f5f5;font-size:17px;border-radius:.4em}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})(),oS=(()=>{class n{transform(t){const i=Math.floor(Date.now()/1e3)-t/1e3;return i<60?"just now":i<3600?`${Math.floor(i/60)}m`:i<86400?`${Math.floor(i/3600)}h`:`${Math.floor(i/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=c.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function G$(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"more-options-modal",10),c.NdJ("onToggleFollow",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleFollow.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("post",t.post)("creator",t.creator)}}function Z$(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",1)(1,"div",2),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickUserImg.emit(i.creator._id))}),c._UZ(2,"img",3),c.TgZ(3,"h5"),c._uU(4),c.TgZ(5,"span"),c._uU(6),c.ALo(7,"timeAgo"),c.qZA()()(),c.TgZ(8,"button",4),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isMoreOptionsModalShown=!i.isMoreOptionsModalShown)}),c.O4$(),c.TgZ(9,"svg",5),c._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),c.qZA(),c.YNc(13,G$,1,2,"more-options-modal",9),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(2),c.Q6J("src",t.creator.imgUrl,c.LSH),c.xp6(2),c.hij(" ",t.creator.fullName," "),c.xp6(2),c.hij("\u2022 ",c.lcZ(7,4,t.post.createdAt),""),c.xp6(7),c.Q6J("ngIf",t.isMoreOptionsModalShown)}}let q$=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new c.vpe,this.onClickUserImg=new c.vpe,this.isMoreOptionsModalShown=!1}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post",isComponentInitialized:"isComponentInitialized"},outputs:{onToggleFollow:"onToggleFollow",onClickUserImg:"onClickUserImg"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator",3,"click"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options",3,"click"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"],[3,"post","creator","onToggleFollow",4,"ngIf"],[3,"post","creator","onToggleFollow"]],template:function(r,i){1&r&&c.YNc(0,Z$,14,6,"div",0),2&r&&c.Q6J("ngIf",i.creator&&i.isComponentInitialized)},dependencies:[hn,z$,oS],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em;cursor:pointer}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center;position:relative;cursor:pointer}"]})}return n})();const W$=function(n,e){return{"btn-toggle-follow":!0,following:n,disabled:e}};function K$(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",4),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleFollow())}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("ngClass",c.WLB(3,W$,t.isFollowClicked,t.isToggleFollowProcessing))("disabled",t.isToggleFollowProcessing),c.xp6(1),c.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function Y$(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"img",1),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickUserImg.emit(i.user._id))}),c.qZA(),c.TgZ(2,"h4",2),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickUserImg.emit(i.user._id))}),c._uU(3),c.qZA(),c.YNc(4,K$,2,6,"button",3),c.qZA()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("src",t.user.imgUrl,c.LSH),c.xp6(2),c.Oqu(t.user.fullName),c.xp6(1),c.Q6J("ngIf",t.user._id!==t.loggedInUser.uid)}}let Q$=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new c.vpe,this.onClickUserImg=new c.vpe,this.isFollowClicked=!1,this.isComponentInitialized=!1,this.isToggleFollowProcessing=!1}ngOnInit(){var t=this;return(0,N.Z)(function*(){const r=t.authService.getUserById(t.user._id),i=yield Zt(r),o=t.authService.getLoggedInUser();t.loggedInUser=o,t.isFollowClicked=!!i.followedByUsers.find(u=>u===o.uid),t.isComponentInitialized=!0})()}ngOnChanges(t){t.user.firstChange||(this.isFollowClicked=!!this.user.followedByUsers.find(r=>r===this.loggedInUser?.uid))}toggleFollow(){this.isToggleFollowProcessing||(this.isToggleFollowProcessing=!0,this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({user:this.user,isFollowClicked:this.isFollowClicked}),this.isToggleFollowProcessing=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow",onClickUserImg:"onClickUserImg"},features:[c.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["alt","loggedInUser",3,"src","click"],[3,"click"],[3,"ngClass","disabled","click",4,"ngIf"],[3,"ngClass","disabled","click"]],template:function(r,i){1&r&&c.YNc(0,Y$,5,3,"li",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Kr,hn],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:45px;border-radius:50%;flex:1;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;flex:2;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function J$(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"liked-by-user-row",7),c.NdJ("onToggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleFollow.emit(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onClickUserImg.emit(i))}),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw();c.Q6J("post",r.post)("user",t)}}let X$=(()=>{class n{constructor(t,r){this.renderer=t,this.userService=r,this.onToggleLikedByUsersModal=new c.vpe,this.onToggleFollow=new c.vpe,this.onCloseLikedByUsers=new c.vpe,this.onClickUserImg=new c.vpe}ngOnInit(){this.renderer.addClass(document.body,"body-unscrollable"),this.usersSubscription=this.userService.getLikedByUsers(this.post.likedByUsers).subscribe({next:t=>{this.post.likedByUsers=t}})}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}trackByUserId(t,r){return r._id}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable"),this.usersSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj),c.Y36(na))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow",onCloseLikedByUsers:"onCloseLikedByUsers",onClickUserImg:"onClickUserImg"},decls:12,vars:2,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow","onClickUserImg",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","user","onToggleFollow","onClickUserImg"]],template:function(r,i){1&r&&(c.TgZ(0,"article",0)(1,"div",1)(2,"h3"),c._uU(3,"Likes"),c.qZA(),c.TgZ(4,"button",2),c.NdJ("click",function(){return i.toggleLikedByUsersModal(),i.onCloseLikedByUsers.emit(!1)}),c.O4$(),c.TgZ(5,"svg",3)(6,"title"),c._uU(7,"Close"),c.qZA(),c._UZ(8,"polyline",4)(9,"line",5),c.qZA()()(),c.kcU(),c.TgZ(10,"ul"),c.YNc(11,J$,1,2,"liked-by-user-row",6),c.qZA()()),2&r&&(c.xp6(11),c.Q6J("ngForOf",i.post.likedByUsers)("ngForTrackBy",i.trackByUserId))},dependencies:[Yr,Q$],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:calc(100vw - 70px);max-width:27em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3.5em;position:relative}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1.2em;top:50%;transform:translateY(-50%);cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em;max-height:16.8em;overflow:auto}"]})}return n})(),o5=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj),c.Y36(c.SBq))};static#t=this.\u0275dir=c.lG2({type:n})}return n})(),fg=(()=>{class n extends o5{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}();static#t=this.\u0275dir=c.lG2({type:n,features:[c.qOj]})}return n})();const xc=new c.OlP("NgValueAccessor"),tH={provide:xc,useExisting:(0,c.Gpc)(()=>yo),multi:!0},rH=new c.OlP("CompositionEventMode");let yo=(()=>{class n extends o5{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nH(){const n=U()?U().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(rH,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&c.NdJ("input",function(u){return i._handleInput(u.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(u){return i._compositionEnd(u.target.value)})},features:[c._Bn([tH]),c.qOj]})}return n})();const ns=new c.OlP("NgValidators"),ih=new c.OlP("NgAsyncValidators");function _5(n){return null!=n}function y5(n){return(0,c.QGY)(n)?(0,_n.D)(n):n}function v5(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function C5(n,e){return e.map(t=>t(n))}function w5(n){return n.map(e=>function sH(n){return!n.validate}(e)?e:t=>e.validate(t))}function bN(n){return null!=n?function I5(n){if(!n)return null;const e=n.filter(_5);return 0==e.length?null:function(t){return v5(C5(t,e))}}(w5(n)):null}function EN(n){return null!=n?function b5(n){if(!n)return null;const e=n.filter(_5);return 0==e.length?null:function(t){return s5(C5(t,e).map(y5)).pipe((0,yt.U)(v5))}}(w5(n)):null}function E5(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function MN(n){return n?Array.isArray(n)?n:[n]:[]}function cS(n,e){return Array.isArray(n)?n.includes(e):n===e}function D5(n,e){const t=MN(e);return MN(n).forEach(i=>{cS(t,i)||t.push(i)}),t}function S5(n,e){return MN(e).filter(t=>!cS(n,t))}class P5{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=EN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class gs extends P5{get formDirective(){return null}get path(){return null}}class sh extends P5{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class x5{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let La=(()=>{class n extends x5{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(sh,2))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&c.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[c.qOj]})}return n})(),ou=(()=>{class n extends x5{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(gs,10))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&c.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[c.qOj]})}return n})();const _1="VALID",uS="INVALID",Xy="PENDING",y1="DISABLED";function SN(n){return(dS(n)?n.validators:n)||null}function PN(n,e){return(dS(e)?e.asyncValidators:n)||null}function dS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class N5{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_1}get invalid(){return this.status===uS}get pending(){return this.status==Xy}get disabled(){return this.status===y1}get enabled(){return this.status!==y1}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(D5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(D5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(S5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(S5(e,this._rawAsyncValidators))}hasValidator(e){return cS(this._rawValidators,e)}hasAsyncValidator(e){return cS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Xy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=y1,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_1,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_1||this.status===Xy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?y1:_1}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Xy,this._hasOwnPendingAsyncValidator=!0;const t=y5(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?y1:this.errors?uS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xy)?Xy:this._anyControlsHaveStatus(uS)?uS:_1}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){dS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function lH(n){return Array.isArray(n)?bN(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function uH(n){return Array.isArray(n)?EN(n):n||null}(this._rawAsyncValidators)}}class xN extends N5{constructor(e,t,r){super(SN(t),PN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function k5(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new c.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function O5(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[t])throw new c.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const pg=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>v1}),v1="always";function C1(n,e,t=v1){AN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function fH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&R5(n,e)})}(n,e),function gH(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function pH(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&R5(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function hH(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function pS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function AN(n,e){const t=function M5(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(E5(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function T5(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(E5(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();pS(e._rawValidators,i),pS(e._rawAsyncValidators,i)}function R5(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const CH={provide:gs,useExisting:(0,c.Gpc)(()=>Ua)},w1=(()=>Promise.resolve())();let Ua=(()=>{class n extends gs{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new xN({},bN(t),EN(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){w1.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),C1(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){w1.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){w1.then(()=>{const r=this._findContainer(t.path),i=new xN({});(function F5(n,e){AN(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){w1.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){w1.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function L5(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ns,10),c.Y36(ih,10),c.Y36(pg,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&c.NdJ("submit",function(u){return i.onSubmit(u)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([CH]),c.qOj]})}return n})();function U5(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function B5(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const V5=class extends N5{constructor(e=null,t,r){super(SN(t),PN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=B5(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){U5(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){U5(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){B5(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},bH={provide:sh,useExisting:(0,c.Gpc)(()=>ra)},H5=(()=>Promise.resolve())();let ra=(()=>{class n extends sh{constructor(t,r,i,o,u,f){super(),this._changeDetectorRef=u,this.callSetDisabledState=f,this.control=new V5,this._registered=!1,this.name="",this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function NN(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===yo?t=o:function yH(n){return Object.getPrototypeOf(n.constructor)===fg}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function kN(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){C1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){H5.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,c.VuI)(r);H5.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function hS(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(gs,9),c.Y36(ns,10),c.Y36(ih,10),c.Y36(xc,10),c.Y36(c.sBO,8),c.Y36(pg,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([bH]),c.qOj,c.TTD]})}return n})(),au=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),G5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();const RN=new c.OlP("NgModelWithFormControlWarning");let c6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[G5]})}return n})(),WH=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:pg,useValue:t.callSetDisabledState??v1}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[c6]})}return n})(),KH=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:RN,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:pg,useValue:t.callSetDisabledState??v1}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[c6]})}return n})();function YH(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"form",1),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.addReply())}),c._UZ(1,"img",2),c.TgZ(2,"input",3),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.reply.message=i)}),c.qZA(),c.TgZ(3,"button",4),c._uU(4,"Post"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("src",t.reply.createdByUserId.imgUrl,c.LSH),c.xp6(1),c.MGl("placeholder","Add a reply to ",t.comment.createdByUserId.fullName,"..."),c.Q6J("ngModel",t.reply.message)}}let QH=(()=>{class n{constructor(t,r){this.postService=t,this.authService=r,this.onAddReply=new c.vpe,this.onReplyFormInitialized=new c.vpe,this.reply={_id:"",parentId:"",isTopLevel:!1,postId:"",createdByUserId:this.authService.getLoggedInUser().uid,message:"",createdAt:0},this.isReplyFormInitialized=!1}ngOnInit(){var t=this;return(0,N.Z)(function*(){const r=t.postService.getCommentById(t.comment._id).pipe(zt(1));t.comment=yield Zt(r);const i=t.authService.getUserById(t.comment.createdByUserId);t.comment.createdByUserId=yield Zt(i),t.reply.postId=t.comment.postId,t.reply.parentId=t.comment.parentId;const o=t.authService.getUserById(t.reply.createdByUserId);t.reply.createdByUserId=yield Zt(o),t.isReplyFormInitialized=!0,t.onReplyFormInitialized.emit(!0)})()}addReply(){this.reply.message&&(this.onAddReply.emit({...this.reply}),this.reply.message="")}ngOnDestroy(){this.onReplyFormInitialized.emit(!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ta),c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["reply-form"]],inputs:{comment:"comment"},outputs:{onAddReply:"onAddReply",onReplyFormInitialized:"onReplyFormInitialized"},decls:1,vars:1,consts:[[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["alt","user",3,"src"],["type","text","name","reply-message",3,"ngModel","placeholder","ngModelChange"],["type","submit"]],template:function(r,i){1&r&&c.YNc(0,YH,5,3,"form",0),2&r&&c.Q6J("ngIf",i.isReplyFormInitialized)},dependencies:[hn,au,yo,La,ou,ra,Ua],styles:["[_nghost-%COMP%]{position:fixed;bottom:61.5px;left:0;z-index:100;background-color:#000;height:3.5em;width:100%;padding-inline:25px}.reply-form-initialized[_nghost-%COMP%]{z-index:130}@media (min-width: 600px){[_nghost-%COMP%]{width:500px;left:unset;bottom:27px}}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;height:100%}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;color:#f5f5f5;height:100%;background-color:#000;border:none;flex:3}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f5f5f5}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:100%;border:none;cursor:pointer;background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;text-align:right;flex:1}"]})}return n})(),JH=(()=>{class n{constructor(t){this.router=t,this.onNavigateUserProfileFromReply=new c.vpe}navigateToUserProfile(){this.router.navigateByUrl(`profile/${this.reply.createdByUserId._id}`),this.onNavigateUserProfileFromReply.emit()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(fn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["reply-preview"]],inputs:{reply:"reply"},outputs:{onNavigateUserProfileFromReply:"onNavigateUserProfileFromReply"},decls:11,vars:6,consts:[["alt","user",3,"src","click"],[1,"content"],[1,"inner-container"],[1,"fullname",3,"click"],[1,"created-at"]],template:function(r,i){1&r&&(c.TgZ(0,"li")(1,"img",0),c.NdJ("click",function(){return i.navigateToUserProfile()}),c.qZA(),c.TgZ(2,"div",1)(3,"div",2)(4,"span",3),c.NdJ("click",function(){return i.navigateToUserProfile()}),c._uU(5),c.qZA(),c.TgZ(6,"span",4),c._uU(7),c.ALo(8,"timeAgo"),c.qZA()(),c.TgZ(9,"p"),c._uU(10),c.qZA()()()),2&r&&(c.xp6(1),c.Q6J("src",i.reply.createdByUserId.imgUrl,c.LSH),c.xp6(4),c.Oqu(i.reply.createdByUserId.fullName),c.xp6(2),c.Oqu(c.lcZ(8,4,i.reply.createdAt)),c.xp6(3),c.hij(" ",i.reply.message," "))},dependencies:[oS],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.6em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;border-radius:50%;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#919191;font-size:13px}"]})}return n})();function XH(n,e){1&n&&c._UZ(0,"reply-preview",3),2&n&&c.Q6J("reply",e.$implicit)}function ez(n,e){if(1&n&&(c.TgZ(0,"ul",1),c.YNc(1,XH,1,1,"reply-preview",2),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.replies)("ngForTrackBy",t.trackByReplyId)}}let tz=(()=>{class n{trackByReplyId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["reply-list"]],inputs:{replies:"replies"},decls:1,vars:1,consts:[["class","replies",4,"ngIf"],[1,"replies"],[3,"reply",4,"ngFor","ngForOf","ngForTrackBy"],[3,"reply"]],template:function(r,i){1&r&&c.YNc(0,ez,2,2,"ul",0),2&r&&c.Q6J("ngIf",null==i.replies?null:i.replies.length)},dependencies:[Yr,hn,JH],styles:["[_nghost-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.3em;padding-inline-start:2.7em}"]})}return n})();function nz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",12),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickReply())}),c._uU(1," Reply "),c.qZA()}}function rz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"p",13),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isReplyListShown=!i.isReplyListShown)}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw();c.xp6(1),c.lnq(" ",t.isReplyListShown?"Hide":"Show"," ",t.replies.length," ",1===t.replies.length?"reply":"replies"," ")}}function iz(n,e){if(1&n&&c._UZ(0,"reply-list",14),2&n){const t=c.oxw();c.Q6J("replies",t.replies)}}const sz=function(n){return{"reply-form-initialized":n}};function oz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"reply-form",15),c.NdJ("onAddReply",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.addReply(i))})("onReplyFormInitialized",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.isReplyFormInitialized=i)}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("ngClass",c.VKq(2,sz,t.isReplyFormInitialized))("comment",t.comment)}}let az=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.router=i,this.onAddReply=new c.vpe,this.isReplyFormShown=!1,this.replies=[],this.isReplyListShown=!1,this.isReplyFormInitialized=!1}ngOnInit(){var t=this;document.body.addEventListener("click",this.handleOutsideClick.bind(this)),this.comment.replies?.length&&this.postService.getRepliesForComment(this.comment).pipe(zt(1),(0,Tn.w)(function(){var r=(0,N.Z)(function*(i){const o=i.map(function(){var u=(0,N.Z)(function*(f){const g=t.authService.getUserById(f.createdByUserId),y=yield Zt(g);return{...f,createdByUserId:y}});return function(f){return u.apply(this,arguments)}}());return yield Promise.all(o)});return function(i){return r.apply(this,arguments)}}())).subscribe({next:r=>{this.replies=r}})}ngOnChanges(t){var r=this;t.comment.firstChange||t.comment.currentValue.replies.length&&this.postService.getRepliesForComment(this.comment).pipe(zt(1),(0,Tn.w)(function(){var i=(0,N.Z)(function*(o){const u=o.map(function(){var f=(0,N.Z)(function*(g){const y=r.authService.getUserById(g.createdByUserId),b=yield Zt(y);return{...g,createdByUserId:b}});return function(g){return f.apply(this,arguments)}}());return yield Promise.all(u)});return function(o){return i.apply(this,arguments)}}())).subscribe({next:i=>{this.replies=i}})}addReply(t){this.onAddReply.emit(t),this.isReplyFormShown=!1}onClickReply(){this.isReplyFormShown=!0}handleOutsideClick(t){const r=t.target;!r.closest(".reply-form")&&!r.classList.contains("btn-reply")&&(this.isReplyFormShown=!1)}navigateToUserProfile(){this.router.navigateByUrl(`/profile/${this.comment.createdByUserId._id}`)}ngOnDestroy(){document.body.removeEventListener("click",this.handleOutsideClick)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ta),c.Y36(On),c.Y36(fn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["comment-cmp"]],inputs:{comment:"comment"},outputs:{onAddReply:"onAddReply"},features:[c.TTD],decls:17,vars:10,consts:[[1,"comment"],[1,"meter"],[1,"comment-top-level"],["alt","user",3,"src","click"],[1,"content"],[1,"inner-container"],[1,"fullname",3,"click"],[1,"created-at"],["class","btn-reply",3,"click",4,"ngIf"],["class","btn-toggle-replies",3,"click",4,"ngIf"],[3,"replies",4,"ngIf"],["class","reply-form",3,"ngClass","comment","onAddReply","onReplyFormInitialized",4,"ngIf"],[1,"btn-reply",3,"click"],[1,"btn-toggle-replies",3,"click"],[3,"replies"],[1,"reply-form",3,"ngClass","comment","onAddReply","onReplyFormInitialized"]],template:function(r,i){1&r&&(c.TgZ(0,"li",0),c._UZ(1,"div",1),c.TgZ(2,"div",2)(3,"img",3),c.NdJ("click",function(){return i.navigateToUserProfile()}),c.qZA(),c.TgZ(4,"div",4)(5,"div",5)(6,"span",6),c.NdJ("click",function(){return i.navigateToUserProfile()}),c._uU(7),c.qZA(),c.TgZ(8,"span",7),c._uU(9),c.ALo(10,"timeAgo"),c.qZA()(),c.TgZ(11,"p"),c._uU(12),c.qZA(),c.YNc(13,nz,2,0,"button",8),c.qZA()(),c.YNc(14,rz,2,3,"p",9),c.YNc(15,iz,1,1,"reply-list",10),c.YNc(16,oz,1,4,"reply-form",11),c.qZA()),2&r&&(c.xp6(3),c.Q6J("src",i.comment.createdByUserId.imgUrl,c.LSH),c.xp6(4),c.Oqu(i.comment.createdByUserId.fullName),c.xp6(2),c.Oqu(c.lcZ(10,8,i.comment.createdAt)),c.xp6(3),c.hij(" ",i.comment.message," "),c.xp6(1),c.Q6J("ngIf",i.comment.isTopLevel),c.xp6(1),c.Q6J("ngIf",i.replies.length),c.xp6(1),c.Q6J("ngIf",i.isReplyListShown&&i.replies.length),c.xp6(1),c.Q6J("ngIf",i.isReplyFormShown))},dependencies:[Kr,hn,QH,tz,oS],styles:["[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em;position:relative}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .meter[_ngcontent-%COMP%]{position:absolute;z-index:-10;width:1px;height:100%;background-color:#ffffff82;left:17px;top:1px}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .btn-toggle-replies[_ngcontent-%COMP%]{font-size:13px;padding-inline-start:2.7em;cursor:pointer}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.8em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;border-radius:50%;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#919191;font-size:13px}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .btn-reply[_ngcontent-%COMP%]{background-color:#000;border:none;color:#f5f5f5;width:-moz-fit-content;width:fit-content;padding-inline-end:.8em;font-size:12px;cursor:pointer}"]})}return n})();function cz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"comment-cmp",9),c.NdJ("onAddReply",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddReply.emit(i))}),c.qZA()}2&n&&c.Q6J("comment",e.$implicit)}function lz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"form",10),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.addComment())}),c._UZ(1,"img",11),c.TgZ(2,"input",12),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.comment.message=i)}),c.qZA(),c.TgZ(3,"button",13),c._uU(4,"Post"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("src",t.loggedInUserFromDB.imgUrl,c.LSH),c.xp6(1),c.Q6J("ngModel",t.comment.message)}}let uz=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.renderer=i,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onToggleCommentsModal=new c.vpe,this.onGetCommentsLength=new c.vpe,this.comment={_id:"",parentId:"",isTopLevel:!0,postId:"",createdByUserId:"",message:"",createdAt:0,replies:[]}}ngOnInit(){var t=this;return(0,N.Z)(function*(){t.renderer.addClass(document.body,"body-unscrollable");const r=t.authService.getUserById(t.loggedInUser.uid),i=yield Zt(r);t.loggedInUserFromDB=i,t.comment.postId=t.post._id,t.comment.createdByUserId=i._id,t.commentsSubscription=t.postService.getCommentsByPostId(t.post._id).pipe((0,Tn.w)(function(){var o=(0,N.Z)(function*(u){const f=u.map(function(){var g=(0,N.Z)(function*(y){const b=t.authService.getUserById(y.createdByUserId),M=yield Zt(b);return{...y,createdByUserId:M}});return function(y){return g.apply(this,arguments)}}());return yield Promise.all(f)});return function(u){return o.apply(this,arguments)}}())).subscribe({next:o=>{t.comments=o,t.onGetCommentsLength.emit(t.comments.length)}})})()}addComment(){this.onAddComment.emit({comment:this.comment,post:this.post}),this.comment.message=""}trackByCommentId(t,r){return r._id}ngOnDestroy(){this.commentsSubscription?.unsubscribe(),this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ta),c.Y36(On),c.Y36(c.Qsj))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["comments-modal"]],inputs:{post:"post",loggedInUser:"loggedInUser"},outputs:{onAddComment:"onAddComment",onAddReply:"onAddReply",onToggleCommentsModal:"onToggleCommentsModal",onGetCommentsLength:"onGetCommentsLength"},decls:10,vars:3,consts:[[1,"comment-modal"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[1,"comments"],[1,"comment-list"],[3,"comment","onAddReply",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngSubmit",4,"ngIf"],[1,"hiding-flach"],[3,"comment","onAddReply"],[3,"ngSubmit"],["alt","",3,"src"],["type","text","name","message","id","comment","placeholder","Add a comment...",3,"ngModel","ngModelChange"],["type","submit",1,"btn-add-comment"]],template:function(r,i){1&r&&(c.TgZ(0,"div",0)(1,"button",1),c.NdJ("click",function(){return i.onToggleCommentsModal.emit()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"div",4)(5,"div",5)(6,"ul"),c.YNc(7,cz,1,1,"comment-cmp",6),c.qZA()()(),c.YNc(8,lz,5,2,"form",7),c._UZ(9,"div",8),c.qZA()),2&r&&(c.xp6(7),c.Q6J("ngForOf",i.comments)("ngForTrackBy",i.trackByCommentId),c.xp6(1),c.Q6J("ngIf",i.loggedInUserFromDB))},dependencies:[Yr,hn,au,yo,La,ou,ra,Ua,az],styles:["[_nghost-%COMP%]{position:fixed;top:0;z-index:150;width:100%;height:100%;background-color:#000;padding-block-start:3.8em;overflow:auto}@media (min-width: 600px){[_nghost-%COMP%]{padding-block-start:unset;display:grid;left:75px;width:calc(100% - 75px);grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);grid-template-rows:30px 1fr 30px}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]{position:relative;padding-block-start:1.5em;height:100%;display:grid;grid-template-columns:25px 1fr 25px;grid-template-rows:1fr auto}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]{width:100%;grid-template-rows:auto 1fr auto;grid-template-columns:auto;padding-block-start:unset;display:grid;grid-row:2;grid-column:2}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:fixed;background-color:#000;cursor:pointer;border:none;padding-inline:.5em;padding-block-end:.5em;right:20px;top:85px;z-index:40;width:-moz-fit-content;width:fit-content}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:sticky;right:0;top:32px;grid-column:unset;padding-inline:unset;padding-block-end:unset;grid-row:unset;justify-self:end}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{height:100%}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{grid-column:unset;margin-block-start:-17px}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.5em;padding-block-end:5.5em;height:100%}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-block-end:2em}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;height:60px;position:sticky;bottom:60px;background-color:#000;border-block-start:1px solid rgba(255,255,255,.24);grid-column:1/-1;padding-inline:25px;z-index:120}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{bottom:30px;border-block-end:1px solid rgba(255,255,255,.24);grid-column:unset}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:3;height:100%;border:none;color:#f5f5f5;background-color:#000;font-size:16px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f5f5f5;font-family:Arial,sans-serif;background-color:#000}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:100%;border:none;cursor:pointer;background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;text-align:right}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .hiding-flach[_ngcontent-%COMP%]{display:none;background-color:#000;grid-column:1/-1;position:fixed;bottom:0;left:75px;height:30px;width:calc(100% - 92px);grid-row:4;z-index:120}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .hiding-flach[_ngcontent-%COMP%]{display:block}}"]})}return n})(),dz=(()=>{class n{constructor(){this.onChooseUserToSendPost=new c.vpe}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["user-row-send-post-modal"]],inputs:{user:"user"},outputs:{onChooseUserToSendPost:"onChooseUserToSendPost"},decls:8,vars:2,consts:[[1,"user-row-send-post-modal"],[1,"user"],["alt","user",3,"src"],[1,"send"],[1,"btn-send",3,"click"]],template:function(r,i){1&r&&(c.TgZ(0,"li",0)(1,"div",1),c._UZ(2,"img",2),c.TgZ(3,"p"),c._uU(4),c.qZA()(),c.TgZ(5,"div",3)(6,"button",4),c.NdJ("click",function(){return i.onChooseUserToSendPost.emit(i.user)}),c._uU(7," Send "),c.qZA()()()),2&r&&(c.xp6(2),c.Q6J("src",i.user.imgUrl,c.LSH),c.xp6(2),c.Oqu(i.user.fullName))},styles:["[_nghost-%COMP%]   .user-row-send-post-modal[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em}[_nghost-%COMP%]   .user-row-send-post-modal[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em}[_nghost-%COMP%]   .user-row-send-post-modal[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3em;border-radius:50%;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .user-row-send-post-modal[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;cursor:pointer}[_nghost-%COMP%]   .user-row-send-post-modal[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{border:none;font-size:16px;color:#0095f6;font-weight:bolder;background-color:transparent;cursor:pointer}"]})}return n})();function hz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"user-row-send-post-modal",2),c.NdJ("onChooseUserToSendPost",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onChooseUserToSendPost.emit(i))}),c.qZA()}2&n&&c.Q6J("user",e.$implicit)}let fz=(()=>{class n{constructor(){this.onChooseUserToSendPost=new c.vpe}ngOnInit(){}trackByUserId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["user-list-send-post-modal"]],inputs:{users:"users"},outputs:{onChooseUserToSendPost:"onChooseUserToSendPost"},decls:2,vars:2,consts:[[1,"user-list-send-post-modal"],[3,"user","onChooseUserToSendPost",4,"ngFor","ngForOf","ngForTrackBy"],[3,"user","onChooseUserToSendPost"]],template:function(r,i){1&r&&(c.TgZ(0,"ul",0),c.YNc(1,hz,1,1,"user-row-send-post-modal",1),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngForOf",i.users)("ngForTrackBy",i.trackByUserId))},dependencies:[Yr,dz],styles:["[_nghost-%COMP%]   .user-list-send-post-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}"]})}return n})();function pz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"user-list-send-post-modal",11),c.NdJ("onChooseUserToSendPost",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onChooseUserToSendPost(i))}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("users",t.users)}}const l6=function(n){return{"message-form-shown":n}};let gz=(()=>{class n{constructor(t,r,i,o,u){this.userService=t,this.authService=r,this.postService=i,this.router=o,this.renderer=u,this.onCloseSendPostModal=new c.vpe,this.filterBy={account:""},this.isMessageShown=!1,this.userToSendPost={_id:"",fullName:"",imgUrl:"",followedByUsers:[],followingUsers:[],notifications:[]},this.newMessage={_id:"",chatId:"",txt:"",sentAt:0,sentBy:this.authService.getLoggedInUser().uid}}ngOnInit(){var t=this;return(0,N.Z)(function*(){t.renderer.addClass(document.body,"body-unscrollable"),yield t.getUsers()})()}getUsers(){var t=this;return(0,N.Z)(function*(){const r=t.userService.getUsers(t.filterBy);try{const i=yield Zt(r);t.users=i}catch(i){console.error(i)}})()}onChooseUserToSendPost(t){var r=this;return(0,N.Z)(function*(){r.userToSendPost=t,r.isMessageShown=!0})()}onSendPost(){var t=this;return(0,N.Z)(function*(){const r=yield t.postService.sendPost(t.userToSendPost._id,t.authService.getLoggedInUser().uid,t.post,t.newMessage);yield t.router.navigateByUrl(`chat/${r}`)})()}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(na),c.Y36(On),c.Y36(ta),c.Y36(fn),c.Y36(c.Qsj))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["send-post-modal"]],inputs:{post:"post"},outputs:{onCloseSendPostModal:"onCloseSendPostModal"},decls:15,vars:11,consts:[[1,"send-post-modal",3,"ngClass"],[1,"user-to-send-post"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],["type","search","name","user","id","user","placeholder","Search",3,"ngModel","ngModelChange","input"],[3,"users","onChooseUserToSendPost",4,"ngIf"],[1,"message",3,"ngClass","ngSubmit"],["alt","post",1,"img-post",3,"src"],["type","text","name","txt","id","txt",3,"ngModel","placeholder","ngModelChange"],["type","submit",1,"btn-send"],[3,"users","onChooseUserToSendPost"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"div",1)(2,"button",2),c.NdJ("click",function(){return i.onCloseSendPostModal.emit(!1)}),c.O4$(),c.TgZ(3,"svg",3),c._UZ(4,"path",4),c.qZA()(),c.kcU(),c.TgZ(5,"form")(6,"p"),c._uU(7,"To:"),c.qZA(),c.TgZ(8,"input",5),c.NdJ("ngModelChange",function(u){return i.filterBy.account=u})("input",function(){return i.getUsers()}),c.qZA()(),c.YNc(9,pz,1,1,"user-list-send-post-modal",6),c.qZA(),c.TgZ(10,"form",7),c.NdJ("ngSubmit",function(){return i.onSendPost()}),c._UZ(11,"img",8),c.TgZ(12,"input",9),c.NdJ("ngModelChange",function(u){return i.newMessage.txt=u}),c.qZA(),c.TgZ(13,"button",10),c._uU(14,"Send"),c.qZA()()()),2&r&&(c.Q6J("ngClass",c.VKq(7,l6,i.isMessageShown)),c.xp6(8),c.Q6J("ngModel",i.filterBy.account),c.xp6(1),c.Q6J("ngIf",i.users),c.xp6(1),c.Q6J("ngClass",c.VKq(9,l6,i.isMessageShown)),c.xp6(1),c.Q6J("src",i.post.imgUrl,c.LSH),c.xp6(1),c.MGl("placeholder","Message to ",i.userToSendPost.fullName,""),c.Q6J("ngModel",i.newMessage.txt))},dependencies:[Kr,hn,au,yo,La,ou,ra,Ua,fz],styles:["[_nghost-%COMP%]{position:fixed;background-color:#000;left:0;width:100%;height:calc(100% - 121px);top:61px;overflow:auto;z-index:200}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]{padding-inline:25px;padding-block:1em;padding-block-end:1.5em}[_nghost-%COMP%]   .send-post-modal.message-form-shown[_ngcontent-%COMP%]{padding-block-end:5.5em}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .user-to-send-post[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .user-to-send-post[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;width:-moz-fit-content;width:fit-content;display:flex;align-items:center;position:fixed;right:25px;top:93px}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .user-to-send-post[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em;height:50px}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .user-to-send-post[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .user-to-send-post[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #user[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f5f5f5;font-size:16px;width:100%;height:100%}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{position:fixed;left:0;bottom:0;width:100%;height:0;background-color:#000;display:flex;align-items:center;gap:.5em;padding-inline:25px;border-block:1px solid rgba(255,255,255,.19);transition:all .3s ease-in-out}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message.message-form-shown[_ngcontent-%COMP%]{bottom:58px;height:70px}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .img-post[_ngcontent-%COMP%]{width:40px;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   #txt[_ngcontent-%COMP%]{width:100%;height:30px;background-color:transparent;border:none;color:#f5f5f5;font-size:16px}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   #txt[_ngcontent-%COMP%]::placeholder{color:#f5f5f5}[_nghost-%COMP%]   .send-post-modal[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{height:30px;color:#f5f5f5;border:none;background-color:#0095f6;font-size:16px;font-weight:bolder;padding-inline:.7em;border-radius:.2em;cursor:pointer;margin-inline-start:.5em}"]})}return n})();function mz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",23),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleLike())}),c.O4$(),c.TgZ(1,"svg",24)(2,"title"),c._uU(3,"Like"),c.qZA(),c._UZ(4,"path",25),c.qZA()()}}function _z(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",23),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleLike())}),c.O4$(),c.TgZ(1,"svg",26)(2,"title"),c._uU(3,"Unlike"),c.qZA(),c._UZ(4,"path",27),c.qZA()()}}function yz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"span"),c._uU(1," and "),c.TgZ(2,"span",33),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(3);return i.isLikedByUsersModalShown=!0,c.KtG(i.onClickLikedByUsers.emit(!0))}),c._uU(3),c.ALo(4,"number"),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(3),c.AsE("",c.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function vz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"liked-by-users-list",34),c.NdJ("onToggleLikedByUsersModal",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.onToggleFollow.emit(i))})("onCloseLikedByUsers",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.onCloseLikedByUsers.emit(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.onClickUserImg.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(3);c.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function Cz(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",28)(1,"img",29),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onClickUserImg.emit(i.post.likedByUsers[0]._id))}),c.qZA(),c.TgZ(2,"p"),c._uU(3," Liked by "),c.TgZ(4,"span",30),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onClickUserImg.emit(i.post.likedByUsers[0]._id))}),c._uU(5),c.qZA(),c.YNc(6,yz,5,4,"span",31),c.qZA(),c.YNc(7,vz,1,2,"liked-by-users-list",32),c.qZA()}if(2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("src",t.post.likedByUsers[0].imgUrl,c.LSH),c.xp6(4),c.Oqu(t.post.likedByUsers[0].fullName),c.xp6(1),c.Q6J("ngIf",t.post.likedByUsers.length>1),c.xp6(1),c.Q6J("ngIf",t.isLikedByUsersModalShown)}}function wz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"span"),c._uU(1," and "),c.TgZ(2,"span",33),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(3);return c.KtG(i.isLikedByUsersModalShown=!i.isLikedByUsersModalShown)}),c._uU(3),c.ALo(4,"number"),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(3),c.AsE("",c.lcZ(4,2,t.likedByUsersCloneDeep.length-1)," ",t.likedByUsersCloneDeep.length>2?"others":"other","")}}function Iz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"liked-by-users-list",39),c.NdJ("onToggleLikedByUsersModal",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.onToggleFollow.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(3);c.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function bz(n,e){if(1&n&&(c.O4$(),c.kcU(),c.TgZ(0,"div",35),c._UZ(1,"img",36),c.TgZ(2,"p"),c._uU(3," Liked by "),c.TgZ(4,"span",37),c._uU(5),c.qZA(),c.YNc(6,wz,5,4,"span",31),c.qZA(),c.YNc(7,Iz,1,2,"liked-by-users-list",38),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("src",t.likedByUsersCloneDeep[0].imgUrl,c.LSH),c.xp6(4),c.Oqu(t.likedByUsersCloneDeep[0].fullName),c.xp6(1),c.Q6J("ngIf",t.likedByUsersCloneDeep.length>1),c.xp6(1),c.Q6J("ngIf",t.isLikedByUsersModalShown)}}function Ez(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",44),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(4);return c.KtG(i.isMoreClicked=!i.isMoreClicked)}),c._uU(1," more "),c.qZA()}}function Mz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"p")(1,"span",42),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(3);return c.KtG(i.onClickUserImg.emit(i.creator._id))}),c._uU(2),c.qZA(),c._uU(3),c.ALo(4,"slice"),c.YNc(5,Ez,2,0,"button",43),c.qZA()}if(2&n){const t=c.oxw(3);c.xp6(2),c.Oqu(t.creator.fullName),c.xp6(1),c.AsE(" ",c.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120?"...":""," "),c.xp6(2),c.Q6J("ngIf",t.post.content.length>=120)}}function Tz(n,e){if(1&n&&(c.TgZ(0,"p")(1,"span",45),c._uU(2),c.qZA(),c._uU(3),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Oqu(t.creator.fullName),c.xp6(1),c.hij(" ",t.post.content," ")}}function Dz(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw(3);c.xp6(1),c.hij("View ",t.commentsLength," comment")}}function Sz(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw(3);c.xp6(1),c.hij("View all ",t.commentsLength," comments")}}function Pz(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",40),c.YNc(1,Mz,6,8,"p",31),c.YNc(2,Tz,4,2,"p",31),c.TgZ(3,"p",41),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleCommentModal())}),c.YNc(4,Dz,2,1,"span",31),c.YNc(5,Sz,2,1,"span",31),c.qZA()()}if(2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",!t.isMoreClicked&&t.post.content.length),c.xp6(1),c.Q6J("ngIf",t.isMoreClicked&&t.post.content.length),c.xp6(2),c.Q6J("ngIf",1===t.commentsLength),c.xp6(1),c.Q6J("ngIf",t.commentsLength>=2)}}function xz(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"comments-modal",46),c.NdJ("onAddComment",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddComment.emit(i))})("onToggleCommentsModal",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleCommentModal())})("onGetCommentsLength",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.commentsLength=i)})("onAddReply",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddReply.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("post",t.post)("loggedInUser",t.loggedInUser)}}function Az(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"send-post-modal",47),c.NdJ("onCloseSendPostModal",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isSendPostModalShown=!1)}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("post",t.post)}}function Oz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",1)(1,"post-header",2),c.NdJ("onToggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleFollow.emit(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onClickUserImg.emit(i))}),c.qZA(),c._UZ(2,"img",3),c.TgZ(3,"div",4)(4,"div",5)(5,"div",6),c.YNc(6,mz,5,0,"button",7),c.YNc(7,_z,5,0,"button",7),c.TgZ(8,"button",8),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onToggleCommentModal())}),c.O4$(),c.TgZ(9,"svg",9)(10,"title"),c._uU(11,"CommentModel"),c.qZA(),c._UZ(12,"path",10),c.qZA()(),c.kcU(),c.TgZ(13,"button",11),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isSendPostModalShown=!0)}),c.O4$(),c.TgZ(14,"svg",12)(15,"title"),c._uU(16,"Share PostModel"),c.qZA(),c._UZ(17,"line",13)(18,"polygon",14),c.qZA()()(),c.kcU(),c.TgZ(19,"button",15),c.O4$(),c.TgZ(20,"svg",16)(21,"title"),c._uU(22,"Save"),c.qZA(),c._UZ(23,"polygon",17),c.qZA()()(),c.YNc(24,Cz,8,4,"div",18),c.YNc(25,bz,8,4,"div",19),c.YNc(26,Pz,6,4,"div",20),c.qZA(),c.YNc(27,xz,1,2,"comments-modal",21),c.YNc(28,Az,1,1,"send-post-modal",22),c.qZA()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("post",t.post)("creator",t.creator)("isComponentInitialized",t.isComponentInitialized),c.xp6(1),c.Tol(t.post.filterSelected),c.Q6J("src",t.post.imgUrl,c.LSH),c.xp6(4),c.Q6J("ngIf",!t.isLikeClicked),c.xp6(1),c.Q6J("ngIf",t.isLikeClicked),c.xp6(17),c.Q6J("ngIf",t.post.likedByUsers.length&&"object"===t.getTypeOfLikedByUsers()),c.xp6(1),c.Q6J("ngIf",t.likedByUsersCloneDeep[0]&&"string"===t.getTypeOfLikedByUsers()),c.xp6(1),c.Q6J("ngIf",t.creator),c.xp6(1),c.Q6J("ngIf",t.isCommentModalShown),c.xp6(1),c.Q6J("ngIf",t.isSendPostModalShown)}}let u6=(()=>{class n{constructor(t,r){this.authService=t,this.postService=r,this.onToggleLike=new c.vpe,this.onToggleFollow=new c.vpe,this.onAddNotification=new c.vpe,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onClickUserImg=new c.vpe,this.onClickLikedByUsers=new c.vpe,this.onCloseLikedByUsers=new c.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.loggedInUser=this.authService.getLoggedInUser(),this.isLikeClicked=!1,this.isComponentInitialized=!1,this.isCommentModalShown=!1,this.commentsLength=0,this.isSendPostModalShown=!1}ngOnInit(){var t=this;return(0,N.Z)(function*(){const r=t.post.likedByUsers?.map(function(){var i=(0,N.Z)(function*(o){"string"!=typeof o&&(o=o._id);const u=t.authService.getUserById(o).pipe(zt(1));return yield Zt(u)});return function(o){return i.apply(this,arguments)}}());if(t.post.likedByUsers=yield Promise.all(r),"object"!=typeof t.post.likedByUsers?.[0]){const i=t.post.likedByUsers?.map(function(){var o=(0,N.Z)(function*(u){"string"!=typeof u&&(u=u._id);const f=t.authService.getUserById(u).pipe(zt(1));return yield Zt(f)});return function(u){return o.apply(this,arguments)}}());t.post.likedByUsers=yield Promise.all(i)}t.likedByUsersCloneDeep=structuredClone(t.post.likedByUsers),t.commentsSubscription=t.postService.getCommentsByPostId(t.post._id).subscribe({next:i=>{t.commentsLength=i.length}}),t.authService.getUserById(t.post.creatorId).pipe(zt(1)).subscribe({next:i=>{t.creator=i,t.post.likedByUsers.find(u=>u._id===t.loggedInUser.uid||u===t.loggedInUser.uid)&&(t.isLikeClicked=!0),t.isComponentInitialized=!0}})})()}ngOnChanges(t){var r=this;return(0,N.Z)(function*(){if(!t.post.firstChange&&t.post)try{const o=t.post.currentValue.likedByUsers.length?s5(r.post.likedByUsers.map(function(){var f=(0,N.Z)(function*(g){const y=r.authService.getUserById(g);try{return yield Zt(y)}catch(b){return console.error(`Error fetching user ${g}`,b),null}});return function(g){return f.apply(this,arguments)}}())):(0,ut.of)([]),u=yield Zt(o);r.post.likedByUsers=u,r.likedByUsersCloneDeep=structuredClone(r.post.likedByUsers)}catch(i){console.error("Error in ngOnChanges:",i)}})()}toggleLike(){this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:this.post,isLikeClicked:this.isLikeClicked}),this.loggedInUser.uid!==this.creator._id&&this.isLikeClicked&&this.onAddNotification.emit(this.post)}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}onToggleCommentModal(){this.isCommentModalShown=!this.isCommentModalShown}getTypeOfLikedByUsers(){return typeof this.post.likedByUsers[0]}ngOnDestroy(){this.commentsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(ta))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment",onAddReply:"onAddReply",onClickUserImg:"onClickUserImg",onClickLikedByUsers:"onClickLikedByUsers",onCloseLikedByUsers:"onCloseLikedByUsers"},features:[c.TTD],decls:1,vars:1,consts:[["class","post-card",4,"ngIf"],[1,"post-card"],[3,"post","creator","isComponentInitialized","onToggleFollow","onClickUserImg"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment",3,"click"],["aria-label","CommentModel","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share",3,"click"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],["class","likedByUsersCloneDeep",4,"ngIf"],["class","content",4,"ngIf"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength","onAddReply",4,"ngIf"],[3,"post","onCloseSendPostModal",4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src","click"],[1,"username",3,"click"],[4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow","onCloseLikedByUsers","onClickUserImg",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow","onCloseLikedByUsers","onClickUserImg"],[1,"likedByUsersCloneDeep"],["alt","user",3,"src"],[1,"username"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"content"],[1,"comments-length",3,"click"],[1,"creatorFullName",3,"click"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"],[1,"creatorFullName"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength","onAddReply"],[3,"post","onCloseSendPostModal"]],template:function(r,i){1&r&&c.YNc(0,Oz,29,13,"li",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[hn,q$,X$,uz,gz,_r,je],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em;position:relative}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .comments-length[_ngcontent-%COMP%]{font-size:14px;color:#919191;cursor:pointer}"]})}return n})();function kz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"post-card",2),c.NdJ("onToggleLike",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleLike.emit(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleFollow.emit(i))})("onAddNotification",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddNotification.emit(i))})("onAddComment",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddComment.emit(i))})("onAddReply",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddReply.emit(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onClickUserImg.emit(i))}),c.qZA()}2&n&&c.Q6J("post",e.$implicit)}let Nz=(()=>{class n{constructor(){this.onToggleLike=new c.vpe,this.onToggleFollow=new c.vpe,this.onAddNotification=new c.vpe,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onClickUserImg=new c.vpe}trackByPostId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment",onAddReply:"onAddReply",onClickUserImg:"onClickUserImg"},decls:3,vars:2,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"ul"),c.YNc(2,kz,1,1,"post-card",1),c.qZA()()),2&r&&(c.xp6(2),c.Q6J("ngForOf",i.posts)("ngForTrackBy",i.trackByPostId))},dependencies:[Yr,u6],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function Rz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"post-list",4),c.NdJ("onToggleLike",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleLike(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleFollow(i))})("onAddNotification",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddNotification(i))})("onAddComment",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddComment(i))})("onAddReply",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddReply(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.navigateToUserProfile(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("posts",t.posts)}}function Fz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",5)(1,"p"),c._uU(2," No posts to show! "),c._UZ(3,"br"),c.TgZ(4,"span",6),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.navigateToCreatePost())}),c._uU(5,"Let's upload your first post."),c.qZA()()()}}function Lz(n,e){if(1&n&&(c.TgZ(0,"section",1),c.YNc(1,Rz,1,1,"post-list",2),c.YNc(2,Fz,6,0,"ng-template",null,3,c.W1O),c.qZA()),2&n){const t=c.MAs(3),r=c.oxw();c.xp6(1),c.Q6J("ngIf",r.posts.length)("ngIfElse",t)}}let Uz=(()=>{class n{constructor(t,r,i,o,u){this.postService=t,this.authService=r,this.userService=i,this.notificationService=o,this.router=u,this.isToggleLikeProcessing=!1,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,N.Z)(function*(){const r=yield t.postService.getPosts();r&&(t.postsSubscription=r.subscribe({next:i=>{t.posts=i},error:i=>{console.error(i)}}))})()}onToggleLike(t){var r=this;return(0,N.Z)(function*(){r.isToggleLikeProcessing||(r.isToggleLikeProcessing=!0,yield r.postService.toggleLike(t.isLikeClicked,t.post),r.isToggleLikeProcessing=!1)})()}onToggleFollow({isFollowClicked:t,user:r}){var i=this;this.authService.getUserById(r._id).pipe(zt(1)).subscribe(function(){var o=(0,N.Z)(function*(u){r=u,yield i.userService.toggleFollow(t,r)});return function(u){return o.apply(this,arguments)}}())}onAddNotification(t){var r=this;return(0,N.Z)(function*(){const i={sender:r.authService.getLoggedInUser().uid,recipient:t.creatorId,message:"",createdAt:0,postId:t._id,postImgUrl:t.imgUrl,read:!1};yield r.notificationService.addNotification(i,"likeAction")})()}onAddComment({comment:t,post:r}){var i=this;return(0,N.Z)(function*(){yield i.postService.addComment(t,r)})()}onAddReply(t){var r=this;return(0,N.Z)(function*(){yield r.postService.addReply(t)})()}navigateToUserProfile(t){this.router.navigateByUrl(`profile/${t}`)}navigateToCreatePost(){this.router.navigateByUrl("create-post")}ngOnDestroy(){this.postsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ta),c.Y36(On),c.Y36(na),c.Y36(IN),c.Y36(fn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["home-page"]],decls:1,vars:1,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngIf","ngIfElse"],["noPostsTemplate",""],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"],[1,"page-cmp-layout"],[3,"click"]],template:function(r,i){1&r&&c.YNc(0,Lz,4,2,"section",0),2&r&&c.Q6J("ngIf",i.posts)},dependencies:[hn,Nz],styles:["[_nghost-%COMP%]{display:block;padding-block:1em;padding-block-end:2em}@media (min-width: 600px){[_nghost-%COMP%]{padding-block:2em}}"]})}return n})();function Bz(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"form",12),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onLogInWithEmailAndPassword())}),c.TgZ(1,"input",13),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.userCred.email=i)}),c.qZA(),c.TgZ(2,"input",14),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.userCred.password=i)}),c.qZA(),c.TgZ(3,"button",15),c._uU(4,"Log in"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngModel",t.userCred.email),c.xp6(1),c.Q6J("ngModel",t.userCred.password)}}function Vz(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"form",12),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onRegisterWithEmailAndPassword())}),c.TgZ(1,"input",16),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.userCred.fullName=i)}),c.qZA(),c.TgZ(2,"input",13),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.userCred.email=i)}),c.qZA(),c.TgZ(3,"input",14),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.userCred.password=i)}),c.qZA(),c.TgZ(4,"button",17),c._uU(5,"Register"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngModel",t.userCred.fullName),c.xp6(1),c.Q6J("ngModel",t.userCred.email),c.xp6(1),c.Q6J("ngModel",t.userCred.password)}}let jz=(()=>{class n{constructor(t,r,i,o){this.authService=t,this.postService=r,this.router=i,this.userService=o,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0,this.userService.setIsSearchModalShown(!1)}onLogInWithGoogle(){var t=this;return(0,N.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(zt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,N.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(zt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,N.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(zt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(ta),c.Y36(fn),c.Y36(na))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"div",1),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.YNc(4,Bz,5,2,"form",4),c.YNc(5,Vz,6,3,"form",4),c.kcU(),c.TgZ(6,"p",5),c.NdJ("click",function(){return i.isLogInFormShown=!i.isLogInFormShown}),c._uU(7," Don't you have a user? Register here "),c.qZA(),c.TgZ(8,"button",6),c.NdJ("click",function(){return i.onLogInWithGoogle()}),c.O4$(),c.TgZ(9,"svg",7),c._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),c.qZA(),c.kcU(),c.TgZ(14,"span"),c._uU(15,"Log in with Google"),c.qZA()()()),2&r&&(c.xp6(4),c.Q6J("ngIf",i.isLogInFormShown),c.xp6(1),c.Q6J("ngIf",!i.isLogInFormShown))},dependencies:[hn,au,yo,La,ou,ra,Ua],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})();function $z(n,e){if(1&n&&(c.TgZ(0,"span",7),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Oqu(t.lastMessage.txt.length>20?t.lastMessage.txt.substring(0,20)+" ...":t.lastMessage.txt)}}function Hz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",1)(1,"div",2),c._UZ(2,"img",3),c.TgZ(3,"div",4)(4,"p"),c._uU(5),c.qZA(),c.YNc(6,$z,2,1,"span",5),c.qZA()(),c.TgZ(7,"button",6),c.NdJ("click",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.removeChat(i))}),c._uU(8,"Remove"),c.qZA()()}if(2&n){const t=c.oxw();c.MGl("routerLink","/chat/",t.chat._id,""),c.xp6(2),c.Q6J("src",t.participantUser.imgUrl,c.LSH),c.xp6(3),c.Oqu(t.participantUser.fullName),c.xp6(1),c.Q6J("ngIf",t.lastMessage&&t.lastMessage.txt)}}function zz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",1)(1,"div",2),c._UZ(2,"img",3),c.TgZ(3,"div",4)(4,"p"),c._uU(5),c.qZA(),c.TgZ(6,"span",8)(7,"p"),c._uU(8,"sent a post"),c.qZA(),c._UZ(9,"img",9),c.qZA()()(),c.TgZ(10,"button",6),c.NdJ("click",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.removeChat(i))}),c._uU(11,"Remove"),c.qZA()()}if(2&n){const t=c.oxw();c.MGl("routerLink","/chat/",t.chat._id,""),c.xp6(2),c.Q6J("src",t.participantUser.imgUrl,c.LSH),c.xp6(3),c.Oqu(t.participantUser.fullName),c.xp6(4),c.Q6J("src",t.post.imgUrl,c.LSH)}}let Gz=(()=>{class n{constructor(t,r,i){this.authService=t,this.chatService=r,this.postService=i,this.onRemoveChat=new c.vpe,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,N.Z)(function*(){yield t.getLoggedInUserFromDB(),yield t.getParticipantUser(),yield t.getLastMessage(),t.isComponentInitialized=!0})()}getLoggedInUserFromDB(){var t=this;return(0,N.Z)(function*(){const r=t.authService.getUserById(t.authService.getLoggedInUser().uid);t.loggedInUserFromDB=yield Zt(r)})()}getParticipantUser(){var t=this;return(0,N.Z)(function*(){let r=t.chat.users.filter(o=>o!==t.loggedInUserFromDB._id)[0];r||(r=t.loggedInUserFromDB._id);const i=t.authService.getUserById(r);t.participantUser=yield Zt(i)})()}getLastMessage(){var t=this;return(0,N.Z)(function*(){var r;t.chatSubscription=t.chatService.getChatById(t.chat._id).subscribe({next:(r=(0,N.Z)(function*(i){t.chat=i;const o=t.chatService.getMessageById(t.chat.messages[t.chat.messages.length-1]);let u=yield Zt(o);u||(u={_id:"",chatId:t.chat._id,sentAt:0,sentBy:t.loggedInUserFromDB._id,txt:"No messages yet"}),u&&(t.lastMessage=u),u?.postId&&(t.post=yield t.postService.getPostById(u.postId))}),function(o){return r.apply(this,arguments)})})})()}removeChat(t){t.stopPropagation(),this.onRemoveChat.emit(this.chat._id)}ngOnDestroy(){this.chatSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(hg),c.Y36(ta))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-preview"]],inputs:{chat:"chat"},outputs:{onRemoveChat:"onRemoveChat"},decls:2,vars:2,consts:[["class","chat-preview",3,"routerLink",4,"ngIf"],[1,"chat-preview",3,"routerLink"],[1,"inner-container"],["alt","Participant",3,"src"],[1,"chat-content"],["class","last-message",4,"ngIf"],[1,"btn-remove-chat",3,"click"],[1,"last-message"],[1,"post-message"],["alt","post preview",3,"src"]],template:function(r,i){1&r&&(c.YNc(0,Hz,9,4,"li",0),c.YNc(1,zz,12,4,"li",0)),2&r&&(c.Q6J("ngIf",i.isComponentInitialized&&i.lastMessage&&!i.lastMessage.postId),c.xp6(1),c.Q6J("ngIf",i.isComponentInitialized&&i.lastMessage&&i.post))},dependencies:[hn,od],styles:["[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7em;justify-content:space-between;height:100%}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7em}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3em;border-radius:50%;object-fit:cover;aspect-ratio:1/1;cursor:pointer}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]{font-size:16px;cursor:pointer}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]   .post-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]   .post-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;color:#f5f5f5;font-weight:unset}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]   .post-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:unset;width:25px}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .btn-remove-chat[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f5f5f5;height:40px;padding-inline-start:20px;cursor:pointer;font-size:14px}"]})}return n})();function Zz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"chat-preview",4),c.NdJ("onRemoveChat",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onRemoveChat.emit(i))}),c.qZA()}2&n&&c.Q6J("chat",e.$implicit)}function qz(n,e){if(1&n&&(c.TgZ(0,"ul",2),c.YNc(1,Zz,1,1,"chat-preview",3),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.chats)("ngForTrackBy",t.trackByChatId)}}function Wz(n,e){1&n&&(c.TgZ(0,"p"),c._uU(1,"No chats"),c.qZA())}let Kz=(()=>{class n{constructor(){this.onRemoveChat=new c.vpe}ngOnInit(){}trackByChatId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-list"]],inputs:{chats:"chats"},outputs:{onRemoveChat:"onRemoveChat"},decls:3,vars:2,consts:[["class","chat-list",4,"ngIf","ngIfElse"],["noChats",""],[1,"chat-list"],[3,"chat","onRemoveChat",4,"ngFor","ngForOf","ngForTrackBy"],[3,"chat","onRemoveChat"]],template:function(r,i){if(1&r&&(c.YNc(0,qz,2,2,"ul",0),c.YNc(1,Wz,2,0,"ng-template",null,1,c.W1O)),2&r){const o=c.MAs(2);c.Q6J("ngIf",i.chats.length)("ngIfElse",o)}},dependencies:[Yr,hn,Gz],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .chat-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.3em;padding-block-start:3.5em;height:100%}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{padding-block-start:3.5em}"]})}return n})();function Yz(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",1)(1,"div",2)(2,"button",3),c.O4$(),c.TgZ(3,"svg",4),c._UZ(4,"line",5)(5,"polyline",6),c.qZA()(),c.kcU(),c.TgZ(6,"button",7),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.navigateToAddChat())}),c.O4$(),c.TgZ(7,"svg",8)(8,"title"),c._uU(9,"\u05d4\u05d5\u05d3\u05e2\u05d4 \u05d7\u05d3\u05e9\u05d4"),c.qZA(),c._UZ(10,"path",9)(11,"path",10)(12,"line",11),c.qZA()()(),c.kcU(),c.TgZ(13,"chat-list",12),c.NdJ("onRemoveChat",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onRemoveChat(i))}),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(13),c.Q6J("chats",t.chats)}}let Qz=(()=>{class n{constructor(t,r,i,o){this.userService=t,this.chatService=r,this.authService=i,this.router=o,this.chats=[],this.isChatPageInitialized=!1,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,N.Z)(function*(){t.chatService.getChatsForUser(t.authService.getLoggedInUser().uid).subscribe({next:r=>{t.chats=r,t.isChatPageInitialized=!0},error:r=>{console.error(r)}})})()}onRemoveChat(t){var r=this;return(0,N.Z)(function*(){yield r.chatService.removeChatById(t,r.authService.getLoggedInUser().uid)})()}navigateToAddChat(){var t=this;return(0,N.Z)(function*(){yield t.router.navigateByUrl("chat/add")})()}ngOnDestroy(){this.chatsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(na),c.Y36(hg),c.Y36(On),c.Y36(fn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-page"]],hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","message-page",4,"ngIf"],[1,"message-page"],[1,"header"],["title","Back","routerLink","/",1,"btn-back"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"btn-add-chat",3,"click"],["aria-label","\u05d4\u05d5\u05d3\u05e2\u05d4 \u05d7\u05d3\u05e9\u05d4","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24"],["d","M12.202 3.203H5.25a3 3 0 0 0-3 3V18.75a3 3 0 0 0 3 3h12.547a3 3 0 0 0 3-3v-6.952","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["d","M10.002 17.226H6.774v-3.228L18.607 2.165a1.417 1.417 0 0 1 2.004 0l1.224 1.225a1.417 1.417 0 0 1 0 2.004Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","16.848","x2","20.076","y1","3.924","y2","7.153"],[3,"chats","onRemoveChat"]],template:function(r,i){1&r&&c.YNc(0,Yz,14,1,"section",0),2&r&&c.Q6J("ngIf",i.isChatPageInitialized)},dependencies:[hn,od,Kz],styles:["[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]{padding-block:1em;display:flex;flex-direction:column;gap:1em;height:100%}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#000;width:100%;display:flex;align-items:center;justify-content:space-between;height:50px;position:fixed;left:0;top:60px;padding-inline:25px;border-block-end:1px solid rgba(245,245,245,.21)}@media (min-width: 600px){[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:calc(100% - 75px);left:75px;top:0;display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);padding-inline:unset}}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:unset;border:none;cursor:pointer;width:-moz-fit-content;width:fit-content;display:flex;align-items:center}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#fff}@media (min-width: 600px){[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{grid-column:2;grid-row:1;justify-self:start}}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-add-chat[_ngcontent-%COMP%]{background-color:#000;border:unset;cursor:pointer;display:flex;align-items:center;width:-moz-fit-content;width:fit-content}@media (min-width: 600px){[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-add-chat[_ngcontent-%COMP%]{grid-column:2;grid-row:1;justify-self:end}}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-add-chat[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-add-chat[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}"]})}return n})();function Jz(n,e){if(1&n&&(c.TgZ(0,"li",1)(1,"div",2),c._UZ(2,"img",3),c.TgZ(3,"p")(4,"span",4),c._uU(5),c.qZA(),c._uU(6),c.qZA(),c.TgZ(7,"span",5),c._uU(8),c.ALo(9,"timeAgo"),c.qZA()(),c._UZ(10,"img",6),c.qZA()),2&n){const t=c.oxw();c.xp6(2),c.s9C("src",t.sender.imgUrl,c.LSH),c.xp6(3),c.Oqu(t.sender.fullName),c.xp6(1),c.hij(" ",t.notification.message," "),c.xp6(2),c.hij(" ",c.lcZ(9,5,t.notification.createdAt),""),c.xp6(2),c.s9C("src",t.notification.postImgUrl,c.LSH)}}let Xz=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.getUserById(this.notification.sender).pipe(zt(1)).subscribe({next:t=>{this.sender=t}})}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["notification-preview"]],inputs:{notification:"notification"},decls:1,vars:1,consts:[["class","notification-preview",4,"ngIf"],[1,"notification-preview"],[1,"inner-container"],["alt","sender",1,"img-sender",3,"src"],[1,"full-name"],[1,"created-at"],["alt","content",1,"img-made-at",3,"src"]],template:function(r,i){1&r&&c.YNc(0,Jz,11,7,"li",0),2&r&&c.Q6J("ngIf",i.sender)},dependencies:[hn,oS],styles:["[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:3em;gap:1em;font-size:15px}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .img-sender[_ngcontent-%COMP%]{width:40px;border-radius:50%;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .full-name[_ngcontent-%COMP%]{font-size:13px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{font-size:13.5px;color:#a8a8a8}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .img-made-at[_ngcontent-%COMP%]{aspect-ratio:1/1;object-fit:cover;width:3em}"]})}return n})();function eG(n,e){1&n&&c._UZ(0,"notification-preview",2),2&n&&c.Q6J("notification",e.$implicit)}let tG=(()=>{class n{trackByNotificationId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["notification-list"]],inputs:{notifications:"notifications"},decls:3,vars:2,consts:[[1,"notification-list"],[3,"notification",4,"ngFor","ngForOf","ngForTrackBy"],[3,"notification"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"ul"),c.YNc(2,eG,1,1,"notification-preview",1),c.qZA()()),2&r&&(c.xp6(2),c.Q6J("ngForOf",i.notifications)("ngForTrackBy",i.trackByNotificationId))},dependencies:[Yr,Xz],styles:["[_nghost-%COMP%]   .notification-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}"]})}return n})();function nG(n,e){1&n&&(c.TgZ(0,"p"),c._uU(1,"You dont have notifications yet!"),c.qZA())}function rG(n,e){if(1&n&&(c.TgZ(0,"section",1),c._UZ(1,"notification-list",2),c.YNc(2,nG,2,0,"p",3),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("notifications",t.notifications),c.xp6(1),c.Q6J("ngIf",!t.notifications.length)}}let iG=(()=>{class n{constructor(t,r,i){this.notificationService=t,this.authService=r,this.userService=i,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,N.Z)(function*(){const r=t.authService.getLoggedInUser();t.notificationService.getNotificationsForUser(r.uid).subscribe({next:i=>{t.notifications=i}})})()}ngOnDestroy(){this.notificationsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(IN),c.Y36(On),c.Y36(na))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","notifications-page",4,"ngIf"],[1,"notifications-page"],[3,"notifications"],[4,"ngIf"]],template:function(r,i){1&r&&c.YNc(0,rG,3,2,"section",0),2&r&&c.Q6J("ngIf",i.notifications)},dependencies:[hn,tG],styles:["[_nghost-%COMP%]{padding-block:1.5em}"]})}return n})();function sG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",4)(1,"button",5),c.NdJ("click",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onMediaSelected(i))}),c.TgZ(2,"span"),c._uU(3," Upload photos here "),c.qZA(),c.TgZ(4,"div"),c.O4$(),c.TgZ(5,"svg",6),c._UZ(6,"path",7)(7,"path",8)(8,"path",9),c.qZA()()()()}}const oG=function(n){return{active:n}};function aG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"article",21),c.NdJ("click",function(){const o=c.CHM(t).$implicit,u=c.oxw(2);return c.KtG(u.onSelectFilterPreview(o.value))}),c.TgZ(1,"span"),c._uU(2),c.qZA(),c._UZ(3,"img",22),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw(2);c.Q6J("ngClass",c.VKq(6,oG,t.value===r.post.filterSelected)),c.xp6(2),c.Oqu(t.name),c.xp6(1),c.Tol(t.value),c.MGl("alt","",t," - filter preview"),c.Q6J("src",r.post.imgUrl,c.LSH)}}function cG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",10)(1,"div",11)(2,"button",12),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return i.isFilterMediaShown=!1,c.KtG(i.isSelectMediaShown=!0)}),c.O4$(),c.TgZ(3,"svg",13),c._UZ(4,"line",14)(5,"polyline",15),c.qZA()(),c.kcU(),c.TgZ(6,"button",16),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return i.isFilterMediaShown=!1,c.KtG(i.isFormMediaShown=!0)}),c._uU(7," Next "),c.qZA()(),c.TgZ(8,"article",17),c._UZ(9,"img",18),c.qZA(),c.TgZ(10,"div",19),c.YNc(11,aG,4,8,"article",20),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(9),c.Tol(t.post.filterSelected),c.s9C("src",t.post.imgUrl,c.LSH),c.xp6(2),c.Q6J("ngForOf",t.filterPreviews)("ngForTrackBy",t.trackByFilterName)}}function lG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",23)(1,"div",11)(2,"button",12),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return i.isFormMediaShown=!1,c.KtG(i.isFilterMediaShown=!0)}),c.O4$(),c.TgZ(3,"svg",13),c._UZ(4,"line",14)(5,"polyline",15),c.qZA()(),c.kcU(),c.TgZ(6,"button",24),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onCreatePost())}),c._uU(7," Share "),c.qZA()(),c.TgZ(8,"form")(9,"div",25),c._UZ(10,"img",26),c.TgZ(11,"textarea",27),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.post.content=i)}),c.qZA()()()()}if(2&n){const t=c.oxw();c.xp6(10),c.Tol(t.post.filterSelected),c.Q6J("src",t.post.imgUrl,c.LSH),c.xp6(1),c.Q6J("ngModel",t.post.content)}}let uG=(()=>{class n{constructor(t,r,i){this.postService=t,this.router=r,this.userService=i,this.isSelectMediaShown=!0,this.isFilterMediaShown=!1,this.isFormMediaShown=!1,this.filterPreviews=[{name:"Normal",value:"normal"},{name:"Paris",value:"paris"},{name:"Los Angeles",value:"los-angeles"},{name:"Oslo",value:"oslo"},{name:"Abu Dhabi",value:"abu-dhabi"},{name:"Tokyo",value:"tokyo"}],this.post={_id:"",creatorFullName:"",creatorId:"",createdAt:0,imgUrl:"",content:"",likedByUsers:[],filterSelected:"normal"},this.userService.setIsSearchModalShown(!1)}onMediaSelected(t){var r=this;return(0,N.Z)(function*(){try{const i=yield r.postService.uploadMedia();i?r.post.imgUrl=i:console.error(null),r.isSelectMediaShown=!1,r.isFilterMediaShown=!0}catch(i){console.error("Error:",i)}})()}onSelectFilterPreview(t){this.post.filterSelected=t}onCreatePost(){var t=this;return(0,N.Z)(function*(){yield t.postService.createPost(t.post),yield t.router.navigateByUrl("/")})()}trackByFilterName(t,r){return r.name}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ta),c.Y36(fn),c.Y36(na))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["create-post-page"]],decls:4,vars:3,consts:[[1,"create-post-page"],["class","select-media",4,"ngIf"],["class","filter-media",4,"ngIf"],["class","form-media",4,"ngIf"],[1,"select-media"],[3,"click"],["aria-label","Icon to represent media such as images or videos","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","77","role","img","viewBox","0 0 97.6 77.3","width","96",1,"x1lliihq","x1n2onr6"],["d","M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z","fill","currentColor"],["d","M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z","fill","currentColor"],["d","M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z","fill","currentColor"],[1,"filter-media"],[1,"actions"],["title","Back",1,"btn-back",3,"click"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["title","Next",1,"btn-next",3,"click"],[1,"media-preview"],["alt","media preview",3,"src"],[1,"filter-list"],["class","filter-preview",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-preview",3,"ngClass","click"],[3,"src","alt"],[1,"form-media"],["title","Share",1,"btn-share",3,"click"],[1,"content"],["alt","post image",3,"src"],["name","content","placeholder","Write your caption...",3,"ngModel","ngModelChange"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0),c.YNc(1,sG,9,0,"div",1),c.YNc(2,cG,12,5,"div",2),c.YNc(3,lG,12,4,"div",3),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngIf",i.isSelectMediaShown),c.xp6(1),c.Q6J("ngIf",i.isFilterMediaShown),c.xp6(1),c.Q6J("ngIf",i.isFormMediaShown))},dependencies:[Kr,Yr,hn,au,yo,La,ou,ra,Ua],styles:["[_nghost-%COMP%]{height:100%;width:100%;grid-column:2;display:grid;grid-template-columns:25px 1fr 25px}@media (min-width: 600px){[_nghost-%COMP%]{grid-template-columns:unset}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{height:100%;width:100%;position:relative;grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{grid-column:auto}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f5f5f5;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1em;width:100%;font-size:17px;cursor:pointer;padding-block:1.5em}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;position:relative;padding-block-end:1em}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]{padding-block-end:37px}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:56px;z-index:10;background-color:#000}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{top:0;height:71px;align-items:flex-end;padding-block-end:10px}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;display:flex}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 50px);display:flex;align-items:center;gap:1em;overflow-x:auto;white-space:nowrap}@media (min-width: 524px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 67px)}}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 125px)}}@media (min-width: 625px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{min-width:auto;max-width:500px;width:unset}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.4em;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d3d3d369;font-size:12px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:5em;height:5em;aspect-ratio:1/1}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]{gap:1.5em}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:66px;z-index:10;background-color:#000}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{align-items:flex-end;top:0;height:81.5px;padding-block-end:10px}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;display:flex}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;padding-block-end:20px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1em;height:100%}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:120px;flex-direction:row}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:100%;object-fit:contain}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex:2;object-fit:contain;height:100%}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100%;resize:none;background-color:transparent;border:none;color:#f5f5f5;font-size:16px;font-family:Arial,sans-serif}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:3}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#f5f5f5d9;font-style:italic;font-size:14px;font-family:Arial,sans-serif;font-weight:400}"]})}return n})();const mg=()=>!!(0,c.f3M)(On).getLoggedInUser()||(console.error("LoggedInUser doesnt exists - no access to that page!"),(0,c.f3M)(fn).navigateByUrl("/login"),!1);function dG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"post-card",5),c.NdJ("onClickLikedByUsers",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.isLikedByUsersClicked=i)})("onCloseLikedByUsers",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.isLikedByUsersClicked=i)})("onToggleLike",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleLike.emit(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleFollow.emit(i))})("onAddNotification",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddNotification.emit(i))})("onAddComment",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddComment.emit(i))})("onAddReply",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddReply.emit(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onClickUserImg.emit(i))}),c.qZA()}2&n&&c.Q6J("post",e.$implicit)}const hG=function(n){return{unscrollable:n}};let fG=(()=>{class n{constructor(){this.onClosePostsModal=new c.vpe,this.onToggleLike=new c.vpe,this.onToggleFollow=new c.vpe,this.onAddNotification=new c.vpe,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onClickUserImg=new c.vpe,this.isLikedByUsersClicked=!1}ngOnInit(){}trackByPostId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["posts-modal"]],inputs:{userPosts:"userPosts"},outputs:{onClosePostsModal:"onClosePostsModal",onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment",onAddReply:"onAddReply",onClickUserImg:"onClickUserImg"},decls:6,vars:5,consts:[[1,"posts-modal",3,"ngClass"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[3,"post","onClickLikedByUsers","onCloseLikedByUsers","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","onClickLikedByUsers","onCloseLikedByUsers","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"button",1),c.NdJ("click",function(){return i.onClosePostsModal.emit(!1)}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"ul"),c.YNc(5,dG,1,1,"post-card",4),c.qZA()()),2&r&&(c.Q6J("ngClass",c.VKq(3,hG,i.isLikedByUsersClicked)),c.xp6(5),c.Q6J("ngForOf",i.userPosts)("ngForTrackBy",i.trackByPostId))},dependencies:[Kr,Yr,u6],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;background-color:#000;height:100%;width:100%;overflow:auto}@media (min-width: 600px){[_nghost-%COMP%]{width:calc(100% - 75px);left:75px;display:grid;justify-content:center}}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]{height:calc(100% + 1px);display:grid;grid-template-rows:auto 1fr;position:relative}@media (min-width: 600px){[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]{width:500px;padding-block-start:15px;padding-block-end:25px}}[_nghost-%COMP%]   .posts-modal.unscrollable[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{border:none;background-color:transparent;position:fixed;z-index:130;top:85px;right:27px;cursor:pointer}@media (min-width: 600px){[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:sticky;grid-row:1;top:40px;right:10px;justify-self:end}}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto;gap:3em;position:relative;padding-block:4.7em;padding-block-end:5.7em}@media (min-width: 600px){[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-block:unset;width:100%}}"]})}return n})();const pG=function(n){return{disabled:n}};let gG=(()=>{class n{constructor(t){this.userService=t,this.onBack=new c.vpe,this.onSubmitUserEdit=new c.vpe,this.isImgUrlChanged=!1}ngOnInit(){this.userFromDBToEdit=structuredClone(this.userFromDB)}submitUserEdit(){this.onSubmitUserEdit.emit(this.userFromDBToEdit)}onUploadUserPicture(){var t=this;return(0,N.Z)(function*(){try{const r=yield t.userService.uploadMedia();r&&(t.userFromDBToEdit.imgUrl=r),t.isImgUrlChanged=!0}catch(r){console.error(r)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(na))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["edit-profile-modal"]],hostAttrs:[1,"page-cmp-layout"],inputs:{userFromDB:"userFromDB"},outputs:{onBack:"onBack",onSubmitUserEdit:"onSubmitUserEdit"},decls:19,vars:6,consts:[[1,"edit-profile-modal"],["_ngcontent-ng-c994055254","","title","Back",1,"btn-back",3,"click"],["_ngcontent-ng-c994055254","","aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["_ngcontent-ng-c994055254","","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["_ngcontent-ng-c994055254","","fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"user-image"],[1,"content"],["alt","user-image",3,"src","click"],[3,"click"],[1,"edit-user-form"],[3,"ngSubmit"],[1,"user-full-name"],["for","full-name"],["type","text","name","full-name","id","full-name",3,"ngModel","ngModelChange"],["fullName",""],["type","submit",1,"btn-submit",3,"disabled","ngClass"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"button",1),c.NdJ("click",function(){return i.onBack.emit()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"line",3)(4,"polyline",4),c.qZA()(),c.kcU(),c.TgZ(5,"div",5)(6,"div",6)(7,"img",7),c.NdJ("click",function(){return i.onUploadUserPicture()}),c.qZA(),c.TgZ(8,"span",8),c.NdJ("click",function(){return i.onUploadUserPicture()}),c._uU(9,"Edit picture"),c.qZA()()(),c.TgZ(10,"div",9)(11,"form",10),c.NdJ("ngSubmit",function(){return i.submitUserEdit()}),c.TgZ(12,"div",11)(13,"label",12),c._uU(14,"Name"),c.qZA(),c.TgZ(15,"input",13,14),c.NdJ("ngModelChange",function(u){return i.userFromDBToEdit.fullName=u}),c.qZA()(),c.TgZ(17,"button",15),c._uU(18," Save "),c.qZA()()()()),2&r&&(c.xp6(7),c.Q6J("src",i.userFromDBToEdit.imgUrl,c.LSH),c.xp6(8),c.Q6J("ngModel",i.userFromDBToEdit.fullName),c.xp6(2),c.Q6J("disabled",!i.isImgUrlChanged&&i.userFromDB.fullName===i.userFromDBToEdit.fullName)("ngClass",c.VKq(4,pG,!i.isImgUrlChanged&&i.userFromDB.fullName===i.userFromDBToEdit.fullName)))},dependencies:[Kr,au,yo,La,ou,ra,Ua],styles:["[_nghost-%COMP%]{height:calc(100vh - 121px);width:100%;background-color:#000;position:fixed;left:0;top:61px}@media (min-width: 600px){[_nghost-%COMP%]{height:100%;top:0;left:75px;width:calc(100% - 75px);display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr)}}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]{padding-block:1em;display:flex;flex-direction:column;gap:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]{height:100%;padding-block:2.3em}}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:unset;border:none;cursor:pointer;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center;gap:.5em}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:80px;cursor:pointer;object-fit:cover;aspect-ratio:1/1}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#0095f6;font-size:14px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .user-full-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;justify-content:space-between;height:45px;border-block:1px solid rgba(245,245,245,.151)}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .user-full-name[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;font-size:16px;flex:1;height:100%;display:flex;align-items:center}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .user-full-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background-color:transparent;flex:3;height:100%;font-size:16px;border-radius:unset;color:#f5f5f5;font-style:italic}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{cursor:pointer;border:none;color:#f5f5f5;background-color:#0095f6;font-size:18px;margin-block-start:2em;height:40px;width:-moz-fit-content;width:fit-content;padding-inline:1.5em;border-radius:.5em}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-submit.disabled[_ngcontent-%COMP%]{background-color:#8f8f8f;cursor:not-allowed}"]})}return n})();function mG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",15)(1,"button",16),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isEditProfileModalShown=!0)}),c._uU(2," Edit profile "),c.qZA()()}}function _G(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"article",19),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(3);return c.KtG(i.isPostsModalShown=!0)}),c._UZ(1,"img",20),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(1),c.Tol(t.filterSelected),c.Q6J("src",t.imgUrl,c.LSH)}}function yG(n,e){if(1&n&&(c.TgZ(0,"div",17),c.YNc(1,_G,2,3,"article",18),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",t.userPosts)("ngForTrackBy",t.trackByPostId)}}function vG(n,e){1&n&&(c.TgZ(0,"div",21)(1,"p"),c._uU(2,"No posts yet"),c.qZA()())}function CG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"posts-modal",22),c.NdJ("onClosePostsModal",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isPostsModalShown=!1)})("onToggleLike",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleLike(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleFollow(i))})("onAddNotification",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddNotification(i))})("onAddComment",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddComment(i))})("onAddReply",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddReply(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.navigateToUserProfile(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("userPosts",t.userPosts)}}function wG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"edit-profile-modal",23),c.NdJ("onBack",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isEditProfileModalShown=!1)})("onSubmitUserEdit",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onUpdateUserProfile(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("userFromDB",t.userFromDB)}}const IG=function(n){return{"no-edit-profile":n}};function bG(n,e){if(1&n&&(c.TgZ(0,"section",1)(1,"div",2)(2,"div",3),c._UZ(3,"img",4),c.TgZ(4,"span"),c._uU(5),c.qZA()(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"span"),c._uU(10),c.qZA(),c.TgZ(11,"span"),c._uU(12,"Posts"),c.qZA()(),c.TgZ(13,"div",8)(14,"span"),c._uU(15),c.qZA(),c.TgZ(16,"span"),c._uU(17,"Followers"),c.qZA()(),c.TgZ(18,"div",9)(19,"span"),c._uU(20),c.qZA(),c.TgZ(21,"span"),c._uU(22,"Following"),c.qZA()()(),c.YNc(23,mG,3,0,"div",10),c.qZA()(),c.YNc(24,yG,2,2,"div",11),c.YNc(25,vG,3,0,"ng-template",null,12,c.W1O),c.YNc(27,CG,1,1,"posts-modal",13),c.YNc(28,wG,1,1,"edit-profile-modal",14),c.qZA()),2&n){const t=c.MAs(26),r=c.oxw();c.xp6(3),c.Q6J("src",r.userFromDB.imgUrl,c.LSH),c.xp6(2),c.Oqu(r.userFromDB.fullName),c.xp6(2),c.Q6J("ngClass",c.VKq(11,IG,r.userFromDB._id!==r.loggedInUser.uid)),c.xp6(3),c.Oqu(r.userPosts.length),c.xp6(5),c.Oqu(r.userFromDB.followedByUsers.length),c.xp6(5),c.Oqu(r.userFromDB.followingUsers.length),c.xp6(3),c.Q6J("ngIf",r.userFromDB._id===r.loggedInUser.uid),c.xp6(1),c.Q6J("ngIf",r.userPosts.length)("ngIfElse",t),c.xp6(3),c.Q6J("ngIf",r.isPostsModalShown),c.xp6(1),c.Q6J("ngIf",r.isEditProfileModalShown)}}let EG=(()=>{class n{constructor(t,r,i,o,u,f,g){this.userService=t,this.authService=r,this.postService=i,this.router=o,this.route=u,this.location=f,this.notificationService=g,this.isPostsModalShown=!1,this.isProfilePageInitialized=!1,this.isToggleLikeProcessing=!1,this.isEditProfileModalShown=!1,this.loggedInUser=this.authService.getLoggedInUser(),this.userService.setIsSearchModalShown(!1)}ngOnInit(){this.dataSubscription=this.route.data.pipe((0,yt.U)(t=>t.user)).subscribe({next:t=>{this.isProfilePageInitialized=!1,t?this.userFromDB=t:this.location.back(),this.getPostsForUser()}}),this.routerChangesSubscription=this.router.events.pipe(vr(t=>t instanceof Ds)).subscribe(t=>{console.log("Navigation ended:",t.url),this.isPostsModalShown=!1})}getPostsForUser(){const t=this.postService.getPostsForUser(this.userFromDB._id);this.userPostsSubscription=t.subscribe({next:r=>{this.userPosts=r,this.isProfilePageInitialized=!0},error:r=>{console.error(r)}})}trackByPostId(t,r){return r._id}onToggleLike(t){var r=this;return(0,N.Z)(function*(){r.isToggleLikeProcessing||(r.isToggleLikeProcessing=!0,yield r.postService.toggleLike(t.isLikeClicked,t.post),r.isToggleLikeProcessing=!1)})()}onToggleFollow({isFollowClicked:t,user:r}){var i=this;this.authService.getUserById(r._id).pipe(zt(1)).subscribe(function(){var o=(0,N.Z)(function*(u){r=u,yield i.userService.toggleFollow(t,r)});return function(u){return o.apply(this,arguments)}}())}onAddNotification(t){var r=this;return(0,N.Z)(function*(){const i={sender:r.authService.getLoggedInUser().uid,recipient:t.creatorId,message:"",createdAt:0,postId:t._id,postImgUrl:t.imgUrl,read:!1};yield r.notificationService.addNotification(i,"likeAction")})()}onAddComment({comment:t,post:r}){var i=this;return(0,N.Z)(function*(){yield i.postService.addComment(t,r)})()}onAddReply(t){var r=this;return(0,N.Z)(function*(){yield r.postService.addReply(t)})()}onUpdateUserProfile(t){this.userService.updateUserProfile(t),this.userFromDB=t,this.isEditProfileModalShown=!1}navigateToUserProfile(t){this.router.navigateByUrl(`profile/${t}`)}navigateUserProfileFromComment(){this.isPostsModalShown=!1}navigateUserProfileFromLikedByUsers(){console.log("hi"),this.isPostsModalShown=!1}ngOnDestroy(){this.userPostsSubscription?.unsubscribe(),this.dataSubscription?.unsubscribe(),this.routerChangesSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(na),c.Y36(On),c.Y36(ta),c.Y36(fn),c.Y36(ya),c.Y36(Te),c.Y36(IN))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["profile"]],decls:1,vars:1,consts:[["class","user-profile",4,"ngIf"],[1,"user-profile"],[1,"user-info"],[1,"user-image-profile"],["alt","loggedin user",3,"src"],[1,"user-data"],[1,"user-data-inner-container",3,"ngClass"],[1,"posts-count"],[1,"followers-count"],[1,"following-count"],["class","actions-profile",4,"ngIf"],["class","user-posts",4,"ngIf","ngIfElse"],["noPosts",""],[3,"userPosts","onClosePostsModal","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngIf"],[3,"userFromDB","onBack","onSubmitUserEdit",4,"ngIf"],[1,"actions-profile"],[1,"btn-edit-profile",3,"click"],[1,"user-posts"],["class","post-preview",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"post-preview",3,"click"],["alt","post-preview",3,"src"],[1,"no-posts"],[3,"userPosts","onClosePostsModal","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"],[3,"userFromDB","onBack","onSubmitUserEdit"]],template:function(r,i){1&r&&c.YNc(0,bG,29,13,"section",0),2&r&&c.Q6J("ngIf",i.isProfilePageInitialized&&i.userFromDB&&i.userPosts)},dependencies:[Kr,Yr,hn,fG,gG],styles:["[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]{padding-block:2em;display:flex;flex-direction:column;gap:2em;height:100%;position:relative}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding-inline:25px;gap:2em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5em;border-radius:50%;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container.no-edit-profile[_ngcontent-%COMP%]{margin-block-start:1em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .actions-profile[_ngcontent-%COMP%]   .btn-edit-profile[_ngcontent-%COMP%]{border:none;height:2.1em;padding-inline:2em;border-radius:.4em;color:#f5f5f5;background-color:#363636;font-size:15px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .no-posts[_ngcontent-%COMP%]{display:grid;place-content:center;height:100%}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:1px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]   .post-preview[_ngcontent-%COMP%]{display:flex;cursor:pointer}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]   .post-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:1/1;object-fit:cover}"]})}return n})(),$N=(()=>{class n{constructor(){this._isChatDetailsShown$=new ar.X(!1),this.isChatDetailsShown$=this._isChatDetailsShown$.asObservable()}setChatDetailsShown(t){this._isChatDetailsShown$.next(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DG=(()=>{class n{transform(t){const r=new Date(t);return`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")}  ${r.getDate()}/${r.getMonth()+1}/${r.getFullYear().toString().substring(2)}`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=c.Yjl({name:"formatTime",type:n,pure:!0})}return n})();function SG(n,e){if(1&n&&c._UZ(0,"img",7),2&n){const t=c.oxw(2);c.Q6J("src",t.message.sentBy===t.loggedInUserFromDB._id?t.loggedInUserFromDB.imgUrl:t.participantUser.imgUrl,c.LSH)}}function PG(n,e){if(1&n&&(c.TgZ(0,"div",3),c.YNc(1,SG,1,1,"img",4),c.TgZ(2,"div",5)(3,"p"),c._uU(4),c.qZA()(),c.TgZ(5,"div",6)(6,"p"),c._uU(7),c.ALo(8,"formatTime"),c.qZA()()()),2&n){const t=c.oxw();c.Q6J("ngClass",t.message.sentBy===t.loggedInUserFromDB._id?"loggedInUser":"participant"),c.xp6(1),c.Q6J("ngIf",t.message.sentBy!==t.loggedInUserFromDB._id),c.xp6(3),c.Oqu(t.message.txt),c.xp6(3),c.Oqu(c.lcZ(8,4,t.message.sentAt))}}function xG(n,e){1&n&&c._UZ(0,"img",7),2&n&&c.Q6J("src",e.ngIf.imgUrl,c.LSH)}function AG(n,e){if(1&n&&(c.TgZ(0,"div",17)(1,"div",6)(2,"p"),c._uU(3),c.ALo(4,"formatTime"),c.qZA()()()),2&n){const t=c.oxw(2);c.xp6(3),c.Oqu(c.lcZ(4,1,t.message.sentAt))}}function OG(n,e){if(1&n&&c._UZ(0,"img",7),2&n){const t=c.oxw(3);c.Q6J("src",t.message.sentBy===t.loggedInUserFromDB._id?t.loggedInUserFromDB.imgUrl:t.participantUser.imgUrl,c.LSH)}}function kG(n,e){if(1&n&&(c.TgZ(0,"div",18),c.YNc(1,OG,1,1,"img",4),c.TgZ(2,"div",5)(3,"p"),c._uU(4),c.qZA()(),c.TgZ(5,"div",6)(6,"p"),c._uU(7),c.ALo(8,"formatTime"),c.qZA()()()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",t.message.sentBy!==t.loggedInUserFromDB._id),c.xp6(3),c.Oqu(t.message.txt),c.xp6(3),c.Oqu(c.lcZ(8,3,t.message.sentAt))}}const NG=function(n){return{"post-with-no-txt":n}};function RG(n,e){if(1&n&&(c.TgZ(0,"div",8)(1,"div",9)(2,"div",10),c._UZ(3,"img",7),c.TgZ(4,"p"),c._uU(5),c.qZA()(),c._UZ(6,"img",11),c.TgZ(7,"div",12),c.YNc(8,xG,1,1,"img",4),c.ALo(9,"async"),c.TgZ(10,"p",13),c._uU(11),c.qZA(),c.TgZ(12,"p",14),c._uU(13),c.ALo(14,"slice"),c.qZA()()(),c.YNc(15,AG,5,3,"div",15),c.YNc(16,kG,9,5,"div",16),c.qZA()),2&n){const t=c.oxw();c.Tol(t.message.sentBy===t.loggedInUserFromDB._id?"loggedInUser":"participant"),c.Q6J("ngClass",c.VKq(17,NG,!t.message.txt)),c.xp6(3),c.Q6J("src",t.message.sentBy===t.loggedInUserFromDB._id?t.loggedInUserFromDB.imgUrl:t.participantUser.imgUrl,c.LSH),c.xp6(2),c.hij(" ",t.message.sentBy===t.loggedInUserFromDB._id?t.loggedInUserFromDB.fullName:t.participantUser.fullName," "),c.xp6(1),c.Q6J("src",t.post.imgUrl,c.LSH),c.xp6(2),c.Q6J("ngIf",c.lcZ(9,11,t.postCreator$)),c.xp6(3),c.Oqu(t.post.creatorFullName),c.xp6(2),c.hij(" ",t.post.content.length>25?c.Dn7(14,13,t.post.content,0,25)+" ...":t.post.content," "),c.xp6(2),c.Q6J("ngIf",!t.message.txt),c.xp6(1),c.Q6J("ngIf",t.message.txt)}}let FG=(()=>{class n{constructor(t,r){this.postService=t,this.authService=r}ngOnInit(){var t=this;return(0,N.Z)(function*(){t.message.postId&&(t.post=yield t.postService.getPostById(t.message.postId)),t.post&&(t.postCreator$=t.authService.getUserById(t.post.creatorId))})()}ngOnDestroy(){}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ta),c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["message"]],inputs:{message:"message",participantUser:"participantUser",loggedInUserFromDB:"loggedInUserFromDB"},decls:3,vars:2,consts:[[1,"message"],["class","message-with-no-post",3,"ngClass",4,"ngIf"],["class","message-with-post",3,"class","ngClass",4,"ngIf"],[1,"message-with-no-post",3,"ngClass"],["alt","user",3,"src",4,"ngIf"],[1,"txt"],[1,"time"],["alt","user",3,"src"],[1,"message-with-post",3,"ngClass"],[1,"post"],[1,"header"],["alt","post",3,"src"],[1,"footer"],[1,"creator-full-name"],[1,"post-content"],["class","time-date-for-post-with-no-txt",4,"ngIf"],["class","message-with-post-content",4,"ngIf"],[1,"time-date-for-post-with-no-txt"],[1,"message-with-post-content"]],template:function(r,i){1&r&&(c.TgZ(0,"li",0),c.YNc(1,PG,9,6,"div",1),c.YNc(2,RG,17,19,"div",2),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngIf",!i.message.postId),c.xp6(1),c.Q6J("ngIf",i.post&&i.postCreator$))},dependencies:[Kr,hn,_u,_r,DG],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:.6em;width:100%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:.6em;width:100%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post.loggedInUser[_ngcontent-%COMP%]{flex-direction:row-reverse}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post.loggedInUser[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{background:linear-gradient(to left,rgb(38,38,38),rgb(49,49,49))}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post.loggedInUser[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post.participant[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(55,151,240),rgb(100,180,255))}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5em;border-radius:50%;margin-block-end:.2em;object-fit:cover;aspect-ratio:1/1;cursor:pointer}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{border-radius:1.4em;padding-inline:1em;padding-block:.5em;font-size:17px;overflow-wrap:break-word;max-width:200px}@media (min-width: 600px){[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{max-width:300px}}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-no-post[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:11px;margin-block-end:.2em;display:flex;flex-wrap:wrap;max-width:40px;text-align:left}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post.post-with-no-txt[_ngcontent-%COMP%]{flex-direction:row}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post.loggedInUser[_ngcontent-%COMP%]{align-items:flex-end}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post.loggedInUser[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]{flex-direction:row-reverse}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post.loggedInUser[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{background:linear-gradient(to left,rgb(38,38,38),rgb(49,49,49))}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post.loggedInUser[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post.participant[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(55,151,240),rgb(100,180,255))}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]{border-radius:10px;background-color:#333;width:60%}@media (min-width: 450px){[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]{width:50%}}@media (min-width: 550px){[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]{width:40%}}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;padding-inline:.7em;padding-block:10px;height:45px}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;border-radius:50%;aspect-ratio:1/1;object-fit:cover;cursor:pointer}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder;color:#f5f5f5}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:.5em;padding-inline:.7em;padding-block:10px}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .creator-full-name[_ngcontent-%COMP%]{margin-inline-start:-3px;font-weight:bolder}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .post[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;object-fit:cover;aspect-ratio:1/1;border-radius:50%;cursor:pointer}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .time-date-for-post-with-no-txt[_ngcontent-%COMP%]{display:flex;align-items:flex-end}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .time-date-for-post-with-no-txt[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:11px;margin-block-end:.2em;display:flex;flex-wrap:wrap;max-width:40px;text-align:left}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:.6em;width:100%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5em;border-radius:50%;margin-block-end:.2em;object-fit:cover;aspect-ratio:1/1;cursor:pointer}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{border-radius:1.4em;padding-inline:1em;padding-block:.5em;font-size:17px;overflow-wrap:break-word;max-width:200px}@media (min-width: 600px){[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{max-width:300px}}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .message-with-post[_ngcontent-%COMP%]   .message-with-post-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:11px;margin-block-end:.2em;display:flex;flex-wrap:wrap;max-width:40px;text-align:left}"]})}return n})();function LG(n,e){if(1&n&&c._UZ(0,"message",2),2&n){const t=e.$implicit,r=c.oxw();c.Q6J("message",t)("loggedInUserFromDB",r.loggedInUserFromDB)("participantUser",r.participantUser)}}let UG=(()=>{class n{constructor(t){this.chatService=t,this.onScrollToBottom=new c.vpe}ngOnInit(){this.getChatMessages()}getChatMessages(){this.chatService.getMessagesByChatId(this.chat._id).subscribe({next:t=>{this.messages=t,this.scrollToBottom()}})}scrollToBottom(){this.onScrollToBottom.emit()}trackByMessageId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(hg))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["message-list"]],inputs:{chat:"chat",participantUser:"participantUser",loggedInUserFromDB:"loggedInUserFromDB"},outputs:{onScrollToBottom:"onScrollToBottom"},decls:2,vars:2,consts:[[1,"message-list"],[3,"message","loggedInUserFromDB","participantUser",4,"ngFor","ngForOf","ngForTrackBy"],[3,"message","loggedInUserFromDB","participantUser"]],template:function(r,i){1&r&&(c.TgZ(0,"ul",0),c.YNc(1,LG,1,3,"message",1),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngForOf",i.messages)("ngForTrackBy",i.trackByMessageId))},dependencies:[Yr,FG],styles:["[_nghost-%COMP%]{width:100%;display:block}[_nghost-%COMP%]   .message-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.4em;width:100%;padding-block:4em}"]})}return n})();const BG=["chatDetails"];function VG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",1,2)(2,"div",3)(3,"button",4),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.goBack())}),c.O4$(),c.TgZ(4,"svg",5),c._UZ(5,"line",6)(6,"polyline",7),c.qZA()(),c.kcU(),c.TgZ(7,"div",8),c._UZ(8,"img",9),c.TgZ(9,"span"),c._uU(10),c.qZA()()(),c.TgZ(11,"message-list",10),c.NdJ("onScrollToBottom",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onScrollToBottom())}),c.qZA(),c.TgZ(12,"form",11),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onAddMessage())}),c._UZ(13,"img",12),c.TgZ(14,"input",13),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.message.txt=i)}),c.qZA(),c.TgZ(15,"button",14),c._uU(16,"Send"),c.qZA()()()}if(2&n){const t=c.oxw();c.xp6(8),c.Q6J("src",t.participantUser.imgUrl,c.LSH),c.xp6(2),c.Oqu(t.participantUser.fullName),c.xp6(1),c.Q6J("chat",t.chat)("loggedInUserFromDB",t.loggedInUserFromDB)("participantUser",t.participantUser),c.xp6(2),c.Q6J("src",t.loggedInUserFromDB.imgUrl,c.LSH),c.xp6(1),c.Q6J("ngModel",t.message.txt)}}let jG=(()=>{class n{constructor(t,r,i,o,u,f){this.route=t,this.location=r,this.authService=i,this.chatService=o,this.sharedStateService=u,this.router=f,this.isComponentInitialized=!1,this.message={_id:"",chatId:"",sentAt:0,sentBy:this.authService.getLoggedInUser().uid,txt:""},this.sharedStateService.setChatDetailsShown(!0)}ngOnInit(){var t=this;return(0,N.Z)(function*(){var r;t.dataSubscription=t.route.data.pipe((0,yt.U)(r=>r.chat)).subscribe({next:r=>{r?t.chat=r:t.location.back(),r&&(t.message.chatId=r._id)}}),t.paramsSubscription=t.route.params.subscribe({next:(r=(0,N.Z)(function*(i){i.chatId?t.chatId=i.chatId:t.location.back()}),function(o){return r.apply(this,arguments)})}),yield t.getLoggedInUserFromDB(),yield t.getParticipantUser(),t.isComponentInitialized=!0})()}ngAfterContentInit(){let t=setInterval(()=>{this.elChatDetails&&(setTimeout(()=>{this.elChatDetails.nativeElement.scrollIntoView({behavior:"smooth",block:"end"})},500),clearInterval(t))},500)}onAddMessage(){var t=this;return(0,N.Z)(function*(){if(!t.message.txt)return;const r=structuredClone(t.message);t.message.txt="",yield t.chatService.addMessageToChat(t.chat._id,r,t.participantUser._id,t.loggedInUserFromDB._id)})()}getLoggedInUserFromDB(){var t=this;return(0,N.Z)(function*(){const r=t.authService.getUserById(t.authService.getLoggedInUser().uid);t.loggedInUserFromDB=yield Zt(r)})()}getParticipantUser(){var t=this;return(0,N.Z)(function*(){let r=t.chat.users.filter(u=>u!==t.loggedInUserFromDB._id)[0];r||(r=t.loggedInUserFromDB._id);const i=t.authService.getUserById(r),o=yield Zt(i);t.participantUser=o})()}onScrollToBottom(){this.elChatDetails.nativeElement.scrollIntoView({behavior:"smooth",block:"end"})}goBack(){var t=this;return(0,N.Z)(function*(){yield t.router.navigateByUrl("chat")})()}ngOnDestroy(){this.paramsSubscription?.unsubscribe(),this.dataSubscription?.unsubscribe(),this.sharedStateService.setChatDetailsShown(!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ya),c.Y36(Te),c.Y36(On),c.Y36(hg),c.Y36($N),c.Y36(fn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-details"]],viewQuery:function(r,i){if(1&r&&c.Gf(BG,5),2&r){let o;c.iGM(o=c.CRH())&&(i.elChatDetails=o.first)}},hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","chat-details",4,"ngIf"],[1,"chat-details"],["chatDetails",""],[1,"header"],["title","Back",1,"btn-back",3,"click"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"participant-user"],["alt","Participant",3,"src"],[3,"chat","loggedInUserFromDB","participantUser","onScrollToBottom"],[1,"add-message",3,"ngSubmit"],["alt","loggedInUser",3,"src"],["type","text","name","message","id","message","placeholder","Message...",3,"ngModel","ngModelChange"],[1,"btn-send"]],template:function(r,i){1&r&&c.YNc(0,VG,17,7,"section",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[hn,au,yo,La,ou,ra,Ua,UG],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]{padding-block:1.4em;width:100%}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;border-block-end:1px solid rgba(245,245,245,.29);width:100%;position:fixed;left:0;top:0;z-index:999;background-color:#000;height:61px;padding-inline:25px}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);padding-inline:unset;gap:unset}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:unset;border:none;display:flex;align-items:center;cursor:pointer}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{grid-column:2;grid-row:1;width:-moz-fit-content;width:fit-content}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .participant-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .participant-user[_ngcontent-%COMP%]{grid-column:2;grid-row:1;width:-moz-fit-content;width:fit-content;margin-inline-start:3em}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .participant-user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;aspect-ratio:1/1;object-fit:cover;border-radius:50%;cursor:pointer}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .participant-user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;position:fixed;left:0;bottom:0;background-color:#000;height:61px;width:100%;padding-inline:25px;border-block-start:1px solid rgba(245,245,245,.24);z-index:999}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);padding-inline:unset;gap:unset}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%;object-fit:cover;aspect-ratio:1/1;cursor:pointer}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{grid-column:2;grid-row:1}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   #message[_ngcontent-%COMP%]{width:100%;height:100%;background-color:unset;border:none;font-size:16px;color:#f5f5f5}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   #message[_ngcontent-%COMP%]{grid-column:2;grid-row:1;margin-inline-start:2.5em}}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder;background-color:unset;border:none;height:100%;color:#0095f6;cursor:pointer}@media (min-width: 600px){[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{grid-column:2;grid-row:1;width:-moz-fit-content;width:fit-content;justify-self:end}}"]})}return n})(),HG=(()=>{class n{constructor(){this.onAddNewChat=new c.vpe}addNewChat(){this.onAddNewChat.emit(this.user._id)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["user-row"]],inputs:{user:"user"},outputs:{onAddNewChat:"onAddNewChat"},decls:4,vars:2,consts:[[1,"user-row"],["alt","user",3,"src","click"],[3,"click"]],template:function(r,i){1&r&&(c.TgZ(0,"li",0)(1,"img",1),c.NdJ("click",function(){return i.addNewChat()}),c.qZA(),c.TgZ(2,"p",2),c.NdJ("click",function(){return i.addNewChat()}),c._uU(3),c.qZA()()),2&r&&(c.xp6(1),c.Q6J("src",i.user.imgUrl,c.LSH),c.xp6(2),c.Oqu(i.user.fullName))},styles:["[_nghost-%COMP%]   .user-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em}[_nghost-%COMP%]   .user-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;border-radius:50%;cursor:pointer;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .user-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();function zG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"user-row",2),c.NdJ("onAddNewChat",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.addNewChat(i))}),c.qZA()}2&n&&c.Q6J("user",e.$implicit)}let GG=(()=>{class n{constructor(){this.onAddNewChat=new c.vpe}trackByUserId(t,r){return r._id}addNewChat(t){this.onAddNewChat.emit(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["user-list"]],inputs:{users:"users"},outputs:{onAddNewChat:"onAddNewChat"},decls:2,vars:2,consts:[[1,"user-list"],[3,"user","onAddNewChat",4,"ngFor","ngForOf","ngForTrackBy"],[3,"user","onAddNewChat"]],template:function(r,i){1&r&&(c.TgZ(0,"ul",0),c.YNc(1,zG,1,1,"user-row",1),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngForOf",i.users)("ngForTrackBy",i.trackByUserId))},dependencies:[Yr,HG],styles:["[_nghost-%COMP%]   .user-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2em}"]})}return n})();const ZG=[{path:"chat/add",component:(()=>{class n{constructor(t,r,i,o,u){this.router=t,this.authService=r,this.userService=i,this.sharedStateService=o,this.chatService=u,this.newChat={_id:"",lastModified:0,isRead:!1,shownByUsers:[this.authService.getLoggedInUser().uid],users:[this.authService.getLoggedInUser().uid],messages:[]},this.filterBy={account:""},this.sharedStateService.setChatDetailsShown(!0)}ngOnInit(){var t=this;return(0,N.Z)(function*(){yield t.getUsers()})()}getUsers(){var t=this;return(0,N.Z)(function*(){const r=t.userService.getUsers(t.filterBy),i=yield Zt(r);t.users=i})()}onAddNewChat(t){var r=this;return(0,N.Z)(function*(){r.newChat.users.push(t),r.newChat.shownByUsers.push(t);const i=yield r.chatService.addNewChat(r.newChat,r.authService.getLoggedInUser().uid,t);yield r.router.navigateByUrl(`chat/${i._id}`)})()}navigateToChatPage(){this.router.navigateByUrl("chat")}ngOnDestroy(){this.sharedStateService.setChatDetailsShown(!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(fn),c.Y36(On),c.Y36(na),c.Y36($N),c.Y36(hg))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["add-chat"]],hostAttrs:[1,"page-cmp-layout"],decls:12,vars:2,consts:[[1,"add-chat-page"],[1,"header"],[1,"btn-cancel",3,"click"],[1,"add-chat-inner-container"],["type","search","name","user","id","user","placeholder","Search",3,"ngModel","ngModelChange","input"],[3,"users","onAddNewChat"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"div",1)(2,"button",2),c.NdJ("click",function(){return i.navigateToChatPage()}),c._uU(3," Cancel "),c.qZA(),c.TgZ(4,"h4"),c._uU(5,"New message"),c.qZA()(),c.TgZ(6,"div",3)(7,"form")(8,"p"),c._uU(9,"To:"),c.qZA(),c.TgZ(10,"input",4),c.NdJ("ngModelChange",function(u){return i.filterBy.account=u})("input",function(){return i.getUsers()}),c.qZA()(),c.TgZ(11,"user-list",5),c.NdJ("onAddNewChat",function(u){return i.onAddNewChat(u)}),c.qZA()()()),2&r&&(c.xp6(10),c.Q6J("ngModel",i.filterBy.account),c.xp6(1),c.Q6J("users",i.users))},dependencies:[au,yo,La,ou,ra,Ua,GG],styles:["[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]{padding-block-start:65px;padding-block-end:25px;display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;position:fixed;width:100%;height:50px;left:0;top:0;padding-inline:25px;border-block-end:1px solid rgba(255,255,255,.24);background-color:#000}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background-color:unset;border:none;color:#f5f5f5;font-size:16px;flex:1;text-align:left;cursor:pointer}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;flex:1.5}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .add-chat-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .add-chat-inner-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .add-chat-inner-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4f4f4f;height:100%;display:flex;align-items:center;font-size:16px}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .add-chat-inner-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #user[_ngcontent-%COMP%]{width:100%;color:#f5f5f5;background-color:transparent;border:none;font-size:16px;height:100%;padding-inline:.5em}[_nghost-%COMP%]   .add-chat-page[_ngcontent-%COMP%]   .add-chat-inner-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #user[_ngcontent-%COMP%]::placeholder{color:#4f4f4f;font-size:16px}"]})}return n})(),canActivate:[mg]},{path:"chat/:chatId",component:jG,canActivate:[mg],resolve:{chat:function $G(n){const e=n.params.chatId;return(0,c.f3M)(hg).getChatById(e).pipe(zt(1))}}},{path:"chat",component:Qz,canActivate:[mg]},{path:"notification",component:iG,canActivate:[mg]},{path:"create-post",component:uG,canActivate:[mg]},{path:"profile/:userId",component:EG,canActivate:[mg],resolve:{user:function TG(n){const e=n.params.userId;return(0,c.f3M)(On).getUserById(e)}}},{path:"login",component:jz,canActivate:[()=>!(0,c.f3M)(On).getLoggedInUser()||(console.error("LoggedInUser exists - no access to login page!"),(0,c.f3M)(fn).navigateByUrl("/"),!1)]},{path:"",component:Uz,canActivate:[mg]}];let qG=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Om.forRoot(ZG,{useHash:!0}),Om]})}return n})();const WG=function(n,e){return{"btn-toggle-follow-following":n,disabled:e}};function KG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleFollow())}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("ngClass",c.WLB(3,WG,t.isFollowClicked,t.isToggleFollowProcessing))("disabled",t.isToggleFollowProcessing),c.xp6(1),c.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function YG(n,e){if(1&n&&(c.TgZ(0,"li")(1,"div",1),c._UZ(2,"img",2),c.TgZ(3,"div",3)(4,"span"),c._uU(5),c.qZA()()(),c.YNc(6,KG,2,6,"button",4),c.qZA()),2&n){const t=c.oxw();c.xp6(2),c.Q6J("src",t.user.imgUrl,c.LSH),c.xp6(3),c.Oqu(t.user.fullName),c.xp6(1),c.Q6J("ngIf",t.loggedInUser._id!==t.user._id)}}let QG=(()=>{class n{constructor(t){this.authService=t,this.toggleFollow=new c.vpe,this.isComponentInitialized=!1,this.isToggleFollowProcessing=!1}ngOnInit(){var t=this;return(0,N.Z)(function*(){const r=t.authService.getLoggedInUser(),i=t.authService.getUserById(r.uid);t.loggedInUser=yield Zt(i),t.isFollowClicked=!!t.loggedInUser.followingUsers.find(o=>o===t.user._id),t.isComponentInitialized=!0})()}ngOnChanges(t){this.isComponentInitialized&&t.user&&(this.isFollowClicked=this.user.followedByUsers.includes(this.loggedInUser._id))}onToggleFollow(){this.isToggleFollowProcessing||(this.isToggleFollowProcessing=!0,this.isFollowClicked=!this.isFollowClicked,this.toggleFollow.emit({isFollowClicked:this.isFollowClicked,user:this.user}),this.isToggleFollowProcessing=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["user-row-search-modal"]],inputs:{user:"user"},outputs:{toggleFollow:"toggleFollow"},features:[c.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"user-content"],["alt","loggedInUser",3,"src"],[1,"content"],["class","btn-toggle-follow",3,"ngClass","disabled","click",4,"ngIf"],[1,"btn-toggle-follow",3,"ngClass","disabled","click"]],template:function(r,i){1&r&&c.YNc(0,YG,7,3,"li",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Kr,hn],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5em;border-radius:50%;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{border:none;font-size:16px;height:2em;padding-inline:1em;border-radius:.3em;background-color:#0095f6;color:#f5f5f5;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow-following[_ngcontent-%COMP%]{background-color:#919191}"]})}return n})();function JG(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"user-row-search-modal",5),c.NdJ("toggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.toggleFollow.emit(i))}),c.qZA()}2&n&&c.Q6J("user",e.$implicit)}let d6=(()=>{class n{constructor(t){this.renderer=t,this.closeModal=new c.vpe,this.getUsers=new c.vpe,this.toggleFollow=new c.vpe}ngOnInit(){this.renderer.addClass(document.body,"body-unscrollable"),this.getUsers.emit()}onCloseModal(){this.closeModal.emit(!1)}trackByUserId(t,r){return r._id}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["search-modal"]],inputs:{users:"users"},outputs:{closeModal:"closeModal",getUsers:"getUsers",toggleFollow:"toggleFollow"},decls:6,vars:2,consts:[[1,"search-modal"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[3,"user","toggleFollow",4,"ngFor","ngForOf","ngForTrackBy"],[3,"user","toggleFollow"]],template:function(r,i){1&r&&(c.TgZ(0,"div",0)(1,"button",1),c.NdJ("click",function(){return i.onCloseModal()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"ul"),c.YNc(5,JG,1,1,"user-row-search-modal",4),c.qZA()()),2&r&&(c.xp6(5),c.Q6J("ngForOf",i.users)("ngForTrackBy",i.trackByUserId))},dependencies:[Yr,QG],styles:["[_nghost-%COMP%]{position:fixed;top:61px;left:0;width:100%;height:100%;background-color:#000;overflow:auto;display:grid;grid-template-columns:25px 1fr 25px}@media (min-width: 600px){[_nghost-%COMP%]{grid-template-columns:unset;display:block;position:unset;left:75px;grid-column:2;grid-row:3;overflow:unset}}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]{grid-column:2;padding-block:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-block:unset}}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:fixed;top:88px;right:29px;border:none;width:-moz-fit-content;width:fit-content;background-color:transparent;display:flex;align-items:center;padding-inline-start:.8em;padding-block-end:.8em;align-self:end;cursor:pointer;z-index:200}@media (min-width: 600px){[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:sticky;top:115px}}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.3em;position:relative;padding-block-end:8em;padding-block-start:2em}@media (min-width: 600px){[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-block-start:unset;padding-block-end:unset}}"]})}return n})();function XG(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",40),c._UZ(1,"path",41),c.qZA())}function eZ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",40),c._UZ(1,"path",42),c.qZA())}function tZ(n,e){if(1&n&&c._UZ(0,"img",43),2&n){const t=c.oxw(2);c.Q6J("src",t.user.imgUrl,c.LSH)}}function nZ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",44),c._UZ(1,"path",45)(2,"circle",46),c.qZA())}function rZ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",47)(1,"ul")(2,"li",48),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onLogOut())}),c._uU(3,"Log out"),c.qZA()()()}}function iZ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",49)(1,"div",50),c.O4$(),c.TgZ(2,"svg",51)(3,"title"),c._uU(4,"Search"),c.qZA(),c._UZ(5,"path",13)(6,"line",14),c.qZA(),c.kcU(),c.TgZ(7,"input",52),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.filterBy.account=i)})("input",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.getUsers())})("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleSearchModal(!0))}),c.qZA()(),c.TgZ(8,"search-modal",53),c.NdJ("closeModal",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleSearchModal(i))})("getUsers",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.getUsers())})("toggleFollow",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleFollow(i))}),c.qZA()()}if(2&n){const t=c.oxw(2);c.xp6(7),c.Q6J("ngModel",t.filterBy.account),c.xp6(1),c.Q6J("users",t.users)}}const sZ=function(){return{exact:!0}},oZ=function(n){return{"search-active":n}};function aZ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",1)(1,"div",2)(2,"div",3),c.O4$(),c.TgZ(3,"svg",4),c._UZ(4,"path",5),c.qZA()(),c.kcU(),c.TgZ(5,"nav")(6,"ul")(7,"li",6,7),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(8);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.O4$(),c.TgZ(9,"svg",8),c._UZ(10,"path",9),c.qZA()(),c.kcU(),c.TgZ(11,"li",10,11),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(8),o=c.MAs(19),u=c.MAs(24),f=c.MAs(28),g=c.MAs(34),y=c.oxw();return y.onToggleSearchModal(!0),c.KtG(y.onClickSearchModal([i,o,u,f,g]))}),c.O4$(),c.TgZ(13,"svg",12)(14,"title"),c._uU(15,"\u05d7\u05d9\u05e4\u05d5\u05e9"),c.qZA(),c._UZ(16,"path",13)(17,"line",14),c.qZA()(),c.kcU(),c.TgZ(18,"li",15,16),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(19);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.O4$(),c.TgZ(20,"svg",17),c._UZ(21,"path",18)(22,"path",19),c.qZA()(),c.kcU(),c.TgZ(23,"li",20,21),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(24);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.YNc(25,XG,2,0,"svg",22),c.YNc(26,eZ,2,0,"svg",22),c.qZA(),c.TgZ(27,"li",23,24),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(28);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.O4$(),c.TgZ(29,"svg",25),c._UZ(30,"path",26)(31,"line",27)(32,"line",28),c.qZA()(),c.kcU(),c.TgZ(33,"li",29,30),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(34);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.YNc(35,tZ,1,1,"img",31),c.YNc(36,nZ,3,0,"ng-template",null,32,c.W1O),c.qZA()()()(),c.TgZ(38,"div",33),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),c.O4$(),c.TgZ(39,"svg",34),c._UZ(40,"line",35)(41,"line",36)(42,"line",37),c.qZA(),c.YNc(43,rZ,4,0,"div",38),c.qZA(),c.YNc(44,iZ,9,2,"div",39),c.qZA()}if(2&n){const t=c.MAs(24),r=c.MAs(37),i=c.oxw();c.xp6(7),c.Q6J("routerLinkActiveOptions",c.DdM(9,sZ)),c.xp6(4),c.Q6J("ngClass",c.VKq(10,oZ,i.isSearchModalShown)),c.xp6(14),c.Q6J("ngIf",!t.classList.contains("active")),c.xp6(1),c.Q6J("ngIf",t.classList.contains("active")),c.xp6(7),c.MGl("routerLink","/profile/",i.user._id,""),c.xp6(2),c.Q6J("ngIf",i.user.imgUrl)("ngIfElse",r),c.xp6(8),c.Q6J("ngIf",i.isExtraMenuOpen),c.xp6(1),c.Q6J("ngIf",i.isSearchModalShown)}}let cZ=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.userService=i,this.isExtraMenuOpen=!1,this.isSearchModalShown=!1,this.filterBy={account:""}}ngOnInit(){var r,t=this;this.userSubscription=this.authService.loggedInUser$.subscribe({next:(r=(0,N.Z)(function*(i){if(i){const o=t.authService.getUserById(i.uid),u=yield Zt(o);t.user=u}else t.router.navigateByUrl("login")}),function(o){return r.apply(this,arguments)})}),this.userService.isSearchModalShown$.subscribe({next:r=>{this.isSearchModalShown=r}})}getUsers(){this.usersSubscription?.unsubscribe(),this.usersSubscription=this.userService.getUsers(this.filterBy).subscribe({next:t=>{this.users=t}})}onToggleSearchModal(t){this.userService.setIsSearchModalShown(t)}onToggleFollow({isFollowClicked:t,user:r}){var i=this;return(0,N.Z)(function*(){const o=i.authService.getUserById(r._id).pipe(zt(1));r=yield Zt(o),yield i.userService.toggleFollow(t,r)})()}onClickSearchModal(t){t.forEach(r=>{r.classList.remove("active")})}onLogOut(){var t=this;return(0,N.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription?.unsubscribe(),this.usersSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(fn),c.Y36(na))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions","click"],["elHome",""],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["title","Search",1,"search",3,"ngClass","click"],["elSearch",""],["aria-label","\u05d7\u05d9\u05e4\u05d5\u05e9","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["d","M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","16.511","x2","22","y1","16.511","y2","22"],["routerLink","/chat","routerLinkActive","active","title","Messages",1,"messages",3,"click"],["elMessages",""],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications",3,"click"],["elNotifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post",3,"click"],["elCreatePost",""],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLinkActive","active","title","Profile",1,"profile",3,"routerLink","click"],["elProfile",""],["alt","loggedInUser",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["class","search-container",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","loggedInUser",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"],[1,"search-container"],[1,"header"],["aria-label","Search","fill","currentColor","height","16","role","img","viewBox","0 0 24 24","width","16",1,"x1lliihq","x1n2onr6","x1cp0k07"],["type","search","name","search","id","search","placeholder","Search",3,"ngModel","ngModelChange","input","click"],[3,"users","closeModal","getUsers","toggleFollow"]],template:function(r,i){1&r&&c.YNc(0,aZ,45,12,"section",0),2&r&&c.Q6J("ngIf",i.user)},dependencies:[Kr,hn,od,Mf,yo,La,ra,d6],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;z-index:99;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.21);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:fixed;top:0;left:75px;width:calc(100% - 75px);height:100%;display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);grid-template-rows:50px 65px 1fr 50px;overflow:auto;background-color:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{grid-column:2;grid-row:2;display:flex;align-items:center;background-color:#262626;border-radius:.5em;gap:.5em;height:40px;padding-inline:1em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.2)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]{background-color:transparent;border:none;height:100%;color:#f5f5f5;font-size:16px;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]::placeholder{font-size:16px;font-style:italic;color:#919191}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;object-fit:cover;aspect-ratio:1/1}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.search-active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:60px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function lZ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",27),c._UZ(1,"path",28),c.qZA())}function uZ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",27),c._UZ(1,"path",29),c.qZA())}function dZ(n,e){if(1&n&&c._UZ(0,"img",30),2&n){const t=c.oxw(2);c.Q6J("src",t.loggedInUser.imgUrl,c.LSH)}}function hZ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",31),c._UZ(1,"path",32)(2,"circle",33),c.qZA())}function fZ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",34)(1,"ul")(2,"li",35),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onLogOut())}),c._uU(3," Log out "),c.qZA()()()}}const pZ=function(){return{exact:!0}};function gZ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),c.O4$(),c.TgZ(5,"svg",4),c._UZ(6,"path",5),c.qZA()(),c.kcU(),c.TgZ(7,"li",6),c.O4$(),c.TgZ(8,"svg",7),c._UZ(9,"path",8)(10,"path",9),c.qZA()(),c.kcU(),c.TgZ(11,"li",10,11),c.YNc(13,lZ,2,0,"svg",12),c.YNc(14,uZ,2,0,"svg",12),c.qZA(),c.TgZ(15,"li",13),c.O4$(),c.TgZ(16,"svg",14),c._UZ(17,"path",15)(18,"line",16)(19,"line",17),c.qZA()(),c.kcU(),c.TgZ(20,"li",18),c.YNc(21,dZ,1,1,"img",19),c.YNc(22,hZ,3,0,"ng-template",null,20,c.W1O),c.qZA(),c.TgZ(24,"li",21),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),c.O4$(),c.TgZ(25,"svg",22),c._UZ(26,"line",23)(27,"line",24)(28,"line",25),c.qZA(),c.YNc(29,fZ,4,0,"div",26),c.qZA()()()()()}if(2&n){const t=c.MAs(12),r=c.MAs(23),i=c.oxw();c.xp6(4),c.Q6J("routerLinkActiveOptions",c.DdM(7,pZ)),c.xp6(9),c.Q6J("ngIf",!t.classList.contains("active")),c.xp6(1),c.Q6J("ngIf",t.classList.contains("active")),c.xp6(6),c.MGl("routerLink","/profile/",i.loggedInUser._id,""),c.xp6(1),c.Q6J("ngIf",i.loggedInUser)("ngIfElse",r),c.xp6(8),c.Q6J("ngIf",i.isExtraMenuOpen)}}let mZ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){var r,t=this;this.userSubscription=this.authService.loggedInUser$.subscribe({next:(r=(0,N.Z)(function*(i){if(i){const o=t.authService.getUserById(i.uid),u=yield Zt(o);t.loggedInUser=u}else t.router.navigateByUrl("login")}),function(o){return r.apply(this,arguments)})})}onLogOut(){var t=this;return(0,N.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(On),c.Y36(fn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/chat","routerLinkActive","active","title","Chats",1,"chats"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLinkActive","active","title","Profile",1,"profile",3,"routerLink"],["alt","loggedInUser",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","loggedInUser",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&c.YNc(0,gZ,30,8,"section",0),2&r&&c.Q6J("ngIf",i.loggedInUser)},dependencies:[hn,od,Mf],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;left:0;z-index:299;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;object-fit:cover;aspect-ratio:1/1}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#262626;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})();function _Z(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"search-modal",10),c.NdJ("closeModal",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleSearchModal(i))})("getUsers",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.getUsers())})("toggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleFollow(i))}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("users",t.users)}}let yZ=(()=>{class n{constructor(t,r,i){this.router=t,this.userService=r,this.authService=i,this.filterBy={account:""}}ngOnInit(){this.searchModalSubscription=this.userService.isSearchModalShown$.subscribe({next:t=>{this.isSearchModalShown=t,this.filterBy.account=""}})}onClickLogo(){this.router.navigateByUrl("/")}getUsers(){this.usersSubscription?.unsubscribe(),this.usersSubscription=this.userService.getUsers(this.filterBy).subscribe({next:t=>{this.users=t}})}onToggleSearchModal(t){this.userService.setIsSearchModalShown(t)}onToggleFollow({isFollowClicked:t,user:r}){var i=this;return(0,N.Z)(function*(){const o=i.authService.getUserById(r._id).pipe(zt(1));r=yield Zt(o),yield i.userService.toggleFollow(t,r)})()}ngOnDestroy(){this.searchModalSubscription?.unsubscribe(),this.usersSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(fn),c.Y36(na),c.Y36(On))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-header-mobile"]],decls:12,vars:2,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[1,"search-container"],["aria-label","Search","fill","currentColor","height","16","role","img","viewBox","0 0 24 24","width","16",1,"x1lliihq","x1n2onr6","x1cp0k07"],["d","M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","16.511","x2","22","y1","16.511","y2","22"],["type","search","name","search","id","search","placeholder","Search",3,"ngModel","ngModelChange","input","click"],[3,"users","closeModal","getUsers","toggleFollow",4,"ngIf"],[3,"users","closeModal","getUsers","toggleFollow"]],template:function(r,i){1&r&&(c.TgZ(0,"header",0)(1,"div",1),c.NdJ("click",function(){return i.onClickLogo()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"div",4),c.O4$(),c.TgZ(5,"svg",5)(6,"title"),c._uU(7,"Search"),c.qZA(),c._UZ(8,"path",6)(9,"line",7),c.qZA(),c.kcU(),c.TgZ(10,"input",8),c.NdJ("ngModelChange",function(u){return i.filterBy.account=u})("input",function(){return i.getUsers()})("click",function(){return i.onToggleSearchModal(!0)}),c.qZA(),c.YNc(11,_Z,1,1,"search-modal",9),c.qZA()()),2&r&&(c.xp6(10),c.Q6J("ngModel",i.filterBy.account),c.xp6(1),c.Q6J("ngIf",i.isSearchModalShown))},dependencies:[hn,yo,La,ra,d6],styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:199;top:0;left:0;border-block-end:1px solid rgba(245,245,245,.21);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px;gap:1em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em;background-color:#262626;height:2.5em;padding-inline:1em;border-radius:.5em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.2)}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]{background-color:transparent;border:none;height:100%;color:#f5f5f5;font-size:16px;width:100%}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]::placeholder{font-size:16px;font-style:italic;color:#919191}"]})}return n})();function vZ(n,e){1&n&&c._UZ(0,"router-outlet")}function CZ(n,e){1&n&&c._UZ(0,"app-header-mobile")}function wZ(n,e){1&n&&c._UZ(0,"aside-menu")}function IZ(n,e){1&n&&(c.TgZ(0,"main",3),c._UZ(1,"router-outlet"),c.qZA())}function bZ(n,e){1&n&&c._UZ(0,"menu-mobile")}const EZ=function(n){return{"main-app-remove-rows":n}};let MZ=(()=>{class n{constructor(t,r){this.router=t,this.sharedState=r,this.routerUrl=this.router.url,this.isChatDetailsShown=!1}ngOnInit(){var t=this;return(0,N.Z)(function*(){t.getIsChatDetailsShown(),t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof Ds&&(t.routerUrl=t.router.url)})})()}getIsChatDetailsShown(){this.chatDetailsSubscription=this.sharedState.isChatDetailsShown$.subscribe({next:t=>{this.isChatDetailsShown=t}})}ngOnDestroy(){this.routerUrlSubscription?.unsubscribe(),this.chatDetailsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(fn),c.Y36($N))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:10,consts:[[1,"app",3,"ngClass"],[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0),c.YNc(1,vZ,1,0,"router-outlet",1),c.YNc(2,CZ,1,0,"app-header-mobile",1),c.YNc(3,wZ,1,0,"aside-menu",1),c.YNc(4,IZ,2,0,"main",2),c.YNc(5,bZ,1,0,"menu-mobile",1),c.qZA()),2&r&&(c.Tol("/login"===i.routerUrl?"main-app login-layout":"main-app app-layout"),c.Q6J("ngClass",c.VKq(8,EZ,i.isChatDetailsShown)),c.xp6(1),c.Q6J("ngIf","/login"===i.routerUrl),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl&&!i.isChatDetailsShown),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl&&!i.isChatDetailsShown),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl&&!i.isChatDetailsShown))},dependencies:[Kr,hn,df,cZ,mZ,yZ],styles:["[_nghost-%COMP%]   .app[_ngcontent-%COMP%]{position:relative}"]})}return n})();class mS{}class _S{}class Ac{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(u):this.headers.set(o,[u])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ac?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ac;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ac?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let u=this.headers.get(t);if(!u)return;u=u.filter(f=>-1===o.indexOf(f)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class TZ{encodeKey(e){return h6(e)}encodeValue(e){return h6(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const SZ=/%(\d[a-f0-9])/gi,PZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function h6(n){return encodeURIComponent(n).replace(SZ,(e,t)=>PZ[t]??e)}function yS(n){return`${n}`}class oh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new TZ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function DZ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[u,f]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],g=t.get(u)||[];g.push(f),t.set(u,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(yS):[yS(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new oh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(yS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(yS(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class xZ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function f6(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function p6(n){return typeof Blob<"u"&&n instanceof Blob}function g6(n){return typeof FormData<"u"&&n instanceof FormData}class I1{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function AZ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ac),this.context||(this.context=new xZ),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+u}}else this.params=new oh,this.urlWithParams=t}serializeBody(){return null===this.body?null:f6(this.body)||p6(this.body)||g6(this.body)||function OZ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof oh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||g6(this.body)?null:p6(this.body)?this.body.type||null:f6(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof oh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,y=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((M,S)=>M.set(S,e.setHeaders[S]),g)),e.setParams&&(y=Object.keys(e.setParams).reduce((M,S)=>M.set(S,e.setParams[S]),y)),new I1(t,r,o,{params:y,headers:g,context:b,reportProgress:f,responseType:i,withCredentials:u})}}var ev=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ev||{});class HN{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ac,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class zN extends HN{constructor(e={}){super(e),this.type=ev.ResponseHeader}clone(e={}){return new zN({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class tv extends HN{constructor(e={}){super(e),this.type=ev.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new tv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class m6 extends HN{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function GN(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let kZ=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof I1)o=t;else{let g,y;g=i.headers instanceof Ac?i.headers:new Ac(i.headers),i.params&&(y=i.params instanceof oh?i.params:new oh({fromObject:i.params})),o=new I1(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=(0,ut.of)(o).pipe(Oo(g=>this.handler.handle(g)));if(t instanceof I1||"events"===i.observe)return u;const f=u.pipe(vr(g=>g instanceof tv));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return f.pipe((0,yt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,yt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,yt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe((0,yt.U)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new oh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,GN(i,r))}post(t,r,i={}){return this.request("POST",t,GN(i,r))}put(t,r,i={}){return this.request("PUT",t,GN(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(mS))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function v6(n,e){return e(n)}function RZ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const LZ=new c.OlP(""),b1=new c.OlP(""),C6=new c.OlP("");function UZ(){let n=null;return(e,t)=>{null===n&&(n=((0,c.f3M)(LZ,{optional:!0})??[]).reduceRight(RZ,v6));const r=(0,c.f3M)(c.HDt),i=r.add();return n(e,t).pipe(oc(()=>r.remove(i)))}}let w6=(()=>{class n extends mS{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,c.f3M)(c.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(b1),...this.injector.get(C6,[])]));this.chain=i.reduceRight((o,u)=>function FZ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,o=>n(o,i)))}(o,u,this.injector),v6)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(oc(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(_S),c.LFG(c.lqb))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const $Z=/^\)\]\}',?\n/;let b6=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new c.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,_n.D)(r.\u0275loadImpl()):(0,ut.of)(null)).pipe((0,Tn.w)(()=>new gi.y(o=>{const u=r.build();if(u.open(t.method,t.urlWithParams),t.withCredentials&&(u.withCredentials=!0),t.headers.forEach((Q,X)=>u.setRequestHeader(Q,X.join(","))),t.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Q=t.detectContentTypeHeader();null!==Q&&u.setRequestHeader("Content-Type",Q)}if(t.responseType){const Q=t.responseType.toLowerCase();u.responseType="json"!==Q?Q:"text"}const f=t.serializeBody();let g=null;const y=()=>{if(null!==g)return g;const Q=u.statusText||"OK",X=new Ac(u.getAllResponseHeaders()),Se=function HZ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(u)||t.url;return g=new zN({headers:X,status:u.status,statusText:Q,url:Se}),g},b=()=>{let{headers:Q,status:X,statusText:Se,url:ze}=y(),Ne=null;204!==X&&(Ne=typeof u.response>"u"?u.responseText:u.response),0===X&&(X=Ne?200:0);let Ye=X>=200&&X<300;if("json"===t.responseType&&"string"==typeof Ne){const gt=Ne;Ne=Ne.replace($Z,"");try{Ne=""!==Ne?JSON.parse(Ne):null}catch(Pt){Ne=gt,Ye&&(Ye=!1,Ne={error:Pt,text:Ne})}}Ye?(o.next(new tv({body:Ne,headers:Q,status:X,statusText:Se,url:ze||void 0})),o.complete()):o.error(new m6({error:Ne,headers:Q,status:X,statusText:Se,url:ze||void 0}))},M=Q=>{const{url:X}=y(),Se=new m6({error:Q,status:u.status||0,statusText:u.statusText||"Unknown Error",url:X||void 0});o.error(Se)};let S=!1;const R=Q=>{S||(o.next(y()),S=!0);let X={type:ev.DownloadProgress,loaded:Q.loaded};Q.lengthComputable&&(X.total=Q.total),"text"===t.responseType&&u.responseText&&(X.partialText=u.responseText),o.next(X)},Z=Q=>{let X={type:ev.UploadProgress,loaded:Q.loaded};Q.lengthComputable&&(X.total=Q.total),o.next(X)};return u.addEventListener("load",b),u.addEventListener("error",M),u.addEventListener("timeout",M),u.addEventListener("abort",M),t.reportProgress&&(u.addEventListener("progress",R),null!==f&&u.upload&&u.upload.addEventListener("progress",Z)),u.send(f),o.next({type:ev.Sent}),()=>{u.removeEventListener("error",M),u.removeEventListener("abort",M),u.removeEventListener("load",b),u.removeEventListener("timeout",M),t.reportProgress&&(u.removeEventListener("progress",R),null!==f&&u.upload&&u.upload.removeEventListener("progress",Z)),u.readyState!==u.DONE&&u.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(ws))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const ZN=new c.OlP("XSRF_ENABLED"),E6=new c.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),M6=new c.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class T6{}let ZZ=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ga(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ie),c.LFG(c.Lbi),c.LFG(E6))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function qZ(n,e){const t=n.url.toLowerCase();if(!(0,c.f3M)(ZN)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,c.f3M)(T6).getToken(),i=(0,c.f3M)(M6);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var ah=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(ah||{});function WZ(...n){const e=[kZ,b6,w6,{provide:mS,useExisting:w6},{provide:_S,useExisting:b6},{provide:b1,useValue:qZ,multi:!0},{provide:ZN,useValue:!0},{provide:T6,useClass:ZZ}];for(const t of n)e.push(...t.\u0275providers);return(0,c.MR2)(e)}const D6=new c.OlP("LEGACY_INTERCEPTOR_FN");function KZ(){return function _g(n,e){return{\u0275kind:n,\u0275providers:e}}(ah.LegacyInterceptors,[{provide:D6,useFactory:UZ},{provide:b1,useExisting:D6,multi:!0}])}let YZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({providers:[WZ(KZ())]})}return n})();class qN{constructor(e){return e}}class CS{constructor(){return ks("auth")}}const WN=new c.OlP("angularfire2.auth-instances");function rq(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new qN(r)}}const iq={provide:CS,deps:[[new c.FiY,WN]]},sq={provide:qN,useFactory:function nq(n,e){const t=Rl("auth",n,e);return t&&new qN(t)},deps:[[new c.FiY,WN],su]};let oq=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Nl.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[sq,iq]}),n})();function aq(n,...e){return{ngModule:oq,providers:[{provide:WN,useFactory:rq(n),multi:!0,deps:[c.R0b,c.zs3,Fl,Qy,[new c.FiY,dg],...e]}]}}const cq=Pd(r5.o,!0);class KN{constructor(e){return e}}const P6="firestore",YN=new c.OlP("angularfire2.firestore-instances");function dq(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new KN(r)}}const hq={provide:class lq{constructor(){return ks(P6)}},deps:[[new c.FiY,YN]]},fq={provide:KN,useFactory:function uq(n,e){const t=Rl(P6,n,e);return t&&new KN(t)},deps:[[new c.FiY,YN],su]};let pq=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Nl.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[fq,hq]}),n})();function gq(n,...e){return{ngModule:pq,providers:[{provide:YN,useFactory:dq(n),multi:!0,deps:[c.R0b,c.zs3,Fl,Qy,[new c.FiY,CS],[new c.FiY,dg],...e]}]}}const mq=Pd(b8,!0),x6="@firebase/database";let QN="";class yq{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,z.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class vq{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const O6=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yq(e)}}catch{}return new vq},yg=O6("localStorage"),JN=O6("sessionStorage"),nv=new ki.Yd("@firebase/database"),k6=function(){let n=1;return function(){return n++}}(),N6=function(n){const e=(0,z.dS)(n),t=new z.gQ;t.update(e);const r=t.digest();return z.US.encodeByteArray(r)},E1=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=E1.apply(null,r):e+="object"==typeof r?(0,z.Wl)(r):r,e+=" "}return e};let vg=null,R6=!0;const Ei=function(...n){if(!0===R6&&(R6=!1,null===vg&&!0===JN.get("logging_enabled")&&function(n,e){(0,z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(nv.logLevel=ki.in.VERBOSE,vg=nv.log.bind(nv),e&&JN.set("logging_enabled",!0)):"function"==typeof n?vg=n:(vg=null,JN.remove("logging_enabled"))}(!0)),vg){const e=E1.apply(null,n);vg(e)}},M1=function(n){return function(...e){Ei(n,...e)}},XN=function(...n){const e="FIREBASE INTERNAL ERROR: "+E1(...n);nv.error(e)},Oc=function(...n){const e=`FIREBASE FATAL ERROR: ${E1(...n)}`;throw nv.error(e),new Error(e)},rs=function(...n){const e="FIREBASE WARNING: "+E1(...n);nv.warn(e)},wS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ch="[MIN_NAME]",cu="[MAX_NAME]",Cg=function(n,e){if(n===e)return 0;if(n===ch||e===cu)return-1;if(e===ch||n===cu)return 1;{const t=B6(n),r=B6(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Iq=function(n,e){return n===e?0:n<e?-1:1},T1=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,z.Wl)(e))},eR=function(n){if("object"!=typeof n||null===n)return(0,z.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,z.Wl)(e[r]),t+=":",t+=eR(n[e[r]]);return t+="}",t},L6=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const U6=function(n){(0,z.hu)(!wS(n),"Invalid JSON number");const r=1023;let i,o,u,f,g;0===n?(o=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=f+r,u=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(o=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(g=11;g;g-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const b=y.join("");let M="";for(g=0;g<64;g+=8){let S=parseInt(b.substr(g,8),2).toString(16);1===S.length&&(S="0"+S),M+=S}return M.toLowerCase()},Tq=new RegExp("^-?(0*)\\d{1,10}$"),B6=function(n){if(Tq.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},rv=function(n){try{n()}catch(e){setTimeout(()=>{throw rs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},D1=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class xq{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){rs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Aq{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ei("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rs(e)}}let S1=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const z6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,q6="websocket",W6="long_polling";class nR{constructor(e,t,r,i,o=!1,u="",f=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function K6(n,e,t){let r;if((0,z.hu)("string"==typeof e,"typeof type must == string"),(0,z.hu)("object"==typeof t,"typeof params must == object"),e===q6)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==W6)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Oq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Mi(t,(o,u)=>{i.push(o+"="+u)}),r+i.join("&")}class kq{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,z.p$)(this.counters_)}}const rR={},iR={};function sR(n){const e=n.toString();return rR[e]||(rR[e]=new kq),rR[e]}class Rq{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&rv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class lh{constructor(e,t,r,i,o,u,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=M1(e),this.stats_=sR(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),K6(t,W6,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Rq(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new oR((...o)=>{const[u,f,g,y,b]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=f,this.password=g;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[u,f]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&z6.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){lh.forceAllow_=!0}static forceDisallow(){lh.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!lh.forceAllow_&&(lh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,z.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,z.h$)(t),i=L6(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,z.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class oR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=k6(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=oR.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){Ei("frame writing exception"),f.stack&&Ei(f.stack),Ei(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ei("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ei("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let bS=null;typeof MozWebSocket<"u"?bS=MozWebSocket:typeof WebSocket<"u"&&(bS=WebSocket);let iv=(()=>{class n{constructor(t,r,i,o,u,f,g){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=M1(this.connId),this.stats_=sR(r),this.connURL=n.connectionURL_(r,f,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,u){const f={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&z6.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),o&&(f.ac=o),u&&(f.p=u),K6(t,q6,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yg.set("previous_websocket_failure",!0);try{let i;if((0,z.Yr)()){i={headers:{"User-Agent":`Firebase/5/${QN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,f=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new bS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==bS&&!n.forceDisallow_}static previouslyFailed(){return yg.isInMemoryStorage||!0===yg.get("previous_websocket_failure")}markConnectionHealthy(){yg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,z.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=L6(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),nB=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[lh,iv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=iv&&iv.isAvailable();let i=r&&!iv.previouslyFailed();if(t.webSocketOnly&&(r||rs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[iv];else{const o=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class lB{constructor(e,t,r,i,o,u,f,g,y,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=M1("c:"+this.id+":"),this.transportManager_=new nB(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=D1(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=T1("t",e),r=T1("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=T1("t",e),r=T1("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=T1("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?XN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):XN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&rs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),D1(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):D1(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class uB{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class dB{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ES extends dB{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ES}getInitialEvent(e){return(0,z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function un(){return new Cn("")}function $t(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function uh(n){return n.pieces_.length-n.pieceNum_}function kn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Cn(n.pieces_,e)}function cR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function P1(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function pB(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Cn(e,0)}function rr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Cn(t,0)}function Ht(n){return n.pieceNum_>=n.pieces_.length}function ms(n,e){const t=$t(n),r=$t(e);if(null===t)return e;if(t===r)return ms(kn(n),kn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function lR(n,e){if(uh(n)!==uh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ia(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(uh(n)>uh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class iW{constructor(e,t){this.errorPrefix_=t,this.parts_=P1(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,z.ug)(this.parts_[r]);gB(this)}}function gB(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wg(n))}function wg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class uR extends dB{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new uR}getInitialEvent(e){return(0,z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const x1=1e3;let TS,Ig=(()=>{class n extends uB{constructor(t,r,i,o,u,f,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=M1("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=x1,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");uR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ES.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,u={r:o,a:t,b:r};this.log_((0,z.Wl)(u)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new z.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const g=f.d;"ok"===f.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const g={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(f).set(u,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,g=>{const y=g.d,b=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",g),"ok"!==b&&this.removeListen_(i,o),t.onComplete&&t.onComplete(b,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,z.r3)(t,"w")){const i=(0,z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();rs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const u=o.s,f=o.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const u={p:t};o&&(u.q=i,u.t=o),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,u){this.initConnection_();const f={p:r,d:i};void 0!==u&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,z.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):XN("Unrecognized action received from server: "+(0,z.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=x1,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=x1,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=x1),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,N.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let g=!1,y=null;const b=function(){y?y.close():(g=!0,o())};t.realtime_={close:b,sendRequest:function(R){(0,z.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(R)}};const S=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[R,Z]=yield Promise.all([t.authTokenProvider_.getToken(S),t.appCheckTokenProvider_.getToken(S)]);g?Ei("getToken() completed but was canceled"):(Ei("getToken() completed. Creating connection."),t.authToken_=R&&R.accessToken,t.appCheckToken_=Z&&Z.token,y=new lB(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,Q=>{rs(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(R){t.log_("Failed to get token: "+R),g||(t.repoInfo_.nodeAdmin&&rs(R),b())}}})()}interrupt(t){Ei("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ei("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=x1,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>eR(u)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Cn(t).toString();let o;if(this.listens.has(i)){const u=this.listens.get(i);o=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Ei("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ei("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+QN.replace(/\./g,"-")]=1,(0,z.uI)()?t["framework.cordova"]=1:(0,z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ES.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Wt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Wt(e,t)}}class MS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Wt(ch,e),i=new Wt(ch,t);return 0!==this.compare(r,i)}minPost(){return Wt.MIN}}class yB extends MS{static get __EMPTY_NODE(){return TS}static set __EMPTY_NODE(e){TS=e}compare(e,t){return Cg(e.name,t.name)}isDefinedOn(e){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Wt.MIN}maxPost(){return new Wt(cu,TS)}makePost(e,t){return(0,z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Wt(e,TS)}toString(){return".key"}}const kc=new yB;class DS{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let hR,Ba=(()=>{class n{constructor(t,r,i,o,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Us.EMPTY_NODE,this.right=u??Us.EMPTY_NODE}copy(t,r,i,o,u){return new n(t??this.key,r??this.value,i??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const u=i(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===u?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Us.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Us.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Us{constructor(e,t=Us.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Us(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ba.BLACK,null,null))}remove(e){return new Us(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ba.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new DS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new DS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new DS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new DS(this.root_,null,this.comparator_,!0,e)}}function hW(n,e){return Cg(n.name,e.name)}function dR(n,e){return Cg(n,e)}Us.EMPTY_NODE=new class dW{copy(e,t,r,i,o){return this}insert(e,t,r){return new Ba(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const vB=function(n){return"number"==typeof n?"number:"+U6(n):"string:"+n},CB=function(n){if(n.isLeafNode()){const e=n.val();(0,z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,z.hu)(n===hR||n.isEmpty(),"priority of unexpected type.");(0,z.hu)(n===hR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let wB,IB,bB,sv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),CB(this.priorityNode_)}static set __childrenNodeConstructor(t){wB=t}static get __childrenNodeConstructor(){return wB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ht(t)?this:".priority"===$t(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=$t(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,z.hu)(".priority"!==i||1===uh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(kn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+vB(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?U6(this.value_):this.value_,this.lazyHash_=N6(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,z.hu)(o>=0,"Unknown leaf type: "+r),(0,z.hu)(u>=0,"Unknown leaf type: "+i),o===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Hn=new class mW extends MS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Cg(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Wt.MIN}maxPost(){return new Wt(cu,new sv("[PRIORITY-POST]",bB))}makePost(e,t){const r=IB(e);return new Wt(t,new sv("[PRIORITY-POST]",r))}toString(){return".priority"}},_W=Math.log(2);class yW{constructor(e){this.count=parseInt(Math.log(e+1)/_W,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const SS=function(n,e,t,r){n.sort(e);const i=function(g,y){const b=y-g;let M,S;if(0===b)return null;if(1===b)return M=n[g],S=t?t(M):M,new Ba(S,M.node,Ba.BLACK,null,null);{const R=parseInt(b/2,10)+g,Z=i(g,R),Q=i(R+1,y);return M=n[R],S=t?t(M):M,new Ba(S,M.node,Ba.BLACK,Z,Q)}},f=function(g){let y=null,b=null,M=n.length;const S=function(Z,Q){const X=M-Z,Se=M;M-=Z;const ze=i(X+1,Se),Ne=n[X],Ye=t?t(Ne):Ne;R(new Ba(Ye,Ne.node,Q,null,ze))},R=function(Z){y?(y.left=Z,y=Z):(b=Z,y=Z)};for(let Z=0;Z<g.count;++Z){const Q=g.nextBitIsOne(),X=Math.pow(2,g.count-(Z+1));Q?S(X,Ba.BLACK):(S(X,Ba.BLACK),S(X,Ba.RED))}return b}(new yW(n.length));return new Us(r||e,f)};let fR;const ov={};class lu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,z.hu)(ov&&Hn,"ChildrenNode.ts has not been loaded"),fR=fR||new lu({".priority":ov},{".priority":Hn}),fR}get(e){const t=(0,z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Us?t:null}hasIndex(e){return(0,z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,z.hu)(e!==kc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Wt.Wrap);let f,u=o.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=o.getNext();f=i?SS(r,e.getCompare()):ov;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const b=Object.assign({},this.indexes_);return b[g]=f,new lu(b,y)}addToIndexes(e,t){const r=(0,z.UI)(this.indexes_,(i,o)=>{const u=(0,z.DV)(this.indexSet_,o);if((0,z.hu)(u,"Missing index implementation for "+o),i===ov){if(u.isDefinedOn(e.node)){const f=[],g=t.getIterator(Wt.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&f.push(y),y=g.getNext();return f.push(e),SS(f,u.getCompare())}return ov}{const f=t.get(e.name);let g=i;return f&&(g=g.remove(new Wt(e.name,f))),g.insert(e,e.node)}});return new lu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,z.UI)(this.indexes_,i=>{if(i===ov)return i;{const o=t.get(e.name);return o?i.remove(new Wt(e.name,o)):i}});return new lu(r,this.indexSet_)}}let A1,Ot=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&CB(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return A1||(A1=new n(new Us(dR),null,lu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||A1}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?A1:r}}getChild(t){const r=$t(t);return null===r?this:this.getImmediateChild(r).getChild(kn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Wt(t,r);let o,u;r.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const f=o.isEmpty()?A1:this.priorityNode_;return new n(o,f,u)}}updateChild(t,r){const i=$t(t);if(null===i)return r;{(0,z.hu)(".priority"!==$t(t)||1===uh(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(kn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,u=!0;if(this.forEachChild(Hn,(f,g)=>{r[f]=g.val(t),i++,u&&n.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):u=!1}),!t&&u&&o<2*i){const f=[];for(const g in r)f[g]=r[g];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+vB(this.getPriority().val())+":"),this.forEachChild(Hn,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":N6(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const u=o.getPredecessorKey(new Wt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Wt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Wt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Wt.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Wt.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===O1?-1:0}withIndex(t){if(t===kc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===kc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Hn),o=r.getIterator(Hn);let u=i.getNext(),f=o.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=i.getNext(),f=o.getNext()}return null===u&&null===f}return!1}return!1}}resolveIndex_(t){return t===kc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const O1=new class vW extends Ot{constructor(){super(new Us(dR),Ot.EMPTY_NODE,lu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ot.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Wt,{MIN:{value:new Wt(ch,Ot.EMPTY_NODE)},MAX:{value:new Wt(cu,O1)}}),yB.__EMPTY_NODE=Ot.EMPTY_NODE,sv.__childrenNodeConstructor=Ot,function fW(n){hR=n}(O1),function gW(n){bB=n}(O1);const CW=!0;function fr(n,e=null){if(null===n)return Ot.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new sv(n,fr(e));if(n instanceof Array||!CW){let t=Ot.EMPTY_NODE;return Mi(n,(r,i)=>{if((0,z.r3)(n,r)&&"."!==r.substring(0,1)){const o=fr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(fr(e))}{const t=[];let r=!1;if(Mi(n,(u,f)=>{if("."!==u.substring(0,1)){const g=fr(f);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new Wt(u,g)))}}),0===t.length)return Ot.EMPTY_NODE;const o=SS(t,hW,u=>u.name,dR);if(r){const u=SS(t,Hn.getCompare());return new Ot(o,fr(e),new lu({".priority":u},{".priority":Hn}))}return new Ot(o,fr(e),lu.Default)}}!function pW(n){IB=n}(fr);class pR extends MS{constructor(e){super(),this.indexPath_=e,(0,z.hu)(!Ht(e)&&".priority"!==$t(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Cg(e.name,t.name):o}makePost(e,t){const r=fr(e),i=Ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new Wt(t,i)}maxPost(){const e=Ot.EMPTY_NODE.updateChild(this.indexPath_,O1);return new Wt(cu,e)}toString(){return P1(this.indexPath_,0).join("/")}}const gR=new class wW extends MS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Cg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Wt.MIN}maxPost(){return Wt.MAX}makePost(e,t){const r=fr(e);return new Wt(t,r)}toString(){return".value"}};function N1(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class _R{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Hn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ch}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Hn}copy(){const e=new _R;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function MB(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Hn?t="$priority":n.index_===gR?t="$value":n.index_===kc?t="$key":((0,z.hu)(n.index_ instanceof pR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,z.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,z.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,z.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function TB(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Hn&&(e.i=n.index_.toString()),e}class xS extends uB{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=M1("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=xS.getListenId_(e,r),f={};this.listens_[u]=f;const g=MB(e._queryParams);this.restRequest_(o+".json",g,(y,b)=>{let M=b;if(404===y&&(M=null,y=null),null===y&&this.onDataUpdate_(o,M,!1,r),(0,z.DV)(this.listens_,u)===f){let S;S=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(S,null)}})}unlisten(e,t){const r=xS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=MB(e._queryParams),r=e._path.toString(),i=new z.BH;return this.restRequest_(r+".json",t,(o,u)=>{let f=u;404===o&&(f=null,o=null),null===o?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,z.xO)(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let g=null;if(f.status>=200&&f.status<300){try{g=(0,z.cI)(f.responseText)}catch{rs("Failed to parse JSON response for "+u+": "+f.responseText)}r(null,g)}else 401!==f.status&&404!==f.status&&rs("Got unsuccessful REST response for "+u+" Status: "+f.status),r(f.status);r=null}},f.open("GET",u,!0),f.send()})}}class PW{constructor(){this.rootNode_=Ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function AS(){return{value:null,children:new Map}}function cv(n,e,t){if(Ht(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=$t(e);n.children.has(r)||n.children.set(r,AS()),cv(n.children.get(r),e=kn(e),t)}}function wR(n,e,t){null!==n.value?t(e,n.value):function xW(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{wR(i,new Cn(e.toString()+"/"+r),t)})}class AW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class NW{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new AW(e);const r=1e4+2e4*Math.random();D1(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Mi(e,(i,o)=>{o>0&&(0,z.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),D1(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Nc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Nc||{});function ER(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class OS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Nc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ht(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Cn(e));return new OS(un(),t,this.revert)}}return(0,z.hu)($t(this.path)===e,"operationForChild called for unrelated child."),new OS(kn(this.path),this.affectedTree,this.revert)}}class bg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Nc.OVERWRITE}operationForChild(e){return Ht(this.path)?new bg(this.source,un(),this.snap.getImmediateChild(e)):new bg(this.source,kn(this.path),this.snap)}}class lv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Nc.MERGE}operationForChild(e){if(Ht(this.path)){const t=this.children.subtree(new Cn(e));return t.isEmpty()?null:t.value?new bg(this.source,un(),t.value):new lv(this.source,un(),t)}return(0,z.hu)($t(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new lv(this.source,kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class dh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ht(e))return this.isFullyInitialized()&&!this.filtered_;const t=$t(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function L1(n,e,t,r,i,o){const u=r.filter(f=>f.type===t);u.sort((f,g)=>function UW(n,e,t){if(null==e.childName||null==t.childName)throw(0,z.g5)("Should only compare child_ events.");const r=new Wt(e.childName,e.snapshotNode),i=new Wt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,g)),u.forEach(f=>{const g=function LW(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,o);i.forEach(y=>{y.respondsTo(f.type)&&e.push(y.createEvent(g,n.query_))})})}function kS(n,e){return{eventCache:n,serverCache:e}}function U1(n,e,t,r){return kS(new dh(e,t,r),n.serverCache)}function SB(n,e,t,r){return kS(n.eventCache,new dh(e,t,r))}function NS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Eg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let MR;class zn{constructor(e,t=(()=>(MR||(MR=new Us(Iq)),MR))()){this.value=e,this.children=t}static fromObject(e){let t=new zn(null);return Mi(e,(r,i)=>{t=t.set(new Cn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:un(),value:this.value};if(Ht(e))return null;{const r=$t(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(kn(e),t);return null!=o?{path:rr(new Cn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ht(e))return this;{const t=$t(e),r=this.children.get(t);return null!==r?r.subtree(kn(e)):new zn(null)}}set(e,t){if(Ht(e))return new zn(t,this.children);{const r=$t(e),o=(this.children.get(r)||new zn(null)).set(kn(e),t),u=this.children.insert(r,o);return new zn(this.value,u)}}remove(e){if(Ht(e))return this.children.isEmpty()?new zn(null):new zn(null,this.children);{const t=$t(e),r=this.children.get(t);if(r){const i=r.remove(kn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new zn(null):new zn(this.value,o)}return this}}get(e){if(Ht(e))return this.value;{const t=$t(e),r=this.children.get(t);return r?r.get(kn(e)):null}}setTree(e,t){if(Ht(e))return t;{const r=$t(e),o=(this.children.get(r)||new zn(null)).setTree(kn(e),t);let u;return u=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new zn(this.value,u)}}fold(e){return this.fold_(un(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(rr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,un(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Ht(e))return null;{const o=$t(e),u=this.children.get(o);return u?u.findOnPath_(kn(e),rr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,un(),t)}foreachOnPath_(e,t,r){if(Ht(e))return this;{this.value&&r(t,this.value);const i=$t(e),o=this.children.get(i);return o?o.foreachOnPath_(kn(e),rr(t,i),r):new zn(null)}}foreach(e){this.foreach_(un(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(rr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Va{constructor(e){this.writeTree_=e}static empty(){return new Va(new zn(null))}}function B1(n,e,t){if(Ht(e))return new Va(new zn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const u=ms(i,e);return o=o.updateChild(u,t),new Va(n.writeTree_.set(i,o))}{const i=new zn(t),o=n.writeTree_.setTree(e,i);return new Va(o)}}}function TR(n,e,t){let r=n;return Mi(t,(i,o)=>{r=B1(r,rr(e,i),o)}),r}function PB(n,e){if(Ht(e))return Va.empty();{const t=n.writeTree_.setTree(e,new zn(null));return new Va(t)}}function DR(n,e){return null!=Mg(n,e)}function Mg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ms(t.path,e)):null}function xB(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Hn,(r,i)=>{e.push(new Wt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Wt(r,i.value))}),e}function hh(n,e){if(Ht(e))return n;{const t=Mg(n,e);return new Va(null!=t?new zn(t):n.writeTree_.subtree(e))}}function SR(n){return n.writeTree_.isEmpty()}function uv(n,e){return AB(un(),n.writeTree_,e)}function AB(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,z.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=AB(rr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(rr(n,".priority"),r)),t}}function RS(n,e){return FB(e,n)}function zW(n,e){if(n.snap)return ia(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ia(rr(n.path,t),e))return!0;return!1}function ZW(n){return n.visible}function OB(n,e,t){let r=Va.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const u=o.path;let f;if(o.snap)ia(t,u)?(f=ms(t,u),r=B1(r,f,o.snap)):ia(u,t)&&(f=ms(u,t),r=B1(r,un(),o.snap.getChild(f)));else{if(!o.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(ia(t,u))f=ms(t,u),r=TR(r,f,o.children);else if(ia(u,t))if(f=ms(u,t),Ht(f))r=TR(r,un(),o.children);else{const g=(0,z.DV)(o.children,$t(f));if(g){const y=g.getChild(kn(f));r=B1(r,un(),y)}}}}}return r}function kB(n,e,t,r,i){if(r||i){const o=hh(n.visibleWrites,e);return!i&&SR(o)?t:i||null!=t||DR(o,un())?uv(OB(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(ia(y.path,e)||ia(e,y.path))},e),t||Ot.EMPTY_NODE):null}{const o=Mg(n.visibleWrites,e);if(null!=o)return o;{const u=hh(n.visibleWrites,e);return SR(u)?t:null!=t||DR(u,un())?uv(u,t||Ot.EMPTY_NODE):null}}}function FS(n,e,t,r){return kB(n.writeTree,n.treePath,e,t,r)}function PR(n,e){return function qW(n,e,t){let r=Ot.EMPTY_NODE;const i=Mg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Hn,(o,u)=>{r=r.updateImmediateChild(o,u)}),r;if(t){const o=hh(n.visibleWrites,e);return t.forEachChild(Hn,(u,f)=>{const g=uv(hh(o,new Cn(u)),f);r=r.updateImmediateChild(u,g)}),xB(o).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return xB(hh(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function NB(n,e,t,r){return function WW(n,e,t,r,i){(0,z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=rr(e,t);if(DR(n.visibleWrites,o))return null;{const u=hh(n.visibleWrites,o);return SR(u)?i.getChild(t):uv(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function LS(n,e){return function YW(n,e){return Mg(n.visibleWrites,e)}(n.writeTree,rr(n.treePath,e))}function xR(n,e,t){return function KW(n,e,t,r){const i=rr(e,t),o=Mg(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?uv(hh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function RB(n,e){return FB(rr(n.treePath,e),n.writeTree)}function FB(n,e){return{treePath:n,writeTree:e}}class eK{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,N1(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,function k1(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,function av(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,N1(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const LB=new class tK{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class AR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new dh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Eg(this.viewCache_),o=function XW(n,e,t,r,i,o){return function QW(n,e,t,r,i,o,u){let f;const g=hh(n.visibleWrites,e),y=Mg(g,un());if(null!=y)f=y;else{if(null==t)return[];f=uv(g,t)}if(f=f.withIndex(u),f.isEmpty()||f.isLeafNode())return[];{const b=[],M=u.getCompare(),S=o?f.getReverseIteratorFrom(r,u):f.getIteratorFrom(r,u);let R=S.getNext();for(;R&&b.length<i;)0!==M(R,r)&&b.push(R),R=S.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function UB(n,e,t,r,i,o){const u=e.eventCache;if(null!=LS(r,t))return e;{let f,g;if(Ht(t))if((0,z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Eg(e),M=PR(r,y instanceof Ot?y:Ot.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),M,o)}else{const y=FS(r,Eg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=$t(t);if(".priority"===y){(0,z.hu)(1===uh(t),"Can't have a priority with additional path components");const b=u.getNode();g=e.serverCache.getNode();const M=NB(r,t,b,g);f=null!=M?n.filter.updatePriority(b,M):u.getNode()}else{const b=kn(t);let M;if(u.isCompleteForChild(y)){g=e.serverCache.getNode();const S=NB(r,t,u.getNode(),g);M=null!=S?u.getNode().getImmediateChild(y).updateChild(b,S):u.getNode().getImmediateChild(y)}else M=xR(r,y,e.serverCache);f=null!=M?n.filter.updateChild(u.getNode(),y,M,b,i,o):u.getNode()}}return U1(e,f,u.isFullyInitialized()||Ht(t),n.filter.filtersNodes())}}function US(n,e,t,r,i,o,u,f){const g=e.serverCache;let y;const b=u?n.filter:n.filter.getIndexedFilter();if(Ht(t))y=b.updateFullNode(g.getNode(),r,null);else if(b.filtersNodes()&&!g.isFiltered()){const R=g.getNode().updateChild(t,r);y=b.updateFullNode(g.getNode(),R,null)}else{const R=$t(t);if(!g.isCompleteForPath(t)&&uh(t)>1)return e;const Z=kn(t),X=g.getNode().getImmediateChild(R).updateChild(Z,r);y=".priority"===R?b.updatePriority(g.getNode(),X):b.updateChild(g.getNode(),R,X,Z,LB,null)}const M=SB(e,y,g.isFullyInitialized()||Ht(t),b.filtersNodes());return UB(n,M,t,i,new AR(i,M,o),f)}function OR(n,e,t,r,i,o,u){const f=e.eventCache;let g,y;const b=new AR(i,e,o);if(Ht(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),g=U1(e,y,!0,n.filter.filtersNodes());else{const M=$t(t);if(".priority"===M)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=U1(e,y,f.isFullyInitialized(),f.isFiltered());else{const S=kn(t),R=f.getNode().getImmediateChild(M);let Z;if(Ht(S))Z=r;else{const Q=b.getCompleteChild(M);Z=null!=Q?".priority"===cR(S)&&Q.getChild(pB(S)).isEmpty()?Q:Q.updateChild(S,r):Ot.EMPTY_NODE}g=R.equals(Z)?e:U1(e,n.filter.updateChild(f.getNode(),M,Z,S,b,u),f.isFullyInitialized(),n.filter.filtersNodes())}}return g}function BB(n,e){return n.eventCache.isCompleteForChild(e)}function VB(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kR(n,e,t,r,i,o,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=Ht(t)?r:new zn(null).setTree(t,r);const b=e.serverCache.getNode();return y.children.inorderTraversal((M,S)=>{if(b.hasChild(M)){const Z=VB(0,e.serverCache.getNode().getImmediateChild(M),S);g=US(n,g,new Cn(M),Z,i,o,u,f)}}),y.children.inorderTraversal((M,S)=>{const R=!e.serverCache.isCompleteForChild(M)&&null===S.value;if(!b.hasChild(M)&&!R){const Q=VB(0,e.serverCache.getNode().getImmediateChild(M),S);g=US(n,g,new Cn(M),Q,i,o,u,f)}}),g}function fK(n,e){const t=Eg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ht(e)&&!t.getImmediateChild($t(e)).isEmpty())?t.getChild(e):null}function HB(n,e,t,r){e.type===Nc.MERGE&&null!==e.source.queryId&&((0,z.hu)(Eg(n.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(NS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function iK(n,e,t,r,i){const o=new eK;let u,f;if(t.type===Nc.OVERWRITE){const y=t;y.source.fromUser?u=OR(n,e,y.path,y.snap,r,i,o):((0,z.hu)(y.source.fromServer,"Unknown source."),f=y.source.tagged||e.serverCache.isFiltered()&&!Ht(y.path),u=US(n,e,y.path,y.snap,r,i,f,o))}else if(t.type===Nc.MERGE){const y=t;y.source.fromUser?u=function oK(n,e,t,r,i,o,u){let f=e;return r.foreach((g,y)=>{const b=rr(t,g);BB(e,$t(b))&&(f=OR(n,f,b,y,i,o,u))}),r.foreach((g,y)=>{const b=rr(t,g);BB(e,$t(b))||(f=OR(n,f,b,y,i,o,u))}),f}(n,e,y.path,y.children,r,i,o):((0,z.hu)(y.source.fromServer,"Unknown source."),f=y.source.tagged||e.serverCache.isFiltered(),u=kR(n,e,y.path,y.children,r,i,f,o))}else if(t.type===Nc.ACK_USER_WRITE){const y=t;u=y.revert?function lK(n,e,t,r,i,o){let u;if(null!=LS(r,t))return e;{const f=new AR(r,e,i),g=e.eventCache.getNode();let y;if(Ht(t)||".priority"===$t(t)){let b;if(e.serverCache.isFullyInitialized())b=FS(r,Eg(e));else{const M=e.serverCache.getNode();(0,z.hu)(M instanceof Ot,"serverChildren would be complete if leaf node"),b=PR(r,M)}y=n.filter.updateFullNode(g,b,o)}else{const b=$t(t);let M=xR(r,b,e.serverCache);null==M&&e.serverCache.isCompleteForChild(b)&&(M=g.getImmediateChild(b)),y=null!=M?n.filter.updateChild(g,b,M,kn(t),f,o):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(g,b,Ot.EMPTY_NODE,kn(t),f,o):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=FS(r,Eg(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,o)))}return u=e.serverCache.isFullyInitialized()||null!=LS(r,un()),U1(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,o):function aK(n,e,t,r,i,o,u){if(null!=LS(i,t))return e;const f=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(Ht(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return US(n,e,t,g.getNode().getChild(t),i,o,f,u);if(Ht(t)){let y=new zn(null);return g.getNode().forEachChild(kc,(b,M)=>{y=y.set(new Cn(b),M)}),kR(n,e,t,y,i,o,f,u)}return e}{let y=new zn(null);return r.foreach((b,M)=>{const S=rr(t,b);g.isCompleteForPath(S)&&(y=y.set(b,g.getNode().getChild(S)))}),kR(n,e,t,y,i,o,f,u)}}(n,e,y.path,y.affectedTree,r,i,o)}else{if(t.type!==Nc.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+t.type);u=function cK(n,e,t,r,i){const o=e.serverCache;return UB(n,SB(e,o.getNode(),o.isFullyInitialized()||Ht(t),o.isFiltered()),t,r,LB,i)}(n,e,t.path,r,o)}const g=o.getChanges();return function sK(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=NS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(function EB(n){return{type:"value",snapshotNode:n}}(NS(e)))}}(e,u,g),{viewCache:u,changes:g}}(n.processor_,i,e,t,r);return function rK(n,e){(0,z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,z.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,function zB(n,e,t,r){return function FW(n,e,t,r){const i=[],o=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function IW(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),L1(n,i,"child_removed",e,r,t),L1(n,i,"child_added",e,r,t),L1(n,i,"child_moved",o,r,t),L1(n,i,"child_changed",e,r,t),L1(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,o.changes,o.viewCache.eventCache.getNode(),null)}let BS,jS;function NR(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,z.hu)(null!=o,"SyncTree gave us an op for an invalid query."),HB(o,e,t,r)}{let o=[];for(const u of n.views.values())o=o.concat(HB(u,e,t,r));return o}}function fh(n,e){let t=null;for(const r of n.views.values())t=t||fK(r,e);return t}class YB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zn(null),this.pendingWriteTree_=function JW(){return{visibleWrites:Va.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function RR(n,e,t,r,i){return function VW(n,e,t,r,i){(0,z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=B1(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?dv(n,new bg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function gh(n,e,t=!1){const r=function $W(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function HW(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&zW(f,r.path)?i=!1:ia(r.path,f.path)&&(o=!0)),u--}return!!i&&(o?(function GW(n){n.visibleWrites=OB(n.allWrites,ZW,un()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=PB(n.visibleWrites,r.path):Mi(r.children,g=>{n.visibleWrites=PB(n.visibleWrites,rr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let o=new zn(null);return null!=r.snap?o=o.set(un(),!0):Mi(r.children,u=>{o=o.set(new Cn(u),!0)}),dv(n,new OS(r.path,o,t))}return[]}function V1(n,e,t){return dv(n,new bg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function HS(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,f)=>{const y=fh(f,ms(u,e));if(y)return y});return kB(i,e,o,t,!0)}function dv(n,e){return JB(e,n.syncPointTree_,null,RS(n.pendingWriteTree_,un()))}function JB(n,e,t,r){if(Ht(n.path))return XB(n,e,t,r);{const i=e.get(un());null==t&&null!=i&&(t=fh(i,un()));let o=[];const u=$t(n.path),f=n.operationForChild(u),g=e.children.get(u);if(g&&f){const y=t?t.getImmediateChild(u):null,b=RB(r,u);o=o.concat(JB(f,g,y,b))}return i&&(o=o.concat(NR(i,n,r,t))),o}}function XB(n,e,t,r){const i=e.get(un());null==t&&null!=i&&(t=fh(i,un()));let o=[];return e.children.inorderTraversal((u,f)=>{const g=t?t.getImmediateChild(u):null,y=RB(r,u),b=n.operationForChild(u);b&&(o=o.concat(XB(b,f,g,y)))}),i&&(o=o.concat(NR(i,n,r,t))),o}function LR(n,e){return n.tagToQueryMap.get(e)}function UR(n){const e=n.indexOf("$");return(0,z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Cn(n.substr(0,e))}}function BR(n,e,t){const r=n.syncPointTree_.get(e);return(0,z.hu)(r,"Missing sync point for query tag that we're tracking"),NR(r,t,RS(n.pendingWriteTree_,e),null)}class VR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new VR(t)}node(){return this.node_}}class jR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=rr(this.path_,e);return new jR(this.syncTree_,t)}node(){return HS(this.syncTree_,this.path_)}}const NK=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},tV=function(n,e,t){return n&&"object"==typeof n?((0,z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?RK(n[".sv"],e,t):"object"==typeof n[".sv"]?FK(n[".sv"],e):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},RK=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,z.hu)(!1,"Unexpected server value: "+n)},FK=function(n,e,t){n.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,z.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},nV=function(n,e,t,r){return HR(e,new jR(t,n),r)},$R=function(n,e,t){return HR(n,new VR(e),t)};function HR(n,e,t){const r=n.getPriority().val(),i=tV(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,f=tV(u.getValue(),e,t);return f!==u.getValue()||i!==u.getPriority().val()?new sv(f,fr(i)):n}{const u=n;return o=u,i!==u.getPriority().val()&&(o=o.updatePriority(new sv(i))),u.forEachChild(Hn,(f,g)=>{const y=HR(g,e.getImmediateChild(f),t);y!==g&&(o=o.updateImmediateChild(f,y))}),o}}class zR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function GS(n,e){let t=e instanceof Cn?e:new Cn(e),r=n,i=$t(t);for(;null!==i;){const o=(0,z.DV)(r.node.children,i)||{children:{},childCount:0};r=new zR(i,r,o),t=kn(t),i=$t(t)}return r}function Tg(n){return n.node.value}function GR(n,e){n.node.value=e,ZR(n)}function rV(n){return n.node.childCount>0}function ZS(n,e){Mi(n.node.children,(t,r)=>{e(new zR(t,n,r))})}function iV(n,e,t,r){t&&!r&&e(n),ZS(n,i=>{iV(i,e,!0,r)}),t&&r&&e(n)}function H1(n){return new Cn(null===n.parent?n.name:H1(n.parent)+"/"+n.name)}function ZR(n){null!==n.parent&&function BK(n,e,t){const r=function LK(n){return void 0===Tg(n)&&!rV(n)}(t),i=(0,z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,ZR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,ZR(n))}(n.parent,n.name,n)}const VK=/[\[\].#$\/\u0000-\u001F\u007F]/,jK=/[\[\].#$\u0000-\u001F\u007F]/,qR=10485760,qS=function(n){return"string"==typeof n&&0!==n.length&&!VK.test(n)},G1=function(n,e,t){const r=t instanceof Cn?new iW(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+wg(r));if("function"==typeof e)throw new Error(n+"contains a function "+wg(r)+" with contents = "+e.toString());if(wS(e))throw new Error(n+"contains "+e.toString()+" "+wg(r));if("string"==typeof e&&e.length>qR/3&&(0,z.ug)(e)>qR)throw new Error(n+"contains a string greater than "+qR+" utf8 bytes "+wg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Mi(e,(u,f)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(o=!0,!qS(u)))throw new Error(n+" contains an invalid key ("+u+") "+wg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function sW(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,z.ug)(e),gB(n)})(r,u),G1(n,f,r),function oW(n){const e=n.parts_.pop();n.byteLength_-=(0,z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+wg(r)+" in addition to actual children.")}},aV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!qS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!jK.test(n)}(n)}(t))throw new Error((0,z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class GK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vo(n,e,t){(function WS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!lR(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function lV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(ZK(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>ia(r,e)||ia(e,r))}function ZK(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();vg&&Ei("event: "+t.toString()),rv(r)}}}const qK=25;class WK{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new GK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=AS(),this.transactionQueueTree_=new zR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dV(n){const t=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function q1(n){return NK({timestamp:dV(n)})}function hV(n,e,t,r,i){n.dataUpdateCount++;const o=new Cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const g=(0,z.UI)(t,y=>fr(y));u=function SK(n,e,t,r){const i=LR(n,r);if(i){const o=UR(i),u=o.path,f=o.queryId,g=ms(u,e),y=zn.fromObject(t);return BR(n,u,new lv(ER(f),g,y))}return[]}(n.serverSyncTree_,o,g,i)}else{const g=fr(t);u=function QB(n,e,t,r){const i=LR(n,r);if(null!=i){const o=UR(i),u=o.path,f=o.queryId,g=ms(u,e);return BR(n,u,new bg(ER(f),g,t))}return[]}(n.serverSyncTree_,o,g,i)}else if(r){const g=(0,z.UI)(t,y=>fr(y));u=function MK(n,e,t){const r=zn.fromObject(t);return dv(n,new lv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,g)}else{const g=fr(t);u=V1(n.serverSyncTree_,o,g)}let f=o;u.length>0&&(f=fv(n,o)),vo(n.eventQueue_,f,u)}function fV(n,e){YR(n,"connected",e),!1===e&&function XK(n){hv(n,"onDisconnectEvents");const e=q1(n),t=AS();wR(n.onDisconnect_,un(),(i,o)=>{const u=nV(i,o,n.serverSyncTree_,e);cv(t,i,u)});let r=[];wR(t,un(),(i,o)=>{r=r.concat(V1(n.serverSyncTree_,i,o));const u=function eF(n,e){const t=H1(mV(n,e)),r=GS(n.transactionQueueTree_,e);return function UK(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{tF(n,i)}),tF(n,r),iV(r,i=>{tF(n,i)}),t}(n,i);fv(n,u)}),n.onDisconnect_=AS(),vo(n.eventQueue_,un(),r)}(n)}function YR(n,e,t){const r=new Cn("/.info/"+e),i=fr(t);n.infoData_.updateSnapshot(r,i);const o=V1(n.infoSyncTree_,r,i);vo(n.eventQueue_,r,o)}function KS(n){return n.nextWriteId_++}function hv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ei(t,...e)}function XR(n,e,t){return HS(n.serverSyncTree_,e,t)||Ot.EMPTY_NODE}function YS(n,e=n.transactionQueueTree_){if(e||QS(n,e),Tg(e)){const t=_V(n,e);(0,z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function oY(n,e,t){const r=t.map(y=>y.currentWriteId),i=XR(n,e,r);let o=i;const u=i.hash();for(let y=0;y<t.length;y++){const b=t[y];(0,z.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const M=ms(e,b.path);o=o.updateChild(M,b.currentOutputSnapshotRaw)}const f=o.val(!0),g=e;n.server_.put(g.toString(),f,y=>{hv(n,"transaction put response",{path:g.toString(),status:y});let b=[];if("ok"===y){const M=[];for(let S=0;S<t.length;S++)t[S].status=2,b=b.concat(gh(n.serverSyncTree_,t[S].currentWriteId)),t[S].onComplete&&M.push(()=>t[S].onComplete(null,!0,t[S].currentOutputSnapshotResolved)),t[S].unwatcher();QS(n,GS(n.transactionQueueTree_,e)),YS(n,n.transactionQueueTree_),vo(n.eventQueue_,e,b);for(let S=0;S<M.length;S++)rv(M[S])}else{if("datastale"===y)for(let M=0;M<t.length;M++)t[M].status=3===t[M].status?4:0;else{rs("transaction at "+g.toString()+" failed: "+y);for(let M=0;M<t.length;M++)t[M].status=4,t[M].abortReason=y}fv(n,e)}},u)}(n,H1(e),t)}else rV(e)&&ZS(e,t=>{YS(n,t)})}function fv(n,e){const t=mV(n,e),r=H1(t);return function aY(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const g=e[f],y=ms(t,g.path);let M,b=!1;if((0,z.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)b=!0,M=g.abortReason,i=i.concat(gh(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=qK)b=!0,M="maxretry",i=i.concat(gh(n.serverSyncTree_,g.currentWriteId,!0));else{const S=XR(n,g.path,u);g.currentInputSnapshot=S;const R=e[f].update(S.val());if(void 0!==R){G1("transaction failed: Data returned ",R,g.path);let Z=fr(R);"object"==typeof R&&null!=R&&(0,z.r3)(R,".priority")||(Z=Z.updatePriority(S.getPriority()));const X=g.currentWriteId,Se=q1(n),ze=$R(Z,S,Se);g.currentOutputSnapshotRaw=Z,g.currentOutputSnapshotResolved=ze,g.currentWriteId=KS(n),u.splice(u.indexOf(X),1),i=i.concat(RR(n.serverSyncTree_,g.path,ze,g.currentWriteId,g.applyLocally)),i=i.concat(gh(n.serverSyncTree_,X,!0))}else b=!0,M="nodata",i=i.concat(gh(n.serverSyncTree_,g.currentWriteId,!0))}vo(n.eventQueue_,t,i),i=[],b&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===M?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(M),!1,null)))}QS(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)rv(r[f]);YS(n,n.transactionQueueTree_)}(n,_V(n,t),r),r}function mV(n,e){let t,r=n.transactionQueueTree_;for(t=$t(e);null!==t&&void 0===Tg(r);)r=GS(r,t),t=$t(e=kn(e));return r}function _V(n,e){const t=[];return yV(n,e,t),t.sort((r,i)=>r.order-i.order),t}function yV(n,e,t){const r=Tg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);ZS(e,i=>{yV(n,i,t)})}function QS(n,e){const t=Tg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,GR(e,t.length>0?t:void 0)}ZS(e,r=>{QS(n,r)})}function tF(n,e){const t=Tg(e);if(t){const r=[];let i=[],o=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,z.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):((0,z.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(gh(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?GR(e,void 0):t.length=o+1,vo(n.eventQueue_,H1(e),i);for(let u=0;u<r.length;u++)rv(r[u])}}const nF=function(n,e){const t=uY(n),r=t.namespace;return"firebase.com"===t.domain&&Oc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Oc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Cn(t.pathString)}},uY=function(n){let e="",t="",r="",i="",o="",u=!0,f="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(f=n.substring(0,y-1),n=n.substring(y+2));let b=n.indexOf("/");-1===b&&(b=n.length);let M=n.indexOf("?");-1===M&&(M=n.length),e=n.substring(0,Math.min(b,M)),b<M&&(i=function cY(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,M)));const S=function lY(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):rs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,M)));y=e.indexOf(":"),y>=0?(u="https"===f||"wss"===f,g=parseInt(e.substring(y+1),10)):y=e.length;const R=e.slice(0,y);if("localhost"===R.toLowerCase())t="localhost";else if(R.split(".").length<=2)t=R;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),o=r}"ns"in S&&(o=S.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:u,scheme:f,pathString:i,namespace:o}};class Co{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ht(this._path)?null:cR(this._path)}get ref(){return new ja(this._repo,this._path)}get _queryIdentifier(){const e=TB(this._queryParams),t=eR(e);return"{}"===t?"default":t}get _queryObject(){return TB(this._queryParams)}isEqual(e){if(!((e=(0,z.m9)(e))instanceof Co))return!1;const t=this._repo===e._repo,r=lR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function nW(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ja extends Co{constructor(e,t){super(e,t,new _R,!1)}get parent(){const e=pB(this._path);return null===e?null:new ja(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function mK(n){(0,z.hu)(!BS,"__referenceConstructor has already been defined"),BS=n})(ja),function wK(n){(0,z.hu)(!jS,"__referenceConstructor has already been defined"),jS=n}(ja);const iF={};class xY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function KK(n,e,t){if(n.stats_=sR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new xS(n.repoInfo_,(r,i,o,u)=>{hV(n,r,i,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fV(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ig(n.repoInfo_,e,(r,i,o,u)=>{hV(n,r,i,o,u)},r=>{fV(n,r)},r=>{!function YK(n,e){Mi(e,(t,r)=>{YR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Nq(n,e){const t=n.toString();return iR[t]||(iR[t]=e()),iR[t]}(n.repoInfo_,()=>new NW(n.stats_,n.server_)),n.infoData_=new PW,n.infoSyncTree_=new YB({startListening:(r,i,o,u)=>{let f=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(f=V1(n.infoSyncTree_,r._path,g),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),YR(n,"connected",!1),n.serverSyncTree_=new YB({startListening:(r,i,o,u)=>(n.server_.listen(r,o,i,(f,g)=>{const y=u(f,g);vo(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ja(this._repo,un())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function DY(n,e){const t=iF[e];(!t||t[n.key]!==n)&&Oc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function gV(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Oc("Cannot call "+e+" on a deleted database.")}}function AY(n=(0,Sn.getApp)(),e){const t=(0,Sn._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,z.P0)("database");r&&function OY(n,e,t,r={}){(n=(0,z.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Oc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Oc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new S1(S1.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,z.Sg)(r.mockUserToken,n.app.options.projectId);o=new S1(u)}!function MY(n,e,t,r){n.repoInfo_=new nR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(t,...r)}return t}Ig.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ig.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function kY(n){(function _q(n){QN=n})(Sn.SDK_VERSION),(0,Sn._registerComponent)(new Cr.wA("database",(e,{instanceIdentifier:t})=>function TY(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Oc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ei("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,u=nF(o,i),f=u.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,o=`http://${y}?ns=${f.namespace}`,u=nF(o,i),f=u.repoInfo):g=!u.repoInfo.secure;const b=i&&g?new S1(S1.OWNER):new Aq(n.name,n.options,e);aV("Invalid Firebase Database URL",u),Ht(u.path)||Oc("Database URL must point to the root of a Firebase Database (not including a child path).");const M=function SY(n,e,t,r){let i=iF[e.name];i||(i={},iF[e.name]=i);let o=i[n.toURLString()];return o&&Oc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new WK(n,!1,t,r),i[n.toURLString()]=o,o}(f,n,b,new xq(n.name,t));return new xY(M,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Sn.registerVersion)(x6,"0.14.4",n),(0,Sn.registerVersion)(x6,"0.14.4","esm2017")}();class sF{constructor(e){return e}}const DV="database",oF=new c.OlP("angularfire2.database-instances");function UY(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new sF(r)}}const BY={provide:class FY{constructor(){return ks(DV)}},deps:[[new c.FiY,oF]]},VY={provide:sF,useFactory:function LY(n,e){const t=Rl(DV,n,e);return t&&new sF(t)},deps:[[new c.FiY,oF],su]};let jY=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Nl.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[VY,BY]}),n})();function $Y(n,...e){return{ngModule:jY,providers:[{provide:oF,useFactory:UY(n),multi:!0,deps:[c.R0b,c.zs3,Fl,Qy,[new c.FiY,CS],[new c.FiY,dg],...e]}]}}const HY=Pd(AY,!0);class aF{constructor(e){return e}}const SV="messaging",cF=new c.OlP("angularfire2.messaging-instances");function ZY(n){return(e,t)=>{if(!hp.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new aF(r)}}const qY={provide:class zY{constructor(){return ks(SV)}},deps:[[new c.FiY,cF]]},WY={provide:aF,useFactory:function GY(n,e){if(!hp.sync())return null;const t=Rl(SV,n,e);return t&&new aF(t)},deps:[[new c.FiY,cF],su]};let KY=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Nl.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[WY,qY,{provide:c.ip1,useValue:hp.async,multi:!0}]}),n})();function YY(n,...e){return{ngModule:KY,providers:[{provide:cF,useFactory:ZY(n),multi:!0,deps:[c.R0b,c.zs3,Fl,Qy,...e]}]}}const QY=Pd(fM,!0),PV="firebasestorage.googleapis.com";class pr extends z.ZR{constructor(e,t,r=0){super(lF(e),`Firebase Storage: ${t} (${lF(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lF(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ir=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(ir||{});function lF(n){return"storage/"+n}function dF(n){return new pr(ir.INVALID_ARGUMENT,n)}function NV(){return new pr(ir.APP_DELETED,"The Firebase app was deleted.")}class _s{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=_s.makeFromUrl(e,t)}catch{return new _s(e,"")}if(""===r.path)return r;throw function aQ(n){return new pr(ir.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Ye){Ye.path_=decodeURIComponent(Ye.path)}const M=t.replace(/[.]/g,"\\."),Ne=[{regex:f,indices:{bucket:1,path:3},postModify:function o(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===PV?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ye=0;Ye<Ne.length;Ye++){const gt=Ne[Ye],Pt=gt.regex.exec(e);if(Pt){let Vs=Pt[gt.indices.path];Vs||(Vs=""),r=new _s(Pt[gt.indices.bucket],Vs),gt.postModify(r);break}}if(null==r)throw function oQ(n){return new pr(ir.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class fQ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function fF(n,e,t,r){if(r<e)throw dF(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dF(`Invalid value for '${n}'. Expected ${t} or less.`)}var gv=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(gv||{});class vQ{constructor(e,t,r,i,o,u,f,g,y,b,M,S=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=M,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,Z)=>{this.resolve_=R,this.reject_=Z,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,u=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());!function mQ(n){return void 0!==n}(g)?o():o(g)}catch(g){u(g)}else if(null!==f){const g=function uF(){return new pr(ir.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();g.serverResponse=f.getErrorText(),u(this.errorCallback_?this.errorCallback_(f,g):g)}else u(i.canceled?this.appDelete_?NV():function OV(){return new pr(ir.CANCELED,"User canceled the upload/download.")}():function AV(){return new pr(ir.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new nP(!1,null,!0)):this.backoffId_=function pQ(n,e,t){let r=1,i=null,o=null,u=!1,f=0;function g(){return 2===f}let y=!1;function b(...X){y||(y=!0,e.apply(null,X))}function M(X){i=setTimeout(()=>{i=null,n(R,g())},X)}function S(){o&&clearTimeout(o)}function R(X,...Se){if(y)return void S();if(X)return S(),void b.call(null,X,...Se);if(g()||u)return S(),void b.call(null,X,...Se);let Ne;r<64&&(r*=2),1===f?(f=2,Ne=0):Ne=1e3*(r+Math.random()),M(Ne)}let Z=!1;function Q(X){Z||(Z=!0,S(),!y&&(null!==i?(X||(f=2),clearTimeout(i),M(0)):X||(f=1)))}return M(0),o=setTimeout(()=>{u=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new nP(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const u=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const f=o.getErrorCode()===gv.NO_ERROR,g=o.getStatus();if(!f||function LV(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}(g,this.additionalRetryCodes_)&&this.retry){const b=o.getErrorCode()===gv.ABORT;return void r(!1,new nP(!1,null,b))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new nP(y,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function gQ(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class nP{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Sg{constructor(e,t){this._service=e,this._location=t instanceof _s?t:_s.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Sg(e,t)}get root(){const e=new _s(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function $V(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function kQ(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new _s(this._location.bucket,e);return new Sg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function hQ(n){return new pr(ir.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function r7(n,e){const t=e?.storageBucket;return null==t?null:_s.makeFromBucketSpec(t,n)}class CF{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=PV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?_s.makeFromBucketSpec(i,this._host):r7(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?_s.makeFromBucketSpec(this._url,e):r7(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,N.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,N.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sg(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new fQ(NV());{const u=function EQ(n,e,t,r,i,o,u=!0){const f=function FV(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),g=n.url+f,y=Object.assign({},n.headers);return function IQ(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function CQ(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function wQ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,o),function bQ(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new vQ(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,N.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const i7="@firebase/storage",o7="storage";function yJ(n=Rf(),e){const r=wl(n=(0,z.m9)(n),o7).getImmediate({identifier:e}),i=(0,z.P0)("storage");return i&&function vJ(n,e,t,r={}){!function _J(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,z.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function CJ(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new CF(t,r,i,e,"10.5.0")}!function wJ(){Yi(new Cr.wA(o7,CJ,"PUBLIC").setMultipleInstances(!0)),Ni(i7,"0.11.2",""),Ni(i7,"0.11.2","esm2017")}();class wF{constructor(e){return e}}const a7="storage",IF=new c.OlP("angularfire2.storage-instances");function EJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new wF(r)}}const MJ={provide:class IJ{constructor(){return ks(a7)}},deps:[[new c.FiY,IF]]},TJ={provide:wF,useFactory:function bJ(n,e){const t=Rl(a7,n,e);return t&&new wF(t)},deps:[[new c.FiY,IF],su]};let DJ=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Nl.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[TJ,MJ]}),n})();function SJ(n,...e){return{ngModule:DJ,providers:[{provide:IF,useFactory:EJ(n),multi:!0,deps:[c.R0b,c.zs3,Fl,Qy,[new c.FiY,CS],[new c.FiY,dg],...e]}]}}const PJ=Pd(yJ,!0),bF={firebase:{projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",databaseURL:"https://instagram-clone-gilshaashua-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"instagram-clone-gilshaashua.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"}};Ni("firebase","10.5.0","app"),dE(bF.firebase);let OJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n,bootstrap:[MZ]});static#n=this.\u0275inj=c.cJS({providers:[{provide:Qi.Dh,useValue:bF.firebase}],imports:[Qc,qG,YZ,WH,KH,Vj(()=>jj(bF.firebase)),aq(()=>cq()),gq(()=>mq()),SJ(()=>PJ()),$Y(()=>HY()),YY(()=>QY())]})}return n})();Kg().bootstrapModule(OJ).catch(n=>console.error(n))},5619:(st,be,L)=>{L.d(be,{X:()=>V});var c=L(8645);class V extends c.x{constructor(ne){super(),this._value=ne}get value(){return this.getValue()}_subscribe(ne){const ge=super._subscribe(ne);return!ge.closed&&ne.next(this._value),ge}getValue(){const{hasError:ne,thrownError:ge,_value:Ie}=this;if(ne)throw ge;return this._throwIfClosed(),Ie}next(ne){super.next(this._value=ne)}}},5592:(st,be,L)=>{L.d(be,{y:()=>Fe});var c=L(305),V=L(7394),U=L(4850),ne=L(8407),ge=L(2653),Ie=L(4674),Ae=L(1441);let Fe=(()=>{class J{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const Je=new J;return Je.source=this,Je.operator=xe,Je}subscribe(xe,Je,Ce){const Te=function G(J){return J&&J instanceof c.Lv||function B(J){return J&&(0,Ie.m)(J.next)&&(0,Ie.m)(J.error)&&(0,Ie.m)(J.complete)}(J)&&(0,V.Nn)(J)}(xe)?xe:new c.Hp(xe,Je,Ce);return(0,Ae.x)(()=>{const{operator:Ee,source:tt}=this;Te.add(Ee?Ee.call(Te,tt):tt?this._subscribe(Te):this._trySubscribe(Te))}),Te}_trySubscribe(xe){try{return this._subscribe(xe)}catch(Je){xe.error(Je)}}forEach(xe,Je){return new(Je=Me(Je))((Ce,Te)=>{const Ee=new c.Hp({next:tt=>{try{xe(tt)}catch(ot){Te(ot),Ee.unsubscribe()}},error:Te,complete:Ce});this.subscribe(Ee)})}_subscribe(xe){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(xe)}[U.L](){return this}pipe(...xe){return(0,ne.U)(xe)(this)}toPromise(xe){return new(xe=Me(xe))((Je,Ce)=>{let Te;this.subscribe(Ee=>Te=Ee,Ee=>Ce(Ee),()=>Je(Te))})}}return J.create=Oe=>new J(Oe),J})();function Me(J){var Oe;return null!==(Oe=J??ge.config.Promise)&&void 0!==Oe?Oe:Promise}},8645:(st,be,L)=>{L.d(be,{x:()=>Ae});var c=L(5592),V=L(7394);const ne=(0,L(2306).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=L(9039),Ie=L(1441);let Ae=(()=>{class Me extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const J=new Fe(this,this);return J.operator=G,J}_throwIfClosed(){if(this.closed)throw new ne}next(G){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(G)}})}error(G){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:J}=this;for(;J.length;)J.shift().error(G)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:J,isStopped:Oe,observers:xe}=this;return J||Oe?V.Lc:(this.currentObservers=null,xe.push(G),new V.w0(()=>{this.currentObservers=null,(0,ge.P)(xe,G)}))}_checkFinalizedStatuses(G){const{hasError:J,thrownError:Oe,isStopped:xe}=this;J?G.error(Oe):xe&&G.complete()}asObservable(){const G=new c.y;return G.source=this,G}}return Me.create=(B,G)=>new Fe(B,G),Me})();class Fe extends Ae{constructor(B,G){super(),this.destination=B,this.source=G}next(B){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===J||J.call(G,B)}error(B){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===J||J.call(G,B)}complete(){var B,G;null===(G=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===G||G.call(B)}_subscribe(B){var G,J;return null!==(J=null===(G=this.source)||void 0===G?void 0:G.subscribe(B))&&void 0!==J?J:V.Lc}}},305:(st,be,L)=>{L.d(be,{Hp:()=>Ce,Lv:()=>J});var c=L(4674),V=L(7394),U=L(2653),ne=L(3894),ge=L(2420);const Ie=Me("C",void 0,void 0);function Me(ee,de,re){return{kind:ee,value:de,error:re}}var B=L(7599),G=L(1441);class J extends V.w0{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,V.Nn)(de)&&de.add(this)):this.destination=ot}static create(de,re,he){return new Ce(de,re,he)}next(de){this.isStopped?tt(function Fe(ee){return Me("N",ee,void 0)}(de),this):this._next(de)}error(de){this.isStopped?tt(function Ae(ee){return Me("E",void 0,ee)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?tt(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function xe(ee,de){return Oe.call(ee,de)}class Je{constructor(de){this.partialObserver=de}next(de){const{partialObserver:re}=this;if(re.next)try{re.next(de)}catch(he){Te(he)}}error(de){const{partialObserver:re}=this;if(re.error)try{re.error(de)}catch(he){Te(he)}else Te(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(re){Te(re)}}}class Ce extends J{constructor(de,re,he){let Re;if(super(),(0,c.m)(de)||!de)Re={next:de??void 0,error:re??void 0,complete:he??void 0};else{let j;this&&U.config.useDeprecatedNextContext?(j=Object.create(de),j.unsubscribe=()=>this.unsubscribe(),Re={next:de.next&&xe(de.next,j),error:de.error&&xe(de.error,j),complete:de.complete&&xe(de.complete,j)}):Re=de}this.destination=new Je(Re)}}function Te(ee){U.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(ee):(0,ne.h)(ee)}function tt(ee,de){const{onStoppedNotification:re}=U.config;re&&B.z.setTimeout(()=>re(ee,de))}const ot={closed:!0,next:ge.Z,error:function Ee(ee){throw ee},complete:ge.Z}},7394:(st,be,L)=>{L.d(be,{Lc:()=>Ie,w0:()=>ge,Nn:()=>Ae});var c=L(4674);const U=(0,L(2306).d)(Me=>function(G){Me(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((J,Oe)=>`${Oe+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ne=L(9039);class ge{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const xe of G)xe.remove(this);else G.remove(this);const{initialTeardown:J}=this;if((0,c.m)(J))try{J()}catch(xe){B=xe instanceof U?xe.errors:[xe]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const xe of Oe)try{Fe(xe)}catch(Je){B=B??[],Je instanceof U?B=[...B,...Je.errors]:B.push(Je)}}if(B)throw new U(B)}}add(B){var G;if(B&&B!==this)if(this.closed)Fe(B);else{if(B instanceof ge){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(B)}}_hasParent(B){const{_parentage:G}=this;return G===B||Array.isArray(G)&&G.includes(B)}_addParent(B){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(B),G):G?[G,B]:B}_removeParent(B){const{_parentage:G}=this;G===B?this._parentage=null:Array.isArray(G)&&(0,ne.P)(G,B)}remove(B){const{_finalizers:G}=this;G&&(0,ne.P)(G,B),B instanceof ge&&B._removeParent(this)}}ge.EMPTY=(()=>{const Me=new ge;return Me.closed=!0,Me})();const Ie=ge.EMPTY;function Ae(Me){return Me instanceof ge||Me&&"closed"in Me&&(0,c.m)(Me.remove)&&(0,c.m)(Me.add)&&(0,c.m)(Me.unsubscribe)}function Fe(Me){(0,c.m)(Me)?Me():Me.unsubscribe()}},2653:(st,be,L)=>{L.d(be,{config:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(st,be,L)=>{L.d(be,{E:()=>V});const V=new(L(5592).y)(ge=>ge.complete())},2459:(st,be,L)=>{L.d(be,{D:()=>de});var c=L(4829),V=L(3093),U=L(5137),Ie=L(5592),Fe=L(4971),Me=L(4674),B=L(7103);function J(re,he){if(!re)throw new Error("Iterable cannot be null");return new Ie.y(Re=>{(0,B.f)(Re,he,()=>{const j=re[Symbol.asyncIterator]();(0,B.f)(Re,he,()=>{j.next().then(we=>{we.done?Re.complete():Re.next(we.value)})},0,!0)})})}var Oe=L(8382),xe=L(4026),Je=L(4266),Ce=L(3664),Te=L(5726),Ee=L(9853),tt=L(541);function de(re,he){return he?function ee(re,he){if(null!=re){if((0,Oe.c)(re))return function ne(re,he){return(0,c.Xf)(re).pipe((0,U.R)(he),(0,V.Q)(he))}(re,he);if((0,Je.z)(re))return function Ae(re,he){return new Ie.y(Re=>{let j=0;return he.schedule(function(){j===re.length?Re.complete():(Re.next(re[j++]),Re.closed||this.schedule())})})}(re,he);if((0,xe.t)(re))return function ge(re,he){return(0,c.Xf)(re).pipe((0,U.R)(he),(0,V.Q)(he))}(re,he);if((0,Te.D)(re))return J(re,he);if((0,Ce.T)(re))return function G(re,he){return new Ie.y(Re=>{let j;return(0,B.f)(Re,he,()=>{j=re[Fe.h](),(0,B.f)(Re,he,()=>{let we,Ue;try{({value:we,done:Ue}=j.next())}catch(lt){return void Re.error(lt)}Ue?Re.complete():Re.next(we)},0,!0)}),()=>(0,Me.m)(j?.return)&&j.return()})}(re,he);if((0,tt.L)(re))return function ot(re,he){return J((0,tt.Q)(re),he)}(re,he)}throw(0,Ee.z)(re)}(re,he):(0,c.Xf)(re)}},4829:(st,be,L)=>{L.d(be,{Xf:()=>Oe});var c=L(7582),V=L(4266),U=L(4026),ne=L(5592),ge=L(8382),Ie=L(5726),Ae=L(9853),Fe=L(3664),Me=L(541),B=L(4674),G=L(3894),J=L(4850);function Oe(ee){if(ee instanceof ne.y)return ee;if(null!=ee){if((0,ge.c)(ee))return function xe(ee){return new ne.y(de=>{const re=ee[J.L]();if((0,B.m)(re.subscribe))return re.subscribe(de);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,V.z)(ee))return function Je(ee){return new ne.y(de=>{for(let re=0;re<ee.length&&!de.closed;re++)de.next(ee[re]);de.complete()})}(ee);if((0,U.t)(ee))return function Ce(ee){return new ne.y(de=>{ee.then(re=>{de.closed||(de.next(re),de.complete())},re=>de.error(re)).then(null,G.h)})}(ee);if((0,Ie.D)(ee))return Ee(ee);if((0,Fe.T)(ee))return function Te(ee){return new ne.y(de=>{for(const re of ee)if(de.next(re),de.closed)return;de.complete()})}(ee);if((0,Me.L)(ee))return function tt(ee){return Ee((0,Me.Q)(ee))}(ee)}throw(0,Ae.z)(ee)}function Ee(ee){return new ne.y(de=>{(function ot(ee,de){var re,he,Re,j;return(0,c.mG)(this,void 0,void 0,function*(){try{for(re=(0,c.KL)(ee);!(he=yield re.next()).done;)if(de.next(he.value),de.closed)return}catch(we){Re={error:we}}finally{try{he&&!he.done&&(j=re.return)&&(yield j.call(re))}finally{if(Re)throw Re.error}}de.complete()})})(ee,de).catch(re=>de.error(re))})}},3019:(st,be,L)=>{L.d(be,{T:()=>Ie});var c=L(7537),V=L(4829),U=L(6232),ne=L(4564),ge=L(2459);function Ie(...Ae){const Fe=(0,ne.yG)(Ae),Me=(0,ne._6)(Ae,1/0),B=Ae;return B.length?1===B.length?(0,V.Xf)(B[0]):(0,c.J)(Me)((0,ge.D)(B,Fe)):U.E}},2096:(st,be,L)=>{L.d(be,{of:()=>U});var c=L(4564),V=L(2459);function U(...ne){const ge=(0,c.yG)(ne);return(0,V.D)(ne,ge)}},8251:(st,be,L)=>{L.d(be,{x:()=>V});var c=L(305);function V(ne,ge,Ie,Ae,Fe){return new U(ne,ge,Ie,Ae,Fe)}class U extends c.Lv{constructor(ge,Ie,Ae,Fe,Me,B){super(ge),this.onFinalize=Me,this.shouldUnsubscribe=B,this._next=Ie?function(G){try{Ie(G)}catch(J){ge.error(J)}}:super._next,this._error=Fe?function(G){try{Fe(G)}catch(J){ge.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=Ae?function(){try{Ae()}catch(G){ge.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},3997:(st,be,L)=>{L.d(be,{x:()=>ne});var c=L(2737),V=L(9360),U=L(8251);function ne(Ie,Ae=c.y){return Ie=Ie??ge,(0,V.e)((Fe,Me)=>{let B,G=!0;Fe.subscribe((0,U.x)(Me,J=>{const Oe=Ae(J);(G||!Ie(B,Oe))&&(G=!1,B=Oe,Me.next(J))}))})}function ge(Ie,Ae){return Ie===Ae}},7398:(st,be,L)=>{L.d(be,{U:()=>U});var c=L(9360),V=L(8251);function U(ne,ge){return(0,c.e)((Ie,Ae)=>{let Fe=0;Ie.subscribe((0,V.x)(Ae,Me=>{Ae.next(ne.call(ge,Me,Fe++))}))})}},7537:(st,be,L)=>{L.d(be,{J:()=>U});var c=L(1631),V=L(2737);function U(ne=1/0){return(0,c.z)(V.y,ne)}},1631:(st,be,L)=>{L.d(be,{z:()=>Fe});var c=L(7398),V=L(4829),U=L(9360),ne=L(7103),ge=L(8251),Ae=L(4674);function Fe(Me,B,G=1/0){return(0,Ae.m)(B)?Fe((J,Oe)=>(0,c.U)((xe,Je)=>B(J,xe,Oe,Je))((0,V.Xf)(Me(J,Oe))),G):("number"==typeof B&&(G=B),(0,U.e)((J,Oe)=>function Ie(Me,B,G,J,Oe,xe,Je,Ce){const Te=[];let Ee=0,tt=0,ot=!1;const ee=()=>{ot&&!Te.length&&!Ee&&B.complete()},de=he=>Ee<J?re(he):Te.push(he),re=he=>{xe&&B.next(he),Ee++;let Re=!1;(0,V.Xf)(G(he,tt++)).subscribe((0,ge.x)(B,j=>{Oe?.(j),xe?de(j):B.next(j)},()=>{Re=!0},void 0,()=>{if(Re)try{for(Ee--;Te.length&&Ee<J;){const j=Te.shift();Je?(0,ne.f)(B,Je,()=>re(j)):re(j)}ee()}catch(j){B.error(j)}}))};return Me.subscribe((0,ge.x)(B,de,()=>{ot=!0,ee()})),()=>{Ce?.()}}(J,Oe,Me,G)))}},3093:(st,be,L)=>{L.d(be,{Q:()=>ne});var c=L(7103),V=L(9360),U=L(8251);function ne(ge,Ie=0){return(0,V.e)((Ae,Fe)=>{Ae.subscribe((0,U.x)(Fe,Me=>(0,c.f)(Fe,ge,()=>Fe.next(Me),Ie),()=>(0,c.f)(Fe,ge,()=>Fe.complete(),Ie),Me=>(0,c.f)(Fe,ge,()=>Fe.error(Me),Ie)))})}},3020:(st,be,L)=>{L.d(be,{B:()=>ge});var c=L(4829),V=L(8645),U=L(305),ne=L(9360);function ge(Ae={}){const{connector:Fe=(()=>new V.x),resetOnError:Me=!0,resetOnComplete:B=!0,resetOnRefCountZero:G=!0}=Ae;return J=>{let Oe,xe,Je,Ce=0,Te=!1,Ee=!1;const tt=()=>{xe?.unsubscribe(),xe=void 0},ot=()=>{tt(),Oe=Je=void 0,Te=Ee=!1},ee=()=>{const de=Oe;ot(),de?.unsubscribe()};return(0,ne.e)((de,re)=>{Ce++,!Ee&&!Te&&tt();const he=Je=Je??Fe();re.add(()=>{Ce--,0===Ce&&!Ee&&!Te&&(xe=Ie(ee,G))}),he.subscribe(re),!Oe&&Ce>0&&(Oe=new U.Hp({next:Re=>he.next(Re),error:Re=>{Ee=!0,tt(),xe=Ie(ot,Me,Re),he.error(Re)},complete:()=>{Te=!0,tt(),xe=Ie(ot,B),he.complete()}}),(0,c.Xf)(de).subscribe(Oe))})(J)}}function Ie(Ae,Fe,...Me){if(!0===Fe)return void Ae();if(!1===Fe)return;const B=new U.Hp({next:()=>{B.unsubscribe(),Ae()}});return(0,c.Xf)(Fe(...Me)).subscribe(B)}},5137:(st,be,L)=>{L.d(be,{R:()=>V});var c=L(9360);function V(U,ne=0){return(0,c.e)((ge,Ie)=>{Ie.add(U.schedule(()=>ge.subscribe(Ie),ne))})}},4664:(st,be,L)=>{L.d(be,{w:()=>ne});var c=L(4829),V=L(9360),U=L(8251);function ne(ge,Ie){return(0,V.e)((Ae,Fe)=>{let Me=null,B=0,G=!1;const J=()=>G&&!Me&&Fe.complete();Ae.subscribe((0,U.x)(Fe,Oe=>{Me?.unsubscribe();let xe=0;const Je=B++;(0,c.Xf)(ge(Oe,Je)).subscribe(Me=(0,U.x)(Fe,Ce=>Fe.next(Ie?Ie(Oe,Ce,Je,xe++):Ce),()=>{Me=null,J()}))},()=>{G=!0,J()}))})}},7599:(st,be,L)=>{L.d(be,{z:()=>c});const c={setTimeout(V,U,...ne){const{delegate:ge}=c;return ge?.setTimeout?ge.setTimeout(V,U,...ne):setTimeout(V,U,...ne)},clearTimeout(V){const{delegate:U}=c;return(U?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4971:(st,be,L)=>{L.d(be,{h:()=>V});const V=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(st,be,L)=>{L.d(be,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(st,be,L)=>{L.d(be,{_6:()=>Ie,jO:()=>ne,yG:()=>ge});var c=L(4674);function U(Ae){return Ae[Ae.length-1]}function ne(Ae){return(0,c.m)(U(Ae))?Ae.pop():void 0}function ge(Ae){return function V(Ae){return Ae&&(0,c.m)(Ae.schedule)}(U(Ae))?Ae.pop():void 0}function Ie(Ae,Fe){return"number"==typeof U(Ae)?Ae.pop():Fe}},9039:(st,be,L)=>{function c(V,U){if(V){const ne=V.indexOf(U);0<=ne&&V.splice(ne,1)}}L.d(be,{P:()=>c})},2306:(st,be,L)=>{function c(V){const ne=V(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}L.d(be,{d:()=>c})},1441:(st,be,L)=>{L.d(be,{O:()=>ne,x:()=>U});var c=L(2653);let V=null;function U(ge){if(c.config.useDeprecatedSynchronousErrorHandling){const Ie=!V;if(Ie&&(V={errorThrown:!1,error:null}),ge(),Ie){const{errorThrown:Ae,error:Fe}=V;if(V=null,Ae)throw Fe}}else ge()}function ne(ge){c.config.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ge)}},7103:(st,be,L)=>{function c(V,U,ne,ge=0,Ie=!1){const Ae=U.schedule(function(){ne(),Ie?V.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(V.add(Ae),!Ie)return Ae}L.d(be,{f:()=>c})},2737:(st,be,L)=>{function c(V){return V}L.d(be,{y:()=>c})},4266:(st,be,L)=>{L.d(be,{z:()=>c});const c=V=>V&&"number"==typeof V.length&&"function"!=typeof V},5726:(st,be,L)=>{L.d(be,{D:()=>V});var c=L(4674);function V(U){return Symbol.asyncIterator&&(0,c.m)(U?.[Symbol.asyncIterator])}},4674:(st,be,L)=>{function c(V){return"function"==typeof V}L.d(be,{m:()=>c})},8382:(st,be,L)=>{L.d(be,{c:()=>U});var c=L(4850),V=L(4674);function U(ne){return(0,V.m)(ne[c.L])}},3664:(st,be,L)=>{L.d(be,{T:()=>U});var c=L(4971),V=L(4674);function U(ne){return(0,V.m)(ne?.[c.h])}},4026:(st,be,L)=>{L.d(be,{t:()=>V});var c=L(4674);function V(U){return(0,c.m)(U?.then)}},541:(st,be,L)=>{L.d(be,{L:()=>ne,Q:()=>U});var c=L(7582),V=L(4674);function U(ge){return(0,c.FC)(this,arguments,function*(){const Ae=ge.getReader();try{for(;;){const{value:Fe,done:Me}=yield(0,c.qq)(Ae.read());if(Me)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(Fe)}}finally{Ae.releaseLock()}})}function ne(ge){return(0,V.m)(ge?.getReader)}},9360:(st,be,L)=>{L.d(be,{A:()=>V,e:()=>U});var c=L(4674);function V(ne){return(0,c.m)(ne?.lift)}function U(ne){return ge=>{if(V(ge))return ge.lift(function(Ie){try{return ne(Ie,this)}catch(Ae){this.error(Ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(st,be,L)=>{function c(){}L.d(be,{Z:()=>c})},8407:(st,be,L)=>{L.d(be,{U:()=>U,z:()=>V});var c=L(2737);function V(...ne){return U(ne)}function U(ne){return 0===ne.length?c.y:1===ne.length?ne[0]:function(Ie){return ne.reduce((Ae,Fe)=>Fe(Ae),Ie)}}},3894:(st,be,L)=>{L.d(be,{h:()=>U});var c=L(2653),V=L(7599);function U(ne){V.z.setTimeout(()=>{const{onUnhandledError:ge}=c.config;if(!ge)throw ne;ge(ne)})}},9853:(st,be,L)=>{function c(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(be,{z:()=>c})},5879:(st,be,L)=>{L.d(be,{$8M:()=>Hu,$WT:()=>Za,$Z:()=>DE,AFp:()=>ki,ALo:()=>Ic,AaK:()=>J,AsE:()=>SM,CHM:()=>os,CRH:()=>ry,DdM:()=>K_,Dn7:()=>Sp,EJc:()=>Or,EpF:()=>oM,F4k:()=>aM,FYo:()=>lx,FiY:()=>oe,Gf:()=>ST,GfV:()=>dd,Gpc:()=>Je,HDt:()=>$T,JOm:()=>uf,KtG:()=>Kh,LFG:()=>Ve,LSH:()=>Df,Lbi:()=>k0,Lck:()=>tO,MAs:()=>GC,MGl:()=>d_,MMx:()=>Nd,MR2:()=>P0,NdJ:()=>JC,O4$:()=>xo,Ojb:()=>oE,OlP:()=>cn,Oqu:()=>Os,P3R:()=>YP,PXZ:()=>Zp,Q6J:()=>ZC,QGY:()=>op,Qsj:()=>YF,R0b:()=>Br,RDi:()=>Lb,Rgc:()=>Rs,SBq:()=>Il,Sil:()=>wO,Suo:()=>rI,TTD:()=>jh,TgZ:()=>a_,Tol:()=>m_,VKq:()=>Vw,VuI:()=>zO,W1O:()=>Fp,WLB:()=>jw,X6Q:()=>AO,XFs:()=>dt,Xpm:()=>gu,Xq5:()=>zE,Xts:()=>ad,Y36:()=>El,YKP:()=>Bl,YNc:()=>s_,Yjl:()=>Cu,Yz7:()=>ft,Z0I:()=>sn,ZZ4:()=>ka,_Bn:()=>iT,_UZ:()=>WC,_c5:()=>UO,_uU:()=>gw,aQg:()=>Ey,c2e:()=>qe,cJS:()=>Nn,cg1:()=>Ea,dDg:()=>yy,dqk:()=>Nt,eFA:()=>mI,eJc:()=>ay,ekj:()=>lw,eoX:()=>Ls,f3M:()=>Ke,g9A:()=>iE,h0i:()=>Ul,hGG:()=>BO,hij:()=>Md,iGM:()=>nI,ifc:()=>$s,ip1:()=>rt,jDz:()=>Ii,kL8:()=>Cc,kcU:()=>yt,lG2:()=>vu,lcZ:()=>Zw,lnq:()=>mw,lqb:()=>Vo,lri:()=>_y,n5z:()=>um,oAB:()=>_u,oxw:()=>dM,q4F:()=>Bm,qFp:()=>Fa,qLn:()=>fc,qOj:()=>ba,qZA:()=>ip,rWj:()=>te,rg0:()=>Vh,s9C:()=>ap,sBO:()=>NO,s_b:()=>ey,soG:()=>ye,tb:()=>vy,tp0:()=>He,uIk:()=>Qf,vHH:()=>ee,vpe:()=>jo,wAp:()=>jr,xp6:()=>pc,z2F:()=>jd,zSh:()=>N,zs3:()=>ao});var c=L(8645),V=L(7394),U=L(5592),ne=L(3019),ge=L(5619),Ie=L(2096),Ae=L(3020),Fe=L(4664),Me=L(3997);function B(s){for(let a in s)if(s[a]===B)return a;throw Error("Could not find renamed property on target object.")}function G(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function J(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(J).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function Oe(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const xe=B({__forward_ref__:B});function Je(s){return s.__forward_ref__=Je,s.toString=function(){return J(this())},s}function Ce(s){return Te(s)?s():s}function Te(s){return"function"==typeof s&&s.hasOwnProperty(xe)&&s.__forward_ref__===Je}function Ee(s){return s&&!!s.\u0275providers}const ot="https://g.co/ng/security#xss";class ee extends Error{constructor(a,l){super(function de(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,l)),this.code=a}}function re(s){return"string"==typeof s?s:null==s?"":String(s)}function Ue(s,a){throw new ee(-201,!1)}function Qe(s,a){null==s&&function Be(s,a,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function ft(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Nn(s){return{providers:s.providers||[],imports:s.imports||[]}}function En(s){return Zn(s,gr)||Zn(s,qr)}function sn(s){return null!==En(s)}function Zn(s,a){return s.hasOwnProperty(a)?s[a]:null}function Fr(s){return s&&(s.hasOwnProperty(qn)||s.hasOwnProperty(vs))?s[qn]:null}const gr=B({\u0275prov:B}),qn=B({\u0275inj:B}),qr=B({ngInjectableDef:B}),vs=B({ngInjectorDef:B});var dt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(dt||{});let mt;function on(s){const a=mt;return mt=s,a}function di(s,a,l){const d=En(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&dt.Optional?null:void 0!==a?a:void Ue(J(s))}const Nt=globalThis,it={},Rt="__NG_DI_FLAG__",Bt="ngTempTokenPath",H=/\n/gm,O="__source";let k;function K(s){const a=k;return k=s,a}function me(s,a=dt.Default){if(void 0===k)throw new ee(-203,!1);return null===k?di(s,void 0,a):k.get(s,a&dt.Optional?null:void 0,a)}function Ve(s,a=dt.Default){return(function Mt(){return mt}()||me)(Ce(s),a)}function Ke(s,a=dt.Default){return Ve(s,Jt(a))}function Jt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function wt(s){const a=[];for(let l=0;l<s.length;l++){const d=Ce(s[l]);if(Array.isArray(d)){if(0===d.length)throw new ee(900,!1);let h,p=dt.Default;for(let v=0;v<d.length;v++){const C=d[v],E=xt(C);"number"==typeof E?-1===E?h=C.token:p|=E:h=C}a.push(Ve(h,p))}else a.push(Ve(d))}return a}function gn(s,a){return s[Rt]=a,s.prototype[Rt]=a,s}function xt(s){return s[Rt]}function js(s){return{toString:s}.toString()}var Io=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(Io||{}),$s=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}($s||{});const Hi={},Yt=[],sa=B({\u0275cmp:B}),za=B({\u0275dir:B}),hu=B({\u0275pipe:B}),fu=B({\u0275mod:B}),Hs=B({\u0275fac:B}),Ga=B({__NG_ELEMENT_ID__:B}),pu=B({__NG_ENV_ID__:B});function yh(s,a,l){let d=s.length;for(;;){const h=s.indexOf(a,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=a.length;if(h+p===d||s.charCodeAt(h+p)<=32)return h}l=h+1}}function Kr(s,a,l){let d=0;for(;d<l.length;){const h=l[d];if("number"==typeof h){if(0!==h)break;d++;const p=l[d++],v=l[d++],C=l[d++];s.setAttribute(a,v,C,p)}else{const p=h,v=l[++d];Vc(p)?s.setProperty(a,p,v):s.setAttribute(a,p,v),d++}}return d}function zs(s){return 3===s||4===s||6===s}function Vc(s){return 64===s.charCodeAt(0)}function jc(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const h=a[d];"number"==typeof h?l=h:0===l||Yr(s,l,h,null,-1===l||2===l?a[++d]:null)}}return s}function Yr(s,a,l,d,h){let p=0,v=s.length;if(-1===a)v=-1;else for(;p<s.length;){const C=s[p++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=p-1;break}}}for(;p<s.length;){const C=s[p];if("number"==typeof C)break;if(C===l){if(null===d)return void(null!==h&&(s[p+1]=h));if(d===s[p+1])return void(s[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==v&&(s.splice(v,0,a),p=v+1),s.splice(p++,0,l),null!==d&&s.splice(p++,0,d),null!==h&&s.splice(p++,0,h)}const Ln="ng-template";function vv(s,a,l){let d=0,h=!0;for(;d<s.length;){let p=s[d++];if("string"==typeof p&&h){const v=s[d++];if(l&&"class"===p&&-1!==yh(v.toLowerCase(),a,0))return!0}else{if(1===p){for(;d<s.length&&"string"==typeof(p=s[d++]);)if(p.toLowerCase()===a)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function hn(s){return 4===s.type&&s.value!==Ln}function Cv(s,a,l){return a===(4!==s.type||l?s.value:Ln)}function vh(s,a,l){let d=4;const h=s.attrs||[],p=function $c(s){for(let a=0;a<s.length;a++)if(zs(s[a]))return a;return s.length}(h);let v=!1;for(let C=0;C<a.length;C++){const E=a[C];if("number"!=typeof E){if(!v)if(4&d){if(d=2|1&d,""!==E&&!Cv(s,E,l)||""===E&&1===a.length){if(hi(d))return!1;v=!0}}else{const T=8&d?E:a[++C];if(8&d&&null!==s.attrs){if(!vv(s.attrs,T,l)){if(hi(d))return!1;v=!0}continue}const F=Ch(8&d?"class":E,h,hn(s),l);if(-1===F){if(hi(d))return!1;v=!0;continue}if(""!==T){let q;q=F>p?"":h[F+1].toLowerCase();const Y=8&d?q:null;if(Y&&-1!==yh(Y,T,0)||2&d&&T!==q){if(hi(d))return!1;v=!0}}}}else{if(!v&&!hi(d)&&!hi(E))return!1;if(v&&hi(E))continue;v=!1,d=E|1&d}}return hi(d)||v}function hi(s){return 0==(1&s)}function Ch(s,a,l,d){if(null===a)return-1;let h=0;if(d||!l){let p=!1;for(;h<a.length;){const v=a[h];if(v===s)return h;if(3===v||6===v)p=!0;else{if(1===v||2===v){let C=a[++h];for(;"string"==typeof C;)C=a[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=p?1:2}return-1}return function Ih(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,s)}function wh(s,a,l=!1){for(let d=0;d<a.length;d++)if(vh(s,a[d],l))return!0;return!1}function xg(s,a){return s?":not("+a.trim()+")":a}function Ag(s){let a=s[0],l=1,d=2,h="",p=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&d){const C=s[++l];h+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?h+="."+v:4&d&&(h+=" "+v);else""!==h&&!hi(v)&&(a+=xg(p,h),h=""),d=v,p=p||!hi(d);l++}return""!==h&&(a+=xg(p,h)),a}function gu(s){return js(()=>{const a=Og(s),l={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Io.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||$s.Emulated,styles:s.styles||Yt,_:null,schemas:s.schemas||null,tView:null,id:""};wu(l);const d=s.dependencies;return l.directiveDefs=bo(d,!1),l.pipeDefs=bo(d,!0),l.id=function Th(s){let a=0;const l=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of l)a=Math.imul(31,a)+h.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(l),l})}function mu(s){return Ft(s)||Mr(s)}function Eh(s){return null!==s}function _u(s){return js(()=>({type:s.type,bootstrap:s.bootstrap||Yt,declarations:s.declarations||Yt,imports:s.imports||Yt,exports:s.exports||Yt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function yu(s,a){if(null==s)return Hi;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=d,a&&(a[h]=p)}return l}function vu(s){return js(()=>{const a=Og(s);return wu(a),a})}function Cu(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ft(s){return s[sa]||null}function Mr(s){return s[za]||null}function Tr(s){return s[hu]||null}function Za(s){const a=Ft(s)||Mr(s)||Tr(s);return null!==a&&a.standalone}function Qr(s,a){const l=s[fu]||null;if(!l&&!0===a)throw new Error(`Type ${J(s)} does not have '\u0275mod' property.`);return l}function Og(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:s.inputs||Hi,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Yt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yu(s.inputs,a),outputs:yu(s.outputs)}}function wu(s){s.features?.forEach(a=>a(s))}function bo(s,a){if(!s)return null;const l=a?Tr:mu;return()=>("function"==typeof s?s():s).map(d=>l(d)).filter(Eh)}const Mn=0,je=1,Et=2,mn=3,Si=4,Zs=5,_r=6,oa=7,Wn=8,qs=9,Eo=10,pt=11,Hc=12,Iv=13,Pi=14,sr=15,qa=16,xi=17,Jr=18,Ws=19,kg=20,aa=21,ws=22,Iu=23,zi=24,Lt=25,Sh=1,zc=2,Xr=7,Wa=9,or=11;function fi(s){return Array.isArray(s)&&"object"==typeof s[Sh]}function Lr(s){return Array.isArray(s)&&!0===s[Sh]}function Ph(s){return 0!=(4&s.flags)}function Ks(s){return s.componentOffset>-1}function Zc(s){return 1==(1&s.flags)}function Gi(s){return!!s.template}function Ka(s){return 0!=(512&s[Et])}function Ys(s,a){return s.hasOwnProperty(Hs)?s[Hs]:null}let yr=null,Nh=!1;function ti(s){const a=yr;return yr=s,a}const Rh={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ov(s){if(!Tu(s)||s.dirty){if(!s.producerMustRecompute(s)&&!Nv(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function kv(s){s.dirty=!0,function Lg(s){if(void 0===s.liveConsumerNode)return;const a=Nh;Nh=!0;try{for(const l of s.liveConsumerNode)l.dirty||kv(l)}finally{Nh=a}}(s),s.consumerMarkedDirty?.(s)}function Ug(s){return s&&(s.nextProducerIndex=0),ti(s)}function Mu(s,a){if(ti(a),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(Tu(s))for(let l=s.nextProducerIndex;l<s.producerNode.length;l++)Wc(s.producerNode[l],s.producerIndexOfThis[l]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function Nv(s){To(s);for(let a=0;a<s.producerNode.length;a++){const l=s.producerNode[a],d=s.producerLastReadVersion[a];if(d!==l.version||(Ov(l),d!==l.version))return!0}return!1}function Lh(s){if(To(s),Tu(s))for(let a=0;a<s.producerNode.length;a++)Wc(s.producerNode[a],s.producerIndexOfThis[a]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function Wc(s,a){if(function Fv(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),To(s),1===s.liveConsumerNode.length)for(let d=0;d<s.producerNode.length;d++)Wc(s.producerNode[d],s.producerIndexOfThis[d]);const l=s.liveConsumerNode.length-1;if(s.liveConsumerNode[a]=s.liveConsumerNode[l],s.liveConsumerIndexOfThis[a]=s.liveConsumerIndexOfThis[l],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,a<s.liveConsumerNode.length){const d=s.liveConsumerIndexOfThis[a],h=s.liveConsumerNode[a];To(h),h.producerIndexOfThis[d]=a}}function Tu(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function To(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let Uv=null;function Vh(s){const a=ti(null);try{return s()}finally{ti(a)}}const zg=()=>{},ob=(()=>({...Rh,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:zg}))();class $v{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function jh(){return $h}function $h(s){return s.type.prototype.ngOnChanges&&(s.setInput=Qs),Pu}function Pu(){const s=Hh(this),a=s?.current;if(a){const l=s.previous;if(l===Hi)s.previous=a;else for(let d in a)l[d]=a[d];s.current=null,this.ngOnChanges(a)}}function Qs(s,a,l,d){const h=this.declaredInputs[l],p=Hh(s)||function Hv(s,a){return s[Ja]=a}(s,{previous:Hi,current:null}),v=p.current||(p.current={}),C=p.previous,E=C[h];v[h]=new $v(E&&E.currentValue,a,C===Hi),s[d]=a}jh.ngInherit=!0;const Ja="__ngSimpleChanges__";function Hh(s){return s[Ja]||null}const Is=function(s,a,l){},Gg="svg";function an(s){for(;Array.isArray(s);)s=s[Mn];return s}function Js(s,a){return an(a[s])}function ni(s,a){return an(a[s.index])}function Gh(s,a){return s.data[a]}function Xa(s,a){return s[a]}function pi(s,a){const l=a[s];return fi(l)?l:l[Mn]}function Do(s,a){return null==a?null:s[a]}function Zg(s){s[xi]=0}function Yc(s){1024&s[Et]||(s[Et]|=1024,er(s,1))}function zv(s){1024&s[Et]&&(s[Et]&=-1025,er(s,-1))}function er(s,a){let l=s[mn];if(null===l)return;l[Zs]+=a;let d=l;for(l=l[mn];null!==l&&(1===a&&1===d[Zs]||-1===a&&0===d[Zs]);)l[Zs]+=a,d=l,l=l[mn]}const _t={lFrame:im(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ec(){return _t.bindingsEnabled}function ve(){return _t.lFrame.lView}function Vt(){return _t.lFrame.tView}function os(s){return _t.lFrame.contextLView=s,s[Wn]}function Kh(s){return _t.lFrame.contextLView=null,s}function Dr(){let s=Nu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Nu(){return _t.lFrame.currentTNode}function bs(s,a){const l=_t.lFrame;l.currentTNode=s,l.isParent=a}function Jg(){return _t.lFrame.isParent}function Sr(){const s=_t.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Po(){return _t.lFrame.bindingIndex}function Xc(){return _t.lFrame.bindingIndex++}function Es(s){const a=_t.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}function tm(s,a){const l=_t.lFrame;l.bindingIndex=l.bindingRootIndex=s,nm(a)}function nm(s){_t.lFrame.currentDirectiveIndex=s}function Yv(){return _t.lFrame.currentQueryIndex}function rm(s){_t.lFrame.currentQueryIndex=s}function fb(s){const a=s[je];return 2===a.type?a.declTNode:1===a.type?s[_r]:null}function Qh(s,a,l){if(l&dt.SkipSelf){let h=a,p=s;for(;!(h=h.parent,null!==h||l&dt.Host||(h=fb(p),null===h||(p=p[Pi],10&h.type))););if(null===h)return!1;a=h,s=p}const d=_t.lFrame=Xs();return d.currentTNode=a,d.lView=s,!0}function gi(s){const a=Xs(),l=s[je];_t.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Xs(){const s=_t.lFrame,a=null===s?null:s.child;return null===a?im(s):a}function im(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function _n(){const s=_t.lFrame;return _t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ut=_n;function ar(){const s=_n();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ri(){return _t.lFrame.selectedIndex}function eo(s){_t.lFrame.selectedIndex=s}function In(){const s=_t.lFrame;return Gh(s.tView,s.selectedIndex)}function xo(){_t.lFrame.currentNamespace=Gg}function yt(){!function Qv(){_t.lFrame.currentNamespace=null}()}let el=!0;function to(){return el}function no(s){el=s}function tc(s,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:P}=p;v&&(s.contentHooks??=[]).push(-l,v),C&&((s.contentHooks??=[]).push(l,C),(s.contentCheckHooks??=[]).push(l,C)),E&&(s.viewHooks??=[]).push(-l,E),T&&((s.viewHooks??=[]).push(l,T),(s.viewCheckHooks??=[]).push(l,T)),null!=P&&(s.destroyHooks??=[]).push(l,P)}}function nc(s,a,l){Lu(s,a,3,l)}function rc(s,a,l,d){(3&s[Et])===l&&Lu(s,a,l,d)}function Fu(s,a){let l=s[Et];(3&l)===a&&(l&=8191,l+=1,s[Et]=l)}function Lu(s,a,l,d){const p=d??-1,v=a.length-1;let C=0;for(let E=void 0!==d?65535&s[xi]:0;E<v;E++)if("number"==typeof a[E+1]){if(C=a[E],null!=d&&C>=d)break}else a[E]<0&&(s[xi]+=65536),(C<p||-1==p)&&(tl(s,l,a,E),s[xi]=(4294901760&s[xi])+E+2),E++}function ro(s,a){Is(4,s,a);const l=ti(null);try{a.call(s)}finally{ti(l),Is(5,s,a)}}function tl(s,a,l,d){const h=l[d]<0,p=l[d+1],C=s[h?-l[d]:l[d]];h?s[Et]>>13<s[xi]>>16&&(3&s[Et])===a&&(s[Et]+=8192,ro(C,p)):ro(C,p)}const Ms=-1;class la{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Bu(s){return s!==Ms}function Ai(s){return 32767&s}function zt(s,a){let l=function Tn(s){return s>>16}(s),d=a;for(;l>0;)d=d[Pi],l--;return d}let ic=!0;function vr(s){const a=ic;return ic=s,a}const il=255,sl=5;let Jv=0;const cr={};function Dn(s,a){const l=Vu(s,a);if(-1!==l)return l;const d=a[je];d.firstCreatePass&&(s.injectorIndex=a.length,Ts(d.data,s),Ts(a,null),Ts(d.blueprint,null));const h=da(s,a),p=s.injectorIndex;if(Bu(h)){const v=Ai(h),C=zt(h,a),E=C[je].data;for(let T=0;T<8;T++)a[p+T]=C[v+T]|E[v+T]}return a[p+8]=h,p}function Ts(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Vu(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function da(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=a;for(;null!==h;){if(d=hm(h),null===d)return Ms;if(l++,h=h[Pi],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return Ms}function sc(s,a,l){!function Oo(s,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Ga)&&(d=l[Ga]),null==d&&(d=l[Ga]=Jv++);const h=d&il;a.data[s+(h>>sl)]|=1<<h}(s,a,l)}function tf(s,a,l){if(l&dt.Optional||void 0!==s)return s;Ue()}function oc(s,a,l,d){if(l&dt.Optional&&void 0===d&&(d=null),!(l&(dt.Self|dt.Host))){const h=s[qs],p=on(void 0);try{return h?h.get(a,d,l&dt.Optional):di(a,d,l&dt.Optional)}finally{on(p)}}return tf(d,0,l)}function nf(s,a,l,d=dt.Default,h){if(null!==s){if(2048&a[Et]&&!(d&dt.Self)){const v=function dm(s,a,l,d,h){let p=s,v=a;for(;null!==p&&null!==v&&2048&v[Et]&&!(512&v[Et]);){const C=ju(p,v,l,d|dt.Self,cr);if(C!==cr)return C;let E=p.parent;if(!E){const T=v[kg];if(T){const P=T.get(l,cr,d);if(P!==cr)return P}E=hm(v),v=v[Pi]}p=E}return h}(s,a,l,d,cr);if(v!==cr)return v}const p=ju(s,a,l,d,cr);if(p!==cr)return p}return oc(a,l,d,h)}function ju(s,a,l,d,h){const p=function No(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Ga)?s[Ga]:void 0;return"number"==typeof a?a>=0?a&il:Ro:a}(l);if("function"==typeof p){if(!Qh(a,s,d))return d&dt.Host?tf(h,0,d):oc(a,l,d,h);try{let v;if(v=p(d),null!=v||d&dt.Optional)return v;Ue()}finally{ut()}}else if("number"==typeof p){let v=null,C=Vu(s,a),E=Ms,T=d&dt.Host?a[sr][_r]:null;for((-1===C||d&dt.SkipSelf)&&(E=-1===C?da(s,a):a[C+8],E!==Ms&&cm(d,!1)?(v=a[je],C=Ai(E),a=zt(E,a)):C=-1);-1!==C;){const P=a[je];if(am(p,C,P.data)){const F=Tt(C,a,l,v,d,T);if(F!==cr)return F}E=a[C+8],E!==Ms&&cm(d,a[je].data[C+8]===T)&&am(p,C,a)?(v=P,C=Ai(E),a=zt(E,a)):C=-1}}return h}function Tt(s,a,l,d,h,p){const v=a[je],C=v.data[s+8],P=ko(C,v,l,null==d?Ks(C)&&ic:d!=v&&0!=(3&C.type),h&dt.Host&&p===C);return null!==P?ha(a,v,P,C):cr}function ko(s,a,l,d,h){const p=s.providerIndexes,v=a.data,C=1048575&p,E=s.directiveStart,P=p>>20,q=h?C+P:s.directiveEnd;for(let Y=d?C:C+P;Y<q;Y++){const ue=v[Y];if(Y<E&&l===ue||Y>=E&&ue.type===l)return Y}if(h){const Y=v[E];if(Y&&Gi(Y)&&Y.type===l)return E}return null}function ha(s,a,l,d){let h=s[l];const p=a.data;if(function Uu(s){return s instanceof la}(h)){const v=h;v.resolving&&function Re(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new ee(-200,`Circular dependency in DI detected for ${s}${l}`)}(function he(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():re(s)}(p[l]));const C=vr(v.canSeeViewProviders);v.resolving=!0;const T=v.injectImpl?on(v.injectImpl):null;Qh(s,d,dt.Default);try{h=s[l]=v.factory(void 0,p,s,d),a.firstCreatePass&&l>=d.directiveStart&&function mi(s,a,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=a.type.prototype;if(d){const v=$h(a);(l.preOrderHooks??=[]).push(s,v),(l.preOrderCheckHooks??=[]).push(s,v)}h&&(l.preOrderHooks??=[]).push(0-s,h),p&&((l.preOrderHooks??=[]).push(s,p),(l.preOrderCheckHooks??=[]).push(s,p))}(l,p[l],a)}finally{null!==T&&on(T),vr(C),v.resolving=!1,ut()}}return h}function am(s,a,l){return!!(l[a+(s>>sl)]&1<<s)}function cm(s,a){return!(s&dt.Self||s&dt.Host&&a)}class lr{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return nf(this._tNode,this._lView,a,Jt(d),l)}}function Ro(){return new lr(Dr(),ve())}function um(s){return js(()=>{const a=s.prototype.constructor,l=a[Hs]||$u(a),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const p=h[Hs]||$u(h);if(p&&p!==l)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function $u(s){return Te(s)?()=>{const a=$u(Ce(s));return a&&a()}:Ys(s)}function hm(s){const a=s[je],l=a.type;return 2===l?a.declTNode:1===l?s[_r]:null}function Hu(s){return function om(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const p=l[h];if(zs(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(p===a)return l[h+1];h+=2}}}return null}(Dr(),s)}const fa="__parameters__";function Gt(s,a,l){return js(()=>{const d=function Fo(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(a);function h(...p){if(this instanceof h)return d.apply(this,p),this;const v=new h(...p);return C.annotation=v,C;function C(E,T,P){const F=E.hasOwnProperty(fa)?E[fa]:Object.defineProperty(E,fa,{value:[]})[fa];for(;F.length<=P;)F.push(null);return(F[P]=F[P]||[]).push(v),E}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function cc(s,a){s.forEach(l=>Array.isArray(l)?cc(l,a):a(l))}function e0(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function lc(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Oi(s,a,l){let d=uc(s,a);return d>=0?s[1|d]=l:(d=~d,function gm(s,a,l,d){let h=s.length;if(h==a)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>a;)s[h]=s[h-2],h--;s[a]=l,s[a+1]=d}}(s,d,a,l)),d}function af(s,a){const l=uc(s,a);if(l>=0)return s[1|l]}function uc(s,a){return function Ku(s,a,l){let d=0,h=s.length>>l;for(;h!==d;){const p=d+(h-d>>1),v=s[p<<l];if(a===v)return p<<l;v>a?h=p:d=p+1}return~(h<<l)}(s,a,1)}const oe=gn(Gt("Optional"),8),He=gn(Gt("SkipSelf"),4);function ym(s){return 128==(128&s.flags)}var uf=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(uf||{});const df=new Map;let mP=0;const wm="__ngContext__";function vi(s,a){fi(a)?(s[wm]=a[Ws],function Ib(s){df.set(s[Ws],s)}(a)):s[wm]=a}let pf;function as(s,a){return pf(s,a)}function va(s){const a=s[mn];return Lr(a)?a[mn]:a}function Mb(s){return gf(s[Hc])}function p0(s){return gf(s[Si])}function gf(s){for(;null!==s&&!Lr(s);)s=s[Si];return s}function td(s,a,l,d,h){if(null!=d){let p,v=!1;Lr(d)?p=d:fi(d)&&(v=!0,d=d[Mn]);const C=an(d);0===s&&null!==l?null==h?Pb(a,l,C):gl(a,l,C,h||null,!0):1===s&&null!==l?gl(a,l,C,h||null,!0):2===s?function Tm(s,a,l){const d=Mm(s,a);d&&function AP(s,a,l,d){s.removeChild(a,l,d)}(s,d,a,l)}(a,C,v):3===s&&a.destroyNode(C),null!=p&&function kP(s,a,l,d,h){const p=l[Xr];p!==an(l)&&td(a,s,d,p,h);for(let C=or;C<l.length;C++){const E=l[C];wf(E[je],E,s,a,d,p)}}(a,s,p,l,h)}}function bm(s,a,l){return s.createElement(a,l)}function Tb(s,a){const l=s[Wa],d=l.indexOf(a);zv(a),l.splice(d,1)}function Em(s,a){if(s.length<=or)return;const l=or+a,d=s[l];if(d){const h=d[qa];null!==h&&h!==s&&Tb(h,d),a>0&&(s[l-1][Si]=d[Si]);const p=lc(s,or+a);!function TP(s,a){wf(s,a,a[pt],2,null,null),a[Mn]=null,a[_r]=null}(d[je],d);const v=p[Jr];null!==v&&v.detachView(p[je]),d[mn]=null,d[Si]=null,d[Et]&=-129}return d}function g0(s,a){if(!(256&a[Et])){const l=a[pt];a[Iu]&&Lh(a[Iu]),a[zi]&&Lh(a[zi]),l.destroyNode&&wf(s,a,l,3,null,null),function DP(s){let a=s[Hc];if(!a)return Db(s[je],s);for(;a;){let l=null;if(fi(a))l=a[Hc];else{const d=a[or];d&&(l=d)}if(!l){for(;a&&!a[Si]&&a!==s;)fi(a)&&Db(a[je],a),a=a[mn];null===a&&(a=s),fi(a)&&Db(a[je],a),l=a&&a[Si]}a=l}}(a)}}function Db(s,a){if(!(256&a[Et])){a[Et]&=-129,a[Et]|=256,function Sb(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=a[l[d]];if(!(h instanceof la)){const p=l[d+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const C=h[p[v]],E=p[v+1];Is(4,C,E);try{E.call(C)}finally{Is(5,C,E)}}else{Is(4,h,p);try{p.call(h)}finally{Is(5,h,p)}}}}}(s,a),function xP(s,a){const l=s.cleanup,d=a[oa];if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const v=l[p+3];v>=0?d[v]():d[-v].unsubscribe(),p+=2}else l[p].call(d[l[p+1]]);null!==d&&(a[oa]=null);const h=a[aa];if(null!==h){a[aa]=null;for(let p=0;p<h.length;p++)(0,h[p])()}}(s,a),1===a[je].type&&a[pt].destroy();const l=a[qa];if(null!==l&&Lr(a[mn])){l!==a[mn]&&Tb(l,a);const d=a[Jr];null!==d&&d.detachView(s)}!function hf(s){df.delete(s[Ws])}(a)}}function nd(s,a,l){return function pl(s,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[Mn];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:p}=s.data[d.directiveStart+h];if(p===$s.None||p===$s.Emulated)return null}return ni(d,l)}}(s,a.parent,l)}function gl(s,a,l,d,h){s.insertBefore(a,l,d,h)}function Pb(s,a,l){s.appendChild(a,l)}function xb(s,a,l,d,h){null!==d?gl(s,a,l,d,h):Pb(s,a,l)}function Mm(s,a){return s.parentNode(a)}let _0,Fb,Sm,m0=function Ob(s,a,l){return 40&s.type?ni(s,l):null};function vf(s,a,l,d){const h=nd(s,d,a),p=a[pt],C=function Ab(s,a,l){return m0(s,a,l)}(d.parent||a[_r],d,a);if(null!=h)if(Array.isArray(l))for(let E=0;E<l.length;E++)xb(p,h,l[E],C,!1);else xb(p,h,l,C,!1);void 0!==_0&&_0(p,d,a,l,h)}function Bo(s,a){if(null!==a){const l=a.type;if(3&l)return ni(a,s);if(4&l)return v0(-1,s[a.index]);if(8&l){const d=a.child;if(null!==d)return Bo(s,d);{const h=s[a.index];return Lr(h)?v0(-1,h):an(h)}}if(32&l)return as(a,s)()||an(s[a.index]);{const d=y0(s,a);return null!==d?Array.isArray(d)?d[0]:Bo(va(s[sr]),d):Bo(s,a.next)}}return null}function y0(s,a){return null!==a?s[sr][_r].projection[a.projection]:null}function v0(s,a){const l=or+s+1;if(l<a.length){const d=a[l],h=d[je].firstChild;if(null!==h)return Bo(d,h)}return a[Xr]}function Cf(s,a,l,d,h,p,v){for(;null!=l;){const C=d[l.index],E=l.type;if(v&&0===a&&(C&&vi(an(C),d),l.flags|=2),32!=(32&l.flags))if(8&E)Cf(s,a,l.child,d,h,p,!1),td(a,s,h,C,p);else if(32&E){const T=as(l,d);let P;for(;P=T();)td(a,s,h,P,p);td(a,s,h,C,p)}else 16&E?w0(s,a,d,l,h,p):td(a,s,h,C,p);l=v?l.projectionNext:l.next}}function wf(s,a,l,d,h,p){Cf(l,d,s.firstChild,a,h,p,!1)}function w0(s,a,l,d,h,p){const v=l[sr],E=v[_r].projection[d.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)td(a,s,h,E[T],p);else{let T=E;const P=v[mn];ym(d)&&(T.flags|=128),Cf(s,a,T,P,h,p,!0)}}function Nb(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function If(s,a,l){const{mergedAttrs:d,classes:h,styles:p}=l;null!==d&&Kr(s,a,d),null!==h&&Nb(s,a,h),null!==p&&function RP(s,a,l){s.setAttribute(a,"style",l)}(s,a,p)}function Lb(s){Fb=s}function Vb(s){return function b0(){if(void 0===Sm&&(Sm=null,Nt.trustedTypes))try{Sm=Nt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Sm}()?.createScriptURL(s)||s}class jb{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function hc(s){return s instanceof jb?s.changingThisBreaksApplicationSecurity:s}function sd(s,a){const l=function Pm(s){return s instanceof jb&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see ${ot})`)}return l===a}const bf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Tf=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(Tf||{});function Df(s){const a=Sf();return a?a.sanitize(Tf.URL,s)||"":sd(s,"URL")?hc(s):function Am(s){return(s=String(s)).match(bf)?s:"unsafe:"+s}(re(s))}function Yb(s){const a=Sf();if(a)return Vb(a.sanitize(Tf.RESOURCE_URL,s)||"");if(sd(s,"ResourceURL"))return Vb(hc(s));throw new ee(904,!1)}function YP(s,a,l){return function KP(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?Yb:Df}(a,l)(s)}function Sf(){const s=ve();return s&&s[Eo].sanitizer}class cn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=ft({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ad=new cn("ENVIRONMENT_INITIALIZER"),Jb=new cn("INJECTOR",-1),Xb=new cn("INJECTOR_DEF_TYPES");class Om{get(a,l=it){if(l===it){const d=new Error(`NullInjectorError: No provider for ${J(a)}!`);throw d.name="NullInjectorError",d}return l}}function P0(s){return{\u0275providers:s}}function QP(...s){return{\u0275providers:eE(0,s),\u0275fromNgModule:!0}}function eE(s,...a){const l=[],d=new Set;let h;const p=v=>{l.push(v)};return cc(a,v=>{const C=v;km(C,p,[],d)&&(h||=[],h.push(C))}),void 0!==h&&tE(h,p),l}function tE(s,a){for(let l=0;l<s.length;l++){const{ngModule:d,providers:h}=s[l];x0(h,p=>{a(p,d)})}}function km(s,a,l,d){if(!(s=Ce(s)))return!1;let h=null,p=Fr(s);const v=!p&&Ft(s);if(p||v){if(v&&!v.standalone)return!1;h=s}else{const E=s.ngModule;if(p=Fr(E),!p)return!1;h=E}const C=d.has(h);if(v){if(C)return!1;if(d.add(h),v.dependencies){const E="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of E)km(T,a,l,d)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let T;d.add(h);try{cc(p.imports,P=>{km(P,a,l,d)&&(T||=[],T.push(P))})}finally{}void 0!==T&&tE(T,a)}if(!C){const T=Ys(h)||(()=>new h);a({provide:h,useFactory:T,deps:Yt},h),a({provide:Xb,useValue:h,multi:!0},h),a({provide:ad,useValue:()=>Ve(h),multi:!0},h)}const E=p.providers;if(null!=E&&!C){const T=s;x0(E,P=>{a(P,T)})}}}return h!==s&&void 0!==s.providers}function x0(s,a){for(let l of s)Ee(l)&&(l=l.\u0275providers),Array.isArray(l)?x0(l,a):a(l)}const VF=B({provide:String,useValue:B});function nE(s){return null!==s&&"object"==typeof s&&VF in s}function cd(s){return"function"==typeof s}const N=new cn("Set Injector scope."),Nm={},Zt={};let A0;function _l(){return void 0===A0&&(A0=new Om),A0}class Vo{}class Pf extends Vo{get destroyed(){return this._destroyed}constructor(a,l,d,h){super(),this.parent=l,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Cr(a,v=>this.processProvider(v)),this.records.set(Jb,Of(void 0,this)),h.has("environment")&&this.records.set(Vo,Of(void 0,this));const p=this.records.get(N);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Xb.multi,Yt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const l of a)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const l=K(this),d=on(void 0);try{return a()}finally{K(l),on(d)}}get(a,l=it,d=dt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(pu))return a[pu](this);d=Jt(d);const p=K(this),v=on(void 0);try{if(!(d&dt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const T=function nx(s){return"function"==typeof s||"object"==typeof s&&s instanceof cn}(a)&&En(a);E=T&&this.injectableDefInScope(T)?Of(xf(a),Nm):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&dt.Self?_l():this.parent).get(a,l=d&dt.Optional&&l===it?null:l)}catch(C){if("NullInjectorError"===C.name){if((C[Bt]=C[Bt]||[]).unshift(J(a)),p)throw C;return function $i(s,a,l,d){const h=s[Bt];throw a[O]&&h.unshift(a[O]),s.message=function Bc(s,a,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=J(a);if(Array.isArray(a))h=a.map(J).join(" -> ");else if("object"==typeof a){let p=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];p.push(v+":"+("string"==typeof C?JSON.stringify(C):J(C)))}h=`{${p.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(H,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[Bt]=null,s}(C,a,"R3InjectorError",this.source)}throw C}finally{on(v),K(p)}}resolveInjectorInitializers(){const a=K(this),l=on(void 0);try{const h=this.get(ad.multi,Yt,dt.Self);for(const p of h)p()}finally{K(a),on(l)}}toString(){const a=[],l=this.records;for(const d of l.keys())a.push(J(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(a){let l=cd(a=Ce(a))?a:Ce(a&&a.provide);const d=function rE(s){return nE(s)?Of(void 0,s.useValue):Of(O0(s),Nm)}(a);if(cd(a)||!0!==a.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=Of(void 0,Nm,!0),h.factory=()=>wt(h.multi),this.records.set(l,h)),l=a,h.multi.push(a)}this.records.set(l,d)}hydrate(a,l){return l.value===Nm&&(l.value=Zt,l.value=l.factory()),"object"==typeof l.value&&l.value&&function tx(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=Ce(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}removeOnDestroy(a){const l=this._onDestroyHooks.indexOf(a);-1!==l&&this._onDestroyHooks.splice(l,1)}}function xf(s){const a=En(s),l=null!==a?a.factory:Ys(s);if(null!==l)return l;if(s instanceof cn)throw new ee(204,!1);if(s instanceof Function)return function Af(s){const a=s.length;if(a>0)throw function Lo(s,a){const l=[];for(let d=0;d<s;d++)l.push(a);return l}(a,"?"),new ee(204,!1);const l=function Ti(s){return s&&(s[gr]||s[qr])||null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new ee(204,!1)}function O0(s,a,l){let d;if(cd(s)){const h=Ce(s);return Ys(h)||xf(h)}if(nE(s))d=()=>Ce(s.useValue);else if(function ex(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...wt(s.deps||[]));else if(function XP(s){return!(!s||!s.useExisting)}(s))d=()=>Ve(Ce(s.useExisting));else{const h=Ce(s&&(s.useClass||s.provide));if(!function Sn(s){return!!s.deps}(s))return Ys(h)||xf(h);d=()=>new h(...wt(s.deps))}return d}function Of(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function Cr(s,a){for(const l of s)Array.isArray(l)?Cr(l,a):l&&Ee(l)?Cr(l.\u0275providers,a):a(l)}const ki=new cn("AppId",{providedIn:"root",factory:()=>z}),z="ng",iE=new cn("Platform Initializer"),k0=new cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),oE=new cn("CSP nonce",{providedIn:"root",factory:()=>function ml(){if(void 0!==Fb)return Fb;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let aE=(s,a,l)=>null;function j0(s,a,l=!1){return aE(s,a,l)}class WF{}class lE{}class dE{resolveComponentFactory(a){throw function wa(s){const a=Error(`No component factory found for ${J(s)}.`);return a.ngComponent=s,a}(a)}}let Rf=(()=>{class s{static#e=this.NULL=new dE}return s})();function KF(){return Ff(Dr(),ve())}function Ff(s,a){return new Il(ni(s,a))}let Il=(()=>{class s{constructor(l){this.nativeElement=l}static#e=this.__NG_ELEMENT_ID__=KF}return s})();function Ni(s){return s instanceof Il?s.nativeElement:s}class lx{}let YF=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function ux(){const s=ve(),l=pi(Dr().index,s);return(fi(l)?l:s)[pt]}()}return s})(),dx=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>null})}return s})();class dd{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Bm=new dd("16.2.9"),Vm={};function Z0(s,a=null,l=null,d){const h=mE(s,a,l,d);return h.resolveInjectorInitializers(),h}function mE(s,a=null,l=null,d,h=new Set){const p=[l||Yt,QP(s)];return d=d||("object"==typeof s?void 0:J(s)),new Pf(p,a||_l(),d||null,h)}let ao=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=it;static#t=this.NULL=new Om;static create(l,d){if(Array.isArray(l))return Z0({name:""},d,l,"");{const h=l.name??"";return Z0({name:h},l.parent,l.providers,h)}}static#n=this.\u0275prov=ft({token:s,providedIn:"any",factory:()=>Ve(Jb)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function W0(s){return s.ngOriginalError}class fc{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&W0(a);for(;l&&W0(l);)l=W0(l);return l||null}}function Uf(s){return a=>{setTimeout(s,void 0,a)}}const jo=class Y0 extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){let h=a,p=l||(()=>null),v=d;if(a&&"object"==typeof a){const E=a;h=E.next?.bind(E),p=E.error?.bind(E),v=E.complete?.bind(E)}this.__isAsync&&(p=Uf(p),h&&(h=Uf(h)),v&&(v=Uf(v)));const C=super.subscribe({next:h,error:p,complete:v});return a instanceof V.w0&&a.add(C),C}};function _E(...s){}class Br{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jo(!1),this.onMicrotaskEmpty=new jo(!1),this.onStable=new jo(!1),this.onError=new jo(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Q0(){const s="function"==typeof Nt.requestAnimationFrame;let a=Nt[s?"requestAnimationFrame":"setTimeout"],l=Nt[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&l){const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function _x(s){const a=()=>{!function J0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Nt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,yE(s),s.isCheckStableRunning=!0,$o(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),yE(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,p,v,C)=>{if(function nC(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(C))return l.invokeTask(h,p,v,C);try{return vE(s),l.invokeTask(h,p,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&a(),CE(s)}},onInvoke:(l,d,h,p,v,C,E)=>{try{return vE(s),l.invoke(h,p,v,C,E)}finally{s.shouldCoalesceRunChangeDetection&&a(),CE(s)}},onHasTask:(l,d,h,p)=>{l.hasTask(h,p),d===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,yE(s),$o(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,d,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Br.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(Br.isInAngularZone())throw new ee(909,!1)}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,h){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+h,a,mx,_E,_E);try{return p.runTask(v,l,d)}finally{p.cancelTask(v)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const mx={};function $o(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function yE(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function vE(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function CE(s){s._nesting--,$o(s)}class X0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jo,this.onMicrotaskEmpty=new jo,this.onStable=new jo,this.onError=new jo}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,h){return a.apply(l,d)}}const eC=new cn("",{providedIn:"root",factory:tC});function tC(){const s=Ke(Br);let a=!0;const l=new U.y(h=>{a=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(a),h.complete()})}),d=new U.y(h=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{Br.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(a=!0,h.next(!0))})})});const v=s.onUnstable.subscribe(()=>{Br.assertInAngularZone(),a&&(a=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{p.unsubscribe(),v.unsubscribe()}});return(0,ne.T)(l,d.pipe((0,Ae.B)()))}function Ia(s){return s instanceof Function?s():s}let Bf=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function pd(s){for(;s;){s[Et]|=64;const a=va(s);if(Ka(s)&&!a)return s;s=a}return null}const sC=new cn("",{providedIn:"root",factory:()=>!1});let zm=null;function bl(s,a){return s[a]??uC()}function lC(s,a){const l=uC();l.producerNode?.length&&(s[a]=zm,l.lView=s,zm=TE())}const Ix={...Rh,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{pd(s.lView)},lView:null};function TE(){return Object.create(Ix)}function uC(){return zm??=TE(),zm}const Dt={};function pc(s){dC(Vt(),ve(),ri()+s,!1)}function dC(s,a,l,d){if(!d)if(3==(3&a[Et])){const p=s.preOrderCheckHooks;null!==p&&nc(a,p,l)}else{const p=s.preOrderHooks;null!==p&&rc(a,p,0,l)}eo(l)}function El(s,a=dt.Default){const l=ve();return null===l?Ve(s,a):nf(Dr(),l,Ce(s),a)}function DE(){throw new Error("invalid")}function zo(s,a,l,d,h,p,v,C,E,T,P){const F=a.blueprint.slice();return F[Mn]=h,F[Et]=140|d,(null!==T||s&&2048&s[Et])&&(F[Et]|=2048),Zg(F),F[mn]=F[Pi]=s,F[Wn]=l,F[Eo]=v||s&&s[Eo],F[pt]=C||s&&s[pt],F[qs]=E||s&&s[qs]||null,F[_r]=p,F[Ws]=function Cm(){return mP++}(),F[ws]=P,F[kg]=T,F[sr]=2==a.type?s[sr]:F,F}function gc(s,a,l,d,h){let p=s.data[a];if(null===p)p=function jf(s,a,l,d,h){const p=Nu(),v=Jg(),E=s.data[a]=function PE(s,a,l,d,h,p){let v=a?a.injectorIndex:-1,C=0;return function So(){return null!==_t.skipHydrationRootTNode}()&&(C|=128),{type:l,index:d,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,l,a,d,h);return null===s.firstChild&&(s.firstChild=E),null!==p&&(v?null==p.child&&null!==E.parent&&(p.child=E):null===p.next&&(p.next=E,E.prev=p)),E}(s,a,l,d,h),function db(){return _t.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=l,p.value=d,p.attrs=h;const v=function Jc(){const s=_t.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return bs(p,!0),p}function mc(s,a,l,d){if(0===l)return-1;const h=a.length;for(let p=0;p<l;p++)a.push(d),s.blueprint.push(d),s.data.push(null);return h}function Gm(s,a,l,d,h){const p=bl(a,Iu),v=ri(),C=2&d;try{eo(-1),C&&a.length>Lt&&dC(s,a,Lt,!1),Is(C?2:0,h);const T=C?p:null,P=Ug(T);try{null!==T&&(T.dirty=!1),l(d,h)}finally{Mu(T,P)}}finally{C&&null===a[Iu]&&lC(a,Iu),eo(v),Is(C?3:1,h)}}function $f(s,a,l){if(Ph(a)){const d=ti(null);try{const p=a.directiveEnd;for(let v=a.directiveStart;v<p;v++){const C=s.data[v];C.contentQueries&&C.contentQueries(1,l[v],v)}}finally{ti(d)}}}function Hf(s,a,l){ec()&&(function AE(s,a,l,d){const h=l.directiveStart,p=l.directiveEnd;Ks(l)&&function kx(s,a,l){const d=ni(a,s),h=Zm(l);let v=16;l.signals?v=4096:l.onPush&&(v=64);const C=TC(s,zo(s,h,null,v,d,a,null,s[Eo].rendererFactory.createRenderer(d,l),null,null,null));s[a.index]=C}(a,l,s.data[h+l.componentOffset]),s.firstCreatePass||Dn(l,a),vi(d,a);const v=l.initialInputs;for(let C=h;C<p;C++){const E=s.data[C],T=ha(a,s,C,l);vi(T,a),null!==v&&MC(0,C-h,T,E,0,v),Gi(E)&&(pi(l.index,a)[Wn]=ha(a,s,C,l))}}(s,a,l,ni(l,a)),64==(64&l.flags)&&OE(s,a,l))}function Ml(s,a,l=ni){const d=a.localNames;if(null!==d){let h=a.index+1;for(let p=0;p<d.length;p+=2){const v=d[p+1],C=-1===v?l(a,s):s[v];s[h++]=C}}}function Zm(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=zf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):a}function zf(s,a,l,d,h,p,v,C,E,T,P){const F=Lt+d,q=F+h,Y=function hC(s,a){const l=[];for(let d=0;d<a;d++)l.push(d<s?null:Dt);return l}(F,q),ue="function"==typeof T?T():T;return Y[je]={type:s,blueprint:Y,template:l,queries:null,viewQuery:C,declTNode:a,data:Y.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:ue,incompleteFirstPass:!1,ssrId:P}}let SE=s=>null;function gC(s,a,l,d){for(let h in s)if(s.hasOwnProperty(h)){l=null===l?{}:l;const p=s[h];null===d?xE(l,a,h,p):d.hasOwnProperty(h)&&xE(l,a,d[h],p)}return l}function xE(s,a,l,d){s.hasOwnProperty(l)?s[l].push(a,d):s[l]=[a,d]}function cs(s,a,l,d,h,p,v,C){const E=ni(a,l);let P,T=a.inputs;!C&&null!=T&&(P=T[d])?(PC(s,l,P,d,h),Ks(a)&&function _C(s,a){const l=pi(a,s);16&l[Et]||(l[Et]|=64)}(l,a.index)):3&a.type&&(d=function mC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=v?v(h,a.value||"",d):h,p.setProperty(E,d,h))}function Gf(s,a,l,d){if(ec()){const h=null===d?null:{"":-1},p=function xx(s,a){const l=s.directiveRegistry;let d=null,h=null;if(l)for(let p=0;p<l.length;p++){const v=l[p];if(wh(a,v.selectors,!1))if(d||(d=[]),Gi(v))if(null!==v.findHostDirectiveDefs){const C=[];h=h||new Map,v.findHostDirectiveDefs(v,C,h),d.unshift(...C,v),wC(s,a,C.length)}else d.unshift(v),wC(s,a,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,d,h),d.push(v)}return null===d?null:[d,h]}(s,l);let v,C;null===p?v=C=null:[v,C]=p,null!==v&&vC(s,a,l,v,h,C),h&&function Ax(s,a,l){if(a){const d=s.localNames=[];for(let h=0;h<a.length;h+=2){const p=l[a[h+1]];if(null==p)throw new ee(-301,!1);d.push(a[h],p)}}}(l,d,h)}l.mergedAttrs=jc(l.mergedAttrs,l.attrs)}function vC(s,a,l,d,h,p){for(let T=0;T<d.length;T++)sc(Dn(l,a),s,d[T].type);!function Ox(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}(l,s.data.length,d.length);for(let T=0;T<d.length;T++){const P=d[T];P.providersResolver&&P.providersResolver(P)}let v=!1,C=!1,E=mc(s,a,d.length,null);for(let T=0;T<d.length;T++){const P=d[T];l.mergedAttrs=jc(l.mergedAttrs,P.hostAttrs),bC(s,l,a,E,P),IC(E,P,h),null!==P.contentQueries&&(l.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(l.flags|=64);const F=P.type.prototype;!v&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((s.preOrderHooks??=[]).push(l.index),v=!0),!C&&(F.ngOnChanges||F.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(l.index),C=!0),E++}!function Dx(s,a,l){const h=a.directiveEnd,p=s.data,v=a.attrs,C=[];let E=null,T=null;for(let P=a.directiveStart;P<h;P++){const F=p[P],q=l?l.get(F):null,ue=q?q.outputs:null;E=gC(F.inputs,P,E,q?q.inputs:null),T=gC(F.outputs,P,T,ue);const De=null===E||null===v||hn(a)?null:iL(E,P,v);C.push(De)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=8),E.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=E,a.outputs=T}(s,l,p)}function OE(s,a,l){const d=l.directiveStart,h=l.directiveEnd,p=l.index,v=function hb(){return _t.lFrame.currentDirectiveIndex}();try{eo(p);for(let C=d;C<h;C++){const E=s.data[C],T=a[C];nm(C),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Px(E,T)}}finally{eo(-1),nm(v)}}function Px(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function wC(s,a,l){a.componentOffset=l,(s.components??=[]).push(a.index)}function IC(s,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=s;Gi(a)&&(l[""]=s)}}function bC(s,a,l,d,h){s.data[d]=h;const p=h.factory||(h.factory=Ys(h.type)),v=new la(p,Gi(h),El);s.blueprint[d]=v,l[d]=v,function Sx(s,a,l,d,h){const p=h.hostBindings;if(p){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~a.index;(function CC(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(v)!=C&&v.push(C),v.push(l,d,p)}}(s,a,d,mc(s,l,h.hostVars,Dt),h)}function xs(s,a,l,d,h,p){const v=ni(s,a);!function EC(s,a,l,d,h,p,v){if(null==p)s.removeAttribute(a,h,l);else{const C=null==v?re(p):v(p,d||"",h);s.setAttribute(a,h,C,l)}}(a[pt],v,p,s.value,l,d,h)}function MC(s,a,l,d,h,p){const v=p[a];if(null!==v)for(let C=0;C<v.length;)kE(d,l,v[C++],v[C++],v[C++])}function kE(s,a,l,d,h){const p=ti(null);try{const v=s.inputTransforms;null!==v&&v.hasOwnProperty(d)&&(h=v[d].call(a,h)),null!==s.setInput?s.setInput(a,h,l,d):a[d]=h}finally{ti(p)}}function iL(s,a,l){let d=null,h=0;for(;h<l.length;){const p=l[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===d&&(d=[]);const v=s[p];for(let C=0;C<v.length;C+=2)if(v[C]===a){d.push(p,v[C+1],l[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function qm(s,a,l,d){return[s,!0,!1,a,null,0,d,l,null,null,null]}function Nx(s,a){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const p=l[d+1];if(-1!==p){const v=s.data[p];rm(l[d]),v.contentQueries(2,a[p],p)}}}function TC(s,a){return s[Hc]?s[Iv][Si]=a:s[Hc]=a,s[Iv]=a,a}function DC(s,a,l){rm(0);const d=ti(null);try{a(s,l)}finally{ti(d)}}function SC(s){return s[oa]||(s[oa]=[])}function RE(s){return s.cleanup||(s.cleanup=[])}function LE(s,a){const l=s[qs],d=l?l.get(fc,null):null;d&&d.handleError(a)}function PC(s,a,l,d,h){for(let p=0;p<l.length;){const v=l[p++],C=l[p++];kE(s.data[v],a[v],d,C,h)}}function co(s,a,l){const d=Js(a,s);!function hl(s,a,l){s.setValue(a,l)}(s[pt],d,l)}function UE(s,a){const l=pi(a,s),d=l[je];!function Rx(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])}(d,l);const h=l[Mn];null!==h&&null===l[ws]&&(l[ws]=j0(h,l[qs])),Wm(d,l,l[Wn])}function Wm(s,a,l){gi(a);try{const d=s.viewQuery;null!==d&&DC(1,d,l);const h=s.template;null!==h&&Gm(s,a,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Nx(s,a),s.staticViewQueries&&DC(2,s.viewQuery,l);const p=s.components;null!==p&&function Fx(s,a){for(let l=0;l<a.length;l++)UE(s,a[l])}(a,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[Et]&=-5,ar()}}let Ri=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(l,d,h){const p=typeof Zone>"u"?null:Zone.current,v=function Vv(s,a,l){const d=Object.create(ob);l&&(d.consumerAllowSignalWrites=!0),d.fn=s,d.schedule=a;const h=v=>{d.cleanupFn=v};return d.ref={notify:()=>kv(d),run:()=>{if(d.dirty=!1,d.hasRun&&!Nv(d))return;d.hasRun=!0;const v=Ug(d);try{d.cleanupFn(),d.cleanupFn=zg,d.fn(h)}finally{Mu(d,v)}},cleanup:()=>d.cleanupFn()},d.ref}(l,T=>{this.all.has(T)&&this.queue.set(T,p)},h);let C;this.all.add(v),v.notify();const E=()=>{v.cleanup(),C?.(),this.all.delete(v),this.queue.delete(v)};return C=d?.onDestroy(E),{destroy:E}}flush(){if(0!==this.queue.size)for(const[l,d]of this.queue)this.queue.delete(l),d?d.run(()=>l.run()):l.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function Km(s,a,l){let d=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?p=C:1==p?h=Oe(h,C):2==p&&(d=Oe(d,C+": "+a[++v]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}function Zf(s,a,l,d,h=!1){for(;null!==l;){const p=a[l.index];null!==p&&d.push(an(p)),Lr(p)&&xC(p,d);const v=l.type;if(8&v)Zf(s,a,l.child,d);else if(32&v){const C=as(l,a);let E;for(;E=C();)d.push(E)}else if(16&v){const C=y0(a,l);if(Array.isArray(C))d.push(...C);else{const E=va(a[sr]);Zf(E[je],E,C,d,!0)}}l=h?l.projectionNext:l.next}return d}function xC(s,a){for(let l=or;l<s.length;l++){const d=s[l],h=d[je].firstChild;null!==h&&Zf(d[je],d,h,a)}s[Xr]!==s[Mn]&&a.push(s[Xr])}function Ym(s,a,l,d=!0){const h=a[Eo],p=h.rendererFactory,v=h.afterRenderEventManager;p.begin?.(),v?.begin();try{VE(s,a,s.template,l)}catch(E){throw d&&LE(a,E),E}finally{p.end?.(),h.effectManager?.flush(),v?.end()}}function VE(s,a,l,d){const h=a[Et];if(256!=(256&h)){a[Eo].effectManager?.flush(),gi(a);try{Zg(a),function Kv(s){return _t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Gm(s,a,l,2,d);const v=3==(3&h);if(v){const T=s.preOrderCheckHooks;null!==T&&nc(a,T,null)}else{const T=s.preOrderHooks;null!==T&&rc(a,T,0,null),Fu(a,0)}if(function Ux(s){for(let a=Mb(s);null!==a;a=p0(a)){if(!a[zc])continue;const l=a[Wa];for(let d=0;d<l.length;d++){Yc(l[d])}}}(a),Qm(a,2),null!==s.contentQueries&&Nx(s,a),v){const T=s.contentCheckHooks;null!==T&&nc(a,T)}else{const T=s.contentHooks;null!==T&&rc(a,T,1),Fu(a,1)}!function bx(s,a){const l=s.hostBindingOpCodes;if(null===l)return;const d=bl(a,zi);try{for(let h=0;h<l.length;h++){const p=l[h];if(p<0)eo(~p);else{const v=p,C=l[++h],E=l[++h];tm(C,v),d.dirty=!1;const T=Ug(d);try{E(2,a[v])}finally{Mu(d,T)}}}}finally{null===a[zi]&&lC(a,zi),eo(-1)}}(s,a);const C=s.components;null!==C&&Vx(a,C,0);const E=s.viewQuery;if(null!==E&&DC(2,E,d),v){const T=s.viewCheckHooks;null!==T&&nc(a,T)}else{const T=s.viewHooks;null!==T&&rc(a,T,2),Fu(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Et]&=-73,zv(a)}finally{ar()}}}function Qm(s,a){for(let l=Mb(s);null!==l;l=p0(l))for(let d=or;d<l.length;d++)Jm(l[d],a)}function Bx(s,a,l){Jm(pi(a,s),l)}function Jm(s,a){if(!function lb(s){return 128==(128&s[Et])}(s))return;const l=s[je],d=s[Et];if(80&d&&0===a||1024&d||2===a)VE(l,s,l.template,s[Wn]);else if(s[Zs]>0){Qm(s,1);const h=l.components;null!==h&&Vx(s,h,1)}}function Vx(s,a,l){for(let d=0;d<a.length;d++)Bx(s,a[d],l)}class Xm{get rootNodes(){const a=this._lView,l=a[je];return Zf(l,a,l.firstChild,[])}constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(a){this._lView[Wn]=a}get destroyed(){return 256==(256&this._lView[Et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[mn];if(Lr(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(Em(a,d),lc(l,d))}this._attachedToViewContainer=!1}g0(this._lView[je],this._lView)}onDestroy(a){!function qh(s,a){if(256==(256&s[Et]))throw new ee(911,!1);null===s[aa]&&(s[aa]=[]),s[aa].push(a)}(this._lView,a)}markForCheck(){pd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Et]&=-129}reattach(){this._lView[Et]|=128}detectChanges(){Ym(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _f(s,a){wf(s,a,a[pt],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=a}}class oL extends Xm{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Ym(a[je],a,a[Wn],!1)}checkNoChanges(){}get context(){return null}}class jx extends Rf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=Ft(a);return new Wf(l,this.ngModule)}}function qf(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class $x{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,d){d=Jt(d);const h=this.injector.get(a,Vm,d);return h!==Vm||l===Vm?h:this.parentInjector.get(a,l,d)}}class Wf extends lE{get inputs(){const a=this.componentDef,l=a.inputTransforms,d=qf(a.inputs);if(null!==l)for(const h of d)l.hasOwnProperty(h.propName)&&(h.transform=l[h.propName]);return d}get outputs(){return qf(this.componentDef.outputs)}constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function eb(s){return s.map(Ag).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}create(a,l,d,h){let p=(h=h||this.ngModule)instanceof Vo?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new $x(a,p):a,C=v.get(lx,null);if(null===C)throw new ee(407,!1);const F={rendererFactory:C,sanitizer:v.get(dx,null),effectManager:v.get(Ri,null),afterRenderEventManager:v.get(Bf,null)},q=C.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ue=d?function Ex(s,a,l,d){const p=d.get(sC,!1)||l===$s.ShadowDom,v=s.selectRootElement(a,p);return function Mx(s){SE(s)}(v),v}(q,d,this.componentDef.encapsulation,v):bm(q,Y,function aL(s){const a=s.toLowerCase();return"svg"===a?Gg:"math"===a?"math":null}(Y)),ct=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let fe=null;null!==ue&&(fe=j0(ue,v,!0));const Ct=zf(0,null,null,1,0,null,null,null,null,null,null),St=zo(null,Ct,null,ct,null,null,F,q,v,null,fe);let ln,Yn;gi(St);try{const Jo=this.componentDef;let Xo,RI=null;Jo.findHostDirectiveDefs?(Xo=[],RI=new Map,Jo.findHostDirectiveDefs(Jo,Xo,RI),Xo.push(Jo)):Xo=[Jo];const KO=function zx(s,a){const l=s[je],d=Lt;return s[d]=a,gc(l,d,2,"#host",null)}(St,ue),At=function Gx(s,a,l,d,h,p,v){const C=h[je];!function Zx(s,a,l,d){for(const h of s)a.mergedAttrs=jc(a.mergedAttrs,h.hostAttrs);null!==a.mergedAttrs&&(Km(a,a.mergedAttrs,!0),null!==l&&If(d,l,a))}(d,s,a,v);let E=null;null!==a&&(E=j0(a,h[qs]));const T=p.rendererFactory.createRenderer(a,l);let P=16;l.signals?P=4096:l.onPush&&(P=64);const F=zo(h,Zm(l),null,P,h[s.index],s,p,T,null,null,E);return C.firstCreatePass&&wC(C,s,d.length-1),TC(h,F),h[s.index]=F}(KO,ue,Jo,Xo,St,F,q);Yn=Gh(Ct,Lt),ue&&function Wx(s,a,l,d){if(d)Kr(s,l,["ng-version",Bm.full]);else{const{attrs:h,classes:p}=function Di(s){const a=[],l=[];let d=1,h=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===h?""!==p&&a.push(p,s[++d]):8===h&&l.push(p);else{if(!hi(h))break;h=p}d++}return{attrs:a,classes:l}}(a.selectors[0]);h&&Kr(s,l,h),p&&p.length>0&&Nb(s,l,p.join(" "))}}(q,Jo,ue,d),void 0!==l&&function Kx(s,a,l){const d=s.projection=[];for(let h=0;h<a.length;h++){const p=l[h];d.push(null!=p?Array.from(p):null)}}(Yn,this.ngContentSelectors,l),ln=function qx(s,a,l,d,h,p){const v=Dr(),C=h[je],E=ni(v,h);vC(C,h,v,l,null,d);for(let P=0;P<l.length;P++)vi(ha(h,C,v.directiveStart+P,v),h);OE(C,h,v),E&&vi(E,h);const T=ha(h,C,v.directiveStart+v.componentOffset,v);if(s[Wn]=h[Wn]=T,null!==p)for(const P of p)P(T,a);return $f(C,v,s),T}(At,Jo,Xo,RI,St,[Yx]),Wm(Ct,St,null)}finally{ar()}return new Hx(this.componentType,ln,Ff(Yn,St),St,Yn)}}class Hx extends WF{constructor(a,l,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.previousInputValues=null,this.instance=l,this.hostView=this.changeDetectorRef=new oL(h),this.componentType=a}setInput(a,l){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),l))return;const p=this._rootLView;PC(p[je],p,h,a,l),this.previousInputValues.set(a,l),pd(pi(this._tNode.index,p))}}get injector(){return new lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function Yx(){const s=Dr();tc(ve()[je],s)}function ba(s){let a=function Kf(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;a;){let h;if(Gi(s))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ee(903,!1);h=a.\u0275dir}if(h){if(l){d.push(h);const v=s;v.inputs=e_(s.inputs),v.inputTransforms=e_(s.inputTransforms),v.declaredInputs=e_(s.declaredInputs),v.outputs=e_(s.outputs);const C=h.hostBindings;C&&eA(s,C);const E=h.viewQuery,T=h.contentQueries;if(E&&Jx(s,E),T&&Xx(s,T),G(s.inputs,h.inputs),G(s.declaredInputs,h.declaredInputs),G(s.outputs,h.outputs),null!==h.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),G(v.inputTransforms,h.inputTransforms)),Gi(h)&&h.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let v=0;v<p.length;v++){const C=p[v];C&&C.ngInherit&&C(s),C===ba&&(l=!1)}}a=Object.getPrototypeOf(a)}!function Qx(s){let a=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=a+=h.hostVars,h.hostAttrs=jc(h.hostAttrs,l=jc(l,h.hostAttrs))}}(d)}function e_(s){return s===Hi?{}:s===Yt?[]:s}function Jx(s,a){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{a(d,h),l(d,h)}:a}function Xx(s,a){const l=s.contentQueries;s.contentQueries=l?(d,h,p)=>{a(d,h,p),l(d,h,p)}:a}function eA(s,a){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{a(d,h),l(d,h)}:a}function zE(s){const a=s.inputConfig,l={};for(const d in a)if(a.hasOwnProperty(d)){const h=a[d];Array.isArray(h)&&h[2]&&(l[d]=h[2])}s.inputTransforms=l}function md(s){return!!Yf(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Yf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Go(s,a,l){return s[a]=l}function Ci(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function Dl(s,a,l,d){const h=Ci(s,a,l);return Ci(s,a+1,d)||h}function n_(s,a,l,d,h){const p=Dl(s,a,l,d);return Ci(s,a+2,h)||p}function Qf(s,a,l,d){const h=ve();return Ci(h,Xc(),a)&&(Vt(),xs(In(),h,s,a,l,d)),Qf}function _c(s,a,l,d){return Ci(s,Xc(),l)?a+re(l)+d:Dt}function s_(s,a,l,d,h,p,v,C){const E=ve(),T=Vt(),P=s+Lt,F=T.firstCreatePass?function hA(s,a,l,d,h,p,v,C,E){const T=a.consts,P=gc(a,s,4,v||null,Do(T,C));Gf(a,l,P,Do(T,E)),tc(a,P);const F=P.tView=zf(2,P,d,h,p,a.directiveRegistry,a.pipeRegistry,null,a.schemas,T,null);return null!==a.queries&&(a.queries.template(a,P),F.queries=a.queries.embeddedTView(P)),P}(P,T,E,a,l,d,h,p,v):T.data[P];bs(F,!1);const q=HC(T,E,F,s);to()&&vf(T,E,q,F),vi(q,E),TC(E,E[P]=qm(q,E,q,F)),Zc(F)&&Hf(T,E,F),null!=v&&Ml(E,F,C)}let HC=function o_(s,a,l,d){return no(!0),a[pt].createComment("")};function GC(s){return Xa(function qv(){return _t.lFrame.contextLView}(),Lt+s)}function ZC(s,a,l){const d=ve();return Ci(d,Xc(),a)&&cs(Vt(),In(),d,s,a,d[pt],l,!1),ZC}function qC(s,a,l,d,h){const v=h?"class":"style";PC(s,l,a.inputs[v],v,d)}function a_(s,a,l,d){const h=ve(),p=Vt(),v=Lt+s,C=h[pt],E=p.firstCreatePass?function gA(s,a,l,d,h,p){const v=a.consts,E=gc(a,s,2,d,Do(v,h));return Gf(a,l,E,Do(v,p)),null!==E.attrs&&Km(E,E.attrs,!1),null!==E.mergedAttrs&&Km(E,E.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,E),E}(v,p,h,a,l,d):p.data[v],T=c_(p,h,E,C,a,s);h[v]=T;const P=Zc(E);return bs(E,!0),If(C,T,E),32!=(32&E.flags)&&to()&&vf(p,h,T,E),0===function Wg(){return _t.lFrame.elementDepthCount}()&&vi(T,h),function Kg(){_t.lFrame.elementDepthCount++}(),P&&(Hf(p,h,E),$f(p,E,h)),null!==d&&Ml(h,E),a_}function ip(){let s=Dr();Jg()?function Xg(){_t.lFrame.isParent=!1}():(s=s.parent,bs(s,!1));const a=s;(function Qc(s){return _t.skipHydrationRootTNode===s})(a)&&function Qg(){_t.skipHydrationRootTNode=null}(),function Gv(){_t.lFrame.elementDepthCount--}();const l=Vt();return l.firstCreatePass&&(tc(l,s),Ph(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Ao(s){return 0!=(8&s.flags)}(a)&&qC(l,a,ve(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function rl(s){return 0!=(16&s.flags)}(a)&&qC(l,a,ve(),a.stylesWithoutHost,!1),ip}function WC(s,a,l,d){return a_(s,a,l,d),ip(),WC}let c_=(s,a,l,d,h,p)=>(no(!0),bm(d,h,function sm(){return _t.lFrame.currentNamespace}()));function oM(){return ve()}function op(s){return!!s&&"function"==typeof s.then}function aM(s){return!!s&&"function"==typeof s.subscribe}function JC(s,a,l,d){const h=ve(),p=Vt(),v=Dr();return function XC(s,a,l,d,h,p,v){const C=Zc(d),T=s.firstCreatePass&&RE(s),P=a[Wn],F=SC(a);let q=!0;if(3&d.type||v){const De=ni(d,a),$e=v?v(De):De,ct=F.length,fe=v?St=>v(an(St[d.index])):d.index;let Ct=null;if(!v&&C&&(Ct=function cM(s,a,l,d){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const v=h[p];if(v===l&&h[p+1]===d){const C=a[oa],E=h[p+2];return C.length>E?C[E]:null}"string"==typeof v&&(p+=2)}return null}(s,a,h,d.index)),null!==Ct)(Ct.__ngLastListenerFn__||Ct).__ngNextListenerFn__=p,Ct.__ngLastListenerFn__=p,q=!1;else{p=uM(d,a,P,p,!1);const St=l.listen($e,h,p);F.push(p,St),T&&T.push(h,fe,ct,ct+1)}}else p=uM(d,a,P,p,!1);const Y=d.outputs;let ue;if(q&&null!==Y&&(ue=Y[h])){const De=ue.length;if(De)for(let $e=0;$e<De;$e+=2){const ln=a[ue[$e]][ue[$e+1]].subscribe(p),Yn=F.length;F.push(p,ln),T&&T.push(h,d.index,Yn,-(Yn+1))}}}(p,h,h[pt],v,s,a,d),JC}function lM(s,a,l,d){try{return Is(6,a,l),!1!==l(d)}catch(h){return LE(s,h),!1}finally{Is(7,a,l)}}function uM(s,a,l,d,h){return function p(v){if(v===Function)return d;pd(s.componentOffset>-1?pi(s.index,a):a);let E=lM(a,l,d,v),T=p.__ngNextListenerFn__;for(;T;)E=lM(a,l,T,v)&&E,T=T.__ngNextListenerFn__;return h&&!1===E&&v.preventDefault(),E}}function dM(s=1){return function Ru(s){return(_t.lFrame.contextLView=function Jh(s,a){for(;s>0;)a=a[Pi],s--;return a}(s,_t.lFrame.contextLView))[Wn]}(s)}function ap(s,a,l){return d_(s,"",a,"",l),ap}function d_(s,a,l,d,h){const p=ve(),v=_c(p,a,l,d);return v!==Dt&&cs(Vt(),In(),p,s,v,p[pt],h,!1),d_}function f_(s,a){return s<<17|a<<2}function vc(s){return s>>17&32767}function nw(s){return 2|s}function ur(s){return(131068&s)>>2}function rw(s,a){return-131069&s|a<<2}function iw(s){return 1|s}function _M(s,a,l,d,h){const p=s[l+1],v=null===a;let C=d?vc(p):ur(p),E=!1;for(;0!==C&&(!1===E||v);){const P=s[C+1];ow(s[C],a)&&(E=!0,s[C+1]=d?iw(P):nw(P)),C=d?vc(P):ur(P)}E&&(s[l+1]=d?nw(p):iw(p))}function ow(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&uc(s,a)>=0}const Pr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yM(s){return s.substring(Pr.key,Pr.keyEnd)}function vM(s,a){const l=Pr.textEnd;return l===a?-1:(a=Pr.keyEnd=function cw(s,a,l){for(;a<l&&s.charCodeAt(a)>32;)a++;return a}(s,Pr.key=a,l),Ed(s,a,l))}function Ed(s,a,l){for(;a<l&&s.charCodeAt(a)<=32;)a++;return a}function lw(s,a){return function ls(s,a,l,d){const h=ve(),p=Vt(),v=Es(2);p.firstUpdatePass&&bM(p,s,v,d),a!==Dt&&Ci(h,v,a)&&MM(p,p.data[ri()],h,h[pt],s,h[v+1]=function Wo(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=J(hc(s)))),s}(a,l),d,v)}(s,a,null,!0),lw}function m_(s){!function lo(s,a,l,d){const h=Vt(),p=Es(2);h.firstUpdatePass&&bM(h,null,p,d);const v=ve();if(l!==Dt&&Ci(v,p,l)){const C=h.data[ri()];if(pw(C,d)&&!__(h,p)){let E=d?C.classesWithoutHost:C.stylesWithoutHost;null!==E&&(l=Oe(E,l||"")),qC(h,C,v,l,d)}else!function fw(s,a,l,d,h,p,v,C){h===Dt&&(h=Yt);let E=0,T=0,P=0<h.length?h[0]:null,F=0<p.length?p[0]:null;for(;null!==P||null!==F;){const q=E<h.length?h[E+1]:void 0,Y=T<p.length?p[T+1]:void 0;let De,ue=null;P===F?(E+=2,T+=2,q!==Y&&(ue=F,De=Y)):null===F||null!==P&&P<F?(E+=2,ue=P):(T+=2,ue=F,De=Y),null!==ue&&MM(s,a,l,d,ue,De,v,C),P=E<h.length?h[E]:null,F=T<p.length?p[T]:null}}(h,C,v,v[pt],v[p+1],v[p+1]=function EM(s,a,l){if(null==l||""===l)return Yt;const d=[],h=hc(l);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(d,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(d,p,h[p]);else"string"==typeof h&&a(d,h);return d}(s,a,l),d,p)}}(PA,qo,s,!0)}function qo(s,a){for(let l=function bA(s){return function CM(s){Pr.key=0,Pr.keyEnd=0,Pr.value=0,Pr.valueEnd=0,Pr.textEnd=s.length}(s),vM(s,Ed(s,0,Pr.textEnd))}(a);l>=0;l=vM(a,l))Oi(s,yM(a),!0)}function __(s,a){return a>=s.expandoStartIndex}function bM(s,a,l,d){const h=s.data;if(null===h[l+1]){const p=h[ri()],v=__(s,l);pw(p,d)&&null===a&&!v&&(a=!1),a=function uw(s,a,l,d){const h=function Yh(s){const a=_t.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let p=d?a.residualClasses:a.residualStyles;if(null===h)0===(d?a.classBindings:a.styleBindings)&&(l=kl(l=lp(null,s,a,l,d),a.attrs,d),p=null);else{const v=a.directiveStylingLast;if(-1===v||s[v]!==h)if(l=lp(h,s,a,l,d),null===p){let E=function DA(s,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==ur(d))return s[vc(d)]}(s,a,d);void 0!==E&&Array.isArray(E)&&(E=lp(null,s,a,E[1],d),E=kl(E,a.attrs,d),function dw(s,a,l,d){s[vc(l?a.classBindings:a.styleBindings)]=d}(s,a,d,E))}else p=function SA(s,a,l){let d;const h=a.directiveEnd;for(let p=1+a.directiveStylingLast;p<h;p++)d=kl(d,s[p].hostAttrs,l);return kl(d,a.attrs,l)}(s,a,d)}return void 0!==p&&(d?a.residualClasses=p:a.residualStyles=p),l}(h,p,a,d),function wA(s,a,l,d,h,p){let v=p?a.classBindings:a.styleBindings,C=vc(v),E=ur(v);s[d]=l;let P,T=!1;if(Array.isArray(l)?(P=l[1],(null===P||uc(l,P)>0)&&(T=!0)):P=l,h)if(0!==E){const q=vc(s[C+1]);s[d+1]=f_(q,C),0!==q&&(s[q+1]=rw(s[q+1],d)),s[C+1]=function Vr(s,a){return 131071&s|a<<17}(s[C+1],d)}else s[d+1]=f_(C,0),0!==C&&(s[C+1]=rw(s[C+1],d)),C=d;else s[d+1]=f_(E,0),0===C?C=d:s[E+1]=rw(s[E+1],d),E=d;T&&(s[d+1]=nw(s[d+1])),_M(s,P,d,!0),_M(s,P,d,!1),function sw(s,a,l,d,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof a&&uc(p,a)>=0&&(l[d+1]=iw(l[d+1]))}(a,P,s,d,p),v=f_(C,E),p?a.classBindings=v:a.styleBindings=v}(h,p,a,l,v,d)}}function lp(s,a,l,d,h){let p=null;const v=l.directiveEnd;let C=l.directiveStylingLast;for(-1===C?C=l.directiveStart:C++;C<v&&(p=a[C],d=kl(d,p.hostAttrs,h),p!==s);)C++;return null!==s&&(l.directiveStylingLast=C),d}function kl(s,a,l){const d=l?1:2;let h=-1;if(null!==a)for(let p=0;p<a.length;p++){const v=a[p];"number"==typeof v?h=v:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Oi(s,v,!!l||a[++p]))}return void 0===s?null:s}function PA(s,a,l){const d=String(a);""!==d&&!d.includes(" ")&&Oi(s,d,l)}function MM(s,a,l,d,h,p,v,C){if(!(3&a.type))return;const E=s.data,T=E[C+1],P=function mM(s){return 1==(1&s)}(T)?y_(E,a,l,h,ur(T),v):void 0;v_(P)||(v_(p)||function tw(s){return 2==(2&s)}(T)&&(p=y_(E,null,l,h,C,v)),function NP(s,a,l,d,h){if(a)h?s.addClass(l,d):s.removeClass(l,d);else{let p=-1===d.indexOf("-")?void 0:uf.DashCase;null==h?s.removeStyle(l,d,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=uf.Important),s.setStyle(l,d,h,p))}}(d,v,Js(ri(),l),h,p))}function y_(s,a,l,d,h,p){const v=null===a;let C;for(;h>0;){const E=s[h],T=Array.isArray(E),P=T?E[1]:E,F=null===P;let q=l[h+1];q===Dt&&(q=F?Yt:void 0);let Y=F?af(q,d):P===d?q:void 0;if(T&&!v_(Y)&&(Y=af(E,d)),v_(Y)&&(C=Y,v))return C;const ue=s[h+1];h=v?vc(ue):ur(ue)}if(null!==a){let E=p?a.residualClasses:a.residualStyles;null!=E&&(C=af(E,d))}return C}function v_(s){return void 0!==s}function pw(s,a){return 0!=(s.flags&(a?8:16))}function gw(s,a=""){const l=ve(),d=Vt(),h=s+Lt,p=d.firstCreatePass?gc(d,h,1,a,null):d.data[h],v=up(d,l,p,a,s);l[h]=v,to()&&vf(d,l,v,p),bs(p,!1)}let up=(s,a,l,d,h)=>(no(!0),function Im(s,a){return s.createText(a)}(a[pt],d));function Os(s){return Md("",s,""),Os}function Md(s,a,l){const d=ve(),h=_c(d,s,a,l);return h!==Dt&&co(d,ri(),h),Md}function SM(s,a,l,d,h){const p=ve(),v=function _d(s,a,l,d,h,p){const C=Dl(s,Po(),l,h);return Es(2),C?a+re(l)+d+re(h)+p:Dt}(p,s,a,l,d,h);return v!==Dt&&co(p,ri(),v),SM}function mw(s,a,l,d,h,p,v){const C=ve(),E=function yd(s,a,l,d,h,p,v,C){const T=n_(s,Po(),l,h,v);return Es(3),T?a+re(l)+d+re(h)+p+re(v)+C:Dt}(C,s,a,l,d,h,p,v);return E!==Dt&&co(C,ri(),E),mw}const ks=void 0;var NM=["en",[["a","p"],["AM","PM"],ks],[["AM","PM"],ks,ks],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ks,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ks,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ks,"{1} 'at' {0}",ks],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Dd(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Sd={};function Ea(s){const a=function VA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=BA(a);if(l)return l;const d=a.split("-")[0];if(l=BA(d),l)return l;if("en"===d)return NM;throw new ee(701,!1)}function Cc(s){return Ea(s)[jr.PluralCase]}function BA(s){return s in Sd||(Sd[s]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[s]),Sd[s]}var jr=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(jr||{});const wc="en-US";let Ns=wc;function wp(s,a,l,d,h){if(s=Ce(s),Array.isArray(s))for(let p=0;p<s.length;p++)wp(s[p],a,l,d,h);else{const p=Vt(),v=ve(),C=Dr();let E=cd(s)?s:Ce(s.provide);const T=O0(s),P=1048575&C.providerIndexes,F=C.directiveStart,q=C.providerIndexes>>20;if(cd(s)||!s.multi){const Y=new la(T,h,El),ue=Ll(E,a,h?P:P+q,F);-1===ue?(sc(Dn(C,v),p,E),V_(p,s,a.length),a.push(E),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),l.push(Y),v.push(Y)):(l[ue]=Y,v[ue]=Y)}else{const Y=Ll(E,a,P+q,F),ue=Ll(E,a,P,P+q),$e=ue>=0&&l[ue];if(h&&!$e||!h&&!(Y>=0&&l[Y])){sc(Dn(C,v),p,E);const ct=function $_(s,a,l,d,h){const p=new la(s,l,El);return p.multi=[],p.index=a,p.componentProviders=0,tT(p,h,d&&!l),p}(h?rT:nT,l.length,h,d,T);!h&&$e&&(l[ue].providerFactory=ct),V_(p,s,a.length,0),a.push(E),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),l.push(ct),v.push(ct)}else V_(p,s,Y>-1?Y:ue,tT(l[h?ue:Y],T,!h&&d));!h&&d&&$e&&l[ue].componentProviders++}}}function V_(s,a,l,d){const h=cd(a),p=function jF(s){return!!s.useClass}(a);if(h||p){const E=(p?Ce(a.useClass):a).prototype.ngOnDestroy;if(E){const T=s.destroyHooks||(s.destroyHooks=[]);if(!h&&a.multi){const P=T.indexOf(l);-1===P?T.push(l,[d,E]):T[P+1].push(d,E)}else T.push(l,E)}}}function tT(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function Ll(s,a,l,d){for(let h=l;h<d;h++)if(a[h]===s)return h;return-1}function nT(s,a,l,d){return j_(this.multi,[])}function rT(s,a,l,d){const h=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=ha(l,l[je],this.providerFactory.index,d);p=C.slice(0,v),j_(h,p);for(let E=v;E<C.length;E++)p.push(C[E])}else p=[],j_(h,p);return p}function j_(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function iT(s,a=[]){return l=>{l.providersResolver=(d,h)=>function Rw(s,a,l){const d=Vt();if(d.firstCreatePass){const h=Gi(s);wp(l,d.data,d.blueprint,h,!0),wp(a,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,a)}}class Ul{}class Bl{}function tO(s,a){return new Ta(s,a??null,[])}class Ta extends Ul{constructor(a,l,d){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jx(this);const h=Qr(a);this._bootstrapComponents=Ia(h.bootstrap),this._r3Injector=mE(a,l,[{provide:Ul,useValue:this},{provide:Rf,useValue:this.componentFactoryResolver},...d],J(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class H_ extends Bl{constructor(a){super(),this.moduleType=a}create(a){return new Ta(this.moduleType,a,[])}}class Fw extends Ul{constructor(a){super(),this.componentFactoryResolver=new jx(this),this.instance=null;const l=new Pf([...a.providers,{provide:Ul,useValue:this},{provide:Rf,useValue:this.componentFactoryResolver}],a.parent||_l(),a.debugName,new Set(["environment"]));this.injector=l,a.runEnvironmentInitializers&&l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Nd(s,a,l=null){return new Fw({providers:s,parent:a,debugName:l,runEnvironmentInitializers:!0}).injector}let sT=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l)){const d=eE(0,l.type),h=d.length>0?Nd([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l,h)}return this.cachedInjectors.get(l)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ft({token:s,providedIn:"environment",factory:()=>new s(Ve(Vo))})}return s})();function Ii(s){s.getStandaloneInjector=a=>a.get(sT).getOrCreateStandaloneInjector(s)}function K_(s,a,l){const d=Sr()+s,h=ve();return h[d]===Dt?Go(h,d,l?a.call(l):a()):function Tl(s,a){return s[a]}(h,d)}function Vw(s,a,l,d){return hT(ve(),Sr(),s,a,l,d)}function jw(s,a,l,d,h){return function fT(s,a,l,d,h,p,v){const C=a+l;return Dl(s,C,h,p)?Go(s,C+2,v?d.call(v,h,p):d(h,p)):jl(s,C+2)}(ve(),Sr(),s,a,l,d,h)}function jl(s,a){const l=s[a];return l===Dt?void 0:l}function hT(s,a,l,d,h,p){const v=a+l;return Ci(s,v,h)?Go(s,v+1,p?d.call(p,h):d(h)):jl(s,v+1)}function Ic(s,a){const l=Vt();let d;const h=s+Lt;l.firstCreatePass?(d=function Da(s,a){if(a)for(let l=a.length-1;l>=0;l--){const d=a[l];if(s===d.name)return d}}(a,l.pipeRegistry),l.data[h]=d,d.onDestroy&&(l.destroyHooks??=[]).push(h,d.onDestroy)):d=l.data[h];const p=d.factory||(d.factory=Ys(d.type)),C=on(El);try{const E=vr(!1),T=p();return vr(E),function pA(s,a,l,d){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),a[l]=d}(l,ve(),h,T),T}finally{on(C)}}function Zw(s,a,l){const d=s+Lt,h=ve(),p=Xa(h,d);return Ap(h,d)?hT(h,Sr(),a,p.transform,l,p):p.transform(l)}function Sp(s,a,l,d,h){const p=s+Lt,v=ve(),C=Xa(v,p);return Ap(v,p)?function $w(s,a,l,d,h,p,v,C){const E=a+l;return n_(s,E,h,p,v)?Go(s,E+3,C?d.call(C,h,p,v):d(h,p,v)):jl(s,E+3)}(v,Sr(),a,C.transform,l,d,h,C):C.transform(l,d,h)}function Ap(s,a){return s[je].data[a].pure}function gT(){return this._results[Symbol.iterator]()}class qw{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new jo)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=qw.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=gT)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const h=function si(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function pm(s,a,l){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],p=a[d];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function iO(s,a,l,d=!0){const h=a[je];if(function SP(s,a,l,d){const h=or+d,p=l.length;d>0&&(l[h-1][Si]=a),d<p-or?(a[Si]=l[h],e0(l,or+d,a)):(l.push(a),a[Si]=null),a[mn]=l;const v=a[qa];null!==v&&l!==v&&function PP(s,a){const l=s[Wa];a[sr]!==a[mn][mn][sr]&&(s[zc]=!0),null===l?s[Wa]=[a]:l.push(a)}(v,a);const C=a[Jr];null!==C&&C.insertView(s),a[Et]|=128}(h,a,s,l),d){const p=v0(l,s),v=a[pt],C=Mm(v,s[Xr]);null!==C&&function mf(s,a,l,d,h,p){d[Mn]=h,d[_r]=a,wf(s,d,l,1,h,p)}(h,s[_r],v,a,C,p)}}let Rs=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=yT}return s})();const mT=Rs,_T=class extends mT{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,l){return this.createEmbeddedViewImpl(a,l)}createEmbeddedViewImpl(a,l,d){const h=function rO(s,a,l,d){const h=a.tView,C=zo(s,h,l,4096&s[Et]?4096:16,null,a,null,null,null,d?.injector??null,d?.hydrationInfo??null);C[qa]=s[a.index];const T=s[Jr];return null!==T&&(C[Jr]=T.createEmbeddedView(h)),Wm(h,C,l),C}(this._declarationLView,this._declarationTContainer,a,{injector:l,hydrationInfo:d});return new Xm(h)}};function yT(){return Sa(Dr(),ve())}function Sa(s,a){return 4&s.type?new _T(a,s,Ff(s,a)):null}let ey=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=oO}return s})();function oO(){return kp(Dr(),ve())}const aO=ey,bT=class extends aO{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return Ff(this._hostTNode,this._hostLView)}get injector(){return new lr(this._hostTNode,this._hostLView)}get parentInjector(){const a=da(this._hostTNode,this._hostLView);if(Bu(a)){const l=zt(a,this._hostLView),d=Ai(a);return new lr(l[je].data[d+8],l)}return new lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=Op(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-or}createEmbeddedView(a,l,d){let h,p;"number"==typeof d?h=d:null!=d&&(h=d.index,p=d.injector);const C=a.createEmbeddedViewImpl(l||{},p,null);return this.insertImpl(C,h,false),C}createComponent(a,l,d,h,p){const v=a&&!function so(s){return"function"==typeof s}(a);let C;if(v)C=l;else{const De=l||{};C=De.index,d=De.injector,h=De.projectableNodes,p=De.environmentInjector||De.ngModuleRef}const E=v?a:new Wf(Ft(a)),T=d||this.parentInjector;if(!p&&null==E.ngModule){const $e=(v?T:this.parentInjector).get(Vo,null);$e&&(p=$e)}Ft(E.componentType??{});const Y=E.create(T,h,null,p);return this.insertImpl(Y.hostView,C,false),Y}insert(a,l){return this.insertImpl(a,l,!1)}insertImpl(a,l,d){const h=a._lView;if(function Ou(s){return Lr(s[mn])}(h)){const E=this.indexOf(a);if(-1!==E)this.detach(E);else{const T=h[mn],P=new bT(T,T[_r],T[mn]);P.detach(P.indexOf(a))}}const v=this._adjustIndex(l),C=this._lContainer;return iO(C,h,v,!d),a.attachToViewContainerRef(),e0($l(C),v,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=Op(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=Em(this._lContainer,l);d&&(lc($l(this._lContainer),l),g0(d[je],d))}detach(a){const l=this._adjustIndex(a,-1),d=Em(this._lContainer,l);return d&&null!=lc($l(this._lContainer),l)?new Xm(d):null}_adjustIndex(a,l=0){return a??this.length+l}};function Op(s){return s[8]}function $l(s){return s[8]||(s[8]=[])}function kp(s,a){let l;const d=a[s.index];return Lr(d)?l=d:(l=qm(d,a,null,s),a[s.index]=l,TC(a,l)),Jw(l,a,s,d),new bT(l,s,a)}let Jw=function Fd(s,a,l,d){if(s[Xr])return;let h;h=8&l.type?an(d):function Qw(s,a){const l=s[pt],d=l.createComment(""),h=ni(a,s);return gl(l,Mm(l,h),d,function OP(s,a){return s.nextSibling(a)}(l,h),!1),d}(a,l),s[Xr]=h};class Bn{constructor(a){this.queryList=a,this.matches=null}clone(){return new Bn(this.queryList)}setDirty(){this.queryList.setDirty()}}class ty{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,h=[];for(let p=0;p<d;p++){const v=l.getByIndex(p);h.push(this.queries[v.indexInDeclarationView].clone())}return new ty(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==sI(a,l).matches&&this.queries[l].setDirty()}}class ET{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class Xw{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,p=this.getByIndex(d).embeddedTView(a,h);p&&(p.indexInDeclarationView=d,null!==l?l.push(p):l=[p])}return null!==l?new Xw(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class eI{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new eI(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(a,l,MT(l,p)),this.matchTNodeWithReadOption(a,l,ko(l,a,p,!1,!1))}else d===Rs?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,ko(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Il||h===ey||h===Rs&&4&l.type)this.addMatch(l.index,-2);else{const p=ko(l,a,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function MT(s,a){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function DT(s,a,l,d){return-1===l?function TT(s,a){return 11&s.type?Ff(s,a):4&s.type?Sa(s,a):null}(a,s):-2===l?function ny(s,a,l){return l===Il?Ff(a,s):l===Rs?Sa(a,s):l===ey?kp(a,s):void 0}(s,a,d):ha(s,s[je],l,a)}function tI(s,a,l,d){const h=a[Jr].queries[d];if(null===h.matches){const p=s.data,v=l.matches,C=[];for(let E=0;E<v.length;E+=2){const T=v[E];C.push(T<0?null:DT(a,p[T],v[E+1],l.metadata.read))}h.matches=C}return h.matches}function Fs(s,a,l,d){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const v=tI(s,a,h,l);for(let C=0;C<p.length;C+=2){const E=p[C];if(E>0)d.push(v[C/2]);else{const T=p[C+1],P=a[-E];for(let F=or;F<P.length;F++){const q=P[F];q[qa]===q[mn]&&Fs(q[je],q,T,d)}if(null!==P[Wa]){const F=P[Wa];for(let q=0;q<F.length;q++){const Y=F[q];Fs(Y[je],Y,T,d)}}}}}return d}function nI(s){const a=ve(),l=Vt(),d=Yv();rm(d+1);const h=sI(l,d);if(s.dirty&&function Zh(s){return 4==(4&s[Et])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Fs(l,a,d,[]):tI(l,a,h,d);s.reset(p,Ni),s.notifyOnChanges()}return!0}return!1}function ST(s,a,l){const d=Vt();d.firstCreatePass&&(iy(d,new ET(s,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),iI(d,ve(),a)}function rI(s,a,l,d){const h=Vt();if(h.firstCreatePass){const p=Dr();iy(h,new ET(a,l,d),p.index),function sy(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}iI(h,ve(),l)}function ry(){return function Rp(s,a){return s[Jr].queries[a].queryList}(ve(),Yv())}function iI(s,a,l){const d=new qw(4==(4&l));(function pC(s,a,l,d){const h=SC(a);h.push(l),s.firstCreatePass&&RE(s).push(d,h.length-1)})(s,a,d,d.destroy),null===a[Jr]&&(a[Jr]=new ty),a[Jr].queries.push(new Bn(d))}function iy(s,a,l){null===s.queries&&(s.queries=new Xw),s.queries.track(new eI(a,l))}function sI(s,a){return s.queries.getByIndex(a)}function Fp(s,a){return Sa(s,a)}function ay(s){return!!Qr(s)}const rt=new cn("Application Initializer");let hI=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d}),this.appInits=Ke(rt,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const l=[];for(const h of this.appInits){const p=h();if(op(p))l.push(p);else if(aM(p)){const v=new Promise((C,E)=>{p.subscribe({complete:C,error:E})});l.push(v)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),qe=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const ye=new cn("LocaleId",{providedIn:"root",factory:()=>Ke(ye,dt.Optional|dt.SkipSelf)||function ae(){return typeof $localize<"u"&&$localize.locale||wc}()}),Or=new cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let $T=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge.X(!1)}add(){this.hasPendingTasks.next(!0);const l=this.taskId++;return this.pendingTasks.add(l),l}remove(l){this.pendingTasks.delete(l),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class CO{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let wO=(()=>{class s{compileModuleSync(l){return new H_(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),p=Ia(Qr(l).declarations).reduce((v,C)=>{const E=Ft(C);return E&&v.push(new Wf(E)),v},[]);return new CO(d,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const _y=new cn(""),te=new cn("");let Yl,yy=(()=>{class s{constructor(l,d,h){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Yl||(function TO(s){Yl=s}(h),h.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Br.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,h){return[]}static#e=this.\u0275fac=function(d){return new(d||s)(Ve(Br),Ve(Ls),Ve(te))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac})}return s})(),Ls=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Yl?.findTestabilityInTree(this,l,d)??null}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),Li=null;const ZT=new cn("AllowMultipleToken"),xa=new cn("PlatformDestroyListeners"),vy=new cn("appBootstrapListener");class Zp{constructor(a,l){this.name=a,this.token=l}}function mI(s,a,l=[]){const d=`Platform: ${a}`,h=new cn(d);return(p=[])=>{let v=Cy();if(!v||v.injector.get(ZT,!1)){const C=[...l,...p,{provide:h,useValue:!0}];s?s(C):function qp(s){if(Li&&!Li.get(ZT,!1))throw new ee(400,!1);(function qT(){!function jg(s){Uv=s}(()=>{throw new ee(600,!1)})})(),Li=s;const a=s.get(KT);(function li(s){s.get(iE,null)?.forEach(l=>l())})(s)}(function _I(s=[],a){return ao.create({name:a,providers:[{provide:N,useValue:"platform"},{provide:xa,useValue:new Set([()=>Li=null])},...s]})}(C,d))}return function Yo(s){const a=Cy();if(!a)throw new ee(401,!1);return a}()}}function Cy(){return Li?.get(KT)??null}let KT=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const h=function DO(s="zone.js",a){return"noop"===s?new X0:"zone.js"===s?new Br(a):s}(d?.ngZone,function YT(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return h.run(()=>{const p=function z_(s,a,l){return new Ta(s,a,l)}(l.moduleType,this.injector,function tD(s){return[{provide:Br,useFactory:s},{provide:ad,multi:!0,useFactory:()=>{const a=Ke(PO,{optional:!0});return()=>a.initialize()}},{provide:eD,useFactory:SO},{provide:eC,useFactory:tC}]}(()=>h)),v=p.injector.get(fc,null);return h.runOutsideAngular(()=>{const C=h.onError.subscribe({next:E=>{v.handleError(E)}});p.onDestroy(()=>{wy(this._modules,p),C.unsubscribe()})}),function QT(s,a,l){try{const d=l();return op(d)?d.catch(h=>{throw a.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(v,h,()=>{const C=p.injector.get(hI);return C.runInitializers(),C.donePromise.then(()=>(function We(s){Qe(s,"Expected localeId to be defined"),"string"==typeof s&&(Ns=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(ye,wc)||wc),this._moduleDoBootstrap(p),p))})})}bootstrapModule(l,d=[]){const h=JT({},d);return function gI(s,a,l){const d=new H_(l);return Promise.resolve(d)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const d=l.injector.get(jd);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new ee(-403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(xa,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(d){return new(d||s)(Ve(ao))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function JT(s,a){return Array.isArray(a)?a.reduce(JT,s):{...s,...a}}let jd=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ke(eD),this.zoneIsStable=Ke(eC),this.componentTypes=[],this.components=[],this.isStable=Ke($T).hasPendingTasks.pipe((0,Fe.w)(l=>l?(0,Ie.of)(!1):this.zoneIsStable),(0,Me.x)(),(0,Ae.B)()),this._injector=Ke(Vo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const h=l instanceof lE;if(!this._injector.get(hI).done)throw!h&&Za(l),new ee(405,!1);let v;v=h?l:this._injector.get(Rf).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const C=function hs(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Ul),T=v.create(ao.NULL,[],d||v.selector,C),P=T.location.nativeElement,F=T.injector.get(_y,null);return F?.registerApplication(P),T.onDestroy(()=>{this.detachView(T.hostView),wy(this.components,T),F?.unregisterApplication(P)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;wy(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const d=this._injector.get(vy,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>wy(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new ee(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function wy(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}const eD=new cn("",{providedIn:"root",factory:()=>Ke(fc).handleError.bind(void 0)});function SO(){const s=Ke(Br),a=Ke(fc);return l=>s.runOutsideAngular(()=>a.handleError(l))}let PO=(()=>{class s{constructor(){this.zone=Ke(Br),this.applicationRef=Ke(jd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function AO(){return!1}let NO=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=CI}return s})();function CI(s){return function Hr(s,a,l){if(Ks(s)&&!l){const d=pi(s.index,a);return new Xm(d,d)}return 47&s.type?new Xm(a[sr],a):null}(Dr(),ve(),16==(16&s))}class Aa{constructor(){}supports(a){return md(a)}create(a){return new by(a)}}const Mc=(s,a)=>a;class by{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Mc}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,h=0,p=null;for(;l||d;){const v=!d||l&&l.currentIndex<Oa(d,h,p)?l:d,C=Oa(v,h,p),E=v.currentIndex;if(v===d)h--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{p||(p=[]);const T=C-h,P=E-h;if(T!=P){for(let q=0;q<T;q++){const Y=q<p.length?p[q]:p[q]=0,ue=Y+q;P<=ue&&ue<T&&(p[q]=Y+1)}p[v.previousIndex]=P-T}}C!==E&&a(v,C,E)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!md(a))throw new ee(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,p,v,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)p=a[C],v=this._trackByFn(C,p),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,p,v,C)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,v,C),d=!0),l=l._next}else h=0,function OC(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[Symbol.iterator]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,C=>{v=this._trackByFn(h,C),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,C,v,h)),Object.is(l.item,C)||this._addIdentityChange(l,C)):(l=this._mismatch(l,C,v,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,h){let p;return null===a?p=this._itTail:(p=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,p,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,p,h)):a=this._addAfter(new Tc(l,d),p,h),a}_verifyReinsertion(a,l,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?a=this._reinsertAfter(p,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,p=a._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const h=null===l?this._itHead:l._next;return a._next=h,a._prev=l,null===h?this._itTail=a:h._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new Hd),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hd),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Tc{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Qo{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class Hd{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new Qo,this.map.set(l,d)),d.add(a)}get(a,l){const h=this.map.get(a);return h?h.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Oa(s,a,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+a+h}class EI{constructor(){}supports(a){return a instanceof Map||Yf(a)}create(){return new zd}}class zd{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Yf(a)))throw new ee(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,l);const p=h._prev,v=h._next;return p&&(p._next=v),v&&(v._prev=p),h._next=null,h._prev=null,h}const d=new MI(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class MI{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Wp(){return new ka([new Aa])}let ka=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:Wp});constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||Wp()),deps:[[s,new He,new oe]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new ee(901,!1)}}return s})();function Gd(){return new Ey([new EI])}let Ey=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:Gd});constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||Gd()),deps:[[s,new He,new oe]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(d)return d;throw new ee(901,!1)}}return s})();const UO=mI(null,"core",[]);let BO=(()=>{class s{constructor(l){}static#e=this.\u0275fac=function(d){return new(d||s)(Ve(jd))};static#t=this.\u0275mod=_u({type:s});static#n=this.\u0275inj=Nn({})}return s})();function zO(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function Fa(s){const a=Ft(s);if(!a)return null;const l=new Wf(a);return{get selector(){return l.selector},get type(){return l.componentType},get inputs(){return l.inputs},get outputs(){return l.outputs},get ngContentSelectors(){return l.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},3399:(st,be,L)=>{L.d(be,{Z:()=>Je});var c=L(9058),V=L(4537),U=L(7592),ne=L(7879);class ge{constructor(Te,Ee){this._delegate=Te,this.firebase=Ee,(0,U._addComponent)(Te,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=Te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this._delegate.automaticDataCollectionEnabled=Te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Te=>{this._delegate.checkDestroyed(),Te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(Te,Ee=U._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(Te);return!ot.isInitialized()&&"EXPLICIT"===(null===(tt=ot.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:Ee})}_removeServiceInstance(Te,Ee=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Te).clearInstance(Ee)}_addComponent(Te){(0,U._addComponent)(this._delegate,Te)}_addOrOverwriteComponent(Te){(0,U._addOrOverwriteComponent)(this._delegate,Te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ae=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function Me(){const Ce=function Fe(Ce){const Te={},Ee={__esModule:!0,initializeApp:function ee(Re,j={}){const we=U.initializeApp(Re,j);if((0,c.r3)(Te,we.name))return Te[we.name];const Ue=new Ce(we,Ee);return Te[we.name]=Ue,Ue},app:ot,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function re(Re){const j=Re.name,we=j.replace("-compat","");if(U._registerComponent(Re)&&"PUBLIC"===Re.type){const Ue=(lt=ot())=>{if("function"!=typeof lt[we])throw Ae.create("invalid-app-argument",{appName:j});return lt[we]()};void 0!==Re.serviceProps&&(0,c.ZB)(Ue,Re.serviceProps),Ee[we]=Ue,Ce.prototype[we]=function(...lt){return this._getService.bind(this,j).apply(this,Re.multipleInstances?lt:[])}}return"PUBLIC"===Re.type?Ee[we]:null},removeApp:function tt(Re){delete Te[Re]},useAsService:function he(Re,j){return"serverAuth"===j?null:j},modularAPIs:U}};function ot(Re){if(!(0,c.r3)(Te,Re=Re||U._DEFAULT_ENTRY_NAME))throw Ae.create("no-app",{appName:Re});return Te[Re]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function de(){return Object.keys(Te).map(Re=>Te[Re])}}),ot.App=Ce,Ee}(ge);return Ce.INTERNAL=Object.assign(Object.assign({},Ce.INTERNAL),{createFirebaseNamespace:Me,extendNamespace:function Te(Ee){(0,c.ZB)(Ce,Ee)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Ce}(),G=new ne.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ce=self.firebase.SDK_VERSION;Ce&&Ce.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=B;!function xe(Ce){(0,U.registerVersion)("@firebase/app-compat","0.2.13",Ce)}()},7592:(st,be,L)=>{L.r(be),L.d(be,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Nn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>pe,_addOrOverwriteComponent:()=>ke,_apps:()=>le,_clearComponents:()=>ht,_components:()=>se,_getProvider:()=>Be,_registerComponent:()=>Qe,_removeServiceInstance:()=>nn,deleteApp:()=>Ti,getApp:()=>sn,getApps:()=>Zn,initializeApp:()=>En,onLog:()=>qn,registerVersion:()=>gr,setLogLevel:()=>qr});var c=L(5861),V=L(4537),U=L(7879),ne=L(9058),ge=L(1878);class Ie{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function Ae(Ge){const _e=Ge.getComponent();return"VERSION"===_e?.type}(Xe)){const it=Xe.getImmediate();return`${it.library}/${it.version}`}return null}).filter(Xe=>Xe).join(" ")}}const Fe="@firebase/app",B=new U.Yd("@firebase/app"),ie="[DEFAULT]",ce={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},le=new Map,se=new Map;function pe(Ge,_e){try{Ge.container.addComponent(_e)}catch(Xe){B.debug(`Component ${_e.name} failed to register with FirebaseApp ${Ge.name}`,Xe)}}function ke(Ge,_e){Ge.container.addOrOverwriteComponent(_e)}function Qe(Ge){const _e=Ge.name;if(se.has(_e))return B.debug(`There were multiple attempts to register component ${_e}.`),!1;se.set(_e,Ge);for(const Xe of le.values())pe(Xe,Ge);return!0}function Be(Ge,_e){const Xe=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Ge.container.getProvider(_e)}function nn(Ge,_e,Xe=ie){Be(Ge,_e).clearInstance(Xe)}function ht(){se.clear()}const ft=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class rn{constructor(_e,Xe,it){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=it,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}const Nn="9.23.0";function En(Ge,_e={}){let Xe=Ge;"object"!=typeof _e&&(_e={name:_e});const it=Object.assign({name:ie,automaticDataCollectionEnabled:!1},_e),Rt=it.name;if("string"!=typeof Rt||!Rt)throw ft.create("bad-app-name",{appName:String(Rt)});if(Xe||(Xe=(0,ne.aH)()),!Xe)throw ft.create("no-options");const Bt=le.get(Rt);if(Bt){if((0,ne.vZ)(Xe,Bt.options)&&(0,ne.vZ)(it,Bt.config))return Bt;throw ft.create("duplicate-app",{appName:Rt})}const Xn=new V.H0(Rt);for(const $ of se.values())Xn.addComponent($);const H=new rn(Xe,it,Xn);return le.set(Rt,H),H}function sn(Ge=ie){const _e=le.get(Ge);if(!_e&&Ge===ie&&(0,ne.aH)())return En();if(!_e)throw ft.create("no-app",{appName:Ge});return _e}function Zn(){return Array.from(le.values())}function Ti(Ge){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,c.Z)(function*(Ge){const _e=Ge.name;le.has(_e)&&(le.delete(_e),yield Promise.all(Ge.container.getProviders().map(Xe=>Xe.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function gr(Ge,_e,Xe){var it;let Rt=null!==(it=ce[Ge])&&void 0!==it?it:Ge;Xe&&(Rt+=`-${Xe}`);const Bt=Rt.match(/\s|\//),Xn=_e.match(/\s|\//);if(Bt||Xn){const H=[`Unable to register library "${Rt}" with version "${_e}":`];return Bt&&H.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),Bt&&Xn&&H.push("and"),Xn&&H.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void B.warn(H.join(" "))}Qe(new V.wA(`${Rt}-version`,()=>({library:Rt,version:_e}),"VERSION"))}function qn(Ge,_e){if(null!==Ge&&"function"!=typeof Ge)throw ft.create("invalid-log-argument");(0,U.Am)(Ge,_e)}function qr(Ge){(0,U.Ub)(Ge)}const vs="firebase-heartbeat-database",dt=1,mt="firebase-heartbeat-store";let Mt=null;function on(){return Mt||(Mt=(0,ge.X3)(vs,dt,{upgrade:(Ge,_e)=>{0===_e&&Ge.createObjectStore(mt)}}).catch(Ge=>{throw ft.create("idb-open",{originalErrorMessage:Ge.message})})),Mt}function Wr(){return(Wr=(0,c.Z)(function*(Ge){try{return yield(yield on()).transaction(mt).objectStore(mt).get(Cs(Ge))}catch(_e){if(_e instanceof ne.ZR)B.warn(_e.message);else{const Xe=ft.create("idb-get",{originalErrorMessage:_e?.message});B.warn(Xe.message)}}})).apply(this,arguments)}function Nt(Ge,_e){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,c.Z)(function*(Ge,_e){try{const it=(yield on()).transaction(mt,"readwrite");yield it.objectStore(mt).put(_e,Cs(Ge)),yield it.done}catch(Xe){if(Xe instanceof ne.ZR)B.warn(Xe.message);else{const it=ft.create("idb-set",{originalErrorMessage:Xe?.message});B.warn(it.message)}}})).apply(this,arguments)}function Cs(Ge){return`${Ge.name}!${Ge.options.appId}`}class Ut{constructor(_e){this.container=_e,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new is(Xe),this._heartbeatsCachePromise=this._storage.read().then(it=>(this._heartbeatsCache=it,it))}triggerHeartbeat(){var _e=this;return(0,c.Z)(function*(){const it=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=Fn();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),_e._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!_e._heartbeatsCache.heartbeats.some(Bt=>Bt.date===Rt))return _e._heartbeatsCache.heartbeats.push({date:Rt,agent:it}),_e._heartbeatsCache.heartbeats=_e._heartbeatsCache.heartbeats.filter(Bt=>{const Xn=new Date(Bt.date).valueOf();return Date.now()-Xn<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,c.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache||0===_e._heartbeatsCache.heartbeats.length)return"";const Xe=Fn(),{heartbeatsToSend:it,unsentEntries:Rt}=function ji(Ge,_e=1024){const Xe=[];let it=Ge.slice();for(const Rt of Ge){const Bt=Xe.find(Xn=>Xn.agent===Rt.agent);if(Bt){if(Bt.dates.push(Rt.date),ss(Xe)>_e){Bt.dates.pop();break}}else if(Xe.push({agent:Rt.agent,dates:[Rt.date]}),ss(Xe)>_e){Xe.pop();break}it=it.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:it}}(_e._heartbeatsCache.heartbeats),Bt=(0,ne.L)(JSON.stringify({version:2,heartbeats:it}));return _e._heartbeatsCache.lastSentHeartbeatDate=Xe,Rt.length>0?(_e._heartbeatsCache.heartbeats=Rt,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache.heartbeats=[],_e._storage.overwrite(_e._heartbeatsCache)),Bt})()}}function Fn(){return(new Date).toISOString().substring(0,10)}class is{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,c.Z)(function*(){return(yield _e._canUseIndexedDBPromise)&&(yield function di(Ge){return Wr.apply(this,arguments)}(_e.app))||{heartbeats:[]}})()}overwrite(_e){var Xe=this;return(0,c.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Bt=yield Xe.read();return Nt(Xe.app,{lastSentHeartbeatDate:null!==(it=_e.lastSentHeartbeatDate)&&void 0!==it?it:Bt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}})()}add(_e){var Xe=this;return(0,c.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Bt=yield Xe.read();return Nt(Xe.app,{lastSentHeartbeatDate:null!==(it=_e.lastSentHeartbeatDate)&&void 0!==it?it:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,..._e.heartbeats]})}})()}}function ss(Ge){return(0,ne.L)(JSON.stringify({version:2,heartbeats:Ge})).length}!function mr(Ge){Qe(new V.wA("platform-logger",_e=>new Ie(_e),"PRIVATE")),Qe(new V.wA("heartbeat",_e=>new Ut(_e),"PRIVATE")),gr(Fe,"0.9.13",Ge),gr(Fe,"0.9.13","esm2017"),gr("fire-js","")}("")},120:(st,be,L)=>{L.d(be,{Z:()=>c.Z});var c=L(3399);c.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(st,be,L)=>{L.r(be);var c=L(5861),V=L(3399),U=L(6710),ne=L(9058),Ae=(L(7592),L(7879),L(4537));function Fe(){return window}function G(){return G=(0,c.Z)(function*(O,k,x){var K;const{BuildInfo:me}=Fe();(0,U.as)(k.sessionId,"AuthEvent did not contain a session ID");const Ve=yield function Ee(O){return tt.apply(this,arguments)}(k.sessionId),vt={};return(0,U.at)()?vt.ibi=me.packageName:(0,U.au)()?vt.apn=me.packageName:(0,U.av)(O,"operation-not-supported-in-this-environment"),me.displayName&&(vt.appDisplayName=me.displayName),vt.sessionId=Ve,(0,U.aw)(O,x,k.type,void 0,null!==(K=k.eventId)&&void 0!==K?K:void 0,vt)}),G.apply(this,arguments)}function Oe(){return(Oe=(0,c.Z)(function*(O){const{BuildInfo:k}=Fe(),x={};(0,U.at)()?x.iosBundleId=k.packageName:(0,U.au)()?x.androidPackageName=k.packageName:(0,U.av)(O,"operation-not-supported-in-this-environment"),yield(0,U.ax)(O,x)})).apply(this,arguments)}function Ce(){return(Ce=(0,c.Z)(function*(O,k,x){const{cordova:K}=Fe();let me=()=>{};try{yield new Promise((Ve,vt)=>{let Ke=null;function Jt(){var xt;Ve();const $i=null===(xt=K.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof $i&&$i(),"function"==typeof x?.close&&x.close()}function wt(){Ke||(Ke=window.setTimeout(()=>{vt((0,U.az)(O,"redirect-cancelled-by-user"))},2e3))}function gn(){"visible"===document?.visibilityState&&wt()}k.addPassiveListener(Jt),document.addEventListener("resume",wt,!1),(0,U.au)()&&document.addEventListener("visibilitychange",gn,!1),me=()=>{k.removePassiveListener(Jt),document.removeEventListener("resume",wt,!1),document.removeEventListener("visibilitychange",gn,!1),Ke&&window.clearTimeout(Ke)}})}finally{me()}})).apply(this,arguments)}function tt(){return(tt=(0,c.Z)(function*(O){const k=function ot(O){if((0,U.as)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const k=new ArrayBuffer(O.length),x=new Uint8Array(k);for(let K=0;K<O.length;K++)x[K]=O.charCodeAt(K);return x}(O),x=yield crypto.subtle.digest("SHA-256",k);return Array.from(new Uint8Array(x)).map(me=>me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class de extends U.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(k=>{this.resolveInialized=k})}addPassiveListener(k){this.passiveListeners.add(k)}removePassiveListener(k){this.passiveListeners.delete(k)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(k){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(k)),super.onEvent(k)}initialized(){var k=this;return(0,c.Z)(function*(){yield k.initPromise})()}}function Re(O){return j.apply(this,arguments)}function j(){return(j=(0,c.Z)(function*(O){const k=yield lt()._get(tn(O));return k&&(yield lt()._remove(tn(O))),k})).apply(this,arguments)}function Ue(){const O=[];for(let x=0;x<20;x++){const K=Math.floor(62*Math.random());O.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(K))}return O.join("")}function lt(){return(0,U.aC)(U.b)}function tn(O){return(0,U.aD)("authEvent",O.config.apiKey,O.name)}function bn(O){if(!O?.includes("?"))return{};const[k,...x]=O.split("?");return(0,ne.zd)(x.join("?"))}const ie=class Zr{constructor(){this._redirectPersistence=U.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=U.aE,this._overrideRedirectResult=U.aF}_initialize(k){var x=this;return(0,c.Z)(function*(){const K=k._key();let me=x.eventManagers.get(K);return me||(me=new de(k),x.eventManagers.set(K,me),x.attachCallbackListeners(k,me)),me})()}_openPopup(k){(0,U.av)(k,"operation-not-supported-in-this-environment")}_openRedirect(k,x,K,me){var Ve=this;return(0,c.Z)(function*(){!function Te(O){var k,x,K,me,Ve,vt,Ke,Jt,wt,gn;const xt=Fe();(0,U.aA)("function"==typeof(null===(k=xt?.universalLinks)||void 0===k?void 0:k.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,U.aA)(typeof(null===(x=xt?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,U.aA)("function"==typeof(null===(Ve=null===(me=null===(K=xt?.cordova)||void 0===K?void 0:K.plugins)||void 0===me?void 0:me.browsertab)||void 0===Ve?void 0:Ve.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aA)("function"==typeof(null===(Jt=null===(Ke=null===(vt=xt?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===Jt?void 0:Jt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.aA)("function"==typeof(null===(gn=null===(wt=xt?.cordova)||void 0===wt?void 0:wt.InAppBrowser)||void 0===gn?void 0:gn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(k);const vt=yield Ve._initialize(k);yield vt.initialized(),vt.resetRedirect(),(0,U.aG)(),yield Ve._originValidation(k);const Ke=function re(O,k,x=null){return{type:k,eventId:x,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:O.tenantId,error:(0,U.az)(O,"no-auth-event")}}(k,K,me);yield function he(O,k){return lt()._set(tn(O),k)}(k,Ke);const Jt=yield function B(O,k,x){return G.apply(this,arguments)}(k,Ke,x),wt=yield function xe(O){const{cordova:k}=Fe();return new Promise(x=>{k.plugins.browsertab.isAvailable(K=>{let me=null;K?k.plugins.browsertab.openUrl(O):me=k.InAppBrowser.open(O,(0,U.ay)()?"_blank":"_system","location=yes"),x(me)})})}(Jt);return function Je(O,k,x){return Ce.apply(this,arguments)}(k,vt,wt)})()}_isIframeWebStorageSupported(k,x){throw new Error("Method not implemented.")}_originValidation(k){const x=k._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function J(O){return Oe.apply(this,arguments)}(k)),this.originValidationPromises[x]}attachCallbackListeners(k,x){const{universalLinks:K,handleOpenURL:me,BuildInfo:Ve}=Fe(),vt=setTimeout((0,c.Z)(function*(){yield Re(k),x.onEvent(ce())}),500),Ke=function(){var gn=(0,c.Z)(function*(xt){clearTimeout(vt);const $i=yield Re(k);let Bc=null;$i&&xt?.url&&(Bc=function we(O,k){var x,K;const me=function wn(O){const k=bn(O),x=k.link?decodeURIComponent(k.link):void 0,K=bn(x).link,me=k.deep_link_id?decodeURIComponent(k.deep_link_id):void 0;return bn(me).link||me||K||x||O}(k);if(me.includes("/__/auth/callback")){const Ve=bn(me),vt=Ve.firebaseError?function Gn(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(Ve.firebaseError)):null,Ke=null===(K=null===(x=vt?.code)||void 0===x?void 0:x.split("auth/"))||void 0===K?void 0:K[1],Jt=Ke?(0,U.az)(Ke):null;return Jt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Jt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:me,postBody:null}}return null}($i,xt.url)),x.onEvent(Bc||ce())});return function($i){return gn.apply(this,arguments)}}();typeof K<"u"&&"function"==typeof K.subscribe&&K.subscribe(null,Ke);const Jt=me,wt=`${Ve.packageName.toLowerCase()}://`;Fe().handleOpenURL=function(){var gn=(0,c.Z)(function*(xt){if(xt.toLowerCase().startsWith(wt)&&Ke({url:xt}),"function"==typeof Jt)try{Jt(xt)}catch($i){console.error($i)}});return function(xt){return gn.apply(this,arguments)}}()}};function ce(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,U.az)("no-auth-event")}}function Qe(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function nn(O=(0,ne.z$)()){return!("file:"!==Qe()&&"ionic:"!==Qe()&&"capacitor:"!==Qe()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nn(){try{const O=self.localStorage,k=U.aL();if(O)return O.setItem(k,"1"),O.removeItem(k),!function rn(O=(0,ne.z$)()){return function Qt(){return(0,ne.w1)()&&11===document?.documentMode}()||function ft(O=(0,ne.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,ne.hl)()}catch{return En()&&(0,ne.hl)()}return!1}function En(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function sn(){return(function Be(){return"http:"===Qe()||"https:"===Qe()}()||(0,ne.ru)()||nn())&&!function ht(){return(0,ne.b$)()||(0,ne.UG)()}()&&Nn()&&!En()}function Zn(){return nn()&&typeof document<"u"}function Fr(){return(Fr=(0,c.Z)(function*(){return!!Zn()&&new Promise(O=>{const k=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(k),O(!0)})})})).apply(this,arguments)}const qn={LOCAL:"local",NONE:"none",SESSION:"session"},qr=U.aA,vs="persistence";function mt(O){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,c.Z)(function*(O){yield O._initializationPromise;const k=di(),x=U.aD(vs,O.config.apiKey,O.name);k&&k.setItem(x,O._getPersistence())})).apply(this,arguments)}function di(){var O;try{return(null===(O=function gr(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Wr=U.aA;class Nt{constructor(){this.browserResolver=U.aC(U.k),this.cordovaResolver=U.aC(ie),this.underlyingResolver=null,this._redirectPersistence=U.a,this._completeRedirectFn=U.aE,this._overrideRedirectResult=U.aF}_initialize(k){var x=this;return(0,c.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(k)})()}_openPopup(k,x,K,me){var Ve=this;return(0,c.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openPopup(k,x,K,me)})()}_openRedirect(k,x,K,me){var Ve=this;return(0,c.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openRedirect(k,x,K,me)})()}_isIframeWebStorageSupported(k,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(k,x)}_originValidation(k){return this.assertedUnderlyingResolver._originValidation(k)}get _shouldInitProactively(){return Zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var k=this;return(0,c.Z)(function*(){if(k.underlyingResolver)return;const x=yield function Ti(){return Fr.apply(this,arguments)}();k.underlyingResolver=x?k.cordovaResolver:k.browserResolver})()}}function Rn(O){return O.unwrap()}function Kt(O){return Ut(O)}function Ut(O){const{_tokenResponse:k}=O instanceof ne.ZR?O.customData:O;if(!k)return null;if(!(O instanceof ne.ZR)&&"temporaryProof"in k&&"phoneNumber"in k)return U.P.credentialFromResult(O);const x=k.providerId;if(!x||x===U.p.PASSWORD)return null;let K;switch(x){case U.p.GOOGLE:K=U.V;break;case U.p.FACEBOOK:K=U.U;break;case U.p.GITHUB:K=U.W;break;case U.p.TWITTER:K=U.Z;break;default:const{oauthIdToken:me,oauthAccessToken:Ve,oauthTokenSecret:vt,pendingToken:Ke,nonce:Jt}=k;return Ve||vt||me||Ke?Ke?x.startsWith("saml.")?U.aO._create(x,Ke):U.L._fromParams({providerId:x,signInMethod:x,pendingToken:Ke,idToken:me,accessToken:Ve}):new U.X(x).credential({idToken:me,accessToken:Ve,rawNonce:Jt}):null}return O instanceof ne.ZR?K.credentialFromError(O):K.credentialFromResult(O)}function Fn(O,k){return k.catch(x=>{throw x instanceof ne.ZR&&function wo(O,k){var x;const K=null===(x=k.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===k?.code)k.resolver=new ss(O,U.aq(O,k));else if(K){const me=Ut(k),Ve=k;me&&(Ve.credential=me,Ve.tenantId=K.tenantId||void 0,Ve.email=K.email||void 0,Ve.phoneNumber=K.phoneNumber||void 0)}}(O,x),x}).then(x=>{const me=x.user;return{operationType:x.operationType,credential:Kt(x),additionalUserInfo:U.ao(x),user:mr.getOrCreate(me)}})}function ji(O,k){return is.apply(this,arguments)}function is(){return(is=(0,c.Z)(function*(O,k){const x=yield k;return{verificationId:x.verificationId,confirm:K=>Fn(O,x.confirm(K))}})).apply(this,arguments)}class ss{constructor(k,x){this.resolver=x,this.auth=function Cs(O){return O.wrapped()}(k)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(k){return Fn(Rn(this.auth),this.resolver.resolveSignIn(k))}}class mr{constructor(k){this._delegate=k,this.multiFactor=U.ar(k)}static getOrCreate(k){return mr.USER_MAP.has(k)||mr.USER_MAP.set(k,new mr(k)),mr.USER_MAP.get(k)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(k){return this._delegate.getIdTokenResult(k)}getIdToken(k){return this._delegate.getIdToken(k)}linkAndRetrieveDataWithCredential(k){return this.linkWithCredential(k)}linkWithCredential(k){var x=this;return(0,c.Z)(function*(){return Fn(x.auth,U.a0(x._delegate,k))})()}linkWithPhoneNumber(k,x){var K=this;return(0,c.Z)(function*(){return ji(K.auth,U.l(K._delegate,k,x))})()}linkWithPopup(k){var x=this;return(0,c.Z)(function*(){return Fn(x.auth,U.d(x._delegate,k,Nt))})()}linkWithRedirect(k){var x=this;return(0,c.Z)(function*(){return yield mt(U.aH(x.auth)),U.g(x._delegate,k,Nt)})()}reauthenticateAndRetrieveDataWithCredential(k){return this.reauthenticateWithCredential(k)}reauthenticateWithCredential(k){var x=this;return(0,c.Z)(function*(){return Fn(x.auth,U.a1(x._delegate,k))})()}reauthenticateWithPhoneNumber(k,x){return ji(this.auth,U.r(this._delegate,k,x))}reauthenticateWithPopup(k){return Fn(this.auth,U.e(this._delegate,k,Nt))}reauthenticateWithRedirect(k){var x=this;return(0,c.Z)(function*(){return yield mt(U.aH(x.auth)),U.h(x._delegate,k,Nt)})()}sendEmailVerification(k){return U.ae(this._delegate,k)}unlink(k){var x=this;return(0,c.Z)(function*(){return yield U.an(x._delegate,k),x})()}updateEmail(k){return U.aj(this._delegate,k)}updatePassword(k){return U.ak(this._delegate,k)}updatePhoneNumber(k){return U.u(this._delegate,k)}updateProfile(k){return U.ai(this._delegate,k)}verifyBeforeUpdateEmail(k,x){return U.af(this._delegate,k,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}mr.USER_MAP=new WeakMap;const Ge=U.aA;let _e=(()=>{class O{constructor(x,K){if(this.app=x,K.isInitialized())return this._delegate=K.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:me}=x.options;Ge(me,"invalid-api-key",{appName:x.name}),Ge(me,"invalid-api-key",{appName:x.name});const Ve=typeof window<"u"?Nt:void 0;this._delegate=K.initialize({options:{persistence:it(me,x.name),popupRedirectResolver:Ve}}),this._delegate._updateErrorMap(U.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,K){U.I(this._delegate,x,K)}applyActionCode(x){return U.a5(this._delegate,x)}checkActionCode(x){return U.a6(this._delegate,x)}confirmPasswordReset(x,K){return U.a4(this._delegate,x,K)}createUserWithEmailAndPassword(x,K){var me=this;return(0,c.Z)(function*(){return Fn(me._delegate,U.a8(me._delegate,x,K))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return U.ad(this._delegate,x)}isSignInWithEmailLink(x){return U.ab(this._delegate,x)}getRedirectResult(){var x=this;return(0,c.Z)(function*(){Ge(sn(),x._delegate,"operation-not-supported-in-this-environment");const K=yield U.j(x._delegate,Nt);return K?Fn(x._delegate,Promise.resolve(K)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function le(O,k){(0,U.aH)(O)._logFramework(k)}(this._delegate,x)}onAuthStateChanged(x,K,me){const{next:Ve,error:vt,complete:Ke}=Xe(x,K,me);return this._delegate.onAuthStateChanged(Ve,vt,Ke)}onIdTokenChanged(x,K,me){const{next:Ve,error:vt,complete:Ke}=Xe(x,K,me);return this._delegate.onIdTokenChanged(Ve,vt,Ke)}sendSignInLinkToEmail(x,K){return U.aa(this._delegate,x,K)}sendPasswordResetEmail(x,K){return U.a3(this._delegate,x,K||void 0)}setPersistence(x){var K=this;return(0,c.Z)(function*(){let me;switch(function dt(O,k){qr(Object.values(qn).includes(k),O,"invalid-persistence-type"),(0,ne.b$)()?qr(k!==qn.SESSION,O,"unsupported-persistence-type"):(0,ne.UG)()?qr(k===qn.NONE,O,"unsupported-persistence-type"):En()?qr(k===qn.NONE||k===qn.LOCAL&&(0,ne.hl)(),O,"unsupported-persistence-type"):qr(k===qn.NONE||Nn(),O,"unsupported-persistence-type")}(K._delegate,x),x){case qn.SESSION:me=U.a;break;case qn.LOCAL:me=(yield U.aC(U.i)._isAvailable())?U.i:U.b;break;case qn.NONE:me=U.N;break;default:return U.av("argument-error",{appName:K._delegate.name})}return K._delegate.setPersistence(me)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return Fn(this._delegate,U._(this._delegate))}signInWithCredential(x){return Fn(this._delegate,U.$(this._delegate,x))}signInWithCustomToken(x){return Fn(this._delegate,U.a2(this._delegate,x))}signInWithEmailAndPassword(x,K){return Fn(this._delegate,U.a9(this._delegate,x,K))}signInWithEmailLink(x,K){return Fn(this._delegate,U.ac(this._delegate,x,K))}signInWithPhoneNumber(x,K){return ji(this._delegate,U.s(this._delegate,x,K))}signInWithPopup(x){var K=this;return(0,c.Z)(function*(){return Ge(sn(),K._delegate,"operation-not-supported-in-this-environment"),Fn(K._delegate,U.c(K._delegate,x,Nt))})()}signInWithRedirect(x){var K=this;return(0,c.Z)(function*(){return Ge(sn(),K._delegate,"operation-not-supported-in-this-environment"),yield mt(K._delegate),U.f(K._delegate,x,Nt)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return U.a7(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=qn,O})();function Xe(O,k,x){let K=O;"function"!=typeof O&&({next:K,error:k,complete:x}=O);const me=K;return{next:vt=>me(vt&&mr.getOrCreate(vt)),error:k,complete:x}}function it(O,k){const x=function on(O,k){const x=di();if(!x)return[];const K=U.aD(vs,O,k);switch(x.getItem(K)){case qn.NONE:return[U.N];case qn.LOCAL:return[U.i,U.a];case qn.SESSION:return[U.a];default:return[]}}(O,k);if(typeof self<"u"&&!x.includes(U.i)&&x.push(U.i),typeof window<"u")for(const K of[U.b,U.a])x.includes(K)||x.push(K);return x.includes(U.N)||x.push(U.N),x}class Rt{constructor(){this.providerId="phone",this._delegate=new U.P(Rn(V.Z.auth()))}static credential(k,x){return U.P.credential(k,x)}verifyPhoneNumber(k,x){return this._delegate.verifyPhoneNumber(k,x)}unwrap(){return this._delegate}}Rt.PHONE_SIGN_IN_METHOD=U.P.PHONE_SIGN_IN_METHOD,Rt.PROVIDER_ID=U.P.PROVIDER_ID;const Bt=U.aA;class Xn{constructor(k,x,K=V.Z.app()){var me;Bt(null===(me=K.options)||void 0===me?void 0:me.apiKey,"invalid-api-key",{appName:K.name}),this._delegate=new U.R(k,x,K.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $(O){O.INTERNAL.registerComponent(new Ae.wA("auth-compat",k=>{const x=k.getProvider("app-compat").getImmediate(),K=k.getProvider("auth");return new _e(x,K)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:U.A.EMAIL_SIGNIN,PASSWORD_RESET:U.A.PASSWORD_RESET,RECOVER_EMAIL:U.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:U.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:U.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:U.A.VERIFY_EMAIL}},EmailAuthProvider:U.Q,FacebookAuthProvider:U.U,GithubAuthProvider:U.W,GoogleAuthProvider:U.V,OAuthProvider:U.X,SAMLAuthProvider:U.Y,PhoneAuthProvider:Rt,PhoneMultiFactorGenerator:U.m,RecaptchaVerifier:Xn,TwitterAuthProvider:U.Z,Auth:_e,AuthCredential:U.J,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},4537:(st,be,L)=>{L.d(be,{H0:()=>Fe,wA:()=>U});var c=L(5861),V=L(9058);class U{constructor(B,G,J){this.name=B,this.instanceFactory=G,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ne="[DEFAULT]";class ge{constructor(B,G){this.name=B,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const G=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(G)){const J=new V.BH;if(this.instancesDeferred.set(G,J),this.isInitialized(G)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:G});Oe&&J.resolve(Oe)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(B){var G;const J=this.normalizeInstanceIdentifier(B?.identifier),Oe=null!==(G=B?.optional)&&void 0!==G&&G;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(xe){if(Oe)return null;throw xe}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function Ae(Me){return"EAGER"===Me.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[G,J]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(G);try{const xe=this.getOrInitializeService({instanceIdentifier:Oe});J.resolve(xe)}catch{}}}}clearInstance(B=ne){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,c.Z)(function*(){const G=Array.from(B.instances.values());yield Promise.all([...G.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...G.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ne){return this.instances.has(B)}getOptions(B=ne){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:G={}}=B,J=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:J,options:G});for(const[xe,Je]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(xe)&&Je.resolve(Oe);return Oe}onInit(B,G){var J;const Oe=this.normalizeInstanceIdentifier(G),xe=null!==(J=this.onInitCallbacks.get(Oe))&&void 0!==J?J:new Set;xe.add(B),this.onInitCallbacks.set(Oe,xe);const Je=this.instances.get(Oe);return Je&&B(Je,Oe),()=>{xe.delete(B)}}invokeOnInitCallbacks(B,G){const J=this.onInitCallbacks.get(G);if(J)for(const Oe of J)try{Oe(B,G)}catch{}}getOrInitializeService({instanceIdentifier:B,options:G={}}){let J=this.instances.get(B);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(Me=B,Me===ne?void 0:Me),options:G}),this.instances.set(B,J),this.instancesOptions.set(B,G),this.invokeOnInitCallbacks(J,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,J)}catch{}var Me;return J||null}normalizeInstanceIdentifier(B=ne){return this.component?this.component.multipleInstances?B:ne:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const G=this.getProvider(B.name);if(G.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);G.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const G=new ge(B,this);return this.providers.set(B,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(st,be,L)=>{L.d(be,{Am:()=>Me,Ub:()=>Fe,Yd:()=>Ae,in:()=>V});const c=[];var V=function(B){return B[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",B}(V||{});const U={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ne=V.INFO,ge={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},Ie=(B,G,...J)=>{if(G<B.logLevel)return;const Oe=(new Date).toISOString(),xe=ge[G];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[xe](`[${Oe}]  ${B.name}:`,...J)};class Ae{constructor(G){this.name=G,this._logLevel=ne,this._logHandler=Ie,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in V))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?U[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...G),this._logHandler(this,V.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...G),this._logHandler(this,V.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,V.INFO,...G),this._logHandler(this,V.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,V.WARN,...G),this._logHandler(this,V.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...G),this._logHandler(this,V.ERROR,...G)}}function Fe(B){c.forEach(G=>{G.setLogLevel(B)})}function Me(B,G){for(const J of c){let Oe=null;G&&G.level&&(Oe=U[G.level]),J.userLogHandler=null===B?null:(xe,Je,...Ce)=>{const Te=Ce.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch{return null}}).filter(Ee=>Ee).join(" ");Je>=(Oe??xe.logLevel)&&B({level:V[Je].toLowerCase(),message:Te,args:Ce,type:xe.name})}}}},1878:(st,be,L)=>{L.d(be,{X3:()=>ot});var c=L(5861);const V=(j,we)=>we.some(Ue=>j instanceof Ue);let U,ne;const Ae=new WeakMap,Fe=new WeakMap,Me=new WeakMap,B=new WeakMap,G=new WeakMap;let xe={get(j,we,Ue){if(j instanceof IDBTransaction){if("done"===we)return Fe.get(j);if("objectStoreNames"===we)return j.objectStoreNames||Me.get(j);if("store"===we)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return Ee(j[we])},set:(j,we,Ue)=>(j[we]=Ue,!0),has:(j,we)=>j instanceof IDBTransaction&&("done"===we||"store"===we)||we in j};function Te(j){return"function"==typeof j?function Ce(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ie(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...we){return j.apply(tt(this),we),Ee(Ae.get(this))}:function(...we){return Ee(j.apply(tt(this),we))}:function(we,...Ue){const lt=j.call(tt(this),we,...Ue);return Me.set(lt,we.sort?we.sort():[we]),Ee(lt)}}(j):(j instanceof IDBTransaction&&function Oe(j){if(Fe.has(j))return;const we=new Promise((Ue,lt)=>{const tn=()=>{j.removeEventListener("complete",Gn),j.removeEventListener("error",wn),j.removeEventListener("abort",wn)},Gn=()=>{Ue(),tn()},wn=()=>{lt(j.error||new DOMException("AbortError","AbortError")),tn()};j.addEventListener("complete",Gn),j.addEventListener("error",wn),j.addEventListener("abort",wn)});Fe.set(j,we)}(j),V(j,function ge(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,xe):j)}function Ee(j){if(j instanceof IDBRequest)return function J(j){const we=new Promise((Ue,lt)=>{const tn=()=>{j.removeEventListener("success",Gn),j.removeEventListener("error",wn)},Gn=()=>{Ue(Ee(j.result)),tn()},wn=()=>{lt(j.error),tn()};j.addEventListener("success",Gn),j.addEventListener("error",wn)});return we.then(Ue=>{Ue instanceof IDBCursor&&Ae.set(Ue,j)}).catch(()=>{}),G.set(we,j),we}(j);if(B.has(j))return B.get(j);const we=Te(j);return we!==j&&(B.set(j,we),G.set(we,j)),we}const tt=j=>G.get(j);function ot(j,we,{blocked:Ue,upgrade:lt,blocking:tn,terminated:Gn}={}){const wn=indexedDB.open(j,we),bn=Ee(wn);return lt&&wn.addEventListener("upgradeneeded",dn=>{lt(Ee(wn.result),dn.oldVersion,dn.newVersion,Ee(wn.transaction),dn)}),Ue&&wn.addEventListener("blocked",dn=>Ue(dn.oldVersion,dn.newVersion,dn)),bn.then(dn=>{Gn&&dn.addEventListener("close",()=>Gn()),tn&&dn.addEventListener("versionchange",Zr=>tn(Zr.oldVersion,Zr.newVersion,Zr))}).catch(()=>{}),bn}const de=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],he=new Map;function Re(j,we){if(!(j instanceof IDBDatabase)||we in j||"string"!=typeof we)return;if(he.get(we))return he.get(we);const Ue=we.replace(/FromIndex$/,""),lt=we!==Ue,tn=re.includes(Ue);if(!(Ue in(lt?IDBIndex:IDBObjectStore).prototype)||!tn&&!de.includes(Ue))return;const Gn=function(){var wn=(0,c.Z)(function*(bn,...dn){const Zr=this.transaction(bn,tn?"readwrite":"readonly");let ie=Zr.store;return lt&&(ie=ie.index(dn.shift())),(yield Promise.all([ie[Ue](...dn),tn&&Zr.done]))[0]});return function(dn){return wn.apply(this,arguments)}}();return he.set(we,Gn),Gn}!function Je(j){xe=j(xe)}(j=>({...j,get:(we,Ue,lt)=>Re(we,Ue)||j.get(we,Ue,lt),has:(we,Ue)=>!!Re(we,Ue)||j.has(we,Ue)}))},5861:(st,be,L)=>{function c(U,ne,ge,Ie,Ae,Fe,Me){try{var B=U[Fe](Me),G=B.value}catch(J){return void ge(J)}B.done?ne(G):Promise.resolve(G).then(Ie,Ae)}function V(U){return function(){var ne=this,ge=arguments;return new Promise(function(Ie,Ae){var Fe=U.apply(ne,ge);function Me(G){c(Fe,Ie,Ae,Me,B,"next",G)}function B(G){c(Fe,Ie,Ae,Me,B,"throw",G)}Me(void 0)})}}L.d(be,{Z:()=>V})},7582:(st,be,L)=>{function ne(ie,ce){var le={};for(var se in ie)Object.prototype.hasOwnProperty.call(ie,se)&&ce.indexOf(se)<0&&(le[se]=ie[se]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(se=Object.getOwnPropertySymbols(ie);pe<se.length;pe++)ce.indexOf(se[pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,se[pe])&&(le[se[pe]]=ie[se[pe]])}return le}function J(ie,ce,le,se){return new(le||(le=Promise))(function(ke,Qe){function Be(Qt){try{ht(se.next(Qt))}catch(ft){Qe(ft)}}function nn(Qt){try{ht(se.throw(Qt))}catch(ft){Qe(ft)}}function ht(Qt){Qt.done?ke(Qt.value):function pe(ke){return ke instanceof le?ke:new le(function(Qe){Qe(ke)})}(Qt.value).then(Be,nn)}ht((se=se.apply(ie,ce||[])).next())})}function ee(ie){return this instanceof ee?(this.v=ie,this):new ee(ie)}function de(ie,ce,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,se=le.apply(ie,ce||[]),ke=[];return pe={},Qe("next"),Qe("throw"),Qe("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function Qe(rn){se[rn]&&(pe[rn]=function(Nn){return new Promise(function(En,sn){ke.push([rn,Nn,En,sn])>1||Be(rn,Nn)})})}function Be(rn,Nn){try{!function nn(rn){rn.value instanceof ee?Promise.resolve(rn.value.v).then(ht,Qt):ft(ke[0][2],rn)}(se[rn](Nn))}catch(En){ft(ke[0][3],En)}}function ht(rn){Be("next",rn)}function Qt(rn){Be("throw",rn)}function ft(rn,Nn){rn(Nn),ke.shift(),ke.length&&Be(ke[0][0],ke[0][1])}}function he(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ce=ie[Symbol.asyncIterator];return ce?ce.call(ie):(ie=function Ce(ie){var ce="function"==typeof Symbol&&Symbol.iterator,le=ce&&ie[ce],se=0;if(le)return le.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&se>=ie.length&&(ie=void 0),{value:ie&&ie[se++],done:!ie}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),le={},se("next"),se("throw"),se("return"),le[Symbol.asyncIterator]=function(){return this},le);function se(ke){le[ke]=ie[ke]&&function(Qe){return new Promise(function(Be,nn){!function pe(ke,Qe,Be,nn){Promise.resolve(nn).then(function(ht){ke({value:ht,done:Be})},Qe)}(Be,nn,(Qe=ie[ke](Qe)).done,Qe.value)})}}}L.d(be,{FC:()=>de,KL:()=>he,_T:()=>ne,mG:()=>J,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},st=>{st(st.s=2286)}]);