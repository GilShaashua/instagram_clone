"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(_t,De,M)=>{M.d(De,{Dh:()=>Oe,GT:()=>ve,cc:()=>Ie,hO:()=>Ve,on:()=>U,pX:()=>se,xv:()=>he});var d=M(5879),V=M(120),N=M(4556);_t=M.hmd(_t);const Y=["ngOnDestroy"],se=(Se,ft,pt,ee={})=>new Proxy(Se,{get:(Te,ue)=>pt.runOutsideAngular(()=>{var Me;if(Se[ue])return!(null===(Me=ee?.spy)||void 0===Me)&&Me.get&&ee.spy.get(ue,Se[ue]),Se[ue];if(Y.indexOf(ue)>-1)return()=>{};const Be=ft.toPromise().then(k=>{const te=k&&k[ue];return"function"==typeof te?te.bind(k):te&&te.then?te.then(be=>pt.run(()=>be)):pt.run(()=>te)});return new Proxy(()=>{},{get:(k,te)=>Be[te],apply:(k,te,be)=>Be.then(it=>{var Lt;const $t=it&&it(...be);return!(null===(Lt=ee?.spy)||void 0===Lt)&&Lt.apply&&ee.spy.apply(ue,be,$t),$t})})})}),ve=(Se,ft)=>{ft.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(ee=>{Object.defineProperty(Se.prototype,ee,Object.getOwnPropertyDescriptor(pt.prototype||pt,ee))})})};class Ee{constructor(ft){return ft}}const Oe=new d.OlP("angularfire2.app.options"),he=new d.OlP("angularfire2.app.name");function U(Se,ft,pt){const Te="object"==typeof pt&&pt||{};Te.name=Te.name||"string"==typeof pt&&pt||"[DEFAULT]";const Me=V.Z.apps.filter(Be=>Be&&Be.name===Te.name)[0]||ft.runOutsideAngular(()=>V.Z.initializeApp(Se,Te));try{JSON.stringify(Se)!==JSON.stringify(Me.options)&&q("error",`${Me.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(Me)}const q=(Se,...ft)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Se](...ft)},ne={provide:Ee,useFactory:U,deps:[Oe,d.R0b,[new d.FiY,he]]};let Ve=(()=>{class Se{constructor(pt){V.Z.registerVersion("angularfire",N.q4.full,"core"),V.Z.registerVersion("angularfire",N.q4.full,"app-compat"),V.Z.registerVersion("angular",d.q4F.full,pt.toString())}static initializeApp(pt,ee){return{ngModule:Se,providers:[{provide:Oe,useValue:pt},{provide:he,useValue:ee}]}}}return Se.\u0275fac=function(pt){return new(pt||Se)(d.LFG(d.Lbi))},Se.\u0275mod=d.oAB({type:Se}),Se.\u0275inj=d.cJS({providers:[ne]}),Se})();function Ie(Se,ft,pt,ee,Te){const[,ue,Me]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Se)||[];if(ue)return function Ye(Se,ft){try{return Se.toString()===ft.toString()}catch{return Se===ft}}(Te,Me)||(Ze("error",`${ft} was already initialized on the ${pt} Firebase App with different settings.${ke?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:Te,was:Me})),ue;{const Be=ee();return globalThis.\u0275AngularfireInstanceCache.push([Se,Be,Te]),Be}}const ke=!!_t.hot,Ze=(Se,...ft)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Se](...ft)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4556:(_t,De,M)=>{M.d(De,{q4:()=>Rs,iC:()=>ss,HU:()=>Td,vb:()=>Es,JM:()=>hr});var d=M(5879),V=M(4097),N=M(5861),Y=M(4303),se=M(9058),ve=M(4537),Ee=M(7879);M(2591);const he="@firebase/remote-config",U="0.4.4",Ie=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Jt{constructor(F,j,ge,Pe){this.client=F,this.storage=j,this.storageCache=ge,this.logger=Pe}isCachedDataFresh(F,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ge=Date.now()-j,Pe=ge<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ge}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${Pe}.`),Pe}fetch(F){var j=this;return(0,N.Z)(function*(){const[ge,Pe]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(Pe&&j.isCachedDataFresh(F.cacheMaxAgeMillis,ge))return Pe;F.eTag=Pe&&Pe.eTag;const qe=yield j.client.fetch(F),et=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===qe.status&&et.push(j.storage.setLastSuccessfulFetchResponse(qe)),yield Promise.all(et),qe})()}}function qn(B=navigator){return B.languages&&B.languages[0]||B.language}class ae{constructor(F,j,ge,Pe,qe,et){this.firebaseInstallations=F,this.sdkVersion=j,this.namespace=ge,this.projectId=Pe,this.apiKey=qe,this.appId=et}fetch(F){var j=this;return(0,N.Z)(function*(){const[ge,Pe]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),et=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},Ft={sdk_version:j.sdkVersion,app_instance_id:ge,app_instance_id_token:Pe,app_id:j.appId,language_code:qn()},qt={method:"POST",headers:bt,body:JSON.stringify(Ft)},Bt=fetch(et,qt),Br=new Promise((ar,Di)=>{F.signal.addEventListener(()=>{const xa=new Error("The operation was aborted.");xa.name="AbortError",Di(xa)})});let Jn;try{yield Promise.race([Bt,Br]),Jn=yield Bt}catch(ar){let Di="fetch-client-network";throw"AbortError"===ar?.name&&(Di="fetch-timeout"),Ie.create(Di,{originalErrorMessage:ar?.message})}let xn=Jn.status;const vo=Jn.headers.get("ETag")||void 0;let Ki,Is;if(200===Jn.status){let ar;try{ar=yield Jn.json()}catch(Di){throw Ie.create("fetch-client-parse",{originalErrorMessage:Di?.message})}Ki=ar.entries,Is=ar.state}if("INSTANCE_STATE_UNSPECIFIED"===Is?xn=500:"NO_CHANGE"===Is?xn=304:("NO_TEMPLATE"===Is||"EMPTY_CONFIG"===Is)&&(Ki={}),304!==xn&&200!==xn)throw Ie.create("fetch-status",{httpStatus:xn});return{status:xn,eTag:vo,config:Ki}})()}}class oe{constructor(F,j){this.client=F,this.storage=j}fetch(F){var j=this;return(0,N.Z)(function*(){const ge=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(F,ge)})()}attemptFetch(F,{throttleEndTimeMillis:j,backoffCount:ge}){var Pe=this;return(0,N.Z)(function*(){yield function pe(B,F){return new Promise((j,ge)=>{const Pe=Math.max(F-Date.now(),0),qe=setTimeout(j,Pe);B.addEventListener(()=>{clearTimeout(qe),ge(Ie.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,j);try{const qe=yield Pe.client.fetch(F);return yield Pe.storage.deleteThrottleMetadata(),qe}catch(qe){if(!function ce(B){if(!(B instanceof se.ZR&&B.customData))return!1;const F=Number(B.customData.httpStatus);return 429===F||500===F||503===F||504===F}(qe))throw qe;const et={throttleEndTimeMillis:Date.now()+(0,se.$s)(ge),backoffCount:ge+1};return yield Pe.storage.setThrottleMetadata(et),Pe.attemptFetch(F,et)}})()}}class tt{constructor(F,j,ge,Pe,qe){this.app=F,this._client=j,this._storageCache=ge,this._storage=Pe,this._logger=qe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ze(B,F){const j=B.target.error||void 0;return Ie.create(F,{originalErrorMessage:j&&j?.message})}const Zt="app_namespace_store";class hn{constructor(F,j,ge,Pe=function yt(){return new Promise((B,F)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=ge=>{F(ze(ge,"storage-open"))},j.onsuccess=ge=>{B(ge.target.result)},j.onupgradeneeded=ge=>{0===ge.oldVersion&&ge.target.result.createObjectStore(Zt,{keyPath:"compositeKey"})}}catch(j){F(Ie.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=F,this.appName=j,this.namespace=ge,this.openDbPromise=Pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var j=this;return(0,N.Z)(function*(){const ge=yield j.openDbPromise;return new Promise((Pe,qe)=>{const bt=ge.transaction([Zt],"readonly").objectStore(Zt),Ft=j.createCompositeKey(F);try{const qt=bt.get(Ft);qt.onerror=Bt=>{qe(ze(Bt,"storage-get"))},qt.onsuccess=Bt=>{const Br=Bt.target.result;Pe(Br?Br.value:void 0)}}catch(qt){qe(Ie.create("storage-get",{originalErrorMessage:qt?.message}))}})})()}set(F,j){var ge=this;return(0,N.Z)(function*(){const Pe=yield ge.openDbPromise;return new Promise((qe,et)=>{const Ft=Pe.transaction([Zt],"readwrite").objectStore(Zt),qt=ge.createCompositeKey(F);try{const Bt=Ft.put({compositeKey:qt,value:j});Bt.onerror=Br=>{et(ze(Br,"storage-set"))},Bt.onsuccess=()=>{qe()}}catch(Bt){et(Ie.create("storage-set",{originalErrorMessage:Bt?.message}))}})})()}delete(F){var j=this;return(0,N.Z)(function*(){const ge=yield j.openDbPromise;return new Promise((Pe,qe)=>{const bt=ge.transaction([Zt],"readwrite").objectStore(Zt),Ft=j.createCompositeKey(F);try{const qt=bt.delete(Ft);qt.onerror=Bt=>{qe(ze(Bt,"storage-delete"))},qt.onsuccess=()=>{Pe()}}catch(qt){qe(Ie.create("storage-delete",{originalErrorMessage:qt?.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class Gn{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,N.Z)(function*(){const j=F.storage.getLastFetchStatus(),ge=F.storage.getLastSuccessfulFetchTimestampMillis(),Pe=F.storage.getActiveConfig(),qe=yield j;qe&&(F.lastFetchStatus=qe);const et=yield ge;et&&(F.lastSuccessfulFetchTimestampMillis=et);const bt=yield Pe;bt&&(F.activeConfig=bt)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function sr(){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,N.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Ln(){(0,Y._registerComponent)(new ve.wA("remote-config",function B(F,{instanceIdentifier:j}){const ge=F.getProvider("app").getImmediate(),Pe=F.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ie.create("registration-window");if(!(0,se.hl)())throw Ie.create("indexed-db-unavailable");const{projectId:qe,apiKey:et,appId:bt}=ge.options;if(!qe)throw Ie.create("registration-project-id");if(!et)throw Ie.create("registration-api-key");if(!bt)throw Ie.create("registration-app-id");const Ft=new hn(bt,ge.name,j=j||"firebase"),qt=new Gn(Ft),Bt=new Ee.Yd(he);Bt.logLevel=Ee.in.ERROR;const Br=new ae(Pe,Y.SDK_VERSION,j,qe,et,bt),Jn=new oe(Br,Ft),xn=new Jt(Jn,Ft,qt,Bt),vo=new tt(ge,xn,qt,Ft,Bt);return function Me(B){const F=(0,se.m9)(B);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(vo),vo},"PUBLIC").setMultipleInstances(!0)),(0,Y.registerVersion)(he,U),(0,Y.registerVersion)(he,U,"esm2017")}();var Un=M(9519);const Tn="analytics",rr="firebase_id",Zr="origin",wt=6e4,It="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nt="https://www.googletagmanager.com/gtag/js",Rt=new Ee.Yd("@firebase/analytics"),fn=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Wt(B){if(!B.startsWith(Nt)){const F=fn.create("invalid-gtag-resource",{gtagURL:B});return Rt.warn(F.message),""}return B}function pn(B){return Promise.all(B.map(F=>F.catch(j=>j)))}function cn(){return(cn=(0,N.Z)(function*(B,F,j,ge,Pe,qe){const et=ge[Pe];try{if(et)yield F[et];else{const Ft=(yield pn(j)).find(qt=>qt.measurementId===Pe);Ft&&(yield F[Ft.appId])}}catch(bt){Rt.error(bt)}B("config",Pe,qe)})).apply(this,arguments)}function or(){return(or=(0,N.Z)(function*(B,F,j,ge,Pe){try{let qe=[];if(Pe&&Pe.send_to){let et=Pe.send_to;Array.isArray(et)||(et=[et]);const bt=yield pn(j);for(const Ft of et){const qt=bt.find(Br=>Br.measurementId===Ft),Bt=qt&&F[qt.appId];if(!Bt){qe=[];break}qe.push(Bt)}}0===qe.length&&(qe=Object.values(F)),yield Promise.all(qe),B("event",ge,Pe||{})}catch(qe){Rt.error(qe)}})).apply(this,arguments)}const Z=30,lt=new class He{constructor(F={},j=1e3){this.throttleMetadata=F,this.intervalMillis=j}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,j){this.throttleMetadata[F]=j}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function Et(B){return new Headers({Accept:"application/json","x-goog-api-key":B})}function z(){return(z=(0,N.Z)(function*(B){var F;const{appId:j,apiKey:ge}=B,Pe={method:"GET",headers:Et(ge)},qe=It.replace("{app-id}",j),et=yield fetch(qe,Pe);if(200!==et.status&&304!==et.status){let bt="";try{const Ft=yield et.json();null!==(F=Ft.error)&&void 0!==F&&F.message&&(bt=Ft.error.message)}catch{}throw fn.create("config-fetch-failed",{httpStatus:et.status,responseMessage:bt})}return et.json()})).apply(this,arguments)}function P(){return(P=(0,N.Z)(function*(B,F=lt,j){const{appId:ge,apiKey:Pe,measurementId:qe}=B.options;if(!ge)throw fn.create("no-app-id");if(!Pe){if(qe)return{measurementId:qe,appId:ge};throw fn.create("no-api-key")}const et=F.getThrottleMetadata(ge)||{backoffCount:0,throttleEndTimeMillis:Date.now()},bt=new Qe;return setTimeout((0,N.Z)(function*(){bt.abort()}),void 0!==j?j:wt),R({appId:ge,apiKey:Pe,measurementId:qe},et,bt,F)})).apply(this,arguments)}function R(B,F,j){return x.apply(this,arguments)}function x(){return x=(0,N.Z)(function*(B,{throttleEndTimeMillis:F,backoffCount:j},ge,Pe=lt){var qe;const{appId:et,measurementId:bt}=B;try{yield function X(B,F){return new Promise((j,ge)=>{const Pe=Math.max(F-Date.now(),0),qe=setTimeout(j,Pe);B.addEventListener(()=>{clearTimeout(qe),ge(fn.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(ge,F)}catch(Ft){if(bt)return Rt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Ft?.message}]`),{appId:et,measurementId:bt};throw Ft}try{const Ft=yield function yn(B){return z.apply(this,arguments)}(B);return Pe.deleteThrottleMetadata(et),Ft}catch(Ft){const qt=Ft;if(!function Ne(B){if(!(B instanceof se.ZR&&B.customData))return!1;const F=Number(B.customData.httpStatus);return 429===F||500===F||503===F||504===F}(qt)){if(Pe.deleteThrottleMetadata(et),bt)return Rt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${qt?.message}]`),{appId:et,measurementId:bt};throw Ft}const Bt=503===Number(null===(qe=qt?.customData)||void 0===qe?void 0:qe.httpStatus)?(0,se.$s)(j,Pe.intervalMillis,Z):(0,se.$s)(j,Pe.intervalMillis),Br={throttleEndTimeMillis:Date.now()+Bt,backoffCount:j+1};return Pe.setThrottleMetadata(et,Br),Rt.debug(`Calling attemptFetch again in ${Bt} millis`),R(B,Br,ge,Pe)}}),x.apply(this,arguments)}class Qe{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}let xt,An;function _n(){return(_n=(0,N.Z)(function*(B,F,j,ge,Pe){if(Pe&&Pe.global)B("event",j,ge);else{const qe=yield F;B("event",j,Object.assign(Object.assign({},ge),{send_to:qe}))}})).apply(this,arguments)}function Rr(){return(Rr=(0,N.Z)(function*(){if(!(0,se.hl)())return Rt.warn(fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(B){return Rt.warn(fn.create("indexeddb-unavailable",{errorInfo:B?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ps(){return Ps=(0,N.Z)(function*(B,F,j,ge,Pe,qe,et){var bt;const Ft=function G(B){return P.apply(this,arguments)}(B);Ft.then(xn=>{j[xn.measurementId]=xn.appId,B.options.measurementId&&xn.measurementId!==B.options.measurementId&&Rt.warn(`The measurement ID in the local Firebase config (${B.options.measurementId}) does not match the measurement ID fetched from the server (${xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(xn=>Rt.error(xn)),F.push(Ft);const qt=function qi(){return Rr.apply(this,arguments)}().then(xn=>{if(xn)return ge.getId()}),[Bt,Br]=yield Promise.all([Ft,qt]);(function ye(B){const F=window.document.getElementsByTagName("script");for(const j of Object.values(F))if(j.src&&j.src.includes(Nt)&&j.src.includes(B))return j;return null})(qe)||function rn(B,F){const j=function Nr(B,F){let j;return window.trustedTypes&&(j=window.trustedTypes.createPolicy(B,F)),j}("firebase-js-sdk-policy",{createScriptURL:Wt}),ge=document.createElement("script"),Pe=`${Nt}?l=${B}&id=${F}`;ge.src=j?j?.createScriptURL(Pe):Pe,ge.async=!0,document.head.appendChild(ge)}(qe,Bt.measurementId),An&&(Pe("consent","default",An),function ni(B){An=B}(void 0)),Pe("js",new Date);const Jn=null!==(bt=et?.config)&&void 0!==bt?bt:{};return Jn[Zr]="firebase",Jn.update=!0,null!=Br&&(Jn[rr]=Br),Pe("config",Bt.measurementId,Jn),xt&&(Pe("set",xt),function ri(B){xt=B}(void 0)),Bt.measurementId}),Ps.apply(this,arguments)}class Zs{constructor(F){this.app=F}_delete(){return delete Wr[this.app.options.appId],Promise.resolve()}}let Wr={},mi=[];const Ns={};let Xn,Zi,vs="dataLayer",Ii=!1;function Kr(B,F,j){!function mo(){const B=[];if((0,se.ru)()&&B.push("This is a browser extension environment."),(0,se.zI)()||B.push("Cookies are not available."),B.length>0){const F=B.map((ge,Pe)=>`(${Pe+1}) ${ge}`).join(" "),j=fn.create("invalid-analytics-context",{errorInfo:F});Rt.warn(j.message)}}();const ge=B.options.appId;if(!ge)throw fn.create("no-app-id");if(!B.options.apiKey){if(!B.options.measurementId)throw fn.create("no-api-key");Rt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${B.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wr[ge])throw fn.create("already-exists",{id:ge});if(!Ii){!function gi(B){let F=[];Array.isArray(window[B])?F=window[B]:window[B]=F}(vs);const{wrappedGtag:qe,gtagCore:et}=function jn(B,F,j,ge,Pe){let qe=function(...et){window[ge].push(arguments)};return window[Pe]&&"function"==typeof window[Pe]&&(qe=window[Pe]),window[Pe]=function lr(B,F,j,ge){function qe(){return qe=(0,N.Z)(function*(et,...bt){try{if("event"===et){const[Ft,qt]=bt;yield function Ir(B,F,j,ge,Pe){return or.apply(this,arguments)}(B,F,j,Ft,qt)}else if("config"===et){const[Ft,qt]=bt;yield function Xt(B,F,j,ge,Pe,qe){return cn.apply(this,arguments)}(B,F,j,ge,Ft,qt)}else if("consent"===et){const[Ft]=bt;B("consent","update",Ft)}else if("get"===et){const[Ft,qt,Bt]=bt;B("get",Ft,qt,Bt)}else if("set"===et){const[Ft]=bt;B("set",Ft)}else B(et,...bt)}catch(Ft){Rt.error(Ft)}}),qe.apply(this,arguments)}return function Pe(et){return qe.apply(this,arguments)}}(qe,B,F,j),{gtagCore:qe,wrappedGtag:window[Pe]}}(Wr,mi,Ns,vs,"gtag");Zi=qe,Xn=et,Ii=!0}return Wr[ge]=function ln(B,F,j,ge,Pe,qe,et){return Ps.apply(this,arguments)}(B,mi,Ns,F,Xn,vs,j),new Zs(B)}function Pu(){return H.apply(this,arguments)}function H(){return(H=(0,N.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const is="@firebase/analytics";!function Nu(){(0,Y._registerComponent)(new ve.wA(Tn,(F,{options:j})=>Kr(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,Y._registerComponent)(new ve.wA("analytics-internal",function B(F){try{const j=F.getProvider(Tn).getImmediate();return{logEvent:(ge,Pe,qe)=>function dr(B,F,j,ge){B=(0,se.m9)(B),function st(B,F,j,ge,Pe){return _n.apply(this,arguments)}(Zi,Wr[B.app.options.appId],F,j,ge).catch(Pe=>Rt.error(Pe))}(j,ge,Pe,qe)}}catch(j){throw fn.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,Y.registerVersion)(is,"0.10.0"),(0,Y.registerVersion)(is,"0.10.0","esm2017")}();var Ta=M(1954),Sa=M(2631);const Vr=new class In extends Sa.v{}(class Aa extends Ta.o{constructor(F,j){super(F,j),this.scheduler=F,this.work=j}schedule(F,j=0){return j>0?super.schedule(F,j):(this.delay=j,this.state=F,this.scheduler.flush(this),this)}execute(F,j){return j>0||this.closed?super.execute(F,j):this._execute(F,j)}requestAsyncId(F,j,ge=0){return null!=ge&&ge>0||null==ge&&this.delay>0?super.requestAsyncId(F,j,ge):(F.flush(this),0)}});var yo=M(6321),ii=M(9397),Lc=M(5137),Ma=M(3093);const Rs=new d.GfV("7.6.1"),Wi="__angularfire_symbol__analyticsIsSupportedValue",Jo="__angularfire_symbol__analyticsIsSupported",Qn="__angularfire_symbol__remoteConfigIsSupportedValue",Xe="__angularfire_symbol__remoteConfigIsSupported",zt="__angularfire_symbol__messagingIsSupportedValue",$n="__angularfire_symbol__messagingIsSupported";function hr(B,F,j){if(F){if(1===F.length)return F[0];const qe=F.filter(et=>et.app===j);if(1===qe.length)return qe[0]}return j.container.getProvider(B).getImmediate({optional:!0})}globalThis[Jo]||(globalThis[Jo]=Pu().then(B=>globalThis[Wi]=B).catch(()=>globalThis[Wi]=!1)),globalThis[$n]||(globalThis[$n]=(0,Un.Gb)().then(B=>globalThis[zt]=B).catch(()=>globalThis[zt]=!1)),globalThis[Xe]||(globalThis[Xe]=sr().then(B=>globalThis[Qn]=B).catch(()=>globalThis[Qn]=!1));const Es=(B,F)=>{const j=F?[F]:(0,V.C6)(),ge=[];return j.forEach(Pe=>{Pe.container.getProvider(B).instances.forEach(et=>{ge.includes(et)||ge.push(et)})}),ge};function bi(){}class kt{constructor(F,j=Vr){this.zone=F,this.delegate=j}now(){return this.delegate.now()}schedule(F,j,ge){const Pe=this.zone;return this.delegate.schedule(function(et){Pe.runGuarded(()=>{F.apply(this,[et])})},j,ge)}}class Xo{constructor(F){this.zone=F,this.task=null}call(F,j){const ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bi,{},bi,bi)),j.pipe((0,ii.b)({next:ge,complete:ge,error:ge})).subscribe(F).add(ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Td=(()=>{class B{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new kt(Zone.current)),this.insideAngular=j.run(()=>new kt(Zone.current,yo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return B.\u0275fac=function(j){return new(j||B)(d.LFG(d.R0b))},B.\u0275prov=d.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})();function br(){const B=globalThis.\u0275AngularFireScheduler;if(!B)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return B}function ss(B){return br(),function Uc(B){return function(j){return(j=j.lift(new Xo(B.ngZone))).pipe((0,Lc.R)(B.outsideAngular),(0,Ma.Q)(B.insideAngular))}}(br())(B)}},6710:(_t,De,M)=>{M.d(De,{$:()=>Sd,A:()=>q,D:()=>Ie,I:()=>mo,J:()=>H,L:()=>Xe,N:()=>Et,P:()=>ur,Q:()=>Li,R:()=>Tp,U:()=>Uc,V:()=>Ws,W:()=>Cs,X:()=>ss,Y:()=>ge,Z:()=>Pe,_:()=>qt,a:()=>Wc,a0:()=>Ew,a1:()=>wr,a2:()=>MT,a3:()=>xT,a4:()=>ny,a5:()=>wo,a6:()=>Ru,a7:()=>xd,a8:()=>Od,a9:()=>ry,aA:()=>k,aB:()=>Ba,aC:()=>He,aD:()=>yn,aE:()=>So,aF:()=>el,aG:()=>no,aH:()=>Xn,aL:()=>Lu,aO:()=>F,aa:()=>op,ab:()=>iy,ac:()=>ap,ad:()=>oy,ae:()=>$c,af:()=>ay,ai:()=>Iw,aj:()=>OT,ak:()=>cy,an:()=>vo,ao:()=>Fu,aq:()=>Vd,ar:()=>Zc,as:()=>be,at:()=>st,au:()=>Ne,av:()=>ee,aw:()=>as,ax:()=>Jd,ay:()=>_n,az:()=>Te,b:()=>$d,c:()=>xi,d:()=>Jc,e:()=>ta,f:()=>tl,g:()=>Oi,h:()=>Zn,i:()=>Ls,j:()=>Iy,k:()=>io,l:()=>Ap,m:()=>$a,p:()=>Oe,r:()=>Pt,s:()=>Si,u:()=>Mi});var d=M(5861),V=M(9058),N=M(7592),Y=M(7582),se=M(7879),ve=M(4537);const Oe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ie=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ye=function Ve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ke=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new se.Yd("@firebase/auth");function pt(w,...p){Se.logLevel<=se.in.ERROR&&Se.error(`Auth (${N.SDK_VERSION}): ${w}`,...p)}function ee(w,...p){throw Be(w,...p)}function Te(w,...p){return Be(w,...p)}function ue(w,p,m){const E=Object.assign(Object.assign({},Ye()),{[p]:m});return new V.LL("auth","Firebase",E).create(p,{appName:w.name})}function Me(w,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&ee(w,"argument-error"),ue(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(w,...p){if("string"!=typeof w){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(m,...E)}return ke.create(w,...p)}function k(w,p,...m){if(!w)throw Be(p,...m)}function te(w){const p="INTERNAL ASSERTION FAILED: "+w;throw pt(p),new Error(p)}function be(w,p){w||te(p)}function it(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Lt(){return"http:"===$t()||"https:"===$t()}function $t(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Jt{constructor(p,m){this.shortDelay=p,this.longDelay=m,be(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Ht(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Lt()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qn(w,p){be(w.emulator,"Emulator should always be set here");const{url:m}=w.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ae{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void te("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void te("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void te("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ce=new Jt(3e4,6e4);function oe(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function Ae(w,p,m,E){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,d.Z)(function*(w,p,m,E,T={}){return tt(w,T,(0,d.Z)(function*(){let O={},Q={};E&&("GET"===p?Q=E:O={body:JSON.stringify(E)});const me=(0,V.xO)(Object.assign({key:w.config.apiKey},Q)).slice(1),Je=yield w._getAdditionalHeaders();return Je["Content-Type"]="application/json",w.languageCode&&(Je["X-Firebase-Locale"]=w.languageCode),ae.fetch()(nn(w,w.config.apiHost,m,me),Object.assign({method:p,headers:Je,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function tt(w,p,m){return ze.apply(this,arguments)}function ze(){return(ze=(0,d.Z)(function*(w,p,m){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},pe),p);try{const T=new yt(w),O=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const Q=yield O.json();if("needConfirmation"in Q)throw hn(w,"account-exists-with-different-credential",Q);if(O.ok&&!("errorMessage"in Q))return Q;{const me=O.ok?Q.errorMessage:Q.error.message,[Je,rt]=me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw hn(w,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Je)throw hn(w,"email-already-in-use",Q);if("USER_DISABLED"===Je)throw hn(w,"user-disabled",Q);const Tt=E[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw ue(w,Tt,rt);ee(w,Tt)}}catch(T){if(T instanceof V.ZR)throw T;ee(w,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function Zt(w,p,m,E){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(w,p,m,E,T={}){const O=yield Ae(w,p,m,E,T);return"mfaPendingCredential"in O&&ee(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function nn(w,p,m,E){const T=`${p}${m}?${E}`;return w.config.emulator?qn(w.config,T):`${w.config.apiScheme}://${T}`}class yt{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Te(this.auth,"network-request-failed")),ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hn(w,p,m){const E={appName:w.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const T=Te(w,p,E);return T.customData._tokenResponse=m,T}function Ln(){return(Ln=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Un(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Zr(){return(Zr=(0,d.Z)(function*(w,p=!1){const m=(0,V.m9)(w),E=yield m.getIdToken(p),T=It(E);k(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const O="object"==typeof T.firebase?T.firebase:void 0,Q=O?.sign_in_provider;return{claims:T,token:E,authTime:Un(wt(T.auth_time)),issuedAtTime:Un(wt(T.iat)),expirationTime:Un(wt(T.exp)),signInProvider:Q||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(w){return 1e3*Number(w)}function It(w){const[p,m,E]=w.split(".");if(void 0===p||void 0===m||void 0===E)return pt("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,V.tV)(m);return T?JSON.parse(T):(pt("Failed to decode base64 JWT payload"),null)}catch(T){return pt("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Rt(w,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,d.Z)(function*(w,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof V.ZR&&function fn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}class Wt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class pn{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Un(this.lastLoginAt),this.creationTime=Un(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nr(w){return rn.apply(this,arguments)}function rn(){return rn=(0,d.Z)(function*(w){var p;const m=w.auth,E=yield w.getIdToken(),T=yield Rt(w,function sr(w,p){return Yn.apply(this,arguments)}(m,{idToken:E}));k(T?.users.length,m,"internal-error");const O=T.users[0];w._notifyReloadListener(O);const Q=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?function Ir(w){return w.map(p=>{var{providerId:m}=p,E=(0,Y._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(O.providerUserInfo):[],me=function cn(w,p){return[...w.filter(E=>!p.some(T=>T.providerId===E.providerId)),...p]}(w.providerData,Q),Tt=!!w.isAnonymous&&!(w.email&&O.passwordHash||me?.length),bn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:me,metadata:new pn(O.createdAt,O.lastLoginAt),isAnonymous:Tt};Object.assign(w,bn)}),rn.apply(this,arguments)}function Xt(){return(Xt=(0,d.Z)(function*(w){const p=(0,V.m9)(w);yield Nr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function lr(){return(lr=(0,d.Z)(function*(w,p){const m=yield tt(w,{},(0,d.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:T,apiKey:O}=w.config,Q=nn(w,T,"/v1/token",`key=${O}`),me=yield w._getAdditionalHeaders();return me["Content-Type"]="application/x-www-form-urlencoded",ae.fetch()(Q,{method:"POST",headers:me,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class jn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){k(p.idToken,"internal-error"),k(typeof p.idToken<"u","internal-error"),k(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Nt(w){const p=It(w);return k(p,"internal-error"),k(typeof p.exp<"u","internal-error"),k(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,d.Z)(function*(){return k(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,d.Z)(function*(){const{accessToken:T,refreshToken:O,expiresIn:Q}=yield function or(w,p){return lr.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(T,O,Number(Q))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:T,expirationTime:O}=m,Q=new jn;return E&&(k("string"==typeof E,"internal-error",{appName:p}),Q.refreshToken=E),T&&(k("string"==typeof T,"internal-error",{appName:p}),Q.accessToken=T),O&&(k("number"==typeof O,"internal-error",{appName:p}),Q.expirationTime=O),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new jn,this.toJSON())}_performRefresh(){return te("not implemented")}}function ye(w,p){k("string"==typeof w||typeof w>"u","internal-error",{appName:p})}class Z{constructor(p){var{uid:m,auth:E,stsTokenManager:T}=p,O=(0,Y._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new pn(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,d.Z)(function*(){const E=yield Rt(m,m.stsTokenManager.getToken(m.auth,p));return k(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function rr(w){return Zr.apply(this,arguments)}(this,p)}reload(){return function gi(w){return Xt.apply(this,arguments)}(this)}_assign(p){this!==p&&(k(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Z(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,d.Z)(function*(){let T=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),T=!0),m&&(yield Nr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,d.Z)(function*(){const m=yield p.getIdToken();return yield Rt(p,function Gn(w,p){return Ln.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,T,O,Q,me,Je,rt,Tt;const bn=null!==(E=m.displayName)&&void 0!==E?E:void 0,_i=null!==(T=m.email)&&void 0!==T?T:void 0,us=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,so=null!==(Q=m.photoURL)&&void 0!==Q?Q:void 0,Vp=null!==(me=m.tenantId)&&void 0!==me?me:void 0,Zu=null!==(Je=m._redirectEventId)&&void 0!==Je?Je:void 0,ua=null!==(rt=m.createdAt)&&void 0!==rt?rt:void 0,ca=null!==(Tt=m.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:hl,emailVerified:Wu,isAnonymous:cs,providerData:qa,stsTokenManager:oo}=m;k(hl&&oo,p,"internal-error");const Ku=jn.fromJSON(this.name,oo);k("string"==typeof hl,p,"internal-error"),ye(bn,p.name),ye(_i,p.name),k("boolean"==typeof Wu,p,"internal-error"),k("boolean"==typeof cs,p,"internal-error"),ye(us,p.name),ye(so,p.name),ye(Vp,p.name),ye(Zu,p.name),ye(ua,p.name),ye(ca,p.name);const Ro=new Z({uid:hl,auth:p,email:_i,emailVerified:Wu,displayName:bn,isAnonymous:cs,photoURL:so,phoneNumber:us,tenantId:Vp,stsTokenManager:Ku,createdAt:ua,lastLoginAt:ca});return qa&&Array.isArray(qa)&&(Ro.providerData=qa.map(fl=>Object.assign({},fl))),Zu&&(Ro._redirectEventId=Zu),Ro}static _fromIdTokenResponse(p,m,E=!1){return(0,d.Z)(function*(){const T=new jn;T.updateFromServerResponse(m);const O=new Z({uid:m.localId,auth:p,stsTokenManager:T,isAnonymous:E});return yield Nr(O),O})()}}const Ce=new Map;function He(w){be(w instanceof Function,"Expected a class definition");let p=Ce.get(w);return p?(be(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,Ce.set(w,p),p)}const Et=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,E){var T=this;return(0,d.Z)(function*(){T.storage[m]=E})()}_get(m){var E=this;return(0,d.Z)(function*(){const T=E.storage[m];return void 0===T?null:T})()}_remove(m){var E=this;return(0,d.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return w.type="NONE",w})();function yn(w,p,m){return`firebase:${w}:${p}:${m}`}class z{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:T,name:O}=this.auth;this.fullUserKey=yn(this.userKey,T.apiKey,O),this.fullPersistenceKey=yn("persistence",T.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Z._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,d.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,d.Z)(function*(){if(!m.length)return new z(He(Et),p,E);const T=(yield Promise.all(m.map(function(){var rt=(0,d.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let O=T[0]||He(Et);const Q=yn(E,p.config.apiKey,p.name);let me=null;for(const rt of m)try{const Tt=yield rt._get(Q);if(Tt){const bn=Z._fromJSON(p,Tt);rt!==O&&(me=bn),O=rt;break}}catch{}const Je=T.filter(rt=>rt._shouldAllowMigration);return O._shouldAllowMigration&&Je.length?(O=Je[0],me&&(yield O._set(Q,me.toJSON())),yield Promise.all(m.map(function(){var rt=(0,d.Z)(function*(Tt){if(Tt!==O)try{yield Tt._remove(Q)}catch{}});return function(Tt){return rt.apply(this,arguments)}}())),new z(O,p,E)):new z(O,p,E)})()}}function G(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(X(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(P(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Qe(p))return"Blackberry";if(xt(p))return"Webos";if(R(p))return"Safari";if((p.includes("chrome/")||x(p))&&!p.includes("edge/"))return"Chrome";if(Ne(p))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function P(w=(0,V.z$)()){return/firefox\//i.test(w)}function R(w=(0,V.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function x(w=(0,V.z$)()){return/crios\//i.test(w)}function X(w=(0,V.z$)()){return/iemobile/i.test(w)}function Ne(w=(0,V.z$)()){return/android/i.test(w)}function Qe(w=(0,V.z$)()){return/blackberry/i.test(w)}function xt(w=(0,V.z$)()){return/webos/i.test(w)}function st(w=(0,V.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function _n(w=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Kt(w=(0,V.z$)()){return st(w)||Ne(w)||xt(w)||Qe(w)||/windows phone/i.test(w)||X(w)}function K(w,p=[]){let m;switch(w){case"Browser":m=G((0,V.z$)());break;case"Worker":m=`${G((0,V.z$)())}-${w}`;break;default:m=w}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${N.SDK_VERSION}/${E}`}function nt(){return(nt=(0,d.Z)(function*(w){return(yield Ae(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ot(w,p){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,d.Z)(function*(w,p){return Ae(w,"GET","/v2/recaptchaConfig",oe(w,p))})).apply(this,arguments)}function dt(w){return void 0!==w&&void 0!==w.getResponse}function An(w){return void 0!==w&&void 0!==w.enterprise}class ni{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function qi(w){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=p,E.onerror=T=>{const O=Te("internal-error");O.customData=T,m(O)},E.type="text/javascript",E.charset="UTF-8",function ri(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(E)})}function Rr(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Wr{constructor(p){this.type="recaptcha-enterprise",this.auth=Xn(p)}verify(p="verify",m=!1){var E=this;return(0,d.Z)(function*(){function O(){return O=(0,d.Z)(function*(me){if(!m){if(null==me.tenantId&&null!=me._agentRecaptchaConfig)return me._agentRecaptchaConfig.siteKey;if(null!=me.tenantId&&void 0!==me._tenantRecaptchaConfigs[me.tenantId])return me._tenantRecaptchaConfigs[me.tenantId].siteKey}return new Promise(function(){var Je=(0,d.Z)(function*(rt,Tt){ot(me,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(bn=>{if(void 0!==bn.recaptchaKey){const _i=new ni(bn);return null==me.tenantId?me._agentRecaptchaConfig=_i:me._tenantRecaptchaConfigs[me.tenantId]=_i,rt(_i.siteKey)}Tt(new Error("recaptcha Enterprise site key undefined"))}).catch(bn=>{Tt(bn)})});return function(rt,Tt){return Je.apply(this,arguments)}}())}),O.apply(this,arguments)}function Q(me,Je,rt){const Tt=window.grecaptcha;An(Tt)?Tt.enterprise.ready(()=>{Tt.enterprise.execute(me,{action:p}).then(bn=>{Je(bn)}).catch(()=>{Je("NO_RECAPTCHA")})}):rt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((me,Je)=>{(function T(me){return O.apply(this,arguments)})(E.auth).then(rt=>{if(!m&&An(window.grecaptcha))Q(rt,me,Je);else{if(typeof window>"u")return void Je(new Error("RecaptchaVerifier is only supported in browser"));qi("https://www.google.com/recaptcha/enterprise.js?render="+rt).then(()=>{Q(rt,me,Je)}).catch(Tt=>{Je(Tt)})}}).catch(rt=>{Je(rt)})})})()}}function mi(w,p,m){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(w,p,m,E=!1){const T=new Wr(w);let O;try{O=yield T.verify(m)}catch{O=yield T.verify(m,!0)}const Q=Object.assign({},p);return Object.assign(Q,E?{captchaResp:O}:{captchaResponse:O}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class vs{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=O=>new Promise((Q,me)=>{try{Q(p(O))}catch(Je){me(Je)}});E.onAbort=m,this.queue.push(E);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const T of m.queue)yield T(p),T.onAbort&&E.push(T.onAbort)}catch(T){E.reverse();for(const O of E)try{O()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class ws{constructor(p,m,E,T){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=E,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zi(this),this.idTokenSubscription=new Zi(this),this.beforeStateQueue=new vs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=He(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var T,O;if(!E._deleted&&(E.persistenceManager=yield z.create(E,p),!E._deleted)){if(null!==(T=E._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,d.Z)(function*(){var E;const T=yield m.assertedPersistence.getCurrentUser();let O=T,Q=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const me=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Je=O?._redirectEventId,rt=yield m.tryRedirectSignIn(p);(!me||me===Je)&&rt?.user&&(O=rt.user,Q=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(Q)try{yield m.beforeStateQueue.runMiddleware(O)}catch(me){O=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(me))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return k(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var m=this;return(0,d.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,d.Z)(function*(){try{yield Nr(p)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function dn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,d.Z)(function*(){const E=p?(0,V.m9)(p):null;return E&&k(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return p&&k(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(He(p))}))}initializeRecaptchaConfig(){var p=this;return(0,d.Z)(function*(){const m=yield ot(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new ni(m);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new Wr(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new V.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,d.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(m);return null===p?T.removeCurrentUser():T.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&He(p)||m._popupRedirectResolver;k(E,m,"argument-error"),m.redirectPersistenceManager=yield z.create(m,[He(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,d.Z)(function*(){var E,T;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,d.Z)(function*(){if(p===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,T){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return k(Q,this,"internal-error"),Q.then(()=>O(this.currentUser)),"function"==typeof m?p.addObserver(m,E,T):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=K(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const T=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();T&&(E["X-Firebase-Client"]=T);const O=yield p._getAppCheckToken();return O&&(E["X-Firebase-AppCheck"]=O),E})()}_getAppCheckToken(){var p=this;return(0,d.Z)(function*(){var m;const E=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return E?.error&&function ft(w,...p){Se.logLevel<=se.in.WARN&&Se.warn(`Auth (${N.SDK_VERSION}): ${w}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Xn(w){return(0,V.m9)(w)}class Zi{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,V.ne)(m=>this.observer=m)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mo(w,p,m){const E=Xn(w);k(E._canInitEmulator,E,"emulator-config-failed"),k(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const T=!!m?.disableWarnings,O=Kr(p),{host:Q,port:me}=function Da(w){const p=Kr(w),m=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const O=T[1];return{host:O,port:Yo(E.substr(O.length+1))}}{const[O,Q]=E.split(":");return{host:O,port:Yo(Q)}}}(p);E.config.emulator={url:`${O}//${Q}${null===me?"":`:${me}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:me,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Pu(){function w(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Kr(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function Yo(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class H{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return te("not implemented")}_getIdTokenResponse(p){return te("not implemented")}_linkToIdToken(p,m){return te("not implemented")}_getReauthenticationResolver(p){return te("not implemented")}}function re(w,p){return xe.apply(this,arguments)}function xe(){return(xe=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:resetPassword",oe(w,p))})).apply(this,arguments)}function gt(w,p){return En.apply(this,arguments)}function En(){return(En=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function en(){return(en=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:update",oe(w,p))})).apply(this,arguments)}function ir(w,p){return dr.apply(this,arguments)}function dr(){return(dr=(0,d.Z)(function*(w,p){return Zt(w,"POST","/v1/accounts:signInWithPassword",oe(w,p))})).apply(this,arguments)}function kr(w,p){return is.apply(this,arguments)}function is(){return(is=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:sendOobCode",oe(w,p))})).apply(this,arguments)}function Nu(){return(Nu=(0,d.Z)(function*(w,p){return kr(w,p)})).apply(this,arguments)}function Ta(w,p){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(w,p){return kr(w,p)})).apply(this,arguments)}function Sa(w,p){return In.apply(this,arguments)}function In(){return(In=(0,d.Z)(function*(w,p){return kr(w,p)})).apply(this,arguments)}function Yr(){return(Yr=(0,d.Z)(function*(w,p){return kr(w,p)})).apply(this,arguments)}function ii(){return(ii=(0,d.Z)(function*(w,p){return Zt(w,"POST","/v1/accounts:signInWithEmailLink",oe(w,p))})).apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(w,p){return Zt(w,"POST","/v1/accounts:signInWithEmailLink",oe(w,p))})).apply(this,arguments)}class Rs extends H{constructor(p,m,E,T=null){super("password",E),this._email=p,this._password=m,this._tenantId=T}static _fromEmailAndPassword(p,m){return new Rs(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new Rs(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,d.Z)(function*(){var E;switch(m.signInMethod){case"password":const T={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const O=yield mi(p,T,"signInWithPassword");return ir(p,O)}return ir(p,T).catch(function(){var O=(0,d.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const me=yield mi(p,T,"signInWithPassword");return ir(p,me)}return Promise.reject(Q)});return function(Q){return O.apply(this,arguments)}}());case"emailLink":return function yo(w,p){return ii.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:ee(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return gt(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Lc(w,p){return Ma.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:ee(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Wi(w,p){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,d.Z)(function*(w,p){return Zt(w,"POST","/v1/accounts:signInWithIdp",oe(w,p))})).apply(this,arguments)}class Xe extends H{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Xe(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):ee("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:T}=m,O=(0,Y._T)(m,["providerId","signInMethod"]);if(!E||!T)return null;const Q=new Xe(E,T);return Q.idToken=O.idToken||void 0,Q.accessToken=O.accessToken||void 0,Q.secret=O.secret,Q.nonce=O.nonce,Q.pendingToken=O.pendingToken||null,Q}_getIdTokenResponse(p){return Wi(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Wi(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Wi(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,V.xO)(m)}return p}}function $n(){return($n=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:sendVerificationCode",oe(w,p))})).apply(this,arguments)}function ks(){return(ks=(0,d.Z)(function*(w,p){return Zt(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,p))})).apply(this,arguments)}function _o(){return(_o=(0,d.Z)(function*(w,p){const m=yield Zt(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,p));if(m.temporaryProof)throw hn(w,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const hr={USER_NOT_FOUND:"user-not-found"};function bi(){return(bi=(0,d.Z)(function*(w,p){return Zt(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),hr)})).apply(this,arguments)}class kt extends H{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new kt({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new kt({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function si(w,p){return ks.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Qr(w,p){return _o.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Es(w,p){return bi.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:T}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:T}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:O}=p;return E||m||T||O?new kt({verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:O}):null}}class br{constructor(p){var m,E,T,O,Q,me;const Je=(0,V.zd)((0,V.pd)(p)),rt=null!==(m=Je.apiKey)&&void 0!==m?m:null,Tt=null!==(E=Je.oobCode)&&void 0!==E?E:null,bn=function Xo(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Je.mode)&&void 0!==T?T:null);k(rt&&Tt&&bn,"argument-error"),this.apiKey=rt,this.operation=bn,this.code=Tt,this.continueUrl=null!==(O=Je.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Q=Je.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(me=Je.tenantId)&&void 0!==me?me:null}static parseLink(p){const m=function Td(w){const p=(0,V.zd)((0,V.pd)(w)).link,m=p?(0,V.zd)((0,V.pd)(p)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(w)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||m||p||w}(p);try{return new br(m)}catch{return null}}}let Li=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(m,E){return Rs._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const T=br.parseLink(E);return k(T,"argument-error"),Rs._fromEmailAndCode(m,T.code,T.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Ui{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class yi extends Ui{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ss extends yi{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return k("providerId"in m&&"signInMethod"in m,"argument-error"),Xe._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return k(p.idToken||p.accessToken,"argument-error"),Xe._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ss.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ss.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:O,nonce:Q,providerId:me}=p;if(!E&&!T&&!m&&!O||!me)return null;try{return new ss(me)._credential({idToken:m,accessToken:E,nonce:Q,pendingToken:O})}catch{return null}}}let Uc=(()=>{class w extends yi{constructor(){super("facebook.com")}static credential(m){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Ws=(()=>{class w extends yi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:T}=m;if(!E&&!T)return null;try{return w.credential(E,T)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Cs=(()=>{class w extends yi{constructor(){super("github.com")}static credential(m){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class F extends H{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Wi(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Wi(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Wi(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:T,pendingToken:O}=m;return E&&T&&O&&E===T?new F(E,O):null}static _create(p,m){return new F(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ge extends Ui{constructor(p){k(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ge.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ge.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=F.fromJSON(p);return k(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return F._create(E,m)}catch{return null}}}let Pe=(()=>{class w extends yi{constructor(){super("twitter.com")}static credential(m,E){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=m;if(!E||!T)return null;try{return w.credential(E,T)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function qe(w,p){return et.apply(this,arguments)}function et(){return(et=(0,d.Z)(function*(w,p){return Zt(w,"POST","/v1/accounts:signUp",oe(w,p))})).apply(this,arguments)}class bt{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,T=!1){return(0,d.Z)(function*(){const O=yield Z._fromIdTokenResponse(p,E,T),Q=Ft(E);return new bt({user:O,providerId:Q,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const T=Ft(E);return new bt({user:p,providerId:T,_tokenResponse:E,operationType:m})})()}}function Ft(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function qt(w){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,d.Z)(function*(w){var p;const m=Xn(w);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new bt({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield qe(m,{returnSecureToken:!0}),T=yield bt._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Br extends V.ZR{constructor(p,m,E,T){var O;super(m.code,m.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,Br.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,T){return new Br(p,m,E,T)}}function Jn(w,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(w):m._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Br._fromErrorAndOperation(w,O,p,E):O})}function xn(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function vo(w,p){return Ki.apply(this,arguments)}function Ki(){return Ki=(0,d.Z)(function*(w,p){const m=(0,V.m9)(w);yield Di(!0,m,p);const{providerUserInfo:E}=yield function vn(w,p){return Nn.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),T=xn(E||[]);return m.providerData=m.providerData.filter(O=>T.has(O.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),Ki.apply(this,arguments)}function Is(w,p){return ar.apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(w,p,m=!1){const E=yield Rt(w,p._linkToIdToken(w.auth,yield w.getIdToken()),m);return bt._forOperation(w,"link",E)})).apply(this,arguments)}function Di(w,p,m){return xa.apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(w,p,m){yield Nr(p);const T=!1===w?"provider-already-linked":"no-such-provider";k(xn(p.providerData).has(m)===w,p.auth,T)})).apply(this,arguments)}function ip(w,p){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,d.Z)(function*(w,p,m=!1){const{auth:E}=w,T="reauthenticate";try{const O=yield Rt(w,Jn(E,T,p,w),m);k(O.idToken,E,"internal-error");const Q=It(O.idToken);k(Q,E,"internal-error");const{sub:me}=Q;return k(w.uid===me,E,"user-mismatch"),bt._forOperation(w,T,O)}catch(O){throw"auth/user-not-found"===O?.code&&ee(E,"user-mismatch"),O}})).apply(this,arguments)}function Km(w,p){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,d.Z)(function*(w,p,m=!1){const E="signIn",T=yield Jn(w,E,p),O=yield bt._fromIdTokenResponse(w,E,T);return m||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Sd(w,p){return sp.apply(this,arguments)}function sp(){return(sp=(0,d.Z)(function*(w,p){return Km(Xn(w),p)})).apply(this,arguments)}function Ew(w,p){return Ym.apply(this,arguments)}function Ym(){return(Ym=(0,d.Z)(function*(w,p){const m=(0,V.m9)(w);return yield Di(!1,m,p.providerId),Is(m,p)})).apply(this,arguments)}function wr(w,p){return Qm.apply(this,arguments)}function Qm(){return(Qm=(0,d.Z)(function*(w,p){return ip((0,V.m9)(w),p)})).apply(this,arguments)}function Jm(){return(Jm=(0,d.Z)(function*(w,p){return Zt(w,"POST","/v1/accounts:signInWithCustomToken",oe(w,p))})).apply(this,arguments)}function MT(w,p){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,d.Z)(function*(w,p){const m=Xn(w),E=yield function ST(w,p){return Jm.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),T=yield bt._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(T.user),T}),Xm.apply(this,arguments)}class Md{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?ey._fromServerResponse(p,m):"totpInfo"in m?Vc._fromServerResponse(p,m):ee(p,"internal-error")}}class ey extends Md{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new ey(m)}}class Vc extends Md{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new Vc(m)}}function Oa(w,p,m){var E;k((null===(E=m.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),k(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(k(m.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(k(m.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function xT(w,p,m){return ty.apply(this,arguments)}function ty(){return ty=(0,d.Z)(function*(w,p,m){var E;const T=Xn(w),O={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Q=yield mi(T,O,"getOobCode",!0);m&&Oa(T,Q,m),yield Ta(T,Q)}else m&&Oa(T,O,m),yield Ta(T,O).catch(function(){var Q=(0,d.Z)(function*(me){if("auth/missing-recaptcha-token"!==me.code)return Promise.reject(me);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Je=yield mi(T,O,"getOobCode",!0);m&&Oa(T,Je,m),yield Ta(T,Je)}});return function(me){return Q.apply(this,arguments)}}())}),ty.apply(this,arguments)}function ny(w,p,m){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,d.Z)(function*(w,p,m){yield re((0,V.m9)(w),{oobCode:p,newPassword:m})})).apply(this,arguments)}function wo(w,p){return Bc.apply(this,arguments)}function Bc(){return Bc=(0,d.Z)(function*(w,p){yield function Cn(w,p){return en.apply(this,arguments)}((0,V.m9)(w),{oobCode:p})}),Bc.apply(this,arguments)}function Ru(w,p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,d.Z)(function*(w,p){const m=(0,V.m9)(w),E=yield re(m,{oobCode:p}),T=E.requestType;switch(k(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":k(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":k(E.mfaInfo,m,"internal-error");default:k(E.email,m,"internal-error")}let O=null;return E.mfaInfo&&(O=Md._fromServerResponse(Xn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:T}})).apply(this,arguments)}function xd(w,p){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,d.Z)(function*(w,p){const{data:m}=yield Ru((0,V.m9)(w),p);return m.email})).apply(this,arguments)}function Od(w,p,m){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,d.Z)(function*(w,p,m){var E;const T=Xn(w),O={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const rt=yield mi(T,O,"signUpPassword");Q=qe(T,rt)}else Q=qe(T,O).catch(function(){var rt=(0,d.Z)(function*(Tt){if("auth/missing-recaptcha-token"===Tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const bn=yield mi(T,O,"signUpPassword");return qe(T,bn)}return Promise.reject(Tt)});return function(Tt){return rt.apply(this,arguments)}}());const me=yield Q.catch(rt=>Promise.reject(rt)),Je=yield bt._fromIdTokenResponse(T,"signIn",me);return yield T._updateCurrentUser(Je.user),Je}),Pd.apply(this,arguments)}function ry(w,p,m){return Sd((0,V.m9)(w),Li.credential(p,m))}function op(w,p,m){return Pa.apply(this,arguments)}function Pa(){return Pa=(0,d.Z)(function*(w,p,m){var E;const T=Xn(w),O={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Q(me,Je){k(Je.handleCodeInApp,T,"argument-error"),Je&&Oa(T,me,Je)}if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const me=yield mi(T,O,"getOobCode",!0);Q(me,m),yield Sa(T,me)}else Q(O,m),yield Sa(T,O).catch(function(){var me=(0,d.Z)(function*(Je){if("auth/missing-recaptcha-token"!==Je.code)return Promise.reject(Je);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const rt=yield mi(T,O,"getOobCode",!0);Q(rt,m),yield Sa(T,rt)}});return function(Je){return me.apply(this,arguments)}}())}),Pa.apply(this,arguments)}function iy(w,p){const m=br.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}function ap(w,p,m){return jc.apply(this,arguments)}function jc(){return(jc=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w),T=Li.credentialWithLink(p,m||it());return k(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Sd(E,T)})).apply(this,arguments)}function Nd(){return(Nd=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:createAuthUri",oe(w,p))})).apply(this,arguments)}function oy(w,p){return ku.apply(this,arguments)}function ku(){return ku=(0,d.Z)(function*(w,p){const E={identifier:p,continueUri:Lt()?it():"http://localhost"},{signinMethods:T}=yield function sy(w,p){return Nd.apply(this,arguments)}((0,V.m9)(w),E);return T||[]}),ku.apply(this,arguments)}function $c(w,p){return Eo.apply(this,arguments)}function Eo(){return Eo=(0,d.Z)(function*(w,p){const m=(0,V.m9)(w),T={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&Oa(m.auth,T,p);const{email:O}=yield function Qo(w,p){return Nu.apply(this,arguments)}(m.auth,T);O!==w.email&&(yield w.reload())}),Eo.apply(this,arguments)}function ay(w,p,m){return up.apply(this,arguments)}function up(){return up=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};m&&Oa(E.auth,O,m);const{email:Q}=yield function Vr(w,p){return Yr.apply(this,arguments)}(E.auth,O);Q!==w.email&&(yield w.reload())}),up.apply(this,arguments)}function uy(){return(uy=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Iw(w,p){return cp.apply(this,arguments)}function cp(){return cp=(0,d.Z)(function*(w,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,V.m9)(w),O={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Q=yield Rt(E,function Cw(w,p){return uy.apply(this,arguments)}(E.auth,O));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const me=E.providerData.find(({providerId:Je})=>"password"===Je);me&&(me.displayName=E.displayName,me.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)}),cp.apply(this,arguments)}function OT(w,p){return Rd((0,V.m9)(w),p,null)}function cy(w,p){return Rd((0,V.m9)(w),null,p)}function Rd(w,p,m){return lp.apply(this,arguments)}function lp(){return(lp=(0,d.Z)(function*(w,p,m){const{auth:E}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(O.email=p),m&&(O.password=m);const Q=yield Rt(w,gt(E,O));yield w._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class Hc{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class bw extends Hc{constructor(p,m,E,T){super(p,m,E),this.username=T}}class Gc extends Hc{constructor(p,m){super(p,"facebook.com",m)}}class ly extends bw{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class hp extends Hc{constructor(p,m){super(p,"google.com",m)}}class kd extends bw{constructor(p,m,E){super(p,"twitter.com",m,E)}}function Fu(w){const{user:p,_tokenResponse:m}=w;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function dp(w){var p,m;if(!w)return null;const{providerId:E}=w,T=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const Q=null===(m=null===(p=It(w.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Q)return new Hc(O,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new Gc(O,T);case"github.com":return new ly(O,T);case"google.com":return new hp(O,T);case"twitter.com":return new kd(O,T,w.screenName||null);case"custom":case"anonymous":return new Hc(O,null);default:return new Hc(O,E,T)}}(m)}class Ys{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new Ys("enroll",p,m)}static _fromMfaPendingCredential(p){return new Ys("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Ys._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return Ys._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Na{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=Xn(p),T=m.customData._serverResponse,O=(T.mfaInfo||[]).map(me=>Md._fromServerResponse(E,me));k(T.mfaPendingCredential,E,"internal-error");const Q=Ys._fromMfaPendingCredential(T.mfaPendingCredential);return new Na(Q,O,function(){var me=(0,d.Z)(function*(Je){const rt=yield Je._process(E,Q);delete T.mfaInfo,delete T.mfaPendingCredential;const Tt=Object.assign(Object.assign({},T),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(m.operationType){case"signIn":const bn=yield bt._fromIdTokenResponse(E,m.operationType,Tt);return yield E._updateCurrentUser(bn.user),bn;case"reauthenticate":return k(m.user,E,"internal-error"),bt._forOperation(m.user,m.operationType,Tt);default:ee(E,"internal-error")}});return function(Je){return me.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,d.Z)(function*(){return m.signInResolver(p)})()}}function Vd(w,p){var m;const E=(0,V.m9)(w),T=p;return k(p.customData.operationType,E,"argument-error"),k(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Na._fromError(E,T)}class qc{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Md._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new qc(p)}getSession(){var p=this;return(0,d.Z)(function*(){return Ys._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,d.Z)(function*(){const T=p,O=yield E.getSession(),Q=yield Rt(E.user,T._process(E.user.auth,O,m));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(p){var m=this;return(0,d.Z)(function*(){const E="string"==typeof p?p:p.uid,T=yield m.user.getIdToken();try{const O=yield Rt(m.user,function pp(w,p){return Ae(w,"POST","/v2/accounts/mfaEnrollment:withdraw",oe(w,p))}(m.user.auth,{idToken:T,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Q})=>Q!==E),yield m.user._updateTokensIfNecessary(O),yield m.user.reload()}catch(O){throw O}})()}}const zn=new WeakMap;function Zc(w){const p=(0,V.m9)(w);return zn.has(p)||zn.set(p,qc._fromUser(p)),zn.get(p)}const Qs="__sak";class Ai{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Qs,"1"),this.storage.removeItem(Qs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const $d=(()=>{class w extends Ai{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Sw(){const w=(0,V.z$)();return R(w)||st(w)}()&&function vr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Kt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),O=this.localCache[E];T!==O&&m(E,O,T)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((me,Je,rt)=>{this.notifyListeners(me,rt)});const T=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const me=this.storage.getItem(T);if(m.newValue!==me)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!E)return}const O=()=>{const me=this.storage.getItem(T);!E&&this.localCache[T]===me||this.notifyListeners(T,me)},Q=this.storage.getItem(T);!function wn(){return(0,V.w1)()&&10===document.documentMode}()||Q===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const O of Array.from(T))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var T=()=>super._set,O=this;return(0,d.Z)(function*(){yield T().call(O,m,E),O.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,T=this;return(0,d.Z)(function*(){const O=yield E().call(T,m);return T.localCache[m]=JSON.stringify(O),O})()}_remove(m){var E=()=>super._remove,T=this;return(0,d.Z)(function*(){yield E().call(T,m),delete T.localCache[m]})()}}return w.type="LOCAL",w})(),Wc=(()=>{class w extends Ai{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return w.type="SESSION",w})();let gp=(()=>{class w{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(O=>O.isListeningto(m));if(E)return E;const T=new w(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,d.Z)(function*(){const T=m,{eventId:O,eventType:Q,data:me}=T.data,Je=E.handlersMap[Q];if(!Je?.size)return;T.ports[0].postMessage({status:"ack",eventId:O,eventType:Q});const rt=Array.from(Je).map(function(){var bn=(0,d.Z)(function*(_i){return _i(T.origin,me)});return function(_i){return bn.apply(this,arguments)}}()),Tt=yield function Co(w){return Promise.all(w.map(function(){var p=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(rt);T.ports[0].postMessage({status:"done",eventId:O,eventType:Q,response:Tt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Lu(w="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return w+m}class gy{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var T=this;return(0,d.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Q,me;return new Promise((Je,rt)=>{const Tt=Lu("",20);O.port1.start();const bn=setTimeout(()=>{rt(new Error("unsupported_event"))},E);me={messageChannel:O,onMessage(_i){const us=_i;if(us.data.eventId===Tt)switch(us.data.status){case"ack":clearTimeout(bn),Q=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Je(us.data.response);break;default:clearTimeout(bn),clearTimeout(Q),rt(new Error("invalid_response"))}}},T.handlers.add(me),O.port1.addEventListener("message",me.onMessage),T.target.postMessage({eventType:p,eventId:Tt,data:m},[O.port2])}).finally(()=>{me&&T.removeMessageHandler(me)})})()}}function Fr(){return window}function mp(){return typeof Fr().WorkerGlobalScope<"u"&&"function"==typeof Fr().importScripts}function Kc(){return(Kc=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const _p="firebaseLocalStorageDb",ka="firebaseLocalStorage",Io="fbase_key";class Uu{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Gd(w,p){return w.transaction([ka],p?"readwrite":"readonly").objectStore(ka)}function vp(){const w=indexedDB.open(_p,1);return new Promise((p,m)=>{w.addEventListener("error",()=>{m(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(ka,{keyPath:Io})}catch(T){m(T)}}),w.addEventListener("success",(0,d.Z)(function*(){const E=w.result;E.objectStoreNames.contains(ka)?p(E):(E.close(),yield function yy(){const w=indexedDB.deleteDatabase(_p);return new Uu(w).toPromise()}(),p(yield vp()))}))})}function wp(w,p,m){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,d.Z)(function*(w,p,m){const E=Gd(w,!0).put({[Io]:p,value:m});return new Uu(E).toPromise()})).apply(this,arguments)}function bs(){return(bs=(0,d.Z)(function*(w,p){const m=Gd(w,!1).get(p),E=yield new Uu(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function zd(w,p){const m=Gd(w,!0).delete(p);return new Uu(m).toPromise()}const Ls=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield vp()),m.db})()}_withRetries(m){var E=this;return(0,d.Z)(function*(){let T=0;for(;;)try{const O=yield E._openDb();return yield m(O)}catch(O){if(T++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return mp()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=gp._getInstance(function yp(){return mp()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(T,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(T,O){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(T,O){return["keyChanged"]});return function(T,O){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var E,T;if(m.activeServiceWorker=yield function Gt(){return Kc.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new gy(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);O&&null!==(E=O[0])&&void 0!==E&&E.fulfilled&&null!==(T=O[0])&&void 0!==T&&T.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function xw(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield vp();return yield wp(m,Qs,"1"),yield zd(m,Qs),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var T=this;return(0,d.Z)(function*(){return T._withPendingWrite((0,d.Z)(function*(){return yield T._withRetries(O=>wp(O,m,E)),T.localCache[m]=E,T.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,d.Z)(function*(){const T=yield E._withRetries(O=>function Sn(w,p){return bs.apply(this,arguments)}(O,m));return E.localCache[m]=T,T})()}_remove(m){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(T=>zd(T,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const E=yield m._withRetries(Q=>{const me=Gd(Q,!1).getAll();return new Uu(me).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const T=[],O=new Set;for(const{fbase_key:Q,value:me}of E)O.add(Q),JSON.stringify(m.localCache[Q])!==JSON.stringify(me)&&(m.notifyListeners(Q,me),T.push(Q));for(const Q of Object.keys(m.localCache))m.localCache[Q]&&!O.has(Q)&&(m.notifyListeners(Q,null),T.push(Q));return T})()}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const O of Array.from(T))O(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),ai=1e12;class bo{constructor(p){this.auth=p,this.counter=ai,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new wy(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||ai;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||ai))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,d.Z)(function*(){var E;return null===(E=m._widgets.get(p||ai))||void 0===E||E.execute(),""})()}}class wy{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof p?document.getElementById(p):p;k(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bu(w){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Us=Rr("rcb"),Ow=new Jt(3e4,6e4);class bp{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Fr().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return k(function Pw(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&dt(Fr().grecaptcha)?Promise.resolve(Fr().grecaptcha):new Promise((E,T)=>{const O=Fr().setTimeout(()=>{T(Te(p,"network-request-failed"))},Ow.get());Fr()[Us]=()=>{Fr().clearTimeout(O),delete Fr()[Us];const me=Fr().grecaptcha;if(!me||!dt(me))return void T(Te(p,"internal-error"));const Je=me.render;me.render=(rt,Tt)=>{const bn=Je(rt,Tt);return this.counter++,bn},this.hostLanguage=m,E(me)},qi(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Us,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),T(Te(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Fr().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Dp{load(p){return(0,d.Z)(function*(){return new bo(p)})()}clearedOneInstance(){}}const qd="recaptcha",Ey={theme:"light",type:"image"};class Tp{constructor(p,m=Object.assign({},Ey),E){this.parameters=m,this.type=qd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xn(E),this.isInvisible="invisible"===this.parameters.size,k(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof p?document.getElementById(p):p;k(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dp:new bp,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(O=>{const Q=me=>{me&&(p.tokenChangeListeners.delete(Q),O(me))};p.tokenChangeListeners.add(Q),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){k(!this.parameters.sitekey,this.auth,"argument-error"),k(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),k(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Fr()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){k(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){k(Lt()&&!mp(),p.auth,"internal-error"),yield function Nw(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function de(w){return nt.apply(this,arguments)}(p.auth);k(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return k(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zd{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=kt._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Si(w,p,m){return Do.apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(w,p,m){const E=Xn(w),T=yield Qc(E,p,(0,V.m9)(m));return new Zd(T,O=>Sd(E,O))})).apply(this,arguments)}function Ap(w,p,m){return er.apply(this,arguments)}function er(){return(er=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w);yield Di(!1,E,"phone");const T=yield Qc(E.auth,p,(0,V.m9)(m));return new Zd(T,O=>Ew(E,O))})).apply(this,arguments)}function Pt(w,p,m){return ui.apply(this,arguments)}function ui(){return(ui=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w),T=yield Qc(E.auth,p,(0,V.m9)(m));return new Zd(T,O=>wr(E,O))})).apply(this,arguments)}function Qc(w,p,m){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,d.Z)(function*(w,p,m){var E;const T=yield m.verify();try{let O;if(k("string"==typeof T,w,"argument-error"),k(m.type===qd,w,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const Q=O.session;if("phoneNumber"in O)return k("enroll"===Q.type,w,"internal-error"),(yield function py(w,p){return Ae(w,"POST","/v2/accounts/mfaEnrollment:start",oe(w,p))}(w,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{k("signin"===Q.type,w,"internal-error");const me=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return k(me,w,"missing-multi-factor-info"),(yield function Ep(w,p){return Ae(w,"POST","/v2/accounts/mfaSignIn:start",oe(w,p))}(w,{mfaPendingCredential:Q.credential,mfaEnrollmentId:me,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function zt(w,p){return $n.apply(this,arguments)}(w,{phoneNumber:O.phoneNumber,recaptchaToken:T});return Q}}finally{m._reset()}}),Wd.apply(this,arguments)}function Mi(w,p){return Js.apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(w,p){yield Is((0,V.m9)(w),p)})).apply(this,arguments)}let ur=(()=>{class w{constructor(m){this.providerId=w.PROVIDER_ID,this.auth=Xn(m)}verifyPhoneNumber(m,E){return Qc(this.auth,m,(0,V.m9)(E))}static credential(m,E){return kt._fromVerification(m,E)}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:T}=m;return E&&T?kt._fromTokenResponse(E,T):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function To(w,p){return p?He(p):(k(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class ea extends H{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Wi(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Wi(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Wi(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Yt(w){return Km(w.auth,new ea(w),w.bypassAuthState)}function Cy(w){const{auth:p,user:m}=w;return k(m,p,"internal-error"),ip(m,new ea(w),w.bypassAuthState)}function Sp(w){return ju.apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(w){const{auth:p,user:m}=w;return k(m,p,"internal-error"),Is(m,new ea(w),w.bypassAuthState)})).apply(this,arguments)}class Xs{constructor(p,m,E,T,O=!1){this.auth=p,this.resolver=E,this.user=T,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,d.Z)(function*(E,T){p.pendingPromise={resolve:E,reject:T};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(E,T){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:O,tenantId:Q,error:me,type:Je}=p;if(me)return void m.reject(me);const rt={auth:m.auth,requestUri:E,sessionId:T,tenantId:Q||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Je)(rt))}catch(Tt){m.reject(Tt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Yt;case"linkViaPopup":case"linkViaRedirect":return Sp;case"reauthViaPopup":case"reauthViaRedirect":return Cy;default:ee(this.auth,"internal-error")}}resolve(p){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const eo=new Jt(2e3,1e4);function xi(w,p,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,d.Z)(function*(w,p,m){const E=Xn(w);Me(w,p,Ui);const T=To(E,m);return new to(E,"signInViaPopup",p,T).executeNotNull()})).apply(this,arguments)}function ta(w,p,m){return La.apply(this,arguments)}function La(){return(La=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w);Me(E.auth,p,Ui);const T=To(E.auth,m);return new to(E.auth,"reauthViaPopup",p,T,E).executeNotNull()})).apply(this,arguments)}function Jc(w,p,m){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w);Me(E.auth,p,Ui);const T=To(E.auth,m);return new to(E.auth,"linkViaPopup",p,T,E).executeNotNull()})).apply(this,arguments)}let to=(()=>{class w extends Xs{constructor(m,E,T,O,Q){super(m,E,O,Q),this.provider=T,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const E=yield m.execute();return k(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,d.Z)(function*(){be(1===m.filter.length,"Popup operations only handle one event");const E=Lu();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(Te(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,T;this.pollId=null!==(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,eo.get())};m()}}return w.currentPopupAction=null,w})();const $u="pendingRedirect",Vs=new Map;class Ao extends Xs{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,d.Z)(function*(){let E=Vs.get(m.auth._key());if(!E){try{const O=(yield function Hu(w,p){return Kd.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(O)}catch(T){E=()=>Promise.reject(T)}Vs.set(m.auth._key(),E)}return m.bypassAuthState||Vs.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const T=yield E.auth._redirectUserForId(p.eventId);if(T)return E.user=T,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Kd(){return(Kd=(0,d.Z)(function*(w,p){const m=Yd(p),E=Bi(w);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(m));return yield E._remove(m),T})).apply(this,arguments)}function Gu(w,p){return na.apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(w,p){return Bi(w)._set(Yd(p),"true")})).apply(this,arguments)}function no(){Vs.clear()}function el(w,p){Vs.set(w._key(),p)}function Bi(w){return He(w._redirectPersistence)}function Yd(w){return yn($u,w.config.apiKey,w.name)}function tl(w,p,m){return function Yi(w,p,m){return Hn.apply(this,arguments)}(w,p,m)}function Hn(){return(Hn=(0,d.Z)(function*(w,p,m){const E=Xn(w);Me(w,p,Ui),yield E._initializationPromise;const T=To(E,m);return yield Gu(T,E),T._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Zn(w,p,m){return function Ua(w,p,m){return ci.apply(this,arguments)}(w,p,m)}function ci(){return(ci=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w);Me(E.auth,p,Ui),yield E.auth._initializationPromise;const T=To(E.auth,m);yield Gu(T,E.auth);const O=yield os(E);return T._openRedirect(E.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function Oi(w,p,m){return function Va(w,p,m){return zu.apply(this,arguments)}(w,p,m)}function zu(){return(zu=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w);Me(E.auth,p,Ui),yield E.auth._initializationPromise;const T=To(E.auth,m);yield Di(!1,E,p.providerId),yield Gu(T,E.auth);const O=yield os(E);return T._openRedirect(E.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function Iy(w,p){return jr.apply(this,arguments)}function jr(){return(jr=(0,d.Z)(function*(w,p){return yield Xn(w)._initializationPromise,So(w,p,!1)})).apply(this,arguments)}function So(w,p){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,d.Z)(function*(w,p,m=!1){const E=Xn(w),T=To(E,p),Q=yield new Ao(E,T,m).execute();return Q&&!m&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,p)),Q})).apply(this,arguments)}function os(w){return nl.apply(this,arguments)}function nl(){return(nl=(0,d.Z)(function*(w){const p=Lu(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class Ba{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ia(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qd(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!Qd(p)){const T=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Te(this.auth,T))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mp(p))}saveEventToCache(p){this.cachedEventUids.add(Mp(p)),this.lastProcessedEventTime=Date.now()}}function Mp(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function Qd({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===p?.code}function Jd(w){return rl.apply(this,arguments)}function rl(){return(rl=(0,d.Z)(function*(w,p={}){return Ae(w,"GET","/v1/projects",p)})).apply(this,arguments)}const on=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mo=/^https?/;function xo(){return(xo=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield Jd(w);for(const m of p)try{if(xp(m))return}catch{}ee(w,"unauthorized-domain")})).apply(this,arguments)}function xp(w){const p=it(),{protocol:m,hostname:E}=new URL(p);if(w.startsWith("chrome-extension://")){const Q=new URL(w);return""===Q.hostname&&""===E?"chrome-extension:"===m&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Q.hostname===E}if(!Mo.test(m))return!1;if(on.test(w))return E===w;const T=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const Op=new Jt(3e4,6e4);function Pi(){const w=Fr().___jsl;if(w?.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let m=0;m<w.CP.length;m++)w.CP[m]=null}let $r=null;const Np=new Jt(5e3,15e3),il="__/auth/iframe",Rp="emulator/auth/iframe",kp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ja(w){const p=w.config;k(p.authDomain,w,"auth-domain-config-required");const m=p.emulator?qn(p,Rp):`https://${w.config.authDomain}/${il}`,E={apiKey:p.apiKey,appName:w.name,v:N.SDK_VERSION},T=sl.get(w.config.apiHost);T&&(E.eid=T);const O=w._getFrameworks();return O.length&&(E.fw=O.join(",")),`${m}?${(0,V.xO)(E).slice(1)}`}function ro(){return ro=(0,d.Z)(function*(w){const p=yield function Oo(w){return $r=$r||function Pp(w){return new Promise((p,m)=>{var E,T,O;function Q(){Pi(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Pi(),m(Te(w,"network-request-failed"))},timeout:Op.get()})}if(null!==(T=null===(E=Fr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==T&&T.Iframe)p(gapi.iframes.getContext());else{if(null===(O=Fr().gapi)||void 0===O||!O.load){const me=Rr("iframefcb");return Fr()[me]=()=>{gapi.load?Q():m(Te(w,"network-request-failed"))},qi(`https://apis.google.com/js/api.js?onload=${me}`).catch(Je=>m(Je))}Q()}}).catch(p=>{throw $r=null,p})}(w),$r}(w),m=Fr().gapi;return k(m,w,"internal-error"),p.open({where:document.body,url:ja(w),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kp,dontclear:!0},E=>new Promise(function(){var T=(0,d.Z)(function*(O,Q){yield E.restyle({setHideOnLeave:!1});const me=Te(w,"network-request-failed"),Je=Fr().setTimeout(()=>{Q(me)},Np.get());function rt(){Fr().clearTimeout(Je),O(E)}E.ping(rt).then(rt,()=>{Q(me)})});return function(O,Q){return T.apply(this,arguments)}}()))}),ro.apply(this,arguments)}const qu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class aa{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Fp="__/auth/handler",kw="emulator/auth/handler",Xd=encodeURIComponent("fac");function as(w,p,m,E,T,O){return ul.apply(this,arguments)}function ul(){return(ul=(0,d.Z)(function*(w,p,m,E,T,O){k(w.config.authDomain,w,"auth-domain-config-required"),k(w.config.apiKey,w,"invalid-api-key");const Q={apiKey:w.config.apiKey,appName:w.name,authType:m,redirectUrl:E,v:N.SDK_VERSION,eventId:T};if(p instanceof Ui){p.setDefaultLanguage(w.languageCode),Q.providerId=p.providerId||"",(0,V.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Tt,bn]of Object.entries(O||{}))Q[Tt]=bn}if(p instanceof yi){const Tt=p.getScopes().filter(bn=>""!==bn);Tt.length>0&&(Q.scopes=Tt.join(","))}w.tenantId&&(Q.tid=w.tenantId);const me=Q;for(const Tt of Object.keys(me))void 0===me[Tt]&&delete me[Tt];const Je=yield w._getAppCheckToken(),rt=Je?`#${Xd}=${encodeURIComponent(Je)}`:"";return`${function cl({config:w}){return w.emulator?qn(w,kw):`https://${w.authDomain}/${Fp}`}(w)}?${(0,V.xO)(me).slice(1)}${rt}`})).apply(this,arguments)}const Ar="webStorageSupport",io=class eh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wc,this._completeRedirectFn=So,this._overrideRedirectResult=el}_openPopup(p,m,E,T){var O=this;return(0,d.Z)(function*(){var Q;be(null===(Q=O.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const me=yield as(p,m,E,it(),T);return function Rw(w,p,m,E=500,T=600){const O=Math.max((window.screen.availHeight-T)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let me="";const Je=Object.assign(Object.assign({},qu),{width:E.toString(),height:T.toString(),top:O,left:Q}),rt=(0,V.z$)().toLowerCase();m&&(me=x(rt)?"_blank":m),P(rt)&&(p=p||"http://localhost",Je.scrollbars="yes");const Tt=Object.entries(Je).reduce((_i,[us,so])=>`${_i}${us}=${so},`,"");if(function Ut(w=(0,V.z$)()){var p;return st(w)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(rt)&&"_self"!==me)return function al(w,p){const m=document.createElement("a");m.href=w,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",me),new aa(null);const bn=window.open(p||"",me,Tt);k(bn,w,"popup-blocked");try{bn.focus()}catch{}return new aa(bn)}(p,me,Lu())})()}_openRedirect(p,m,E,T){var O=this;return(0,d.Z)(function*(){return yield O._originValidation(p),function Hd(w){Fr().location.href=w}(yield as(p,m,E,it(),T)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:T,promise:O}=this.eventManagers[m];return T?Promise.resolve(T):(be(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,d.Z)(function*(){const E=yield function oa(w){return ro.apply(this,arguments)}(p),T=new Ba(p);return E.register("authEvent",O=>(k(O?.authEvent,p,"invalid-auth-event"),{status:T.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:T},m.iframes[p._key()]=E,T})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Ar,{type:Ar},T=>{var O;const Q=null===(O=T?.[0])||void 0===O?void 0:O[Ar];void 0!==Q&&m(!!Q),ee(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function sa(w){return xo.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Kt()||R()||st()}};class Lp{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return te("unexpected MultiFactorSessionType")}}}class Ni extends Lp{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ni(p)}_finalizeEnroll(p,m,E){return function Bd(w,p){return Ae(w,"POST","/v2/accounts/mfaEnrollment:finalize",oe(w,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Cp(w,p){return Ae(w,"POST","/v2/accounts/mfaSignIn:finalize",oe(w,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $a=(()=>{class w{constructor(){}static assertion(m){return Ni._fromCredential(m)}}return w.FACTOR_ID="phone",w})();var Ty="@firebase/auth";class Fw{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,V.Pz)("authIdTokenMaxAge"),function th(w){(0,N._registerComponent)(new ve.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),T=p.getProvider("heartbeat"),O=p.getProvider("app-check-internal"),{apiKey:Q,authDomain:me}=E.options;k(Q&&!Q.includes(":"),"invalid-api-key",{appName:E.name});const Je={apiKey:Q,authDomain:me,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K(w)},rt=new ws(E,T,O,Je);return function ba(w,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(He);p?.errorMap&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(E,p?.popupRedirectResolver)}(rt,m),rt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ve.wA("auth-internal",p=>{const m=Xn(p.getProvider("auth").getImmediate());return new Fw(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Ty,"0.23.2",function Qi(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(Ty,"0.23.2","esm2017")}("Browser")},9058:(_t,De,M)=>{M.d(De,{$s:()=>He,BH:()=>ue,G6:()=>qn,L:()=>he,LL:()=>Ge,Pz:()=>Te,Sg:()=>Me,UG:()=>te,US:()=>ve,ZB:()=>ne,ZR:()=>Ae,aH:()=>ee,b$:()=>Lt,eu:()=>pe,hl:()=>ae,jU:()=>be,m9:()=>yn,ne:()=>Rt,pd:()=>It,r3:()=>vn,ru:()=>it,tV:()=>U,uI:()=>k,vZ:()=>Un,w1:()=>Ht,xO:()=>Zr,xb:()=>sr,z$:()=>Be,zI:()=>ce,zd:()=>wt});const Y=function(z){const G=[];let P=0;for(let R=0;R<z.length;R++){let x=z.charCodeAt(R);x<128?G[P++]=x:x<2048?(G[P++]=x>>6|192,G[P++]=63&x|128):55296==(64512&x)&&R+1<z.length&&56320==(64512&z.charCodeAt(R+1))?(x=65536+((1023&x)<<10)+(1023&z.charCodeAt(++R)),G[P++]=x>>18|240,G[P++]=x>>12&63|128,G[P++]=x>>6&63|128,G[P++]=63&x|128):(G[P++]=x>>12|224,G[P++]=x>>6&63|128,G[P++]=63&x|128)}return G},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,G){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const P=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,R=[];for(let x=0;x<z.length;x+=3){const X=z[x],Ne=x+1<z.length,Qe=Ne?z[x+1]:0,xt=x+2<z.length,st=xt?z[x+2]:0;let wn=(15&Qe)<<2|st>>6,Kt=63&st;xt||(Kt=64,Ne||(wn=64)),R.push(P[X>>2],P[(3&X)<<4|Qe>>4],P[wn],P[Kt])}return R.join("")},encodeString(z,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(z):this.encodeByteArray(Y(z),G)},decodeString(z,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(z):function(z){const G=[];let P=0,R=0;for(;P<z.length;){const x=z[P++];if(x<128)G[R++]=String.fromCharCode(x);else if(x>191&&x<224){const X=z[P++];G[R++]=String.fromCharCode((31&x)<<6|63&X)}else if(x>239&&x<365){const xt=((7&x)<<18|(63&z[P++])<<12|(63&z[P++])<<6|63&z[P++])-65536;G[R++]=String.fromCharCode(55296+(xt>>10)),G[R++]=String.fromCharCode(56320+(1023&xt))}else{const X=z[P++],Ne=z[P++];G[R++]=String.fromCharCode((15&x)<<12|(63&X)<<6|63&Ne)}}return G.join("")}(this.decodeStringToByteArray(z,G))},decodeStringToByteArray(z,G){this.init_();const P=G?this.charToByteMapWebSafe_:this.charToByteMap_,R=[];for(let x=0;x<z.length;){const X=P[z.charAt(x++)],Qe=x<z.length?P[z.charAt(x)]:0;++x;const st=x<z.length?P[z.charAt(x)]:64;++x;const Ut=x<z.length?P[z.charAt(x)]:64;if(++x,null==X||null==Qe||null==st||null==Ut)throw new Ee;R.push(X<<2|Qe>>4),64!==st&&(R.push(Qe<<4&240|st>>2),64!==Ut&&R.push(st<<6&192|Ut))}return R},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const he=function(z){return function(z){const G=Y(z);return ve.encodeByteArray(G,!0)}(z).replace(/\./g,"")},U=function(z){try{return ve.decodeString(z,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function ne(z,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return G}for(const P in G)!G.hasOwnProperty(P)||!Ve(P)||(z[P]=ne(z[P],G[P]));return z}function Ve(z){return"__proto__"!==z}const Se=()=>{try{return function Ie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=z&&U(z[1]);return G&&JSON.parse(G)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},ee=()=>{var z;return null===(z=Se())||void 0===z?void 0:z.config},Te=z=>{var G;return null===(G=Se())||void 0===G?void 0:G[`_${z}`]};class ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,P)=>{this.resolve=G,this.reject=P})}wrapCallback(G){return(P,R)=>{P?this.reject(P):this.resolve(R),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(P):G(P,R))}}}function Me(z,G){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const R=G||"demo-project",x=z.iat||0,X=z.sub||z.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${R}`,aud:R,iat:x,exp:x+3600,auth_time:x,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},z);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ne)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function k(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function te(){var z;const G=null===(z=Se())||void 0===z?void 0:z.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function be(){return"object"==typeof self&&self.self===self}function it(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ht(){const z=Be();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function qn(){return!te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){try{return"object"==typeof indexedDB}catch{return!1}}function pe(){return new Promise((z,G)=>{try{let P=!0;const R="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(R);x.onsuccess=()=>{x.result.close(),P||self.indexedDB.deleteDatabase(R),z(!0)},x.onupgradeneeded=()=>{P=!1},x.onerror=()=>{var X;G((null===(X=x.error)||void 0===X?void 0:X.message)||"")}}catch(P){G(P)}})}function ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ae extends Error{constructor(G,P,R){super(P),this.code=G,this.customData=R,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(G,P,R){this.service=G,this.serviceName=P,this.errors=R}create(G,...P){const R=P[0]||{},x=`${this.service}/${G}`,X=this.errors[G],Ne=X?function tt(z,G){return z.replace(ze,(P,R)=>{const x=G[R];return null!=x?String(x):`<${R}?>`})}(X,R):"Error";return new Ae(x,`${this.serviceName}: ${Ne} (${x}).`,R)}}const ze=/\{\$([^}]+)}/g;function vn(z,G){return Object.prototype.hasOwnProperty.call(z,G)}function sr(z){for(const G in z)if(Object.prototype.hasOwnProperty.call(z,G))return!1;return!0}function Un(z,G){if(z===G)return!0;const P=Object.keys(z),R=Object.keys(G);for(const x of P){if(!R.includes(x))return!1;const X=z[x],Ne=G[x];if(Tn(X)&&Tn(Ne)){if(!Un(X,Ne))return!1}else if(X!==Ne)return!1}for(const x of R)if(!P.includes(x))return!1;return!0}function Tn(z){return null!==z&&"object"==typeof z}function Zr(z){const G=[];for(const[P,R]of Object.entries(z))Array.isArray(R)?R.forEach(x=>{G.push(encodeURIComponent(P)+"="+encodeURIComponent(x))}):G.push(encodeURIComponent(P)+"="+encodeURIComponent(R));return G.length?"&"+G.join("&"):""}function wt(z){const G={};return z.replace(/^\?/,"").split("&").forEach(R=>{if(R){const[x,X]=R.split("=");G[decodeURIComponent(x)]=decodeURIComponent(X)}}),G}function It(z){const G=z.indexOf("?");if(!G)return"";const P=z.indexOf("#",G);return z.substring(G,P>0?P:void 0)}function Rt(z,G){const P=new _r(z,G);return P.subscribe.bind(P)}class _r{constructor(G,P){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=P,this.task.then(()=>{G(this)}).catch(R=>{this.error(R)})}next(G){this.forEachObserver(P=>{P.next(G)})}error(G){this.forEachObserver(P=>{P.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,P,R){let x;if(void 0===G&&void 0===P&&void 0===R)throw new Error("Missing Observer.");x=function Wt(z,G){if("object"!=typeof z||null===z)return!1;for(const P of G)if(P in z&&"function"==typeof z[P])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:P,complete:R},void 0===x.next&&(x.next=pn),void 0===x.error&&(x.error=pn),void 0===x.complete&&(x.complete=pn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),X}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let P=0;P<this.observers.length;P++)this.sendOne(P,G)}sendOne(G,P){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{P(this.observers[G])}catch(R){typeof console<"u"&&console.error&&console.error(R)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pn(){}const jn=1e3,ye=2,Z=144e5,Ce=.5;function He(z,G=jn,P=ye){const R=G*Math.pow(P,z),x=Math.round(Ce*R*(Math.random()-.5)*2);return Math.min(Z,R+x)}function yn(z){return z&&z._delegate?z._delegate:z}},4165:(_t,De,M)=>{var d=M(5879);let V=null;function N(){return V}class se{}const ve=new d.OlP("DocumentToken");let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(he)},providedIn:"platform"})}return n})();const Oe=new d.OlP("Location Initialized");let he=(()=>{class n extends Ee{constructor(){super(),this._doc=(0,d.f3M)(ve),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function q(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ne(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Ye)},providedIn:"root"})}return n})();const Ie=new d.OlP("appBaseHref");let Ye=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ne(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+ne(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+ne(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee),d.LFG(Ie,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ke=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=U(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+ne(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+ne(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee),d.LFG(Ie,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})(),Ze=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(q(pt(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ne(r))}normalize(t){return n.stripTrailingSlash(function ft(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,pt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}static#e=this.normalizeQueryParams=ne;static#t=this.joinWithSlash=U;static#n=this.stripTrailingSlash=q;static#r=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ve))};static#i=this.\u0275prov=d.Yz7({token:n,factory:function(){return function Se(){return new Ze((0,d.LFG)(Ve))}()},providedIn:"root"})}return n})();function pt(n){return n.replace(/\/index.html$/,"")}var ue=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(ue||{}),be=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(be||{});function Ae(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===be.CurrencyDecimal)return t[d.wAp.NumberSymbols][be.Decimal];if(e===be.CurrencyGroup)return t[d.wAp.NumberSymbols][be.Group]}return r}const x=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function An(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function ln(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}const Ps=/\s+/,Zs=[];let Wr=(()=>{class n{constructor(t,r,s,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=u,this.initialClasses=Zs,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Ps):Zs}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Ps):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const s=this.stateMap.get(t);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],s=t[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Ps).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class vs{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ws=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new vs(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),Xn(g,s)}});for(let s=0,u=r.length;s<u;s++){const g=r.get(s).context;g.index=s,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Xn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Xn(n,e){n.context.$implicit=e.item}let Ii=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ba,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class ba{constructor(){this.$implicit=null,this.ngIf=null}}function mo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}function en(n,e){return new d.vHH(2100,!1)}class ir{createSubscription(e,t){return(0,d.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,d.rg0)(()=>e.unsubscribe())}}class dr{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const kr=new dr,is=new ir;let Qo=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return kr;if((0,d.F4k)(t))return is;throw en()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.sBO,16))};static#t=this.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),Xe=(()=>{class n{constructor(t){this._locale=t}transform(t,r,s){if(!function si(n){return!(null==n||""===n||n!=n)}(t))return null;s=s||this._locale;try{return function de(n,e,t){return function Kt(n,e,t,r,s,u,l=!1){let g="",_=!1;if(isFinite(n)){let I=function Ot(n){let r,s,u,l,g,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;"0"===e.charAt(u);u++);if(u===(g=e.length))r=[0],s=1;else{for(g--;"0"===e.charAt(g);)g--;for(s-=u,r=[],l=0;u<=g;u++,l++)r[l]=Number(e.charAt(u))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);l&&(I=function ot(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(I));let D=e.minInt,S=e.minFrac,$=e.maxFrac;if(u){const Vt=u.match(x);if(null===Vt)throw new Error(`${u} is not a valid digit info`);const vt=Vt[1],jt=Vt[3],un=Vt[5];null!=vt&&(D=An(vt)),null!=jt&&(S=An(jt)),null!=un?$=An(un):null!=jt&&S>$&&($=S)}!function dt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let l=u+n.integerLen,g=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let S=l;S<r.length;S++)r[S]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,l=u+1),r[0]=0;for(let S=1;S<l;S++)r[S]=0}if(g>=5)if(l-1<0){for(let S=0;S>l;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;s<Math.max(0,u);s++)r.push(0);let _=0!==u;const I=e+n.integerLen,D=r.reduceRight(function(S,$,J,we){return we[J]=($+=S)<10?$:$-10,_&&(0===we[J]&&J>=I?we.pop():_=!1),$>=10?1:0},0);D&&(r.unshift(D),n.integerLen++)}(I,S,$);let J=I.digits,we=I.integerLen;const Fe=I.exponent;let Le=[];for(_=J.every(Vt=>!Vt);we<D;we++)J.unshift(0);for(;we<0;we++)J.unshift(0);we>0?Le=J.splice(we,J.length):(Le=J,J=[0]);const ht=[];for(J.length>=e.lgSize&&ht.unshift(J.splice(-e.lgSize,J.length).join(""));J.length>e.gSize;)ht.unshift(J.splice(-e.gSize,J.length).join(""));J.length&&ht.unshift(J.join("")),g=ht.join(Ae(t,r)),Le.length&&(g+=Ae(t,s)+Le.join("")),Fe&&(g+=Ae(t,be.Exponential)+"+"+Fe)}else g=Ae(t,be.Infinity);return g=n<0&&!_?e.negPre+g+e.negSuf:e.posPre+g+e.posSuf,g}(n,function nt(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],u=r[1],l=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],g=l[0],_=l[1]||"";t.posPre=g.substring(0,g.indexOf("#"));for(let D=0;D<_.length;D++){const S=_.charAt(D);"0"===S?t.minFrac=t.maxFrac=D+1:"#"===S?t.maxFrac=D+1:t.posSuf+=S}const I=g.split(",");if(t.gSize=I[1]?I[1].length:0,t.lgSize=I[2]||I[1]?(I[2]||I[1]).length:0,u){const D=s.length-t.posPre.length-t.posSuf.length,S=u.indexOf("#");t.negPre=u.substring(0,S).replace(/'/g,""),t.negSuf=u.slice(S+D).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Ge(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,ue.Decimal),Ae(e,be.MinusSign)),e,be.Group,be.Decimal,t)}(function ks(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),s,r)}catch(u){throw en()}}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.soG,16))};static#t=this.\u0275pipe=d.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let Qr=(()=>{class n{transform(t,r,s){if(null==t)return null;if(!this.supports(t))throw en();return t.slice(r,s)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),hr=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function br(n){return"server"===n}let yi=(()=>{class n{static#e=this.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new ss((0,d.LFG)(ve),window)})}return n})();class ss{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Uc(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Cs{}class hp extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class kd extends hp{static makeCurrent(){!function Y(n){V||(V=n)}(new kd)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Dw(){return Fu=Fu||document.querySelector("base"),Fu?Fu.getAttribute("href"):null}();return null==t?null:function dy(n){Fd=Fd||document.createElement("a"),Fd.setAttribute("href",n);const e=Fd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Fu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ln(document.cookie,e)}}let Fd,Fu=null,Tw=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const hy=new d.OlP("EventManagerPlugins");let fy=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(hy),d.LFG(d.R0b))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class Ld{constructor(e){this._doc=e}}const Ud="ng-app-id";let zc=(()=>{class n{constructor(t,r,s,u={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=br(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Ud}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const u=s.get(t);return u.usage+=r,u.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,u=s?.get(r);if(u?.parentNode===t)return s.delete(r),u.removeAttribute(Ud),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Ud,this.appId),l}}addStyleToHost(t,r){const s=this.getStyleElement(t,r);t.appendChild(s);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(s):u.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ve),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ys={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Na=/%COMP%/g,Fs=new d.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function zn(n,e){return e.map(t=>t.replace(Na,n))}let Zc=(()=>{class n{constructor(t,r,s,u,l,g,_,I=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=u,this.doc=l,this.platformId=g,this.ngZone=_,this.nonce=I,this.rendererByCompId=new Map,this.platformIsServer=br(g),this.defaultRenderer=new Qs(t,l,_,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===d.ifc.ShadowDom&&(r={...r,encapsulation:d.ifc.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof $d?s.applyToHost(t):s instanceof Vi&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.doc,g=this.ngZone,_=this.eventManager,I=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,S=this.platformIsServer;switch(r.encapsulation){case d.ifc.Emulated:u=new $d(_,I,r,this.appId,D,l,g,S);break;case d.ifc.ShadowDom:return new Ra(_,I,t,r,l,g,this.nonce,S);default:u=new Vi(_,I,r,D,l,g,S)}s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(fy),d.LFG(zc),d.LFG(d.AFp),d.LFG(Fs),d.LFG(ve),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class Qs{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ys[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(jd(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(jd(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new d.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Ys[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Ys[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,s&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=N().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function jd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ra extends Qs{constructor(e,t,r,s,u,l,g,_){super(e,u,l,_),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const I=zn(s.id,s.styles);for(const D of I){const S=document.createElement("style");g&&S.setAttribute("nonce",g),S.textContent=D,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Vi extends Qs{constructor(e,t,r,s,u,l,g,_){super(e,u,l,g),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=_?zn(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class $d extends Vi{constructor(e,t,r,s,u,l,g,_){const I=s+"-"+r.id;super(e,t,r,u,l,g,_,I),this.contentAttr=function pp(n){return"_ngcontent-%COMP%".replace(Na,n)}(I),this.hostAttr=function qc(n){return"_nghost-%COMP%".replace(Na,n)}(I)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Mw=(()=>{class n extends Ld{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ve))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const Wc=["alt","control","meta","shift"],Co={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Lu=(()=>{class n extends Ld{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),Wc.forEach(I=>{const D=r.indexOf(I);D>-1&&(r.splice(D,1),l+=I+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let s=Co[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Wc.forEach(l=>{l!==s&&(0,gp[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ve))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const _p=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Gt(){kd.makeCurrent()},multi:!0},{provide:ve,useFactory:function xw(){return(0,d.RDi)(document),document},deps:[]}]),my=new d.OlP(""),ka=[{provide:d.rWj,useClass:class fp{addToWindow(e){d.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new d.vHH(5103,!1);return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const s=d.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const g=function(_){l=l||_,u--,0==u&&r(l)};s.forEach(_=>{_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Io=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Kc(){return new d.qLn},deps:[]},{provide:hy,useClass:Mw,multi:!0,deps:[ve,d.R0b,d.Lbi]},{provide:hy,useClass:Lu,multi:!0,deps:[ve]},Zc,zc,fy,{provide:d.FYo,useExisting:Zc},{provide:Cs,useClass:Tw,deps:[]},[]];let Uu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(my,12))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[...Io,...ka],imports:[hr,d.hGG]})}return n})(),Ue=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ve))};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(r){let s=null;return s=r?new r:function wp(){return new Ue((0,d.LFG)(ve))}(),s},providedIn:"root"})}return n})();typeof window<"u"&&window;var Si=M(5592),Do=M(4674),er=M(2459),Pt=M(2096),ui=M(5619);const{isArray:Qc}=Array,{getPrototypeOf:Wd,prototype:Mi,keys:Js}=Object;function ur(n){if(1===n.length){const e=n[0];if(Qc(e))return{args:e,keys:null};if(function To(n){return n&&"object"==typeof n&&Wd(n)===Mi}(e)){const t=Js(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ea=M(2737),Yt=M(7398);const{isArray:Cy}=Array;function ju(n){return(0,Yt.U)(e=>function Sp(n,e){return Cy(e)?n(...e):n(e)}(n,e))}var Xs=M(9940);function eo(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var xi=M(8251),Fa=M(7103);function ta(...n){const e=(0,Xs.yG)(n),t=(0,Xs.jO)(n),{args:r,keys:s}=ur(n);if(0===r.length)return(0,er.D)([],e);const u=new Si.y(function La(n,e,t=ea.y){return r=>{Jc(e,()=>{const{length:s}=n,u=new Array(s);let l=s,g=s;for(let _=0;_<s;_++)Jc(e,()=>{const I=(0,er.D)(n[_],e);let D=!1;I.subscribe((0,xi.x)(r,S=>{u[_]=S,D||(D=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>eo(s,l):ea.y));return t?u.pipe(ju(t)):u}function Jc(n,e,t){n?(0,Fa.f)(t,n,e):e()}const to=(0,M(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var $u=M(7537);function Ao(...n){return function Vs(){return(0,$u.J)(1)}()((0,er.D)(n,(0,Xs.yG)(n)))}var Hu=M(4829);function Kd(n){return new Si.y(e=>{(0,Hu.Xf)(n()).subscribe(e)})}var Gu=M(8407);function na(n,e){const t=(0,Do.m)(n)?n:()=>n,r=s=>s.error(t());return new Si.y(e?s=>e.schedule(r,0,s):r)}var no=M(6232),el=M(7394),Bi=M(9360);function Yd(){return(0,Bi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,xi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class tl extends Si.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Bi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new el.w0;const t=this.getSubject();e.add(this.source.subscribe((0,xi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=el.w0.EMPTY)}return e}refCount(){return Yd()(this)}}var Yi=M(8645),Hn=M(4664);function Zn(n){return n<=0?()=>no.E:(0,Bi.e)((e,t)=>{let r=0;e.subscribe((0,xi.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Ua(...n){const e=(0,Xs.yG)(n);return(0,Bi.e)((t,r)=>{(e?Ao(n,t,e):Ao(n,t)).subscribe(r)})}function ci(n,e){return(0,Bi.e)((t,r)=>{let s=0;t.subscribe((0,xi.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var Oi=M(1631);function Va(n){return(0,Bi.e)((e,t)=>{let r=!1;e.subscribe((0,xi.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function zu(n=Iy){return(0,Bi.e)((e,t)=>{let r=!1;e.subscribe((0,xi.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Iy(){return new to}function jr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ci((s,u)=>n(s,u,r)):ea.y,Zn(1),t?Va(e):zu(()=>new to))}function So(n,e){return(0,Do.m)(e)?(0,Oi.z)(n,e,1):(0,Oi.z)(n,1)}var Tr=M(9397);function os(n){return(0,Bi.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,xi.x)(t,void 0,void 0,l=>{u=(0,Hu.Xf)(n(l,os(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function ra(n,e){return(0,Bi.e)(function nl(n,e,t,r,s){return(u,l)=>{let g=t,_=e,I=0;u.subscribe((0,xi.x)(l,D=>{const S=I++;_=g?n(_,D,S):(g=!0,D),r&&l.next(_)},s&&(()=>{g&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Ba(n){return n<=0?()=>no.E:(0,Bi.e)((e,t)=>{let r=[];e.subscribe((0,xi.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function ia(n){return(0,Bi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Jd=M(2420);const on="primary",Mo=Symbol("RouteTitle");class sa{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xo(n){return new sa(n)}function xp(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))s[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Pi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Pp(n[s],e[s]))return!1;return!0}function Pp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function $r(n){return n.length>0?n[n.length-1]:null}function Oo(n){return function Ap(n){return!!n&&(n instanceof Si.y||(0,Do.m)(n.lift)&&(0,Do.m)(n.subscribe))}(n)?n:(0,d.QGY)(n)?(0,er.D)(Promise.resolve(n)):(0,Pt.of)(n)}const Np={exact:function sl(n,e,t){if(!aa(n.segments,e.segments)||!qu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!sl(n.children[r],e.children[r],t))return!1;return!0},subset:oa},il={exact:function kp(n,e){return Pi(n,e)},subset:function ja(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Pp(n[t],e[t]))},ignored:()=>!0};function Rp(n,e,t){return Np[t.paths](n.root,e.root,t.matrixParams)&&il[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function oa(n,e,t){return ro(n,e,e.segments,t)}function ro(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!aa(s,t)||e.hasChildren()||!qu(s,t,r))}if(n.segments.length===t.length){if(!aa(n.segments,t)||!qu(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!oa(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(aa(n.segments,s)&&qu(n.segments,s,r)&&n.children[on])&&ro(n.children[on],e,u,r)}}function qu(n,e,t){return e.every((r,s)=>il[t](n[s].parameters,r.parameters))}class Po{constructor(e=new On([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xo(this.queryParams)),this._queryParamMap}toString(){return kw.serialize(this)}}class On{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xd(this)}}class ol{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xo(this.parameters)),this._parameterMap}toString(){return Ni(this)}}function aa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let al=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new Fp},providedIn:"root"})}return n})();class Fp{parse(e){const t=new Ga(e);return new Po(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${as(e.root,!0)}`,r=function Dy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${cl(t)}=${cl(s)}`).join("&"):`${cl(t)}=${cl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ar(n){return encodeURI(n)}(e.fragment)}`:""}`}}const kw=new Fp;function Xd(n){return n.segments.map(e=>Ni(e)).join("/")}function as(n,e){if(!n.hasChildren())return Xd(n);if(e){const t=n.children[on]?as(n.children[on],!1):"",r=[];return Object.entries(n.children).forEach(([s,u])=>{s!==on&&r.push(`${s}:${as(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Rw(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===on&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==on&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===on?[as(n.children[on],!1)]:[`${s}:${as(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[on]?`${Xd(n)}/${t[0]}`:`${Xd(n)}/(${t.join("//")})`}}function ul(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cl(n){return ul(n).replace(/%3B/gi,";")}function eh(n){return ul(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function io(n){return decodeURIComponent(n)}function Lp(n){return io(n.replace(/\+/g,"%20"))}function Ni(n){return`${eh(n.path)}${function $a(n){return Object.keys(n).map(e=>`;${eh(e)}=${eh(n[e])}`).join("")}(n.parameters)}`}const Ha=/^[^\/()?;#]+/;function No(n){const e=n.match(Ha);return e?e[0]:""}const ll=/^[^\/()?;=#]+/,Up=/^[^=?&#]+/,Qi=/^[^&#]+/;class Ga{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new On([],{}):new On([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[on]=new On(e,t)),r}parseSegment(){const e=No(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new ol(io(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Ty(n){const e=n.match(ll);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=No(this.remaining);s&&(r=s,this.capture(r))}e[io(t)]=io(r)}parseQueryParam(e){const t=function Fw(n){const e=n.match(Up);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function th(n){const e=n.match(Qi);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Lp(t),u=Lp(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=No(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new d.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=on);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[on]:new On([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function Ay(n){return n.segments.length>0?new On([],{[on]:n}):n}function dl(n){const e={};for(const r of Object.keys(n.children)){const u=dl(n.children[r]);if(r===on&&0===u.segments.length&&u.hasChildren())for(const[l,g]of Object.entries(u.children))e[l]=g;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Sy(n){if(1===n.numberOfChildren&&n.children[on]){const e=n.children[on];return new On(n.segments.concat(e.segments),e.children)}return n}(new On(n.segments,e))}function za(n){return n instanceof Po}function p(n){let e;const s=Ay(function t(u){const l={};for(const _ of u.children){const I=t(_);l[_.outlet]=I}const g=new On(u.url,l);return u===n&&(e=g),g}(n.root));return e??s}function m(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return O(s,s,s,t,r);const u=function Je(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new me(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Object.entries(u.outlets).forEach(([_,I])=>{g[_]="string"==typeof I?I.split("/"):I}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new me(t,e,r)}(e);if(u.toRoot())return O(s,s,new On([],{}),t,r);const l=function Tt(n,e,t){if(n.isAbsolute)return new rt(e,!0,0);if(!t)return new rt(e,!1,NaN);if(null===t.parent)return new rt(t,!0,0);const r=E(n.commands[0])?0:1;return function bn(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new d.vHH(4005,!1);s=r.segments.length}return new rt(r,!1,s-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,s,n),g=l.processChildren?so(l.segmentGroup,l.index,u.commands):us(l.segmentGroup,l.index,u.commands);return O(s,l.segmentGroup,g,t,r)}function E(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function T(n){return"object"==typeof n&&null!=n&&n.outlets}function O(n,e,t,r,s){let l,u={};r&&Object.entries(r).forEach(([_,I])=>{u[_]=Array.isArray(I)?I.map(D=>`${D}`):`${I}`}),l=n===e?t:Q(n,e,t);const g=Ay(dl(l));return new Po(g,u,s)}function Q(n,e,t){const r={};return Object.entries(n.children).forEach(([s,u])=>{r[s]=u===e?t:Q(u,e,t)}),new On(n.segments,r)}class me{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&E(r[0]))throw new d.vHH(4003,!1);const s=r.find(T);if(s&&s!==$r(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rt{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function us(n,e,t){if(n||(n=new On([],{})),0===n.segments.length&&n.hasChildren())return so(n,e,t);const r=function Vp(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],g=t[r];if(T(g))break;const _=`${g}`,I=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&I&&"object"==typeof I&&void 0===I.outlets){if(!hl(_,I,l))return u;r+=2}else{if(!hl(_,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new On(n.segments.slice(0,r.pathIndex),{});return u.children[on]=new On(n.segments.slice(r.pathIndex),n.children),so(u,0,s)}return r.match&&0===s.length?new On(n.segments,{}):r.match&&!n.hasChildren()?Zu(n,e,t):r.match?so(n,0,s):Zu(n,e,t)}function so(n,e,t){if(0===t.length)return new On(n.segments,{});{const r=function _i(n){return T(n[0])?n[0].outlets:{[on]:n}}(t),s={};if(Object.keys(r).some(u=>u!==on)&&n.children[on]&&1===n.numberOfChildren&&0===n.children[on].segments.length){const u=so(n.children[on],e,t);return new On(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(s[u]=us(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(s[u]=l)}),new On(n.segments,s)}}function Zu(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(T(u)){const _=ua(u.outlets);return new On(r,_)}if(0===s&&E(t[0])){r.push(new ol(n.segments[e].path,ca(t[0]))),s++;continue}const l=T(u)?u.outlets[on]:`${u}`,g=s<t.length-1?t[s+1]:null;l&&g&&E(g)?(r.push(new ol(l,ca(g))),s+=2):(r.push(new ol(l,{})),s++)}return new On(r,{})}function ua(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Zu(new On([],{}),0,r))}),e}function ca(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function hl(n,e,t){return n==t.path&&Pi(e,t.parameters)}const Wu="imperative";class cs{constructor(e,t){this.id=e,this.url=t}}class qa extends cs{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oo extends cs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ku extends cs{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ro extends cs{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class fl extends cs{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nh extends cs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lw extends cs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NT extends cs{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Uw extends cs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AP extends cs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vw{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class SP{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class RT{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kT{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class My{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MP{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FT{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rh{}class Bw{constructor(e){this.url=e}}class xP{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Bp,this.attachRef=null}}let Bp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xP,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class LT{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=xy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=pl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return pl(e,this._root).map(t=>t.value)}}function xy(n,e){if(n===e.value)return e;for(const t of e.children){const r=xy(n,t);if(r)return r}return null}function pl(n,e){if(n===e.value)return[e];for(const t of e.children){const r=pl(n,t);if(r.length)return r.unshift(e),r}return[]}class Bs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Yu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Oy extends LT{constructor(e,t){super(e),this.snapshot=t,Ry(this,e)}toString(){return this.snapshot.toString()}}function Py(n,e){const t=function gl(n,e){const l=new Ju([],{},{},"",{},on,e,null,{});return new ih("",new Bs(l,[]))}(0,e),r=new ui.X([new ol("",{})]),s=new ui.X({}),u=new ui.X({}),l=new ui.X({}),g=new ui.X(""),_=new Qu(r,s,l,g,u,on,e,t.root);return _.snapshot=t.root,new Oy(new Bs(_,[]),t)}class Qu{constructor(e,t,r,s,u,l,g,_){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=u,this.outlet=l,this.component=g,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,Yt.U)(I=>I[Mo]))??(0,Pt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Yt.U)(e=>xo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Yt.U)(e=>xo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ny(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function jp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ju{get title(){return this.data?.[Mo]}constructor(e,t,r,s,u,l,g,_,I){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=g,this.routeConfig=_,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ih extends LT{constructor(e,t){super(t),this.url=e,Ry(this,t)}toString(){return jw(this._root)}}function Ry(n,e){e.value._routerState=n,e.children.forEach(t=>Ry(n,t))}function jw(n){const e=n.children.length>0?` { ${n.children.map(jw).join(", ")} } `:"";return`${n.value}${e}`}function ky(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Pi(e.params,t.params)||n.paramsSubject.next(t.params),function Op(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Pi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $p(n,e){const t=Pi(n.params,e.params)&&function by(n,e){return aa(n,e)&&n.every((t,r)=>Pi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$p(n.parent,e.parent))}let sh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=on,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Bp),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)(Hp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new UT(t,g,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:_,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]})}return n})();class UT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Qu?this.route:e===Bp?this.childContexts:this.parent.get(e,t)}}const Hp=new d.OlP("");let $w=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=ta([r.queryParams,r.params,r.data]).pipe((0,Hn.w)(([u,l,g],_)=>(g={...u,...l,...g},0===_?(0,Pt.of)(g):Promise.resolve(g)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,d.qFp)(r.component);if(l)for(const{templateName:g}of l.inputs)t.activatedComponentRef.setInput(g,u[g]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function oh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function VT(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return oh(n,r,s);return oh(n,r)})}(n,e,t);return new Bs(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>oh(n,g)),l}}const r=function ls(n){return new Qu(new ui.X(n.url),new ui.X(n.params),new ui.X(n.queryParams),new ui.X(n.fragment),new ui.X(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>oh(n,u));return new Bs(r,s)}}const ah="ngNavigationCancelingError";function Fy(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=za(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Gp(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Gp(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ah]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ml(n){return n&&n[ah]}let Ly=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(r,s){1&r&&d._UZ(0,"router-outlet")},dependencies:[sh],encapsulation:2})}return n})();function uh(n){const e=n.children&&n.children.map(uh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==on&&(t.component=Ly),t}function Ds(n){return n.outlet||on}function la(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class zw{constructor(e,t,r,s,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ky(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Yu(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),Object.values(s).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Yu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Yu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=Yu(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new MP(u.value.snapshot))}),e.children.length&&this.forwardEvent(new kT(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(ky(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),ky(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=la(s.snapshot);l.attachRef=null,l.route=s,l.injector=g,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Uy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ch{constructor(e,t){this.component=e,this.route=t}}function yl(n,e,t){const r=n._root;return ec(r,e?e._root:null,t,[r.value])}function Xu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function ec(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Yu(e);return n.children.forEach(l=>{(function qp(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function WT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!aa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!aa(n.url,e.url)||!Pi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$p(n,e)||!Pi(n.queryParams,e.queryParams);default:return!$p(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new Uy(r)):(u.data=l.data,u._resolvedData=l._resolvedData),ec(n,e,u.component?g?g.children:null:t,r,s),_&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new ch(g.outlet.component,l))}else l&&lh(e,g,s),s.canActivateChecks.push(new Uy(r)),ec(n,null,u.component?g?g.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,g])=>lh(g,t.getContext(l),s)),s}function lh(n,e,t){const r=Yu(n),s=n.value;Object.entries(r).forEach(([u,l])=>{lh(l,s.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new ch(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function dh(n){return"function"==typeof n}function Ww(n){return n instanceof to||"EmptyError"===n?.name}const _l=Symbol("INITIAL_VALUE");function tc(){return(0,Hn.w)(n=>ta(n.map(e=>e.pipe(Zn(1),Ua(_l)))).pipe((0,Yt.U)(e=>{for(const t of e)if(!0!==t){if(t===_l)return _l;if(!1===t||t instanceof Po)return t}return!0}),ci(e=>e!==_l),Zn(1)))}function By(n){return(0,Gu.z)((0,Tr.b)(e=>{if(za(e))throw Fy(0,e)}),(0,Yt.U)(e=>!0===e))}class hh{constructor(e){this.segmentGroup=e||null}}class fh{constructor(e){this.urlTree=e}}function ko(n){return na(new hh(n))}function $y(n){return na(new fh(n))}class Xw{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new d.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return(0,Pt.of)(r);if(s.numberOfChildren>1||!s.children[on])return na(new d.vHH(4e3,!1));s=s.children[on]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Po(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,u])=>{if("string"==typeof u&&u.startsWith(":")){const g=u.substring(1);r[s]=t[g]}else r[s]=u}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return Object.entries(t.children).forEach(([g,_])=>{l[g]=this.createSegmentGroup(e,_,r,s)}),new On(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new d.vHH(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const ph={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gh(n,e,t,r,s){const u=Gy(n,e,t);return u.matched?(r=function Gw(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function jy(n,e,t,r){const s=e.canMatch;if(!s||0===s.length)return(0,Pt.of)(!0);const u=s.map(l=>{const g=Xu(l,n);return Oo(function Vy(n){return n&&dh(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))});return(0,Pt.of)(u).pipe(tc(),By())}(r,e,t).pipe((0,Yt.U)(l=>!0===l?u:{...ph}))):(0,Pt.of)(u)}function Gy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ph}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||xp)(t,n,e);if(!s)return{...ph};const u={};Object.entries(s.posParams??{}).forEach(([g,_])=>{u[g]=_.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function zy(n,e,t,r){return t.length>0&&function r1(n,e,t){return t.some(r=>mh(n,e,r)&&Ds(r)!==on)}(n,t,r)?{segmentGroup:new On(e,n1(r,new On(t,n.children))),slicedSegments:[]}:0===t.length&&function eE(n,e,t){return t.some(r=>mh(n,e,r))}(n,t,r)?{segmentGroup:new On(n.segments,t1(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new On(n.segments,n.children),slicedSegments:t}}function t1(n,e,t,r,s){const u={};for(const l of r)if(mh(n,t,l)&&!s[Ds(l)]){const g=new On([],{});u[Ds(l)]=g}return{...s,...u}}function n1(n,e){const t={};t[on]=e;for(const r of n)if(""===r.path&&Ds(r)!==on){const s=new On([],{});t[Ds(r)]=s}return t}function mh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class i1{constructor(e,t,r,s,u,l,g){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g,this.allowRedirects=!0,this.applyRedirects=new Xw(this.urlSerializer,this.urlTree)}noMatchError(e){return new d.vHH(4002,!1)}recognize(){const e=zy(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,on).pipe(os(t=>{if(t instanceof fh)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof hh?this.noMatchError(t):t}),(0,Yt.U)(t=>{const r=new Ju([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},on,this.rootComponentType,null,{}),s=new Bs(r,t),u=new ih("",s),l=function w(n,e,t=null,r=null){return m(p(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,on).pipe(os(r=>{throw r instanceof hh?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Ny(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s,!0)}processChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,er.D)(s).pipe(So(u=>{const l=r.children[u],g=function qT(n,e){const t=n.filter(r=>Ds(r)===e);return t.push(...n.filter(r=>Ds(r)!==e)),t}(t,u);return this.processSegmentGroup(e,g,l,u)}),ra((u,l)=>(u.push(...l),u)),Va(null),function Mp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ci((s,u)=>n(s,u,r)):ea.y,Ba(1),t?Va(e):zu(()=>new to))}(),(0,Oi.z)(u=>{if(null===u)return ko(r);const l=tE(u);return function s1(n){n.sort((e,t)=>e.value.outlet===on?-1:t.value.outlet===on?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,Pt.of)(l)}))}processSegment(e,t,r,s,u,l){return(0,er.D)(t).pipe(So(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,s,u,l).pipe(os(_=>{if(_ instanceof hh)return(0,Pt.of)(null);throw _}))),jr(g=>!!g),os(g=>{if(Ww(g))return function qy(n,e,t){return 0===e.length&&!n.children[t]}(r,s,u)?(0,Pt.of)([]):ko(r);throw g}))}processSegmentAgainstRoute(e,t,r,s,u,l,g){return function Yp(n,e,t,r){return!!(Ds(n)===r||r!==on&&mh(e,t,n))&&("**"===n.path||Gy(e,n,t).matched)}(r,s,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,u,l,g):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,u,l):ko(s):ko(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$y(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Oi.z)(l=>{const g=new On(l,{});return this.processSegment(e,t,g,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:g,consumedSegments:_,remainingSegments:I,positionalParamSegments:D}=Gy(t,s,u);if(!g)return ko(t);const S=this.applyRedirects.applyRedirectCommands(_,s.redirectTo,D);return s.redirectTo.startsWith("/")?$y(S):this.applyRedirects.lineralizeSegments(s,S).pipe((0,Oi.z)($=>this.processSegment(e,r,t,$.concat(I),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u,l){let g;if("**"===r.path){const _=s.length>0?$r(s).parameters:{},I=new Ju(s,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rE(r),Ds(r),r.component??r._loadedComponent??null,r,rc(r));g=(0,Pt.of)({snapshot:I,consumedSegments:[],remainingSegments:[]}),t.children={}}else g=gh(t,r,s,e).pipe((0,Yt.U)(({matched:_,consumedSegments:I,remainingSegments:D,parameters:S})=>_?{snapshot:new Ju(I,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rE(r),Ds(r),r.component??r._loadedComponent??null,r,rc(r)),consumedSegments:I,remainingSegments:D}:null));return g.pipe((0,Hn.w)(_=>null===_?ko(t):this.getChildConfig(e=r._injector??e,r,s).pipe((0,Hn.w)(({routes:I})=>{const D=r._loadedInjector??e,{snapshot:S,consumedSegments:$,remainingSegments:J}=_,{segmentGroup:we,slicedSegments:Fe}=zy(t,$,J,I);if(0===Fe.length&&we.hasChildren())return this.processChildren(D,I,we).pipe((0,Yt.U)(ht=>null===ht?null:[new Bs(S,ht)]));if(0===I.length&&0===Fe.length)return(0,Pt.of)([new Bs(S,[])]);const Le=Ds(r)===u;return this.processSegment(D,I,we,Fe,Le?on:u,!0).pipe((0,Yt.U)(ht=>[new Bs(S,ht)]))}))))}getChildConfig(e,t,r){return t.children?(0,Pt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Pt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function Jw(n,e,t,r){const s=e.canLoad;if(void 0===s||0===s.length)return(0,Pt.of)(!0);const u=s.map(l=>{const g=Xu(l,n);return Oo(function YT(n){return n&&dh(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))});return(0,Pt.of)(u).pipe(tc(),By())}(e,t,r).pipe((0,Oi.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Tr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Kp(n){return na(Gp(!1,3))}())):(0,Pt.of)({routes:[],injector:e})}}function kP(n){const e=n.value.routeConfig;return e&&""===e.path}function tE(n){const e=[],t=new Set;for(const r of n){if(!kP(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=tE(r.children);e.push(new Bs(r.value,s))}return e.filter(r=>!t.has(r))}function rE(n){return n.data||{}}function rc(n){return n.resolve||{}}function uE(n){return"string"==typeof n.title||null===n.title}function Wy(n){return(0,Hn.w)(e=>{const t=n(e);return t?(0,er.D)(t).pipe((0,Yt.U)(()=>e)):(0,Pt.of)(e)})}const wl=new d.OlP("ROUTES");let Ky=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,Pt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Oo(t.loadComponent()).pipe((0,Yt.U)(El),(0,Tr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),ia(()=>{this.componentLoaders.delete(t)})),s=new tl(r,()=>new Yi.x).pipe(Yd());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,Pt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function o1(n,e,t,r){return Oo(n.loadChildren()).pipe((0,Yt.U)(El),(0,Oi.z)(s=>s instanceof d.YKP||Array.isArray(s)?(0,Pt.of)(s):(0,er.D)(e.compileModuleAsync(s))),(0,Yt.U)(s=>{r&&r(n);let u,l,g=!1;return Array.isArray(s)?(l=s,!0):(u=s.create(t).injector,l=u.get(wl,[],{optional:!0,self:!0}).flat()),{routes:l.map(uh),injector:u}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(ia(()=>{this.childrenLoaders.delete(r)})),l=new tl(u,()=>new Yi.x).pipe(Yd());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function El(n){return function Za(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Jp=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Yi.x,this.transitionAbortSubject=new Yi.x,this.configLoader=(0,d.f3M)(Ky),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(al),this.rootContexts=(0,d.f3M)(Bp),this.inputBindingEnabled=null!==(0,d.f3M)(Hp,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Pt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new SP(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Vw(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,s){return this.transitions=new ui.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Wu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ci(u=>0!==u.id),(0,Yt.U)(u=>({...u,extractedUrl:t.urlHandlingStrategy.extract(u.rawUrl)})),(0,Hn.w)(u=>{this.currentTransition=u;let l=!1,g=!1;return(0,Pt.of)(u).pipe((0,Tr.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.rawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Hn.w)(_=>{const I=_.currentBrowserUrl.toString(),D=!t.navigated||_.extractedUrl.toString()!==I||I!==_.currentUrlTree.toString();if(!D&&"reload"!==(_.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const $="";return this.events.next(new Ro(_.id,this.urlSerializer.serialize(_.rawUrl),$,0)),_.resolve(null),no.E}if(t.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return(0,Pt.of)(_).pipe((0,Hn.w)($=>{const J=this.transitions?.getValue();return this.events.next(new qa($.id,this.urlSerializer.serialize($.extractedUrl),$.source,$.restoredState)),J!==this.transitions?.getValue()?no.E:Promise.resolve($)}),function Qp(n,e,t,r,s,u){return(0,Oi.z)(l=>function vl(n,e,t,r,s,u,l="emptyOnly"){return new i1(n,e,t,r,s,l,u).recognize()}(n,e,t,r,l.extractedUrl,s,u).pipe((0,Yt.U)(({state:g,tree:_})=>({...l,targetSnapshot:g,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Tr.b)($=>{u.targetSnapshot=$.targetSnapshot,u.urlAfterRedirects=$.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:$.urlAfterRedirects};const J=new nh($.id,this.urlSerializer.serialize($.extractedUrl),this.urlSerializer.serialize($.urlAfterRedirects),$.targetSnapshot);this.events.next(J)}));if(D&&t.urlHandlingStrategy.shouldProcessUrl(_.currentRawUrl)){const{id:$,extractedUrl:J,source:we,restoredState:Fe,extras:Le}=_,ht=new qa($,this.urlSerializer.serialize(J),we,Fe);this.events.next(ht);const Vt=Py(0,this.rootComponentType).snapshot;return this.currentTransition=u={..._,targetSnapshot:Vt,urlAfterRedirects:J,extras:{...Le,skipLocationChange:!1,replaceUrl:!1}},(0,Pt.of)(u)}{const $="";return this.events.next(new Ro(_.id,this.urlSerializer.serialize(_.extractedUrl),$,1)),_.resolve(null),no.E}}),(0,Tr.b)(_=>{const I=new Lw(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(I)}),(0,Yt.U)(_=>(this.currentTransition=u={..._,guards:yl(_.targetSnapshot,_.currentSnapshot,this.rootContexts)},u)),function nc(n,e){return(0,Oi.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,Pt.of)({...t,guardsResult:!0}):function Kw(n,e,t,r){return(0,er.D)(n).pipe((0,Oi.z)(s=>function Qw(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,Pt.of)(!0);const l=u.map(g=>{const _=la(e)??s,I=Xu(g,_);return Oo(function Zp(n){return n&&dh(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):_.runInContext(()=>I(n,e,t,r))).pipe(jr())});return(0,Pt.of)(l).pipe(tc())}(s.component,s.route,t,e,r)),jr(s=>!0!==s,!0))}(l,r,s,n).pipe((0,Oi.z)(g=>g&&function KT(n){return"boolean"==typeof n}(g)?function Yw(n,e,t,r){return(0,er.D)(e).pipe(So(s=>Ao(function RP(n,e){return null!==n&&e&&e(new RT(n)),(0,Pt.of)(!0)}(s.route.parent,r),function XT(n,e){return null!==n&&e&&e(new My(n)),(0,Pt.of)(!0)}(s.route,r),function e1(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function zp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Kd(()=>{const g=l.guards.map(_=>{const I=la(l.node)??t,D=Xu(_,I);return Oo(function qw(n){return n&&dh(n.canActivateChild)}(D)?D.canActivateChild(r,n):I.runInContext(()=>D(r,n))).pipe(jr())});return(0,Pt.of)(g).pipe(tc())}));return(0,Pt.of)(u).pipe(tc())}(n,s.path,t),function Wp(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Pt.of)(!0);const s=r.map(u=>Kd(()=>{const l=la(e)??t,g=Xu(u,l);return Oo(function QT(n){return n&&dh(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(jr())}));return(0,Pt.of)(s).pipe(tc())}(n,s.route,t))),jr(s=>!0!==s,!0))}(r,u,n,e):(0,Pt.of)(g)),(0,Yt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,_=>this.events.next(_)),(0,Tr.b)(_=>{if(u.guardsResult=_.guardsResult,za(_.guardsResult))throw Fy(0,_.guardsResult);const I=new NT(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.events.next(I)}),ci(_=>!!_.guardsResult||(this.cancelNavigationTransition(_,"",3),!1)),Wy(_=>{if(_.guards.canActivateChecks.length)return(0,Pt.of)(_).pipe((0,Tr.b)(I=>{const D=new Uw(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(D)}),(0,Hn.w)(I=>{let D=!1;return(0,Pt.of)(I).pipe(function Zy(n,e){return(0,Oi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return(0,Pt.of)(t);let u=0;return(0,er.D)(s).pipe(So(l=>function iE(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!uE(s)&&(u[Mo]=s.title),function sE(n,e,t,r){const s=function oE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return(0,Pt.of)({});const u={};return(0,er.D)(s).pipe((0,Oi.z)(l=>function aE(n,e,t,r){const s=la(e)??r,u=Xu(n,s);return Oo(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(jr(),(0,Tr.b)(g=>{u[l]=g}))),Ba(1),function Qd(n){return(0,Yt.U)(()=>n)}(u),os(l=>Ww(l)?no.E:na(l)))}(u,n,e,r).pipe((0,Yt.U)(l=>(n._resolvedData=l,n.data=Ny(n,t).resolve,s&&uE(s)&&(n.data[Mo]=s.title),null)))}(l.route,r,n,e)),(0,Tr.b)(()=>u++),Ba(1),(0,Oi.z)(l=>u===s.length?(0,Pt.of)(t):no.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Tr.b)({next:()=>D=!0,complete:()=>{D||this.cancelNavigationTransition(I,"",2)}}))}),(0,Tr.b)(I=>{const D=new AP(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(D)}))}),Wy(_=>{const I=D=>{const S=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(D.routeConfig).pipe((0,Tr.b)($=>{D.component=$}),(0,Yt.U)(()=>{})));for(const $ of D.children)S.push(...I($));return S};return ta(I(_.targetSnapshot.root)).pipe(Va(),Zn(1))}),Wy(()=>this.afterPreactivation()),(0,Yt.U)(_=>{const I=function Hw(n,e,t){const r=oh(n,e._root,t?t._root:void 0);return new Oy(r,e)}(t.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return this.currentTransition=u={..._,targetRouterState:I},u}),(0,Tr.b)(()=>{this.events.next(new rh)}),((n,e,t,r)=>(0,Yt.U)(s=>(new zw(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,_=>this.events.next(_),this.inputBindingEnabled),Zn(1),(0,Tr.b)({next:_=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new oo(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects))),t.titleStrategy?.updateTitle(_.targetRouterState.snapshot),_.resolve(!0)},complete:()=>{l=!0}}),function rl(n){return(0,Bi.e)((e,t)=>{(0,Hu.Xf)(n).subscribe((0,xi.x)(t,()=>t.complete(),Jd.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,Tr.b)(_=>{throw _}))),ia(()=>{l||g||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),os(_=>{if(g=!0,ml(_))this.events.next(new Ku(u.id,this.urlSerializer.serialize(u.extractedUrl),_.message,_.cancellationCode)),function ji(n){return ml(n)&&za(n.url)}(_)?this.events.next(new Bw(_.url)):u.resolve(!1);else{this.events.next(new fl(u.id,this.urlSerializer.serialize(u.extractedUrl),_,u.targetSnapshot??void 0));try{u.resolve(t.errorHandler(_))}catch(I){u.reject(I)}}return no.E}))}))}cancelNavigationTransition(t,r,s){const u=new Ku(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function a1(n){return n!==Wu}let u1=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===on);return r}getResolvedTitleForRoute(t){return t.data[Mo]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(FP)},providedIn:"root"})}return n})(),FP=(()=>{class n extends u1{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ue))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LP=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(cE)},providedIn:"root"})}return n})();class UP{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let cE=(()=>{class n extends UP{static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=d.n5z(n)))(s||n)}}();static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Xp=new d.OlP("",{providedIn:"root",factory:()=>({})});let c1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(l1)},providedIn:"root"})}return n})(),l1=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yh=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(yh||{});function eg(n,e){n.events.pipe(ci(t=>t instanceof oo||t instanceof Ku||t instanceof fl||t instanceof Ro),(0,Yt.U)(t=>t instanceof oo||t instanceof Ro?yh.COMPLETE:t instanceof Ku&&(0===t.code||1===t.code)?yh.REDIRECTING:yh.FAILED),ci(t=>t!==yh.REDIRECTING),Zn(1)).subscribe(()=>{e()})}function da(n){throw n}function _h(n,e,t){return e.parse("/")}const lE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this._events=new Yi.x,this.options=(0,d.f3M)(Xp,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||da,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||_h,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(c1),this.routeReuseStrategy=(0,d.f3M)(LP),this.titleStrategy=(0,d.f3M)(u1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(wl,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(Jp),this.urlSerializer=(0,d.f3M)(al),this.location=(0,d.f3M)(Ze),this.componentInputBindingEnabled=!!(0,d.f3M)(Hp,{optional:!0}),this.eventsSubscription=new el.w0,this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Po,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Py(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:s}=this.navigationTransitions;if(null===s)return void(d1(r)&&this._events.next(r));if(r instanceof qa)a1(s.source)&&(this.browserUrlTree=s.extractedUrl);else if(r instanceof Ro)this.rawUrlTree=s.rawUrl;else if(r instanceof nh){if("eager"===this.urlUpdateStrategy){if(!s.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl);this.setBrowserUrl(u,s)}this.browserUrlTree=s.urlAfterRedirects}}else if(r instanceof rh)this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects);else if(r instanceof Ku)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(s);else if(r instanceof Bw){const u=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||a1(s.source)};this.scheduleNavigation(u,Wu,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}r instanceof fl&&this.restoreHistory(s,!0),r instanceof oo&&(this.navigated=!0),d1(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Wu,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const _={...s};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(uh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,I=_?this.currentUrlTree.fragment:l;let S,D=null;switch(g){case"merge":D={...this.currentUrlTree.queryParams,...u};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=u||null}null!==D&&(D=this.removeEmptyProps(D));try{S=p(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),S=this.currentUrlTree.root}return m(S,t,D,I??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=za(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,Wu,null,r)}navigate(t,r={skipLocationChange:!1}){return function VP(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new d.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...lE}:!1===r?{...dE}:r,za(t))return Rp(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Rp(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let g,_,I;l?(g=l.resolve,_=l.reject,I=l.promise):I=new Promise((S,$)=>{g=S,_=$});const D=this.pendingTasks.add();return eg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function d1(n){return!(n instanceof rh||n instanceof Bw)}let tg=(()=>{class n{constructor(t,r,s,u,l,g){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=g,this.href=null,this.commands=null,this.onChanges=new Yi.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const _=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(I=>{I instanceof oo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Xr),d.Y36(Qu),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Ve))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){1&r&&d.NdJ("click",function(l){return s.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&r&&d.uIk("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",d.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",d.VuI],replaceUrl:["replaceUrl","replaceUrl",d.VuI],routerLink:"routerLink"},standalone:!0,features:[d.Xq5,d.TTD]})}return n})(),vh=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,s,u,l){this.router=t,this.element=r,this.renderer=s,this.cdr=u,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(g=>{g instanceof oo&&this.update()})}ngAfterContentInit(){(0,Pt.of)(this.links.changes,(0,Pt.of)(null)).pipe((0,$u.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,er.D)(t).pipe((0,$u.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Yy(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Xr),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(tg,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,s,u){if(1&r&&d.Suo(u,tg,5),2&r){let l;d.iGM(l=d.CRH())&&(s.links=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]})}return n})();class h1{}let p1=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ci(t=>t instanceof oo),So(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,er.D)(s).pipe((0,$u.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,Pt.of)(null);const u=s.pipe((0,Oi.z)(l=>null===l?(0,Pt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,er.D)([u,l]).pipe((0,$u.J)())}return u})}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Xr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(h1),d.LFG(Ky))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Qy=new d.OlP("");let hE=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof qa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof oo?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ro&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof FT&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new FT(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){d.$Z()};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function js(n,e){return{\u0275kind:n,\u0275providers:e}}function pE(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Xr),s=n.get(gE);1===n.get(Eh)&&r.initialNavigation(),n.get(yE,null,d.XFs.Optional)?.setUpPreloading(),n.get(Qy,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const gE=new d.OlP("",{factory:()=>new Yi.x}),Eh=new d.OlP("",{providedIn:"root",factory:()=>1}),yE=new d.OlP("");function y1(n){return js(0,[{provide:yE,useExisting:p1},{provide:h1,useExisting:n}])}const Cl=new d.OlP("ROUTER_FORROOT_GUARD"),_E=[Ze,{provide:al,useClass:Fp},Xr,Bp,{provide:Qu,useFactory:function Jy(n){return n.routerState.root},deps:[Xr]},Ky,[]];function vE(){return new d.PXZ("Router",Xr)}let ng=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_E,[],{provide:wl,multi:!0,useValue:t},{provide:Cl,useFactory:EE,deps:[[Xr,new d.FiY,new d.tp0]]},{provide:Xp,useValue:r||{}},r?.useHash?{provide:Ve,useClass:ke}:{provide:Ve,useClass:Ye},{provide:Qy,useFactory:()=>{const n=(0,d.f3M)(yi),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Xp),r=(0,d.f3M)(Jp),s=(0,d.f3M)(al);return t.scrollOffset&&n.setOffset(t.scrollOffset),new hE(s,r,n,e,t)}},r?.preloadingStrategy?y1(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:vE},r?.initialNavigation?rg(r):[],r?.bindToComponentInputs?js(8,[$w,{provide:Hp,useExisting:$w}]).\u0275providers:[],[{provide:w1,useFactory:pE},{provide:d.tb,multi:!0,useExisting:w1}]]}}static forChild(t){return{ngModule:n,providers:[{provide:wl,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Cl,8))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function EE(n){return"guarded"}function rg(n){return["disabled"===n.initialNavigation?js(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Xr);return()=>{e.setUpLocationChangeListener()}}},{provide:Eh,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?js(2,[{provide:Eh,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(Oe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Xr),u=e.get(gE);eg(s,()=>{r(!0)}),e.get(Jp).afterPreactivation=()=>(r(!0),u.closed?(0,Pt.of)(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const w1=new d.OlP("");var fe=M(5861),Ih=M(6321),I1=M(671);const IE=function b1(n,e){return n===e||n!=n&&e!=e},ha=function bE(n,e){for(var t=n.length;t--;)if(IE(n[t][0],e))return t;return-1};var T1=Array.prototype.splice;function bl(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}bl.prototype.clear=function sg(){this.__data__=[],this.size=0},bl.prototype.delete=function A1(n){var e=this.__data__,t=ha(e,n);return!(t<0||(t==e.length-1?e.pop():T1.call(e,t,1),--this.size,0))},bl.prototype.get=function DE(n){var e=this.__data__,t=ha(e,n);return t<0?void 0:e[t][1]},bl.prototype.has=function TE(n){return ha(this.__data__,n)>-1},bl.prototype.set=function zP(n,e){var t=this.__data__,r=ha(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const og=bl,Tl="object"==typeof global&&global&&global.Object===Object&&global;var ug="object"==typeof self&&self&&self.Object===Object&&self;const $s=Tl||ug||Function("return this")(),fa=$s.Symbol;var x1=Object.prototype,l_=x1.hasOwnProperty,bh=x1.toString,Dh=fa?fa.toStringTag:void 0;var d_=Object.prototype.toString;var ME=fa?fa.toStringTag:void 0;const ic=function cg(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":ME&&ME in Object(n)?function AE(n){var e=l_.call(n,Dh),t=n[Dh];try{n[Dh]=void 0;var r=!0}catch{}var s=bh.call(n);return r&&(e?n[Dh]=t:delete n[Dh]),s}(n):function SE(n){return d_.call(n)}(n)},Sl=function k1(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},f_=function L1(n){if(!Sl(n))return!1;var e=ic(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var n,YP=$s["__core-js_shared__"],Th=(n=/[^.]+$/.exec(YP&&YP.keys&&YP.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var V1=Function.prototype.toString;const sc=function OE(n){if(null!=n){try{return V1.call(n)}catch{}try{return n+""}catch{}}return""};var j1=/^\[object .+?Constructor\]$/,m_=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const $1=function RE(n){return!(!Sl(n)||function U1(n){return!!Th&&Th in n}(n))&&(f_(n)?m_:j1).test(sc(n))},Wa=function G1(n,e){var t=function H1(n,e){return n?.[e]}(n,e);return $1(t)?t:void 0},Sh=Wa($s,"Map"),xl=Wa(Object,"create");var __=Object.prototype.hasOwnProperty;var v_=Object.prototype.hasOwnProperty;function Ol(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ol.prototype.clear=function FE(){this.__data__=xl?xl(null):{},this.size=0},Ol.prototype.delete=function LE(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},Ol.prototype.get=function q1(n){var e=this.__data__;if(xl){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return __.call(e,n)?e[n]:void 0},Ol.prototype.has=function Lo(n){var e=this.__data__;return xl?void 0!==e[n]:v_.call(e,n)},Ol.prototype.set=function t2(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=xl&&void 0===e?"__lodash_hash_undefined__":e,this};const dg=Ol,hg=function BE(n,e){var t=n.__data__;return function w_(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function uo(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}uo.prototype.clear=function K1(){this.size=0,this.__data__={hash:new dg,map:new(Sh||og),string:new dg}},uo.prototype.delete=function jE(n){var e=hg(this,n).delete(n);return this.size-=e?1:0,e},uo.prototype.get=function Q1(n){return hg(this,n).get(n)},uo.prototype.has=function X1(n){return hg(this,n).has(n)},uo.prototype.set=function Pl(n,e){var t=hg(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const eA=uo;function Ya(n){var e=this.__data__=new og(n);this.size=e.size}Ya.prototype.clear=function ZP(){this.__data__=new og,this.size=0},Ya.prototype.delete=function ag(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},Ya.prototype.get=function s_(n){return this.__data__.get(n)},Ya.prototype.has=function Dl(n){return this.__data__.has(n)},Ya.prototype.set=function GE(n,e){var t=this.__data__;if(t instanceof og){var r=t.__data__;if(!Sh||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new eA(r)}return t.set(n,e),this.size=t.size,this};const Mh=Ya;var ZE=function(){try{var n=Wa(Object,"defineProperty");return n({},"",{}),n}catch{}}();const WE=ZE,KE=function nA(n,e,t){"__proto__"==e&&WE?WE(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var YE=Object.prototype.hasOwnProperty;const QE=function n2(n,e,t){var r=n[e];(!YE.call(n,e)||!IE(r,t)||void 0===t&&!(e in n))&&KE(n,e,t)},E_=function r2(n,e,t,r){var s=!t;t||(t={});for(var u=-1,l=e.length;++u<l;){var g=e[u],_=r?r(t[g],n[g],g,t,n):void 0;void 0===_&&(_=n[g]),s?KE(t,g,_):QE(t,g,_)}return t},Qa=function i2(n){return null!=n&&"object"==typeof n},C_=function eC(n){return Qa(n)&&"[object Arguments]"==ic(n)};var tC=Object.prototype,nC=tC.hasOwnProperty,rC=tC.propertyIsEnumerable,an=C_(function(){return arguments}())?C_:function(n){return Qa(n)&&nC.call(n,"callee")&&!rC.call(n,"callee")};const iC=an,Ja=Array.isArray;var xh="object"==typeof exports&&exports&&!exports.nodeType&&exports,oc=xh&&"object"==typeof module&&module&&!module.nodeType&&module,Nl=oc&&oc.exports===xh?$s.Buffer:void 0;const pg=(Nl?Nl.isBuffer:void 0)||function oC(){return!1};var uC=/^(?:0|[1-9]\d*)$/;const sA=function T_(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&uC.test(n))&&n>-1&&n%1==0&&n<e},A_=function aA(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991};var fr={};fr["[object Float32Array]"]=fr["[object Float64Array]"]=fr["[object Int8Array]"]=fr["[object Int16Array]"]=fr["[object Int32Array]"]=fr["[object Uint8Array]"]=fr["[object Uint8ClampedArray]"]=fr["[object Uint16Array]"]=fr["[object Uint32Array]"]=!0,fr["[object Arguments]"]=fr["[object Array]"]=fr["[object ArrayBuffer]"]=fr["[object Boolean]"]=fr["[object DataView]"]=fr["[object Date]"]=fr["[object Error]"]=fr["[object Function]"]=fr["[object Map]"]=fr["[object Number]"]=fr["[object Object]"]=fr["[object RegExp]"]=fr["[object Set]"]=fr["[object String]"]=fr["[object WeakMap]"]=!1;const O_=function x_(n){return function(e){return n(e)}};var P_="object"==typeof exports&&exports&&!exports.nodeType&&exports,Oh=P_&&"object"==typeof module&&module&&!module.nodeType&&module,gg=Oh&&Oh.exports===P_&&Tl.process;const Xa=function(){try{return Oh&&Oh.require&&Oh.require("util").types||gg&&gg.binding&&gg.binding("util")}catch{}}();var DA=Xa&&Xa.isTypedArray;const gC=DA?O_(DA):function bA(n){return Qa(n)&&A_(n.length)&&!!fr[ic(n)]};var yC=Object.prototype.hasOwnProperty;const Vo=function N_(n,e){var t=Ja(n),r=!t&&iC(n),s=!t&&!r&&pg(n),u=!t&&!r&&!s&&gC(n),l=t||r||s||u,g=l?function JE(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],_=g.length;for(var I in n)(e||yC.call(n,I))&&(!l||!("length"==I||s&&("offset"==I||"parent"==I)||u&&("buffer"==I||"byteLength"==I||"byteOffset"==I)||sA(I,_)))&&g.push(I);return g};var TA=Object.prototype;const Ph=function AA(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||TA)},R_=function SA(n,e){return function(t){return n(e(t))}},yg=R_(Object.keys,Object);var _C=Object.prototype.hasOwnProperty;const k_=function xA(n){return null!=n&&A_(n.length)&&!f_(n)},F_=function vC(n){return k_(n)?Vo(n):function _g(n){if(!Ph(n))return yg(n);var e=[];for(var t in Object(n))_C.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n)};var CC=Object.prototype.hasOwnProperty;const NA=function IC(n){if(!Sl(n))return function EC(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=Ph(n),t=[];for(var r in n)"constructor"==r&&(e||!CC.call(n,r))||t.push(r);return t},ac=function RA(n){return k_(n)?Vo(n,!0):NA(n)};var bC="object"==typeof exports&&exports&&!exports.nodeType&&exports,DC=bC&&"object"==typeof module&&module&&!module.nodeType&&module,TC=DC&&DC.exports===bC?$s.Buffer:void 0,AC=TC?TC.allocUnsafe:void 0;const MC=function jA(){return[]};var HA=Object.prototype.propertyIsEnumerable,xC=Object.getOwnPropertySymbols,GA=xC?function(n){return null==n?[]:(n=Object(n),function vg(n,e){for(var t=-1,r=null==n?0:n.length,s=0,u=[];++t<r;){var l=n[t];e(l,t,n)&&(u[s++]=l)}return u}(xC(n),function(e){return HA.call(n,e)}))}:MC;const wg=GA,U_=function u2(n,e){for(var t=-1,r=e.length,s=n.length;++t<r;)n[s+t]=e[t];return n},qA=R_(Object.getPrototypeOf,Object);var ZA=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)U_(e,wg(n)),n=qA(n);return e}:MC;const NC=ZA,Rl=function Bo(n,e,t){var r=e(n);return Ja(n)?r:U_(r,t(n))},uc=function $i(n){return Rl(n,F_,wg)},Hs=function Cg(n){return Rl(n,ac,NC)},eu=Wa($s,"DataView"),tu=Wa($s,"Promise"),nu=Wa($s,"Set"),ru=Wa($s,"WeakMap");var cc="[object Map]",j_="[object Promise]",$_="[object Set]",H_="[object WeakMap]",G_="[object DataView]",RC=sc(eu),kC=sc(Sh),FC=sc(tu),LC=sc(nu),UC=sc(ru),ga=ic;(eu&&ga(new eu(new ArrayBuffer(1)))!=G_||Sh&&ga(new Sh)!=cc||tu&&ga(tu.resolve())!=j_||nu&&ga(new nu)!=$_||ru&&ga(new ru)!=H_)&&(ga=function(n){var e=ic(n),t="[object Object]"==e?n.constructor:void 0,r=t?sc(t):"";if(r)switch(r){case RC:return G_;case kC:return cc;case FC:return j_;case LC:return $_;case UC:return H_}return e});const z_=ga;var l2=Object.prototype.hasOwnProperty;const VC=$s.Uint8Array,q_=function h2(n){var e=new n.constructor(n.byteLength);return new VC(e).set(new VC(n)),e};var Z_=/\w*$/;var Fh=fa?fa.prototype:void 0,K_=Fh?Fh.valueOf:void 0;const dS=function lS(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return q_(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function QA(n,e){var t=e?q_(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function XA(n,e){var t=e?q_(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function kh(n){var e=new n.constructor(n.source,Z_.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function Lh(n){return K_?Object(K_.call(n)):{}}(n)}};var J_=Object.create,X_=function(){function n(){}return function(e){if(!Sl(e))return{};if(J_)return J_(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const ev=X_;var qC=Xa&&Xa.isMap;const pS=qC?O_(qC):function tv(n){return Qa(n)&&"[object Map]"==z_(n)};var iv=Xa&&Xa.isSet;const mS=iv?O_(iv):function rv(n){return Qa(n)&&"[object Set]"==z_(n)};var Ag="[object Arguments]",ov="[object Function]",eI="[object Object]",tr={};tr[Ag]=tr["[object Array]"]=tr["[object ArrayBuffer]"]=tr["[object DataView]"]=tr["[object Boolean]"]=tr["[object Date]"]=tr["[object Float32Array]"]=tr["[object Float64Array]"]=tr["[object Int8Array]"]=tr["[object Int16Array]"]=tr["[object Int32Array]"]=tr["[object Map]"]=tr["[object Number]"]=tr[eI]=tr["[object RegExp]"]=tr["[object Set]"]=tr["[object String]"]=tr["[object Symbol]"]=tr["[object Uint8Array]"]=tr["[object Uint8ClampedArray]"]=tr["[object Uint16Array]"]=tr["[object Uint32Array]"]=!0,tr["[object Error]"]=tr[ov]=tr["[object WeakMap]"]=!1;const cv=function Mg(n,e,t,r,s,u){var l,g=1&e,_=2&e,I=4&e;if(t&&(l=s?t(n,r,s,u):t(n)),void 0!==l)return l;if(!Sl(n))return n;var D=Ja(n);if(D){if(l=function KA(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&l2.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!g)return function L_(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(n,l)}else{var S=z_(n),$=S==ov||"[object GeneratorFunction]"==S;if(pg(n))return function UA(n,e){if(e)return n.slice();var t=n.length,r=AC?AC(t):new n.constructor(t);return n.copy(r),r}(n,g);if(S==eI||S==Ag||$&&!s){if(l=_||$?{}:function hS(n){return"function"!=typeof n.constructor||Ph(n)?{}:ev(qA(n))}(n),!g)return _?function V_(n,e){return E_(n,NC(n),e)}(n,function kA(n,e){return n&&E_(e,ac(e),n)}(l,n)):function OC(n,e){return E_(n,wg(n),e)}(n,function OA(n,e){return n&&E_(e,F_(e),n)}(l,n))}else{if(!tr[S])return s?n:{};l=dS(n,S,g)}}u||(u=new Mh);var J=u.get(n);if(J)return J;u.set(n,l),mS(n)?n.forEach(function(Le){l.add(Mg(Le,e,t,Le,n,u))}):pS(n)&&n.forEach(function(Le,ht){l.set(ht,Mg(Le,e,t,ht,n,u))});var Fe=D?void 0:(I?_?Hs:uc:_?ac:F_)(n);return function fg(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(Fe||n,function(Le,ht){Fe&&(Le=n[ht=Le]),QE(l,ht,Mg(Le,e,t,ht,n,u))}),l},xg=function CS(n){return cv(n,5)};var Hr=M(4556);function lv(){return(0,Bi.e)((n,e)=>{let t,r=!1;n.subscribe((0,xi.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}var mt,li=M(3997),wi=M(6304),IS=(M(8661),M(3399)),Vh=M(7592),Og=M(4537),ma=M(7879),Vn=M(9058),Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},co={},Pg=Pg||{},sn=Vl||self;function Bh(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ng(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var jh="closure_uid_"+(1e9*Math.random()>>>0),jo=0;function bS(n,e,t){return n.call.apply(n.bind,arguments)}function dI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function pr(n,e,t){return(pr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bS:dI).apply(null,arguments)}function ds(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function nr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[s].apply(r,l)}}function ya(){this.s=this.s,this.o=this.o}ya.prototype.s=!1,ya.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function lI(n){Object.prototype.hasOwnProperty.call(n,jh)&&n[jh]||(n[jh]=++jo)}(this)},ya.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function dv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function pI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Bh(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function Hi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Hi.prototype.h=function(){this.defaultPrevented=!0};var hv=function(){if(!sn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{sn.addEventListener("test",()=>{},e),sn.removeEventListener("test",()=>{},e)}catch{}return n}();function _a(n){return/^[\s\xa0]*$/.test(n)}function Rg(){var n=sn.navigator;return n&&(n=n.userAgent)?n:""}function lo(n){return-1!=Rg().indexOf(n)}function fv(n){return fv[" "](n),n}fv[" "]=function(){};var yv,gI=lo("Opera"),dc=lo("Trident")||lo("MSIE"),$h=lo("Edge"),pv=$h||dc,gv=lo("Gecko")&&!(-1!=Rg().toLowerCase().indexOf("webkit")&&!lo("Edge"))&&!(lo("Trident")||lo("MSIE"))&&!lo("Edge"),mI=-1!=Rg().toLowerCase().indexOf("webkit")&&!lo("Edge");function mv(){var n=sn.document;return n?n.documentMode:void 0}e:{var _v="",Hh=function(){var n=Rg();return gv?/rv:([^\);]+)(\)|;)/.exec(n):$h?/Edge\/([\d\.]+)/.exec(n):dc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):mI?/WebKit\/(\S+)/.exec(n):gI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(Hh&&(_v=Hh?Hh[1]:""),dc){var Bl=mv();if(null!=Bl&&Bl>parseFloat(_v)){yv=String(Bl);break e}}yv=_v}var yI=sn.document&&dc&&(mv()||parseInt(yv,10))||void 0;function jl(n,e){if(Hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(gv){e:{try{fv(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_I[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&jl.$.h.call(this)}}nr(jl,Hi);var _I={2:"touch",3:"pen",4:"mouse"};jl.prototype.h=function(){jl.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $l="closure_listenable_"+(1e6*Math.random()|0),vI=0;function wI(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++vI,this.fa=this.ia=!1}function kg(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function wv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function EI(n){const e={};for(const t in n)e[t]=n[t];return e}const CI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function II(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<CI.length;u++)t=CI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Fg(n){this.src=n,this.g={},this.h=0}function Ev(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=fI(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(kg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Cv(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Fg.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Cv(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new wI(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var Iv="closure_lm_"+(1e6*Math.random()|0),bv={};function bI(n,e,t,r,s){if(r&&r.once)return TI(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)bI(n,e[u],t,r,s);return null}return t=Vg(t),n&&n[$l]?n.O(e,t,Ng(r)?!!r.capture:!!r,s):DI(n,e,t,!1,r,s)}function DI(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=Ng(s)?!!s.capture:!!s,g=Lg(n);if(g||(n[Iv]=g=new Fg(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function AS(){const e=MI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)hv||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(SI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function TI(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)TI(n,e[u],t,r,s);return null}return t=Vg(t),n&&n[$l]?n.P(e,t,Ng(r)?!!r.capture:!!r,s):DI(n,e,t,!0,r,s)}function AI(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)AI(n,e[u],t,r,s);else r=Ng(r)?!!r.capture:!!r,t=Vg(t),n&&n[$l]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Cv(u=n.g[e],t,r,s))&&(kg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Lg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Cv(e,t,r,s)),(t=-1<n?e[n]:null)&&Dv(t))}function Dv(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[$l])Ev(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(SI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Lg(e))?(Ev(t,n),0==t.h&&(t.src=null,e[Iv]=null)):kg(n)}}}function SI(n){return n in bv?bv[n]:bv[n]="on"+n}function MI(n,e){if(n.fa)n=!0;else{e=new jl(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Dv(n),n=t.call(r,e)}return n}function Lg(n){return(n=n[Iv])instanceof Fg?n:null}var Ug="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vg(n){return"function"==typeof n?n:(n[Ug]||(n[Ug]=function(e){return n.handleEvent(e)}),n[Ug])}function di(){ya.call(this),this.i=new Fg(this),this.S=this,this.J=null}function Ei(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Hi(e,n);else if(e instanceof Hi)e.target=e.target||n;else{var s=e;II(e=new Hi(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=zh(l,r,!0,e)&&s}if(s=zh(l=e.g=n,r,!0,e)&&s,s=zh(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=zh(l=e.g=t[u],r,!1,e)&&s}function zh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var g=l.listener,_=l.la||l.src;l.ia&&Ev(n.i,l),s=!1!==g.call(_,r)&&s}}return s&&!r.defaultPrevented}nr(di,ya),di.prototype[$l]=!0,di.prototype.removeEventListener=function(n,e,t,r){AI(this,n,e,t,r)},di.prototype.N=function(){if(di.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)kg(t[r]);delete n.g[e],n.h--}}this.J=null},di.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},di.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Bg=sn.JSON.stringify;function OI(){var n=NI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var su=new class xI{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new SS,n=>n.reset());class SS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function MS(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Hl(n){sn.setTimeout(()=>{throw n},0)}let jg,hc=!1,NI=new class PI{constructor(){this.h=this.g=null}add(e,t){const r=su.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Tv=()=>{const n=sn.Promise.resolve(void 0);jg=()=>{n.then(RI)}};var RI=()=>{for(var n;n=OI();){try{n.h.call(n.g)}catch(t){Hl(t)}var e=su;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}hc=!1};function Av(n,e){di.call(this),this.h=n||1,this.g=e||sn,this.j=pr(this.qb,this),this.l=Date.now()}function ou(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Sv(n,e,t){if("function"==typeof n)t&&(n=pr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=pr(n.handleEvent,n)}return 2147483647<Number(e)?-1:sn.setTimeout(n,e||0)}function kI(n){n.g=Sv(()=>{n.g=null,n.i&&(n.i=!1,kI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}nr(Av,di),(mt=Av.prototype).ga=!1,mt.T=null,mt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ei(this,"tick"),this.ga&&(ou(this),this.start()))}},mt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.N=function(){Av.$.N.call(this),ou(this),delete this.g};class xS extends ya{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kI(this)}N(){super.N(),this.g&&(sn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $o(n){ya.call(this),this.h=n,this.g={}}nr($o,ya);var FI=[];function qh(n,e,t,r){Array.isArray(t)||(t&&(FI[0]=t.toString()),t=FI);for(var s=0;s<t.length;s++){var u=bI(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Zh(n){wv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Dv(e)},n),n.g={}}function Ri(){this.g=!0}function fc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function UI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return Bg(t)}catch{return e}}(n,t)+(r?" "+r:"")})}$o.prototype.N=function(){$o.$.N.call(this),Zh(this)},$o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ri.prototype.Ea=function(){this.g=!1},Ri.prototype.info=function(){};var au={},Mv=null;function Wh(){return Mv=Mv||new di}function VI(n){Hi.call(this,au.Ta,n)}function Kh(n){const e=Wh();Ei(e,new VI(e))}function BI(n,e){Hi.call(this,au.STAT_EVENT,n),this.stat=e}function hi(n){const e=Wh();Ei(e,new BI(e,n))}function jI(n,e){Hi.call(this,au.Ua,n),this.size=e}function Yh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return sn.setTimeout(function(){n()},e)}au.Ta="serverreachability",nr(VI,Hi),au.STAT_EVENT="statevent",nr(BI,Hi),au.Ua="timingevent",nr(jI,Hi);var $g={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qh={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Hg(){}function Ov(){}Hg.prototype.h=null;var Pv,Jh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pc(){Hi.call(this,"d")}function gc(){Hi.call(this,"c")}function Gg(){}function Xh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new $o(this),this.P=$I,this.V=new Av(n=pv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Nv}function Nv(){this.i=null,this.g="",this.h=!1}nr(pc,Hi),nr(gc,Hi),nr(Gg,Hg),Gg.prototype.g=function(){return new XMLHttpRequest},Gg.prototype.i=function(){return{}},Pv=new Gg;var $I=45e3,zg={},qg={};function Zg(n,e,t){n.L=1,n.v=lu(cu(e)),n.s=t,n.S=!0,HI(n,null)}function HI(n,e){n.G=Date.now(),Wg(n),n.A=cu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),QI(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Nv,n.g=Yv(n.l,t?e:null,!n.s),0<n.O&&(n.M=new xS(pr(n.Pa,n,n.g),n.O)),qh(n.U,n.g,"readystatechange",n.nb),e=n.I?EI(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Kh(),function y2(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),_=0;_<g.length;_++){var I=g[_].split("=");if(1<I.length){var D=I[0];I=I[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+I+"&":l+(D+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function GI(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function PS(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=_2(n,t),s==qg){4==e&&(n.o=4,hi(14),r=!1),fc(n.j,n.m,null,"[Incomplete Response]");break}if(s==zg){n.o=4,hi(15),fc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}fc(n.j,n.m,s,null),Rv(n,s)}GI(n)&&s!=qg&&s!=zg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,hi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),nm(e),e.M=!0,hi(11))):(fc(n.j,n.m,t,"[Invalid Chunked Response]"),mc(n),uu(n))}function _2(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?qg:(t=Number(e.substring(t,r)),isNaN(t)?zg:(r+=1)+t>e.length?qg:(e=e.slice(r,r+t),n.C=r+t,e))}function Wg(n){n.Y=Date.now()+n.P,NS(n,n.P)}function NS(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yh(pr(n.lb,n),e)}function ef(n){n.B&&(sn.clearTimeout(n.B),n.B=null)}function uu(n){0==n.l.H||n.J||hb(n.l,n)}function mc(n){ef(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,ou(n.V),Zh(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Rv(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Bv(t.i,n)))if(!n.K&&Bv(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;df(t),Wl(t)}Kv(t),hi(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=Yh(pr(t.ib,t),6e3));if(1>=XI(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Kl(t,11)}else if((n.K||t.g==n)&&df(t),!_a(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let I=s[e];if(t.V=I[0],I=I[1],2==t.H)if("c"==I[0]){t.K=I[1],t.pa=I[2];const D=I[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const S=I[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const $=I[5];null!=$&&"number"==typeof $&&0<$&&(t.L=r=1.5*$,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const we=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(we){var u=r.i;u.g||-1==we.indexOf("spdy")&&-1==we.indexOf("quic")&&-1==we.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(jv(u,u.h),u.h=null))}if(r.F){const Fe=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.Da=Fe,gr(r.I,r.F,Fe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=gb(r,r.J?r.pa:null,r.Y),l.K){eb(r.i,l);var g=l,_=r.L;_&&g.setTimeout(_),g.B&&(ef(g),Wg(g)),r.g=l}else db(r);0<t.j.length&&cf(t)}else"stop"!=I[0]&&"close"!=I[0]||Kl(t,7);else 3==t.H&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Kl(t,7):tm(t):"noop"!=I[0]&&t.h&&t.h.Aa(I),t.A=0)}Kh()}catch{}}function qI(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Bh(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function tf(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Bh(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function zI(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Bh(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(mt=Xh.prototype).setTimeout=function(n){this.P=n},mt.nb=function(n){n=n.target;const e=this.M;e&&3==wa(n)?e.l():this.Pa(n)},mt.Pa=function(n){try{if(n==this.g)e:{const D=wa(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||pv||this.g&&(this.h.h||this.g.ja()||Xg(this.g)))){this.J||4!=D||7==e||Kh(),ef(this);var t=this.g.da();this.ca=t;t:if(GI(this)){var r=Xg(this.g);n="";var s=r.length,u=4==wa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){mc(this),uu(this);var l="";break t}this.h.i=new sn.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function LI(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_a(g)){var I=g;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,hi(12),mc(this),uu(this);break e}fc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rv(this,t)}this.S?(PS(this,D,l),pv&&this.i&&3==D&&(qh(this.U,this.V,"tick",this.mb),this.V.start())):(fc(this.j,this.m,l,null),Rv(this,l)),4==D&&mc(this),this.i&&!this.J&&(4==D?hb(this.l,this):(this.i=!1,Wg(this)))}else(function qv(n){const e={};n=(n.g&&2<=wa(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(_a(n[r]))continue;var t=MS(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function TS(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,hi(12)):(this.o=0,hi(13)),mc(this),uu(this)}}}catch{}},mt.mb=function(){if(this.g){var n=wa(this.g),e=this.g.ja();this.C<e.length&&(ef(this),PS(this,n,e),this.i&&4!=n&&Wg(this))}},mt.cancel=function(){this.J=!0,mc(this)},mt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function OS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Kh(),hi(17)),mc(this),this.o=2,uu(this)):NS(this,this.Y-n)};var ZI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof yc){this.h=n.h,Kg(this,n.j),this.s=n.s,this.g=n.g,nf(this,n.m),this.l=n.l;var e=n.i,t=new sf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),WI(this,t),this.o=n.o}else n&&(e=String(n).match(ZI))?(this.h=!1,Kg(this,e[1]||"",!0),this.s=rf(e[2]||""),this.g=rf(e[3]||"",!0),nf(this,e[4]),this.l=rf(e[5]||"",!0),WI(this,e[6]||"",!0),this.o=rf(e[7]||"")):(this.h=!1,this.i=new sf(null,this.h))}function cu(n){return new yc(n)}function Kg(n,e,t){n.j=t?rf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function nf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function WI(n,e,t){e instanceof sf?(n.i=e,function Uv(n,e){e&&!n.j&&(va(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Lv(this,r),QI(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Gl(e,LS)),n.i=new sf(e,n.h))}function gr(n,e,t){n.i.set(e,t)}function lu(n){return gr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Gl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,kS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}yc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Gl(e,kv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Gl(e,kv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Gl(t,"/"==t.charAt(0)?KI:FS,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Gl(t,Fv)),n.join("")};var kv=/[#\/\?@]/g,FS=/[#\?:]/g,KI=/[#\?]/g,LS=/[#\?@]/g,Fv=/#/g;function sf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function va(n){n.g||(n.g=new Map,n.h=0,n.i&&function RS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Lv(n,e){va(n),e=zl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function YI(n,e){return va(n),e=zl(n,e),n.g.has(e)}function QI(n,e,t){Lv(n,e),0<t.length&&(n.i=null,n.g.set(zl(n,e),dv(t)),n.h+=t.length)}function zl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Vv(n){this.l=n||VS,n=sn.PerformanceNavigationTiming?0<(n=sn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(sn.g&&sn.g.Ka&&sn.g.Ka()&&sn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(mt=sf.prototype).add=function(n,e){va(this),this.i=null,n=zl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},mt.forEach=function(n,e){va(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},mt.ta=function(){va(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},mt.Z=function(n){va(this);let e=[];if("string"==typeof n)YI(this,n)&&(e=e.concat(this.g.get(zl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},mt.set=function(n,e){return va(this),this.i=null,YI(this,n=zl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},mt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var VS=10;function JI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function XI(n){return n.h?1:n.g?n.g.size:0}function Bv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function jv(n,e){n.g?n.g.add(e):n.h=e}function eb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function tb(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return dv(n.i)}Vv.prototype.cancel=function(){if(this.i=tb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var BS=class{stringify(n){return sn.JSON.stringify(n,void 0)}parse(n){return sn.JSON.parse(n,void 0)}};function nb(){this.g=new BS}function rb(n,e,t){const r=t||"";try{qI(n,function(s,u){let l=s;Ng(s)&&(l=Bg(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Yg(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function ql(n){this.l=n.fc||null,this.j=n.ob||!1}function Qg(n,e){di.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=$v,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nr(ql,Hg),ql.prototype.g=function(){return new Qg(this.l,this.j)},ql.prototype.i=function(n){return function(){return n}}({}),nr(Qg,di);var $v=0;function ib(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function af(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_c(n)}function _c(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(mt=Qg.prototype).open=function(n,e){if(this.readyState!=$v)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_c(this)},mt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||sn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,af(this)),this.readyState=$v},mt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_c(this)),this.g&&(this.readyState=3,_c(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof sn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ib(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},mt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?af(this):_c(this),3==this.readyState&&ib(this)}},mt.Za=function(n){this.g&&(this.response=this.responseText=n,af(this))},mt.Ya=function(n){this.g&&(this.response=n,af(this))},mt.ka=function(){this.g&&af(this)},mt.setRequestHeader=function(n,e){this.v.append(n,e)},mt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Qg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Hv=sn.JSON.parse;function Sr(n){di.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Jg,this.L=this.M=!1}nr(Sr,di);var Jg="",$S=/^https?$/i,HS=["POST","PUT"];function sb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,zv(n),uf(n)}function zv(n){n.F||(n.F=!0,Ei(n,"complete"),Ei(n,"error"))}function du(n){if(n.h&&typeof Pg<"u"&&(!n.C[1]||4!=wa(n)||2!=n.da()))if(n.v&&4==wa(n))Sv(n.La,0,n);else if(Ei(n,"readystatechange"),4==wa(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(ZI)[1]||null;!s&&sn.self&&sn.self.location&&(s=sn.self.location.protocol.slice(0,-1)),r=!$S.test(s?s.toLowerCase():"")}t=r}if(t)Ei(n,"complete"),Ei(n,"success");else{n.m=6;try{var u=2<wa(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",zv(n)}}finally{uf(n)}}}function uf(n,e){if(n.g){ob(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ei(n,"ready");try{t.onreadystatechange=r}catch{}}}function ob(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(sn.clearTimeout(n.A),n.A=null)}function wa(n){return n.g?n.g.readyState:0}function Xg(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Jg:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ab(n){let e="";return wv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function em(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=ab(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):gr(n,e,t))}function Zl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ub(n){this.Ga=0,this.j=[],this.l=new Ri,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zl("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zl("baseRetryDelayMs",5e3,n),this.hb=Zl("retryDelaySeedMs",1e4,n),this.eb=Zl("forwardChannelMaxRetries",2,n),this.xa=Zl("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Vv(n&&n.concurrentRequestLimit),this.Ja=new nb,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function tm(n){if(Zv(n),3==n.H){var e=n.W++,t=cu(n.I);if(gr(t,"SID",n.K),gr(t,"RID",e),gr(t,"TYPE","terminate"),lf(n,t),(e=new Xh(n,n.l,e)).L=2,e.v=lu(cu(t)),t=!1,sn.navigator&&sn.navigator.sendBeacon)try{t=sn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&sn.Image&&((new Image).src=e.v,t=!0),t||(e.g=Yv(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Wg(e)}pb(n)}function Wl(n){n.g&&(nm(n),n.g.cancel(),n.g=null)}function Zv(n){Wl(n),n.u&&(sn.clearTimeout(n.u),n.u=null),df(n),n.i.cancel(),n.m&&("number"==typeof n.m&&sn.clearTimeout(n.m),n.m=null)}function cf(n){if(!JI(n.i)&&!n.m){n.m=!0;var e=n.Na;jg||Tv(),hc||(jg(),hc=!0),NI.add(e,n),n.C=0}}function Wv(n,e){var t;t=e?e.m:n.W++;const r=cu(n.I);gr(r,"SID",n.K),gr(r,"RID",t),gr(r,"AID",n.V),lf(n,r),n.o&&n.s&&em(r,n.o,n.s),t=new Xh(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=lb(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),jv(n.i,t),Zg(t,r,e)}function lf(n,e){n.na&&wv(n.na,function(t,r){gr(e,r,t)}),n.h&&qI({},function(t,r){gr(e,r,t)})}function lb(n,e,t){t=Math.min(n.j.length,t);var r=n.h?pr(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let I=s[_].g;const D=s[_].map;if(I-=u,0>I)u=Math.max(0,s[_].g-100),g=!1;else try{rb(D,l,"req"+I+"_")}catch{r&&r(D)}}if(g){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function db(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;jg||Tv(),hc||(jg(),hc=!0),NI.add(e,n),n.A=0}}function Kv(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Yh(pr(n.Ma,n),fb(n,n.A)),n.A++,0))}function nm(n){null!=n.B&&(sn.clearTimeout(n.B),n.B=null)}function GS(n){n.g=new Xh(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=cu(n.wa);gr(e,"RID","rpc"),gr(e,"SID",n.K),gr(e,"AID",n.V),gr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&gr(e,"TO",n.qa),gr(e,"TYPE","xmlhttp"),lf(n,e),n.o&&n.s&&em(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=lu(cu(e)),t.s=null,t.S=!0,HI(t,n)}function df(n){null!=n.v&&(sn.clearTimeout(n.v),n.v=null)}function hb(n,e){var t=null;if(n.g==e){df(n),nm(n),n.g=null;var r=2}else{if(!Bv(n.i,e))return;t=e.F,eb(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;Ei(r=Wh(),new jI(r,t)),cf(n)}else db(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function cb(n,e){return!(XI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Yh(pr(n.Na,n,e),fb(n,n.C)),n.C++,0)))}(n,e)||2==r&&Kv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Kl(n,5);break;case 4:Kl(n,10);break;case 3:Kl(n,6);break;default:Kl(n,2)}}function fb(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Kl(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=pr(n.pb,n);t||(t=new yc("//www.google.com/images/cleardot.gif"),sn.location&&"http"==sn.location.protocol||Kg(t,"https"),lu(t)),function jS(n,e){const t=new Ri;if(sn.Image){const r=new Image;r.onload=ds(Yg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ds(Yg,t,r,"TestLoadImage: error",!1,e),r.onabort=ds(Yg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ds(Yg,t,r,"TestLoadImage: timeout",!1,e),sn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else hi(2);n.H=0,n.h&&n.h.za(e),pb(n),Zv(n)}function pb(n){if(n.H=0,n.ma=[],n.h){const e=tb(n.i);(0!=e.length||0!=n.j.length)&&(pI(n.ma,e),pI(n.ma,n.j),n.i.i.length=0,dv(n.j),n.j.length=0),n.h.ya()}}function gb(n,e,t){var r=t instanceof yc?cu(t):new yc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),nf(r,r.m);else{var s=sn.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new yc(null);r&&Kg(u,r),e&&(u.g=e),s&&nf(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&gr(r,t,e),gr(r,"VER",n.ra),lf(n,r),r}function Yv(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sr(t&&n.Ha&&!n.va?new ql({ob:!0}):n.va)).Oa(n.J),e}function Qv(){}function rm(){if(dc&&!(10<=Number(yI)))throw Error("Environmental error: no available transport.")}function As(n,e){di.call(this),this.g=new ub(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!_a(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_a(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Yl(this)}function mb(n){pc.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function yb(){gc.call(this),this.status=1}function Yl(n){this.g=n}function ho(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Jv(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function Bn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(mt=Sr.prototype).Oa=function(n){this.M=n},mt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Pv.g(),this.C=function xv(n){return n.h||(n.h=n.i())}(this.u?this.u:Pv),this.g.onreadystatechange=pr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void sb(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=sn.FormData&&n instanceof sn.FormData,!(0<=fI(HS,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ob(this),0<this.B&&((this.L=function Gv(n){return dc&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pr(this.ua,this)):this.A=Sv(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){sb(this,u)}},mt.ua=function(){typeof Pg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ei(this,"timeout"),this.abort(8))},mt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ei(this,"complete"),Ei(this,"abort"),uf(this))},mt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uf(this,!0)),Sr.$.N.call(this)},mt.La=function(){this.s||(this.G||this.v||this.l?du(this):this.kb())},mt.kb=function(){du(this)},mt.isActive=function(){return!!this.g},mt.da=function(){try{return 2<wa(this)?this.g.status:-1}catch{return-1}},mt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},mt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Hv(e)}},mt.Ia=function(){return this.m},mt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=ub.prototype).ra=8,mt.H=1,mt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Xh(this,this.l,n);let u=this.s;if(this.U&&(u?(u=EI(u),II(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=lb(this,s,e),gr(t=cu(this.I),"RID",n),gr(t,"CVER",22),this.F&&gr(t,"X-HTTP-Session-Id",this.F),lf(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(ab(u)))+"&"+e:this.o&&em(t,this.o,u)),jv(this.i,s),this.bb&&gr(t,"TYPE","init"),this.P?(gr(t,"$req",e),gr(t,"SID","null"),s.aa=!0,Zg(s,t,null)):Zg(s,t,e),this.H=2}}else 3==this.H&&(n?Wv(this,n):0==this.j.length||JI(this.i)||Wv(this))},mt.Ma=function(){if(this.u=null,GS(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Yh(pr(this.jb,this),n)}},mt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,hi(10),Wl(this),GS(this))},mt.ib=function(){null!=this.v&&(this.v=null,Wl(this),Kv(this),hi(19))},mt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),hi(2)):(this.l.info("Failed to ping google.com"),hi(1))},mt.isActive=function(){return!!this.h&&this.h.isActive(this)},(mt=Qv.prototype).Ba=function(){},mt.Aa=function(){},mt.za=function(){},mt.ya=function(){},mt.isActive=function(){return!0},mt.Va=function(){},rm.prototype.g=function(n,e){return new As(n,e)},nr(As,di),As.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;hi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=gb(n,null,n.Y),cf(n)},As.prototype.close=function(){tm(this.g)},As.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Bg(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&cf(e)},As.prototype.N=function(){this.g.h=null,delete this.j,tm(this.g),delete this.g,As.$.N.call(this)},nr(mb,pc),nr(yb,gc),nr(Yl,Qv),Yl.prototype.Ba=function(){Ei(this.g,"a")},Yl.prototype.Aa=function(n){Ei(this.g,new mb(n))},Yl.prototype.za=function(n){Ei(this.g,new yb)},Yl.prototype.ya=function(){Ei(this.g,"b")},nr(ho,function zS(){this.blockSize=-1}),ho.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ho.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)Jv(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){Jv(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){Jv(this,r),s=0;break}}this.h=s,this.i+=e},ho.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var _b={};function im(n){return-128<=n&&128>n?function DS(n,e){var t=_b;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Bn([0|e],0>e?-1:0)}):new Bn([0|n],0>n?-1:0)}function fo(n){if(isNaN(n)||!isFinite(n))return vc;if(0>n)return ki(fo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=sm;return new Bn(e,0)}var sm=4294967296,vc=im(0),e0=im(1),qS=im(16777216);function hu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ss(n){return-1==n.h}function ki(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Bn(t,~n.h).add(e0)}function hf(n,e){return n.add(ki(e))}function om(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ff(n,e){this.g=n,this.h=e}function fu(n,e){if(hu(e))throw Error("division by zero");if(hu(n))return new ff(vc,vc);if(Ss(n))return e=fu(ki(n),e),new ff(ki(e.g),ki(e.h));if(Ss(e))return e=fu(n,ki(e)),new ff(ki(e.g),e.h);if(30<n.g.length){if(Ss(n)||Ss(e))throw Error("slowDivide_ only works with positive integers.");for(var t=e0,r=e;0>=r.X(n);)t=vb(t),r=vb(r);var s=pu(t,1),u=pu(r,1);for(r=pu(r,2),t=pu(t,2);!hu(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=pu(r,1),t=pu(t,1)}return e=hf(n,s.R(e)),new ff(s,e)}for(s=vc;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=fo(t)).R(e);Ss(l)||0<l.X(n);)l=(u=fo(t-=r)).R(e);hu(u)&&(u=e0),s=s.add(u),n=hf(n,l)}return new ff(s,n)}function vb(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Bn(t,n.h)}function pu(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Bn(s,n.h)}(mt=Bn.prototype).ea=function(){if(Ss(this))return-ki(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:sm+r)*e,e*=sm}return n},mt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(hu(this))return"0";if(Ss(this))return"-"+ki(this).toString(n);for(var e=fo(Math.pow(n,6)),t=this,r="";;){var s=fu(t,e).g,u=((0<(t=hf(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(hu(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},mt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},mt.X=function(n){return Ss(n=hf(this,n))?-1:hu(n)?0:1},mt.abs=function(){return Ss(this)?ki(this):this},mt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new Bn(t,-2147483648&t[t.length-1]?-1:0)},mt.R=function(n){if(hu(this)||hu(n))return vc;if(Ss(this))return Ss(n)?ki(this).R(ki(n)):ki(ki(this).R(n));if(Ss(n))return ki(this.R(ki(n)));if(0>this.X(qS)&&0>n.X(qS))return fo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),g=n.D(s)>>>16,_=65535&n.D(s);t[2*r+2*s]+=l*_,om(t,2*r+2*s),t[2*r+2*s+1]+=u*_,om(t,2*r+2*s+1),t[2*r+2*s+1]+=l*g,om(t,2*r+2*s+1),t[2*r+2*s+2]+=u*g,om(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Bn(t,0)},mt.gb=function(n){return fu(this,n).h},mt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Bn(t,this.h&n.h)},mt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Bn(t,this.h|n.h)},mt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Bn(t,this.h^n.h)},rm.prototype.createWebChannel=rm.prototype.g,As.prototype.send=As.prototype.u,As.prototype.open=As.prototype.m,As.prototype.close=As.prototype.close,$g.NO_ERROR=0,$g.TIMEOUT=8,$g.HTTP_ERROR=6,Qh.COMPLETE="complete",Ov.EventType=Jh,Jh.OPEN="a",Jh.CLOSE="b",Jh.ERROR="c",Jh.MESSAGE="d",di.prototype.listen=di.prototype.O,Sr.prototype.listenOnce=Sr.prototype.P,Sr.prototype.getLastError=Sr.prototype.Sa,Sr.prototype.getLastErrorCode=Sr.prototype.Ia,Sr.prototype.getStatus=Sr.prototype.da,Sr.prototype.getResponseJson=Sr.prototype.Wa,Sr.prototype.getResponseText=Sr.prototype.ja,Sr.prototype.send=Sr.prototype.ha,Sr.prototype.setWithCredentials=Sr.prototype.Oa,ho.prototype.digest=ho.prototype.l,ho.prototype.reset=ho.prototype.reset,ho.prototype.update=ho.prototype.j,Bn.prototype.add=Bn.prototype.add,Bn.prototype.multiply=Bn.prototype.R,Bn.prototype.modulo=Bn.prototype.gb,Bn.prototype.compare=Bn.prototype.X,Bn.prototype.toNumber=Bn.prototype.ea,Bn.prototype.toString=Bn.prototype.toString,Bn.prototype.getBits=Bn.prototype.D,Bn.fromNumber=fo,Bn.fromString=function Xv(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ki(Xv(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=fo(Math.pow(e,8)),r=vc,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=fo(Math.pow(e,u)),r=r.R(u).add(fo(l))):r=(r=r.R(t)).add(fo(l))}return r};var ZS=co.createWebChannelTransport=function(){return new rm},v2=co.getStatEventTarget=function(){return Wh()},t0=co.ErrorCode=$g,w2=co.EventType=Qh,pf=co.Event=au,wb=co.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},WS=co.FetchXmlHttpFactory=ql,am=co.WebChannel=Ov,um=co.XhrIo=Sr,Eb=co.Md5=ho,Ql=co.Integer=Bn;const n0="@firebase/firestore";class Gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let Jl="9.23.0";const gu=new ma.Yd("@firebase/firestore");function cm(){return gu.logLevel}function We(n,...e){if(gu.logLevel<=ma.in.DEBUG){const t=e.map(r0);gu.debug(`Firestore (${Jl}): ${n}`,...t)}}function Lr(n,...e){if(gu.logLevel<=ma.in.ERROR){const t=e.map(r0);gu.error(`Firestore (${Jl}): ${n}`,...t)}}function Ji(n,...e){if(gu.logLevel<=ma.in.WARN){const t=e.map(r0);gu.warn(`Firestore (${Jl}): ${n}`,...t)}}function r0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ct(n="Unexpected state"){const e=`FIRESTORE (${Jl}) INTERNAL ASSERTION FAILED: `+n;throw Lr(e),new Error(e)}function At(n,e){n||Ct()}function ct(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends Vn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ei{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class s0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gr.UNAUTHENTICATED))}shutdown(){}}class QS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class o0{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=I=>this.i!==s?(s=this.i,t(I)):Promise.resolve();let l=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ei,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const I=l;e.enqueueRetryable((0,fe.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},_=I=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(I=>_(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?_(I):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ei)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new s0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new Gr(e)}}class a0{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Ib{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new a0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u0{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,We("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.T=t.token,new lm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function JS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class bb{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=JS(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function tn(n,e){return n<e?-1:n>e?1:0}function wc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function dm(n){return n+"\0"}class mr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new je(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mr.fromMillis(Date.now())}static fromDate(e){return mr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new mr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tn(this.nanoseconds,e.nanoseconds):tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new mr(0,0))}static max(){return new Mt(new mr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xl{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ct(),void 0===r?r=e.length-t:r>e.length-t&&Ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Xl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rn extends Xl{construct(e,t,r){return new Rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Rn(t)}static emptyPath(){return new Rn([])}}const XS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends Xl{construct(e,t,r){return new Mr(e,t,r)}static isValidIdentifier(e){return XS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new je(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new je(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new je(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===g?(l=!l,s++):"."!==g||l?(r+=g,s++):(u(),s++)}if(u(),l)throw new je(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(t)}static emptyPath(){return new Mr([])}}class ut{constructor(e){this.path=e}static fromPath(e){return new ut(Rn.fromString(e))}static fromName(e){return new ut(Rn.fromString(e).popFirst(5))}static empty(){return new ut(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new Rn(e.slice()))}}class hm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function fm(n){return n.fields.find(e=>2===e.kind)}function mu(n){return n.fields.filter(e=>2!==e.kind)}hm.UNKNOWN_ID=-1;class Ea{constructor(e,t){this.fieldPath=e,this.kind=t}}class gf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gf(0,hs.min())}}function tM(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Mt.fromTimestamp(1e9===r?new mr(t+1,0):new mr(t,r));return new hs(s,ut.empty(),e)}function nM(n){return new hs(n.readTime,n.key,-1)}class hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hs(Mt.min(),ut.empty(),-1)}static max(){return new hs(Mt.max(),ut.empty(),-1)}}function mf(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ut.comparator(n.documentKey,e.documentKey),0!==t?t:tn(n.largestBatchId,e.largestBatchId))}const rM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ec(n){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,fe.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==rM)throw n;We("LocalStore","Unexpectedly lost primary lease")}),Cc.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let s=0,u=0,l=!1;e.forEach(g=>{++s,g.next(()=>{++u,l&&u===s&&t()},_=>r(_))}),l=!0,u===s&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(s=>s?le.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new le((r,s)=>{const u=e.length,l=new Array(u);let g=0;for(let _=0;_<u;_++){const I=_;t(e[I]).next(D=>{l[I]=D,++g,g===u&&r(l)},D=>s(D))}})}static doWhile(e,t){return new le((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class ed{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ei,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new yf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=l0(r.target.error);this.v.reject(new yf(e,s))}}static open(e,t,r,s){try{return new ed(t,e.transaction(s,r))}catch(u){throw new yf(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(We("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sM(t)}}class po{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===po.S((0,Vn.z$)())&&Lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return We("SimpleDb","Removing database:",e),Ca(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Vn.hl)())return!1;if(po.C())return!0;const e=(0,Vn.z$)(),t=po.S(e),r=0<t&&t<10,s=po.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,fe.Z)(function*(){return t.db||(We("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new yf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;s("VersionError"===g.name?new je(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new je(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new yf(e,g))},u.onupgradeneeded=l=>{We("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{We("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,fe.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.$(e);const _=ed.open(u.db,e,l?"readonly":"readwrite",r),I=s(_).next(D=>(_.P(),D)).catch(D=>(_.abort(D),le.reject(D))).toPromise();return I.catch(()=>{}),yield _.R,I}catch(_){const I=_,D="FirebaseError"!==I.name&&g<3;if(We("SimpleDb","Transaction failed with error:",I.message,"Retrying:",D),u.close(),!D)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Db{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Ca(this.L.delete())}}class yf extends je{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yu(n){return"IndexedDbTransactionError"===n.name}class sM{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(We("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(We("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ca(r)}add(e){return We("SimpleDb","ADD",this.store.name,e,e),Ca(this.store.add(e))}get(e){return Ca(this.store.get(e)).next(t=>(void 0===t&&(t=null),We("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return We("SimpleDb","DELETE",this.store.name,e),Ca(this.store.delete(e))}count(){return We("SimpleDb","COUNT",this.store.name),Ca(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new le((u,l)=>{s.onerror=g=>{l(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){We("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new le((r,s)=>{t.onerror=u=>{const l=l0(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}W(e,t){const r=[];return new le((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void s();const _=new Db(g),I=t(g.primaryKey,g.value,_);if(I instanceof le){const D=I.catch(S=>(_.done(),le.reject(S)));r.push(D)}_.isDone?s():null===_.K?g.continue():g.continue(_.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ca(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=l0(r.target.error);t(s)}})}let c0=!1;function l0(n){const e=po.S((0,Vn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return c0||(c0=!0,setTimeout(()=>{throw r},0)),r}}return n}class pm{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;We("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,fe.Z)(function*(){t.task=null;try{We("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){yu(r)?We("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ec(r)}yield t.et(6e4)}))}}class d0{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,fe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return le.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return We("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(g=>{s-=g,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(g=>(We("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=nM(u);mf(l,r)>0&&(r=l)}),new hs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Gs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function td(n){return null==n}function _f(n){return 0===n&&1/n==-1/0}function h0(n){return"number"==typeof n&&Number.isInteger(n)&&!_f(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function zr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=f0(e)),e=oM(n.get(t),e);return f0(e)}function oM(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function f0(n){return n+"\x01\x01"}function zs(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&Ct(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let _;0===s.length?_=g:(s+=g,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:Ct()}u=l+2}return new Rn(r)}const aM=["userId","batchId"];function gm(n,e){return[n,zr(e)]}function uM(n,e,t){return[n,zr(e),t]}const cM={},lM=["prefixPath","collectionGroup","readTime","documentId"],dM=["prefixPath","collectionGroup","documentId"],Tb=["collectionGroup","readTime","prefixPath","documentId"],Ab=["canonicalId","targetId"],hM=["targetId","path"],Sb=["path","targetId"],Mb=["collectionId","parent"],fM=["indexId","uid"],pM=["uid","sequenceNumber"],xb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gM=["indexId","uid","orderedDocumentKey"],Ob=["userId","collectionPath","documentId"],Pb=["userId","collectionPath","largestBatchId"],Nb=["userId","collectionGroup","largestBatchId"],p0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mM=[...p0,"documentOverlays"],Rb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yM=Rb,kb=[...yM,"indexConfiguration","indexState","indexEntries"];class Fb extends iM{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Fi(n,e){const t=ct(n);return po.M(t.ht,e)}function _M(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ic(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class yr{constructor(e,t){this.comparator=e,this.root=t||Gi.EMPTY}insert(e,t){return new yr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new g0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new g0(this.root,e,this.comparator,!1)}getReverseIterator(){return new g0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new g0(this.root,e,this.comparator,!0)}}class g0{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gi{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Gi.RED,this.left=s??Gi.EMPTY,this.right=u??Gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Gi(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Gi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ct();const e=this.left.check();if(e!==this.right.check())throw Ct();return e+(this.isRed()?0:1)}}Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1,Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct()}get value(){throw Ct()}get color(){throw Ct()}get left(){throw Ct()}get right(){throw Ct()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Gi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Er{constructor(e){this.comparator=e,this.data=new yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new m0(this.data.getIterator())}getIteratorFrom(e){return new m0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Er)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Er(this.comparator);return t.data=e,t}}class m0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _u(n){return n.hasNext()?n.getNext():void 0}class es{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new es([])}unionWith(e){let t=new Er(Mr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new es(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Lb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lb("Invalid base64 string: "+s):s}}(e);return new fi(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new fi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const C2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bc(n){if(At(!!n),"string"==typeof n){let e=0;const t=C2.exec(n);if(At(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ur(n.seconds),nanos:Ur(n.nanos)}}function Ur(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ho(n){return"string"==typeof n?fi.fromBase64String(n):fi.fromUint8Array(n)}function ym(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _m(n){const e=n.mapValue.fields.__previous_value__;return ym(e)?_m(e):e}function vf(n){const e=bc(n.mapValue.fields.__local_write_time__.timestampValue);return new mr(e.seconds,e.nanos)}class I2{constructor(e,t,r,s,u,l,g,_,I){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=I}}class vu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}const qs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dc={nullValue:"NULL_VALUE"};function wu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ym(n)?4:jb(n)?9007199254740991:10:Ct()}function Go(n,e){if(n===e)return!0;const t=wu(n);if(t!==wu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vf(n).isEqual(vf(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=bc(r.timestampValue),l=bc(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ho(n.bytesValue).isEqual(Ho(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Ur(r.geoPointValue.latitude)===Ur(s.geoPointValue.latitude)&&Ur(r.geoPointValue.longitude)===Ur(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ur(r.integerValue)===Ur(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Ur(r.doubleValue),l=Ur(s.doubleValue);return u===l?_f(u)===_f(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return wc(n.arrayValue.values||[],e.arrayValue.values||[],Go);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(_M(u)!==_M(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!Go(u[g],l[g])))return!1;return!0}(n,e);default:return Ct()}var s}function wf(n,e){return void 0!==(n.values||[]).find(t=>Go(t,e))}function Eu(n,e){if(n===e)return 0;const t=wu(n),r=wu(e);if(t!==r)return tn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return tn(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=Ur(s.integerValue||s.doubleValue),g=Ur(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return Ub(n.timestampValue,e.timestampValue);case 4:return Ub(vf(n),vf(e));case 5:return tn(n.stringValue,e.stringValue);case 6:return function(s,u){const l=Ho(s),g=Ho(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),g=u.split("/");for(let _=0;_<l.length&&_<g.length;_++){const I=tn(l[_],g[_]);if(0!==I)return I}return tn(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=tn(Ur(s.latitude),Ur(u.latitude));return 0!==l?l:tn(Ur(s.longitude),Ur(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],g=u.values||[];for(let _=0;_<l.length&&_<g.length;++_){const I=Eu(l[_],g[_]);if(I)return I}return tn(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===qs.mapValue&&u===qs.mapValue)return 0;if(s===qs.mapValue)return 1;if(u===qs.mapValue)return-1;const l=s.fields||{},g=Object.keys(l),_=u.fields||{},I=Object.keys(_);g.sort(),I.sort();for(let D=0;D<g.length&&D<I.length;++D){const S=tn(g[D],I[D]);if(0!==S)return S;const $=Eu(l[g[D]],_[I[D]]);if(0!==$)return $}return tn(g.length,I.length)}(n.mapValue,e.mapValue);default:throw Ct()}}function Ub(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return tn(n,e);const t=bc(n),r=bc(e),s=tn(t.seconds,r.seconds);return 0!==s?s:tn(t.nanos,r.nanos)}function nd(n){return Ef(n)}function Ef(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=bc(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ho(n.bytesValue).toBase64():"referenceValue"in n?ut.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=Ef(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of s)l?l=!1:u+=",",u+=`${g}:${Ef(r.fields[g])}`;return u+"}"}(n.mapValue):Ct();var e}function Tc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function y0(n){return!!n&&"integerValue"in n}function Cf(n){return!!n&&"arrayValue"in n}function Vb(n){return!!n&&"nullValue"in n}function Bb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wm(n){return!!n&&"mapValue"in n}function If(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ic(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=If(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=If(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function $b(n){return"nullValue"in n?Dc:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tc(vu.empty(),ut.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ct()}function _0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tc(vu.empty(),ut.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?qs:Ct()}function Hb(n,e){const t=Eu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Gb(n,e){const t=Eu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ci{constructor(e){this.value=e}static empty(){return new Ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=If(t)}setAll(e){let t=Mr.emptyPath(),r={},s=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=g.popLast()}l?r[g.lastSegment()]=If(l):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());wm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Go(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];wm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ic(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Ci(If(this.value))}}function v0(n){const e=[];return Ic(n.fields,(t,r)=>{const s=new Mr([t]);if(wm(r)){const u=v0(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new es(e)}class Cr{constructor(e,t,r,s,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new Cr(e,0,Mt.min(),Mt.min(),Mt.min(),Ci.empty(),0)}static newFoundDocument(e,t,r,s){return new Cr(e,1,t,Mt.min(),r,s,0)}static newNoDocument(e,t){return new Cr(e,2,t,Mt.min(),Mt.min(),Ci.empty(),0)}static newUnknownDocument(e,t){return new Cr(e,3,t,Mt.min(),Mt.min(),Ci.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qr{constructor(e,t){this.position=e,this.inclusive=t}}function w0(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?ut.comparator(ut.fromName(l.referenceValue),t.key):Eu(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function E0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Go(n.position[t],e.position[t]))return!1;return!0}class rd{constructor(e,t="asc"){this.field=e,this.dir=t}}function zb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class qb{}class Dn extends qb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new wM(e,t,r):"array-contains"===t?new Jb(e,r):"in"===t?new Xb(e,r):"not-in"===t?new eD(e,r):"array-contains-any"===t?new b2(e,r):new Dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new EM(e,r):new Qb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Eu(t,this.value)):null!==t&&wu(this.value)===wu(t)&&this.matchesComparison(Eu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Pn extends qb{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Pn(e,t)}matches(e){return Ac(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ac(n){return"and"===n.op}function bf(n){return"or"===n.op}function Df(n){return Zb(n)&&Ac(n)}function Zb(n){for(const e of n.filters)if(e instanceof Pn)return!1;return!0}function Wb(n){if(n instanceof Dn)return n.field.canonicalString()+n.op.toString()+nd(n.value);if(Df(n))return n.filters.map(e=>Wb(e)).join(",");{const e=n.filters.map(t=>Wb(t)).join(",");return`${n.op}(${e})`}}function C0(n,e){return n instanceof Dn?(t=n,(r=e)instanceof Dn&&t.op===r.op&&t.field.isEqual(r.field)&&Go(t.value,r.value)):n instanceof Pn?function(t,r){return r instanceof Pn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&C0(u,r.filters[l]),!0)}(n,e):void Ct();var t,r}function Kb(n,e){const t=n.filters.concat(e);return Pn.create(t,n.op)}function Yb(n){return n instanceof Dn?`${(e=n).field.canonicalString()} ${e.op} ${nd(e.value)}`:n instanceof Pn?function(e){return e.op.toString()+" {"+e.getFilters().map(Yb).join(" ,")+"}"}(n):"Filter";var e}class wM extends Dn{constructor(e,t,r){super(e,t,r),this.key=ut.fromName(r.referenceValue)}matches(e){const t=ut.comparator(e.key,this.key);return this.matchesComparison(t)}}class EM extends Dn{constructor(e,t){super(e,"in",t),this.keys=CM(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qb extends Dn{constructor(e,t){super(e,"not-in",t),this.keys=CM(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function CM(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ut.fromName(r.referenceValue))}class Jb extends Dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cf(t)&&wf(t.arrayValue,this.value)}}class Xb extends Dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wf(this.value.arrayValue,t)}}class eD extends Dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(wf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wf(this.value.arrayValue,t)}}class b2 extends Dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wf(this.value.arrayValue,r))}}class I0{constructor(e,t=null,r=[],s=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=g,this.dt=null}}function Em(n,e=null,t=[],r=[],s=null,u=null,l=null){return new I0(n,e,t,r,s,u,l)}function Cu(n){const e=ct(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Wb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),td(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nd(r)).join(",")),e.dt=t}return e.dt}function Tf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!C0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!E0(n.startAt,e.startAt)&&E0(n.endAt,e.endAt)}function Af(n){return ut.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Sf(n,e){return n.filters.filter(t=>t instanceof Dn&&t.field.isEqual(e))}function Sc(n,e,t){let r=Dc,s=!0;for(const u of Sf(n,e)){let l=Dc,g=!0;switch(u.op){case"<":case"<=":l=$b(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=Dc}Hb({value:r,inclusive:s},{value:l,inclusive:g})<0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];Hb({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function Mf(n,e,t){let r=qs,s=!0;for(const u of Sf(n,e)){let l=qs,g=!0;switch(u.op){case">=":case">":l=_0(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=qs}Gb({value:r,inclusive:s},{value:l,inclusive:g})>0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];Gb({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class zo{constructor(e,t=null,r=[],s=[],u=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=_,this.wt=null,this._t=null}}function b0(n,e,t,r,s,u,l,g){return new zo(n,e,t,r,s,u,l,g)}function id(n){return new zo(n)}function tD(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function nD(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function xf(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function D0(n){return null!==n.collectionGroup}function Mc(n){const e=ct(n);if(null===e.wt){e.wt=[];const t=xf(e),r=nD(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new rd(t)),e.wt.push(new rd(Mr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new rd(Mr.keyField(),u))}}}return e.wt}function fs(n){const e=ct(n);if(!e._t)if("F"===e.limitType)e._t=Em(e.path,e.collectionGroup,Mc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Mc(e))t.push(new rd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new qr(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new qr(e.startAt.position,e.startAt.inclusive):null;e._t=Em(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function rD(n,e){e.getFirstInequalityField(),xf(n);const t=n.filters.concat([e]);return new zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function T0(n,e,t){return new zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sd(n,e){return Tf(fs(n),fs(e))&&n.limitType===e.limitType}function iD(n){return`${Cu(fs(n))}|lt:${n.limitType}`}function A0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Yb(r)).join(", ")}]`),td(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nd(r)).join(",")),`Target(${t})`}(fs(n))}; limitType=${n.limitType})`}function Of(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):ut.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of Mc(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const g=w0(s,u,l);return s.inclusive?g<=0:g<0}(t.startAt,Mc(t),r)||t.endAt&&!function(s,u,l){const g=w0(s,u,l);return s.inclusive?g>=0:g>0}(t.endAt,Mc(t),r)));var t,r}function IM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bM(n){return(e,t)=>{let r=!1;for(const s of Mc(n)){const u=D2(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function D2(n,e,t){const r=n.field.isKeyField()?ut.comparator(e.key,t.key):function(s,u,l){const g=u.data.field(s),_=l.data.field(s);return null!==g&&null!==_?Eu(g,_):Ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ct()}}class Iu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ic(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return vM(this.inner)}size(){return this.innerSize}}const T2=new yr(ut.comparator);function ps(){return T2}const Pf=new yr(ut.comparator);function Nf(...n){let e=Pf;for(const t of n)e=e.insert(t.key,t);return e}function sD(n){let e=Pf;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function go(){return od()}function bu(){return od()}function od(){return new Iu(n=>n.toString(),(n,e)=>n.isEqual(e))}const S0=new yr(ut.comparator),M0=new Er(ut.comparator);function gn(...n){let e=M0;for(const t of n)e=e.add(t);return e}const x0=new Er(tn);function Rf(){return x0}function kf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_f(e)?"-0":e}}function DM(n){return{integerValue:""+n}}function TM(n,e){return h0(e)?DM(e):kf(n,e)}class O0{constructor(){this._=void 0}}function oD(n,e,t){return n instanceof ad?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ym(s)&&(s=_m(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof xc?P0(n,e):n instanceof Du?N0(n,e):function(r,s){const u=aD(r,s),l=uD(u)+uD(r.gt);return y0(u)&&y0(r.gt)?DM(l):kf(r.serializer,l)}(n,e)}function AM(n,e,t){return n instanceof xc?P0(n,e):n instanceof Du?N0(n,e):t}function aD(n,e){return n instanceof ud?y0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ad extends O0{}class xc extends O0{constructor(e){super(),this.elements=e}}function P0(n,e){const t=R0(e);for(const r of n.elements)t.some(s=>Go(s,r))||t.push(r);return{arrayValue:{values:t}}}class Du extends O0{constructor(e){super(),this.elements=e}}function N0(n,e){let t=R0(e);for(const r of n.elements)t=t.filter(s=>!Go(s,r));return{arrayValue:{values:t}}}class ud extends O0{constructor(e,t){super(),this.serializer=e,this.gt=t}}function uD(n){return Ur(n.integerValue||n.doubleValue)}function R0(n){return Cf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Oc{constructor(e,t){this.field=e,this.transform=t}}class cD{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Im{}function SM(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Pc(n.key,cr.none()):new cd(n.key,n.data,cr.none());{const t=n.data,r=Ci.empty();let s=new Er(Mr.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new qo(n.key,r,new es(s.toArray()),cr.none())}}function S2(n,e,t){n instanceof cd?function(r,s,u){const l=r.value.clone(),g=dD(r.fieldTransforms,s,u.transformResults);l.setAll(g),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof qo?function(r,s,u){if(!Cm(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=dD(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(k0(r)),g.setAll(l),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ff(n,e,t,r){return n instanceof cd?function(s,u,l,g){if(!Cm(s.precondition,u))return l;const _=s.value.clone(),I=F0(s.fieldTransforms,g,u);return _.setAll(I),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof qo?function(s,u,l,g){if(!Cm(s.precondition,u))return l;const _=F0(s.fieldTransforms,g,u),I=u.data;return I.setAll(k0(s)),I.setAll(_),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,Cm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function MM(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=aD(r.transform,s||null);null!=u&&(null===t&&(t=Ci.empty()),t.set(r.field,u))}return t||null}function lD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&wc(t,r,(s,u)=>function A2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof xc&&r instanceof xc||t instanceof Du&&r instanceof Du?wc(t.elements,r.elements,Go):t instanceof ud&&r instanceof ud?Go(t.gt,r.gt):t instanceof ad&&r instanceof ad);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class cd extends Im{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qo extends Im{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function k0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function dD(n,e,t){const r=new Map;At(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,g=e.data.field(u.field);r.set(u.field,AM(l,g,t[s]))}return r}function F0(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,oD(u,l,e))}return r}class Pc extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hD extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class L0{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&S2(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ff(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ff(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=bu();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(s.key)?null:g;const _=SM(l,g);null!==_&&r.set(s.key,_),l.isValidDocument()||l.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gn())}isEqual(e){return this.batchId===e.batchId&&wc(this.mutations,e.mutations,(t,r)=>lD(t,r))&&wc(this.baseMutations,e.baseMutations,(t,r)=>lD(t,r))}}class Lf{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){At(e.mutations.length===r.length);let s=S0;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new Lf(e,t,r,s)}}class bm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xM{constructor(e,t){this.count=e,this.unchangedNames=t}}var xr,kn;function pD(n){switch(n){default:return Ct();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function U0(n){if(void 0===n)return Lr("GRPC error has no .code"),_e.UNKNOWN;switch(n){case xr.OK:return _e.OK;case xr.CANCELLED:return _e.CANCELLED;case xr.UNKNOWN:return _e.UNKNOWN;case xr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case xr.INTERNAL:return _e.INTERNAL;case xr.UNAVAILABLE:return _e.UNAVAILABLE;case xr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case xr.NOT_FOUND:return _e.NOT_FOUND;case xr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case xr.ABORTED:return _e.ABORTED;case xr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case xr.DATA_LOSS:return _e.DATA_LOSS;default:return Ct()}}(kn=xr||(xr={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";class Dm{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return V0}static getOrCreateInstance(){return null===V0&&(V0=new Dm),V0}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let V0=null;function gD(){return new TextEncoder}const M2=new Ql([4294967295,4294967295],0);function mD(n){const e=gD().encode(n),t=new Eb;return t.update(e),new Uint8Array(t.digest())}function OM(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ql([t,r],0),new Ql([s,u],0)]}class yD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Uf(`Invalid padding: ${t}`);if(r<0)throw new Uf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Uf(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Uf(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Ql.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(Ql.fromNumber(r)));return 1===s.compare(M2)&&(s=new Ql([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=mD(e),[r,s]=OM(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new yD(u,s,t);return r.forEach(g=>l.insert(g)),l}insert(e){if(0===this.It)return;const t=mD(e),[r,s]=OM(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Uf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vf{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Tm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Vf(Mt.min(),s,new yr(tn),ps(),gn())}}class Tm{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Tm(r,t,gn(),gn(),gn())}}class B0{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class PM{constructor(e,t){this.targetId=e,this.Vt=t}}class NM{constructor(e,t,r=fi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class RM{constructor(){this.St=0,this.Dt=LM(),this.Ct=fi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=gn(),t=gn(),r=gn();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ct()}}),new Tm(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=LM()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class kM{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ps(),this.zt=FM(),this.Wt=new yr(tn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:Ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(Af(l))if(0===s){const g=new ut(l.path);this.Yt(r,g,Cr.newNoDocument(g,Mt.min()))}else At(1===s);else{const g=this.ie(r);if(g!==s){const _=this.re(e,g);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Dm.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(I,D,S){var $,J,we,Fe,Le,ht;const Vt={localCacheCount:D,existenceFilterCount:S.count},vt=S.unchangedNames;return vt&&(Vt.bloomFilter={applied:0===I,hashCount:null!==($=vt?.hashCount)&&void 0!==$?$:0,bitmapLength:null!==(Fe=null===(we=null===(J=vt?.bits)||void 0===J?void 0:J.bitmap)||void 0===we?void 0:we.length)&&void 0!==Fe?Fe:0,padding:null!==(ht=null===(Le=vt?.bits)||void 0===Le?void 0:Le.padding)&&void 0!==ht?ht:0}),Vt}(_,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:g=0}=r;let _,I;try{_=Ho(u).toUint8Array()}catch(D){if(D instanceof Lb)return Ji("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{I=new yD(_,l,g)}catch(D){return Ji(D instanceof Uf?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===I.It?1:s!==t-this.oe(e.targetId,I)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),g=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const g=this.se(l);if(g){if(u.current&&Af(g.target)){const _=new ut(g.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,Cr.newNoDocument(_,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=gn();this.zt.forEach((u,l)=>{let g=!0;l.forEachWhile(_=>{const I=this.se(_);return!I||"TargetPurposeLimboResolution"===I.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new Vf(e,t,this.Wt,this.jt,r);return this.jt=ps(),this.zt=FM(),this.Wt=new yr(tn),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new RM,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Er(tn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||We("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new RM),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function FM(){return new yr(ut.comparator)}function LM(){return new yr(ut.comparator)}const x2={asc:"ASCENDING",desc:"DESCENDING"},O2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P2={and:"AND",or:"OR"};class UM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _D(n,e){return n.useProto3Json||td(e)?e:{value:e}}function i(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function a(n,e){return i(n,e.toTimestamp())}function c(n){return At(!!n),Mt.fromTimestamp(function(e){const t=bc(e);return new mr(t.seconds,t.nanos)}(n))}function h(n,e){return(t=n,new Rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function f(n){const e=Rn.fromString(n);return At(R2(e)),e}function y(n,e){return h(n.databaseId,e.path)}function v(n,e){const t=f(e);if(t.get(1)!==n.databaseId.projectId)throw new je(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ut(L(t))}function C(n,e){return h(n.databaseId,e)}function b(n){const e=f(n);return 4===e.length?Rn.emptyPath():L(e)}function A(n){return new Rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function L(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function W(n,e,t){return{name:y(n,e),fields:t.value.mapValue.fields}}function ie(n,e,t){const r=v(n,e.name),s=c(e.updateTime),u=e.createTime?c(e.createTime):Mt.min(),l=new Ci({mapValue:{fields:e.fields}}),g=Cr.newFoundDocument(r,s,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function at(n,e){let t;if(e instanceof cd)t={update:W(n,e.key,e.value)};else if(e instanceof Pc)t={delete:y(n,e.key)};else if(e instanceof qo)t={update:W(n,e.key,e.data),updateMask:KF(e.fieldMask)};else{if(!(e instanceof hD))return Ct();t={verify:y(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof ad)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof xc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Du)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ud)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw Ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:a(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ct()),t;var s}function St(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?cr.updateTime(c(s.updateTime)):void 0!==s.exists?cr.exists(s.exists):cr.none():cr.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let g=null;"setToServerValue"in l?(At("REQUEST_TIME"===l.setToServerValue),g=new ad):"appendMissingElements"in l?g=new xc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new Du(l.removeAllFromArray.values||[]):"increment"in l?g=new ud(u,l.increment):Ct();const _=Mr.fromServerFormat(l.fieldPath);return new Oc(_,g)}(n,s)):[];var s;if(e.update){const s=v(n,e.update.name),u=new Ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new es((e.updateMask.fieldPaths||[]).map(I=>Mr.fromServerFormat(I)));return new qo(s,u,l,t,r)}return new cd(s,u,t,r)}if(e.delete){const s=v(n,e.delete);return new Pc(s,t)}if(e.verify){const s=v(n,e.verify);return new hD(s,t)}return Ct()}function Qt(n,e){return{documents:[C(n,e.path)]}}function mn(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=C(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=C(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return N2(Pn.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(I=>{return{field:Tu((D=I).field),direction:ld(D.dir)};var D})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=_D(n,e.limit);var g,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Kn(n){let e=b(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){At(1===r);const D=t.from[0];D.allDescendants?s=D.collectionId:e=e.child(D.collectionId)}let u=[];t.where&&(u=function(D){const S=Zo(D);return S instanceof Pn&&Df(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new rd(Am((S=D).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let g=null;t.limit&&(g=function(D){let S;return S="object"==typeof D?D.value:D,td(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new qr((D=t.startAt).values||[],!!D.before));let I=null;return t.endAt&&(I=function(D){return new qr(D.values||[],!D.before)}(t.endAt)),b0(e,s,l,u,g,"F",_,I)}function Zo(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Am(e.unaryFilter.field);return Dn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Am(e.unaryFilter.field);return Dn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Am(e.unaryFilter.field);return Dn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Am(e.unaryFilter.field);return Dn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ct()}}(n):void 0!==n.fieldFilter?Dn.create(Am((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Pn.create(e.compositeFilter.filters.map(t=>Zo(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ct()}}(e.compositeFilter.op))}(n):Ct();var e}function ld(n){return x2[n]}function j0(n){return O2[n]}function VM(n){return P2[n]}function Tu(n){return{fieldPath:n.canonicalString()}}function Am(n){return Mr.fromServerFormat(n.fieldPath)}function N2(n){return n instanceof Dn?function(e){if("=="===e.op){if(Bb(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NAN"}};if(Vb(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Bb(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NOT_NAN"}};if(Vb(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tu(e.field),op:j0(e.op),value:e.value}}}(n):n instanceof Pn?function(e){const t=e.getFilters().map(r=>N2(r));return 1===t.length?t[0]:{compositeFilter:{op:VM(e.op),filters:t}}}(n):Ct()}function KF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function R2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Nc{constructor(e,t,r,s,u=Mt.min(),l=Mt.min(),g=fi.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Nc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class k2{constructor(e){this.fe=e}}function F2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:y(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:i(s,u.version.toTimestamp()),createTime:i(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bf(e.version)};else{if(!e.isUnknownDocument())return Ct();r.unknownDocument={path:t.path.toArray(),version:Bf(e.version)}}var s,u;return r}function vD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jf(n){const e=new mr(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function $f(n,e){const t=(e.baseMutations||[]).map(u=>St(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>St(n.fe,u)),s=mr.fromMillis(e.localWriteTimeMs);return new L0(e.batchId,s,t,r)}function $0(n){const e=jf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jf(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var s;return void 0!==n.query.documents?(At(1===(s=n.query).documents.length),r=fs(id(b(s.documents[0])))):r=fs(Kn(n.query)),new Nc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,fi.fromBase64String(n.resumeToken))}function L2(n,e){const t=Bf(e.snapshotVersion),r=Bf(e.lastLimboFreeSnapshotVersion);let s;s=Af(e.target)?Qt(n.fe,e.target):mn(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Cu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function BM(n){const e=Kn({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?T0(e,e.limit,"L"):e}function jM(n,e){return new bm(e.largestBatchId,St(n.fe,e.overlayMutation))}function U2(n,e){const t=e.path.lastSegment();return[n,zr(e.path.popLast()),t]}function V2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Bf(r.readTime),documentKey:zr(r.documentKey.path),largestBatchId:r.largestBatchId}}class QF{getBundleMetadata(e,t){return B2(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:jf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return B2(e).put({bundleId:(r=t).id,createTime:Bf(c(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return j2(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:BM(s.bundledQuery),readTime:jf(s.readTime)};var s})}saveNamedQuery(e,t){return j2(e).put({name:(r=t).name,readTime:Bf(c(r.readTime)),bundledQuery:r.bundledQuery});var r}}function B2(n){return Fi(n,"bundles")}function j2(n){return Fi(n,"namedQueries")}class wD{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new wD(e,t.uid||"")}getOverlay(e,t){return H0(e).get(U2(this.userId,t)).next(r=>r?jM(this.serializer,r):null)}getOverlays(e,t){const r=go();return le.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const g=new bm(t,l);s.push(this.we(e,g))}),le.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(zr(l.getCollectionPath())));const u=[];return s.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(H0(e).J("collectionPathOverlayIndex",g))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const s=go(),u=zr(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return H0(e).j("collectionPathOverlayIndex",l).next(g=>{for(const _ of g){const I=jM(this.serializer,_);s.set(I.getKey(),I)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=go();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return H0(e).X({index:"collectionGroupOverlayIndex",range:g},(_,I,D)=>{const S=jM(this.serializer,I);u.size()<s||S.largestBatchId===l?(u.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>u)}we(e,t){return H0(e).put(function(r,s,u){const[l,g,_]=U2(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:at(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function H0(n){return Fi(n,"documentOverlays")}class Hf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Ur(e.integerValue));else if("doubleValue"in e){const r=Ur(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),_f(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ho(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?jb(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ct()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),ut.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function JF(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function $2(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=JF(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Hf.Ve=new Hf;class XF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=$2(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=$2(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class eL{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class tL{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class G0{constructor(){this.je=new XF,this.ze=new eL(this.je),this.We=new tL(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Gf{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gf(this.indexId,this.documentKey,this.arrayValue,r)}}function dd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=H2(n.arrayValue,e.arrayValue),0!==t?t:(t=H2(n.directionalValue,e.directionalValue),0!==t?t:ut.comparator(n.documentKey,e.documentKey)))}function H2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nL{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){At(e.collectionGroup===this.collectionId);const t=fm(e);if(void 0!==t&&!this.en(t))return!1;const r=mu(e);let s=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const g=r[u];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[l++],g))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function G2(n){var e,t;if(At(n instanceof Dn||n instanceof Pn),n instanceof Dn){if(n instanceof Xb){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Dn.create(n.field,"==",u)))||[];return Pn.create(s,"or")}return n}const r=n.filters.map(s=>G2(s));return Pn.create(r,n.op)}function rL(n){if(0===n.getFilters().length)return[];const e=GM(G2(n));return At(z2(e)),$M(e)||HM(e)?[e]:e.getFilters()}function $M(n){return n instanceof Dn}function HM(n){return n instanceof Pn&&Df(n)}function z2(n){return $M(n)||HM(n)||function(e){if(e instanceof Pn&&bf(e)){for(const t of e.getFilters())if(!$M(t)&&!HM(t))return!1;return!0}return!1}(n)}function GM(n){if(At(n instanceof Dn||n instanceof Pn),n instanceof Dn)return n;if(1===n.filters.length)return GM(n.filters[0]);const e=n.filters.map(r=>GM(r));let t=Pn.create(e,n.op);return t=ED(t),z2(t)?t:(At(t instanceof Pn),At(Ac(t)),At(t.filters.length>1),t.filters.reduce((r,s)=>zM(r,s)))}function zM(n,e){let t;return At(n instanceof Dn||n instanceof Pn),At(e instanceof Dn||e instanceof Pn),t=n instanceof Dn?e instanceof Dn?Pn.create([n,e],"and"):q2(n,e):e instanceof Dn?q2(e,n):function(r,s){if(At(r.filters.length>0&&s.filters.length>0),Ac(r)&&Ac(s))return Kb(r,s.getFilters());const u=bf(r)?r:s,l=bf(r)?s:r,g=u.filters.map(_=>zM(_,l));return Pn.create(g,"or")}(n,e),ED(t)}function q2(n,e){if(Ac(e))return Kb(e,n.getFilters());{const t=e.filters.map(r=>zM(n,r));return Pn.create(t,"or")}}function ED(n){if(At(n instanceof Dn||n instanceof Pn),n instanceof Dn)return n;const e=n.getFilters();if(1===e.length)return ED(e[0]);if(Zb(n))return n;const t=e.map(s=>ED(s)),r=[];return t.forEach(s=>{s instanceof Dn?r.push(s):s instanceof Pn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:Pn.create(r,n.op)}class iL{constructor(){this.rn=new qM}addToCollectionParentIndex(e,t){return this.rn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(hs.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class qM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Er(Rn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Er(Rn.comparator)).toArray()}}const CD=new Uint8Array(0);class sL{constructor(e,t){this.user=e,this.databaseId=t,this.on=new qM,this.un=new Iu(r=>Cu(r),(r,s)=>Tf(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:zr(s)};return Z2(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[dm(t),""],!1,!0);return Z2(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(zs(l.parent))}return r})}addFieldIndex(e,t){const r=ID(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=q0(e);return u.next(g=>{l.put(V2(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=ID(e),s=q0(e),u=z0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=z0(e);let s=!0;const u=new Map;return le.forEach(this.cn(t),l=>this.an(e,l).next(g=>{s&&(s=!!g),u.set(l,g)})).next(()=>{if(s){let l=gn();const g=[];return le.forEach(u,(_,I)=>{var D;We("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(vt=>`${vt.fieldPath}:${vt.kind}`).join(",")}`} to execute ${Cu(t)}`);const S=function(vt,jt){const un=fm(jt);if(void 0===un)return null;for(const Mn of Sf(vt,un.fieldPath))switch(Mn.op){case"array-contains-any":return Mn.value.arrayValue.values||[];case"array-contains":return[Mn.value]}return null}(I,_),$=function(vt,jt){const un=new Map;for(const Mn of mu(jt))for(const rs of Sf(vt,Mn.fieldPath))switch(rs.op){case"==":case"in":un.set(Mn.fieldPath.canonicalString(),rs.value);break;case"not-in":case"!=":return un.set(Mn.fieldPath.canonicalString(),rs.value),Array.from(un.values())}return null}(I,_),J=function(vt,jt){const un=[];let Mn=!0;for(const rs of mu(jt)){const Dd=0===rs.kind?Sc(vt,rs.fieldPath,vt.startAt):Mf(vt,rs.fieldPath,vt.startAt);un.push(Dd.value),Mn&&(Mn=Dd.inclusive)}return new qr(un,Mn)}(I,_),we=function(vt,jt){const un=[];let Mn=!0;for(const rs of mu(jt)){const Dd=0===rs.kind?Mf(vt,rs.fieldPath,vt.endAt):Sc(vt,rs.fieldPath,vt.endAt);un.push(Dd.value),Mn&&(Mn=Dd.inclusive)}return new qr(un,Mn)}(I,_),Fe=this.hn(_,I,J),Le=this.hn(_,I,we),ht=this.ln(_,I,$),Vt=this.fn(_.indexId,S,Fe,J.inclusive,Le,we.inclusive,ht);return le.forEach(Vt,vt=>r.H(vt,t.limit).next(jt=>{jt.forEach(un=>{const Mn=ut.fromSegments(un.documentKey);l.has(Mn)||(l=l.add(Mn),g.push(Mn))})}))}).next(()=>g)}return le.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:rL(Pn.create(e.filters,"and")).map(r=>Em(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),I=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const $=t?this.dn(t[S/I]):CD,J=this.wn(e,$,r[S%I],s),we=this._n(e,$,u[S%I],l),Fe=g.map(Le=>this.wn(e,$,Le,!0));D.push(...this.createRange(J,we,Fe))}return D}wn(e,t,r,s){const u=new Gf(e,ut.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new Gf(e,ut.empty(),t,r);return s?u.Je():u}an(e,t){const r=new nL(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const g of u)r.tn(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return le.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let _=new Er(Mr.comparator),I=!1;for(const D of g.filters)for(const S of D.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?I=!0:_=_.add(S.field));for(const D of g.orderBy)D.field.isKeyField()||(_=_.add(D.field));return _.size+(I?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new G0;for(const s of mu(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);Hf.Ve._e(u,l)}return r.Qe()}dn(e){const t=new G0;return Hf.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new G0;return Hf.Ve._e(Tc(this.databaseId,t),r.He(function(s){const u=mu(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new G0);let u=0;for(const l of mu(e)){const g=r[u++];for(const _ of s)if(this.yn(t,l.fieldPath)&&Cf(g))s=this.pn(s,l,g);else{const I=_.He(l.kind);Hf.Ve._e(g,I)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of s){const _=new G0;_.seed(g.Qe()),Hf.Ve._e(l,_.He(t.kind)),u.push(_)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof Dn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ID(e),s=q0(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return le.forEach(u,g=>s.get([g.indexId,this.uid]).next(_=>{l.push(function(I,D){const S=D?new gf(D.sequenceNumber,new hs(jf(D.readTime),new ut(zs(D.documentKey)),D.largestBatchId)):gf.empty(),$=I.fields.map(([J,we])=>new Ea(Mr.fromServerFormat(J),we));return new hm(I.indexId,I.collectionGroup,$,S)}(g,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:tn(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=ID(e),u=q0(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>le.forEach(g,_=>u.put(V2(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?le.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),le.forEach(g,_=>this.En(e,s,_).next(I=>{const D=this.An(u,_);return I.isEqual(D)?le.resolve():this.vn(e,u,_,I,D)}))))})}Rn(e,t,r,s){return z0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return z0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=z0(e);let u=new Er(dd);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,g)=>{u=u.add(new Gf(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}An(e,t){let r=new Er(dd);const s=this.mn(t,e);if(null==s)return r;const u=fm(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Cf(l))for(const g of l.arrayValue.values||[])r=r.add(new Gf(t.indexId,e.key,this.dn(g),s))}else r=r.add(new Gf(t.indexId,e.key,CD,s));return r}vn(e,t,r,s,u){We("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,_,I,D,S){const $=g.getIterator(),J=_.getIterator();let we=_u($),Fe=_u(J);for(;we||Fe;){let Le=!1,ht=!1;if(we&&Fe){const Vt=I(we,Fe);Vt<0?ht=!0:Vt>0&&(Le=!0)}else null!=we?ht=!0:Le=!0;Le?(D(Fe),Fe=_u(J)):ht?(S(we),we=_u($)):(we=_u($),Fe=_u(J))}}(s,u,dd,g=>{l.push(this.Rn(e,t,r,g))},g=>{l.push(this.Pn(e,t,r,g))}),le.waitFor(l)}Tn(e){let t=1;return q0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>dd(l,g)).filter((l,g,_)=>!g||0!==dd(l,_[g-1]));const s=[];s.push(e);for(const l of r){const g=dd(l,e),_=dd(l,t);if(0===g)s[0]=e.Je();else if(g>0&&_<0)s.push(l),s.push(l.Je());else if(_>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,CD,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,CD,[]]))}return u}bn(e,t){return dd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(W2)}getMinOffset(e,t){return le.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||Ct())).next(W2)}}function Z2(n){return Fi(n,"collectionParents")}function z0(n){return Fi(n,"indexEntries")}function ID(n){return Fi(n,"indexConfiguration")}function q0(n){return Fi(n,"indexState")}function W2(n){At(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;mf(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new hs(e.readTime,e.documentKey,t)}const K2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ms{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ms(e,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Y2(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.X({range:l},(D,S,$)=>(g++,$.delete()));u.push(_.next(()=>{At(1===g)}));const I=[];for(const D of t.mutations){const S=uM(e,D.key.path,t.batchId);u.push(s.delete(S)),I.push(D.key)}return le.waitFor(u).next(()=>I)}function bD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ct();e=n.noDocument}return JSON.stringify(e).length}ms.DEFAULT_COLLECTION_PERCENTILE=10,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ms.DEFAULT=new ms(41943040,ms.DEFAULT_COLLECTION_PERCENTILE,ms.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ms.DISABLED=new ms(-1,0,0);class DD{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){At(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new DD(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hd(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Sm(e),l=hd(e);return l.add({}).next(g=>{At("number"==typeof g);const _=new L0(g,t,r,s),I=function($,J,we){const Fe=we.baseMutations.map(ht=>at($.fe,ht)),Le=we.mutations.map(ht=>at($.fe,ht));return{userId:J,batchId:we.batchId,localWriteTimeMs:we.localWriteTime.toMillis(),baseMutations:Fe,mutations:Le}}(this.serializer,this.userId,_),D=[];let S=new Er(($,J)=>tn($.canonicalString(),J.canonicalString()));for(const $ of s){const J=uM(this.userId,$.key.path,g);S=S.add($.key.path.popLast()),D.push(l.put(I)),D.push(u.put(J,cM))}return S.forEach($=>{D.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.Vn[g]=_.keys()}),le.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return hd(e).get(t).next(r=>r?(At(r.userId===this.userId),$f(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?le.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return hd(e).X({index:"userMutationsIndex",range:s},(l,g,_)=>{g.userId===this.userId&&(At(g.batchId>=r),u=$f(this.serializer,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hd(e).j("userMutationsIndex",t).next(r=>r.map(s=>$f(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=gm(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Sm(e).X({range:s},(l,g,_)=>{const[I,D,S]=l,$=zs(D);if(I===this.userId&&t.path.isEqual($))return hd(e).get(S).next(J=>{if(!J)throw Ct();At(J.userId===this.userId),u.push($f(this.serializer,J))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Er(tn);const s=[];return t.forEach(u=>{const l=gm(this.userId,u.path),g=IDBKeyRange.lowerBound(l),_=Sm(e).X({range:g},(I,D,S)=>{const[$,J,we]=I,Fe=zs(J);$===this.userId&&u.path.isEqual(Fe)?r=r.add(we):S.done()});s.push(_)}),le.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=gm(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new Er(tn);return Sm(e).X({range:l},(_,I,D)=>{const[S,$,J]=_,we=zs($);S===this.userId&&r.isPrefixOf(we)?we.length===s&&(g=g.add(J)):D.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(hd(e).get(u).next(l=>{if(null===l)throw Ct();At(l.userId===this.userId),r.push($f(this.serializer,l))}))}),le.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return Y2(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),le.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Sm(e).X({range:r},(u,l,g)=>{if(u[0]===this.userId){const _=zs(u[1]);s.push(_)}else g.done()}).next(()=>{At(0===s.length)})})}containsKey(e,t){return Q2(e,this.userId,t)}xn(e){return J2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Q2(n,e,t){const r=gm(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Sm(n).X({range:u,Y:!0},(g,_,I)=>{const[D,S,$]=g;D===e&&S===s&&(l=!0),I.done()}).next(()=>l)}function hd(n){return Fi(n,"mutations")}function Sm(n){return Fi(n,"documentMutations")}function J2(n){return Fi(n,"mutationQueues")}class zf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new zf(0)}static Mn(){return new zf(-1)}}class oL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new zf(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Mt.fromTimestamp(new mr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Mm(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Mm(e).X((l,g)=>{const _=$0(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>le.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Mm(e).X((r,s)=>{const u=$0(s);t(u)})}$n(e){return X2(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}On(e,t){return X2(e).put("targetGlobalKey",t)}Fn(e,t){return Mm(e).put(L2(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Cu(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Mm(e).X({range:s,index:"queryTargetsIndex"},(l,g,_)=>{const I=$0(g);Tf(t,I.target)&&(u=I,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=fd(e);return t.forEach(l=>{const g=zr(l.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,l))}),le.waitFor(s)}removeMatchingKeys(e,t,r){const s=fd(e);return le.forEach(t,u=>{const l=zr(u.path);return le.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=fd(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=fd(e);let u=gn();return s.X({range:r,Y:!0},(l,g,_)=>{const I=zs(l[1]),D=new ut(I);u=u.add(D)}).next(()=>u)}containsKey(e,t){const r=zr(t.path),s=IDBKeyRange.bound([r],[dm(r)],!1,!0);let u=0;return fd(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,g],_,I)=>{0!==l&&(u++,I.done())}).next(()=>u>0)}le(e,t){return Mm(e).get(t).next(r=>r?$0(r):null)}}function Mm(n){return Fi(n,"targets")}function X2(n){return Fi(n,"targetGlobal")}function fd(n){return Fi(n,"targetDocuments")}function eN([n,e],[t,r]){const s=tn(n,t);return 0===s?tn(e,r):s}class aL{constructor(e){this.Ln=e,this.buffer=new Er(eN),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;We("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,fe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){yu(r)?We("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ec(r)}yield t.Qn(3e5)}))}}class uL{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Gs.ct);const r=new aL(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(K2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K2):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,g,_,I;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(We("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),s=this.params.maximumSequenceNumbersToCollect):s=S,l=Date.now(),this.nthSequenceNumber(e,s))).next(S=>(r=S,g=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(I=Date.now(),cm()<=ma.in.DEBUG&&We("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${s} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${S} documents in `+(I-_)+`ms\nTotal Duration: ${I-D}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:S})))}}class cL{constructor(e,t){this.db=e,this.garbageCollector=function nN(n,e){return new uL(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return TD(e,r)}removeReference(e,t,r){return TD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return TD(e,t)}Xn(e,t){return function(r,s){let u=!1;return J2(r).Z(l=>Q2(r,l,s).next(g=>(g&&(u=!0),le.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,g)=>{if(g<=t){const _=this.Xn(e,l).next(I=>{if(!I)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Mt.min()),fd(e).delete([0,zr(l.path)])))});s.push(_)}}).next(()=>le.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return TD(e,t)}Yn(e,t){const r=fd(e);let s,u=Gs.ct;return r.X({index:"documentTargetsIndex"},([l,g],{path:_,sequenceNumber:I})=>{0===l?(u!==Gs.ct&&t(new ut(zs(s)),u),u=I,s=_):u=Gs.ct}).next(()=>{u!==Gs.ct&&t(new ut(zs(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function TD(n,e){return fd(n).put((r=n.currentSequenceNumber,{targetId:0,path:zr(e.path),sequenceNumber:r}));var r}class rN{constructor(){this.changes=new Iu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return qf(e).put(r)}removeEntry(e,t,r){return qf(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],vD(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Cr.newInvalidDocument(t);return qf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Z0(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Cr.newInvalidDocument(t)};return qf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Z0(t))},(s,u)=>{r={document:this.ts(t,u),size:bD(u)}}).next(()=>r)}getEntries(e,t){let r=ps();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=ps(),s=new yr(ut.comparator);return this.ns(e,t,(u,l)=>{const g=this.ts(u,l);r=r.insert(u,g),s=s.insert(u,bD(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return le.resolve();let s=new Er(aN);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(Z0(s.first()),Z0(s.last())),l=s.getIterator();let g=l.getNext();return qf(e).X({index:"documentKeyIndex",range:u},(_,I,D)=>{const S=ut.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;g&&aN(g,S)<0;)r(g,null),g=l.getNext();g&&g.isEqual(S)&&(r(g,I),g=l.hasNext()?l.getNext():null),g?D.G(Z0(g)):D.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),vD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qf(e).j(IDBKeyRange.bound(l,g,!0)).next(_=>{let I=ps();for(const D of _){const S=this.ts(ut.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);S.isFoundDocument()&&(Of(t,S)||s.has(S.key))&&(I=I.insert(S.key,S))}return I})}getAllFromCollectionGroup(e,t,r,s){let u=ps();const l=oN(t,r),g=oN(t,hs.max());return qf(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(_,I,D)=>{const S=this.ts(ut.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(S.key,S),u.size===s&&D.done()}).next(()=>u)}newChangeBuffer(e){return new dL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return sN(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}Zn(e,t){return sN(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function YF(n,e){let t;if(e.document)t=ie(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ut.fromSegments(e.noDocument.path),s=jf(e.noDocument.readTime);t=Cr.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ct();{const r=ut.fromSegments(e.unknownDocument.path),s=jf(e.unknownDocument.version);t=Cr.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new mr(r[0],r[1]);return Mt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return Cr.newInvalidDocument(e)}}function iN(n){return new lL(n)}class dL extends rN{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Iu(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Er((u,l)=>tn(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.us.get(u);if(t.push(this.os.removeEntry(e,u,g.readTime)),l.isValidDocument()){const _=F2(this.os.serializer,l);s=s.add(u.path.popLast());const I=bD(_);r+=I-g.size,t.push(this.os.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=F2(this.os.serializer,l.convertToNoDocument(Mt.min()));t.push(this.os.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function sN(n){return Fi(n,"remoteDocumentGlobal")}function qf(n){return Fi(n,"remoteDocumentsV14")}function Z0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oN(n,e){const t=e.documentKey.path.toArray();return[n,vD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aN(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=tn(t[u],r[u]),s)return s;return s=tn(t.length,r.length),s||(s=tn(t[t.length-2],r[r.length-2]),s||tn(t[t.length-1],r[r.length-1]))}class hL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&Ff(r.mutation,s,es.empty(),mr.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,gn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=gn()){const s=go();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=Nf();return u.forEach((g,_)=>{l=l.insert(g,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=go();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,gn()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,s){let u=ps();const l=od(),g=od();return t.forEach((_,I)=>{const D=r.get(I.key);s.has(I.key)&&(void 0===D||D.mutation instanceof qo)?u=u.insert(I.key,I):void 0!==D?(l.set(I.key,D.mutation.getFieldMask()),Ff(D.mutation,I,D.mutation.getFieldMask(),mr.now())):l.set(I.key,es.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((I,D)=>l.set(I,D)),t.forEach((I,D)=>{var S;return g.set(I,new hL(D,null!==(S=l.get(I))&&void 0!==S?S:null))}),g))}recalculateAndSaveOverlays(e,t){const r=od();let s=new yr((l,g)=>l-g),u=gn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(_=>{const I=t.get(_);if(null===I)return;let D=r.get(_)||es.empty();D=g.applyToLocalView(I,D),r.set(_,D);const S=(s.get(g.batchId)||gn()).add(_);s=s.insert(g.batchId,S)})}).next(()=>{const l=[],g=s.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),I=_.key,D=_.value,S=bu();D.forEach($=>{if(!u.has($)){const J=SM(t.get($),r.get($));null!==J&&S.set($,J),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,I,S))}return le.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ut.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):D0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):le.resolve(go());let g=-1,_=u;return l.next(I=>le.forEach(I,(D,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),u.get(D)?le.resolve():this.remoteDocumentCache.getEntry(e,D).next($=>{_=_.insert(D,$)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,_,I,gn())).next(D=>({batchId:g,changes:sD(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ut(t)).next(r=>{let s=Nf();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Nf();return this.indexManager.getCollectionParents(e,s).next(l=>le.forEach(l,g=>{const _=(I=t,D=g.child(s),new zo(D,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,D;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(I=>{I.forEach((D,S)=>{u=u.insert(D,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((g,_)=>{const I=_.getKey();null===u.get(I)&&(u=u.insert(I,Cr.newInvalidDocument(I)))});let l=Nf();return u.forEach((g,_)=>{const I=s.get(g);void 0!==I&&Ff(I.mutation,_,es.empty(),mr.now()),Of(t,_)&&(l=l.insert(g,_))}),l})}}class fL{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return le.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:c(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:BM(r.bundledQuery),readTime:c(r.readTime)}),le.resolve();var r}}class pL{constructor(){this.overlays=new yr(ut.comparator),this.ls=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=go();return le.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const s=go(),u=t.length+1,l=new ut(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const _=g.getNext().value,I=_.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return le.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new yr((I,D)=>I-D);const l=this.overlays.getIterator();for(;l.hasNext();){const I=l.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let D=u.get(I.largestBatchId);null===D&&(D=go(),u=u.insert(I.largestBatchId,D)),D.set(I.getKey(),I)}}const g=go(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((I,D)=>g.set(I,D)),!(g.size()>=s)););return le.resolve(g)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new bm(t,r));let u=this.ls.get(t);void 0===u&&(u=gn(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class ZM{constructor(){this.fs=new Er(zi.ds),this.ws=new Er(zi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new zi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new zi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new ut(new Rn([])),r=new zi(t,e),s=new zi(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new ut(new Rn([])),r=new zi(t,e),s=new zi(t,e+1);let u=gn();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new zi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class zi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return ut.comparator(e.key,t.key)||tn(e.As,t.As)}static _s(e,t){return tn(e.As,t.As)||ut.comparator(e.key,t.key)}}class gL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Er(zi.ds)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new L0(u,t,r,s);this.mutationQueue.push(l);for(const g of s)this.Rs=this.Rs.add(new zi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return le.resolve(l)}lookupMutationBatch(e,t){return le.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new zi(t,0),s=new zi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const g=this.Ps(l.As);u.push(g)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Er(tn);return t.forEach(s=>{const u=new zi(s,0),l=new zi(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],g=>{r=r.add(g.As)})}),le.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;ut.isDocumentKey(u)||(u=u.child(""));const l=new zi(new ut(u),0);let g=new Er(tn);return this.Rs.forEachWhile(_=>{const I=_.key.path;return!!r.isPrefixOf(I)&&(I.length===s&&(g=g.add(_.As)),!0)},l),le.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){At(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return le.forEach(t.mutations,s=>{const u=new zi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new zi(t,0),s=this.Rs.firstAfterOrEqual(r);return le.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return le.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mL{constructor(e){this.Ds=e,this.docs=new yr(ut.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Cr.newInvalidDocument(t))}getEntries(e,t){let r=ps();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Cr.newInvalidDocument(s))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=ps();const l=t.path,g=new ut(l.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:I,value:{document:D}}=_.getNext();if(!l.isPrefixOf(I.path))break;I.path.length>l.length+1||mf(nM(D),r)<=0||(s.has(D.key)||Of(t,D))&&(u=u.insert(D.key,D.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,t,r,s){Ct()}Cs(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yL(this)}getSize(e){return le.resolve(this.size)}}class yL extends rN{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class _L{constructor(e){this.persistence=e,this.xs=new Iu(t=>Cu(t),Tf),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ZM,this.targetCount=0,this.Ms=zf.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),le.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new zf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Fn(t),le.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),le.waitFor(u).next(()=>s)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.ks.containsKey(t))}}class WM{constructor(e,t){this.$s={},this.overlays={},this.Os=new Gs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new _L(this),this.indexManager=new iL,this.remoteDocumentCache=new mL(r=>this.referenceDelegate.Ls(r)),this.serializer=new k2(t),this.qs=new fL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new gL(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){We("MemoryPersistence","Starting transaction:",e);const s=new vL(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return le.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class vL extends iM{constructor(e){super(),this.currentSequenceNumber=e}}class AD{constructor(e){this.persistence=e,this.Qs=new ZM,this.js=null}static zs(e){return new AD(e)}get Ws(){if(this.js)return this.js;throw Ct()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ws,r=>{const s=ut.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,Mt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return le.or([()=>le.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class wL{constructor(e){this.serializer=e}O(e,t,r,s){const u=new ed("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aM,{unique:!0}),g.createObjectStore("documentMutations"),cN(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=le.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),cN(e)),l=l.next(()=>function(g){const _=g.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",I)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store("mutations").j().next(I=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aM,{unique:!0});const D=_.store("mutations"),S=I.map($=>D.put($));return le.waitFor(S)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:Ob});_.createIndex("collectionPathOverlayIndex",Pb,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Nb,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:lM});_.createIndex("documentKeyIndex",dM),_.createIndex("collectionGroupIndex",Tb)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:fM}).createIndex("sequenceNumberIndex",pM,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:xb}).createIndex("documentKeyIndex",gM,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=bD(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>le.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(g=>le.forEach(g,_=>{At(_.userId===u.userId);const I=$f(this.serializer,_);return Y2(e,u.userId,I).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,g)=>{const _=new Rn(l),I=[0,zr(_)];u.push(t.get(I).next(D=>D?le.resolve():t.put({targetId:0,path:zr(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Mb});const r=t.store("collectionParents"),s=new qM,u=l=>{if(s.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:zr(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,g)=>{const _=new Rn(l);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,g,_],I)=>{const D=zs(g);return u(D.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=$0(s),l=L2(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const g=t.store("remoteDocumentsV14"),_=(I=l,I.document?new ut(Rn.fromString(I.document.name).popFirst(5)):I.noDocument?ut.fromSegments(I.noDocument.path):I.unknownDocument?ut.fromSegments(I.unknownDocument.path):Ct()).path.toArray();var I;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(g.put(D))}).next(()=>le.waitFor(s))}si(e,t){const r=t.store("mutations"),s=iN(this.serializer),u=new WM(AD.zs,this.serializer.fe);return r.j().next(l=>{const g=new Map;return l.forEach(_=>{var I;let D=null!==(I=g.get(_.userId))&&void 0!==I?I:gn();$f(this.serializer,_).keys().forEach(S=>D=D.add(S)),g.set(_.userId,D)}),le.forEach(g,(_,I)=>{const D=new Gr(I),S=wD.de(this.serializer,D),$=u.getIndexManager(D),J=DD.de(D,this.serializer,$,u.referenceDelegate);return new uN(s,J,S,$).recalculateAndSaveOverlaysForDocumentKeys(new Fb(t,Gs.ct),_).next()})})}}function cN(n){n.createObjectStore("targetDocuments",{keyPath:hM}).createIndex("documentTargetsIndex",Sb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ab,{unique:!0}),n.createObjectStore("targetGlobal")}const KM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class YM{constructor(e,t,r,s,u,l,g,_,I,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=g,this.ri=I,this.oi=D,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=$=>Promise.resolve(),!YM.D())throw new je(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cL(this,s),this.di=t+"main",this.serializer=new k2(_),this.wi=new po(this.di,this.ui,new wL(this.serializer)),this.Bs=new oL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iN(this.serializer),this.qs=new QF,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===D&&Lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new je(_e.FAILED_PRECONDITION,KM);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Gs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,fe.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>MD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(yu(e))return We("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return We("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return W0(e).get("owner").next(t=>le.resolve(this.Ri(t)))}Pi(e){return MD(e).delete(this.clientId)}bi(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Fi(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),g=u.filter(_=>-1===l.indexOf(_));return le.forEach(g,_=>s.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?le.resolve(!0):W0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new je(_e.FAILED_PRECONDITION,KM);return!1}}return!(!this.networkEnabled||!this.inForeground)||MD(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&We("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Fb(t,Gs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>MD(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return DD.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sL(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return wD.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){We("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?kb:14===l?yM:13===l?Rb:12===l?mM:11===l?p0:void Ct();var l;let g;return this.wi.runTransaction(e,s,u,_=>(g=new Fb(_,this.Os?this.Os.next():Gs.ct),"readwrite-primary"===t?this.Ti(g).next(I=>!!I||this.Ei(g)).next(I=>{if(!I)throw Lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new je(_e.FAILED_PRECONDITION,rM);return r(g)}).next(I=>this.vi(g).next(()=>I)):this.Oi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Oi(e){return W0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new je(_e.FAILED_PRECONDITION,KM)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return W0(e).put("owner",t)}static D(){return po.D()}Ai(e){const t=W0(e);return t.get("owner").next(r=>this.Ri(r)?(We("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Vn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return We("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Lr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function W0(n){return Fi(n,"owner")}function MD(n){return Fi(n,"clientMetadata")}function QM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class JM{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=gn(),s=gn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new JM(e,t.fromCache,r,s)}}class lN{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(tD(t))return le.resolve(null);let r=fs(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=T0(t,null,"F"),r=fs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=gn(...u);return this.Ui.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const I=this.ji(t,g);return this.zi(t,I,l,_.readTime)?this.Ki(e,T0(t,null,"F")):this.Wi(e,I,t,_)}))})))}Gi(e,t,r,s){return tD(t)||s.isEqual(Mt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(cm()<=ma.in.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),A0(t)),this.Wi(e,l,t,tM(s,-1)))})}ji(e,t){let r=new Er(bM(e));return t.forEach((s,u)=>{Of(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return cm()<=ma.in.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",A0(t)),this.Ui.getDocumentsMatchingQuery(e,t,hs.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class EL{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new yr(tn),this.Yi=new Iu(u=>Cu(u),Tf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uN(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function dN(n,e,t,r){return new EL(n,e,t,r)}function hN(n,e){return XM.apply(this,arguments)}function XM(){return XM=(0,fe.Z)(function*(n,e){const t=ct(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let _=gn();for(const I of s){l.push(I.batchId);for(const D of I.mutations)_=_.add(D.key)}for(const I of u){g.push(I.batchId);for(const D of I.mutations)_=_.add(D.key)}return t.localDocuments.getDocuments(r,_).next(I=>({er:I,removedBatchIds:l,addedBatchIds:g}))})})}),XM.apply(this,arguments)}function fN(n){const e=ct(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function pN(n,e,t){let r=gn(),s=gn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=ps();return t.forEach((g,_)=>{const I=u.get(g);_.isFoundDocument()!==I.isFoundDocument()&&(s=s.add(g)),_.isNoDocument()&&_.version.isEqual(Mt.min())?(e.removeEntry(g,_.readTime),l=l.insert(g,_)):!I.isValidDocument()||_.version.compareTo(I.version)>0||0===_.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(_),l=l.insert(g,_)):We("LocalStore","Ignoring outdated watch update for ",g,". Current version:",I.version," Watch version:",_.version)}),{nr:l,sr:s}})}function bL(n,e){const t=ct(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xm(n,e){const t=ct(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,le.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new Nc(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Om(n,e,t){return ex.apply(this,arguments)}function ex(){return ex=(0,fe.Z)(function*(n,e,t){const r=ct(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!yu(l))throw l;We("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),ex.apply(this,arguments)}function xD(n,e,t){const r=ct(n);let s=Mt.min(),u=gn();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,I){const D=ct(g),S=D.Yi.get(I);return void 0!==S?le.resolve(D.Ji.get(S)):D.Bs.getTargetData(_,I)}(r,l,fs(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,g.targetId).next(_=>{u=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:Mt.min(),t?u:gn())).next(g=>(yN(r,IM(e),g),{documents:g,ir:u})))}function gN(n,e){const t=ct(n),r=ct(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function mN(n,e){const t=ct(n),r=t.Xi.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,tM(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(yN(t,e,s),s))}function yN(n,e,t){let r=n.Xi.get(e)||Mt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function tx(){return tx=(0,fe.Z)(function*(n,e,t,r){const s=ct(n);let u=gn(),l=ps();for(const I of t){const D=e.rr(I.metadata.name);I.document&&(u=u.add(D));const S=e.ur(I);S.setReadTime(e.cr(I.metadata.readTime)),l=l.insert(D,S)}const g=s.Zi.newChangeBuffer({trackRemovals:!0}),_=yield xm(s,(I=r,fs(id(Rn.fromString(`__bundle__/docs/${I}`)))));var I;return s.persistence.runTransaction("Apply bundle documents","readwrite",I=>pN(I,g,l).next(D=>(g.apply(I),D)).next(D=>s.Bs.removeMatchingKeysForTargetId(I,_.targetId).next(()=>s.Bs.addMatchingKeys(I,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(I,D.nr,D.sr)).next(()=>D.nr)))}),tx.apply(this,arguments)}function TL(n,e){return nx.apply(this,arguments)}function nx(){return nx=(0,fe.Z)(function*(n,e,t=gn()){const r=yield xm(n,fs(BM(e.bundledQuery))),s=ct(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=c(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const g=r.withResumeToken(fi.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(g.targetId,g),s.Bs.updateTargetData(u,g).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),nx.apply(this,arguments)}function _N(n,e){return`firestore_clients_${n}_${e}`}function vN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function rx(n,e){return`firestore_targets_${n}_${e}`}class OD{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new je(s.error.code,s.error.message))),l?new OD(e,t,s.state,u):(Lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class K0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new je(r.error.code,r.error.message))),u?new K0(e,r.state,s):(Lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class PD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Rf();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=h0(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new PD(e,u):(Lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ix{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ix(t.clientId,t.onlineState):(Lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class sx{constructor(){this.activeTargetIds=Rf()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ox{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new yr(tn),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=_N(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new sx),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(_N(e.persistenceKey,s));if(u){const l=PD.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(rx(this.persistenceKey,e));if(r){const s=K0.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rx(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return We("SharedClientState","READ",e,t),t}setItem(e,t){We("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){We("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(We("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=Gs.ct;if(null!=u)try{const g=JSON.parse(u);At("number"==typeof g),l=g}catch(g){Lr("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);s!==Gs.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new OD(this.currentUser,e,t,r),u=vN(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=vN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=rx(this.persistenceKey,e),u=new K0(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return PD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return OD.ar(new Gr(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return K0.ar(s,t)}br(e){return ix.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);We("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],g=[];return u.forEach(_=>{s.has(_)||l.push(_)}),s.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Wr(l,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Rf();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class wN{constructor(){this.Hr=new sx,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new sx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class AL{Yr(e){}shutdown(){}}class EN{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){We("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){We("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ND=null;function ax(){return null===ND?ND=268435456+Math.round(2147483648*Math.random()):ND++,"0x"+ND.toString(16)}const SL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ML{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ys="WebChannelConnection";class xL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=ax(),g=this.To(e,t);We("RestConnection",`Sending RPC '${e}' ${l}:`,g,r);const _={};return this.Eo(_,s,u),this.Ao(e,g,_,r).then(I=>(We("RestConnection",`Received RPC '${e}' ${l}: `,I),I),I=>{throw Ji("RestConnection",`RPC '${e}' ${l} failed with error: `,I,"url: ",g,"request:",r),I})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${SL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=ax();return new Promise((l,g)=>{const _=new um;_.setWithCredentials(!0),_.listenOnce(w2.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case t0.NO_ERROR:const D=_.getResponseJson();We(ys,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(D)),l(D);break;case t0.TIMEOUT:We(ys,`RPC '${e}' ${u} timed out`),g(new je(_e.DEADLINE_EXCEEDED,"Request time out"));break;case t0.HTTP_ERROR:const S=_.getStatus();if(We(ys,`RPC '${e}' ${u} failed with status:`,S,"response text:",_.getResponseText()),S>0){let $=_.getResponseJson();Array.isArray($)&&($=$[0]);const J=$?.error;if(J&&J.status&&J.message){const we=function(Fe){const Le=Fe.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(Le)>=0?Le:_e.UNKNOWN}(J.status);g(new je(we,J.message))}else g(new je(_e.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new je(_e.UNAVAILABLE,"Connection failed."));break;default:Ct()}}finally{We(ys,`RPC '${e}' ${u} completed.`)}});const I=JSON.stringify(s);We(ys,`RPC '${e}' ${u} sending request:`,s),_.send(t,"POST",I,r,15)})}Ro(e,t,r){const s=ax(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ZS(),g=v2(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},I=this.longPollingOptions.timeoutSeconds;void 0!==I&&(_.longPollingTimeout=Math.round(1e3*I)),this.useFetchStreams&&(_.xmlHttpFactory=new WS({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const D=u.join("");We(ys,`Creating RPC '${e}' stream ${s}: ${D}`,_);const S=l.createWebChannel(D,_);let $=!1,J=!1;const we=new ML({ro:Le=>{J?We(ys,`Not sending because RPC '${e}' stream ${s} is closed:`,Le):($||(We(ys,`Opening RPC '${e}' stream ${s} transport.`),S.open(),$=!0),We(ys,`RPC '${e}' stream ${s} sending:`,Le),S.send(Le))},oo:()=>S.close()}),Fe=(Le,ht,Vt)=>{Le.listen(ht,vt=>{try{Vt(vt)}catch(jt){setTimeout(()=>{throw jt},0)}})};return Fe(S,am.EventType.OPEN,()=>{J||We(ys,`RPC '${e}' stream ${s} transport opened.`)}),Fe(S,am.EventType.CLOSE,()=>{J||(J=!0,We(ys,`RPC '${e}' stream ${s} transport closed`),we.wo())}),Fe(S,am.EventType.ERROR,Le=>{J||(J=!0,Ji(ys,`RPC '${e}' stream ${s} transport errored:`,Le),we.wo(new je(_e.UNAVAILABLE,"The operation could not be completed")))}),Fe(S,am.EventType.MESSAGE,Le=>{var ht;if(!J){const Vt=Le.data[0];At(!!Vt);const jt=Vt.error||(null===(ht=Vt[0])||void 0===ht?void 0:ht.error);if(jt){We(ys,`RPC '${e}' stream ${s} received error:`,jt);const un=jt.status;let Mn=function(Dd){const GF=xr[Dd];if(void 0!==GF)return U0(GF)}(un),rs=jt.message;void 0===Mn&&(Mn=_e.INTERNAL,rs="Unknown error status: "+un+" with message "+jt.message),J=!0,we.wo(new je(Mn,rs)),S.close()}else We(ys,`RPC '${e}' stream ${s} received:`,Vt),we._o(Vt)}}),Fe(g,pf.STAT_EVENT,Le=>{Le.stat===wb.PROXY?We(ys,`RPC '${e}' stream ${s} detected buffering proxy`):Le.stat===wb.NOPROXY&&We(ys,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{we.fo()},0),we}}function CN(){return typeof window<"u"?window:null}function RD(){return typeof document<"u"?document:null}function Y0(n){return new UM(n,!0)}class ux{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&We("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class IN{constructor(e,t,r,s,u,l,g,_){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new ux(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,fe.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,fe.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new je(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,fe.Z)(function*(){e.state=0,e.start()}))}tu(e){return We("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(We("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OL extends IN{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Ke(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:Ct(),s=e.targetChange.targetIds||[],u=function(_,I){return _.useProto3Json?(At(void 0===I||"string"==typeof I),fi.fromBase64String(I||"")):(At(void 0===I||I instanceof Uint8Array),fi.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const I=void 0===_.code?_e.UNKNOWN:U0(_.code);return new je(I,_.message||"")}(l);t=new NM(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=v(n,r.document.name),u=c(r.document.updateTime),l=r.document.createTime?c(r.document.createTime):Mt.min(),g=new Ci({mapValue:{fields:r.document.fields}}),_=Cr.newFoundDocument(s,u,l,g);t=new B0(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=v(n,r.document),u=r.readTime?c(r.readTime):Mt.min(),l=Cr.newNoDocument(s,u);t=new B0([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=v(n,r.document);t=new B0([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Ct();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new xM(s,u);t=new PM(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Mt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Mt.min():u.readTime?c(u.readTime):Mt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=A(this.serializer),t.addTarget=function(s,u){let l;const g=u.target;if(l=Af(g)?{documents:Qt(s,g)}:{query:mn(s,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=o(s,u.resumeToken);const _=_D(s,u.expectedCount);null!==_&&(l.expectedCount=_)}else if(u.snapshotVersion.compareTo(Mt.min())>0){l.readTime=i(s,u.snapshotVersion.toTimestamp());const _=_D(s,u.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function gs(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=A(this.serializer),t.removeTarget=e,this.Wo(t)}}class PL extends IN{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function $e(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,s){let u=c(r.updateTime?r.updateTime:s);return u.isEqual(Mt.min())&&(u=c(s)),new cD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=c(e.commitTime);return this.listener.cu(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=A(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>at(this.serializer,r))};this.Wo(t)}}class NL extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new je(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new je(_e.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new je(_e.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class kL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Lr(t),this.mu=!1):We("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class FL{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,fe.Z)(function*(){var _;pd(l)&&(We("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,fe.Z)(function*(I){const D=ct(I);D.vu.add(4),yield Pm(D),D.bu.set("Unknown"),D.vu.delete(4),yield Q0(D)}),function(I){return _.apply(this,arguments)})(l))}))}),this.bu=new kL(r,s)}}function Q0(n){return lx.apply(this,arguments)}function lx(){return lx=(0,fe.Z)(function*(n){if(pd(n))for(const e of n.Ru)yield e(!0)}),lx.apply(this,arguments)}function Pm(n){return dx.apply(this,arguments)}function dx(){return dx=(0,fe.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),dx.apply(this,arguments)}function kD(n,e){const t=ct(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),px(t)?fx(t):Rm(t).Ko()&&hx(t,e))}function J0(n,e){const t=ct(n),r=Rm(t);t.Au.delete(e),r.Ko()&&bN(t,e),0===t.Au.size&&(r.Ko()?r.jo():pd(t)&&t.bu.set("Unknown"))}function hx(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Mt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rm(n).su(e)}function bN(n,e){n.Vu.qt(e),Rm(n).iu(e)}function fx(n){n.Vu=new kM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Rm(n).start(),n.bu.gu()}function px(n){return pd(n)&&!Rm(n).Uo()&&n.Au.size>0}function pd(n){return 0===ct(n).vu.size}function DN(n){n.Vu=void 0}function LL(n){return gx.apply(this,arguments)}function gx(){return gx=(0,fe.Z)(function*(n){n.Au.forEach((e,t)=>{hx(n,e)})}),gx.apply(this,arguments)}function UL(n,e){return mx.apply(this,arguments)}function mx(){return mx=(0,fe.Z)(function*(n,e){DN(n),px(n)?(n.bu.Iu(e),fx(n)):n.bu.set("Unknown")}),mx.apply(this,arguments)}function VL(n,e,t){return yx.apply(this,arguments)}function yx(){return yx=(0,fe.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof NM&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(s,u){const l=u.cause;for(const g of u.targetIds)s.Au.has(g)&&(yield s.remoteSyncer.rejectListen(g,l),s.Au.delete(g),s.Vu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){We("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield FD(n,r)}else if(e instanceof B0?n.Vu.Ht(e):e instanceof PM?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Mt.min()))try{const r=yield fN(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const I=s.Au.get(_);I&&s.Au.set(_,I.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach((g,_)=>{const I=s.Au.get(g);if(!I)return;s.Au.set(g,I.withResumeToken(fi.EMPTY_BYTE_STRING,I.snapshotVersion)),bN(s,g);const D=new Nc(I.target,g,_,I.sequenceNumber);hx(s,D)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){We("RemoteStore","Failed to raise snapshot:",r),yield FD(n,r)}var r}),yx.apply(this,arguments)}function FD(n,e,t){return _x.apply(this,arguments)}function _x(){return _x=(0,fe.Z)(function*(n,e,t){if(!yu(e))throw e;n.vu.add(1),yield Pm(n),n.bu.set("Offline"),t||(t=()=>fN(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){We("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Q0(n)}))}),_x.apply(this,arguments)}function TN(n,e){return e().catch(t=>FD(n,t,e))}function Nm(n){return vx.apply(this,arguments)}function vx(){return vx=(0,fe.Z)(function*(n){const e=ct(n),t=gd(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;BL(e);)try{const s=yield bL(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,jL(e,s)}catch(s){yield FD(e,s)}AN(e)&&SN(e)}),vx.apply(this,arguments)}function BL(n){return pd(n)&&n.Eu.length<10}function jL(n,e){n.Eu.push(e);const t=gd(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function AN(n){return pd(n)&&!gd(n).Uo()&&n.Eu.length>0}function SN(n){gd(n).start()}function $L(n){return wx.apply(this,arguments)}function wx(){return wx=(0,fe.Z)(function*(n){gd(n).hu()}),wx.apply(this,arguments)}function HL(n){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,fe.Z)(function*(n){const e=gd(n);for(const t of n.Eu)e.uu(t.mutations)}),Ex.apply(this,arguments)}function GL(n,e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,fe.Z)(function*(n,e,t){const r=n.Eu.shift(),s=Lf.from(r,e,t);yield TN(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Nm(n)}),Cx.apply(this,arguments)}function zL(n,e){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,fe.Z)(function*(n,e){var t;e&&gd(n).ou&&(yield(t=(0,fe.Z)(function*(r,s){if(pD(u=s.code)&&u!==_e.ABORTED){const l=r.Eu.shift();gd(r).Qo(),yield TN(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Nm(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),AN(n)&&SN(n)}),Ix.apply(this,arguments)}function MN(n,e){return bx.apply(this,arguments)}function bx(){return bx=(0,fe.Z)(function*(n,e){const t=ct(n);t.asyncQueue.verifyOperationInProgress(),We("RemoteStore","RemoteStore received new credentials");const r=pd(t);t.vu.add(3),yield Pm(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Q0(t)}),bx.apply(this,arguments)}function Dx(n,e){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,fe.Z)(function*(n,e){const t=ct(n);e?(t.vu.delete(2),yield Q0(t)):e||(t.vu.add(2),yield Pm(t),t.bu.set("Unknown"))}),Tx.apply(this,arguments)}function Rm(n){return n.Su||(n.Su=function(e,t,r){const s=ct(e);return s.fu(),new OL(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:LL.bind(null,n),ao:UL.bind(null,n),nu:VL.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Su.Qo(),px(n)?fx(n):n.bu.set("Unknown")):(yield n.Su.stop(),DN(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function gd(n){return n.Du||(n.Du=function(e,t,r){const s=ct(e);return s.fu(),new PL(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:$L.bind(null,n),ao:zL.bind(null,n),au:HL.bind(null,n),cu:GL.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Du.Qo(),yield Nm(n)):(yield n.Du.stop(),n.Eu.length>0&&(We("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Ax{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,g=new Ax(e,t,l,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new je(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function km(n,e){if(Lr("AsyncQueue",`${e}: ${n}`),yu(n))return new je(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class Fm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ut.comparator(t.key,r.key):(t,r)=>ut.comparator(t.key,r.key),this.keyedMap=Nf(),this.sortedSet=new yr(this.comparator)}static emptySet(e){return new Fm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Fm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class xN{constructor(){this.Cu=new yr(ut.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ct():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Lm{constructor(e,t,r,s,u,l,g,_,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new Lm(e,t,Fm.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class qL{constructor(){this.Nu=void 0,this.listeners=[]}}class ZL{constructor(){this.queries=new Iu(e=>iD(e),sd),this.onlineState="Unknown",this.ku=new Set}}function Sx(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,fe.Z)(function*(n,e){const t=ct(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new qL),s)try{u.Nu=yield t.onListen(r)}catch(l){const g=km(l,`Initialization of query '${A0(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&Px(t)}),Mx.apply(this,arguments)}function xx(n,e){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,fe.Z)(function*(n,e){const t=ct(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),Ox.apply(this,arguments)}function WL(n,e){const t=ct(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const g of l.listeners)g.$u(s)&&(r=!0);l.Nu=s}}r&&Px(t)}function KL(n,e,t){const r=ct(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function Px(n){n.ku.forEach(e=>{e.next()})}class Nx{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Lm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Lm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class YL{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class ON{constructor(e){this.serializer=e}rr(e){return v(this.serializer,e)}ur(e){return e.metadata.exists?ie(this.serializer,e.document,!1):Cr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return c(e)}}class QL{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=PN(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Rn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new ON(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const g=(t.get(l)||gn()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function DL(n,e,t,r){return tx.apply(this,arguments)}(e.localStore,new ON(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield TL(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function PN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class NN{constructor(e){this.key=e}}class RN{constructor(e){this.key=e}}class kN{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=gn(),this.mutatedKeys=gn(),this.tc=bM(e),this.ec=new Fm(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new xN,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,g=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,I="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((D,S)=>{const $=s.get(D),J=Of(this.query,S)?S:null,we=!!$&&this.mutatedKeys.has($.key),Fe=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let Le=!1;$&&J?$.data.isEqual(J.data)?we!==Fe&&(r.track({type:3,doc:J}),Le=!0):this.rc($,J)||(r.track({type:2,doc:J}),Le=!0,(_&&this.tc(J,_)>0||I&&this.tc(J,I)<0)&&(g=!0)):!$&&J?(r.track({type:0,doc:J}),Le=!0):$&&!J&&(r.track({type:1,doc:$}),Le=!0,(_||I)&&(g=!0)),Le&&(J?(l=l.add(J),u=Fe?u.add(D):u.delete(D)):(l=l.delete(D),u=u.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),u=u.delete(D.key),r.track({type:1,doc:D})}return{ec:l,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((I,D)=>function(S,$){const J=we=>{switch(we){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct()}};return J(S)-J($)}(I.type,D.type)||this.tc(I.doc,D.doc)),this.oc(r);const l=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,_=g!==this.Xu;return this.Xu=g,0!==u.length||_?{snapshot:new Lm(this.query,e.ec,s,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new xN,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=gn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new RN(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new NN(r))}),t}hc(e){this.Yu=e.ir,this.Zu=gn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Lm.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class JL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class XL{constructor(e){this.key=e,this.fc=!1}}class e4{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Iu(g=>iD(g),sd),this._c=new Map,this.mc=new Set,this.gc=new yr(ut.comparator),this.yc=new Map,this.Ic=new ZM,this.Tc={},this.Ec=new Map,this.Ac=zf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function t4(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,fe.Z)(function*(n,e){const t=rO(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield xm(t.localStore,fs(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield kx(t,e,r,"current"===g,l.resumeToken),t.isPrimaryClient&&kD(t.remoteStore,l)}return s}),Rx.apply(this,arguments)}function kx(n,e,t,r,s){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,fe.Z)(function*(n,e,t,r,s){n.Rc=(S,$,J)=>{return(we=(0,fe.Z)(function*(Fe,Le,ht,Vt){let vt=Le.view.sc(ht);vt.zi&&(vt=yield xD(Fe.localStore,Le.query,!1).then(({documents:Mn})=>Le.view.sc(Mn,vt)));const jt=Vt&&Vt.targetChanges.get(Le.targetId),un=Le.view.applyChanges(vt,Fe.isPrimaryClient,jt);return qx(Fe,Le.targetId,un.cc),un.snapshot}),function(Fe,Le,ht,Vt){return we.apply(this,arguments)})(n,S,$,J);var we};const u=yield xD(n.localStore,e,!0),l=new kN(e,u.ir),g=l.sc(u.documents),_=Tm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),I=l.applyChanges(g,n.isPrimaryClient,_);qx(n,t,I.cc);const D=new JL(e,t,l);return n.wc.set(e,D),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),I.snapshot}),Fx.apply(this,arguments)}function n4(n,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,fe.Z)(function*(n,e){const t=ct(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!sd(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Om(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),J0(t.remoteStore,r.targetId),Um(t,r.targetId)}).catch(Ec))):(Um(t,r.targetId),yield Om(t.localStore,r.targetId,!0))}),Lx.apply(this,arguments)}function Ux(){return Ux=(0,fe.Z)(function*(n,e,t){const r=iO(n);try{const s=yield function(u,l){const g=ct(u),_=mr.now(),I=l.reduce(($,J)=>$.add(J.key),gn());let D,S;return g.persistence.runTransaction("Locally write mutations","readwrite",$=>{let J=ps(),we=gn();return g.Zi.getEntries($,I).next(Fe=>{J=Fe,J.forEach((Le,ht)=>{ht.isValidDocument()||(we=we.add(Le))})}).next(()=>g.localDocuments.getOverlayedDocuments($,J)).next(Fe=>{D=Fe;const Le=[];for(const ht of l){const Vt=MM(ht,D.get(ht.key).overlayedDocument);null!=Vt&&Le.push(new qo(ht.key,Vt,v0(Vt.value.mapValue),cr.exists(!0)))}return g.mutationQueue.addMutationBatch($,_,Le,l)}).next(Fe=>{S=Fe;const Le=Fe.applyToLocalDocumentSet(D,we);return g.documentOverlayCache.saveOverlays($,Fe.batchId,Le)})}).then(()=>({batchId:S.batchId,changes:sD(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,g){let _=u.Tc[u.currentUser.toKey()];_||(_=new yr(tn)),_=_.insert(l,g),u.Tc[u.currentUser.toKey()]=_}(r,s.batchId,t),yield Rc(r,s.changes),yield Nm(r.remoteStore)}catch(s){const u=km(s,"Failed to persist write");t.reject(u)}}),Ux.apply(this,arguments)}function FN(n,e){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,fe.Z)(function*(n,e){const t=ct(n);try{const r=yield function IL(n,e){const t=ct(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const g=[];e.targetChanges.forEach((D,S)=>{const $=s.get(S);if(!$)return;g.push(t.Bs.removeMatchingKeys(u,D.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(u,D.addedDocuments,S)));let J=$.withSequenceNumber(u.currentSequenceNumber);var we,Fe,Le;null!==e.targetMismatches.get(S)?J=J.withResumeToken(fi.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):D.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(D.resumeToken,r)),s=s.insert(S,J),Fe=J,Le=D,(0===(we=$).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-we.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,J))});let _=ps(),I=gn();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,D))}),g.push(pN(u,l,e.documentUpdates).next(D=>{_=D.nr,I=D.sr})),!r.isEqual(Mt.min())){const D=t.Bs.getLastRemoteSnapshotVersion(u).next(S=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(D)}return le.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,I)).next(()=>_)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(At(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?At(l.fc):s.removedDocuments.size>0&&(At(l.fc),l.fc=!1))}),yield Rc(t,r,e)}catch(r){yield Ec(r)}}),Vx.apply(this,arguments)}function LN(n,e,t){const r=ct(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const g=l.view.Mu(e);g.snapshot&&s.push(g.snapshot)}),function(u,l){const g=ct(u);g.onlineState=l;let _=!1;g.queries.forEach((I,D)=>{for(const S of D.listeners)S.Mu(l)&&(_=!0)}),_&&Px(g)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function i4(n,e,t){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,fe.Z)(function*(n,e,t){const r=ct(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new yr(ut.comparator);l=l.insert(u,Cr.newNoDocument(u,Mt.min()));const g=gn().add(u),_=new Vf(Mt.min(),new Map,new yr(tn),l,g);yield FN(r,_),r.gc=r.gc.remove(u),r.yc.delete(e),Zx(r)}else yield Om(r.localStore,e,!1).then(()=>Um(r,e,t)).catch(Ec)}),Bx.apply(this,arguments)}function s4(n,e){return jx.apply(this,arguments)}function jx(){return jx=(0,fe.Z)(function*(n,e){const t=ct(n),r=e.batch.batchId;try{const s=yield function CL(n,e){const t=ct(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,g,_,I){const D=_.batch,S=D.keys();let $=le.resolve();return S.forEach(J=>{$=$.next(()=>I.getEntry(g,J)).next(we=>{const Fe=_.docVersions.get(J);At(null!==Fe),we.version.compareTo(Fe)<0&&(D.applyToRemoteDocument(we,_),we.isValidDocument()&&(we.setReadTime(_.commitVersion),I.addEntry(we)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(g,D))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=gn();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(g=g.add(l.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);zx(t,r,null),Gx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Rc(t,s)}catch(s){yield Ec(s)}}),jx.apply(this,arguments)}function o4(n,e,t){return $x.apply(this,arguments)}function $x(){return $x=(0,fe.Z)(function*(n,e,t){const r=ct(n);try{const s=yield function(u,l){const g=ct(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return g.mutationQueue.lookupMutationBatch(_,l).next(D=>(At(null!==D),I=D.keys(),g.mutationQueue.removeMutationBatch(_,D))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,I,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>g.localDocuments.getDocuments(_,I))})}(r.localStore,e);zx(r,e,t),Gx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Rc(r,s)}catch(s){yield Ec(s)}}),$x.apply(this,arguments)}function Hx(){return Hx=(0,fe.Z)(function*(n,e){const t=ct(n);pd(t.remoteStore)||We("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=ct(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=km(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),Hx.apply(this,arguments)}function Gx(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function zx(n,e,t){const r=ct(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function Um(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||UN(n,r)})}function UN(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(J0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Zx(n))}function qx(n,e,t){for(const r of t)r instanceof NN?(n.Ic.addReference(r.key,e),u4(n,r)):r instanceof RN?(We("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||UN(n,r.key)):Ct()}function u4(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(We("SyncEngine","New document in limbo: "+t),n.mc.add(r),Zx(n))}function Zx(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new ut(Rn.fromString(e)),r=n.Ac.next();n.yc.set(r,new XL(t)),n.gc=n.gc.insert(t,r),kD(n.remoteStore,new Nc(fs(id(t.path)),r,"TargetPurposeLimboResolution",Gs.ct))}}function Rc(n,e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,fe.Z)(function*(n,e,t){const r=ct(n),s=[],u=[],l=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,_)=>{l.push(r.Rc(_,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,I?.fromCache?"not-current":"current"),I){s.push(I);const D=JM.Li(_.targetId,I);u.push(D)}}))}),yield Promise.all(l),r.dc.nu(s),yield(g=(0,fe.Z)(function*(_,I){const D=ct(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>le.forEach(I,$=>le.forEach($.Fi,J=>D.persistence.referenceDelegate.addReference(S,$.targetId,J)).next(()=>le.forEach($.Bi,J=>D.persistence.referenceDelegate.removeReference(S,$.targetId,J)))))}catch(S){if(!yu(S))throw S;We("LocalStore","Failed to update sequence numbers: "+S)}for(const S of I){const $=S.targetId;if(!S.fromCache){const J=D.Ji.get($),Fe=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);D.Ji=D.Ji.insert($,Fe)}}}),function(_,I){return g.apply(this,arguments)})(r.localStore,u))}),Wx.apply(this,arguments)}function c4(n,e){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,fe.Z)(function*(n,e){const t=ct(n);if(!t.currentUser.isEqual(e)){We("SyncEngine","User change. New user:",e.toKey());const r=yield hN(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(g=>{g.reject(new je(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Rc(t,r.er)}var s}),Kx.apply(this,arguments)}function l4(n,e){const t=ct(n),r=t.yc.get(e);if(r&&r.fc)return gn().add(r.key);{let s=gn();const u=t._c.get(e);if(!u)return s;for(const l of u){const g=t.wc.get(l);s=s.unionWith(g.view.nc)}return s}}function d4(n,e){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,fe.Z)(function*(n,e){const t=ct(n),r=yield xD(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&qx(t,e.targetId,s.cc),s}),Yx.apply(this,arguments)}function h4(n,e){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,fe.Z)(function*(n,e){const t=ct(n);return mN(t.localStore,e).then(r=>Rc(t,r))}),Qx.apply(this,arguments)}function f4(n,e,t,r){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,fe.Z)(function*(n,e,t,r){const s=ct(n),u=yield function(l,g){const _=ct(l),I=ct(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>I.Sn(D,g).next(S=>S?_.localDocuments.getDocuments(D,S):le.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield Nm(s.remoteStore):"acknowledged"===t||"rejected"===t?(zx(s,e,r||null),Gx(s,e),g=e,ct(ct(s.localStore).mutationQueue).Cn(g)):Ct(),yield Rc(s,u)):We("SyncEngine","Cannot apply mutation batch with id: "+e)}),Jx.apply(this,arguments)}function Xx(){return Xx=(0,fe.Z)(function*(n,e){const t=ct(n);if(rO(t),iO(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield VN(t,r.toArray());t.vc=!0,yield Dx(t.remoteStore,!0);for(const u of s)kD(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(Um(t,l),Om(t.localStore,l,!0))),J0(t.remoteStore,l)}),yield s,yield VN(t,r),function(u){const l=ct(u);l.yc.forEach((g,_)=>{J0(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new yr(ut.comparator)}(t),t.vc=!1,yield Dx(t.remoteStore,!1)}}),Xx.apply(this,arguments)}function VN(n,e,t){return eO.apply(this,arguments)}function eO(){return eO=(0,fe.Z)(function*(n,e,t){const r=ct(n),s=[],u=[];for(const l of e){let g;const _=r._c.get(l);if(_&&0!==_.length){g=yield xm(r.localStore,fs(_[0]));for(const I of _){const D=r.wc.get(I),S=yield d4(r,D);S.snapshot&&u.push(S.snapshot)}}else{const I=yield gN(r.localStore,l);g=yield xm(r.localStore,I),yield kx(r,BN(I),l,!1,g.resumeToken)}s.push(g)}return r.dc.nu(u),s}),eO.apply(this,arguments)}function BN(n){return b0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function g4(n){const e=ct(n);return ct(ct(e.localStore).persistence).$i()}function m4(n,e,t,r){return tO.apply(this,arguments)}function tO(){return tO=(0,fe.Z)(function*(n,e,t,r){const s=ct(n);if(s.vc)return void We("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield mN(s.localStore,IM(u[0])),g=Vf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,fi.EMPTY_BYTE_STRING);yield Rc(s,l,g);break}case"rejected":yield Om(s.localStore,e,!0),Um(s,e,r);break;default:Ct()}}),tO.apply(this,arguments)}function y4(n,e,t){return nO.apply(this,arguments)}function nO(){return nO=(0,fe.Z)(function*(n,e,t){const r=rO(n);if(r.vc){for(const s of e){if(r._c.has(s)){We("SyncEngine","Adding an already active target "+s);continue}const u=yield gN(r.localStore,s),l=yield xm(r.localStore,u);yield kx(r,BN(u),l.targetId,!1,l.resumeToken),kD(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield Om(r.localStore,s,!1).then(()=>{J0(r.remoteStore,s),Um(r,s)}).catch(Ec))}}),nO.apply(this,arguments)}function rO(n){const e=ct(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i4.bind(null,e),e.dc.nu=WL.bind(null,e.eventManager),e.dc.Pc=KL.bind(null,e.eventManager),e}function iO(n){const e=ct(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o4.bind(null,e),e}class X0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.serializer=Y0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return dN(this.persistence,new lN,e.initialUser,this.serializer)}createPersistence(e){return new WM(AD.zs,this.serializer)}createSharedClientState(e){return new wN}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sO extends X0{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield iO(r.Vc.syncEngine),yield Nm(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return dN(this.persistence,new lN,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new tN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new d0(t,this.persistence);return new pm(e.asyncQueue,r)}createPersistence(e){const t=QM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ms.withCacheSize(this.cacheSizeBytes):ms.DEFAULT;return new YM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,CN(),RD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new wN}}class jN extends sO{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof ox&&(r.sharedClientState.syncEngine={jr:f4.bind(null,s),zr:m4.bind(null,s),Wr:y4.bind(null,s),$i:g4.bind(null,s),Qr:h4.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,fe.Z)(function*(l){yield function p4(n,e){return Xx.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=CN();if(!ox.D(t))throw new je(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=QM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ox(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vm{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>LN(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=c4.bind(null,r.syncEngine),yield Dx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ZL}createDatastore(e){const t=Y0(e.databaseInfo.databaseId),r=new xL(e.databaseInfo);return new NL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>LN(this.syncEngine,g,0),l=EN.D()?new EN:new AL,new FL(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,g,_,I){const D=new e4(r,s,u,l,g,_);return I&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=ct(t);We("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Pm(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $N(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class LD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class w4{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ei,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new YL(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,fe.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class E4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new je(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,fe.Z)(function*(u,l){const g=ct(u),_=A(g.serializer)+"/documents",I={documents:l.map(J=>y(g.serializer,J))},D=yield g.vo("BatchGetDocuments",_,I,l.length),S=new Map;D.forEach(J=>{const we=function Re(n,e){return"found"in e?function(t,r){At(!!r.found);const s=v(t,r.found.name),u=c(r.found.updateTime),l=r.found.createTime?c(r.found.createTime):Mt.min(),g=new Ci({mapValue:{fields:r.found.fields}});return Cr.newFoundDocument(s,u,l,g)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const s=v(t,r.missing),u=c(r.readTime);return Cr.newNoDocument(s,u)}(n,e):Ct()}(g.serializer,J);S.set(we.key.toString(),we)});const $=[];return l.forEach(J=>{const we=S.get(J.toString());At(!!we),$.push(we)}),$}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=ut.fromPath(s);e.mutations.push(new hD(u,e.precondition(u)))}),yield(r=(0,fe.Z)(function*(s,u){const l=ct(s),g=A(l.serializer)+"/documents",_={writes:u.map(I=>at(l.serializer,I))};yield l.Io("Commit",g,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ct();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new je(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mt.min())?cr.exists(!1):cr.updateTime(t):cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new je(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cr.updateTime(t)}return cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class C4{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new ux(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,fe.Z)(function*(){const t=new E4(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!td(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!pD(t)}return!1}}class I4{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Gr.UNAUTHENTICATED,this.clientId=bb.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,fe.Z)(function*(g){We("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(We("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new je(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=km(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function UD(n,e){return oO.apply(this,arguments)}function oO(){return oO=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),We("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,fe.Z)(function*(u){r.isEqual(u)||(yield hN(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),oO.apply(this,arguments)}function aO(n,e){return uO.apply(this,arguments)}function uO(){return uO=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield cO(n);We("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>MN(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>MN(e.remoteStore,u)),n._onlineComponents=e}),uO.apply(this,arguments)}function HN(n){return"FirebaseError"===n.name?n.code===_e.FAILED_PRECONDITION||n.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function cO(n){return lO.apply(this,arguments)}function lO(){return lO=(0,fe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){We("FirestoreClient","Using user provided OfflineComponentProvider");try{yield UD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!HN(t))throw t;Ji("Error using user provided cache. Falling back to memory cache: "+t),yield UD(n,new X0)}}else We("FirestoreClient","Using default OfflineComponentProvider"),yield UD(n,new X0);return n._offlineComponents}),lO.apply(this,arguments)}function VD(n){return dO.apply(this,arguments)}function dO(){return dO=(0,fe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(We("FirestoreClient","Using user provided OnlineComponentProvider"),yield aO(n,n._uninitializedComponentsProvider._online)):(We("FirestoreClient","Using default OnlineComponentProvider"),yield aO(n,new Vm))),n._onlineComponents}),dO.apply(this,arguments)}function GN(n){return cO(n).then(e=>e.persistence)}function BD(n){return cO(n).then(e=>e.localStore)}function zN(n){return VD(n).then(e=>e.remoteStore)}function hO(n){return VD(n).then(e=>e.syncEngine)}function Bm(n){return fO.apply(this,arguments)}function fO(){return fO=(0,fe.Z)(function*(n){const e=yield VD(n),t=e.eventManager;return t.onListen=t4.bind(null,e.syncEngine),t.onUnlisten=n4.bind(null,e.syncEngine),t}),fO.apply(this,arguments)}function ZN(n,e,t={}){const r=new ei;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(s,u,l,g,_){const I=new LD({next:S=>{u.enqueueAndForget(()=>xx(s,D));const $=S.docs.has(l);!$&&S.fromCache?_.reject(new je(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&S.fromCache&&g&&"server"===g.source?_.reject(new je(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new Nx(id(l.path),I,{includeMetadataChanges:!0,Ku:!0});return Sx(s,D)}(yield Bm(n),n.asyncQueue,e,t,r)})),r.promise}function WN(n,e,t={}){const r=new ei;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(s,u,l,g,_){const I=new LD({next:S=>{u.enqueueAndForget(()=>xx(s,D)),S.fromCache&&"server"===g.source?_.reject(new je(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new Nx(l,I,{includeMetadataChanges:!0,Ku:!0});return Sx(s,D)}(yield Bm(n),n.asyncQueue,e,t,r)})),r.promise}function KN(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const YN=new Map;function pO(n,e,t){if(!t)throw new je(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QN(n,e,t,r){if(!0===e&&!0===r)throw new je(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JN(n){if(!ut.isDocumentKey(n))throw new je(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XN(n){if(ut.isDocumentKey(n))throw new je(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ct()}function Fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jD(n);throw new je(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eR(n,e){if(e<=0)throw new je(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class tR{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new je(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new je(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=KN(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new je(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ew{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new je(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new je(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new YS;switch(t.type){case"firstParty":return new Ib(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new je(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=YN.get(e);t&&(We("ComponentProvider","Removing Datastore"),YN.delete(e),t.terminate())}(this),Promise.resolve()}}class Or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Or(this.firestore,e,this._key)}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class Au extends ts{constructor(e,t,r){super(e,t,id(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Or(this.firestore,null,new ut(e))}withConverter(e){return new Au(this.firestore,e,this._path)}}function rR(n,e,...t){if(n=(0,Vn.m9)(n),pO("collection","path",e),n instanceof ew){const r=Rn.fromString(e,...t);return XN(r),new Au(n,null,r)}{if(!(n instanceof Or||n instanceof Au))throw new je(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return XN(r),new Au(n.firestore,null,r)}}function $D(n,e,...t){if(n=(0,Vn.m9)(n),1===arguments.length&&(e=bb.A()),pO("doc","path",e),n instanceof ew){const r=Rn.fromString(e,...t);return JN(r),new Or(n,null,new ut(r))}{if(!(n instanceof Or||n instanceof Au))throw new je(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return JN(r),new Or(n.firestore,n instanceof Au?n.converter:null,new ut(r))}}function iR(n,e){return n=(0,Vn.m9)(n),e=(0,Vn.m9)(e),(n instanceof Or||n instanceof Au)&&(e instanceof Or||e instanceof Au)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gO(n,e){return n=(0,Vn.m9)(n),e=(0,Vn.m9)(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&sd(n._query,e._query)&&n.converter===e.converter}class N4{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new ux(this,"async_queue_retry"),this.Xc=()=>{const t=RD();t&&We("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=RD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=RD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ei;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!yu(t))throw t;We("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Lr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=Ax.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&Ct()}verifyOperationInProgress(){}sa(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function mO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class R4{constructor(){this._progressObserver={},this._taskCompletionResolver=new ei,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Pr extends ew{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new N4,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||sR(this),this._firestoreClient.terminate()}}function pi(n){return n._firestoreClient||sR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function sR(n){var e,t,r;const s=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new I2(n._databaseId,g,n._persistenceKey,(I=s).host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,KN(I.experimentalLongPollingOptions),I.useFetchStreams));var g,I;n._firestoreClient=new I4(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function oR(n,e,t){const r=new ei;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield UD(n,t),yield aO(n,e),r.resolve()}catch(s){const u=s;if(!HN(u))throw u;Ji("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function aR(n){if(n._initialized||n._terminated)throw new je(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Su{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Su(fi.fromBase64String(e))}catch(t){throw new je(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Su(fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new je(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zf{constructor(e){this._methodName=e}}class HD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tn(this._lat,e._lat)||tn(this._long,e._long)}}const z4=/^__.*__$/;class q4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new qo(e,this.data,this.fieldMask,t,this.fieldTransforms):new cd(e,this.data,t,this.fieldTransforms)}}class uR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new qo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct()}}class GD{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new GD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return ZD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(cR(this.ca)&&z4.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Z4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Y0(e)}ya(e,t,r,s=!1){return new GD({ca:e,methodName:t,ga:r,path:Mr.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wf(n){const e=n._freezeSettings(),t=Y0(n._databaseId);return new Z4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zD(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);wO("Data must be an object, but it was:",l,r);const g=hR(r,l);let _,I;if(u.merge)_=new es(l.fieldMask),I=l.fieldTransforms;else if(u.mergeFields){const D=[];for(const S of u.mergeFields){const $=rw(e,S,t);if(!l.contains($))throw new je(_e.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);pR(D,$)||D.push($)}_=new es(D),I=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,I=l.fieldTransforms;return new q4(new Ci(g),_,I)}class nw extends Zf{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nw}}function lR(n,e,t){return new GD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class yO extends Zf{_toFieldTransform(e){return new Oc(e.path,new ad)}isEqual(e){return e instanceof yO}}class W4 extends Zf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=lR(this,e,!0),r=this.pa.map(u=>Kf(u,t)),s=new xc(r);return new Oc(e.path,s)}isEqual(e){return this===e}}class K4 extends Zf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=lR(this,e,!0),r=this.pa.map(u=>Kf(u,t)),s=new Du(r);return new Oc(e.path,s)}isEqual(e){return this===e}}class Y4 extends Zf{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new ud(e.serializer,TM(e.serializer,this.Ia));return new Oc(e.path,t)}isEqual(e){return this===e}}function _O(n,e,t,r){const s=n.ya(1,e,t);wO("Data must be an object, but it was:",s,r);const u=[],l=Ci.empty();Ic(r,(_,I)=>{const D=qD(e,_,t);I=(0,Vn.m9)(I);const S=s.da(D);if(I instanceof nw)u.push(D);else{const $=Kf(I,S);null!=$&&(u.push(D),l.set(D,$))}});const g=new es(u);return new uR(l,g,s.fieldTransforms)}function vO(n,e,t,r,s,u){const l=n.ya(1,e,t),g=[rw(e,r,t)],_=[s];if(u.length%2!=0)throw new je(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)g.push(rw(e,u[$])),_.push(u[$+1]);const I=[],D=Ci.empty();for(let $=g.length-1;$>=0;--$)if(!pR(I,g[$])){const J=g[$];let we=_[$];we=(0,Vn.m9)(we);const Fe=l.da(J);if(we instanceof nw)I.push(J);else{const Le=Kf(we,Fe);null!=Le&&(I.push(J),D.set(J,Le))}}const S=new es(I);return new uR(D,S,l.fieldTransforms)}function dR(n,e,t,r=!1){return Kf(t,n.ya(r?4:3,e))}function Kf(n,e){if(fR(n=(0,Vn.m9)(n)))return wO("Unsupported field value:",e,n),hR(n,e);if(n instanceof Zf)return function(t,r){if(!cR(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let g=Kf(l,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Vn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return TM(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=mr.fromDate(t);return{timestampValue:i(r.serializer,s)}}if(t instanceof mr){const s=new mr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:i(r.serializer,s)}}if(t instanceof HD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Su)return{bytesValue:o(r.serializer,t._byteString)};if(t instanceof Or){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:h(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${jD(t)}`)}(n,e)}function hR(n,e){const t={};return vM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ic(n,(r,s)=>{const u=Kf(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function fR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof mr||n instanceof HD||n instanceof Su||n instanceof Or||n instanceof Zf)}function wO(n,e,t){if(!fR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=jD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function rw(n,e,t){if((e=(0,Vn.m9)(e))instanceof kc)return e._internalPath;if("string"==typeof e)return qD(n,e);throw ZD("Field path arguments must be of type string or ",n,!1,void 0,t)}const Q4=new RegExp("[~\\*/\\[\\]]");function qD(n,e,t){if(e.search(Q4)>=0)throw ZD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kc(...e.split("."))._internalPath}catch{throw ZD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ZD(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${s}`),_+=")"),new je(_e.INVALID_ARGUMENT,g+n+_)}function pR(n,e){return n.some(t=>t.isEqual(e))}class iw{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Or(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new J4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(WD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class J4 extends iw{data(){return super.data()}}function WD(n,e){return"string"==typeof e?qD(n,e):e instanceof kc?e._internalPath:e._delegate._internalPath}function gR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new je(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EO{}class sw extends EO{}function md(n,e,...t){let r=[];e instanceof EO&&r.push(e),r=r.concat(t),function(s){const u=s.filter(g=>g instanceof jm).length,l=s.filter(g=>g instanceof ow).length;if(u>1||u>0&&l>0)throw new je(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class ow extends sw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ow(e,t,r)}_apply(e){const t=this._parse(e);return vR(e._query,t),new ts(e.firestore,e.converter,rD(e._query,t))}_parse(e){const t=Wf(e.firestore);return function(s,u,l,g,_,I,D){let S;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new je(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){_R(D,I);const $=[];for(const J of D)$.push(yR(g,s,J));S={arrayValue:{values:$}}}else S=yR(g,s,D)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||_R(D,I),S=dR(l,"where",D,"in"===I||"not-in"===I);return Dn.create(_,I,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class jm extends EO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Pn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const g of l)vR(u,g),u=rD(u,g)}(e._query,t),new ts(e.firestore,e.converter,rD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class CO extends sw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new CO(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new je(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new je(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new rd(s,u);return function(g,_){if(null===nD(g)){const I=xf(g);null!==I&&wR(0,I,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new ts(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new zo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class KD extends sw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new KD(e,t,r)}_apply(e){return new ts(e.firestore,e.converter,T0(e._query,this._limit,this._limitType))}}class YD extends sw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new YD(e,t,r)}_apply(e){const t=mR(e,this.type,this._docOrFields,this._inclusive);return new ts(e.firestore,e.converter,(s=t,new zo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class QD extends sw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new QD(e,t,r)}_apply(e){const t=mR(e,this.type,this._docOrFields,this._inclusive);return new ts(e.firestore,e.converter,(s=t,new zo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function mR(n,e,t,r){if(t[0]=(0,Vn.m9)(t[0]),t[0]instanceof iw)return function(s,u,l,g,_){if(!g)throw new je(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const I=[];for(const D of Mc(s))if(D.field.isKeyField())I.push(Tc(u,g.key));else{const S=g.data.field(D.field);if(ym(S))throw new je(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const $=D.field.canonicalString();throw new je(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}I.push(S)}return new qr(I,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Wf(n.firestore);return function(u,l,g,_,I,D){const S=u.explicitOrderBy;if(I.length>S.length)throw new je(_e.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let J=0;J<I.length;J++){const we=I[J];if(S[J].field.isKeyField()){if("string"!=typeof we)throw new je(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof we}`);if(!D0(u)&&-1!==we.indexOf("/"))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${we}' contains a slash.`);const Fe=u.path.child(Rn.fromString(we));if(!ut.isDocumentKey(Fe))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const Le=new ut(Fe);$.push(Tc(l,Le))}else{const Fe=dR(g,_,we);$.push(Fe)}}return new qr($,D)}(n._query,n.firestore._databaseId,s,e,t,r)}}function yR(n,e,t){if("string"==typeof(t=(0,Vn.m9)(t))){if(""===t)throw new je(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!D0(e)&&-1!==t.indexOf("/"))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rn.fromString(t));if(!ut.isDocumentKey(r))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tc(n,new ut(r))}if(t instanceof Or)return Tc(n,t._key);throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jD(t)}.`)}function _R(n,e){if(!Array.isArray(n)||0===n.length)throw new je(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vR(n,e){if(e.isInequality()){const r=xf(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new je(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=nD(n);null!==u&&wR(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new je(_e.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function wR(n,e,t){if(!t.isEqual(e))throw new je(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class IO{convertValue(e,t="none"){switch(wu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ct()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ic(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new HD(Ur(e.latitude),Ur(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_m(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vf(e));default:return null}}convertTimestamp(e){const t=bc(e);return new mr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rn.fromString(e);At(R2(r));const s=new vu(r.get(1),r.get(3)),u=new ut(r.popFirst(5));return s.isEqual(t)||Lr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function JD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class a3 extends IO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Or(this.firestore,null,t)}}class Yf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fc extends iw{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new aw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(WD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class aw extends Fc{data(e={}){return super.data(e)}}class yd{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Yf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new aw(this._firestore,this._userDataWriter,r.key,r,new Yf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new aw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const g=new aw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,I=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),I=u.indexOf(l.doc.key)),{type:c3(l.type),doc:g,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function c3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct()}}function CR(n,e){return n instanceof Fc&&e instanceof Fc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof yd&&e instanceof yd&&n._firestore===e._firestore&&gO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class _d extends IO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Or(this.firestore,null,t)}}function IR(n,e,t){n=Fn(n,Or);const r=Fn(n.firestore,Pr),s=JD(n.converter,e,t);return $m(r,[zD(Wf(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,cr.none())])}function bR(n,e,t,...r){n=Fn(n,Or);const s=Fn(n.firestore,Pr),u=Wf(s);let l;return l="string"==typeof(e=(0,Vn.m9)(e))||e instanceof kc?vO(u,"updateDoc",n._key,e,t,r):_O(u,"updateDoc",n._key,e),$m(s,[l.toMutation(n._key,cr.exists(!0))])}function DR(n,...e){var t,r,s;n=(0,Vn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||mO(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(mO(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(s=S.complete)||void 0===s?void 0:s.bind(S)}let _,I,D;if(n instanceof Or)I=Fn(n.firestore,Pr),D=id(n._key.path),_={next:S=>{e[l]&&e[l](bO(I,n,S))},error:e[l+1],complete:e[l+2]};else{const S=Fn(n,ts);I=Fn(S.firestore,Pr),D=S._query;const $=new _d(I);_={next:J=>{e[l]&&e[l](new yd(I,$,S,J))},error:e[l+1],complete:e[l+2]},gR(n._query)}return function(S,$,J,we){const Fe=new LD(we),Le=new Nx($,Fe,J);return S.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return Sx(yield Bm(S),Le)})),()=>{Fe.Dc(),S.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return xx(yield Bm(S),Le)}))}}(pi(I),D,g,_)}function $m(n,e){return function(t,r){const s=new ei;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function r4(n,e,t){return Ux.apply(this,arguments)}(yield hO(t),r,s)})),s.promise}(pi(n),e)}function bO(n,e,t){const r=t.docs.get(e._key),s=new _d(n);return new Fc(n,s,e._key,r,new Yf(t.hasPendingWrites,t.fromCache),e.converter)}const A3={maxAttempts:5};class TR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wf(e)}set(e,t,r){this._verifyNotCommitted();const s=vd(e,this._firestore),u=JD(s.converter,t,r),l=zD(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,cr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=vd(e,this._firestore);let l;return l="string"==typeof(t=(0,Vn.m9)(t))||t instanceof kc?vO(this._dataReader,"WriteBatch.update",u._key,t,r,s):_O(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vd(e,this._firestore);return this._mutations=this._mutations.concat(new Pc(t._key,cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new je(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vd(n,e){if((n=(0,Vn.m9)(n)).firestore!==e)throw new je(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class S3 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wf(e)}get(e){const t=vd(e,this._firestore),r=new a3(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return Ct();const u=s[0];if(u.isFoundDocument())return new iw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new iw(this._firestore,r,t._key,null,t.converter);throw Ct()})}set(e,t,r){const s=vd(e,this._firestore),u=JD(s.converter,t,r),l=zD(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=vd(e,this._firestore);let l;return l="string"==typeof(t=(0,Vn.m9)(t))||t instanceof kc?vO(this._dataReader,"Transaction.update",u._key,t,r,s):_O(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=vd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vd(e,this._firestore),r=new _d(this._firestore);return super.get(e).then(s=>new Fc(this._firestore,r,t._key,s._document,new Yf(!1,!1),t.converter))}}function DO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function SR(){if(typeof Uint8Array>"u")throw new je("unimplemented","Uint8Arrays are not available in this environment.")}function MR(){if(!function mm(){return typeof atob<"u"}())throw new je("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Jl=Vh.SDK_VERSION,(0,Vh._registerComponent)(new Og.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Pr(new o0(t.getProvider("auth-internal")),new u0(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new je(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(g.options.projectId,_)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,Vh.registerVersion)(n0,"3.13.0",n),(0,Vh.registerVersion)(n0,"3.13.0","esm2017")}();class uw{constructor(e){this._delegate=e}static fromBase64String(e){return MR(),new uw(Su.fromBase64String(e))}static fromUint8Array(e){return SR(),new uw(Su.fromUint8Array(e))}toBase64(){return MR(),this._delegate.toBase64()}toUint8Array(){return SR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function TO(n){return function L3(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class U3{enableIndexedDbPersistence(e,t){return function F4(n,e){aR(n=Fn(n,Pr));const t=pi(n);if(t._uninitializedComponentsProvider)throw new je(_e.FAILED_PRECONDITION,"SDK cache is already specified.");Ji("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new Vm;return oR(t,s,new sO(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function L4(n){aR(n=Fn(n,Pr));const e=pi(n);if(e._uninitializedComponentsProvider)throw new je(_e.FAILED_PRECONDITION,"SDK cache is already specified.");Ji("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Vm;return oR(e,r,new jN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function U4(n){if(n._initialized&&!n._terminated)throw new je(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ei;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!po.D())return Promise.resolve();const s=r+"main";yield po.delete(s)}),function(r){return t.apply(this,arguments)})(QM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class xR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ji("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function nR(n,e,t,r={}){var s;const u=(n=Fn(n,ew))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let g,_;if("string"==typeof r.mockUserToken)g=r.mockUserToken,_=Gr.MOCK_USER;else{g=(0,Vn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new je(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Gr(I)}n._authCredentials=new QS(new s0(g,_))}}(this._delegate,e,t,r)}enableNetwork(){return function B4(n){return function b4(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield GN(n),t=yield zN(n);return e.setNetworkEnabled(!0),function(r){const s=ct(r);return s.vu.delete(0),Q0(s)}(t)}))}(pi(n=Fn(n,Pr)))}(this._delegate)}disableNetwork(){return function j4(n){return function D4(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield GN(n),t=yield zN(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(s){const u=ct(s);u.vu.add(0),yield Pm(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(pi(n=Fn(n,Pr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,QN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function V4(n){return function(e){const t=new ei;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function a4(n,e){return Hx.apply(this,arguments)}(yield hO(e),t)})),t.promise}(pi(n=Fn(n,Pr)))}(this._delegate)}onSnapshotsInSync(e){return function _3(n,e){return function S4(n,e){const t=new LD(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield Bm(n),s=t,ct(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield Bm(n),s=t,void ct(r).ku.delete(s);var r,s}))}}(pi(n=Fn(n,Pr)),mO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hm(this,rR(this._delegate,e))}catch(t){throw Ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wo(this,$D(this._delegate,e))}catch(t){throw Ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xs(this,function P4(n,e){if(n=Fn(n,ew),pO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new je(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,(t=e,new zo(Rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function M3(n,e,t){n=Fn(n,Pr);const r=Object.assign(Object.assign({},A3),t);return function(s){if(s.maxAttempts<1)throw new je(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const g=new ei;return s.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const _=yield function qN(n){return VD(n).then(e=>e.datastore)}(s);new C4(s.asyncQueue,_,l,u,g).run()})),g.promise}(pi(n),s=>e(new S3(n,s)),r)}(this._delegate,t=>e(new OR(this,t)))}batch(){return pi(this._delegate),new PR(new TR(this._delegate,e=>$m(this._delegate,e)))}loadBundle(e){return function $4(n,e){const t=pi(n=Fn(n,Pr)),r=new R4;return function M4(n,e,t,r){const s=function(u,l){let g;return g="string"==typeof u?gD().encode(u):u,_=function(_,I){if(_ instanceof Uint8Array)return $N(_,I);if(_ instanceof ArrayBuffer)return $N(new Uint8Array(_),I);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new w4(_,l);var _}(t,Y0(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function _4(n,e,t){const r=ct(n);var s;(s=(0,fe.Z)(function*(u,l,g){try{const _=yield l.getMetadata();if(yield function($,J){const we=ct($),Fe=c(J.createTime);return we.persistence.runTransaction("hasNewerBundle","readonly",Le=>we.qs.getBundleMetadata(Le,J.id)).then(Le=>!!Le&&Le.createTime.compareTo(Fe)>=0)}(u.localStore,_))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:($=_).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);g._updateProgress(PN(_));const I=new QL(_,u.localStore,l.serializer);let D=yield l.bc();for(;D;){const $=yield I.zu(D);$&&g._updateProgress($),D=yield l.bc()}const S=yield I.complete();return yield Rc(u,S.Ju,void 0),yield function($,J){const we=ct($);return we.persistence.runTransaction("Save bundle","readwrite",Fe=>we.qs.saveBundleMetadata(Fe,J))}(u.localStore,_),g._completeWith(S.progress),Promise.resolve(S.Hu)}catch(_){return Ji("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var $}),function(u,l,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield hO(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function H4(n,e){return function x4(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const s=ct(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield BD(n),e)}))}(pi(n=Fn(n,Pr)),e).then(t=>t?new ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new xs(this,t):null)}}class XD extends IO{constructor(e){super(),this.firestore=e}convertBytes(e){return new uw(new Su(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Wo.forKey(t,this.firestore,null)}}class OR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new XD(e)}get(e){const t=Jf(e);return this._delegate.get(t).then(r=>new cw(this._firestore,new Fc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Jf(e);return r?(DO("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Jf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Jf(e);return this._delegate.delete(t),this}}class PR{constructor(e){this._delegate=e}set(e,t,r){const s=Jf(e);return r?(DO("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Jf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Jf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new aw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Qf.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Qf(e,new XD(e),t),s.set(t,u)),u}}Qf.INSTANCES=new WeakMap;class Wo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Wo(t,new Or(t._delegate,r,new ut(e)))}static forKey(e,t,r){return new Wo(t,new Or(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hm(this.firestore,rR(this._delegate,e))}catch(t){throw Ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Vn.m9)(e))instanceof Or&&iR(this._delegate,e)}set(e,t){t=DO("DocumentReference.set",t);try{return t?IR(this._delegate,e,t):IR(this._delegate,e)}catch(r){throw Ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?bR(this._delegate,e):bR(this._delegate,e,t,...r)}catch(s){throw Ms(s,"updateDoc()","DocumentReference.update()")}}delete(){return function m3(n){return $m(Fn(n.firestore,Pr),[new Pc(n._key,cr.none())])}(this._delegate)}onSnapshot(...e){const t=NR(e),r=RR(e,s=>new cw(this.firestore,new Fc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return DR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function d3(n){n=Fn(n,Or);const e=Fn(n.firestore,Pr),t=pi(e),r=new _d(e);return function T4(n,e){const t=new ei;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(s,u,l){try{const g=yield function(_,I){const D=ct(_);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,I))}(s,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new je(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=km(g,`Failed to get document '${u} from cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield BD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Fc(e,r,n._key,s,new Yf(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function h3(n){n=Fn(n,Or);const e=Fn(n.firestore,Pr);return ZN(pi(e),n._key,{source:"server"}).then(t=>bO(e,n,t))}(this._delegate):function l3(n){n=Fn(n,Or);const e=Fn(n.firestore,Pr);return ZN(pi(e),n._key).then(t=>bO(e,n,t))}(this._delegate),t.then(r=>new cw(this.firestore,new Fc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Wo(this.firestore,this._delegate.withConverter(e?Qf.getInstance(this.firestore,e):null))}}function Ms(n,e,t){return n.message=n.message.replace(e,t),n}function NR(n){for(const e of n)if("object"==typeof e&&!TO(e))return e;return{}}function RR(n,e){var t,r;let s;return s=TO(n[0])?n[0]:TO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class cw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return CR(this._delegate,e._delegate)}}class lw extends cw{data(e){const t=this._delegate.data(e);return function Cb(n,e){n||Ct()}(void 0!==t),t}}class xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XD(e)}where(e,t,r){try{return new xs(this.firestore,md(this._delegate,function X4(n,e,t){const r=e,s=WD("where",n);return ow._create(s,r,t)}(e,t,r)))}catch(s){throw Ms(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xs(this.firestore,md(this._delegate,function e3(n,e="asc"){const t=e,r=WD("orderBy",n);return CO._create(r,t)}(e,t)))}catch(r){throw Ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xs(this.firestore,md(this._delegate,function t3(n){return eR("limit",n),KD._create("limit",n,"F")}(e)))}catch(t){throw Ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xs(this.firestore,md(this._delegate,function n3(n){return eR("limitToLast",n),KD._create("limitToLast",n,"L")}(e)))}catch(t){throw Ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xs(this.firestore,md(this._delegate,function r3(...n){return YD._create("startAt",n,!0)}(...e)))}catch(t){throw Ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xs(this.firestore,md(this._delegate,function i3(...n){return YD._create("startAfter",n,!1)}(...e)))}catch(t){throw Ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xs(this.firestore,md(this._delegate,function s3(...n){return QD._create("endBefore",n,!1)}(...e)))}catch(t){throw Ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xs(this.firestore,md(this._delegate,function o3(...n){return QD._create("endAt",n,!0)}(...e)))}catch(t){throw Ms(t,"endAt()","Query.endAt()")}}isEqual(e){return gO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function p3(n){n=Fn(n,ts);const e=Fn(n.firestore,Pr),t=pi(e),r=new _d(e);return function A4(n,e){const t=new ei;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(s,u,l){try{const g=yield xD(s,u,!0),_=new kN(u,g.ir),I=_.sc(g.documents),D=_.applyChanges(I,!1);l.resolve(D.snapshot)}catch(g){const _=km(g,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield BD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new yd(e,r,n,s))}(this._delegate):"server"===e?.source?function g3(n){n=Fn(n,ts);const e=Fn(n.firestore,Pr),t=pi(e),r=new _d(e);return WN(t,n._query,{source:"server"}).then(s=>new yd(e,r,n,s))}(this._delegate):function f3(n){n=Fn(n,ts);const e=Fn(n.firestore,Pr),t=pi(e),r=new _d(e);return gR(n._query),WN(t,n._query).then(s=>new yd(e,r,n,s))}(this._delegate),t.then(r=>new AO(this.firestore,new yd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=NR(e),r=RR(e,s=>new AO(this.firestore,new yd(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return DR(this._delegate,t,r)}withConverter(e){return new xs(this.firestore,this._delegate.withConverter(e?Qf.getInstance(this.firestore,e):null))}}class B3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new lw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new lw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new B3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new lw(this._firestore,r))})}isEqual(e){return CR(this._delegate,e._delegate)}}class Hm extends xs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Wo(this.firestore,e):null}doc(e){try{return new Wo(this.firestore,void 0===e?$D(this._delegate):$D(this._delegate,e))}catch(t){throw Ms(t,"doc()","CollectionReference.doc()")}}add(e){return function y3(n,e){const t=Fn(n.firestore,Pr),r=$D(n),s=JD(n.converter,e);return $m(t,[zD(Wf(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Wo(this.firestore,t))}isEqual(e){return iR(this._delegate,e._delegate)}withConverter(e){return new Hm(this.firestore,this._delegate.withConverter(e?Qf.getInstance(this.firestore,e):null))}}function Jf(n){return Fn(n,Or)}class SO{constructor(...e){this._delegate=new kc(...e)}static documentId(){return new SO(Mr.keyField().canonicalString())}isEqual(e){return(e=(0,Vn.m9)(e))instanceof kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function O3(){return new yO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xf(e)}static delete(){const e=function x3(){return new nw("deleteField")}();return e._methodName="FieldValue.delete",new Xf(e)}static arrayUnion(...e){const t=function P3(...n){return new W4("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xf(t)}static arrayRemove(...e){const t=function N3(...n){return new K4("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xf(t)}static increment(e){const t=function R3(n){return new Y4("increment",n)}(e);return t._methodName="FieldValue.increment",new Xf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const j3={Firestore:xR,GeoPoint:HD,Timestamp:mr,Blob:uw,Transaction:OR,WriteBatch:PR,DocumentReference:Wo,DocumentSnapshot:cw,Query:xs,QueryDocumentSnapshot:lw,QuerySnapshot:AO,CollectionReference:Hm,FieldPath:SO,FieldValue:Xf,setLogLevel:function V3(n){!function KS(n){gu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function H3(n){(function $3(n,e){n.INTERNAL.registerComponent(new Og.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},j3)))})(n,(e,t)=>new xR(e,t,new U3)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(IS.Z);var G3=M(3019),Ko=M(3093),z3=M(4552);class q3 extends Yi.x{constructor(e=1/0,t=1/0,r=z3.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)g=_;g&&r.splice(0,g+1)}}}var Z3=M(3020);function MO(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,Z3.B)({connector:()=>new q3(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function eT(n,e){return(0,Do.m)(e)?(0,Hn.w)(()=>n,e):(0,Hn.w)(()=>n)}var Ia=M(5137);M(4097);var OO=M(4303);const PO=new Map,FR={activated:!1,tokenObservers:[]},J3={initialized:!1,enabled:!1};function ti(n){return PO.get(n)||Object.assign({},FR)}function nT(){return J3}const NO="https://content-firebaseappcheck.googleapis.com/v1",nU="exchangeDebugToken",LR={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class iU{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new Vn.BH,yield function sU(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Vn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ns=new Vn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function RO(n){if(!ti(n).activated)throw ns.create("use-before-activation",{appName:n.name})}function sT(n,e){return FO.apply(this,arguments)}function FO(){return FO=(0,fe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const S=yield s.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(S){throw ns.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw ns.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(S){throw ns.create("fetch-parse-error",{originalErrorMessage:S?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ns.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const I=1e3*Number(_[1]),D=Date.now();return{token:g.token,expireTimeMillis:D+I,issuedAtTimeMillis:D}}),FO.apply(this,arguments)}function UR(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${NO}/projects/${t}/apps/${r}:${nU}?key=${s}`,body:{debug_token:e}}}const cU="firebase-app-check-database",lU=1,dw="firebase-app-check-store";let oT=null;function LO(){return LO=(0,fe.Z)(function*(n,e){const r=(yield function BR(){return oT||(oT=new Promise((n,e)=>{try{const t=indexedDB.open(cU,lU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(ns.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(dw,{keyPath:"compositeKey"})}}catch(t){e(ns.create("storage-open",{originalErrorMessage:t?.message}))}}),oT)}()).transaction(dw,"readwrite"),u=r.objectStore(dw).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var I;g(ns.create("storage-set",{originalErrorMessage:null===(I=_.target.error)||void 0===I?void 0:I.message}))}})}),LO.apply(this,arguments)}const hw=new ma.Yd("@firebase/app-check");function BO(n,e){return(0,Vn.hl)()?function hU(n,e){return function jR(n,e){return LO.apply(this,arguments)}(function HR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{hw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $O(){return nT().enabled}function HO(){return GO.apply(this,arguments)}function GO(){return GO=(0,fe.Z)(function*(){const n=nT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),GO.apply(this,arguments)}const _U={error:"UNKNOWN_ERROR"};function vU(n){return Vn.US.encodeString(JSON.stringify(n),!1)}function aT(n){return zO.apply(this,arguments)}function zO(){return zO=(0,fe.Z)(function*(n,e=!1){const t=n.app;RO(t);const r=ti(t);let u,s=r.token;if(s&&!Gm(s)&&(r.token=void 0,s=void 0),!s){const _=yield r.cachedTokenPromise;_&&(Gm(_)?s=_:yield BO(t,void 0))}if(!e&&s&&Gm(s))return{token:s.token};let g,l=!1;if($O()){r.exchangeTokenPromise||(r.exchangeTokenPromise=sT(UR(t,yield HO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield BO(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield ti(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?hw.warn(_.message):hw.error(_),u=_}return s?u?g=Gm(s)?{token:s.token,internalError:u}:ZR(u):(g={token:s.token},r.token=s,yield BO(t,s)):g=ZR(u),l&&function qR(n,e){const t=ti(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g}),zO.apply(this,arguments)}function qO(){return qO=(0,fe.Z)(function*(n){const e=n.app;RO(e);const{provider:t}=ti(e);if($O()){const r=yield HO(),{token:s}=yield sT(UR(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}}),qO.apply(this,arguments)}function WO(n,e){const t=ti(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function zR(n){const{app:e}=n,t=ti(e);let r=t.tokenRefresher;r||(r=function wU(n){const{app:e}=n;return new iU((0,fe.Z)(function*(){let r;if(r=ti(e).token?yield aT(n,!0):yield aT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ti(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},LR.RETRIAL_MIN_WAIT,LR.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Gm(n){return n.expireTimeMillis-Date.now()>0}function ZR(n){return{token:vU(_U),error:n}}class EU{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ti(this.app);for(const t of e)WO(this.app,t.next);return Promise.resolve()}}const tk="app-check-internal";!function kU(){(0,OO._registerComponent)(new Og.wA("app-check",n=>function CU(n,e){return new EU(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tk).initialize()})),(0,OO._registerComponent)(new Og.wA(tk,n=>function IU(n){return{getToken:e=>aT(n,e),getLimitedUseToken:()=>function GR(n){return qO.apply(this,arguments)}(n),addTokenListener:e=>function ZO(n,e,t,r){const{app:s}=n,u=ti(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Gm(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),zR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>zR(n))}(n,"INTERNAL",e),removeTokenListener:e=>WO(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,OO.registerVersion)("@firebase/app-check","0.8.0")}();class JO{constructor(){return(0,Hr.vb)("app-check")}}typeof window<"u"&&window;var eP=M(120);const rk=new d.OlP("angularfire2.auth.use-emulator"),ik=new d.OlP("angularfire2.auth.settings"),sk=new d.OlP("angularfire2.auth.tenant-id"),ok=new d.OlP("angularfire2.auth.langugage-code"),ak=new d.OlP("angularfire2.auth.use-device-language"),uk=new d.OlP("angularfire.auth.persistence"),ck=(n,e,t,r,s,u,l,g)=>(0,wi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),l)for(const[I,D]of Object.entries(l))_.settings[I]=D;return g&&_.setPersistence(g),_},[t,r,s,u,l,g]);let cT=(()=>{class n{constructor(t,r,s,u,l,g,_,I,D,S,$,J){const we=new Yi.x,Fe=(0,Pt.of)(void 0).pipe((0,Ko.Q)(l.outsideAngular),(0,Hn.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,8661)))),(0,Yt.U)(()=>(0,wi.on)(t,u,r)),(0,Yt.U)(Le=>ck(Le,u,g,I,D,S,_,$)),MO({bufferSize:1,refCount:!1}));if(br(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Pt.of)(null);else{Fe.pipe(jr()).subscribe();const ht=Fe.pipe((0,Hn.w)(jt=>jt.getRedirectResult().then(un=>un,()=>null)),Hr.iC,MO({bufferSize:1,refCount:!1})),Vt=Fe.pipe((0,Hn.w)(jt=>new Si.y(un=>({unsubscribe:u.runOutsideAngular(()=>jt.onAuthStateChanged(Mn=>un.next(Mn),Mn=>un.error(Mn),()=>un.complete()))})))),vt=Fe.pipe((0,Hn.w)(jt=>new Si.y(un=>({unsubscribe:u.runOutsideAngular(()=>jt.onIdTokenChanged(Mn=>un.next(Mn),Mn=>un.error(Mn),()=>un.complete()))}))));this.authState=ht.pipe(eT(Vt),(0,Ia.R)(l.outsideAngular),(0,Ko.Q)(l.insideAngular)),this.user=ht.pipe(eT(vt),(0,Ia.R)(l.outsideAngular),(0,Ko.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Hn.w)(jt=>jt?(0,er.D)(jt.getIdToken()):(0,Pt.of)(null))),this.idTokenResult=this.user.pipe((0,Hn.w)(jt=>jt?(0,er.D)(jt.getIdTokenResult()):(0,Pt.of)(null))),this.credential=(0,G3.T)(ht,we,this.authState.pipe(ci(jt=>!jt))).pipe((0,Yt.U)(jt=>jt?.user?jt:null),(0,Ia.R)(l.outsideAngular),(0,Ko.Q)(l.insideAngular))}return(0,wi.pX)(this,Fe,u,{spy:{apply:(Le,ht,Vt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&Vt.then(vt=>we.next(vt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(wi.Dh),d.LFG(wi.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Hr.HU),d.LFG(rk,8),d.LFG(ik,8),d.LFG(sk,8),d.LFG(ok,8),d.LFG(ak,8),d.LFG(uk,8),d.LFG(JO,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jU=(()=>{class n{constructor(){eP.Z.registerVersion("angularfire",Hr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[cT]}),n})();function lk(n,e){return function $U(n,e=Ih.z){return new Si.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function tP(n,e){return lk(n,e).pipe((0,Yt.U)(t=>({payload:t,type:"query"})))}function lT(n,e){return tP(n,e).pipe(Ua(void 0),lv(),(0,Yt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=s.find(D=>D.doc.ref.isEqual(l.ref)),I=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&I&&JSON.stringify(I.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function dk(n,e,t){return lT(n,t).pipe(ra((r,s)=>function GU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function zU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return nP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return nP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),(0,li.x)(),(0,Yt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function nP(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function hk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class fk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Yt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Ua(void 0),lv(),ci(([r,s])=>s.length>0||!r),(0,Yt.U)(([r,s])=>s),Hr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ra((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hk(e);return dk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}valueChanges(e={}){return tP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Hr.iC)}get(e){return(0,er.D)(this.query.get(e)).pipe(Hr.iC)}add(e){return this.ref.add(e)}doc(e){return new pk(this.ref.doc(e),this.afs)}}class pk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=yk(r,t);return new fk(s,u,this.afs)}snapshotChanges(){return function HU(n,e){return lk(n,e).pipe(Ua(void 0),lv(),(0,Yt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,er.D)(this.ref.get(e)).pipe(Hr.iC)}}class qU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ci(t=>t.length>0),Hr.iC):lT(this.query,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ra((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hk(e);return dk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr.iC)}valueChanges(e={}){return tP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Yt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Hr.iC)}get(e){return(0,er.D)(this.query.get(e)).pipe(Hr.iC)}}const gk=new d.OlP("angularfire2.enableFirestorePersistence"),mk=new d.OlP("angularfire2.firestore.persistenceSettings"),ZU=new d.OlP("angularfire2.firestore.settings"),WU=new d.OlP("angularfire2.firestore.use-emulator");function yk(n,e=(t=>t)){return{query:e(n),ref:n}}let dT=(()=>{class n{constructor(t,r,s,u,l,g,_,I,D,S,$,J,we,Fe,Le,ht,Vt){this.schedulers=_;const vt=(0,wi.on)(t,g,r),jt=D;S&&ck(vt,g,$,we,Fe,Le,J,ht),[this.firestore,this.persistenceEnabled$]=(0,wi.cc)(`${vt.name}.firestore`,"AngularFirestore",vt.name,()=>{const un=g.runOutsideAngular(()=>vt.firestore());if(u&&un.settings(u),jt&&un.useEmulator(...jt),s&&!br(l)){const Mn=()=>{try{return(0,er.D)(un.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(rs){return typeof console<"u"&&console.warn(rs),(0,Pt.of)(!1)}};return[un,g.runOutsideAngular(Mn)]}return[un,(0,Pt.of)(!1)]},[u,jt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=yk(s,r),g=this.schedulers.ngZone.run(()=>u);return new fk(g,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new qU(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new pk(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(wi.Dh),d.LFG(wi.xv,8),d.LFG(gk,8),d.LFG(ZU,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Hr.HU),d.LFG(mk,8),d.LFG(WU,8),d.LFG(cT,8),d.LFG(rk,8),d.LFG(ik,8),d.LFG(sk,8),d.LFG(ok,8),d.LFG(ak,8),d.LFG(uk,8),d.LFG(JO,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KU=(()=>{class n{constructor(){eP.Z.registerVersion("angularfire",Hr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:gk,useValue:!0},{provide:mk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[dT]}),n})();var YU=M(6710);let Mu=(()=>{class n{constructor(t,r){this.afs=t,this.db=r,this._loggedInUser$=new ui.X(JSON.parse(sessionStorage.getItem("loggedInUser"))||null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,fe.Z)(function*(){try{const r=yield t.afs.signInWithPopup(new YU.V);return yield t.createOrUpdateUserOnDB(r),sessionStorage.setItem("loggedInUser",JSON.stringify(r)),t._loggedInUser$.next(r),r}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,fe.Z)(function*(){try{const s=yield r.afs.signInWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(s,t),sessionStorage.setItem("loggedInUser",JSON.stringify(s)),r._loggedInUser$.next(s),s}catch(s){throw console.error(s.message),s.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,fe.Z)(function*(){try{const s=yield r.afs.createUserWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(s,t),sessionStorage.setItem("loggedInUser",JSON.stringify(s)),r._loggedInUser$.next(s),s}catch(s){throw console.error(s.message),s.message}})()}logOut(){var t=this;return(0,fe.Z)(function*(){try{yield t.afs.signOut(),sessionStorage.removeItem("loggedInUser"),t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}createOrUpdateUserOnDB(t,r=null){var s=this;return(0,fe.Z)(function*(){var u;s.db.collection("users").doc(t.user.uid).get().pipe(Zn(1)).subscribe({next:(u=(0,fe.Z)(function*(l){if(l.exists){const g=l.data();g._id||(yield s.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),g.fullName||(yield s.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.additionalUserInfo?.profile?.name})),g.imgUrl||(yield s.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),g.followedByUsers||(yield s.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),g.followingUsers||(yield s.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield s.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.additionalUserInfo?.profile?.name,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[]})}),function(g){return u.apply(this,arguments)}),error:u=>{console.error(u)}})})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(cT),d.LFG(dT))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_k=(()=>{class n{constructor(t,r){this.db=t,this.authService=r,this._posts$=new ui.X([]),this.posts$=this._posts$.asObservable()}getPosts(){return this.db.collection("posts").valueChanges().pipe((0,Hn.w)(t=>{let r=t.reduce((u,l)=>u.concat(l.likedByUsers||[]),[]);return ta(Array.from(new Set(r)).map(u=>this.authService.getUserById(u))).pipe((0,Yt.U)(u=>t.map(l=>(l.likedByUsers=l.likedByUsers?l.likedByUsers.map(g=>u.find(_=>_._id===g)):[],l))),ia(()=>{console.log("posts",t),this._posts$.next([...t])}),function Fo(n=1/0){let e;e=n&&"object"==typeof n?n:{count:n};const{count:t=1/0,delay:r,resetOnSuccess:s=!1}=e;return t<=0?ea.y:(0,Bi.e)((u,l)=>{let _,g=0;const I=()=>{let D=!1;_=u.subscribe((0,xi.x)(l,S=>{s&&(g=0),l.next(S)},void 0,S=>{if(g++<t){const $=()=>{_?(_.unsubscribe(),_=null,I()):D=!0};if(null!=r){const J="number"==typeof r?function ig(n=0,e,t=Ih.P){let r=-1;return null!=e&&((0,I1.K)(e)?t=e:r=e),new Si.y(s=>{let u=function t_(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let l=0;return t.schedule(function(){s.closed||(s.next(l++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(r):(0,Hu.Xf)(r(S,g)),we=(0,xi.x)(l,()=>{we.unsubscribe(),$()},()=>{l.complete()});J.subscribe(we)}else $()}else l.error(S)})),D&&(_.unsubscribe(),_=null,I())};I()})}(1),os(this._handleError))}))}toggleLike(t,r){var s=this;return(0,fe.Z)(function*(){t?yield s.addLike(r):yield s.removeLike(r)})()}addLike(t){var r=this;return(0,fe.Z)(function*(){const s=xg(t);r.authService.loggedInUser$.pipe(Zn(1)).subscribe({next:u=>{const l=u.user.uid;var g;r.db.collection("users").doc(l).valueChanges().pipe(Zn(1)).subscribe({next:(g=(0,fe.Z)(function*(_){const I=_,D=s.likedByUsers.slice();D.push(I),s.likedByUsers=s.likedByUsers.map(we=>we._id),s.likedByUsers.push(l),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...s.likedByUsers]});const S=r._posts$.value,$=S.findIndex(we=>we._id===t._id),J={...s,likedByUsers:[...D]};S.splice($,1,J),r._posts$.next([...S])}),function(I){return g.apply(this,arguments)})})}})})()}removeLike(t){var r=this;return(0,fe.Z)(function*(){const s=xg(t);var u;r.authService.loggedInUser$.pipe(Zn(1)).subscribe({next:(u=(0,fe.Z)(function*(l){const g=l.user.uid,_=s.likedByUsers.findIndex($=>$._id===g);s.likedByUsers.splice(_,1),s.likedByUsers=s.likedByUsers.map($=>$._id),yield r.db.collection("posts").doc(s._id).update({likedByUsers:[...s.likedByUsers]});const I=r._posts$.value,D=I.findIndex($=>$._id===t._id);t.likedByUsers.splice(_,1);const S={...t,likedByUsers:[...t.likedByUsers]};I.splice(D,1,S),r._posts$.next([...I])}),function(g){return u.apply(this,arguments)})})})()}_handleError(t){return console.log("err:",t),na(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(dT),d.LFG(Mu))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hT(n,e){const t="object"==typeof e;return new Promise((r,s)=>{let l,u=!1;n.subscribe({next:g=>{l=g,u=!0},error:s,complete:()=>{u?r(l):t?r(e.defaultValue):s(new to)}})})}let QU=(()=>{class n{constructor(t,r){this.authService=t,this.db=r}toggleFollow(t,r,s){var u=this;return(0,fe.Z)(function*(){t?yield u.addFollow(r,s):yield u.removeFollow(r,s)})()}addFollow(t,r){var s=this;return(0,fe.Z)(function*(){var I;s.authService.loggedInUser$.pipe(Zn(1)).subscribe({next:(I=(0,fe.Z)(function*(D){yield s.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,D?.user?.uid]})}),function(S){return I.apply(this,arguments)})});const u=s.authService.loggedInUser$.pipe(Zn(1)),l=yield hT(u),g=s.db.collection("users").doc(l?.user?.uid).valueChanges().pipe(Zn(1)),_=yield hT(g);yield s.db.collection("users").doc(_._id).update({followingUsers:[..._.followingUsers,t._id]})})()}removeFollow(t,r){var s=this;return(0,fe.Z)(function*(){const u=s.authService.loggedInUser$.pipe(Zn(1)),l=yield hT(u),g=s.db.collection("users").doc(l?.user?.uid).valueChanges().pipe(Zn(1)),_=yield hT(g),I=xg(t.followedByUsers),D=I.findIndex($=>$===l?.user?.uid);if(-1===D)return;I.splice(D,1),yield s.db.collection("users").doc(t._id).update({followedByUsers:I});const S=_.followingUsers.findIndex($=>$===t._id);_.followingUsers.splice(S,1),yield s.db.collection("users").doc(_._id).update({followingUsers:_.followingUsers})})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Mu),d.LFG(dT))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JU=(()=>{class n{transform(t){const s=Math.floor(Date.now()/1e3)-t;return s<60?"just now":s<3600?`${Math.floor(s/60)}m`:s<86400?`${Math.floor(s/3600)}h`:`${Math.floor(s/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function XU(n,e){if(1&n&&(d.TgZ(0,"div",1)(1,"div",2),d._UZ(2,"img",3),d.TgZ(3,"h5"),d._uU(4),d.TgZ(5,"span"),d._uU(6),d.ALo(7,"timeAgo"),d.qZA()()(),d.TgZ(8,"button",4),d.O4$(),d.TgZ(9,"svg",5),d._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),d.qZA()()()),2&n){const t=d.oxw();d.xp6(2),d.Q6J("src",t.creator.imgUrl,d.LSH),d.xp6(2),d.hij(" ",t.creator.fullName," "),d.xp6(2),d.hij("\u2022 ",d.lcZ(7,3,t.post.createdAt),"")}}let eV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"]],template:function(r,s){1&r&&d.YNc(0,XU,13,5,"div",0),2&r&&d.Q6J("ngIf",s.creator)},dependencies:[Ii,JU],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})();var tV=M(305);function vk(n,e){const t="object"==typeof e;return new Promise((r,s)=>{const u=new tV.Hp({next:l=>{r(l),u.unsubscribe()},error:s,complete:()=>{t?r(e.defaultValue):s(new to)}});n.subscribe(u)})}const nV=function(n){return{"btn-toggle-follow":!0,following:n}};let rV=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new d.vpe,this.isFollowClicked=!1}ngOnInit(){var t=this;return(0,fe.Z)(function*(){const r=t.authService.getUserById(t.user._id),s=yield vk(r),u=t.authService.loggedInUser$,l=yield vk(u);t.isFollowClicked=!!s.followedByUsers.find(g=>g===l?.user?.uid)})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.user,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Mu))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow"},decls:6,vars:6,consts:[["alt","user",3,"src"],[3,"ngClass","click"]],template:function(r,s){1&r&&(d.TgZ(0,"li"),d._UZ(1,"img",0),d.TgZ(2,"h5"),d._uU(3),d.qZA(),d.TgZ(4,"button",1),d.NdJ("click",function(){return s.toggleFollow()}),d._uU(5),d.qZA()()),2&r&&(d.xp6(1),d.Q6J("src",s.user.imgUrl,d.LSH),d.xp6(2),d.Oqu(s.user.fullName),d.xp6(1),d.Q6J("ngClass",d.VKq(4,nV,s.isFollowClicked)),d.xp6(1),d.hij(" ",s.isFollowClicked?"Following":"Follow"," "))},dependencies:[Wr],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;border-radius:50%}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function iV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-user-row",7),d.NdJ("onToggleFollow",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleFollow.emit(s))}),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw();d.Q6J("post",r.post)("user",t)}}let sV=(()=>{class n{constructor(){this.onToggleLikedByUsersModal=new d.vpe,this.onToggleFollow=new d.vpe}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow"},decls:12,vars:1,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","user","onToggleFollow"]],template:function(r,s){1&r&&(d.TgZ(0,"article",0)(1,"div",1)(2,"h3"),d._uU(3,"Likes"),d.qZA(),d.TgZ(4,"button",2),d.NdJ("click",function(){return s.toggleLikedByUsersModal()}),d.O4$(),d.TgZ(5,"svg",3)(6,"title"),d._uU(7,"Close"),d.qZA(),d._UZ(8,"polyline",4)(9,"line",5),d.qZA()()(),d.kcU(),d.TgZ(10,"ul"),d.YNc(11,iV,1,2,"liked-by-user-row",6),d.qZA()()),2&r&&(d.xp6(11),d.Q6J("ngForOf",s.post.likedByUsers))},dependencies:[ws,rV],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:20em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1em;top:.9em;cursor:pointer;background-color:transparent;border:none}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em}"]})}return n})();function oV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",20),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.toggleLike())}),d.O4$(),d.TgZ(1,"svg",21)(2,"title"),d._uU(3,"Like"),d.qZA(),d._UZ(4,"path",22),d.qZA()()}}function aV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",20),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.toggleLike())}),d.O4$(),d.TgZ(1,"svg",23)(2,"title"),d._uU(3,"Unlike"),d.qZA(),d._UZ(4,"path",24),d.qZA()()}}function uV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span"),d._uU(1," and "),d.TgZ(2,"span",29),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.isLikedByUsersModalShown=!s.isLikedByUsersModalShown)}),d._uU(3),d.ALo(4,"number"),d.qZA()()}if(2&n){const t=d.oxw(2);d.xp6(3),d.AsE("",d.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function cV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-users-list",30),d.NdJ("onToggleLikedByUsersModal",function(s){d.CHM(t);const u=d.oxw(2);return d.KtG(u.toggleLikedByUsersModal(s))})("onToggleFollow",function(s){d.CHM(t);const u=d.oxw(2);return d.KtG(u.onToggleFollow.emit(s))}),d.qZA()}if(2&n){const t=d.oxw(2);d.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function lV(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",25),d._UZ(1,"img",26),d.TgZ(2,"p"),d._uU(3," Liked by "),d.TgZ(4,"span",27),d._uU(5),d.qZA(),d.YNc(6,uV,5,4,"span",19),d.qZA(),d.YNc(7,cV,1,2,"liked-by-users-list",28),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("src",t.post.likedByUsers[0].imgUrl,d.LSH),d.xp6(4),d.Oqu(t.post.likedByUsers[0].fullName),d.xp6(1),d.Q6J("ngIf",t.post.likedByUsers.length>1),d.xp6(1),d.Q6J("ngIf",t.isLikedByUsersModalShown)}}function dV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",33),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.isMoreClicked=!s.isMoreClicked)}),d._uU(1," more "),d.qZA()}}function hV(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",31),d._uU(2),d.qZA(),d._uU(3),d.ALo(4,"slice"),d.YNc(5,dV,2,0,"button",32),d.qZA()),2&n){const t=d.oxw();d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.AsE(" ",d.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120&&"..."," "),d.xp6(2),d.Q6J("ngIf",t.post.content.length>=120)}}function fV(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",31),d._uU(2),d.qZA(),d._uU(3),d.qZA()),2&n){const t=d.oxw();d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.hij(" ",t.post.content," ")}}let pV=(()=>{class n{constructor(t){this.authService=t,this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.isLikeClicked=!1,this.isToggleLikeProcessing=!1}ngOnInit(){this.authService.getUserById(this.post.creatorId).pipe(Zn(1)).subscribe({next:r=>{this.creator=r}}),this.authService.loggedInUser$.pipe(Zn(1)).subscribe({next:r=>{this.loggedInUser=r}}),this.post.likedByUsers.find(r=>r._id===this.loggedInUser.user.uid)&&(this.isLikeClicked=!0)}toggleLike(){this.isToggleLikeProcessing||(this.isToggleLikeProcessing=!0,setTimeout(()=>{this.isToggleLikeProcessing=!1},2e3),this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:xg(this.post),isLikeClicked:this.isLikeClicked}))}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Mu))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow"},decls:28,vars:8,consts:[[1,"post-card"],[3,"post","creator"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment"],["aria-label","Comment","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],[1,"content"],[4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24",1,"x1lliihq","x1n2onr6"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src"],[1,"username"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"creatorFullName"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"]],template:function(r,s){1&r&&(d.TgZ(0,"li",0),d._UZ(1,"post-header",1)(2,"img",2),d.TgZ(3,"div",3)(4,"div",4)(5,"div",5),d.YNc(6,oV,5,0,"button",6),d.YNc(7,aV,5,0,"button",6),d.TgZ(8,"button",7),d.O4$(),d.TgZ(9,"svg",8)(10,"title"),d._uU(11,"Comment"),d.qZA(),d._UZ(12,"path",9),d.qZA()(),d.kcU(),d.TgZ(13,"button",10),d.O4$(),d.TgZ(14,"svg",11)(15,"title"),d._uU(16,"Share PostModel"),d.qZA(),d._UZ(17,"line",12)(18,"polygon",13),d.qZA()()(),d.kcU(),d.TgZ(19,"button",14),d.O4$(),d.TgZ(20,"svg",15)(21,"title"),d._uU(22,"Save"),d.qZA(),d._UZ(23,"polygon",16),d.qZA()()(),d.YNc(24,lV,8,4,"div",17),d.kcU(),d.TgZ(25,"div",18),d.YNc(26,hV,6,8,"p",19),d.YNc(27,fV,4,2,"p",19),d.qZA()()()),2&r&&(d.xp6(1),d.Q6J("post",s.post)("creator",s.creator),d.xp6(1),d.Q6J("src",s.post.imgUrl,d.LSH),d.xp6(4),d.Q6J("ngIf",!s.isLikeClicked),d.xp6(1),d.Q6J("ngIf",s.isLikeClicked),d.xp6(17),d.Q6J("ngIf",s.post.likedByUsers.length),d.xp6(2),d.Q6J("ngIf",!s.isMoreClicked),d.xp6(1),d.Q6J("ngIf",s.isMoreClicked))},dependencies:[Ii,eV,sV,Qr,Xe],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:.2em;border:1px solid rgba(245,245,245,.44)}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}"]})}return n})();function gV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"post-card",2),d.NdJ("onToggleLike",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleLike.emit(s))})("onToggleFollow",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleFollow.emit(s))}),d.qZA()}2&n&&d.Q6J("post",e.$implicit)}let mV=(()=>{class n{constructor(){this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow"},decls:3,vars:1,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","onToggleLike","onToggleFollow"]],template:function(r,s){1&r&&(d.TgZ(0,"section",0)(1,"ul"),d.YNc(2,gV,1,1,"post-card",1),d.qZA()()),2&r&&(d.xp6(2),d.Q6J("ngForOf",s.posts))},dependencies:[ws,pV],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function yV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"post-list",2),d.NdJ("onToggleLike",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleLike(s))})("onToggleFollow",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleFollow(s))}),d.qZA()()}if(2&n){const t=e.ngIf;d.xp6(1),d.Q6J("posts",t)}}let _V=(()=>{class n{constructor(t,r,s){this.postService=t,this.authService=r,this.userService=s}ngOnInit(){this.posts$=this.postService.posts$}onToggleLike(t){var r=this;return(0,fe.Z)(function*(){yield r.postService.toggleLike(t.isLikeClicked,t.post)})()}onToggleFollow(t){var r=this;this.authService.getUserById(t.user._id).pipe(Zn(1)).subscribe(function(){var s=(0,fe.Z)(function*(u){t.user=u,yield r.userService.toggleFollow(t.isFollowClicked,t.user,t.post)});return function(u){return s.apply(this,arguments)}}())}ngOnDestroy(){}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(_k),d.Y36(Mu),d.Y36(QU))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["home-page-page"]],decls:2,vars:3,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow"]],template:function(r,s){1&r&&(d.YNc(0,yV,2,1,"section",0),d.ALo(1,"async")),2&r&&d.Q6J("ngIf",d.lcZ(1,1,s.posts$))},dependencies:[Ii,mV,Qo]})}return n})(),wk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq))};static#t=this.\u0275dir=d.lG2({type:n})}return n})(),ep=(()=>{class n extends wk{static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=d.n5z(n)))(s||n)}}();static#t=this.\u0275dir=d.lG2({type:n,features:[d.qOj]})}return n})();const xu=new d.OlP("NgValueAccessor"),EV={provide:xu,useExisting:(0,d.Gpc)(()=>fT),multi:!0},IV=new d.OlP("CompositionEventMode");let fT=(()=>{class n extends wk{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CV(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(IV,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&d.NdJ("input",function(l){return s._handleInput(l.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(l){return s._compositionEnd(l.target.value)})},features:[d._Bn([EV]),d.qOj]})}return n})();const _s=new d.OlP("NgValidators"),Ed=new d.OlP("NgAsyncValidators");function Ok(n){return null!=n}function Pk(n){return(0,d.QGY)(n)?(0,er.D)(n):n}function Nk(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Rk(n,e){return e.map(t=>t(n))}function kk(n){return n.map(e=>function DV(n){return!n.validate}(e)?e:t=>e.validate(t))}function rP(n){return null!=n?function Fk(n){if(!n)return null;const e=n.filter(Ok);return 0==e.length?null:function(t){return Nk(Rk(t,e))}}(kk(n)):null}function iP(n){return null!=n?function Lk(n){if(!n)return null;const e=n.filter(Ok);return 0==e.length?null:function(t){return function vV(...n){const e=(0,Xs.jO)(n),{args:t,keys:r}=ur(n),s=new Si.y(u=>{const{length:l}=t;if(!l)return void u.complete();const g=new Array(l);let _=l,I=l;for(let D=0;D<l;D++){let S=!1;(0,Hu.Xf)(t[D]).subscribe((0,xi.x)(u,$=>{S||(S=!0,I--),g[D]=$},()=>_--,void 0,()=>{(!_||!S)&&(I||u.next(r?eo(r,g):g),u.complete())}))}});return e?s.pipe(ju(e)):s}(Rk(t,e).map(Pk)).pipe((0,Yt.U)(Nk))}}(kk(n)):null}function Uk(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function sP(n){return n?Array.isArray(n)?n:[n]:[]}function gT(n,e){return Array.isArray(n)?n.includes(e):n===e}function jk(n,e){const t=sP(e);return sP(n).forEach(s=>{gT(t,s)||t.push(s)}),t}function $k(n,e){return sP(e).filter(t=>!gT(n,t))}class Hk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=iP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Os extends Hk{get formDirective(){return null}get path(){return null}}class Cd extends Hk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gk{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zk=(()=>{class n extends Gk{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Cd,2))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&d.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[d.qOj]})}return n})(),qk=(()=>{class n extends Gk{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Os,10))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){2&r&&d.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[d.qOj]})}return n})();const fw="VALID",yT="INVALID",zm="PENDING",pw="DISABLED";function uP(n){return(_T(n)?n.validators:n)||null}function cP(n,e){return(_T(e)?e.asyncValidators:n)||null}function _T(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Yk{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===fw}get invalid(){return this.status===yT}get pending(){return this.status==zm}get disabled(){return this.status===pw}get enabled(){return this.status!==pw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(jk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($k(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($k(e,this._rawAsyncValidators))}hasValidator(e){return gT(this._rawValidators,e)}hasAsyncValidator(e){return gT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=zm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=fw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fw||this.status===zm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pw:fw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=zm,this._hasOwnPendingAsyncValidator=!0;const t=Pk(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?pw:this.errors?yT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zm)?zm:this._anyControlsHaveStatus(yT)?yT:fw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_T(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function MV(n){return Array.isArray(n)?rP(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function xV(n){return Array.isArray(n)?iP(n):n||null}(this._rawAsyncValidators)}}class lP extends Yk{constructor(e,t,r){super(uP(t),cP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Kk(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Wk(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const tp=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>gw}),gw="always";function mw(n,e,t=gw){dP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function NV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Qk(n,e)})}(n,e),function kV(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function RV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Qk(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function PV(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ET(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dP(n,e){const t=function Vk(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Uk(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Bk(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Uk(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();ET(e._rawValidators,s),ET(e._rawAsyncValidators,s)}function Qk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const BV={provide:Os,useExisting:(0,d.Gpc)(()=>IT)},yw=(()=>Promise.resolve())();let IT=(()=>{class n extends Os{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new lP({},rP(t),iP(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){yw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),mw(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){yw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){yw.then(()=>{const r=this._findContainer(t.path),s=new lP({});(function Jk(n,e){dP(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){yw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){yw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Xk(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(_s,10),d.Y36(Ed,10),d.Y36(tp,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){1&r&&d.NdJ("submit",function(l){return s.onSubmit(l)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([BV]),d.qOj]})}return n})();function eF(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function tF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const nF=class extends Yk{constructor(e=null,t,r){super(uP(t),cP(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_T(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=tF(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){tF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},HV={provide:Cd,useExisting:(0,d.Gpc)(()=>gP)},sF=(()=>Promise.resolve())();let gP=(()=>{class n extends Cd{constructor(t,r,s,u,l,g){super(),this._changeDetectorRef=l,this.callSetDisabledState=g,this.control=new nF,this._registered=!1,this.name="",this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function pP(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===fT?t=u:function UV(n){return Object.getPrototypeOf(n.constructor)===ep}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function fP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){mw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){sF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,d.VuI)(r);sF.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function vT(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Os,9),d.Y36(_s,10),d.Y36(Ed,10),d.Y36(xu,10),d.Y36(d.sBO,8),d.Y36(tp,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([HV]),d.qOj,d.TTD]})}return n})(),oF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),uF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();const mP=new d.OlP("NgModelWithFormControlWarning");let DF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[uF]})}return n})(),p5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:tp,useValue:t.callSetDisabledState??gw}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[DF]})}return n})(),g5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:mP,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:tp,useValue:t.callSetDisabledState??gw}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[DF]})}return n})();function m5(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.onLogInWithEmailAndPassword())}),d.TgZ(1,"input",13),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.email=s)}),d.qZA(),d.TgZ(2,"input",14),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.password=s)}),d.qZA(),d.TgZ(3,"button",15),d._uU(4,"Log in"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}function y5(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.onRegisterWithEmailAndPassword())}),d.TgZ(1,"input",16),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.fullName=s)}),d.qZA(),d.TgZ(2,"input",13),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.email=s)}),d.qZA(),d.TgZ(3,"input",14),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.password=s)}),d.qZA(),d.TgZ(4,"button",17),d._uU(5,"Register"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.fullName),d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}let _5=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0}ngOnInit(){}onLogInWithGoogle(){var t=this;return(0,fe.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(Zn(1)).subscribe({next:s=>{s&&t.router.navigateByUrl("/")},error:s=>{console.error(s)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,fe.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(Zn(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,fe.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(Zn(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Mu),d.Y36(Xr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,s){1&r&&(d.TgZ(0,"section",0)(1,"div",1),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()(),d.YNc(4,m5,5,2,"form",4),d.YNc(5,y5,6,3,"form",4),d.kcU(),d.TgZ(6,"p",5),d.NdJ("click",function(){return s.isLogInFormShown=!s.isLogInFormShown}),d._uU(7," Don't you have a user? Register here "),d.qZA(),d.TgZ(8,"button",6),d.NdJ("click",function(){return s.onLogInWithGoogle()}),d.O4$(),d.TgZ(9,"svg",7),d._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),d.qZA(),d.kcU(),d.TgZ(14,"span"),d._uU(15,"Log in with Google"),d.qZA()()()),2&r&&(d.xp6(4),d.Q6J("ngIf",s.isLogInFormShown),d.xp6(1),d.Q6J("ngIf",!s.isLogInFormShown))},dependencies:[Ii,oF,fT,zk,qk,gP,IT],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})(),v5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["message-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,s){1&r&&(d.TgZ(0,"p"),d._uU(1,"message-page works!"),d.qZA())}})}return n})(),w5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,s){1&r&&(d.TgZ(0,"p"),d._uU(1,"notification-page works!"),d.qZA())}})}return n})(),E5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["create-post-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,s){1&r&&(d.TgZ(0,"p"),d._uU(1,"create-post-page works!"),d.qZA())}})}return n})();const _w=()=>{let n=null;return(0,d.f3M)(Mu).loggedInUser$.pipe(Zn(1)).subscribe({next:e=>{n=e}}),!!n||((0,d.f3M)(Xr).navigateByUrl("/login"),!1)},C5=[{path:"",component:_V,canActivate:[_w]},{path:"login",component:_5,canActivate:[()=>{let n=null;return(0,d.f3M)(Mu).loggedInUser$.pipe(Zn(1)).subscribe({next:e=>{n=e}}),!n||((0,d.f3M)(Xr).navigateByUrl("/"),!1)}]},{path:"message",component:v5,canActivate:[_w]},{path:"notification",component:w5,canActivate:[_w]},{path:"create-post",component:E5,canActivate:[_w]},{path:"profile",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["profile"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,s){1&r&&(d.TgZ(0,"p"),d._uU(1,"profile works!"),d.qZA())}})}return n})(),canActivate:[_w]}];let I5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[ng.forRoot(C5,{useHash:!0}),ng]})}return n})();function b5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",31),d.qZA())}function D5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",32),d.qZA())}function T5(n,e){if(1&n&&d._UZ(0,"img",33),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function A5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",34),d._UZ(1,"path",35)(2,"circle",36),d.qZA())}function S5(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",37)(1,"ul")(2,"li",38),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const M5=function(){return{exact:!0}};function x5(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"div",3),d.O4$(),d.TgZ(3,"svg",4),d._UZ(4,"path",5),d.qZA()(),d.kcU(),d.TgZ(5,"nav")(6,"ul")(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8),d.qZA()(),d.kcU(),d.TgZ(10,"li",9),d.O4$(),d.TgZ(11,"svg",10),d._UZ(12,"path",11)(13,"path",12),d.qZA()(),d.kcU(),d.TgZ(14,"li",13,14),d.YNc(16,b5,2,0,"svg",15),d.YNc(17,D5,2,0,"svg",15),d.qZA(),d.TgZ(18,"li",16),d.O4$(),d.TgZ(19,"svg",17),d._UZ(20,"path",18)(21,"line",19)(22,"line",20),d.qZA()(),d.kcU(),d.TgZ(23,"li",21),d.YNc(24,T5,1,1,"img",22),d.YNc(25,A5,3,0,"ng-template",null,23,d.W1O),d.qZA()()()(),d.TgZ(27,"div",24),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.isExtraMenuOpen=!s.isExtraMenuOpen)}),d.O4$(),d.TgZ(28,"svg",25),d._UZ(29,"line",26)(30,"line",27)(31,"line",28),d.qZA(),d.YNc(32,S5,4,0,"div",29),d.qZA()()}if(2&n){const t=d.MAs(15),r=d.MAs(26),s=d.oxw();d.xp6(7),d.Q6J("routerLinkActiveOptions",d.DdM(6,M5)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",s.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",s.isExtraMenuOpen)}}let O5=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,fe.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Mu),d.Y36(Xr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,s){1&r&&d.YNc(0,x5,33,7,"section",0),2&r&&d.Q6J("ngIf",s.user&&s.user.user)},dependencies:[Ii,tg,vh],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.19);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:55px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function P5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",28),d.qZA())}function N5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",29),d.qZA())}function R5(n,e){if(1&n&&d._UZ(0,"img",30),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function k5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",31),d._UZ(1,"path",32)(2,"circle",33),d.qZA())}function F5(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",34)(1,"ul")(2,"li",35),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const L5=function(){return{exact:!0}};function U5(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),d.O4$(),d.TgZ(5,"svg",4),d._UZ(6,"path",5),d.qZA()(),d.kcU(),d.TgZ(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8)(10,"path",9),d.qZA()(),d.kcU(),d.TgZ(11,"li",10,11),d.YNc(13,P5,2,0,"svg",12),d.YNc(14,N5,2,0,"svg",12),d.qZA(),d.TgZ(15,"li",13),d.O4$(),d.TgZ(16,"svg",14),d._UZ(17,"path",15)(18,"line",16)(19,"line",17),d.qZA()(),d.kcU(),d.TgZ(20,"li",18),d.YNc(21,R5,1,1,"img",19),d.YNc(22,k5,3,0,"ng-template",null,20,d.W1O),d.qZA(),d.TgZ(24,"li",21),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.isExtraMenuOpen=!s.isExtraMenuOpen)}),d.O4$(),d.TgZ(25,"svg",22),d._UZ(26,"line",23)(27,"line",24)(28,"line",25),d.qZA(),d.YNc(29,F5,4,0,"div",26),d.qZA()()()()()}if(2&n){const t=d.MAs(12),r=d.MAs(23),s=d.oxw();d.xp6(4),d.Q6J("routerLinkActiveOptions",d.DdM(6,L5)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",s.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",s.isExtraMenuOpen)}}let V5=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,fe.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Mu),d.Y36(Xr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,s){1&r&&d.YNc(0,U5,30,7,"section",0),2&r&&d.Q6J("ngIf",s.user&&s.user.user)},dependencies:[Ii,tg,vh],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;z-index:99;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#5b5b5b;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})(),B5=(()=>{class n{constructor(t){this.router=t}onClickLogo(){this.router.navigateByUrl("/")}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Xr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-header-mobile"]],decls:4,vars:0,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"]],template:function(r,s){1&r&&(d.TgZ(0,"header",0)(1,"div",1),d.NdJ("click",function(){return s.onClickLogo()}),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()()())},styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:99;top:0;border-block-end:1px solid rgba(255,255,255,.27);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}"]})}return n})();function j5(n,e){1&n&&d._UZ(0,"router-outlet")}function $5(n,e){1&n&&d._UZ(0,"app-header-mobile")}function H5(n,e){1&n&&d._UZ(0,"aside-menu")}function G5(n,e){1&n&&(d.TgZ(0,"main",2),d._UZ(1,"router-outlet"),d.qZA())}function z5(n,e){1&n&&d._UZ(0,"menu-mobile")}let q5=(()=>{class n{constructor(t,r){this.router=t,this.postService=r,this.routerUrl=this.router.url}ngOnInit(){var t=this;return(0,fe.Z)(function*(){t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof oo&&(t.routerUrl=t.router.url)}),t.postService.getPosts().pipe(Zn(1)).subscribe({error:r=>{console.error(r)}})})()}ngOnDestroy(){this.routerUrlSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Xr),d.Y36(_k))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:7,consts:[[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,s){1&r&&(d.TgZ(0,"section"),d.YNc(1,j5,1,0,"router-outlet",0),d.YNc(2,$5,1,0,"app-header-mobile",0),d.YNc(3,H5,1,0,"aside-menu",0),d.YNc(4,G5,2,0,"main",1),d.YNc(5,z5,1,0,"menu-mobile",0),d.qZA()),2&r&&(d.Tol("/login"===s.routerUrl?"main-app login-layout":"main-app app-layout"),d.xp6(1),d.Q6J("ngIf","/login"===s.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==s.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==s.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==s.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==s.routerUrl))},dependencies:[Ii,sh,O5,V5,B5]})}return n})();class bT{}class DT{}class Ou{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ou?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ou;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ou?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(g=>-1===u.indexOf(g)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(u=>u.toString()),s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Z5{encodeKey(e){return TF(e)}encodeValue(e){return TF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const K5=/%(\d[a-f0-9])/gi,Y5={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function TF(n){return encodeURIComponent(n).replace(K5,(e,t)=>Y5[t]??e)}function TT(n){return`${n}`}class Id{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Z5,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function W5(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,g]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],_=t.get(l)||[];_.push(g),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(TT):[TT(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Id({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(TT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(TT(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Q5{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function AF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function SF(n){return typeof Blob<"u"&&n instanceof Blob}function MF(n){return typeof FormData<"u"&&n instanceof FormData}class vw{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function J5(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Ou),this.context||(this.context=new Q5),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+l}}else this.params=new Id,this.urlWithParams=t}serializeBody(){return null===this.body?null:AF(this.body)||SF(this.body)||MF(this.body)||function X5(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Id?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||MF(this.body)?null:SF(this.body)?this.body.type||null:AF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Id?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,I=e.params||this.params;const D=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((S,$)=>S.set($,e.setHeaders[$]),_)),e.setParams&&(I=Object.keys(e.setParams).reduce((S,$)=>S.set($,e.setParams[$]),I)),new vw(t,r,u,{params:I,headers:_,context:D,reportProgress:g,responseType:s,withCredentials:l})}}var qm=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(qm||{});class IP{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ou,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class bP extends IP{constructor(e={}){super(e),this.type=qm.ResponseHeader}clone(e={}){return new bP({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Zm extends IP{constructor(e={}){super(e),this.type=qm.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Zm({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class xF extends IP{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function DP(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let e6=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof vw)u=t;else{let _,I;_=s.headers instanceof Ou?s.headers:new Ou(s.headers),s.params&&(I=s.params instanceof Id?s.params:new Id({fromObject:s.params})),u=new vw(t,r,void 0!==s.body?s.body:null,{headers:_,context:s.context,params:I,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=(0,Pt.of)(u).pipe(So(_=>this.handler.handle(_)));if(t instanceof vw||"events"===s.observe)return l;const g=l.pipe(ci(_=>_ instanceof Zm));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,Yt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,Yt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,Yt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,Yt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Id).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,DP(s,r))}post(t,r,s={}){return this.request("POST",t,DP(s,r))}put(t,r,s={}){return this.request("PUT",t,DP(s,r))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(bT))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function NF(n,e){return e(n)}function n6(n,e){return(t,r)=>e.intercept(t,{handle:s=>n(s,r)})}const i6=new d.OlP(""),ww=new d.OlP(""),RF=new d.OlP("");function s6(){let n=null;return(e,t)=>{null===n&&(n=((0,d.f3M)(i6,{optional:!0})??[]).reduceRight(n6,NF));const r=(0,d.f3M)(d.HDt),s=r.add();return n(e,t).pipe(ia(()=>r.remove(s)))}}let kF=(()=>{class n extends bT{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,d.f3M)(d.HDt)}handle(t){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(ww),...this.injector.get(RF,[])]));this.chain=s.reduceRight((u,l)=>function r6(n,e,t){return(r,s)=>t.runInContext(()=>e(r,u=>n(u,s)))}(u,l,this.injector),NF)}const r=this.pendingTasks.add();return this.chain(t,s=>this.backend.handle(s)).pipe(ia(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(DT),d.LFG(d.lqb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const c6=/^\)\]\}',?\n/;let LF=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new d.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,er.D)(r.\u0275loadImpl()):(0,Pt.of)(null)).pipe((0,Hn.w)(()=>new Si.y(u=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((Fe,Le)=>l.setRequestHeader(Fe,Le.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Fe=t.detectContentTypeHeader();null!==Fe&&l.setRequestHeader("Content-Type",Fe)}if(t.responseType){const Fe=t.responseType.toLowerCase();l.responseType="json"!==Fe?Fe:"text"}const g=t.serializeBody();let _=null;const I=()=>{if(null!==_)return _;const Fe=l.statusText||"OK",Le=new Ou(l.getAllResponseHeaders()),ht=function l6(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return _=new bP({headers:Le,status:l.status,statusText:Fe,url:ht}),_},D=()=>{let{headers:Fe,status:Le,statusText:ht,url:Vt}=I(),vt=null;204!==Le&&(vt=typeof l.response>"u"?l.responseText:l.response),0===Le&&(Le=vt?200:0);let jt=Le>=200&&Le<300;if("json"===t.responseType&&"string"==typeof vt){const un=vt;vt=vt.replace(c6,"");try{vt=""!==vt?JSON.parse(vt):null}catch(Mn){vt=un,jt&&(jt=!1,vt={error:Mn,text:vt})}}jt?(u.next(new Zm({body:vt,headers:Fe,status:Le,statusText:ht,url:Vt||void 0})),u.complete()):u.error(new xF({error:vt,headers:Fe,status:Le,statusText:ht,url:Vt||void 0}))},S=Fe=>{const{url:Le}=I(),ht=new xF({error:Fe,status:l.status||0,statusText:l.statusText||"Unknown Error",url:Le||void 0});u.error(ht)};let $=!1;const J=Fe=>{$||(u.next(I()),$=!0);let Le={type:qm.DownloadProgress,loaded:Fe.loaded};Fe.lengthComputable&&(Le.total=Fe.total),"text"===t.responseType&&l.responseText&&(Le.partialText=l.responseText),u.next(Le)},we=Fe=>{let Le={type:qm.UploadProgress,loaded:Fe.loaded};Fe.lengthComputable&&(Le.total=Fe.total),u.next(Le)};return l.addEventListener("load",D),l.addEventListener("error",S),l.addEventListener("timeout",S),l.addEventListener("abort",S),t.reportProgress&&(l.addEventListener("progress",J),null!==g&&l.upload&&l.upload.addEventListener("progress",we)),l.send(g),u.next({type:qm.Sent}),()=>{l.removeEventListener("error",S),l.removeEventListener("abort",S),l.removeEventListener("load",D),l.removeEventListener("timeout",S),t.reportProgress&&(l.removeEventListener("progress",J),null!==g&&l.upload&&l.upload.removeEventListener("progress",we)),l.readyState!==l.DONE&&l.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Cs))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const TP=new d.OlP("XSRF_ENABLED"),UF=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),VF=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class BF{}let f6=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ln(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ve),d.LFG(d.Lbi),d.LFG(UF))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function p6(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(TP)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(BF).getToken(),s=(0,d.f3M)(VF);return null!=r&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),e(n)}var bd=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(bd||{});function g6(...n){const e=[e6,LF,kF,{provide:bT,useExisting:kF},{provide:DT,useExisting:LF},{provide:ww,useValue:p6,multi:!0},{provide:TP,useValue:!0},{provide:BF,useClass:f6}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const jF=new d.OlP("LEGACY_INTERCEPTOR_FN");function m6(){return function rp(n,e){return{\u0275kind:n,\u0275providers:e}}(bd.LegacyInterceptors,[{provide:jF,useFactory:s6},{provide:ww,useExisting:jF,multi:!0}])}let y6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[g6(m6())]})}return n})();const I6_firebaseConfig={projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",storageBucket:"instagram-clone-gilshaashua.appspot.com",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"};var $F=M(7582),b6=M(9519);const T6=new d.OlP("angularfire2.messaging.vapid-key"),A6=new d.OlP("angularfire2.messaging.service-worker-registeration");let HF=(()=>{class n{constructor(t,r,s,u,l,g,_){const I=_,D=(0,Pt.of)(void 0).pipe((0,Ia.R)(l.outsideAngular),(0,Ko.Q)(l.insideAngular),(0,Hn.w)(b6.Gb),(0,Hn.w)(J=>J?M.e(922).then(M.bind(M,5922)):no.E),(0,Yt.U)(()=>(0,wi.on)(t,u,r)),(0,Hn.w)(J=>(0,wi.cc)(`${J.name}.messaging`,"AngularFireMessaging",J.name,()=>(0,$F.mG)(this,void 0,void 0,function*(){return J.messaging()}),[])),MO({bufferSize:1,refCount:!1}));this.requestPermission=D.pipe((0,Ia.R)(l.outsideAngular),(0,Ko.Q)(l.insideAngular),(0,Hn.w)(()=>Notification.requestPermission())),this.getToken=D.pipe((0,Ia.R)(l.outsideAngular),(0,Ko.Q)(l.insideAngular),(0,Hn.w)(J=>(0,$F.mG)(this,void 0,void 0,function*(){if("granted"===Notification.permission){const we=I?yield I:null;return yield J.getToken({vapidKey:g,serviceWorkerRegistration:we})}return null})));const S=new Si.y(J=>{navigator.permissions.query({name:"notifications"}).then(we=>{we.onchange=()=>J.next()})}),$=D.pipe((0,Ia.R)(l.outsideAngular),(0,Ko.Q)(l.insideAngular),eT(S),eT(this.getToken));return this.tokenChanges=D.pipe((0,Ia.R)(l.outsideAngular),(0,Ko.Q)(l.insideAngular),(0,Hn.w)(()=>Ao(this.getToken,$))),this.messages=D.pipe((0,Ia.R)(l.outsideAngular),(0,Ko.Q)(l.insideAngular),(0,Hn.w)(J=>new Si.y(we=>J.onMessage(we)))),this.requestToken=D.pipe((0,Ia.R)(l.outsideAngular),(0,Ko.Q)(l.insideAngular),(0,Hn.w)(()=>this.requestPermission),os(()=>(0,Pt.of)(null)),(0,Oi.z)(()=>this.tokenChanges)),this.deleteToken=()=>D.pipe((0,Ia.R)(l.outsideAngular),(0,Ko.Q)(l.insideAngular),(0,Hn.w)(J=>J.deleteToken()),Va(!1)),(0,wi.pX)(this,D,u)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(wi.Dh),d.LFG(wi.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Hr.HU),d.LFG(T6,8),d.LFG(A6,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),S6=(()=>{class n{constructor(){eP.Z.registerVersion("angularfire",Hr.q4.full,"fcm-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[HF]}),n})(),M6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n,bootstrap:[q5]});static#n=this.\u0275inj=d.cJS({imports:[Uu,I5,y6,p5,g5,wi.hO.initializeApp(I6_firebaseConfig),jU,S6,KU]})}return n})();_p().bootstrapModule(M6).catch(n=>console.error(n))},5619:(_t,De,M)=>{M.d(De,{X:()=>V});var d=M(8645);class V extends d.x{constructor(Y){super(),this._value=Y}get value(){return this.getValue()}_subscribe(Y){const se=super._subscribe(Y);return!se.closed&&Y.next(this._value),se}getValue(){const{hasError:Y,thrownError:se,_value:ve}=this;if(Y)throw se;return this._throwIfClosed(),ve}next(Y){super.next(this._value=Y)}}},5592:(_t,De,M)=>{M.d(De,{y:()=>Oe});var d=M(305),V=M(7394),N=M(4850),Y=M(8407),se=M(2653),ve=M(4674),Ee=M(1441);let Oe=(()=>{class ne{constructor(Ie){Ie&&(this._subscribe=Ie)}lift(Ie){const Ye=new ne;return Ye.source=this,Ye.operator=Ie,Ye}subscribe(Ie,Ye,ke){const Ze=function q(ne){return ne&&ne instanceof d.Lv||function U(ne){return ne&&(0,ve.m)(ne.next)&&(0,ve.m)(ne.error)&&(0,ve.m)(ne.complete)}(ne)&&(0,V.Nn)(ne)}(Ie)?Ie:new d.Hp(Ie,Ye,ke);return(0,Ee.x)(()=>{const{operator:Se,source:ft}=this;Ze.add(Se?Se.call(Ze,ft):ft?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(Ye){Ie.error(Ye)}}forEach(Ie,Ye){return new(Ye=he(Ye))((ke,Ze)=>{const Se=new d.Hp({next:ft=>{try{Ie(ft)}catch(pt){Ze(pt),Se.unsubscribe()}},error:Ze,complete:ke});this.subscribe(Se)})}_subscribe(Ie){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Ie)}[N.L](){return this}pipe(...Ie){return(0,Y.U)(Ie)(this)}toPromise(Ie){return new(Ie=he(Ie))((Ye,ke)=>{let Ze;this.subscribe(Se=>Ze=Se,Se=>ke(Se),()=>Ye(Ze))})}}return ne.create=Ve=>new ne(Ve),ne})();function he(ne){var Ve;return null!==(Ve=ne??se.config.Promise)&&void 0!==Ve?Ve:Promise}},8645:(_t,De,M)=>{M.d(De,{x:()=>Ee});var d=M(5592),V=M(7394);const Y=(0,M(2306).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=M(9039),ve=M(1441);let Ee=(()=>{class he extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ne=new Oe(this,this);return ne.operator=q,ne}_throwIfClosed(){if(this.closed)throw new Y}next(q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(q)}})}error(q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ne}=this;for(;ne.length;)ne.shift().error(q)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ne,isStopped:Ve,observers:Ie}=this;return ne||Ve?V.Lc:(this.currentObservers=null,Ie.push(q),new V.w0(()=>{this.currentObservers=null,(0,se.P)(Ie,q)}))}_checkFinalizedStatuses(q){const{hasError:ne,thrownError:Ve,isStopped:Ie}=this;ne?q.error(Ve):Ie&&q.complete()}asObservable(){const q=new d.y;return q.source=this,q}}return he.create=(U,q)=>new Oe(U,q),he})();class Oe extends Ee{constructor(U,q){super(),this.destination=U,this.source=q}next(U){var q,ne;null===(ne=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ne||ne.call(q,U)}error(U){var q,ne;null===(ne=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ne||ne.call(q,U)}complete(){var U,q;null===(q=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===q||q.call(U)}_subscribe(U){var q,ne;return null!==(ne=null===(q=this.source)||void 0===q?void 0:q.subscribe(U))&&void 0!==ne?ne:V.Lc}}},305:(_t,De,M)=>{M.d(De,{Hp:()=>ke,Lv:()=>ne});var d=M(4674),V=M(7394),N=M(2653),Y=M(3894),se=M(2420);const ve=he("C",void 0,void 0);function he(ee,Te,ue){return{kind:ee,value:Te,error:ue}}var U=M(7599),q=M(1441);class ne extends V.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,V.Nn)(Te)&&Te.add(this)):this.destination=pt}static create(Te,ue,Me){return new ke(Te,ue,Me)}next(Te){this.isStopped?ft(function Oe(ee){return he("N",ee,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?ft(function Ee(ee){return he("E",void 0,ee)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?ft(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Ie(ee,Te){return Ve.call(ee,Te)}class Ye{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:ue}=this;if(ue.next)try{ue.next(Te)}catch(Me){Ze(Me)}}error(Te){const{partialObserver:ue}=this;if(ue.error)try{ue.error(Te)}catch(Me){Ze(Me)}else Ze(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(ue){Ze(ue)}}}class ke extends ne{constructor(Te,ue,Me){let Be;if(super(),(0,d.m)(Te)||!Te)Be={next:Te??void 0,error:ue??void 0,complete:Me??void 0};else{let k;this&&N.config.useDeprecatedNextContext?(k=Object.create(Te),k.unsubscribe=()=>this.unsubscribe(),Be={next:Te.next&&Ie(Te.next,k),error:Te.error&&Ie(Te.error,k),complete:Te.complete&&Ie(Te.complete,k)}):Be=Te}this.destination=new Ye(Be)}}function Ze(ee){N.config.useDeprecatedSynchronousErrorHandling?(0,q.O)(ee):(0,Y.h)(ee)}function ft(ee,Te){const{onStoppedNotification:ue}=N.config;ue&&U.z.setTimeout(()=>ue(ee,Te))}const pt={closed:!0,next:se.Z,error:function Se(ee){throw ee},complete:se.Z}},7394:(_t,De,M)=>{M.d(De,{Lc:()=>ve,w0:()=>se,Nn:()=>Ee});var d=M(4674);const N=(0,M(2306).d)(he=>function(q){he(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ne,Ve)=>`${Ve+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var Y=M(9039);class se{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Ie of q)Ie.remove(this);else q.remove(this);const{initialTeardown:ne}=this;if((0,d.m)(ne))try{ne()}catch(Ie){U=Ie instanceof N?Ie.errors:[Ie]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Ie of Ve)try{Oe(Ie)}catch(Ye){U=U??[],Ye instanceof N?U=[...U,...Ye.errors]:U.push(Ye)}}if(U)throw new N(U)}}add(U){var q;if(U&&U!==this)if(this.closed)Oe(U);else{if(U instanceof se){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(U)}}_hasParent(U){const{_parentage:q}=this;return q===U||Array.isArray(q)&&q.includes(U)}_addParent(U){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(U),q):q?[q,U]:U}_removeParent(U){const{_parentage:q}=this;q===U?this._parentage=null:Array.isArray(q)&&(0,Y.P)(q,U)}remove(U){const{_finalizers:q}=this;q&&(0,Y.P)(q,U),U instanceof se&&U._removeParent(this)}}se.EMPTY=(()=>{const he=new se;return he.closed=!0,he})();const ve=se.EMPTY;function Ee(he){return he instanceof se||he&&"closed"in he&&(0,d.m)(he.remove)&&(0,d.m)(he.add)&&(0,d.m)(he.unsubscribe)}function Oe(he){(0,d.m)(he)?he():he.unsubscribe()}},2653:(_t,De,M)=>{M.d(De,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(_t,De,M)=>{M.d(De,{E:()=>V});const V=new(M(5592).y)(se=>se.complete())},2459:(_t,De,M)=>{M.d(De,{D:()=>Te});var d=M(4829),V=M(3093),N=M(5137),ve=M(5592),Oe=M(4971),he=M(4674),U=M(7103);function ne(ue,Me){if(!ue)throw new Error("Iterable cannot be null");return new ve.y(Be=>{(0,U.f)(Be,Me,()=>{const k=ue[Symbol.asyncIterator]();(0,U.f)(Be,Me,()=>{k.next().then(te=>{te.done?Be.complete():Be.next(te.value)})},0,!0)})})}var Ve=M(8382),Ie=M(4026),Ye=M(4266),ke=M(3664),Ze=M(5726),Se=M(9853),ft=M(541);function Te(ue,Me){return Me?function ee(ue,Me){if(null!=ue){if((0,Ve.c)(ue))return function Y(ue,Me){return(0,d.Xf)(ue).pipe((0,N.R)(Me),(0,V.Q)(Me))}(ue,Me);if((0,Ye.z)(ue))return function Ee(ue,Me){return new ve.y(Be=>{let k=0;return Me.schedule(function(){k===ue.length?Be.complete():(Be.next(ue[k++]),Be.closed||this.schedule())})})}(ue,Me);if((0,Ie.t)(ue))return function se(ue,Me){return(0,d.Xf)(ue).pipe((0,N.R)(Me),(0,V.Q)(Me))}(ue,Me);if((0,Ze.D)(ue))return ne(ue,Me);if((0,ke.T)(ue))return function q(ue,Me){return new ve.y(Be=>{let k;return(0,U.f)(Be,Me,()=>{k=ue[Oe.h](),(0,U.f)(Be,Me,()=>{let te,be;try{({value:te,done:be}=k.next())}catch(it){return void Be.error(it)}be?Be.complete():Be.next(te)},0,!0)}),()=>(0,he.m)(k?.return)&&k.return()})}(ue,Me);if((0,ft.L)(ue))return function pt(ue,Me){return ne((0,ft.Q)(ue),Me)}(ue,Me)}throw(0,Se.z)(ue)}(ue,Me):(0,d.Xf)(ue)}},4829:(_t,De,M)=>{M.d(De,{Xf:()=>Ve});var d=M(7582),V=M(4266),N=M(4026),Y=M(5592),se=M(8382),ve=M(5726),Ee=M(9853),Oe=M(3664),he=M(541),U=M(4674),q=M(3894),ne=M(4850);function Ve(ee){if(ee instanceof Y.y)return ee;if(null!=ee){if((0,se.c)(ee))return function Ie(ee){return new Y.y(Te=>{const ue=ee[ne.L]();if((0,U.m)(ue.subscribe))return ue.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,V.z)(ee))return function Ye(ee){return new Y.y(Te=>{for(let ue=0;ue<ee.length&&!Te.closed;ue++)Te.next(ee[ue]);Te.complete()})}(ee);if((0,N.t)(ee))return function ke(ee){return new Y.y(Te=>{ee.then(ue=>{Te.closed||(Te.next(ue),Te.complete())},ue=>Te.error(ue)).then(null,q.h)})}(ee);if((0,ve.D)(ee))return Se(ee);if((0,Oe.T)(ee))return function Ze(ee){return new Y.y(Te=>{for(const ue of ee)if(Te.next(ue),Te.closed)return;Te.complete()})}(ee);if((0,he.L)(ee))return function ft(ee){return Se((0,he.Q)(ee))}(ee)}throw(0,Ee.z)(ee)}function Se(ee){return new Y.y(Te=>{(function pt(ee,Te){var ue,Me,Be,k;return(0,d.mG)(this,void 0,void 0,function*(){try{for(ue=(0,d.KL)(ee);!(Me=yield ue.next()).done;)if(Te.next(Me.value),Te.closed)return}catch(te){Be={error:te}}finally{try{Me&&!Me.done&&(k=ue.return)&&(yield k.call(ue))}finally{if(Be)throw Be.error}}Te.complete()})})(ee,Te).catch(ue=>Te.error(ue))})}},3019:(_t,De,M)=>{M.d(De,{T:()=>ve});var d=M(7537),V=M(4829),N=M(6232),Y=M(9940),se=M(2459);function ve(...Ee){const Oe=(0,Y.yG)(Ee),he=(0,Y._6)(Ee,1/0),U=Ee;return U.length?1===U.length?(0,V.Xf)(U[0]):(0,d.J)(he)((0,se.D)(U,Oe)):N.E}},2096:(_t,De,M)=>{M.d(De,{of:()=>N});var d=M(9940),V=M(2459);function N(...Y){const se=(0,d.yG)(Y);return(0,V.D)(Y,se)}},8251:(_t,De,M)=>{M.d(De,{x:()=>V});var d=M(305);function V(Y,se,ve,Ee,Oe){return new N(Y,se,ve,Ee,Oe)}class N extends d.Lv{constructor(se,ve,Ee,Oe,he,U){super(se),this.onFinalize=he,this.shouldUnsubscribe=U,this._next=ve?function(q){try{ve(q)}catch(ne){se.error(ne)}}:super._next,this._error=Oe?function(q){try{Oe(q)}catch(ne){se.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},3997:(_t,De,M)=>{M.d(De,{x:()=>Y});var d=M(2737),V=M(9360),N=M(8251);function Y(ve,Ee=d.y){return ve=ve??se,(0,V.e)((Oe,he)=>{let U,q=!0;Oe.subscribe((0,N.x)(he,ne=>{const Ve=Ee(ne);(q||!ve(U,Ve))&&(q=!1,U=Ve,he.next(ne))}))})}function se(ve,Ee){return ve===Ee}},7398:(_t,De,M)=>{M.d(De,{U:()=>N});var d=M(9360),V=M(8251);function N(Y,se){return(0,d.e)((ve,Ee)=>{let Oe=0;ve.subscribe((0,V.x)(Ee,he=>{Ee.next(Y.call(se,he,Oe++))}))})}},7537:(_t,De,M)=>{M.d(De,{J:()=>N});var d=M(1631),V=M(2737);function N(Y=1/0){return(0,d.z)(V.y,Y)}},1631:(_t,De,M)=>{M.d(De,{z:()=>Oe});var d=M(7398),V=M(4829),N=M(9360),Y=M(7103),se=M(8251),Ee=M(4674);function Oe(he,U,q=1/0){return(0,Ee.m)(U)?Oe((ne,Ve)=>(0,d.U)((Ie,Ye)=>U(ne,Ie,Ve,Ye))((0,V.Xf)(he(ne,Ve))),q):("number"==typeof U&&(q=U),(0,N.e)((ne,Ve)=>function ve(he,U,q,ne,Ve,Ie,Ye,ke){const Ze=[];let Se=0,ft=0,pt=!1;const ee=()=>{pt&&!Ze.length&&!Se&&U.complete()},Te=Me=>Se<ne?ue(Me):Ze.push(Me),ue=Me=>{Ie&&U.next(Me),Se++;let Be=!1;(0,V.Xf)(q(Me,ft++)).subscribe((0,se.x)(U,k=>{Ve?.(k),Ie?Te(k):U.next(k)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Se--;Ze.length&&Se<ne;){const k=Ze.shift();Ye?(0,Y.f)(U,Ye,()=>ue(k)):ue(k)}ee()}catch(k){U.error(k)}}))};return he.subscribe((0,se.x)(U,Te,()=>{pt=!0,ee()})),()=>{ke?.()}}(ne,Ve,he,q)))}},3093:(_t,De,M)=>{M.d(De,{Q:()=>Y});var d=M(7103),V=M(9360),N=M(8251);function Y(se,ve=0){return(0,V.e)((Ee,Oe)=>{Ee.subscribe((0,N.x)(Oe,he=>(0,d.f)(Oe,se,()=>Oe.next(he),ve),()=>(0,d.f)(Oe,se,()=>Oe.complete(),ve),he=>(0,d.f)(Oe,se,()=>Oe.error(he),ve)))})}},3020:(_t,De,M)=>{M.d(De,{B:()=>se});var d=M(4829),V=M(8645),N=M(305),Y=M(9360);function se(Ee={}){const{connector:Oe=(()=>new V.x),resetOnError:he=!0,resetOnComplete:U=!0,resetOnRefCountZero:q=!0}=Ee;return ne=>{let Ve,Ie,Ye,ke=0,Ze=!1,Se=!1;const ft=()=>{Ie?.unsubscribe(),Ie=void 0},pt=()=>{ft(),Ve=Ye=void 0,Ze=Se=!1},ee=()=>{const Te=Ve;pt(),Te?.unsubscribe()};return(0,Y.e)((Te,ue)=>{ke++,!Se&&!Ze&&ft();const Me=Ye=Ye??Oe();ue.add(()=>{ke--,0===ke&&!Se&&!Ze&&(Ie=ve(ee,q))}),Me.subscribe(ue),!Ve&&ke>0&&(Ve=new N.Hp({next:Be=>Me.next(Be),error:Be=>{Se=!0,ft(),Ie=ve(pt,he,Be),Me.error(Be)},complete:()=>{Ze=!0,ft(),Ie=ve(pt,U),Me.complete()}}),(0,d.Xf)(Te).subscribe(Ve))})(ne)}}function ve(Ee,Oe,...he){if(!0===Oe)return void Ee();if(!1===Oe)return;const U=new N.Hp({next:()=>{U.unsubscribe(),Ee()}});return(0,d.Xf)(Oe(...he)).subscribe(U)}},5137:(_t,De,M)=>{M.d(De,{R:()=>V});var d=M(9360);function V(N,Y=0){return(0,d.e)((se,ve)=>{ve.add(N.schedule(()=>se.subscribe(ve),Y))})}},4664:(_t,De,M)=>{M.d(De,{w:()=>Y});var d=M(4829),V=M(9360),N=M(8251);function Y(se,ve){return(0,V.e)((Ee,Oe)=>{let he=null,U=0,q=!1;const ne=()=>q&&!he&&Oe.complete();Ee.subscribe((0,N.x)(Oe,Ve=>{he?.unsubscribe();let Ie=0;const Ye=U++;(0,d.Xf)(se(Ve,Ye)).subscribe(he=(0,N.x)(Oe,ke=>Oe.next(ve?ve(Ve,ke,Ye,Ie++):ke),()=>{he=null,ne()}))},()=>{q=!0,ne()}))})}},9397:(_t,De,M)=>{M.d(De,{b:()=>se});var d=M(4674),V=M(9360),N=M(8251),Y=M(2737);function se(ve,Ee,Oe){const he=(0,d.m)(ve)||Ee||Oe?{next:ve,error:Ee,complete:Oe}:ve;return he?(0,V.e)((U,q)=>{var ne;null===(ne=he.subscribe)||void 0===ne||ne.call(he);let Ve=!0;U.subscribe((0,N.x)(q,Ie=>{var Ye;null===(Ye=he.next)||void 0===Ye||Ye.call(he,Ie),q.next(Ie)},()=>{var Ie;Ve=!1,null===(Ie=he.complete)||void 0===Ie||Ie.call(he),q.complete()},Ie=>{var Ye;Ve=!1,null===(Ye=he.error)||void 0===Ye||Ye.call(he,Ie),q.error(Ie)},()=>{var Ie,Ye;Ve&&(null===(Ie=he.unsubscribe)||void 0===Ie||Ie.call(he)),null===(Ye=he.finalize)||void 0===Ye||Ye.call(he)}))}):Y.y}},1954:(_t,De,M)=>{M.d(De,{o:()=>se});var d=M(7394);class V extends d.w0{constructor(Ee,Oe){super()}schedule(Ee,Oe=0){return this}}const N={setInterval(ve,Ee,...Oe){const{delegate:he}=N;return he?.setInterval?he.setInterval(ve,Ee,...Oe):setInterval(ve,Ee,...Oe)},clearInterval(ve){const{delegate:Ee}=N;return(Ee?.clearInterval||clearInterval)(ve)},delegate:void 0};var Y=M(9039);class se extends V{constructor(Ee,Oe){super(Ee,Oe),this.scheduler=Ee,this.work=Oe,this.pending=!1}schedule(Ee,Oe=0){var he;if(this.closed)return this;this.state=Ee;const U=this.id,q=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(q,U,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(q,this.id,Oe),this}requestAsyncId(Ee,Oe,he=0){return N.setInterval(Ee.flush.bind(Ee,this),he)}recycleAsyncId(Ee,Oe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return Oe;null!=Oe&&N.clearInterval(Oe)}execute(Ee,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(Ee,Oe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,Oe){let U,he=!1;try{this.work(Ee)}catch(q){he=!0,U=q||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:Oe}=this,{actions:he}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Y.P)(he,this),null!=Ee&&(this.id=this.recycleAsyncId(Oe,Ee,null)),this.delay=null,super.unsubscribe()}}}},2631:(_t,De,M)=>{M.d(De,{v:()=>N});var d=M(4552);class V{constructor(se,ve=V.now){this.schedulerActionCtor=se,this.now=ve}schedule(se,ve=0,Ee){return new this.schedulerActionCtor(this,se).schedule(Ee,ve)}}V.now=d.l.now;class N extends V{constructor(se,ve=V.now){super(se,ve),this.actions=[],this._active=!1}flush(se){const{actions:ve}=this;if(this._active)return void ve.push(se);let Ee;this._active=!0;do{if(Ee=se.execute(se.state,se.delay))break}while(se=ve.shift());if(this._active=!1,Ee){for(;se=ve.shift();)se.unsubscribe();throw Ee}}}},6321:(_t,De,M)=>{M.d(De,{P:()=>Y,z:()=>N});var d=M(1954);const N=new(M(2631).v)(d.o),Y=N},4552:(_t,De,M)=>{M.d(De,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},7599:(_t,De,M)=>{M.d(De,{z:()=>d});const d={setTimeout(V,N,...Y){const{delegate:se}=d;return se?.setTimeout?se.setTimeout(V,N,...Y):setTimeout(V,N,...Y)},clearTimeout(V){const{delegate:N}=d;return(N?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4971:(_t,De,M)=>{M.d(De,{h:()=>V});const V=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(_t,De,M)=>{M.d(De,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(_t,De,M)=>{M.d(De,{_6:()=>ve,jO:()=>Y,yG:()=>se});var d=M(4674),V=M(671);function N(Ee){return Ee[Ee.length-1]}function Y(Ee){return(0,d.m)(N(Ee))?Ee.pop():void 0}function se(Ee){return(0,V.K)(N(Ee))?Ee.pop():void 0}function ve(Ee,Oe){return"number"==typeof N(Ee)?Ee.pop():Oe}},9039:(_t,De,M)=>{function d(V,N){if(V){const Y=V.indexOf(N);0<=Y&&V.splice(Y,1)}}M.d(De,{P:()=>d})},2306:(_t,De,M)=>{function d(V){const Y=V(se=>{Error.call(se),se.stack=(new Error).stack});return Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y}M.d(De,{d:()=>d})},1441:(_t,De,M)=>{M.d(De,{O:()=>Y,x:()=>N});var d=M(2653);let V=null;function N(se){if(d.config.useDeprecatedSynchronousErrorHandling){const ve=!V;if(ve&&(V={errorThrown:!1,error:null}),se(),ve){const{errorThrown:Ee,error:Oe}=V;if(V=null,Ee)throw Oe}}else se()}function Y(se){d.config.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=se)}},7103:(_t,De,M)=>{function d(V,N,Y,se=0,ve=!1){const Ee=N.schedule(function(){Y(),ve?V.add(this.schedule(null,se)):this.unsubscribe()},se);if(V.add(Ee),!ve)return Ee}M.d(De,{f:()=>d})},2737:(_t,De,M)=>{function d(V){return V}M.d(De,{y:()=>d})},4266:(_t,De,M)=>{M.d(De,{z:()=>d});const d=V=>V&&"number"==typeof V.length&&"function"!=typeof V},5726:(_t,De,M)=>{M.d(De,{D:()=>V});var d=M(4674);function V(N){return Symbol.asyncIterator&&(0,d.m)(N?.[Symbol.asyncIterator])}},4674:(_t,De,M)=>{function d(V){return"function"==typeof V}M.d(De,{m:()=>d})},8382:(_t,De,M)=>{M.d(De,{c:()=>N});var d=M(4850),V=M(4674);function N(Y){return(0,V.m)(Y[d.L])}},3664:(_t,De,M)=>{M.d(De,{T:()=>N});var d=M(4971),V=M(4674);function N(Y){return(0,V.m)(Y?.[d.h])}},4026:(_t,De,M)=>{M.d(De,{t:()=>V});var d=M(4674);function V(N){return(0,d.m)(N?.then)}},541:(_t,De,M)=>{M.d(De,{L:()=>Y,Q:()=>N});var d=M(7582),V=M(4674);function N(se){return(0,d.FC)(this,arguments,function*(){const Ee=se.getReader();try{for(;;){const{value:Oe,done:he}=yield(0,d.qq)(Ee.read());if(he)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Oe)}}finally{Ee.releaseLock()}})}function Y(se){return(0,V.m)(se?.getReader)}},671:(_t,De,M)=>{M.d(De,{K:()=>V});var d=M(4674);function V(N){return N&&(0,d.m)(N.schedule)}},9360:(_t,De,M)=>{M.d(De,{A:()=>V,e:()=>N});var d=M(4674);function V(Y){return(0,d.m)(Y?.lift)}function N(Y){return se=>{if(V(se))return se.lift(function(ve){try{return Y(ve,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(_t,De,M)=>{function d(){}M.d(De,{Z:()=>d})},8407:(_t,De,M)=>{M.d(De,{U:()=>N,z:()=>V});var d=M(2737);function V(...Y){return N(Y)}function N(Y){return 0===Y.length?d.y:1===Y.length?Y[0]:function(ve){return Y.reduce((Ee,Oe)=>Oe(Ee),ve)}}},3894:(_t,De,M)=>{M.d(De,{h:()=>N});var d=M(2653),V=M(7599);function N(Y){V.z.setTimeout(()=>{const{onUnhandledError:se}=d.config;if(!se)throw Y;se(Y)})}},9853:(_t,De,M)=>{function d(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(De,{z:()=>d})},5879:(_t,De,M)=>{M.d(De,{$8M:()=>sl,$WT:()=>yo,$Z:()=>oC,AFp:()=>DE,ALo:()=>vc,AaK:()=>ne,AsE:()=>Gh,CHM:()=>bs,CRH:()=>Rn,DdM:()=>Yv,Dn7:()=>hf,EJc:()=>fi,EpF:()=>WC,F4k:()=>KC,FYo:()=>OE,FiY:()=>me,GfV:()=>PE,Gpc:()=>Ye,HDt:()=>Ho,JOm:()=>ih,KtG:()=>zd,LFG:()=>Qe,LSH:()=>Eh,Lbi:()=>i_,Lck:()=>ob,MAs:()=>J_,MMx:()=>Zl,MR2:()=>Xy,NdJ:()=>Ag,O4$:()=>To,Ojb:()=>bl,OlP:()=>Wn,Oqu:()=>Hh,P3R:()=>_1,PXZ:()=>Yb,Q6J:()=>X_,QGY:()=>sv,Qsj:()=>sc,R0b:()=>vi,RDi:()=>rE,Rgc:()=>pf,SBq:()=>Ah,Sil:()=>_m,Suo:()=>Xl,TTD:()=>Ld,TgZ:()=>Dg,Tol:()=>dI,VKq:()=>Qv,VuI:()=>Vf,W1O:()=>mu,X6Q:()=>Mc,XFs:()=>wt,Xpm:()=>ir,Xq5:()=>PC,Xts:()=>Cl,Y36:()=>Ja,YKP:()=>uf,YNc:()=>$C,Yjl:()=>Sa,Yz7:()=>yt,Z0I:()=>vn,ZZ4:()=>Oc,_Bn:()=>zv,_UZ:()=>tv,_c5:()=>Ff,_uU:()=>mI,aQg:()=>cr,c2e:()=>es,cJS:()=>Gn,cg1:()=>hc,dDg:()=>rd,dqk:()=>Wt,eFA:()=>Jb,eJc:()=>mf,ekj:()=>jh,eoX:()=>zb,f3M:()=>st,g9A:()=>TE,h0i:()=>du,hGG:()=>MM,hij:()=>Bl,iGM:()=>mr,ifc:()=>ot,ip1:()=>m0,jDz:()=>tm,kL8:()=>Tv,kcU:()=>Yt,lG2:()=>Aa,lcZ:()=>Ss,lqb:()=>Fo,lri:()=>w0,n5z:()=>Np,oAB:()=>Qo,oxw:()=>XC,q4F:()=>NE,qFp:()=>UM,qLn:()=>Ka,qOj:()=>L_,qZA:()=>Tg,rWj:()=>E0,rg0:()=>Fd,sBO:()=>iD,s_b:()=>Ji,soG:()=>mm,tb:()=>Df,tp0:()=>rt,uIk:()=>B_,vHH:()=>ee,vpe:()=>Lo,wAp:()=>ou,xp6:()=>iC,z2F:()=>Sc,zSh:()=>fe,zs3:()=>ao});var d=M(8645),V=M(7394),N=M(5592),Y=M(3019),se=M(5619),ve=M(2096),Ee=M(3020),Oe=M(4664),he=M(3997);function U(i){for(let o in i)if(i[o]===U)return o;throw Error("Could not find renamed property on target object.")}function q(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ne(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ne).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Ve(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const Ie=U({__forward_ref__:U});function Ye(i){return i.__forward_ref__=Ye,i.toString=function(){return ne(this())},i}function ke(i){return Ze(i)?i():i}function Ze(i){return"function"==typeof i&&i.hasOwnProperty(Ie)&&i.__forward_ref__===Ye}function Se(i){return i&&!!i.\u0275providers}const pt="https://g.co/ng/security#xss";class ee extends Error{constructor(o,a){super(function Te(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function ue(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i,o){throw new ee(-201,!1)}function tt(i,o){null==i&&function ze(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Gn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ln(i){return Nn(i,Un)||Nn(i,rr)}function vn(i){return null!==Ln(i)}function Nn(i,o){return i.hasOwnProperty(o)?i[o]:null}function Yn(i){return i&&(i.hasOwnProperty(Tn)||i.hasOwnProperty(Zr))?i[Tn]:null}const Un=U({\u0275prov:U}),Tn=U({\u0275inj:U}),rr=U({ngInjectableDef:U}),Zr=U({ngInjectorDef:U});var wt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(wt||{});let It;function Rt(i){const o=It;return It=i,o}function _r(i,o,a){const c=Ln(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&wt.Optional?null:void 0!==o?o:void be(ne(i))}const Wt=globalThis,He={},lt="__NG_DI_FLAG__",Et="ngTempTokenPath",z=/\n/gm,P="__source";let R;function X(i){const o=R;return R=i,o}function Ne(i,o=wt.Default){if(void 0===R)throw new ee(-203,!1);return null===R?_r(i,void 0,o):R.get(i,o&wt.Optional?null:void 0,o)}function Qe(i,o=wt.Default){return(function Nt(){return It}()||Ne)(ke(i),o)}function st(i,o=wt.Default){return Qe(i,_n(o))}function _n(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Ut(i){const o=[];for(let a=0;a<i.length;a++){const c=ke(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ee(900,!1);let h,f=wt.Default;for(let y=0;y<c.length;y++){const v=c[y],C=Kt(v);"number"==typeof C?-1===C?h=v.token:f|=C:h=v}o.push(Qe(h,f))}else o.push(Qe(c))}return o}function wn(i,o){return i[lt]=o,i.prototype[lt]=o,i}function Kt(i){return i[lt]}function de(i){return{toString:i}.toString()}var nt=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(nt||{}),ot=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(ot||{});const Ot={},dt=[],An=U({\u0275cmp:U}),ni=U({\u0275dir:U}),ri=U({\u0275pipe:U}),qi=U({\u0275mod:U}),Rr=U({\u0275fac:U}),ln=U({__NG_ELEMENT_ID__:U}),Ps=U({__NG_ENV_ID__:U});function Zs(i,o,a){let c=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const f=o.length;if(h+f===c||i.charCodeAt(h+f)<=32)return h}a=h+1}}function Wr(i,o,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const f=a[c++],y=a[c++],v=a[c++];i.setAttribute(o,y,v,f)}else{const f=h,y=a[++c];Ns(f)?i.setProperty(o,f,y):i.setAttribute(o,f,y),c++}}return c}function mi(i){return 3===i||4===i||6===i}function Ns(i){return 64===i.charCodeAt(0)}function vs(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||ws(i,a,h,null,-1===a||2===a?o[++c]:null)}}return i}function ws(i,o,a,c,h){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const v=i[f++];if("number"==typeof v){if(v===o){y=-1;break}if(v>o){y=f-1;break}}}for(;f<i.length;){const v=i[f];if("number"==typeof v)break;if(v===a){if(null===c)return void(null!==h&&(i[f+1]=h));if(c===i[f+1])return void(i[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==h&&i.splice(f++,0,h)}const Xn="ng-template";function Zi(i,o,a){let c=0,h=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&h){const y=i[c++];if(a&&"class"===f&&-1!==Zs(y.toLowerCase(),o,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(h=!1)}}return!1}function Ii(i){return 4===i.type&&i.value!==Xn}function ba(i,o,a){return o===(4!==i.type||a?i.value:Xn)}function mo(i,o,a){let c=4;const h=i.attrs||[],f=function H(i){for(let o=0;o<i.length;o++)if(mi(i[o]))return o;return i.length}(h);let y=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!ba(i,C,a)||""===C&&1===o.length){if(Kr(c))return!1;y=!0}}else{const b=8&c?C:o[++v];if(8&c&&null!==i.attrs){if(!Zi(i.attrs,b,a)){if(Kr(c))return!1;y=!0}continue}const L=Da(8&c?"class":C,h,Ii(i),a);if(-1===L){if(Kr(c))return!1;y=!0;continue}if(""!==b){let W;W=L>f?"":h[L+1].toLowerCase();const ie=8&c?W:null;if(ie&&-1!==Zs(ie,b,0)||2&c&&b!==W){if(Kr(c))return!1;y=!0}}}}else{if(!y&&!Kr(c)&&!Kr(C))return!1;if(y&&Kr(C))continue;y=!1,c=C|1&c}}return Kr(c)||y}function Kr(i){return 0==(1&i)}function Da(i,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let f=!1;for(;h<o.length;){const y=o[h];if(y===i)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function re(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function Yo(i,o,a=!1){for(let c=0;c<o.length;c++)if(mo(i,o[c],a))return!0;return!1}function gt(i,o){return i?":not("+o.trim()+")":o}function En(i){let o=i[0],a=1,c=2,h="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const v=i[++a];h+="["+y+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Kr(y)&&(o+=gt(f,h),h=""),c=y,f=f||!Kr(c);a++}return""!==h&&(o+=gt(f,h)),o}function ir(i){return de(()=>{const o=Lc(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===nt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||ot.Emulated,styles:i.styles||dt,_:null,schemas:i.schemas||null,tView:null,id:""};Ma(a);const c=i.dependencies;return a.directiveDefs=Rs(c,!1),a.pipeDefs=Rs(c,!0),a.id=function Jo(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const h of a)o=Math.imul(31,o)+h.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function kr(i){return In(i)||Vr(i)}function is(i){return null!==i}function Qo(i){return de(()=>({type:i.type,bootstrap:i.bootstrap||dt,declarations:i.declarations||dt,imports:i.imports||dt,exports:i.exports||dt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ta(i,o){if(null==i)return Ot;const a={};for(const c in i)if(i.hasOwnProperty(c)){let h=i[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),a[h]=c,o&&(o[h]=f)}return a}function Aa(i){return de(()=>{const o=Lc(i);return Ma(o),o})}function Sa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function In(i){return i[An]||null}function Vr(i){return i[ni]||null}function Yr(i){return i[ri]||null}function yo(i){const o=In(i)||Vr(i)||Yr(i);return null!==o&&o.standalone}function ii(i,o){const a=i[qi]||null;if(!a&&!0===o)throw new Error(`Type ${ne(i)} does not have '\u0275mod' property.`);return a}function Lc(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||Ot,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||dt,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ta(i.inputs,o),outputs:Ta(i.outputs)}}function Ma(i){i.features?.forEach(o=>o(i))}function Rs(i,o){if(!i)return null;const a=o?Yr:kr;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(is)}const Qn=0,Xe=1,zt=2,$n=3,si=4,ks=5,Qr=6,_o=7,hr=8,Es=9,bi=10,kt=11,Xo=12,Td=13,br=14,Dr=15,Li=16,Ui=17,yi=18,ss=19,Uc=20,Ws=21,Cs=22,B=23,F=24,j=25,Pe=1,qe=2,et=7,Ft=9,Bt=11;function Jn(i){return Array.isArray(i)&&"object"==typeof i[Pe]}function xn(i){return Array.isArray(i)&&!0===i[Pe]}function vo(i){return 0!=(4&i.flags)}function Ki(i){return i.componentOffset>-1}function Is(i){return 1==(1&i.flags)}function ar(i){return!!i.template}function Di(i){return 0!=(512&i[zt])}function Ks(i,o){return i.hasOwnProperty(Rr)?i[Rr]:null}let Jr=null,xd=!1;function Ti(i){const o=Jr;return Jr=i,o}const Od={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ry(i){if(!$c(i)||i.dirty){if(!i.producerMustRecompute(i)&&!sy(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function iy(i){i.dirty=!0,function op(i){if(void 0===i.liveConsumerNode)return;const o=xd;xd=!0;try{for(const a of i.liveConsumerNode)a.dirty||iy(a)}finally{xd=o}}(i),i.consumerMarkedDirty?.(i)}function ap(i){return i&&(i.nextProducerIndex=0),Ti(i)}function jc(i,o){if(Ti(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if($c(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)ku(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function sy(i){Eo(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],c=i.producerLastReadVersion[o];if(c!==a.version||(ry(a),c!==a.version))return!0}return!1}function Nd(i){if(Eo(i),$c(i))for(let o=0;o<i.producerNode.length;o++)ku(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function ku(i,o){if(function ay(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),Eo(i),1===i.liveConsumerNode.length)for(let c=0;c<i.producerNode.length;c++)ku(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[o],h=i.liveConsumerNode[o];Eo(h),h.producerIndexOfThis[c]=o}}function $c(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function Eo(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let cy=null;function Fd(i){const o=Ti(null);try{return i()}finally{Ti(o)}}const fp=()=>{},Tw=(()=>({...Od,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:fp}))();class fy{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ld(){return Ud}function Ud(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ys),zc}function zc(){const i=Vd(this),o=i?.current;if(o){const a=i.previous;if(a===Ot)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function Ys(i,o,a,c){const h=this.declaredInputs[a],f=Vd(i)||function py(i,o){return i[Na]=o}(i,{previous:Ot,current:null}),y=f.current||(f.current={}),v=f.previous,C=v[h];y[h]=new fy(C&&C.currentValue,o,v===Ot),i[c]=o}Ld.ngInherit=!0;const Na="__ngSimpleChanges__";function Vd(i){return i[Na]||null}const Fs=function(i,o,a){},pp="svg";function zn(i){for(;Array.isArray(i);)i=i[Qn];return i}function Qs(i,o){return zn(o[i])}function Ai(i,o){return zn(o[i.index])}function jd(i,o){return i.data[o]}function Ra(i,o){return i[o]}function Vi(i,o){const a=o[i];return Jn(a)?a:a[Qn]}function Co(i,o){return null==o?null:i[o]}function gp(i){i[Ui]=0}function Lu(i){1024&i[zt]||(i[zt]|=1024,Fr(i,1))}function gy(i){1024&i[zt]&&(i[zt]&=-1025,Fr(i,-1))}function Fr(i,o){let a=i[$n];if(null===a)return;a[ks]+=o;let c=a;for(a=a[$n];null!==a&&(1===o&&1===c[ks]||-1===o&&0===c[ks]);)a[ks]+=o,c=a,a=a[$n]}const Gt={lFrame:Ap(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ka(){return Gt.bindingsEnabled}function Ue(){return Gt.lFrame.lView}function Sn(){return Gt.lFrame.tView}function bs(i){return Gt.lFrame.contextLView=i,i[hr]}function zd(i){return Gt.lFrame.contextLView=null,i}function oi(){let i=Yc();for(;null!==i&&64===i.type;)i=i.parent;return i}function Yc(){return Gt.lFrame.currentTNode}function Ls(i,o){const a=Gt.lFrame;a.currentTNode=i,a.isParent=o}function Ep(){return Gt.lFrame.isParent}function ai(){const i=Gt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Bu(){return Gt.lFrame.bindingIndex++}function Us(i){const o=Gt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function bp(i,o){const a=Gt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Dp(o)}function Dp(i){Gt.lFrame.currentDirectiveIndex=i}function Ey(){return Gt.lFrame.currentQueryIndex}function Tp(i){Gt.lFrame.currentQueryIndex=i}function Nw(i){const o=i[Xe];return 2===o.type?o.declTNode:1===o.type?i[Qr]:null}function Zd(i,o,a){if(a&wt.SkipSelf){let h=o,f=i;for(;!(h=h.parent,null!==h||a&wt.Host||(h=Nw(f),null===h||(f=f[br],10&h.type))););if(null===h)return!1;o=h,i=f}const c=Gt.lFrame=Do();return c.currentTNode=o,c.lView=i,!0}function Si(i){const o=Do(),a=i[Xe];Gt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Do(){const i=Gt.lFrame,o=null===i?null:i.child;return null===o?Ap(i):o}function Ap(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function er(){const i=Gt.lFrame;return Gt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Pt=er;function ui(){const i=er();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Mi(){return Gt.lFrame.selectedIndex}function Js(i){Gt.lFrame.selectedIndex=i}function ur(){const i=Gt.lFrame;return jd(i.tView,i.selectedIndex)}function To(){Gt.lFrame.currentNamespace=pp}function Yt(){!function Cy(){Gt.lFrame.currentNamespace=null}()}let ju=!0;function Xs(){return ju}function eo(i){ju=i}function Fa(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:b,ngOnDestroy:A}=f;y&&(i.contentHooks??=[]).push(-a,y),v&&((i.contentHooks??=[]).push(a,v),(i.contentCheckHooks??=[]).push(a,v)),C&&(i.viewHooks??=[]).push(-a,C),b&&((i.viewHooks??=[]).push(a,b),(i.viewCheckHooks??=[]).push(a,b)),null!=A&&(i.destroyHooks??=[]).push(a,A)}}function ta(i,o,a){Xc(i,o,3,a)}function La(i,o,a,c){(3&i[zt])===a&&Xc(i,o,a,c)}function Jc(i,o){let a=i[zt];(3&a)===o&&(a&=8191,a+=1,i[zt]=a)}function Xc(i,o,a,c){const f=c??-1,y=o.length-1;let v=0;for(let C=void 0!==c?65535&i[Ui]:0;C<y;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=c&&v>=c)break}else o[C]<0&&(i[Ui]+=65536),(v<f||-1==f)&&($u(i,a,o,C),i[Ui]=(4294901760&i[Ui])+C+2),C++}function to(i,o){Fs(4,i,o);const a=Ti(null);try{o.call(i)}finally{Ti(a),Fs(5,i,o)}}function $u(i,o,a,c){const h=a[c]<0,f=a[c+1],v=i[h?-a[c]:a[c]];h?i[zt]>>13<i[Ui]>>16&&(3&i[zt])===o&&(i[zt]+=8192,to(v,f)):to(v,f)}const Vs=-1;class Ao{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function tl(i){return i!==Vs}function Yi(i){return 32767&i}function Zn(i,o){let a=function Hn(i){return i>>16}(i),c=o;for(;a>0;)c=c[br],a--;return c}let Ua=!0;function ci(i){const o=Ua;return Ua=i,o}const Va=255,zu=5;let Iy=0;const jr={};function Tr(i,o){const a=nl(i,o);if(-1!==a)return a;const c=o[Xe];c.firstCreatePass&&(i.injectorIndex=o.length,os(c.data,i),os(o,null),os(c.blueprint,null));const h=ra(i,o),f=i.injectorIndex;if(tl(h)){const y=Yi(h),v=Zn(h,o),C=v[Xe].data;for(let b=0;b<8;b++)o[f+b]=v[y+b]|C[y+b]}return o[f+8]=h,f}function os(i,o){i.push(0,0,0,0,0,0,0,0,o)}function nl(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function ra(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){if(c=kp(h),null===c)return Vs;if(a++,h=h[br],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Vs}function Ba(i,o,a){!function So(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(ln)&&(c=a[ln]),null==c&&(c=a[ln]=Iy++);const h=c&Va;o.data[i+(h>>zu)]|=1<<h}(i,o,a)}function Qd(i,o,a){if(a&wt.Optional||void 0!==i)return i;be()}function ia(i,o,a,c){if(a&wt.Optional&&void 0===c&&(c=null),!(a&(wt.Self|wt.Host))){const h=i[Es],f=Rt(void 0);try{return h?h.get(o,c,a&wt.Optional):_r(o,c,a&wt.Optional)}finally{Rt(f)}}return Qd(c,0,a)}function Jd(i,o,a,c=wt.Default,h){if(null!==i){if(2048&o[zt]&&!(c&wt.Self)){const y=function Rp(i,o,a,c,h){let f=i,y=o;for(;null!==f&&null!==y&&2048&y[zt]&&!(512&y[zt]);){const v=rl(f,y,a,c|wt.Self,jr);if(v!==jr)return v;let C=f.parent;if(!C){const b=y[Uc];if(b){const A=b.get(a,jr,c);if(A!==jr)return A}C=kp(y),y=y[br]}f=C}return h}(i,o,a,c,jr);if(y!==jr)return y}const f=rl(i,o,a,c,jr);if(f!==jr)return f}return ia(o,a,c,h)}function rl(i,o,a,c,h){const f=function xo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(ln)?i[ln]:void 0;return"number"==typeof o?o>=0?o&Va:Oo:o}(a);if("function"==typeof f){if(!Zd(o,i,c))return c&wt.Host?Qd(h,0,c):ia(o,a,c,h);try{let y;if(y=f(c),null!=y||c&wt.Optional)return y;be()}finally{Pt()}}else if("number"==typeof f){let y=null,v=nl(i,o),C=Vs,b=c&wt.Host?o[Dr][Qr]:null;for((-1===v||c&wt.SkipSelf)&&(C=-1===v?ra(i,o):o[v+8],C!==Vs&&Op(c,!1)?(y=o[Xe],v=Yi(C),o=Zn(C,o)):v=-1);-1!==v;){const A=o[Xe];if(xp(f,v,A.data)){const L=on(v,o,a,y,c,b);if(L!==jr)return L}C=o[v+8],C!==Vs&&Op(c,o[Xe].data[v+8]===b)&&xp(f,v,o)?(y=A,v=Yi(C),o=Zn(C,o)):v=-1}}return h}function on(i,o,a,c,h,f){const y=o[Xe],v=y.data[i+8],A=Mo(v,y,a,null==c?Ki(v)&&Ua:c!=y&&0!=(3&v.type),h&wt.Host&&f===v);return null!==A?sa(o,y,A,v):jr}function Mo(i,o,a,c,h){const f=i.providerIndexes,y=o.data,v=1048575&f,C=i.directiveStart,A=f>>20,W=h?v+A:i.directiveEnd;for(let ie=c?v:v+A;ie<W;ie++){const Re=y[ie];if(ie<C&&a===Re||ie>=C&&Re.type===a)return ie}if(h){const ie=y[C];if(ie&&ar(ie)&&ie.type===a)return C}return null}function sa(i,o,a,c){let h=i[a];const f=o.data;if(function Hu(i){return i instanceof Ao}(h)){const y=h;y.resolving&&function Be(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new ee(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Me(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ue(i)}(f[a]));const v=ci(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?Rt(y.injectImpl):null;Zd(i,c,wt.Default);try{h=i[a]=y.factory(void 0,f,i,c),o.firstCreatePass&&a>=c.directiveStart&&function xi(i,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(c){const y=Ud(o);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}h&&(a.preOrderHooks??=[]).push(0-i,h),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],o)}finally{null!==b&&Rt(b),ci(v),y.resolving=!1,Pt()}}return h}function xp(i,o,a){return!!(a[o+(i>>zu)]&1<<i)}function Op(i,o){return!(i&wt.Self||i&wt.Host&&o)}class $r{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Jd(this._tNode,this._lView,o,_n(c),a)}}function Oo(){return new $r(oi(),Ue())}function Np(i){return de(()=>{const o=i.prototype.constructor,a=o[Rr]||il(o),c=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==c;){const f=h[Rr]||il(h);if(f&&f!==a)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function il(i){return Ze(i)?()=>{const o=il(ke(i));return o&&o()}:Ks(i)}function kp(i){const o=i[Xe],a=o.type;return 2===a?o.declTNode:1===a?i[Qr]:null}function sl(i){return function Mp(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const f=a[h];if(mi(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(f===o)return a[h+1];h+=2}}}return null}(oi(),i)}const oa="__parameters__";function On(i,o,a){return de(()=>{const c=function Po(i){return function(...a){if(i){const c=i(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...f){if(this instanceof h)return c.apply(this,f),this;const y=new h(...f);return v.annotation=y,v;function v(C,b,A){const L=C.hasOwnProperty(oa)?C[oa]:Object.defineProperty(C,oa,{value:[]})[oa];for(;L.length<=A;)L.push(null);return(L[A]=L[A]||[]).push(y),C}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}function $a(i,o){i.forEach(a=>Array.isArray(a)?$a(a,o):o(a))}function Dy(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Ha(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Qi(i,o,a){let c=Ga(i,o);return c>=0?i[1|c]=a:(c=~c,function Up(i,o,a,c){let h=i.length;if(h==o)i.push(a,c);else if(1===h)i.push(c,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function th(i,o){const a=Ga(i,o);if(a>=0)return i[1|a]}function Ga(i,o){return function dl(i,o,a){let c=0,h=i.length>>a;for(;h!==c;){const f=c+(h-c>>1),y=i[f<<a];if(o===y)return f<<a;y>o?h=f:c=f+1}return~(h<<a)}(i,o,1)}const me=wn(On("Optional"),8),rt=wn(On("SkipSelf"),4);function jp(i){return 128==(128&i.flags)}var ih=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(ih||{});const sh=new Map;let UT=0;const Gp="__ngContext__";function ji(i,o){Jn(o)?(i[Gp]=o[ss],function $w(i){sh.set(i[ss],i)}(o)):i[Gp]=o}let uh;function Ds(i,o){return uh(i,o)}function la(i){const o=i[$n];return xn(o)?o[$n]:o}function zw(i){return ch(i[Xo])}function Uy(i){return ch(i[si])}function ch(i){for(;null!==i&&!xn(i);)i=i[si];return i}function yl(i,o,a,c,h){if(null!=c){let f,y=!1;xn(c)?f=c:Jn(c)&&(y=!0,c=c[Qn]);const v=zn(c);0===i&&null!==a?null==h?Kw(o,a,v):nc(o,a,v,h||null,!0):1===i&&null!==a?nc(o,a,v,h||null,!0):2===i?function Kp(i,o,a){const c=Wp(i,o);c&&function XT(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,v,y):3===i&&o.destroyNode(v),null!=f&&function t1(i,o,a,c,h){const f=a[et];f!==zn(a)&&yl(o,i,c,f,h);for(let v=Bt;v<a.length;v++){const C=a[v];gh(C[Xe],C,i,o,c,f)}}(o,i,f,a,h)}}function qp(i,o,a){return i.createElement(o,a)}function qw(i,o){const a=i[Ft],c=a.indexOf(o);gy(o),a.splice(c,1)}function Zp(i,o){if(i.length<=Bt)return;const a=Bt+o,c=i[a];if(c){const h=c[Li];null!==h&&h!==i&&qw(h,c),o>0&&(i[a-1][si]=c[si]);const f=Ha(i,Bt+o);!function WT(i,o){gh(i,o,o[kt],2,null,null),o[Qn]=null,o[Qr]=null}(c[Xe],c);const y=f[yi];null!==y&&y.detachView(f[Xe]),c[$n]=null,c[si]=null,c[zt]&=-129}return c}function Vy(i,o){if(!(256&o[zt])){const a=o[kt];o[B]&&Nd(o[B]),o[F]&&Nd(o[F]),a.destroyNode&&gh(i,o,a,3,null,null),function KT(i){let o=i[Xo];if(!o)return Zw(i[Xe],i);for(;o;){let a=null;if(Jn(o))a=o[Xo];else{const c=o[Bt];c&&(a=c)}if(!a){for(;o&&!o[si]&&o!==i;)Jn(o)&&Zw(o[Xe],o),o=o[$n];null===o&&(o=i),Jn(o)&&Zw(o[Xe],o),a=o&&o[si]}o=a}}(o)}}function Zw(i,o){if(!(256&o[zt])){o[zt]&=-129,o[zt]|=256,function Ww(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof Ao)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const v=h[f[y]],C=f[y+1];Fs(4,v,C);try{C.call(v)}finally{Fs(5,v,C)}}else{Fs(4,h,f);try{f.call(h)}finally{Fs(5,h,f)}}}}}(i,o),function JT(i,o){const a=i.cleanup,c=o[_o];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[y]():c[-y].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(o[_o]=null);const h=o[Ws];if(null!==h){o[Ws]=null;for(let f=0;f<h.length;f++)(0,h[f])()}}(i,o),1===o[Xe].type&&o[kt].destroy();const a=o[Li];if(null!==a&&xn(o[$n])){a!==o[$n]&&qw(a,o);const c=o[yi];null!==c&&c.detachView(i)}!function oh(i){sh.delete(i[ss])}(o)}}function _l(i,o,a){return function tc(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[Qn];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:f}=i.data[c.directiveStart+h];if(f===ot.None||f===ot.Emulated)return null}return Ai(c,a)}}(i,o.parent,a)}function nc(i,o,a,c,h){i.insertBefore(o,a,c,h)}function Kw(i,o,a){i.appendChild(o,a)}function Yw(i,o,a,c,h){null!==c?nc(i,o,a,c,h):Kw(i,o,a)}function Wp(i,o){return i.parentNode(o)}let jy,nE,Qp,By=function Jw(i,o,a){return 40&i.type?Ai(i,a):null};function fh(i,o,a,c){const h=_l(i,c,o),f=o[kt],v=function Qw(i,o,a){return By(i,o,a)}(c.parent||o[Qr],c,o);if(null!=h)if(Array.isArray(a))for(let C=0;C<a.length;C++)Yw(f,h,a[C],v,!1);else Yw(f,h,a,v,!1);void 0!==jy&&jy(f,c,o,a,h)}function ko(i,o){if(null!==o){const a=o.type;if(3&a)return Ai(o,i);if(4&a)return Hy(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return ko(i,c);{const h=i[o.index];return xn(h)?Hy(-1,h):zn(h)}}if(32&a)return Ds(o,i)()||zn(i[o.index]);{const c=$y(i,o);return null!==c?Array.isArray(c)?c[0]:ko(la(i[Dr]),c):ko(i,o.next)}}return null}function $y(i,o){return null!==o?i[Dr][Qr].projection[o.projection]:null}function Hy(i,o){const a=Bt+i+1;if(a<o.length){const c=o[a],h=c[Xe].firstChild;if(null!==h)return ko(c,h)}return o[et]}function ph(i,o,a,c,h,f,y){for(;null!=a;){const v=c[a.index],C=a.type;if(y&&0===o&&(v&&ji(zn(v),c),a.flags|=2),32!=(32&a.flags))if(8&C)ph(i,o,a.child,c,h,f,!1),yl(o,i,h,v,f);else if(32&C){const b=Ds(a,c);let A;for(;A=b();)yl(o,i,h,A,f);yl(o,i,h,v,f)}else 16&C?zy(i,o,c,a,h,f):yl(o,i,h,v,f);a=y?a.projectionNext:a.next}}function gh(i,o,a,c,h,f){ph(a,c,i.firstChild,o,h,f,!1)}function zy(i,o,a,c,h,f){const y=a[Dr],C=y[Qr].projection[c.projection];if(Array.isArray(C))for(let b=0;b<C.length;b++)yl(o,i,h,C[b],f);else{let b=C;const A=y[$n];jp(c)&&(b.flags|=128),ph(i,o,b,A,h,f,!0)}}function eE(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function mh(i,o,a){const{mergedAttrs:c,classes:h,styles:f}=a;null!==c&&Wr(i,o,c),null!==h&&eE(i,o,h),null!==f&&function r1(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}function rE(i){nE=i}function oE(i){return function Zy(){if(void 0===Qp&&(Qp=null,Wt.trustedTypes))try{Qp=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Qp}()?.createScriptURL(i)||i}class aE{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pt})`}}function Za(i){return i instanceof aE?i.changingThisBreaksApplicationSecurity:i}function El(i,o){const a=function Jp(i){return i instanceof aE&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${pt})`)}return a===o}const yh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var wh=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(wh||{});function Eh(i){const o=Ch();return o?o.sanitize(wh.URL,i)||"":El(i,"URL")?Za(i):function eg(i){return(i=String(i)).match(yh)?i:"unsafe:"+i}(ue(i))}function mE(i){const o=Ch();if(o)return oE(o.sanitize(wh.RESOURCE_URL,i)||"");if(El(i,"ResourceURL"))return oE(Za(i));throw new ee(904,!1)}function _1(i,o,a){return function y1(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?mE:Eh}(o,a)(i)}function Ch(){const i=Ue();return i&&i[bi].sanitizer}class Wn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Cl=new Wn("ENVIRONMENT_INITIALIZER"),_E=new Wn("INJECTOR",-1),vE=new Wn("INJECTOR_DEF_TYPES");class ng{get(o,a=He){if(a===He){const c=new Error(`NullInjectorError: No provider for ${ne(o)}!`);throw c.name="NullInjectorError",c}return a}}function Xy(i){return{\u0275providers:i}}function v1(...i){return{\u0275providers:wE(0,i),\u0275fromNgModule:!0}}function wE(i,...o){const a=[],c=new Set;let h;const f=y=>{a.push(y)};return $a(o,y=>{const v=y;rg(v,f,[],c)&&(h||=[],h.push(v))}),void 0!==h&&EE(h,f),a}function EE(i,o){for(let a=0;a<i.length;a++){const{ngModule:c,providers:h}=i[a];e_(h,f=>{o(f,c)})}}function rg(i,o,a,c){if(!(i=ke(i)))return!1;let h=null,f=Yn(i);const y=!f&&In(i);if(f||y){if(y&&!y.standalone)return!1;h=i}else{const C=i.ngModule;if(f=Yn(C),!f)return!1;h=C}const v=c.has(h);if(y){if(v)return!1;if(c.add(h),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const b of C)rg(b,o,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!v){let b;c.add(h);try{$a(f.imports,A=>{rg(A,o,a,c)&&(b||=[],b.push(A))})}finally{}void 0!==b&&EE(b,o)}if(!v){const b=Ks(h)||(()=>new h);o({provide:h,useFactory:b,deps:dt},h),o({provide:vE,useValue:h,multi:!0},h),o({provide:Cl,useValue:()=>Qe(h),multi:!0},h)}const C=f.providers;if(null!=C&&!v){const b=i;e_(C,A=>{o(A,b)})}}}return h!==i&&void 0!==i.providers}function e_(i,o){for(let a of i)Se(a)&&(a=a.\u0275providers),Array.isArray(a)?e_(a,o):o(a)}const HP=U({provide:String,useValue:U});function CE(i){return null!==i&&"object"==typeof i&&HP in i}function Il(i){return"function"==typeof i}const fe=new Wn("Set Injector scope."),Ih={},I1={};let t_;function ig(){return void 0===t_&&(t_=new ng),t_}class Fo{}class sg extends Fo{get destroyed(){return this._destroyed}constructor(o,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,r_(o,y=>this.processProvider(y)),this.records.set(_E,ha(void 0,this)),h.has("environment")&&this.records.set(Fo,ha(void 0,this));const f=this.records.get(fe);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(vE.multi,dt,wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=X(this),c=Rt(void 0);try{return o()}finally{X(a),Rt(c)}}get(o,a=He,c=wt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Ps))return o[Ps](this);c=_n(c);const f=X(this),y=Rt(void 0);try{if(!(c&wt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const b=function A1(i){return"function"==typeof i||"object"==typeof i&&i instanceof Wn}(o)&&Ln(o);C=b&&this.injectableDefInScope(b)?ha(n_(o),Ih):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&wt.Self?ig():this.parent).get(o,a=c&wt.Optional&&a===He?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Et]=v[Et]||[]).unshift(ne(o)),f)throw v;return function vr(i,o,a,c){const h=i[Et];throw o[P]&&h.unshift(o[P]),i.message=function K(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=ne(o);if(Array.isArray(o))h=o.map(ne).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let v=o[y];f.push(y+":"+("string"==typeof v?JSON.stringify(v):ne(v)))}h=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${i.replace(z,"\n  ")}`}("\n"+i.message,h,a,c),i.ngTokenPath=h,i[Et]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{Rt(y),X(f)}}resolveInjectorInitializers(){const o=X(this),a=Rt(void 0);try{const h=this.get(Cl.multi,dt,wt.Self);for(const f of h)f()}finally{X(o),Rt(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(ne(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(o){let a=Il(o=ke(o))?o:ke(o&&o.provide);const c=function IE(i){return CE(i)?ha(void 0,i.useValue):ha(bE(i),Ih)}(o);if(Il(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=ha(void 0,Ih,!0),h.factory=()=>Ut(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Ih&&(a.value=I1,a.value=a.factory()),"object"==typeof a.value&&a.value&&function T1(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=ke(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function n_(i){const o=Ln(i),a=null!==o?o.factory:Ks(i);if(null!==a)return a;if(i instanceof Wn)throw new ee(204,!1);if(i instanceof Function)return function b1(i){const o=i.length;if(o>0)throw function No(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new ee(204,!1);const a=function sr(i){return i&&(i[Un]||i[rr])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ee(204,!1)}function bE(i,o,a){let c;if(Il(i)){const h=ke(i);return Ks(h)||n_(h)}if(CE(i))c=()=>ke(i.useValue);else if(function C1(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Ut(i.deps||[]));else if(function E1(i){return!(!i||!i.useExisting)}(i))c=()=>Qe(ke(i.useExisting));else{const h=ke(i&&(i.useClass||i.provide));if(!function D1(i){return!!i.deps}(i))return Ks(h)||n_(h);c=()=>new h(...Ut(i.deps))}return c}function ha(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function r_(i,o){for(const a of i)Array.isArray(a)?r_(a,o):a&&Se(a)?r_(a.\u0275providers,o):o(a)}const DE=new Wn("AppId",{providedIn:"root",factory:()=>S1}),S1="ng",TE=new Wn("Platform Initializer"),i_=new Wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),bl=new Wn("CSP nonce",{providedIn:"root",factory:()=>function rc(){if(void 0!==nE)return nE;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let AE=(i,o,a)=>null;function d_(i,o,a=!1){return AE(i,o,a)}class F1{}class xE{}class p_{resolveComponentFactory(o){throw function L1(i){const o=Error(`No component factory found for ${ne(i)}.`);return o.ngComponent=i,o}(o)}}let Th=(()=>{class i{static#e=this.NULL=new p_}return i})();function U1(){return Ml(oi(),Ue())}function Ml(i,o){return new Ah(Ai(i,o))}let Ah=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=U1}return i})();function V1(i){return i instanceof Ah?i.nativeElement:i}class OE{}let sc=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function B1(){const i=Ue(),a=Vi(oi().index,i);return(Jn(a)?a:i)[kt]}()}return i})(),j1=(()=>{class i{static#e=this.\u0275prov=yt({token:i,providedIn:"root",factory:()=>null})}return i})();class PE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const NE=new PE("16.2.8"),g_={};function xl(i,o=null,a=null,c){const h=FE(i,o,a,c);return h.resolveInjectorInitializers(),h}function FE(i,o=null,a=null,c,h=new Set){const f=[a||dt,v1(i)];return c=c||("object"==typeof i?void 0:ne(i)),new sg(f,o||ig(),c||null,h)}let ao=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=He;static#t=this.NULL=new ng;static create(a,c){if(Array.isArray(a))return xl({name:""},c,a,"");{const h=a.name??"";return xl({name:h},a.parent,a.providers,h)}}static#n=this.\u0275prov=yt({token:i,providedIn:"any",factory:()=>Qe(_E)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function y_(i){return i.ngOriginalError}class Ka{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&y_(o);for(;a&&y_(a);)a=y_(a);return a||null}}function v_(i){return o=>{setTimeout(i,void 0,o)}}const Lo=class Z1 extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let h=o,f=a||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=v_(f),h&&(h=v_(h)),y&&(y=v_(y)));const v=super.subscribe({next:h,error:f,complete:y});return o instanceof V.w0&&o.add(v),v}};function UE(...i){}class vi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Lo(!1),this.onMicrotaskEmpty=new Lo(!1),this.onStable=new Lo(!1),this.onError=new Lo(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function W1(){const i="function"==typeof Wt.requestAnimationFrame;let o=Wt[i?"requestAnimationFrame":"setTimeout"],a=Wt[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Y1(i){const o=()=>{!function K1(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Wt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,w_(i),i.isCheckStableRunning=!0,dg(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),w_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,f,y,v)=>{if(function Q1(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(v))return a.invokeTask(h,f,y,v);try{return VE(i),a.invokeTask(h,f,y,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),BE(i)}},onInvoke:(a,c,h,f,y,v,C)=>{try{return VE(i),a.invoke(h,f,y,v,C)}finally{i.shouldCoalesceRunChangeDetection&&o(),BE(i)}},onHasTask:(a,c,h,f)=>{a.hasTask(h,f),c===h&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,w_(i),dg(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,h,f)=>(a.handleError(h,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vi.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(vi.isInAngularZone())throw new ee(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,o,Ol,UE,UE);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const Ol={};function dg(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function w_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function VE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function BE(i){i._nesting--,dg(i)}class hg{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Lo,this.onMicrotaskEmpty=new Lo,this.onStable=new Lo,this.onError=new Lo}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}const jE=new Wn("",{providedIn:"root",factory:$E});function $E(){const i=st(vi);let o=!0;const a=new N.y(h=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{h.next(o),h.complete()})}),c=new N.y(h=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{vi.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,h.next(!0))})})});const y=i.onUnstable.subscribe(()=>{vi.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{h.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,Y.T)(a,c.pipe((0,Ee.B)()))}function pa(i){return i instanceof Function?i():i}let Ya=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=yt({token:i,providedIn:"root",factory:()=>new i})}return i})();function Mh(i){for(;i;){i[zt]|=64;const o=la(i);if(Di(i)&&!o)return i;i=o}return null}const ZE=new Wn("",{providedIn:"root",factory:()=>!1});let Qa=null;function eC(i,o){return i[o]??rC()}function C_(i,o){const a=rC();a.producerNode?.length&&(i[o]=Qa,a.lView=i,Qa=nC())}const tC={...Od,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{Mh(i.lView)},lView:null};function nC(){return Object.create(tC)}function rC(){return Qa??=nC(),Qa}const an={};function iC(i){sC(Sn(),Ue(),Mi()+i,!1)}function sC(i,o,a,c){if(!c)if(3==(3&o[zt])){const f=i.preOrderCheckHooks;null!==f&&ta(o,f,a)}else{const f=i.preOrderHooks;null!==f&&La(o,f,0,a)}Js(a)}function Ja(i,o=wt.Default){const a=Ue();return null===a?Qe(i,o):Jd(oi(),a,ke(i),o)}function oC(){throw new Error("invalid")}function xh(i,o,a,c,h,f,y,v,C,b,A){const L=o.blueprint.slice();return L[Qn]=h,L[zt]=140|c,(null!==b||i&&2048&i[zt])&&(L[zt]|=2048),gp(L),L[$n]=L[br]=i,L[hr]=a,L[bi]=y||i&&i[bi],L[kt]=v||i&&i[kt],L[Es]=C||i&&i[Es]||null,L[Qr]=f,L[ss]=function Hp(){return UT++}(),L[Cs]=A,L[Uc]=b,L[Dr]=2==o.type?i[Dr]:L,L}function oc(i,o,a,c,h){let f=i.data[o];if(null===f)f=function I_(i,o,a,c,h){const f=Yc(),y=Ep(),C=i.data[o]=function dA(i,o,a,c,h,f){let y=o?o.injectorIndex:-1,v=0;return function Io(){return null!==Gt.skipHydrationRootTNode}()&&(v|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:v,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,c,h);return null===i.firstChild&&(i.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C,C.prev=f)),C}(i,o,a,c,h),function Ow(){return Gt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=h;const y=function Vu(){const i=Gt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Ls(f,!0),f}function Nl(i,o,a,c){if(0===a)return-1;const h=o.length;for(let f=0;f<a;f++)o.push(c),i.blueprint.push(c),i.data.push(null);return h}function aC(i,o,a,c,h){const f=eC(o,B),y=Mi(),v=2&c;try{Js(-1),v&&o.length>j&&sC(i,o,j,!1),Fs(v?2:0,h);const b=v?f:null,A=ap(b);try{null!==b&&(b.dirty=!1),a(c,h)}finally{jc(b,A)}}finally{v&&null===o[B]&&C_(o,B),Js(y),Fs(v?3:1,h)}}function b_(i,o,a){if(vo(o)){const c=Ti(null);try{const f=o.directiveEnd;for(let y=o.directiveStart;y<f;y++){const v=i.data[y];v.contentQueries&&v.contentQueries(1,a[y],y)}}finally{Ti(c)}}}function pg(i,o,a){ka()&&(function _A(i,o,a,c){const h=a.directiveStart,f=a.directiveEnd;Ki(a)&&function bA(i,o,a){const c=Ai(o,i),h=uC(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const v=mg(i,xh(i,h,null,y,c,o,null,i[bi].rendererFactory.createRenderer(c,a),null,null,null));i[o.index]=v}(o,a,i.data[h+a.componentOffset]),i.firstCreatePass||Tr(a,o),ji(c,o);const y=a.initialInputs;for(let v=h;v<f;v++){const C=i.data[v],b=sa(o,i,v,a);ji(b,o),null!==y&&O_(0,v-h,b,C,0,y),ar(C)&&(Vi(a.index,o)[hr]=sa(o,i,v,a))}}(i,o,a,Ai(a,o)),64==(64&a.flags)&&hC(i,o,a))}function D_(i,o,a=Ai){const c=o.localNames;if(null!==c){let h=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],v=-1===y?a(o,i):i[y];i[h++]=v}}}function uC(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=T_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function T_(i,o,a,c,h,f,y,v,C,b,A){const L=j+c,W=L+h,ie=function sA(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:an);return a}(L,W),Re="function"==typeof b?b():b;return ie[Xe]={type:i,blueprint:ie,template:a,queries:null,viewQuery:v,declTNode:o,data:ie.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:Re,incompleteFirstPass:!1,ssrId:A}}let A_=i=>null;function cC(i,o,a,c){for(let h in i)if(i.hasOwnProperty(h)){a=null===a?{}:a;const f=i[h];null===c?lC(a,o,h,f):c.hasOwnProperty(h)&&lC(a,o,c[h],f)}return a}function lC(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function S_(i,o,a,c){if(ka()){const h=null===c?null:{"":-1},f=function wA(i,o){const a=i.directiveRegistry;let c=null,h=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(Yo(o,y.selectors,!1))if(c||(c=[]),ar(y))if(null!==y.findHostDirectiveDefs){const v=[];h=h||new Map,y.findHostDirectiveDefs(y,v,h),c.unshift(...v,y),M_(i,o,v.length)}else c.unshift(y),M_(i,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,c,h),c.push(y)}return null===c?null:[c,h]}(i,a);let y,v;null===f?y=v=null:[y,v]=f,null!==y&&dC(i,o,a,y,h,v),h&&function EA(i,o,a){if(o){const c=i.localNames=[];for(let h=0;h<o.length;h+=2){const f=a[o[h+1]];if(null==f)throw new ee(-301,!1);c.push(o[h],f)}}}(a,c,h)}a.mergedAttrs=vs(a.mergedAttrs,a.attrs)}function dC(i,o,a,c,h,f){for(let b=0;b<c.length;b++)Ba(Tr(a,o),i,c[b].type);!function IA(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let b=0;b<c.length;b++){const A=c[b];A.providersResolver&&A.providersResolver(A)}let y=!1,v=!1,C=Nl(i,o,c.length,null);for(let b=0;b<c.length;b++){const A=c[b];a.mergedAttrs=vs(a.mergedAttrs,A.hostAttrs),fr(i,a,o,C,A),CA(C,A,h),null!==A.contentQueries&&(a.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(a.flags|=64);const L=A.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!v&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),v=!0),C++}!function hA(i,o,a){const h=o.directiveEnd,f=i.data,y=o.attrs,v=[];let C=null,b=null;for(let A=o.directiveStart;A<h;A++){const L=f[A],W=a?a.get(L):null,Re=W?W.outputs:null;C=cC(L.inputs,A,C,W?W.inputs:null),b=cC(L.outputs,A,b,Re);const Ke=null===C||null===y||Ii(o)?null:Oh(C,A,y);v.push(Ke)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=v,o.inputs=C,o.outputs=b}(i,a,f)}function hC(i,o,a){const c=a.directiveStart,h=a.directiveEnd,f=a.index,y=function Pw(){return Gt.lFrame.currentDirectiveIndex}();try{Js(f);for(let v=c;v<h;v++){const C=i.data[v],b=o[v];Dp(v),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&vA(C,b)}}finally{Js(-1),Dp(y)}}function vA(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function M_(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function CA(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;ar(o)&&(a[""]=i)}}function fr(i,o,a,c,h){i.data[c]=h;const f=h.factory||(h.factory=Ks(h.type)),y=new Ao(f,ar(h),Ja);i.blueprint[c]=y,a[c]=y,function mA(i,o,a,c,h){const f=h.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const v=~o.index;(function yA(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=v&&y.push(v),y.push(a,c,f)}}(i,o,c,Nl(i,a,h.hostVars,an),h)}function Uo(i,o,a,c,h,f){const y=Ai(i,o);!function x_(i,o,a,c,h,f,y){if(null==f)i.removeAttribute(o,h,a);else{const v=null==y?ue(f):y(f,c||"",h);i.setAttribute(o,h,v,a)}}(o[kt],y,f,i.value,a,c,h)}function O_(i,o,a,c,h,f){const y=f[o];if(null!==y)for(let v=0;v<y.length;)P_(c,a,y[v++],y[v++],y[v++])}function P_(i,o,a,c,h){const f=Ti(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(h=y[c].call(o,h)),null!==i.setInput?i.setInput(o,h,a,c):o[c]=h}finally{Ti(f)}}function Oh(i,o,a){let c=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let v=0;v<y.length;v+=2)if(y[v]===o){c.push(f,y[v+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function fC(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null,null]}function gg(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];Tp(a[c]),y.contentQueries(2,o[f],f)}}}function mg(i,o){return i[Xo]?i[Td][si]=o:i[Xo]=o,i[Td]=o,o}function Xa(i,o,a){Tp(0);const c=Ti(null);try{o(i,a)}finally{Ti(c)}}function pC(i){return i[_o]||(i[_o]=[])}function gC(i){return i.cleanup||(i.cleanup=[])}function yC(i,o){const a=i[Es],c=a?a.get(Ka,null):null;c&&c.handleError(o)}function N_(i,o,a,c,h){for(let f=0;f<a.length;){const y=a[f++],v=a[f++];P_(i.data[y],o[y],c,v,h)}}function Vo(i,o,a){const c=Qs(o,i);!function Xu(i,o,a){i.setValue(o,a)}(i[kt],c,a)}function TA(i,o){const a=Vi(o,i),c=a[Xe];!function AA(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(c,a);const h=a[Qn];null!==h&&null===a[Cs]&&(a[Cs]=d_(h,a[Es])),Ph(c,a,a[hr])}function Ph(i,o,a){Si(o);try{const c=i.viewQuery;null!==c&&Xa(1,c,a);const h=i.template;null!==h&&aC(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&gg(i,o),i.staticViewQueries&&Xa(2,i.viewQuery,a);const f=i.components;null!==f&&function SA(i,o){for(let a=0;a<o.length;a++)TA(i,o[a])}(o,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[zt]&=-5,ui()}}let R_=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,h){const f=typeof Zone>"u"?null:Zone.current,y=function dy(i,o,a){const c=Object.create(Tw);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=o;const h=y=>{c.cleanupFn=y};return c.ref={notify:()=>iy(c),run:()=>{if(c.dirty=!1,c.hasRun&&!sy(c))return;c.hasRun=!0;const y=ap(c);try{c.cleanupFn(),c.cleanupFn=fp,c.fn(h)}finally{jc(c,y)}},cleanup:()=>c.cleanupFn()},c.ref}(a,b=>{this.all.has(b)&&this.queue.set(b,f)},h);let v;this.all.add(y),y.notify();const C=()=>{y.cleanup(),v?.(),this.all.delete(y),this.queue.delete(y)};return v=c?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=yt({token:i,providedIn:"root",factory:()=>new i})}return i})();function yg(i,o,a){let c=a?i.styles:null,h=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const v=o[y];"number"==typeof v?f=v:1==f?h=Ve(h,v):2==f&&(c=Ve(c,v+": "+o[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=h:i.classesWithoutHost=h}function Nh(i,o,a,c,h=!1){for(;null!==a;){const f=o[a.index];null!==f&&c.push(zn(f)),xn(f)&&_C(f,c);const y=a.type;if(8&y)Nh(i,o,a.child,c);else if(32&y){const v=Ds(a,o);let C;for(;C=v();)c.push(C)}else if(16&y){const v=$y(o,a);if(Array.isArray(v))c.push(...v);else{const C=la(o[Dr]);Nh(C[Xe],C,v,c,!0)}}a=h?a.projectionNext:a.next}return c}function _C(i,o){for(let a=Bt;a<i.length;a++){const c=i[a],h=c[Xe].firstChild;null!==h&&Nh(c[Xe],c,h,o)}i[et]!==i[Qn]&&o.push(i[et])}function _g(i,o,a,c=!0){const h=o[bi],f=h.rendererFactory,y=h.afterRenderEventManager;f.begin?.(),y?.begin();try{k_(i,o,i.template,a)}catch(C){throw c&&yC(o,C),C}finally{f.end?.(),h.effectManager?.flush(),y?.end()}}function k_(i,o,a,c){const h=o[zt];if(256!=(256&h)){o[bi].effectManager?.flush(),Si(o);try{gp(o),function wy(i){return Gt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&aC(i,o,a,2,c);const y=3==(3&h);if(y){const b=i.preOrderCheckHooks;null!==b&&ta(o,b,null)}else{const b=i.preOrderHooks;null!==b&&La(o,b,0,null),Jc(o,0)}if(function F_(i){for(let o=zw(i);null!==o;o=Uy(o)){if(!o[qe])continue;const a=o[Ft];for(let c=0;c<a.length;c++){Lu(a[c])}}}(o),vC(o,2),null!==i.contentQueries&&gg(i,o),y){const b=i.contentCheckHooks;null!==b&&ta(o,b)}else{const b=i.contentHooks;null!==b&&La(o,b,1),Jc(o,1)}!function iA(i,o){const a=i.hostBindingOpCodes;if(null===a)return;const c=eC(o,F);try{for(let h=0;h<a.length;h++){const f=a[h];if(f<0)Js(~f);else{const y=f,v=a[++h],C=a[++h];bp(v,y),c.dirty=!1;const b=ap(c);try{C(2,o[y])}finally{jc(c,b)}}}}finally{null===o[F]&&C_(o,F),Js(-1)}}(i,o);const v=i.components;null!==v&&EC(o,v,0);const C=i.viewQuery;if(null!==C&&Xa(2,C,c),y){const b=i.viewCheckHooks;null!==b&&ta(o,b)}else{const b=i.viewHooks;null!==b&&La(o,b,2),Jc(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[zt]&=-73,gy(o)}finally{ui()}}}function vC(i,o){for(let a=zw(i);null!==a;a=Uy(a))for(let c=Bt;c<a.length;c++)wC(a[c],o)}function OA(i,o,a){wC(Vi(o,i),a)}function wC(i,o){if(!function Mw(i){return 128==(128&i[zt])}(i))return;const a=i[Xe],c=i[zt];if(80&c&&0===o||1024&c||2===o)k_(a,i,a.template,i[hr]);else if(i[ks]>0){vC(i,1);const h=a.components;null!==h&&EC(i,h,1)}}function EC(i,o,a){for(let c=0;c<o.length;c++)OA(i,o[c],a)}class Rh{get rootNodes(){const o=this._lView,a=o[Xe];return Nh(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[hr]}set context(o){this._lView[hr]=o}get destroyed(){return 256==(256&this._lView[zt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[$n];if(xn(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Zp(o,c),Ha(a,c))}this._attachedToViewContainer=!1}Vy(this._lView[Xe],this._lView)}onDestroy(o){!function Hd(i,o){if(256==(256&i[zt]))throw new ee(911,!1);null===i[Ws]&&(i[Ws]=[]),i[Ws].push(o)}(this._lView,o)}markForCheck(){Mh(this._cdRefInjectingView||this._lView)}detach(){this._lView[zt]&=-129}reattach(){this._lView[zt]|=128}detectChanges(){_g(this._lView[Xe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dh(i,o){gh(i,o,o[kt],2,null,null)}(this._lView[Xe],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=o}}class PA extends Rh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;_g(o[Xe],o,o[hr],!1)}checkNoChanges(){}get context(){return null}}class CC extends Th{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=In(o);return new ac(a,this.ngModule)}}function IC(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class RA{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=_n(c);const h=this.injector.get(o,g_,c);return h!==g_||a===g_?h:this.parentInjector.get(o,a,c)}}class ac extends xE{get inputs(){const o=this.componentDef,a=o.inputTransforms,c=IC(o.inputs);if(null!==a)for(const h of c)a.hasOwnProperty(h.propName)&&(h.transform=a[h.propName]);return c}get outputs(){return IC(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Cn(i){return i.map(En).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,h){let f=(h=h||this.ngModule)instanceof Fo?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new RA(o,f):o,v=y.get(OE,null);if(null===v)throw new ee(407,!1);const L={rendererFactory:v,sanitizer:y.get(j1,null),effectManager:y.get(R_,null),afterRenderEventManager:y.get(Ya,null)},W=v.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",Re=c?function oA(i,o,a,c){const f=c.get(ZE,!1)||a===ot.ShadowDom,y=i.selectRootElement(o,f);return function aA(i){A_(i)}(y),y}(W,c,this.componentDef.encapsulation,y):qp(W,ie,function NA(i){const o=i.toLowerCase();return"svg"===o?pp:"math"===o?"math":null}(ie)),St=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let $e=null;null!==Re&&($e=d_(Re,y,!0));const Qt=T_(0,null,null,1,0,null,null,null,null,null,null),mn=xh(null,Qt,null,St,null,null,L,W,y,null,$e);let Kn,gs;Si(mn);try{const Zo=this.componentDef;let ld,j0=null;Zo.findHostDirectiveDefs?(ld=[],j0=new Map,Zo.findHostDirectiveDefs(Zo,ld,j0),ld.push(Zo)):ld=[Zo];const VM=function FA(i,o){const a=i[Xe],c=j;return i[c]=o,oc(a,c,2,"#host",null)}(mn,Re),Tu=function bC(i,o,a,c,h,f,y){const v=h[Xe];!function DC(i,o,a,c){for(const h of i)o.mergedAttrs=vs(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(yg(o,o.mergedAttrs,!0),null!==a&&mh(c,a,o))}(c,i,o,y);let C=null;null!==o&&(C=d_(o,h[Es]));const b=f.rendererFactory.createRenderer(o,a);let A=16;a.signals?A=4096:a.onPush&&(A=64);const L=xh(h,uC(a),null,A,h[i.index],i,f,b,null,null,C);return v.firstCreatePass&&M_(v,i,c.length-1),mg(h,L),h[i.index]=L}(VM,Re,Zo,ld,mn,L,W);gs=jd(Qt,j),Re&&function TC(i,o,a,c){if(c)Wr(i,a,["ng-version",NE.full]);else{const{attrs:h,classes:f}=function en(i){const o=[],a=[];let c=1,h=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===h?""!==f&&o.push(f,i[++c]):8===h&&a.push(f);else{if(!Kr(h))break;h=f}c++}return{attrs:o,classes:a}}(o.selectors[0]);h&&Wr(i,a,h),f&&f.length>0&&eE(i,a,f.join(" "))}}(W,Zo,Re,c),void 0!==a&&function AC(i,o,a){const c=i.projection=[];for(let h=0;h<o.length;h++){const f=a[h];c.push(null!=f?Array.from(f):null)}}(gs,this.ngContentSelectors,a),Kn=function LA(i,o,a,c,h,f){const y=oi(),v=h[Xe],C=Ai(y,h);dC(v,h,y,a,null,c);for(let A=0;A<a.length;A++)ji(sa(h,v,y.directiveStart+A,y),h);hC(v,h,y),C&&ji(C,h);const b=sa(h,v,y.directiveStart+y.componentOffset,y);if(i[hr]=h[hr]=b,null!==f)for(const A of f)A(b,o);return b_(v,y,i),b}(Tu,Zo,ld,j0,mn,[UA]),Ph(Qt,mn,null)}finally{ui()}return new kA(this.componentType,Kn,Ml(gs,mn),mn,gs)}}class kA extends F1{constructor(o,a,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new PA(h),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const f=this._rootLView;N_(f[Xe],f,h,o,a),this.previousInputValues.set(o,a),Mh(Vi(this._tNode.index,f))}}get injector(){return new $r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function UA(){const i=oi();Fa(Ue()[Xe],i)}function L_(i){let o=function SC(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let h;if(ar(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ee(903,!1);h=o.\u0275dir}if(h){if(a){c.push(h);const y=i;y.inputs=vg(i.inputs),y.inputTransforms=vg(i.inputTransforms),y.declaredInputs=vg(i.declaredInputs),y.outputs=vg(i.outputs);const v=h.hostBindings;v&&MC(i,v);const C=h.viewQuery,b=h.contentQueries;if(C&&BA(i,C),b&&jA(i,b),q(i.inputs,h.inputs),q(i.declaredInputs,h.declaredInputs),q(i.outputs,h.outputs),null!==h.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),q(y.inputTransforms,h.inputTransforms)),ar(h)&&h.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let y=0;y<f.length;y++){const v=f[y];v&&v.ngInherit&&v(i),v===L_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function VA(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const h=i[c];h.hostVars=o+=h.hostVars,h.hostAttrs=vs(h.hostAttrs,a=vs(a,h.hostAttrs))}}(c)}function vg(i){return i===Ot?{}:i===dt?[]:i}function BA(i,o){const a=i.viewQuery;i.viewQuery=a?(c,h)=>{o(c,h),a(c,h)}:o}function jA(i,o){const a=i.contentQueries;i.contentQueries=a?(c,h,f)=>{o(c,h,f),a(c,h,f)}:o}function MC(i,o){const a=i.hostBindings;i.hostBindings=a?(c,h)=>{o(c,h),a(c,h)}:o}function PC(i){const o=i.inputConfig,a={};for(const c in o)if(o.hasOwnProperty(c)){const h=o[c];Array.isArray(h)&&h[2]&&(a[c]=h[2])}i.inputTransforms=a}function Eg(i){return!!V_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function V_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Bo(i,o,a){return i[o]=a}function $i(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function uc(i,o,a,c){const h=$i(i,o,a);return $i(i,o+1,c)||h}function B_(i,o,a,c){const h=Ue();return $i(h,Bu(),o)&&(Sn(),Uo(ur(),h,i,o,a,c)),B_}function tu(i,o,a,c,h,f){const v=uc(i,function bo(){return Gt.lFrame.bindingIndex}(),a,h);return Us(2),v?o+ue(a)+c+ue(h)+f:an}function $C(i,o,a,c,h,f,y,v){const C=Ue(),b=Sn(),A=i+j,L=b.firstCreatePass?function uS(i,o,a,c,h,f,y,v,C){const b=o.consts,A=oc(o,i,4,y||null,Co(b,v));S_(o,a,A,Co(b,C)),Fa(o,A);const L=A.tView=T_(2,A,c,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,b,null);return null!==o.queries&&(o.queries.template(o,A),L.queries=o.queries.embeddedTView(A)),A}(A,b,C,o,a,c,h,f,y):b.data[A];Ls(L,!1);const W=HC(b,C,L,i);Xs()&&fh(b,C,W,L),ji(W,C),mg(C,C[A]=fC(W,C,W,L)),Is(L)&&pg(b,C,L),null!=y&&D_(C,L,v)}let HC=function GC(i,o,a,c){return eo(!0),o[kt].createComment("")};function J_(i){return Ra(function _y(){return Gt.lFrame.contextLView}(),j+i)}function X_(i,o,a){const c=Ue();return $i(c,Bu(),o)&&function Ts(i,o,a,c,h,f,y,v){const C=Ai(o,a);let A,b=o.inputs;!v&&null!=b&&(A=b[c])?(N_(i,a,A,c,h),Ki(o)&&function pA(i,o){const a=Vi(o,i);16&a[zt]||(a[zt]|=64)}(a,o.index)):3&o.type&&(c=function fA(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),h=null!=y?y(h,o.value||"",c):h,f.setProperty(C,c,h))}(Sn(),ur(),c,i,o,c[kt],a,!1),X_}function ev(i,o,a,c,h){const y=h?"class":"style";N_(i,a,o.inputs[y],y,c)}function Dg(i,o,a,c){const h=Ue(),f=Sn(),y=j+i,v=h[kt],C=f.firstCreatePass?function hS(i,o,a,c,h,f){const y=o.consts,C=oc(o,i,2,c,Co(y,h));return S_(o,a,C,Co(y,f)),null!==C.attrs&&yg(C,C.attrs,!1),null!==C.mergedAttrs&&yg(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(y,f,h,o,a,c):f.data[y],b=zC(f,h,C,v,o,i);h[y]=b;const A=Is(C);return Ls(C,!0),mh(v,b,C),32!=(32&C.flags)&&Xs()&&fh(f,h,b,C),0===function yp(){return Gt.lFrame.elementDepthCount}()&&ji(b,h),function _p(){Gt.lFrame.elementDepthCount++}(),A&&(pg(f,h,C),b_(f,C,h)),null!==c&&D_(h,C),Dg}function Tg(){let i=oi();Ep()?function Cp(){Gt.lFrame.isParent=!1}():(i=i.parent,Ls(i,!1));const o=i;(function Uu(i){return Gt.skipHydrationRootTNode===i})(o)&&function wp(){Gt.skipHydrationRootTNode=null}(),function my(){Gt.lFrame.elementDepthCount--}();const a=Sn();return a.firstCreatePass&&(Fa(a,i),vo(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function no(i){return 0!=(8&i.flags)}(o)&&ev(a,o,Ue(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function el(i){return 0!=(16&i.flags)}(o)&&ev(a,o,Ue(),o.stylesWithoutHost,!1),Tg}function tv(i,o,a,c){return Dg(i,o,a,c),Tg(),tv}let zC=(i,o,a,c,h,f)=>(eo(!0),qp(c,h,function Sp(){return Gt.lFrame.currentNamespace}()));function WC(){return Ue()}function sv(i){return!!i&&"function"==typeof i.then}function KC(i){return!!i&&"function"==typeof i.subscribe}function Ag(i,o,a,c){const h=Ue(),f=Sn(),y=oi();return function QC(i,o,a,c,h,f,y){const v=Is(c),b=i.firstCreatePass&&gC(i),A=o[hr],L=pC(o);let W=!0;if(3&c.type||y){const Ke=Ai(c,o),at=y?y(Ke):Ke,St=L.length,$e=y?mn=>y(zn(mn[c.index])):c.index;let Qt=null;if(!y&&v&&(Qt=function yS(i,o,a,c){const h=i.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===a&&h[f+1]===c){const v=o[_o],C=h[f+2];return v.length>C?v[C]:null}"string"==typeof y&&(f+=2)}return null}(i,o,h,c.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=f,Qt.__ngLastListenerFn__=f,W=!1;else{f=ov(c,o,A,f,!1);const mn=a.listen(at,h,f);L.push(f,mn),b&&b.push(h,$e,St,St+1)}}else f=ov(c,o,A,f,!1);const ie=c.outputs;let Re;if(W&&null!==ie&&(Re=ie[h])){const Ke=Re.length;if(Ke)for(let at=0;at<Ke;at+=2){const Kn=o[Re[at]][Re[at+1]].subscribe(f),gs=L.length;L.push(f,Kn),b&&b.push(h,c.index,gs,-(gs+1))}}}(f,h,h[kt],y,i,o,c),Ag}function JC(i,o,a,c){try{return Fs(6,o,a),!1!==a(c)}catch(h){return yC(i,h),!1}finally{Fs(7,o,a)}}function ov(i,o,a,c,h){return function f(y){if(y===Function)return c;Mh(i.componentOffset>-1?Vi(i.index,o):o);let C=JC(o,a,c,y),b=f.__ngNextListenerFn__;for(;b;)C=JC(o,a,b,y)&&C,b=b.__ngNextListenerFn__;return h&&!1===C&&y.preventDefault(),C}}function XC(i=1){return function Qc(i){return(Gt.lFrame.contextLView=function Wd(i,o){for(;i>0;)o=o[br],i--;return o}(i,Gt.lFrame.contextLView))[hr]}(i)}function Sg(i,o){return i<<17|o<<2}function iu(i){return i>>17&32767}function uv(i){return 2|i}function lc(i){return(131068&i)>>2}function tr(i,o){return-131069&i|o<<2}function cv(i){return 1|i}function Hr(i,o,a,c,h){const f=i[a+1],y=null===o;let v=c?iu(f):lc(f),C=!1;for(;0!==v&&(!1===C||y);){const A=i[v+1];lv(i[v],o)&&(C=!0,i[v+1]=c?cv(A):uv(A)),v=c?iu(A):lc(A)}C&&(i[a+1]=c?uv(f):cv(f))}function lv(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Ga(i,o)>=0}const li={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wi(i){return i.substring(li.key,li.keyEnd)}function Vh(i,o){const a=li.textEnd;return a===o?-1:(o=li.keyEnd=function co(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,li.key=o,a),Vl(i,o,a))}function Vl(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function jh(i,o){return function ds(i,o,a,c){const h=Ue(),f=Sn(),y=Us(2);f.firstUpdatePass&&hI(f,i,y,c),o!==an&&$i(h,y,o)&&gI(f,f.data[Mi()],h,h[kt],i,h[y+1]=function pv(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ne(Za(i)))),i}(o,a),c,y)}(i,o,null,!0),jh}function dI(i){!function nr(i,o,a,c){const h=Sn(),f=Us(2);h.firstUpdatePass&&hI(h,null,f,c);const y=Ue();if(a!==an&&$i(y,f,a)){const v=h.data[Mi()];if(gv(v,c)&&!ya(h,f)){let C=c?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(a=Ve(C,a||"")),ev(h,v,y,a,c)}else!function DS(i,o,a,c,h,f,y,v){h===an&&(h=dt);let C=0,b=0,A=0<h.length?h[0]:null,L=0<f.length?f[0]:null;for(;null!==A||null!==L;){const W=C<h.length?h[C+1]:void 0,ie=b<f.length?f[b+1]:void 0;let Ke,Re=null;A===L?(C+=2,b+=2,W!==ie&&(Re=L,Ke=ie)):null===L||null!==A&&A<L?(C+=2,Re=A):(b+=2,Re=L,Ke=ie),null!==Re&&gI(i,o,a,c,Re,Ke,y,v),A=C<h.length?h[C]:null,L=b<f.length?f[b]:null}}(h,v,y,y[kt],y[f+1],y[f+1]=function Rg(i,o,a){if(null==a||""===a)return dt;const c=[],h=Za(a);if(Array.isArray(h))for(let f=0;f<h.length;f++)i(c,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&i(c,f,h[f]);else"string"==typeof h&&o(c,h);return c}(i,o,a),c,f)}}(fv,pr,i,!0)}function pr(i,o){for(let a=function IS(i){return function Vn(i){li.key=0,li.keyEnd=0,li.value=0,li.valueEnd=0,li.textEnd=i.length}(i),Vh(i,Vl(i,0,li.textEnd))}(o);a>=0;a=Vh(o,a))Qi(i,wi(o),!0)}function ya(i,o){return o>=i.expandoStartIndex}function hI(i,o,a,c){const h=i.data;if(null===h[a+1]){const f=h[Mi()],y=ya(i,a);gv(f,c)&&null===o&&!y&&(o=!1),o=function fI(i,o,a,c){const h=function qd(i){const o=Gt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(a=_a(a=hv(null,i,o,a,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==h)if(a=hv(h,i,o,a,c),null===f){let C=function dv(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==lc(c))return i[iu(c)]}(i,o,c);void 0!==C&&Array.isArray(C)&&(C=hv(null,i,o,C[1],c),C=_a(C,o.attrs,c),function pI(i,o,a,c){i[iu(a?o.classBindings:o.styleBindings)]=c}(i,o,c,C))}else f=function Hi(i,o,a){let c;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)c=_a(c,i[f].hostAttrs,a);return _a(c,o.attrs,a)}(i,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),a}(h,f,o,c),function CS(i,o,a,c,h,f){let y=f?o.classBindings:o.styleBindings,v=iu(y),C=lc(y);i[c]=a;let A,b=!1;if(Array.isArray(a)?(A=a[1],(null===A||Ga(a,A)>0)&&(b=!0)):A=a,h)if(0!==C){const W=iu(i[v+1]);i[c+1]=Sg(W,v),0!==W&&(i[W+1]=tr(i[W+1],c)),i[v+1]=function ES(i,o){return 131071&i|o<<17}(i[v+1],c)}else i[c+1]=Sg(v,0),0!==v&&(i[v+1]=tr(i[v+1],c)),v=c;else i[c+1]=Sg(C,0),0===v?v=c:i[C+1]=tr(i[C+1],c),C=c;b&&(i[c+1]=uv(i[c+1])),Hr(i,A,c,!0),Hr(i,A,c,!1),function xg(i,o,a,c,h){const f=h?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&Ga(f,o)>=0&&(a[c+1]=cv(a[c+1]))}(o,A,i,c,f),y=Sg(v,C),f?o.classBindings=y:o.styleBindings=y}(h,f,o,a,y,c)}}function hv(i,o,a,c,h){let f=null;const y=a.directiveEnd;let v=a.directiveStylingLast;for(-1===v?v=a.directiveStart:v++;v<y&&(f=o[v],c=_a(c,f.hostAttrs,h),f!==i);)v++;return null!==i&&(a.directiveStylingLast=v),c}function _a(i,o,a){const c=a?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?h=y:h===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Qi(i,y,!!a||o[++f]))}return void 0===i?null:i}function fv(i,o,a){const c=String(o);""!==c&&!c.includes(" ")&&Qi(i,c,a)}function gI(i,o,a,c,h,f,y,v){if(!(3&o.type))return;const C=i.data,b=C[v+1],A=function Mg(i){return 1==(1&i)}(b)?dc(C,o,a,h,lc(b),y):void 0;$h(A)||($h(f)||function wS(i){return 2==(2&i)}(b)&&(f=dc(C,null,a,h,v,y)),function n1(i,o,a,c,h){if(o)h?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:ih.DashCase;null==h?i.removeStyle(a,c,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=ih.Important),i.setStyle(a,c,h,f))}}(c,y,Qs(Mi(),a),h,f))}function dc(i,o,a,c,h,f){const y=null===o;let v;for(;h>0;){const C=i[h],b=Array.isArray(C),A=b?C[1]:C,L=null===A;let W=a[h+1];W===an&&(W=L?dt:void 0);let ie=L?th(W,c):A===c?W:void 0;if(b&&!$h(ie)&&(ie=th(C,c)),$h(ie)&&(v=ie,y))return v;const Re=i[h+1];h=y?iu(Re):lc(Re)}if(null!==o){let C=f?o.residualClasses:o.residualStyles;null!=C&&(v=th(C,c))}return v}function $h(i){return void 0!==i}function gv(i,o){return 0!=(i.flags&(o?8:16))}function mI(i,o=""){const a=Ue(),c=Sn(),h=i+j,f=c.firstCreatePass?oc(c,h,1,o,null):c.data[h],y=mv(c,a,f,o,i);a[h]=y,Xs()&&fh(c,a,y,f),Ls(f,!1)}let mv=(i,o,a,c,h)=>(eo(!0),function zp(i,o){return i.createText(o)}(o[kt],c));function Hh(i){return Bl("",i,""),Hh}function Bl(i,o,a){const c=Ue(),h=function kl(i,o,a,c){return $i(i,Bu(),a)?o+ue(a)+c:an}(c,i,o,a);return h!==an&&Vo(c,Mi(),h),Bl}function Gh(i,o,a,c,h){const f=Ue(),y=tu(f,i,o,a,c,h);return y!==an&&Vo(f,Mi(),y),Gh}const su=void 0;var MS=["en",[["a","p"],["AM","PM"],su],[["AM","PM"],su,su],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",su,"{1} 'at' {0}",su],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function SS(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Hl={};function hc(i){const o=function Sv(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=RI(o);if(a)return a;const c=o.split("-")[0];if(a=RI(c),a)return a;if("en"===c)return MS;throw new ee(701,!1)}function Tv(i){return hc(i)[ou.PluralCase]}function RI(i){return i in Hl||(Hl[i]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[i]),Hl[i]}var ou=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(ou||{});const $o="en-US";let LI=$o;function _c(i,o,a,c,h){if(i=ke(i),Array.isArray(i))for(let f=0;f<i.length;f++)_c(i[f],o,a,c,h);else{const f=Sn(),y=Ue(),v=oi();let C=Il(i)?i:ke(i.provide);const b=bE(i),A=1048575&v.providerIndexes,L=v.directiveStart,W=v.providerIndexes>>20;if(Il(i)||!i.multi){const ie=new Ao(b,h,Ja),Re=Jg(C,o,h?A:A+W,L);-1===Re?(Ba(Tr(v,y),f,C),Hv(f,i,o.length),o.push(C),v.directiveStart++,v.directiveEnd++,h&&(v.providerIndexes+=1048576),a.push(ie),y.push(ie)):(a[Re]=ie,y[Re]=ie)}else{const ie=Jg(C,o,A+W,L),Re=Jg(C,o,A,A+W),at=Re>=0&&a[Re];if(h&&!at||!h&&!(ie>=0&&a[ie])){Ba(Tr(v,y),f,C);const St=function sb(i,o,a,c,h){const f=new Ao(i,a,Ja);return f.multi=[],f.index=o,f.componentProviders=0,Sr(f,h,c&&!a),f}(h?HS:$S,a.length,h,c,b);!h&&at&&(a[Re].providerFactory=St),Hv(f,i,o.length,0),o.push(C),v.directiveStart++,v.directiveEnd++,h&&(v.providerIndexes+=1048576),a.push(St),y.push(St)}else Hv(f,i,ie>-1?ie:Re,Sr(a[h?Re:ie],b,!h&&c));!h&&c&&at&&a[Re].componentProviders++}}}function Hv(i,o,a,c){const h=Il(o),f=function GP(i){return!!i.useClass}(o);if(h||f){const C=(f?ke(o.useClass):o).prototype.ngOnDestroy;if(C){const b=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const A=b.indexOf(a);-1===A?b.push(a,[c,C]):b[A+1].push(c,C)}else b.push(a,C)}}}function Sr(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Jg(i,o,a,c){for(let h=a;h<c;h++)if(o[h]===i)return h;return-1}function $S(i,o,a,c){return Gv(this.multi,[])}function HS(i,o,a,c){const h=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,v=sa(a,a[Xe],this.providerFactory.index,c);f=v.slice(0,y),Gv(h,f);for(let C=y;C<v.length;C++)f.push(v[C])}else f=[],Gv(h,f);return f}function Gv(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function zv(i,o=[]){return a=>{a.providersResolver=(c,h)=>function af(i,o,a){const c=Sn();if(c.firstCreatePass){const h=ar(i);_c(a,c.data,c.blueprint,h,!0),_c(o,c.data,c.blueprint,h,!1)}}(c,h?h(i):i,o)}}class du{}class uf{}function ob(i,o){return new Xg(i,o??null,[])}class Xg extends du{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new CC(this);const h=ii(o);this._bootstrapComponents=pa(h.bootstrap),this._r3Injector=FE(o,a,[{provide:du,useValue:this},{provide:Th,useValue:this.componentFactoryResolver},...c],ne(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class qv extends uf{constructor(o){super(),this.moduleType=o}create(o){return new Xg(this.moduleType,o,[])}}class em extends du{constructor(o){super(),this.componentFactoryResolver=new CC(this),this.instance=null;const a=new sg([...o.providers,{provide:du,useValue:this},{provide:Th,useValue:this.componentFactoryResolver}],o.parent||ig(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Zl(i,o,a=null){return new em({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let ub=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=wE(0,a.type),h=c.length>0?Zl([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,h)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=yt({token:i,providedIn:"environment",factory:()=>new i(Qe(Fo))})}return i})();function tm(i){i.getStandaloneInjector=o=>o.get(ub).getOrCreateStandaloneInjector(i)}function Yv(i,o,a){const c=ai()+i,h=Ue();return h[c]===an?Bo(h,c,a?o.call(a):o()):function Rl(i,o){return i[o]}(h,c)}function Qv(i,o,a,c){return _b(Ue(),ai(),i,o,a,c)}function Bn(i,o){const a=i[o];return a===an?void 0:a}function _b(i,o,a,c,h,f){const y=o+a;return $i(i,y,h)?Bo(i,y+1,f?c.call(f,h):c(h)):Bn(i,y+1)}function fo(i,o,a,c,h,f,y,v){const C=o+a;return function Cg(i,o,a,c,h){const f=uc(i,o,a,c);return $i(i,o+2,h)||f}(i,C,h,f,y)?Bo(i,C+3,v?c.call(v,h,f,y):c(h,f,y)):Bn(i,C+3)}function vc(i,o){const a=Sn();let c;const h=i+j;a.firstCreatePass?(c=function e0(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[h]=c,c.onDestroy&&(a.destroyHooks??=[]).push(h,c.onDestroy)):c=a.data[h];const f=c.factory||(c.factory=Ks(c.type)),v=Rt(Ja);try{const C=ci(!1),b=f();return ci(C),function dS(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,Ue(),h,b),b}finally{Rt(v)}}function Ss(i,o,a){const c=i+j,h=Ue(),f=Ra(h,c);return fu(h,c)?_b(h,ai(),o,f.transform,a,f):f.transform(a)}function hf(i,o,a,c,h){const f=i+j,y=Ue(),v=Ra(y,f);return fu(y,f)?fo(y,ai(),o,v.transform,a,c,h,v):v.transform(a,c,h)}function fu(i,o){return i[Xe].data[o].pure}function vb(){return this._results[Symbol.iterator]()}class pu{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Lo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=pu.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=vb)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=function Ni(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Lp(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let h=i[c],f=o[c];if(a&&(h=a(h),f=a(f)),f!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function t0(i,o,a,c=!0){const h=o[Xe];if(function YT(i,o,a,c){const h=Bt+c,f=a.length;c>0&&(a[h-1][si]=o),c<f-Bt?(o[si]=a[h],Dy(a,Bt+c,o)):(a.push(o),o[si]=null),o[$n]=a;const y=o[Li];null!==y&&a!==y&&function QT(i,o){const a=i[Ft];o[Dr]!==o[$n][$n][Dr]&&(i[qe]=!0),null===a?i[Ft]=[o]:a.push(o)}(y,o);const v=o[yi];null!==v&&v.insertView(i),o[zt]|=128}(h,o,i,a),c){const f=Hy(a,i),y=o[kt],v=Wp(y,i[et]);null!==v&&function lh(i,o,a,c,h,f){c[Qn]=h,c[Qr]=o,gh(i,c,a,1,h,f)}(h,i[Qr],y,o,v,f)}}let pf=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=am}return i})();const wb=pf,WS=class extends wb{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,c){const h=function ZS(i,o,a,c){const h=o.tView,v=xh(i,h,a,4096&i[zt]?4096:16,null,o,null,null,null,c?.injector??null,c?.hydrationInfo??null);v[Li]=i[o.index];const b=i[yi];return null!==b&&(v[yi]=b.createEmbeddedView(h)),Ph(h,v,a),v}(this._declarationLView,this._declarationTContainer,o,{injector:a,hydrationInfo:c});return new Rh(h)}};function am(){return um(oi(),Ue())}function um(i,o){return 4&i.type?new WS(o,i,Ml(i,o)):null}let Ji=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=r0}return i})();function r0(){return _e(oi(),Ue())}const Ct=Ji,At=class extends Ct{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Ml(this._hostTNode,this._hostLView)}get injector(){return new $r(this._hostTNode,this._hostLView)}get parentInjector(){const o=ra(this._hostTNode,this._hostLView);if(tl(o)){const a=Zn(o,this._hostLView),c=Yi(o);return new $r(a[Xe].data[c+8],a)}return new $r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Cb(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(o,a,c){let h,f;"number"==typeof c?h=c:null!=c&&(h=c.index,f=c.injector);const v=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(v,h,false),v}createComponent(o,a,c,h,f){const y=o&&!function io(i){return"function"==typeof i}(o);let v;if(y)v=a;else{const Ke=a||{};v=Ke.index,c=Ke.injector,h=Ke.projectableNodes,f=Ke.environmentInjector||Ke.ngModuleRef}const C=y?o:new ac(In(o)),b=c||this.parentInjector;if(!f&&null==C.ngModule){const at=(y?b:this.parentInjector).get(Fo,null);at&&(f=at)}In(C.componentType??{});const ie=C.create(b,h,null,f);return this.insertImpl(ie.hostView,v,false),ie}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,c){const h=o._lView;if(function Wc(i){return xn(i[$n])}(h)){const C=this.indexOf(o);if(-1!==C)this.detach(C);else{const b=h[$n],A=new At(b,b[Qr],b[$n]);A.detach(A.indexOf(o))}}const y=this._adjustIndex(a),v=this._lContainer;return t0(v,h,y,!c),o.attachToViewContainerRef(),Dy(ct(v),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Cb(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Zp(this._lContainer,a);c&&(Ha(ct(this._lContainer),a),Vy(c[Xe],c))}detach(o){const a=this._adjustIndex(o,-1),c=Zp(this._lContainer,a);return c&&null!=Ha(ct(this._lContainer),a)?new Rh(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function Cb(i){return i[8]}function ct(i){return i[8]||(i[8]=[])}function _e(i,o){let a;const c=o[i.index];return xn(c)?a=c:(a=fC(c,o,null,i),o[i.index]=a,mg(o,a)),ei(a,o,i,c),new At(a,i,o)}let ei=function s0(i,o,a,c){if(i[et])return;let h;h=8&a.type?zn(c):function je(i,o){const a=i[kt],c=a.createComment(""),h=Ai(o,i);return nc(a,Wp(a,h),c,function e1(i,o){return i.nextSibling(o)}(a,h),!1),c}(o,a),i[et]=h};class o0{constructor(o){this.queryList=o,this.matches=null}clone(){return new o0(this.queryList)}setDirty(){this.queryList.setDirty()}}class a0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new a0(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==fm(o,a).matches&&this.queries[a].setDirty()}}class Ib{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class lm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(o,h);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new lm(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class u0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new u0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(o,a,E2(a,f)),this.matchTNodeWithReadOption(o,a,Mo(a,o,f,!1,!1))}else c===pf?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Mo(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Ah||h===Ji||h===pf&&4&a.type)this.addMatch(a.index,-2);else{const f=Mo(a,o,h,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function E2(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function bb(i,o,a,c){return-1===a?function JS(i,o){return 11&i.type?Ml(i,o):4&i.type?um(i,o):null}(o,i):-2===a?function tn(i,o,a){return a===Ah?Ml(o,i):a===pf?um(o,i):a===Ji?_e(o,i):void 0}(i,o,c):sa(i,i[Xe],a,o)}function wc(i,o,a,c){const h=o[yi].queries[c];if(null===h.matches){const f=i.data,y=a.matches,v=[];for(let C=0;C<y.length;C+=2){const b=y[C];v.push(b<0?null:bb(o,f[b],y[C+1],a.metadata.read))}h.matches=v}return h.matches}function dm(i,o,a,c){const h=i.queries.getByIndex(a),f=h.matches;if(null!==f){const y=wc(i,o,h,a);for(let v=0;v<f.length;v+=2){const C=f[v];if(C>0)c.push(y[v/2]);else{const b=f[v+1],A=o[-C];for(let L=Bt;L<A.length;L++){const W=A[L];W[Li]===W[$n]&&dm(W[Xe],W,b,c)}if(null!==A[Ft]){const L=A[Ft];for(let W=0;W<L.length;W++){const ie=L[W];dm(ie[Xe],ie,b,c)}}}}}return c}function mr(i){const o=Ue(),a=Sn(),c=Ey();Tp(c+1);const h=fm(a,c);if(i.dirty&&function $d(i){return 4==(4&i[zt])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const f=h.crossesNgTemplate?dm(a,o,c,[]):wc(a,o,h,c);i.reset(f,V1),i.notifyOnChanges()}return!0}return!1}function Xl(i,o,a,c){const h=Sn();if(h.firstCreatePass){const f=oi();(function ut(i,o,a){null===i.queries&&(i.queries=new lm),i.queries.track(new u0(o,a))})(h,new Ib(o,a,c),f.index),function hm(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function Mr(i,o,a){const c=new pu(4==(4&a));(function lA(i,o,a,c){const h=pC(o);h.push(a),i.firstCreatePass&&gC(i).push(c,h.length-1)})(i,o,c,c.destroy),null===o[yi]&&(o[yi]=new a0),o[yi].queries.push(new o0(c))}(h,Ue(),a)}function Rn(){return function XS(i,o){return i[yi].queries[o].queryList}(Ue(),Ey())}function fm(i,o){return i.queries.getByIndex(o)}function mu(i,o){return um(i,o)}function mf(i){return!!ii(i)}const m0=new Wn("Application Initializer");let _u=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=st(m0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const h of this.appInits){const f=h();if(sv(f))a.push(f);else if(KC(f)){const y=new Promise((v,C)=>{f.subscribe({complete:v,error:C})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),es=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const mm=new Wn("LocaleId",{providedIn:"root",factory:()=>st(mm,wt.Optional|wt.SkipSelf)||function Lb(){return typeof $localize<"u"&&$localize.locale||$o}()}),fi=new Wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Ho=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new se.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class ym{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let _m=(()=>{class i{compileModuleSync(a){return new qv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=pa(ii(a).declarations).reduce((y,v)=>{const C=In(v);return C&&y.push(new ac(C)),y},[]);return new ym(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const w0=new Wn(""),E0=new Wn("");let Dn,rd=(()=>{class i{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Dn||(function qb(i){Dn=i}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}static#e=this.\u0275fac=function(c){return new(c||i)(Qe(vi),Qe(zb),Qe(E0))};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac})}return i})(),zb=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Dn?.findTestabilityInTree(this,a,c)??null}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),Pn=null;const Ac=new Wn("AllowMultipleToken"),bf=new Wn("PlatformDestroyListeners"),Df=new Wn("appBootstrapListener");class Yb{constructor(o,a){this.name=o,this.token=a}}function Jb(i,o,a=[]){const c=`Platform: ${o}`,h=new Wn(c);return(f=[])=>{let y=I0();if(!y||y.injector.get(Ac,!1)){const v=[...a,...f,{provide:h,useValue:!0}];i?i(v):function wM(i){if(Pn&&!Pn.get(Ac,!1))throw new ee(400,!1);(function C0(){!function lp(i){cy=i}(()=>{throw new ee(600,!1)})})(),Pn=i;const o=i.get(Em);(function Qb(i){i.get(TE,null)?.forEach(a=>a())})(i)}(function eD(i=[],o){return ao.create({name:o,providers:[{provide:fe,useValue:"platform"},{provide:bf,useValue:new Set([()=>Pn=null])},...i]})}(v,c))}return function Xb(i){const o=I0();if(!o)throw new ee(401,!1);return o}()}}function I0(){return Pn?.get(Em)??null}let Em=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function Tf(i="zone.js",o){return"noop"===i?new hg:"zone.js"===i?new vi(o):i}(c?.ngZone,function Cu(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return h.run(()=>{const f=function ab(i,o,a){return new Xg(i,o,a)}(a.moduleType,this.injector,function xf(i){return[{provide:vi,useFactory:i},{provide:Cl,multi:!0,useFactory:()=>{const o=st(tD,{optional:!0});return()=>o.initialize()}},{provide:b0,useFactory:id},{provide:jE,useFactory:$E}]}(()=>h)),y=f.injector.get(Ka,null);return h.runOutsideAngular(()=>{const v=h.onError.subscribe({next:C=>{y.handleError(C)}});f.onDestroy(()=>{Mf(this._modules,f),v.unsubscribe()})}),function Af(i,o,a){try{const c=a();return sv(c)?c.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(y,h,()=>{const v=f.injector.get(_u);return v.runInitializers(),v.donePromise.then(()=>(function fc(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(LI=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(mm,$o)||$o),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const h=Sf({},c);return function Zb(i,o,a){const c=new qv(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(a){const c=a.injector.get(Sc);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new ee(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(bf,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||i)(Qe(ao))};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function Sf(i,o){return Array.isArray(o)?o.reduce(Sf,i):{...i,...o}}let Sc=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=st(b0),this.zoneIsStable=st(jE),this.componentTypes=[],this.components=[],this.isStable=st(Ho).hasPendingTasks.pipe((0,Oe.w)(a=>a?(0,ve.of)(!1):this.zoneIsStable),(0,he.x)(),(0,Ee.B)()),this._injector=st(Fo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const h=a instanceof xE;if(!this._injector.get(_u).done)throw!h&&yo(a),new ee(405,!1);let y;y=h?a:this._injector.get(Th).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const v=function Kb(i){return i.isBoundToModule}(y)?void 0:this._injector.get(du),b=y.create(ao.NULL,[],c||y.selector,v),A=b.location.nativeElement,L=b.injector.get(w0,null);return L?.registerApplication(A),b.onDestroy(()=>{this.detachView(b.hostView),Mf(this.components,b),L?.unregisterApplication(A)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Mf(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Df,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Mf(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ee(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Mf(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}const b0=new Wn("",{providedIn:"root",factory:()=>st(Ka).handleError.bind(void 0)});function id(){const i=st(vi),o=st(Ka);return a=>i.runOutsideAngular(()=>o.handleError(a))}let tD=(()=>{class i{constructor(){this.zone=st(vi),this.applicationRef=st(Sc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Mc(){return!1}let iD=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=A0}return i})();function A0(i){return function Of(i,o,a){if(Ki(i)&&!a){const c=Vi(i.index,o);return new Rh(c,c)}return 47&i.type?new Rh(o[Dr],o):null}(oi(),Ue(),16==(16&i))}class oD{constructor(){}supports(o){return Eg(o)}create(o){return new aD(o)}}const AM=(i,o)=>o;class aD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||AM}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<Du(c,h,f)?a:c,v=Du(y,h,f),C=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{f||(f=[]);const b=v-h,A=C-h;if(b!=A){for(let W=0;W<b;W++){const ie=W<f.length?f[W]:f[W]=0,Re=ie+W;A<=Re&&Re<b&&(f[W]=ie+1)}f[y.previousIndex]=A-b}}v!==C&&o(y,v,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Eg(o))throw new ee(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)f=o[v],y=this._trackByFn(v,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,v)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,v),c=!0),a=a._next}else h=0,function NC(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,v=>{y=this._trackByFn(h,v),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,v,y,h)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,y,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,h)):o=this._addAfter(new ad(a,c),f,h),o}_verifyReinsertion(o,a,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new P0),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new P0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ad{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xc{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class P0{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new xc,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Du(i,o,a){const c=i.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class N0{constructor(){}supports(o){return o instanceof Map||V_(o)}create(){return new ud}}class ud{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||V_(o)))throw new ee(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const c=new uD(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class uD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function R0(){return new Oc([new oD])}let Oc=(()=>{class i{static#e=this.\u0275prov=yt({token:i,providedIn:"root",factory:R0});constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||R0()),deps:[[i,new rt,new me]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new ee(901,!1)}}return i})();function cD(){return new cr([new N0])}let cr=(()=>{class i{static#e=this.\u0275prov=yt({token:i,providedIn:"root",factory:cD});constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||cD()),deps:[[i,new rt,new me]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new ee(901,!1)}}return i})();const Ff=Jb(null,"core",[]);let MM=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(c){return new(c||i)(Qe(Sc))};static#t=this.\u0275mod=Qo({type:i});static#n=this.\u0275inj=Gn({})}return i})();function Vf(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function UM(i){const o=In(i);if(!o)return null;const a=new ac(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3399:(_t,De,M)=>{M.d(De,{Z:()=>Ye});var d=M(9058),V=M(4537),N=M(7592),Y=M(7879);class se{constructor(Ze,Se){this._delegate=Ze,this.firebase=Se,(0,N._addComponent)(Ze,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Ze,Se=N._DEFAULT_ENTRY_NAME){var ft;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(Ze);return!pt.isInitialized()&&"EXPLICIT"===(null===(ft=pt.getComponent())||void 0===ft?void 0:ft.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:Se})}_removeServiceInstance(Ze,Se=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(Se)}_addComponent(Ze){(0,N._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,N._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function he(){const ke=function Oe(ke){const Ze={},Se={__esModule:!0,initializeApp:function ee(Be,k={}){const te=N.initializeApp(Be,k);if((0,d.r3)(Ze,te.name))return Ze[te.name];const be=new ke(te,Se);return Ze[te.name]=be,be},app:pt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function ue(Be){const k=Be.name,te=k.replace("-compat","");if(N._registerComponent(Be)&&"PUBLIC"===Be.type){const be=(it=pt())=>{if("function"!=typeof it[te])throw Ee.create("invalid-app-argument",{appName:k});return it[te]()};void 0!==Be.serviceProps&&(0,d.ZB)(be,Be.serviceProps),Se[te]=be,ke.prototype[te]=function(...it){return this._getService.bind(this,k).apply(this,Be.multipleInstances?it:[])}}return"PUBLIC"===Be.type?Se[te]:null},removeApp:function ft(Be){delete Ze[Be]},useAsService:function Me(Be,k){return"serverAuth"===k?null:k},modularAPIs:N}};function pt(Be){if(!(0,d.r3)(Ze,Be=Be||N._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:Be});return Ze[Be]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function Te(){return Object.keys(Ze).map(Be=>Ze[Be])}}),pt.App=ke,Se}(se);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function Ze(Se){(0,d.ZB)(ke,Se)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ke}(),q=new Y.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=U;!function Ie(ke){(0,N.registerVersion)("@firebase/app-compat","0.2.13",ke)}()},7592:(_t,De,M)=>{M.r(De),M.d(De,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>Gn,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>Ae,_addOrOverwriteComponent:()=>Ge,_apps:()=>ce,_clearComponents:()=>Dt,_components:()=>oe,_getProvider:()=>ze,_registerComponent:()=>tt,_removeServiceInstance:()=>Zt,deleteApp:()=>sr,getApp:()=>vn,getApps:()=>Nn,initializeApp:()=>Ln,onLog:()=>Tn,registerVersion:()=>Un,setLogLevel:()=>rr});var d=M(5861),V=M(4537),N=M(7879),Y=M(9058),se=M(1878);class ve{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(Ce=>{if(function Ee(ye){const Z=ye.getComponent();return"VERSION"===Z?.type}(Ce)){const He=Ce.getImmediate();return`${He.library}/${He.version}`}return null}).filter(Ce=>Ce).join(" ")}}const Oe="@firebase/app",U=new N.Yd("@firebase/app"),ae="[DEFAULT]",pe={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ce=new Map,oe=new Map;function Ae(ye,Z){try{ye.container.addComponent(Z)}catch(Ce){U.debug(`Component ${Z.name} failed to register with FirebaseApp ${ye.name}`,Ce)}}function Ge(ye,Z){ye.container.addOrOverwriteComponent(Z)}function tt(ye){const Z=ye.name;if(oe.has(Z))return U.debug(`There were multiple attempts to register component ${Z}.`),!1;oe.set(Z,ye);for(const Ce of ce.values())Ae(Ce,ye);return!0}function ze(ye,Z){const Ce=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return Ce&&Ce.triggerHeartbeat(),ye.container.getProvider(Z)}function Zt(ye,Z,Ce=ae){ze(ye,Z).clearInstance(Ce)}function Dt(){oe.clear()}const yt=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hn{constructor(Z,Ce,He){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},Ce),this._name=Ce.name,this._automaticDataCollectionEnabled=Ce.automaticDataCollectionEnabled,this._container=He,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw yt.create("app-deleted",{appName:this._name})}}const Gn="9.23.0";function Ln(ye,Z={}){let Ce=ye;"object"!=typeof Z&&(Z={name:Z});const He=Object.assign({name:ae,automaticDataCollectionEnabled:!1},Z),lt=He.name;if("string"!=typeof lt||!lt)throw yt.create("bad-app-name",{appName:String(lt)});if(Ce||(Ce=(0,Y.aH)()),!Ce)throw yt.create("no-options");const Et=ce.get(lt);if(Et){if((0,Y.vZ)(Ce,Et.options)&&(0,Y.vZ)(He,Et.config))return Et;throw yt.create("duplicate-app",{appName:lt})}const yn=new V.H0(lt);for(const G of oe.values())yn.addComponent(G);const z=new hn(Ce,He,yn);return ce.set(lt,z),z}function vn(ye=ae){const Z=ce.get(ye);if(!Z&&ye===ae&&(0,Y.aH)())return Ln();if(!Z)throw yt.create("no-app",{appName:ye});return Z}function Nn(){return Array.from(ce.values())}function sr(ye){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(ye){const Z=ye.name;ce.has(Z)&&(ce.delete(Z),yield Promise.all(ye.container.getProviders().map(Ce=>Ce.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function Un(ye,Z,Ce){var He;let lt=null!==(He=pe[ye])&&void 0!==He?He:ye;Ce&&(lt+=`-${Ce}`);const Et=lt.match(/\s|\//),yn=Z.match(/\s|\//);if(Et||yn){const z=[`Unable to register library "${lt}" with version "${Z}":`];return Et&&z.push(`library name "${lt}" contains illegal characters (whitespace or "/")`),Et&&yn&&z.push("and"),yn&&z.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void U.warn(z.join(" "))}tt(new V.wA(`${lt}-version`,()=>({library:lt,version:Z}),"VERSION"))}function Tn(ye,Z){if(null!==ye&&"function"!=typeof ye)throw yt.create("invalid-log-argument");(0,N.Am)(ye,Z)}function rr(ye){(0,N.Ub)(ye)}const Zr="firebase-heartbeat-database",wt=1,It="firebase-heartbeat-store";let Nt=null;function Rt(){return Nt||(Nt=(0,se.X3)(Zr,wt,{upgrade:(ye,Z)=>{0===Z&&ye.createObjectStore(It)}}).catch(ye=>{throw yt.create("idb-open",{originalErrorMessage:ye.message})})),Nt}function fn(){return(fn=(0,d.Z)(function*(ye){try{return yield(yield Rt()).transaction(It).objectStore(It).get(Nr(ye))}catch(Z){if(Z instanceof Y.ZR)U.warn(Z.message);else{const Ce=yt.create("idb-get",{originalErrorMessage:Z?.message});U.warn(Ce.message)}}})).apply(this,arguments)}function Wt(ye,Z){return pn.apply(this,arguments)}function pn(){return(pn=(0,d.Z)(function*(ye,Z){try{const He=(yield Rt()).transaction(It,"readwrite");yield He.objectStore(It).put(Z,Nr(ye)),yield He.done}catch(Ce){if(Ce instanceof Y.ZR)U.warn(Ce.message);else{const He=yt.create("idb-set",{originalErrorMessage:Ce?.message});U.warn(He.message)}}})).apply(this,arguments)}function Nr(ye){return`${ye.name}!${ye.options.appId}`}class Xt{constructor(Z){this.container=Z,this._heartbeatsCache=null;const Ce=this.container.getProvider("app").getImmediate();this._storage=new or(Ce),this._heartbeatsCachePromise=this._storage.read().then(He=>(this._heartbeatsCache=He,He))}triggerHeartbeat(){var Z=this;return(0,d.Z)(function*(){const He=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),lt=cn();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==lt&&!Z._heartbeatsCache.heartbeats.some(Et=>Et.date===lt))return Z._heartbeatsCache.heartbeats.push({date:lt,agent:He}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(Et=>{const yn=new Date(Et.date).valueOf();return Date.now()-yn<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,d.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const Ce=cn(),{heartbeatsToSend:He,unsentEntries:lt}=function Ir(ye,Z=1024){const Ce=[];let He=ye.slice();for(const lt of ye){const Et=Ce.find(yn=>yn.agent===lt.agent);if(Et){if(Et.dates.push(lt.date),lr(Ce)>Z){Et.dates.pop();break}}else if(Ce.push({agent:lt.agent,dates:[lt.date]}),lr(Ce)>Z){Ce.pop();break}He=He.slice(1)}return{heartbeatsToSend:Ce,unsentEntries:He}}(Z._heartbeatsCache.heartbeats),Et=(0,Y.L)(JSON.stringify({version:2,heartbeats:He}));return Z._heartbeatsCache.lastSentHeartbeatDate=Ce,lt.length>0?(Z._heartbeatsCache.heartbeats=lt,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),Et})()}}function cn(){return(new Date).toISOString().substring(0,10)}class or{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,d.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function _r(ye){return fn.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var Ce=this;return(0,d.Z)(function*(){var He;if(yield Ce._canUseIndexedDBPromise){const Et=yield Ce.read();return Wt(Ce.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Et.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var Ce=this;return(0,d.Z)(function*(){var He;if(yield Ce._canUseIndexedDBPromise){const Et=yield Ce.read();return Wt(Ce.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Et.lastSentHeartbeatDate,heartbeats:[...Et.heartbeats,...Z.heartbeats]})}})()}}function lr(ye){return(0,Y.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function jn(ye){tt(new V.wA("platform-logger",Z=>new ve(Z),"PRIVATE")),tt(new V.wA("heartbeat",Z=>new Xt(Z),"PRIVATE")),Un(Oe,"0.9.13",ye),Un(Oe,"0.9.13","esm2017"),Un("fire-js","")}("")},4097:(_t,De,M)=>{M.d(De,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=M(7592);(0,d.registerVersion)("firebase","9.23.0","app")},120:(_t,De,M)=>{M.d(De,{Z:()=>d.Z});var d=M(3399);d.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(_t,De,M)=>{M.r(De);var d=M(5861),V=M(3399),N=M(6710),Y=M(9058),Ee=(M(7592),M(7879),M(4537));function Oe(){return window}function q(){return q=(0,d.Z)(function*(P,R,x){var X;const{BuildInfo:Ne}=Oe();(0,N.as)(R.sessionId,"AuthEvent did not contain a session ID");const Qe=yield function Se(P){return ft.apply(this,arguments)}(R.sessionId),xt={};return(0,N.at)()?xt.ibi=Ne.packageName:(0,N.au)()?xt.apn=Ne.packageName:(0,N.av)(P,"operation-not-supported-in-this-environment"),Ne.displayName&&(xt.appDisplayName=Ne.displayName),xt.sessionId=Qe,(0,N.aw)(P,x,R.type,void 0,null!==(X=R.eventId)&&void 0!==X?X:void 0,xt)}),q.apply(this,arguments)}function Ve(){return(Ve=(0,d.Z)(function*(P){const{BuildInfo:R}=Oe(),x={};(0,N.at)()?x.iosBundleId=R.packageName:(0,N.au)()?x.androidPackageName=R.packageName:(0,N.av)(P,"operation-not-supported-in-this-environment"),yield(0,N.ax)(P,x)})).apply(this,arguments)}function ke(){return(ke=(0,d.Z)(function*(P,R,x){const{cordova:X}=Oe();let Ne=()=>{};try{yield new Promise((Qe,xt)=>{let st=null;function _n(){var Kt;Qe();const vr=null===(Kt=X.plugins.browsertab)||void 0===Kt?void 0:Kt.close;"function"==typeof vr&&vr(),"function"==typeof x?.close&&x.close()}function Ut(){st||(st=window.setTimeout(()=>{xt((0,N.az)(P,"redirect-cancelled-by-user"))},2e3))}function wn(){"visible"===document?.visibilityState&&Ut()}R.addPassiveListener(_n),document.addEventListener("resume",Ut,!1),(0,N.au)()&&document.addEventListener("visibilitychange",wn,!1),Ne=()=>{R.removePassiveListener(_n),document.removeEventListener("resume",Ut,!1),document.removeEventListener("visibilitychange",wn,!1),st&&window.clearTimeout(st)}})}finally{Ne()}})).apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(P){const R=function pt(P){if((0,N.as)(/[0-9a-zA-Z]+/.test(P),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(P);const R=new ArrayBuffer(P.length),x=new Uint8Array(R);for(let X=0;X<P.length;X++)x[X]=P.charCodeAt(X);return x}(P),x=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(x)).map(Ne=>Ne.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Te extends N.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(R)),super.onEvent(R)}initialized(){var R=this;return(0,d.Z)(function*(){yield R.initPromise})()}}function Be(P){return k.apply(this,arguments)}function k(){return(k=(0,d.Z)(function*(P){const R=yield it()._get(Lt(P));return R&&(yield it()._remove(Lt(P))),R})).apply(this,arguments)}function be(){const P=[];for(let x=0;x<20;x++){const X=Math.floor(62*Math.random());P.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(X))}return P.join("")}function it(){return(0,N.aC)(N.b)}function Lt(P){return(0,N.aD)("authEvent",P.config.apiKey,P.name)}function dn(P){if(!P?.includes("?"))return{};const[R,...x]=P.split("?");return(0,Y.zd)(x.join("?"))}const ae=class qn{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize(R){var x=this;return(0,d.Z)(function*(){const X=R._key();let Ne=x.eventManagers.get(X);return Ne||(Ne=new Te(R),x.eventManagers.set(X,Ne),x.attachCallbackListeners(R,Ne)),Ne})()}_openPopup(R){(0,N.av)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,x,X,Ne){var Qe=this;return(0,d.Z)(function*(){!function Ze(P){var R,x,X,Ne,Qe,xt,st,_n,Ut,wn;const Kt=Oe();(0,N.aA)("function"==typeof(null===(R=Kt?.universalLinks)||void 0===R?void 0:R.subscribe),P,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aA)(typeof(null===(x=Kt?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aA)("function"==typeof(null===(Qe=null===(Ne=null===(X=Kt?.cordova)||void 0===X?void 0:X.plugins)||void 0===Ne?void 0:Ne.browsertab)||void 0===Qe?void 0:Qe.openUrl),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(_n=null===(st=null===(xt=Kt?.cordova)||void 0===xt?void 0:xt.plugins)||void 0===st?void 0:st.browsertab)||void 0===_n?void 0:_n.isAvailable),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(wn=null===(Ut=Kt?.cordova)||void 0===Ut?void 0:Ut.InAppBrowser)||void 0===wn?void 0:wn.open),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const xt=yield Qe._initialize(R);yield xt.initialized(),xt.resetRedirect(),(0,N.aG)(),yield Qe._originValidation(R);const st=function ue(P,R,x=null){return{type:R,eventId:x,urlResponse:null,sessionId:be(),postBody:null,tenantId:P.tenantId,error:(0,N.az)(P,"no-auth-event")}}(R,X,Ne);yield function Me(P,R){return it()._set(Lt(P),R)}(R,st);const _n=yield function U(P,R,x){return q.apply(this,arguments)}(R,st,x),Ut=yield function Ie(P){const{cordova:R}=Oe();return new Promise(x=>{R.plugins.browsertab.isAvailable(X=>{let Ne=null;X?R.plugins.browsertab.openUrl(P):Ne=R.InAppBrowser.open(P,(0,N.ay)()?"_blank":"_system","location=yes"),x(Ne)})})}(_n);return function Ye(P,R,x){return ke.apply(this,arguments)}(R,xt,Ut)})()}_isIframeWebStorageSupported(R,x){throw new Error("Method not implemented.")}_originValidation(R){const x=R._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function ne(P){return Ve.apply(this,arguments)}(R)),this.originValidationPromises[x]}attachCallbackListeners(R,x){const{universalLinks:X,handleOpenURL:Ne,BuildInfo:Qe}=Oe(),xt=setTimeout((0,d.Z)(function*(){yield Be(R),x.onEvent(pe())}),500),st=function(){var wn=(0,d.Z)(function*(Kt){clearTimeout(xt);const vr=yield Be(R);let K=null;vr&&Kt?.url&&(K=function te(P,R){var x,X;const Ne=function Ht(P){const R=dn(P),x=R.link?decodeURIComponent(R.link):void 0,X=dn(x).link,Ne=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return dn(Ne).link||Ne||X||x||P}(R);if(Ne.includes("/__/auth/callback")){const Qe=dn(Ne),xt=Qe.firebaseError?function $t(P){try{return JSON.parse(P)}catch{return null}}(decodeURIComponent(Qe.firebaseError)):null,st=null===(X=null===(x=xt?.code)||void 0===x?void 0:x.split("auth/"))||void 0===X?void 0:X[1],_n=st?(0,N.az)(st):null;return _n?{type:P.type,eventId:P.eventId,tenantId:P.tenantId,error:_n,urlResponse:null,sessionId:null,postBody:null}:{type:P.type,eventId:P.eventId,tenantId:P.tenantId,sessionId:P.sessionId,urlResponse:Ne,postBody:null}}return null}(vr,Kt.url)),x.onEvent(K||pe())});return function(vr){return wn.apply(this,arguments)}}();typeof X<"u"&&"function"==typeof X.subscribe&&X.subscribe(null,st);const _n=Ne,Ut=`${Qe.packageName.toLowerCase()}://`;Oe().handleOpenURL=function(){var wn=(0,d.Z)(function*(Kt){if(Kt.toLowerCase().startsWith(Ut)&&st({url:Kt}),"function"==typeof _n)try{_n(Kt)}catch(vr){console.error(vr)}});return function(Kt){return wn.apply(this,arguments)}}()}};function pe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.az)("no-auth-event")}}function tt(){var P;return(null===(P=self?.location)||void 0===P?void 0:P.protocol)||null}function Zt(P=(0,Y.z$)()){return!("file:"!==tt()&&"ionic:"!==tt()&&"capacitor:"!==tt()||!P.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gn(){try{const P=self.localStorage,R=N.aL();if(P)return P.setItem(R,"1"),P.removeItem(R),!function hn(P=(0,Y.z$)()){return function nn(){return(0,Y.w1)()&&11===document?.documentMode}()||function yt(P=(0,Y.z$)()){return/Edge\/\d+/.test(P)}(P)}()||(0,Y.hl)()}catch{return Ln()&&(0,Y.hl)()}return!1}function Ln(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vn(){return(function ze(){return"http:"===tt()||"https:"===tt()}()||(0,Y.ru)()||Zt())&&!function Dt(){return(0,Y.b$)()||(0,Y.UG)()}()&&Gn()&&!Ln()}function Nn(){return Zt()&&typeof document<"u"}function Yn(){return(Yn=(0,d.Z)(function*(){return!!Nn()&&new Promise(P=>{const R=setTimeout(()=>{P(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),P(!0)})})})).apply(this,arguments)}const Tn={LOCAL:"local",NONE:"none",SESSION:"session"},rr=N.aA,Zr="persistence";function It(P){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(P){yield P._initializationPromise;const R=_r(),x=N.aD(Zr,P.config.apiKey,P.name);R&&R.setItem(x,P._getPersistence())})).apply(this,arguments)}function _r(){var P;try{return(null===(P=function Un(){return typeof window<"u"?window:null}())||void 0===P?void 0:P.sessionStorage)||null}catch{return null}}const fn=N.aA;class Wt{constructor(){this.browserResolver=N.aC(N.k),this.cordovaResolver=N.aC(ae),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize(R){var x=this;return(0,d.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,x,X,Ne){var Qe=this;return(0,d.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openPopup(R,x,X,Ne)})()}_openRedirect(R,x,X,Ne){var Qe=this;return(0,d.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openRedirect(R,x,X,Ne)})()}_isIframeWebStorageSupported(R,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,x)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return Nn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,d.Z)(function*(){if(R.underlyingResolver)return;const x=yield function sr(){return Yn.apply(this,arguments)}();R.underlyingResolver=x?R.cordovaResolver:R.browserResolver})()}}function pn(P){return P.unwrap()}function rn(P){return Xt(P)}function Xt(P){const{_tokenResponse:R}=P instanceof Y.ZR?P.customData:P;if(!R)return null;if(!(P instanceof Y.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return N.P.credentialFromResult(P);const x=R.providerId;if(!x||x===N.p.PASSWORD)return null;let X;switch(x){case N.p.GOOGLE:X=N.V;break;case N.p.FACEBOOK:X=N.U;break;case N.p.GITHUB:X=N.W;break;case N.p.TWITTER:X=N.Z;break;default:const{oauthIdToken:Ne,oauthAccessToken:Qe,oauthTokenSecret:xt,pendingToken:st,nonce:_n}=R;return Qe||xt||Ne||st?st?x.startsWith("saml.")?N.aO._create(x,st):N.L._fromParams({providerId:x,signInMethod:x,pendingToken:st,idToken:Ne,accessToken:Qe}):new N.X(x).credential({idToken:Ne,accessToken:Qe,rawNonce:_n}):null}return P instanceof Y.ZR?X.credentialFromError(P):X.credentialFromResult(P)}function cn(P,R){return R.catch(x=>{throw x instanceof Y.ZR&&function gi(P,R){var x;const X=null===(x=R.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===R?.code)R.resolver=new lr(P,N.aq(P,R));else if(X){const Ne=Xt(R),Qe=R;Ne&&(Qe.credential=Ne,Qe.tenantId=X.tenantId||void 0,Qe.email=X.email||void 0,Qe.phoneNumber=X.phoneNumber||void 0)}}(P,x),x}).then(x=>{const Ne=x.user;return{operationType:x.operationType,credential:rn(x),additionalUserInfo:N.ao(x),user:jn.getOrCreate(Ne)}})}function Ir(P,R){return or.apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(P,R){const x=yield R;return{verificationId:x.verificationId,confirm:X=>cn(P,x.confirm(X))}})).apply(this,arguments)}class lr{constructor(R,x){this.resolver=x,this.auth=function Nr(P){return P.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return cn(pn(this.auth),this.resolver.resolveSignIn(R))}}class jn{constructor(R){this._delegate=R,this.multiFactor=N.ar(R)}static getOrCreate(R){return jn.USER_MAP.has(R)||jn.USER_MAP.set(R,new jn(R)),jn.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var x=this;return(0,d.Z)(function*(){return cn(x.auth,N.a0(x._delegate,R))})()}linkWithPhoneNumber(R,x){var X=this;return(0,d.Z)(function*(){return Ir(X.auth,N.l(X._delegate,R,x))})()}linkWithPopup(R){var x=this;return(0,d.Z)(function*(){return cn(x.auth,N.d(x._delegate,R,Wt))})()}linkWithRedirect(R){var x=this;return(0,d.Z)(function*(){return yield It(N.aH(x.auth)),N.g(x._delegate,R,Wt)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var x=this;return(0,d.Z)(function*(){return cn(x.auth,N.a1(x._delegate,R))})()}reauthenticateWithPhoneNumber(R,x){return Ir(this.auth,N.r(this._delegate,R,x))}reauthenticateWithPopup(R){return cn(this.auth,N.e(this._delegate,R,Wt))}reauthenticateWithRedirect(R){var x=this;return(0,d.Z)(function*(){return yield It(N.aH(x.auth)),N.h(x._delegate,R,Wt)})()}sendEmailVerification(R){return N.ae(this._delegate,R)}unlink(R){var x=this;return(0,d.Z)(function*(){return yield N.an(x._delegate,R),x})()}updateEmail(R){return N.aj(this._delegate,R)}updatePassword(R){return N.ak(this._delegate,R)}updatePhoneNumber(R){return N.u(this._delegate,R)}updateProfile(R){return N.ai(this._delegate,R)}verifyBeforeUpdateEmail(R,x){return N.af(this._delegate,R,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jn.USER_MAP=new WeakMap;const ye=N.aA;let Z=(()=>{class P{constructor(x,X){if(this.app=x,X.isInitialized())return this._delegate=X.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ne}=x.options;ye(Ne,"invalid-api-key",{appName:x.name}),ye(Ne,"invalid-api-key",{appName:x.name});const Qe=typeof window<"u"?Wt:void 0;this._delegate=X.initialize({options:{persistence:He(Ne,x.name),popupRedirectResolver:Qe}}),this._delegate._updateErrorMap(N.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,X){N.I(this._delegate,x,X)}applyActionCode(x){return N.a5(this._delegate,x)}checkActionCode(x){return N.a6(this._delegate,x)}confirmPasswordReset(x,X){return N.a4(this._delegate,x,X)}createUserWithEmailAndPassword(x,X){var Ne=this;return(0,d.Z)(function*(){return cn(Ne._delegate,N.a8(Ne._delegate,x,X))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return N.ad(this._delegate,x)}isSignInWithEmailLink(x){return N.ab(this._delegate,x)}getRedirectResult(){var x=this;return(0,d.Z)(function*(){ye(vn(),x._delegate,"operation-not-supported-in-this-environment");const X=yield N.j(x._delegate,Wt);return X?cn(x._delegate,Promise.resolve(X)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function ce(P,R){(0,N.aH)(P)._logFramework(R)}(this._delegate,x)}onAuthStateChanged(x,X,Ne){const{next:Qe,error:xt,complete:st}=Ce(x,X,Ne);return this._delegate.onAuthStateChanged(Qe,xt,st)}onIdTokenChanged(x,X,Ne){const{next:Qe,error:xt,complete:st}=Ce(x,X,Ne);return this._delegate.onIdTokenChanged(Qe,xt,st)}sendSignInLinkToEmail(x,X){return N.aa(this._delegate,x,X)}sendPasswordResetEmail(x,X){return N.a3(this._delegate,x,X||void 0)}setPersistence(x){var X=this;return(0,d.Z)(function*(){let Ne;switch(function wt(P,R){rr(Object.values(Tn).includes(R),P,"invalid-persistence-type"),(0,Y.b$)()?rr(R!==Tn.SESSION,P,"unsupported-persistence-type"):(0,Y.UG)()?rr(R===Tn.NONE,P,"unsupported-persistence-type"):Ln()?rr(R===Tn.NONE||R===Tn.LOCAL&&(0,Y.hl)(),P,"unsupported-persistence-type"):rr(R===Tn.NONE||Gn(),P,"unsupported-persistence-type")}(X._delegate,x),x){case Tn.SESSION:Ne=N.a;break;case Tn.LOCAL:Ne=(yield N.aC(N.i)._isAvailable())?N.i:N.b;break;case Tn.NONE:Ne=N.N;break;default:return N.av("argument-error",{appName:X._delegate.name})}return X._delegate.setPersistence(Ne)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return cn(this._delegate,N._(this._delegate))}signInWithCredential(x){return cn(this._delegate,N.$(this._delegate,x))}signInWithCustomToken(x){return cn(this._delegate,N.a2(this._delegate,x))}signInWithEmailAndPassword(x,X){return cn(this._delegate,N.a9(this._delegate,x,X))}signInWithEmailLink(x,X){return cn(this._delegate,N.ac(this._delegate,x,X))}signInWithPhoneNumber(x,X){return Ir(this._delegate,N.s(this._delegate,x,X))}signInWithPopup(x){var X=this;return(0,d.Z)(function*(){return ye(vn(),X._delegate,"operation-not-supported-in-this-environment"),cn(X._delegate,N.c(X._delegate,x,Wt))})()}signInWithRedirect(x){var X=this;return(0,d.Z)(function*(){return ye(vn(),X._delegate,"operation-not-supported-in-this-environment"),yield It(X._delegate),N.f(X._delegate,x,Wt)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return N.a7(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return P.Persistence=Tn,P})();function Ce(P,R,x){let X=P;"function"!=typeof P&&({next:X,error:R,complete:x}=P);const Ne=X;return{next:xt=>Ne(xt&&jn.getOrCreate(xt)),error:R,complete:x}}function He(P,R){const x=function Rt(P,R){const x=_r();if(!x)return[];const X=N.aD(Zr,P,R);switch(x.getItem(X)){case Tn.NONE:return[N.N];case Tn.LOCAL:return[N.i,N.a];case Tn.SESSION:return[N.a];default:return[]}}(P,R);if(typeof self<"u"&&!x.includes(N.i)&&x.push(N.i),typeof window<"u")for(const X of[N.b,N.a])x.includes(X)||x.push(X);return x.includes(N.N)||x.push(N.N),x}class lt{constructor(){this.providerId="phone",this._delegate=new N.P(pn(V.Z.auth()))}static credential(R,x){return N.P.credential(R,x)}verifyPhoneNumber(R,x){return this._delegate.verifyPhoneNumber(R,x)}unwrap(){return this._delegate}}lt.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,lt.PROVIDER_ID=N.P.PROVIDER_ID;const Et=N.aA;class yn{constructor(R,x,X=V.Z.app()){var Ne;Et(null===(Ne=X.options)||void 0===Ne?void 0:Ne.apiKey,"invalid-api-key",{appName:X.name}),this._delegate=new N.R(R,x,X.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function G(P){P.INTERNAL.registerComponent(new Ee.wA("auth-compat",R=>{const x=R.getProvider("app-compat").getImmediate(),X=R.getProvider("auth");return new Z(x,X)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.Q,FacebookAuthProvider:N.U,GithubAuthProvider:N.W,GoogleAuthProvider:N.V,OAuthProvider:N.X,SAMLAuthProvider:N.Y,PhoneAuthProvider:lt,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:yn,TwitterAuthProvider:N.Z,Auth:Z,AuthCredential:N.J,Error:Y.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),P.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},9519:(_t,De,M)=>{M.d(De,{Gb:()=>d.Gb});var d=M(2650)},4303:(_t,De,M)=>{M.r(De),M.d(De,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>Gn,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>Ae,_addOrOverwriteComponent:()=>Ge,_apps:()=>ce,_clearComponents:()=>Dt,_components:()=>oe,_getProvider:()=>ze,_registerComponent:()=>tt,_removeServiceInstance:()=>Zt,deleteApp:()=>sr,getApp:()=>vn,getApps:()=>Nn,initializeApp:()=>Ln,onLog:()=>Tn,registerVersion:()=>Un,setLogLevel:()=>rr});var d=M(5861),V=M(4537),N=M(7879),Y=M(9058),se=M(1878);class ve{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(Ce=>{if(function Ee(ye){const Z=ye.getComponent();return"VERSION"===Z?.type}(Ce)){const He=Ce.getImmediate();return`${He.library}/${He.version}`}return null}).filter(Ce=>Ce).join(" ")}}const Oe="@firebase/app",U=new N.Yd("@firebase/app"),ae="[DEFAULT]",pe={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ce=new Map,oe=new Map;function Ae(ye,Z){try{ye.container.addComponent(Z)}catch(Ce){U.debug(`Component ${Z.name} failed to register with FirebaseApp ${ye.name}`,Ce)}}function Ge(ye,Z){ye.container.addOrOverwriteComponent(Z)}function tt(ye){const Z=ye.name;if(oe.has(Z))return U.debug(`There were multiple attempts to register component ${Z}.`),!1;oe.set(Z,ye);for(const Ce of ce.values())Ae(Ce,ye);return!0}function ze(ye,Z){const Ce=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return Ce&&Ce.triggerHeartbeat(),ye.container.getProvider(Z)}function Zt(ye,Z,Ce=ae){ze(ye,Z).clearInstance(Ce)}function Dt(){oe.clear()}const yt=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hn{constructor(Z,Ce,He){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},Ce),this._name=Ce.name,this._automaticDataCollectionEnabled=Ce.automaticDataCollectionEnabled,this._container=He,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw yt.create("app-deleted",{appName:this._name})}}const Gn="10.4.0";function Ln(ye,Z={}){let Ce=ye;"object"!=typeof Z&&(Z={name:Z});const He=Object.assign({name:ae,automaticDataCollectionEnabled:!1},Z),lt=He.name;if("string"!=typeof lt||!lt)throw yt.create("bad-app-name",{appName:String(lt)});if(Ce||(Ce=(0,Y.aH)()),!Ce)throw yt.create("no-options");const Et=ce.get(lt);if(Et){if((0,Y.vZ)(Ce,Et.options)&&(0,Y.vZ)(He,Et.config))return Et;throw yt.create("duplicate-app",{appName:lt})}const yn=new V.H0(lt);for(const G of oe.values())yn.addComponent(G);const z=new hn(Ce,He,yn);return ce.set(lt,z),z}function vn(ye=ae){const Z=ce.get(ye);if(!Z&&ye===ae&&(0,Y.aH)())return Ln();if(!Z)throw yt.create("no-app",{appName:ye});return Z}function Nn(){return Array.from(ce.values())}function sr(ye){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(ye){const Z=ye.name;ce.has(Z)&&(ce.delete(Z),yield Promise.all(ye.container.getProviders().map(Ce=>Ce.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function Un(ye,Z,Ce){var He;let lt=null!==(He=pe[ye])&&void 0!==He?He:ye;Ce&&(lt+=`-${Ce}`);const Et=lt.match(/\s|\//),yn=Z.match(/\s|\//);if(Et||yn){const z=[`Unable to register library "${lt}" with version "${Z}":`];return Et&&z.push(`library name "${lt}" contains illegal characters (whitespace or "/")`),Et&&yn&&z.push("and"),yn&&z.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void U.warn(z.join(" "))}tt(new V.wA(`${lt}-version`,()=>({library:lt,version:Z}),"VERSION"))}function Tn(ye,Z){if(null!==ye&&"function"!=typeof ye)throw yt.create("invalid-log-argument");(0,N.Am)(ye,Z)}function rr(ye){(0,N.Ub)(ye)}const Zr="firebase-heartbeat-database",wt=1,It="firebase-heartbeat-store";let Nt=null;function Rt(){return Nt||(Nt=(0,se.X3)(Zr,wt,{upgrade:(ye,Z)=>{0===Z&&ye.createObjectStore(It)}}).catch(ye=>{throw yt.create("idb-open",{originalErrorMessage:ye.message})})),Nt}function fn(){return(fn=(0,d.Z)(function*(ye){try{return yield(yield Rt()).transaction(It).objectStore(It).get(Nr(ye))}catch(Z){if(Z instanceof Y.ZR)U.warn(Z.message);else{const Ce=yt.create("idb-get",{originalErrorMessage:Z?.message});U.warn(Ce.message)}}})).apply(this,arguments)}function Wt(ye,Z){return pn.apply(this,arguments)}function pn(){return(pn=(0,d.Z)(function*(ye,Z){try{const He=(yield Rt()).transaction(It,"readwrite");yield He.objectStore(It).put(Z,Nr(ye)),yield He.done}catch(Ce){if(Ce instanceof Y.ZR)U.warn(Ce.message);else{const He=yt.create("idb-set",{originalErrorMessage:Ce?.message});U.warn(He.message)}}})).apply(this,arguments)}function Nr(ye){return`${ye.name}!${ye.options.appId}`}class Xt{constructor(Z){this.container=Z,this._heartbeatsCache=null;const Ce=this.container.getProvider("app").getImmediate();this._storage=new or(Ce),this._heartbeatsCachePromise=this._storage.read().then(He=>(this._heartbeatsCache=He,He))}triggerHeartbeat(){var Z=this;return(0,d.Z)(function*(){const He=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),lt=cn();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==lt&&!Z._heartbeatsCache.heartbeats.some(Et=>Et.date===lt))return Z._heartbeatsCache.heartbeats.push({date:lt,agent:He}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(Et=>{const yn=new Date(Et.date).valueOf();return Date.now()-yn<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,d.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const Ce=cn(),{heartbeatsToSend:He,unsentEntries:lt}=function Ir(ye,Z=1024){const Ce=[];let He=ye.slice();for(const lt of ye){const Et=Ce.find(yn=>yn.agent===lt.agent);if(Et){if(Et.dates.push(lt.date),lr(Ce)>Z){Et.dates.pop();break}}else if(Ce.push({agent:lt.agent,dates:[lt.date]}),lr(Ce)>Z){Ce.pop();break}He=He.slice(1)}return{heartbeatsToSend:Ce,unsentEntries:He}}(Z._heartbeatsCache.heartbeats),Et=(0,Y.L)(JSON.stringify({version:2,heartbeats:He}));return Z._heartbeatsCache.lastSentHeartbeatDate=Ce,lt.length>0?(Z._heartbeatsCache.heartbeats=lt,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),Et})()}}function cn(){return(new Date).toISOString().substring(0,10)}class or{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,d.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function _r(ye){return fn.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var Ce=this;return(0,d.Z)(function*(){var He;if(yield Ce._canUseIndexedDBPromise){const Et=yield Ce.read();return Wt(Ce.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Et.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var Ce=this;return(0,d.Z)(function*(){var He;if(yield Ce._canUseIndexedDBPromise){const Et=yield Ce.read();return Wt(Ce.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Et.lastSentHeartbeatDate,heartbeats:[...Et.heartbeats,...Z.heartbeats]})}})()}}function lr(ye){return(0,Y.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function jn(ye){tt(new V.wA("platform-logger",Z=>new ve(Z),"PRIVATE")),tt(new V.wA("heartbeat",Z=>new Xt(Z),"PRIVATE")),Un(Oe,"0.9.19",ye),Un(Oe,"0.9.19","esm2017"),Un("fire-js","")}("")},4537:(_t,De,M)=>{M.d(De,{H0:()=>Oe,wA:()=>N});var d=M(5861),V=M(9058);class N{constructor(U,q,ne){this.name=U,this.instanceFactory=q,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const Y="[DEFAULT]";class se{constructor(U,q){this.name=U,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const q=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(q)){const ne=new V.BH;if(this.instancesDeferred.set(q,ne),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:q});Ve&&ne.resolve(Ve)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(U){var q;const ne=this.normalizeInstanceIdentifier(U?.identifier),Ve=null!==(q=U?.optional)&&void 0!==q&&q;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Ie){if(Ve)return null;throw Ie}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function Ee(he){return"EAGER"===he.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:Y})}catch{}for(const[q,ne]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(q);try{const Ie=this.getOrInitializeService({instanceIdentifier:Ve});ne.resolve(Ie)}catch{}}}}clearInstance(U=Y){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,d.Z)(function*(){const q=Array.from(U.instances.values());yield Promise.all([...q.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...q.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=Y){return this.instances.has(U)}getOptions(U=Y){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:q={}}=U,ne=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:ne,options:q});for(const[Ie,Ye]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Ie)&&Ye.resolve(Ve);return Ve}onInit(U,q){var ne;const Ve=this.normalizeInstanceIdentifier(q),Ie=null!==(ne=this.onInitCallbacks.get(Ve))&&void 0!==ne?ne:new Set;Ie.add(U),this.onInitCallbacks.set(Ve,Ie);const Ye=this.instances.get(Ve);return Ye&&U(Ye,Ve),()=>{Ie.delete(U)}}invokeOnInitCallbacks(U,q){const ne=this.onInitCallbacks.get(q);if(ne)for(const Ve of ne)try{Ve(U,q)}catch{}}getOrInitializeService({instanceIdentifier:U,options:q={}}){let ne=this.instances.get(U);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(he=U,he===Y?void 0:he),options:q}),this.instances.set(U,ne),this.instancesOptions.set(U,q),this.invokeOnInitCallbacks(ne,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,ne)}catch{}var he;return ne||null}normalizeInstanceIdentifier(U=Y){return this.component?this.component.multipleInstances?U:Y:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const q=this.getProvider(U.name);if(q.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);q.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const q=new se(U,this);return this.providers.set(U,q),q}getProviders(){return Array.from(this.providers.values())}}},2591:(_t,De,M)=>{var d=M(5861),V=M(4303),N=M(4537),Y=M(9058);const se=(H,re)=>re.some(xe=>H instanceof xe);let ve,Ee;const U=new WeakMap,q=new WeakMap,ne=new WeakMap,Ve=new WeakMap,Ie=new WeakMap;let Ze={get(H,re,xe){if(H instanceof IDBTransaction){if("done"===re)return q.get(H);if("objectStoreNames"===re)return H.objectStoreNames||ne.get(H);if("store"===re)return xe.objectStoreNames[1]?void 0:xe.objectStore(xe.objectStoreNames[0])}return ee(H[re])},set:(H,re,xe)=>(H[re]=xe,!0),has:(H,re)=>H instanceof IDBTransaction&&("done"===re||"store"===re)||re in H};function pt(H){return"function"==typeof H?function ft(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...re){return H.apply(Te(this),re),ee(U.get(this))}:function(...re){return ee(H.apply(Te(this),re))}:function(re,...xe){const gt=H.call(Te(this),re,...xe);return ne.set(gt,re.sort?re.sort():[re]),ee(gt)}}(H):(H instanceof IDBTransaction&&function ke(H){if(q.has(H))return;const re=new Promise((xe,gt)=>{const En=()=>{H.removeEventListener("complete",Cn),H.removeEventListener("error",en),H.removeEventListener("abort",en)},Cn=()=>{xe(),En()},en=()=>{gt(H.error||new DOMException("AbortError","AbortError")),En()};H.addEventListener("complete",Cn),H.addEventListener("error",en),H.addEventListener("abort",en)});q.set(H,re)}(H),se(H,function Oe(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,Ze):H)}function ee(H){if(H instanceof IDBRequest)return function Ye(H){const re=new Promise((xe,gt)=>{const En=()=>{H.removeEventListener("success",Cn),H.removeEventListener("error",en)},Cn=()=>{xe(ee(H.result)),En()},en=()=>{gt(H.error),En()};H.addEventListener("success",Cn),H.addEventListener("error",en)});return re.then(xe=>{xe instanceof IDBCursor&&U.set(xe,H)}).catch(()=>{}),Ie.set(re,H),re}(H);if(Ve.has(H))return Ve.get(H);const re=pt(H);return re!==H&&(Ve.set(H,re),Ie.set(re,H)),re}const Te=H=>Ie.get(H),Be=["get","getKey","getAll","getAllKeys","count"],k=["put","add","delete","clear"],te=new Map;function be(H,re){if(!(H instanceof IDBDatabase)||re in H||"string"!=typeof re)return;if(te.get(re))return te.get(re);const xe=re.replace(/FromIndex$/,""),gt=re!==xe,En=k.includes(xe);if(!(xe in(gt?IDBIndex:IDBObjectStore).prototype)||!En&&!Be.includes(xe))return;const Cn=function(){var en=(0,d.Z)(function*(ir,...dr){const kr=this.transaction(ir,En?"readwrite":"readonly");let is=kr.store;return gt&&(is=is.index(dr.shift())),(yield Promise.all([is[xe](...dr),En&&kr.done]))[0]});return function(dr){return en.apply(this,arguments)}}();return te.set(re,Cn),Cn}!function Se(H){Ze=H(Ze)}(H=>({...H,get:(re,xe,gt)=>be(re,xe)||H.get(re,xe,gt),has:(re,xe)=>!!be(re,xe)||H.has(re,xe)}));const it="@firebase/installations",Lt="0.6.4",$t=1e4,Ht=`w:${Lt}`,dn="FIS_v2",Jt="https://firebaseinstallations.googleapis.com/v1",qn=36e5,oe=new Y.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ae(H){return H instanceof Y.ZR&&H.code.includes("request-failed")}function Ge({projectId:H}){return`${Jt}/projects/${H}/installations`}function tt(H){return{token:H.token,requestStatus:2,expiresIn:Gn(H.expiresIn),creationTime:Date.now()}}function ze(H,re){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,d.Z)(function*(H,re){const gt=(yield re.json()).error;return oe.create("request-failed",{requestName:H,serverCode:gt.code,serverMessage:gt.message,serverStatus:gt.status})})).apply(this,arguments)}function Dt({apiKey:H}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":H})}function yt(H){return hn.apply(this,arguments)}function hn(){return(hn=(0,d.Z)(function*(H){const re=yield H();return re.status>=500&&re.status<600?H():re})).apply(this,arguments)}function Gn(H){return Number(H.replace("s","000"))}function Nn(){return(Nn=(0,d.Z)(function*({appConfig:H,heartbeatServiceProvider:re},{fid:xe}){const gt=Ge(H),En=Dt(H),Cn=re.getImmediate({optional:!0});if(Cn){const kr=yield Cn.getHeartbeatsHeader();kr&&En.append("x-firebase-client",kr)}const ir={method:"POST",headers:En,body:JSON.stringify({fid:xe,authVersion:dn,appId:H.appId,sdkVersion:Ht})},dr=yield yt(()=>fetch(gt,ir));if(dr.ok){const kr=yield dr.json();return{fid:kr.fid||xe,registrationStatus:2,refreshToken:kr.refreshToken,authToken:tt(kr.authToken)}}throw yield ze("Create Installation",dr)})).apply(this,arguments)}function sr(H){return new Promise(re=>{setTimeout(re,H)})}const Un=/^[cdef][\w-]{21}$/,Tn="";function rr(){try{const H=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(H),H[0]=112+H[0]%16;const xe=function Zr(H){return function Yn(H){return btoa(String.fromCharCode(...H)).replace(/\+/g,"-").replace(/\//g,"_")}(H).substr(0,22)}(H);return Un.test(xe)?xe:Tn}catch{return Tn}}function wt(H){return`${H.appName}!${H.appId}`}const It=new Map;function Nt(H,re){const xe=wt(H);fn(xe,re),function Wt(H,re){const xe=function Nr(){return!pn&&"BroadcastChannel"in self&&(pn=new BroadcastChannel("[Firebase] FID Change"),pn.onmessage=H=>{fn(H.data.key,H.data.fid)}),pn}();xe&&xe.postMessage({key:H,fid:re}),function rn(){0===It.size&&pn&&(pn.close(),pn=null)}()}(xe,re)}function fn(H,re){const xe=It.get(H);if(xe)for(const gt of xe)gt(re)}let pn=null;const gi="firebase-installations-database",Xt=1,cn="firebase-installations-store";let Ir=null;function or(){return Ir||(Ir=function ue(H,re,{blocked:xe,upgrade:gt,blocking:En,terminated:Cn}={}){const en=indexedDB.open(H,re),ir=ee(en);return gt&&en.addEventListener("upgradeneeded",dr=>{gt(ee(en.result),dr.oldVersion,dr.newVersion,ee(en.transaction))}),xe&&en.addEventListener("blocked",()=>xe()),ir.then(dr=>{Cn&&dr.addEventListener("close",()=>Cn()),En&&dr.addEventListener("versionchange",()=>En())}).catch(()=>{}),ir}(gi,Xt,{upgrade:(H,re)=>{0===re&&H.createObjectStore(cn)}})),Ir}function lr(H,re){return jn.apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(H,re){const xe=wt(H),En=(yield or()).transaction(cn,"readwrite"),Cn=En.objectStore(cn),en=yield Cn.get(xe);return yield Cn.put(re,xe),yield En.done,(!en||en.fid!==re.fid)&&Nt(H,re.fid),re})).apply(this,arguments)}function ye(H){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(H){const re=wt(H),gt=(yield or()).transaction(cn,"readwrite");yield gt.objectStore(cn).delete(re),yield gt.done})).apply(this,arguments)}function Ce(H,re){return He.apply(this,arguments)}function He(){return(He=(0,d.Z)(function*(H,re){const xe=wt(H),En=(yield or()).transaction(cn,"readwrite"),Cn=En.objectStore(cn),en=yield Cn.get(xe),ir=re(en);return void 0===ir?yield Cn.delete(xe):yield Cn.put(ir,xe),yield En.done,ir&&(!en||en.fid!==ir.fid)&&Nt(H,ir.fid),ir})).apply(this,arguments)}function lt(H){return Et.apply(this,arguments)}function Et(){return Et=(0,d.Z)(function*(H){let re;const xe=yield Ce(H.appConfig,gt=>{const En=function yn(H){return Ne(H||{fid:rr(),registrationStatus:0})}(gt),Cn=function z(H,re){if(0===re.registrationStatus){if(!navigator.onLine)return{installationEntry:re,registrationPromise:Promise.reject(oe.create("app-offline"))};const xe={fid:re.fid,registrationStatus:1,registrationTime:Date.now()},gt=function G(H,re){return P.apply(this,arguments)}(H,xe);return{installationEntry:xe,registrationPromise:gt}}return 1===re.registrationStatus?{installationEntry:re,registrationPromise:R(H)}:{installationEntry:re}}(H,En);return re=Cn.registrationPromise,Cn.installationEntry});return xe.fid===Tn?{installationEntry:yield re}:{installationEntry:xe,registrationPromise:re}}),Et.apply(this,arguments)}function P(){return P=(0,d.Z)(function*(H,re){try{const xe=yield function vn(H,re){return Nn.apply(this,arguments)}(H,re);return lr(H.appConfig,xe)}catch(xe){throw Ae(xe)&&409===xe.customData.serverCode?yield ye(H.appConfig):yield lr(H.appConfig,{fid:re.fid,registrationStatus:0}),xe}}),P.apply(this,arguments)}function R(H){return x.apply(this,arguments)}function x(){return(x=(0,d.Z)(function*(H){let re=yield X(H.appConfig);for(;1===re.registrationStatus;)yield sr(100),re=yield X(H.appConfig);if(0===re.registrationStatus){const{installationEntry:xe,registrationPromise:gt}=yield lt(H);return gt||xe}return re})).apply(this,arguments)}function X(H){return Ce(H,re=>{if(!re)throw oe.create("installation-not-found");return Ne(re)})}function Ne(H){return function Qe(H){return 1===H.registrationStatus&&H.registrationTime+$t<Date.now()}(H)?{fid:H.fid,registrationStatus:0}:H}function st(){return(st=(0,d.Z)(function*({appConfig:H,heartbeatServiceProvider:re},xe){const gt=function _n(H,{fid:re}){return`${Ge(H)}/${re}/authTokens:generate`}(H,xe),En=function nn(H,{refreshToken:re}){const xe=Dt(H);return xe.append("Authorization",function Ln(H){return`${dn} ${H}`}(re)),xe}(H,xe),Cn=re.getImmediate({optional:!0});if(Cn){const kr=yield Cn.getHeartbeatsHeader();kr&&En.append("x-firebase-client",kr)}const ir={method:"POST",headers:En,body:JSON.stringify({installation:{sdkVersion:Ht,appId:H.appId}})},dr=yield yt(()=>fetch(gt,ir));if(dr.ok)return tt(yield dr.json());throw yield ze("Generate Auth Token",dr)})).apply(this,arguments)}function Ut(H){return wn.apply(this,arguments)}function wn(){return wn=(0,d.Z)(function*(H,re=!1){let xe;const gt=yield Ce(H.appConfig,Cn=>{if(!ot(Cn))throw oe.create("not-registered");const en=Cn.authToken;if(!re&&function Ot(H){return 2===H.requestStatus&&!function dt(H){const re=Date.now();return re<H.creationTime||H.creationTime+H.expiresIn<re+qn}(H)}(en))return Cn;if(1===en.requestStatus)return xe=function Kt(H,re){return vr.apply(this,arguments)}(H,re),Cn;{if(!navigator.onLine)throw oe.create("app-offline");const ir=function An(H){const re={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},H),{authToken:re})}(Cn);return xe=function de(H,re){return nt.apply(this,arguments)}(H,ir),ir}});return xe?yield xe:gt.authToken}),wn.apply(this,arguments)}function vr(){return(vr=(0,d.Z)(function*(H,re){let xe=yield K(H.appConfig);for(;1===xe.authToken.requestStatus;)yield sr(100),xe=yield K(H.appConfig);const gt=xe.authToken;return 0===gt.requestStatus?Ut(H,re):gt})).apply(this,arguments)}function K(H){return Ce(H,re=>{if(!ot(re))throw oe.create("not-registered");return function ni(H){return 1===H.requestStatus&&H.requestTime+$t<Date.now()}(re.authToken)?Object.assign(Object.assign({},re),{authToken:{requestStatus:0}}):re})}function nt(){return nt=(0,d.Z)(function*(H,re){try{const xe=yield function xt(H,re){return st.apply(this,arguments)}(H,re),gt=Object.assign(Object.assign({},re),{authToken:xe});return yield lr(H.appConfig,gt),xe}catch(xe){if(!Ae(xe)||401!==xe.customData.serverCode&&404!==xe.customData.serverCode){const gt=Object.assign(Object.assign({},re),{authToken:{requestStatus:0}});yield lr(H.appConfig,gt)}else yield ye(H.appConfig);throw xe}}),nt.apply(this,arguments)}function ot(H){return void 0!==H&&2===H.registrationStatus}function qi(){return(qi=(0,d.Z)(function*(H){const re=H,{installationEntry:xe,registrationPromise:gt}=yield lt(re);return gt?gt.catch(console.error):Ut(re).catch(console.error),xe.fid})).apply(this,arguments)}function ln(){return ln=(0,d.Z)(function*(H,re=!1){const xe=H;return yield function Ps(H){return Zs.apply(this,arguments)}(xe),(yield Ut(xe,re)).token}),ln.apply(this,arguments)}function Zs(){return(Zs=(0,d.Z)(function*(H){const{registrationPromise:re}=yield lt(H);re&&(yield re)})).apply(this,arguments)}function ba(H){return oe.create("missing-app-config-values",{valueName:H})}const mo="installations",Da=H=>{const re=H.getProvider("app").getImmediate(),xe=function Ii(H){if(!H||!H.options)throw ba("App Configuration");if(!H.name)throw ba("App Name");const re=["projectId","apiKey","appId"];for(const xe of re)if(!H.options[xe])throw ba(xe);return{appName:H.name,projectId:H.options.projectId,apiKey:H.options.apiKey,appId:H.options.appId}}(re);return{app:re,appConfig:xe,heartbeatServiceProvider:(0,V._getProvider)(re,"heartbeat"),_delete:()=>Promise.resolve()}},Yo=H=>{const re=H.getProvider("app").getImmediate(),xe=(0,V._getProvider)(re,mo).getImmediate();return{getId:()=>function ri(H){return qi.apply(this,arguments)}(xe),getToken:En=>function Rr(H){return ln.apply(this,arguments)}(xe,En)}};(function Pu(){(0,V._registerComponent)(new N.wA(mo,Da,"PUBLIC")),(0,V._registerComponent)(new N.wA("installations-internal",Yo,"PRIVATE"))})(),(0,V.registerVersion)(it,Lt),(0,V.registerVersion)(it,Lt,"esm2017")},7879:(_t,De,M)=>{M.d(De,{Am:()=>he,Ub:()=>Oe,Yd:()=>Ee,in:()=>V});const d=[];var V=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(V||{});const N={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},Y=V.INFO,se={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},ve=(U,q,...ne)=>{if(q<U.logLevel)return;const Ve=(new Date).toISOString(),Ie=se[q];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Ie](`[${Ve}]  ${U.name}:`,...ne)};class Ee{constructor(q){this.name=q,this._logLevel=Y,this._logHandler=ve,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in V))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?N[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...q),this._logHandler(this,V.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...q),this._logHandler(this,V.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,V.INFO,...q),this._logHandler(this,V.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,V.WARN,...q),this._logHandler(this,V.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...q),this._logHandler(this,V.ERROR,...q)}}function Oe(U){d.forEach(q=>{q.setLogLevel(U)})}function he(U,q){for(const ne of d){let Ve=null;q&&q.level&&(Ve=N[q.level]),ne.userLogHandler=null===U?null:(Ie,Ye,...ke)=>{const Ze=ke.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch{return null}}).filter(Se=>Se).join(" ");Ye>=(Ve??Ie.logLevel)&&U({level:V[Ye].toLowerCase(),message:Ze,args:ke,type:Ie.name})}}}},2650:(_t,De,M)=>{M.d(De,{Gb:()=>X,LP:()=>Ut,pQ:()=>Kt,ps:()=>vr});var d=M(5861),N=(M(2591),M(4537)),Y=M(9240),se=M(9058),ve=M(4303);const Ee="/firebase-messaging-sw.js",Oe="/firebase-cloud-messaging-push-scope",he="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",U="https://fcmregistrations.googleapis.com/v1",q="google.c.a.c_id",ne="google.c.a.c_l",Ve="google.c.a.ts";var ke=function(K){return K.PUSH_RECEIVED="push-received",K.NOTIFICATION_CLICKED="notification-clicked",K}(ke||{});function Ze(K){const de=new Uint8Array(K);return btoa(String.fromCharCode(...de)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Se(K){const nt=(K+"=".repeat((4-K.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ot=atob(nt),Ot=new Uint8Array(ot.length);for(let dt=0;dt<ot.length;++dt)Ot[dt]=ot.charCodeAt(dt);return Ot}const ft="fcm_token_details_db",pt=5,ee="fcm_token_object_Store";function ue(){return ue=(0,d.Z)(function*(K){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(dt=>dt.name).includes(ft))return null;let de=null;return(yield(0,Y.X3)(ft,pt,{upgrade:(ot=(0,d.Z)(function*(Ot,dt,An,ni){var ri;if(dt<2||!Ot.objectStoreNames.contains(ee))return;const qi=ni.objectStore(ee),Rr=yield qi.index("fcmSenderId").get(K);if(yield qi.clear(),Rr)if(2===dt){const ln=Rr;if(!ln.auth||!ln.p256dh||!ln.endpoint)return;de={token:ln.fcmToken,createTime:null!==(ri=ln.createTime)&&void 0!==ri?ri:Date.now(),subscriptionOptions:{auth:ln.auth,p256dh:ln.p256dh,endpoint:ln.endpoint,swScope:ln.swScope,vapidKey:"string"==typeof ln.vapidKey?ln.vapidKey:Ze(ln.vapidKey)}}}else if(3===dt){const ln=Rr;de={token:ln.fcmToken,createTime:ln.createTime,subscriptionOptions:{auth:Ze(ln.auth),p256dh:Ze(ln.p256dh),endpoint:ln.endpoint,swScope:ln.swScope,vapidKey:Ze(ln.vapidKey)}}}else if(4===dt){const ln=Rr;de={token:ln.fcmToken,createTime:ln.createTime,subscriptionOptions:{auth:Ze(ln.auth),p256dh:Ze(ln.p256dh),endpoint:ln.endpoint,swScope:ln.swScope,vapidKey:Ze(ln.vapidKey)}}}}),function(dt,An,ni,ri){return ot.apply(this,arguments)})})).close(),yield(0,Y.Lj)(ft),yield(0,Y.Lj)("fcm_vapid_details_db"),yield(0,Y.Lj)("undefined"),function Me(K){if(!K||!K.subscriptionOptions)return!1;const{subscriptionOptions:de}=K;return"number"==typeof K.createTime&&K.createTime>0&&"string"==typeof K.token&&K.token.length>0&&"string"==typeof de.auth&&de.auth.length>0&&"string"==typeof de.p256dh&&de.p256dh.length>0&&"string"==typeof de.endpoint&&de.endpoint.length>0&&"string"==typeof de.swScope&&de.swScope.length>0&&"string"==typeof de.vapidKey&&de.vapidKey.length>0}(de)?de:null;var ot}),ue.apply(this,arguments)}const Be="firebase-messaging-database",k=1,te="firebase-messaging-store";let be=null;function it(){return be||(be=(0,Y.X3)(Be,k,{upgrade:(K,de)=>{0===de&&K.createObjectStore(te)}})),be}function Lt(K){return $t.apply(this,arguments)}function $t(){return $t=(0,d.Z)(function*(K){const de=ae(K),ot=yield(yield it()).transaction(te).objectStore(te).get(de);if(ot)return ot;{const Ot=yield function Te(K){return ue.apply(this,arguments)}(K.appConfig.senderId);if(Ot)return yield Ht(K,Ot),Ot}}),$t.apply(this,arguments)}function Ht(K,de){return dn.apply(this,arguments)}function dn(){return(dn=(0,d.Z)(function*(K,de){const nt=ae(K),Ot=(yield it()).transaction(te,"readwrite");return yield Ot.objectStore(te).put(de,nt),yield Ot.done,de})).apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(K){const de=ae(K),ot=(yield it()).transaction(te,"readwrite");yield ot.objectStore(te).delete(de),yield ot.done})).apply(this,arguments)}function ae({appConfig:K}){return K.appId}const ce=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function oe(K,de){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,d.Z)(function*(K,de){const nt=yield nn(K),ot=hn(de),Ot={method:"POST",headers:nt,body:JSON.stringify(ot)};let dt;try{dt=yield(yield fetch(Dt(K.appConfig),Ot)).json()}catch(An){throw ce.create("token-subscribe-failed",{errorInfo:An?.toString()})}if(dt.error)throw ce.create("token-subscribe-failed",{errorInfo:dt.error.message});if(!dt.token)throw ce.create("token-subscribe-no-token");return dt.token})).apply(this,arguments)}function tt(){return(tt=(0,d.Z)(function*(K,de){const nt=yield nn(K),ot=hn(de.subscriptionOptions),Ot={method:"PATCH",headers:nt,body:JSON.stringify(ot)};let dt;try{dt=yield(yield fetch(`${Dt(K.appConfig)}/${de.token}`,Ot)).json()}catch(An){throw ce.create("token-update-failed",{errorInfo:An?.toString()})}if(dt.error)throw ce.create("token-update-failed",{errorInfo:dt.error.message});if(!dt.token)throw ce.create("token-update-no-token");return dt.token})).apply(this,arguments)}function ze(K,de){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,d.Z)(function*(K,de){const ot={method:"DELETE",headers:yield nn(K)};try{const dt=yield(yield fetch(`${Dt(K.appConfig)}/${de}`,ot)).json();if(dt.error)throw ce.create("token-unsubscribe-failed",{errorInfo:dt.error.message})}catch(Ot){throw ce.create("token-unsubscribe-failed",{errorInfo:Ot?.toString()})}})).apply(this,arguments)}function Dt({projectId:K}){return`${U}/projects/${K}/registrations`}function nn(K){return yt.apply(this,arguments)}function yt(){return(yt=(0,d.Z)(function*({appConfig:K,installations:de}){const nt=yield de.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":K.apiKey,"x-goog-firebase-installations-auth":`FIS ${nt}`})})).apply(this,arguments)}function hn({p256dh:K,auth:de,endpoint:nt,vapidKey:ot}){const Ot={web:{endpoint:nt,auth:de,p256dh:K}};return ot!==he&&(Ot.web.applicationPubKey=ot),Ot}const Gn=6048e5;function vn(){return vn=(0,d.Z)(function*(K){const de=yield function Zr(K,de){return wt.apply(this,arguments)}(K.swRegistration,K.vapidKey),nt={vapidKey:K.vapidKey,swScope:K.swRegistration.scope,endpoint:de.endpoint,auth:Ze(de.getKey("auth")),p256dh:Ze(de.getKey("p256dh"))},ot=yield Lt(K.firebaseDependencies);if(ot){if(function It(K,de){return de.vapidKey===K.vapidKey&&de.endpoint===K.endpoint&&de.auth===K.auth&&de.p256dh===K.p256dh}(ot.subscriptionOptions,nt))return Date.now()>=ot.createTime+Gn?function Yn(K,de){return Un.apply(this,arguments)}(K,{token:ot.token,createTime:Date.now(),subscriptionOptions:nt}):ot.token;try{yield ze(K.firebaseDependencies,ot.token)}catch(Ot){console.warn(Ot)}return Tn(K.firebaseDependencies,nt)}return Tn(K.firebaseDependencies,nt)}),vn.apply(this,arguments)}function Nn(K){return sr.apply(this,arguments)}function sr(){return sr=(0,d.Z)(function*(K){const de=yield Lt(K.firebaseDependencies);de&&(yield ze(K.firebaseDependencies,de.token),yield function Jt(K){return qn.apply(this,arguments)}(K.firebaseDependencies));const nt=yield K.swRegistration.pushManager.getSubscription();return!nt||nt.unsubscribe()}),sr.apply(this,arguments)}function Un(){return Un=(0,d.Z)(function*(K,de){try{const nt=yield function Ge(K,de){return tt.apply(this,arguments)}(K.firebaseDependencies,de),ot=Object.assign(Object.assign({},de),{token:nt,createTime:Date.now()});return yield Ht(K.firebaseDependencies,ot),nt}catch(nt){throw yield Nn(K),nt}}),Un.apply(this,arguments)}function Tn(K,de){return rr.apply(this,arguments)}function rr(){return(rr=(0,d.Z)(function*(K,de){const ot={token:yield oe(K,de),createTime:Date.now(),subscriptionOptions:de};return yield Ht(K,ot),ot.token})).apply(this,arguments)}function wt(){return(wt=(0,d.Z)(function*(K,de){return(yield K.pushManager.getSubscription())||K.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Se(de)})})).apply(this,arguments)}function Nt(K){const de={from:K.from,collapseKey:K.collapse_key,messageId:K.fcmMessageId};return function Rt(K,de){if(!de.notification)return;K.notification={};const nt=de.notification.title;nt&&(K.notification.title=nt);const ot=de.notification.body;ot&&(K.notification.body=ot);const Ot=de.notification.image;Ot&&(K.notification.image=Ot);const dt=de.notification.icon;dt&&(K.notification.icon=dt)}(de,K),function _r(K,de){de.data&&(K.data=de.data)}(de,K),function fn(K,de){var nt,ot,Ot,dt,An;if(!(de.fcmOptions||null!==(nt=de.notification)&&void 0!==nt&&nt.click_action))return;K.fcmOptions={};const ni=null!==(Ot=null===(ot=de.fcmOptions)||void 0===ot?void 0:ot.link)&&void 0!==Ot?Ot:null===(dt=de.notification)||void 0===dt?void 0:dt.click_action;ni&&(K.fcmOptions.link=ni);const ri=null===(An=de.fcmOptions)||void 0===An?void 0:An.analytics_label;ri&&(K.fcmOptions.analyticsLabel=ri)}(de,K),de}function pn(K,de){const nt=[];for(let ot=0;ot<K.length;ot++)nt.push(K.charAt(ot)),ot<de.length&&nt.push(de.charAt(ot));return nt.join("")}function rn(K){return ce.create("missing-app-config-values",{valueName:K})}pn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class gi{constructor(de,nt,ot){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ot=function Nr(K){if(!K||!K.options)throw rn("App Configuration Object");if(!K.name)throw rn("App Name");const de=["projectId","apiKey","appId","messagingSenderId"],{options:nt}=K;for(const ot of de)if(!nt[ot])throw rn(ot);return{appName:K.name,projectId:nt.projectId,apiKey:nt.apiKey,appId:nt.appId,senderId:nt.messagingSenderId}}(de);this.firebaseDependencies={app:de,appConfig:Ot,installations:nt,analyticsProvider:ot}}_delete(){return Promise.resolve()}}function Xt(K){return cn.apply(this,arguments)}function cn(){return(cn=(0,d.Z)(function*(K){try{K.swRegistration=yield navigator.serviceWorker.register(Ee,{scope:Oe}),K.swRegistration.update().catch(()=>{})}catch(de){throw ce.create("failed-service-worker-registration",{browserErrorMessage:de?.message})}})).apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(K,de){if(!de&&!K.swRegistration&&(yield Xt(K)),de||!K.swRegistration){if(!(de instanceof ServiceWorkerRegistration))throw ce.create("invalid-sw-registration");K.swRegistration=de}})).apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(K,de){de?K.vapidKey=de:K.vapidKey||(K.vapidKey=he)})).apply(this,arguments)}function ye(K,de){return Z.apply(this,arguments)}function Z(){return Z=(0,d.Z)(function*(K,de){if(!navigator)throw ce.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ce.create("permission-blocked");return yield function lr(K,de){return jn.apply(this,arguments)}(K,de?.vapidKey),yield function Ir(K,de){return or.apply(this,arguments)}(K,de?.serviceWorkerRegistration),function Ln(K){return vn.apply(this,arguments)}(K)}),Z.apply(this,arguments)}function He(){return(He=(0,d.Z)(function*(K,de,nt){const ot=function lt(K){switch(K){case ke.NOTIFICATION_CLICKED:return"notification_open";case ke.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(de);(yield K.firebaseDependencies.analyticsProvider.get()).logEvent(ot,{message_id:nt[q],message_name:nt[ne],message_time:nt[Ve],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function yn(){return yn=(0,d.Z)(function*(K,de){const nt=de.data;if(!nt.isFirebaseMessaging)return;K.onMessageHandler&&nt.messageType===ke.PUSH_RECEIVED&&("function"==typeof K.onMessageHandler?K.onMessageHandler(Nt(nt)):K.onMessageHandler.next(Nt(nt)));const ot=nt.data;(function Wt(K){return"object"==typeof K&&!!K&&q in K})(ot)&&"1"===ot["google.c.a.e"]&&(yield function Ce(K,de,nt){return He.apply(this,arguments)}(K,nt.messageType,ot))}),yn.apply(this,arguments)}const z="@firebase/messaging",G="0.12.4",P=K=>{const de=new gi(K.getProvider("app").getImmediate(),K.getProvider("installations-internal").getImmediate(),K.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",nt=>function Et(K,de){return yn.apply(this,arguments)}(de,nt)),de},R=K=>{const de=K.getProvider("messaging").getImmediate();return{getToken:ot=>ye(de,ot)}};function X(){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,d.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function xt(){return(xt=(0,d.Z)(function*(K){if(!navigator)throw ce.create("only-available-in-window");return K.swRegistration||(yield Xt(K)),Nn(K)})).apply(this,arguments)}function Ut(K,de){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(K,de){return ye(K=(0,se.m9)(K),de)})).apply(this,arguments)}function Kt(K){return function Qe(K){return xt.apply(this,arguments)}(K=(0,se.m9)(K))}function vr(K,de){return function st(K,de){if(!navigator)throw ce.create("only-available-in-window");return K.onMessageHandler=de,()=>{K.onMessageHandler=null}}(K=(0,se.m9)(K),de)}!function x(){(0,ve._registerComponent)(new N.wA("messaging",P,"PUBLIC")),(0,ve._registerComponent)(new N.wA("messaging-internal",R,"PRIVATE")),(0,ve.registerVersion)(z,G),(0,ve.registerVersion)(z,G,"esm2017")}()},9240:(_t,De,M)=>{M.d(De,{Lj:()=>ee,X3:()=>pt});var d=M(5861);const V=(k,te)=>te.some(be=>k instanceof be);let N,Y;const Ee=new WeakMap,Oe=new WeakMap,he=new WeakMap,U=new WeakMap,q=new WeakMap;let Ie={get(k,te,be){if(k instanceof IDBTransaction){if("done"===te)return Oe.get(k);if("objectStoreNames"===te)return k.objectStoreNames||he.get(k);if("store"===te)return be.objectStoreNames[1]?void 0:be.objectStore(be.objectStoreNames[0])}return Se(k[te])},set:(k,te,be)=>(k[te]=be,!0),has:(k,te)=>k instanceof IDBTransaction&&("done"===te||"store"===te)||te in k};function Ze(k){return"function"==typeof k?function ke(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...te){return k.apply(ft(this),te),Se(Ee.get(this))}:function(...te){return Se(k.apply(ft(this),te))}:function(te,...be){const it=k.call(ft(this),te,...be);return he.set(it,te.sort?te.sort():[te]),Se(it)}}(k):(k instanceof IDBTransaction&&function Ve(k){if(Oe.has(k))return;const te=new Promise((be,it)=>{const Lt=()=>{k.removeEventListener("complete",$t),k.removeEventListener("error",Ht),k.removeEventListener("abort",Ht)},$t=()=>{be(),Lt()},Ht=()=>{it(k.error||new DOMException("AbortError","AbortError")),Lt()};k.addEventListener("complete",$t),k.addEventListener("error",Ht),k.addEventListener("abort",Ht)});Oe.set(k,te)}(k),V(k,function se(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ie):k)}function Se(k){if(k instanceof IDBRequest)return function ne(k){const te=new Promise((be,it)=>{const Lt=()=>{k.removeEventListener("success",$t),k.removeEventListener("error",Ht)},$t=()=>{be(Se(k.result)),Lt()},Ht=()=>{it(k.error),Lt()};k.addEventListener("success",$t),k.addEventListener("error",Ht)});return te.then(be=>{be instanceof IDBCursor&&Ee.set(be,k)}).catch(()=>{}),q.set(te,k),te}(k);if(U.has(k))return U.get(k);const te=Ze(k);return te!==k&&(U.set(k,te),q.set(te,k)),te}const ft=k=>q.get(k);function pt(k,te,{blocked:be,upgrade:it,blocking:Lt,terminated:$t}={}){const Ht=indexedDB.open(k,te),dn=Se(Ht);return it&&Ht.addEventListener("upgradeneeded",Jt=>{it(Se(Ht.result),Jt.oldVersion,Jt.newVersion,Se(Ht.transaction))}),be&&Ht.addEventListener("blocked",()=>be()),dn.then(Jt=>{$t&&Jt.addEventListener("close",()=>$t()),Lt&&Jt.addEventListener("versionchange",()=>Lt())}).catch(()=>{}),dn}function ee(k,{blocked:te}={}){const be=indexedDB.deleteDatabase(k);return te&&be.addEventListener("blocked",()=>te()),Se(be).then(()=>{})}const Te=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],Me=new Map;function Be(k,te){if(!(k instanceof IDBDatabase)||te in k||"string"!=typeof te)return;if(Me.get(te))return Me.get(te);const be=te.replace(/FromIndex$/,""),it=te!==be,Lt=ue.includes(be);if(!(be in(it?IDBIndex:IDBObjectStore).prototype)||!Lt&&!Te.includes(be))return;const $t=function(){var Ht=(0,d.Z)(function*(dn,...Jt){const qn=this.transaction(dn,Lt?"readwrite":"readonly");let ae=qn.store;return it&&(ae=ae.index(Jt.shift())),(yield Promise.all([ae[be](...Jt),Lt&&qn.done]))[0]});return function(Jt){return Ht.apply(this,arguments)}}();return Me.set(te,$t),$t}!function Ye(k){Ie=k(Ie)}(k=>({...k,get:(te,be,it)=>Be(te,be)||k.get(te,be,it),has:(te,be)=>!!Be(te,be)||k.has(te,be)}))},1878:(_t,De,M)=>{M.d(De,{X3:()=>pt});var d=M(5861);const V=(k,te)=>te.some(be=>k instanceof be);let N,Y;const Ee=new WeakMap,Oe=new WeakMap,he=new WeakMap,U=new WeakMap,q=new WeakMap;let Ie={get(k,te,be){if(k instanceof IDBTransaction){if("done"===te)return Oe.get(k);if("objectStoreNames"===te)return k.objectStoreNames||he.get(k);if("store"===te)return be.objectStoreNames[1]?void 0:be.objectStore(be.objectStoreNames[0])}return Se(k[te])},set:(k,te,be)=>(k[te]=be,!0),has:(k,te)=>k instanceof IDBTransaction&&("done"===te||"store"===te)||te in k};function Ze(k){return"function"==typeof k?function ke(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...te){return k.apply(ft(this),te),Se(Ee.get(this))}:function(...te){return Se(k.apply(ft(this),te))}:function(te,...be){const it=k.call(ft(this),te,...be);return he.set(it,te.sort?te.sort():[te]),Se(it)}}(k):(k instanceof IDBTransaction&&function Ve(k){if(Oe.has(k))return;const te=new Promise((be,it)=>{const Lt=()=>{k.removeEventListener("complete",$t),k.removeEventListener("error",Ht),k.removeEventListener("abort",Ht)},$t=()=>{be(),Lt()},Ht=()=>{it(k.error||new DOMException("AbortError","AbortError")),Lt()};k.addEventListener("complete",$t),k.addEventListener("error",Ht),k.addEventListener("abort",Ht)});Oe.set(k,te)}(k),V(k,function se(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ie):k)}function Se(k){if(k instanceof IDBRequest)return function ne(k){const te=new Promise((be,it)=>{const Lt=()=>{k.removeEventListener("success",$t),k.removeEventListener("error",Ht)},$t=()=>{be(Se(k.result)),Lt()},Ht=()=>{it(k.error),Lt()};k.addEventListener("success",$t),k.addEventListener("error",Ht)});return te.then(be=>{be instanceof IDBCursor&&Ee.set(be,k)}).catch(()=>{}),q.set(te,k),te}(k);if(U.has(k))return U.get(k);const te=Ze(k);return te!==k&&(U.set(k,te),q.set(te,k)),te}const ft=k=>q.get(k);function pt(k,te,{blocked:be,upgrade:it,blocking:Lt,terminated:$t}={}){const Ht=indexedDB.open(k,te),dn=Se(Ht);return it&&Ht.addEventListener("upgradeneeded",Jt=>{it(Se(Ht.result),Jt.oldVersion,Jt.newVersion,Se(Ht.transaction),Jt)}),be&&Ht.addEventListener("blocked",Jt=>be(Jt.oldVersion,Jt.newVersion,Jt)),dn.then(Jt=>{$t&&Jt.addEventListener("close",()=>$t()),Lt&&Jt.addEventListener("versionchange",qn=>Lt(qn.oldVersion,qn.newVersion,qn))}).catch(()=>{}),dn}const Te=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],Me=new Map;function Be(k,te){if(!(k instanceof IDBDatabase)||te in k||"string"!=typeof te)return;if(Me.get(te))return Me.get(te);const be=te.replace(/FromIndex$/,""),it=te!==be,Lt=ue.includes(be);if(!(be in(it?IDBIndex:IDBObjectStore).prototype)||!Lt&&!Te.includes(be))return;const $t=function(){var Ht=(0,d.Z)(function*(dn,...Jt){const qn=this.transaction(dn,Lt?"readwrite":"readonly");let ae=qn.store;return it&&(ae=ae.index(Jt.shift())),(yield Promise.all([ae[be](...Jt),Lt&&qn.done]))[0]});return function(Jt){return Ht.apply(this,arguments)}}();return Me.set(te,$t),$t}!function Ye(k){Ie=k(Ie)}(k=>({...k,get:(te,be,it)=>Be(te,be)||k.get(te,be,it),has:(te,be)=>!!Be(te,be)||k.has(te,be)}))},5861:(_t,De,M)=>{function d(N,Y,se,ve,Ee,Oe,he){try{var U=N[Oe](he),q=U.value}catch(ne){return void se(ne)}U.done?Y(q):Promise.resolve(q).then(ve,Ee)}function V(N){return function(){var Y=this,se=arguments;return new Promise(function(ve,Ee){var Oe=N.apply(Y,se);function he(q){d(Oe,ve,Ee,he,U,"next",q)}function U(q){d(Oe,ve,Ee,he,U,"throw",q)}he(void 0)})}}M.d(De,{Z:()=>V})},7582:(_t,De,M)=>{function Y(ae,pe){var ce={};for(var oe in ae)Object.prototype.hasOwnProperty.call(ae,oe)&&pe.indexOf(oe)<0&&(ce[oe]=ae[oe]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(oe=Object.getOwnPropertySymbols(ae);Ae<oe.length;Ae++)pe.indexOf(oe[Ae])<0&&Object.prototype.propertyIsEnumerable.call(ae,oe[Ae])&&(ce[oe[Ae]]=ae[oe[Ae]])}return ce}function ne(ae,pe,ce,oe){return new(ce||(ce=Promise))(function(Ge,tt){function ze(nn){try{Dt(oe.next(nn))}catch(yt){tt(yt)}}function Zt(nn){try{Dt(oe.throw(nn))}catch(yt){tt(yt)}}function Dt(nn){nn.done?Ge(nn.value):function Ae(Ge){return Ge instanceof ce?Ge:new ce(function(tt){tt(Ge)})}(nn.value).then(ze,Zt)}Dt((oe=oe.apply(ae,pe||[])).next())})}function ee(ae){return this instanceof ee?(this.v=ae,this):new ee(ae)}function Te(ae,pe,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,oe=ce.apply(ae,pe||[]),Ge=[];return Ae={},tt("next"),tt("throw"),tt("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function tt(hn){oe[hn]&&(Ae[hn]=function(Gn){return new Promise(function(Ln,vn){Ge.push([hn,Gn,Ln,vn])>1||ze(hn,Gn)})})}function ze(hn,Gn){try{!function Zt(hn){hn.value instanceof ee?Promise.resolve(hn.value.v).then(Dt,nn):yt(Ge[0][2],hn)}(oe[hn](Gn))}catch(Ln){yt(Ge[0][3],Ln)}}function Dt(hn){ze("next",hn)}function nn(hn){ze("throw",hn)}function yt(hn,Gn){hn(Gn),Ge.shift(),Ge.length&&ze(Ge[0][0],Ge[0][1])}}function Me(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,pe=ae[Symbol.asyncIterator];return pe?pe.call(ae):(ae=function ke(ae){var pe="function"==typeof Symbol&&Symbol.iterator,ce=pe&&ae[pe],oe=0;if(ce)return ce.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&oe>=ae.length&&(ae=void 0),{value:ae&&ae[oe++],done:!ae}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),ce={},oe("next"),oe("throw"),oe("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function oe(Ge){ce[Ge]=ae[Ge]&&function(tt){return new Promise(function(ze,Zt){!function Ae(Ge,tt,ze,Zt){Promise.resolve(Zt).then(function(Dt){Ge({value:Dt,done:ze})},tt)}(ze,Zt,(tt=ae[Ge](tt)).done,tt.value)})}}}M.d(De,{FC:()=>Te,KL:()=>Me,_T:()=>Y,mG:()=>ne,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},_t=>{_t(_t.s=4165)}]);