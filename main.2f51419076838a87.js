"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(st,Ce,k)=>{k.d(Ce,{Dh:()=>Ne,GT:()=>ge,cc:()=>Pe,on:()=>De,pX:()=>te,xv:()=>Fe});var d=k(5879),V=k(120);st=k.hmd(st);const F=["ngOnDestroy"],te=(Ae,Te,tt,at={})=>new Proxy(Ae,{get:(ee,he)=>tt.runOutsideAngular(()=>{var re;if(Ae[he])return!(null===(re=at?.spy)||void 0===re)&&re.get&&at.spy.get(he,Ae[he]),Ae[he];if(F.indexOf(he)>-1)return()=>{};const fe=Te.toPromise().then(Re=>{const B=Re&&Re[he];return"function"==typeof B?B.bind(Re):B&&B.then?B.then(we=>tt.run(()=>we)):tt.run(()=>B)});return new Proxy(()=>{},{get:(Re,B)=>fe[B],apply:(Re,B,we)=>fe.then(Ue=>{var ut;const Xt=Ue&&Ue(...we);return!(null===(ut=at?.spy)||void 0===ut)&&ut.apply&&at.spy.apply(he,we,Xt),Xt})})})}),ge=(Ae,Te)=>{Te.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(at=>{Object.defineProperty(Ae.prototype,at,Object.getOwnPropertyDescriptor(tt.prototype||tt,at))})})};class Ee{constructor(Te){return Te}}const Ne=new d.OlP("angularfire2.app.options"),Fe=new d.OlP("angularfire2.app.name");function De(Ae,Te,tt){const ee="object"==typeof tt&&tt||{};ee.name=ee.name||"string"==typeof tt&&tt||"[DEFAULT]";const re=V.Z.apps.filter(fe=>fe&&fe.name===ee.name)[0]||Te.runOutsideAngular(()=>V.Z.initializeApp(Ae,ee));try{JSON.stringify(Ae)!==JSON.stringify(re.options)&&U("error",`${re.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(re)}const U=(Ae,...Te)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ae](...Te)};function Pe(Ae,Te,tt,at,ee){const[,he,re]=globalThis.\u0275AngularfireInstanceCache.find(fe=>fe[0]===Ae)||[];if(he)return function Me(Ae,Te){try{return Ae.toString()===Te.toString()}catch{return Ae===Te}}(ee,re)||(ve("error",`${Te} was already initialized on the ${tt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:ee,was:re})),he;{const fe=at();return globalThis.\u0275AngularfireInstanceCache.push([Ae,fe,ee]),fe}}const Je=!!st.hot,ve=(Ae,...Te)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Ae](...Te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6710:(st,Ce,k)=>{k.d(Ce,{$:()=>ah,A:()=>G,D:()=>Me,I:()=>Zd,J:()=>Cu,L:()=>je,N:()=>Vt,P:()=>Cn,Q:()=>wa,R:()=>hg,U:()=>$p,V:()=>Ho,W:()=>hs,X:()=>ks,Y:()=>nh,Z:()=>rh,_:()=>bu,a:()=>nl,a0:()=>gI,a1:()=>xn,a2:()=>ox,a3:()=>ax,a4:()=>xy,a5:()=>co,a6:()=>Du,a7:()=>ch,a8:()=>lh,a9:()=>Py,aA:()=>B,aB:()=>Pa,aC:()=>ot,aD:()=>Wn,aE:()=>yo,aF:()=>Lu,aG:()=>_o,aH:()=>Mn,aL:()=>Mu,aO:()=>xi,aa:()=>Wp,ab:()=>Oy,ac:()=>qp,ad:()=>Ry,ae:()=>Yc,af:()=>ky,ai:()=>_I,aj:()=>ux,ak:()=>Ly,an:()=>ih,ao:()=>Au,aq:()=>yh,ar:()=>tl,as:()=>Ue,at:()=>Ze,au:()=>me,av:()=>ee,aw:()=>Oi,ax:()=>Ph,ay:()=>Zt,az:()=>he,b:()=>Ch,c:()=>xr,d:()=>ol,e:()=>zo,f:()=>ul,g:()=>ii,h:()=>dn,i:()=>ps,j:()=>Qy,k:()=>Ws,l:()=>fg,m:()=>Na,o:()=>Jo,p:()=>Fe,r:()=>dt,s:()=>zr,u:()=>Gr});var d=k(5861),V=k(9058),F=k(7592),te=k(7582),ge=k(7879),Ee=k(4537);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Me=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Je=function Pe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Te=new ge.Yd("@firebase/auth");function at(C,...m){Te.logLevel<=ge.in.ERROR&&Te.error(`Auth (${F.SDK_VERSION}): ${C}`,...m)}function ee(C,...m){throw Re(C,...m)}function he(C,...m){return Re(C,...m)}function re(C,m,_){const E=Object.assign(Object.assign({},Je()),{[m]:_});return new V.LL("auth","Firebase",E).create(m,{appName:C.name})}function fe(C,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&ee(C,"argument-error"),re(C,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Re(C,...m){if("string"!=typeof C){const _=m[0],E=[...m.slice(1)];return E[0]&&(E[0].appName=C.name),C._errorFactory.create(_,...E)}return ve.create(C,...m)}function B(C,m,..._){if(!C)throw Re(m,..._)}function we(C){const m="INTERNAL ASSERTION FAILED: "+C;throw at(m),new Error(m)}function Ue(C,m){C||we(m)}function ut(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Xt(){return"http:"===kn()||"https:"===kn()}function kn(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class ln{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ue(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function wn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xt()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kr(C,m){Ue(C.emulator,"Emulator should always be set here");const{url:_}=C.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class ie{static initialize(m,_,E){this.fetchImpl=m,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ue={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ce=new ln(3e4,6e4);function se(C,m){return C.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:C.tenantId}):m}function pe(C,m,_,E){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,d.Z)(function*(C,m,_,E,S={}){return Qe(C,S,(0,d.Z)(function*(){let P={},Z={};E&&("GET"===m?Z=E:P={body:JSON.stringify(E)});const oe=(0,V.xO)(Object.assign({key:C.config.apiKey},Z)).slice(1),Le=yield C._getAdditionalHeaders();return Le["Content-Type"]="application/json",C.languageCode&&(Le["X-Firebase-Locale"]=C.languageCode),ie.fetch()(qt(C,C.config.apiHost,_,oe),Object.assign({method:m,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Qe(C,m,_){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,d.Z)(function*(C,m,_){C._canInitEmulator=!1;const E=Object.assign(Object.assign({},ue),m);try{const S=new pt(C),P=yield Promise.race([_(),S.promise]);S.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw tn(C,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const oe=P.ok?Z.errorMessage:Z.error.message,[Le,$e]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw tn(C,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Le)throw tn(C,"email-already-in-use",Z);if("USER_DISABLED"===Le)throw tn(C,"user-disabled",Z);const rt=E[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw re(C,rt,$e);ee(C,rt)}}catch(S){if(S instanceof V.ZR)throw S;ee(C,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function en(C,m,_,E){return ft.apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(C,m,_,E,S={}){const P=yield pe(C,m,_,E,S);return"mfaPendingCredential"in P&&ee(C,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function qt(C,m,_,E){const S=`${m}${_}?${E}`;return C.config.emulator?kr(C.config,S):`${C.config.apiScheme}://${S}`}class pt{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(he(this.auth,"network-request-failed")),ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tn(C,m,_){const E={appName:C.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const S=he(C,m,E);return S.customData._tokenResponse=_,S}function In(){return(In=(0,d.Z)(function*(C,m){return pe(C,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Fn(){return(Fn=(0,d.Z)(function*(C,m){return pe(C,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ar(){return(Ar=(0,d.Z)(function*(C,m){return pe(C,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function or(C){if(C)try{const m=new Date(Number(C));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function ls(){return(ls=(0,d.Z)(function*(C,m=!1){const _=(0,V.m9)(C),E=yield _.getIdToken(m),S=_t(E);B(S&&S.exp&&S.auth_time&&S.iat,_.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,Z=P?.sign_in_provider;return{claims:S,token:E,authTime:or(ht(S.auth_time)),issuedAtTime:or(ht(S.iat)),expirationTime:or(ht(S.exp)),signInProvider:Z||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function ht(C){return 1e3*Number(C)}function _t(C){const[m,_,E]=C.split(".");if(void 0===m||void 0===_||void 0===E)return at("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,V.tV)(_);return S?JSON.parse(S):(at("Failed to decode base64 JWT payload"),null)}catch(S){return at("Caught error parsing JWT payload as JSON",S?.toString()),null}}function rn(C,m){return ei.apply(this,arguments)}function ei(){return(ei=(0,d.Z)(function*(C,m,_=!1){if(_)return m;try{return yield m}catch(E){throw E instanceof V.ZR&&function Lr({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}(E)&&C.auth.currentUser===C&&(yield C.auth.signOut()),E}})).apply(this,arguments)}class Rt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(m);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),E)}iteration(){var m=this;return(0,d.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class Sn{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=or(this.lastLoginAt),this.creationTime=or(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ds(C){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,d.Z)(function*(C){var m;const _=C.auth,E=yield C.getIdToken(),S=yield rn(C,function fi(C,m){return Ar.apply(this,arguments)}(_,{idToken:E}));B(S?.users.length,_,"internal-error");const P=S.users[0];C._notifyReloadListener(P);const Z=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?function Si(C){return C.map(m=>{var{providerId:_}=m,E=(0,te._T)(m,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(P.providerUserInfo):[],oe=function An(C,m){return[...C.filter(E=>!m.some(S=>S.providerId===E.providerId)),...m]}(C.providerData,Z),rt=!!C.isAnonymous&&!(C.email&&P.passwordHash||oe?.length),Ot={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:oe,metadata:new Sn(P.createdAt,P.lastLoginAt),isAnonymous:rt};Object.assign(C,Ot)}),Gt.apply(this,arguments)}function Ut(){return(Ut=(0,d.Z)(function*(C){const m=(0,V.m9)(C);yield ds(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function qi(){return(qi=(0,d.Z)(function*(C,m){const _=yield Qe(C,{},(0,d.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:S,apiKey:P}=C.config,Z=qt(C,S,"/v1/token",`key=${P}`),oe=yield C._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(Z,{method:"POST",headers:oe,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ar{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){B(m.idToken,"internal-error"),B(typeof m.idToken<"u","internal-error"),B(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function bt(C){const m=_t(C);return B(m,"internal-error"),B(typeof m.exp<"u","internal-error"),B(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var E=this;return(0,d.Z)(function*(){return B(!E.accessToken||E.refreshToken,m,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(m,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var E=this;return(0,d.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:Z}=yield function Wi(C,m){return qi.apply(this,arguments)}(m,_);E.updateTokensAndExpiration(S,P,Number(Z))})()}updateTokensAndExpiration(m,_,E){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(m,_){const{refreshToken:E,accessToken:S,expirationTime:P}=_,Z=new ar;return E&&(B("string"==typeof E,"internal-error",{appName:m}),Z.refreshToken=E),S&&(B("string"==typeof S,"internal-error",{appName:m}),Z.accessToken=S),P&&(B("number"==typeof P,"internal-error",{appName:m}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new ar,this.toJSON())}_performRefresh(){return we("not implemented")}}function He(C,m){B("string"==typeof C||typeof C>"u","internal-error",{appName:m})}class _e{constructor(m){var{uid:_,auth:E,stsTokenManager:S}=m,P=(0,te._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Sn(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,d.Z)(function*(){const E=yield rn(_,_.stsTokenManager.getToken(_.auth,m));return B(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(m){return function Fr(C){return ls.apply(this,arguments)}(this,m)}reload(){return function so(C){return Ut.apply(this,arguments)}(this)}_assign(m){this!==m&&(B(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new _e(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var E=this;return(0,d.Z)(function*(){let S=!1;m.idToken&&m.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(m),S=!0),_&&(yield ds(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var m=this;return(0,d.Z)(function*(){const _=yield m.getIdToken();return yield rn(m,function Dn(C,m){return In.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var E,S,P,Z,oe,Le,$e,rt;const Ot=null!==(E=_.displayName)&&void 0!==E?E:void 0,Pr=null!==(S=_.email)&&void 0!==S?S:void 0,Ni=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,qs=null!==(Z=_.photoURL)&&void 0!==Z?Z:void 0,Tg=null!==(oe=_.tenantId)&&void 0!==oe?oe:void 0,ju=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,Xo=null!==($e=_.createdAt)&&void 0!==$e?$e:void 0,ea=null!==(rt=_.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:vl,emailVerified:$u,isAnonymous:Ri,providerData:Fa,stsTokenManager:Zs}=_;B(vl&&Zs,m,"internal-error");const Hu=ar.fromJSON(this.name,Zs);B("string"==typeof vl,m,"internal-error"),He(Ot,m.name),He(Pr,m.name),B("boolean"==typeof $u,m,"internal-error"),B("boolean"==typeof Ri,m,"internal-error"),He(Ni,m.name),He(qs,m.name),He(Tg,m.name),He(ju,m.name),He(Xo,m.name),He(ea,m.name);const bo=new _e({uid:vl,auth:m,email:Pr,emailVerified:$u,displayName:Ot,isAnonymous:Ri,photoURL:qs,phoneNumber:Ni,tenantId:Tg,stsTokenManager:Hu,createdAt:Xo,lastLoginAt:ea});return Fa&&Array.isArray(Fa)&&(bo.providerData=Fa.map(wl=>Object.assign({},wl))),ju&&(bo._redirectEventId=ju),bo}static _fromIdTokenResponse(m,_,E=!1){return(0,d.Z)(function*(){const S=new ar;S.updateFromServerResponse(_);const P=new _e({uid:_.localId,auth:m,stsTokenManager:S,isAnonymous:E});return yield ds(P),P})()}}const Xe=new Map;function ot(C){Ue(C instanceof Function,"Expected a class definition");let m=Xe.get(C);return m?(Ue(m instanceof C,"Instance stored in cache mismatched with class"),m):(m=new C,Xe.set(C,m),m)}const Vt=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,E){var S=this;return(0,d.Z)(function*(){S.storage[_]=E})()}_get(_){var E=this;return(0,d.Z)(function*(){const S=E.storage[_];return void 0===S?null:S})()}_remove(_){var E=this;return(0,d.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return C.type="NONE",C})();function Wn(C,m,_){return`firebase:${C}:${m}:${_}`}class H{constructor(m,_,E){this.persistence=m,this.auth=_,this.userKey=E;const{config:S,name:P}=this.auth;this.fullUserKey=Wn(this.userKey,S.apiKey,P),this.fullPersistenceKey=Wn("persistence",S.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,d.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?_e._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,d.Z)(function*(){if(_.persistence===m)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,E="authUser"){return(0,d.Z)(function*(){if(!_.length)return new H(ot(Vt),m,E);const S=(yield Promise.all(_.map(function(){var $e=(0,d.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return $e.apply(this,arguments)}}()))).filter($e=>$e);let P=S[0]||ot(Vt);const Z=Wn(E,m.config.apiKey,m.name);let oe=null;for(const $e of _)try{const rt=yield $e._get(Z);if(rt){const Ot=_e._fromJSON(m,rt);$e!==P&&(oe=Ot),P=$e;break}}catch{}const Le=S.filter($e=>$e._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],oe&&(yield P._set(Z,oe.toJSON())),yield Promise.all(_.map(function(){var $e=(0,d.Z)(function*(rt){if(rt!==P)try{yield rt._remove(Z)}catch{}});return function(rt){return $e.apply(this,arguments)}}())),new H(P,m,E)):new H(P,m,E)})()}}function j(C){const m=C.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(K(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Be(m))return"Blackberry";if(vt(m))return"Webos";if(N(m))return"Safari";if((m.includes("chrome/")||x(m))&&!m.includes("edge/"))return"Chrome";if(me(m))return"Android";{const E=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function O(C=(0,V.z$)()){return/firefox\//i.test(C)}function N(C=(0,V.z$)()){const m=C.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function x(C=(0,V.z$)()){return/crios\//i.test(C)}function K(C=(0,V.z$)()){return/iemobile/i.test(C)}function me(C=(0,V.z$)()){return/android/i.test(C)}function Be(C=(0,V.z$)()){return/blackberry/i.test(C)}function vt(C=(0,V.z$)()){return/webos/i.test(C)}function Ze(C=(0,V.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function Zt(C=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}function xt(C=(0,V.z$)()){return Ze(C)||me(C)||vt(C)||Be(C)||/windows phone/i.test(C)||K(C)}function _u(C,m=[]){let _;switch(C){case"Browser":_=j((0,V.z$)());break;case"Worker":_=`${j((0,V.z$)())}-${C}`;break;default:_=C}const E=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${F.SDK_VERSION}/${E}`}function oo(){return(oo=(0,d.Z)(function*(C){return(yield pe(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ms(C,m){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,d.Z)(function*(C,m){return pe(C,"GET","/v2/recaptchaConfig",se(C,m))})).apply(this,arguments)}function Wt(C){return void 0!==C&&void 0!==C.getResponse}function jo(C){return void 0!==C&&void 0!==C.enterprise}class _a{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Fc(C){return new Promise((m,_)=>{const E=document.createElement("script");E.setAttribute("src",C),E.onload=m,E.onerror=S=>{const P=he("internal-error");P.customData=S,_(P)},E.type="text/javascript",E.charset="UTF-8",function kc(){var C,m;return null!==(m=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==m?m:document}().appendChild(E)})}function xs(C){return`__${C}${Math.floor(1e6*Math.random())}`}class yu{constructor(m){this.type="recaptcha-enterprise",this.auth=Mn(m)}verify(m="verify",_=!1){var E=this;return(0,d.Z)(function*(){function P(){return P=(0,d.Z)(function*(oe){if(!_){if(null==oe.tenantId&&null!=oe._agentRecaptchaConfig)return oe._agentRecaptchaConfig.siteKey;if(null!=oe.tenantId&&void 0!==oe._tenantRecaptchaConfigs[oe.tenantId])return oe._tenantRecaptchaConfigs[oe.tenantId].siteKey}return new Promise(function(){var Le=(0,d.Z)(function*($e,rt){Ms(oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ot=>{if(void 0!==Ot.recaptchaKey){const Pr=new _a(Ot);return null==oe.tenantId?oe._agentRecaptchaConfig=Pr:oe._tenantRecaptchaConfigs[oe.tenantId]=Pr,$e(Pr.siteKey)}rt(new Error("recaptcha Enterprise site key undefined"))}).catch(Ot=>{rt(Ot)})});return function($e,rt){return Le.apply(this,arguments)}}())}),P.apply(this,arguments)}function Z(oe,Le,$e){const rt=window.grecaptcha;jo(rt)?rt.enterprise.ready(()=>{rt.enterprise.execute(oe,{action:m}).then(Ot=>{Le(Ot)}).catch(()=>{Le("NO_RECAPTCHA")})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((oe,Le)=>{(function S(oe){return P.apply(this,arguments)})(E.auth).then($e=>{if(!_&&jo(window.grecaptcha))Z($e,oe,Le);else{if(typeof window>"u")return void Le(new Error("RecaptchaVerifier is only supported in browser"));Fc("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{Z($e,oe,Le)}).catch(rt=>{Le(rt)})}}).catch($e=>{Le($e)})})})()}}function Ps(C,m,_){return vu.apply(this,arguments)}function vu(){return(vu=(0,d.Z)(function*(C,m,_,E=!1){const S=new yu(C);let P;try{P=yield S.verify(_)}catch{P=yield S.verify(_,!0)}const Z=Object.assign({},m);return Object.assign(Z,E?{captchaResp:P}:{captchaResponse:P}),Object.assign(Z,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Z,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Z})).apply(this,arguments)}class wu{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const E=P=>new Promise((Z,oe)=>{try{Z(m(P))}catch(Le){oe(Le)}});E.onAbort=_,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===m)return;const E=[];try{for(const S of _.queue)yield S(m),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const P of E)try{P()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Uc{constructor(m,_,E,S){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=E,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yy(this),this.idTokenSubscription=new yy(this),this.beforeStateQueue=new wu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(m,_){var E=this;return _&&(this._popupRedirectResolver=ot(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var S,P;if(!E._deleted&&(E.persistenceManager=yield H.create(E,m),!E._deleted)){if(null!==(S=E._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,d.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,d.Z)(function*(){var E;const S=yield _.assertedPersistence.getCurrentUser();let P=S,Z=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const oe=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,Le=P?._redirectEventId,$e=yield _.tryRedirectSignIn(m);(!oe||oe===Le)&&$e?.user&&(P=$e.user,Z=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield _.beforeStateQueue.runMiddleware(P)}catch(oe){P=S,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(oe))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return B(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,d.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,d.Z)(function*(){try{yield ds(m)}catch(E){if("auth/network-request-failed"!==E?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function En(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var m=this;return(0,d.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,d.Z)(function*(){const E=m?(0,V.m9)(m):null;return E&&B(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(m,_=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return m&&B(E.tenantId===m.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(m)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(m),E.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,d.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(ot(m))}))}initializeRecaptchaConfig(){var m=this;return(0,d.Z)(function*(){const _=yield Ms(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new _a(_);null==m.tenantId?m._agentRecaptchaConfig=E:m._tenantRecaptchaConfigs[m.tenantId]=E,E.emailPasswordEnabled&&new yu(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new V.LL("auth","Firebase",m())}onAuthStateChanged(m,_,E){return this.registerStateListener(this.authStateSubscription,m,_,E)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,E){return this.registerStateListener(this.idTokenSubscription,m,_,E)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var E=this;return(0,d.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(_);return null===m?S.removeCurrentUser():S.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const E=m&&ot(m)||_._popupRedirectResolver;B(E,_,"argument-error"),_.redirectPersistenceManager=yield H.create(_,[ot(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,d.Z)(function*(){var E,S;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===m?_._currentUser:(null===(S=_.redirectUser)||void 0===S?void 0:S._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,d.Z)(function*(){if(m===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,E,S){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return B(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,E,S):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=_u(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,d.Z)(function*(){var _;const E={"X-Client-Version":m.clientVersion};m.app.options.appId&&(E["X-Firebase-gmpid"]=m.app.options.appId);const S=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();S&&(E["X-Firebase-Client"]=S);const P=yield m._getAppCheckToken();return P&&(E["X-Firebase-AppCheck"]=P),E})()}_getAppCheckToken(){var m=this;return(0,d.Z)(function*(){var _;const E=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return E?.error&&function tt(C,...m){Te.logLevel<=ge.in.WARN&&Te.warn(`Auth (${F.SDK_VERSION}): ${C}`,...m)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Mn(C){return(0,V.m9)(C)}class yy{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zd(C,m,_){const E=Mn(C);B(E._canInitEmulator,E,"emulator-config-failed"),B(/^https?:\/\//.test(m),E,"invalid-emulator-scheme");const S=!!_?.disableWarnings,P=ti(m),{host:Z,port:oe}=function Kd(C){const m=ti(C),_=/(\/\/)?([^?#/]+)/.exec(C.substr(m.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const P=S[1];return{host:P,port:Yd(E.substr(P.length+1))}}{const[P,Z]=E.split(":");return{host:P,port:Yd(Z)}}}(m);E.config.emulator={url:`${P}//${Z}${null===oe?"":`:${oe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Z,port:oe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function wy(){function C(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}function ti(C){const m=C.indexOf(":");return m<0?"":C.substr(0,m+1)}function Yd(C){if(!C)return null;const m=Number(C);return isNaN(m)?null:m}class Cu{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return we("not implemented")}_getIdTokenResponse(m){return we("not implemented")}_linkToIdToken(m,_){return we("not implemented")}_getReauthenticationResolver(m){return we("not implemented")}}function Qd(C,m){return Up.apply(this,arguments)}function Up(){return(Up=(0,d.Z)(function*(C,m){return pe(C,"POST","/v1/accounts:resetPassword",se(C,m))})).apply(this,arguments)}function Vp(C,m){return Bp.apply(this,arguments)}function Bp(){return(Bp=(0,d.Z)(function*(C,m){return pe(C,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function pi(){return(pi=(0,d.Z)(function*(C,m){return pe(C,"POST","/v1/accounts:update",se(C,m))})).apply(this,arguments)}function Vc(C,m){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithPassword",se(C,m))})).apply(this,arguments)}function Bc(C,m){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,d.Z)(function*(C,m){return pe(C,"POST","/v1/accounts:sendOobCode",se(C,m))})).apply(this,arguments)}function eh(){return(eh=(0,d.Z)(function*(C,m){return Bc(C,m)})).apply(this,arguments)}function $c(C,m){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,d.Z)(function*(C,m){return Bc(C,m)})).apply(this,arguments)}function zc(C,m){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(C,m){return Bc(C,m)})).apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(C,m){return Bc(C,m)})).apply(this,arguments)}function Ur(){return(Ur=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithEmailLink",se(C,m))})).apply(this,arguments)}function Gc(){return(Gc=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithEmailLink",se(C,m))})).apply(this,arguments)}class ao extends Cu{constructor(m,_,E,S=null){super("password",E),this._email=m,this._password=_,this._tenantId=S}static _fromEmailAndPassword(m,_){return new ao(m,_,"password")}static _fromEmailAndCode(m,_,E=null){return new ao(m,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,d.Z)(function*(){var E;switch(_.signInMethod){case"password":const S={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=m._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const P=yield Ps(m,S,"signInWithPassword");return Vc(m,P)}return Vc(m,S).catch(function(){var P=(0,d.Z)(function*(Z){if("auth/missing-recaptcha-token"===Z.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const oe=yield Ps(m,S,"signInWithPassword");return Vc(m,oe)}return Promise.reject(Z)});return function(Z){return P.apply(this,arguments)}}());case"emailLink":return function va(C,m){return Ur.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:ee(m,"internal-error")}})()}_linkToIdToken(m,_){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return Vp(m,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function jp(C,m){return Gc.apply(this,arguments)}(m,{idToken:_,email:E._email,oobCode:E._password});default:ee(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Os(C,m){return th.apply(this,arguments)}function th(){return(th=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithIdp",se(C,m))})).apply(this,arguments)}class je extends Cu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new je(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):ee("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:S}=_,P=(0,te._T)(_,["providerId","signInMethod"]);if(!E||!S)return null;const Z=new je(E,S);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(m){return Os(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,Os(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Os(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,V.xO)(_)}return m}}function fn(){return(fn=(0,d.Z)(function*(C,m){return pe(C,"POST","/v1/accounts:sendVerificationCode",se(C,m))})).apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithPhoneNumber",se(C,m))})).apply(this,arguments)}function $o(){return($o=(0,d.Z)(function*(C,m){const _=yield en(C,"POST","/v1/accounts:signInWithPhoneNumber",se(C,m));if(_.temporaryProof)throw tn(C,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Un={USER_NOT_FOUND:"user-not-found"};function uo(){return(uo=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithPhoneNumber",se(C,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Un)})).apply(this,arguments)}class gt extends Cu{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new gt({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new gt({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function gi(C,m){return Ns.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function _r(C,m){return $o.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Rs(C,m){return uo.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:E,verificationCode:S}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:E,code:S}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:E,phoneNumber:S,temporaryProof:P}=m;return E||_||S||P?new gt({verificationId:_,verificationCode:E,phoneNumber:S,temporaryProof:P}):null}}class mi{constructor(m){var _,E,S,P,Z,oe;const Le=(0,V.zd)((0,V.pd)(m)),$e=null!==(_=Le.apiKey)&&void 0!==_?_:null,rt=null!==(E=Le.oobCode)&&void 0!==E?E:null,Ot=function Eu(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Le.mode)&&void 0!==S?S:null);B($e&&rt&&Ot,"argument-error"),this.apiKey=$e,this.operation=Ot,this.code=rt,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Le.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(m){const _=function Cy(C){const m=(0,V.zd)((0,V.pd)(C)).link,_=m?(0,V.zd)((0,V.pd)(m)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(C)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||_||m||C}(m);try{return new mi(_)}catch{return null}}}let wa=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(_,E){return ao._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const S=mi.parseLink(E);return B(S,"argument-error"),ao._fromEmailAndCode(_,S.code,S.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class _i{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Vr extends _i{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class ks extends Vr{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return B("providerId"in _&&"signInMethod"in _,"argument-error"),je._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return B(m.idToken||m.accessToken,"argument-error"),je._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return ks.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return ks.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:P,nonce:Z,providerId:oe}=m;if(!E&&!S&&!_&&!P||!oe)return null;try{return new ks(oe)._credential({idToken:_,accessToken:E,nonce:Z,pendingToken:P})}catch{return null}}}let $p=(()=>{class C extends Vr{constructor(){super("facebook.com")}static credential(_){return je._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),Ho=(()=>{class C extends Vr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return je._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:S}=_;if(!E&&!S)return null;try{return C.credential(E,S)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),hs=(()=>{class C extends Vr{constructor(){super("github.com")}static credential(_){return je._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class xi extends Cu{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Os(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,Os(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Os(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:S,pendingToken:P}=_;return E&&S&&P&&E===S?new xi(E,P):null}static _create(m,_){return new xi(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class nh extends _i{constructor(m){B(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return nh.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return nh.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=xi.fromJSON(m);return B(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:E}=m;if(!_||!E)return null;try{return xi._create(E,_)}catch{return null}}}let rh=(()=>{class C extends Vr{constructor(){super("twitter.com")}static credential(_,E){return je._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=_;if(!E||!S)return null;try{return C.credential(E,S)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Iu(C,m){return Br.apply(this,arguments)}function Br(){return(Br=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signUp",se(C,m))})).apply(this,arguments)}class jr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,E,S=!1){return(0,d.Z)(function*(){const P=yield _e._fromIdTokenResponse(m,E,S),Z=Ca(E);return new jr({user:P,providerId:Z,_tokenResponse:E,operationType:_})})()}static _forOperation(m,_,E){return(0,d.Z)(function*(){yield m._updateTokensIfNecessary(E,!0);const S=Ca(E);return new jr({user:m,providerId:S,_tokenResponse:E,operationType:_})})()}}function Ca(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function bu(C){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,d.Z)(function*(C){var m;const _=Mn(C);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new jr({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield Iu(_,{returnSecureToken:!0}),S=yield jr._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class Hp extends V.ZR{constructor(m,_,E,S){var P;super(_.code,_.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,Hp.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(m,_,E,S){return new Hp(m,_,E,S)}}function ni(C,m,_,E){return("reauthenticate"===m?_._getReauthenticationResolver(C):_._getIdTokenResponse(C)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Hp._fromErrorAndOperation(C,P,m,E):P})}function Mr(C){return new Set(C.map(({providerId:m})=>m).filter(m=>!!m))}function ih(C,m){return Fs.apply(this,arguments)}function Fs(){return Fs=(0,d.Z)(function*(C,m){const _=(0,V.m9)(C);yield Ea(!0,_,m);const{providerUserInfo:E}=yield function nn(C,m){return Fn.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),S=Mr(E||[]);return _.providerData=_.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Fs.apply(this,arguments)}function Tu(C,m){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,d.Z)(function*(C,m,_=!1){const E=yield rn(C,m._linkToIdToken(C.auth,yield C.getIdToken()),_);return jr._forOperation(C,"link",E)})).apply(this,arguments)}function Ea(C,m,_){return sh.apply(this,arguments)}function sh(){return(sh=(0,d.Z)(function*(C,m,_){yield ds(m);const S=!1===C?"provider-already-linked":"no-such-provider";B(Mr(m.providerData).has(_)===C,m.auth,S)})).apply(this,arguments)}function zp(C,m){return Ey.apply(this,arguments)}function Ey(){return(Ey=(0,d.Z)(function*(C,m,_=!1){const{auth:E}=C,S="reauthenticate";try{const P=yield rn(C,ni(E,S,m,C),_);B(P.idToken,E,"internal-error");const Z=_t(P.idToken);B(Z,E,"internal-error");const{sub:oe}=Z;return B(C.uid===oe,E,"user-mismatch"),jr._forOperation(C,S,P)}catch(P){throw"auth/user-not-found"===P?.code&&ee(E,"user-mismatch"),P}})).apply(this,arguments)}function Iy(C,m){return oh.apply(this,arguments)}function oh(){return(oh=(0,d.Z)(function*(C,m,_=!1){const E="signIn",S=yield ni(C,E,m),P=yield jr._fromIdTokenResponse(C,E,S);return _||(yield C._updateCurrentUser(P.user)),P})).apply(this,arguments)}function ah(C,m){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,d.Z)(function*(C,m){return Iy(Mn(C),m)})).apply(this,arguments)}function gI(C,m){return by.apply(this,arguments)}function by(){return(by=(0,d.Z)(function*(C,m){const _=(0,V.m9)(C);return yield Ea(!1,_,m.providerId),Tu(_,m)})).apply(this,arguments)}function xn(C,m){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,d.Z)(function*(C,m){return zp((0,V.m9)(C),m)})).apply(this,arguments)}function Dy(){return(Dy=(0,d.Z)(function*(C,m){return en(C,"POST","/v1/accounts:signInWithCustomToken",se(C,m))})).apply(this,arguments)}function ox(C,m){return Sy.apply(this,arguments)}function Sy(){return Sy=(0,d.Z)(function*(C,m){const _=Mn(C),E=yield function sx(C,m){return Dy.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),S=yield jr._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(S.user),S}),Sy.apply(this,arguments)}class uh{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Ay._fromServerResponse(m,_):"totpInfo"in _?qc._fromServerResponse(m,_):ee(m,"internal-error")}}class Ay extends uh{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Ay(_)}}class qc extends uh{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new qc(_)}}function Ia(C,m,_){var E;B((null===(E=_.url)||void 0===E?void 0:E.length)>0,C,"invalid-continue-uri"),B(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(B(_.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(B(_.android.packageName.length>0,C,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function ax(C,m,_){return My.apply(this,arguments)}function My(){return My=(0,d.Z)(function*(C,m,_){var E;const S=Mn(C),P={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Z=yield Ps(S,P,"getOobCode",!0);_&&Ia(S,Z,_),yield $c(S,Z)}else _&&Ia(S,P,_),yield $c(S,P).catch(function(){var Z=(0,d.Z)(function*(oe){if("auth/missing-recaptcha-token"!==oe.code)return Promise.reject(oe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Le=yield Ps(S,P,"getOobCode",!0);_&&Ia(S,Le,_),yield $c(S,Le)}});return function(oe){return Z.apply(this,arguments)}}())}),My.apply(this,arguments)}function xy(C,m,_){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,d.Z)(function*(C,m,_){yield Qd((0,V.m9)(C),{oobCode:m,newPassword:_})})).apply(this,arguments)}function co(C,m){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,d.Z)(function*(C,m){yield function pI(C,m){return pi.apply(this,arguments)}((0,V.m9)(C),{oobCode:m})}),Zc.apply(this,arguments)}function Du(C,m){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(C,m){const _=(0,V.m9)(C),E=yield Qd(_,{oobCode:m}),S=E.requestType;switch(B(S,_,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(E.mfaInfo,_,"internal-error");default:B(E.email,_,"internal-error")}let P=null;return E.mfaInfo&&(P=uh._fromServerResponse(Mn(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function ch(C,m){return $r.apply(this,arguments)}function $r(){return($r=(0,d.Z)(function*(C,m){const{data:_}=yield Du((0,V.m9)(C),m);return _.email})).apply(this,arguments)}function lh(C,m,_){return dh.apply(this,arguments)}function dh(){return dh=(0,d.Z)(function*(C,m,_){var E;const S=Mn(C),P={returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"};let Z;if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const $e=yield Ps(S,P,"signUpPassword");Z=Iu(S,$e)}else Z=Iu(S,P).catch(function(){var $e=(0,d.Z)(function*(rt){if("auth/missing-recaptcha-token"===rt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Ot=yield Ps(S,P,"signUpPassword");return Iu(S,Ot)}return Promise.reject(rt)});return function(rt){return $e.apply(this,arguments)}}());const oe=yield Z.catch($e=>Promise.reject($e)),Le=yield jr._fromIdTokenResponse(S,"signIn",oe);return yield S._updateCurrentUser(Le.user),Le}),dh.apply(this,arguments)}function Py(C,m,_){return ah((0,V.m9)(C),wa.credential(m,_))}function Wp(C,m,_){return ba.apply(this,arguments)}function ba(){return ba=(0,d.Z)(function*(C,m,_){var E;const S=Mn(C),P={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function Z(oe,Le){B(Le.handleCodeInApp,S,"argument-error"),Le&&Ia(S,oe,Le)}if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const oe=yield Ps(S,P,"getOobCode",!0);Z(oe,_),yield zc(S,oe)}else Z(P,_),yield zc(S,P).catch(function(){var oe=(0,d.Z)(function*(Le){if("auth/missing-recaptcha-token"!==Le.code)return Promise.reject(Le);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield Ps(S,P,"getOobCode",!0);Z($e,_),yield zc(S,$e)}});return function(Le){return oe.apply(this,arguments)}}())}),ba.apply(this,arguments)}function Oy(C,m){const _=mi.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}function qp(C,m,_){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C),S=wa.credentialWithLink(m,_||ut());return B(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ah(E,S)})).apply(this,arguments)}function hh(){return(hh=(0,d.Z)(function*(C,m){return pe(C,"POST","/v1/accounts:createAuthUri",se(C,m))})).apply(this,arguments)}function Ry(C,m){return Su.apply(this,arguments)}function Su(){return Su=(0,d.Z)(function*(C,m){const E={identifier:m,continueUri:Xt()?ut():"http://localhost"},{signinMethods:S}=yield function Ny(C,m){return hh.apply(this,arguments)}((0,V.m9)(C),E);return S||[]}),Su.apply(this,arguments)}function Yc(C,m){return lo.apply(this,arguments)}function lo(){return lo=(0,d.Z)(function*(C,m){const _=(0,V.m9)(C),S={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};m&&Ia(_.auth,S,m);const{email:P}=yield function jc(C,m){return eh.apply(this,arguments)}(_.auth,S);P!==C.email&&(yield C.reload())}),lo.apply(this,arguments)}function ky(C,m,_){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:m};_&&Ia(E.auth,P,_);const{email:Z}=yield function gr(C,m){return mr.apply(this,arguments)}(E.auth,P);Z!==C.email&&(yield C.reload())}),Zp.apply(this,arguments)}function Fy(){return(Fy=(0,d.Z)(function*(C,m){return pe(C,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function _I(C,m){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,d.Z)(function*(C,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const E=(0,V.m9)(C),P={idToken:yield E.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},Z=yield rn(E,function mI(C,m){return Fy.apply(this,arguments)}(E.auth,P));E.displayName=Z.displayName||null,E.photoURL=Z.photoUrl||null;const oe=E.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=E.displayName,oe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Z)}),Kp.apply(this,arguments)}function ux(C,m){return fh((0,V.m9)(C),m,null)}function Ly(C,m){return fh((0,V.m9)(C),null,m)}function fh(C,m,_){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,d.Z)(function*(C,m,_){const{auth:E}=C,P={idToken:yield C.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const Z=yield rn(C,Vp(E,P));yield C._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Qc{constructor(m,_,E={}){this.isNewUser=m,this.providerId=_,this.profile=E}}class yI extends Qc{constructor(m,_,E,S){super(m,_,E),this.username=S}}class Jc extends Qc{constructor(m,_){super(m,"facebook.com",_)}}class Uy extends yI{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Jp extends Qc{constructor(m,_){super(m,"google.com",_)}}class ph extends yI{constructor(m,_,E){super(m,"twitter.com",_,E)}}function Au(C){const{user:m,_tokenResponse:_}=C;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Qp(C){var m,_;if(!C)return null;const{providerId:E}=C,S=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},P=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!E&&C?.idToken){const Z=null===(_=null===(m=_t(C.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(Z)return new Qc(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!E)return null;switch(E){case"facebook.com":return new Jc(P,S);case"github.com":return new Uy(P,S);case"google.com":return new Jp(P,S);case"twitter.com":return new ph(P,S,C.screenName||null);case"custom":case"anonymous":return new Qc(P,null);default:return new Qc(P,E,S)}}(_)}class Us{constructor(m,_,E){this.type=m,this.credential=_,this.auth=E}static _fromIdtoken(m,_){return new Us("enroll",m,_)}static _fromMfaPendingCredential(m){return new Us("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,E;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Us._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(E=m.multiFactorSession)&&void 0!==E&&E.idToken)return Us._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Ta{constructor(m,_,E){this.session=m,this.hints=_,this.signInResolver=E}static _fromError(m,_){const E=Mn(m),S=_.customData._serverResponse,P=(S.mfaInfo||[]).map(oe=>uh._fromServerResponse(E,oe));B(S.mfaPendingCredential,E,"internal-error");const Z=Us._fromMfaPendingCredential(S.mfaPendingCredential);return new Ta(Z,P,function(){var oe=(0,d.Z)(function*(Le){const $e=yield Le._process(E,Z);delete S.mfaInfo,delete S.mfaPendingCredential;const rt=Object.assign(Object.assign({},S),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(_.operationType){case"signIn":const Ot=yield jr._fromIdTokenResponse(E,_.operationType,rt);return yield E._updateCurrentUser(Ot.user),Ot;case"reauthenticate":return B(_.user,E,"internal-error"),jr._forOperation(_.user,_.operationType,rt);default:ee(E,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,d.Z)(function*(){return _.signInResolver(m)})()}}function yh(C,m){var _;const E=(0,V.m9)(C),S=m;return B(m.customData.operationType,E,"argument-error"),B(null===(_=S.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Ta._fromError(E,S)}class el{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>uh._fromServerResponse(m.auth,E)))})}static _fromUser(m){return new el(m)}getSession(){var m=this;return(0,d.Z)(function*(){return Us._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var E=this;return(0,d.Z)(function*(){const S=m,P=yield E.getSession(),Z=yield rn(E.user,S._process(E.user.auth,P,_));return yield E.user._updateTokensIfNecessary(Z),E.user.reload()})()}unenroll(m){var _=this;return(0,d.Z)(function*(){const E="string"==typeof m?m:m.uid,S=yield _.user.getIdToken();try{const P=yield rn(_.user,function eg(C,m){return pe(C,"POST","/v2/accounts/mfaEnrollment:withdraw",se(C,m))}(_.user.auth,{idToken:S,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Z})=>Z!==E),yield _.user._updateTokensIfNecessary(P),yield _.user.reload()}catch(P){throw P}})()}}const sn=new WeakMap;function tl(C){const m=(0,V.m9)(C);return sn.has(m)||sn.set(m,el._fromUser(m)),sn.get(m)}const Vs="__sak";class Hr{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Vs,"1"),this.storage.removeItem(Vs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ch=(()=>{class C extends Hr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function EI(){const C=(0,V.z$)();return N(C)||Ze(C)}()&&function Ai(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),P=this.localCache[E];S!==P&&_(E,P,S)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((oe,Le,$e)=>{this.notifyListeners(oe,$e)});const S=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(S);if(_.newValue!==oe)null!==_.newValue?this.storage.setItem(S,_.newValue):this.storage.removeItem(S);else if(this.localCache[S]===_.newValue&&!E)return}const P=()=>{const oe=this.storage.getItem(S);!E&&this.localCache[S]===oe||this.notifyListeners(S,oe)},Z=this.storage.getItem(S);!function hn(){return(0,V.w1)()&&10===document.documentMode}()||Z===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,E){this.localCache[_]=E;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var S=()=>super._set,P=this;return(0,d.Z)(function*(){yield S().call(P,_,E),P.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,S=this;return(0,d.Z)(function*(){const P=yield E().call(S,_);return S.localCache[_]=JSON.stringify(P),P})()}_remove(_){var E=()=>super._remove,S=this;return(0,d.Z)(function*(){yield E().call(S,_),delete S.localCache[_]})()}}return C.type="LOCAL",C})(),nl=(()=>{class C extends Hr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return C.type="SESSION",C})();let tg=(()=>{class C{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(P=>P.isListeningto(_));if(E)return E;const S=new C(_);return this.receivers.push(S),S}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,d.Z)(function*(){const S=_,{eventId:P,eventType:Z,data:oe}=S.data,Le=E.handlersMap[Z];if(!Le?.size)return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const $e=Array.from(Le).map(function(){var Ot=(0,d.Z)(function*(Pr){return Pr(S.origin,oe)});return function(Pr){return Ot.apply(this,arguments)}}()),rt=yield function ho(C){return Promise.all(C.map(function(){var m=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return m.apply(this,arguments)}}()))}($e);S.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:rt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function Mu(C="",m=10){let _="";for(let E=0;E<m;E++)_+=Math.floor(10*Math.random());return C+_}class Hy{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,E=50){var S=this;return(0,d.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,oe;return new Promise((Le,$e)=>{const rt=Mu("",20);P.port1.start();const Ot=setTimeout(()=>{$e(new Error("unsupported_event"))},E);oe={messageChannel:P,onMessage(Pr){const Ni=Pr;if(Ni.data.eventId===rt)switch(Ni.data.status){case"ack":clearTimeout(Ot),Z=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Le(Ni.data.response);break;default:clearTimeout(Ot),clearTimeout(Z),$e(new Error("invalid_response"))}}},S.handlers.add(oe),P.port1.addEventListener("message",oe.onMessage),S.target.postMessage({eventType:m,eventId:rt,data:_},[P.port2])}).finally(()=>{oe&&S.removeMessageHandler(oe)})})()}}function qn(){return window}function ng(){return typeof qn().WorkerGlobalScope<"u"&&"function"==typeof qn().importScripts}function rl(){return(rl=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ig="firebaseLocalStorageDb",Sa="firebaseLocalStorage",fo="fbase_key";class xu{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Ih(C,m){return C.transaction([Sa],m?"readwrite":"readonly").objectStore(Sa)}function sg(){const C=indexedDB.open(ig,1);return new Promise((m,_)=>{C.addEventListener("error",()=>{_(C.error)}),C.addEventListener("upgradeneeded",()=>{const E=C.result;try{E.createObjectStore(Sa,{keyPath:fo})}catch(S){_(S)}}),C.addEventListener("success",(0,d.Z)(function*(){const E=C.result;E.objectStoreNames.contains(Sa)?m(E):(E.close(),yield function Gy(){const C=indexedDB.deleteDatabase(ig);return new xu(C).toPromise()}(),m(yield sg()))}))})}function og(C,m,_){return ye.apply(this,arguments)}function ye(){return(ye=(0,d.Z)(function*(C,m,_){const E=Ih(C,!0).put({[fo]:m,value:_});return new xu(E).toPromise()})).apply(this,arguments)}function Ki(){return(Ki=(0,d.Z)(function*(C,m){const _=Ih(C,!1).get(m),E=yield new xu(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function bh(C,m){const _=Ih(C,!0).delete(m);return new xu(_).toPromise()}const ps=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield sg()),_.db})()}_withRetries(_){var E=this;return(0,d.Z)(function*(){let S=0;for(;;)try{const P=yield E._openDb();return yield _(P)}catch(P){if(S++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return ng()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=tg._getInstance(function rg(){return ng()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(S,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(S,P){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var E,S;if(_.activeServiceWorker=yield function yt(){return rl.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Hy(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(E=P[0])&&void 0!==E&&E.fulfilled&&null!==(S=P[0])&&void 0!==S&&S.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function bI(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield sg();return yield og(_,Vs,"1"),yield bh(_,Vs),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var S=this;return(0,d.Z)(function*(){return S._withPendingWrite((0,d.Z)(function*(){return yield S._withRetries(P=>og(P,_,E)),S.localCache[_]=E,S.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,d.Z)(function*(){const S=yield E._withRetries(P=>function Bt(C,m){return Ki.apply(this,arguments)}(P,_));return E.localCache[_]=S,S})()}_remove(_){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(S=>bh(S,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const E=yield _._withRetries(Z=>{const oe=Ih(Z,!1).getAll();return new xu(oe).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:Z,value:oe}of E)P.add(Z),JSON.stringify(_.localCache[Z])!==JSON.stringify(oe)&&(_.notifyListeners(Z,oe),S.push(Z));for(const Z of Object.keys(_.localCache))_.localCache[Z]&&!P.has(Z)&&(_.notifyListeners(Z,null),S.push(Z));return S})()}notifyListeners(_,E){this.localCache[_]=E;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})(),vr=1e12;class po{constructor(m){this.auth=m,this.counter=vr,this._widgets=new Map}render(m,_){const E=this.counter;return this._widgets.set(E,new Zy(m,this.auth.name,_||{})),this.counter++,E}reset(m){var _;const E=m||vr;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(m){var _;return(null===(_=this._widgets.get(m||vr))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,d.Z)(function*(){var E;return null===(E=_._widgets.get(m||vr))||void 0===E||E.execute(),""})()}}class Zy{constructor(m,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof m?document.getElementById(m):m;B(S,"argument-error",{appName:_}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ou(C){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<C;E++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const gs=xs("rcb"),TI=new ln(3e4,6e4);class lg{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=qn().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return B(function DI(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Wt(qn().grecaptcha)?Promise.resolve(qn().grecaptcha):new Promise((E,S)=>{const P=qn().setTimeout(()=>{S(he(m,"network-request-failed"))},TI.get());qn()[gs]=()=>{qn().clearTimeout(P),delete qn()[gs];const oe=qn().grecaptcha;if(!oe||!Wt(oe))return void S(he(m,"internal-error"));const Le=oe.render;oe.render=($e,rt)=>{const Ot=Le($e,rt);return this.counter++,Ot},this.hostLanguage=_,E(oe)},Fc(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:gs,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),S(he(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=qn().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class dg{load(m){return(0,d.Z)(function*(){return new po(m)})()}clearedOneInstance(){}}const Th="recaptcha",Ky={theme:"light",type:"image"};class hg{constructor(m,_=Object.assign({},Ky),E){this.parameters=_,this.type=Th,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(E),this.isInvisible="invisible"===this.parameters.size,B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof m?document.getElementById(m):m;B(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dg:new lg,this.validateStartingState()}verify(){var m=this;return(0,d.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),E=m.getAssertedRecaptcha();return E.getResponse(_)||new Promise(P=>{const Z=oe=>{oe&&(m.tokenChangeListeners.delete(Z),P(oe))};m.tokenChangeListeners.add(Z),m.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof m)m(_);else if("string"==typeof m){const E=qn()[m];"function"==typeof E&&E(_)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,d.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,d.Z)(function*(){B(Xt()&&!ng(),m.auth,"internal-error"),yield function SI(){let C=null;return new Promise(m=>{"complete"!==document.readyState?(C=()=>m(),window.addEventListener("load",C)):m()}).catch(m=>{throw C&&window.removeEventListener("load",C),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function As(C){return oo.apply(this,arguments)}(m.auth);B(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Dh{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=gt._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function zr(C,m,_){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(C,m,_){const E=Mn(C),S=yield sl(E,m,(0,V.m9)(_));return new Dh(S,P=>ah(E,P))})).apply(this,arguments)}function fg(C,m,_){return pn.apply(this,arguments)}function pn(){return(pn=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C);yield Ea(!1,E,"phone");const S=yield sl(E.auth,m,(0,V.m9)(_));return new Dh(S,P=>gI(E,P))})).apply(this,arguments)}function dt(C,m,_){return wr.apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C),S=yield sl(E.auth,m,(0,V.m9)(_));return new Dh(S,P=>xn(E,P))})).apply(this,arguments)}function sl(C,m,_){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,d.Z)(function*(C,m,_){var E;const S=yield _.verify();try{let P;if(B("string"==typeof S,C,"argument-error"),B(_.type===Th,C,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const Z=P.session;if("phoneNumber"in P)return B("enroll"===Z.type,C,"internal-error"),(yield function $y(C,m){return pe(C,"POST","/v2/accounts/mfaEnrollment:start",se(C,m))}(C,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{B("signin"===Z.type,C,"internal-error");const oe=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return B(oe,C,"missing-multi-factor-info"),(yield function ag(C,m){return pe(C,"POST","/v2/accounts/mfaSignIn:start",se(C,m))}(C,{mfaPendingCredential:Z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield function It(C,m){return fn.apply(this,arguments)}(C,{phoneNumber:P.phoneNumber,recaptchaToken:S});return Z}}finally{_._reset()}}),Sh.apply(this,arguments)}function Gr(C,m){return js.apply(this,arguments)}function js(){return(js=(0,d.Z)(function*(C,m){yield Tu((0,V.m9)(C),m)})).apply(this,arguments)}let Cn=(()=>{class C{constructor(_){this.providerId=C.PROVIDER_ID,this.auth=Mn(_)}verifyPhoneNumber(_,E){return sl(this.auth,_,(0,V.m9)(E))}static credential(_,E){return gt._fromVerification(_,E)}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:S}=_;return E&&S?gt._fromTokenResponse(E,S):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function go(C,m){return m?ot(m):(B(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class mo extends Cu{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Os(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Os(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Os(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Ct(C){return Iy(C.auth,new mo(C),C.bypassAuthState)}function Yy(C){const{auth:m,user:_}=C;return B(_,m,"internal-error"),zp(_,new mo(C),C.bypassAuthState)}function pg(C){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,d.Z)(function*(C){const{auth:m,user:_}=C;return B(_,m,"internal-error"),Tu(_,new mo(C),C.bypassAuthState)})).apply(this,arguments)}class $s{constructor(m,_,E,S,P=!1){this.auth=m,this.resolver=E,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,d.Z)(function*(E,S){m.pendingPromise={resolve:E,reject:S};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(E,S){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:P,tenantId:Z,error:oe,type:Le}=m;if(oe)return void _.reject(oe);const $e={auth:_.auth,requestUri:E,sessionId:S,tenantId:Z||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)($e))}catch(rt){_.reject(rt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Ct;case"linkViaPopup":case"linkViaRedirect":return pg;case"reauthViaPopup":case"reauthViaRedirect":return Yy;default:ee(this.auth,"internal-error")}}resolve(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hs=new ln(2e3,1e4);function xr(C,m,_){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(C,m,_){const E=Mn(C);fe(C,m,_i);const S=go(E,_);return new zs(E,"signInViaPopup",m,S).executeNotNull()})).apply(this,arguments)}function zo(C,m,_){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C);fe(E.auth,m,_i);const S=go(E.auth,_);return new zs(E.auth,"reauthViaPopup",m,S,E).executeNotNull()})).apply(this,arguments)}function ol(C,m,_){return al.apply(this,arguments)}function al(){return(al=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C);fe(E.auth,m,_i);const S=go(E.auth,_);return new zs(E.auth,"linkViaPopup",m,S,E).executeNotNull()})).apply(this,arguments)}let zs=(()=>{class C extends $s{constructor(_,E,S,P,Z){super(_,E,P,Z),this.provider=S,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const E=yield _.execute();return B(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,d.Z)(function*(){Ue(1===_.filter.length,"Popup operations only handle one event");const E=Mu();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(S=>{_.reject(S)}),_.resolver._isIframeWebStorageSupported(_.auth,S=>{S||_.reject(he(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(he(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,S;this.pollId=null!==(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(he(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Hs.get())};_()}}return C.currentPopupAction=null,C})();const Ru="pendingRedirect",ms=new Map;class Go extends $s{constructor(m,_,E=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,d.Z)(function*(){let E=ms.get(_.auth._key());if(!E){try{const P=(yield function ku(C,m){return Ah.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;E=()=>Promise.resolve(P)}catch(S){E=()=>Promise.reject(S)}ms.set(_.auth._key(),E)}return _.bypassAuthState||ms.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(E,m);if("unknown"!==m.type){if(m.eventId){const S=yield E.auth._redirectUserForId(m.eventId);if(S)return E.user=S,_().call(E,m);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Ah(){return(Ah=(0,d.Z)(function*(C,m){const _=Mh(m),E=Wr(C);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(_));return yield E._remove(_),S})).apply(this,arguments)}function Fu(C,m){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,d.Z)(function*(C,m){return Wr(C)._set(Mh(m),"true")})).apply(this,arguments)}function _o(){ms.clear()}function Lu(C,m){ms.set(C._key(),m)}function Wr(C){return ot(C._redirectPersistence)}function Mh(C){return Wn(Ru,C.config.apiKey,C.name)}function ul(C,m,_){return function yi(C,m,_){return Vn.apply(this,arguments)}(C,m,_)}function Vn(){return(Vn=(0,d.Z)(function*(C,m,_){const E=Mn(C);fe(C,m,_i),yield E._initializationPromise;const S=go(E,_);return yield Fu(S,E),S._openRedirect(E,m,"signInViaRedirect")})).apply(this,arguments)}function dn(C,m,_){return function xa(C,m,_){return Cr.apply(this,arguments)}(C,m,_)}function Cr(){return(Cr=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C);fe(E.auth,m,_i),yield E.auth._initializationPromise;const S=go(E.auth,_);yield Fu(S,E.auth);const P=yield Yi(E);return S._openRedirect(E.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function ii(C,m,_){return function Uu(C,m,_){return Vu.apply(this,arguments)}(C,m,_)}function Vu(){return(Vu=(0,d.Z)(function*(C,m,_){const E=(0,V.m9)(C);fe(E.auth,m,_i),yield E.auth._initializationPromise;const S=go(E.auth,_);yield Ea(!1,E,m.providerId),yield Fu(S,E.auth);const P=yield Yi(E);return S._openRedirect(E.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function Qy(C,m){return er.apply(this,arguments)}function er(){return(er=(0,d.Z)(function*(C,m){return yield Mn(C)._initializationPromise,yo(C,m,!1)})).apply(this,arguments)}function yo(C,m){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(C,m,_=!1){const E=Mn(C),S=go(E,m),Z=yield new Go(E,S,_).execute();return Z&&!_&&(delete Z.user._redirectEventId,yield E._persistUserIfCurrent(Z.user),yield E._setRedirectUser(null,m)),Z})).apply(this,arguments)}function Yi(C){return cl.apply(this,arguments)}function cl(){return(cl=(0,d.Z)(function*(C){const m=Mu(`${C.uid}:::`);return C._redirectEventId=m,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),m})).apply(this,arguments)}class Pa{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(m,E)&&(_=!0,this.sendToConsumer(m,E),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Zo(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xh(C);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var E;if(m.error&&!xh(m)){const S=(null===(E=m.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(he(this.auth,S))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const E=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&E}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gg(m))}saveEventToCache(m){this.cachedEventUids.add(gg(m)),this.lastProcessedEventTime=Date.now()}}function gg(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(m=>m).join("-")}function xh({type:C,error:m}){return"unknown"===C&&"auth/no-auth-event"===m?.code}function Ph(C){return ll.apply(this,arguments)}function ll(){return(ll=(0,d.Z)(function*(C,m={}){return pe(C,"GET","/v1/projects",m)})).apply(this,arguments)}const Tt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vo=/^https?/;function wo(){return(wo=(0,d.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:m}=yield Ph(C);for(const _ of m)try{if(mg(_))return}catch{}ee(C,"unauthorized-domain")})).apply(this,arguments)}function mg(C){const m=ut(),{protocol:_,hostname:E}=new URL(m);if(C.startsWith("chrome-extension://")){const Z=new URL(C);return""===Z.hostname&&""===E?"chrome-extension:"===_&&C.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&Z.hostname===E}if(!vo.test(_))return!1;if(Tt.test(C))return E===C;const S=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const _g=new ln(3e4,6e4);function qr(){const C=qn().___jsl;if(C?.H)for(const m of Object.keys(C.H))if(C.H[m].r=C.H[m].r||[],C.H[m].L=C.H[m].L||[],C.H[m].r=[...C.H[m].L],C.CP)for(let _=0;_<C.CP.length;_++)C.CP[_]=null}let tr=null;const vg=new ln(5e3,15e3),dl="__/auth/iframe",wg="emulator/auth/iframe",Cg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oa(C){const m=C.config;B(m.authDomain,C,"auth-domain-config-required");const _=m.emulator?kr(m,wg):`https://${C.config.authDomain}/${dl}`,E={apiKey:m.apiKey,appName:C.name,v:F.SDK_VERSION},S=hl.get(C.config.apiHost);S&&(E.eid=S);const P=C._getFrameworks();return P.length&&(E.fw=P.join(",")),`${_}?${(0,V.xO)(E).slice(1)}`}function Gs(){return Gs=(0,d.Z)(function*(C){const m=yield function Co(C){return tr=tr||function yg(C){return new Promise((m,_)=>{var E,S,P;function Z(){qr(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{qr(),_(he(C,"network-request-failed"))},timeout:_g.get()})}if(null!==(S=null===(E=qn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==S&&S.Iframe)m(gapi.iframes.getContext());else{if(null===(P=qn().gapi)||void 0===P||!P.load){const oe=xs("iframefcb");return qn()[oe]=()=>{gapi.load?Z():_(he(C,"network-request-failed"))},Fc(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>_(Le))}Z()}}).catch(m=>{throw tr=null,m})}(C),tr}(C),_=qn().gapi;return B(_,C,"internal-error"),m.open({where:document.body,url:Oa(C),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cg,dontclear:!0},E=>new Promise(function(){var S=(0,d.Z)(function*(P,Z){yield E.restyle({setHideOnLeave:!1});const oe=he(C,"network-request-failed"),Le=qn().setTimeout(()=>{Z(oe)},vg.get());function $e(){qn().clearTimeout(Le),P(E)}E.ping($e).then($e,()=>{Z(oe)})});return function(P,Z){return S.apply(this,arguments)}}()))}),Gs.apply(this,arguments)}const Bu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qo{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Eg="__/auth/handler",MI="emulator/auth/handler",Oh=encodeURIComponent("fac");function Oi(C,m,_,E,S,P){return gl.apply(this,arguments)}function gl(){return(gl=(0,d.Z)(function*(C,m,_,E,S,P){B(C.config.authDomain,C,"auth-domain-config-required"),B(C.config.apiKey,C,"invalid-api-key");const Z={apiKey:C.config.apiKey,appName:C.name,authType:_,redirectUrl:E,v:F.SDK_VERSION,eventId:S};if(m instanceof _i){m.setDefaultLanguage(C.languageCode),Z.providerId=m.providerId||"",(0,V.xb)(m.getCustomParameters())||(Z.customParameters=JSON.stringify(m.getCustomParameters()));for(const[rt,Ot]of Object.entries(P||{}))Z[rt]=Ot}if(m instanceof Vr){const rt=m.getScopes().filter(Ot=>""!==Ot);rt.length>0&&(Z.scopes=rt.join(","))}C.tenantId&&(Z.tid=C.tenantId);const oe=Z;for(const rt of Object.keys(oe))void 0===oe[rt]&&delete oe[rt];const Le=yield C._getAppCheckToken(),$e=Le?`#${Oh}=${encodeURIComponent(Le)}`:"";return`${function ml({config:C}){return C.emulator?kr(C,MI):`https://${C.authDomain}/${Eg}`}(C)}?${(0,V.xO)(oe).slice(1)}${$e}`})).apply(this,arguments)}const Bn="webStorageSupport",Ws=class Nh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nl,this._completeRedirectFn=yo,this._overrideRedirectResult=Lu}_openPopup(m,_,E,S){var P=this;return(0,d.Z)(function*(){var Z;Ue(null===(Z=P.eventManagers[m._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const oe=yield Oi(m,_,E,ut(),S);return function AI(C,m,_,E=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),Z=Math.max((window.screen.availWidth-E)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},Bu),{width:E.toString(),height:S.toString(),top:P,left:Z}),$e=(0,V.z$)().toLowerCase();_&&(oe=x($e)?"_blank":_),O($e)&&(m=m||"http://localhost",Le.scrollbars="yes");const rt=Object.entries(Le).reduce((Pr,[Ni,qs])=>`${Pr}${Ni}=${qs},`,"");if(function wt(C=(0,V.z$)()){var m;return Ze(C)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}($e)&&"_self"!==oe)return function pl(C,m){const _=document.createElement("a");_.href=C,_.target=m;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(m||"",oe),new Qo(null);const Ot=window.open(m||"",oe,rt);B(Ot,C,"popup-blocked");try{Ot.focus()}catch{}return new Qo(Ot)}(m,oe,Mu())})()}_openRedirect(m,_,E,S){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(m),function Eh(C){qn().location.href=C}(yield Oi(m,_,E,ut(),S)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:S,promise:P}=this.eventManagers[_];return S?Promise.resolve(S):(Ue(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(m);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(m){var _=this;return(0,d.Z)(function*(){const E=yield function Yo(C){return Gs.apply(this,arguments)}(m),S=new Pa(m);return E.register("authEvent",P=>(B(P?.authEvent,m,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:S},_.iframes[m._key()]=E,S})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Bn,{type:Bn},S=>{var P;const Z=null===(P=S?.[0])||void 0===P?void 0:P[Bn];void 0!==Z&&_(!!Z),ee(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ko(C){return wo.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return xt()||N()||Ze()}};class Ig{constructor(m){this.factorId=m}_process(m,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,E);case"signin":return this._finalizeSignIn(m,_.credential);default:return we("unexpected MultiFactorSessionType")}}}class Zr extends Ig{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Zr(m)}_finalizeEnroll(m,_,E){return function vh(C,m){return pe(C,"POST","/v2/accounts/mfaEnrollment:finalize",se(C,m))}(m,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function ug(C,m){return pe(C,"POST","/v2/accounts/mfaSignIn:finalize",se(C,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Na=(()=>{class C{constructor(){}static assertion(_){return Zr._fromCredential(_)}}return C.FACTOR_ID="phone",C})();var ev="@firebase/auth";class xI{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(E=>{m(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const tv=(0,V.Pz)("authIdTokenMaxAge")||300;let yl=null;const nv=C=>function(){var m=(0,d.Z)(function*(_){const E=_&&(yield _.getIdTokenResult()),S=E&&((new Date).getTime()-Date.parse(E.issuedAtTime))/1e3;if(S&&S>tv)return;const P=E?.token;yl!==P&&(yl=P,yield fetch(C,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function Jo(C=(0,F.getApp)()){const m=(0,F._getProvider)(C,"auth");if(m.isInitialized())return m.getImmediate();const _=function Zi(C,m){const _=(0,F._getProvider)(C,"auth");if(_.isInitialized()){const S=_.getImmediate(),P=_.getOptions();if((0,V.vZ)(P,m??{}))return S;ee(S,"already-initialized")}return _.initialize({options:m})}(C,{popupRedirectResolver:Ws,persistence:[ps,Ch,nl]}),E=(0,V.Pz)("authTokenSyncURL");if(E){const P=nv(E);(function Xp(C,m,_){(0,V.m9)(C).beforeAuthStateChanged(m,_)})(_,P,()=>P(_.currentUser)),function Vy(C,m,_,E){(0,V.m9)(C).onIdTokenChanged(m,_,E)}(_,Z=>P(Z))}const S=(0,V.q4)("auth");return S&&Zd(_,`http://${S}`),_}!function Rh(C){(0,F._registerComponent)(new Ee.wA("auth",(m,{options:_})=>{const E=m.getProvider("app").getImmediate(),S=m.getProvider("heartbeat"),P=m.getProvider("app-check-internal"),{apiKey:Z,authDomain:oe}=E.options;B(Z&&!Z.includes(":"),"invalid-api-key",{appName:E.name});const Le={apiKey:Z,authDomain:oe,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_u(C)},$e=new Uc(E,S,P,Le);return function vy(C,m){const _=m?.persistence||[],E=(Array.isArray(_)?_:[_]).map(ot);m?.errorMap&&C._updateErrorMap(m.errorMap),C._initializeWithPersistence(E,m?.popupRedirectResolver)}($e,_),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,E)=>{m.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new Ee.wA("auth-internal",m=>{const _=Mn(m.getProvider("auth").getImmediate());return new xI(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(ev,"0.23.2",function vi(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,F.registerVersion)(ev,"0.23.2","esm2017")}("Browser")},9058:(st,Ce,k)=>{k.d(Ce,{$s:()=>ot,BH:()=>re,DV:()=>Fn,G6:()=>kr,GJ:()=>In,L:()=>De,LL:()=>Oe,P0:()=>at,Pz:()=>he,Sg:()=>fe,UG:()=>we,UI:()=>Ar,US:()=>Ee,Wl:()=>ft,Yr:()=>ln,ZB:()=>X,ZR:()=>pe,aH:()=>ee,b$:()=>Xt,cI:()=>en,dS:()=>Si,eu:()=>ue,g5:()=>F,gK:()=>Gt,gQ:()=>bt,h$:()=>Fe,hl:()=>ie,hu:()=>V,jU:()=>Ue,m9:()=>Wn,ne:()=>rn,p$:()=>G,pd:()=>_t,q4:()=>tt,r3:()=>nn,ru:()=>ut,tV:()=>U,uI:()=>B,ug:()=>Wi,vZ:()=>or,w1:()=>wn,w9:()=>Dn,xO:()=>ls,xb:()=>fi,z$:()=>Re,zI:()=>ce,zd:()=>ht});const d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},V=function(H,j){if(!H)throw F(j)},F=function(H){return new Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},te=function(H){const j=[];let O=0;for(let N=0;N<H.length;N++){let x=H.charCodeAt(N);x<128?j[O++]=x:x<2048?(j[O++]=x>>6|192,j[O++]=63&x|128):55296==(64512&x)&&N+1<H.length&&56320==(64512&H.charCodeAt(N+1))?(x=65536+((1023&x)<<10)+(1023&H.charCodeAt(++N)),j[O++]=x>>18|240,j[O++]=x>>12&63|128,j[O++]=x>>6&63|128,j[O++]=63&x|128):(j[O++]=x>>12|224,j[O++]=x>>6&63|128,j[O++]=63&x|128)}return j},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,j){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,N=[];for(let x=0;x<H.length;x+=3){const K=H[x],me=x+1<H.length,Be=me?H[x+1]:0,vt=x+2<H.length,Ze=vt?H[x+2]:0;let hn=(15&Be)<<2|Ze>>6,xt=63&Ze;vt||(xt=64,me||(hn=64)),N.push(O[K>>2],O[(3&K)<<4|Be>>4],O[hn],O[xt])}return N.join("")},encodeString(H,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(H):this.encodeByteArray(te(H),j)},decodeString(H,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(H):function(H){const j=[];let O=0,N=0;for(;O<H.length;){const x=H[O++];if(x<128)j[N++]=String.fromCharCode(x);else if(x>191&&x<224){const K=H[O++];j[N++]=String.fromCharCode((31&x)<<6|63&K)}else if(x>239&&x<365){const vt=((7&x)<<18|(63&H[O++])<<12|(63&H[O++])<<6|63&H[O++])-65536;j[N++]=String.fromCharCode(55296+(vt>>10)),j[N++]=String.fromCharCode(56320+(1023&vt))}else{const K=H[O++],me=H[O++];j[N++]=String.fromCharCode((15&x)<<12|(63&K)<<6|63&me)}}return j.join("")}(this.decodeStringToByteArray(H,j))},decodeStringToByteArray(H,j){this.init_();const O=j?this.charToByteMapWebSafe_:this.charToByteMap_,N=[];for(let x=0;x<H.length;){const K=O[H.charAt(x++)],Be=x<H.length?O[H.charAt(x)]:0;++x;const Ze=x<H.length?O[H.charAt(x)]:64;++x;const wt=x<H.length?O[H.charAt(x)]:64;if(++x,null==K||null==Be||null==Ze||null==wt)throw new Ne;N.push(K<<2|Be>>4),64!==Ze&&(N.push(Be<<4&240|Ze>>2),64!==wt&&N.push(Ze<<6&192|wt))}return N},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class Ne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(H){const j=te(H);return Ee.encodeByteArray(j,!0)},De=function(H){return Fe(H).replace(/\./g,"")},U=function(H){try{return Ee.decodeString(H,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function G(H){return X(void 0,H)}function X(H,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return j}for(const O in j)!j.hasOwnProperty(O)||!Pe(O)||(H[O]=X(H[O],j[O]));return H}function Pe(H){return"__proto__"!==H}const Te=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=H&&U(H[1]);return j&&JSON.parse(j)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},tt=H=>{var j,O;return null===(O=null===(j=Te())||void 0===j?void 0:j.emulatorHosts)||void 0===O?void 0:O[H]},at=H=>{const j=tt(H);if(!j)return;const O=j.lastIndexOf(":");if(O<=0||O+1===j.length)throw new Error(`Invalid host ${j} with no separate hostname and port!`);const N=parseInt(j.substring(O+1),10);return"["===j[0]?[j.substring(1,O-1),N]:[j.substring(0,O),N]},ee=()=>{var H;return null===(H=Te())||void 0===H?void 0:H.config},he=H=>{var j;return null===(j=Te())||void 0===j?void 0:j[`_${H}`]};class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,O)=>{this.resolve=j,this.reject=O})}wrapCallback(j){return(O,N)=>{O?this.reject(O):this.resolve(N),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(O):j(O,N))}}}function fe(H,j){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const N=j||"demo-project",x=H.iat||0,K=H.sub||H.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${N}`,aud:N,iat:x,exp:x+3600,auth_time:x,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},H);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(me)),""].join(".")}function Re(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function B(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function we(){var H;const j=null===(H=Te())||void 0===H?void 0:H.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function ut(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Xt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function wn(){const H=Re();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function ln(){return!0===d.NODE_CLIENT||!0===d.NODE_ADMIN}function kr(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ue(){return new Promise((H,j)=>{try{let O=!0;const N="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(N);x.onsuccess=()=>{x.result.close(),O||self.indexedDB.deleteDatabase(N),H(!0)},x.onupgradeneeded=()=>{O=!1},x.onerror=()=>{var K;j((null===(K=x.error)||void 0===K?void 0:K.message)||"")}}catch(O){j(O)}})}function ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class pe extends Error{constructor(j,O,N){super(O),this.code=j,this.customData=N,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oe.prototype.create)}}class Oe{constructor(j,O,N){this.service=j,this.serviceName=O,this.errors=N}create(j,...O){const N=O[0]||{},x=`${this.service}/${j}`,K=this.errors[j],me=K?function Qe(H,j){return H.replace(Ve,(O,N)=>{const x=j[N];return null!=x?String(x):`<${N}?>`})}(K,N):"Error";return new pe(x,`${this.serviceName}: ${me} (${x}).`,N)}}const Ve=/\{\$([^}]+)}/g;function en(H){return JSON.parse(H)}function ft(H){return JSON.stringify(H)}const qt=function(H){let j={},O={},N={},x="";try{const K=H.split(".");j=en(U(K[0])||""),O=en(U(K[1])||""),x=K[2],N=O.d||{},delete O.d}catch{}return{header:j,claims:O,data:N,signature:x}},Dn=function(H){const O=qt(H).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},In=function(H){const j=qt(H).claims;return"object"==typeof j&&!0===j.admin};function nn(H,j){return Object.prototype.hasOwnProperty.call(H,j)}function Fn(H,j){if(Object.prototype.hasOwnProperty.call(H,j))return H[j]}function fi(H){for(const j in H)if(Object.prototype.hasOwnProperty.call(H,j))return!1;return!0}function Ar(H,j,O){const N={};for(const x in H)Object.prototype.hasOwnProperty.call(H,x)&&(N[x]=j.call(O,H[x],x,H));return N}function or(H,j){if(H===j)return!0;const O=Object.keys(H),N=Object.keys(j);for(const x of O){if(!N.includes(x))return!1;const K=H[x],me=j[x];if(Ln(K)&&Ln(me)){if(!or(K,me))return!1}else if(K!==me)return!1}for(const x of N)if(!O.includes(x))return!1;return!0}function Ln(H){return null!==H&&"object"==typeof H}function ls(H){const j=[];for(const[O,N]of Object.entries(H))Array.isArray(N)?N.forEach(x=>{j.push(encodeURIComponent(O)+"="+encodeURIComponent(x))}):j.push(encodeURIComponent(O)+"="+encodeURIComponent(N));return j.length?"&"+j.join("&"):""}function ht(H){const j={};return H.replace(/^\?/,"").split("&").forEach(N=>{if(N){const[x,K]=N.split("=");j[decodeURIComponent(x)]=decodeURIComponent(K)}}),j}function _t(H){const j=H.indexOf("?");if(!j)return"";const O=H.indexOf("#",j);return H.substring(j,O>0?O:void 0)}class bt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,O){O||(O=0);const N=this.W_;if("string"==typeof j)for(let wt=0;wt<16;wt++)N[wt]=j.charCodeAt(O)<<24|j.charCodeAt(O+1)<<16|j.charCodeAt(O+2)<<8|j.charCodeAt(O+3),O+=4;else for(let wt=0;wt<16;wt++)N[wt]=j[O]<<24|j[O+1]<<16|j[O+2]<<8|j[O+3],O+=4;for(let wt=16;wt<80;wt++){const hn=N[wt-3]^N[wt-8]^N[wt-14]^N[wt-16];N[wt]=4294967295&(hn<<1|hn>>>31)}let Ze,Zt,x=this.chain_[0],K=this.chain_[1],me=this.chain_[2],Be=this.chain_[3],vt=this.chain_[4];for(let wt=0;wt<80;wt++){wt<40?wt<20?(Ze=Be^K&(me^Be),Zt=1518500249):(Ze=K^me^Be,Zt=1859775393):wt<60?(Ze=K&me|Be&(K|me),Zt=2400959708):(Ze=K^me^Be,Zt=3395469782);const hn=(x<<5|x>>>27)+Ze+vt+Zt+N[wt]&4294967295;vt=Be,Be=me,me=4294967295&(K<<30|K>>>2),K=x,x=hn}this.chain_[0]=this.chain_[0]+x&4294967295,this.chain_[1]=this.chain_[1]+K&4294967295,this.chain_[2]=this.chain_[2]+me&4294967295,this.chain_[3]=this.chain_[3]+Be&4294967295,this.chain_[4]=this.chain_[4]+vt&4294967295}update(j,O){if(null==j)return;void 0===O&&(O=j.length);const N=O-this.blockSize;let x=0;const K=this.buf_;let me=this.inbuf_;for(;x<O;){if(0===me)for(;x<=N;)this.compress_(j,x),x+=this.blockSize;if("string"==typeof j){for(;x<O;)if(K[me]=j.charCodeAt(x),++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}else for(;x<O;)if(K[me]=j[x],++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}this.inbuf_=me,this.total_+=O}digest(){const j=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let x=this.blockSize-1;x>=56;x--)this.buf_[x]=255&O,O/=256;this.compress_(this.buf_);let N=0;for(let x=0;x<5;x++)for(let K=24;K>=0;K-=8)j[N]=this.chain_[x]>>K&255,++N;return j}}function rn(H,j){const O=new ei(H,j);return O.subscribe.bind(O)}class ei{constructor(j,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{j(this)}).catch(N=>{this.error(N)})}next(j){this.forEachObserver(O=>{O.next(j)})}error(j){this.forEachObserver(O=>{O.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,O,N){let x;if(void 0===j&&void 0===O&&void 0===N)throw new Error("Missing Observer.");x=function Rt(H,j){if("object"!=typeof H||null===H)return!1;for(const O of j)if(O in H&&"function"==typeof H[O])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:O,complete:N},void 0===x.next&&(x.next=Sn),void 0===x.error&&(x.error=Sn),void 0===x.complete&&(x.complete=Sn);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),K}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,j)}sendOne(j,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{O(this.observers[j])}catch(N){typeof console<"u"&&console.error&&console.error(N)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sn(){}function Gt(H,j){return`${H} failed: ${j} argument `}const Si=function(H){const j=[];let O=0;for(let N=0;N<H.length;N++){let x=H.charCodeAt(N);if(x>=55296&&x<=56319){const K=x-55296;N++,V(N<H.length,"Surrogate pair missing trail surrogate."),x=65536+(K<<10)+(H.charCodeAt(N)-56320)}x<128?j[O++]=x:x<2048?(j[O++]=x>>6|192,j[O++]=63&x|128):x<65536?(j[O++]=x>>12|224,j[O++]=x>>6&63|128,j[O++]=63&x|128):(j[O++]=x>>18|240,j[O++]=x>>12&63|128,j[O++]=x>>6&63|128,j[O++]=63&x|128)}return j},Wi=function(H){let j=0;for(let O=0;O<H.length;O++){const N=H.charCodeAt(O);N<128?j++:N<2048?j+=2:N>=55296&&N<=56319?(j+=4,O++):j+=3}return j},ar=1e3,He=2,_e=144e5,Xe=.5;function ot(H,j=ar,O=He){const N=j*Math.pow(O,H),x=Math.round(Xe*N*(Math.random()-.5)*2);return Math.min(_e,N+x)}function Wn(H){return H&&H._delegate?H._delegate:H}},4632:(st,Ce,k)=>{var d=k(5879);let V=null;function F(){return V}class ge{}const Ee=new d.OlP("DocumentToken");let Ne=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(De)},providedIn:"platform"})}return n})();const Fe=new d.OlP("Location Initialized");let De=(()=>{class n extends Ne{constructor(){super(),this._doc=(0,d.f3M)(Ee),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Je)},providedIn:"root"})}return n})();const Me=new d.OlP("appBaseHref");let Je=(()=>{class n extends Pe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(Ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+X(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+X(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ne),d.LFG(Me,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ve=(()=>{class n extends Pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=U(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+X(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+X(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ne),d.LFG(Me,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})(),Ae=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(at(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function tt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,at(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=X;static#t=this.joinWithSlash=U;static#n=this.stripTrailingSlash=G;static#r=this.\u0275fac=function(r){return new(r||n)(d.LFG(Pe))};static#i=this.\u0275prov=d.Yz7({token:n,factory:function(){return function Te(){return new Ae((0,d.LFG)(Pe))}()},providedIn:"root"})}return n})();function at(n){return n.replace(/\/index.html$/,"")}var re=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(re||{}),Ue=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Ue||{});function pe(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Ue.CurrencyDecimal)return t[d.wAp.NumberSymbols][Ue.Decimal];if(e===Ue.CurrencyGroup)return t[d.wAp.NumberSymbols][Ue.Group]}return r}const x=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function jo(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function ya(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}const Lc=/\s+/,qd=[];let yu=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=qd,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Lc):qd}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Lc):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Lc).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class wu{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Uc=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new wu(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,c),Mn(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Mn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Mn(n,e){n.context.$implicit=e.item}let Zi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new vy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Zd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Zd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class vy{constructor(){this.$implicit=null,this.ngIf=null}}function Zd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}function pi(n,e){return new d.vHH(2100,!1)}class Vc{createSubscription(e,t){return(0,d.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,d.rg0)(()=>e.unsubscribe())}}class Jd{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Bc=new Jd,Xd=new Vc;let jc=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return Bc;if((0,d.F4k)(t))return Xd;throw pi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.sBO,16))};static#t=this.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),je=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function gi(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function As(n,e,t){return function xt(n,e,t,r,i,a,c=!1){let f="",g=!1;if(isFinite(n)){let v=function Mi(n){let r,i,a,c,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(i<0&&(i=a),i+=+e.slice(a+1),e=e.substring(0,a)):i<0&&(i=e.length),a=0;"0"===e.charAt(a);a++);if(a===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=a,r=[],c=0;a<=f;a++,c++)r[c]=Number(e.charAt(a))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);c&&(v=function Ms(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(v));let b=e.minInt,T=e.minFrac,A=e.maxFrac;if(a){const Ge=a.match(x);if(null===Ge)throw new Error(`${a} is not a valid digit info`);const ke=Ge[1],Ye=Ge[3],mt=Ge[5];null!=ke&&(b=jo(ke)),null!=Ye&&(T=jo(Ye)),null!=mt?A=jo(mt):null!=Ye&&T>A&&(A=T)}!function Wt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const a=Math.min(Math.max(e,i),t);let c=a+n.integerLen,f=r[c];if(c>0){r.splice(Math.max(n.integerLen,c));for(let T=c;T<r.length;T++)r[T]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,c=a+1),r[0]=0;for(let T=1;T<c;T++)r[T]=0}if(f>=5)if(c-1<0){for(let T=0;T>c;T--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[c-1]++;for(;i<Math.max(0,a);i++)r.push(0);let g=0!==a;const v=e+n.integerLen,b=r.reduceRight(function(T,A,R,W){return W[R]=(A+=T)<10?A:A-10,g&&(0===W[R]&&R>=v?W.pop():g=!1),A>=10?1:0},0);b&&(r.unshift(b),n.integerLen++)}(v,T,A);let R=v.digits,W=v.integerLen;const Q=v.exponent;let J=[];for(g=R.every(Ge=>!Ge);W<b;W++)R.unshift(0);for(;W<0;W++)R.unshift(0);W>0?J=R.splice(W,R.length):(J=R,R=[0]);const be=[];for(R.length>=e.lgSize&&be.unshift(R.splice(-e.lgSize,R.length).join(""));R.length>e.gSize;)be.unshift(R.splice(-e.gSize,R.length).join(""));R.length&&be.unshift(R.join("")),f=be.join(pe(t,r)),J.length&&(f+=pe(t,i)+J.join("")),Q&&(f+=pe(t,Ue.Exponential)+"+"+Q)}else f=pe(t,Ue.Infinity);return f=n<0&&!g?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function oo(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],a=r[1],c=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=c[0],g=c[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let b=0;b<g.length;b++){const T=g.charAt(b);"0"===T?t.minFrac=t.maxFrac=b+1:"#"===T?t.maxFrac=b+1:t.posSuf+=T}const v=f.split(",");if(t.gSize=v[1]?v[1].length:0,t.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,a){const b=i.length-t.posPre.length-t.posSuf.length,T=a.indexOf("#");t.negPre=a.substring(0,T).replace(/'/g,""),t.negSuf=a.slice(T+b).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Oe(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,re.Decimal),pe(e,Ue.MinusSign)),e,Ue.Group,Ue.Decimal,t)}(function Ns(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(a){throw pi()}}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.soG,16))};static#t=this.\u0275pipe=d.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let _r=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw pi();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),Un=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function mi(n){return"server"===n}let Vr=(()=>{class n{static#e=this.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new ks((0,d.LFG)(Ee),window)})}return n})();class ks{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $p(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class hs{}class Jp extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ph extends Jp{static makeCurrent(){!function te(n){V||(V=n)}(new ph)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function vI(){return Au=Au||document.querySelector("base"),Au?Au.getAttribute("href"):null}();return null==t?null:function Vy(n){gh=gh||document.createElement("a"),gh.setAttribute("href",n);const e=gh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Au=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ya(document.cookie,e)}}let gh,Au=null,wI=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const By=new d.OlP("EventManagerPlugins");let jy=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(By),d.LFG(d.R0b))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class mh{constructor(e){this._doc=e}}const _h="ng-app-id";let Xc=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=mi(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${_h}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(_h),a;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(_h,this.appId),c}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,c=a.get(r)?.elements;c?c.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const Us={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ta=/%COMP%/g,fs=new d.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function sn(n,e){return e.map(t=>t.replace(Ta,n))}let tl=(()=>{class n{constructor(t,r,i,a,c,f,g,v=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=f,this.ngZone=g,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=mi(f),this.defaultRenderer=new Vs(t,c,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===d.ifc.ShadowDom&&(r={...r,encapsulation:d.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Ch?i.applyToHost(t):i instanceof ri&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.doc,f=this.ngZone,g=this.eventManager,v=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(r.encapsulation){case d.ifc.Emulated:a=new Ch(g,v,r,this.appId,b,c,f,T);break;case d.ifc.ShadowDom:return new Da(g,v,t,r,c,f,this.nonce,T);default:a=new ri(g,v,r,b,c,f,T)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(jy),d.LFG(Xc),d.LFG(d.AFp),d.LFG(fs),d.LFG(Ee),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class Vs{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Us[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new d.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Us[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Us[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=F().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function wh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Da extends Vs{constructor(e,t,r,i,a,c,f,g){super(e,a,c,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=sn(i.id,i.styles);for(const b of v){const T=document.createElement("style");f&&T.setAttribute("nonce",f),T.textContent=b,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ri extends Vs{constructor(e,t,r,i,a,c,f,g){super(e,a,c,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?sn(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Ch extends ri{constructor(e,t,r,i,a,c,f,g){const v=i+"-"+r.id;super(e,t,r,a,c,f,g,v),this.contentAttr=function eg(n){return"_ngcontent-%COMP%".replace(Ta,n)}(v),this.hostAttr=function el(n){return"_nghost-%COMP%".replace(Ta,n)}(v)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let II=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const nl=["alt","control","meta","shift"],ho={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mu=(()=>{class n extends mh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),nl.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),c+=v+".")}),c+=a,0!=r.length||0===a.length)return null;const g={};return g.domEventName=i,g.fullKey=c,g}static matchEventFullKeyCode(t,r){let i=ho[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),nl.forEach(c=>{c!==i&&(0,tg[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const ig=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function yt(){ph.makeCurrent()},multi:!0},{provide:Ee,useFactory:function bI(){return(0,d.RDi)(document),document},deps:[]}]),zy=new d.OlP(""),Sa=[{provide:d.rWj,useClass:class Xp{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new d.vHH(5103,!1);return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const f=function(g){c=c||g,a--,0==a&&r(c)};i.forEach(g=>{g.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],fo=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function rl(){return new d.qLn},deps:[]},{provide:By,useClass:II,multi:!0,deps:[Ee,d.R0b,d.Lbi]},{provide:By,useClass:Mu,multi:!0,deps:[Ee]},tl,Xc,jy,{provide:d.FYo,useExisting:tl},{provide:hs,useClass:wI,deps:[]},[]];let xu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(zy,12))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[...fo,...Sa],imports:[Un,d.hGG]})}return n})(),ye=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee))};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function og(){return new ye((0,d.LFG)(Ee))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var zr=k(5592),Bs=k(4674),pn=k(2459),dt=k(2096),wr=k(5619);const{isArray:sl}=Array,{getPrototypeOf:Sh,prototype:Gr,keys:js}=Object;function Cn(n){if(1===n.length){const e=n[0];if(sl(e))return{args:e,keys:null};if(function go(n){return n&&"object"==typeof n&&Sh(n)===Gr}(e)){const t=js(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var mo=k(2737),Ct=k(7398);const{isArray:Yy}=Array;function Nu(n){return(0,Ct.U)(e=>function pg(n,e){return Yy(e)?n(...e):n(e)}(n,e))}var $s=k(9940);function Hs(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var xr=k(8251),Aa=k(7103);function zo(...n){const e=(0,$s.yG)(n),t=(0,$s.jO)(n),{args:r,keys:i}=Cn(n);if(0===r.length)return(0,pn.D)([],e);const a=new zr.y(function Ma(n,e,t=mo.y){return r=>{ol(e,()=>{const{length:i}=n,a=new Array(i);let c=i,f=i;for(let g=0;g<i;g++)ol(e,()=>{const v=(0,pn.D)(n[g],e);let b=!1;v.subscribe((0,xr.x)(r,T=>{a[g]=T,b||(b=!0,f--),f||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Hs(i,c):mo.y));return t?a.pipe(Nu(t)):a}function ol(n,e,t){n?(0,Aa.f)(t,n,e):e()}const zs=(0,k(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ru=k(7537);function Go(...n){return function ms(){return(0,Ru.J)(1)}()((0,pn.D)(n,(0,$s.yG)(n)))}var ku=k(4829);function Ah(n){return new zr.y(e=>{(0,ku.Xf)(n()).subscribe(e)})}var Fu=k(8407);function Wo(n,e){const t=(0,Bs.m)(n)?n:()=>n,r=i=>i.error(t());return new zr.y(e?i=>e.schedule(r,0,i):r)}var _o=k(6232),Lu=k(7394),Wr=k(9360);function Mh(){return(0,Wr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,xr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ul extends zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Wr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Lu.w0;const t=this.getSubject();e.add(this.source.subscribe((0,xr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Lu.w0.EMPTY)}return e}refCount(){return Mh()(this)}}var yi=k(8645),Vn=k(4664);function dn(n){return n<=0?()=>_o.E:(0,Wr.e)((e,t)=>{let r=0;e.subscribe((0,xr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function xa(...n){const e=(0,$s.yG)(n);return(0,Wr.e)((t,r)=>{(e?Go(n,t,e):Go(n,t)).subscribe(r)})}function Cr(n,e){return(0,Wr.e)((t,r)=>{let i=0;t.subscribe((0,xr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var ii=k(1631);function Uu(n){return(0,Wr.e)((e,t)=>{let r=!1;e.subscribe((0,xr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Vu(n=Qy){return(0,Wr.e)((e,t)=>{let r=!1;e.subscribe((0,xr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Qy(){return new zs}function er(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,a)=>n(i,a,r)):mo.y,dn(1),t?Uu(e):Vu(()=>new zs))}function yo(n,e){return(0,Bs.m)(e)?(0,ii.z)(n,e,1):(0,ii.z)(n,1)}function Pn(n,e,t){const r=(0,Bs.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,Wr.e)((i,a)=>{var c;null===(c=r.subscribe)||void 0===c||c.call(r);let f=!0;i.subscribe((0,xr.x)(a,g=>{var v;null===(v=r.next)||void 0===v||v.call(r,g),a.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),a.complete()},g=>{var v;f=!1,null===(v=r.error)||void 0===v||v.call(r,g),a.error(g)},()=>{var g,v;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(v=r.finalize)||void 0===v||v.call(r)}))}):mo.y}function Yi(n){return(0,Wr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,xr.x)(t,void 0,void 0,c=>{a=(0,ku.Xf)(n(c,Yi(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function qo(n,e){return(0,Wr.e)(function cl(n,e,t,r,i){return(a,c)=>{let f=t,g=e,v=0;a.subscribe((0,xr.x)(c,b=>{const T=v++;g=f?n(g,b,T):(f=!0,b),r&&c.next(g)},i&&(()=>{f&&c.next(g),c.complete()})))}}(n,e,arguments.length>=2,!0))}function Pa(n){return n<=0?()=>_o.E:(0,Wr.e)((e,t)=>{let r=[];e.subscribe((0,xr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Zo(n){return(0,Wr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Ph=k(2420);const Tt="primary",vo=Symbol("RouteTitle");class Ko{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function wo(n){return new Ko(n)}function mg(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],f=n[a];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function qr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!yg(n[i],e[i]))return!1;return!0}function yg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function tr(n){return n.length>0?n[n.length-1]:null}function Co(n){return function fg(n){return!!n&&(n instanceof zr.y||(0,Bs.m)(n.lift)&&(0,Bs.m)(n.subscribe))}(n)?n:(0,d.QGY)(n)?(0,pn.D)(Promise.resolve(n)):(0,dt.of)(n)}const vg={exact:function hl(n,e,t){if(!Qo(n.segments,e.segments)||!Bu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!hl(n.children[r],e.children[r],t))return!1;return!0},subset:Yo},dl={exact:function Cg(n,e){return qr(n,e)},subset:function Oa(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yg(n[t],e[t]))},ignored:()=>!0};function wg(n,e,t){return vg[t.paths](n.root,e.root,t.matrixParams)&&dl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Yo(n,e,t){return Gs(n,e,e.segments,t)}function Gs(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Qo(i,t)||e.hasChildren()||!Bu(i,t,r))}if(n.segments.length===t.length){if(!Qo(n.segments,t)||!Bu(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Yo(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Qo(n.segments,i)&&Bu(n.segments,i,r)&&n.children[Tt])&&Gs(n.children[Tt],e,a,r)}}function Bu(n,e,t){return e.every((r,i)=>dl[t](n[i].parameters,r.parameters))}class Eo{constructor(e=new Ht([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wo(this.queryParams)),this._queryParamMap}toString(){return MI.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oh(this)}}class fl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=wo(this.parameters)),this._parameterMap}toString(){return Zr(this)}}function Qo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let pl=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new Eg},providedIn:"root"})}return n})();class Eg{parse(e){const t=new ka(e);return new Eo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Oi(e.root,!0)}`,r=function Xy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ml(t)}=${ml(i)}`).join("&"):`${ml(t)}=${ml(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Bn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const MI=new Eg;function Oh(n){return n.segments.map(e=>Zr(e)).join("/")}function Oi(n,e){if(!n.hasChildren())return Oh(n);if(e){const t=n.children[Tt]?Oi(n.children[Tt],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==Tt&&r.push(`${i}:${Oi(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function AI(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Tt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Tt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Tt?[Oi(n.children[Tt],!1)]:[`${i}:${Oi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${Oh(n)}/${t[0]}`:`${Oh(n)}/(${t.join("//")})`}}function gl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ml(n){return gl(n).replace(/%3B/gi,";")}function Nh(n){return gl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ws(n){return decodeURIComponent(n)}function Ig(n){return Ws(n.replace(/\+/g,"%20"))}function Zr(n){return`${Nh(n.path)}${function Na(n){return Object.keys(n).map(e=>`;${Nh(e)}=${Nh(n[e])}`).join("")}(n.parameters)}`}const Ra=/^[^\/()?;#]+/;function Io(n){const e=n.match(Ra);return e?e[0]:""}const _l=/^[^\/()?;=#]+/,bg=/^[^=?&#]+/,vi=/^[^&#]+/;class ka{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new Ht(e,t)),r}parseSegment(){const e=Io(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new fl(Ws(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function ev(n){const e=n.match(_l);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Io(this.remaining);i&&(r=i,this.capture(r))}e[Ws(t)]=Ws(r)}parseQueryParam(e){const t=function xI(n){const e=n.match(bg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Rh(n){const e=n.match(vi);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Ig(t),a=Ig(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Io(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Tt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[Tt]:new Ht([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function tv(n){return n.segments.length>0?new Ht([],{[Tt]:n}):n}function yl(n){const e={};for(const r of Object.keys(n.children)){const a=yl(n.children[r]);if(r===Tt&&0===a.segments.length&&a.hasChildren())for(const[c,f]of Object.entries(a.children))e[c]=f;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function nv(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}function Jo(n){return n instanceof Eo}function m(n){let e;const i=tv(function t(a){const c={};for(const g of a.children){const v=t(g);c[g.outlet]=v}const f=new Ht(a.url,c);return a===n&&(e=f),f}(n.root));return e??i}function _(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return P(i,i,i,t,r);const a=function Le(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oe(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([g,v])=>{f[g]="string"==typeof v?v.split("/"):v}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new oe(t,e,r)}(e);if(a.toRoot())return P(i,i,new Ht([],{}),t,r);const c=function rt(n,e,t){if(n.isAbsolute)return new $e(e,!0,0);if(!t)return new $e(e,!1,NaN);if(null===t.parent)return new $e(t,!0,0);const r=E(n.commands[0])?0:1;return function Ot(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new $e(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),f=c.processChildren?qs(c.segmentGroup,c.index,a.commands):Ni(c.segmentGroup,c.index,a.commands);return P(i,c.segmentGroup,f,t,r)}function E(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function S(n){return"object"==typeof n&&null!=n&&n.outlets}function P(n,e,t,r,i){let c,a={};r&&Object.entries(r).forEach(([g,v])=>{a[g]=Array.isArray(v)?v.map(b=>`${b}`):`${v}`}),c=n===e?t:Z(n,e,t);const f=tv(yl(c));return new Eo(f,a,i)}function Z(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:Z(a,e,t)}),new Ht(n.segments,r)}class oe{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&E(r[0]))throw new d.vHH(4003,!1);const i=r.find(S);if(i&&i!==tr(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $e{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ni(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return qs(n,e,t);const r=function Tg(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],f=t[r];if(S(f))break;const g=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!vl(g,v,c))return a;r+=2}else{if(!vl(g,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Ht(n.segments.slice(0,r.pathIndex),{});return a.children[Tt]=new Ht(n.segments.slice(r.pathIndex),n.children),qs(a,0,i)}return r.match&&0===i.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?ju(n,e,t):r.match?qs(n,0,i):ju(n,e,t)}function qs(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function Pr(n){return S(n[0])?n[0].outlets:{[Tt]:n}}(t),i={};if(Object.keys(r).some(a=>a!==Tt)&&n.children[Tt]&&1===n.numberOfChildren&&0===n.children[Tt].segments.length){const a=qs(n.children[Tt],e,t);return new Ht(n.segments,a.children)}return Object.entries(r).forEach(([a,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(i[a]=Ni(n.children[a],e,c))}),Object.entries(n.children).forEach(([a,c])=>{void 0===r[a]&&(i[a]=c)}),new Ht(n.segments,i)}}function ju(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(S(a)){const g=Xo(a.outlets);return new Ht(r,g)}if(0===i&&E(t[0])){r.push(new fl(n.segments[e].path,ea(t[0]))),i++;continue}const c=S(a)?a.outlets[Tt]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&E(f)?(r.push(new fl(c,ea(f))),i+=2):(r.push(new fl(c,{})),i++)}return new Ht(r,{})}function Xo(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=ju(new Ht([],{}),0,r))}),e}function ea(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function vl(n,e,t){return n==t.path&&qr(e,t.parameters)}const $u="imperative";class Ri{constructor(e,t){this.id=e,this.url=t}}class Fa extends Ri{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zs extends Ri{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hu extends Ri{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bo extends Ri{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class wl extends Ri{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kh extends Ri{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PI extends Ri{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lx extends Ri{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class OI extends Ri{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FU extends Ri{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NI{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class LU{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class dx{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hx{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rv{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UU{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Fh{}class RI{constructor(e){this.url=e}}class VU{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Dg,this.attachRef=null}}let Dg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new VU,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class px{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=iv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=iv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Cl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Cl(e,this._root).map(t=>t.value)}}function iv(n,e){if(n===e.value)return e;for(const t of e.children){const r=iv(n,t);if(r)return r}return null}function Cl(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Cl(n,t);if(r.length)return r.unshift(e),r}return[]}class _s{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sv extends px{constructor(e,t){super(e),this.snapshot=t,uv(this,e)}toString(){return this.snapshot.toString()}}function ov(n,e){const t=function El(n,e){const c=new Wu([],{},{},"",{},Tt,e,null,{});return new Lh("",new _s(c,[]))}(0,e),r=new wr.X([new fl("",{})]),i=new wr.X({}),a=new wr.X({}),c=new wr.X({}),f=new wr.X(""),g=new Gu(r,i,c,f,a,Tt,e,t.root);return g.snapshot=t.root,new sv(new _s(g,[]),t)}class Gu{constructor(e,t,r,i,a,c,f,g){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=c,this.component=f,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,Ct.U)(v=>v[vo]))??(0,dt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>wo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>wo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function av(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Sg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Wu{get title(){return this.data?.[vo]}constructor(e,t,r,i,a,c,f,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=g,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lh extends px{constructor(e,t){super(t),this.url=e,uv(this,t)}toString(){return kI(this._root)}}function uv(n,e){e.value._routerState=n,e.children.forEach(t=>uv(n,t))}function kI(n){const e=n.children.length>0?` { ${n.children.map(kI).join(", ")} } `:"";return`${n.value}${e}`}function cv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),qr(e.params,t.params)||n.paramsSubject.next(t.params),function _g(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),qr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ag(n,e){const t=qr(n.params,e.params)&&function Jy(n,e){return Qo(n,e)&&n.every((t,r)=>qr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ag(n.parent,e.parent))}let Uh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Dg),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)(Mg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new gx(t,f,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]})}return n})();class gx{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Gu?this.route:e===Dg?this.childContexts:this.parent.get(e,t)}}const Mg=new d.OlP("");let FI=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=zo([r.queryParams,r.params,r.data]).pipe((0,Vn.w)(([a,c,f],g)=>(f={...a,...c,...f},0===g?(0,dt.of)(f):Promise.resolve(f)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const c=(0,d.qFp)(r.component);if(c)for(const{templateName:f}of c.inputs)t.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function Vh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function mx(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Vh(n,r,i);return Vh(n,r)})}(n,e,t);return new _s(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Vh(n,f)),c}}const r=function ki(n){return new Gu(new wr.X(n.url),new wr.X(n.params),new wr.X(n.queryParams),new wr.X(n.fragment),new wr.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Vh(n,a));return new _s(r,i)}}const Bh="ngNavigationCancelingError";function lv(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Jo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xg(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function xg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Bh]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Il(n){return n&&n[Bh]}let dv=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(r,i){1&r&&d._UZ(0,"router-outlet")},dependencies:[Uh],encapsulation:2})}return n})();function jh(n){const e=n.children&&n.children.map(jh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=dv),t}function Qi(n){return n.outlet||Tt}function ta(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class VI{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),cv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=zu(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=zu(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=zu(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=zu(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new UU(a.value.snapshot))}),e.children.length&&this.forwardEvent(new hx(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(cv(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),cv(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=ta(i.snapshot);c.attachRef=null,c.route=i,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class hv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $h{constructor(e,t){this.component=e,this.route=t}}function bl(n,e,t){const r=n._root;return Zu(r,e?e._root:null,t,[r.value])}function qu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Zu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=zu(e);return n.children.forEach(c=>{(function Og(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const g=function Tx(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Qo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qo(n.url,e.url)||!qr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ag(n,e)||!qr(n.queryParams,e.queryParams);default:return!Ag(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new hv(r)):(a.data=c.data,a._resolvedData=c._resolvedData),Zu(n,e,a.component?f?f.children:null:t,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new $h(f.outlet.component,c))}else c&&Hh(e,f,i),i.canActivateChecks.push(new hv(r)),Zu(n,null,a.component?f?f.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Object.entries(a).forEach(([c,f])=>Hh(f,t.getContext(c),i)),i}function Hh(n,e,t){const r=zu(n),i=n.value;Object.entries(r).forEach(([a,c])=>{Hh(c,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new $h(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function zh(n){return"function"==typeof n}function $I(n){return n instanceof zs||"EmptyError"===n?.name}const Tl=Symbol("INITIAL_VALUE");function Ku(){return(0,Vn.w)(n=>zo(n.map(e=>e.pipe(dn(1),xa(Tl)))).pipe((0,Ct.U)(e=>{for(const t of e)if(!0!==t){if(t===Tl)return Tl;if(!1===t||t instanceof Eo)return t}return!0}),Cr(e=>e!==Tl),dn(1)))}function pv(n){return(0,Fu.z)(Pn(e=>{if(Jo(e))throw lv(0,e)}),(0,Ct.U)(e=>!0===e))}class Gh{constructor(e){this.segmentGroup=e||null}}class Wh{constructor(e){this.urlTree=e}}function To(n){return Wo(new Gh(n))}function mv(n){return Wo(new Wh(n))}class qI{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new d.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,dt.of)(r);if(i.numberOfChildren>1||!i.children[Tt])return Wo(new d.vHH(4e3,!1));i=i.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Eo(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const f=a.substring(1);r[i]=t[f]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Object.entries(t.children).forEach(([f,g])=>{c[f]=this.createSegmentGroup(e,g,r,i)}),new Ht(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const qh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zh(n,e,t,r,i){const a=yv(n,e,t);return a.matched?(r=function UI(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function gv(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,dt.of)(!0);const a=i.map(c=>{const f=qu(c,n);return Co(function fv(n){return n&&zh(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,dt.of)(a).pipe(Ku(),pv())}(r,e,t).pipe((0,Ct.U)(c=>!0===c?a:{...qh}))):(0,dt.of)(a)}function yv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qh}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||mg)(t,n,e);if(!i)return{...qh};const a={};Object.entries(i.posParams??{}).forEach(([f,g])=>{a[f]=g.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function vv(n,e,t,r){return t.length>0&&function Rx(n,e,t){return t.some(r=>Kh(n,e,r)&&Qi(r)!==Tt)}(n,t,r)?{segmentGroup:new Ht(e,Nx(r,new Ht(t,n.children))),slicedSegments:[]}:0===t.length&&function ZI(n,e,t){return t.some(r=>Kh(n,e,r))}(n,t,r)?{segmentGroup:new Ht(n.segments,Ox(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ht(n.segments,n.children),slicedSegments:t}}function Ox(n,e,t,r,i){const a={};for(const c of r)if(Kh(n,t,c)&&!i[Qi(c)]){const f=new Ht([],{});a[Qi(c)]=f}return{...i,...a}}function Nx(n,e){const t={};t[Tt]=e;for(const r of n)if(""===r.path&&Qi(r)!==Tt){const i=new Ht([],{});t[Qi(r)]=i}return t}function Kh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class kx{constructor(e,t,r,i,a,c,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=c,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new qI(this.urlSerializer,this.urlTree)}noMatchError(e){return new d.vHH(4002,!1)}recognize(){const e=vv(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe(Yi(t=>{if(t instanceof Wh)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Gh?this.noMatchError(t):t}),(0,Ct.U)(t=>{const r=new Wu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,{}),i=new _s(r,t),a=new Lh("",i),c=function C(n,e,t=null,r=null){return _(m(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(a._root),{state:a,tree:c}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Tt).pipe(Yi(r=>{throw r instanceof Gh?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=av(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,pn.D)(i).pipe(yo(a=>{const c=r.children[a],f=function Ix(n,e){const t=n.filter(r=>Qi(r)===e);return t.push(...n.filter(r=>Qi(r)!==e)),t}(t,a);return this.processSegmentGroup(e,f,c,a)}),qo((a,c)=>(a.push(...c),a)),Uu(null),function gg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,a)=>n(i,a,r)):mo.y,Pa(1),t?Uu(e):Vu(()=>new zs))}(),(0,ii.z)(a=>{if(null===a)return To(r);const c=KI(a);return function Fx(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(c),(0,dt.of)(c)}))}processSegment(e,t,r,i,a,c){return(0,pn.D)(t).pipe(yo(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,a,c).pipe(Yi(g=>{if(g instanceof Gh)return(0,dt.of)(null);throw g}))),er(f=>!!f),Yi(f=>{if($I(f))return function wv(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,dt.of)([]):To(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,a,c,f){return function Fg(n,e,t,r){return!!(Qi(n)===r||r!==Tt&&Kh(e,t,n))&&("**"===n.path||yv(e,n,t).matched)}(r,i,a,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,c,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,c):To(i):To(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?mv(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,ii.z)(c=>{const f=new Ht(c,{});return this.processSegment(e,t,f,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:f,consumedSegments:g,remainingSegments:v,positionalParamSegments:b}=yv(t,i,a);if(!f)return To(t);const T=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,b);return i.redirectTo.startsWith("/")?mv(T):this.applyRedirects.lineralizeSegments(i,T).pipe((0,ii.z)(A=>this.processSegment(e,r,t,A.concat(v),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,c){let f;if("**"===r.path){const g=i.length>0?tr(i).parameters:{},v=new Wu(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,QI(r),Qi(r),r.component??r._loadedComponent??null,r,Qu(r));f=(0,dt.of)({snapshot:v,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=Zh(t,r,i,e).pipe((0,Ct.U)(({matched:g,consumedSegments:v,remainingSegments:b,parameters:T})=>g?{snapshot:new Wu(v,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,QI(r),Qi(r),r.component??r._loadedComponent??null,r,Qu(r)),consumedSegments:v,remainingSegments:b}:null));return f.pipe((0,Vn.w)(g=>null===g?To(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Vn.w)(({routes:v})=>{const b=r._loadedInjector??e,{snapshot:T,consumedSegments:A,remainingSegments:R}=g,{segmentGroup:W,slicedSegments:Q}=vv(t,A,R,v);if(0===Q.length&&W.hasChildren())return this.processChildren(b,v,W).pipe((0,Ct.U)(be=>null===be?null:[new _s(T,be)]));if(0===v.length&&0===Q.length)return(0,dt.of)([new _s(T,[])]);const J=Qi(r)===a;return this.processSegment(b,v,W,Q,J?Tt:a,!0).pipe((0,Ct.U)(be=>[new _s(T,be)]))}))))}getChildConfig(e,t,r){return t.children?(0,dt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,dt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function WI(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,dt.of)(!0);const a=i.map(c=>{const f=qu(c,n);return Co(function Sx(n){return n&&zh(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,dt.of)(a).pipe(Ku(),pv())}(e,t,r).pipe((0,ii.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(Pn(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function kg(n){return Wo(xg(!1,3))}())):(0,dt.of)({routes:[],injector:e})}}function zU(n){const e=n.value.routeConfig;return e&&""===e.path}function KI(n){const e=[],t=new Set;for(const r of n){if(!zU(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=KI(r.children);e.push(new _s(r.value,i))}return e.filter(r=>!t.has(r))}function QI(n){return n.data||{}}function Qu(n){return n.resolve||{}}function nb(n){return"string"==typeof n.title||null===n.title}function Ev(n){return(0,Vn.w)(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,Ct.U)(()=>e)):(0,dt.of)(e)})}const Sl=new d.OlP("ROUTES");let Iv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,dt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Co(t.loadComponent()).pipe((0,Ct.U)(Al),Pn(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Zo(()=>{this.componentLoaders.delete(t)})),i=new ul(r,()=>new yi.x).pipe(Mh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,dt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function Lx(n,e,t,r){return Co(n.loadChildren()).pipe((0,Ct.U)(Al),(0,ii.z)(i=>i instanceof d.YKP||Array.isArray(i)?(0,dt.of)(i):(0,pn.D)(e.compileModuleAsync(i))),(0,Ct.U)(i=>{r&&r(n);let a,c,f=!1;return Array.isArray(i)?(c=i,!0):(a=i.create(t).injector,c=a.get(Sl,[],{optional:!0,self:!0}).flat()),{routes:c.map(jh),injector:a}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Zo(()=>{this.childrenLoaders.delete(r)})),c=new ul(a,()=>new yi.x).pipe(Mh());return this.childrenLoaders.set(r,c),c}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Al(n){return function La(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ug=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new yi.x,this.transitionAbortSubject=new yi.x,this.configLoader=(0,d.f3M)(Iv),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(pl),this.rootContexts=(0,d.f3M)(Dg),this.inputBindingEnabled=null!==(0,d.f3M)(Mg,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,dt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new LU(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new NI(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new wr.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:$u,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Cr(a=>0!==a.id),(0,Ct.U)(a=>({...a,extractedUrl:t.urlHandlingStrategy.extract(a.rawUrl)})),(0,Vn.w)(a=>{this.currentTransition=a;let c=!1,f=!1;return(0,dt.of)(a).pipe(Pn(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Vn.w)(g=>{const v=g.currentBrowserUrl.toString(),b=!t.navigated||g.extractedUrl.toString()!==v||v!==g.currentUrlTree.toString();if(!b&&"reload"!==(g.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new bo(g.id,this.urlSerializer.serialize(g.rawUrl),A,0)),g.resolve(null),_o.E}if(t.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return(0,dt.of)(g).pipe((0,Vn.w)(A=>{const R=this.transitions?.getValue();return this.events.next(new Fa(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),R!==this.transitions?.getValue()?_o.E:Promise.resolve(A)}),function Lg(n,e,t,r,i,a){return(0,ii.z)(c=>function Dl(n,e,t,r,i,a,c="emptyOnly"){return new kx(n,e,t,r,i,c,a).recognize()}(n,e,t,r,c.extractedUrl,i,a).pipe((0,Ct.U)(({state:f,tree:g})=>({...c,targetSnapshot:f,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Pn(A=>{a.targetSnapshot=A.targetSnapshot,a.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects};const R=new kh(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(R)}));if(b&&t.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:A,extractedUrl:R,source:W,restoredState:Q,extras:J}=g,be=new Fa(A,this.urlSerializer.serialize(R),W,Q);this.events.next(be);const Ge=ov(0,this.rootComponentType).snapshot;return this.currentTransition=a={...g,targetSnapshot:Ge,urlAfterRedirects:R,extras:{...J,skipLocationChange:!1,replaceUrl:!1}},(0,dt.of)(a)}{const A="";return this.events.next(new bo(g.id,this.urlSerializer.serialize(g.extractedUrl),A,1)),g.resolve(null),_o.E}}),Pn(g=>{const v=new PI(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}),(0,Ct.U)(g=>(this.currentTransition=a={...g,guards:bl(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},a)),function Yu(n,e){return(0,ii.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?(0,dt.of)({...t,guardsResult:!0}):function HI(n,e,t,r){return(0,pn.D)(n).pipe((0,ii.z)(i=>function GI(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,dt.of)(!0);const c=a.map(f=>{const g=ta(e)??i,v=qu(f,g);return Co(function Ng(n){return n&&zh(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):g.runInContext(()=>v(n,e,t,r))).pipe(er())});return(0,dt.of)(c).pipe(Ku())}(i.component,i.route,t,e,r)),er(i=>!0!==i,!0))}(c,r,i,n).pipe((0,ii.z)(f=>f&&function Dx(n){return"boolean"==typeof n}(f)?function zI(n,e,t,r){return(0,pn.D)(e).pipe(yo(i=>Go(function HU(n,e){return null!==n&&e&&e(new dx(n)),(0,dt.of)(!0)}(i.route.parent,r),function xx(n,e){return null!==n&&e&&e(new rv(n)),(0,dt.of)(!0)}(i.route,r),function Px(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function Pg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Ah(()=>{const f=c.guards.map(g=>{const v=ta(c.node)??t,b=qu(g,v);return Co(function BI(n){return n&&zh(n.canActivateChild)}(b)?b.canActivateChild(r,n):v.runInContext(()=>b(r,n))).pipe(er())});return(0,dt.of)(f).pipe(Ku())}));return(0,dt.of)(a).pipe(Ku())}(n,i.path,t),function Rg(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,dt.of)(!0);const i=r.map(a=>Ah(()=>{const c=ta(e)??t,f=qu(a,c);return Co(function Ax(n){return n&&zh(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(er())}));return(0,dt.of)(i).pipe(Ku())}(n,i.route,t))),er(i=>!0!==i,!0))}(r,a,n,e):(0,dt.of)(f)),(0,Ct.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,g=>this.events.next(g)),Pn(g=>{if(a.guardsResult=g.guardsResult,Jo(g.guardsResult))throw lv(0,g.guardsResult);const v=new lx(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(v)}),Cr(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",3),!1)),Ev(g=>{if(g.guards.canActivateChecks.length)return(0,dt.of)(g).pipe(Pn(v=>{const b=new OI(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}),(0,Vn.w)(v=>{let b=!1;return(0,dt.of)(v).pipe(function Cv(n,e){return(0,ii.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,dt.of)(t);let a=0;return(0,pn.D)(i).pipe(yo(c=>function JI(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!nb(i)&&(a[vo]=i.title),function XI(n,e,t,r){const i=function eb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,dt.of)({});const a={};return(0,pn.D)(i).pipe((0,ii.z)(c=>function tb(n,e,t,r){const i=ta(e)??r,a=qu(n,i);return Co(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(er(),Pn(f=>{a[c]=f}))),Pa(1),function xh(n){return(0,Ct.U)(()=>n)}(a),Yi(c=>$I(c)?_o.E:Wo(c)))}(a,n,e,r).pipe((0,Ct.U)(c=>(n._resolvedData=c,n.data=av(n,t).resolve,i&&nb(i)&&(n.data[vo]=i.title),null)))}(c.route,r,n,e)),Pn(()=>a++),Pa(1),(0,ii.z)(c=>a===i.length?(0,dt.of)(t):_o.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),Pn({next:()=>b=!0,complete:()=>{b||this.cancelNavigationTransition(v,"",2)}}))}),Pn(v=>{const b=new FU(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}))}),Ev(g=>{const v=b=>{const T=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(b.routeConfig).pipe(Pn(A=>{b.component=A}),(0,Ct.U)(()=>{})));for(const A of b.children)T.push(...v(A));return T};return zo(v(g.targetSnapshot.root)).pipe(Uu(),dn(1))}),Ev(()=>this.afterPreactivation()),(0,Ct.U)(g=>{const v=function LI(n,e,t){const r=Vh(n,e._root,t?t._root:void 0);return new sv(r,e)}(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=a={...g,targetRouterState:v},a}),Pn(()=>{this.events.next(new Fh)}),((n,e,t,r)=>(0,Ct.U)(i=>(new VI(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),dn(1),Pn({next:g=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zs(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),t.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{c=!0}}),function ll(n){return(0,Wr.e)((e,t)=>{(0,ku.Xf)(n).subscribe((0,xr.x)(t,()=>t.complete(),Ph.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Pn(g=>{throw g}))),Zo(()=>{c||f||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),Yi(g=>{if(f=!0,Il(g))this.events.next(new Hu(a.id,this.urlSerializer.serialize(a.extractedUrl),g.message,g.cancellationCode)),function si(n){return Il(n)&&Jo(n.url)}(g)?this.events.next(new RI(g.url)):a.resolve(!1);else{this.events.next(new wl(a.id,this.urlSerializer.serialize(a.extractedUrl),g,a.targetSnapshot??void 0));try{a.resolve(t.errorHandler(g))}catch(v){a.reject(v)}}return _o.E}))}))}cancelNavigationTransition(t,r,i){const a=new Hu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ux(n){return n!==$u}let Vx=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[vo]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(GU)},providedIn:"root"})}return n})(),GU=(()=>{class n extends Vx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ye))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(rb)},providedIn:"root"})}return n})();class qU{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let rb=(()=>{class n extends qU{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=d.n5z(n)))(i||n)}}();static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Vg=new d.OlP("",{providedIn:"root",factory:()=>({})});let Bx=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(jx)},providedIn:"root"})}return n})(),jx=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Yh=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Yh||{});function Bg(n,e){n.events.pipe(Cr(t=>t instanceof Zs||t instanceof Hu||t instanceof wl||t instanceof bo),(0,Ct.U)(t=>t instanceof Zs||t instanceof bo?Yh.COMPLETE:t instanceof Hu&&(0===t.code||1===t.code)?Yh.REDIRECTING:Yh.FAILED),Cr(t=>t!==Yh.REDIRECTING),dn(1)).subscribe(()=>{e()})}function na(n){throw n}function Qh(n,e,t){return e.parse("/")}const ib={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let cr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this._events=new yi.x,this.options=(0,d.f3M)(Vg,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||na,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Qh,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(Bx),this.routeReuseStrategy=(0,d.f3M)(WU),this.titleStrategy=(0,d.f3M)(Vx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(Sl,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(Ug),this.urlSerializer=(0,d.f3M)(pl),this.location=(0,d.f3M)(Ae),this.componentInputBindingEnabled=!!(0,d.f3M)(Mg,{optional:!0}),this.eventsSubscription=new Lu.w0,this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Eo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ov(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void($x(r)&&this._events.next(r));if(r instanceof Fa)Ux(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof bo)this.rawUrlTree=i.rawUrl;else if(r instanceof kh){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(a,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof Fh)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Hu)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof RI){const a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ux(i.source)};this.scheduleNavigation(a,$u,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof wl&&this.restoreHistory(i,!0),r instanceof Zs&&(this.navigated=!0),$x(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),$u,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(jh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:g}=r,v=g?this.currentUrlTree.fragment:c;let T,b=null;switch(f){case"merge":b={...this.currentUrlTree.queryParams,...a};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=a||null}null!==b&&(b=this.removeEmptyProps(b));try{T=m(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),T=this.currentUrlTree.root}return _(T,t,b,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Jo(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,$u,null,r)}navigate(t,r={skipLocationChange:!1}){return function ZU(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new d.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ib}:!1===r?{...sb}:r,Jo(t))return wg(this.currentUrlTree,t,i);const a=this.parseUrl(t);return wg(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,g,v;c?(f=c.resolve,g=c.reject,v=c.promise):v=new Promise((T,A)=>{f=T,g=A});const b=this.pendingTasks.add();return Bg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:a,resolve:f,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $x(n){return!(n instanceof Fh||n instanceof RI)}let jg=(()=>{class n{constructor(t,r,i,a,c,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new yi.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const g=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof Zs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(cr),d.Y36(Gu),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Pe))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&d.NdJ("click",function(c){return i.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&r&&d.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",d.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",d.VuI],replaceUrl:["replaceUrl","replaceUrl",d.VuI],routerLink:"routerLink"},standalone:!0,features:[d.Xq5,d.TTD]})}return n})(),Jh=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,a,c){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=c,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof Zs&&this.update()})}ngAfterContentInit(){(0,dt.of)(this.links.changes,(0,dt.of)(null)).pipe((0,Ru.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,pn.D)(t).pipe((0,Ru.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function bv(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(cr),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(jg,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,a){if(1&r&&d.Suo(a,jg,5),2&r){let c;d.iGM(c=d.CRH())&&(i.links=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]})}return n})();class Hx{}let Gx=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Cr(t=>t instanceof Zs),yo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,f=a._loadedInjector??c;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(c,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,pn.D)(i).pipe((0,Ru.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,dt.of)(null);const a=i.pipe((0,ii.z)(c=>null===c?(0,dt.of)(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,pn.D)([a,c]).pipe((0,Ru.J)())}return a})}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(cr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Hx),d.LFG(Iv))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Tv=new d.OlP("");let ob=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Fa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zs?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof bo&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof fx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new fx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){d.$Z()};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function ys(n,e){return{\u0275kind:n,\u0275providers:e}}function ub(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(cr),i=n.get(cb);1===n.get(ef)&&r.initialNavigation(),n.get(db,null,d.XFs.Optional)?.setUpPreloading(),n.get(Tv,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const cb=new d.OlP("",{factory:()=>new yi.x}),ef=new d.OlP("",{providedIn:"root",factory:()=>1}),db=new d.OlP("");function Zx(n){return ys(0,[{provide:db,useExisting:Gx},{provide:Hx,useExisting:n}])}const Ml=new d.OlP("ROUTER_FORROOT_GUARD"),hb=[Ae,{provide:pl,useClass:Eg},cr,Dg,{provide:Gu,useFactory:function Dv(n){return n.routerState.root},deps:[cr]},Iv,[]];function fb(){return new d.PXZ("Router",cr)}let $g=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[hb,[],{provide:Sl,multi:!0,useValue:t},{provide:Ml,useFactory:gb,deps:[[cr,new d.FiY,new d.tp0]]},{provide:Vg,useValue:r||{}},r?.useHash?{provide:Pe,useClass:ve}:{provide:Pe,useClass:Je},{provide:Tv,useFactory:()=>{const n=(0,d.f3M)(Vr),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Vg),r=(0,d.f3M)(Ug),i=(0,d.f3M)(pl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ob(i,r,n,e,t)}},r?.preloadingStrategy?Zx(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:fb},r?.initialNavigation?Hg(r):[],r?.bindToComponentInputs?ys(8,[FI,{provide:Mg,useExisting:FI}]).\u0275providers:[],[{provide:Qx,useFactory:ub},{provide:d.tb,multi:!0,useExisting:Qx}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Sl,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ml,8))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function gb(n){return"guarded"}function Hg(n){return["disabled"===n.initialNavigation?ys(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(cr);return()=>{e.setUpLocationChangeListener()}}},{provide:ef,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ys(2,[{provide:ef,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(Fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(cr),a=e.get(cb);Bg(i,()=>{r(!0)}),e.get(Ug).afterPreactivation=()=>(r(!0),a.closed?(0,dt.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const Qx=new d.OlP("");var z=k(5861),zg=k(305);function Gg(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const a=new zg.Hp({next:c=>{r(c),a.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new zs)}});n.subscribe(a)})}class Mv extends Lu.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const Ju={setInterval(n,e,...t){const{delegate:r}=Ju;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Ju;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Do=k(9039);class nf extends Mv{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(a,this.id,t),this}requestAsyncId(e,t,r=0){return Ju.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Ju.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(a){r=!0,i=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Do.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const rf={now:()=>(rf.delegate||Date).now(),delegate:void 0};class sf{constructor(e,t=sf.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}sf.now=rf.now;class _b extends sf{constructor(e,t=sf.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Wg=new _b(nf),Pl=Wg;var eP=k(671);const qg=function vb(n,e){return n===e||n!=n&&e!=e},Pv=function e3(n,e){for(var t=n.length;t--;)if(qg(n[t][0],e))return t;return-1};var sP=Array.prototype.splice;function Ua(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ua.prototype.clear=function yb(){this.__data__=[],this.size=0},Ua.prototype.delete=function t3(n){var e=this.__data__,t=Pv(e,n);return!(t<0||(t==e.length-1?e.pop():sP.call(e,t,1),--this.size,0))},Ua.prototype.get=function Zg(n){var e=this.__data__,t=Pv(e,n);return t<0?void 0:e[t][1]},Ua.prototype.has=function Ov(n){return Pv(this.__data__,n)>-1},Ua.prototype.set=function Ol(n,e){var t=this.__data__,r=Pv(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const Va=Ua,Uv="object"==typeof global&&global&&global.Object===Object&&global;var uP="object"==typeof self&&self&&self.Object===Object&&self;const vs=Uv||uP||Function("return this")(),Rl=vs.Symbol;var Cb=Object.prototype,i3=Cb.hasOwnProperty,lP=Cb.toString,Ba=Rl?Rl.toStringTag:void 0;var Bv=Object.prototype.toString;var jv=Rl?Rl.toStringTag:void 0;const uf=function s3(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":jv&&jv in Object(n)?function Vv(n){var e=i3.call(n,Ba),t=n[Ba];try{n[Ba]=void 0;var r=!0}catch{}var i=lP.call(n);return r&&(e?n[Ba]=t:delete n[Ba]),i}(n):function Qg(n){return Bv.call(n)}(n)},cf=function Jg(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},Tb=function gP(n){if(!cf(n))return!1;var e=uf(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var n,mP=vs["__core-js_shared__"],$v=(n=/[^.]+$/.exec(mP&&mP.keys&&mP.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var Db=Function.prototype.toString;const Xu=function _P(n){if(null!=n){try{return Db.call(n)}catch{}try{return n+""}catch{}}return""};var yP=/^\[object .+?Constructor\]$/,Mb=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Ks=function xb(n){return!(!cf(n)||function Hv(n){return!!$v&&$v in n}(n))&&(Tb(n)?Mb:yP).test(Xu(n))},Fi=function Gv(n,e){var t=function Pb(n,e){return n?.[e]}(n,e);return Ks(t)?t:void 0},df=Fi(vs,"Map"),hf=Fi(Object,"create");var EP=Object.prototype.hasOwnProperty;var Kv=Object.prototype.hasOwnProperty;function Fl(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Fl.prototype.clear=function qv(){this.__data__=hf?hf(null):{},this.size=0},Fl.prototype.delete=function Ob(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},Fl.prototype.get=function Zv(n){var e=this.__data__;if(hf){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return EP.call(e,n)?e[n]:void 0},Fl.prototype.has=function Nb(n){var e=this.__data__;return hf?void 0!==e[n]:Kv.call(e,n)},Fl.prototype.set=function kb(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=hf&&void 0===e?"__lodash_hash_undefined__":e,this};const Lb=Fl,em=function Ul(n,e){var t=n.__data__;return function Ll(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function Vl(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Vl.prototype.clear=function DP(){this.size=0,this.__data__={hash:new Lb,map:new(df||Va),string:new Lb}},Vl.prototype.delete=function SP(n){var e=em(this,n).delete(n);return this.size-=e?1:0,e},Vl.prototype.get=function Bb(n){return em(this,n).get(n)},Vl.prototype.has=function ff(n){return em(this,n).has(n)},Vl.prototype.set=function jb(n,e){var t=em(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const AP=Vl;function pf(n){var e=this.__data__=new Va(n);this.size=e.size}pf.prototype.clear=function Kg(){this.__data__=new Va,this.size=0},pf.prototype.delete=function kv(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},pf.prototype.get=function Yg(n){return this.__data__.get(n)},pf.prototype.has=function Lv(n){return this.__data__.has(n)},pf.prototype.set=function xP(n,e){var t=this.__data__;if(t instanceof Va){var r=t.__data__;if(!df||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new AP(r)}return t.set(n,e),this.size=t.size,this};const PP=pf;var zb=function(){try{var n=Fi(Object,"defineProperty");return n({},"",{}),n}catch{}}();const Qv=zb,gf=function f3(n,e,t){"__proto__"==e&&Qv?Qv(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var Gb=Object.prototype.hasOwnProperty;const qb=function Wb(n,e,t){var r=n[e];(!Gb.call(n,e)||!qg(r,t)||void 0===t&&!(e in n))&&gf(n,e,t)},mf=function Zb(n,e,t,r){var i=!t;t||(t={});for(var a=-1,c=e.length;++a<c;){var f=e[a],g=r?r(t[f],n[f],f,t,n):void 0;void 0===g&&(g=n[f]),i?gf(t,f,g):qb(t,f,g)}return t},Ao=function Yb(n){return null!=n&&"object"==typeof n},_f=function OP(n){return Ao(n)&&"[object Arguments]"==uf(n)};var ec=Object.prototype,Jv=ec.hasOwnProperty,yf=ec.propertyIsEnumerable,Jb=_f(function(){return arguments}())?_f:function(n){return Ao(n)&&Jv.call(n,"callee")&&!yf.call(n,"callee")};const Xv=Jb,vf=Array.isArray;var eT="object"==typeof exports&&exports&&!exports.nodeType&&exports,tT=eT&&"object"==typeof module&&module&&!module.nodeType&&module,n0=tT&&tT.exports===eT?vs.Buffer:void 0;const nT=(n0?n0.isBuffer:void 0)||function Xb(){return!1};var rT=/^(?:0|[1-9]\d*)$/;const LP=function iT(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&rT.test(n))&&n>-1&&n%1==0&&n<e},sT=function Ji(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991};var mn={};mn["[object Float32Array]"]=mn["[object Float64Array]"]=mn["[object Int8Array]"]=mn["[object Int16Array]"]=mn["[object Int32Array]"]=mn["[object Uint8Array]"]=mn["[object Uint8ClampedArray]"]=mn["[object Uint16Array]"]=mn["[object Uint32Array]"]=!0,mn["[object Arguments]"]=mn["[object Array]"]=mn["[object ArrayBuffer]"]=mn["[object Boolean]"]=mn["[object DataView]"]=mn["[object Date]"]=mn["[object Error]"]=mn["[object Function]"]=mn["[object Map]"]=mn["[object Number]"]=mn["[object Object]"]=mn["[object RegExp]"]=mn["[object Set]"]=mn["[object String]"]=mn["[object WeakMap]"]=!1;const rm=function hT(n){return function(e){return n(e)}};var a0="object"==typeof exports&&exports&&!exports.nodeType&&exports,tc=a0&&"object"==typeof module&&module&&!module.nodeType&&module,u0=tc&&tc.exports===a0&&Uv.process;const ja=function(){try{return tc&&tc.require&&tc.require("util").types||u0&&u0.binding&&u0.binding("util")}catch{}}();var fT=ja&&ja.isTypedArray;const XP=fT?rm(fT):function m3(n){return Ao(n)&&sT(n.length)&&!!mn[uf(n)]};var wf=Object.prototype.hasOwnProperty;const Cf=function gT(n,e){var t=vf(n),r=!t&&Xv(n),i=!t&&!r&&nT(n),a=!t&&!r&&!i&&XP(n),c=t||r||i||a,f=c?function Dt(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],g=f.length;for(var v in n)(e||wf.call(n,v))&&(!c||!("length"==v||i&&("offset"==v||"parent"==v)||a&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||LP(v,g)))&&f.push(v);return f};var _3=Object.prototype;const sm=function eO(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||_3)},_T=function mT(n,e){return function(t){return n(e(t))}},yT=_T(Object.keys,Object);var Ef=Object.prototype.hasOwnProperty;const ET=function CT(n){return null!=n&&sT(n.length)&&!Tb(n)},nc=function rO(n){return ET(n)?Cf(n):function nO(n){if(!sm(n))return yT(n);var e=[];for(var t in Object(n))Ef.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n)};var cO=Object.prototype.hasOwnProperty;const dO=function lO(n){if(!cf(n))return function oO(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=sm(n),t=[];for(var r in n)"constructor"==r&&(e||!cO.call(n,r))||t.push(r);return t},If=function IT(n){return ET(n)?Cf(n,!0):dO(n)};var bT="object"==typeof exports&&exports&&!exports.nodeType&&exports,TT=bT&&"object"==typeof module&&module&&!module.nodeType&&module,DT=TT&&TT.exports===bT?vs.Buffer:void 0,ST=DT?DT.allocUnsafe:void 0;const c0=function xT(){return[]};var am=Object.prototype.propertyIsEnumerable,PT=Object.getOwnPropertySymbols,_O=PT?function(n){return null==n?[]:(n=Object(n),function mO(n,e){for(var t=-1,r=null==n?0:n.length,i=0,a=[];++t<r;){var c=n[t];e(c,t,n)&&(a[i++]=c)}return a}(PT(n),function(e){return am.call(n,e)}))}:c0;const bf=_O,Kr=function Tf(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n},Df=_T(Object.getPrototypeOf,Object);var l0=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)Kr(e,bf(n)),n=Df(n);return e}:c0;const ic=l0,sc=function $l(n,e,t){var r=e(n);return vf(n)?r:Kr(r,t(n))},zl=function Hl(n){return sc(n,nc,bf)},Wl=function Gl(n){return sc(n,If,ic)},um=Fi(vs,"DataView"),cm=Fi(vs,"Promise"),lm=Fi(vs,"Set"),dm=Fi(vs,"WeakMap");var d0="[object Map]",FT="[object Promise]",vO="[object Set]",wO="[object WeakMap]",LT="[object DataView]",CO=Xu(um),w3=Xu(df),EO=Xu(cm),C3=Xu(lm),IO=Xu(dm),oc=uf;(um&&oc(new um(new ArrayBuffer(1)))!=LT||df&&oc(new df)!=d0||cm&&oc(cm.resolve())!=FT||lm&&oc(new lm)!=vO||dm&&oc(new dm)!=wO)&&(oc=function(n){var e=uf(n),t="[object Object]"==e?n.constructor:void 0,r=t?Xu(t):"";if(r)switch(r){case CO:return LT;case w3:return d0;case EO:return FT;case C3:return vO;case IO:return wO}return e});const f0=oc;var Sf=Object.prototype.hasOwnProperty;const ql=vs.Uint8Array,m0=function VT(n){var e=new n.constructor(n.byteLength);return new ql(e).set(new ql(n)),e};var TO=/\w*$/;var fm=Rl?Rl.prototype:void 0,Mf=fm?fm.valueOf:void 0;const UO=function LO(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return m0(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function Af(n,e){var t=e?m0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function AO(n,e){var t=e?m0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function DO(n){var e=new n.constructor(n.source,TO.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function pm(n){return Mf?Object(Mf.call(n)):{}}(n)}};var WT=Object.create,C0=function(){function n(){}return function(e){if(!cf(e))return{};if(WT)return WT(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const E0=C0;var _m=ja&&ja.isMap;const I0=_m?rm(_m):function BO(n){return Ao(n)&&"[object Map]"==f0(n)};var b0=ja&&ja.isSet;const eD=b0?rm(b0):function jO(n){return Ao(n)&&"[object Set]"==f0(n)};var T0="[object Arguments]",S0="[object Function]",A0="[object Object]",_n={};_n[T0]=_n["[object Array]"]=_n["[object ArrayBuffer]"]=_n["[object DataView]"]=_n["[object Boolean]"]=_n["[object Date]"]=_n["[object Float32Array]"]=_n["[object Float64Array]"]=_n["[object Int8Array]"]=_n["[object Int16Array]"]=_n["[object Int32Array]"]=_n["[object Map]"]=_n["[object Number]"]=_n[A0]=_n["[object RegExp]"]=_n["[object Set]"]=_n["[object String]"]=_n["[object Symbol]"]=_n["[object Uint8Array]"]=_n["[object Uint8ClampedArray]"]=_n["[object Uint16Array]"]=_n["[object Uint32Array]"]=!0,_n["[object Error]"]=_n[S0]=_n["[object WeakMap]"]=!1;const QO=function vm(n,e,t,r,i,a){var c,f=1&e,g=2&e,v=4&e;if(t&&(c=i?t(n,r,i,a):t(n)),void 0!==c)return c;if(!cf(n))return n;var b=vf(n);if(b){if(c=function g0(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&Sf.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!f)return function AT(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(n,c)}else{var T=f0(n),A=T==S0||"[object GeneratorFunction]"==T;if(nT(n))return function pO(n,e){if(e)return n.slice();var t=n.length,r=ST?ST(t):new n.constructor(t);return n.copy(r),r}(n,f);if(T==A0||T==T0||A&&!i){if(c=g||A?{}:function qT(n){return"function"!=typeof n.constructor||sm(n)?{}:E0(Df(n))}(n),!f)return g?function Bl(n,e){return mf(n,ic(n),e)}(n,function hO(n,e){return n&&mf(e,If(e),n)}(c,n)):function yO(n,e){return mf(n,bf(n),e)}(n,function iO(n,e){return n&&mf(e,nc(e),n)}(c,n))}else{if(!_n[T])return i?n:{};c=UO(n,T,f)}}a||(a=new PP);var R=a.get(n);if(R)return R;a.set(n,c),eD(n)?n.forEach(function(J){c.add(vm(J,e,t,J,n,a))}):I0(n)&&n.forEach(function(J,be){c.set(be,vm(J,e,t,be,n,a))});var Q=b?void 0:(v?g?Wl:zl:g?If:nc)(n);return function d3(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(Q||n,function(J,be){Q&&(J=n[be=J]),qb(c,be,vm(J,e,t,be,n,a))}),c},xf=function cD(n){return QO(n,5)};var on=k(7592);(0,on.registerVersion)("firebase","9.23.0","app");var lr=k(4537),Li=k(7879),$=k(9058),T3=k(1878);class lD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function O0(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const Cs="@firebase/app",Ha=new Li.Yd("@firebase/app"),uc="[DEFAULT]",k0={[Cs]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},za=new Map,Of=new Map;function wD(n,e){try{n.container.addComponent(e)}catch(t){Ha.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wi(n){const e=n.name;if(Of.has(e))return Ha.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,n);for(const t of za.values())wD(t,n);return!0}function cc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const sa=new $.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class pN{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lr.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sa.create("app-deleted",{appName:this._name})}}function F0(n=uc){const e=za.get(n);if(!e&&n===uc&&(0,$.aH)())return function gN(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:uc,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw sa.create("bad-app-name",{appName:String(i)});if(t||(t=(0,$.aH)()),!t)throw sa.create("no-options");const a=za.get(i);if(a){if((0,$.vZ)(t,a.options)&&(0,$.vZ)(r,a.config))return a;throw sa.create("duplicate-app",{appName:i})}const c=new lr.H0(i);for(const g of Of.values())c.addComponent(g);const f=new pN(t,r,c);return za.set(i,f),f}();if(!e)throw sa.create("no-app",{appName:n});return e}function oi(n,e,t){var r;let i=null!==(r=k0[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${i}" with version "${e}":`];return a&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ha.warn(f.join(" "))}wi(new lr.wA(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const mN="firebase-heartbeat-database",_N=1,Nf="firebase-heartbeat-store";let U0=null;function ED(){return U0||(U0=(0,T3.X3)(mN,_N,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Nf)}}).catch(n=>{throw sa.create("idb-open",{originalErrorMessage:n.message})})),U0}function Cm(){return Cm=(0,z.Z)(function*(n){try{return yield(yield ED()).transaction(Nf).objectStore(Nf).get(B0(n))}catch(e){if(e instanceof $.ZR)Ha.warn(e.message);else{const t=sa.create("idb-get",{originalErrorMessage:e?.message});Ha.warn(t.message)}}}),Cm.apply(this,arguments)}function V0(n,e){return Em.apply(this,arguments)}function Em(){return Em=(0,z.Z)(function*(n,e){try{const r=(yield ED()).transaction(Nf,"readwrite");yield r.objectStore(Nf).put(e,B0(n)),yield r.done}catch(t){if(t instanceof $.ZR)Ha.warn(t.message);else{const r=sa.create("idb-set",{originalErrorMessage:t?.message});Ha.warn(r.message)}}}),Em.apply(this,arguments)}function B0(n){return`${n.name}!${n.options.appId}`}class DD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,z.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=j0();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(a=>a.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,z.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=j0(),{heartbeatsToSend:r,unsentEntries:i}=function SD(n,e=1024){const t=[];let r=n.slice();for(const i of n){const a=t.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),Ga(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Ga(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),a=(0,$.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),a})()}}function j0(){return(new Date).toISOString().substring(0,10)}class AD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,z.Z)(function*(){return!!(0,$.hl)()&&(0,$.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,z.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function ID(n){return Cm.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,z.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return V0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,z.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return V0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}})()}}function Ga(n){return(0,$.L)(JSON.stringify({version:2,heartbeats:n})).length}!function yN(n){wi(new lr.wA("platform-logger",e=>new lD(e),"PRIVATE")),wi(new lr.wA("heartbeat",e=>new DD(e),"PRIVATE")),oi(Cs,"0.9.20",n),oi(Cs,"0.9.20","esm2017"),oi("fire-js","")}("");const vN=(n,e)=>e.some(t=>n instanceof t);let lc,wN;const H0=new WeakMap,Im=new WeakMap,CN=new WeakMap,Wa=new WeakMap,z0=new WeakMap;let qa={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Im.get(n);if("objectStoreNames"===e)return n.objectStoreNames||CN.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return nr(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Tm(n){return"function"==typeof n?function bm(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function P3(){return wN||(wN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(MD(this),e),nr(H0.get(this))}:function(...e){return nr(n.apply(MD(this),e))}:function(e,...t){const r=n.call(MD(this),e,...t);return CN.set(r,e.sort?e.sort():[e]),nr(r)}}(n):(n instanceof IDBTransaction&&function IN(n){if(Im.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Im.set(n,e)}(n),vN(n,function $0(){return lc||(lc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,qa):n)}function nr(n){if(n instanceof IDBRequest)return function EN(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(nr(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&H0.set(t,n)}).catch(()=>{}),z0.set(e,n),e}(n);if(Wa.has(n))return Wa.get(n);const e=Tm(n);return e!==n&&(Wa.set(n,e),z0.set(e,n)),e}const MD=n=>z0.get(n),DN=["get","getKey","getAll","getAllKeys","count"],PD=["put","add","delete","clear"],Dm=new Map;function G0(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Dm.get(e))return Dm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=PD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!DN.includes(t))return;const a=function(){var c=(0,z.Z)(function*(f,...g){const v=this.transaction(f,i?"readwrite":"readonly");let b=v.store;return r&&(b=b.index(g.shift())),(yield Promise.all([b[t](...g),i&&v.done]))[0]});return function(g){return c.apply(this,arguments)}}();return Dm.set(e,a),a}!function bN(n){qa=n(qa)}(n=>({...n,get:(e,t,r)=>G0(e,t)||n.get(e,t,r),has:(e,t)=>!!G0(e,t)||n.has(e,t)}));const W0="@firebase/installations",q0="0.6.4",OD=1e4,ND=`w:${q0}`,Zl="FIS_v2",SN="https://firebaseinstallations.googleapis.com/v1",AN=36e5,Oo=new $.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Z0(n){return n instanceof $.ZR&&n.code.includes("request-failed")}function K0({projectId:n}){return`${SN}/projects/${n}/installations`}function Kl(n){return{token:n.token,requestStatus:2,expiresIn:LD(n.expiresIn),creationTime:Date.now()}}function dc(n,e){return Y0.apply(this,arguments)}function Y0(){return Y0=(0,z.Z)(function*(n,e){const r=(yield e.json()).error;return Oo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}),Y0.apply(this,arguments)}function kD({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Am(n){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,z.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),Mm.apply(this,arguments)}function LD(n){return Number(n.replace("s","000"))}function Q0(){return Q0=(0,z.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=K0(n),i=kD(n),a=e.getImmediate({optional:!0});if(a){const v=yield a.getHeartbeatsHeader();v&&i.append("x-firebase-client",v)}const f={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:Zl,appId:n.appId,sdkVersion:ND})},g=yield Am(()=>fetch(r,f));if(g.ok){const v=yield g.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:Kl(v.authToken)}}throw yield dc("Create Installation",g)}),Q0.apply(this,arguments)}function VD(n){return new Promise(e=>{setTimeout(e,n)})}const N3=/^[cdef][\w-]{21}$/,BD="";function R3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function jD(n){return function O3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return N3.test(t)?t:BD}catch{return BD}}function oa(n){return`${n.appName}!${n.appId}`}const Yl=new Map;function $D(n,e){const t=oa(n);zD(t,e),function PN(n,e){const t=function GD(){return!hc&&"BroadcastChannel"in self&&(hc=new BroadcastChannel("[Firebase] FID Change"),hc.onmessage=n=>{zD(n.data.key,n.data.fid)}),hc}();t&&t.postMessage({key:n,fid:e}),function ON(){0===Yl.size&&hc&&(hc.close(),hc=null)}()}(t,e)}function zD(n,e){const t=Yl.get(n);if(t)for(const r of t)r(e)}let hc=null;const NN="firebase-installations-database",WD=1,fc="firebase-installations-store";let J0=null;function pc(){return J0||(J0=function xD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),f=nr(c);return r&&c.addEventListener("upgradeneeded",g=>{r(nr(c.result),g.oldVersion,g.newVersion,nr(c.transaction))}),t&&c.addEventListener("blocked",()=>t()),f.then(g=>{a&&g.addEventListener("close",()=>a()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}(NN,WD,{upgrade:(n,e)=>{0===e&&n.createObjectStore(fc)}})),J0}function xm(n,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,z.Z)(function*(n,e){const t=oa(n),i=(yield pc()).transaction(fc,"readwrite"),a=i.objectStore(fc),c=yield a.get(t);return yield a.put(e,t),yield i.done,(!c||c.fid!==e.fid)&&$D(n,e.fid),e}),Pm.apply(this,arguments)}function X0(n){return Om.apply(this,arguments)}function Om(){return Om=(0,z.Z)(function*(n){const e=oa(n),r=(yield pc()).transaction(fc,"readwrite");yield r.objectStore(fc).delete(e),yield r.done}),Om.apply(this,arguments)}function kf(n,e){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,z.Z)(function*(n,e){const t=oa(n),i=(yield pc()).transaction(fc,"readwrite"),a=i.objectStore(fc),c=yield a.get(t),f=e(c);return void 0===f?yield a.delete(t):yield a.put(f,t),yield i.done,f&&(!c||c.fid!==f.fid)&&$D(n,f.fid),f}),Nm.apply(this,arguments)}function ew(n){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,z.Z)(function*(n){let e;const t=yield kf(n.appConfig,r=>{const i=function RN(n){return KD(n||{fid:R3(),registrationStatus:0})}(r),a=function qD(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Oo.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function ZD(n,e){return tw.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:kN(n)}:{installationEntry:e}}(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===BD?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),Ff.apply(this,arguments)}function tw(){return tw=(0,z.Z)(function*(n,e){try{const t=yield function UD(n,e){return Q0.apply(this,arguments)}(n,e);return xm(n.appConfig,t)}catch(t){throw Z0(t)&&409===t.customData.serverCode?yield X0(n.appConfig):yield xm(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),tw.apply(this,arguments)}function kN(n){return nw.apply(this,arguments)}function nw(){return nw=(0,z.Z)(function*(n){let e=yield Rm(n.appConfig);for(;1===e.registrationStatus;)yield VD(100),e=yield Rm(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield ew(n);return r||t}return e}),nw.apply(this,arguments)}function Rm(n){return kf(n,e=>{if(!e)throw Oo.create("installation-not-found");return KD(e)})}function KD(n){return function YD(n){return 1===n.registrationStatus&&n.registrationTime+OD<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function rw(){return rw=(0,z.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function LN(n,{fid:e}){return`${K0(n)}/${e}/authTokens:generate`}(n,t),i=function FD(n,{refreshToken:e}){const t=kD(n);return t.append("Authorization",function xN(n){return`${Zl} ${n}`}(e)),t}(n,t),a=e.getImmediate({optional:!0});if(a){const v=yield a.getHeartbeatsHeader();v&&i.append("x-firebase-client",v)}const f={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:ND,appId:n.appId}})},g=yield Am(()=>fetch(r,f));if(g.ok)return Kl(yield g.json());throw yield dc("Generate Auth Token",g)}),rw.apply(this,arguments)}function iw(n){return sw.apply(this,arguments)}function sw(){return sw=(0,z.Z)(function*(n,e=!1){let t;const r=yield kf(n.appConfig,a=>{if(!XD(a))throw Oo.create("not-registered");const c=a.authToken;if(!e&&function VN(n){return 2===n.requestStatus&&!function eS(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+AN}(n)}(c))return a;if(1===c.requestStatus)return t=function UN(n,e){return ow.apply(this,arguments)}(n,e),a;{if(!navigator.onLine)throw Oo.create("app-offline");const f=function BN(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(a);return t=function JD(n,e){return km.apply(this,arguments)}(n,f),f}});return t?yield t:r.authToken}),sw.apply(this,arguments)}function ow(){return ow=(0,z.Z)(function*(n,e){let t=yield QD(n.appConfig);for(;1===t.authToken.requestStatus;)yield VD(100),t=yield QD(n.appConfig);const r=t.authToken;return 0===r.requestStatus?iw(n,e):r}),ow.apply(this,arguments)}function QD(n){return kf(n,e=>{if(!XD(e))throw Oo.create("not-registered");return function jN(n){return 1===n.requestStatus&&n.requestTime+OD<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function km(){return km=(0,z.Z)(function*(n,e){try{const t=yield function FN(n,e){return rw.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield xm(n.appConfig,r),t}catch(t){if(!Z0(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield xm(n.appConfig,r)}else yield X0(n.appConfig);throw t}}),km.apply(this,arguments)}function XD(n){return void 0!==n&&2===n.registrationStatus}function aw(){return aw=(0,z.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield ew(e);return r?r.catch(console.error):iw(e).catch(console.error),t.fid}),aw.apply(this,arguments)}function Lf(){return Lf=(0,z.Z)(function*(n,e=!1){const t=n;return yield function tS(n){return Uf.apply(this,arguments)}(t),(yield iw(t,e)).token}),Lf.apply(this,arguments)}function Uf(){return Uf=(0,z.Z)(function*(n){const{registrationPromise:e}=yield ew(n);e&&(yield e)}),Uf.apply(this,arguments)}function nS(n){return Oo.create("missing-app-config-values",{valueName:n})}const Lm="installations",WN=n=>{const e=n.getProvider("app").getImmediate(),t=function GN(n){if(!n||!n.options)throw nS("App Configuration");if(!n.name)throw nS("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw nS(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:cc(e,"heartbeat"),_delete:()=>Promise.resolve()}},rS=n=>{const t=cc(n.getProvider("app").getImmediate(),Lm).getImmediate();return{getId:()=>function $N(n){return aw.apply(this,arguments)}(t),getToken:i=>function uw(n){return Lf.apply(this,arguments)}(t,i)}};(function iS(){wi(new lr.wA(Lm,WN,"PUBLIC")),wi(new lr.wA("installations-internal",rS,"PRIVATE"))})(),oi(W0,q0),oi(W0,q0,"esm2017");const hw="@firebase/remote-config",Ci=new $.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class eR{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,z.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const a=yield t.client.fetch(e),c=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===a.status&&c.push(t.storage.setLastSuccessfulFetchResponse(a)),yield Promise.all(c),a})()}}function tR(n=navigator){return n.languages&&n.languages[0]||n.language}class nR{constructor(e,t,r,i,a,c){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=c}fetch(e){var t=this;return(0,z.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),c=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,f={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},g={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:tR()},v={method:"POST",headers:f,body:JSON.stringify(g)},b=fetch(c,v),T=new Promise((be,Ge)=>{e.signal.addEventListener(()=>{const ke=new Error("The operation was aborted.");ke.name="AbortError",Ge(ke)})});let A;try{yield Promise.race([b,T]),A=yield b}catch(be){let Ge="fetch-client-network";throw"AbortError"===be?.name&&(Ge="fetch-timeout"),Ci.create(Ge,{originalErrorMessage:be?.message})}let R=A.status;const W=A.headers.get("ETag")||void 0;let Q,J;if(200===A.status){let be;try{be=yield A.json()}catch(Ge){throw Ci.create("fetch-client-parse",{originalErrorMessage:Ge?.message})}Q=be.entries,J=be.state}if("INSTANCE_STATE_UNSPECIFIED"===J?R=500:"NO_CHANGE"===J?R=304:("NO_TEMPLATE"===J||"EMPTY_CONFIG"===J)&&(Q={}),304!==R&&200!==R)throw Ci.create("fetch-status",{httpStatus:R});return{status:R,eTag:W,config:Q}})()}}class cS{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,z.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,z.Z)(function*(){yield function rR(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Ci.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const a=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),a}catch(a){if(!function Vf(n){if(!(n instanceof $.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(a))throw a;const c={throttleEndTimeMillis:Date.now()+(0,$.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(c),i.attemptFetch(e,c)}})()}}class hS{constructor(e,t,r,i,a){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bf(n,e){const t=n.target.error||void 0;return Ci.create(e,{originalErrorMessage:t&&t?.message})}const Za="app_namespace_store";class fS{constructor(e,t,r,i=function j3(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Bf(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Za,{keyPath:"compositeKey"})}}catch(t){e(Ci.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,z.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const f=r.transaction([Za],"readonly").objectStore(Za),g=t.createCompositeKey(e);try{const v=f.get(g);v.onerror=b=>{a(Bf(b,"storage-get"))},v.onsuccess=b=>{const T=b.target.result;i(T?T.value:void 0)}}catch(v){a(Ci.create("storage-get",{originalErrorMessage:v?.message}))}})})()}set(e,t){var r=this;return(0,z.Z)(function*(){const i=yield r.openDbPromise;return new Promise((a,c)=>{const g=i.transaction([Za],"readwrite").objectStore(Za),v=r.createCompositeKey(e);try{const b=g.put({compositeKey:v,value:t});b.onerror=T=>{c(Bf(T,"storage-set"))},b.onsuccess=()=>{a()}}catch(b){c(Ci.create("storage-set",{originalErrorMessage:b?.message}))}})})()}delete(e){var t=this;return(0,z.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const f=r.transaction([Za],"readwrite").objectStore(Za),g=t.createCompositeKey(e);try{const v=f.delete(g);v.onerror=b=>{a(Bf(b,"storage-delete"))},v.onsuccess=()=>{i()}}catch(v){a(Ci.create("storage-delete",{originalErrorMessage:v?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class sR{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,z.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),a=yield t;a&&(e.lastFetchStatus=a);const c=yield r;c&&(e.lastSuccessfulFetchTimestampMillis=c);const f=yield i;f&&(e.activeConfig=f)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function jf(){return vw.apply(this,arguments)}function vw(){return(vw=(0,z.Z)(function*(){if(!(0,$.hl)())return!1;try{return yield(0,$.eu)()}catch{return!1}})).apply(this,arguments)}!function pS(){wi(new lr.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ci.create("registration-window");if(!(0,$.hl)())throw Ci.create("indexed-db-unavailable");const{projectId:a,apiKey:c,appId:f}=r.options;if(!a)throw Ci.create("registration-project-id");if(!c)throw Ci.create("registration-api-key");if(!f)throw Ci.create("registration-app-id");const g=new fS(f,r.name,t=t||"firebase"),v=new sR(g),b=new Li.Yd(hw);b.logLevel=Li.in.ERROR;const T=new nR(i,"10.5.0",t,a,c,f),A=new cS(T,g),R=new eR(A,g,v,b),W=new hS(r,R,v,g,b);return function YN(n){const e=(0,$.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(W),W},"PUBLIC").setMultipleInstances(!0)),oi(hw,"0.4.4"),oi(hw,"0.4.4","esm2017")}();const ww=(n,e)=>e.some(t=>n instanceof t);let gS,oR;const Jl=new WeakMap,Cw=new WeakMap,mS=new WeakMap,Ew=new WeakMap,Xl=new WeakMap;let Bm={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Cw.get(n);if("objectStoreNames"===e)return n.objectStoreNames||mS.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return No(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function lR(n){return"function"==typeof n?function cR(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function H3(){return oR||(oR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Iw(this),e),No(Jl.get(this))}:function(...e){return No(n.apply(Iw(this),e))}:function(e,...t){const r=n.call(Iw(this),e,...t);return mS.set(r,e.sort?e.sort():[e]),No(r)}}(n):(n instanceof IDBTransaction&&function uR(n){if(Cw.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Cw.set(n,e)}(n),ww(n,function aR(){return gS||(gS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Bm):n)}function No(n){if(n instanceof IDBRequest)return function _S(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(No(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Jl.set(t,n)}).catch(()=>{}),Xl.set(e,n),e}(n);if(Ew.has(n))return Ew.get(n);const e=lR(n);return e!==n&&(Ew.set(n,e),Xl.set(e,n)),e}const Iw=n=>Xl.get(n);function yS(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),f=No(c);return r&&c.addEventListener("upgradeneeded",g=>{r(No(c.result),g.oldVersion,g.newVersion,No(c.transaction))}),t&&c.addEventListener("blocked",()=>t()),f.then(g=>{a&&g.addEventListener("close",()=>a()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}function $m(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),No(t).then(()=>{})}const Hm=["get","getKey","getAll","getAllKeys","count"],dR=["put","add","delete","clear"],bw=new Map;function Tw(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(bw.get(e))return bw.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=dR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Hm.includes(t))return;const a=function(){var c=(0,z.Z)(function*(f,...g){const v=this.transaction(f,i?"readwrite":"readonly");let b=v.store;return r&&(b=b.index(g.shift())),(yield Promise.all([b[t](...g),i&&v.done]))[0]});return function(g){return c.apply(this,arguments)}}();return bw.set(e,a),a}!function jm(n){Bm=n(Bm)}(n=>({...n,get:(e,t,r)=>Tw(e,t)||n.get(e,t,r),has:(e,t)=>!!Tw(e,t)||n.has(e,t)}));const vS="/firebase-messaging-sw.js",Dw="/firebase-cloud-messaging-push-scope",Sw="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hR="https://fcmregistrations.googleapis.com/v1",Aw="google.c.a.c_id",wS="google.c.a.c_l",fR="google.c.a.ts";var ed=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(ed||{});function Ro(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xw(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}const $f="fcm_token_details_db",gR=5,CS="fcm_token_object_Store";function Pw(){return Pw=(0,z.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(a=>a.name).includes($f))return null;let e=null;return(yield yS($f,gR,{upgrade:(r=(0,z.Z)(function*(i,a,c,f){var g;if(a<2||!i.objectStoreNames.contains(CS))return;const v=f.objectStore(CS),b=yield v.index("fcmSenderId").get(n);if(yield v.clear(),b)if(2===a){const T=b;if(!T.auth||!T.p256dh||!T.endpoint)return;e={token:T.fcmToken,createTime:null!==(g=T.createTime)&&void 0!==g?g:Date.now(),subscriptionOptions:{auth:T.auth,p256dh:T.p256dh,endpoint:T.endpoint,swScope:T.swScope,vapidKey:"string"==typeof T.vapidKey?T.vapidKey:Ro(T.vapidKey)}}}else if(3===a){const T=b;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Ro(T.auth),p256dh:Ro(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Ro(T.vapidKey)}}}else if(4===a){const T=b;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Ro(T.auth),p256dh:Ro(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Ro(T.vapidKey)}}}}),function(a,c,f,g){return r.apply(this,arguments)})})).close(),yield $m($f),yield $m("fcm_vapid_details_db"),yield $m("undefined"),function ES(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),Pw.apply(this,arguments)}const Ow="firebase-messaging-database",IS=1,gc="firebase-messaging-store";let zm=null;function Gm(){return zm||(zm=yS(Ow,IS,{upgrade:(n,e)=>{0===e&&n.createObjectStore(gc)}})),zm}function bS(n){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,z.Z)(function*(n){const e=Yr(n),r=yield(yield Gm()).transaction(gc).objectStore(gc).get(e);if(r)return r;{const i=yield function mR(n){return Pw.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield qm(n,i),i}}),Wm.apply(this,arguments)}function qm(n,e){return Nw.apply(this,arguments)}function Nw(){return Nw=(0,z.Z)(function*(n,e){const t=Yr(n),i=(yield Gm()).transaction(gc,"readwrite");return yield i.objectStore(gc).put(e,t),yield i.done,e}),Nw.apply(this,arguments)}function Zm(){return Zm=(0,z.Z)(function*(n){const e=Yr(n),r=(yield Gm()).transaction(gc,"readwrite");yield r.objectStore(gc).delete(e),yield r.done}),Zm.apply(this,arguments)}function Yr({appConfig:n}){return n.appId}const Qr=new $.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function _R(n,e){return DS.apply(this,arguments)}function DS(){return DS=(0,z.Z)(function*(n,e){const t=yield MS(n),r=xS(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(AS(n.appConfig),i)).json()}catch(c){throw Qr.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(a.error)throw Qr.create("token-subscribe-failed",{errorInfo:a.error.message});if(!a.token)throw Qr.create("token-subscribe-no-token");return a.token}),DS.apply(this,arguments)}function Km(){return Km=(0,z.Z)(function*(n,e){const t=yield MS(n),r=xS(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(`${AS(n.appConfig)}/${e.token}`,i)).json()}catch(c){throw Qr.create("token-update-failed",{errorInfo:c?.toString()})}if(a.error)throw Qr.create("token-update-failed",{errorInfo:a.error.message});if(!a.token)throw Qr.create("token-update-no-token");return a.token}),Km.apply(this,arguments)}function Ym(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,z.Z)(function*(n,e){const r={method:"DELETE",headers:yield MS(n)};try{const a=yield(yield fetch(`${AS(n.appConfig)}/${e}`,r)).json();if(a.error)throw Qr.create("token-unsubscribe-failed",{errorInfo:a.error.message})}catch(i){throw Qr.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}}),SS.apply(this,arguments)}function AS({projectId:n}){return`${hR}/projects/${n}/registrations`}function MS(n){return mc.apply(this,arguments)}function mc(){return mc=(0,z.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),mc.apply(this,arguments)}function xS({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==Sw&&(i.web.applicationPubKey=r),i}const Rw=6048e5;function Qm(){return Qm=(0,z.Z)(function*(n){const e=yield function Jm(n,e){return zf.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ro(e.getKey("auth")),p256dh:Ro(e.getKey("p256dh"))},r=yield bS(n.firebaseDependencies);if(r){if(function G3(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+Rw?function vR(n,e){return Hf.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield Ym(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Fw(n.firebaseDependencies,t)}return Fw(n.firebaseDependencies,t)}),Qm.apply(this,arguments)}function kw(){return kw=(0,z.Z)(function*(n){const e=yield bS(n.firebaseDependencies);e&&(yield Ym(n.firebaseDependencies,e.token),yield function TS(n){return Zm.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),kw.apply(this,arguments)}function Hf(){return Hf=(0,z.Z)(function*(n,e){try{const t=yield function z3(n,e){return Km.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield qm(n.firebaseDependencies,r),t}catch(t){throw yield function PS(n){return kw.apply(this,arguments)}(n),t}}),Hf.apply(this,arguments)}function Fw(n,e){return Lw.apply(this,arguments)}function Lw(){return Lw=(0,z.Z)(function*(n,e){const r={token:yield _R(n,e),createTime:Date.now(),subscriptionOptions:e};return yield qm(n,r),r.token}),Lw.apply(this,arguments)}function zf(){return zf=(0,z.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xw(e)})}),zf.apply(this,arguments)}function Uw(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function wR(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const a=e.notification.icon;a&&(n.notification.icon=a)}(e,n),function OS(n,e){e.data&&(n.data=e.data)}(e,n),function nd(n,e){var t,r,i,a,c;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const f=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(a=e.notification)||void 0===a?void 0:a.click_action;f&&(n.fcmOptions.link=f);const g=null===(c=e.fcmOptions)||void 0===c?void 0:c.analytics_label;g&&(n.fcmOptions.analyticsLabel=g)}(e,n),e}function Vw(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function NS(n){return Qr.create("missing-app-config-values",{valueName:n})}Vw("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Vw("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ER{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function Bw(n){if(!n||!n.options)throw NS("App Configuration Object");if(!n.name)throw NS("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw NS(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function jw(){return jw=(0,z.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(vS,{scope:Dw}),n.swRegistration.update().catch(()=>{})}catch(e){throw Qr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}),jw.apply(this,arguments)}function $w(){return $w=(0,z.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function IR(n){return jw.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Qr.create("invalid-sw-registration");n.swRegistration=e}}),$w.apply(this,arguments)}function Xm(){return Xm=(0,z.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=Sw)}),Xm.apply(this,arguments)}function e_(){return e_=(0,z.Z)(function*(n,e){if(!navigator)throw Qr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qr.create("permission-blocked");return yield function RS(n,e){return Xm.apply(this,arguments)}(n,e?.vapidKey),yield function bR(n,e){return $w.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function yR(n){return Qm.apply(this,arguments)}(n)}),e_.apply(this,arguments)}function Hw(){return Hw=(0,z.Z)(function*(n,e,t){const r=function TR(n){switch(n){case ed.NOTIFICATION_CLICKED:return"notification_open";case ed.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[Aw],message_name:t[wS],message_time:t[fR],message_device_time:Math.floor(Date.now()/1e3)})}),Hw.apply(this,arguments)}function zw(){return zw=(0,z.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===ed.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(Uw(t)):n.onMessageHandler.next(Uw(t)));const r=t.data;(function CR(n){return"object"==typeof n&&!!n&&Aw in n})(r)&&"1"===r["google.c.a.e"]&&(yield function FS(n,e,t){return Hw.apply(this,arguments)}(n,t.messageType,r))}),zw.apply(this,arguments)}const Gw="@firebase/messaging",US=n=>{const e=new ER(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function LS(n,e){return zw.apply(this,arguments)}(e,t)),e},VS=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function kS(n,e){return e_.apply(this,arguments)}(e,r)}};function BS(){return jS.apply(this,arguments)}function jS(){return(jS=(0,z.Z)(function*(){try{yield(0,$.eu)()}catch{return!1}return typeof window<"u"&&(0,$.hl)()&&(0,$.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function q3(n=F0()){return BS().then(e=>{if(!e)throw Qr.create("unsupported-browser")},e=>{throw Qr.create("indexed-db-unsupported")}),cc((0,$.m9)(n),"messaging").getImmediate()}!function DR(){wi(new lr.wA("messaging",US,"PUBLIC")),wi(new lr.wA("messaging-internal",VS,"PRIVATE")),oi(Gw,"0.12.4"),oi(Gw,"0.12.4","esm2017")}();const qw="analytics",Z3="firebase_id",GS="origin",Zw=6e4,WS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Kw="https://www.googletagmanager.com/gtag/js",rr=new Li.Yd("@firebase/analytics"),Ui=new $.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function K3(n){if(!n.startsWith(Kw)){const e=Ui.create("invalid-gtag-resource",{gtagURL:n});return rr.warn(e.message),""}return n}function qS(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function KS(){return KS=(0,z.Z)(function*(n,e,t,r,i,a){const c=r[i];try{if(c)yield e[c];else{const g=(yield qS(t)).find(v=>v.measurementId===i);g&&(yield e[g.appId])}}catch(f){rr.error(f)}n("config",i,a)}),KS.apply(this,arguments)}function _c(){return _c=(0,z.Z)(function*(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const f=yield qS(t);for(const g of c){const v=f.find(T=>T.measurementId===g),b=v&&e[v.appId];if(!b){a=[];break}a.push(b)}}0===a.length&&(a=Object.values(e)),yield Promise.all(a),n("event",r,i||{})}catch(a){rr.error(a)}}),_c.apply(this,arguments)}const RR=30,YS=new class FR{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Yw(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Qw(){return Qw=(0,z.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:Yw(r)},a=WS.replace("{app-id}",t),c=yield fetch(a,i);if(200!==c.status&&304!==c.status){let f="";try{const g=yield c.json();null!==(e=g.error)&&void 0!==e&&e.message&&(f=g.error.message)}catch{}throw Ui.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}),Qw.apply(this,arguments)}function Jw(){return Jw=(0,z.Z)(function*(n,e=YS,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Ui.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Ui.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new jR;return setTimeout((0,z.Z)(function*(){f.abort()}),void 0!==t?t:Zw),QS({appId:r,apiKey:i,measurementId:a},c,f,e)}),Jw.apply(this,arguments)}function QS(n,e,t){return Xw.apply(this,arguments)}function Xw(){return Xw=(0,z.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=YS){var a;const{appId:c,measurementId:f}=n;try{yield function VR(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Ui.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(g){if(f)return rr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:c,measurementId:f};throw g}try{const g=yield function LR(n){return Qw.apply(this,arguments)}(n);return i.deleteThrottleMetadata(c),g}catch(g){const v=g;if(!function BR(n){if(!(n instanceof $.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(v)){if(i.deleteThrottleMetadata(c),f)return rr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:c,measurementId:f};throw g}const b=503===Number(null===(a=v?.customData)||void 0===a?void 0:a.httpStatus)?(0,$.$s)(t,i.intervalMillis,RR):(0,$.$s)(t,i.intervalMillis),T={throttleEndTimeMillis:Date.now()+b,backoffCount:t+1};return i.setThrottleMetadata(c,T),rr.debug(`Calling attemptFetch again in ${b} millis`),QS(n,T,r,i)}}),Xw.apply(this,arguments)}class jR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let n_,Gf;function tC(){return tC=(0,z.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const a=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:a}))}}),tC.apply(this,arguments)}function Wf(){return Wf=(0,z.Z)(function*(){if(!(0,$.hl)())return rr.warn(Ui.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,$.eu)()}catch(n){return rr.warn(Ui.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0}),Wf.apply(this,arguments)}function n1(){return n1=(0,z.Z)(function*(n,e,t,r,i,a,c){var f;const g=function UR(n){return Jw.apply(this,arguments)}(n);g.then(R=>{t[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&rr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>rr.error(R)),e.push(g);const v=function sC(){return Wf.apply(this,arguments)}().then(R=>{if(R)return r.getId()}),[b,T]=yield Promise.all([g,v]);(function NR(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Kw)&&t.src.includes(n))return t;return null})(a)||function AR(n,e){const t=function ZS(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:K3}),r=document.createElement("script"),i=`${Kw}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(a,b.measurementId),Gf&&(i("consent","default",Gf),function aa(n){Gf=n}(void 0)),i("js",new Date);const A=null!==(f=c?.config)&&void 0!==f?f:{};return A[GS]="firebase",A.update=!0,null!=T&&(A[Z3]=T),i("config",b.measurementId,A),n_&&(i("set",n_),function iC(n){n_=n}(void 0)),b.measurementId}),n1.apply(this,arguments)}class r1{constructor(e){this.app=e}_delete(){return delete ko[this.app.options.appId],Promise.resolve()}}let ko={},i1=[];const s1={};let zR,Js,s_="dataLayer",aC=!1;function uC(n,e,t){!function Y3(){const n=[];if((0,$.ru)()&&n.push("This is a browser extension environment."),(0,$.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ui.create("invalid-analytics-context",{errorInfo:e});rr.warn(t.message)}}();const r=n.options.appId;if(!r)throw Ui.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Ui.create("no-api-key");rr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ko[r])throw Ui.create("already-exists",{id:r});if(!aC){!function MR(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(s_);const{wrappedGtag:a,gtagCore:c}=function OR(n,e,t,r,i){let a=function(...c){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function t_(n,e,t,r){function a(){return a=(0,z.Z)(function*(c,...f){try{if("event"===c){const[g,v]=f;yield function PR(n,e,t,r,i){return _c.apply(this,arguments)}(n,e,t,g,v)}else if("config"===c){const[g,v]=f;yield function xR(n,e,t,r,i,a){return KS.apply(this,arguments)}(n,e,t,r,g,v)}else if("consent"===c){const[g]=f;n("consent","update",g)}else if("get"===c){const[g,v,b]=f;n("get",g,v,b)}else if("set"===c){const[g]=f;n("set",g)}else n(c,...f)}catch(g){rr.error(g)}}),a.apply(this,arguments)}return function i(c){return a.apply(this,arguments)}}(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}(ko,i1,s1,s_,"gtag");Js=a,zR=c,aC=!0}return ko[r]=function HR(n,e,t,r,i,a,c){return n1.apply(this,arguments)}(n,i1,s1,e,zR,s_,t),new r1(n)}function qR(){return o_.apply(this,arguments)}function o_(){return(o_=(0,z.Z)(function*(){if((0,$.ru)()||!(0,$.zI)()||!(0,$.hl)())return!1;try{return yield(0,$.eu)()}catch{return!1}})).apply(this,arguments)}const a1="@firebase/analytics";!function eV(){wi(new lr.wA(qw,(e,{options:t})=>uC(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),wi(new lr.wA("analytics-internal",function n(e){try{const t=e.getProvider(qw).getImmediate();return{logEvent:(r,i,a)=>function X3(n,e,t,r){n=(0,$.m9)(n),function eC(n,e,t,r,i){return tC.apply(this,arguments)}(Js,ko[n.app.options.appId],e,t,r).catch(i=>rr.error(i))}(t,r,i,a)}}catch(t){throw Ui.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),oi(a1,"0.10.0"),oi(a1,"0.10.0","esm2017")}();const c1=new class nV extends _b{}(class tV extends nf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var Zf=k(5137),id=k(3093);const yc=new d.GfV("7.6.1"),l1="__angularfire_symbol__analyticsIsSupportedValue",d1="__angularfire_symbol__analyticsIsSupported",h1="__angularfire_symbol__remoteConfigIsSupportedValue",f1="__angularfire_symbol__remoteConfigIsSupported",cC="__angularfire_symbol__messagingIsSupportedValue",sd="__angularfire_symbol__messagingIsSupported";globalThis[d1]||(globalThis[d1]=qR().then(n=>globalThis[l1]=n).catch(()=>globalThis[l1]=!1)),globalThis[sd]||(globalThis[sd]=BS().then(n=>globalThis[cC]=n).catch(()=>globalThis[cC]=!1)),globalThis[f1]||(globalThis[f1]=jf().then(n=>globalThis[h1]=n).catch(()=>globalThis[h1]=!1));const a_={async:()=>globalThis[sd],sync:()=>{const n=globalThis[cC];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function Ka(n,e,t){if(e){if(1===e.length)return e[0];const a=e.filter(c=>c.app===t);if(1===a.length)return a[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const ua=(n,e)=>{const t=e?[e]:(0,on.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r};function Ya(){}class p1{constructor(e,t=c1){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(c){i.runGuarded(()=>{e.apply(this,[c])})},t,r)}}class dC{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ya,{},Ya,Ya)),t.pipe(Pn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xs=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new p1(Zone.current)),this.insideAngular=t.run(()=>new p1(Zone.current,Wg)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Fo(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function ad(n){return Fo().ngZone.run(()=>n())}function Xi(n){return Fo(),function ek(n){return function(t){return(t=t.lift(new dC(n.ngZone))).pipe((0,Zf.R)(n.outsideAngular),(0,id.Q)(n.insideAngular))}}(Fo())(n)}const tk=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),ad(()=>n.apply(void 0,r))},vc=(n,e)=>function(){let t;const r=arguments;for(let a=0;a<arguments.length;a++)"function"==typeof r[a]&&(e&&(t||(t=ad(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ya,{},Ya,Ya)))),r[a]=tk(r[a],t));const i=function iV(n){return Fo().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof zr.y){const a=Fo();return i.pipe((0,Zf.R)(a.outsideAngular),(0,id.Q)(a.insideAngular))}return ad(()=>i)}return i instanceof zr.y?i.pipe(Xi):i instanceof Promise?ad(()=>new Promise((a,c)=>i.then(f=>ad(()=>a(f)),f=>ad(()=>c(f))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:ad(()=>i)};function u_(){return(0,Wr.e)((n,e)=>{let t,r=!1;n.subscribe((0,xr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Ke,g1=k(3997),Es=k(6304),nk=(k(8661),k(3399)),m1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},es={},c_=c_||{},Et=m1||self;function l_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var _1="closure_uid_"+(1e9*Math.random()>>>0),rk=0;function ik(n,e,t){return n.call.apply(n.bind,arguments)}function sk(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ai(n,e,t){return(ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ik:sk).apply(null,arguments)}function Yf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ir(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Qa(){this.s=this.s,this.o=this.o}Qa.prototype.s=!1,Qa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function oV(n){Object.prototype.hasOwnProperty.call(n,_1)&&n[_1]||(n[_1]=++rk)}(this)},Qa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function v1(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function w1(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(l_(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function Nr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Nr.prototype.h=function(){this.defaultPrevented=!0};var C1=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",()=>{},e),Et.removeEventListener("test",()=>{},e)}catch{}return n}();function ud(n){return/^[\s\xa0]*$/.test(n)}function d_(){var n=Et.navigator;return n&&(n=n.userAgent)?n:""}function ts(n){return-1!=d_().indexOf(n)}function fC(n){return fC[" "](n),n}fC[" "]=function(){};var I1,E1=ts("Opera"),wc=ts("Trident")||ts("MSIE"),ak=ts("Edge"),pC=ak||wc,uk=ts("Gecko")&&!(-1!=d_().toLowerCase().indexOf("webkit")&&!ts("Edge"))&&!(ts("Trident")||ts("MSIE"))&&!ts("Edge"),ck=-1!=d_().toLowerCase().indexOf("webkit")&&!ts("Edge");function lk(){var n=Et.document;return n?n.documentMode:void 0}e:{var gC="",mC=function(){var n=d_();return uk?/rv:([^\);]+)(\)|;)/.exec(n):ak?/Edge\/([\d\.]+)/.exec(n):wc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ck?/WebKit\/(\S+)/.exec(n):E1?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(mC&&(gC=mC?mC[1]:""),wc){var b1=lk();if(null!=b1&&b1>parseFloat(gC)){I1=String(b1);break e}}I1=gC}var aV=Et.document&&wc&&(lk()||parseInt(I1,10))||void 0;function h_(n,e){if(Nr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(uk){e:{try{fC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:hk[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&h_.$.h.call(this)}}Ir(h_,Nr);var hk={2:"touch",3:"pen",4:"mouse"};h_.prototype.h=function(){h_.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var f_="closure_listenable_"+(1e6*Math.random()|0),uV=0;function cV(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++uV,this.fa=this.ia=!1}function _C(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function D1(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function pk(n){const e={};for(const t in n)e[t]=n[t];return e}const s="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function o(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<s.length;a++)t=s[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function u(n){this.src=n,this.g={},this.h=0}function l(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=hC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(_C(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function h(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}u.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=h(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new cV(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var p="closure_lm_"+(1e6*Math.random()|0),y={};function w(n,e,t,r,i){if(r&&r.once)return M(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)w(n,e[a],t,r,i);return null}return t=it(t),n&&n[f_]?n.O(e,t,Kf(r)?!!r.capture:!!r,i):I(n,e,t,!1,r,i)}function I(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Kf(i)?!!i.capture:!!i,f=Se(n);if(f||(n[p]=f=new u(n)),(t=f.add(e,t,r,c,a)).proxy)return t;if(r=function D(){const e=le;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)C1||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Y(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function M(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)M(n,e[a],t,r,i);return null}return t=it(t),n&&n[f_]?n.P(e,t,Kf(r)?!!r.capture:!!r,i):I(n,e,t,!0,r,i)}function L(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)L(n,e[a],t,r,i);else r=Kf(r)?!!r.capture:!!r,t=it(t),n&&n[f_]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=h(a=n.g[e],t,r,i))&&(_C(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Se(n))&&(e=n.g[e.toString()],n=-1,e&&(n=h(e,t,r,i)),(t=-1<n?e[n]:null)&&q(t))}function q(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[f_])l(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Y(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Se(e))?(l(t,n),0==t.h&&(t.src=null,e[p]=null)):_C(n)}}}function Y(n){return n in y?y[n]:y[n]="on"+n}function le(n,e){if(n.fa)n=!0;else{e=new h_(e,this);var t=n.listener,r=n.la||n.src;n.ia&&q(n),n=t.call(r,e)}return n}function Se(n){return(n=n[p])instanceof u?n:null}var ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(n){return"function"==typeof n?n:(n[ze]||(n[ze]=function(e){return n.handleEvent(e)}),n[ze])}function de(){Qa.call(this),this.i=new u(this),this.S=this,this.J=null}function nt(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Nr(e,n);else if(e instanceof Nr)e.target=e.target||n;else{var i=e;o(e=new Nr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=Mt(c,r,!0,e)&&i}if(i=Mt(c=e.g=n,r,!0,e)&&i,i=Mt(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Mt(c=e.g=t[a],r,!1,e)&&i}function Mt(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.fa&&c.capture==t){var f=c.listener,g=c.la||c.src;c.ia&&l(n.i,c),i=!1!==f.call(g,r)&&i}}return i&&!r.defaultPrevented}Ir(de,Qa),de.prototype[f_]=!0,de.prototype.removeEventListener=function(n,e,t,r){L(this,n,e,t,r)},de.prototype.N=function(){if(de.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)_C(t[r]);delete n.g[e],n.h--}}this.J=null},de.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},de.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var an=Et.JSON.stringify;function ca(){var n=_k;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var p_=new class Bi{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new gk,n=>n.reset());class gk{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function mk(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function VH(n){Et.setTimeout(()=>{throw n},0)}let yC,vC=!1,_k=new class cd{constructor(){this.h=this.g=null}add(e,t){const r=p_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},lV=()=>{const n=Et.Promise.resolve(void 0);yC=()=>{n.then(BH)}};var BH=()=>{for(var n;n=ca();){try{n.h.call(n.g)}catch(t){VH(t)}var e=p_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vC=!1};function S1(n,e){de.call(this),this.h=n||1,this.g=e||Et,this.j=ai(this.qb,this),this.l=Date.now()}function yk(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function vk(n,e,t){if("function"==typeof n)t&&(n=ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function dV(n){n.g=vk(()=>{n.g=null,n.i&&(n.i=!1,dV(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ir(S1,de),(Ke=S1.prototype).ga=!1,Ke.T=null,Ke.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),nt(this,"tick"),this.ga&&(yk(this),this.start()))}},Ke.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.N=function(){S1.$.N.call(this),yk(this),delete this.g};class jH extends Qa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dV(this)}N(){super.N(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wC(n){Qa.call(this),this.h=n,this.g={}}Ir(wC,Qa);var hV=[];function fV(n,e,t,r){Array.isArray(t)||(t&&(hV[0]=t.toString()),t=hV);for(var i=0;i<t.length;i++){var a=w(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function pV(n){D1(n.g,function(e,t){this.g.hasOwnProperty(t)&&q(e)},n),n.g={}}function A1(){this.g=!0}function g_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function GH(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return an(t)}catch{return e}}(n,t)+(r?" "+r:"")})}wC.prototype.N=function(){wC.$.N.call(this),pV(this)},wC.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},A1.prototype.Ea=function(){this.g=!1},A1.prototype.info=function(){};var Qf={},gV=null;function M1(){return gV=gV||new de}function mV(n){Nr.call(this,Qf.Ta,n)}function CC(n){const e=M1();nt(e,new mV(e))}function _V(n,e){Nr.call(this,Qf.STAT_EVENT,n),this.stat=e}function ns(n){const e=M1();nt(e,new _V(e,n))}function yV(n,e){Nr.call(this,Qf.Ua,n),this.size=e}function EC(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}Qf.Ta="serverreachability",Ir(mV,Nr),Qf.STAT_EVENT="statevent",Ir(_V,Nr),Qf.Ua="timingevent",Ir(yV,Nr);var x1={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},vV={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wk(){}function CV(){}wk.prototype.h=null;var Ik,IC={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ck(){Nr.call(this,"d")}function Ek(){Nr.call(this,"c")}function P1(){}function bC(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new wC(this),this.P=WH,this.V=new S1(n=pC?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new EV}function EV(){this.i=null,this.g="",this.h=!1}Ir(Ck,Nr),Ir(Ek,Nr),Ir(P1,wk),P1.prototype.g=function(){return new XMLHttpRequest},P1.prototype.i=function(){return{}},Ik=new P1;var WH=45e3,bk={},O1={};function Tk(n,e,t){n.L=1,n.v=F1(Cc(e)),n.s=t,n.S=!0,IV(n,null)}function IV(n,e){n.G=Date.now(),TC(n),n.A=Cc(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),NV(t.i,"t",r),n.C=0,t=n.l.J,n.h=new EV,n.g=rB(n.l,t?e:null,!n.s),0<n.O&&(n.M=new jH(ai(n.Pa,n,n.g),n.O)),fV(n.U,n.g,"readystatechange",n.nb),e=n.I?pk(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),CC(),function $H(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",f=a.split("&"),g=0;g<f.length;g++){var v=f[g].split("=");if(1<v.length){var b=v[0];v=v[1];var T=b.split("_");c=2<=T.length&&"type"==T[1]?c+(b+"=")+v+"&":c+(b+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function bV(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function TV(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=qH(n,t),i==O1){4==e&&(n.o=4,ns(14),r=!1),g_(n.j,n.m,null,"[Incomplete Response]");break}if(i==bk){n.o=4,ns(15),g_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}g_(n.j,n.m,i,null),Dk(n,i)}bV(n)&&i!=O1&&i!=bk&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ns(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Nk(e),e.M=!0,ns(11))):(g_(n.j,n.m,t,"[Invalid Chunked Response]"),Jf(n),DC(n))}function qH(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?O1:(t=Number(e.substring(t,r)),isNaN(t)?bk:(r+=1)+t>e.length?O1:(e=e.slice(r,r+t),n.C=r+t,e))}function TC(n){n.Y=Date.now()+n.P,DV(n,n.P)}function DV(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=EC(ai(n.lb,n),e)}function N1(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function DC(n){0==n.l.H||n.J||XV(n.l,n)}function Jf(n){N1(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,yk(n.V),pV(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Dk(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Sk(t.i,n)))if(!n.K&&Sk(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;$1(t),B1(t)}Ok(t),ns(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=EC(ai(t.ib,t),6e3));if(1>=FV(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ep(t,11)}else if((n.K||t.g==n)&&$1(t),!ud(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const b=v[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const T=v[4];null!=T&&(t.Ga=T,t.l.info("SVER="+t.Ga));const A=v[5];null!=A&&"number"==typeof A&&0<A&&(t.L=r=1.5*A,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const R=n.g;if(R){const W=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.i;a.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Ak(a,a.h),a.h=null))}if(r.F){const Q=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,jn(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=nB(r,r.J?r.pa:null,r.Y),c.K){LV(r.i,c);var f=c,g=r.L;g&&f.setTimeout(g),f.B&&(N1(f),TC(f)),r.g=c}else QV(r);0<t.j.length&&j1(t)}else"stop"!=v[0]&&"close"!=v[0]||ep(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?ep(t,7):Pk(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}CC()}catch{}}function SV(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(l_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function KH(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(l_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function ZH(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(l_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Ke=bC.prototype).setTimeout=function(n){this.P=n},Ke.nb=function(n){n=n.target;const e=this.M;e&&3==Ja(n)?e.l():this.Pa(n)},Ke.Pa=function(n){try{if(n==this.g)e:{const b=Ja(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||pC||this.g&&(this.h.h||this.g.ja()||GV(this.g)))){this.J||4!=b||7==e||CC(),N1(this);var t=this.g.da();this.ca=t;t:if(bV(this)){var r=GV(this.g);n="";var i=r.length,a=4==Ja(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Jf(this),DC(this);var c="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function HH(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,g=this.g;if((f=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ud(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,ns(12),Jf(this),DC(this);break e}g_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dk(this,t)}this.S?(TV(this,b,c),pC&&this.i&&3==b&&(fV(this.U,this.V,"tick",this.mb),this.V.start())):(g_(this.j,this.m,c,null),Dk(this,c)),4==b&&Jf(this),this.i&&!this.J&&(4==b?XV(this.l,this):(this.i=!1,TC(this)))}else(function fz(n){const e={};n=(n.g&&2<=Ja(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(ud(n[r]))continue;var t=mk(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function fk(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ns(12)):(this.o=0,ns(13)),Jf(this),DC(this)}}}catch{}},Ke.mb=function(){if(this.g){var n=Ja(this.g),e=this.g.ja();this.C<e.length&&(N1(this),TV(this,n,e),this.i&&4!=n&&TC(this))}},Ke.cancel=function(){this.J=!0,Jf(this)},Ke.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function zH(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(CC(),ns(17)),Jf(this),this.o=2,DC(this)):DV(this,this.Y-n)};var AV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xf(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Xf){this.h=n.h,R1(this,n.j),this.s=n.s,this.g=n.g,k1(this,n.m),this.l=n.l;var e=n.i,t=new MC;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),MV(this,t),this.o=n.o}else n&&(e=String(n).match(AV))?(this.h=!1,R1(this,e[1]||"",!0),this.s=SC(e[2]||""),this.g=SC(e[3]||"",!0),k1(this,e[4]),this.l=SC(e[5]||"",!0),MV(this,e[6]||"",!0),this.o=SC(e[7]||"")):(this.h=!1,this.i=new MC(null,this.h))}function Cc(n){return new Xf(n)}function R1(n,e,t){n.j=t?SC(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function k1(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function MV(n,e,t){e instanceof MC?(n.i=e,function nz(n,e){e&&!n.j&&(ld(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(PV(this,r),NV(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=AC(e,ez)),n.i=new MC(e,n.h))}function jn(n,e,t){n.i.set(e,t)}function F1(n){return jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function SC(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function AC(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,QH),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function QH(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(AC(e,xV,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(AC(e,xV,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(AC(t,"/"==t.charAt(0)?XH:JH,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",AC(t,tz)),n.join("")};var xV=/[#\/\?@]/g,JH=/[#\?:]/g,XH=/[#\?]/g,ez=/[#\?@]/g,tz=/#/g;function MC(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ld(n){n.g||(n.g=new Map,n.h=0,n.i&&function YH(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function PV(n,e){ld(n),e=m_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function OV(n,e){return ld(n),e=m_(n,e),n.g.has(e)}function NV(n,e,t){PV(n,e),0<t.length&&(n.i=null,n.g.set(m_(n,e),v1(t)),n.h+=t.length)}function m_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function RV(n){this.l=n||iz,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ka&&Et.g.Ka()&&Et.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=MC.prototype).add=function(n,e){ld(this),this.i=null,n=m_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){ld(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ke.ta=function(){ld(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Ke.Z=function(n){ld(this);let e=[];if("string"==typeof n)OV(this,n)&&(e=e.concat(this.g.get(m_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ke.set=function(n,e){return ld(this),this.i=null,OV(this,n=m_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var iz=10;function kV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function FV(n){return n.h?1:n.g?n.g.size:0}function Sk(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ak(n,e){n.g?n.g.add(e):n.h=e}function LV(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function UV(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return v1(n.i)}RV.prototype.cancel=function(){if(this.i=UV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var sz=class{stringify(n){return Et.JSON.stringify(n,void 0)}parse(n){return Et.JSON.parse(n,void 0)}};function oz(){this.g=new sz}function az(n,e,t){const r=t||"";try{SV(n,function(i,a){let c=i;Kf(i)&&(c=an(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function L1(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xC(n){this.l=n.fc||null,this.j=n.ob||!1}function U1(n,e){de.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Mk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ir(xC,wk),xC.prototype.g=function(){return new U1(this.l,this.j)},xC.prototype.i=function(n){return function(){return n}}({}),Ir(U1,de);var Mk=0;function VV(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function PC(n){n.readyState=4,n.l=null,n.j=null,n.A=null,OC(n)}function OC(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=U1.prototype).open=function(n,e){if(this.readyState!=Mk)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,OC(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Et).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,PC(this)),this.readyState=Mk},Ke.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,OC(this)),this.g&&(this.readyState=3,OC(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Et.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;VV(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ke.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?PC(this):OC(this),3==this.readyState&&VV(this)}},Ke.Za=function(n){this.g&&(this.response=this.responseText=n,PC(this))},Ke.Ya=function(n){this.g&&(this.response=n,PC(this))},Ke.ka=function(){this.g&&PC(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(U1.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var cz=Et.JSON.parse;function dr(n){de.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=BV,this.L=this.M=!1}Ir(dr,de);var BV="",lz=/^https?$/i,dz=["POST","PUT"];function jV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$V(n),V1(n)}function $V(n){n.F||(n.F=!0,nt(n,"complete"),nt(n,"error"))}function HV(n){if(n.h&&typeof c_<"u"&&(!n.C[1]||4!=Ja(n)||2!=n.da()))if(n.v&&4==Ja(n))vk(n.La,0,n);else if(nt(n,"readystatechange"),4==Ja(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(AV)[1]||null;!i&&Et.self&&Et.self.location&&(i=Et.self.location.protocol.slice(0,-1)),r=!lz.test(i?i.toLowerCase():"")}t=r}if(t)nt(n,"complete"),nt(n,"success");else{n.m=6;try{var a=2<Ja(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",$V(n)}}finally{V1(n)}}}function V1(n,e){if(n.g){zV(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||nt(n,"ready");try{t.onreadystatechange=r}catch{}}}function zV(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function Ja(n){return n.g?n.g.readyState:0}function GV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case BV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function WV(n){let e="";return D1(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function xk(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=WV(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):jn(n,e,t))}function NC(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function qV(n){this.Ga=0,this.j=[],this.l=new A1,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=NC("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=NC("baseRetryDelayMs",5e3,n),this.hb=NC("retryDelaySeedMs",1e4,n),this.eb=NC("forwardChannelMaxRetries",2,n),this.xa=NC("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new RV(n&&n.concurrentRequestLimit),this.Ja=new oz,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Pk(n){if(ZV(n),3==n.H){var e=n.W++,t=Cc(n.I);if(jn(t,"SID",n.K),jn(t,"RID",e),jn(t,"TYPE","terminate"),RC(n,t),(e=new bC(n,n.l,e)).L=2,e.v=F1(Cc(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon)try{t=Et.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=rB(e.l,null),e.g.ha(e.v)),e.G=Date.now(),TC(e)}tB(n)}function B1(n){n.g&&(Nk(n),n.g.cancel(),n.g=null)}function ZV(n){B1(n),n.u&&(Et.clearTimeout(n.u),n.u=null),$1(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function j1(n){if(!kV(n.i)&&!n.m){n.m=!0;var e=n.Na;yC||lV(),vC||(yC(),vC=!0),_k.add(e,n),n.C=0}}function KV(n,e){var t;t=e?e.m:n.W++;const r=Cc(n.I);jn(r,"SID",n.K),jn(r,"RID",t),jn(r,"AID",n.V),RC(n,r),n.o&&n.s&&xk(r,n.o,n.s),t=new bC(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=YV(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Ak(n.i,t),Tk(t,r,e)}function RC(n,e){n.na&&D1(n.na,function(t,r){jn(e,r,t)}),n.h&&SV({},function(t,r){jn(e,r,t)})}function YV(n,e,t){t=Math.min(n.j.length,t);var r=n.h?ai(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].g,c.push("ofs="+a)):a=0:c.push("ofs="+a);let f=!0;for(let g=0;g<t;g++){let v=i[g].g;const b=i[g].map;if(v-=a,0>v)a=Math.max(0,i[g].g-100),f=!1;else try{az(b,c,"req"+v+"_")}catch{r&&r(b)}}if(f){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function QV(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;yC||lV(),vC||(yC(),vC=!0),_k.add(e,n),n.A=0}}function Ok(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=EC(ai(n.Ma,n),eB(n,n.A)),n.A++,0))}function Nk(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function JV(n){n.g=new bC(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Cc(n.wa);jn(e,"RID","rpc"),jn(e,"SID",n.K),jn(e,"AID",n.V),jn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&jn(e,"TO",n.qa),jn(e,"TYPE","xmlhttp"),RC(n,e),n.o&&n.s&&xk(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=F1(Cc(e)),t.s=null,t.S=!0,IV(t,n)}function $1(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function XV(n,e){var t=null;if(n.g==e){$1(n),Nk(n),n.g=null;var r=2}else{if(!Sk(n.i,e))return;t=e.F,LV(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;nt(r=M1(),new yV(r,t)),j1(n)}else QV(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function pz(n,e){return!(FV(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=EC(ai(n.Na,n,e),eB(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ok(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ep(n,5);break;case 4:ep(n,10);break;case 3:ep(n,6);break;default:ep(n,2)}}function eB(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ep(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=ai(n.pb,n);t||(t=new Xf("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||R1(t,"https"),F1(t)),function uz(n,e){const t=new A1;if(Et.Image){const r=new Image;r.onload=Yf(L1,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yf(L1,t,r,"TestLoadImage: error",!1,e),r.onabort=Yf(L1,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yf(L1,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ns(2);n.H=0,n.h&&n.h.za(e),tB(n),ZV(n)}function tB(n){if(n.H=0,n.ma=[],n.h){const e=UV(n.i);(0!=e.length||0!=n.j.length)&&(w1(n.ma,e),w1(n.ma,n.j),n.i.i.length=0,v1(n.j),n.j.length=0),n.h.ya()}}function nB(n,e,t){var r=t instanceof Xf?Cc(t):new Xf(t);if(""!=r.g)e&&(r.g=e+"."+r.g),k1(r,r.m);else{var i=Et.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Xf(null);r&&R1(a,r),e&&(a.g=e),i&&k1(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&jn(r,t,e),jn(r,"VER",n.ra),RC(n,r),r}function rB(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dr(t&&n.Ha&&!n.va?new xC({ob:!0}):n.va)).Oa(n.J),e}function iB(){}function H1(){if(wc&&!(10<=Number(aV)))throw Error("Environmental error: no available transport.")}function eo(n,e){de.call(this),this.g=new qV(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!ud(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ud(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new __(this)}function sB(n){Ck.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function oB(){Ek.call(this),this.status=1}function __(n){this.g=n}function la(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Rk(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],c=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;c=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(c<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((a=(e=t+((c=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=a+((c=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function yn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(Ke=dr.prototype).Oa=function(n){this.M=n},Ke.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ik.g(),this.C=function wV(n){return n.h||(n.h=n.i())}(this.u?this.u:Ik),this.g.onreadystatechange=ai(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void jV(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Et.FormData&&n instanceof Et.FormData,!(0<=hC(dz,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{zV(this),0<this.B&&((this.L=function hz(n){return wc&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.ua,this)):this.A=vk(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){jV(this,a)}},Ke.ua=function(){typeof c_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nt(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,nt(this,"complete"),nt(this,"abort"),V1(this))},Ke.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),V1(this,!0)),dr.$.N.call(this)},Ke.La=function(){this.s||(this.G||this.v||this.l?HV(this):this.kb())},Ke.kb=function(){HV(this)},Ke.isActive=function(){return!!this.g},Ke.da=function(){try{return 2<Ja(this)?this.g.status:-1}catch{return-1}},Ke.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ke.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),cz(e)}},Ke.Ia=function(){return this.m},Ke.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=qV.prototype).ra=8,Ke.H=1,Ke.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new bC(this,this.l,n);let a=this.s;if(this.U&&(a?(a=pk(a),o(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=YV(this,i,e),jn(t=Cc(this.I),"RID",n),jn(t,"CVER",22),this.F&&jn(t,"X-HTTP-Session-Id",this.F),RC(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(WV(a)))+"&"+e:this.o&&xk(t,this.o,a)),Ak(this.i,i),this.bb&&jn(t,"TYPE","init"),this.P?(jn(t,"$req",e),jn(t,"SID","null"),i.aa=!0,Tk(i,t,null)):Tk(i,t,e),this.H=2}}else 3==this.H&&(n?KV(this,n):0==this.j.length||kV(this.i)||KV(this))},Ke.Ma=function(){if(this.u=null,JV(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=EC(ai(this.jb,this),n)}},Ke.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ns(10),B1(this),JV(this))},Ke.ib=function(){null!=this.v&&(this.v=null,B1(this),Ok(this),ns(19))},Ke.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ns(2)):(this.l.info("Failed to ping google.com"),ns(1))},Ke.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ke=iB.prototype).Ba=function(){},Ke.Aa=function(){},Ke.za=function(){},Ke.ya=function(){},Ke.isActive=function(){return!0},Ke.Va=function(){},H1.prototype.g=function(n,e){return new eo(n,e)},Ir(eo,de),eo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ns(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=nB(n,null,n.Y),j1(n)},eo.prototype.close=function(){Pk(this.g)},eo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=an(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&j1(e)},eo.prototype.N=function(){this.g.h=null,delete this.j,Pk(this.g),delete this.g,eo.$.N.call(this)},Ir(sB,Ck),Ir(oB,Ek),Ir(__,iB),__.prototype.Ba=function(){nt(this.g,"a")},__.prototype.Aa=function(n){nt(this.g,new sB(n))},__.prototype.za=function(n){nt(this.g,new oB)},__.prototype.ya=function(){nt(this.g,"b")},Ir(la,function gz(){this.blockSize=-1}),la.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},la.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)Rk(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){Rk(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){Rk(this,r),i=0;break}}this.h=i,this.i+=e},la.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var mz={};function kk(n){return-128<=n&&128>n?function ok(n,e){var t=mz;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new yn([0|e],0>e?-1:0)}):new yn([0|n],0>n?-1:0)}function Xa(n){if(isNaN(n)||!isFinite(n))return y_;if(0>n)return Ei(Xa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Fk;return new yn(e,0)}var Fk=4294967296,y_=kk(0),Lk=kk(1),uB=kk(16777216);function Ec(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Lo(n){return-1==n.h}function Ei(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new yn(t,~n.h).add(Lk)}function z1(n,e){return n.add(Ei(e))}function G1(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function kC(n,e){this.g=n,this.h=e}function W1(n,e){if(Ec(e))throw Error("division by zero");if(Ec(n))return new kC(y_,y_);if(Lo(n))return e=W1(Ei(n),e),new kC(Ei(e.g),Ei(e.h));if(Lo(e))return e=W1(n,Ei(e)),new kC(Ei(e.g),e.h);if(30<n.g.length){if(Lo(n)||Lo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Lk,r=e;0>=r.X(n);)t=cB(t),r=cB(r);var i=v_(t,1),a=v_(r,1);for(r=v_(r,2),t=v_(t,2);!Ec(r);){var c=a.add(r);0>=c.X(n)&&(i=i.add(t),a=c),r=v_(r,1),t=v_(t,1)}return e=z1(n,i.R(e)),new kC(i,e)}for(i=y_;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(a=Xa(t)).R(e);Lo(c)||0<c.X(n);)c=(a=Xa(t-=r)).R(e);Ec(a)&&(a=Lk),i=i.add(a),n=z1(n,c)}return new kC(i,n)}function cB(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new yn(t,n.h)}function v_(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new yn(i,n.h)}(Ke=yn.prototype).ea=function(){if(Lo(this))return-Ei(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Fk+r)*e,e*=Fk}return n},Ke.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ec(this))return"0";if(Lo(this))return"-"+Ei(this).toString(n);for(var e=Xa(Math.pow(n,6)),t=this,r="";;){var i=W1(t,e).g,a=((0<(t=z1(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ec(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ke.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ke.X=function(n){return Lo(n=z1(this,n))?-1:Ec(n)?0:1},Ke.abs=function(){return Lo(this)?Ei(this):this},Ke.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),c=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(a&=65535)}return new yn(t,-2147483648&t[t.length-1]?-1:0)},Ke.R=function(n){if(Ec(this)||Ec(n))return y_;if(Lo(this))return Lo(n)?Ei(this).R(Ei(n)):Ei(Ei(this).R(n));if(Lo(n))return Ei(this.R(Ei(n)));if(0>this.X(uB)&&0>n.X(uB))return Xa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,c=65535&this.D(r),f=n.D(i)>>>16,g=65535&n.D(i);t[2*r+2*i]+=c*g,G1(t,2*r+2*i),t[2*r+2*i+1]+=a*g,G1(t,2*r+2*i+1),t[2*r+2*i+1]+=c*f,G1(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,G1(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new yn(t,0)},Ke.gb=function(n){return W1(this,n).h},Ke.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new yn(t,this.h&n.h)},Ke.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new yn(t,this.h|n.h)},Ke.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new yn(t,this.h^n.h)},H1.prototype.createWebChannel=H1.prototype.g,eo.prototype.send=eo.prototype.u,eo.prototype.open=eo.prototype.m,eo.prototype.close=eo.prototype.close,x1.NO_ERROR=0,x1.TIMEOUT=8,x1.HTTP_ERROR=6,vV.COMPLETE="complete",CV.EventType=IC,IC.OPEN="a",IC.CLOSE="b",IC.ERROR="c",IC.MESSAGE="d",de.prototype.listen=de.prototype.O,dr.prototype.listenOnce=dr.prototype.P,dr.prototype.getLastError=dr.prototype.Sa,dr.prototype.getLastErrorCode=dr.prototype.Ia,dr.prototype.getStatus=dr.prototype.da,dr.prototype.getResponseJson=dr.prototype.Wa,dr.prototype.getResponseText=dr.prototype.ja,dr.prototype.send=dr.prototype.ha,dr.prototype.setWithCredentials=dr.prototype.Oa,la.prototype.digest=la.prototype.l,la.prototype.reset=la.prototype.reset,la.prototype.update=la.prototype.j,yn.prototype.add=yn.prototype.add,yn.prototype.multiply=yn.prototype.R,yn.prototype.modulo=yn.prototype.gb,yn.prototype.compare=yn.prototype.X,yn.prototype.toNumber=yn.prototype.ea,yn.prototype.toString=yn.prototype.toString,yn.prototype.getBits=yn.prototype.D,yn.fromNumber=Xa,yn.fromString=function aB(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ei(aB(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Xa(Math.pow(e,8)),r=y_,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+a),e);8>a?(a=Xa(Math.pow(e,a)),r=r.R(a).add(Xa(c))):r=(r=r.R(t)).add(Xa(c))}return r};var _z=es.createWebChannelTransport=function(){return new H1},yz=es.getStatEventTarget=function(){return M1()},Uk=es.ErrorCode=x1,vz=es.EventType=vV,wz=es.Event=Qf,lB=es.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Cz=es.FetchXmlHttpFactory=xC,q1=es.WebChannel=CV,Ez=es.XhrIo=dr,Iz=es.Md5=la,w_=es.Integer=yn;const dB="@firebase/firestore";class ui{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ui.UNAUTHENTICATED=new ui(null),ui.GOOGLE_CREDENTIALS=new ui("google-credentials-uid"),ui.FIRST_PARTY=new ui("first-party-uid"),ui.MOCK_USER=new ui("mock-user");let C_="9.23.0";const dd=new Li.Yd("@firebase/firestore");function Vk(){return dd.logLevel}function xe(n,...e){if(dd.logLevel<=Li.in.DEBUG){const t=e.map(Bk);dd.debug(`Firestore (${C_}): ${n}`,...t)}}function br(n,...e){if(dd.logLevel<=Li.in.ERROR){const t=e.map(Bk);dd.error(`Firestore (${C_}): ${n}`,...t)}}function Uo(n,...e){if(dd.logLevel<=Li.in.WARN){const t=e.map(Bk);dd.warn(`Firestore (${C_}): ${n}`,...t)}}function Bk(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${C_}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function ct(n,e){n||et()}function qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends $.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class hB{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ui.UNAUTHENTICATED))}shutdown(){}}class Sz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Az{constructor(e){this.t=e,this.currentUser=ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let c=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Jr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=c;e.enqueueRetryable((0,z.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Jr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct("string"==typeof r.accessToken),new hB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new ui(e)}}class Mz{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ui.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class xz{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Mz(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ui.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pz{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.T;return this.T=a.token,xe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.T=t.token,new fB(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Oz(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class pB{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Oz(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function St(n,e){return n<e?-1:n>e?1:0}function E_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function gB(n){return n+"\0"}class Zn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zn.fromMillis(Date.now())}static fromDate(e){return Zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Zn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new lt(e)}static min(){return new lt(new Zn(0,0))}static max(){return new lt(new Zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class FC{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===FC.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof FC?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends FC{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const Nz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hr extends FC{construct(e,t,r){return new hr(e,t,r)}static isValidIdentifier(e){return Nz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ie(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ie(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Ie(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(a(),i++)}if(a(),c)throw new Ie(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hr(t)}static emptyPath(){return new hr([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(Qt.fromString(e))}static fromName(e){return new We(Qt.fromString(e).popFirst(5))}static empty(){return new We(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Qt(e.slice()))}}class Z1{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function jk(n){return n.fields.find(e=>2===e.kind)}function tp(n){return n.fields.filter(e=>2!==e.kind)}Z1.UNKNOWN_ID=-1;class K1{constructor(e,t){this.fieldPath=e,this.kind=t}}class LC{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new LC(0,to.min())}}function mB(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=lt.fromTimestamp(1e9===r?new Zn(t+1,0):new Zn(t,r));return new to(i,We.empty(),e)}function _B(n){return new to(n.readTime,n.key,-1)}class to{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new to(lt.min(),We.empty(),-1)}static max(){return new to(lt.max(),We.empty(),-1)}}function $k(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:St(n.largestBatchId,e.largestBatchId))}const yB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function hd(n){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,z.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==yB)throw n;xe("LocalStore","Unexpectedly lost primary lease")}),Hk.apply(this,arguments)}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let i=0,a=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++a,c&&a===i&&t()},g=>r(g))}),c=!0,a===i&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(i=>i?ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,i)=>{const a=e.length,c=new Array(a);let f=0;for(let g=0;g<a;g++){const v=g;t(e[v]).next(b=>{c[v]=b,++f,f===a&&r(c)},b=>i(b))}})}static doWhile(e,t){return new ne((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Y1{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Jr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new UC(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=zk(r.target.error);this.v.reject(new UC(e,i))}}static open(e,t,r,i){try{return new Y1(t,e.transaction(i,r))}catch(a){throw new UC(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lz(t)}}class da{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===da.S((0,$.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xe("SimpleDb","Removing database:",e),np(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,$.hl)())return!1;if(da.C())return!0;const e=(0,$.z$)(),t=da.S(e),r=0<t&&t<10,i=da.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,z.Z)(function*(){return t.db||(xe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new UC(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Ie(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ie(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new UC(e,f))},a.onupgradeneeded=c=>{xe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{xe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,z.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const g=Y1.open(a.db,e,c?"readonly":"readwrite",r),v=i(g).next(b=>(g.P(),b)).catch(b=>(g.abort(b),ne.reject(b))).toPromise();return v.catch(()=>{}),yield g.R,v}catch(g){const v=g,b="FirebaseError"!==v.name&&f<3;if(xe("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),a.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Fz{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return np(this.L.delete())}}class UC extends Ie{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fd(n){return"IndexedDbTransactionError"===n.name}class Lz{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(xe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),np(r)}add(e){return xe("SimpleDb","ADD",this.store.name,e,e),np(this.store.add(e))}get(e){return np(this.store.get(e)).next(t=>(void 0===t&&(t=null),xe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xe("SimpleDb","DELETE",this.store.name,e),np(this.store.delete(e))}count(){return xe("SimpleDb","COUNT",this.store.name),np(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(c,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ne((a,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ne((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){xe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,c,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ne((r,i)=>{t.onerror=a=>{const c=zk(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new ne((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const g=new Fz(f),v=t(f.primaryKey,f.value,g);if(v instanceof ne){const b=v.catch(T=>(g.done(),ne.reject(T)));r.push(b)}g.isDone?i():null===g.K?f.continue():f.continue(g.K)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function np(n){return new ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=zk(r.target.error);t(i)}})}let wB=!1;function zk(n){const e=da.S((0,$.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wB||(wB=!0,setTimeout(()=>{throw r},0)),r}}return n}class Uz{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;xe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,z.Z)(function*(){t.task=null;try{xe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){fd(r)?xe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield hd(r)}yield t.et(6e4)}))}}class Vz{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,z.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ne.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return xe("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,a)).next(f=>(xe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=_B(a);$k(c,r)>0&&(r=c)}),new to(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let no=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function VC(n){return null==n}function BC(n){return 0===n&&1/n==-1/0}function CB(n){return"number"==typeof n&&Number.isInteger(n)&&!BC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ji(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=EB(e)),e=Bz(n.get(t),e);return EB(e)}function Bz(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function EB(n){return n+"\x01\x01"}function eu(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&et(),n.charAt(c+1)){case"\x01":const f=n.substring(a,c);let g;0===i.length?g=f:(i+=f,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:et()}a=c+2}return new Qt(r)}const IB=["userId","batchId"];function Q1(n,e){return[n,ji(e)]}function bB(n,e,t){return[n,ji(e),t]}const jz={},$z=["prefixPath","collectionGroup","readTime","documentId"],Hz=["prefixPath","collectionGroup","documentId"],zz=["collectionGroup","readTime","prefixPath","documentId"],Gz=["canonicalId","targetId"],Wz=["targetId","path"],qz=["path","targetId"],Zz=["collectionId","parent"],Kz=["indexId","uid"],Yz=["uid","sequenceNumber"],Qz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jz=["indexId","uid","orderedDocumentKey"],Xz=["userId","collectionPath","documentId"],eG=["userId","collectionPath","largestBatchId"],tG=["userId","collectionGroup","largestBatchId"],TB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nG=[...TB,"documentOverlays"],DB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SB=DB,rG=[...SB,"indexConfiguration","indexState","indexEntries"];class Gk extends vB{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ci(n,e){const t=qe(n);return da.M(t.ht,e)}function AB(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function MB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class On{constructor(e,t){this.comparator=e,this.root=t||Ii.EMPTY}insert(e,t){return new On(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ii.BLACK,null,null))}remove(e){return new On(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ii.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new J1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new J1(this.root,e,this.comparator,!1)}getReverseIterator(){return new J1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new J1(this.root,e,this.comparator,!0)}}class J1{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ii{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ii.RED,this.left=i??Ii.EMPTY,this.right=a??Ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ii(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ii.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}Ii.EMPTY=null,Ii.RED=!0,Ii.BLACK=!1,Ii.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ii(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(e){this.comparator=e,this.data=new On(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xB(this.data.getIterator())}getIteratorFrom(e){return new xB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $n(this.comparator);return t.data=e,t}}class xB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function I_(n){return n.hasNext()?n.getNext():void 0}class Is{constructor(e){this.fields=e,e.sort(hr.comparator)}static empty(){return new Is([])}unionWith(e){let t=new $n(hr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Is(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return E_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class PB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new PB("Invalid base64 string: "+i):i}}(e);return new Xr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Xr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xr.EMPTY_BYTE_STRING=new Xr("");const sG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gd(n){if(ct(!!n),"string"==typeof n){let e=0;const t=sG.exec(n);if(ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ic(n){return"string"==typeof n?Xr.fromBase64String(n):Xr.fromUint8Array(n)}function X1(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function eA(n){const e=n.mapValue.fields.__previous_value__;return X1(e)?eA(e):e}function jC(n){const e=gd(n.mapValue.fields.__local_write_time__.timestampValue);return new Zn(e.seconds,e.nanos)}class oG{constructor(e,t,r,i,a,c,f,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v}}class md{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new md("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof md&&e.projectId===this.projectId&&e.database===this.database}}const _d={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tA={nullValue:"NULL_VALUE"};function yd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?X1(n)?4:kB(n)?9007199254740991:10:et()}function tu(n,e){if(n===e)return!0;const t=yd(n);if(t!==yd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jC(n).isEqual(jC(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=gd(r.timestampValue),c=gd(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ic(n.bytesValue).isEqual(Ic(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return fr(r.geoPointValue.latitude)===fr(i.geoPointValue.latitude)&&fr(r.geoPointValue.longitude)===fr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return fr(r.integerValue)===fr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=fr(r.doubleValue),c=fr(i.doubleValue);return a===c?BC(a)===BC(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return E_(n.arrayValue.values||[],e.arrayValue.values||[],tu);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(AB(a)!==AB(c))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===c[f]||!tu(a[f],c[f])))return!1;return!0}(n,e);default:return et()}var i}function $C(n,e){return void 0!==(n.values||[]).find(t=>tu(t,e))}function vd(n,e){if(n===e)return 0;const t=yd(n),r=yd(e);if(t!==r)return St(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return St(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=fr(i.integerValue||i.doubleValue),f=fr(a.integerValue||a.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return OB(n.timestampValue,e.timestampValue);case 4:return OB(jC(n),jC(e));case 5:return St(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Ic(i),f=Ic(a);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),f=a.split("/");for(let g=0;g<c.length&&g<f.length;g++){const v=St(c[g],f[g]);if(0!==v)return v}return St(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=St(fr(i.latitude),fr(a.latitude));return 0!==c?c:St(fr(i.longitude),fr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],f=a.values||[];for(let g=0;g<c.length&&g<f.length;++g){const v=vd(c[g],f[g]);if(v)return v}return St(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===_d.mapValue&&a===_d.mapValue)return 0;if(i===_d.mapValue)return 1;if(a===_d.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),g=a.fields||{},v=Object.keys(g);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const T=St(f[b],v[b]);if(0!==T)return T;const A=vd(c[f[b]],g[v[b]]);if(0!==A)return A}return St(f.length,v.length)}(n.mapValue,e.mapValue);default:throw et()}}function OB(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return St(n,e);const t=gd(n),r=gd(e),i=St(t.seconds,r.seconds);return 0!==i?i:St(t.nanos,r.nanos)}function b_(n){return Wk(n)}function Wk(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=gd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ic(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=Wk(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${Wk(r.fields[f])}`;return a+"}"}(n.mapValue):et();var e}function rp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qk(n){return!!n&&"integerValue"in n}function HC(n){return!!n&&"arrayValue"in n}function NB(n){return!!n&&"nullValue"in n}function RB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rA(n){return!!n&&"mapValue"in n}function zC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zC(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zC(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kB(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function aG(n){return"nullValue"in n?tA:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?rp(md.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function uG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?rp(md.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?_d:et()}function FB(n,e){const t=vd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function LB(n,e){const t=vd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bi{constructor(e){this.value=e}static empty(){return new bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zC(t)}setAll(e){let t=hr.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=zC(c):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());rA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];rA(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pd(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new bi(zC(this.value))}}function UB(n){const e=[];return pd(n.fields,(t,r)=>{const i=new hr([t]);if(rA(r)){const a=UB(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Is(e)}class Hn{constructor(e,t,r,i,a,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Hn(e,0,lt.min(),lt.min(),lt.min(),bi.empty(),0)}static newFoundDocument(e,t,r,i){return new Hn(e,1,t,lt.min(),r,i,0)}static newNoDocument(e,t){return new Hn(e,2,t,lt.min(),lt.min(),bi.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,lt.min(),lt.min(),bi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(lt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wd{constructor(e,t){this.position=e,this.inclusive=t}}function VB(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(c.referenceValue),t.key):vd(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function BB(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!tu(n.position[t],e.position[t]))return!1;return!0}class T_{constructor(e,t="asc"){this.field=e,this.dir=t}}function cG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class jB{}class Kt extends jB{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new lG(e,t,r):"array-contains"===t?new fG(e,r):"in"===t?new qB(e,r):"not-in"===t?new pG(e,r):"array-contains-any"===t?new gG(e,r):new Kt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new dG(e,r):new hG(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(vd(t,this.value)):null!==t&&yd(this.value)===yd(t)&&this.matchesComparison(vd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class vn extends jB{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new vn(e,t)}matches(e){return D_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function D_(n){return"and"===n.op}function Zk(n){return"or"===n.op}function Kk(n){return $B(n)&&D_(n)}function $B(n){for(const e of n.filters)if(e instanceof vn)return!1;return!0}function Yk(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+b_(n.value);if(Kk(n))return n.filters.map(e=>Yk(e)).join(",");{const e=n.filters.map(t=>Yk(t)).join(",");return`${n.op}(${e})`}}function HB(n,e){return n instanceof Kt?(t=n,(r=e)instanceof Kt&&t.op===r.op&&t.field.isEqual(r.field)&&tu(t.value,r.value)):n instanceof vn?function(t,r){return r instanceof vn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&HB(a,r.filters[c]),!0)}(n,e):void et();var t,r}function zB(n,e){const t=n.filters.concat(e);return vn.create(t,n.op)}function GB(n){return n instanceof Kt?`${(e=n).field.canonicalString()} ${e.op} ${b_(e.value)}`:n instanceof vn?function(e){return e.op.toString()+" {"+e.getFilters().map(GB).join(" ,")+"}"}(n):"Filter";var e}class lG extends Kt{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class dG extends Kt{constructor(e,t){super(e,"in",t),this.keys=WB(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hG extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=WB(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function WB(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class fG extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return HC(t)&&$C(t.arrayValue,this.value)}}class qB extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$C(this.value.arrayValue,t)}}class pG extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if($C(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$C(this.value.arrayValue,t)}}class gG extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!HC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$C(this.value.arrayValue,r))}}class mG{constructor(e,t=null,r=[],i=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=f,this.dt=null}}function Qk(n,e=null,t=[],r=[],i=null,a=null,c=null){return new mG(n,e,t,r,i,a,c)}function ip(n){const e=qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Yk(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),VC(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>b_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>b_(r)).join(",")),e.dt=t}return e.dt}function GC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!HB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BB(n.startAt,e.startAt)&&BB(n.endAt,e.endAt)}function iA(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function sA(n,e){return n.filters.filter(t=>t instanceof Kt&&t.field.isEqual(e))}function ZB(n,e,t){let r=tA,i=!0;for(const a of sA(n,e)){let c=tA,f=!0;switch(a.op){case"<":case"<=":c=aG(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,f=!1;break;case"!=":case"not-in":c=tA}FB({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];FB({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function KB(n,e,t){let r=_d,i=!0;for(const a of sA(n,e)){let c=_d,f=!0;switch(a.op){case">=":case">":c=uG(a.value),f=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,f=!1;break;case"!=":case"not-in":c=_d}LB({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];LB({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class bc{constructor(e,t=null,r=[],i=[],a=null,c="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=g,this.wt=null,this._t=null}}function YB(n,e,t,r,i,a,c,f){return new bc(n,e,t,r,i,a,c,f)}function S_(n){return new bc(n)}function QB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Jk(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function oA(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Xk(n){return null!==n.collectionGroup}function sp(n){const e=qe(n);if(null===e.wt){e.wt=[];const t=oA(e),r=Jk(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new T_(t)),e.wt.push(new T_(hr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new T_(hr.keyField(),a))}}}return e.wt}function rs(n){const e=qe(n);if(!e._t)if("F"===e.limitType)e._t=Qk(e.path,e.collectionGroup,sp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of sp(e))t.push(new T_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new wd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new wd(e.startAt.position,e.startAt.inclusive):null;e._t=Qk(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function e2(n,e){e.getFirstInequalityField(),oA(n);const t=n.filters.concat([e]);return new bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function aA(n,e,t){return new bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function WC(n,e){return GC(rs(n),rs(e))&&n.limitType===e.limitType}function JB(n){return`${ip(rs(n))}|lt:${n.limitType}`}function t2(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>GB(r)).join(", ")}]`),VC(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>b_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>b_(r)).join(",")),`Target(${t})`}(rs(n))}; limitType=${n.limitType})`}function qC(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of sp(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const f=VB(i,a,c);return i.inclusive?f<=0:f<0}(t.startAt,sp(t),r)||t.endAt&&!function(i,a,c){const f=VB(i,a,c);return i.inclusive?f>=0:f>0}(t.endAt,sp(t),r)));var t,r}function XB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function e5(n){return(e,t)=>{let r=!1;for(const i of sp(n)){const a=_G(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function _G(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,a,c){const f=a.data.field(i),g=c.data.field(i);return null!==f&&null!==g?vd(f,g):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}class Tc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pd(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return MB(this.inner)}size(){return this.innerSize}}const yG=new On(We.comparator);function bs(){return yG}const t5=new On(We.comparator);function ZC(...n){let e=t5;for(const t of n)e=e.insert(t.key,t);return e}function n5(n){let e=t5;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function nu(){return KC()}function r5(){return KC()}function KC(){return new Tc(n=>n.toString(),(n,e)=>n.isEqual(e))}const vG=new On(We.comparator),wG=new $n(We.comparator);function Nt(...n){let e=wG;for(const t of n)e=e.add(t);return e}const CG=new $n(St);function n2(){return CG}function i5(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:BC(e)?"-0":e}}function s5(n){return{integerValue:""+n}}function o5(n,e){return CB(e)?s5(e):i5(n,e)}class uA{constructor(){this._=void 0}}function EG(n,e,t){return n instanceof A_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&X1(i)&&(i=eA(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof op?u5(n,e):n instanceof ap?c5(n,e):function(r,i){const a=a5(r,i),c=l5(a)+l5(r.gt);return qk(a)&&qk(r.gt)?s5(c):i5(r.serializer,c)}(n,e)}function IG(n,e,t){return n instanceof op?u5(n,e):n instanceof ap?c5(n,e):t}function a5(n,e){return n instanceof M_?qk(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class A_ extends uA{}class op extends uA{constructor(e){super(),this.elements=e}}function u5(n,e){const t=d5(e);for(const r of n.elements)t.some(i=>tu(i,r))||t.push(r);return{arrayValue:{values:t}}}class ap extends uA{constructor(e){super(),this.elements=e}}function c5(n,e){let t=d5(e);for(const r of n.elements)t=t.filter(i=>!tu(i,r));return{arrayValue:{values:t}}}class M_ extends uA{constructor(e,t){super(),this.serializer=e,this.gt=t}}function l5(n){return fr(n.integerValue||n.doubleValue)}function d5(n){return HC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class YC{constructor(e,t){this.field=e,this.transform=t}}class TG{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cA(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class lA{}function h5(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new P_(n.key,Kn.none()):new x_(n.key,n.data,Kn.none());{const t=n.data,r=bi.empty();let i=new $n(hr.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new Dc(n.key,r,new Is(i.toArray()),Kn.none())}}function DG(n,e,t){n instanceof x_?function(r,i,a){const c=r.value.clone(),f=g5(r.fieldTransforms,i,a.transformResults);c.setAll(f),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Dc?function(r,i,a){if(!cA(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=g5(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(p5(r)),f.setAll(c),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function QC(n,e,t,r){return n instanceof x_?function(i,a,c,f){if(!cA(i.precondition,a))return c;const g=i.value.clone(),v=m5(i.fieldTransforms,f,a);return g.setAll(v),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Dc?function(i,a,c,f){if(!cA(i.precondition,a))return c;const g=m5(i.fieldTransforms,f,a),v=a.data;return v.setAll(p5(i)),v.setAll(g),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(c=t,cA(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function SG(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=a5(r.transform,i||null);null!=a&&(null===t&&(t=bi.empty()),t.set(r.field,a))}return t||null}function f5(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&E_(t,r,(i,a)=>function bG(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof op&&r instanceof op||t instanceof ap&&r instanceof ap?E_(t.elements,r.elements,tu):t instanceof M_&&r instanceof M_?tu(t.gt,r.gt):t instanceof A_&&r instanceof A_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class x_ extends lA{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Dc extends lA{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function p5(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function g5(n,e,t){const r=new Map;ct(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,f=e.data.field(a.field);r.set(a.field,IG(c,f,t[i]))}return r}function m5(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,EG(a,c,e))}return r}class P_ extends lA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class r2 extends lA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class i2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&DG(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=QC(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=QC(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=r5();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(i.key)?null:f;const g=h5(c,f);null!==g&&r.set(i.key,g),c.isValidDocument()||c.convertToNoDocument(lt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&E_(this.mutations,e.mutations,(t,r)=>f5(t,r))&&E_(this.baseMutations,e.baseMutations,(t,r)=>f5(t,r))}}class s2{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ct(e.mutations.length===r.length);let i=vG;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new s2(e,t,r,i)}}class o2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class MG{constructor(e,t){this.count=e,this.unchangedNames=t}}var Rr,Jt;function _5(n){switch(n){default:return et();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function y5(n){if(void 0===n)return br("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Rr.OK:return ae.OK;case Rr.CANCELLED:return ae.CANCELLED;case Rr.UNKNOWN:return ae.UNKNOWN;case Rr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Rr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Rr.INTERNAL:return ae.INTERNAL;case Rr.UNAVAILABLE:return ae.UNAVAILABLE;case Rr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Rr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Rr.NOT_FOUND:return ae.NOT_FOUND;case Rr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Rr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Rr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Rr.ABORTED:return ae.ABORTED;case Rr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Rr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Rr.DATA_LOSS:return ae.DATA_LOSS;default:return et()}}(Jt=Rr||(Rr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class a2{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return dA}static getOrCreateInstance(){return null===dA&&(dA=new a2),dA}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let dA=null;function v5(){return new TextEncoder}const xG=new w_([4294967295,4294967295],0);function w5(n){const e=v5().encode(n),t=new Iz;return t.update(e),new Uint8Array(t.digest())}function C5(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new w_([t,r],0),new w_([i,a],0)]}class u2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new JC(`Invalid padding: ${t}`);if(r<0)throw new JC(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new JC(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new JC(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=w_.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(w_.fromNumber(r)));return 1===i.compare(xG)&&(i=new w_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=w5(e),[r,i]=C5(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new u2(a,i,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(0===this.It)return;const t=w5(e),[r,i]=C5(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class JC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class XC{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,eE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new XC(lt.min(),i,new On(St),bs(),Nt())}}class eE{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new eE(r,t,Nt(),Nt(),Nt())}}class hA{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class E5{constructor(e,t){this.targetId=e,this.Vt=t}}class I5{constructor(e,t,r=Xr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class b5{constructor(){this.St=0,this.Dt=D5(),this.Ct=Xr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Nt(),t=Nt(),r=Nt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new eE(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=D5()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class PG{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=bs(),this.zt=T5(),this.Wt=new On(St)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const c=a.target;if(iA(c))if(0===i){const f=new We(c.path);this.Yt(r,f,Hn.newNoDocument(f,lt.min()))}else ct(1===i);else{const f=this.ie(r);if(f!==i){const g=this.re(e,f);0!==g&&(this.ee(r),this.Wt=this.Wt.insert(r,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=a2.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,b,T){var A,R,W,Q,J,be;const Ge={localCacheCount:b,existenceFilterCount:T.count},ke=T.unchangedNames;return ke&&(Ge.bloomFilter={applied:0===v,hashCount:null!==(A=ke?.hashCount)&&void 0!==A?A:0,bitmapLength:null!==(Q=null===(W=null===(R=ke?.bits)||void 0===R?void 0:R.bitmap)||void 0===W?void 0:W.length)&&void 0!==Q?Q:0,padding:null!==(be=null===(J=ke?.bits)||void 0===J?void 0:J.padding)&&void 0!==be?be:0}),Ge}(g,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:c=0},hashCount:f=0}=r;let g,v;try{g=Ic(a).toUint8Array()}catch(b){if(b instanceof PB)return Uo("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{v=new u2(g,c,f)}catch(b){return Uo(b instanceof JC?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const c=this.Gt.ue(),f=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,c)=>{const f=this.se(c);if(f){if(a.current&&iA(f.target)){const g=new We(f.target.path);null!==this.jt.get(g)||this.ae(c,g)||this.Yt(c,g,Hn.newNoDocument(g,e))}a.Mt&&(t.set(c,a.Ot()),a.Ft())}});let r=Nt();this.zt.forEach((a,c)=>{let f=!0;c.forEachWhile(g=>{const v=this.se(g);return!v||"TargetPurposeLimboResolution"===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,c)=>c.setReadTime(e));const i=new XC(e,t,this.Wt,this.jt,r);return this.jt=bs(),this.zt=T5(),this.Wt=new On(St),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new b5,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new $n(St),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||xe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new b5),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function T5(){return new On(We.comparator)}function D5(){return new On(We.comparator)}const OG={asc:"ASCENDING",desc:"DESCENDING"},NG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RG={and:"AND",or:"OR"};class kG{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function c2(n,e){return n.useProto3Json||VC(e)?e:{value:e}}function O_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S5(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function FG(n,e){return O_(n,e.toTimestamp())}function Tr(n){return ct(!!n),lt.fromTimestamp(function(e){const t=gd(e);return new Zn(t.seconds,t.nanos)}(n))}function l2(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function A5(n){const e=Qt.fromString(n);return ct(L5(e)),e}function tE(n,e){return l2(n.databaseId,e.path)}function ru(n,e){const t=A5(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(x5(t))}function d2(n,e){return l2(n.databaseId,e)}function M5(n){const e=A5(n);return 4===e.length?Qt.emptyPath():x5(e)}function nE(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function x5(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function P5(n,e,t){return{name:tE(n,e),fields:t.value.mapValue.fields}}function O5(n,e,t){const r=ru(n,e.name),i=Tr(e.updateTime),a=e.createTime?Tr(e.createTime):lt.min(),c=new bi({mapValue:{fields:e.fields}}),f=Hn.newFoundDocument(r,i,a,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function rE(n,e){let t;if(e instanceof x_)t={update:P5(n,e.key,e.value)};else if(e instanceof P_)t={delete:tE(n,e.key)};else if(e instanceof Dc)t={update:P5(n,e.key,e.data),updateMask:zG(e.fieldMask)};else{if(!(e instanceof r2))return et();t={verify:tE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof A_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof op)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ap)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof M_)return{fieldPath:a.field.canonicalString(),increment:c.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:FG(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function h2(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Kn.updateTime(Tr(i.updateTime)):void 0!==i.exists?Kn.exists(i.exists):Kn.none():Kn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let f=null;"setToServerValue"in c?(ct("REQUEST_TIME"===c.setToServerValue),f=new A_):"appendMissingElements"in c?f=new op(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new ap(c.removeAllFromArray.values||[]):"increment"in c?f=new M_(a,c.increment):et();const g=hr.fromServerFormat(c.fieldPath);return new YC(g,f)}(n,i)):[];var i;if(e.update){const i=ru(n,e.update.name),a=new bi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Is((e.updateMask.fieldPaths||[]).map(v=>hr.fromServerFormat(v)));return new Dc(i,a,c,t,r)}return new x_(i,a,t,r)}if(e.delete){const i=ru(n,e.delete);return new P_(i,t)}if(e.verify){const i=ru(n,e.verify);return new r2(i,t)}return et()}function N5(n,e){return{documents:[d2(n,e.path)]}}function f2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=d2(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=d2(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return F5(vn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(v=>{return{field:Cd((b=v).field),direction:jG(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=c2(n,e.limit);var f,g;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function R5(n){let e=M5(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ct(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const T=k5(b);return T instanceof vn&&Kk(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(b=>{return new T_(N_((T=b).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let f=null;t.limit&&(f=function(b){let T;return T="object"==typeof b?b.value:b,VC(T)?null:T}(t.limit));let g=null;var b;t.startAt&&(g=new wd((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new wd(b.values||[],!b.before)}(t.endAt)),YB(e,i,c,a,f,"F",g,v)}function k5(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=N_(e.unaryFilter.field);return Kt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=N_(e.unaryFilter.field);return Kt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=N_(e.unaryFilter.field);return Kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=N_(e.unaryFilter.field);return Kt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?Kt.create(N_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return vn.create(e.compositeFilter.filters.map(t=>k5(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function jG(n){return OG[n]}function $G(n){return NG[n]}function HG(n){return RG[n]}function Cd(n){return{fieldPath:n.canonicalString()}}function N_(n){return hr.fromServerFormat(n.fieldPath)}function F5(n){return n instanceof Kt?function(e){if("=="===e.op){if(RB(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NAN"}};if(NB(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(RB(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NOT_NAN"}};if(NB(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cd(e.field),op:$G(e.op),value:e.value}}}(n):n instanceof vn?function(e){const t=e.getFilters().map(r=>F5(r));return 1===t.length?t[0]:{compositeFilter:{op:HG(e.op),filters:t}}}(n):et()}function zG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function L5(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Sc{constructor(e,t,r,i,a=lt.min(),c=lt.min(),f=Xr.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Sc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class U5{constructor(e){this.fe=e}}function V5(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fA(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:tE(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:O_(i,a.version.toTimestamp()),createTime:O_(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:up(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:up(e.version)}}var i,a;return r}function fA(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function up(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cp(n){const e=new Zn(n.seconds,n.nanoseconds);return lt.fromTimestamp(e)}function lp(n,e){const t=(e.baseMutations||[]).map(a=>h2(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>h2(n.fe,a)),i=Zn.fromMillis(e.localWriteTimeMs);return new i2(e.batchId,i,t,r)}function iE(n){const e=cp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cp(n.lastLimboFreeSnapshotVersion):lt.min();let r;var i;return void 0!==n.query.documents?(ct(1===(i=n.query).documents.length),r=rs(S_(M5(i.documents[0])))):r=rs(R5(n.query)),new Sc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Xr.fromBase64String(n.resumeToken))}function B5(n,e){const t=up(e.snapshotVersion),r=up(e.lastLimboFreeSnapshotVersion);let i;i=iA(e.target)?N5(n.fe,e.target):f2(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ip(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function p2(n){const e=R5({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?aA(e,e.limit,"L"):e}function g2(n,e){return new o2(e.largestBatchId,h2(n.fe,e.overlayMutation))}function j5(n,e){const t=e.path.lastSegment();return[n,ji(e.path.popLast()),t]}function $5(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:up(r.readTime),documentKey:ji(r.documentKey.path),largestBatchId:r.largestBatchId}}class WG{getBundleMetadata(e,t){return H5(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:cp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return H5(e).put({bundleId:(r=t).id,createTime:up(Tr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return z5(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:p2(i.bundledQuery),readTime:cp(i.readTime)};var i})}saveNamedQuery(e,t){return z5(e).put({name:(r=t).name,readTime:up(Tr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function H5(n){return ci(n,"bundles")}function z5(n){return ci(n,"namedQueries")}class pA{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new pA(e,t.uid||"")}getOverlay(e,t){return sE(e).get(j5(this.userId,t)).next(r=>r?g2(this.serializer,r):null)}getOverlays(e,t){const r=nu();return ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const f=new o2(t,c);i.push(this.we(e,f))}),ne.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ji(c.getCollectionPath())));const a=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(sE(e).J("collectionPathOverlayIndex",f))}),ne.waitFor(a)}getOverlaysForCollection(e,t,r){const i=nu(),a=ji(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return sE(e).j("collectionPathOverlayIndex",c).next(f=>{for(const g of f){const v=g2(this.serializer,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=nu();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sE(e).X({index:"collectionGroupOverlayIndex",range:f},(g,v,b)=>{const T=g2(this.serializer,v);a.size()<i||T.largestBatchId===c?(a.set(T.getKey(),T),c=T.largestBatchId):b.done()}).next(()=>a)}we(e,t){return sE(e).put(function(r,i,a){const[c,f,g]=j5(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:rE(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function sE(n){return ci(n,"documentOverlays")}class dp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(fr(e.integerValue));else if("doubleValue"in e){const r=fr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),BC(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ic(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?kB(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),We.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function qG(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function G5(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=qG(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}dp.Ve=new dp;class ZG{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=G5(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=G5(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class KG{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class YG{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class oE{constructor(){this.je=new ZG,this.ze=new KG(this.je),this.We=new YG(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class hp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hp(this.indexId,this.documentKey,this.arrayValue,r)}}function Ed(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=W5(n.arrayValue,e.arrayValue),0!==t?t:(t=W5(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function W5(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class QG{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ct(e.collectionGroup===this.collectionId);const t=jk(e);if(void 0!==t&&!this.en(t))return!1;const r=tp(e);let i=new Set,a=0,c=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[c++],f))return!1}++a}for(;a<r.length;++a)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function q5(n){var e,t;if(ct(n instanceof Kt||n instanceof vn),n instanceof Kt){if(n instanceof qB){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>Kt.create(n.field,"==",a)))||[];return vn.create(i,"or")}return n}const r=n.filters.map(i=>q5(i));return vn.create(r,n.op)}function JG(n){if(0===n.getFilters().length)return[];const e=y2(q5(n));return ct(Z5(e)),m2(e)||_2(e)?[e]:e.getFilters()}function m2(n){return n instanceof Kt}function _2(n){return n instanceof vn&&Kk(n)}function Z5(n){return m2(n)||_2(n)||function(e){if(e instanceof vn&&Zk(e)){for(const t of e.getFilters())if(!m2(t)&&!_2(t))return!1;return!0}return!1}(n)}function y2(n){if(ct(n instanceof Kt||n instanceof vn),n instanceof Kt)return n;if(1===n.filters.length)return y2(n.filters[0]);const e=n.filters.map(r=>y2(r));let t=vn.create(e,n.op);return t=gA(t),Z5(t)?t:(ct(t instanceof vn),ct(D_(t)),ct(t.filters.length>1),t.filters.reduce((r,i)=>v2(r,i)))}function v2(n,e){let t;return ct(n instanceof Kt||n instanceof vn),ct(e instanceof Kt||e instanceof vn),t=n instanceof Kt?e instanceof Kt?vn.create([n,e],"and"):K5(n,e):e instanceof Kt?K5(e,n):function(r,i){if(ct(r.filters.length>0&&i.filters.length>0),D_(r)&&D_(i))return zB(r,i.getFilters());const a=Zk(r)?r:i,c=Zk(r)?i:r,f=a.filters.map(g=>v2(g,c));return vn.create(f,"or")}(n,e),gA(t)}function K5(n,e){if(D_(e))return zB(e,n.getFilters());{const t=e.filters.map(r=>v2(n,r));return vn.create(t,"or")}}function gA(n){if(ct(n instanceof Kt||n instanceof vn),n instanceof Kt)return n;const e=n.getFilters();if(1===e.length)return gA(e[0]);if($B(n))return n;const t=e.map(i=>gA(i)),r=[];return t.forEach(i=>{i instanceof Kt?r.push(i):i instanceof vn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:vn.create(r,n.op)}class XG{constructor(){this.rn=new w2}addToCollectionParentIndex(e,t){return this.rn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(to.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(to.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class w2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $n(Qt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(Qt.comparator)).toArray()}}const mA=new Uint8Array(0);class eW{constructor(e,t){this.user=e,this.databaseId=t,this.on=new w2,this.un=new Tc(r=>ip(r),(r,i)=>GC(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:ji(i)};return Y5(e).put(a)}return ne.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[gB(t),""],!1,!0);return Y5(e).j(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(eu(c.parent))}return r})}addFieldIndex(e,t){const r=_A(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=uE(e);return a.next(f=>{c.put($5(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=_A(e),i=uE(e),a=aE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=aE(e);let i=!0;const a=new Map;return ne.forEach(this.cn(t),c=>this.an(e,c).next(f=>{i&&(i=!!f),a.set(c,f)})).next(()=>{if(i){let c=Nt();const f=[];return ne.forEach(a,(g,v)=>{var b;xe("IndexedDbIndexManager",`Using index ${b=g,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(ke=>`${ke.fieldPath}:${ke.kind}`).join(",")}`} to execute ${ip(t)}`);const T=function(ke,Ye){const mt=jk(Ye);if(void 0===mt)return null;for(const At of sA(ke,mt.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(v,g),A=function(ke,Ye){const mt=new Map;for(const At of tp(Ye))for(const Sr of sA(ke,At.fieldPath))switch(Sr.op){case"==":case"in":mt.set(At.fieldPath.canonicalString(),Sr.value);break;case"not-in":case"!=":return mt.set(At.fieldPath.canonicalString(),Sr.value),Array.from(mt.values())}return null}(v,g),R=function(ke,Ye){const mt=[];let At=!0;for(const Sr of tp(Ye)){const Ss=0===Sr.kind?ZB(ke,Sr.fieldPath,ke.startAt):KB(ke,Sr.fieldPath,ke.startAt);mt.push(Ss.value),At&&(At=Ss.inclusive)}return new wd(mt,At)}(v,g),W=function(ke,Ye){const mt=[];let At=!0;for(const Sr of tp(Ye)){const Ss=0===Sr.kind?KB(ke,Sr.fieldPath,ke.endAt):ZB(ke,Sr.fieldPath,ke.endAt);mt.push(Ss.value),At&&(At=Ss.inclusive)}return new wd(mt,At)}(v,g),Q=this.hn(g,v,R),J=this.hn(g,v,W),be=this.ln(g,v,A),Ge=this.fn(g.indexId,T,Q,R.inclusive,J,W.inclusive,be);return ne.forEach(Ge,ke=>r.H(ke,t.limit).next(Ye=>{Ye.forEach(mt=>{const At=We.fromSegments(mt.documentKey);c.has(At)||(c=c.add(At),f.push(At))})}))}).next(()=>f)}return ne.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:JG(vn.create(e.filters,"and")).map(r=>Qk(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,c,f){const g=(null!=t?t.length:1)*Math.max(r.length,a.length),v=g/(null!=t?t.length:1),b=[];for(let T=0;T<g;++T){const A=t?this.dn(t[T/v]):mA,R=this.wn(e,A,r[T%v],i),W=this._n(e,A,a[T%v],c),Q=f.map(J=>this.wn(e,A,J,!0));b.push(...this.createRange(R,W,Q))}return b}wn(e,t,r,i){const a=new hp(e,We.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new hp(e,We.empty(),t,r);return i?a.Je():a}an(e,t){const r=new QG(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const f of a)r.tn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return ne.forEach(i,a=>this.an(e,a).next(c=>{c?0!==r&&c.fields.length<function(f){let g=new $n(hr.comparator),v=!1;for(const b of f.filters)for(const T of b.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?v=!0:g=g.add(T.field));for(const b of f.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new oE;for(const i of tp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.He(i.kind);dp.Ve._e(a,c)}return r.Qe()}dn(e){const t=new oE;return dp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new oE;return dp.Ve._e(rp(this.databaseId,t),r.He(function(i){const a=tp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new oE);let a=0;for(const c of tp(e)){const f=r[a++];for(const g of i)if(this.yn(t,c.fieldPath)&&HC(f))i=this.pn(i,c,f);else{const v=g.He(c.kind);dp.Ve._e(f,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const f of i){const g=new oE;g.seed(f.Qe()),dp.Ve._e(c,g.He(t.kind)),a.push(g)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof Kt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=_A(e),i=uE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const c=[];return ne.forEach(a,f=>i.get([f.indexId,this.uid]).next(g=>{c.push(function(v,b){const T=b?new LC(b.sequenceNumber,new to(cp(b.readTime),new We(eu(b.documentKey)),b.largestBatchId)):LC.empty(),A=v.fields.map(([R,W])=>new K1(hr.fromServerFormat(R),W));return new Z1(v.indexId,v.collectionGroup,A,T)}(f,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:St(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=_A(e),a=uE(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ne.forEach(f,g=>a.put($5(g.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ne.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ne.forEach(f,g=>this.En(e,i,g).next(v=>{const b=this.An(a,g);return v.isEqual(b)?ne.resolve():this.vn(e,a,g,v,b)}))))})}Rn(e,t,r,i){return aE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return aE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=aE(e);let a=new $n(Ed);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,f)=>{a=a.add(new hp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new $n(Ed);const i=this.mn(t,e);if(null==i)return r;const a=jk(t);if(null!=a){const c=e.data.field(a.fieldPath);if(HC(c))for(const f of c.arrayValue.values||[])r=r.add(new hp(t.indexId,e.key,this.dn(f),i))}else r=r.add(new hp(t.indexId,e.key,mA,i));return r}vn(e,t,r,i,a){xe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,g,v,b,T){const A=f.getIterator(),R=g.getIterator();let W=I_(A),Q=I_(R);for(;W||Q;){let J=!1,be=!1;if(W&&Q){const Ge=v(W,Q);Ge<0?be=!0:Ge>0&&(J=!0)}else null!=W?be=!0:J=!0;J?(b(Q),Q=I_(R)):be?(T(W),W=I_(A)):(W=I_(A),Q=I_(R))}}(i,a,Ed,f=>{c.push(this.Rn(e,t,r,f))},f=>{c.push(this.Pn(e,t,r,f))}),ne.waitFor(c)}Tn(e){let t=1;return uE(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Ed(c,f)).filter((c,f,g)=>!f||0!==Ed(c,g[f-1]));const i=[];i.push(e);for(const c of r){const f=Ed(c,e),g=Ed(c,t);if(0===f)i[0]=e.Je();else if(f>0&&g<0)i.push(c),i.push(c.Je());else if(g>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,mA,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,mA,[]]))}return a}bn(e,t){return Ed(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Q5)}getMinOffset(e,t){return ne.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||et())).next(Q5)}}function Y5(n){return ci(n,"collectionParents")}function aE(n){return ci(n,"indexEntries")}function _A(n){return ci(n,"indexConfiguration")}function uE(n){return ci(n,"indexState")}function Q5(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;$k(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new to(e.readTime,e.documentKey,t)}const J5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $i{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $i(e,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function X5(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let f=0;const g=r.X({range:c},(b,T,A)=>(f++,A.delete()));a.push(g.next(()=>{ct(1===f)}));const v=[];for(const b of t.mutations){const T=bB(e,b.key.path,t.batchId);a.push(i.delete(T)),v.push(b.key)}return ne.waitFor(a).next(()=>v)}function yA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}$i.DEFAULT_COLLECTION_PERCENTILE=10,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$i.DEFAULT=new $i(41943040,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$i.DISABLED=new $i(-1,0,0);class vA{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){ct(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new vA(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Id(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=R_(e),c=Id(e);return c.add({}).next(f=>{ct("number"==typeof f);const g=new i2(f,t,r,i),v=function(A,R,W){const Q=W.baseMutations.map(be=>rE(A.fe,be)),J=W.mutations.map(be=>rE(A.fe,be));return{userId:R,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:Q,mutations:J}}(this.serializer,this.userId,g),b=[];let T=new $n((A,R)=>St(A.canonicalString(),R.canonicalString()));for(const A of i){const R=bB(this.userId,A.key.path,f);T=T.add(A.key.path.popLast()),b.push(c.put(v)),b.push(a.put(R,jz))}return T.forEach(A=>{b.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Vn[f]=g.keys()}),ne.waitFor(b).next(()=>g)})}lookupMutationBatch(e,t){return Id(e).get(t).next(r=>r?(ct(r.userId===this.userId),lp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ne.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Id(e).X({index:"userMutationsIndex",range:i},(c,f,g)=>{f.userId===this.userId&&(ct(f.batchId>=r),a=lp(this.serializer,f)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Id(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Id(e).j("userMutationsIndex",t).next(r=>r.map(i=>lp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Q1(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return R_(e).X({range:i},(c,f,g)=>{const[v,b,T]=c,A=eu(b);if(v===this.userId&&t.path.isEqual(A))return Id(e).get(T).next(R=>{if(!R)throw et();ct(R.userId===this.userId),a.push(lp(this.serializer,R))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(St);const i=[];return t.forEach(a=>{const c=Q1(this.userId,a.path),f=IDBKeyRange.lowerBound(c),g=R_(e).X({range:f},(v,b,T)=>{const[A,R,W]=v,Q=eu(R);A===this.userId&&a.path.isEqual(Q)?r=r.add(W):T.done()});i.push(g)}),ne.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Q1(this.userId,r),c=IDBKeyRange.lowerBound(a);let f=new $n(St);return R_(e).X({range:c},(g,v,b)=>{const[T,A,R]=g,W=eu(A);T===this.userId&&r.isPrefixOf(W)?W.length===i&&(f=f.add(R)):b.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Id(e).get(a).next(c=>{if(null===c)throw et();ct(c.userId===this.userId),r.push(lp(this.serializer,c))}))}),ne.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return X5(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ne.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return R_(e).X({range:r},(a,c,f)=>{if(a[0]===this.userId){const g=eu(a[1]);i.push(g)}else f.done()}).next(()=>{ct(0===i.length)})})}containsKey(e,t){return e6(e,this.userId,t)}xn(e){return t6(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function e6(n,e,t){const r=Q1(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return R_(n).X({range:a,Y:!0},(f,g,v)=>{const[b,T,A]=f;b===e&&T===i&&(c=!0),v.done()}).next(()=>c)}function Id(n){return ci(n,"mutations")}function R_(n){return ci(n,"documentMutations")}function t6(n){return ci(n,"mutationQueues")}class fp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new fp(0)}static Mn(){return new fp(-1)}}class tW{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new fp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>lt.fromTimestamp(new Zn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>k_(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return k_(e).X((c,f)=>{const g=iE(f);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>ne.waitFor(a)).next(()=>i)}forEachTarget(e,t){return k_(e).X((r,i)=>{const a=iE(i);t(a)})}$n(e){return n6(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}On(e,t){return n6(e).put("targetGlobalKey",t)}Fn(e,t){return k_(e).put(B5(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ip(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return k_(e).X({range:i,index:"queryTargetsIndex"},(c,f,g)=>{const v=iE(f);GC(t,v.target)&&(a=v,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=bd(e);return t.forEach(c=>{const f=ji(c.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),ne.waitFor(i)}removeMatchingKeys(e,t,r){const i=bd(e);return ne.forEach(t,a=>{const c=ji(a.path);return ne.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=bd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=bd(e);let a=Nt();return i.X({range:r,Y:!0},(c,f,g)=>{const v=eu(c[1]),b=new We(v);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=ji(t.path),i=IDBKeyRange.bound([r],[gB(r)],!1,!0);let a=0;return bd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,f],g,v)=>{0!==c&&(a++,v.done())}).next(()=>a>0)}le(e,t){return k_(e).get(t).next(r=>r?iE(r):null)}}function k_(n){return ci(n,"targets")}function n6(n){return ci(n,"targetGlobal")}function bd(n){return ci(n,"targetDocuments")}function r6([n,e],[t,r]){const i=St(n,t);return 0===i?St(e,r):i}class nW{constructor(e){this.Ln=e,this.buffer=new $n(r6),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();r6(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class i6{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,z.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){fd(r)?xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield hd(r)}yield t.Qn(3e5)}))}}class rW{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ne.resolve(no.ct);const r=new nW(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(J5)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J5):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,c,f,g,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,c=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,f=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(v=Date.now(),Vk()<=Li.in.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${a} targets in `+(g-f)+`ms\n\tRemoved ${T} documents in `+(v-g)+`ms\nTotal Duration: ${v-b}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class iW{constructor(e,t){this.db=e,this.garbageCollector=function s6(n,e){return new rW(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return wA(e,r)}removeReference(e,t,r){return wA(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return wA(e,t)}Xn(e,t){return function(r,i){let a=!1;return t6(r).Z(c=>e6(r,c,i).next(f=>(f&&(a=!0),ne.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(c,f)=>{if(f<=t){const g=this.Xn(e,c).next(v=>{if(!v)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,lt.min()),bd(e).delete([0,ji(c.path)])))});i.push(g)}}).next(()=>ne.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return wA(e,t)}Yn(e,t){const r=bd(e);let i,a=no.ct;return r.X({index:"documentTargetsIndex"},([c,f],{path:g,sequenceNumber:v})=>{0===c?(a!==no.ct&&t(new We(eu(i)),a),a=v,i=g):a=no.ct}).next(()=>{a!==no.ct&&t(new We(eu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wA(n,e){return bd(n).put((r=n.currentSequenceNumber,{targetId:0,path:ji(e.path),sequenceNumber:r}));var r}class o6{constructor(){this.changes=new Tc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sW{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pp(e).put(r)}removeEntry(e,t,r){return pp(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],fA(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return pp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(cE(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return pp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(cE(t))},(i,a)=>{r={document:this.ts(t,a),size:yA(a)}}).next(()=>r)}getEntries(e,t){let r=bs();return this.ns(e,t,(i,a)=>{const c=this.ts(i,a);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=bs(),i=new On(We.comparator);return this.ns(e,t,(a,c)=>{const f=this.ts(a,c);r=r.insert(a,f),i=i.insert(a,yA(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ne.resolve();let i=new $n(l6);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(cE(i.first()),cE(i.last())),c=i.getIterator();let f=c.getNext();return pp(e).X({index:"documentKeyIndex",range:a},(g,v,b)=>{const T=We.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&l6(f,T)<0;)r(f,null),f=c.getNext();f&&f.isEqual(T)&&(r(f,v),f=c.hasNext()?c.getNext():null),f?b.G(cE(f)):b.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),fA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pp(e).j(IDBKeyRange.bound(c,f,!0)).next(g=>{let v=bs();for(const b of g){const T=this.ts(We.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);T.isFoundDocument()&&(qC(t,T)||i.has(T.key))&&(v=v.insert(T.key,T))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=bs();const c=c6(t,r),f=c6(t,to.max());return pp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(g,v,b)=>{const T=this.ts(We.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(T.key,T),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new oW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return u6(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}Zn(e,t){return u6(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function GG(n,e){let t;if(e.document)t=O5(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=cp(e.noDocument.readTime);t=Hn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=We.fromSegments(e.unknownDocument.path),i=cp(e.unknownDocument.version);t=Hn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Zn(r[0],r[1]);return lt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(lt.min()))return r}return Hn.newInvalidDocument(e)}}function a6(n){return new sW(n)}class oW extends o6{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Tc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new $n((a,c)=>St(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),c.isValidDocument()){const g=V5(this.os.serializer,c);i=i.add(a.path.popLast());const v=yA(g);r+=v-f.size,t.push(this.os.addEntry(e,a,g))}else if(r-=f.size,this.trackRemovals){const g=V5(this.os.serializer,c.convertToNoDocument(lt.min()));t.push(this.os.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,c)=>{this.us.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function u6(n){return ci(n,"remoteDocumentGlobal")}function pp(n){return ci(n,"remoteDocumentsV14")}function cE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function c6(n,e){const t=e.documentKey.path.toArray();return[n,fA(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function l6(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=St(t[a],r[a]),i)return i;return i=St(t.length,r.length),i||(i=St(t[t.length-2],r[r.length-2]),i||St(t[t.length-1],r[r.length-1]))}class aW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class d6{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&QC(r.mutation,i,Is.empty(),Zn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Nt()){const i=nu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=ZC();return a.forEach((f,g)=>{c=c.insert(f,g.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=nu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Nt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let a=bs();const c=KC(),f=KC();return t.forEach((g,v)=>{const b=r.get(v.key);i.has(v.key)&&(void 0===b||b.mutation instanceof Dc)?a=a.insert(v.key,v):void 0!==b?(c.set(v.key,b.mutation.getFieldMask()),QC(b.mutation,v,b.mutation.getFieldMask(),Zn.now())):c.set(v.key,Is.empty())}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((v,b)=>c.set(v,b)),t.forEach((v,b)=>{var T;return f.set(v,new aW(b,null!==(T=c.get(v))&&void 0!==T?T:null))}),f))}recalculateAndSaveOverlays(e,t){const r=KC();let i=new On((c,f)=>c-f),a=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let b=r.get(g)||Is.empty();b=f.applyToLocalView(v,b),r.set(g,b);const T=(i.get(f.batchId)||Nt()).add(g);i=i.insert(f.batchId,T)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,b=g.value,T=r5();b.forEach(A=>{if(!a.has(A)){const R=h5(t.get(A),r.get(A));null!==R&&T.set(A,R),a=a.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,T))}return ne.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Xk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ne.resolve(nu());let f=-1,g=a;return c.next(v=>ne.forEach(v,(b,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(b)?ne.resolve():this.remoteDocumentCache.getEntry(e,b).next(A=>{g=g.insert(b,A)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,g,v,Nt())).next(b=>({batchId:f,changes:n5(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let i=ZC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=ZC();return this.indexManager.getCollectionParents(e,i).next(c=>ne.forEach(c,f=>{const g=(v=t,b=f.child(i),new bc(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(v=>{v.forEach((b,T)=>{a=a.insert(b,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,g)=>{const v=g.getKey();null===a.get(v)&&(a=a.insert(v,Hn.newInvalidDocument(v)))});let c=ZC();return a.forEach((f,g)=>{const v=i.get(f);void 0!==v&&QC(v.mutation,g,Is.empty(),Zn.now()),qC(t,g)&&(c=c.insert(f,g))}),c})}}class uW{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ne.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Tr(r.createTime)}),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:p2(r.bundledQuery),readTime:Tr(r.readTime)}),ne.resolve();var r}}class cW{constructor(){this.overlays=new On(We.comparator),this.ls=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=nu();return ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const i=nu(),a=t.length+1,c=new We(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new On((v,b)=>v-b);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=nu(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const f=nu(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,b)=>f.set(v,b)),!(f.size()>=i)););return ne.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new o2(t,r));let a=this.ls.get(t);void 0===a&&(a=Nt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class C2{constructor(){this.fs=new $n(li.ds),this.ws=new $n(li._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new li(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new li(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new We(new Qt([])),r=new li(t,e),i=new li(t,e+1),a=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),a.push(c.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new We(new Qt([])),r=new li(t,e),i=new li(t,e+1);let a=Nt();return this.ws.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new li(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class li{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return We.comparator(e.key,t.key)||St(e.As,t.As)}static _s(e,t){return St(e.As,t.As)||We.comparator(e.key,t.key)}}class lW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new $n(li.ds)}checkEmpty(e){return ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const c=new i2(a,t,r,i);this.mutationQueue.push(c);for(const f of i)this.Rs=this.Rs.add(new li(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new li(t,0),i=new li(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],c=>{const f=this.Ps(c.As);a.push(f)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(St);return t.forEach(i=>{const a=new li(i,0),c=new li(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,c],f=>{r=r.add(f.As)})}),ne.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const c=new li(new We(a),0);let f=new $n(St);return this.Rs.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(g.As)),!0)},c),ne.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ne.forEach(t.mutations,i=>{const a=new li(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new li(t,0),i=this.Rs.firstAfterOrEqual(r);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ne.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class dW{constructor(e){this.Ds=e,this.docs=new On(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=bs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Hn.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=bs();const c=t.path,f=new We(c.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:b}}=g.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||$k(_B(b),r)<=0||(i.has(b.key)||qC(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,i){et()}Cs(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new hW(this)}getSize(e){return ne.resolve(this.size)}}class hW extends o6{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class fW{constructor(e){this.persistence=e,this.xs=new Tc(t=>ip(t),GC),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new C2,this.targetCount=0,this.Ms=fp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ne.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new fp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Fn(t),ne.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ne.waitFor(a).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.ks.containsKey(t))}}class E2{constructor(e,t){this.$s={},this.overlays={},this.Os=new no(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new fW(this),this.indexManager=new XG,this.remoteDocumentCache=new dW(r=>this.referenceDelegate.Ls(r)),this.serializer=new U5(t),this.qs=new uW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new lW(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const i=new pW(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return ne.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class pW extends vB{constructor(e){super(),this.currentSequenceNumber=e}}class CA{constructor(e){this.persistence=e,this.Qs=new C2,this.js=null}static zs(e){return new CA(e)}get Ws(){if(this.js)return this.js;throw et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Ws,r=>{const i=We.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,lt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ne.or([()=>ne.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class gW{constructor(e){this.serializer=e}O(e,t,r,i){const a=new Y1("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IB,{unique:!0}),f.createObjectStore("documentMutations"),h6(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=ne.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),h6(e)),c=c.next(()=>function(f){const g=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:lt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,g){return g.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IB,{unique:!0});const b=g.store("mutations"),T=v.map(A=>b.put(A));return ne.waitFor(T)})}(e,a))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(a))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(a))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(a))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const g=f.createObjectStore("documentOverlays",{keyPath:Xz});g.createIndex("collectionPathOverlayIndex",eG,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",tG,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const g=f.createObjectStore("remoteDocumentsV14",{keyPath:$z});g.createIndex("documentKeyIndex",Hz),g.createIndex("collectionGroupIndex",zz)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,a))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:Kz}).createIndex("sequenceNumberIndex",Yz,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Qz}).createIndex("documentKeyIndex",Jz,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=yA(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ne.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>ne.forEach(f,g=>{ct(g.userId===a.userId);const v=lp(this.serializer,g);return X5(e,a.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,f)=>{const g=new Qt(c),v=[0,ji(g)];a.push(t.get(v).next(b=>b?ne.resolve():t.put({targetId:0,path:ji(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ne.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Zz});const r=t.store("collectionParents"),i=new w2,a=c=>{if(i.add(c)){const f=c.lastSegment(),g=c.popLast();return r.put({collectionId:f,parent:ji(g)})}};return t.store("remoteDocuments").X({Y:!0},(c,f)=>{const g=new Qt(c);return a(g.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,f,g],v)=>{const b=eu(f);return a(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=iE(i),c=B5(this.serializer,a);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const f=t.store("remoteDocumentsV14"),g=(v=c,v.document?new We(Qt.fromString(v.document.name).popFirst(5)):v.noDocument?We.fromSegments(v.noDocument.path):v.unknownDocument?We.fromSegments(v.unknownDocument.path):et()).path.toArray();var v;const b={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(b))}).next(()=>ne.waitFor(i))}si(e,t){const r=t.store("mutations"),i=a6(this.serializer),a=new E2(CA.zs,this.serializer.fe);return r.j().next(c=>{const f=new Map;return c.forEach(g=>{var v;let b=null!==(v=f.get(g.userId))&&void 0!==v?v:Nt();lp(this.serializer,g).keys().forEach(T=>b=b.add(T)),f.set(g.userId,b)}),ne.forEach(f,(g,v)=>{const b=new ui(v),T=pA.de(this.serializer,b),A=a.getIndexManager(b),R=vA.de(b,this.serializer,A,a.referenceDelegate);return new d6(i,R,T,A).recalculateAndSaveOverlaysForDocumentKeys(new Gk(t,no.ct),g).next()})})}}function h6(n){n.createObjectStore("targetDocuments",{keyPath:Wz}).createIndex("documentTargetsIndex",qz,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Gz,{unique:!0}),n.createObjectStore("targetGlobal")}const I2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class b2{constructor(e,t,r,i,a,c,f,g,v,b,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=c,this.document=f,this.ri=v,this.oi=b,this.ui=T,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=A=>Promise.resolve(),!b2.D())throw new Ie(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iW(this,i),this.di=t+"main",this.serializer=new U5(g),this.wi=new da(this.di,this.ui,new gW(this.serializer)),this.Bs=new tW(this.referenceDelegate,this.serializer),this.remoteDocumentCache=a6(this.serializer),this.qs=new WG,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(ae.FAILED_PRECONDITION,I2);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new no(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,z.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,z.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>IA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(fd(e))return xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return lE(e).get("owner").next(t=>ne.resolve(this.Ri(t)))}Pi(e){return IA(e).delete(this.clientId)}bi(){var e=this;return(0,z.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ci(r,"clientMetadata");return i.j().next(a=>{const c=e.Si(a,18e5),f=a.filter(g=>-1===c.indexOf(g));return ne.forEach(f,g=>i.delete(g.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ne.resolve(!0):lE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ie(ae.FAILED_PRECONDITION,I2);return!1}}return!(!this.networkEnabled||!this.inForeground)||IA(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&xe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,z.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Gk(t,no.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>IA(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return vA.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eW(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return pA.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){xe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.ui)?rG:14===c?SB:13===c?DB:12===c?nG:11===c?TB:void et();var c;let f;return this.wi.runTransaction(e,i,a,g=>(f=new Gk(g,this.Os?this.Os.next():no.ct),"readwrite-primary"===t?this.Ti(f).next(v=>!!v||this.Ei(f)).next(v=>{if(!v)throw br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ie(ae.FAILED_PRECONDITION,yB);return r(f)}).next(v=>this.vi(f).next(()=>v)):this.Oi(f).next(()=>r(f)))).then(g=>(f.raiseOnCommittedEvent(),g))}Oi(e){return lE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ie(ae.FAILED_PRECONDITION,I2)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lE(e).put("owner",t)}static D(){return da.D()}Ai(e){const t=lE(e);return t.get("owner").next(r=>this.Ri(r)?(xe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ne.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(br(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,$.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return xe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lE(n){return ci(n,"owner")}function IA(n){return ci(n,"clientMetadata")}function T2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class D2{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Nt(),i=Nt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new D2(e,t.fromCache,r,i)}}class f6{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(QB(t))return ne.resolve(null);let r=rs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=aA(t,null,"F"),r=rs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Nt(...a);return this.Ui.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.ji(t,f);return this.zi(t,v,c,g.readTime)?this.Ki(e,aA(t,null,"F")):this.Wi(e,v,t,g)}))})))}Gi(e,t,r,i){return QB(t)||i.isEqual(lt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const c=this.ji(t,a);return this.zi(t,c,r,i)?this.Qi(e,t):(Vk()<=Li.in.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),t2(t)),this.Wi(e,c,t,mB(i,-1)))})}ji(e,t){let r=new $n(e5(e));return t.forEach((i,a)=>{qC(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return Vk()<=Li.in.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",t2(t)),this.Ui.getDocumentsMatchingQuery(e,t,to.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class mW{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new On(St),this.Yi=new Tc(a=>ip(a),GC),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d6(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function p6(n,e,t,r){return new mW(n,e,t,r)}function g6(n,e){return S2.apply(this,arguments)}function S2(){return S2=(0,z.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],f=[];let g=Nt();for(const v of i){c.push(v.batchId);for(const b of v.mutations)g=g.add(b.key)}for(const v of a){f.push(v.batchId);for(const b of v.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(r,g).next(v=>({er:v,removedBatchIds:c,addedBatchIds:f}))})})}),S2.apply(this,arguments)}function m6(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function _6(n,e,t){let r=Nt(),i=Nt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=bs();return t.forEach((f,g)=>{const v=a.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),g.isNoDocument()&&g.version.isEqual(lt.min())?(e.removeEntry(f,g.readTime),c=c.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),c=c.insert(f,g)):xe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)}),{nr:c,sr:i}})}function vW(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function F_(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,ne.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new Sc(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function L_(n,e,t){return A2.apply(this,arguments)}function A2(){return A2=(0,z.Z)(function*(n,e,t){const r=qe(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!fd(c))throw c;xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),A2.apply(this,arguments)}function bA(n,e,t){const r=qe(n);let i=lt.min(),a=Nt();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,g,v){const b=qe(f),T=b.Yi.get(v);return void 0!==T?ne.resolve(b.Ji.get(T)):b.Bs.getTargetData(g,v)}(r,c,rs(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,f.targetId).next(g=>{a=g})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:lt.min(),t?a:Nt())).next(f=>(w6(r,XB(e),f),{documents:f,ir:a})))}function y6(n,e){const t=qe(n),r=qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(c=>c?c.target:null))}function v6(n,e){const t=qe(n),r=t.Xi.get(e)||lt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,mB(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(w6(t,e,i),i))}function w6(n,e,t){let r=n.Xi.get(e)||lt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function M2(){return M2=(0,z.Z)(function*(n,e,t,r){const i=qe(n);let a=Nt(),c=bs();for(const v of t){const b=e.rr(v.metadata.name);v.document&&(a=a.add(b));const T=e.ur(v);T.setReadTime(e.cr(v.metadata.readTime)),c=c.insert(b,T)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),g=yield F_(i,(v=r,rs(S_(Qt.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>_6(v,f,c).next(b=>(f.apply(v),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.Bs.addMatchingKeys(v,a,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,b.nr,b.sr)).next(()=>b.nr)))}),M2.apply(this,arguments)}function CW(n,e){return x2.apply(this,arguments)}function x2(){return x2=(0,z.Z)(function*(n,e,t=Nt()){const r=yield F_(n,rs(p2(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Tr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(Xr.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),x2.apply(this,arguments)}function C6(n,e){return`firestore_clients_${n}_${e}`}function E6(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function P2(n,e){return`firestore_targets_${n}_${e}`}class TA{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Ie(i.error.code,i.error.message))),c?new TA(e,t,i.state,a):(br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ie(r.error.code,r.error.message))),a?new dE(e,r.state,i):(br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class DA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=n2();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=CB(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new DA(e,a):(br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class O2{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new O2(t.clientId,t.onlineState):(br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class N2{constructor(){this.activeTargetIds=n2()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R2{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new On(St),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=C6(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new N2),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,z.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(C6(e.persistenceKey,i));if(a){const c=DA.ar(i,a);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(P2(this.persistenceKey,e));if(r){const i=dE.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(P2(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xe("SharedClientState","READ",e,t),t}setItem(e,t){xe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(xe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,z.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let c=no.ct;if(null!=a)try{const f=JSON.parse(a);ct("number"==typeof f),c=f}catch(f){br("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==no.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new TA(this.currentUser,e,t,r),a=E6(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=E6(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=P2(this.persistenceKey,e),a=new dE(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return DA.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return TA.ar(new ui(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return dE.ar(i,t)}br(e){return O2.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,z.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),c=[],f=[];return a.forEach(g=>{i.has(g)||c.push(g)}),i.forEach(g=>{a.has(g)||f.push(g)}),this.syncEngine.Wr(c,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=n2();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class I6{constructor(){this.Hr=new N2,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new N2,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class EW{Yr(e){}shutdown(){}}class b6{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let SA=null;function k2(){return null===SA?SA=268435456+Math.round(2147483648*Math.random()):SA++,"0x"+SA.toString(16)}const IW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bW{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Hi="WebChannelConnection";class TW extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const c=k2(),f=this.To(e,t);xe("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const g={};return this.Eo(g,i,a),this.Ao(e,f,g,r).then(v=>(xe("RestConnection",`Received RPC '${e}' ${c}: `,v),v),v=>{throw Uo("RestConnection",`RPC '${e}' ${c} failed with error: `,v,"url: ",f,"request:",r),v})}vo(e,t,r,i,a,c){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+C_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${IW[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=k2();return new Promise((c,f)=>{const g=new Ez;g.setWithCredentials(!0),g.listenOnce(vz.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Uk.NO_ERROR:const b=g.getResponseJson();xe(Hi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),c(b);break;case Uk.TIMEOUT:xe(Hi,`RPC '${e}' ${a} timed out`),f(new Ie(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Uk.HTTP_ERROR:const T=g.getStatus();if(xe(Hi,`RPC '${e}' ${a} failed with status:`,T,"response text:",g.getResponseText()),T>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A?.error;if(R&&R.status&&R.message){const W=function(Q){const J=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(J)>=0?J:ae.UNKNOWN}(R.status);f(new Ie(W,R.message))}else f(new Ie(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new Ie(ae.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{xe(Hi,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(i);xe(Hi,`RPC '${e}' ${a} sending request:`,i),g.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=k2(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=_z(),f=yz(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.xmlHttpFactory=new Cz({})),this.Eo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const b=a.join("");xe(Hi,`Creating RPC '${e}' stream ${i}: ${b}`,g);const T=c.createWebChannel(b,g);let A=!1,R=!1;const W=new bW({ro:J=>{R?xe(Hi,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(A||(xe(Hi,`Opening RPC '${e}' stream ${i} transport.`),T.open(),A=!0),xe(Hi,`RPC '${e}' stream ${i} sending:`,J),T.send(J))},oo:()=>T.close()}),Q=(J,be,Ge)=>{J.listen(be,ke=>{try{Ge(ke)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return Q(T,q1.EventType.OPEN,()=>{R||xe(Hi,`RPC '${e}' stream ${i} transport opened.`)}),Q(T,q1.EventType.CLOSE,()=>{R||(R=!0,xe(Hi,`RPC '${e}' stream ${i} transport closed`),W.wo())}),Q(T,q1.EventType.ERROR,J=>{R||(R=!0,Uo(Hi,`RPC '${e}' stream ${i} transport errored:`,J),W.wo(new Ie(ae.UNAVAILABLE,"The operation could not be completed")))}),Q(T,q1.EventType.MESSAGE,J=>{var be;if(!R){const Ge=J.data[0];ct(!!Ge);const Ye=Ge.error||(null===(be=Ge[0])||void 0===be?void 0:be.error);if(Ye){xe(Hi,`RPC '${e}' stream ${i} received error:`,Ye);const mt=Ye.status;let At=function(Ss){const _y=Rr[Ss];if(void 0!==_y)return y5(_y)}(mt),Sr=Ye.message;void 0===At&&(At=ae.INTERNAL,Sr="Unknown error status: "+mt+" with message "+Ye.message),R=!0,W.wo(new Ie(At,Sr)),T.close()}else xe(Hi,`RPC '${e}' stream ${i} received:`,Ge),W._o(Ge)}}),Q(f,wz.STAT_EVENT,J=>{J.stat===lB.PROXY?xe(Hi,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===lB.NOPROXY&&xe(Hi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{W.fo()},0),W}}function T6(){return typeof window<"u"?window:null}function AA(){return typeof document<"u"?document:null}function hE(n){return new kG(n,!0)}class F2{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class D6{constructor(e,t,r,i,a,c,f,g){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new F2(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,z.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,z.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,z.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ie(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,z.Z)(function*(){e.state=0,e.start()}))}tu(e){return xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DW extends D6{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function UG(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:et(),i=e.targetChange.targetIds||[],a=function(g,v){return g.useProto3Json?(ct(void 0===v||"string"==typeof v),Xr.fromBase64String(v||"")):(ct(void 0===v||v instanceof Uint8Array),Xr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(g){const v=void 0===g.code?ae.UNKNOWN:y5(g.code);return new Ie(v,g.message||"")}(c);t=new I5(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=ru(n,r.document.name),a=Tr(r.document.updateTime),c=r.document.createTime?Tr(r.document.createTime):lt.min(),f=new bi({mapValue:{fields:r.document.fields}}),g=Hn.newFoundDocument(i,a,c,f);t=new hA(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=ru(n,r.document),a=r.readTime?Tr(r.readTime):lt.min(),c=Hn.newNoDocument(i,a);t=new hA([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=ru(n,r.document);t=new hA([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,{count:i=0,unchangedNames:a}=r,c=new MG(i,a);t=new E5(r.targetId,c)}}var g;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return lt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?lt.min():a.readTime?Tr(a.readTime):lt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=nE(this.serializer),t.addTarget=function(i,a){let c;const f=a.target;if(c=iA(f)?{documents:N5(i,f)}:{query:f2(i,f)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=S5(i,a.resumeToken);const g=c2(i,a.expectedCount);null!==g&&(c.expectedCount=g)}else if(a.snapshotVersion.compareTo(lt.min())>0){c.readTime=O_(i,a.snapshotVersion.toTimestamp());const g=c2(i,a.expectedCount);null!==g&&(c.expectedCount=g)}return c}(this.serializer,e);const r=function BG(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=nE(this.serializer),t.removeTarget=e,this.Wo(t)}}class SW extends D6{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function VG(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(r,i){let a=Tr(r.updateTime?r.updateTime:i);return a.isEqual(lt.min())&&(a=Tr(i)),new TG(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.cu(r,t)}return ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=nE(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rE(this.serializer,r))};this.Wo(t)}}class AW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ie(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ie(ae.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.vo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ie(ae.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class xW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(br(t),this.mu=!1):xe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class PW{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,z.Z)(function*(){var g;Td(c)&&(xe("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,z.Z)(function*(v){const b=qe(v);b.vu.add(4),yield U_(b),b.bu.set("Unknown"),b.vu.delete(4),yield fE(b)}),function(v){return g.apply(this,arguments)})(c))}))}),this.bu=new xW(r,i)}}function fE(n){return U2.apply(this,arguments)}function U2(){return U2=(0,z.Z)(function*(n){if(Td(n))for(const e of n.Ru)yield e(!0)}),U2.apply(this,arguments)}function U_(n){return V2.apply(this,arguments)}function V2(){return V2=(0,z.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),V2.apply(this,arguments)}function MA(n,e){const t=qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),$2(t)?j2(t):B_(t).Ko()&&B2(t,e))}function pE(n,e){const t=qe(n),r=B_(t);t.Au.delete(e),r.Ko()&&S6(t,e),0===t.Au.size&&(r.Ko()?r.jo():Td(t)&&t.bu.set("Unknown"))}function B2(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(lt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}B_(n).su(e)}function S6(n,e){n.Vu.qt(e),B_(n).iu(e)}function j2(n){n.Vu=new PG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),B_(n).start(),n.bu.gu()}function $2(n){return Td(n)&&!B_(n).Uo()&&n.Au.size>0}function Td(n){return 0===qe(n).vu.size}function A6(n){n.Vu=void 0}function OW(n){return H2.apply(this,arguments)}function H2(){return H2=(0,z.Z)(function*(n){n.Au.forEach((e,t)=>{B2(n,e)})}),H2.apply(this,arguments)}function NW(n,e){return z2.apply(this,arguments)}function z2(){return z2=(0,z.Z)(function*(n,e){A6(n),$2(n)?(n.bu.Iu(e),j2(n)):n.bu.set("Unknown")}),z2.apply(this,arguments)}function RW(n,e,t){return G2.apply(this,arguments)}function G2(){return G2=(0,z.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof I5&&2===e.state&&e.cause)try{yield(r=(0,z.Z)(function*(i,a){const c=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xA(n,r)}else if(e instanceof hA?n.Vu.Ht(e):e instanceof E5?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(lt.min()))try{const r=yield m6(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Vu.ce(a);return c.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.Au.get(g);v&&i.Au.set(g,v.withResumeToken(f.resumeToken,a))}}),c.targetMismatches.forEach((f,g)=>{const v=i.Au.get(f);if(!v)return;i.Au.set(f,v.withResumeToken(Xr.EMPTY_BYTE_STRING,v.snapshotVersion)),S6(i,f);const b=new Sc(v.target,f,g,v.sequenceNumber);B2(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){xe("RemoteStore","Failed to raise snapshot:",r),yield xA(n,r)}var r}),G2.apply(this,arguments)}function xA(n,e,t){return W2.apply(this,arguments)}function W2(){return W2=(0,z.Z)(function*(n,e,t){if(!fd(e))throw e;n.vu.add(1),yield U_(n),n.bu.set("Offline"),t||(t=()=>m6(n.localStore)),n.asyncQueue.enqueueRetryable((0,z.Z)(function*(){xe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield fE(n)}))}),W2.apply(this,arguments)}function M6(n,e){return e().catch(t=>xA(n,t,e))}function V_(n){return q2.apply(this,arguments)}function q2(){return q2=(0,z.Z)(function*(n){const e=qe(n),t=Dd(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;kW(e);)try{const i=yield vW(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,FW(e,i)}catch(i){yield xA(e,i)}x6(e)&&P6(e)}),q2.apply(this,arguments)}function kW(n){return Td(n)&&n.Eu.length<10}function FW(n,e){n.Eu.push(e);const t=Dd(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function x6(n){return Td(n)&&!Dd(n).Uo()&&n.Eu.length>0}function P6(n){Dd(n).start()}function LW(n){return Z2.apply(this,arguments)}function Z2(){return Z2=(0,z.Z)(function*(n){Dd(n).hu()}),Z2.apply(this,arguments)}function UW(n){return K2.apply(this,arguments)}function K2(){return K2=(0,z.Z)(function*(n){const e=Dd(n);for(const t of n.Eu)e.uu(t.mutations)}),K2.apply(this,arguments)}function VW(n,e,t){return Y2.apply(this,arguments)}function Y2(){return Y2=(0,z.Z)(function*(n,e,t){const r=n.Eu.shift(),i=s2.from(r,e,t);yield M6(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield V_(n)}),Y2.apply(this,arguments)}function BW(n,e){return Q2.apply(this,arguments)}function Q2(){return Q2=(0,z.Z)(function*(n,e){var t;e&&Dd(n).ou&&(yield(t=(0,z.Z)(function*(r,i){if(_5(a=i.code)&&a!==ae.ABORTED){const c=r.Eu.shift();Dd(r).Qo(),yield M6(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield V_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),x6(n)&&P6(n)}),Q2.apply(this,arguments)}function O6(n,e){return J2.apply(this,arguments)}function J2(){return J2=(0,z.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),xe("RemoteStore","RemoteStore received new credentials");const r=Td(t);t.vu.add(3),yield U_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield fE(t)}),J2.apply(this,arguments)}function X2(n,e){return eF.apply(this,arguments)}function eF(){return eF=(0,z.Z)(function*(n,e){const t=qe(n);e?(t.vu.delete(2),yield fE(t)):e||(t.vu.add(2),yield U_(t),t.bu.set("Unknown"))}),eF.apply(this,arguments)}function B_(n){return n.Su||(n.Su=function(e,t,r){const i=qe(e);return i.fu(),new DW(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:OW.bind(null,n),ao:NW.bind(null,n),nu:RW.bind(null,n)}),n.Ru.push(function(){var e=(0,z.Z)(function*(t){t?(n.Su.Qo(),$2(n)?j2(n):n.bu.set("Unknown")):(yield n.Su.stop(),A6(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Dd(n){return n.Du||(n.Du=function(e,t,r){const i=qe(e);return i.fu(),new SW(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:LW.bind(null,n),ao:BW.bind(null,n),au:UW.bind(null,n),cu:VW.bind(null,n)}),n.Ru.push(function(){var e=(0,z.Z)(function*(t){t?(n.Du.Qo(),yield V_(n)):(yield n.Du.stop(),n.Eu.length>0&&(xe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class tF{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,f=new tF(e,t,c,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function j_(n,e){if(br("AsyncQueue",`${e}: ${n}`),fd(n))return new Ie(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class $_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=ZC(),this.sortedSet=new On(this.comparator)}static emptySet(e){return new $_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new $_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class N6{constructor(){this.Cu=new On(We.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class H_{constructor(e,t,r,i,a,c,f,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new H_(e,t,$_.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&WC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class jW{constructor(){this.Nu=void 0,this.listeners=[]}}class $W{constructor(){this.queries=new Tc(e=>JB(e),WC),this.onlineState="Unknown",this.ku=new Set}}function nF(n,e){return rF.apply(this,arguments)}function rF(){return rF=(0,z.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new jW),i)try{a.Nu=yield t.onListen(r)}catch(c){const f=j_(c,`Initialization of query '${t2(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&oF(t)}),rF.apply(this,arguments)}function iF(n,e){return sF.apply(this,arguments)}function sF(){return sF=(0,z.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),sF.apply(this,arguments)}function HW(n,e){const t=qe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.$u(i)&&(r=!0);c.Nu=i}}r&&oF(t)}function zW(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function oF(n){n.ku.forEach(e=>{e.next()})}class aF{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new H_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=H_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class GW{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class R6{constructor(e){this.serializer=e}rr(e){return ru(this.serializer,e)}ur(e){return e.metadata.exists?O5(this.serializer,e.document,!1):Hn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Tr(e)}}class WW{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=k6(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Qt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new R6(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||Nt()).add(a);t.set(c,f)}}return t}complete(){var e=this;return(0,z.Z)(function*(){const t=yield function wW(n,e,t,r){return M2.apply(this,arguments)}(e.localStore,new R6(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield CW(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function k6(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class F6{constructor(e){this.key=e}}class L6{constructor(e){this.key=e}}class U6{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Nt(),this.mutatedKeys=Nt(),this.tc=e5(e),this.ec=new $_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new N6,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,T)=>{const A=i.get(b),R=qC(this.query,T)?T:null,W=!!A&&this.mutatedKeys.has(A.key),Q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let J=!1;A&&R?A.data.isEqual(R.data)?W!==Q&&(r.track({type:3,doc:R}),J=!0):this.rc(A,R)||(r.track({type:2,doc:R}),J=!0,(g&&this.tc(R,g)>0||v&&this.tc(R,v)<0)&&(f=!0)):!A&&R?(r.track({type:0,doc:R}),J=!0):A&&!R&&(r.track({type:1,doc:A}),J=!0,(g||v)&&(f=!0)),J&&(R?(c=c.add(R),a=Q?a.add(b):a.delete(b)):(c=c.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{ec:c,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((v,b)=>function(T,A){const R=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return R(T)-R(A)}(v.type,b.type)||this.tc(v.doc,b.doc)),this.oc(r);const c=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,g=f!==this.Xu;return this.Xu=f,0!==a.length||g?{snapshot:new H_(this.query,e.ec,i,a,e.mutatedKeys,0===f,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new N6,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Nt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new L6(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new F6(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Nt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return H_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class qW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ZW{constructor(e){this.key=e,this.fc=!1}}class KW{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new Tc(f=>JB(f),WC),this._c=new Map,this.mc=new Set,this.gc=new On(We.comparator),this.yc=new Map,this.Ic=new C2,this.Tc={},this.Ec=new Map,this.Ac=fp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function YW(n,e){return uF.apply(this,arguments)}function uF(){return uF=(0,z.Z)(function*(n,e){const t=PF(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const c=yield F_(t.localStore,rs(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield cF(t,e,r,"current"===f,c.resumeToken),t.isPrimaryClient&&MA(t.remoteStore,c)}return i}),uF.apply(this,arguments)}function cF(n,e,t,r,i){return lF.apply(this,arguments)}function lF(){return lF=(0,z.Z)(function*(n,e,t,r,i){n.Rc=(T,A,R)=>{return(W=(0,z.Z)(function*(Q,J,be,Ge){let ke=J.view.sc(be);ke.zi&&(ke=yield bA(Q.localStore,J.query,!1).then(({documents:At})=>J.view.sc(At,ke)));const Ye=Ge&&Ge.targetChanges.get(J.targetId),mt=J.view.applyChanges(ke,Q.isPrimaryClient,Ye);return wF(Q,J.targetId,mt.cc),mt.snapshot}),function(Q,J,be,Ge){return W.apply(this,arguments)})(n,T,A,R);var W};const a=yield bA(n.localStore,e,!0),c=new U6(e,a.ir),f=c.sc(a.documents),g=eE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=c.applyChanges(f,n.isPrimaryClient,g);wF(n,t,v.cc);const b=new qW(e,t,c);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),lF.apply(this,arguments)}function QW(n,e){return dF.apply(this,arguments)}function dF(){return dF=(0,z.Z)(function*(n,e){const t=qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!WC(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield L_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),pE(t.remoteStore,r.targetId),z_(t,r.targetId)}).catch(hd))):(z_(t,r.targetId),yield L_(t.localStore,r.targetId,!0))}),dF.apply(this,arguments)}function hF(){return hF=(0,z.Z)(function*(n,e,t){const r=OF(n);try{const i=yield function(a,c){const f=qe(a),g=Zn.now(),v=c.reduce((A,R)=>A.add(R.key),Nt());let b,T;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=bs(),W=Nt();return f.Zi.getEntries(A,v).next(Q=>{R=Q,R.forEach((J,be)=>{be.isValidDocument()||(W=W.add(J))})}).next(()=>f.localDocuments.getOverlayedDocuments(A,R)).next(Q=>{b=Q;const J=[];for(const be of c){const Ge=SG(be,b.get(be.key).overlayedDocument);null!=Ge&&J.push(new Dc(be.key,Ge,UB(Ge.value.mapValue),Kn.exists(!0)))}return f.mutationQueue.addMutationBatch(A,g,J,c)}).next(Q=>{T=Q;const J=Q.applyToLocalDocumentSet(b,W);return f.documentOverlayCache.saveOverlays(A,Q.batchId,J)})}).then(()=>({batchId:T.batchId,changes:n5(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,f){let g=a.Tc[a.currentUser.toKey()];g||(g=new On(St)),g=g.insert(c,f),a.Tc[a.currentUser.toKey()]=g}(r,i.batchId,t),yield Ac(r,i.changes),yield V_(r.remoteStore)}catch(i){const a=j_(i,"Failed to persist write");t.reject(a)}}),hF.apply(this,arguments)}function V6(n,e){return fF.apply(this,arguments)}function fF(){return fF=(0,z.Z)(function*(n,e){const t=qe(n);try{const r=yield function yW(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((b,T)=>{const A=i.get(T);if(!A)return;f.push(t.Bs.removeMatchingKeys(a,b.removedDocuments,T).next(()=>t.Bs.addMatchingKeys(a,b.addedDocuments,T)));let R=A.withSequenceNumber(a.currentSequenceNumber);var W,Q,J;null!==e.targetMismatches.get(T)?R=R.withResumeToken(Xr.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):b.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(b.resumeToken,r)),i=i.insert(T,R),Q=R,J=b,(0===(W=A).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,R))});let g=bs(),v=Nt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),f.push(_6(a,c,e.documentUpdates).next(b=>{g=b.nr,v=b.sr})),!r.isEqual(lt.min())){const b=t.Bs.getLastRemoteSnapshotVersion(a).next(T=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(b)}return ne.waitFor(f).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,v)).next(()=>g)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.yc.get(a);c&&(ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?ct(c.fc):i.removedDocuments.size>0&&(ct(c.fc),c.fc=!1))}),yield Ac(t,r,e)}catch(r){yield hd(r)}}),fF.apply(this,arguments)}function B6(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,c)=>{const f=c.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,c){const f=qe(a);f.onlineState=c;let g=!1;f.queries.forEach((v,b)=>{for(const T of b.listeners)T.Mu(c)&&(g=!0)}),g&&oF(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function XW(n,e,t){return pF.apply(this,arguments)}function pF(){return pF=(0,z.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let c=new On(We.comparator);c=c.insert(a,Hn.newNoDocument(a,lt.min()));const f=Nt().add(a),g=new XC(lt.min(),new Map,new On(St),c,f);yield V6(r,g),r.gc=r.gc.remove(a),r.yc.delete(e),CF(r)}else yield L_(r.localStore,e,!1).then(()=>z_(r,e,t)).catch(hd)}),pF.apply(this,arguments)}function eq(n,e){return gF.apply(this,arguments)}function gF(){return gF=(0,z.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield function _W(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,f,g,v){const b=g.batch,T=b.keys();let A=ne.resolve();return T.forEach(R=>{A=A.next(()=>v.getEntry(f,R)).next(W=>{const Q=g.docVersions.get(R);ct(null!==Q),W.version.compareTo(Q)<0&&(b.applyToRemoteDocument(W,g),W.isValidDocument()&&(W.setReadTime(g.commitVersion),v.addEntry(W)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(f,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=Nt();for(let g=0;g<c.mutationResults.length;++g)c.mutationResults[g].transformResults.length>0&&(f=f.add(c.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);vF(t,r,null),yF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ac(t,i)}catch(i){yield hd(i)}}),gF.apply(this,arguments)}function tq(n,e,t){return mF.apply(this,arguments)}function mF(){return mF=(0,z.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(a,c){const f=qe(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return f.mutationQueue.lookupMutationBatch(g,c).next(b=>(ct(null!==b),v=b.keys(),f.mutationQueue.removeMutationBatch(g,b))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,v,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>f.localDocuments.getDocuments(g,v))})}(r.localStore,e);vF(r,e,t),yF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ac(r,i)}catch(i){yield hd(i)}}),mF.apply(this,arguments)}function _F(){return _F=(0,z.Z)(function*(n,e){const t=qe(n);Td(t.remoteStore)||xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=qe(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=j_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),_F.apply(this,arguments)}function yF(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function vF(n,e,t){const r=qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function z_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||j6(n,r)})}function j6(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(pE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),CF(n))}function wF(n,e,t){for(const r of t)r instanceof F6?(n.Ic.addReference(r.key,e),rq(n,r)):r instanceof L6?(xe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||j6(n,r.key)):et()}function rq(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(xe("SyncEngine","New document in limbo: "+t),n.mc.add(r),CF(n))}function CF(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new We(Qt.fromString(e)),r=n.Ac.next();n.yc.set(r,new ZW(t)),n.gc=n.gc.insert(t,r),MA(n.remoteStore,new Sc(rs(S_(t.path)),r,"TargetPurposeLimboResolution",no.ct))}}function Ac(n,e,t){return EF.apply(this,arguments)}function EF(){return EF=(0,z.Z)(function*(n,e,t){const r=qe(n),i=[],a=[],c=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,g)=>{c.push(r.Rc(g,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const b=D2.Li(g.targetId,v);a.push(b)}}))}),yield Promise.all(c),r.dc.nu(i),yield(f=(0,z.Z)(function*(g,v){const b=qe(g);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ne.forEach(v,A=>ne.forEach(A.Fi,R=>b.persistence.referenceDelegate.addReference(T,A.targetId,R)).next(()=>ne.forEach(A.Bi,R=>b.persistence.referenceDelegate.removeReference(T,A.targetId,R)))))}catch(T){if(!fd(T))throw T;xe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of v){const A=T.targetId;if(!T.fromCache){const R=b.Ji.get(A),Q=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);b.Ji=b.Ji.insert(A,Q)}}}),function(g,v){return f.apply(this,arguments)})(r.localStore,a))}),EF.apply(this,arguments)}function iq(n,e){return IF.apply(this,arguments)}function IF(){return IF=(0,z.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){xe("SyncEngine","User change. New user:",e.toKey());const r=yield g6(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(f=>{f.reject(new Ie(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ac(t,r.er)}var i}),IF.apply(this,arguments)}function sq(n,e){const t=qe(n),r=t.yc.get(e);if(r&&r.fc)return Nt().add(r.key);{let i=Nt();const a=t._c.get(e);if(!a)return i;for(const c of a){const f=t.wc.get(c);i=i.unionWith(f.view.nc)}return i}}function oq(n,e){return bF.apply(this,arguments)}function bF(){return bF=(0,z.Z)(function*(n,e){const t=qe(n),r=yield bA(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&wF(t,e.targetId,i.cc),i}),bF.apply(this,arguments)}function aq(n,e){return TF.apply(this,arguments)}function TF(){return TF=(0,z.Z)(function*(n,e){const t=qe(n);return v6(t.localStore,e).then(r=>Ac(t,r))}),TF.apply(this,arguments)}function uq(n,e,t,r){return DF.apply(this,arguments)}function DF(){return DF=(0,z.Z)(function*(n,e,t,r){const i=qe(n),a=yield function(c,f){const g=qe(c),v=qe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.Sn(b,f).next(T=>T?g.localDocuments.getDocuments(b,T):ne.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield V_(i.remoteStore):"acknowledged"===t||"rejected"===t?(vF(i,e,r||null),yF(i,e),f=e,qe(qe(i.localStore).mutationQueue).Cn(f)):et(),yield Ac(i,a)):xe("SyncEngine","Cannot apply mutation batch with id: "+e)}),DF.apply(this,arguments)}function SF(){return SF=(0,z.Z)(function*(n,e){const t=qe(n);if(PF(t),OF(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield $6(t,r.toArray());t.vc=!0,yield X2(t.remoteStore,!0);for(const a of i)MA(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(z_(t,c),L_(t.localStore,c,!0))),pE(t.remoteStore,c)}),yield i,yield $6(t,r),function(a){const c=qe(a);c.yc.forEach((f,g)=>{pE(c.remoteStore,g)}),c.Ic.Ts(),c.yc=new Map,c.gc=new On(We.comparator)}(t),t.vc=!1,yield X2(t.remoteStore,!1)}}),SF.apply(this,arguments)}function $6(n,e,t){return AF.apply(this,arguments)}function AF(){return AF=(0,z.Z)(function*(n,e,t){const r=qe(n),i=[],a=[];for(const c of e){let f;const g=r._c.get(c);if(g&&0!==g.length){f=yield F_(r.localStore,rs(g[0]));for(const v of g){const b=r.wc.get(v),T=yield oq(r,b);T.snapshot&&a.push(T.snapshot)}}else{const v=yield y6(r.localStore,c);f=yield F_(r.localStore,v),yield cF(r,H6(v),c,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),AF.apply(this,arguments)}function H6(n){return YB(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function lq(n){const e=qe(n);return qe(qe(e.localStore).persistence).$i()}function dq(n,e,t,r){return MF.apply(this,arguments)}function MF(){return MF=(0,z.Z)(function*(n,e,t,r){const i=qe(n);if(i.vc)return void xe("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield v6(i.localStore,XB(a[0])),f=XC.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Xr.EMPTY_BYTE_STRING);yield Ac(i,c,f);break}case"rejected":yield L_(i.localStore,e,!0),z_(i,e,r);break;default:et()}}),MF.apply(this,arguments)}function hq(n,e,t){return xF.apply(this,arguments)}function xF(){return xF=(0,z.Z)(function*(n,e,t){const r=PF(n);if(r.vc){for(const i of e){if(r._c.has(i)){xe("SyncEngine","Adding an already active target "+i);continue}const a=yield y6(r.localStore,i),c=yield F_(r.localStore,a);yield cF(r,H6(a),c.targetId,!1,c.resumeToken),MA(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield L_(r.localStore,i,!1).then(()=>{pE(r.remoteStore,i),z_(r,i)}).catch(hd))}}),xF.apply(this,arguments)}function PF(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=V6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XW.bind(null,e),e.dc.nu=HW.bind(null,e.eventManager),e.dc.Pc=zW.bind(null,e.eventManager),e}function OF(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tq.bind(null,e),e}class gE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,z.Z)(function*(){t.serializer=hE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return p6(this.persistence,new f6,e.initialUser,this.serializer)}createPersistence(e){return new E2(CA.zs,this.serializer)}createSharedClientState(e){return new I6}terminate(){var e=this;return(0,z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class NF extends gE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield OF(r.Vc.syncEngine),yield V_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return p6(this.persistence,new f6,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new i6(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Vz(t,this.persistence);return new Uz(e.asyncQueue,r)}createPersistence(e){const t=T2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?$i.withCacheSize(this.cacheSizeBytes):$i.DEFAULT;return new b2(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,T6(),AA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new I6}}class z6 extends NF{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof R2&&(r.sharedClientState.syncEngine={jr:uq.bind(null,i),zr:dq.bind(null,i),Wr:hq.bind(null,i),$i:lq.bind(null,i),Qr:aq.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,z.Z)(function*(c){yield function cq(n,e){return SF.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=T6();if(!R2.D(t))throw new Ie(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=T2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new R2(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class G_{initialize(e,t){var r=this;return(0,z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>B6(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=iq.bind(null,r.syncEngine),yield X2(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new $W}createDatastore(e){const t=hE(e.databaseInfo.databaseId),r=new TW(e.databaseInfo);return new AW(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>B6(this.syncEngine,f,0),c=b6.D()?new b6:new EW,new PW(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,f,g,v){const b=new KW(r,i,a,c,f,g);return v&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,z.Z)(function*(t){const r=qe(t);xe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield U_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function G6(n,e=10240){let t=0;return{read:()=>(0,z.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,z.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class PA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class gq{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Jr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,z.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,z.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,z.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new GW(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,z.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,z.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,z.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class mq{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,z.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ie(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,z.Z)(function*(a,c){const f=qe(a),g=nE(f.serializer)+"/documents",v={documents:c.map(R=>tE(f.serializer,R))},b=yield f.vo("BatchGetDocuments",g,v,c.length),T=new Map;b.forEach(R=>{const W=function LG(n,e){return"found"in e?function(t,r){ct(!!r.found);const i=ru(t,r.found.name),a=Tr(r.found.updateTime),c=r.found.createTime?Tr(r.found.createTime):lt.min(),f=new bi({mapValue:{fields:r.found.fields}});return Hn.newFoundDocument(i,a,c,f)}(n,e):"missing"in e?function(t,r){ct(!!r.missing),ct(!!r.readTime);const i=ru(t,r.missing),a=Tr(r.readTime);return Hn.newNoDocument(i,a)}(n,e):et()}(f.serializer,R);T.set(W.key.toString(),W)});const A=[];return c.forEach(R=>{const W=T.get(R.toString());ct(!!W),A.push(W)}),A}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new P_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=We.fromPath(i);e.mutations.push(new r2(a,e.precondition(a)))}),yield(r=(0,z.Z)(function*(i,a){const c=qe(i),f=nE(c.serializer)+"/documents",g={writes:a.map(v=>rE(c.serializer,v))};yield c.Io("Commit",f,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=lt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ie(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(lt.min())?Kn.exists(!1):Kn.updateTime(t):Kn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(lt.min()))throw new Ie(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kn.updateTime(t)}return Kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _q{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new F2(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,z.Z)(function*(){const t=new mq(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!VC(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!_5(t)}return!1}}class yq{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ui.UNAUTHENTICATED,this.clientId=pB.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,z.Z)(function*(f){xe("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(xe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=j_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function OA(n,e){return RF.apply(this,arguments)}function RF(){return RF=(0,z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),xe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,z.Z)(function*(a){r.isEqual(a)||(yield g6(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),RF.apply(this,arguments)}function kF(n,e){return FF.apply(this,arguments)}function FF(){return FF=(0,z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield LF(n);xe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>O6(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>O6(e.remoteStore,a)),n._onlineComponents=e}),FF.apply(this,arguments)}function W6(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function LF(n){return UF.apply(this,arguments)}function UF(){return UF=(0,z.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){xe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield OA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!W6(t))throw t;Uo("Error using user provided cache. Falling back to memory cache: "+t),yield OA(n,new gE)}}else xe("FirestoreClient","Using default OfflineComponentProvider"),yield OA(n,new gE);return n._offlineComponents}),UF.apply(this,arguments)}function NA(n){return VF.apply(this,arguments)}function VF(){return VF=(0,z.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(xe("FirestoreClient","Using user provided OnlineComponentProvider"),yield kF(n,n._uninitializedComponentsProvider._online)):(xe("FirestoreClient","Using default OnlineComponentProvider"),yield kF(n,new G_))),n._onlineComponents}),VF.apply(this,arguments)}function q6(n){return LF(n).then(e=>e.persistence)}function RA(n){return LF(n).then(e=>e.localStore)}function Z6(n){return NA(n).then(e=>e.remoteStore)}function BF(n){return NA(n).then(e=>e.syncEngine)}function W_(n){return jF.apply(this,arguments)}function jF(){return jF=(0,z.Z)(function*(n){const e=yield NA(n),t=e.eventManager;return t.onListen=YW.bind(null,e.syncEngine),t.onUnlisten=QW.bind(null,e.syncEngine),t}),jF.apply(this,arguments)}function Y6(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(i,a,c,f,g){const v=new PA({next:T=>{a.enqueueAndForget(()=>iF(i,b));const A=T.docs.has(c);!A&&T.fromCache?g.reject(new Ie(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&f&&"server"===f.source?g.reject(new Ie(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new aF(S_(c.path),v,{includeMetadataChanges:!0,Ku:!0});return nF(i,b)}(yield W_(n),n.asyncQueue,e,t,r)})),r.promise}function Q6(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(i,a,c,f,g){const v=new PA({next:T=>{a.enqueueAndForget(()=>iF(i,b)),T.fromCache&&"server"===f.source?g.reject(new Ie(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new aF(c,v,{includeMetadataChanges:!0,Ku:!0});return nF(i,b)}(yield W_(n),n.asyncQueue,e,t,r)})),r.promise}function J6(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const X6=new Map;function $F(n,e,t){if(!t)throw new Ie(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ej(n,e,t,r){if(!0===e&&!0===r)throw new Ie(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tj(n){if(!We.isDocumentKey(n))throw new Ie(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nj(n){if(We.isDocumentKey(n))throw new Ie(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kA(n);throw new Ie(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rj(n,e){if(e<=0)throw new Ie(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ij{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ie(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ie(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ej("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=J6(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ie(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ie(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ie(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ij({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ie(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ij(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Dz;switch(t.type){case"firstParty":return new xz(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ie(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=X6.get(e);t&&(xe("ComponentProvider","Removing Datastore"),X6.delete(e),t.terminate())}(this),Promise.resolve()}}function sj(n,e,t,r={}){var i;const a=(n=Yt(n,mE))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==c&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let f,g;if("string"==typeof r.mockUserToken)f=r.mockUserToken,g=ui.MOCK_USER;else{f=(0,$.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ie(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ui(v)}n._authCredentials=new Sz(new hB(f,g))}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class Ti{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ti(this.firestore,e,this._query)}}class iu extends Ti{constructor(e,t,r){super(e,t,S_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new We(e))}withConverter(e){return new iu(this.firestore,e,this._path)}}function oj(n,e,...t){if(n=(0,$.m9)(n),$F("collection","path",e),n instanceof mE){const r=Qt.fromString(e,...t);return nj(r),new iu(n,null,r)}{if(!(n instanceof zn||n instanceof iu))throw new Ie(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return nj(r),new iu(n.firestore,null,r)}}function FA(n,e,...t){if(n=(0,$.m9)(n),1===arguments.length&&(e=pB.A()),$F("doc","path",e),n instanceof mE){const r=Qt.fromString(e,...t);return tj(r),new zn(n,null,new We(r))}{if(!(n instanceof zn||n instanceof iu))throw new Ie(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return tj(r),new zn(n.firestore,n instanceof iu?n.converter:null,new We(r))}}function aj(n,e){return n=(0,$.m9)(n),e=(0,$.m9)(e),(n instanceof zn||n instanceof iu)&&(e instanceof zn||e instanceof iu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function HF(n,e){return n=(0,$.m9)(n),e=(0,$.m9)(e),n instanceof Ti&&e instanceof Ti&&n.firestore===e.firestore&&WC(n._query,e._query)&&n.converter===e.converter}class Aq{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new F2(this,"async_queue_retry"),this.Xc=()=>{const t=AA();t&&xe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=AA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=AA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Jr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,z.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!fd(t))throw t;xe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,br("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=tF.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&et()}verifyOperationInProgress(){}sa(){var e=this;return(0,z.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function zF(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Mq{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Gn extends mE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Aq,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||uj(this),this._firestoreClient.terminate()}}function Pq(n,e){const t="object"==typeof n?n:(0,on.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,on._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,$.P0)("firestore");a&&sj(i,...a)}return i}function Dr(n){return n._firestoreClient||uj(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function uj(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new oG(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,J6(v.experimentalLongPollingOptions),v.useFetchStreams));var f,v;n._firestoreClient=new yq(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function cj(n,e,t){const r=new Jr;return n.asyncQueue.enqueue((0,z.Z)(function*(){try{yield OA(n,t),yield kF(n,e),r.resolve()}catch(i){const a=i;if(!W6(a))throw a;Uo("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function lj(n){if(n._initialized||n._terminated)throw new Ie(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class su{constructor(e){this._byteString=e}static fromBase64String(e){try{return new su(Xr.fromBase64String(e))}catch(t){throw new Ie(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new su(Xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ie(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gp{constructor(e){this._methodName=e}}class LA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}const jq=/^__.*__$/;class $q{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Dc(e,this.data,this.fieldMask,t,this.fieldTransforms):new x_(e,this.data,t,this.fieldTransforms)}}class dj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Dc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class UA{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new UA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return jA(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(hj(this.ca)&&jq.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Hq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hE(e)}ya(e,t,r,i=!1){return new UA({ca:e,methodName:t,ga:r,path:hr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mp(n){const e=n._freezeSettings(),t=hE(n._databaseId);return new Hq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function VA(n,e,t,r,i,a={}){const c=n.ya(a.merge||a.mergeFields?2:0,e,t,i);ZF("Data must be an object, but it was:",c,r);const f=gj(r,c);let g,v;if(a.merge)g=new Is(c.fieldMask),v=c.fieldTransforms;else if(a.mergeFields){const b=[];for(const T of a.mergeFields){const A=vE(e,T,t);if(!c.contains(A))throw new Ie(ae.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);_j(b,A)||b.push(A)}g=new Is(b),v=c.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,v=c.fieldTransforms;return new $q(new bi(f),g,v)}class yE extends gp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yE}}function fj(n,e,t){return new UA({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class GF extends gp{_toFieldTransform(e){return new YC(e.path,new A_)}isEqual(e){return e instanceof GF}}class zq extends gp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=fj(this,e,!0),r=this.pa.map(a=>_p(a,t)),i=new op(r);return new YC(e.path,i)}isEqual(e){return this===e}}class Gq extends gp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=fj(this,e,!0),r=this.pa.map(a=>_p(a,t)),i=new ap(r);return new YC(e.path,i)}isEqual(e){return this===e}}class Wq extends gp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new M_(e.serializer,o5(e.serializer,this.Ia));return new YC(e.path,t)}isEqual(e){return this===e}}function WF(n,e,t,r){const i=n.ya(1,e,t);ZF("Data must be an object, but it was:",i,r);const a=[],c=bi.empty();pd(r,(g,v)=>{const b=BA(e,g,t);v=(0,$.m9)(v);const T=i.da(b);if(v instanceof yE)a.push(b);else{const A=_p(v,T);null!=A&&(a.push(b),c.set(b,A))}});const f=new Is(a);return new dj(c,f,i.fieldTransforms)}function qF(n,e,t,r,i,a){const c=n.ya(1,e,t),f=[vE(e,r,t)],g=[i];if(a.length%2!=0)throw new Ie(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)f.push(vE(e,a[A])),g.push(a[A+1]);const v=[],b=bi.empty();for(let A=f.length-1;A>=0;--A)if(!_j(v,f[A])){const R=f[A];let W=g[A];W=(0,$.m9)(W);const Q=c.da(R);if(W instanceof yE)v.push(R);else{const J=_p(W,Q);null!=J&&(v.push(R),b.set(R,J))}}const T=new Is(v);return new dj(b,T,c.fieldTransforms)}function pj(n,e,t,r=!1){return _p(t,n.ya(r?4:3,e))}function _p(n,e){if(mj(n=(0,$.m9)(n)))return ZF("Unsupported field value:",e,n),gj(n,e);if(n instanceof gp)return function(t,r){if(!hj(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let f=_p(c,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,$.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return o5(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Zn.fromDate(t);return{timestampValue:O_(r.serializer,i)}}if(t instanceof Zn){const i=new Zn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:O_(r.serializer,i)}}if(t instanceof LA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof su)return{bytesValue:S5(r.serializer,t._byteString)};if(t instanceof zn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:l2(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${kA(t)}`)}(n,e)}function gj(n,e){const t={};return MB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pd(n,(r,i)=>{const a=_p(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function mj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Zn||n instanceof LA||n instanceof su||n instanceof zn||n instanceof gp)}function ZF(n,e,t){if(!mj(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=kA(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function vE(n,e,t){if((e=(0,$.m9)(e))instanceof Mc)return e._internalPath;if("string"==typeof e)return BA(n,e);throw jA("Field path arguments must be of type string or ",n,!1,void 0,t)}const qq=new RegExp("[~\\*/\\[\\]]");function BA(n,e,t){if(e.search(qq)>=0)throw jA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Mc(...e.split("."))._internalPath}catch{throw jA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jA(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(a||c)&&(g+=" (found",a&&(g+=` in field ${r}`),c&&(g+=` in document ${i}`),g+=")"),new Ie(ae.INVALID_ARGUMENT,f+n+g)}function _j(n,e){return n.some(t=>t.isEqual(e))}class wE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Zq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($A("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Zq extends wE{data(){return super.data()}}function $A(n,e){return"string"==typeof e?BA(n,e):e instanceof Mc?e._internalPath:e._delegate._internalPath}function yj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KF{}class CE extends KF{}function Sd(n,e,...t){let r=[];e instanceof KF&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof q_).length,c=i.filter(f=>f instanceof EE).length;if(a>1||a>0&&c>0)throw new Ie(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class EE extends CE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new EE(e,t,r)}_apply(e){const t=this._parse(e);return Ej(e._query,t),new Ti(e.firestore,e.converter,e2(e._query,t))}_parse(e){const t=mp(e.firestore);return function(i,a,c,f,g,v,b){let T;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ie(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){Cj(b,v);const A=[];for(const R of b)A.push(wj(f,i,R));T={arrayValue:{values:A}}}else T=wj(f,i,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||Cj(b,v),T=pj(c,"where",b,"in"===v||"not-in"===v);return Kt.create(g,v,T)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class q_ extends KF{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new q_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const f of c)Ej(a,f),a=e2(a,f)}(e._query,t),new Ti(e.firestore,e.converter,e2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class YF extends CE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new YF(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ie(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ie(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new T_(i,a);return function(f,g){if(null===Jk(f)){const v=oA(f);null!==v&&Ij(0,v,g.field)}}(r,c),c}(e._query,this._field,this._direction);return new Ti(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new bc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class HA extends CE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new HA(e,t,r)}_apply(e){return new Ti(e.firestore,e.converter,aA(e._query,this._limit,this._limitType))}}class zA extends CE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new zA(e,t,r)}_apply(e){const t=vj(e,this.type,this._docOrFields,this._inclusive);return new Ti(e.firestore,e.converter,(i=t,new bc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class GA extends CE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new GA(e,t,r)}_apply(e){const t=vj(e,this.type,this._docOrFields,this._inclusive);return new Ti(e.firestore,e.converter,(i=t,new bc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function vj(n,e,t,r){if(t[0]=(0,$.m9)(t[0]),t[0]instanceof wE)return function(i,a,c,f,g){if(!f)throw new Ie(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const v=[];for(const b of sp(i))if(b.field.isKeyField())v.push(rp(a,f.key));else{const T=f.data.field(b.field);if(X1(T))throw new Ie(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const A=b.field.canonicalString();throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}v.push(T)}return new wd(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=mp(n.firestore);return function(a,c,f,g,v,b){const T=a.explicitOrderBy;if(v.length>T.length)throw new Ie(ae.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let R=0;R<v.length;R++){const W=v[R];if(T[R].field.isKeyField()){if("string"!=typeof W)throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof W}`);if(!Xk(a)&&-1!==W.indexOf("/"))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${W}' contains a slash.`);const Q=a.path.child(Qt.fromString(W));if(!We.isDocumentKey(Q))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const J=new We(Q);A.push(rp(c,J))}else{const Q=pj(f,g,W);A.push(Q)}}return new wd(A,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function wj(n,e,t){if("string"==typeof(t=(0,$.m9)(t))){if(""===t)throw new Ie(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xk(e)&&-1!==t.indexOf("/"))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!We.isDocumentKey(r))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rp(n,new We(r))}if(t instanceof zn)return rp(n,t._key);throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kA(t)}.`)}function Cj(n,e){if(!Array.isArray(n)||0===n.length)throw new Ie(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ej(n,e){if(e.isInequality()){const r=oA(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=Jk(n);null!==a&&Ij(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ie(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ij(n,e,t){if(!t.isEqual(e))throw new Ie(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class QF{convertValue(e,t="none"){switch(yd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return pd(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new LA(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=eA(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jC(e));default:return null}}convertTimestamp(e){const t=gd(e);return new Zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);ct(L5(r));const i=new md(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(t)||br(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function WA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class rZ extends QF{constructor(e){super(),this.firestore=e}convertBytes(e){return new su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class yp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xc extends wE{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new IE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($A("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class IE extends xc{data(e={}){return super.data(e)}}class Ad{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new IE(this._firestore,this._userDataWriter,r.key,r,new yp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new IE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new yp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new IE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new yp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==c.type&&(g=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),v=a.indexOf(c.doc.key)),{type:sZ(c.type),doc:f,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function sZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function Tj(n,e){return n instanceof xc&&e instanceof xc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ad&&e instanceof Ad&&n._firestore===e._firestore&&HF(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Md extends QF{constructor(e){super(),this.firestore=e}convertBytes(e){return new su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function Dj(n,e,t){n=Yt(n,zn);const r=Yt(n.firestore,Gn),i=WA(n.converter,e,t);return Z_(r,[VA(mp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Kn.none())])}function Sj(n,e,t,...r){n=Yt(n,zn);const i=Yt(n.firestore,Gn),a=mp(i);let c;return c="string"==typeof(e=(0,$.m9)(e))||e instanceof Mc?qF(a,"updateDoc",n._key,e,t,r):WF(a,"updateDoc",n._key,e),Z_(i,[c.toMutation(n._key,Kn.exists(!0))])}function Aj(n,...e){var t,r,i;n=(0,$.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||zF(e[c])||(a=e[c],c++);const f={includeMetadataChanges:a.includeMetadataChanges};if(zF(e[c])){const T=e[c];e[c]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[c+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[c+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let g,v,b;if(n instanceof zn)v=Yt(n.firestore,Gn),b=S_(n._key.path),g={next:T=>{e[c]&&e[c](JF(v,n,T))},error:e[c+1],complete:e[c+2]};else{const T=Yt(n,Ti);v=Yt(T.firestore,Gn),b=T._query;const A=new Md(v);g={next:R=>{e[c]&&e[c](new Ad(v,A,T,R))},error:e[c+1],complete:e[c+2]},yj(n._query)}return function(T,A,R,W){const Q=new PA(W),J=new aF(A,Q,R);return T.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return nF(yield W_(T),J)})),()=>{Q.Dc(),T.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return iF(yield W_(T),J)}))}}(Dr(v),b,f,g)}function Z_(n,e){return function(t,r){const i=new Jr;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function JW(n,e,t){return hF.apply(this,arguments)}(yield BF(t),r,i)})),i.promise}(Dr(n),e)}function JF(n,e,t){const r=t.docs.get(e._key),i=new Md(n);return new xc(n,i,e._key,r,new yp(t.hasPendingWrites,t.fromCache),e.converter)}const IZ={maxAttempts:5};class Mj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mp(e)}set(e,t,r){this._verifyNotCommitted();const i=xd(e,this._firestore),a=WA(i.converter,t,r),c=VA(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Kn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=xd(e,this._firestore);let c;return c="string"==typeof(t=(0,$.m9)(t))||t instanceof Mc?qF(this._dataReader,"WriteBatch.update",a._key,t,r,i):WF(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=xd(e,this._firestore);return this._mutations=this._mutations.concat(new P_(t._key,Kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xd(n,e){if((n=(0,$.m9)(n)).firestore!==e)throw new Ie(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bZ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mp(e)}get(e){const t=xd(e,this._firestore),r=new rZ(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const a=i[0];if(a.isFoundDocument())return new wE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new wE(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=xd(e,this._firestore),a=WA(i.converter,t,r),c=VA(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=xd(e,this._firestore);let c;return c="string"==typeof(t=(0,$.m9)(t))||t instanceof Mc?qF(this._dataReader,"Transaction.update",a._key,t,r,i):WF(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=xd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=xd(e,this._firestore),r=new Md(this._firestore);return super.get(e).then(i=>new xc(this._firestore,r,t._key,i._document,new yp(!1,!1),t.converter))}}function XF(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Pj(){if(typeof Uint8Array>"u")throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function Oj(){if(!function iG(){return typeof atob<"u"}())throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){C_=on.SDK_VERSION,(0,on._registerComponent)(new lr.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new Gn(new Az(t.getProvider("auth-internal")),new Pz(t.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ie(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new md(f.options.projectId,g)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,on.registerVersion)(dB,"3.13.0",n),(0,on.registerVersion)(dB,"3.13.0","esm2017")}();class bE{constructor(e){this._delegate=e}static fromBase64String(e){return Oj(),new bE(su.fromBase64String(e))}static fromUint8Array(e){return Pj(),new bE(su.fromUint8Array(e))}toBase64(){return Oj(),this._delegate.toBase64()}toUint8Array(){return Pj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eL(n){return function NZ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class RZ{enableIndexedDbPersistence(e,t){return function Oq(n,e){lj(n=Yt(n,Gn));const t=Dr(n);if(t._uninitializedComponentsProvider)throw new Ie(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Uo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new G_;return cj(t,i,new NF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Nq(n){lj(n=Yt(n,Gn));const e=Dr(n);if(e._uninitializedComponentsProvider)throw new Ie(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Uo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new G_;return cj(e,r,new z6(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Rq(n){if(n._initialized&&!n._terminated)throw new Ie(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{yield(t=(0,z.Z)(function*(r){if(!da.D())return Promise.resolve();const i=r+"main";yield da.delete(i)}),function(r){return t.apply(this,arguments)})(T2(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Nj{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof md||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Uo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){sj(this._delegate,e,t,r)}enableNetwork(){return function Fq(n){return function vq(n){return n.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield q6(n),t=yield Z6(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.vu.delete(0),fE(i)}(t)}))}(Dr(n=Yt(n,Gn)))}(this._delegate)}disableNetwork(){return function Lq(n){return function wq(n){return n.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield q6(n),t=yield Z6(n);return e.setNetworkEnabled(!1),(r=(0,z.Z)(function*(i){const a=qe(i);a.vu.add(0),yield U_(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Dr(n=Yt(n,Gn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ej("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function kq(n){return function(e){const t=new Jr;return e.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function nq(n,e){return _F.apply(this,arguments)}(yield BF(e),t)})),t.promise}(Dr(n=Yt(n,Gn)))}(this._delegate)}onSnapshotsInSync(e){return function pZ(n,e){return function Iq(n,e){const t=new PA(e);return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return r=yield W_(n),i=t,qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return r=yield W_(n),i=t,void qe(r).ku.delete(i);var r,i}))}}(Dr(n=Yt(n,Gn)),zF(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new K_(this,oj(this._delegate,e))}catch(t){throw is(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vo(this,FA(this._delegate,e))}catch(t){throw is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ss(this,function Sq(n,e){if(n=Yt(n,mE),$F("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ie(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ti(n,null,(t=e,new bc(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function TZ(n,e,t){n=Yt(n,Gn);const r=Object.assign(Object.assign({},IZ),t);return function(i){if(i.maxAttempts<1)throw new Ie(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const f=new Jr;return i.asyncQueue.enqueueAndForget((0,z.Z)(function*(){const g=yield function K6(n){return NA(n).then(e=>e.datastore)}(i);new _q(i.asyncQueue,g,c,a,f).run()})),f.promise}(Dr(n),i=>e(new bZ(n,i)),r)}(this._delegate,t=>e(new Rj(this,t)))}batch(){return Dr(this._delegate),new kj(new Mj(this._delegate,e=>Z_(this._delegate,e)))}loadBundle(e){return function Uq(n,e){const t=Dr(n=Yt(n,Gn)),r=new Mq;return function bq(n,e,t,r){const i=function(a,c){let f;return f="string"==typeof a?v5().encode(a):a,g=function(g,v){if(g instanceof Uint8Array)return G6(g,v);if(g instanceof ArrayBuffer)return G6(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new gq(g,c);var g}(t,hE(e));n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){!function fq(n,e,t){const r=qe(n);var i;(i=(0,z.Z)(function*(a,c,f){try{const g=yield c.getMetadata();if(yield function(A,R){const W=qe(A),Q=Tr(R.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",J=>W.qs.getBundleMetadata(J,R.id)).then(J=>!!J&&J.createTime.compareTo(Q)>=0)}(a.localStore,g))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(A=g).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);f._updateProgress(k6(g));const v=new WW(g,a.localStore,c.serializer);let b=yield c.bc();for(;b;){const A=yield v.zu(b);A&&f._updateProgress(A),b=yield c.bc()}const T=yield v.complete();return yield Ac(a,T.Ju,void 0),yield function(A,R){const W=qe(A);return W.persistence.runTransaction("Save bundle","readwrite",Q=>W.qs.saveBundleMetadata(Q,R))}(a.localStore,g),f._completeWith(T.progress),Promise.resolve(T.Hu)}catch(g){return Uo("SyncEngine",`Loading bundle failed with ${g}`),f._failWith(g),Promise.resolve(new Set)}var A}),function(a,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield BF(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Vq(n,e){return function Tq(n,e){return n.asyncQueue.enqueue((0,z.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield RA(n),e)}))}(Dr(n=Yt(n,Gn)),e).then(t=>t?new Ti(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ss(this,t):null)}}class qA extends QF{constructor(e){super(),this.firestore=e}convertBytes(e){return new bE(new su(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Vo.forKey(t,this.firestore,null)}}class Rj{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qA(e)}get(e){const t=wp(e);return this._delegate.get(t).then(r=>new TE(this._firestore,new xc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=wp(e);return r?(XF("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=wp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=wp(e);return this._delegate.delete(t),this}}class kj{constructor(e){this._delegate=e}set(e,t,r){const i=wp(e);return r?(XF("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=wp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=wp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new IE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new DE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=vp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new vp(e,new qA(e),t),i.set(t,a)),a}}vp.INSTANCES=new WeakMap;class Vo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vo(t,new zn(t._delegate,r,new We(e)))}static forKey(e,t,r){return new Vo(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new K_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new K_(this.firestore,oj(this._delegate,e))}catch(t){throw is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,$.m9)(e))instanceof zn&&aj(this._delegate,e)}set(e,t){t=XF("DocumentReference.set",t);try{return t?Dj(this._delegate,e,t):Dj(this._delegate,e)}catch(r){throw is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Sj(this._delegate,e):Sj(this._delegate,e,t,...r)}catch(i){throw is(i,"updateDoc()","DocumentReference.update()")}}delete(){return function hZ(n){return Z_(Yt(n.firestore,Gn),[new P_(n._key,Kn.none())])}(this._delegate)}onSnapshot(...e){const t=Fj(e),r=Lj(e,i=>new TE(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Aj(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function aZ(n){n=Yt(n,zn);const e=Yt(n.firestore,Gn),t=Dr(e),r=new Md(e);return function Cq(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(i,a,c){try{const f=yield function(g,v){const b=qe(g);return b.persistence.runTransaction("read document","readonly",T=>b.localDocuments.getDocument(T,v))}(i,a);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Ie(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const g=j_(f,`Failed to get document '${a} from cache`);c.reject(g)}}),function(i,a,c){return r.apply(this,arguments)})(yield RA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new xc(e,r,n._key,i,new yp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function uZ(n){n=Yt(n,zn);const e=Yt(n.firestore,Gn);return Y6(Dr(e),n._key,{source:"server"}).then(t=>JF(e,n,t))}(this._delegate):function oZ(n){n=Yt(n,zn);const e=Yt(n.firestore,Gn);return Y6(Dr(e),n._key).then(t=>JF(e,n,t))}(this._delegate),t.then(r=>new TE(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Vo(this.firestore,this._delegate.withConverter(e?vp.getInstance(this.firestore,e):null))}}function is(n,e,t){return n.message=n.message.replace(e,t),n}function Fj(n){for(const e of n)if("object"==typeof e&&!eL(e))return e;return{}}function Lj(n,e){var t,r;let i;return i=eL(n[0])?n[0]:eL(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class TE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Tj(this._delegate,e._delegate)}}class DE extends TE{data(e){const t=this._delegate.data(e);return function Tz(n,e){n||et()}(void 0!==t),t}}class ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qA(e)}where(e,t,r){try{return new ss(this.firestore,Sd(this._delegate,function Kq(n,e,t){const r=e,i=$A("where",n);return EE._create(i,r,t)}(e,t,r)))}catch(i){throw is(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ss(this.firestore,Sd(this._delegate,function Yq(n,e="asc"){const t=e,r=$A("orderBy",n);return YF._create(r,t)}(e,t)))}catch(r){throw is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ss(this.firestore,Sd(this._delegate,function Qq(n){return rj("limit",n),HA._create("limit",n,"F")}(e)))}catch(t){throw is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ss(this.firestore,Sd(this._delegate,function Jq(n){return rj("limitToLast",n),HA._create("limitToLast",n,"L")}(e)))}catch(t){throw is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ss(this.firestore,Sd(this._delegate,function Xq(...n){return zA._create("startAt",n,!0)}(...e)))}catch(t){throw is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ss(this.firestore,Sd(this._delegate,function eZ(...n){return zA._create("startAfter",n,!1)}(...e)))}catch(t){throw is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ss(this.firestore,Sd(this._delegate,function tZ(...n){return GA._create("endBefore",n,!1)}(...e)))}catch(t){throw is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ss(this.firestore,Sd(this._delegate,function nZ(...n){return GA._create("endAt",n,!0)}(...e)))}catch(t){throw is(t,"endAt()","Query.endAt()")}}isEqual(e){return HF(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function lZ(n){n=Yt(n,Ti);const e=Yt(n.firestore,Gn),t=Dr(e),r=new Md(e);return function Eq(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(i,a,c){try{const f=yield bA(i,a,!0),g=new U6(a,f.ir),v=g.sc(f.documents),b=g.applyChanges(v,!1);c.resolve(b.snapshot)}catch(f){const g=j_(f,`Failed to execute query '${a} against cache`);c.reject(g)}}),function(i,a,c){return r.apply(this,arguments)})(yield RA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ad(e,r,n,i))}(this._delegate):"server"===e?.source?function dZ(n){n=Yt(n,Ti);const e=Yt(n.firestore,Gn),t=Dr(e),r=new Md(e);return Q6(t,n._query,{source:"server"}).then(i=>new Ad(e,r,n,i))}(this._delegate):function cZ(n){n=Yt(n,Ti);const e=Yt(n.firestore,Gn),t=Dr(e),r=new Md(e);return yj(n._query),Q6(t,n._query).then(i=>new Ad(e,r,n,i))}(this._delegate),t.then(r=>new tL(this.firestore,new Ad(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Fj(e),r=Lj(e,i=>new tL(this.firestore,new Ad(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Aj(this._delegate,t,r)}withConverter(e){return new ss(this.firestore,this._delegate.withConverter(e?vp.getInstance(this.firestore,e):null))}}class FZ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new DE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tL{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new DE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new FZ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new DE(this._firestore,r))})}isEqual(e){return Tj(this._delegate,e._delegate)}}class K_ extends ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vo(this.firestore,e):null}doc(e){try{return new Vo(this.firestore,void 0===e?FA(this._delegate):FA(this._delegate,e))}catch(t){throw is(t,"doc()","CollectionReference.doc()")}}add(e){return function fZ(n,e){const t=Yt(n.firestore,Gn),r=FA(n),i=WA(n.converter,e);return Z_(t,[VA(mp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Vo(this.firestore,t))}isEqual(e){return aj(this._delegate,e._delegate)}withConverter(e){return new K_(this.firestore,this._delegate.withConverter(e?vp.getInstance(this.firestore,e):null))}}function wp(n){return Yt(n,zn)}class nL{constructor(...e){this._delegate=new Mc(...e)}static documentId(){return new nL(hr.keyField().canonicalString())}isEqual(e){return(e=(0,$.m9)(e))instanceof Mc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Cp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function SZ(){return new GF("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Cp(e)}static delete(){const e=function DZ(){return new yE("deleteField")}();return e._methodName="FieldValue.delete",new Cp(e)}static arrayUnion(...e){const t=function AZ(...n){return new zq("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Cp(t)}static arrayRemove(...e){const t=function MZ(...n){return new Gq("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Cp(t)}static increment(e){const t=function xZ(n){return new Wq("increment",n)}(e);return t._methodName="FieldValue.increment",new Cp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LZ={Firestore:Nj,GeoPoint:LA,Timestamp:Zn,Blob:bE,Transaction:Rj,WriteBatch:kj,DocumentReference:Vo,DocumentSnapshot:TE,Query:ss,QueryDocumentSnapshot:DE,QuerySnapshot:tL,CollectionReference:K_,FieldPath:nL,FieldValue:Cp,setLogLevel:function kZ(n){!function bz(n){dd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function VZ(n){(function UZ(n,e){n.INTERNAL.registerComponent(new lr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},LZ)))})(n,(e,t)=>new Nj(e,t,new RZ)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(nk.Z);var BZ=k(3019);class jZ extends yi.x{constructor(e=1/0,t=1/0,r=rf){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let f=0;for(let g=1;g<r.length&&r[g]<=c;g+=2)f=g;f&&r.splice(0,f+1)}}}var $Z=k(3020);function Uj(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,$Z.B)({connector:()=>new jZ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Vj(n,e){return(0,Bs.m)(e)?(0,Vn.w)(()=>n,e):(0,Vn.w)(()=>n)}class ou{constructor(e){return e}}class Ep{constructor(){return(0,on.getApps)()}}const rL=new d.OlP("angularfire2._apps"),zZ={provide:ou,useFactory:function HZ(n){return n&&1===n.length?n[0]:new ou((0,on.getApp)())},deps:[[new d.FiY,rL]]},GZ={provide:Ep,deps:[[new d.FiY,rL]]};function WZ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ou(r)}}let qZ=(()=>{class n{constructor(t){(0,on.registerVersion)("angularfire",yc.full,"core"),(0,on.registerVersion)("angularfire",yc.full,"app"),(0,on.registerVersion)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[zZ,GZ]}),n})();function ZZ(n,...e){return{ngModule:qZ,providers:[{provide:rL,useFactory:WZ(n),multi:!0,deps:[d.R0b,d.zs3,Xs,...e]}]}}const KZ=vc(on.initializeApp,!0),iL=new Map,Bj={activated:!1,tokenObservers:[]},YZ={initialized:!1,enabled:!1};function pr(n){return iL.get(n)||Object.assign({},Bj)}function ZA(){return YZ}const sL="https://content-firebaseappcheck.googleapis.com/v1",eK="exchangeDebugToken",jj={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class nK{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,z.Z)(function*(){t.stop();try{t.pending=new $.BH,yield function rK(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new $.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Di=new $.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function oL(n){if(!pr(n).activated)throw Di.create("use-before-activation",{appName:n.name})}function QA(n,e){return uL.apply(this,arguments)}function uL(){return uL=(0,z.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,a)}catch(T){throw Di.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==c.status)throw Di.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(T){throw Di.create("fetch-parse-error",{originalErrorMessage:T?.message})}const g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Di.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(g[1]),b=Date.now();return{token:f.token,expireTimeMillis:b+v,issuedAtTimeMillis:b}}),uL.apply(this,arguments)}function $j(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${sL}/projects/${t}/apps/${r}:${eK}?key=${i}`,body:{debug_token:e}}}const aK="firebase-app-check-database",uK=1,SE="firebase-app-check-store";let JA=null;function cL(){return cL=(0,z.Z)(function*(n,e){const r=(yield function zj(){return JA||(JA=new Promise((n,e)=>{try{const t=indexedDB.open(aK,uK);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Di.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(SE,{keyPath:"compositeKey"})}}catch(t){e(Di.create("storage-open",{originalErrorMessage:t?.message}))}}),JA)}()).transaction(SE,"readwrite"),a=r.objectStore(SE).put({compositeKey:n,value:e});return new Promise((c,f)=>{a.onsuccess=g=>{c()},r.onerror=g=>{var v;f(Di.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})}),cL.apply(this,arguments)}const AE=new Li.Yd("@firebase/app-check");function hL(n,e){return(0,$.hl)()?function lK(n,e){return function Gj(n,e){return cL.apply(this,arguments)}(function qj(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{AE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function pL(){return ZA().enabled}function gL(){return mL.apply(this,arguments)}function mL(){return mL=(0,z.Z)(function*(){const n=ZA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),mL.apply(this,arguments)}const mK={error:"UNKNOWN_ERROR"};function _K(n){return $.US.encodeString(JSON.stringify(n),!1)}function XA(n){return _L.apply(this,arguments)}function _L(){return _L=(0,z.Z)(function*(n,e=!1){const t=n.app;oL(t);const r=pr(t);let a,i=r.token;if(i&&!Y_(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(Y_(g)?i=g:yield hL(t,void 0))}if(!e&&i&&Y_(i))return{token:i.token};let f,c=!1;if(pL()){r.exchangeTokenPromise||(r.exchangeTokenPromise=QA($j(t,yield gL()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const g=yield r.exchangeTokenPromise;return yield hL(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield pr(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?AE.warn(g.message):AE.error(g),a=g}return i?a?f=Y_(i)?{token:i.token,internalError:a}:Qj(a):(f={token:i.token},r.token=i,yield hL(t,i)):f=Qj(a),c&&function Yj(n,e){const t=pr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),_L.apply(this,arguments)}function yL(){return yL=(0,z.Z)(function*(n){const e=n.app;oL(e);const{provider:t}=pr(e);if(pL()){const r=yield gL(),{token:i}=yield QA($j(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),yL.apply(this,arguments)}function wL(n,e){const t=pr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Kj(n){const{app:e}=n,t=pr(e);let r=t.tokenRefresher;r||(r=function yK(n){const{app:e}=n;return new nK((0,z.Z)(function*(){let r;if(r=pr(e).token?yield XA(n,!0):yield XA(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},jj.RETRIAL_MIN_WAIT,jj.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Y_(n){return n.expireTimeMillis-Date.now()>0}function Qj(n){return{token:_K(mK),error:n}}class vK{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=pr(this.app);for(const t of e)wL(this.app,t.next);return Promise.resolve()}}const s$="app-check-internal";!function NK(){wi(new lr.wA("app-check",n=>function wK(n,e){return new vK(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(s$).initialize()})),wi(new lr.wA(s$,n=>function CK(n){return{getToken:e=>XA(n,e),getLimitedUseToken:()=>function Zj(n){return yL.apply(this,arguments)}(n),addTokenListener:e=>function vL(n,e,t,r){const{app:i}=n,a=pr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Y_(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),Kj(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Kj(n))}(n,"INTERNAL",e),removeTokenListener:e=>wL(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),oi("@firebase/app-check","0.8.0")}();class Pd{constructor(){return ua("app-check")}}typeof window<"u"&&window,k(120);const a$=new d.OlP("angularfire2.auth.use-emulator"),u$=new d.OlP("angularfire2.auth.settings"),c$=new d.OlP("angularfire2.auth.tenant-id"),l$=new d.OlP("angularfire2.auth.langugage-code"),d$=new d.OlP("angularfire2.auth.use-device-language"),h$=new d.OlP("angularfire.auth.persistence"),f$=(n,e,t,r,i,a,c,f)=>(0,Es.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),c)for(const[v,b]of Object.entries(c))g.settings[v]=b;return f&&g.setPersistence(f),g},[t,r,i,a,c,f]);let TL=(()=>{class n{constructor(t,r,i,a,c,f,g,v,b,T,A,R){const W=new yi.x,Q=(0,dt.of)(void 0).pipe((0,id.Q)(c.outsideAngular),(0,Vn.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,8661)))),(0,Ct.U)(()=>(0,Es.on)(t,a,r)),(0,Ct.U)(J=>f$(J,a,f,v,b,T,g,A)),Uj({bufferSize:1,refCount:!1}));if(mi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,dt.of)(null);else{Q.pipe(er()).subscribe();const be=Q.pipe((0,Vn.w)(Ye=>Ye.getRedirectResult().then(mt=>mt,()=>null)),Xi,Uj({bufferSize:1,refCount:!1})),Ge=Q.pipe((0,Vn.w)(Ye=>new zr.y(mt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onAuthStateChanged(At=>mt.next(At),At=>mt.error(At),()=>mt.complete()))})))),ke=Q.pipe((0,Vn.w)(Ye=>new zr.y(mt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onIdTokenChanged(At=>mt.next(At),At=>mt.error(At),()=>mt.complete()))}))));this.authState=be.pipe(Vj(Ge),(0,Zf.R)(c.outsideAngular),(0,id.Q)(c.insideAngular)),this.user=be.pipe(Vj(ke),(0,Zf.R)(c.outsideAngular),(0,id.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,Vn.w)(Ye=>Ye?(0,pn.D)(Ye.getIdToken()):(0,dt.of)(null))),this.idTokenResult=this.user.pipe((0,Vn.w)(Ye=>Ye?(0,pn.D)(Ye.getIdTokenResult()):(0,dt.of)(null))),this.credential=(0,BZ.T)(be,W,this.authState.pipe(Cr(Ye=>!Ye))).pipe((0,Ct.U)(Ye=>Ye?.user?Ye:null),(0,Zf.R)(c.outsideAngular),(0,id.Q)(c.insideAngular))}return(0,Es.pX)(this,Q,a,{spy:{apply:(J,be,Ge)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&Ge.then(ke=>W.next(ke))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Es.Dh),d.LFG(Es.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Xs),d.LFG(a$,8),d.LFG(u$,8),d.LFG(c$,8),d.LFG(l$,8),d.LFG(d$,8),d.LFG(h$,8),d.LFG(Pd,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function p$(n,e){return function VK(n,e=Wg){return new zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function DL(n,e){return p$(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function tM(n,e){return DL(n,e).pipe(xa(void 0),u_(),(0,Ct.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const g=i.find(b=>b.doc.ref.isEqual(c.ref)),v=t?.payload.docs.find(b=>b.ref.isEqual(c.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(c.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),a}))}function g$(n,e,t){return tM(n,t).pipe(qo((r,i)=>function jK(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function $K(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return SL(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return SL(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SL(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,g1.x)(),(0,Ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function SL(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function m$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class _${constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=tM(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(xa(void 0),u_(),Cr(([r,i])=>i.length>0||!r),(0,Ct.U)(([r,i])=>i),Xi)}auditTrail(e){return this.stateChanges(e).pipe(qo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=m$(e);return g$(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xi)}valueChanges(e={}){return DL(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Xi)}get(e){return(0,pn.D)(this.query.get(e)).pipe(Xi)}add(e){return this.ref.add(e)}doc(e){return new y$(this.ref.doc(e),this.afs)}}class y${constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=v$(r,t);return new _$(i,a,this.afs)}snapshotChanges(){return function BK(n,e){return p$(n,e).pipe(xa(void 0),u_(),(0,Ct.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Xi)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(Xi)}}class HK{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?tM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Cr(t=>t.length>0),Xi):tM(this.query,this.afs.schedulers.outsideAngular).pipe(Xi)}auditTrail(e){return this.stateChanges(e).pipe(qo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=m$(e);return g$(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xi)}valueChanges(e={}){return DL(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Xi)}get(e){return(0,pn.D)(this.query.get(e)).pipe(Xi)}}const zK=new d.OlP("angularfire2.enableFirestorePersistence"),GK=new d.OlP("angularfire2.firestore.persistenceSettings"),WK=new d.OlP("angularfire2.firestore.settings"),qK=new d.OlP("angularfire2.firestore.use-emulator");function v$(n,e=(t=>t)){return{query:e(n),ref:n}}let AL=(()=>{class n{constructor(t,r,i,a,c,f,g,v,b,T,A,R,W,Q,J,be,Ge){this.schedulers=g;const ke=(0,Es.on)(t,f,r),Ye=b;T&&f$(ke,f,A,W,Q,J,R,be),[this.firestore,this.persistenceEnabled$]=(0,Es.cc)(`${ke.name}.firestore`,"AngularFirestore",ke.name,()=>{const mt=f.runOutsideAngular(()=>ke.firestore());if(a&&mt.settings(a),Ye&&mt.useEmulator(...Ye),i&&!mi(c)){const At=()=>{try{return(0,pn.D)(mt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Sr){return typeof console<"u"&&console.warn(Sr),(0,dt.of)(!1)}};return[mt,f.runOutsideAngular(At)]}return[mt,(0,dt.of)(!1)]},[a,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=v$(i,r),f=this.schedulers.ngZone.run(()=>a);return new _$(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new HK(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new y$(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Es.Dh),d.LFG(Es.xv,8),d.LFG(zK,8),d.LFG(WK,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Xs),d.LFG(GK,8),d.LFG(qK,8),d.LFG(TL,8),d.LFG(a$,8),d.LFG(u$,8),d.LFG(c$,8),d.LFG(l$,8),d.LFG(d$,8),d.LFG(h$,8),d.LFG(Pd,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var w$=k(6710);let au=(()=>{class n{constructor(t,r){this.afAuth=t,this.db=r,this._loggedInUser$=new wr.X(JSON.parse(sessionStorage.getItem("loggedInUser"))||null),this.loggedInUser$=this._loggedInUser$.asObservable()}getLoggedInUser(){return this._loggedInUser$.value}logInWithGoogle(){var t=this;return(0,z.Z)(function*(){try{const r=yield t.afAuth.signInWithPopup(new w$.V);return yield t.createOrUpdateUserOnDB(r),sessionStorage.setItem("loggedInUser",JSON.stringify(r)),t._loggedInUser$.next(r),r}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,z.Z)(function*(){try{const i=yield r.afAuth.signInWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(i,t),sessionStorage.setItem("loggedInUser",JSON.stringify(i)),r._loggedInUser$.next(i),i}catch(i){throw console.error(i.message),i.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,z.Z)(function*(){try{const i=yield r.afAuth.createUserWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(i,t),sessionStorage.setItem("loggedInUser",JSON.stringify(i)),r._loggedInUser$.next(i),i}catch(i){throw console.error(i.message),i.message}})()}logOut(){var t=this;return(0,z.Z)(function*(){try{yield t.afAuth.signOut(),sessionStorage.removeItem("loggedInUser"),t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}createOrUpdateUserOnDB(t,r=null){var i=this;return(0,z.Z)(function*(){var a;i.db.collection("users").doc(t.user.uid).get().pipe(dn(1)).subscribe({next:(a=(0,z.Z)(function*(c){if(c.exists){const f=c.data();f._id||(yield i.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),f.fullName||(yield i.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.additionalUserInfo?.profile?.name})),f.imgUrl||(yield i.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),f.followedByUsers||(yield i.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),f.followingUsers||(yield i.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield i.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.additionalUserInfo?.profile?.name,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[]})}),function(f){return a.apply(this,arguments)}),error:a=>{console.error(a)}})})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(TL),d.LFG(AL))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nM=(()=>{class n{constructor(t,r){this.db=t,this.authService=r,this._posts$=new wr.X([]),this.posts$=this._posts$.asObservable()}getPosts(){var t=this;return this.db.collection("posts").valueChanges().pipe((0,Vn.w)(r=>{let i=r.reduce((c,f)=>c.concat(f.likedByUsers||[]),[]);return zo(Array.from(new Set(i)).map(c=>this.authService.getUserById(c))).pipe((0,Ct.U)(c=>r.map(f=>(f.likedByUsers=f.likedByUsers?f.likedByUsers.map(g=>c.find(v=>v._id===g)):[],f))),Zo((0,z.Z)(function*(){const c=t.authService.loggedInUser$,f=yield Gg(c);if(!f)return;const g=t.db.collection("users").doc(f?.user?.uid).valueChanges(),v=yield Gg(g),b=r.filter(T=>v.followingUsers.find(A=>A===T.creatorId));t._posts$.next([...b])})),function xv(n=1/0){let e;e=n&&"object"==typeof n?n:{count:n};const{count:t=1/0,delay:r,resetOnSuccess:i=!1}=e;return t<=0?mo.y:(0,Wr.e)((a,c)=>{let g,f=0;const v=()=>{let b=!1;g=a.subscribe((0,xr.x)(c,T=>{i&&(f=0),c.next(T)},void 0,T=>{if(f++<t){const A=()=>{g?(g.unsubscribe(),g=null,v()):b=!0};if(null!=r){const R="number"==typeof r?function nP(n=0,e,t=Pl){let r=-1;return null!=e&&((0,eP.K)(e)?t=e:r=e),new zr.y(i=>{let a=function tP(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(r):(0,ku.Xf)(r(T,f)),W=(0,xr.x)(c,()=>{W.unsubscribe(),A()},()=>{c.complete()});R.subscribe(W)}else A()}else c.error(T)})),b&&(g.unsubscribe(),g=null,v())};v()})}(1),Yi(this._handleError))}))}toggleLike(t,r){var i=this;return(0,z.Z)(function*(){t?yield i.addLike(r):yield i.removeLike(r)})()}addLike(t){var r=this;return(0,z.Z)(function*(){const i=xf(t);r.authService.loggedInUser$.pipe(dn(1)).subscribe({next:a=>{const c=a.user.uid;var f;r.db.collection("users").doc(c).valueChanges().pipe(dn(1)).subscribe({next:(f=(0,z.Z)(function*(g){const v=g,b=i.likedByUsers.slice();b.push(v),i.likedByUsers=i.likedByUsers.map(W=>W._id),i.likedByUsers.push(c),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...i.likedByUsers]});const T=r._posts$.value,A=T.findIndex(W=>W._id===t._id),R={...i,likedByUsers:[...b]};T.splice(A,1,R),r._posts$.next([...T])}),function(v){return f.apply(this,arguments)})})}})})()}removeLike(t){var r=this;return(0,z.Z)(function*(){const i=xf(t);var a;r.authService.loggedInUser$.pipe(dn(1)).subscribe({next:(a=(0,z.Z)(function*(c){const f=c.user.uid,g=i.likedByUsers.findIndex(A=>A._id===f);i.likedByUsers.splice(g,1),i.likedByUsers=i.likedByUsers.map(A=>A._id),yield r.db.collection("posts").doc(i._id).update({likedByUsers:[...i.likedByUsers]});const v=r._posts$.value,b=v.findIndex(A=>A._id===t._id);t.likedByUsers.splice(g,1);const T={...t,likedByUsers:[...t.likedByUsers]};v.splice(b,1,T),r._posts$.next([...v])}),function(f){return a.apply(this,arguments)})})})()}uploadMedia(){return(0,z.Z)(function*(){})()}_handleError(t){return console.log("err:",t),Wo(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(AL),d.LFG(au))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rM(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let c,a=!1;n.subscribe({next:f=>{c=f,a=!0},error:i,complete:()=>{a?r(c):t?r(e.defaultValue):i(new zs)}})})}let ZK=(()=>{class n{constructor(t,r){this.authService=t,this.db=r}toggleFollow(t,r,i){var a=this;return(0,z.Z)(function*(){t?yield a.addFollow(r,i):yield a.removeFollow(r,i)})()}addFollow(t,r){var i=this;return(0,z.Z)(function*(){var v;i.authService.loggedInUser$.pipe(dn(1)).subscribe({next:(v=(0,z.Z)(function*(b){yield i.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,b?.user?.uid]})}),function(T){return v.apply(this,arguments)})});const a=i.authService.loggedInUser$.pipe(dn(1)),c=yield rM(a),f=i.db.collection("users").doc(c?.user?.uid).valueChanges().pipe(dn(1)),g=yield rM(f);yield i.db.collection("users").doc(g._id).update({followingUsers:[...g.followingUsers,t._id]})})()}removeFollow(t,r){var i=this;return(0,z.Z)(function*(){const a=i.authService.loggedInUser$.pipe(dn(1)),c=yield rM(a),f=i.db.collection("users").doc(c?.user?.uid).valueChanges().pipe(dn(1)),g=yield rM(f),v=xf(t.followedByUsers),b=v.findIndex(A=>A===c?.user?.uid);if(-1===b)return;v.splice(b,1),yield i.db.collection("users").doc(t._id).update({followedByUsers:v});const T=g.followingUsers.findIndex(A=>A===t._id);g.followingUsers.splice(T,1),yield i.db.collection("users").doc(g._id).update({followingUsers:g.followingUsers})})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(au),d.LFG(AL))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),KK=(()=>{class n{transform(t){const i=Math.floor(Date.now()/1e3)-t/1e3;return i<60?"just now":i<3600?`${Math.floor(i/60)}m`:i<86400?`${Math.floor(i/3600)}h`:`${Math.floor(i/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function YK(n,e){if(1&n&&(d.TgZ(0,"div",1)(1,"div",2),d._UZ(2,"img",3),d.TgZ(3,"h5"),d._uU(4),d.TgZ(5,"span"),d._uU(6),d.ALo(7,"timeAgo"),d.qZA()()(),d.TgZ(8,"button",4),d.O4$(),d.TgZ(9,"svg",5),d._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),d.qZA()()()),2&n){const t=d.oxw();d.xp6(2),d.Q6J("src",t.creator.imgUrl,d.LSH),d.xp6(2),d.hij(" ",t.creator.fullName," "),d.xp6(2),d.hij("\u2022 ",d.lcZ(7,3,t.post.createdAt),"")}}let QK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"]],template:function(r,i){1&r&&d.YNc(0,YK,13,5,"div",0),2&r&&d.Q6J("ngIf",i.creator)},dependencies:[Zi,KK],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})();const JK=function(n){return{"btn-toggle-follow":!0,following:n}};function XK(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li"),d._UZ(1,"img",1),d.TgZ(2,"h4"),d._uU(3),d.qZA(),d.TgZ(4,"button",2),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.toggleFollow())}),d._uU(5),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("src",t.user.imgUrl,d.LSH),d.xp6(2),d.Oqu(t.user.fullName),d.xp6(1),d.Q6J("ngClass",d.VKq(4,JK,t.isFollowClicked)),d.xp6(1),d.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}let eY=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new d.vpe,this.isFollowClicked=!1,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,z.Z)(function*(){const r=t.authService.getUserById(t.user._id),i=yield Gg(r),a=t.authService.loggedInUser$,c=yield Gg(a);t.isFollowClicked=!!i.followedByUsers.find(f=>f===c?.user?.uid),t.isComponentInitialized=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.user,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(au))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[[4,"ngIf"],["alt","user",3,"src"],[3,"ngClass","click"]],template:function(r,i){1&r&&d.YNc(0,XK,6,6,"li",0),2&r&&d.Q6J("ngIf",i.isComponentInitialized)},dependencies:[yu,Zi],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:45px;border-radius:50%;flex:1}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function tY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-user-row",7),d.NdJ("onToggleFollow",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleFollow.emit(i))}),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw();d.Q6J("post",r.post)("user",t)}}let nY=(()=>{class n{constructor(){this.onToggleLikedByUsersModal=new d.vpe,this.onToggleFollow=new d.vpe}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow"},decls:12,vars:1,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","user","onToggleFollow"]],template:function(r,i){1&r&&(d.TgZ(0,"article",0)(1,"div",1)(2,"h3"),d._uU(3,"Likes"),d.qZA(),d.TgZ(4,"button",2),d.NdJ("click",function(){return i.toggleLikedByUsersModal()}),d.O4$(),d.TgZ(5,"svg",3)(6,"title"),d._uU(7,"Close"),d.qZA(),d._UZ(8,"polyline",4)(9,"line",5),d.qZA()()(),d.kcU(),d.TgZ(10,"ul"),d.YNc(11,tY,1,2,"liked-by-user-row",6),d.qZA()()),2&r&&(d.xp6(11),d.Q6J("ngForOf",i.post.likedByUsers))},dependencies:[Uc,eY],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:calc(100vw - 70px);max-width:27em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3.5em;position:relative}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1.2em;top:50%;transform:translateY(-50%);cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em}"]})}return n})();function rY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",20),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.toggleLike())}),d.O4$(),d.TgZ(1,"svg",21)(2,"title"),d._uU(3,"Like"),d.qZA(),d._UZ(4,"path",22),d.qZA()()}}function iY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",20),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.toggleLike())}),d.O4$(),d.TgZ(1,"svg",23)(2,"title"),d._uU(3,"Unlike"),d.qZA(),d._UZ(4,"path",24),d.qZA()()}}function sY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span"),d._uU(1," and "),d.TgZ(2,"span",30),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(3);return d.KtG(i.isLikedByUsersModalShown=!i.isLikedByUsersModalShown)}),d._uU(3),d.ALo(4,"number"),d.qZA()()}if(2&n){const t=d.oxw(3);d.xp6(3),d.AsE("",d.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function oY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-users-list",31),d.NdJ("onToggleLikedByUsersModal",function(i){d.CHM(t);const a=d.oxw(3);return d.KtG(a.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){d.CHM(t);const a=d.oxw(3);return d.KtG(a.onToggleFollow.emit(i))}),d.qZA()}if(2&n){const t=d.oxw(3);d.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function aY(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",25),d._UZ(1,"img",26),d.TgZ(2,"p"),d._uU(3," Liked by "),d.TgZ(4,"span",27),d._uU(5),d.qZA(),d.YNc(6,sY,5,4,"span",28),d.qZA(),d.YNc(7,oY,1,2,"liked-by-users-list",29),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("src",t.post.likedByUsers[0].imgUrl,d.LSH),d.xp6(4),d.Oqu(t.post.likedByUsers[0].fullName),d.xp6(1),d.Q6J("ngIf",t.post.likedByUsers.length>1),d.xp6(1),d.Q6J("ngIf",t.isLikedByUsersModalShown)}}function uY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",35),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(4);return d.KtG(i.isMoreClicked=!i.isMoreClicked)}),d._uU(1," more "),d.qZA()}}function cY(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",33),d._uU(2),d.qZA(),d._uU(3),d.ALo(4,"slice"),d.YNc(5,uY,2,0,"button",34),d.qZA()),2&n){const t=d.oxw(3);d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.AsE(" ",d.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120&&"..."," "),d.xp6(2),d.Q6J("ngIf",t.post.content.length>=120)}}function lY(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",33),d._uU(2),d.qZA(),d._uU(3),d.qZA()),2&n){const t=d.oxw(3);d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.hij(" ",t.post.content," ")}}function dY(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",32),d.YNc(1,cY,6,8,"p",28),d.YNc(2,lY,4,2,"p",28),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",!t.isMoreClicked),d.xp6(1),d.Q6J("ngIf",t.isMoreClicked)}}function hY(n,e){if(1&n&&(d.TgZ(0,"li",1),d._UZ(1,"post-header",2)(2,"img",3),d.TgZ(3,"div",4)(4,"div",5)(5,"div",6),d.YNc(6,rY,5,0,"button",7),d.YNc(7,iY,5,0,"button",7),d.TgZ(8,"button",8),d.O4$(),d.TgZ(9,"svg",9)(10,"title"),d._uU(11,"Comment"),d.qZA(),d._UZ(12,"path",10),d.qZA()(),d.kcU(),d.TgZ(13,"button",11),d.O4$(),d.TgZ(14,"svg",12)(15,"title"),d._uU(16,"Share PostModel"),d.qZA(),d._UZ(17,"line",13)(18,"polygon",14),d.qZA()()(),d.kcU(),d.TgZ(19,"button",15),d.O4$(),d.TgZ(20,"svg",16)(21,"title"),d._uU(22,"Save"),d.qZA(),d._UZ(23,"polygon",17),d.qZA()()(),d.YNc(24,aY,8,4,"div",18),d.YNc(25,dY,3,2,"div",19),d.qZA()()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("post",t.post)("creator",t.creator),d.xp6(1),d.Q6J("src",t.post.imgUrl,d.LSH),d.xp6(4),d.Q6J("ngIf",!t.isLikeClicked),d.xp6(1),d.Q6J("ngIf",t.isLikeClicked),d.xp6(17),d.Q6J("ngIf",t.post.likedByUsers.length),d.xp6(1),d.Q6J("ngIf",t.creator)}}let fY=(()=>{class n{constructor(t){this.authService=t,this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.isLikeClicked=!1,this.isToggleLikeProcessing=!1,this.isComponentInitialized=!1}ngOnInit(){this.authService.getUserById(this.post.creatorId).pipe(dn(1)).subscribe({next:r=>{this.creator=r}}),this.authService.loggedInUser$.pipe(dn(1)).subscribe({next:r=>{this.loggedInUser=r}}),this.post.likedByUsers.find(r=>r._id===this.loggedInUser.user.uid)&&(this.isLikeClicked=!0),this.isComponentInitialized=!0}toggleLike(){this.isToggleLikeProcessing||(this.isToggleLikeProcessing=!0,setTimeout(()=>{this.isToggleLikeProcessing=!1},2e3),this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:xf(this.post),isLikeClicked:this.isLikeClicked}))}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(au))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","post-card",4,"ngIf"],[1,"post-card"],[3,"post","creator"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment"],["aria-label","Comment","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],["class","content",4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24",1,"x1lliihq","x1n2onr6"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src"],[1,"username"],[4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"content"],[1,"creatorFullName"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"]],template:function(r,i){1&r&&d.YNc(0,hY,26,7,"li",0),2&r&&d.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Zi,QK,nY,_r,je],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}"]})}return n})();function pY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"post-card",2),d.NdJ("onToggleLike",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleLike.emit(i))})("onToggleFollow",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleFollow.emit(i))}),d.qZA()}2&n&&d.Q6J("post",e.$implicit)}let gY=(()=>{class n{constructor(){this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow"},decls:3,vars:1,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","onToggleLike","onToggleFollow"]],template:function(r,i){1&r&&(d.TgZ(0,"section",0)(1,"ul"),d.YNc(2,pY,1,1,"post-card",1),d.qZA()()),2&r&&(d.xp6(2),d.Q6J("ngForOf",i.posts))},dependencies:[Uc,fY],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function mY(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"post-list",2),d.NdJ("onToggleLike",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleLike(i))})("onToggleFollow",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onToggleFollow(i))}),d.qZA()()}if(2&n){const t=e.ngIf;d.xp6(1),d.Q6J("posts",t)}}let _Y=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.userService=i}ngOnInit(){this.posts$=this.postService.posts$}onToggleLike(t){var r=this;return(0,z.Z)(function*(){yield r.postService.toggleLike(t.isLikeClicked,t.post)})()}onToggleFollow(t){var r=this;this.authService.getUserById(t.user._id).pipe(dn(1)).subscribe(function(){var i=(0,z.Z)(function*(a){t.user=a,yield r.userService.toggleFollow(t.isFollowClicked,t.user,t.post)});return function(a){return i.apply(this,arguments)}}())}ngOnDestroy(){}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(nM),d.Y36(au),d.Y36(ZK))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["home-page-page"]],decls:2,vars:3,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow"]],template:function(r,i){1&r&&(d.YNc(0,mY,2,1,"section",0),d.ALo(1,"async")),2&r&&d.Q6J("ngIf",d.lcZ(1,1,i.posts$))},dependencies:[Zi,gY,jc]})}return n})(),C$=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq))};static#t=this.\u0275dir=d.lG2({type:n})}return n})(),Ip=(()=>{class n extends C${static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=d.n5z(n)))(i||n)}}();static#t=this.\u0275dir=d.lG2({type:n,features:[d.qOj]})}return n})();const uu=new d.OlP("NgValueAccessor"),wY={provide:uu,useExisting:(0,d.Gpc)(()=>iM),multi:!0},EY=new d.OlP("CompositionEventMode");let iM=(()=>{class n extends C${constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CY(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(EY,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&d.NdJ("input",function(c){return i._handleInput(c.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(c){return i._compositionEnd(c.target.value)})},features:[d._Bn([wY]),d.qOj]})}return n})();const zi=new d.OlP("NgValidators"),Nd=new d.OlP("NgAsyncValidators");function O$(n){return null!=n}function N$(n){return(0,d.QGY)(n)?(0,pn.D)(n):n}function R$(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function k$(n,e){return e.map(t=>t(n))}function F$(n){return n.map(e=>function bY(n){return!n.validate}(e)?e:t=>e.validate(t))}function ML(n){return null!=n?function L$(n){if(!n)return null;const e=n.filter(O$);return 0==e.length?null:function(t){return R$(k$(t,e))}}(F$(n)):null}function xL(n){return null!=n?function U$(n){if(!n)return null;const e=n.filter(O$);return 0==e.length?null:function(t){return function yY(...n){const e=(0,$s.jO)(n),{args:t,keys:r}=Cn(n),i=new zr.y(a=>{const{length:c}=t;if(!c)return void a.complete();const f=new Array(c);let g=c,v=c;for(let b=0;b<c;b++){let T=!1;(0,ku.Xf)(t[b]).subscribe((0,xr.x)(a,A=>{T||(T=!0,v--),f[b]=A},()=>g--,void 0,()=>{(!g||!T)&&(v||a.next(r?Hs(r,f):f),a.complete())}))}});return e?i.pipe(Nu(e)):i}(k$(t,e).map(N$)).pipe((0,Ct.U)(R$))}}(F$(n)):null}function V$(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function PL(n){return n?Array.isArray(n)?n:[n]:[]}function oM(n,e){return Array.isArray(n)?n.includes(e):n===e}function $$(n,e){const t=PL(e);return PL(n).forEach(i=>{oM(t,i)||t.push(i)}),t}function H$(n,e){return PL(e).filter(t=>!oM(n,t))}class z${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ML(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class os extends z${get formDirective(){return null}get path(){return null}}class Rd extends z${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class G${constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let W$=(()=>{class n extends G${constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Rd,2))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&d.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[d.qOj]})}return n})(),q$=(()=>{class n extends G${constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(os,10))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&d.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[d.qOj]})}return n})();const ME="VALID",uM="INVALID",Q_="PENDING",xE="DISABLED";function RL(n){return(cM(n)?n.validators:n)||null}function kL(n,e){return(cM(e)?e.asyncValidators:n)||null}function cM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Q${constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ME}get invalid(){return this.status===uM}get pending(){return this.status==Q_}get disabled(){return this.status===xE}get enabled(){return this.status!==xE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(H$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(H$(e,this._rawAsyncValidators))}hasValidator(e){return oM(this._rawValidators,e)}hasAsyncValidator(e){return oM(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Q_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ME,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ME||this.status===Q_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xE:ME}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Q_,this._hasOwnPendingAsyncValidator=!0;const t=N$(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?xE:this.errors?uM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Q_)?Q_:this._anyControlsHaveStatus(uM)?uM:ME}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cM(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function AY(n){return Array.isArray(n)?ML(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function MY(n){return Array.isArray(n)?xL(n):n||null}(this._rawAsyncValidators)}}class FL extends Q${constructor(e,t,r){super(RL(t),kL(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Y$(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function K$(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const bp=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>PE}),PE="always";function OE(n,e,t=PE){LL(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function OY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&J$(n,e)})}(n,e),function RY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function NY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&J$(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function PY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function hM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function LL(n,e){const t=function B$(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(V$(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function j$(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(V$(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();hM(e._rawValidators,i),hM(e._rawAsyncValidators,i)}function J$(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const VY={provide:os,useExisting:(0,d.Gpc)(()=>pM)},NE=(()=>Promise.resolve())();let pM=(()=>{class n extends os{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new FL({},ML(t),xL(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){NE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),OE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){NE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){NE.then(()=>{const r=this._findContainer(t.path),i=new FL({});(function X$(n,e){LL(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){NE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){NE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function e7(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(zi,10),d.Y36(Nd,10),d.Y36(bp,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&d.NdJ("submit",function(c){return i.onSubmit(c)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([VY]),d.qOj]})}return n})();function t7(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function n7(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const r7=class extends Q${constructor(e=null,t,r){super(RL(t),kL(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cM(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=n7(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){t7(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){t7(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){n7(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},$Y={provide:Rd,useExisting:(0,d.Gpc)(()=>jL)},o7=(()=>Promise.resolve())();let jL=(()=>{class n extends Rd{constructor(t,r,i,a,c,f){super(),this._changeDetectorRef=c,this.callSetDisabledState=f,this.control=new r7,this._registered=!1,this.name="",this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function BL(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===iM?t=a:function LY(n){return Object.getPrototypeOf(n.constructor)===Ip}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function VL(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){OE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){o7.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.VuI)(r);o7.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function lM(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(os,9),d.Y36(zi,10),d.Y36(Nd,10),d.Y36(uu,10),d.Y36(d.sBO,8),d.Y36(bp,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([$Y]),d.qOj,d.TTD]})}return n})(),a7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),c7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();const $L=new d.OlP("NgModelWithFormControlWarning");let D7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[c7]})}return n})(),fQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bp,useValue:t.callSetDisabledState??PE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[D7]})}return n})(),pQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$L,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:bp,useValue:t.callSetDisabledState??PE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[D7]})}return n})();function gQ(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onLogInWithEmailAndPassword())}),d.TgZ(1,"input",13),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.email=i)}),d.qZA(),d.TgZ(2,"input",14),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.password=i)}),d.qZA(),d.TgZ(3,"button",15),d._uU(4,"Log in"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}function mQ(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onRegisterWithEmailAndPassword())}),d.TgZ(1,"input",16),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.fullName=i)}),d.qZA(),d.TgZ(2,"input",13),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.email=i)}),d.qZA(),d.TgZ(3,"input",14),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.userCred.password=i)}),d.qZA(),d.TgZ(4,"button",17),d._uU(5,"Register"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.fullName),d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}let _Q=(()=>{class n{constructor(t,r,i){this.authService=t,this.postService=r,this.router=i,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0}ngOnInit(){}onLogInWithGoogle(){var t=this;return(0,z.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(dn(1)).subscribe({next:i=>{i&&t.router.navigateByUrl("/")},error:i=>{console.error(i)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,z.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(dn(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,z.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(dn(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.postService.getPosts().pipe(dn(1)).subscribe({error:t=>{console.error(t)}})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(au),d.Y36(nM),d.Y36(cr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,i){1&r&&(d.TgZ(0,"section",0)(1,"div",1),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()(),d.YNc(4,gQ,5,2,"form",4),d.YNc(5,mQ,6,3,"form",4),d.kcU(),d.TgZ(6,"p",5),d.NdJ("click",function(){return i.isLogInFormShown=!i.isLogInFormShown}),d._uU(7," Don't you have a user? Register here "),d.qZA(),d.TgZ(8,"button",6),d.NdJ("click",function(){return i.onLogInWithGoogle()}),d.O4$(),d.TgZ(9,"svg",7),d._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),d.qZA(),d.kcU(),d.TgZ(14,"span"),d._uU(15,"Log in with Google"),d.qZA()()()),2&r&&(d.xp6(4),d.Q6J("ngIf",i.isLogInFormShown),d.xp6(1),d.Q6J("ngIf",!i.isLogInFormShown))},dependencies:[Zi,a7,iM,W$,q$,jL,pM],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})(),yQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["message-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(d.TgZ(0,"p"),d._uU(1,"message-page works!"),d.qZA())}})}return n})(),vQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(d.TgZ(0,"p"),d._uU(1,"notification-page works!"),d.qZA())}})}return n})();function wQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",4)(1,"label",5),d._uU(2," Upload photos and videos here "),d.TgZ(3,"div",6),d.O4$(),d.TgZ(4,"svg",7),d._UZ(5,"path",8)(6,"path",9)(7,"path",10),d.qZA()()(),d.kcU(),d.TgZ(8,"input",11),d.NdJ("change",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onMediaSelected(i))}),d.qZA()()}}function CQ(n,e){1&n&&(d.TgZ(0,"div",12),d._uU(1," Filter Media here ... "),d.qZA())}function EQ(n,e){1&n&&(d.TgZ(0,"div",13),d._uU(1,"Form Media here ..."),d.qZA())}let IQ=(()=>{class n{constructor(t){this.postService=t,this.isSelectMediaShown=!0,this.isFilterMediaShown=!1,this.isFormMediaShown=!1}onMediaSelected(t){console.log(t.target.files[0]),this.postService.uploadMedia()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(nM))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["create-post-page"]],hostAttrs:[1,"page-cmp-layout"],decls:4,vars:3,consts:[[1,"create-post-page"],["class","select-media",4,"ngIf"],["class","filter-media",4,"ngIf"],["class","form-media",4,"ngIf"],[1,"select-media"],["for","media-input",1,"custom-media-input"],["id","upload-media-element"],["aria-label","Icon to represent media such as images or videos","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","77","role","img","viewBox","0 0 97.6 77.3","width","96",1,"x1lliihq","x1n2onr6"],["d","M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z","fill","currentColor"],["d","M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z","fill","currentColor"],["d","M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z","fill","currentColor"],["type","file","accept","image/*","id","media-input",3,"change"],[1,"filter-media"],[1,"form-media"]],template:function(r,i){1&r&&(d.TgZ(0,"section",0),d.YNc(1,wQ,9,0,"div",1),d.YNc(2,CQ,2,0,"div",2),d.YNc(3,EQ,2,0,"div",3),d.qZA()),2&r&&(d.xp6(1),d.Q6J("ngIf",i.isSelectMediaShown),d.xp6(1),d.Q6J("ngIf",i.isFilterMediaShown),d.xp6(1),d.Q6J("ngIf",i.isFormMediaShown))},dependencies:[Zi],styles:["[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]{height:100%;position:relative}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   #media-input[_ngcontent-%COMP%]{display:none;height:100%;width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   .custom-media-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:2em;height:100%}"]})}return n})();const RE=()=>!!(0,d.f3M)(au).getLoggedInUser()||(console.error("LoggedInUser doesnt exists - no access to that page!"),(0,d.f3M)(cr).navigateByUrl("/login"),!1),bQ=[{path:"",component:_Y,canActivate:[RE]},{path:"login",component:_Q,canActivate:[()=>!(0,d.f3M)(au).getLoggedInUser()||(console.error("LoggedInUser exists - no access to login page!"),(0,d.f3M)(cr).navigateByUrl("/"),!1)]},{path:"message",component:yQ,canActivate:[RE]},{path:"notification",component:vQ,canActivate:[RE]},{path:"create-post",component:IQ,canActivate:[RE]},{path:"profile",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["profile"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(d.TgZ(0,"p"),d._uU(1,"profile works!"),d.qZA())}})}return n})(),canActivate:[RE]}];let TQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[$g.forRoot(bQ,{useHash:!0}),$g]})}return n})();function DQ(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",31),d.qZA())}function SQ(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",32),d.qZA())}function AQ(n,e){if(1&n&&d._UZ(0,"img",33),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function MQ(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",34),d._UZ(1,"path",35)(2,"circle",36),d.qZA())}function xQ(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",37)(1,"ul")(2,"li",38),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const PQ=function(){return{exact:!0}};function OQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"div",3),d.O4$(),d.TgZ(3,"svg",4),d._UZ(4,"path",5),d.qZA()(),d.kcU(),d.TgZ(5,"nav")(6,"ul")(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8),d.qZA()(),d.kcU(),d.TgZ(10,"li",9),d.O4$(),d.TgZ(11,"svg",10),d._UZ(12,"path",11)(13,"path",12),d.qZA()(),d.kcU(),d.TgZ(14,"li",13,14),d.YNc(16,DQ,2,0,"svg",15),d.YNc(17,SQ,2,0,"svg",15),d.qZA(),d.TgZ(18,"li",16),d.O4$(),d.TgZ(19,"svg",17),d._UZ(20,"path",18)(21,"line",19)(22,"line",20),d.qZA()(),d.kcU(),d.TgZ(23,"li",21),d.YNc(24,AQ,1,1,"img",22),d.YNc(25,MQ,3,0,"ng-template",null,23,d.W1O),d.qZA()()()(),d.TgZ(27,"div",24),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),d.O4$(),d.TgZ(28,"svg",25),d._UZ(29,"line",26)(30,"line",27)(31,"line",28),d.qZA(),d.YNc(32,xQ,4,0,"div",29),d.qZA()()}if(2&n){const t=d.MAs(15),r=d.MAs(26),i=d.oxw();d.xp6(7),d.Q6J("routerLinkActiveOptions",d.DdM(6,PQ)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",i.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",i.isExtraMenuOpen)}}let NQ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,z.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(au),d.Y36(cr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&d.YNc(0,OQ,33,7,"section",0),2&r&&d.Q6J("ngIf",i.user&&i.user.user)},dependencies:[Zi,jg,Jh],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.19);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:55px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function RQ(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",28),d.qZA())}function kQ(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",29),d.qZA())}function FQ(n,e){if(1&n&&d._UZ(0,"img",30),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function LQ(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",31),d._UZ(1,"path",32)(2,"circle",33),d.qZA())}function UQ(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",34)(1,"ul")(2,"li",35),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const VQ=function(){return{exact:!0}};function BQ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),d.O4$(),d.TgZ(5,"svg",4),d._UZ(6,"path",5),d.qZA()(),d.kcU(),d.TgZ(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8)(10,"path",9),d.qZA()(),d.kcU(),d.TgZ(11,"li",10,11),d.YNc(13,RQ,2,0,"svg",12),d.YNc(14,kQ,2,0,"svg",12),d.qZA(),d.TgZ(15,"li",13),d.O4$(),d.TgZ(16,"svg",14),d._UZ(17,"path",15)(18,"line",16)(19,"line",17),d.qZA()(),d.kcU(),d.TgZ(20,"li",18),d.YNc(21,FQ,1,1,"img",19),d.YNc(22,LQ,3,0,"ng-template",null,20,d.W1O),d.qZA(),d.TgZ(24,"li",21),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),d.O4$(),d.TgZ(25,"svg",22),d._UZ(26,"line",23)(27,"line",24)(28,"line",25),d.qZA(),d.YNc(29,UQ,4,0,"div",26),d.qZA()()()()()}if(2&n){const t=d.MAs(12),r=d.MAs(23),i=d.oxw();d.xp6(4),d.Q6J("routerLinkActiveOptions",d.DdM(6,VQ)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",i.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",i.isExtraMenuOpen)}}let jQ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,z.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(au),d.Y36(cr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&d.YNc(0,BQ,30,7,"section",0),2&r&&d.Q6J("ngIf",i.user&&i.user.user)},dependencies:[Zi,jg,Jh],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;z-index:99;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#5b5b5b;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})(),$Q=(()=>{class n{constructor(t){this.router=t}onClickLogo(){this.router.navigateByUrl("/")}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(cr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-header-mobile"]],decls:4,vars:0,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"]],template:function(r,i){1&r&&(d.TgZ(0,"header",0)(1,"div",1),d.NdJ("click",function(){return i.onClickLogo()}),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()()())},styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:99;top:0;border-block-end:1px solid rgba(255,255,255,.27);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}"]})}return n})();function HQ(n,e){1&n&&d._UZ(0,"router-outlet")}function zQ(n,e){1&n&&d._UZ(0,"app-header-mobile")}function GQ(n,e){1&n&&d._UZ(0,"aside-menu")}function WQ(n,e){1&n&&(d.TgZ(0,"main",3),d._UZ(1,"router-outlet"),d.qZA())}function qQ(n,e){1&n&&d._UZ(0,"menu-mobile")}function ZQ(n,e){if(1&n&&(d.TgZ(0,"section"),d.YNc(1,HQ,1,0,"router-outlet",1),d.YNc(2,zQ,1,0,"app-header-mobile",1),d.YNc(3,GQ,1,0,"aside-menu",1),d.YNc(4,WQ,2,0,"main",2),d.YNc(5,qQ,1,0,"menu-mobile",1),d.qZA()),2&n){const t=d.oxw();d.Tol("/login"===t.routerUrl?"main-app login-layout":"main-app app-layout"),d.xp6(1),d.Q6J("ngIf","/login"===t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl)}}let KQ=(()=>{class n{constructor(t,r){this.router=t,this.postService=r,this.routerUrl=this.router.url,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,z.Z)(function*(){t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof Zs&&(t.routerUrl=t.router.url)}),t.postService.getPosts().pipe(dn(1)).subscribe({error:r=>{console.error(r)},complete:()=>{t.isComponentInitialized=!0}})})()}ngOnDestroy(){this.routerUrlSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(cr),d.Y36(nM))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,i){1&r&&d.YNc(0,ZQ,6,7,"section",0),2&r&&d.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Zi,Uh,NQ,jQ,$Q]})}return n})();class gM{}class mM{}class cu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof cu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new cu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof cu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(f=>-1===a.indexOf(f)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class YQ{encodeKey(e){return S7(e)}encodeValue(e){return S7(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const JQ=/%(\d[a-f0-9])/gi,XQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function S7(n){return encodeURIComponent(n).replace(JQ,(e,t)=>XQ[t]??e)}function _M(n){return`${n}`}class kd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new YQ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function QQ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],g=t.get(c)||[];g.push(f),t.set(c,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(_M):[_M(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new kd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(_M(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(_M(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class eJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function A7(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function M7(n){return typeof Blob<"u"&&n instanceof Blob}function x7(n){return typeof FormData<"u"&&n instanceof FormData}class kE{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function tJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new cu),this.context||(this.context=new eJ),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+c}}else this.params=new kd,this.urlWithParams=t}serializeBody(){return null===this.body?null:A7(this.body)||M7(this.body)||x7(this.body)||function nJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof kd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||x7(this.body)?null:M7(this.body)?this.body.type||null:A7(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof kd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,v=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((T,A)=>T.set(A,e.setHeaders[A]),g)),e.setParams&&(v=Object.keys(e.setParams).reduce((T,A)=>T.set(A,e.setParams[A]),v)),new kE(t,r,a,{params:v,headers:g,context:b,reportProgress:f,responseType:i,withCredentials:c})}}var J_=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(J_||{});class KL{constructor(e,t=200,r="OK"){this.headers=e.headers||new cu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class YL extends KL{constructor(e={}){super(e),this.type=J_.ResponseHeader}clone(e={}){return new YL({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class X_ extends KL{constructor(e={}){super(e),this.type=J_.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new X_({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class P7 extends KL{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function QL(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let rJ=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof kE)a=t;else{let g,v;g=i.headers instanceof cu?i.headers:new cu(i.headers),i.params&&(v=i.params instanceof kd?i.params:new kd({fromObject:i.params})),a=new kE(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=(0,dt.of)(a).pipe(yo(g=>this.handler.handle(g)));if(t instanceof kE||"events"===i.observe)return c;const f=c.pipe(Cr(g=>g instanceof X_));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,Ct.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,Ct.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,Ct.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe((0,Ct.U)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new kd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,QL(i,r))}post(t,r,i={}){return this.request("POST",t,QL(i,r))}put(t,r,i={}){return this.request("PUT",t,QL(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(gM))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function R7(n,e){return e(n)}function sJ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const aJ=new d.OlP(""),FE=new d.OlP(""),k7=new d.OlP("");function uJ(){let n=null;return(e,t)=>{null===n&&(n=((0,d.f3M)(aJ,{optional:!0})??[]).reduceRight(sJ,R7));const r=(0,d.f3M)(d.HDt),i=r.add();return n(e,t).pipe(Zo(()=>r.remove(i)))}}let F7=(()=>{class n extends gM{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,d.f3M)(d.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(FE),...this.injector.get(k7,[])]));this.chain=i.reduceRight((a,c)=>function oJ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(a,c,this.injector),R7)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Zo(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(mM),d.LFG(d.lqb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const hJ=/^\)\]\}',?\n/;let U7=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new d.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,pn.D)(r.\u0275loadImpl()):(0,dt.of)(null)).pipe((0,Vn.w)(()=>new zr.y(a=>{const c=r.build();if(c.open(t.method,t.urlWithParams),t.withCredentials&&(c.withCredentials=!0),t.headers.forEach((Q,J)=>c.setRequestHeader(Q,J.join(","))),t.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Q=t.detectContentTypeHeader();null!==Q&&c.setRequestHeader("Content-Type",Q)}if(t.responseType){const Q=t.responseType.toLowerCase();c.responseType="json"!==Q?Q:"text"}const f=t.serializeBody();let g=null;const v=()=>{if(null!==g)return g;const Q=c.statusText||"OK",J=new cu(c.getAllResponseHeaders()),be=function fJ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(c)||t.url;return g=new YL({headers:J,status:c.status,statusText:Q,url:be}),g},b=()=>{let{headers:Q,status:J,statusText:be,url:Ge}=v(),ke=null;204!==J&&(ke=typeof c.response>"u"?c.responseText:c.response),0===J&&(J=ke?200:0);let Ye=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof ke){const mt=ke;ke=ke.replace(hJ,"");try{ke=""!==ke?JSON.parse(ke):null}catch(At){ke=mt,Ye&&(Ye=!1,ke={error:At,text:ke})}}Ye?(a.next(new X_({body:ke,headers:Q,status:J,statusText:be,url:Ge||void 0})),a.complete()):a.error(new P7({error:ke,headers:Q,status:J,statusText:be,url:Ge||void 0}))},T=Q=>{const{url:J}=v(),be=new P7({error:Q,status:c.status||0,statusText:c.statusText||"Unknown Error",url:J||void 0});a.error(be)};let A=!1;const R=Q=>{A||(a.next(v()),A=!0);let J={type:J_.DownloadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),"text"===t.responseType&&c.responseText&&(J.partialText=c.responseText),a.next(J)},W=Q=>{let J={type:J_.UploadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),a.next(J)};return c.addEventListener("load",b),c.addEventListener("error",T),c.addEventListener("timeout",T),c.addEventListener("abort",T),t.reportProgress&&(c.addEventListener("progress",R),null!==f&&c.upload&&c.upload.addEventListener("progress",W)),c.send(f),a.next({type:J_.Sent}),()=>{c.removeEventListener("error",T),c.removeEventListener("abort",T),c.removeEventListener("load",b),c.removeEventListener("timeout",T),t.reportProgress&&(c.removeEventListener("progress",R),null!==f&&c.upload&&c.upload.removeEventListener("progress",W)),c.readyState!==c.DONE&&c.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(hs))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const JL=new d.OlP("XSRF_ENABLED"),V7=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),B7=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class j7{}let mJ=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ya(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee),d.LFG(d.Lbi),d.LFG(V7))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function _J(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(JL)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(j7).getToken(),i=(0,d.f3M)(B7);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Fd=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Fd||{});function yJ(...n){const e=[rJ,U7,F7,{provide:gM,useExisting:F7},{provide:mM,useExisting:U7},{provide:FE,useValue:_J,multi:!0},{provide:JL,useValue:!0},{provide:j7,useClass:mJ}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const $7=new d.OlP("LEGACY_INTERCEPTOR_FN");function vJ(){return function Dp(n,e){return{\u0275kind:n,\u0275providers:e}}(Fd.LegacyInterceptors,[{provide:$7,useFactory:uJ},{provide:FE,useExisting:$7,multi:!0}])}let wJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[yJ(vJ())]})}return n})();const H7={production:!1,firebaseConfig:{projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",storageBucket:"instagram-clone-gilshaashua.appspot.com",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"}};class XL{constructor(e){return e}}class LE{constructor(){return ua("auth")}}const e4=new d.OlP("angularfire2.auth-instances");function SJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new XL(r)}}const AJ={provide:LE,deps:[[new d.FiY,e4]]},MJ={provide:XL,useFactory:function DJ(n,e){const t=Ka("auth",n,e);return t&&new XL(t)},deps:[[new d.FiY,e4],ou]};let xJ=(()=>{class n{constructor(){(0,on.registerVersion)("angularfire",yc.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[MJ,AJ]}),n})();function PJ(n,...e){return{ngModule:xJ,providers:[{provide:e4,useFactory:SJ(n),multi:!0,deps:[d.R0b,d.zs3,Xs,Ep,[new d.FiY,Pd],...e]}]}}const OJ=vc(w$.o,!0);class t4{constructor(e){return e}}const G7="firestore",n4=new d.OlP("angularfire2.firestore-instances");function kJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new t4(r)}}const FJ={provide:class NJ{constructor(){return ua(G7)}},deps:[[new d.FiY,n4]]},LJ={provide:t4,useFactory:function RJ(n,e){const t=Ka(G7,n,e);return t&&new t4(t)},deps:[[new d.FiY,n4],ou]};let UJ=(()=>{class n{constructor(){(0,on.registerVersion)("angularfire",yc.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[LJ,FJ]}),n})();function VJ(n,...e){return{ngModule:UJ,providers:[{provide:n4,useFactory:kJ(n),multi:!0,deps:[d.R0b,d.zs3,Xs,Ep,[new d.FiY,LE],[new d.FiY,Pd],...e]}]}}const BJ=vc(Pq,!0),W7="@firebase/database";let r4="";class $J{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,$.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,$.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class HJ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,$.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Z7=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $J(e)}}catch{}return new HJ},Sp=Z7("localStorage"),i4=Z7("sessionStorage"),ey=new Li.Yd("@firebase/database"),K7=function(){let n=1;return function(){return n++}}(),Y7=function(n){const e=(0,$.dS)(n),t=new $.gQ;t.update(e);const r=t.digest();return $.US.encodeByteArray(r)},UE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=UE.apply(null,r):e+="object"==typeof r?(0,$.Wl)(r):r,e+=" "}return e};let Ap=null,Q7=!0;const di=function(...n){if(!0===Q7&&(Q7=!1,null===Ap&&!0===i4.get("logging_enabled")&&function(n,e){(0,$.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ey.logLevel=Li.in.VERBOSE,Ap=ey.log.bind(ey),e&&i4.set("logging_enabled",!0)):"function"==typeof n?Ap=n:(Ap=null,i4.remove("logging_enabled"))}(!0)),Ap){const e=UE.apply(null,n);Ap(e)}},VE=function(n){return function(...e){di(n,...e)}},s4=function(...n){const e="FIREBASE INTERNAL ERROR: "+UE(...n);ey.error(e)},lu=function(...n){const e=`FIREBASE FATAL ERROR: ${UE(...n)}`;throw ey.error(e),new Error(e)},Gi=function(...n){const e="FIREBASE WARNING: "+UE(...n);ey.warn(e)},vM=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ld="[MIN_NAME]",Pc="[MAX_NAME]",Mp=function(n,e){if(n===e)return 0;if(n===Ld||e===Pc)return-1;if(e===Ld||n===Pc)return 1;{const t=t9(n),r=t9(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},WJ=function(n,e){return n===e?0:n<e?-1:1},BE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,$.Wl)(e))},o4=function(n){if("object"!=typeof n||null===n)return(0,$.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,$.Wl)(e[r]),t+=":",t+=o4(n[e[r]]);return t+="}",t},X7=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const e9=function(n){(0,$.hu)(!vM(n),"Invalid JSON number");const r=1023;let i,a,c,f,g;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,c=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(c%2?1:0),c=Math.floor(c/2);for(g=11;g;g-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const b=v.join("");let T="";for(g=0;g<64;g+=8){let A=parseInt(b.substr(g,8),2).toString(16);1===A.length&&(A="0"+A),T+=A}return T.toLowerCase()},YJ=new RegExp("^-?(0*)\\d{1,10}$"),t9=function(n){if(YJ.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ty=function(n){try{n()}catch(e){setTimeout(()=>{throw Gi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},jE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class eX{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Gi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class tX{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(di("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gi(e)}}let $E=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const o9=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,c9="websocket",l9="long_polling";class u4{constructor(e,t,r,i,a=!1,c="",f=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Sp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Sp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function d9(n,e,t){let r;if((0,$.hu)("string"==typeof e,"typeof type must == string"),(0,$.hu)("object"==typeof t,"typeof params must == object"),e===c9)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==l9)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function nX(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return hi(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class rX{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,$.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,$.p$)(this.counters_)}}const c4={},l4={};function d4(n){const e=n.toString();return c4[e]||(c4[e]=new rX),c4[e]}class sX{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ty(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ud{constructor(e,t,r,i,a,c,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=VE(e),this.stats_=d4(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),d9(t,l9,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new sX(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,$.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new h4((...a)=>{const[c,f,g,v,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=f,this.password=g;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&o9.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ud.forceAllow_=!0}static forceDisallow(){Ud.forceDisallow_=!0}static isAvailable(){return!((0,$.Yr)()||!Ud.forceAllow_&&(Ud.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,$.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,$.h$)(t),i=X7(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,$.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,$.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class h4{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,$.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=K7(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=h4.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){di("frame writing exception"),f.stack&&di(f.stack),di(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||di("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,$.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{di("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let CM=null;typeof MozWebSocket<"u"?CM=MozWebSocket:typeof WebSocket<"u"&&(CM=WebSocket);let ny=(()=>{class n{constructor(t,r,i,a,c,f,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=VE(this.connId),this.stats_=d4(r),this.connURL=n.connectionURL_(r,f,g,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const f={v:"5"};return!(0,$.Yr)()&&typeof location<"u"&&location.hostname&&o9.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),c&&(f.p=c),d9(t,c9,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Sp.set("previous_websocket_failure",!0);try{let i;if((0,$.Yr)()){i={headers:{"User-Agent":`Firebase/5/${r4}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,f=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new CM(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==CM&&!n.forceDisallow_}static previouslyFailed(){return Sp.isInMemoryStorage||!0===Sp.get("previous_websocket_failure")}markConnectionHealthy(){Sp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,$.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,$.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,$.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=X7(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),y9=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ud,ny]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=ny&&ny.isAvailable();let i=r&&!ny.previouslyFailed();if(t.webSocketOnly&&(r||Gi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ny];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class T9{constructor(e,t,r,i,a,c,f,g,v,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=VE("c:"+this.id+":"),this.transportManager_=new y9(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=jE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=BE("t",e),r=BE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=BE("t",e),r=BE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=BE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?s4("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):s4("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Gi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),jE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Sp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class D9{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class S9{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,$.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,$.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class EM extends S9{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,$.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new EM}getInitialEvent(e){return(0,$.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class gn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function cn(){return new gn("")}function jt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Vd(n){return n.pieces_.length-n.pieceNum_}function Tn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new gn(n.pieces_,e)}function p4(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function HE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function x9(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new gn(e,0)}function Yn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new gn(t,0)}function $t(n){return n.pieceNum_>=n.pieces_.length}function as(n,e){const t=jt(n),r=jt(e);if(null===t)return e;if(t===r)return as(Tn(n),Tn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function g4(n,e){if(Vd(n)!==Vd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Bo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Vd(n)>Vd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class AX{constructor(e,t){this.errorPrefix_=t,this.parts_=HE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,$.ug)(this.parts_[r]);P9(this)}}function P9(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+xp(n))}function xp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class m4 extends S9{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new m4}getInitialEvent(e){return(0,$.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const zE=1e3;let bM,Pp=(()=>{class n extends D9{constructor(t,r,i,a,c,f,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=VE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=zE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,$.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");m4.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&EM.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,$.Wl)(c)),(0,$.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new $.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const g=f.d;"ok"===f.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),(0,$.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,$.hu)(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,g=>{const v=g.d,b=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,$.r3)(t,"w")){const i=(0,$.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Gi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,$.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,$.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,f=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,$.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const f={p:r,d:i};void 0!==c&&(f.h=c),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,$.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):s4("Unrecognized action received from server: "+(0,$.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,$.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=zE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=zE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,z.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let g=!1,v=null;const b=function(){v?v.close():(g=!0,a())};t.realtime_={close:b,sendRequest:function(R){(0,$.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(R)}};const A=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[R,W]=yield Promise.all([t.authTokenProvider_.getToken(A),t.appCheckTokenProvider_.getToken(A)]);g?di("getToken() completed but was canceled"):(di("getToken() completed. Creating connection."),t.authToken_=R&&R.accessToken,t.appCheckToken_=W&&W.token,v=new T9(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Q=>{Gi(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(R){t.log_("Failed to get token: "+R),g||(t.repoInfo_.nodeAdmin&&Gi(R),b())}}})()}interrupt(t){di("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){di("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,$.xb)(this.interruptReasons_)&&(this.reconnectDelay_=zE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>o4(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new gn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){di("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){di("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,$.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+r4.replace(/\./g,"-")]=1,(0,$.uI)()?t["framework.cordova"]=1:(0,$.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=EM.getInstance().currentlyOnline();return(0,$.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zt(e,t)}}class IM{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new zt(Ld,e),i=new zt(Ld,t);return 0!==this.compare(r,i)}minPost(){return zt.MIN}}class R9 extends IM{static get __EMPTY_NODE(){return bM}static set __EMPTY_NODE(e){bM=e}compare(e,t){return Mp(e.name,t.name)}isDefinedOn(e){throw(0,$.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zt.MIN}maxPost(){return new zt(Pc,bM)}makePost(e,t){return(0,$.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new zt(e,bM)}toString(){return".key"}}const du=new R9;class TM{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let y4,ha=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Ts.EMPTY_NODE,this.right=c??Ts.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ts.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ts.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ts{constructor(e,t=Ts.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ts(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ha.BLACK,null,null))}remove(e){return new Ts(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ha.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new TM(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new TM(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new TM(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new TM(this.root_,null,this.comparator_,!0,e)}}function FX(n,e){return Mp(n.name,e.name)}function _4(n,e){return Mp(n,e)}Ts.EMPTY_NODE=new class kX{copy(e,t,r,i,a){return this}insert(e,t,r){return new ha(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const k9=function(n){return"number"==typeof n?"number:"+e9(n):"string:"+n},F9=function(n){if(n.isLeafNode()){const e=n.val();(0,$.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,$.r3)(e,".sv"),"Priority must be a string or number.")}else(0,$.hu)(n===y4||n.isEmpty(),"priority of unexpected type.");(0,$.hu)(n===y4||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let L9,U9,V9,ry=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,$.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),F9(this.priorityNode_)}static set __childrenNodeConstructor(t){L9=t}static get __childrenNodeConstructor(){return L9}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return $t(t)?this:".priority"===jt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=jt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,$.hu)(".priority"!==i||1===Vd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Tn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+k9(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?e9(this.value_):this.value_,this.lazyHash_=Y7(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,$.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,$.hu)(a>=0,"Unknown leaf type: "+r),(0,$.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Nn=new class BX extends IM{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Mp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(Pc,new ry("[PRIORITY-POST]",V9))}makePost(e,t){const r=U9(e);return new zt(t,new ry("[PRIORITY-POST]",r))}toString(){return".priority"}},jX=Math.log(2);class $X{constructor(e){this.count=parseInt(Math.log(e+1)/jX,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const DM=function(n,e,t,r){n.sort(e);const i=function(g,v){const b=v-g;let T,A;if(0===b)return null;if(1===b)return T=n[g],A=t?t(T):T,new ha(A,T.node,ha.BLACK,null,null);{const R=parseInt(b/2,10)+g,W=i(g,R),Q=i(R+1,v);return T=n[R],A=t?t(T):T,new ha(A,T.node,ha.BLACK,W,Q)}},f=function(g){let v=null,b=null,T=n.length;const A=function(W,Q){const J=T-W,be=T;T-=W;const Ge=i(J+1,be),ke=n[J],Ye=t?t(ke):ke;R(new ha(Ye,ke.node,Q,null,Ge))},R=function(W){v?(v.left=W,v=W):(b=W,v=W)};for(let W=0;W<g.count;++W){const Q=g.nextBitIsOne(),J=Math.pow(2,g.count-(W+1));Q?A(J,ha.BLACK):(A(J,ha.BLACK),A(J,ha.RED))}return b}(new $X(n.length));return new Ts(r||e,f)};let v4;const iy={};class Oc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,$.hu)(iy&&Nn,"ChildrenNode.ts has not been loaded"),v4=v4||new Oc({".priority":iy},{".priority":Nn}),v4}get(e){const t=(0,$.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ts?t:null}hasIndex(e){return(0,$.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,$.hu)(e!==du,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(zt.Wrap);let f,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();f=i?DM(r,e.getCompare()):iy;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const b=Object.assign({},this.indexes_);return b[g]=f,new Oc(b,v)}addToIndexes(e,t){const r=(0,$.UI)(this.indexes_,(i,a)=>{const c=(0,$.DV)(this.indexSet_,a);if((0,$.hu)(c,"Missing index implementation for "+a),i===iy){if(c.isDefinedOn(e.node)){const f=[],g=t.getIterator(zt.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&f.push(v),v=g.getNext();return f.push(e),DM(f,c.getCompare())}return iy}{const f=t.get(e.name);let g=i;return f&&(g=g.remove(new zt(e.name,f))),g.insert(e,e.node)}});return new Oc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,$.UI)(this.indexes_,i=>{if(i===iy)return i;{const a=t.get(e.name);return a?i.remove(new zt(e.name,a)):i}});return new Oc(r,this.indexSet_)}}let GE,Pt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&F9(this.priorityNode_),this.children_.isEmpty()&&(0,$.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return GE||(GE=new n(new Ts(_4),null,Oc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||GE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?GE:r}}getChild(t){const r=jt(t);return null===r?this:this.getImmediateChild(r).getChild(Tn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,$.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new zt(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?GE:this.priorityNode_;return new n(a,f,c)}}updateChild(t,r){const i=jt(t);if(null===i)return r;{(0,$.hu)(".priority"!==jt(t)||1===Vd(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Tn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Nn,(f,g)=>{r[f]=g.val(t),i++,c&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):c=!1}),!t&&c&&a<2*i){const f=[];for(const g in r)f[g]=r[g];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+k9(this.getPriority().val())+":"),this.forEachChild(Nn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":Y7(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new zt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,zt.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,zt.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===WE?-1:0}withIndex(t){if(t===du||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===du||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Nn),a=r.getIterator(Nn);let c=i.getNext(),f=a.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=i.getNext(),f=a.getNext()}return null===c&&null===f}return!1}return!1}}resolveIndex_(t){return t===du?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const WE=new class HX extends Pt{constructor(){super(new Ts(_4),Pt.EMPTY_NODE,Oc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Pt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(zt,{MIN:{value:new zt(Ld,Pt.EMPTY_NODE)},MAX:{value:new zt(Pc,WE)}}),R9.__EMPTY_NODE=Pt.EMPTY_NODE,ry.__childrenNodeConstructor=Pt,function LX(n){y4=n}(WE),function VX(n){V9=n}(WE);const zX=!0;function ir(n,e=null){if(null===n)return Pt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,$.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ry(n,ir(e));if(n instanceof Array||!zX){let t=Pt.EMPTY_NODE;return hi(n,(r,i)=>{if((0,$.r3)(n,r)&&"."!==r.substring(0,1)){const a=ir(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(ir(e))}{const t=[];let r=!1;if(hi(n,(c,f)=>{if("."!==c.substring(0,1)){const g=ir(f);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new zt(c,g)))}}),0===t.length)return Pt.EMPTY_NODE;const a=DM(t,FX,c=>c.name,_4);if(r){const c=DM(t,Nn.getCompare());return new Pt(a,ir(e),new Oc({".priority":c},{".priority":Nn}))}return new Pt(a,ir(e),Oc.Default)}}!function UX(n){U9=n}(ir);class w4 extends IM{constructor(e){super(),this.indexPath_=e,(0,$.hu)(!$t(e)&&".priority"!==jt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Mp(e.name,t.name):a}makePost(e,t){const r=ir(e),i=Pt.EMPTY_NODE.updateChild(this.indexPath_,r);return new zt(t,i)}maxPost(){const e=Pt.EMPTY_NODE.updateChild(this.indexPath_,WE);return new zt(Pc,e)}toString(){return HE(this.indexPath_,0).join("/")}}const C4=new class GX extends IM{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Mp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,t){const r=ir(e);return new zt(t,r)}toString(){return".value"}};function ZE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class I4{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,$.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,$.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ld}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,$.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,$.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,$.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nn}copy(){const e=new I4;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function j9(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Nn?t="$priority":n.index_===C4?t="$value":n.index_===du?t="$key":((0,$.hu)(n.index_ instanceof w4,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,$.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,$.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,$.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,$.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,$.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function $9(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Nn&&(e.i=n.index_.toString()),e}class AM extends D9{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=VE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,$.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=AM.getListenId_(e,r),f={};this.listens_[c]=f;const g=j9(e._queryParams);this.restRequest_(a+".json",g,(v,b)=>{let T=b;if(404===v&&(T=null,v=null),null===v&&this.onDataUpdate_(a,T,!1,r),(0,$.DV)(this.listens_,c)===f){let A;A=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(A,null)}})}unlisten(e,t){const r=AM.getListenId_(e,t);delete this.listens_[r]}get(e){const t=j9(e._queryParams),r=e._path.toString(),i=new $.BH;return this.restRequest_(r+".json",t,(a,c)=>{let f=c;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,$.xO)(t);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let g=null;if(f.status>=200&&f.status<300){try{g=(0,$.cI)(f.responseText)}catch{Gi("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,g)}else 401!==f.status&&404!==f.status&&Gi("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}class XX{constructor(){this.rootNode_=Pt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function MM(){return{value:null,children:new Map}}function oy(n,e,t){if($t(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=jt(e);n.children.has(r)||n.children.set(r,MM()),oy(n.children.get(r),e=Tn(e),t)}}function S4(n,e,t){null!==n.value?t(e,n.value):function eee(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{S4(i,new gn(e.toString()+"/"+r),t)})}class tee{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&hi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class iee{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new tee(e);const r=1e4+2e4*Math.random();jE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;hi(e,(i,a)=>{a>0&&(0,$.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),jE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var hu=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(hu||{});function x4(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class xM{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=hu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if($t(this.path)){if(null!=this.affectedTree.value)return(0,$.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new gn(e));return new xM(cn(),t,this.revert)}}return(0,$.hu)(jt(this.path)===e,"operationForChild called for unrelated child."),new xM(Tn(this.path),this.affectedTree,this.revert)}}class Op{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=hu.OVERWRITE}operationForChild(e){return $t(this.path)?new Op(this.source,cn(),this.snap.getImmediateChild(e)):new Op(this.source,Tn(this.path),this.snap)}}class ay{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=hu.MERGE}operationForChild(e){if($t(this.path)){const t=this.children.subtree(new gn(e));return t.isEmpty()?null:t.value?new Op(this.source,cn(),t.value):new ay(this.source,cn(),t)}return(0,$.hu)(jt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ay(this.source,Tn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Bd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($t(e))return this.isFullyInitialized()&&!this.filtered_;const t=jt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function QE(n,e,t,r,i,a){const c=r.filter(f=>f.type===t);c.sort((f,g)=>function uee(n,e,t){if(null==e.childName||null==t.childName)throw(0,$.g5)("Should only compare child_ events.");const r=new zt(e.childName,e.snapshotNode),i=new zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,g)),c.forEach(f=>{const g=function aee(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(g,n.query_))})})}function PM(n,e){return{eventCache:n,serverCache:e}}function JE(n,e,t,r){return PM(new Bd(e,t,r),n.serverCache)}function z9(n,e,t,r){return PM(n.eventCache,new Bd(e,t,r))}function OM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Np(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let P4;class Rn{constructor(e,t=(()=>(P4||(P4=new Ts(WJ)),P4))()){this.value=e,this.children=t}static fromObject(e){let t=new Rn(null);return hi(e,(r,i)=>{t=t.set(new gn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:cn(),value:this.value};if($t(e))return null;{const r=jt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Tn(e),t);return null!=a?{path:Yn(new gn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($t(e))return this;{const t=jt(e),r=this.children.get(t);return null!==r?r.subtree(Tn(e)):new Rn(null)}}set(e,t){if($t(e))return new Rn(t,this.children);{const r=jt(e),a=(this.children.get(r)||new Rn(null)).set(Tn(e),t),c=this.children.insert(r,a);return new Rn(this.value,c)}}remove(e){if($t(e))return this.children.isEmpty()?new Rn(null):new Rn(null,this.children);{const t=jt(e),r=this.children.get(t);if(r){const i=r.remove(Tn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Rn(null):new Rn(this.value,a)}return this}}get(e){if($t(e))return this.value;{const t=jt(e),r=this.children.get(t);return r?r.get(Tn(e)):null}}setTree(e,t){if($t(e))return t;{const r=jt(e),a=(this.children.get(r)||new Rn(null)).setTree(Tn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Rn(this.value,c)}}fold(e){return this.fold_(cn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Yn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,cn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if($t(e))return null;{const a=jt(e),c=this.children.get(a);return c?c.findOnPath_(Tn(e),Yn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,cn(),t)}foreachOnPath_(e,t,r){if($t(e))return this;{this.value&&r(t,this.value);const i=jt(e),a=this.children.get(i);return a?a.foreachOnPath_(Tn(e),Yn(t,i),r):new Rn(null)}}foreach(e){this.foreach_(cn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Yn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class fa{constructor(e){this.writeTree_=e}static empty(){return new fa(new Rn(null))}}function XE(n,e,t){if($t(e))return new fa(new Rn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=as(i,e);return a=a.updateChild(c,t),new fa(n.writeTree_.set(i,a))}{const i=new Rn(t),a=n.writeTree_.setTree(e,i);return new fa(a)}}}function O4(n,e,t){let r=n;return hi(t,(i,a)=>{r=XE(r,Yn(e,i),a)}),r}function G9(n,e){if($t(e))return fa.empty();{const t=n.writeTree_.setTree(e,new Rn(null));return new fa(t)}}function N4(n,e){return null!=Rp(n,e)}function Rp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(as(t.path,e)):null}function W9(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Nn,(r,i)=>{e.push(new zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new zt(r,i.value))}),e}function jd(n,e){if($t(e))return n;{const t=Rp(n,e);return new fa(null!=t?new Rn(t):n.writeTree_.subtree(e))}}function R4(n){return n.writeTree_.isEmpty()}function uy(n,e){return q9(cn(),n.writeTree_,e)}function q9(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,$.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=q9(Yn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Yn(n,".priority"),r)),t}}function NM(n,e){return J9(e,n)}function pee(n,e){if(n.snap)return Bo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Bo(Yn(n.path,t),e))return!0;return!1}function mee(n){return n.visible}function Z9(n,e,t){let r=fa.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let f;if(a.snap)Bo(t,c)?(f=as(t,c),r=XE(r,f,a.snap)):Bo(c,t)&&(f=as(c,t),r=XE(r,cn(),a.snap.getChild(f)));else{if(!a.children)throw(0,$.g5)("WriteRecord should have .snap or .children");if(Bo(t,c))f=as(t,c),r=O4(r,f,a.children);else if(Bo(c,t))if(f=as(c,t),$t(f))r=O4(r,cn(),a.children);else{const g=(0,$.DV)(a.children,jt(f));if(g){const v=g.getChild(Tn(f));r=XE(r,cn(),v)}}}}}return r}function K9(n,e,t,r,i){if(r||i){const a=jd(n.visibleWrites,e);return!i&&R4(a)?t:i||null!=t||N4(a,cn())?uy(Z9(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Bo(v.path,e)||Bo(e,v.path))},e),t||Pt.EMPTY_NODE):null}{const a=Rp(n.visibleWrites,e);if(null!=a)return a;{const c=jd(n.visibleWrites,e);return R4(c)?t:null!=t||N4(c,cn())?uy(c,t||Pt.EMPTY_NODE):null}}}function RM(n,e,t,r){return K9(n.writeTree,n.treePath,e,t,r)}function k4(n,e){return function _ee(n,e,t){let r=Pt.EMPTY_NODE;const i=Rp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Nn,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=jd(n.visibleWrites,e);return t.forEachChild(Nn,(c,f)=>{const g=uy(jd(a,new gn(c)),f);r=r.updateImmediateChild(c,g)}),W9(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return W9(jd(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function Y9(n,e,t,r){return function yee(n,e,t,r,i){(0,$.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Yn(e,t);if(N4(n.visibleWrites,a))return null;{const c=jd(n.visibleWrites,a);return R4(c)?i.getChild(t):uy(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function kM(n,e){return function wee(n,e){return Rp(n.visibleWrites,e)}(n.writeTree,Yn(n.treePath,e))}function F4(n,e,t){return function vee(n,e,t,r){const i=Yn(e,t),a=Rp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?uy(jd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Q9(n,e){return J9(Yn(n.treePath,e),n.writeTree)}function J9(n,e){return{treePath:n,writeTree:e}}class bee{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,$.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,$.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,ZE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function qE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function sy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,$.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ZE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const X9=new class Tee{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class L4{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Bd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return F4(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Np(this.viewCache_),a=function Iee(n,e,t,r,i,a){return function Cee(n,e,t,r,i,a,c){let f;const g=jd(n.visibleWrites,e),v=Rp(g,cn());if(null!=v)f=v;else{if(null==t)return[];f=uy(g,t)}if(f=f.withIndex(c),f.isEmpty()||f.isLeafNode())return[];{const b=[],T=c.getCompare(),A=a?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let R=A.getNext();for(;R&&b.length<i;)0!==T(R,r)&&b.push(R),R=A.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function e8(n,e,t,r,i,a){const c=e.eventCache;if(null!=kM(r,t))return e;{let f,g;if($t(t))if((0,$.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Np(e),T=k4(r,v instanceof Pt?v:Pt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const v=RM(r,Np(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=jt(t);if(".priority"===v){(0,$.hu)(1===Vd(t),"Can't have a priority with additional path components");const b=c.getNode();g=e.serverCache.getNode();const T=Y9(r,t,b,g);f=null!=T?n.filter.updatePriority(b,T):c.getNode()}else{const b=Tn(t);let T;if(c.isCompleteForChild(v)){g=e.serverCache.getNode();const A=Y9(r,t,c.getNode(),g);T=null!=A?c.getNode().getImmediateChild(v).updateChild(b,A):c.getNode().getImmediateChild(v)}else T=F4(r,v,e.serverCache);f=null!=T?n.filter.updateChild(c.getNode(),v,T,b,i,a):c.getNode()}}return JE(e,f,c.isFullyInitialized()||$t(t),n.filter.filtersNodes())}}function FM(n,e,t,r,i,a,c,f){const g=e.serverCache;let v;const b=c?n.filter:n.filter.getIndexedFilter();if($t(t))v=b.updateFullNode(g.getNode(),r,null);else if(b.filtersNodes()&&!g.isFiltered()){const R=g.getNode().updateChild(t,r);v=b.updateFullNode(g.getNode(),R,null)}else{const R=jt(t);if(!g.isCompleteForPath(t)&&Vd(t)>1)return e;const W=Tn(t),J=g.getNode().getImmediateChild(R).updateChild(W,r);v=".priority"===R?b.updatePriority(g.getNode(),J):b.updateChild(g.getNode(),R,J,W,X9,null)}const T=z9(e,v,g.isFullyInitialized()||$t(t),b.filtersNodes());return e8(n,T,t,i,new L4(i,T,a),f)}function U4(n,e,t,r,i,a,c){const f=e.eventCache;let g,v;const b=new L4(i,e,a);if($t(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,c),g=JE(e,v,!0,n.filter.filtersNodes());else{const T=jt(t);if(".priority"===T)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=JE(e,v,f.isFullyInitialized(),f.isFiltered());else{const A=Tn(t),R=f.getNode().getImmediateChild(T);let W;if($t(A))W=r;else{const Q=b.getCompleteChild(T);W=null!=Q?".priority"===p4(A)&&Q.getChild(x9(A)).isEmpty()?Q:Q.updateChild(A,r):Pt.EMPTY_NODE}g=R.equals(W)?e:JE(e,n.filter.updateChild(f.getNode(),T,W,A,b,c),f.isFullyInitialized(),n.filter.filtersNodes())}}return g}function t8(n,e){return n.eventCache.isCompleteForChild(e)}function n8(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function V4(n,e,t,r,i,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=$t(t)?r:new Rn(null).setTree(t,r);const b=e.serverCache.getNode();return v.children.inorderTraversal((T,A)=>{if(b.hasChild(T)){const W=n8(0,e.serverCache.getNode().getImmediateChild(T),A);g=FM(n,g,new gn(T),W,i,a,c,f)}}),v.children.inorderTraversal((T,A)=>{const R=!e.serverCache.isCompleteForChild(T)&&null===A.value;if(!b.hasChild(T)&&!R){const Q=n8(0,e.serverCache.getNode().getImmediateChild(T),A);g=FM(n,g,new gn(T),Q,i,a,c,f)}}),g}function Lee(n,e){const t=Np(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$t(e)&&!t.getImmediateChild(jt(e)).isEmpty())?t.getChild(e):null}function s8(n,e,t,r){e.type===hu.MERGE&&null!==e.source.queryId&&((0,$.hu)(Np(n.viewCache_),"We should always have a full cache before handling merges"),(0,$.hu)(OM(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Aee(n,e,t,r,i){const a=new bee;let c,f;if(t.type===hu.OVERWRITE){const v=t;v.source.fromUser?c=U4(n,e,v.path,v.snap,r,i,a):((0,$.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!$t(v.path),c=FM(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===hu.MERGE){const v=t;v.source.fromUser?c=function xee(n,e,t,r,i,a,c){let f=e;return r.foreach((g,v)=>{const b=Yn(t,g);t8(e,jt(b))&&(f=U4(n,f,b,v,i,a,c))}),r.foreach((g,v)=>{const b=Yn(t,g);t8(e,jt(b))||(f=U4(n,f,b,v,i,a,c))}),f}(n,e,v.path,v.children,r,i,a):((0,$.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),c=V4(n,e,v.path,v.children,r,i,f,a))}else if(t.type===hu.ACK_USER_WRITE){const v=t;c=v.revert?function Nee(n,e,t,r,i,a){let c;if(null!=kM(r,t))return e;{const f=new L4(r,e,i),g=e.eventCache.getNode();let v;if($t(t)||".priority"===jt(t)){let b;if(e.serverCache.isFullyInitialized())b=RM(r,Np(e));else{const T=e.serverCache.getNode();(0,$.hu)(T instanceof Pt,"serverChildren would be complete if leaf node"),b=k4(r,T)}v=n.filter.updateFullNode(g,b,a)}else{const b=jt(t);let T=F4(r,b,e.serverCache);null==T&&e.serverCache.isCompleteForChild(b)&&(T=g.getImmediateChild(b)),v=null!=T?n.filter.updateChild(g,b,T,Tn(t),f,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(g,b,Pt.EMPTY_NODE,Tn(t),f,a):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=RM(r,Np(e)),c.isLeafNode()&&(v=n.filter.updateFullNode(v,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=kM(r,cn()),JE(e,v,c,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function Pee(n,e,t,r,i,a,c){if(null!=kM(i,t))return e;const f=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if($t(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return FM(n,e,t,g.getNode().getChild(t),i,a,f,c);if($t(t)){let v=new Rn(null);return g.getNode().forEachChild(du,(b,T)=>{v=v.set(new gn(b),T)}),V4(n,e,t,v,i,a,f,c)}return e}{let v=new Rn(null);return r.foreach((b,T)=>{const A=Yn(t,b);g.isCompleteForPath(A)&&(v=v.set(b,g.getNode().getChild(A)))}),V4(n,e,t,v,i,a,f,c)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==hu.LISTEN_COMPLETE)throw(0,$.g5)("Unknown operation type: "+t.type);c=function Oee(n,e,t,r,i){const a=e.serverCache;return e8(n,z9(e,a.getNode(),a.isFullyInitialized()||$t(t),a.isFiltered()),t,r,X9,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function Mee(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=OM(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function B9(n){return{type:"value",snapshotNode:n}}(OM(e)))}}(e,c,g),{viewCache:c,changes:g}}(n.processor_,i,e,t,r);return function See(n,e){(0,$.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,$.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,$.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function o8(n,e,t,r){return function oee(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function WX(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),QE(n,i,"child_removed",e,r,t),QE(n,i,"child_added",e,r,t),QE(n,i,"child_moved",a,r,t),QE(n,i,"child_changed",e,r,t),QE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let LM,VM;function B4(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,$.hu)(null!=a,"SyncTree gave us an op for an invalid query."),s8(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(s8(c,e,t,r));return a}}function $d(n,e){let t=null;for(const r of n.views.values())t=t||Lee(r,e);return t}class h8{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Rn(null),this.pendingWriteTree_=function Eee(){return{visibleWrites:fa.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function j4(n,e,t,r,i){return function lee(n,e,t,r,i){(0,$.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=XE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?cy(n,new Op({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function zd(n,e,t=!1){const r=function hee(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function fee(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,$.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=t&&pee(f,r.path)?i=!1:Bo(r.path,f.path)&&(a=!0)),c--}return!!i&&(a?(function gee(n){n.visibleWrites=Z9(n.allWrites,mee,cn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=G9(n.visibleWrites,r.path):hi(r.children,g=>{n.visibleWrites=G9(n.visibleWrites,Yn(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new Rn(null);return null!=r.snap?a=a.set(cn(),!0):hi(r.children,c=>{a=a.set(new gn(c),!0)}),cy(n,new xM(r.path,a,t))}return[]}function eI(n,e,t){return cy(n,new Op({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function jM(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,f)=>{const v=$d(f,as(c,e));if(v)return v});return K9(i,e,a,t,!0)}function cy(n,e){return p8(e,n.syncPointTree_,null,NM(n.pendingWriteTree_,cn()))}function p8(n,e,t,r){if($t(n.path))return g8(n,e,t,r);{const i=e.get(cn());null==t&&null!=i&&(t=$d(i,cn()));let a=[];const c=jt(n.path),f=n.operationForChild(c),g=e.children.get(c);if(g&&f){const v=t?t.getImmediateChild(c):null,b=Q9(r,c);a=a.concat(p8(f,g,v,b))}return i&&(a=a.concat(B4(i,n,r,t))),a}}function g8(n,e,t,r){const i=e.get(cn());null==t&&null!=i&&(t=$d(i,cn()));let a=[];return e.children.inorderTraversal((c,f)=>{const g=t?t.getImmediateChild(c):null,v=Q9(r,c),b=n.operationForChild(c);b&&(a=a.concat(g8(b,f,g,v)))}),i&&(a=a.concat(B4(i,n,r,t))),a}function H4(n,e){return n.tagToQueryMap.get(e)}function z4(n){const e=n.indexOf("$");return(0,$.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new gn(n.substr(0,e))}}function G4(n,e,t){const r=n.syncPointTree_.get(e);return(0,$.hu)(r,"Missing sync point for query tag that we're tracking"),B4(r,t,NM(n.pendingWriteTree_,e),null)}class W4{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new W4(t)}node(){return this.node_}}class q4{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Yn(this.path_,e);return new q4(this.syncTree_,t)}node(){return jM(this.syncTree_,this.path_)}}const ite=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},_8=function(n,e,t){return n&&"object"==typeof n?((0,$.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?ste(n[".sv"],e,t):"object"==typeof n[".sv"]?ote(n[".sv"],e):void(0,$.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},ste=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,$.hu)(!1,"Unexpected server value: "+n)},ote=function(n,e,t){n.hasOwnProperty("increment")||(0,$.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,$.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,$.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},y8=function(n,e,t,r){return K4(e,new q4(t,n),r)},Z4=function(n,e,t){return K4(n,new W4(e),t)};function K4(n,e,t){const r=n.getPriority().val(),i=_8(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,f=_8(c.getValue(),e,t);return f!==c.getValue()||i!==c.getPriority().val()?new ry(f,ir(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new ry(i))),c.forEachChild(Nn,(f,g)=>{const v=K4(g,e.getImmediateChild(f),t);v!==g&&(a=a.updateImmediateChild(f,v))}),a}}class Y4{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function HM(n,e){let t=e instanceof gn?e:new gn(e),r=n,i=jt(t);for(;null!==i;){const a=(0,$.DV)(r.node.children,i)||{children:{},childCount:0};r=new Y4(i,r,a),t=Tn(t),i=jt(t)}return r}function kp(n){return n.node.value}function Q4(n,e){n.node.value=e,J4(n)}function v8(n){return n.node.childCount>0}function zM(n,e){hi(n.node.children,(t,r)=>{e(new Y4(t,n,r))})}function w8(n,e,t,r){t&&!r&&e(n),zM(n,i=>{w8(i,e,!0,r)}),t&&r&&e(n)}function rI(n){return new gn(null===n.parent?n.name:rI(n.parent)+"/"+n.name)}function J4(n){null!==n.parent&&function cte(n,e,t){const r=function ate(n){return void 0===kp(n)&&!v8(n)}(t),i=(0,$.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,J4(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,J4(n))}(n.parent,n.name,n)}const lte=/[\[\].#$\/\u0000-\u001F\u007F]/,dte=/[\[\].#$\u0000-\u001F\u007F]/,X4=10485760,GM=function(n){return"string"==typeof n&&0!==n.length&&!lte.test(n)},sI=function(n,e,t){const r=t instanceof gn?new AX(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+xp(r));if("function"==typeof e)throw new Error(n+"contains a function "+xp(r)+" with contents = "+e.toString());if(vM(e))throw new Error(n+"contains "+e.toString()+" "+xp(r));if("string"==typeof e&&e.length>X4/3&&(0,$.ug)(e)>X4)throw new Error(n+"contains a string greater than "+X4+" utf8 bytes "+xp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(hi(e,(c,f)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!GM(c)))throw new Error(n+" contains an invalid key ("+c+") "+xp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function MX(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,$.ug)(e),P9(n)})(r,c),sI(n,f,r),function xX(n){const e=n.parts_.pop();n.byteLength_-=(0,$.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+xp(r)+" in addition to actual children.")}},I8=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!GM(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!dte.test(n)}(n)}(t))throw new Error((0,$.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class gte{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ro(n,e,t){(function WM(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!g4(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function T8(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(mte(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Bo(r,e)||Bo(e,r))}function mte(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ap&&di("event: "+t.toString()),ty(r)}}}const _te=25;class yte{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gte,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=MM(),this.transactionQueueTree_=new Y4,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function S8(n){const t=n.infoData_.getNode(new gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function aI(n){return ite({timestamp:S8(n)})}function A8(n,e,t,r,i){n.dataUpdateCount++;const a=new gn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const g=(0,$.UI)(t,v=>ir(v));c=function Jee(n,e,t,r){const i=H4(n,r);if(i){const a=z4(i),c=a.path,f=a.queryId,g=as(c,e),v=Rn.fromObject(t);return G4(n,c,new ay(x4(f),g,v))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=ir(t);c=function f8(n,e,t,r){const i=H4(n,r);if(null!=i){const a=z4(i),c=a.path,f=a.queryId,g=as(c,e);return G4(n,c,new Op(x4(f),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,$.UI)(t,v=>ir(v));c=function Kee(n,e,t){const r=Rn.fromObject(t);return cy(n,new ay({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=ir(t);c=eI(n.serverSyncTree_,a,g)}let f=a;c.length>0&&(f=dy(n,a)),ro(n.eventQueue_,f,c)}function M8(n,e){nU(n,"connected",e),!1===e&&function Ite(n){ly(n,"onDisconnectEvents");const e=aI(n),t=MM();S4(n.onDisconnect_,cn(),(i,a)=>{const c=y8(i,a,n.serverSyncTree_,e);oy(t,i,c)});let r=[];S4(t,cn(),(i,a)=>{r=r.concat(eI(n.serverSyncTree_,i,a));const c=function oU(n,e){const t=rI(O8(n,e)),r=HM(n.transactionQueueTree_,e);return function ute(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{aU(n,i)}),aU(n,r),w8(r,i=>{aU(n,i)}),t}(n,i);dy(n,c)}),n.onDisconnect_=MM(),ro(n.eventQueue_,cn(),r)}(n)}function nU(n,e,t){const r=new gn("/.info/"+e),i=ir(t);n.infoData_.updateSnapshot(r,i);const a=eI(n.infoSyncTree_,r,i);ro(n.eventQueue_,r,a)}function qM(n){return n.nextWriteId_++}function ly(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),di(t,...e)}function sU(n,e,t){return jM(n.serverSyncTree_,e,t)||Pt.EMPTY_NODE}function ZM(n,e=n.transactionQueueTree_){if(e||KM(n,e),kp(e)){const t=N8(n,e);(0,$.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function xte(n,e,t){const r=t.map(v=>v.currentWriteId),i=sU(n,e,r);let a=i;const c=i.hash();for(let v=0;v<t.length;v++){const b=t[v];(0,$.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const T=as(e,b.path);a=a.updateChild(T,b.currentOutputSnapshotRaw)}const f=a.val(!0),g=e;n.server_.put(g.toString(),f,v=>{ly(n,"transaction put response",{path:g.toString(),status:v});let b=[];if("ok"===v){const T=[];for(let A=0;A<t.length;A++)t[A].status=2,b=b.concat(zd(n.serverSyncTree_,t[A].currentWriteId)),t[A].onComplete&&T.push(()=>t[A].onComplete(null,!0,t[A].currentOutputSnapshotResolved)),t[A].unwatcher();KM(n,HM(n.transactionQueueTree_,e)),ZM(n,n.transactionQueueTree_),ro(n.eventQueue_,e,b);for(let A=0;A<T.length;A++)ty(T[A])}else{if("datastale"===v)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Gi("transaction at "+g.toString()+" failed: "+v);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=v}dy(n,e)}},c)}(n,rI(e),t)}else v8(e)&&zM(e,t=>{ZM(n,t)})}function dy(n,e){const t=O8(n,e),r=rI(t);return function Pte(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const g=e[f],v=as(t,g.path);let T,b=!1;if((0,$.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)b=!0,T=g.abortReason,i=i.concat(zd(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=_te)b=!0,T="maxretry",i=i.concat(zd(n.serverSyncTree_,g.currentWriteId,!0));else{const A=sU(n,g.path,c);g.currentInputSnapshot=A;const R=e[f].update(A.val());if(void 0!==R){sI("transaction failed: Data returned ",R,g.path);let W=ir(R);"object"==typeof R&&null!=R&&(0,$.r3)(R,".priority")||(W=W.updatePriority(A.getPriority()));const J=g.currentWriteId,be=aI(n),Ge=Z4(W,A,be);g.currentOutputSnapshotRaw=W,g.currentOutputSnapshotResolved=Ge,g.currentWriteId=qM(n),c.splice(c.indexOf(J),1),i=i.concat(j4(n.serverSyncTree_,g.path,Ge,g.currentWriteId,g.applyLocally)),i=i.concat(zd(n.serverSyncTree_,J,!0))}else b=!0,T="nodata",i=i.concat(zd(n.serverSyncTree_,g.currentWriteId,!0))}ro(n.eventQueue_,t,i),i=[],b&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===T?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(T),!1,null)))}KM(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)ty(r[f]);ZM(n,n.transactionQueueTree_)}(n,N8(n,t),r),r}function O8(n,e){let t,r=n.transactionQueueTree_;for(t=jt(e);null!==t&&void 0===kp(r);)r=HM(r,t),t=jt(e=Tn(e));return r}function N8(n,e){const t=[];return R8(n,e,t),t.sort((r,i)=>r.order-i.order),t}function R8(n,e,t){const r=kp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);zM(e,i=>{R8(n,i,t)})}function KM(n,e){const t=kp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Q4(e,t.length>0?t:void 0)}zM(e,r=>{KM(n,r)})}function aU(n,e){const t=kp(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,$.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,$.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(zd(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Q4(e,void 0):t.length=a+1,ro(n.eventQueue_,rI(e),i);for(let c=0;c<r.length;c++)ty(r[c])}}const uU=function(n,e){const t=Rte(n),r=t.namespace;return"firebase.com"===t.domain&&lu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&lu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Gi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new u4(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new gn(t.pathString)}},Rte=function(n){let e="",t="",r="",i="",a="",c=!0,f="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let b=n.indexOf("/");-1===b&&(b=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(b,T)),b<T&&(i=function Ote(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,T)));const A=function Nte(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Gi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));v=e.indexOf(":"),v>=0?(c="https"===f||"wss"===f,g=parseInt(e.substring(v+1),10)):v=e.length;const R=e.slice(0,v);if("localhost"===R.toLowerCase())t="localhost";else if(R.split(".").length<=2)t=R;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),a=r}"ns"in A&&(a=A.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:c,scheme:f,pathString:i,namespace:a}};class io{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return $t(this._path)?null:p4(this._path)}get ref(){return new pa(this._repo,this._path)}get _queryIdentifier(){const e=$9(this._queryParams),t=o4(e);return"{}"===t?"default":t}get _queryObject(){return $9(this._queryParams)}isEqual(e){if(!((e=(0,$.m9)(e))instanceof io))return!1;const t=this._repo===e._repo,r=g4(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function DX(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class pa extends io{constructor(e,t){super(e,t,new I4,!1)}get parent(){const e=x9(this._path);return null===e?null:new pa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function Bee(n){(0,$.hu)(!LM,"__referenceConstructor has already been defined"),LM=n})(pa),function Gee(n){(0,$.hu)(!VM,"__referenceConstructor has already been defined"),VM=n}(pa);const lU={};class ene{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function vte(n,e,t){if(n.stats_=d4(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new AM(n.repoInfo_,(r,i,a,c)=>{A8(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>M8(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,$.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Pp(n.repoInfo_,e,(r,i,a,c)=>{A8(n,r,i,a,c)},r=>{M8(n,r)},r=>{!function wte(n,e){hi(e,(t,r)=>{nU(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function iX(n,e){const t=n.toString();return l4[t]||(l4[t]=e()),l4[t]}(n.repoInfo_,()=>new iee(n.stats_,n.server_)),n.infoData_=new XX,n.infoSyncTree_=new h8({startListening:(r,i,a,c)=>{let f=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(f=eI(n.infoSyncTree_,r._path,g),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),nU(n,"connected",!1),n.serverSyncTree_=new h8({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(f,g)=>{const v=c(f,g);ro(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pa(this._repo,cn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Qte(n,e){const t=lU[e];(!t||t[n.key]!==n)&&lu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function P8(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&lu("Cannot call "+e+" on a deleted database.")}}function tne(n=(0,on.getApp)(),e){const t=(0,on._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,$.P0)("database");r&&function nne(n,e,t,r={}){(n=(0,$.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&lu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&lu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new $E($E.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,$.Sg)(r.mockUserToken,n.app.options.projectId);a=new $E(c)}!function Kte(n,e,t,r){n.repoInfo_=new u4(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r)}return t}Pp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Pp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function rne(n){(function jJ(n){r4=n})(on.SDK_VERSION),(0,on._registerComponent)(new lr.wA("database",(e,{instanceIdentifier:t})=>function Yte(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||lu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),di("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,c=uU(a,i),f=c.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,a=`http://${v}?ns=${f.namespace}`,c=uU(a,i),f=c.repoInfo):g=!c.repoInfo.secure;const b=i&&g?new $E($E.OWNER):new tX(n.name,n.options,e);I8("Invalid Firebase Database URL",c),$t(c.path)||lu("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function Jte(n,e,t,r){let i=lU[e.name];i||(i={},lU[e.name]=i);let a=i[n.toURLString()];return a&&lu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new yte(n,!1,t,r),i[n.toURLString()]=a,a}(f,n,b,new eX(n.name,t));return new ene(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,on.registerVersion)(W7,"0.14.4",n),(0,on.registerVersion)(W7,"0.14.4","esm2017")}();class dU{constructor(e){return e}}const H8="database",hU=new d.OlP("angularfire2.database-instances");function une(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new dU(r)}}const cne={provide:class one{constructor(){return ua(H8)}},deps:[[new d.FiY,hU]]},lne={provide:dU,useFactory:function ane(n,e){const t=Ka(H8,n,e);return t&&new dU(t)},deps:[[new d.FiY,hU],ou]};let dne=(()=>{class n{constructor(){(0,on.registerVersion)("angularfire",yc.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[lne,cne]}),n})();function hne(n,...e){return{ngModule:dne,providers:[{provide:hU,useFactory:une(n),multi:!0,deps:[d.R0b,d.zs3,Xs,Ep,[new d.FiY,LE],[new d.FiY,Pd],...e]}]}}const fne=vc(tne,!0),pU="functions";class yne{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return(0,z.Z)(function*(){if(e.auth)try{const t=yield e.auth.getToken();return t?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return(0,z.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(e){var t=this;return(0,z.Z)(function*(){if(t.appCheck){const r=e?yield t.appCheck.getLimitedUseToken():yield t.appCheck.getToken();return r.error?null:r.token}return null})()}getContext(e){var t=this;return(0,z.Z)(function*(){return{authToken:yield t.getAuthToken(),messagingToken:yield t.getMessagingToken(),appCheckToken:yield t.getAppCheckToken(e)}})()}}const gU="us-central1";class wne{constructor(e,t,r,i,a=gU,c){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new yne(t,r,i),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(a);this.customDomain=f.origin,this.region=gU}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const q8="@firebase/functions";function xne(n=F0(),e=gU){const r=cc((0,$.m9)(n),pU).getImmediate({identifier:e}),i=(0,$.P0)("functions");return i&&function Pne(n,e,t){!function Cne(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}((0,$.m9)(n),e,t)}(r,...i),r}!function Mne(n,e){wi(new lr.wA(pU,(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),c=r.getProvider("auth-internal"),f=r.getProvider("messaging-internal"),g=r.getProvider("app-check-internal");return new wne(a,c,f,g,i,n)},"PUBLIC").setMultipleInstances(!0)),oi(q8,"0.10.0",e),oi(q8,"0.10.0","esm2017")}(fetch.bind(self));class yU{constructor(e){return e}}const K8="functions",vU=new d.OlP("angularfire2.functions-instances");function Rne(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new yU(r)}}const kne={provide:class One{constructor(){return ua(K8)}},deps:[[new d.FiY,vU]]},Fne={provide:yU,useFactory:function Nne(n,e){const t=Ka(K8,n,e);return t&&new yU(t)},deps:[[new d.FiY,vU],ou]};let Lne=(()=>{class n{constructor(){(0,on.registerVersion)("angularfire",yc.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Fne,kne]}),n})();function Une(n,...e){return{ngModule:Lne,providers:[{provide:vU,useFactory:Rne(n),multi:!0,deps:[d.R0b,d.zs3,Xs,Ep,[new d.FiY,LE],[new d.FiY,Pd],...e]}]}}const Vne=vc(xne,!0);class wU{constructor(e){return e}}const Y8="messaging",CU=new d.OlP("angularfire2.messaging-instances");function $ne(n){return(e,t)=>{if(!a_.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new wU(r)}}const Hne={provide:class Bne{constructor(){return ua(Y8)}},deps:[[new d.FiY,CU]]},zne={provide:wU,useFactory:function jne(n,e){if(!a_.sync())return null;const t=Ka(Y8,n,e);return t&&new wU(t)},deps:[[new d.FiY,CU],ou]};let Gne=(()=>{class n{constructor(){(0,on.registerVersion)("angularfire",yc.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[zne,Hne,{provide:d.ip1,useValue:a_.async,multi:!0}]}),n})();function Wne(n,...e){return{ngModule:Gne,providers:[{provide:CU,useFactory:$ne(n),multi:!0,deps:[d.R0b,d.zs3,Xs,Ep,...e]}]}}const qne=vc(q3,!0),Q8="firebasestorage.googleapis.com";class sr extends $.ZR{constructor(e,t,r=0){super(EU(e),`Firebase Storage: ${t} (${EU(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,sr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return EU(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Qn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Qn||{});function EU(n){return"storage/"+n}function bU(n){return new sr(Qn.INVALID_ARGUMENT,n)}function nH(){return new sr(Qn.APP_DELETED,"The Firebase app was deleted.")}class us{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=us.makeFromUrl(e,t)}catch{return new us(e,"")}if(""===r.path)return r;throw function rre(n){return new sr(Qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Ye){Ye.path_=decodeURIComponent(Ye.path)}const T=t.replace(/[.]/g,"\\."),ke=[{regex:f,indices:{bucket:1,path:3},postModify:function a(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===Q8?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Ye=0;Ye<ke.length;Ye++){const mt=ke[Ye],At=mt.regex.exec(e);if(At){let Ss=At[mt.indices.path];Ss||(Ss=""),r=new us(At[mt.indices.bucket],Ss),mt.postModify(r);break}}if(null==r)throw function nre(n){return new sr(Qn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class cre{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function DU(n,e,t,r){if(r<e)throw bU(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw bU(`Invalid value for '${n}'. Expected ${t} or less.`)}var py=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(py||{});class gre{constructor(e,t,r,i,a,c,f,g,v,b,T,A=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=b,this.connectionFactory_=T,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,W)=>{this.resolve_=R,this.reject_=W,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());!function hre(n){return void 0!==n}(g)?a():a(g)}catch(g){c(g)}else if(null!==f){const g=function IU(){return new sr(Qn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();g.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,g):g)}else c(i.canceled?this.appDelete_?nH():function eH(){return new sr(Qn.CANCELED,"User canceled the upload/download.")}():function X8(){return new sr(Qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new tx(!1,null,!0)):this.backoffId_=function lre(n,e,t){let r=1,i=null,a=null,c=!1,f=0;function g(){return 2===f}let v=!1;function b(...J){v||(v=!0,e.apply(null,J))}function T(J){i=setTimeout(()=>{i=null,n(R,g())},J)}function A(){a&&clearTimeout(a)}function R(J,...be){if(v)return void A();if(J)return A(),void b.call(null,J,...be);if(g()||c)return A(),void b.call(null,J,...be);let ke;r<64&&(r*=2),1===f?(f=2,ke=0):ke=1e3*(r+Math.random()),T(ke)}let W=!1;function Q(J){W||(W=!0,A(),!v&&(null!==i?(J||(f=2),clearTimeout(i),T(0)):J||(f=1)))}return T(0),a=setTimeout(()=>{c=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new tx(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const f=a.getErrorCode()===py.NO_ERROR,g=a.getStatus();if(!f||function sH(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}(g,this.additionalRetryCodes_)&&this.retry){const b=a.getErrorCode()===py.ABORT;return void r(!1,new tx(!1,null,b))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new tx(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function dre(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class tx{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Lp{constructor(e,t){this._service=e,this._location=t instanceof us?t:us.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lp(e,t)}get root(){const e=new us(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function lH(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function Mre(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new us(this._location.bucket,e);return new Lp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function ure(n){return new sr(Qn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function TH(n,e){const t=e?.storageBucket;return null==t?null:us.makeFromBucketSpec(t,n)}class NU{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Q8,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?us.makeFromBucketSpec(i,this._host):TH(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?us.makeFromBucketSpec(this._url,e):TH(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DU("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DU("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,z.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,z.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lp(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new cre(nH());{const c=function wre(n,e,t,r,i,a,c=!0){const f=function iH(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),g=n.url+f,v=Object.assign({},n.headers);return function yre(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function mre(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function _re(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function vre(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new gre(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,z.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const DH="@firebase/storage",AH="storage";function pie(n=F0(),e){const r=cc(n=(0,$.m9)(n),AH).getImmediate({identifier:e}),i=(0,$.P0)("storage");return i&&function gie(n,e,t,r={}){!function fie(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,$.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function mie(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new NU(t,r,i,e,"10.5.0")}!function _ie(){wi(new lr.wA(AH,mie,"PUBLIC").setMultipleInstances(!0)),oi(DH,"0.11.2",""),oi(DH,"0.11.2","esm2017")}();class RU{constructor(e){return e}}const MH="storage",kU=new d.OlP("angularfire2.storage-instances");function wie(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new RU(r)}}const Cie={provide:class yie{constructor(){return ua(MH)}},deps:[[new d.FiY,kU]]},Eie={provide:RU,useFactory:function vie(n,e){const t=Ka(MH,n,e);return t&&new RU(t)},deps:[[new d.FiY,kU],ou]};let Iie=(()=>{class n{constructor(){(0,on.registerVersion)("angularfire",yc.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Eie,Cie]}),n})();function bie(n,...e){return{ngModule:Iie,providers:[{provide:kU,useFactory:wie(n),multi:!0,deps:[d.R0b,d.zs3,Xs,Ep,[new d.FiY,LE],[new d.FiY,Pd],...e]}]}}const Tie=vc(pie,!0);let Die=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n,bootstrap:[KQ]});static#n=this.\u0275inj=d.cJS({providers:[{provide:Es.Dh,useValue:H7.firebaseConfig}],imports:[xu,TQ,wJ,fQ,pQ,ZZ(()=>KZ(H7.firebaseConfig)),PJ(()=>OJ()),VJ(()=>BJ()),hne(()=>fne()),Une(()=>Vne()),Wne(()=>qne()),bie(()=>Tie())]})}return n})();ig().bootstrapModule(Die).catch(n=>console.error(n))},5619:(st,Ce,k)=>{k.d(Ce,{X:()=>V});var d=k(8645);class V extends d.x{constructor(te){super(),this._value=te}get value(){return this.getValue()}_subscribe(te){const ge=super._subscribe(te);return!ge.closed&&te.next(this._value),ge}getValue(){const{hasError:te,thrownError:ge,_value:Ee}=this;if(te)throw ge;return this._throwIfClosed(),Ee}next(te){super.next(this._value=te)}}},5592:(st,Ce,k)=>{k.d(Ce,{y:()=>Fe});var d=k(305),V=k(7394),F=k(4850),te=k(8407),ge=k(2653),Ee=k(4674),Ne=k(1441);let Fe=(()=>{class X{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Je=new X;return Je.source=this,Je.operator=Me,Je}subscribe(Me,Je,ve){const Ae=function G(X){return X&&X instanceof d.Lv||function U(X){return X&&(0,Ee.m)(X.next)&&(0,Ee.m)(X.error)&&(0,Ee.m)(X.complete)}(X)&&(0,V.Nn)(X)}(Me)?Me:new d.Hp(Me,Je,ve);return(0,Ne.x)(()=>{const{operator:Te,source:tt}=this;Ae.add(Te?Te.call(Ae,tt):tt?this._subscribe(Ae):this._trySubscribe(Ae))}),Ae}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Je){Me.error(Je)}}forEach(Me,Je){return new(Je=De(Je))((ve,Ae)=>{const Te=new d.Hp({next:tt=>{try{Me(tt)}catch(at){Ae(at),Te.unsubscribe()}},error:Ae,complete:ve});this.subscribe(Te)})}_subscribe(Me){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(Me)}[F.L](){return this}pipe(...Me){return(0,te.U)(Me)(this)}toPromise(Me){return new(Me=De(Me))((Je,ve)=>{let Ae;this.subscribe(Te=>Ae=Te,Te=>ve(Te),()=>Je(Ae))})}}return X.create=Pe=>new X(Pe),X})();function De(X){var Pe;return null!==(Pe=X??ge.config.Promise)&&void 0!==Pe?Pe:Promise}},8645:(st,Ce,k)=>{k.d(Ce,{x:()=>Ne});var d=k(5592),V=k(7394);const te=(0,k(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=k(9039),Ee=k(1441);let Ne=(()=>{class De extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new Fe(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new te}next(G){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(G)}})}error(G){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:Pe,observers:Me}=this;return X||Pe?V.Lc:(this.currentObservers=null,Me.push(G),new V.w0(()=>{this.currentObservers=null,(0,ge.P)(Me,G)}))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:Pe,isStopped:Me}=this;X?G.error(Pe):Me&&G.complete()}asObservable(){const G=new d.y;return G.source=this,G}}return De.create=(U,G)=>new Fe(U,G),De})();class Fe extends Ne{constructor(U,G){super(),this.destination=U,this.source=G}next(U){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,U)}error(U){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,U)}complete(){var U,G;null===(G=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===G||G.call(U)}_subscribe(U){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(U))&&void 0!==X?X:V.Lc}}},305:(st,Ce,k)=>{k.d(Ce,{Hp:()=>ve,Lv:()=>X});var d=k(4674),V=k(7394),F=k(2653),te=k(3894),ge=k(2420);const Ee=De("C",void 0,void 0);function De(ee,he,re){return{kind:ee,value:he,error:re}}var U=k(7599),G=k(1441);class X extends V.w0{constructor(he){super(),this.isStopped=!1,he?(this.destination=he,(0,V.Nn)(he)&&he.add(this)):this.destination=at}static create(he,re,fe){return new ve(he,re,fe)}next(he){this.isStopped?tt(function Fe(ee){return De("N",ee,void 0)}(he),this):this._next(he)}error(he){this.isStopped?tt(function Ne(ee){return De("E",void 0,ee)}(he),this):(this.isStopped=!0,this._error(he))}complete(){this.isStopped?tt(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(he){this.destination.next(he)}_error(he){try{this.destination.error(he)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pe=Function.prototype.bind;function Me(ee,he){return Pe.call(ee,he)}class Je{constructor(he){this.partialObserver=he}next(he){const{partialObserver:re}=this;if(re.next)try{re.next(he)}catch(fe){Ae(fe)}}error(he){const{partialObserver:re}=this;if(re.error)try{re.error(he)}catch(fe){Ae(fe)}else Ae(he)}complete(){const{partialObserver:he}=this;if(he.complete)try{he.complete()}catch(re){Ae(re)}}}class ve extends X{constructor(he,re,fe){let Re;if(super(),(0,d.m)(he)||!he)Re={next:he??void 0,error:re??void 0,complete:fe??void 0};else{let B;this&&F.config.useDeprecatedNextContext?(B=Object.create(he),B.unsubscribe=()=>this.unsubscribe(),Re={next:he.next&&Me(he.next,B),error:he.error&&Me(he.error,B),complete:he.complete&&Me(he.complete,B)}):Re=he}this.destination=new Je(Re)}}function Ae(ee){F.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(ee):(0,te.h)(ee)}function tt(ee,he){const{onStoppedNotification:re}=F.config;re&&U.z.setTimeout(()=>re(ee,he))}const at={closed:!0,next:ge.Z,error:function Te(ee){throw ee},complete:ge.Z}},7394:(st,Ce,k)=>{k.d(Ce,{Lc:()=>Ee,w0:()=>ge,Nn:()=>Ne});var d=k(4674);const F=(0,k(2306).d)(De=>function(G){De(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,Pe)=>`${Pe+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var te=k(9039);class ge{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Me of G)Me.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,d.m)(X))try{X()}catch(Me){U=Me instanceof F?Me.errors:[Me]}const{_finalizers:Pe}=this;if(Pe){this._finalizers=null;for(const Me of Pe)try{Fe(Me)}catch(Je){U=U??[],Je instanceof F?U=[...U,...Je.errors]:U.push(Je)}}if(U)throw new F(U)}}add(U){var G;if(U&&U!==this)if(this.closed)Fe(U);else{if(U instanceof ge){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(U)}}_hasParent(U){const{_parentage:G}=this;return G===U||Array.isArray(G)&&G.includes(U)}_addParent(U){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(U),G):G?[G,U]:U}_removeParent(U){const{_parentage:G}=this;G===U?this._parentage=null:Array.isArray(G)&&(0,te.P)(G,U)}remove(U){const{_finalizers:G}=this;G&&(0,te.P)(G,U),U instanceof ge&&U._removeParent(this)}}ge.EMPTY=(()=>{const De=new ge;return De.closed=!0,De})();const Ee=ge.EMPTY;function Ne(De){return De instanceof ge||De&&"closed"in De&&(0,d.m)(De.remove)&&(0,d.m)(De.add)&&(0,d.m)(De.unsubscribe)}function Fe(De){(0,d.m)(De)?De():De.unsubscribe()}},2653:(st,Ce,k)=>{k.d(Ce,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(st,Ce,k)=>{k.d(Ce,{E:()=>V});const V=new(k(5592).y)(ge=>ge.complete())},2459:(st,Ce,k)=>{k.d(Ce,{D:()=>he});var d=k(4829),V=k(3093),F=k(5137),Ee=k(5592),Fe=k(4971),De=k(4674),U=k(7103);function X(re,fe){if(!re)throw new Error("Iterable cannot be null");return new Ee.y(Re=>{(0,U.f)(Re,fe,()=>{const B=re[Symbol.asyncIterator]();(0,U.f)(Re,fe,()=>{B.next().then(we=>{we.done?Re.complete():Re.next(we.value)})},0,!0)})})}var Pe=k(8382),Me=k(4026),Je=k(4266),ve=k(3664),Ae=k(5726),Te=k(9853),tt=k(541);function he(re,fe){return fe?function ee(re,fe){if(null!=re){if((0,Pe.c)(re))return function te(re,fe){return(0,d.Xf)(re).pipe((0,F.R)(fe),(0,V.Q)(fe))}(re,fe);if((0,Je.z)(re))return function Ne(re,fe){return new Ee.y(Re=>{let B=0;return fe.schedule(function(){B===re.length?Re.complete():(Re.next(re[B++]),Re.closed||this.schedule())})})}(re,fe);if((0,Me.t)(re))return function ge(re,fe){return(0,d.Xf)(re).pipe((0,F.R)(fe),(0,V.Q)(fe))}(re,fe);if((0,Ae.D)(re))return X(re,fe);if((0,ve.T)(re))return function G(re,fe){return new Ee.y(Re=>{let B;return(0,U.f)(Re,fe,()=>{B=re[Fe.h](),(0,U.f)(Re,fe,()=>{let we,Ue;try{({value:we,done:Ue}=B.next())}catch(ut){return void Re.error(ut)}Ue?Re.complete():Re.next(we)},0,!0)}),()=>(0,De.m)(B?.return)&&B.return()})}(re,fe);if((0,tt.L)(re))return function at(re,fe){return X((0,tt.Q)(re),fe)}(re,fe)}throw(0,Te.z)(re)}(re,fe):(0,d.Xf)(re)}},4829:(st,Ce,k)=>{k.d(Ce,{Xf:()=>Pe});var d=k(7582),V=k(4266),F=k(4026),te=k(5592),ge=k(8382),Ee=k(5726),Ne=k(9853),Fe=k(3664),De=k(541),U=k(4674),G=k(3894),X=k(4850);function Pe(ee){if(ee instanceof te.y)return ee;if(null!=ee){if((0,ge.c)(ee))return function Me(ee){return new te.y(he=>{const re=ee[X.L]();if((0,U.m)(re.subscribe))return re.subscribe(he);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,V.z)(ee))return function Je(ee){return new te.y(he=>{for(let re=0;re<ee.length&&!he.closed;re++)he.next(ee[re]);he.complete()})}(ee);if((0,F.t)(ee))return function ve(ee){return new te.y(he=>{ee.then(re=>{he.closed||(he.next(re),he.complete())},re=>he.error(re)).then(null,G.h)})}(ee);if((0,Ee.D)(ee))return Te(ee);if((0,Fe.T)(ee))return function Ae(ee){return new te.y(he=>{for(const re of ee)if(he.next(re),he.closed)return;he.complete()})}(ee);if((0,De.L)(ee))return function tt(ee){return Te((0,De.Q)(ee))}(ee)}throw(0,Ne.z)(ee)}function Te(ee){return new te.y(he=>{(function at(ee,he){var re,fe,Re,B;return(0,d.mG)(this,void 0,void 0,function*(){try{for(re=(0,d.KL)(ee);!(fe=yield re.next()).done;)if(he.next(fe.value),he.closed)return}catch(we){Re={error:we}}finally{try{fe&&!fe.done&&(B=re.return)&&(yield B.call(re))}finally{if(Re)throw Re.error}}he.complete()})})(ee,he).catch(re=>he.error(re))})}},3019:(st,Ce,k)=>{k.d(Ce,{T:()=>Ee});var d=k(7537),V=k(4829),F=k(6232),te=k(9940),ge=k(2459);function Ee(...Ne){const Fe=(0,te.yG)(Ne),De=(0,te._6)(Ne,1/0),U=Ne;return U.length?1===U.length?(0,V.Xf)(U[0]):(0,d.J)(De)((0,ge.D)(U,Fe)):F.E}},2096:(st,Ce,k)=>{k.d(Ce,{of:()=>F});var d=k(9940),V=k(2459);function F(...te){const ge=(0,d.yG)(te);return(0,V.D)(te,ge)}},8251:(st,Ce,k)=>{k.d(Ce,{x:()=>V});var d=k(305);function V(te,ge,Ee,Ne,Fe){return new F(te,ge,Ee,Ne,Fe)}class F extends d.Lv{constructor(ge,Ee,Ne,Fe,De,U){super(ge),this.onFinalize=De,this.shouldUnsubscribe=U,this._next=Ee?function(G){try{Ee(G)}catch(X){ge.error(X)}}:super._next,this._error=Fe?function(G){try{Fe(G)}catch(X){ge.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=Ne?function(){try{Ne()}catch(G){ge.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},3997:(st,Ce,k)=>{k.d(Ce,{x:()=>te});var d=k(2737),V=k(9360),F=k(8251);function te(Ee,Ne=d.y){return Ee=Ee??ge,(0,V.e)((Fe,De)=>{let U,G=!0;Fe.subscribe((0,F.x)(De,X=>{const Pe=Ne(X);(G||!Ee(U,Pe))&&(G=!1,U=Pe,De.next(X))}))})}function ge(Ee,Ne){return Ee===Ne}},7398:(st,Ce,k)=>{k.d(Ce,{U:()=>F});var d=k(9360),V=k(8251);function F(te,ge){return(0,d.e)((Ee,Ne)=>{let Fe=0;Ee.subscribe((0,V.x)(Ne,De=>{Ne.next(te.call(ge,De,Fe++))}))})}},7537:(st,Ce,k)=>{k.d(Ce,{J:()=>F});var d=k(1631),V=k(2737);function F(te=1/0){return(0,d.z)(V.y,te)}},1631:(st,Ce,k)=>{k.d(Ce,{z:()=>Fe});var d=k(7398),V=k(4829),F=k(9360),te=k(7103),ge=k(8251),Ne=k(4674);function Fe(De,U,G=1/0){return(0,Ne.m)(U)?Fe((X,Pe)=>(0,d.U)((Me,Je)=>U(X,Me,Pe,Je))((0,V.Xf)(De(X,Pe))),G):("number"==typeof U&&(G=U),(0,F.e)((X,Pe)=>function Ee(De,U,G,X,Pe,Me,Je,ve){const Ae=[];let Te=0,tt=0,at=!1;const ee=()=>{at&&!Ae.length&&!Te&&U.complete()},he=fe=>Te<X?re(fe):Ae.push(fe),re=fe=>{Me&&U.next(fe),Te++;let Re=!1;(0,V.Xf)(G(fe,tt++)).subscribe((0,ge.x)(U,B=>{Pe?.(B),Me?he(B):U.next(B)},()=>{Re=!0},void 0,()=>{if(Re)try{for(Te--;Ae.length&&Te<X;){const B=Ae.shift();Je?(0,te.f)(U,Je,()=>re(B)):re(B)}ee()}catch(B){U.error(B)}}))};return De.subscribe((0,ge.x)(U,he,()=>{at=!0,ee()})),()=>{ve?.()}}(X,Pe,De,G)))}},3093:(st,Ce,k)=>{k.d(Ce,{Q:()=>te});var d=k(7103),V=k(9360),F=k(8251);function te(ge,Ee=0){return(0,V.e)((Ne,Fe)=>{Ne.subscribe((0,F.x)(Fe,De=>(0,d.f)(Fe,ge,()=>Fe.next(De),Ee),()=>(0,d.f)(Fe,ge,()=>Fe.complete(),Ee),De=>(0,d.f)(Fe,ge,()=>Fe.error(De),Ee)))})}},3020:(st,Ce,k)=>{k.d(Ce,{B:()=>ge});var d=k(4829),V=k(8645),F=k(305),te=k(9360);function ge(Ne={}){const{connector:Fe=(()=>new V.x),resetOnError:De=!0,resetOnComplete:U=!0,resetOnRefCountZero:G=!0}=Ne;return X=>{let Pe,Me,Je,ve=0,Ae=!1,Te=!1;const tt=()=>{Me?.unsubscribe(),Me=void 0},at=()=>{tt(),Pe=Je=void 0,Ae=Te=!1},ee=()=>{const he=Pe;at(),he?.unsubscribe()};return(0,te.e)((he,re)=>{ve++,!Te&&!Ae&&tt();const fe=Je=Je??Fe();re.add(()=>{ve--,0===ve&&!Te&&!Ae&&(Me=Ee(ee,G))}),fe.subscribe(re),!Pe&&ve>0&&(Pe=new F.Hp({next:Re=>fe.next(Re),error:Re=>{Te=!0,tt(),Me=Ee(at,De,Re),fe.error(Re)},complete:()=>{Ae=!0,tt(),Me=Ee(at,U),fe.complete()}}),(0,d.Xf)(he).subscribe(Pe))})(X)}}function Ee(Ne,Fe,...De){if(!0===Fe)return void Ne();if(!1===Fe)return;const U=new F.Hp({next:()=>{U.unsubscribe(),Ne()}});return(0,d.Xf)(Fe(...De)).subscribe(U)}},5137:(st,Ce,k)=>{k.d(Ce,{R:()=>V});var d=k(9360);function V(F,te=0){return(0,d.e)((ge,Ee)=>{Ee.add(F.schedule(()=>ge.subscribe(Ee),te))})}},4664:(st,Ce,k)=>{k.d(Ce,{w:()=>te});var d=k(4829),V=k(9360),F=k(8251);function te(ge,Ee){return(0,V.e)((Ne,Fe)=>{let De=null,U=0,G=!1;const X=()=>G&&!De&&Fe.complete();Ne.subscribe((0,F.x)(Fe,Pe=>{De?.unsubscribe();let Me=0;const Je=U++;(0,d.Xf)(ge(Pe,Je)).subscribe(De=(0,F.x)(Fe,ve=>Fe.next(Ee?Ee(Pe,ve,Je,Me++):ve),()=>{De=null,X()}))},()=>{G=!0,X()}))})}},7599:(st,Ce,k)=>{k.d(Ce,{z:()=>d});const d={setTimeout(V,F,...te){const{delegate:ge}=d;return ge?.setTimeout?ge.setTimeout(V,F,...te):setTimeout(V,F,...te)},clearTimeout(V){const{delegate:F}=d;return(F?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4971:(st,Ce,k)=>{k.d(Ce,{h:()=>V});const V=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(st,Ce,k)=>{k.d(Ce,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(st,Ce,k)=>{k.d(Ce,{_6:()=>Ee,jO:()=>te,yG:()=>ge});var d=k(4674),V=k(671);function F(Ne){return Ne[Ne.length-1]}function te(Ne){return(0,d.m)(F(Ne))?Ne.pop():void 0}function ge(Ne){return(0,V.K)(F(Ne))?Ne.pop():void 0}function Ee(Ne,Fe){return"number"==typeof F(Ne)?Ne.pop():Fe}},9039:(st,Ce,k)=>{function d(V,F){if(V){const te=V.indexOf(F);0<=te&&V.splice(te,1)}}k.d(Ce,{P:()=>d})},2306:(st,Ce,k)=>{function d(V){const te=V(ge=>{Error.call(ge),ge.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}k.d(Ce,{d:()=>d})},1441:(st,Ce,k)=>{k.d(Ce,{O:()=>te,x:()=>F});var d=k(2653);let V=null;function F(ge){if(d.config.useDeprecatedSynchronousErrorHandling){const Ee=!V;if(Ee&&(V={errorThrown:!1,error:null}),ge(),Ee){const{errorThrown:Ne,error:Fe}=V;if(V=null,Ne)throw Fe}}else ge()}function te(ge){d.config.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ge)}},7103:(st,Ce,k)=>{function d(V,F,te,ge=0,Ee=!1){const Ne=F.schedule(function(){te(),Ee?V.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(V.add(Ne),!Ee)return Ne}k.d(Ce,{f:()=>d})},2737:(st,Ce,k)=>{function d(V){return V}k.d(Ce,{y:()=>d})},4266:(st,Ce,k)=>{k.d(Ce,{z:()=>d});const d=V=>V&&"number"==typeof V.length&&"function"!=typeof V},5726:(st,Ce,k)=>{k.d(Ce,{D:()=>V});var d=k(4674);function V(F){return Symbol.asyncIterator&&(0,d.m)(F?.[Symbol.asyncIterator])}},4674:(st,Ce,k)=>{function d(V){return"function"==typeof V}k.d(Ce,{m:()=>d})},8382:(st,Ce,k)=>{k.d(Ce,{c:()=>F});var d=k(4850),V=k(4674);function F(te){return(0,V.m)(te[d.L])}},3664:(st,Ce,k)=>{k.d(Ce,{T:()=>F});var d=k(4971),V=k(4674);function F(te){return(0,V.m)(te?.[d.h])}},4026:(st,Ce,k)=>{k.d(Ce,{t:()=>V});var d=k(4674);function V(F){return(0,d.m)(F?.then)}},541:(st,Ce,k)=>{k.d(Ce,{L:()=>te,Q:()=>F});var d=k(7582),V=k(4674);function F(ge){return(0,d.FC)(this,arguments,function*(){const Ne=ge.getReader();try{for(;;){const{value:Fe,done:De}=yield(0,d.qq)(Ne.read());if(De)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Fe)}}finally{Ne.releaseLock()}})}function te(ge){return(0,V.m)(ge?.getReader)}},671:(st,Ce,k)=>{k.d(Ce,{K:()=>V});var d=k(4674);function V(F){return F&&(0,d.m)(F.schedule)}},9360:(st,Ce,k)=>{k.d(Ce,{A:()=>V,e:()=>F});var d=k(4674);function V(te){return(0,d.m)(te?.lift)}function F(te){return ge=>{if(V(ge))return ge.lift(function(Ee){try{return te(Ee,this)}catch(Ne){this.error(Ne)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(st,Ce,k)=>{function d(){}k.d(Ce,{Z:()=>d})},8407:(st,Ce,k)=>{k.d(Ce,{U:()=>F,z:()=>V});var d=k(2737);function V(...te){return F(te)}function F(te){return 0===te.length?d.y:1===te.length?te[0]:function(Ee){return te.reduce((Ne,Fe)=>Fe(Ne),Ee)}}},3894:(st,Ce,k)=>{k.d(Ce,{h:()=>F});var d=k(2653),V=k(7599);function F(te){V.z.setTimeout(()=>{const{onUnhandledError:ge}=d.config;if(!ge)throw te;ge(te)})}},9853:(st,Ce,k)=>{function d(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>d})},5879:(st,Ce,k)=>{k.d(Ce,{$8M:()=>hl,$WT:()=>va,$Z:()=>Qb,AFp:()=>yb,ALo:()=>Za,AaK:()=>X,AsE:()=>k0,CHM:()=>Ki,CRH:()=>Gm,DdM:()=>QN,Dn7:()=>pS,EJc:()=>SR,EpF:()=>KT,F4k:()=>YT,FYo:()=>bb,FiY:()=>oe,GfV:()=>Xg,Gpc:()=>Je,HDt:()=>ZS,JOm:()=>Lh,KtG:()=>bh,LFG:()=>Be,LSH:()=>ef,Lbi:()=>qg,Lck:()=>GN,MAs:()=>zT,MMx:()=>iS,MR2:()=>Sv,NdJ:()=>I0,O4$:()=>go,Ojb:()=>iP,OlP:()=>un,Oqu:()=>R0,P3R:()=>Kx,PXZ:()=>i1,Q6J:()=>y0,QGY:()=>_m,Qsj:()=>gP,R0b:()=>Or,RDi:()=>QI,Rgc:()=>Jl,SBq:()=>lf,Sil:()=>MR,Suo:()=>zm,TTD:()=>mh,TgZ:()=>gm,Tol:()=>Ha,VKq:()=>JN,VuI:()=>mC,W1O:()=>Zm,X6Q:()=>u1,XFs:()=>ht,Xpm:()=>Vc,Xq5:()=>c0,Xts:()=>Ml,Y36:()=>Ao,YKP:()=>zN,YNc:()=>jT,Yjl:()=>zc,Yz7:()=>pt,Z0I:()=>nn,ZZ4:()=>es,_Bn:()=>Fm,_UZ:()=>w0,_c5:()=>rk,_uU:()=>yD,aQg:()=>Et,c2e:()=>WS,cJS:()=>Dn,cg1:()=>$0,dDg:()=>nC,dqk:()=>Rt,eFA:()=>Js,eJc:()=>Ym,ekj:()=>O0,eoX:()=>t1,f3M:()=>Ze,g9A:()=>vb,h0i:()=>Ql,hGG:()=>ik,hij:()=>uc,iGM:()=>IS,ifc:()=>Ms,ip1:()=>GS,jDz:()=>fw,kL8:()=>H0,kcU:()=>Ct,lG2:()=>Hc,lcZ:()=>fS,lqb:()=>Do,lri:()=>i_,n5z:()=>vg,oAB:()=>jc,oxw:()=>eD,q4F:()=>$v,qFp:()=>fk,qLn:()=>Fi,qOj:()=>If,qZA:()=>mm,rWj:()=>e1,rg0:()=>gh,sBO:()=>rV,s_b:()=>Hm,soG:()=>rr,tb:()=>Wf,tp0:()=>$e,uIk:()=>l0,vHH:()=>ee,vpe:()=>So,wAp:()=>Wa,xp6:()=>Kb,z2F:()=>qf,zSh:()=>z,zs3:()=>Ks});var d=k(8645),V=k(7394),F=k(5592),te=k(3019),ge=k(5619),Ee=k(2096),Ne=k(3020),Fe=k(4664),De=k(3997);function U(s){for(let o in s)if(s[o]===U)return o;throw Error("Could not find renamed property on target object.")}function G(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function X(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(X).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Me=U({__forward_ref__:U});function Je(s){return s.__forward_ref__=Je,s.toString=function(){return X(this())},s}function ve(s){return Ae(s)?s():s}function Ae(s){return"function"==typeof s&&s.hasOwnProperty(Me)&&s.__forward_ref__===Je}function Te(s){return s&&!!s.\u0275providers}const at="https://g.co/ng/security#xss";class ee extends Error{constructor(o,u){super(function he(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function re(s){return"string"==typeof s?s:null==s?"":String(s)}function Ue(s,o){throw new ee(-201,!1)}function Qe(s,o){null==s&&function Ve(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function pt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Dn(s){return{providers:s.providers||[],imports:s.imports||[]}}function In(s){return Fn(s,or)||Fn(s,Fr)}function nn(s){return null!==In(s)}function Fn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ar(s){return s&&(s.hasOwnProperty(Ln)||s.hasOwnProperty(ls))?s[Ln]:null}const or=U({\u0275prov:U}),Ln=U({\u0275inj:U}),Fr=U({ngInjectableDef:U}),ls=U({ngInjectorDef:U});var ht=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(ht||{});let _t;function rn(s){const o=_t;return _t=s,o}function ei(s,o,u){const l=In(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&ht.Optional?null:void 0!==o?o:void Ue(X(s))}const Rt=globalThis,ot={},kt="__NG_DI_FLAG__",Vt="ngTempTokenPath",H=/\n/gm,O="__source";let N;function K(s){const o=N;return N=s,o}function me(s,o=ht.Default){if(void 0===N)throw new ee(-203,!1);return null===N?ei(s,void 0,o):N.get(s,o&ht.Optional?null:void 0,o)}function Be(s,o=ht.Default){return(function bt(){return _t}()||me)(ve(s),o)}function Ze(s,o=ht.Default){return Be(s,Zt(o))}function Zt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function wt(s){const o=[];for(let u=0;u<s.length;u++){const l=ve(s[u]);if(Array.isArray(l)){if(0===l.length)throw new ee(900,!1);let h,p=ht.Default;for(let y=0;y<l.length;y++){const w=l[y],I=xt(w);"number"==typeof I?-1===I?h=w.token:p|=I:h=w}o.push(Be(h,p))}else o.push(Be(l))}return o}function hn(s,o){return s[kt]=o,s.prototype[kt]=o,s}function xt(s){return s[kt]}function As(s){return{toString:s}.toString()}var oo=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(oo||{}),Ms=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(Ms||{});const Mi={},Wt=[],jo=U({\u0275cmp:U}),_a=U({\u0275dir:U}),kc=U({\u0275pipe:U}),Fc=U({\u0275mod:U}),xs=U({\u0275fac:U}),ya=U({__NG_ELEMENT_ID__:U}),Lc=U({__NG_ENV_ID__:U});function qd(s,o,u){let l=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===l||s.charCodeAt(h+p)<=32)return h}u=h+1}}function yu(s,o,u){let l=0;for(;l<u.length;){const h=u[l];if("number"==typeof h){if(0!==h)break;l++;const p=u[l++],y=u[l++],w=u[l++];s.setAttribute(o,y,w,p)}else{const p=h,y=u[++l];vu(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),l++}}return l}function Ps(s){return 3===s||4===s||6===s}function vu(s){return 64===s.charCodeAt(0)}function wu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?u=h:0===u||Uc(s,u,h,null,-1===u||2===u?o[++l]:null)}}return s}function Uc(s,o,u,l,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const w=s[p++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=p-1;break}}}for(;p<s.length;){const w=s[p];if("number"==typeof w)break;if(w===u){if(null===l)return void(null!==h&&(s[p+1]=h));if(l===s[p+1])return void(s[p+2]=h)}p++,null!==l&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==l&&s.splice(p++,0,l),null!==h&&s.splice(p++,0,h)}const Mn="ng-template";function yy(s,o,u){let l=0,h=!0;for(;l<s.length;){let p=s[l++];if("string"==typeof p&&h){const y=s[l++];if(u&&"class"===p&&-1!==qd(y.toLowerCase(),o,0))return!0}else{if(1===p){for(;l<s.length&&"string"==typeof(p=s[l++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function Zi(s){return 4===s.type&&s.value!==Mn}function vy(s,o,u){return o===(4!==s.type||u?s.value:Mn)}function Zd(s,o,u){let l=4;const h=s.attrs||[],p=function Cu(s){for(let o=0;o<s.length;o++)if(Ps(s[o]))return o;return s.length}(h);let y=!1;for(let w=0;w<o.length;w++){const I=o[w];if("number"!=typeof I){if(!y)if(4&l){if(l=2|1&l,""!==I&&!vy(s,I,u)||""===I&&1===o.length){if(ti(l))return!1;y=!0}}else{const D=8&l?I:o[++w];if(8&l&&null!==s.attrs){if(!yy(s.attrs,D,u)){if(ti(l))return!1;y=!0}continue}const L=Kd(8&l?"class":I,h,Zi(s),u);if(-1===L){if(ti(l))return!1;y=!0;continue}if(""!==D){let q;q=L>p?"":h[L+1].toLowerCase();const Y=8&l?q:null;if(Y&&-1!==qd(Y,D,0)||2&l&&D!==q){if(ti(l))return!1;y=!0}}}}else{if(!y&&!ti(l)&&!ti(I))return!1;if(y&&ti(I))continue;y=!1,l=I|1&l}}return ti(l)||y}function ti(s){return 0==(1&s)}function Kd(s,o,u,l){if(null===o)return-1;let h=0;if(l||!u){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function Qd(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function Yd(s,o,u=!1){for(let l=0;l<o.length;l++)if(Zd(s,o[l],u))return!0;return!1}function Vp(s,o){return s?":not("+o.trim()+")":o}function Bp(s){let o=s[0],u=1,l=2,h="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&l){const w=s[++u];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?h+="."+y:4&l&&(h+=" "+y);else""!==h&&!ti(y)&&(o+=Vp(p,h),h=""),l=y,p=p||!ti(l);u++}return""!==h&&(o+=Vp(p,h)),o}function Vc(s){return As(()=>{const o=jp(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===oo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Ms.Emulated,styles:s.styles||Wt,_:null,schemas:s.schemas||null,tView:null,id:""};Gc(u);const l=s.dependencies;return u.directiveDefs=ao(l,!1),u.pipeDefs=ao(l,!0),u.id=function th(s){let o=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of u)o=Math.imul(31,o)+h.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(u),u})}function Bc(s){return Ft(s)||gr(s)}function Xd(s){return null!==s}function jc(s){return As(()=>({type:s.type,bootstrap:s.bootstrap||Wt,declarations:s.declarations||Wt,imports:s.imports||Wt,exports:s.exports||Wt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function $c(s,o){if(null==s)return Mi;const u={};for(const l in s)if(s.hasOwnProperty(l)){let h=s[l],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=l,o&&(o[h]=p)}return u}function Hc(s){return As(()=>{const o=jp(s);return Gc(o),o})}function zc(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ft(s){return s[jo]||null}function gr(s){return s[_a]||null}function mr(s){return s[kc]||null}function va(s){const o=Ft(s)||gr(s)||mr(s);return null!==o&&o.standalone}function Ur(s,o){const u=s[Fc]||null;if(!u&&!0===o)throw new Error(`Type ${X(s)} does not have '\u0275mod' property.`);return u}function jp(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||Mi,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Wt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$c(s.inputs,o),outputs:$c(s.outputs)}}function Gc(s){s.features?.forEach(o=>o(s))}function ao(s,o){if(!s)return null;const u=o?mr:Bc;return()=>("function"==typeof s?s():s).map(l=>u(l)).filter(Xd)}const bn=0,je=1,It=2,fn=3,gi=4,Ns=5,_r=6,$o=7,Un=8,Rs=9,uo=10,gt=11,Eu=12,Cy=13,mi=14,Jn=15,wa=16,_i=17,Vr=18,ks=19,$p=20,Ho=21,hs=22,Wc=23,xi=24,Lt=25,rh=1,Iu=2,Br=7,Ca=9,Xn=11;function ni(s){return Array.isArray(s)&&"object"==typeof s[rh]}function Mr(s){return Array.isArray(s)&&!0===s[rh]}function ih(s){return 0!=(4&s.flags)}function Fs(s){return s.componentOffset>-1}function Tu(s){return 1==(1&s.flags)}function Pi(s){return!!s.template}function Ea(s){return 0!=(512&s[It])}function Ls(s,o){return s.hasOwnProperty(xs)?s[xs]:null}let ur=null,ch=!1;function $r(s){const o=ur;return ur=s,o}const lh={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Py(s){if(!Yc(s)||s.dirty){if(!s.producerMustRecompute(s)&&!Ny(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function Oy(s){s.dirty=!0,function Wp(s){if(void 0===s.liveConsumerNode)return;const o=ch;ch=!0;try{for(const u of s.liveConsumerNode)u.dirty||Oy(u)}finally{ch=o}}(s),s.consumerMarkedDirty?.(s)}function qp(s){return s&&(s.nextProducerIndex=0),$r(s)}function Kc(s,o){if($r(o),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(Yc(s))for(let u=s.nextProducerIndex;u<s.producerNode.length;u++)Su(s.producerNode[u],s.producerIndexOfThis[u]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function Ny(s){lo(s);for(let o=0;o<s.producerNode.length;o++){const u=s.producerNode[o],l=s.producerLastReadVersion[o];if(l!==u.version||(Py(u),l!==u.version))return!0}return!1}function hh(s){if(lo(s),Yc(s))for(let o=0;o<s.producerNode.length;o++)Su(s.producerNode[o],s.producerIndexOfThis[o]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function Su(s,o){if(function ky(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),lo(s),1===s.liveConsumerNode.length)for(let l=0;l<s.producerNode.length;l++)Su(s.producerNode[l],s.producerIndexOfThis[l]);const u=s.liveConsumerNode.length-1;if(s.liveConsumerNode[o]=s.liveConsumerNode[u],s.liveConsumerIndexOfThis[o]=s.liveConsumerIndexOfThis[u],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,o<s.liveConsumerNode.length){const l=s.liveConsumerIndexOfThis[o],h=s.liveConsumerNode[o];lo(h),h.producerIndexOfThis[l]=o}}function Yc(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function lo(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let Ly=null;function gh(s){const o=$r(null);try{return s()}finally{$r(o)}}const Xp=()=>{},wI=(()=>({...lh,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:Xp}))();class jy{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function mh(){return _h}function _h(s){return s.type.prototype.ngOnChanges&&(s.setInput=Us),Xc}function Xc(){const s=yh(this),o=s?.current;if(o){const u=s.previous;if(u===Mi)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Us(s,o,u,l){const h=this.declaredInputs[u],p=yh(s)||function $y(s,o){return s[Ta]=o}(s,{previous:Mi,current:null}),y=p.current||(p.current={}),w=p.previous,I=w[h];y[h]=new jy(I&&I.currentValue,o,w===Mi),s[l]=o}mh.ngInherit=!0;const Ta="__ngSimpleChanges__";function yh(s){return s[Ta]||null}const fs=function(s,o,u){},eg="svg";function sn(s){for(;Array.isArray(s);)s=s[bn];return s}function Vs(s,o){return sn(o[s])}function Hr(s,o){return sn(o[s.index])}function wh(s,o){return s.data[o]}function Da(s,o){return s[o]}function ri(s,o){const u=o[s];return ni(u)?u:u[bn]}function ho(s,o){return null==o?null:s[o]}function tg(s){s[_i]=0}function Mu(s){1024&s[It]||(s[It]|=1024,qn(s,1))}function Hy(s){1024&s[It]&&(s[It]&=-1025,qn(s,-1))}function qn(s,o){let u=s[fn];if(null===u)return;u[Ns]+=o;let l=u;for(u=u[fn];null!==u&&(1===o&&1===l[Ns]||-1===o&&0===l[Ns]);)u[Ns]+=o,l=u,u=u[fn]}const yt={lFrame:fg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Sa(){return yt.bindingsEnabled}function ye(){return yt.lFrame.lView}function Bt(){return yt.lFrame.tView}function Ki(s){return yt.lFrame.contextLView=s,s[Un]}function bh(s){return yt.lFrame.contextLView=null,s}function yr(){let s=il();for(;null!==s&&64===s.type;)s=s.parent;return s}function il(){return yt.lFrame.currentTNode}function ps(s,o){const u=yt.lFrame;u.currentTNode=s,u.isParent=o}function ag(){return yt.lFrame.isParent}function vr(){const s=yt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ou(){return yt.lFrame.bindingIndex++}function gs(s){const o=yt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function lg(s,o){const u=yt.lFrame;u.bindingIndex=u.bindingRootIndex=s,dg(o)}function dg(s){yt.lFrame.currentDirectiveIndex=s}function Ky(){return yt.lFrame.currentQueryIndex}function hg(s){yt.lFrame.currentQueryIndex=s}function SI(s){const o=s[je];return 2===o.type?o.declTNode:1===o.type?s[_r]:null}function Dh(s,o,u){if(u&ht.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&ht.Host||(h=SI(p),null===h||(p=p[mi],10&h.type))););if(null===h)return!1;o=h,s=p}const l=yt.lFrame=Bs();return l.currentTNode=o,l.lView=s,!0}function zr(s){const o=Bs(),u=s[je];yt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Bs(){const s=yt.lFrame,o=null===s?null:s.child;return null===o?fg(s):o}function fg(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function pn(){const s=yt.lFrame;return yt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const dt=pn;function wr(){const s=pn();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Gr(){return yt.lFrame.selectedIndex}function js(s){yt.lFrame.selectedIndex=s}function Cn(){const s=yt.lFrame;return wh(s.tView,s.selectedIndex)}function go(){yt.lFrame.currentNamespace=eg}function Ct(){!function Yy(){yt.lFrame.currentNamespace=null}()}let Nu=!0;function $s(){return Nu}function Hs(s){Nu=s}function Aa(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:D,ngOnDestroy:M}=p;y&&(s.contentHooks??=[]).push(-u,y),w&&((s.contentHooks??=[]).push(u,w),(s.contentCheckHooks??=[]).push(u,w)),I&&(s.viewHooks??=[]).push(-u,I),D&&((s.viewHooks??=[]).push(u,D),(s.viewCheckHooks??=[]).push(u,D)),null!=M&&(s.destroyHooks??=[]).push(u,M)}}function zo(s,o,u){al(s,o,3,u)}function Ma(s,o,u,l){(3&s[It])===u&&al(s,o,u,l)}function ol(s,o){let u=s[It];(3&u)===o&&(u&=8191,u+=1,s[It]=u)}function al(s,o,u,l){const p=l??-1,y=o.length-1;let w=0;for(let I=void 0!==l?65535&s[_i]:0;I<y;I++)if("number"==typeof o[I+1]){if(w=o[I],null!=l&&w>=l)break}else o[I]<0&&(s[_i]+=65536),(w<p||-1==p)&&(Ru(s,u,o,I),s[_i]=(4294901760&s[_i])+I+2),I++}function zs(s,o){fs(4,s,o);const u=$r(null);try{o.call(s)}finally{$r(u),fs(5,s,o)}}function Ru(s,o,u,l){const h=u[l]<0,p=u[l+1],w=s[h?-u[l]:u[l]];h?s[It]>>13<s[_i]>>16&&(3&s[It])===o&&(s[It]+=8192,zs(w,p)):zs(w,p)}const ms=-1;class Go{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function ul(s){return s!==ms}function yi(s){return 32767&s}function dn(s,o){let u=function Vn(s){return s>>16}(s),l=o;for(;u>0;)l=l[mi],u--;return l}let xa=!0;function Cr(s){const o=xa;return xa=s,o}const Uu=255,Vu=5;let Qy=0;const er={};function Pn(s,o){const u=cl(s,o);if(-1!==u)return u;const l=o[je];l.firstCreatePass&&(s.injectorIndex=o.length,Yi(l.data,s),Yi(o,null),Yi(l.blueprint,null));const h=qo(s,o),p=s.injectorIndex;if(ul(h)){const y=yi(h),w=dn(h,o),I=w[je].data;for(let D=0;D<8;D++)o[p+D]=w[y+D]|I[y+D]}return o[p+8]=h,p}function Yi(s,o){s.push(0,0,0,0,0,0,0,0,o)}function cl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function qo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,h=o;for(;null!==h;){if(l=Cg(h),null===l)return ms;if(u++,h=h[mi],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return ms}function Pa(s,o,u){!function yo(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(ya)&&(l=u[ya]),null==l&&(l=u[ya]=Qy++);const h=l&Uu;o.data[s+(h>>Vu)]|=1<<h}(s,o,u)}function xh(s,o,u){if(u&ht.Optional||void 0!==s)return s;Ue()}function Zo(s,o,u,l){if(u&ht.Optional&&void 0===l&&(l=null),!(u&(ht.Self|ht.Host))){const h=s[Rs],p=rn(void 0);try{return h?h.get(o,l,u&ht.Optional):ei(o,l,u&ht.Optional)}finally{rn(p)}}return xh(l,0,u)}function Ph(s,o,u,l=ht.Default,h){if(null!==s){if(2048&o[It]&&!(l&ht.Self)){const y=function wg(s,o,u,l,h){let p=s,y=o;for(;null!==p&&null!==y&&2048&y[It]&&!(512&y[It]);){const w=ll(p,y,u,l|ht.Self,er);if(w!==er)return w;let I=p.parent;if(!I){const D=y[$p];if(D){const M=D.get(u,er,l);if(M!==er)return M}I=Cg(y),y=y[mi]}p=I}return h}(s,o,u,l,er);if(y!==er)return y}const p=ll(s,o,u,l,er);if(p!==er)return p}return Zo(o,u,l,h)}function ll(s,o,u,l,h){const p=function wo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ya)?s[ya]:void 0;return"number"==typeof o?o>=0?o&Uu:Co:o}(u);if("function"==typeof p){if(!Dh(o,s,l))return l&ht.Host?xh(h,0,l):Zo(o,u,l,h);try{let y;if(y=p(l),null!=y||l&ht.Optional)return y;Ue()}finally{dt()}}else if("number"==typeof p){let y=null,w=cl(s,o),I=ms,D=l&ht.Host?o[Jn][_r]:null;for((-1===w||l&ht.SkipSelf)&&(I=-1===w?qo(s,o):o[w+8],I!==ms&&_g(l,!1)?(y=o[je],w=yi(I),o=dn(I,o)):w=-1);-1!==w;){const M=o[je];if(mg(p,w,M.data)){const L=Tt(w,o,u,y,l,D);if(L!==er)return L}I=o[w+8],I!==ms&&_g(l,o[je].data[w+8]===D)&&mg(p,w,o)?(y=M,w=yi(I),o=dn(I,o)):w=-1}}return h}function Tt(s,o,u,l,h,p){const y=o[je],w=y.data[s+8],M=vo(w,y,u,null==l?Fs(w)&&xa:l!=y&&0!=(3&w.type),h&ht.Host&&p===w);return null!==M?Ko(o,y,M,w):er}function vo(s,o,u,l,h){const p=s.providerIndexes,y=o.data,w=1048575&p,I=s.directiveStart,M=p>>20,q=h?w+M:s.directiveEnd;for(let Y=l?w:w+M;Y<q;Y++){const le=y[Y];if(Y<I&&u===le||Y>=I&&le.type===u)return Y}if(h){const Y=y[I];if(Y&&Pi(Y)&&Y.type===u)return I}return null}function Ko(s,o,u,l){let h=s[u];const p=o.data;if(function ku(s){return s instanceof Go}(h)){const y=h;y.resolving&&function Re(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ee(-200,`Circular dependency in DI detected for ${s}${u}`)}(function fe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():re(s)}(p[u]));const w=Cr(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?rn(y.injectImpl):null;Dh(s,l,ht.Default);try{h=s[u]=y.factory(void 0,p,s,l),o.firstCreatePass&&u>=l.directiveStart&&function xr(s,o,u){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(l){const y=_h(o);(u.preOrderHooks??=[]).push(s,y),(u.preOrderCheckHooks??=[]).push(s,y)}h&&(u.preOrderHooks??=[]).push(0-s,h),p&&((u.preOrderHooks??=[]).push(s,p),(u.preOrderCheckHooks??=[]).push(s,p))}(u,p[u],o)}finally{null!==D&&rn(D),Cr(w),y.resolving=!1,dt()}}return h}function mg(s,o,u){return!!(u[o+(s>>Vu)]&1<<s)}function _g(s,o){return!(s&ht.Self||s&ht.Host&&o)}class tr{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return Ph(this._tNode,this._lView,o,Zt(l),u)}}function Co(){return new tr(yr(),ye())}function vg(s){return As(()=>{const o=s.prototype.constructor,u=o[xs]||dl(o),l=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==l;){const p=h[xs]||dl(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function dl(s){return Ae(s)?()=>{const o=dl(ve(s));return o&&o()}:Ls(s)}function Cg(s){const o=s[je],u=o.type;return 2===u?o.declTNode:1===u?s[_r]:null}function hl(s){return function gg(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let h=0;for(;h<l;){const p=u[h];if(Ps(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<l&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(yr(),s)}const Yo="__parameters__";function Ht(s,o,u){return As(()=>{const l=function Eo(s){return function(...u){if(s){const l=s(...u);for(const h in l)this[h]=l[h]}}}(o);function h(...p){if(this instanceof h)return l.apply(this,p),this;const y=new h(...p);return w.annotation=y,w;function w(I,D,M){const L=I.hasOwnProperty(Yo)?I[Yo]:Object.defineProperty(I,Yo,{value:[]})[Yo];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(y),I}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function Na(s,o){s.forEach(u=>Array.isArray(u)?Na(u,o):o(u))}function Xy(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Ra(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function vi(s,o,u){let l=ka(s,o);return l>=0?s[1|l]=u:(l=~l,function bg(s,o,u,l){let h=s.length;if(h==o)s.push(u,l);else if(1===h)s.push(l,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=l}}(s,l,o,u)),l}function Rh(s,o){const u=ka(s,o);if(u>=0)return s[1|u]}function ka(s,o){return function yl(s,o,u){let l=0,h=s.length>>u;for(;h!==l;){const p=l+(h-l>>1),y=s[p<<u];if(o===y)return p<<u;y>o?h=p:l=p+1}return~(h<<u)}(s,o,1)}const oe=hn(Ht("Optional"),8),$e=hn(Ht("SkipSelf"),4);function Sg(s){return 128==(128&s.flags)}var Lh=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(Lh||{});const Uh=new Map;let gx=0;const xg="__ngContext__";function si(s,o){ni(o)?(s[xg]=o[ks],function FI(s){Uh.set(s[ks],s)}(o)):s[xg]=o}let jh;function Qi(s,o){return jh(s,o)}function ta(s){const o=s[fn];return Mr(o)?o[fn]:o}function VI(s){return $h(s[Eu])}function hv(s){return $h(s[gi])}function $h(s){for(;null!==s&&!Mr(s);)s=s[gi];return s}function bl(s,o,u,l,h){if(null!=l){let p,y=!1;Mr(l)?p=l:ni(l)&&(y=!0,l=l[bn]);const w=sn(l);0===s&&null!==u?null==h?HI(o,u,w):Yu(o,u,w,h||null,!0):1===s&&null!==u?Yu(o,u,w,h||null,!0):2===s?function kg(s,o,u){const l=Rg(s,o);l&&function xx(s,o,u,l){s.removeChild(o,u,l)}(s,l,o,u)}(o,w,y):3===s&&o.destroyNode(w),null!=p&&function Ox(s,o,u,l,h){const p=u[Br];p!==sn(u)&&bl(o,s,l,p,h);for(let w=Xn;w<u.length;w++){const I=u[w];Zh(I[je],I,s,o,l,p)}}(o,s,p,u,h)}}function Og(s,o,u){return s.createElement(o,u)}function BI(s,o){const u=s[Ca],l=u.indexOf(o);Hy(o),u.splice(l,1)}function Ng(s,o){if(s.length<=Xn)return;const u=Xn+o,l=s[u];if(l){const h=l[wa];null!==h&&h!==s&&BI(h,l),o>0&&(s[u-1][gi]=l[gi]);const p=Ra(s,Xn+o);!function Tx(s,o){Zh(s,o,o[gt],2,null,null),o[bn]=null,o[_r]=null}(l[je],l);const y=p[Vr];null!==y&&y.detachView(p[je]),l[fn]=null,l[gi]=null,l[It]&=-129}return l}function fv(s,o){if(!(256&o[It])){const u=o[gt];o[Wc]&&hh(o[Wc]),o[xi]&&hh(o[xi]),u.destroyNode&&Zh(s,o,u,3,null,null),function Dx(s){let o=s[Eu];if(!o)return jI(s[je],s);for(;o;){let u=null;if(ni(o))u=o[Eu];else{const l=o[Xn];l&&(u=l)}if(!u){for(;o&&!o[gi]&&o!==s;)ni(o)&&jI(o[je],o),o=o[fn];null===o&&(o=s),ni(o)&&jI(o[je],o),u=o&&o[gi]}o=u}}(o)}}function jI(s,o){if(!(256&o[It])){o[It]&=-129,o[It]|=256,function $I(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const h=o[u[l]];if(!(h instanceof Go)){const p=u[l+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=h[p[y]],I=p[y+1];fs(4,w,I);try{I.call(w)}finally{fs(5,w,I)}}else{fs(4,h,p);try{p.call(h)}finally{fs(5,h,p)}}}}}(s,o),function Mx(s,o){const u=s.cleanup,l=o[$o];if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+3];y>=0?l[y]():l[-y].unsubscribe(),p+=2}else u[p].call(l[u[p+1]]);null!==l&&(o[$o]=null);const h=o[Ho];if(null!==h){o[Ho]=null;for(let p=0;p<h.length;p++)(0,h[p])()}}(s,o),1===o[je].type&&o[gt].destroy();const u=o[wa];if(null!==u&&Mr(o[fn])){u!==o[fn]&&BI(u,o);const l=o[Vr];null!==l&&l.detachView(s)}!function Vh(s){Uh.delete(s[ks])}(o)}}function Tl(s,o,u){return function Ku(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[bn];{const{componentOffset:h}=l;if(h>-1){const{encapsulation:p}=s.data[l.directiveStart+h];if(p===Ms.None||p===Ms.Emulated)return null}return Hr(l,u)}}(s,o.parent,u)}function Yu(s,o,u,l,h){s.insertBefore(o,u,l,h)}function HI(s,o,u){s.appendChild(o,u)}function zI(s,o,u,l,h){null!==l?Yu(s,o,u,l,h):HI(s,o,u)}function Rg(s,o){return s.parentNode(o)}let gv,YI,Lg,pv=function WI(s,o,u){return 40&s.type?Hr(s,u):null};function Wh(s,o,u,l){const h=Tl(s,l,o),p=o[gt],w=function GI(s,o,u){return pv(s,o,u)}(l.parent||o[_r],l,o);if(null!=h)if(Array.isArray(u))for(let I=0;I<u.length;I++)zI(p,h,u[I],w,!1);else zI(p,h,u,w,!1);void 0!==gv&&gv(p,l,o,u,h)}function To(s,o){if(null!==o){const u=o.type;if(3&u)return Hr(o,s);if(4&u)return _v(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return To(s,l);{const h=s[o.index];return Mr(h)?_v(-1,h):sn(h)}}if(32&u)return Qi(o,s)()||sn(s[o.index]);{const l=mv(s,o);return null!==l?Array.isArray(l)?l[0]:To(ta(s[Jn]),l):To(s,o.next)}}return null}function mv(s,o){return null!==o?s[Jn][_r].projection[o.projection]:null}function _v(s,o){const u=Xn+s+1;if(u<o.length){const l=o[u],h=l[je].firstChild;if(null!==h)return To(l,h)}return o[Br]}function qh(s,o,u,l,h,p,y){for(;null!=u;){const w=l[u.index],I=u.type;if(y&&0===o&&(w&&si(sn(w),l),u.flags|=2),32!=(32&u.flags))if(8&I)qh(s,o,u.child,l,h,p,!1),bl(o,s,h,w,p);else if(32&I){const D=Qi(u,l);let M;for(;M=D();)bl(o,s,h,M,p);bl(o,s,h,w,p)}else 16&I?vv(s,o,l,u,h,p):bl(o,s,h,w,p);u=y?u.projectionNext:u.next}}function Zh(s,o,u,l,h,p){qh(u,l,s.firstChild,o,h,p,!1)}function vv(s,o,u,l,h,p){const y=u[Jn],I=y[_r].projection[l.projection];if(Array.isArray(I))for(let D=0;D<I.length;D++)bl(o,s,h,I[D],p);else{let D=I;const M=y[fn];Sg(l)&&(D.flags|=128),qh(s,o,D,M,h,p,!0)}}function ZI(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function Kh(s,o,u){const{mergedAttrs:l,classes:h,styles:p}=u;null!==l&&yu(s,o,l),null!==h&&ZI(s,o,h),null!==p&&function Rx(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function QI(s){YI=s}function eb(s){return function Cv(){if(void 0===Lg&&(Lg=null,Rt.trustedTypes))try{Lg=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Lg}()?.createScriptURL(s)||s}class tb{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${at})`}}function La(s){return s instanceof tb?s.changingThisBreaksApplicationSecurity:s}function Al(s,o){const u=function Ug(s){return s instanceof tb&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${at})`)}return u===o}const Yh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Xh=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(Xh||{});function ef(s){const o=tf();return o?o.sanitize(Xh.URL,s)||"":Al(s,"URL")?La(s):function Bg(s){return(s=String(s)).match(Yh)?s:"unsafe:"+s}(re(s))}function lb(s){const o=tf();if(o)return eb(o.sanitize(Xh.RESOURCE_URL,s)||"");if(Al(s,"ResourceURL"))return eb(La(s));throw new ee(904,!1)}function Kx(s,o,u){return function Zx(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?lb:ef}(o,u)(s)}function tf(){const s=ye();return s&&s[uo].sanitizer}class un{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=pt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ml=new un("ENVIRONMENT_INITIALIZER"),hb=new un("INJECTOR",-1),fb=new un("INJECTOR_DEF_TYPES");class $g{get(o,u=ot){if(u===ot){const l=new Error(`NullInjectorError: No provider for ${X(o)}!`);throw l.name="NullInjectorError",l}return u}}function Sv(s){return{\u0275providers:s}}function Yx(...s){return{\u0275providers:pb(0,s),\u0275fromNgModule:!0}}function pb(s,...o){const u=[],l=new Set;let h;const p=y=>{u.push(y)};return Na(o,y=>{const w=y;Hg(w,p,[],l)&&(h||=[],h.push(w))}),void 0!==h&&gb(h,p),u}function gb(s,o){for(let u=0;u<s.length;u++){const{ngModule:l,providers:h}=s[u];Av(h,p=>{o(p,l)})}}function Hg(s,o,u,l){if(!(s=ve(s)))return!1;let h=null,p=Ar(s);const y=!p&&Ft(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const I=s.ngModule;if(p=Ar(I),!p)return!1;h=I}const w=l.has(h);if(y){if(w)return!1;if(l.add(h),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const D of I)Hg(D,o,u,l)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let D;l.add(h);try{Na(p.imports,M=>{Hg(M,o,u,l)&&(D||=[],D.push(M))})}finally{}void 0!==D&&gb(D,o)}if(!w){const D=Ls(h)||(()=>new h);o({provide:h,useFactory:D,deps:Wt},h),o({provide:fb,useValue:h,multi:!0},h),o({provide:Ml,useValue:()=>Be(h),multi:!0},h)}const I=p.providers;if(null!=I&&!w){const D=s;Av(I,M=>{o(M,D)})}}}return h!==s&&void 0!==s.providers}function Av(s,o){for(let u of s)Te(u)&&(u=u.\u0275providers),Array.isArray(u)?Av(u,o):o(u)}const JU=U({provide:String,useValue:U});function mb(s){return null!==s&&"object"==typeof s&&JU in s}function xl(s){return"function"==typeof s}const z=new un("Set Injector scope."),zg={},Gg={};let Mv;function Ju(){return void 0===Mv&&(Mv=new $g),Mv}class Do{}class nf extends Do{get destroyed(){return this._destroyed}constructor(o,u,l,h){super(),this.parent=u,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xv(o,y=>this.processProvider(y)),this.records.set(hb,Pl(void 0,this)),h.has("environment")&&this.records.set(Do,Pl(void 0,this));const p=this.records.get(z);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(fb.multi,Wt,ht.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const u=K(this),l=rn(void 0);try{return o()}finally{K(u),rn(l)}}get(o,u=ot,l=ht.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Lc))return o[Lc](this);l=Zt(l);const p=K(this),y=rn(void 0);try{if(!(l&ht.SkipSelf)){let I=this.records.get(o);if(void 0===I){const D=function nP(s){return"function"==typeof s||"object"==typeof s&&s instanceof un}(o)&&In(o);I=D&&this.injectableDefInScope(D)?Pl(rf(o),zg):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&ht.Self?Ju():this.parent).get(o,u=l&ht.Optional&&u===ot?null:u)}catch(w){if("NullInjectorError"===w.name){if((w[Vt]=w[Vt]||[]).unshift(X(o)),p)throw w;return function Ai(s,o,u,l){const h=s[Vt];throw o[O]&&h.unshift(o[O]),s.message=function _u(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=X(o);if(Array.isArray(o))h=o.map(X).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):X(w)))}h=`{${p.join(", ")}}`}return`${u}${l?"("+l+")":""}[${h}]: ${s.replace(H,"\n  ")}`}("\n"+s.message,h,u,l),s.ngTokenPath=h,s[Vt]=null,s}(w,o,"R3InjectorError",this.source)}throw w}finally{rn(y),K(p)}}resolveInjectorInitializers(){const o=K(this),u=rn(void 0);try{const h=this.get(Ml.multi,Wt,ht.Self);for(const p of h)p()}finally{K(o),rn(u)}}toString(){const o=[],u=this.records;for(const l of u.keys())o.push(X(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(o){let u=xl(o=ve(o))?o:ve(o&&o.provide);const l=function _b(s){return mb(s)?Pl(void 0,s.useValue):Pl(Wg(s),zg)}(o);if(xl(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=Pl(void 0,zg,!0),h.factory=()=>wt(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,l)}hydrate(o,u){return u.value===zg&&(u.value=Gg,u.value=u.factory()),"object"==typeof u.value&&u.value&&function tP(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ve(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(o){const u=this._onDestroyHooks.indexOf(o);-1!==u&&this._onDestroyHooks.splice(u,1)}}function rf(s){const o=In(s),u=null!==o?o.factory:Ls(s);if(null!==u)return u;if(s instanceof un)throw new ee(204,!1);if(s instanceof Function)return function sf(s){const o=s.length;if(o>0)throw function Io(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?"),new ee(204,!1);const u=function fi(s){return s&&(s[or]||s[Fr])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ee(204,!1)}function Wg(s,o,u){let l;if(xl(s)){const h=ve(s);return Ls(h)||rf(h)}if(mb(s))l=()=>ve(s.useValue);else if(function Xx(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...wt(s.deps||[]));else if(function Jx(s){return!(!s||!s.useExisting)}(s))l=()=>Be(ve(s.useExisting));else{const h=ve(s&&(s.useClass||s.provide));if(!function eP(s){return!!s.deps}(s))return Ls(h)||rf(h);l=()=>new h(...wt(s.deps))}return l}function Pl(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function xv(s,o){for(const u of s)Array.isArray(u)?xv(u,o):u&&Te(u)?xv(u.\u0275providers,o):o(u)}const yb=new un("AppId",{providedIn:"root",factory:()=>rP}),rP="ng",vb=new un("Platform Initializer"),qg=new un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),iP=new un("CSP nonce",{providedIn:"root",factory:()=>function Qu(){if(void 0!==YI)return YI;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Uv=(s,o,u)=>null;function vs(s,o,u=!1){return Uv(s,o,u)}class hP{}class Ib{}class uf{resolveComponentFactory(o){throw function fP(s){const o=Error(`No component factory found for ${X(s)}.`);return o.ngComponent=s,o}(o)}}let Jg=(()=>{class s{static#e=this.NULL=new uf}return s})();function cf(){return kl(yr(),ye())}function kl(s,o){return new lf(Hr(s,o))}let lf=(()=>{class s{constructor(u){this.nativeElement=u}static#e=this.__NG_ELEMENT_ID__=cf}return s})();function pP(s){return s instanceof lf?s.nativeElement:s}class bb{}let gP=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Tb(){const s=ye(),u=ri(yr().index,s);return(ni(u)?u:s)[gt]}()}return s})(),mP=(()=>{class s{static#e=this.\u0275prov=pt({token:s,providedIn:"root",factory:()=>null})}return s})();class Xg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const $v=new Xg("16.2.9"),Hv={};function Mb(s,o=null,u=null,l){const h=xb(s,o,u,l);return h.resolveInjectorInitializers(),h}function xb(s,o=null,u=null,l,h=new Set){const p=[u||Wt,Yx(s)];return l=l||("object"==typeof s?void 0:X(s)),new nf(p,o||Ju(),l||null,h)}let Ks=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=ot;static#t=this.NULL=new $g;static create(u,l){if(Array.isArray(u))return Mb({name:""},l,u,"");{const h=u.name??"";return Mb({name:h},u.parent,u.providers,h)}}static#n=this.\u0275prov=pt({token:s,providedIn:"any",factory:()=>Be(hb)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function Gv(s){return s.ngOriginalError}class Fi{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Gv(o);for(;u&&Gv(u);)u=Gv(u);return u||null}}function qv(s){return o=>{setTimeout(s,void 0,o)}}const So=class hf extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){let h=o,p=u||(()=>null),y=l;if(o&&"object"==typeof o){const I=o;h=I.next?.bind(I),p=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(p=qv(p),h&&(h=qv(h)),y&&(y=qv(y)));const w=super.subscribe({next:h,error:p,complete:y});return o instanceof V.w0&&o.add(w),w}};function Ob(...s){}class Or{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new So(!1),this.onMicrotaskEmpty=new So(!1),this.onStable=new So(!1),this.onError=new So(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&u,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function CP(){const s="function"==typeof Rt.requestAnimationFrame;let o=Rt[s?"requestAnimationFrame":"setTimeout"],u=Rt[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&u){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const h=u[Zone.__symbol__("OriginalDelegate")];h&&(u=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function bP(s){const o=()=>{!function IP(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Rt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Kv(s),s.isCheckStableRunning=!0,Zv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Kv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,h,p,y,w)=>{if(function Fl(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(w))return u.invokeTask(h,p,y,w);try{return Nb(s),u.invokeTask(h,p,y,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Rb(s)}},onInvoke:(u,l,h,p,y,w,I)=>{try{return Nb(s),u.invoke(h,p,y,w,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Rb(s)}},onHasTask:(u,l,h,p)=>{u.hasTask(h,p),l===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Kv(s),Zv(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,l,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Or.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(Or.isInAngularZone())throw new ee(909,!1)}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,EP,Ob,Ob);try{return p.runTask(y,u,l)}finally{p.cancelTask(y)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const EP={};function Zv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Kv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Nb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Rb(s){s._nesting--,Zv(s)}class TP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new So,this.onMicrotaskEmpty=new So,this.onStable=new So,this.onError=new So}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,h){return o.apply(u,l)}}const kb=new un("",{providedIn:"root",factory:Fb});function Fb(){const s=Ze(Or);let o=!0;const u=new F.y(h=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(o),h.complete()})}),l=new F.y(h=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{Or.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,h.next(!0))})})});const y=s.onUnstable.subscribe(()=>{Or.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,te.T)(u,l.pipe((0,Ne.B)()))}function ra(s){return s instanceof Function?s():s}let Yv=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=pt({token:s,providedIn:"root",factory:()=>new s})}return s})();function ff(s){for(;s;){s[It]|=64;const o=ta(s);if(Ea(s)&&!o)return s;s=o}return null}const $b=new un("",{providedIn:"root",factory:()=>!1});let gf=null;function Gb(s,o){return s[o]??mf()}function Wb(s,o){const u=mf();u.producerNode?.length&&(s[o]=gf,u.lView=s,gf=Zb())}const qb={...lh,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{ff(s.lView)},lView:null};function Zb(){return Object.create(qb)}function mf(){return gf??=Zb(),gf}const Dt={};function Kb(s){Yb(Bt(),ye(),Gr()+s,!1)}function Yb(s,o,u,l){if(!l)if(3==(3&o[It])){const p=s.preOrderCheckHooks;null!==p&&zo(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Ma(o,p,0,u)}js(u)}function Ao(s,o=ht.Default){const u=ye();return null===u?Be(s,o):Ph(yr(),u,ve(s),o)}function Qb(){throw new Error("invalid")}function _f(s,o,u,l,h,p,y,w,I,D,M){const L=o.blueprint.slice();return L[bn]=h,L[It]=140|l,(null!==D||s&&2048&s[It])&&(L[It]|=2048),tg(L),L[fn]=L[mi]=s,L[Un]=u,L[uo]=y||s&&s[uo],L[gt]=w||s&&s[gt],L[Rs]=I||s&&s[Rs]||null,L[_r]=p,L[ks]=function Mg(){return gx++}(),L[hs]=M,L[$p]=D,L[Jn]=2==o.type?s[Jn]:L,L}function ec(s,o,u,l,h){let p=s.data[o];if(null===p)p=function Jv(s,o,u,l,h){const p=il(),y=ag(),I=s.data[o]=function FP(s,o,u,l,h,p){let y=o?o.injectorIndex:-1,w=0;return function fo(){return null!==yt.skipHydrationRootTNode}()&&(w|=128),{type:u,index:l,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,l,h);return null===s.firstChild&&(s.firstChild=I),null!==p&&(y?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I,I.prev=p)),I}(s,o,u,l,h),function TI(){return yt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=l,p.attrs=h;const y=function Pu(){const s=yt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return ps(p,!0),p}function yf(s,o,u,l){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return h}function Jb(s,o,u,l,h){const p=Gb(o,Wc),y=Gr(),w=2&l;try{js(-1),w&&o.length>Lt&&Yb(s,o,Lt,!1),fs(w?2:0,h);const D=w?p:null,M=qp(D);try{null!==D&&(D.dirty=!1),u(l,h)}finally{Kc(D,M)}}finally{w&&null===o[Wc]&&Wb(o,Wc),js(y),fs(w?3:1,h)}}function Xv(s,o,u){if(ih(o)){const l=$r(null);try{const p=o.directiveEnd;for(let y=o.directiveStart;y<p;y++){const w=s.data[y];w.contentQueries&&w.contentQueries(1,u[y],y)}}finally{$r(l)}}}function e0(s,o,u){Sa()&&(function $P(s,o,u,l){const h=u.directiveStart,p=u.directiveEnd;Fs(u)&&function KP(s,o,u){const l=Hr(o,s),h=Xb(u);let y=16;u.signals?y=4096:u.onPush&&(y=64);const w=nm(s,_f(s,h,null,y,l,o,null,s[uo].rendererFactory.createRenderer(l,u),null,null,null));s[o.index]=w}(o,u,s.data[h+u.componentOffset]),s.firstCreatePass||Pn(u,o),si(l,o);const y=u.initialInputs;for(let w=h;w<p;w++){const I=s.data[w],D=Ko(o,s,w,u);si(D,o),null!==y&&YP(0,w-h,D,I,0,y),Pi(I)&&(ri(u.index,o)[Un]=Ko(o,s,w,u))}}(s,o,u,Hr(u,o)),64==(64&u.flags)&&aT(s,o,u))}function vf(s,o,u=Hr){const l=o.localNames;if(null!==l){let h=o.index+1;for(let p=0;p<l.length;p+=2){const y=l[p+1],w=-1===y?u(o,s):s[y];s[h++]=w}}}function Xb(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=t0(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function t0(s,o,u,l,h,p,y,w,I,D,M){const L=Lt+l,q=L+h,Y=function eT(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:Dt);return u}(L,q),le="function"==typeof D?D():D;return Y[je]={type:s,blueprint:Y,template:u,queries:null,viewQuery:w,declTNode:o,data:Y.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:le,incompleteFirstPass:!1,ssrId:M}}let n0=s=>null;function rT(s,o,u,l){for(let h in s)if(s.hasOwnProperty(h)){u=null===u?{}:u;const p=s[h];null===l?iT(u,o,h,p):l.hasOwnProperty(h)&&iT(u,o,l[h],p)}return u}function iT(s,o,u,l){s.hasOwnProperty(u)?s[u].push(o,l):s[u]=[o,l]}function r0(s,o,u,l){if(Sa()){const h=null===l?null:{"":-1},p=function zP(s,o){const u=s.directiveRegistry;let l=null,h=null;if(u)for(let p=0;p<u.length;p++){const y=u[p];if(Yd(o,y.selectors,!1))if(l||(l=[]),Pi(y))if(null!==y.findHostDirectiveDefs){const w=[];h=h||new Map,y.findHostDirectiveDefs(y,w,h),l.unshift(...w,y),s0(s,o,w.length)}else l.unshift(y),s0(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,l,h),l.push(y)}return null===l?null:[l,h]}(s,u);let y,w;null===p?y=w=null:[y,w]=p,null!==y&&oT(s,o,u,y,h,w),h&&function GP(s,o,u){if(o){const l=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new ee(-301,!1);l.push(o[h],p)}}}(u,l,h)}u.mergedAttrs=wu(u.mergedAttrs,u.attrs)}function oT(s,o,u,l,h,p){for(let D=0;D<l.length;D++)Pa(Pn(u,o),s,l[D].type);!function qP(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,l.length);for(let D=0;D<l.length;D++){const M=l[D];M.providersResolver&&M.providersResolver(M)}let y=!1,w=!1,I=yf(s,o,l.length,null);for(let D=0;D<l.length;D++){const M=l[D];u.mergedAttrs=wu(u.mergedAttrs,M.hostAttrs),ZP(s,u,o,I,M),WP(I,M,h),null!==M.contentQueries&&(u.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(u.flags|=64);const L=M.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),y=!0),!w&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),w=!0),I++}!function LP(s,o,u){const h=o.directiveEnd,p=s.data,y=o.attrs,w=[];let I=null,D=null;for(let M=o.directiveStart;M<h;M++){const L=p[M],q=u?u.get(L):null,le=q?q.outputs:null;I=rT(L.inputs,M,I,q?q.inputs:null),D=rT(L.outputs,M,D,le);const Se=null===I||null===y||Zi(o)?null:QP(I,M,y);w.push(Se)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=8),I.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=w,o.inputs=I,o.outputs=D}(s,u,p)}function aT(s,o,u){const l=u.directiveStart,h=u.directiveEnd,p=u.index,y=function DI(){return yt.lFrame.currentDirectiveIndex}();try{js(p);for(let w=l;w<h;w++){const I=s.data[w],D=o[w];dg(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&HP(I,D)}}finally{js(-1),dg(y)}}function HP(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function s0(s,o,u){o.componentOffset=u,(s.components??=[]).push(o.index)}function WP(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;Pi(o)&&(u[""]=s)}}function ZP(s,o,u,l,h){s.data[l]=h;const p=h.factory||(h.factory=Ls(h.type)),y=new Go(p,Pi(h),Ao);s.blueprint[l]=y,u[l]=y,function BP(s,o,u,l,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const w=~o.index;(function jP(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(y)!=w&&y.push(w),y.push(u,l,p)}}(s,o,l,yf(s,u,h.hostVars,Dt),h)}function Mo(s,o,u,l,h,p){const y=Hr(s,o);!function o0(s,o,u,l,h,p,y){if(null==p)s.removeAttribute(o,h,u);else{const w=null==y?re(p):y(p,l||"",h);s.setAttribute(o,h,w,u)}}(o[gt],y,p,s.value,u,l,h)}function YP(s,o,u,l,h,p){const y=p[o];if(null!==y)for(let w=0;w<y.length;)uT(l,u,y[w++],y[w++],y[w++])}function uT(s,o,u,l,h){const p=$r(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(l)&&(h=y[l].call(o,h)),null!==s.setInput?s.setInput(o,h,u,l):o[l]=h}finally{$r(p)}}function QP(s,o,u){let l=null,h=0;for(;h<u.length;){const p=u[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===l&&(l=[]);const y=s[p];for(let w=0;w<y.length;w+=2)if(y[w]===o){l.push(p,y[w+1],u[h+1]);break}}h+=2}else h+=2;else h+=4}return l}function cT(s,o,u,l){return[s,!0,!1,o,null,0,l,u,null,null,null]}function lT(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const p=u[l+1];if(-1!==p){const y=s.data[p];hg(u[l]),y.contentQueries(2,o[p],p)}}}function nm(s,o){return s[Eu]?s[Cy][gi]=o:s[Eu]=o,s[Cy]=o,o}function mn(s,o,u){hg(0);const l=$r(null);try{o(s,u)}finally{$r(l)}}function dT(s){return s[$o]||(s[$o]=[])}function hT(s){return s.cleanup||(s.cleanup=[])}function a0(s,o){const u=s[Rs],l=u?u.get(Fi,null):null;l&&l.handleError(o)}function tc(s,o,u,l,h){for(let p=0;p<u.length;){const y=u[p++],w=u[p++];uT(s.data[y],o[y],l,w,h)}}function ia(s,o,u){const l=Vs(o,s);!function qu(s,o,u){s.setValue(o,u)}(s[gt],l,u)}function u0(s,o){const u=ri(o,s),l=u[je];!function JP(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])}(l,u);const h=u[bn];null!==h&&null===u[hs]&&(u[hs]=vs(h,u[Rs])),ja(l,u,u[Un])}function ja(s,o,u){zr(o);try{const l=s.viewQuery;null!==l&&mn(1,l,u);const h=s.template;null!==h&&Jb(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&lT(s,o),s.staticViewQueries&&mn(2,s.viewQuery,u);const p=s.components;null!==p&&function fT(s,o){for(let u=0;u<o.length;u++)u0(s,o[u])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[It]&=-5,wr()}}let pT=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(u,l,h){const p=typeof Zone>"u"?null:Zone.current,y=function Vy(s,o,u){const l=Object.create(wI);u&&(l.consumerAllowSignalWrites=!0),l.fn=s,l.schedule=o;const h=y=>{l.cleanupFn=y};return l.ref={notify:()=>Oy(l),run:()=>{if(l.dirty=!1,l.hasRun&&!Ny(l))return;l.hasRun=!0;const y=qp(l);try{l.cleanupFn(),l.cleanupFn=Xp,l.fn(h)}finally{Kc(l,y)}},cleanup:()=>l.cleanupFn()},l.ref}(u,D=>{this.all.has(D)&&this.queue.set(D,p)},h);let w;this.all.add(y),y.notify();const I=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=l?.onDestroy(I),{destroy:I}}flush(){if(0!==this.queue.size)for(const[u,l]of this.queue)this.queue.delete(u),l?l.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=pt({token:s,providedIn:"root",factory:()=>new s})}return s})();function im(s,o,u){let l=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?p=w:1==p?h=Pe(h,w):2==p&&(l=Pe(l,w+": "+o[++y]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=h:s.classesWithoutHost=h}function wf(s,o,u,l,h=!1){for(;null!==u;){const p=o[u.index];null!==p&&l.push(sn(p)),Mr(p)&&gT(p,l);const y=u.type;if(8&y)wf(s,o,u.child,l);else if(32&y){const w=Qi(u,o);let I;for(;I=w();)l.push(I)}else if(16&y){const w=mv(o,u);if(Array.isArray(w))l.push(...w);else{const I=ta(o[Jn]);wf(I[je],I,w,l,!0)}}u=h?u.projectionNext:u.next}return l}function gT(s,o){for(let u=Xn;u<s.length;u++){const l=s[u],h=l[je].firstChild;null!==h&&wf(l[je],l,h,o)}s[Br]!==s[bn]&&o.push(s[Br])}function Cf(s,o,u,l=!0){const h=o[uo],p=h.rendererFactory,y=h.afterRenderEventManager;p.begin?.(),y?.begin();try{sm(s,o,s.template,u)}catch(I){throw l&&a0(o,I),I}finally{p.end?.(),h.effectManager?.flush(),y?.end()}}function sm(s,o,u,l){const h=o[It];if(256!=(256&h)){o[uo].effectManager?.flush(),zr(o);try{tg(o),function Zy(s){return yt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Jb(s,o,u,2,l);const y=3==(3&h);if(y){const D=s.preOrderCheckHooks;null!==D&&zo(o,D,null)}else{const D=s.preOrderHooks;null!==D&&Ma(o,D,0,null),ol(o,0)}if(function _T(s){for(let o=VI(s);null!==o;o=hv(o)){if(!o[Iu])continue;const u=o[Ca];for(let l=0;l<u.length;l++){Mu(u[l])}}}(o),mT(o,2),null!==s.contentQueries&&lT(s,o),y){const D=s.contentCheckHooks;null!==D&&zo(o,D)}else{const D=s.contentHooks;null!==D&&Ma(o,D,1),ol(o,1)}!function OP(s,o){const u=s.hostBindingOpCodes;if(null===u)return;const l=Gb(o,xi);try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)js(~p);else{const y=p,w=u[++h],I=u[++h];lg(w,y),l.dirty=!1;const D=qp(l);try{I(2,o[y])}finally{Kc(l,D)}}}}finally{null===o[xi]&&Wb(o,xi),js(-1)}}(s,o);const w=s.components;null!==w&&vT(o,w,0);const I=s.viewQuery;if(null!==I&&mn(2,I,l),y){const D=s.viewCheckHooks;null!==D&&zo(o,D)}else{const D=s.viewHooks;null!==D&&Ma(o,D,2),ol(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[It]&=-73,Hy(o)}finally{wr()}}}function mT(s,o){for(let u=VI(s);null!==u;u=hv(u))for(let l=Xn;l<u.length;l++)yT(u[l],o)}function tO(s,o,u){yT(ri(o,s),u)}function yT(s,o){if(!function II(s){return 128==(128&s[It])}(s))return;const u=s[je],l=s[It];if(80&l&&0===o||1024&l||2===o)sm(u,s,u.template,s[Un]);else if(s[Ns]>0){mT(s,1);const h=u.components;null!==h&&vT(s,h,1)}}function vT(s,o,u){for(let l=0;l<o.length;l++)tO(s,o[l],u)}class Ef{get rootNodes(){const o=this._lView,u=o[je];return wf(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Un]}set context(o){this._lView[Un]=o}get destroyed(){return 256==(256&this._lView[It])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[fn];if(Mr(o)){const u=o[8],l=u?u.indexOf(this):-1;l>-1&&(Ng(o,l),Ra(u,l))}this._attachedToViewContainer=!1}fv(this._lView[je],this._lView)}onDestroy(o){!function Eh(s,o){if(256==(256&s[It]))throw new ee(911,!1);null===s[Ho]&&(s[Ho]=[]),s[Ho].push(o)}(this._lView,o)}markForCheck(){ff(this._cdRefInjectingView||this._lView)}detach(){this._lView[It]&=-129}reattach(){this._lView[It]|=128}detectChanges(){Cf(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zh(s,o){Zh(s,o,o[gt],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=o}}class nO extends Ef{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Cf(o[je],o,o[Un],!1)}checkNoChanges(){}get context(){return null}}class wT extends Jg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Ft(o);return new nc(u,this.ngModule)}}function CT(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class rO{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,l){l=Zt(l);const h=this.injector.get(o,Hv,l);return h!==Hv||u===Hv?h:this.parentInjector.get(o,u,l)}}class nc extends Ib{get inputs(){const o=this.componentDef,u=o.inputTransforms,l=CT(o.inputs);if(null!==u)for(const h of l)u.hasOwnProperty(h.propName)&&(h.transform=u[h.propName]);return l}get outputs(){return CT(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function pI(s){return s.map(Bp).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,l,h){let p=(h=h||this.ngModule)instanceof Do?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new rO(o,p):o,w=y.get(bb,null);if(null===w)throw new ee(407,!1);const L={rendererFactory:w,sanitizer:y.get(mP,null),effectManager:y.get(pT,null),afterRenderEventManager:y.get(Yv,null)},q=w.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",le=l?function tT(s,o,u,l){const p=l.get($b,!1)||u===Ms.ShadowDom,y=s.selectRootElement(o,p);return function NP(s){n0(s)}(y),y}(q,l,this.componentDef.encapsulation,y):Og(q,Y,function ET(s){const o=s.toLowerCase();return"svg"===o?eg:"math"===o?"math":null}(Y)),it=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let de=null;null!==le&&(de=vs(le,y,!0));const nt=t0(0,null,null,1,0,null,null,null,null,null,null),Mt=_f(null,nt,null,it,null,null,L,q,y,null,de);let an,Bi;zr(Mt);try{const ca=this.componentDef;let cd,p_=null;ca.findHostDirectiveDefs?(cd=[],p_=new Map,ca.findHostDirectiveDefs(ca,cd,p_),cd.push(ca)):cd=[ca];const gk=function sO(s,o){const u=s[je],l=Lt;return s[l]=o,ec(u,l,2,"#host",null)}(Mt,le),mk=function oO(s,o,u,l,h,p,y){const w=h[je];!function aO(s,o,u,l){for(const h of s)o.mergedAttrs=wu(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(im(o,o.mergedAttrs,!0),null!==u&&Kh(l,u,o))}(l,s,o,y);let I=null;null!==o&&(I=vs(o,h[Rs]));const D=p.rendererFactory.createRenderer(o,u);let M=16;u.signals?M=4096:u.onPush&&(M=64);const L=_f(h,Xb(u),null,M,h[s.index],s,p,D,null,null,I);return w.firstCreatePass&&s0(w,s,l.length-1),nm(h,L),h[s.index]=L}(gk,le,ca,cd,Mt,L,q);Bi=wh(nt,Lt),le&&function cO(s,o,u,l){if(l)yu(s,u,["ng-version",$v.full]);else{const{attrs:h,classes:p}=function pi(s){const o=[],u=[];let l=1,h=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++l]):8===h&&u.push(p);else{if(!ti(h))break;h=p}l++}return{attrs:o,classes:u}}(o.selectors[0]);h&&yu(s,u,h),p&&p.length>0&&ZI(s,u,p.join(" "))}}(q,ca,le,l),void 0!==u&&function lO(s,o,u){const l=s.projection=[];for(let h=0;h<o.length;h++){const p=u[h];l.push(null!=p?Array.from(p):null)}}(Bi,this.ngContentSelectors,u),an=function uO(s,o,u,l,h,p){const y=yr(),w=h[je],I=Hr(y,h);oT(w,h,y,u,null,l);for(let M=0;M<u.length;M++)si(Ko(h,w,y.directiveStart+M,y),h);aT(w,h,y),I&&si(I,h);const D=Ko(h,w,y.directiveStart+y.componentOffset,y);if(s[Un]=h[Un]=D,null!==p)for(const M of p)M(D,o);return Xv(w,y,s),D}(mk,ca,cd,p_,Mt,[dO]),ja(nt,Mt,null)}finally{wr()}return new iO(this.componentType,an,kl(Bi,Mt),Mt,Bi)}}class iO extends hP{constructor(o,u,l,h,p){super(),this.location=l,this._rootLView=h,this._tNode=p,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new nO(h),this.componentType=o}setInput(o,u){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),u))return;const p=this._rootLView;tc(p[je],p,h,o,u),this.previousInputValues.set(o,u),ff(ri(this._tNode.index,p))}}get injector(){return new tr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function dO(){const s=yr();Aa(ye()[je],s)}function If(s){let o=function IT(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const l=[s];for(;o;){let h;if(Pi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ee(903,!1);h=o.\u0275dir}if(h){if(u){l.push(h);const y=s;y.inputs=om(s.inputs),y.inputTransforms=om(s.inputTransforms),y.declaredInputs=om(s.declaredInputs),y.outputs=om(s.outputs);const w=h.hostBindings;w&&fO(s,w);const I=h.viewQuery,D=h.contentQueries;if(I&&bT(s,I),D&&TT(s,D),G(s.inputs,h.inputs),G(s.declaredInputs,h.declaredInputs),G(s.outputs,h.outputs),null!==h.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),G(y.inputTransforms,h.inputTransforms)),Pi(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const w=p[y];w&&w.ngInherit&&w(s),w===If&&(u=!1)}}o=Object.getPrototypeOf(o)}!function hO(s){let o=0,u=null;for(let l=s.length-1;l>=0;l--){const h=s[l];h.hostVars=o+=h.hostVars,h.hostAttrs=wu(h.hostAttrs,u=wu(u,h.hostAttrs))}}(l)}function om(s){return s===Mi?{}:s===Wt?[]:s}function bT(s,o){const u=s.viewQuery;s.viewQuery=u?(l,h)=>{o(l,h),u(l,h)}:o}function TT(s,o){const u=s.contentQueries;s.contentQueries=u?(l,h,p)=>{o(l,h,p),u(l,h,p)}:o}function fO(s,o){const u=s.hostBindings;s.hostBindings=u?(l,h)=>{o(l,h),u(l,h)}:o}function c0(s){const o=s.inputConfig,u={};for(const l in o)if(o.hasOwnProperty(l)){const h=o[l];Array.isArray(h)&&h[2]&&(u[l]=h[2])}s.inputTransforms=u}function am(s){return!!bf(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function bf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function xo(s,o,u){return s[o]=u}function Kr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function rc(s,o,u,l){const h=Kr(s,o,u);return Kr(s,o+1,l)||h}function l0(s,o,u,l){const h=ye();return Kr(h,Ou(),o)&&(Bt(),Mo(Cn(),h,s,o,u,l)),l0}function jl(s,o,u,l,h,p){const w=rc(s,function po(){return yt.lFrame.bindingIndex}(),u,h);return gs(2),w?o+re(u)+l+re(h)+p:Dt}function jT(s,o,u,l,h,p,y,w){const I=ye(),D=Bt(),M=s+Lt,L=D.firstCreatePass?function OO(s,o,u,l,h,p,y,w,I){const D=o.consts,M=ec(o,s,4,y||null,ho(D,w));r0(o,u,M,ho(D,I)),Aa(o,M);const L=M.tView=t0(2,M,l,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D,null);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,D,I,o,u,l,h,p,y):D.data[M];ps(L,!1);const q=$T(D,I,L,s);$s()&&Wh(D,I,q,L),si(q,I),nm(I,I[M]=cT(q,I,q,L)),Tu(L)&&e0(D,I,L),null!=y&&vf(I,L,w)}let $T=function HT(s,o,u,l){return Hs(!0),o[gt].createComment("")};function zT(s){return Da(function Wy(){return yt.lFrame.contextLView}(),Lt+s)}function y0(s,o,u){const l=ye();return Kr(l,Ou(),o)&&function Ji(s,o,u,l,h,p,y,w){const I=Hr(o,u);let M,D=o.inputs;!w&&null!=D&&(M=D[l])?(tc(s,u,M,l,h),Fs(o)&&function sT(s,o){const u=ri(o,s);16&u[It]||(u[It]|=64)}(u,o.index)):3&o.type&&(l=function UP(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),h=null!=y?y(h,o.value||"",l):h,p.setProperty(I,l,h))}(Bt(),Cn(),l,s,o,l[gt],u,!1),y0}function v0(s,o,u,l,h){const y=h?"class":"style";tc(s,u,o.inputs[y],y,l)}function gm(s,o,u,l){const h=ye(),p=Bt(),y=Lt+s,w=h[gt],I=p.firstCreatePass?function FO(s,o,u,l,h,p){const y=o.consts,I=ec(o,s,2,l,ho(y,h));return r0(o,u,I,ho(y,p)),null!==I.attrs&&im(I,I.attrs,!1),null!==I.mergedAttrs&&im(I,I.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,I),I}(y,p,h,o,u,l):p.data[y],D=GT(p,h,I,w,o,s);h[y]=D;const M=Tu(I);return ps(I,!0),Kh(w,D,I),32!=(32&I.flags)&&$s()&&Wh(p,h,D,I),0===function rg(){return yt.lFrame.elementDepthCount}()&&si(D,h),function ig(){yt.lFrame.elementDepthCount++}(),M&&(e0(p,h,I),Xv(p,I,h)),null!==l&&vf(h,I),gm}function mm(){let s=yr();ag()?function ug(){yt.lFrame.isParent=!1}():(s=s.parent,ps(s,!1));const o=s;(function xu(s){return yt.skipHydrationRootTNode===s})(o)&&function og(){yt.skipHydrationRootTNode=null}(),function zy(){yt.lFrame.elementDepthCount--}();const u=Bt();return u.firstCreatePass&&(Aa(u,s),ih(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function _o(s){return 0!=(8&s.flags)}(o)&&v0(u,o,ye(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Lu(s){return 0!=(16&s.flags)}(o)&&v0(u,o,ye(),o.stylesWithoutHost,!1),mm}function w0(s,o,u,l){return gm(s,o,u,l),mm(),w0}let GT=(s,o,u,l,h,p)=>(Hs(!0),Og(l,h,function pg(){return yt.lFrame.currentNamespace}()));function KT(){return ye()}function _m(s){return!!s&&"function"==typeof s.then}function YT(s){return!!s&&"function"==typeof s.subscribe}function I0(s,o,u,l){const h=ye(),p=Bt(),y=yr();return function JT(s,o,u,l,h,p,y){const w=Tu(l),D=s.firstCreatePass&&hT(s),M=o[Un],L=dT(o);let q=!0;if(3&l.type||y){const Se=Hr(l,o),ze=y?y(Se):Se,it=L.length,de=y?Mt=>y(sn(Mt[l.index])):l.index;let nt=null;if(!y&&w&&(nt=function jO(s,o,u,l){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===u&&h[p+1]===l){const w=o[$o],I=h[p+2];return w.length>I?w[I]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,l.index)),null!==nt)(nt.__ngLastListenerFn__||nt).__ngNextListenerFn__=p,nt.__ngLastListenerFn__=p,q=!1;else{p=XT(l,o,M,p,!1);const Mt=u.listen(ze,h,p);L.push(p,Mt),D&&D.push(h,de,it,it+1)}}else p=XT(l,o,M,p,!1);const Y=l.outputs;let le;if(q&&null!==Y&&(le=Y[h])){const Se=le.length;if(Se)for(let ze=0;ze<Se;ze+=2){const an=o[le[ze]][le[ze+1]].subscribe(p),Bi=L.length;L.push(p,an),D&&D.push(h,l.index,Bi,-(Bi+1))}}}(p,h,h[gt],y,s,o,l),I0}function b0(s,o,u,l){try{return fs(6,o,u),!1!==u(l)}catch(h){return a0(s,h),!1}finally{fs(7,o,u)}}function XT(s,o,u,l,h){return function p(y){if(y===Function)return l;ff(s.componentOffset>-1?ri(s.index,o):o);let I=b0(o,u,l,y),D=p.__ngNextListenerFn__;for(;D;)I=b0(o,u,D,y)&&I,D=D.__ngNextListenerFn__;return h&&!1===I&&y.preventDefault(),I}}function eD(s=1){return function sl(s){return(yt.lFrame.contextLView=function Sh(s,o){for(;s>0;)o=o[mi],s--;return o}(s,yt.lFrame.contextLView))[Un]}(s)}function ym(s,o){return s<<17|o<<2}function $a(s){return s>>17&32767}function M0(s){return 2|s}function ac(s){return(131068&s)>>2}function x0(s,o){return-131069&s|o<<2}function P0(s){return 1|s}function aD(s,o,u,l,h){const p=s[u+1],y=null===o;let w=l?$a(p):ac(p),I=!1;for(;0!==w&&(!1===I||y);){const M=s[w+1];YO(s[w],o)&&(I=!0,s[w+1]=l?P0(M):M0(M)),w=l?$a(M):ac(M)}I&&(s[u+1]=l?M0(p):P0(p))}function YO(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ka(s,o)>=0}const Er={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function _n(s){return s.substring(Er.key,Er.keyEnd)}function uD(s,o){const u=Er.textEnd;return u===o?-1:(o=Er.keyEnd=function XO(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,Er.key=o,u),on(s,o,u))}function on(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function O0(s,o){return function Ys(s,o,u,l){const h=ye(),p=Bt(),y=gs(2);p.firstUpdatePass&&fD(p,s,y,l),o!==Dt&&Kr(h,y,o)&&gD(p,p.data[Gr()],h,h[gt],s,h[y+1]=function uN(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=X(La(s)))),s}(o,u),l,y)}(s,o,null,!0),O0}function Ha(s){!function Qs(s,o,u,l){const h=Bt(),p=gs(2);h.firstUpdatePass&&fD(h,null,p,l);const y=ye();if(u!==Dt&&Kr(y,p,u)){const w=h.data[Gr()];if(_D(w,l)&&!hD(h,p)){let I=l?w.classesWithoutHost:w.stylesWithoutHost;null!==I&&(u=Pe(I,u||"")),v0(h,w,y,u,l)}else!function aN(s,o,u,l,h,p,y,w){h===Dt&&(h=Wt);let I=0,D=0,M=0<h.length?h[0]:null,L=0<p.length?p[0]:null;for(;null!==M||null!==L;){const q=I<h.length?h[I+1]:void 0,Y=D<p.length?p[D+1]:void 0;let Se,le=null;M===L?(I+=2,D+=2,q!==Y&&(le=L,Se=Y)):null===L||null!==M&&M<L?(I+=2,le=M):(D+=2,le=L,Se=Y),null!==le&&gD(s,o,u,l,le,Se,y,w),M=I<h.length?h[I]:null,L=D<p.length?p[D]:null}}(h,w,y,y[gt],y[p+1],y[p+1]=function sN(s,o,u){if(null==u||""===u)return Wt;const l=[],h=La(u);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(l,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(l,p,h[p]);else"string"==typeof h&&o(l,h);return l}(s,o,u),l,p)}}(oN,Po,s,!0)}function Po(s,o){for(let u=function QO(s){return function xf(s){Er.key=0,Er.keyEnd=0,Er.value=0,Er.valueEnd=0,Er.textEnd=s.length}(s),uD(s,on(s,0,Er.textEnd))}(o);u>=0;u=uD(o,u))vi(s,_n(o),!0)}function hD(s,o){return o>=s.expandoStartIndex}function fD(s,o,u,l){const h=s.data;if(null===h[u+1]){const p=h[Gr()],y=hD(s,u);_D(p,l)&&null===o&&!y&&(o=!1),o=function tN(s,o,u,l){const h=function Th(s){const o=yt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(u=Pf(u=N0(null,s,o,u,l),o.attrs,l),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(u=N0(h,s,o,u,l),null===p){let I=function nN(s,o,u){const l=u?o.classBindings:o.styleBindings;if(0!==ac(l))return s[$a(l)]}(s,o,l);void 0!==I&&Array.isArray(I)&&(I=N0(null,s,o,I[1],l),I=Pf(I,o.attrs,l),function rN(s,o,u,l){s[$a(u?o.classBindings:o.styleBindings)]=l}(s,o,l,I))}else p=function iN(s,o,u){let l;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)l=Pf(l,s[p].hostAttrs,u);return Pf(l,o.attrs,u)}(s,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,l),function ZO(s,o,u,l,h,p){let y=p?o.classBindings:o.styleBindings,w=$a(y),I=ac(y);s[l]=u;let M,D=!1;if(Array.isArray(u)?(M=u[1],(null===M||ka(u,M)>0)&&(D=!0)):M=u,h)if(0!==I){const q=$a(s[w+1]);s[l+1]=ym(q,w),0!==q&&(s[q+1]=x0(s[q+1],l)),s[w+1]=function WO(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=ym(w,0),0!==w&&(s[w+1]=x0(s[w+1],l)),w=l;else s[l+1]=ym(I,0),0===w?w=l:s[I+1]=x0(s[I+1],l),I=l;D&&(s[l+1]=M0(s[l+1])),aD(s,M,l,!0),aD(s,M,l,!1),function KO(s,o,u,l,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&ka(p,o)>=0&&(u[l+1]=P0(u[l+1]))}(o,M,s,l,p),y=ym(w,I),p?o.classBindings=y:o.styleBindings=y}(h,p,o,u,y,l)}}function N0(s,o,u,l,h){let p=null;const y=u.directiveEnd;let w=u.directiveStylingLast;for(-1===w?w=u.directiveStart:w++;w<y&&(p=o[w],l=Pf(l,p.hostAttrs,h),p!==s);)w++;return null!==s&&(u.directiveStylingLast=w),l}function Pf(s,o,u){const l=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),vi(s,y,!!u||o[++p]))}return void 0===s?null:s}function oN(s,o,u){const l=String(o);""!==l&&!l.includes(" ")&&vi(s,l,u)}function gD(s,o,u,l,h,p,y,w){if(!(3&o.type))return;const I=s.data,D=I[w+1],M=function qO(s){return 1==(1&s)}(D)?mD(I,o,u,h,ac(D),y):void 0;wm(M)||(wm(p)||function GO(s){return 2==(2&s)}(D)&&(p=mD(I,null,u,h,w,y)),function Nx(s,o,u,l,h){if(o)h?s.addClass(u,l):s.removeClass(u,l);else{let p=-1===l.indexOf("-")?void 0:Lh.DashCase;null==h?s.removeStyle(u,l,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Lh.Important),s.setStyle(u,l,h,p))}}(l,y,Vs(Gr(),u),h,p))}function mD(s,o,u,l,h,p){const y=null===o;let w;for(;h>0;){const I=s[h],D=Array.isArray(I),M=D?I[1]:I,L=null===M;let q=u[h+1];q===Dt&&(q=L?Wt:void 0);let Y=L?Rh(q,l):M===l?q:void 0;if(D&&!wm(Y)&&(Y=Rh(I,l)),wm(Y)&&(w=Y,y))return w;const le=s[h+1];h=y?$a(le):ac(le)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(w=Rh(I,l))}return w}function wm(s){return void 0!==s}function _D(s,o){return 0!=(s.flags&(o?8:16))}function yD(s,o=""){const u=ye(),l=Bt(),h=s+Lt,p=l.firstCreatePass?ec(l,h,1,o,null):l.data[h],y=vD(l,u,p,o,s);u[h]=y,$s()&&Wh(l,u,y,p),ps(p,!1)}let vD=(s,o,u,l,h)=>(Hs(!0),function Pg(s,o){return s.createText(o)}(o[gt],l));function R0(s){return uc("",s,""),R0}function uc(s,o,u){const l=ye(),h=function Bl(s,o,u,l){return Kr(s,Ou(),u)?o+re(u)+l:Dt}(l,s,o,u);return h!==Dt&&ia(l,Gr(),h),uc}function k0(s,o,u,l,h){const p=ye(),y=jl(p,s,o,u,l,h);return y!==Dt&&ia(p,Gr(),y),k0}const Ga=void 0;var vN=["en",[["a","p"],["AM","PM"],Ga],[["AM","PM"],Ga,Ga],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ga,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ga,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ga,"{1} 'at' {0}",Ga],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yN(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let lc={};function $0(s){const o=function z0(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Im(o);if(u)return u;const l=o.split("-")[0];if(u=Im(l),u)return u;if("en"===l)return vN;throw new ee(701,!1)}function H0(s){return $0(s)[Wa.PluralCase]}function Im(s){return s in lc||(lc[s]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[s]),lc[s]}var Wa=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Wa||{});const qa="en-US";let xD=qa;function uw(s,o,u,l,h){if(s=ve(s),Array.isArray(s))for(let p=0;p<s.length;p++)uw(s[p],o,u,l,h);else{const p=Bt(),y=ye(),w=yr();let I=xl(s)?s:ve(s.provide);const D=Wg(s),M=1048575&w.providerIndexes,L=w.directiveStart,q=w.providerIndexes>>20;if(xl(s)||!s.multi){const Y=new Go(D,h,Ao),le=Uf(I,o,h?M:M+q,L);-1===le?(Pa(Pn(w,y),p,I),Lf(p,s,o.length),o.push(I),w.directiveStart++,w.directiveEnd++,h&&(w.providerIndexes+=1048576),u.push(Y),y.push(Y)):(u[le]=Y,y[le]=Y)}else{const Y=Uf(I,o,M+q,L),le=Uf(I,o,M,M+q),ze=le>=0&&u[le];if(h&&!ze||!h&&!(Y>=0&&u[Y])){Pa(Pn(w,y),p,I);const it=function k3(s,o,u,l,h){const p=new Go(s,u,Ao);return p.multi=[],p.index=o,p.componentProviders=0,tS(p,h,l&&!u),p}(h?cw:HN,u.length,h,l,D);!h&&ze&&(u[le].providerFactory=it),Lf(p,s,o.length,0),o.push(I),w.directiveStart++,w.directiveEnd++,h&&(w.providerIndexes+=1048576),u.push(it),y.push(it)}else Lf(p,s,Y>-1?Y:le,tS(u[h?le:Y],D,!h&&l));!h&&l&&ze&&u[le].componentProviders++}}}function Lf(s,o,u,l){const h=xl(o),p=function XU(s){return!!s.useClass}(o);if(h||p){const I=(p?ve(o.useClass):o).prototype.ngOnDestroy;if(I){const D=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=D.indexOf(u);-1===M?D.push(u,[l,I]):D[M+1].push(l,I)}else D.push(u,I)}}}function tS(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Uf(s,o,u,l){for(let h=u;h<l;h++)if(o[h]===s)return h;return-1}function HN(s,o,u,l){return lw(this.multi,[])}function cw(s,o,u,l){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Ko(u,u[je],this.providerFactory.index,l);p=w.slice(0,y),lw(h,p);for(let I=y;I<w.length;I++)p.push(w[I])}else p=[],lw(h,p);return p}function lw(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Fm(s,o=[]){return u=>{u.providersResolver=(l,h)=>function aw(s,o,u){const l=Bt();if(l.firstCreatePass){const h=Pi(s);uw(u,l.data,l.blueprint,h,!0),uw(o,l.data,l.blueprint,h,!1)}}(l,h?h(s):s,o)}}class Ql{}class zN{}function GN(s,o){return new Lm(s,o??null,[])}class Lm extends Ql{constructor(o,u,l){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wT(this);const h=Ur(o);this._bootstrapComponents=ra(h.bootstrap),this._r3Injector=xb(o,u,[{provide:Ql,useValue:this},{provide:Jg,useValue:this.componentFactoryResolver},...l],X(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class dw extends zN{constructor(o){super(),this.moduleType=o}create(o){return new Lm(this.moduleType,o,[])}}class rS extends Ql{constructor(o){super(),this.componentFactoryResolver=new wT(this),this.instance=null;const u=new nf([...o.providers,{provide:Ql,useValue:this},{provide:Jg,useValue:this.componentFactoryResolver}],o.parent||Ju(),o.debugName,new Set(["environment"]));this.injector=u,o.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function iS(s,o,u=null){return new rS({providers:s,parent:o,debugName:u,runEnvironmentInitializers:!0}).injector}let hw=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const l=pb(0,u.type),h=l.length>0?iS([l],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,h)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=pt({token:s,providedIn:"environment",factory:()=>new s(Be(Do))})}return s})();function fw(s){s.getStandaloneInjector=o=>o.get(hw).getOrCreateStandaloneInjector(s)}function QN(s,o,u){const l=vr()+s,h=ye();return h[l]===Dt?xo(h,l,u?o.call(u):o()):function Tf(s,o){return s[o]}(h,l)}function JN(s,o,u,l){return cS(ye(),vr(),s,o,u,l)}function Vf(s,o){const u=s[o];return u===Dt?void 0:u}function cS(s,o,u,l,h,p){const y=o+u;return Kr(s,y,h)?xo(s,y+1,p?l.call(p,h):l(h)):Vf(s,y+1)}function dS(s,o,u,l,h,p,y,w){const I=o+u;return function Df(s,o,u,l,h){const p=rc(s,o,u,l);return Kr(s,o+2,h)||p}(s,I,h,p,y)?xo(s,I+3,w?l.call(w,h,p,y):l(h,p,y)):Vf(s,I+3)}function Za(s,o){const u=Bt();let l;const h=s+Lt;u.firstCreatePass?(l=function iR(s,o){if(o)for(let u=o.length-1;u>=0;u--){const l=o[u];if(s===l.name)return l}}(o,u.pipeRegistry),u.data[h]=l,l.onDestroy&&(u.destroyHooks??=[]).push(h,l.onDestroy)):l=u.data[h];const p=l.factory||(l.factory=Ls(l.type)),w=rn(Ao);try{const I=Cr(!1),D=p();return Cr(I),function kO(s,o,u,l){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=l}(u,ye(),h,D),D}finally{rn(w)}}function fS(s,o,u){const l=s+Lt,h=ye(),p=Da(h,l);return jf(h,l)?cS(h,vr(),o,p.transform,u,p):p.transform(u)}function pS(s,o,u,l,h){const p=s+Lt,y=ye(),w=Da(y,p);return jf(y,p)?dS(y,vr(),o,w.transform,u,l,h,w):w.transform(u,l,h)}function jf(s,o){return s[je].data[o].pure}function vw(){return this._results[Symbol.iterator]()}class ww{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new So)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ww.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=vw)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const h=function Zr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Ig(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let h=s[l],p=o[l];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(l._results,h,u))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function aR(s,o,u,l=!0){const h=o[je];if(function Sx(s,o,u,l){const h=Xn+l,p=u.length;l>0&&(u[h-1][gi]=o),l<p-Xn?(o[gi]=u[h],Xy(u,Xn+l,o)):(u.push(o),o[gi]=null),o[fn]=u;const y=o[wa];null!==y&&u!==y&&function Ax(s,o){const u=s[Ca];o[Jn]!==o[fn][fn][Jn]&&(s[Iu]=!0),null===u?s[Ca]=[o]:u.push(o)}(y,o);const w=o[Vr];null!==w&&w.insertView(s),o[It]|=128}(h,o,s,u),l){const p=_v(u,s),y=o[gt],w=Rg(y,s[Br]);null!==w&&function Hh(s,o,u,l,h,p){l[bn]=h,l[_r]=o,Zh(s,l,u,1,h,p)}(h,s[_r],y,o,w,p)}}let Jl=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=Ew}return s})();const Cw=Jl,mS=class extends Cw{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,u){return this.createEmbeddedViewImpl(o,u)}createEmbeddedViewImpl(o,u,l){const h=function gS(s,o,u,l){const h=o.tView,w=_f(s,h,u,4096&s[It]?4096:16,null,o,null,null,null,l?.injector??null,l?.hydrationInfo??null);w[wa]=s[o.index];const D=s[Vr];return null!==D&&(w[Vr]=D.createEmbeddedView(h)),ja(h,w,u),w}(this._declarationLView,this._declarationTContainer,o,{injector:u,hydrationInfo:l});return new Ef(h)}};function Ew(){return Xl(yr(),ye())}function Xl(s,o){return 4&s.type?new mS(o,s,kl(s,o)):null}let Hm=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=dR}return s})();function dR(){return Sw(yr(),ye())}const bw=Hm,Tw=class extends bw{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return kl(this._hostTNode,this._hostLView)}get injector(){return new tr(this._hostTNode,this._hostLView)}get parentInjector(){const o=qo(this._hostTNode,this._hostLView);if(ul(o)){const u=dn(o,this._hostLView),l=yi(o);return new tr(u[je].data[l+8],u)}return new tr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=vS(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-Xn}createEmbeddedView(o,u,l){let h,p;"number"==typeof l?h=l:null!=l&&(h=l.index,p=l.injector);const w=o.createEmbeddedViewImpl(u||{},p,null);return this.insertImpl(w,h,false),w}createComponent(o,u,l,h,p){const y=o&&!function Ws(s){return"function"==typeof s}(o);let w;if(y)w=u;else{const Se=u||{};w=Se.index,l=Se.injector,h=Se.projectableNodes,p=Se.environmentInjector||Se.ngModuleRef}const I=y?o:new nc(Ft(o)),D=l||this.parentInjector;if(!p&&null==I.ngModule){const ze=(y?D:this.parentInjector).get(Do,null);ze&&(p=ze)}Ft(I.componentType??{});const Y=I.create(D,h,null,p);return this.insertImpl(Y.hostView,w,false),Y}insert(o,u){return this.insertImpl(o,u,!1)}insertImpl(o,u,l){const h=o._lView;if(function nl(s){return Mr(s[fn])}(h)){const I=this.indexOf(o);if(-1!==I)this.detach(I);else{const D=h[fn],M=new Tw(D,D[_r],D[fn]);M.detach(M.indexOf(o))}}const y=this._adjustIndex(u),w=this._lContainer;return aR(w,h,y,!l),o.attachToViewContainerRef(),Xy(Dw(w),y,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=vS(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=Ng(this._lContainer,u);l&&(Ra(Dw(this._lContainer),u),fv(l[je],l))}detach(o){const u=this._adjustIndex(o,-1),l=Ng(this._lContainer,u);return l&&null!=Ra(Dw(this._lContainer),u)?new Ef(l):null}_adjustIndex(o,u=0){return o??this.length+u}};function vS(s){return s[8]}function Dw(s){return s[8]||(s[8]=[])}function Sw(s,o){let u;const l=o[s.index];return Mr(l)?u=l:(u=cT(l,o,null,s),o[s.index]=u,nm(o,u)),Aw(u,o,s,l),new Tw(u,s,o)}let Aw=function wS(s,o,u,l){if(s[Br])return;let h;h=8&u.type?sn(l):function hR(s,o){const u=s[gt],l=u.createComment(""),h=Hr(o,s);return Yu(u,Rg(u,h),l,function Px(s,o){return s.nextSibling(o)}(u,h),!1),l}(o,u),s[Br]=h};class Mw{constructor(o){this.queryList=o,this.matches=null}clone(){return new Mw(this.queryList)}setDirty(){this.queryList.setDirty()}}class ed{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<l;p++){const y=u.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new ed(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==TS(o,u).matches&&this.queries[u].setDirty()}}class Ro{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class xw{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const h=null!==u?u.length:0,p=this.getByIndex(l).embeddedTView(o,h);p&&(p.indexInDeclarationView=l,null!==u?u.push(p):u=[p])}return null!==u?new xw(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class $f{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new $f(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const p=l[h];this.matchTNodeWithReadOption(o,u,gR(u,p)),this.matchTNodeWithReadOption(o,u,vo(u,o,p,!1,!1))}else l===Jl?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,vo(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===lf||h===Hm||h===Jl&&4&u.type)this.addMatch(u.index,-2);else{const p=vo(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function gR(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function mR(s,o,u,l){return-1===u?function CS(s,o){return 11&s.type?kl(s,o):4&s.type?Xl(s,o):null}(o,s):-2===u?function Pw(s,o,u){return u===lf?kl(o,s):u===Jl?Xl(o,s):u===Hm?Sw(o,s):void 0}(s,o,l):Ko(s,s[je],u,o)}function ES(s,o,u,l){const h=o[Vr].queries[l];if(null===h.matches){const p=s.data,y=u.matches,w=[];for(let I=0;I<y.length;I+=2){const D=y[I];w.push(D<0?null:mR(o,p[D],y[I+1],u.metadata.read))}h.matches=w}return h.matches}function Ow(s,o,u,l){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const y=ES(s,o,h,u);for(let w=0;w<p.length;w+=2){const I=p[w];if(I>0)l.push(y[w/2]);else{const D=p[w+1],M=o[-I];for(let L=Xn;L<M.length;L++){const q=M[L];q[wa]===q[fn]&&Ow(q[je],q,D,l)}if(null!==M[Ca]){const L=M[Ca];for(let q=0;q<L.length;q++){const Y=L[q];Ow(Y[je],Y,D,l)}}}}}return l}function IS(s){const o=ye(),u=Bt(),l=Ky();hg(l+1);const h=TS(u,l);if(s.dirty&&function Ch(s){return 4==(4&s[It])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Ow(u,o,l,[]):ES(u,o,h,l);s.reset(p,pP),s.notifyOnChanges()}return!0}return!1}function zm(s,o,u,l){const h=Bt();if(h.firstCreatePass){const p=yr();(function qm(s,o,u){null===s.queries&&(s.queries=new xw),s.queries.track(new $f(o,u))})(h,new Ro(o,u,l),p.index),function Nw(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function Wm(s,o,u){const l=new ww(4==(4&u));(function nT(s,o,u,l){const h=dT(o);h.push(u),s.firstCreatePass&&hT(s).push(l,h.length-1)})(s,o,l,l.destroy),null===o[Vr]&&(o[Vr]=new ed),o[Vr].queries.push(new Mw(l))}(h,ye(),u)}function Gm(){return function bS(s,o){return s[Vr].queries[o].queryList}(ye(),Ky())}function TS(s,o){return s.queries.getByIndex(o)}function Zm(s,o){return Xl(s,o)}function Ym(s){return!!Ur(s)}const GS=new un("Application Initializer");let Zw=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l}),this.appInits=Ze(GS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const h of this.appInits){const p=h();if(_m(p))u.push(p);else if(YT(p)){const y=new Promise((w,I)=>{p.subscribe({complete:w,error:I})});u.push(y)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{l()}).catch(h=>{this.reject(h)}),0===u.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),WS=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const rr=new un("LocaleId",{providedIn:"root",factory:()=>Ze(rr,ht.Optional|ht.SkipSelf)||function Kw(){return typeof $localize<"u"&&$localize.locale||qa}()}),SR=new un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let ZS=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class AR{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let MR=(()=>{class s{compileModuleSync(u){return new dw(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),p=ra(Ur(u).declarations).reduce((y,w)=>{const I=Ft(w);return I&&y.push(new nc(I)),y},[]);return new AR(l,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const i_=new un(""),e1=new un("");let Gf,nC=(()=>{class s{constructor(u,l,h){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Gf||(function rC(s){Gf=s}(h),h.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Or.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,h){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,h){return[]}static#e=this.\u0275fac=function(l){return new(l||s)(Be(Or),Be(t1),Be(e1))};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac})}return s})(),t1=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return Gf?.findTestabilityInTree(this,u,l)??null}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),aa=null;const iC=new un("AllowMultipleToken"),sC=new un("PlatformDestroyListeners"),Wf=new un("appBootstrapListener");class i1{constructor(o,u){this.name=o,this.token=u}}function Js(s,o,u=[]){const l=`Platform: ${o}`,h=new un(l);return(p=[])=>{let y=uC();if(!y||y.injector.get(iC,!1)){const w=[...u,...p,{provide:h,useValue:!0}];s?s(w):function s1(s){if(aa&&!aa.get(iC,!1))throw new ee(400,!1);(function r1(){!function Yp(s){Ly=s}(()=>{throw new ee(600,!1)})})(),aa=s;const o=s.get(WR);(function oC(s){s.get(vb,null)?.forEach(u=>u())})(s)}(function GR(s=[],o){return Ks.create({name:o,providers:[{provide:z,useValue:"platform"},{provide:sC,useValue:new Set([()=>aa=null])},...s]})}(w,l))}return function aC(s){const o=uC();if(!o)throw new ee(401,!1);return o}()}}function uC(){return aa?.get(WR)??null}let WR=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const h=function qR(s="zone.js",o){return"noop"===s?new TP:"zone.js"===s?new Or(o):s}(l?.ngZone,function o1(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return h.run(()=>{const p=function WN(s,o,u){return new Lm(s,o,u)}(u.moduleType,this.injector,function QR(s){return[{provide:Or,useFactory:s},{provide:Ml,multi:!0,useFactory:()=>{const o=Ze(J3,{optional:!0});return()=>o.initialize()}},{provide:YR,useFactory:Q3},{provide:kb,useFactory:Fb}]}(()=>h)),y=p.injector.get(Fi,null);return h.runOutsideAngular(()=>{const w=h.onError.subscribe({next:I=>{y.handleError(I)}});p.onDestroy(()=>{rd(this._modules,p),w.unsubscribe()})}),function o_(s,o,u){try{const l=u();return _m(l)?l.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(y,h,()=>{const w=p.injector.get(Zw);return w.runInitializers(),w.donePromise.then(()=>(function TN(s){Qe(s,"Expected localeId to be defined"),"string"==typeof s&&(xD=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(rr,qa)||qa),this._moduleDoBootstrap(p),p))})})}bootstrapModule(u,l=[]){const h=ZR({},l);return function HR(s,o,u){const l=new dw(u);return Promise.resolve(l)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const l=u.injector.get(qf);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new ee(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(sC,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||s)(Be(Ks))};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function ZR(s,o){return Array.isArray(o)?o.reduce(ZR,s):{...s,...o}}let qf=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ze(YR),this.zoneIsStable=Ze(kb),this.componentTypes=[],this.components=[],this.isStable=Ze(ZS).hasPendingTasks.pipe((0,Fe.w)(u=>u?(0,Ee.of)(!1):this.zoneIsStable),(0,De.x)(),(0,Ne.B)()),this._injector=Ze(Do)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,l){const h=u instanceof Ib;if(!this._injector.get(Zw).done)throw!h&&va(u),new ee(405,!1);let y;y=h?u:this._injector.get(Jg).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const w=function ko(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Ql),D=y.create(Ks.NULL,[],l||y.selector,w),M=D.location.nativeElement,L=D.injector.get(i_,null);return L?.registerApplication(M),D.onDestroy(()=>{this.detachView(D.hostView),rd(this.components,D),L?.unregisterApplication(M)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;rd(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(Wf,[]);l.push(...this._bootstrapListeners),l.forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>rd(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ee(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function rd(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}const YR=new un("",{providedIn:"root",factory:()=>Ze(Fi).handleError.bind(void 0)});function Q3(){const s=Ze(Or),o=Ze(Fi);return u=>s.runOutsideAngular(()=>o.handleError(u))}let J3=(()=>{class s{constructor(){this.zone=Ze(Or),this.applicationRef=Ze(qf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||s)};static#t=this.\u0275prov=pt({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function u1(){return!1}let rV=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=Zf}return s})();function Zf(s){return function id(s,o,u){if(Fs(s)&&!u){const l=ri(s.index,o);return new Ef(l,l)}return 47&s.type?new Ef(o[Jn],o):null}(yr(),ye(),16==(16&s))}class XR{constructor(){}supports(o){return am(o)}create(o){return new ek(o)}}const Xi=(s,o)=>o;class ek{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Xi}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,h=0,p=null;for(;u||l;){const y=!l||u&&u.currentIndex<g1(l,h,p)?u:l,w=g1(y,h,p),I=y.currentIndex;if(y===l)h--,l=l._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{p||(p=[]);const D=w-h,M=I-h;if(D!=M){for(let q=0;q<D;q++){const Y=q<p.length?p[q]:p[q]=0,le=Y+q;M<=le&&le<D&&(p[q]=Y+1)}p[y.previousIndex]=M-D}}w!==I&&o(y,w,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!am(o))throw new ee(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],y=this._trackByFn(w,p),null!==u&&Object.is(u.trackById,y)?(l&&(u=this._verifyReinsertion(u,p,y,w)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,w),l=!0),u=u._next}else h=0,function _O(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,w=>{y=this._trackByFn(h,w),null!==u&&Object.is(u.trackById,y)?(l&&(u=this._verifyReinsertion(u,w,y,h)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,y,h),l=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new tk(u,l),p,h),o}_verifyReinsertion(o,u,l,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new u_),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new u_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class tk{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vc{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class u_{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new vc,this.map.set(u,l)),l.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function g1(s,o,u){const l=s.previousIndex;if(null===l)return l;let h=0;return u&&l<u.length&&(h=u[l]),l+o+h}class Es{constructor(){}supports(o){return o instanceof Map||bf(o)}create(){return new sV}}class sV{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||bf(o)))throw new ee(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,l);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const l=new nk(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class nk{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function m1(){return new es([new XR])}let es=(()=>{class s{static#e=this.\u0275prov=pt({token:s,providedIn:"root",factory:m1});constructor(u){this.factories=u}static create(u,l){if(null!=l){const h=l.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||m1()),deps:[[s,new $e,new oe]]}}find(u){const l=this.factories.find(h=>h.supports(u));if(null!=l)return l;throw new ee(901,!1)}}return s})();function c_(){return new Et([new Es])}let Et=(()=>{class s{static#e=this.\u0275prov=pt({token:s,providedIn:"root",factory:c_});constructor(u){this.factories=u}static create(u,l){if(l){const h=l.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||c_()),deps:[[s,new $e,new oe]]}}find(u){const l=this.factories.find(h=>h.supports(u));if(l)return l;throw new ee(901,!1)}}return s})();const rk=Js(null,"core",[]);let ik=(()=>{class s{constructor(u){}static#e=this.\u0275fac=function(l){return new(l||s)(Be(qf))};static#t=this.\u0275mod=jc({type:s});static#n=this.\u0275inj=Dn({})}return s})();function mC(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function fk(s){const o=Ft(s);if(!o)return null;const u=new nc(o);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3399:(st,Ce,k)=>{k.d(Ce,{Z:()=>Je});var d=k(9058),V=k(4537),F=k(7592),te=k(7879);class ge{constructor(Ae,Te){this._delegate=Ae,this.firebase=Te,(0,F._addComponent)(Ae,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=Ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this._delegate.automaticDataCollectionEnabled=Ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ae=>{this._delegate.checkDestroyed(),Ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Ae,Te=F._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const at=this._delegate.container.getProvider(Ae);return!at.isInitialized()&&"EXPLICIT"===(null===(tt=at.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&at.initialize(),at.getImmediate({identifier:Te})}_removeServiceInstance(Ae,Te=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ae).clearInstance(Te)}_addComponent(Ae){(0,F._addComponent)(this._delegate,Ae)}_addOrOverwriteComponent(Ae){(0,F._addOrOverwriteComponent)(this._delegate,Ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ne=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function De(){const ve=function Fe(ve){const Ae={},Te={__esModule:!0,initializeApp:function ee(Re,B={}){const we=F.initializeApp(Re,B);if((0,d.r3)(Ae,we.name))return Ae[we.name];const Ue=new ve(we,Te);return Ae[we.name]=Ue,Ue},app:at,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function re(Re){const B=Re.name,we=B.replace("-compat","");if(F._registerComponent(Re)&&"PUBLIC"===Re.type){const Ue=(ut=at())=>{if("function"!=typeof ut[we])throw Ne.create("invalid-app-argument",{appName:B});return ut[we]()};void 0!==Re.serviceProps&&(0,d.ZB)(Ue,Re.serviceProps),Te[we]=Ue,ve.prototype[we]=function(...ut){return this._getService.bind(this,B).apply(this,Re.multipleInstances?ut:[])}}return"PUBLIC"===Re.type?Te[we]:null},removeApp:function tt(Re){delete Ae[Re]},useAsService:function fe(Re,B){return"serverAuth"===B?null:B},modularAPIs:F}};function at(Re){if(!(0,d.r3)(Ae,Re=Re||F._DEFAULT_ENTRY_NAME))throw Ne.create("no-app",{appName:Re});return Ae[Re]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function he(){return Object.keys(Ae).map(Re=>Ae[Re])}}),at.App=ve,Te}(ge);return ve.INTERNAL=Object.assign(Object.assign({},ve.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function Ae(Te){(0,d.ZB)(ve,Te)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ve}(),G=new te.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ve=self.firebase.SDK_VERSION;ve&&ve.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=U;!function Me(ve){(0,F.registerVersion)("@firebase/app-compat","0.2.13",ve)}()},7592:(st,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>Dn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>pe,_addOrOverwriteComponent:()=>Oe,_apps:()=>ce,_clearComponents:()=>ft,_components:()=>se,_getProvider:()=>Ve,_registerComponent:()=>Qe,_removeServiceInstance:()=>en,deleteApp:()=>fi,getApp:()=>nn,getApps:()=>Fn,initializeApp:()=>In,onLog:()=>Ln,registerVersion:()=>or,setLogLevel:()=>Fr});var d=k(5861),V=k(4537),F=k(7879),te=k(9058),ge=k(1878);class Ee{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function Ne(He){const _e=He.getComponent();return"VERSION"===_e?.type}(Xe)){const ot=Xe.getImmediate();return`${ot.library}/${ot.version}`}return null}).filter(Xe=>Xe).join(" ")}}const Fe="@firebase/app",U=new F.Yd("@firebase/app"),ie="[DEFAULT]",ue={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ce=new Map,se=new Map;function pe(He,_e){try{He.container.addComponent(_e)}catch(Xe){U.debug(`Component ${_e.name} failed to register with FirebaseApp ${He.name}`,Xe)}}function Oe(He,_e){He.container.addOrOverwriteComponent(_e)}function Qe(He){const _e=He.name;if(se.has(_e))return U.debug(`There were multiple attempts to register component ${_e}.`),!1;se.set(_e,He);for(const Xe of ce.values())pe(Xe,He);return!0}function Ve(He,_e){const Xe=He.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),He.container.getProvider(_e)}function en(He,_e,Xe=ie){Ve(He,_e).clearInstance(Xe)}function ft(){se.clear()}const pt=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class tn{constructor(_e,Xe,ot){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=ot,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw pt.create("app-deleted",{appName:this._name})}}const Dn="9.23.0";function In(He,_e={}){let Xe=He;"object"!=typeof _e&&(_e={name:_e});const ot=Object.assign({name:ie,automaticDataCollectionEnabled:!1},_e),kt=ot.name;if("string"!=typeof kt||!kt)throw pt.create("bad-app-name",{appName:String(kt)});if(Xe||(Xe=(0,te.aH)()),!Xe)throw pt.create("no-options");const Vt=ce.get(kt);if(Vt){if((0,te.vZ)(Xe,Vt.options)&&(0,te.vZ)(ot,Vt.config))return Vt;throw pt.create("duplicate-app",{appName:kt})}const Wn=new V.H0(kt);for(const j of se.values())Wn.addComponent(j);const H=new tn(Xe,ot,Wn);return ce.set(kt,H),H}function nn(He=ie){const _e=ce.get(He);if(!_e&&He===ie&&(0,te.aH)())return In();if(!_e)throw pt.create("no-app",{appName:He});return _e}function Fn(){return Array.from(ce.values())}function fi(He){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,d.Z)(function*(He){const _e=He.name;ce.has(_e)&&(ce.delete(_e),yield Promise.all(He.container.getProviders().map(Xe=>Xe.delete())),He.isDeleted=!0)})).apply(this,arguments)}function or(He,_e,Xe){var ot;let kt=null!==(ot=ue[He])&&void 0!==ot?ot:He;Xe&&(kt+=`-${Xe}`);const Vt=kt.match(/\s|\//),Wn=_e.match(/\s|\//);if(Vt||Wn){const H=[`Unable to register library "${kt}" with version "${_e}":`];return Vt&&H.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),Vt&&Wn&&H.push("and"),Wn&&H.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void U.warn(H.join(" "))}Qe(new V.wA(`${kt}-version`,()=>({library:kt,version:_e}),"VERSION"))}function Ln(He,_e){if(null!==He&&"function"!=typeof He)throw pt.create("invalid-log-argument");(0,F.Am)(He,_e)}function Fr(He){(0,F.Ub)(He)}const ls="firebase-heartbeat-database",ht=1,_t="firebase-heartbeat-store";let bt=null;function rn(){return bt||(bt=(0,ge.X3)(ls,ht,{upgrade:(He,_e)=>{0===_e&&He.createObjectStore(_t)}}).catch(He=>{throw pt.create("idb-open",{originalErrorMessage:He.message})})),bt}function Lr(){return(Lr=(0,d.Z)(function*(He){try{return yield(yield rn()).transaction(_t).objectStore(_t).get(ds(He))}catch(_e){if(_e instanceof te.ZR)U.warn(_e.message);else{const Xe=pt.create("idb-get",{originalErrorMessage:_e?.message});U.warn(Xe.message)}}})).apply(this,arguments)}function Rt(He,_e){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,d.Z)(function*(He,_e){try{const ot=(yield rn()).transaction(_t,"readwrite");yield ot.objectStore(_t).put(_e,ds(He)),yield ot.done}catch(Xe){if(Xe instanceof te.ZR)U.warn(Xe.message);else{const ot=pt.create("idb-set",{originalErrorMessage:Xe?.message});U.warn(ot.message)}}})).apply(this,arguments)}function ds(He){return`${He.name}!${He.options.appId}`}class Ut{constructor(_e){this.container=_e,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new Wi(Xe),this._heartbeatsCachePromise=this._storage.read().then(ot=>(this._heartbeatsCache=ot,ot))}triggerHeartbeat(){var _e=this;return(0,d.Z)(function*(){const ot=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=An();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),_e._heartbeatsCache.lastSentHeartbeatDate!==kt&&!_e._heartbeatsCache.heartbeats.some(Vt=>Vt.date===kt))return _e._heartbeatsCache.heartbeats.push({date:kt,agent:ot}),_e._heartbeatsCache.heartbeats=_e._heartbeatsCache.heartbeats.filter(Vt=>{const Wn=new Date(Vt.date).valueOf();return Date.now()-Wn<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,d.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache||0===_e._heartbeatsCache.heartbeats.length)return"";const Xe=An(),{heartbeatsToSend:ot,unsentEntries:kt}=function Si(He,_e=1024){const Xe=[];let ot=He.slice();for(const kt of He){const Vt=Xe.find(Wn=>Wn.agent===kt.agent);if(Vt){if(Vt.dates.push(kt.date),qi(Xe)>_e){Vt.dates.pop();break}}else if(Xe.push({agent:kt.agent,dates:[kt.date]}),qi(Xe)>_e){Xe.pop();break}ot=ot.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:ot}}(_e._heartbeatsCache.heartbeats),Vt=(0,te.L)(JSON.stringify({version:2,heartbeats:ot}));return _e._heartbeatsCache.lastSentHeartbeatDate=Xe,kt.length>0?(_e._heartbeatsCache.heartbeats=kt,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache.heartbeats=[],_e._storage.overwrite(_e._heartbeatsCache)),Vt})()}}function An(){return(new Date).toISOString().substring(0,10)}class Wi{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,d.Z)(function*(){return(yield _e._canUseIndexedDBPromise)&&(yield function ei(He){return Lr.apply(this,arguments)}(_e.app))||{heartbeats:[]}})()}overwrite(_e){var Xe=this;return(0,d.Z)(function*(){var ot;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(ot=_e.lastSentHeartbeatDate)&&void 0!==ot?ot:Vt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}})()}add(_e){var Xe=this;return(0,d.Z)(function*(){var ot;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(ot=_e.lastSentHeartbeatDate)&&void 0!==ot?ot:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,..._e.heartbeats]})}})()}}function qi(He){return(0,te.L)(JSON.stringify({version:2,heartbeats:He})).length}!function ar(He){Qe(new V.wA("platform-logger",_e=>new Ee(_e),"PRIVATE")),Qe(new V.wA("heartbeat",_e=>new Ut(_e),"PRIVATE")),or(Fe,"0.9.13",He),or(Fe,"0.9.13","esm2017"),or("fire-js","")}("")},120:(st,Ce,k)=>{k.d(Ce,{Z:()=>d.Z});var d=k(3399);d.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(st,Ce,k)=>{k.r(Ce);var d=k(5861),V=k(3399),F=k(6710),te=k(9058),Ne=(k(7592),k(7879),k(4537));function Fe(){return window}function G(){return G=(0,d.Z)(function*(O,N,x){var K;const{BuildInfo:me}=Fe();(0,F.as)(N.sessionId,"AuthEvent did not contain a session ID");const Be=yield function Te(O){return tt.apply(this,arguments)}(N.sessionId),vt={};return(0,F.at)()?vt.ibi=me.packageName:(0,F.au)()?vt.apn=me.packageName:(0,F.av)(O,"operation-not-supported-in-this-environment"),me.displayName&&(vt.appDisplayName=me.displayName),vt.sessionId=Be,(0,F.aw)(O,x,N.type,void 0,null!==(K=N.eventId)&&void 0!==K?K:void 0,vt)}),G.apply(this,arguments)}function Pe(){return(Pe=(0,d.Z)(function*(O){const{BuildInfo:N}=Fe(),x={};(0,F.at)()?x.iosBundleId=N.packageName:(0,F.au)()?x.androidPackageName=N.packageName:(0,F.av)(O,"operation-not-supported-in-this-environment"),yield(0,F.ax)(O,x)})).apply(this,arguments)}function ve(){return(ve=(0,d.Z)(function*(O,N,x){const{cordova:K}=Fe();let me=()=>{};try{yield new Promise((Be,vt)=>{let Ze=null;function Zt(){var xt;Be();const Ai=null===(xt=K.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof Ai&&Ai(),"function"==typeof x?.close&&x.close()}function wt(){Ze||(Ze=window.setTimeout(()=>{vt((0,F.az)(O,"redirect-cancelled-by-user"))},2e3))}function hn(){"visible"===document?.visibilityState&&wt()}N.addPassiveListener(Zt),document.addEventListener("resume",wt,!1),(0,F.au)()&&document.addEventListener("visibilitychange",hn,!1),me=()=>{N.removePassiveListener(Zt),document.removeEventListener("resume",wt,!1),document.removeEventListener("visibilitychange",hn,!1),Ze&&window.clearTimeout(Ze)}})}finally{me()}})).apply(this,arguments)}function tt(){return(tt=(0,d.Z)(function*(O){const N=function at(O){if((0,F.as)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const N=new ArrayBuffer(O.length),x=new Uint8Array(N);for(let K=0;K<O.length;K++)x[K]=O.charCodeAt(K);return x}(O),x=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(x)).map(me=>me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class he extends F.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(N)),super.onEvent(N)}initialized(){var N=this;return(0,d.Z)(function*(){yield N.initPromise})()}}function Re(O){return B.apply(this,arguments)}function B(){return(B=(0,d.Z)(function*(O){const N=yield ut()._get(Xt(O));return N&&(yield ut()._remove(Xt(O))),N})).apply(this,arguments)}function Ue(){const O=[];for(let x=0;x<20;x++){const K=Math.floor(62*Math.random());O.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(K))}return O.join("")}function ut(){return(0,F.aC)(F.b)}function Xt(O){return(0,F.aD)("authEvent",O.config.apiKey,O.name)}function En(O){if(!O?.includes("?"))return{};const[N,...x]=O.split("?");return(0,te.zd)(x.join("?"))}const ie=class kr{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(N){var x=this;return(0,d.Z)(function*(){const K=N._key();let me=x.eventManagers.get(K);return me||(me=new he(N),x.eventManagers.set(K,me),x.attachCallbackListeners(N,me)),me})()}_openPopup(N){(0,F.av)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,x,K,me){var Be=this;return(0,d.Z)(function*(){!function Ae(O){var N,x,K,me,Be,vt,Ze,Zt,wt,hn;const xt=Fe();(0,F.aA)("function"==typeof(null===(N=xt?.universalLinks)||void 0===N?void 0:N.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.aA)(typeof(null===(x=xt?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.aA)("function"==typeof(null===(Be=null===(me=null===(K=xt?.cordova)||void 0===K?void 0:K.plugins)||void 0===me?void 0:me.browsertab)||void 0===Be?void 0:Be.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===(Zt=null===(Ze=null===(vt=xt?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===Zt?void 0:Zt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===(hn=null===(wt=xt?.cordova)||void 0===wt?void 0:wt.InAppBrowser)||void 0===hn?void 0:hn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const vt=yield Be._initialize(N);yield vt.initialized(),vt.resetRedirect(),(0,F.aG)(),yield Be._originValidation(N);const Ze=function re(O,N,x=null){return{type:N,eventId:x,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:O.tenantId,error:(0,F.az)(O,"no-auth-event")}}(N,K,me);yield function fe(O,N){return ut()._set(Xt(O),N)}(N,Ze);const Zt=yield function U(O,N,x){return G.apply(this,arguments)}(N,Ze,x),wt=yield function Me(O){const{cordova:N}=Fe();return new Promise(x=>{N.plugins.browsertab.isAvailable(K=>{let me=null;K?N.plugins.browsertab.openUrl(O):me=N.InAppBrowser.open(O,(0,F.ay)()?"_blank":"_system","location=yes"),x(me)})})}(Zt);return function Je(O,N,x){return ve.apply(this,arguments)}(N,vt,wt)})()}_isIframeWebStorageSupported(N,x){throw new Error("Method not implemented.")}_originValidation(N){const x=N._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function X(O){return Pe.apply(this,arguments)}(N)),this.originValidationPromises[x]}attachCallbackListeners(N,x){const{universalLinks:K,handleOpenURL:me,BuildInfo:Be}=Fe(),vt=setTimeout((0,d.Z)(function*(){yield Re(N),x.onEvent(ue())}),500),Ze=function(){var hn=(0,d.Z)(function*(xt){clearTimeout(vt);const Ai=yield Re(N);let _u=null;Ai&&xt?.url&&(_u=function we(O,N){var x,K;const me=function wn(O){const N=En(O),x=N.link?decodeURIComponent(N.link):void 0,K=En(x).link,me=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return En(me).link||me||K||x||O}(N);if(me.includes("/__/auth/callback")){const Be=En(me),vt=Be.firebaseError?function kn(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(Be.firebaseError)):null,Ze=null===(K=null===(x=vt?.code)||void 0===x?void 0:x.split("auth/"))||void 0===K?void 0:K[1],Zt=Ze?(0,F.az)(Ze):null;return Zt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:me,postBody:null}}return null}(Ai,xt.url)),x.onEvent(_u||ue())});return function(Ai){return hn.apply(this,arguments)}}();typeof K<"u"&&"function"==typeof K.subscribe&&K.subscribe(null,Ze);const Zt=me,wt=`${Be.packageName.toLowerCase()}://`;Fe().handleOpenURL=function(){var hn=(0,d.Z)(function*(xt){if(xt.toLowerCase().startsWith(wt)&&Ze({url:xt}),"function"==typeof Zt)try{Zt(xt)}catch(Ai){console.error(Ai)}});return function(xt){return hn.apply(this,arguments)}}()}};function ue(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.az)("no-auth-event")}}function Qe(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function en(O=(0,te.z$)()){return!("file:"!==Qe()&&"ionic:"!==Qe()&&"capacitor:"!==Qe()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dn(){try{const O=self.localStorage,N=F.aL();if(O)return O.setItem(N,"1"),O.removeItem(N),!function tn(O=(0,te.z$)()){return function qt(){return(0,te.w1)()&&11===document?.documentMode}()||function pt(O=(0,te.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,te.hl)()}catch{return In()&&(0,te.hl)()}return!1}function In(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function nn(){return(function Ve(){return"http:"===Qe()||"https:"===Qe()}()||(0,te.ru)()||en())&&!function ft(){return(0,te.b$)()||(0,te.UG)()}()&&Dn()&&!In()}function Fn(){return en()&&typeof document<"u"}function Ar(){return(Ar=(0,d.Z)(function*(){return!!Fn()&&new Promise(O=>{const N=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),O(!0)})})})).apply(this,arguments)}const Ln={LOCAL:"local",NONE:"none",SESSION:"session"},Fr=F.aA,ls="persistence";function _t(O){return bt.apply(this,arguments)}function bt(){return(bt=(0,d.Z)(function*(O){yield O._initializationPromise;const N=ei(),x=F.aD(ls,O.config.apiKey,O.name);N&&N.setItem(x,O._getPersistence())})).apply(this,arguments)}function ei(){var O;try{return(null===(O=function or(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Lr=F.aA;class Rt{constructor(){this.browserResolver=F.aC(F.k),this.cordovaResolver=F.aC(ie),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(N){var x=this;return(0,d.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,x,K,me){var Be=this;return(0,d.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openPopup(N,x,K,me)})()}_openRedirect(N,x,K,me){var Be=this;return(0,d.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openRedirect(N,x,K,me)})()}_isIframeWebStorageSupported(N,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,x)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return Fn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Lr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,d.Z)(function*(){if(N.underlyingResolver)return;const x=yield function fi(){return Ar.apply(this,arguments)}();N.underlyingResolver=x?N.cordovaResolver:N.browserResolver})()}}function Sn(O){return O.unwrap()}function Gt(O){return Ut(O)}function Ut(O){const{_tokenResponse:N}=O instanceof te.ZR?O.customData:O;if(!N)return null;if(!(O instanceof te.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return F.P.credentialFromResult(O);const x=N.providerId;if(!x||x===F.p.PASSWORD)return null;let K;switch(x){case F.p.GOOGLE:K=F.V;break;case F.p.FACEBOOK:K=F.U;break;case F.p.GITHUB:K=F.W;break;case F.p.TWITTER:K=F.Z;break;default:const{oauthIdToken:me,oauthAccessToken:Be,oauthTokenSecret:vt,pendingToken:Ze,nonce:Zt}=N;return Be||vt||me||Ze?Ze?x.startsWith("saml.")?F.aO._create(x,Ze):F.L._fromParams({providerId:x,signInMethod:x,pendingToken:Ze,idToken:me,accessToken:Be}):new F.X(x).credential({idToken:me,accessToken:Be,rawNonce:Zt}):null}return O instanceof te.ZR?K.credentialFromError(O):K.credentialFromResult(O)}function An(O,N){return N.catch(x=>{throw x instanceof te.ZR&&function so(O,N){var x;const K=null===(x=N.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===N?.code)N.resolver=new qi(O,F.aq(O,N));else if(K){const me=Ut(N),Be=N;me&&(Be.credential=me,Be.tenantId=K.tenantId||void 0,Be.email=K.email||void 0,Be.phoneNumber=K.phoneNumber||void 0)}}(O,x),x}).then(x=>{const me=x.user;return{operationType:x.operationType,credential:Gt(x),additionalUserInfo:F.ao(x),user:ar.getOrCreate(me)}})}function Si(O,N){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,d.Z)(function*(O,N){const x=yield N;return{verificationId:x.verificationId,confirm:K=>An(O,x.confirm(K))}})).apply(this,arguments)}class qi{constructor(N,x){this.resolver=x,this.auth=function ds(O){return O.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return An(Sn(this.auth),this.resolver.resolveSignIn(N))}}class ar{constructor(N){this._delegate=N,this.multiFactor=F.ar(N)}static getOrCreate(N){return ar.USER_MAP.has(N)||ar.USER_MAP.set(N,new ar(N)),ar.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var x=this;return(0,d.Z)(function*(){return An(x.auth,F.a0(x._delegate,N))})()}linkWithPhoneNumber(N,x){var K=this;return(0,d.Z)(function*(){return Si(K.auth,F.l(K._delegate,N,x))})()}linkWithPopup(N){var x=this;return(0,d.Z)(function*(){return An(x.auth,F.d(x._delegate,N,Rt))})()}linkWithRedirect(N){var x=this;return(0,d.Z)(function*(){return yield _t(F.aH(x.auth)),F.g(x._delegate,N,Rt)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var x=this;return(0,d.Z)(function*(){return An(x.auth,F.a1(x._delegate,N))})()}reauthenticateWithPhoneNumber(N,x){return Si(this.auth,F.r(this._delegate,N,x))}reauthenticateWithPopup(N){return An(this.auth,F.e(this._delegate,N,Rt))}reauthenticateWithRedirect(N){var x=this;return(0,d.Z)(function*(){return yield _t(F.aH(x.auth)),F.h(x._delegate,N,Rt)})()}sendEmailVerification(N){return F.ae(this._delegate,N)}unlink(N){var x=this;return(0,d.Z)(function*(){return yield F.an(x._delegate,N),x})()}updateEmail(N){return F.aj(this._delegate,N)}updatePassword(N){return F.ak(this._delegate,N)}updatePhoneNumber(N){return F.u(this._delegate,N)}updateProfile(N){return F.ai(this._delegate,N)}verifyBeforeUpdateEmail(N,x){return F.af(this._delegate,N,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ar.USER_MAP=new WeakMap;const He=F.aA;let _e=(()=>{class O{constructor(x,K){if(this.app=x,K.isInitialized())return this._delegate=K.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:me}=x.options;He(me,"invalid-api-key",{appName:x.name}),He(me,"invalid-api-key",{appName:x.name});const Be=typeof window<"u"?Rt:void 0;this._delegate=K.initialize({options:{persistence:ot(me,x.name),popupRedirectResolver:Be}}),this._delegate._updateErrorMap(F.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ar.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,K){F.I(this._delegate,x,K)}applyActionCode(x){return F.a5(this._delegate,x)}checkActionCode(x){return F.a6(this._delegate,x)}confirmPasswordReset(x,K){return F.a4(this._delegate,x,K)}createUserWithEmailAndPassword(x,K){var me=this;return(0,d.Z)(function*(){return An(me._delegate,F.a8(me._delegate,x,K))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return F.ad(this._delegate,x)}isSignInWithEmailLink(x){return F.ab(this._delegate,x)}getRedirectResult(){var x=this;return(0,d.Z)(function*(){He(nn(),x._delegate,"operation-not-supported-in-this-environment");const K=yield F.j(x._delegate,Rt);return K?An(x._delegate,Promise.resolve(K)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function ce(O,N){(0,F.aH)(O)._logFramework(N)}(this._delegate,x)}onAuthStateChanged(x,K,me){const{next:Be,error:vt,complete:Ze}=Xe(x,K,me);return this._delegate.onAuthStateChanged(Be,vt,Ze)}onIdTokenChanged(x,K,me){const{next:Be,error:vt,complete:Ze}=Xe(x,K,me);return this._delegate.onIdTokenChanged(Be,vt,Ze)}sendSignInLinkToEmail(x,K){return F.aa(this._delegate,x,K)}sendPasswordResetEmail(x,K){return F.a3(this._delegate,x,K||void 0)}setPersistence(x){var K=this;return(0,d.Z)(function*(){let me;switch(function ht(O,N){Fr(Object.values(Ln).includes(N),O,"invalid-persistence-type"),(0,te.b$)()?Fr(N!==Ln.SESSION,O,"unsupported-persistence-type"):(0,te.UG)()?Fr(N===Ln.NONE,O,"unsupported-persistence-type"):In()?Fr(N===Ln.NONE||N===Ln.LOCAL&&(0,te.hl)(),O,"unsupported-persistence-type"):Fr(N===Ln.NONE||Dn(),O,"unsupported-persistence-type")}(K._delegate,x),x){case Ln.SESSION:me=F.a;break;case Ln.LOCAL:me=(yield F.aC(F.i)._isAvailable())?F.i:F.b;break;case Ln.NONE:me=F.N;break;default:return F.av("argument-error",{appName:K._delegate.name})}return K._delegate.setPersistence(me)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return An(this._delegate,F._(this._delegate))}signInWithCredential(x){return An(this._delegate,F.$(this._delegate,x))}signInWithCustomToken(x){return An(this._delegate,F.a2(this._delegate,x))}signInWithEmailAndPassword(x,K){return An(this._delegate,F.a9(this._delegate,x,K))}signInWithEmailLink(x,K){return An(this._delegate,F.ac(this._delegate,x,K))}signInWithPhoneNumber(x,K){return Si(this._delegate,F.s(this._delegate,x,K))}signInWithPopup(x){var K=this;return(0,d.Z)(function*(){return He(nn(),K._delegate,"operation-not-supported-in-this-environment"),An(K._delegate,F.c(K._delegate,x,Rt))})()}signInWithRedirect(x){var K=this;return(0,d.Z)(function*(){return He(nn(),K._delegate,"operation-not-supported-in-this-environment"),yield _t(K._delegate),F.f(K._delegate,x,Rt)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return F.a7(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=Ln,O})();function Xe(O,N,x){let K=O;"function"!=typeof O&&({next:K,error:N,complete:x}=O);const me=K;return{next:vt=>me(vt&&ar.getOrCreate(vt)),error:N,complete:x}}function ot(O,N){const x=function rn(O,N){const x=ei();if(!x)return[];const K=F.aD(ls,O,N);switch(x.getItem(K)){case Ln.NONE:return[F.N];case Ln.LOCAL:return[F.i,F.a];case Ln.SESSION:return[F.a];default:return[]}}(O,N);if(typeof self<"u"&&!x.includes(F.i)&&x.push(F.i),typeof window<"u")for(const K of[F.b,F.a])x.includes(K)||x.push(K);return x.includes(F.N)||x.push(F.N),x}class kt{constructor(){this.providerId="phone",this._delegate=new F.P(Sn(V.Z.auth()))}static credential(N,x){return F.P.credential(N,x)}verifyPhoneNumber(N,x){return this._delegate.verifyPhoneNumber(N,x)}unwrap(){return this._delegate}}kt.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,kt.PROVIDER_ID=F.P.PROVIDER_ID;const Vt=F.aA;class Wn{constructor(N,x,K=V.Z.app()){var me;Vt(null===(me=K.options)||void 0===me?void 0:me.apiKey,"invalid-api-key",{appName:K.name}),this._delegate=new F.R(N,x,K.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function j(O){O.INTERNAL.registerComponent(new Ne.wA("auth-compat",N=>{const x=N.getProvider("app-compat").getImmediate(),K=N.getProvider("auth");return new _e(x,K)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.Q,FacebookAuthProvider:F.U,GithubAuthProvider:F.W,GoogleAuthProvider:F.V,OAuthProvider:F.X,SAMLAuthProvider:F.Y,PhoneAuthProvider:kt,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:Wn,TwitterAuthProvider:F.Z,Auth:_e,AuthCredential:F.J,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},4537:(st,Ce,k)=>{k.d(Ce,{H0:()=>Fe,wA:()=>F});var d=k(5861),V=k(9058);class F{constructor(U,G,X){this.name=U,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const te="[DEFAULT]";class ge{constructor(U,G){this.name=U,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const G=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(G)){const X=new V.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const Pe=this.getOrInitializeService({instanceIdentifier:G});Pe&&X.resolve(Pe)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(U){var G;const X=this.normalizeInstanceIdentifier(U?.identifier),Pe=null!==(G=U?.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Pe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Me){if(Pe)return null;throw Me}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function Ne(De){return"EAGER"===De.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[G,X]of this.instancesDeferred.entries()){const Pe=this.normalizeInstanceIdentifier(G);try{const Me=this.getOrInitializeService({instanceIdentifier:Pe});X.resolve(Me)}catch{}}}}clearInstance(U=te){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,d.Z)(function*(){const G=Array.from(U.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=te){return this.instances.has(U)}getOptions(U=te){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:G={}}=U,X=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Pe=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[Me,Je]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Me)&&Je.resolve(Pe);return Pe}onInit(U,G){var X;const Pe=this.normalizeInstanceIdentifier(G),Me=null!==(X=this.onInitCallbacks.get(Pe))&&void 0!==X?X:new Set;Me.add(U),this.onInitCallbacks.set(Pe,Me);const Je=this.instances.get(Pe);return Je&&U(Je,Pe),()=>{Me.delete(U)}}invokeOnInitCallbacks(U,G){const X=this.onInitCallbacks.get(G);if(X)for(const Pe of X)try{Pe(U,G)}catch{}}getOrInitializeService({instanceIdentifier:U,options:G={}}){let X=this.instances.get(U);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(De=U,De===te?void 0:De),options:G}),this.instances.set(U,X),this.instancesOptions.set(U,G),this.invokeOnInitCallbacks(X,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,X)}catch{}var De;return X||null}normalizeInstanceIdentifier(U=te){return this.component?this.component.multipleInstances?U:te:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const G=this.getProvider(U.name);if(G.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);G.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const G=new ge(U,this);return this.providers.set(U,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(st,Ce,k)=>{k.d(Ce,{Am:()=>De,Ub:()=>Fe,Yd:()=>Ne,in:()=>V});const d=[];var V=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(V||{});const F={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},te=V.INFO,ge={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},Ee=(U,G,...X)=>{if(G<U.logLevel)return;const Pe=(new Date).toISOString(),Me=ge[G];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Me](`[${Pe}]  ${U.name}:`,...X)};class Ne{constructor(G){this.name=G,this._logLevel=te,this._logHandler=Ee,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in V))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?F[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...G),this._logHandler(this,V.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...G),this._logHandler(this,V.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,V.INFO,...G),this._logHandler(this,V.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,V.WARN,...G),this._logHandler(this,V.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...G),this._logHandler(this,V.ERROR,...G)}}function Fe(U){d.forEach(G=>{G.setLogLevel(U)})}function De(U,G){for(const X of d){let Pe=null;G&&G.level&&(Pe=F[G.level]),X.userLogHandler=null===U?null:(Me,Je,...ve)=>{const Ae=ve.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch{return null}}).filter(Te=>Te).join(" ");Je>=(Pe??Me.logLevel)&&U({level:V[Je].toLowerCase(),message:Ae,args:ve,type:Me.name})}}}},1878:(st,Ce,k)=>{k.d(Ce,{X3:()=>at});var d=k(5861);const V=(B,we)=>we.some(Ue=>B instanceof Ue);let F,te;const Ne=new WeakMap,Fe=new WeakMap,De=new WeakMap,U=new WeakMap,G=new WeakMap;let Me={get(B,we,Ue){if(B instanceof IDBTransaction){if("done"===we)return Fe.get(B);if("objectStoreNames"===we)return B.objectStoreNames||De.get(B);if("store"===we)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return Te(B[we])},set:(B,we,Ue)=>(B[we]=Ue,!0),has:(B,we)=>B instanceof IDBTransaction&&("done"===we||"store"===we)||we in B};function Ae(B){return"function"==typeof B?function ve(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...we){return B.apply(tt(this),we),Te(Ne.get(this))}:function(...we){return Te(B.apply(tt(this),we))}:function(we,...Ue){const ut=B.call(tt(this),we,...Ue);return De.set(ut,we.sort?we.sort():[we]),Te(ut)}}(B):(B instanceof IDBTransaction&&function Pe(B){if(Fe.has(B))return;const we=new Promise((Ue,ut)=>{const Xt=()=>{B.removeEventListener("complete",kn),B.removeEventListener("error",wn),B.removeEventListener("abort",wn)},kn=()=>{Ue(),Xt()},wn=()=>{ut(B.error||new DOMException("AbortError","AbortError")),Xt()};B.addEventListener("complete",kn),B.addEventListener("error",wn),B.addEventListener("abort",wn)});Fe.set(B,we)}(B),V(B,function ge(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,Me):B)}function Te(B){if(B instanceof IDBRequest)return function X(B){const we=new Promise((Ue,ut)=>{const Xt=()=>{B.removeEventListener("success",kn),B.removeEventListener("error",wn)},kn=()=>{Ue(Te(B.result)),Xt()},wn=()=>{ut(B.error),Xt()};B.addEventListener("success",kn),B.addEventListener("error",wn)});return we.then(Ue=>{Ue instanceof IDBCursor&&Ne.set(Ue,B)}).catch(()=>{}),G.set(we,B),we}(B);if(U.has(B))return U.get(B);const we=Ae(B);return we!==B&&(U.set(B,we),G.set(we,B)),we}const tt=B=>G.get(B);function at(B,we,{blocked:Ue,upgrade:ut,blocking:Xt,terminated:kn}={}){const wn=indexedDB.open(B,we),En=Te(wn);return ut&&wn.addEventListener("upgradeneeded",ln=>{ut(Te(wn.result),ln.oldVersion,ln.newVersion,Te(wn.transaction),ln)}),Ue&&wn.addEventListener("blocked",ln=>Ue(ln.oldVersion,ln.newVersion,ln)),En.then(ln=>{kn&&ln.addEventListener("close",()=>kn()),Xt&&ln.addEventListener("versionchange",kr=>Xt(kr.oldVersion,kr.newVersion,kr))}).catch(()=>{}),En}const he=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],fe=new Map;function Re(B,we){if(!(B instanceof IDBDatabase)||we in B||"string"!=typeof we)return;if(fe.get(we))return fe.get(we);const Ue=we.replace(/FromIndex$/,""),ut=we!==Ue,Xt=re.includes(Ue);if(!(Ue in(ut?IDBIndex:IDBObjectStore).prototype)||!Xt&&!he.includes(Ue))return;const kn=function(){var wn=(0,d.Z)(function*(En,...ln){const kr=this.transaction(En,Xt?"readwrite":"readonly");let ie=kr.store;return ut&&(ie=ie.index(ln.shift())),(yield Promise.all([ie[Ue](...ln),Xt&&kr.done]))[0]});return function(ln){return wn.apply(this,arguments)}}();return fe.set(we,kn),kn}!function Je(B){Me=B(Me)}(B=>({...B,get:(we,Ue,ut)=>Re(we,Ue)||B.get(we,Ue,ut),has:(we,Ue)=>!!Re(we,Ue)||B.has(we,Ue)}))},5861:(st,Ce,k)=>{function d(F,te,ge,Ee,Ne,Fe,De){try{var U=F[Fe](De),G=U.value}catch(X){return void ge(X)}U.done?te(G):Promise.resolve(G).then(Ee,Ne)}function V(F){return function(){var te=this,ge=arguments;return new Promise(function(Ee,Ne){var Fe=F.apply(te,ge);function De(G){d(Fe,Ee,Ne,De,U,"next",G)}function U(G){d(Fe,Ee,Ne,De,U,"throw",G)}De(void 0)})}}k.d(Ce,{Z:()=>V})},7582:(st,Ce,k)=>{function te(ie,ue){var ce={};for(var se in ie)Object.prototype.hasOwnProperty.call(ie,se)&&ue.indexOf(se)<0&&(ce[se]=ie[se]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(se=Object.getOwnPropertySymbols(ie);pe<se.length;pe++)ue.indexOf(se[pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,se[pe])&&(ce[se[pe]]=ie[se[pe]])}return ce}function X(ie,ue,ce,se){return new(ce||(ce=Promise))(function(Oe,Qe){function Ve(qt){try{ft(se.next(qt))}catch(pt){Qe(pt)}}function en(qt){try{ft(se.throw(qt))}catch(pt){Qe(pt)}}function ft(qt){qt.done?Oe(qt.value):function pe(Oe){return Oe instanceof ce?Oe:new ce(function(Qe){Qe(Oe)})}(qt.value).then(Ve,en)}ft((se=se.apply(ie,ue||[])).next())})}function ee(ie){return this instanceof ee?(this.v=ie,this):new ee(ie)}function he(ie,ue,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,se=ce.apply(ie,ue||[]),Oe=[];return pe={},Qe("next"),Qe("throw"),Qe("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function Qe(tn){se[tn]&&(pe[tn]=function(Dn){return new Promise(function(In,nn){Oe.push([tn,Dn,In,nn])>1||Ve(tn,Dn)})})}function Ve(tn,Dn){try{!function en(tn){tn.value instanceof ee?Promise.resolve(tn.value.v).then(ft,qt):pt(Oe[0][2],tn)}(se[tn](Dn))}catch(In){pt(Oe[0][3],In)}}function ft(tn){Ve("next",tn)}function qt(tn){Ve("throw",tn)}function pt(tn,Dn){tn(Dn),Oe.shift(),Oe.length&&Ve(Oe[0][0],Oe[0][1])}}function fe(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,ue=ie[Symbol.asyncIterator];return ue?ue.call(ie):(ie=function ve(ie){var ue="function"==typeof Symbol&&Symbol.iterator,ce=ue&&ie[ue],se=0;if(ce)return ce.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&se>=ie.length&&(ie=void 0),{value:ie&&ie[se++],done:!ie}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),ce={},se("next"),se("throw"),se("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function se(Oe){ce[Oe]=ie[Oe]&&function(Qe){return new Promise(function(Ve,en){!function pe(Oe,Qe,Ve,en){Promise.resolve(en).then(function(ft){Oe({value:ft,done:Ve})},Qe)}(Ve,en,(Qe=ie[Oe](Qe)).done,Qe.value)})}}}k.d(Ce,{FC:()=>he,KL:()=>fe,_T:()=>te,mG:()=>X,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},st=>{st(st.s=4632)}]);