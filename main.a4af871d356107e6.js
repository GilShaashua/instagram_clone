"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(_t,De,M)=>{M.d(De,{Dh:()=>Oe,GT:()=>ve,cc:()=>Ie,hO:()=>Be,on:()=>U,pX:()=>se,xv:()=>he});var d=M(5879),V=M(120),N=M(4556);_t=M.hmd(_t);const Y=["ngOnDestroy"],se=(Se,ft,pt,ee={})=>new Proxy(Se,{get:(Te,ue)=>pt.runOutsideAngular(()=>{var Me;if(Se[ue])return!(null===(Me=ee?.spy)||void 0===Me)&&Me.get&&ee.spy.get(ue,Se[ue]),Se[ue];if(Y.indexOf(ue)>-1)return()=>{};const je=ft.toPromise().then(k=>{const te=k&&k[ue];return"function"==typeof te?te.bind(k):te&&te.then?te.then(be=>pt.run(()=>be)):pt.run(()=>te)});return new Proxy(()=>{},{get:(k,te)=>je[te],apply:(k,te,be)=>je.then(it=>{var Lt;const $t=it&&it(...be);return!(null===(Lt=ee?.spy)||void 0===Lt)&&Lt.apply&&ee.spy.apply(ue,be,$t),$t})})})}),ve=(Se,ft)=>{ft.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(ee=>{Object.defineProperty(Se.prototype,ee,Object.getOwnPropertyDescriptor(pt.prototype||pt,ee))})})};class Ee{constructor(ft){return ft}}const Oe=new d.OlP("angularfire2.app.options"),he=new d.OlP("angularfire2.app.name");function U(Se,ft,pt){const Te="object"==typeof pt&&pt||{};Te.name=Te.name||"string"==typeof pt&&pt||"[DEFAULT]";const Me=V.Z.apps.filter(je=>je&&je.name===Te.name)[0]||ft.runOutsideAngular(()=>V.Z.initializeApp(Se,Te));try{JSON.stringify(Se)!==JSON.stringify(Me.options)&&q("error",`${Me.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(Me)}const q=(Se,...ft)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Se](...ft)},ne={provide:Ee,useFactory:U,deps:[Oe,d.R0b,[new d.FiY,he]]};let Be=(()=>{class Se{constructor(pt){V.Z.registerVersion("angularfire",N.q4.full,"core"),V.Z.registerVersion("angularfire",N.q4.full,"app-compat"),V.Z.registerVersion("angular",d.q4F.full,pt.toString())}static initializeApp(pt,ee){return{ngModule:Se,providers:[{provide:Oe,useValue:pt},{provide:he,useValue:ee}]}}}return Se.\u0275fac=function(pt){return new(pt||Se)(d.LFG(d.Lbi))},Se.\u0275mod=d.oAB({type:Se}),Se.\u0275inj=d.cJS({providers:[ne]}),Se})();function Ie(Se,ft,pt,ee,Te){const[,ue,Me]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===Se)||[];if(ue)return function Ye(Se,ft){try{return Se.toString()===ft.toString()}catch{return Se===ft}}(Te,Me)||(Ke("error",`${ft} was already initialized on the ${pt} Firebase App with different settings.${ke?" You may need to reload as Firebase is not HMR aware.":""}`),Ke("warn",{is:Te,was:Me})),ue;{const je=ee();return globalThis.\u0275AngularfireInstanceCache.push([Se,je,Te]),je}}const ke=!!_t.hot,Ke=(Se,...ft)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Se](...ft)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4556:(_t,De,M)=>{M.d(De,{q4:()=>ks,iC:()=>os,HU:()=>Od,vb:()=>vs,JM:()=>gr});var d=M(5879),V=M(4097),N=M(5861),Y=M(4303),se=M(9058),ve=M(4537),Ee=M(7879);M(2591);const he="@firebase/remote-config",U="0.4.4",Ie=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xt{constructor(F,j,ge,Pe){this.client=F,this.storage=j,this.storageCache=ge,this.logger=Pe}isCachedDataFresh(F,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ge=Date.now()-j,Pe=ge<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ge}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${Pe}.`),Pe}fetch(F){var j=this;return(0,N.Z)(function*(){const[ge,Pe]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(Pe&&j.isCachedDataFresh(F.cacheMaxAgeMillis,ge))return Pe;F.eTag=Pe&&Pe.eTag;const Ze=yield j.client.fetch(F),et=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ze.status&&et.push(j.storage.setLastSuccessfulFetchResponse(Ze)),yield Promise.all(et),Ze})()}}function Zn(B=navigator){return B.languages&&B.languages[0]||B.language}class ae{constructor(F,j,ge,Pe,Ze,et){this.firebaseInstallations=F,this.sdkVersion=j,this.namespace=ge,this.projectId=Pe,this.apiKey=Ze,this.appId=et}fetch(F){var j=this;return(0,N.Z)(function*(){const[ge,Pe]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),et=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},Ft={sdk_version:j.sdkVersion,app_instance_id:ge,app_instance_id_token:Pe,app_id:j.appId,language_code:Zn()},qt={method:"POST",headers:bt,body:JSON.stringify(Ft)},Bt=fetch(et,qt),Ur=new Promise((cr,Ei)=>{F.signal.addEventListener(()=>{const Na=new Error("The operation was aborted.");Na.name="AbortError",Ei(Na)})});let er;try{yield Promise.race([Bt,Ur]),er=yield Bt}catch(cr){let Ei="fetch-client-network";throw"AbortError"===cr?.name&&(Ei="fetch-timeout"),Ie.create(Ei,{originalErrorMessage:cr?.message})}let On=er.status;const _o=er.headers.get("ETag")||void 0;let Wi,Es;if(200===er.status){let cr;try{cr=yield er.json()}catch(Ei){throw Ie.create("fetch-client-parse",{originalErrorMessage:Ei?.message})}Wi=cr.entries,Es=cr.state}if("INSTANCE_STATE_UNSPECIFIED"===Es?On=500:"NO_CHANGE"===Es?On=304:("NO_TEMPLATE"===Es||"EMPTY_CONFIG"===Es)&&(Wi={}),304!==On&&200!==On)throw Ie.create("fetch-status",{httpStatus:On});return{status:On,eTag:_o,config:Wi}})()}}class oe{constructor(F,j){this.client=F,this.storage=j}fetch(F){var j=this;return(0,N.Z)(function*(){const ge=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(F,ge)})()}attemptFetch(F,{throttleEndTimeMillis:j,backoffCount:ge}){var Pe=this;return(0,N.Z)(function*(){yield function pe(B,F){return new Promise((j,ge)=>{const Pe=Math.max(F-Date.now(),0),Ze=setTimeout(j,Pe);B.addEventListener(()=>{clearTimeout(Ze),ge(Ie.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,j);try{const Ze=yield Pe.client.fetch(F);return yield Pe.storage.deleteThrottleMetadata(),Ze}catch(Ze){if(!function ce(B){if(!(B instanceof se.ZR&&B.customData))return!1;const F=Number(B.customData.httpStatus);return 429===F||500===F||503===F||504===F}(Ze))throw Ze;const et={throttleEndTimeMillis:Date.now()+(0,se.$s)(ge),backoffCount:ge+1};return yield Pe.storage.setThrottleMetadata(et),Pe.attemptFetch(F,et)}})()}}class tt{constructor(F,j,ge,Pe,Ze){this.app=F,this._client=j,this._storageCache=ge,this._storage=Pe,this._logger=Ze,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qe(B,F){const j=B.target.error||void 0;return Ie.create(F,{originalErrorMessage:j&&j?.message})}const Wt="app_namespace_store";class fn{constructor(F,j,ge,Pe=function yt(){return new Promise((B,F)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=ge=>{F(qe(ge,"storage-open"))},j.onsuccess=ge=>{B(ge.target.result)},j.onupgradeneeded=ge=>{0===ge.oldVersion&&ge.target.result.createObjectStore(Wt,{keyPath:"compositeKey"})}}catch(j){F(Ie.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=F,this.appName=j,this.namespace=ge,this.openDbPromise=Pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var j=this;return(0,N.Z)(function*(){const ge=yield j.openDbPromise;return new Promise((Pe,Ze)=>{const bt=ge.transaction([Wt],"readonly").objectStore(Wt),Ft=j.createCompositeKey(F);try{const qt=bt.get(Ft);qt.onerror=Bt=>{Ze(qe(Bt,"storage-get"))},qt.onsuccess=Bt=>{const Ur=Bt.target.result;Pe(Ur?Ur.value:void 0)}}catch(qt){Ze(Ie.create("storage-get",{originalErrorMessage:qt?.message}))}})})()}set(F,j){var ge=this;return(0,N.Z)(function*(){const Pe=yield ge.openDbPromise;return new Promise((Ze,et)=>{const Ft=Pe.transaction([Wt],"readwrite").objectStore(Wt),qt=ge.createCompositeKey(F);try{const Bt=Ft.put({compositeKey:qt,value:j});Bt.onerror=Ur=>{et(qe(Ur,"storage-set"))},Bt.onsuccess=()=>{Ze()}}catch(Bt){et(Ie.create("storage-set",{originalErrorMessage:Bt?.message}))}})})()}delete(F){var j=this;return(0,N.Z)(function*(){const ge=yield j.openDbPromise;return new Promise((Pe,Ze)=>{const bt=ge.transaction([Wt],"readwrite").objectStore(Wt),Ft=j.createCompositeKey(F);try{const qt=bt.delete(Ft);qt.onerror=Bt=>{Ze(qe(Bt,"storage-delete"))},qt.onsuccess=()=>{Pe()}}catch(qt){Ze(Ie.create("storage-delete",{originalErrorMessage:qt?.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class Gn{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,N.Z)(function*(){const j=F.storage.getLastFetchStatus(),ge=F.storage.getLastSuccessfulFetchTimestampMillis(),Pe=F.storage.getActiveConfig(),Ze=yield j;Ze&&(F.lastFetchStatus=Ze);const et=yield ge;et&&(F.lastSuccessfulFetchTimestampMillis=et);const bt=yield Pe;bt&&(F.activeConfig=bt)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function ar(){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,N.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Un(){(0,Y._registerComponent)(new ve.wA("remote-config",function B(F,{instanceIdentifier:j}){const ge=F.getProvider("app").getImmediate(),Pe=F.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ie.create("registration-window");if(!(0,se.hl)())throw Ie.create("indexed-db-unavailable");const{projectId:Ze,apiKey:et,appId:bt}=ge.options;if(!Ze)throw Ie.create("registration-project-id");if(!et)throw Ie.create("registration-api-key");if(!bt)throw Ie.create("registration-app-id");const Ft=new fn(bt,ge.name,j=j||"firebase"),qt=new Gn(Ft),Bt=new Ee.Yd(he);Bt.logLevel=Ee.in.ERROR;const Ur=new ae(Pe,Y.SDK_VERSION,j,Ze,et,bt),er=new oe(Ur,Ft),On=new Xt(er,Ft,qt,Bt),_o=new tt(ge,On,qt,Ft,Bt);return function Me(B){const F=(0,se.m9)(B);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(_o),_o},"PUBLIC").setMultipleInstances(!0)),(0,Y.registerVersion)(he,U),(0,Y.registerVersion)(he,U,"esm2017")}();var Vn=M(9519);const Tn="analytics",ir="firebase_id",$r="origin",Et=6e4,It="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nt="https://www.googletagmanager.com/gtag/js",Rt=new Ee.Yd("@firebase/analytics"),pn=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Kt(B){if(!B.startsWith(Nt)){const F=pn.create("invalid-gtag-resource",{gtagURL:B});return Rt.warn(F.message),""}return B}function gn(B){return Promise.all(B.map(F=>F.catch(j=>j)))}function ln(){return(ln=(0,N.Z)(function*(B,F,j,ge,Pe,Ze){const et=ge[Pe];try{if(et)yield F[et];else{const Ft=(yield gn(j)).find(qt=>qt.measurementId===Pe);Ft&&(yield F[Ft.appId])}}catch(bt){Rt.error(bt)}B("config",Pe,Ze)})).apply(this,arguments)}function ur(){return(ur=(0,N.Z)(function*(B,F,j,ge,Pe){try{let Ze=[];if(Pe&&Pe.send_to){let et=Pe.send_to;Array.isArray(et)||(et=[et]);const bt=yield gn(j);for(const Ft of et){const qt=bt.find(Ur=>Ur.measurementId===Ft),Bt=qt&&F[qt.appId];if(!Bt){Ze=[];break}Ze.push(Bt)}}0===Ze.length&&(Ze=Object.values(F)),yield Promise.all(Ze),B("event",ge,Pe||{})}catch(Ze){Rt.error(Ze)}})).apply(this,arguments)}const Z=30,ut=new class He{constructor(F={},j=1e3){this.throttleMetadata=F,this.intervalMillis=j}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,j){this.throttleMetadata[F]=j}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function Ct(B){return new Headers({Accept:"application/json","x-goog-api-key":B})}function z(){return(z=(0,N.Z)(function*(B){var F;const{appId:j,apiKey:ge}=B,Pe={method:"GET",headers:Ct(ge)},Ze=It.replace("{app-id}",j),et=yield fetch(Ze,Pe);if(200!==et.status&&304!==et.status){let bt="";try{const Ft=yield et.json();null!==(F=Ft.error)&&void 0!==F&&F.message&&(bt=Ft.error.message)}catch{}throw pn.create("config-fetch-failed",{httpStatus:et.status,responseMessage:bt})}return et.json()})).apply(this,arguments)}function P(){return(P=(0,N.Z)(function*(B,F=ut,j){const{appId:ge,apiKey:Pe,measurementId:Ze}=B.options;if(!ge)throw pn.create("no-app-id");if(!Pe){if(Ze)return{measurementId:Ze,appId:ge};throw pn.create("no-api-key")}const et=F.getThrottleMetadata(ge)||{backoffCount:0,throttleEndTimeMillis:Date.now()},bt=new Qe;return setTimeout((0,N.Z)(function*(){bt.abort()}),void 0!==j?j:Et),R({appId:ge,apiKey:Pe,measurementId:Ze},et,bt,F)})).apply(this,arguments)}function R(B,F,j){return x.apply(this,arguments)}function x(){return x=(0,N.Z)(function*(B,{throttleEndTimeMillis:F,backoffCount:j},ge,Pe=ut){var Ze;const{appId:et,measurementId:bt}=B;try{yield function X(B,F){return new Promise((j,ge)=>{const Pe=Math.max(F-Date.now(),0),Ze=setTimeout(j,Pe);B.addEventListener(()=>{clearTimeout(Ze),ge(pn.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(ge,F)}catch(Ft){if(bt)return Rt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Ft?.message}]`),{appId:et,measurementId:bt};throw Ft}try{const Ft=yield function mn(B){return z.apply(this,arguments)}(B);return Pe.deleteThrottleMetadata(et),Ft}catch(Ft){const qt=Ft;if(!function Re(B){if(!(B instanceof se.ZR&&B.customData))return!1;const F=Number(B.customData.httpStatus);return 429===F||500===F||503===F||504===F}(qt)){if(Pe.deleteThrottleMetadata(et),bt)return Rt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${qt?.message}]`),{appId:et,measurementId:bt};throw Ft}const Bt=503===Number(null===(Ze=qt?.customData)||void 0===Ze?void 0:Ze.httpStatus)?(0,se.$s)(j,Pe.intervalMillis,Z):(0,se.$s)(j,Pe.intervalMillis),Ur={throttleEndTimeMillis:Date.now()+Bt,backoffCount:j+1};return Pe.setThrottleMetadata(et,Ur),Rt.debug(`Calling attemptFetch again in ${Bt} millis`),R(B,Ur,ge,Pe)}}),x.apply(this,arguments)}class Qe{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}let xt,An;function yn(){return(yn=(0,N.Z)(function*(B,F,j,ge,Pe){if(Pe&&Pe.global)B("event",j,ge);else{const Ze=yield F;B("event",j,Object.assign(Object.assign({},ge),{send_to:Ze}))}})).apply(this,arguments)}function Or(){return(Or=(0,N.Z)(function*(){if(!(0,se.hl)())return Rt.warn(pn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(B){return Rt.warn(pn.create("indexeddb-unavailable",{errorInfo:B?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ns(){return Ns=(0,N.Z)(function*(B,F,j,ge,Pe,Ze,et){var bt;const Ft=function G(B){return P.apply(this,arguments)}(B);Ft.then(On=>{j[On.measurementId]=On.appId,B.options.measurementId&&On.measurementId!==B.options.measurementId&&Rt.warn(`The measurement ID in the local Firebase config (${B.options.measurementId}) does not match the measurement ID fetched from the server (${On.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(On=>Rt.error(On)),F.push(Ft);const qt=function zi(){return Or.apply(this,arguments)}().then(On=>{if(On)return ge.getId()}),[Bt,Ur]=yield Promise.all([Ft,qt]);(function ye(B){const F=window.document.getElementsByTagName("script");for(const j of Object.values(F))if(j.src&&j.src.includes(Nt)&&j.src.includes(B))return j;return null})(Ze)||function rn(B,F){const j=function xr(B,F){let j;return window.trustedTypes&&(j=window.trustedTypes.createPolicy(B,F)),j}("firebase-js-sdk-policy",{createScriptURL:Kt}),ge=document.createElement("script"),Pe=`${Nt}?l=${B}&id=${F}`;ge.src=j?j?.createScriptURL(Pe):Pe,ge.async=!0,document.head.appendChild(ge)}(Ze,Bt.measurementId),An&&(Pe("consent","default",An),function Jr(B){An=B}(void 0)),Pe("js",new Date);const er=null!==(bt=et?.config)&&void 0!==bt?bt:{};return er[$r]="firebase",er.update=!0,null!=Ur&&(er[ir]=Ur),Pe("config",Bt.measurementId,er),xt&&(Pe("set",xt),function Xr(B){xt=B}(void 0)),Bt.measurementId}),Ns.apply(this,arguments)}class Ks{constructor(F){this.app=F}_delete(){return delete Hr[this.app.options.appId],Promise.resolve()}}let Hr={},di=[];const Rs={};let tr,qi,ys="dataLayer",hi=!1;function Gr(B,F,j){!function go(){const B=[];if((0,se.ru)()&&B.push("This is a browser extension environment."),(0,se.zI)()||B.push("Cookies are not available."),B.length>0){const F=B.map((ge,Pe)=>`(${Pe+1}) ${ge}`).join(" "),j=pn.create("invalid-analytics-context",{errorInfo:F});Rt.warn(j.message)}}();const ge=B.options.appId;if(!ge)throw pn.create("no-app-id");if(!B.options.apiKey){if(!B.options.measurementId)throw pn.create("no-api-key");Rt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${B.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hr[ge])throw pn.create("already-exists",{id:ge});if(!hi){!function li(B){let F=[];Array.isArray(window[B])?F=window[B]:window[B]=F}(ys);const{wrappedGtag:Ze,gtagCore:et}=function Bn(B,F,j,ge,Pe){let Ze=function(...et){window[ge].push(arguments)};return window[Pe]&&"function"==typeof window[Pe]&&(Ze=window[Pe]),window[Pe]=function fr(B,F,j,ge){function Ze(){return Ze=(0,N.Z)(function*(et,...bt){try{if("event"===et){const[Ft,qt]=bt;yield function Ir(B,F,j,ge,Pe){return ur.apply(this,arguments)}(B,F,j,Ft,qt)}else if("config"===et){const[Ft,qt]=bt;yield function en(B,F,j,ge,Pe,Ze){return ln.apply(this,arguments)}(B,F,j,ge,Ft,qt)}else if("consent"===et){const[Ft]=bt;B("consent","update",Ft)}else if("get"===et){const[Ft,qt,Bt]=bt;B("get",Ft,qt,Bt)}else if("set"===et){const[Ft]=bt;B("set",Ft)}else B(et,...bt)}catch(Ft){Rt.error(Ft)}}),Ze.apply(this,arguments)}return function Pe(et){return Ze.apply(this,arguments)}}(Ze,B,F,j),{gtagCore:Ze,wrappedGtag:window[Pe]}}(Hr,di,Rs,ys,"gtag");qi=Ze,tr=et,hi=!0}return Hr[ge]=function dn(B,F,j,ge,Pe,Ze,et){return Ns.apply(this,arguments)}(B,di,Rs,F,tr,ys,j),new Ks(B)}function Su(){return H.apply(this,arguments)}function H(){return(H=(0,N.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const ss="@firebase/analytics";!function Mu(){(0,Y._registerComponent)(new ve.wA(Tn,(F,{options:j})=>Gr(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,Y._registerComponent)(new ve.wA("analytics-internal",function B(F){try{const j=F.getProvider(Tn).getImmediate();return{logEvent:(ge,Pe,Ze)=>function pr(B,F,j,ge){B=(0,se.m9)(B),function st(B,F,j,ge,Pe){return yn.apply(this,arguments)}(qi,Hr[B.app.options.appId],F,j,ge).catch(Pe=>Rt.error(Pe))}(j,ge,Pe,Ze)}}catch(j){throw pn.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,Y.registerVersion)(ss,"0.10.0"),(0,Y.registerVersion)(ss,"0.10.0","esm2017")}();var Ma=M(1954),Oa=M(2631);const Lr=new class Cn extends Oa.v{}(class xa extends Ma.o{constructor(F,j){super(F,j),this.scheduler=F,this.work=j}schedule(F,j=0){return j>0?super.schedule(F,j):(this.delay=j,this.state=F,this.scheduler.flush(this),this)}execute(F,j){return j>0||this.closed?super.execute(F,j):this._execute(F,j)}requestAsyncId(F,j,ge=0){return null!=ge&&ge>0||null==ge&&this.delay>0?super.requestAsyncId(F,j,ge):(F.flush(this),0)}});var mo=M(6321),ei=M(9397),Oc=M(5137),Pa=M(3093);const ks=new d.GfV("7.6.1"),Zi="__angularfire_symbol__analyticsIsSupportedValue",Qo="__angularfire_symbol__analyticsIsSupported",Xn="__angularfire_symbol__remoteConfigIsSupportedValue",Xe="__angularfire_symbol__remoteConfigIsSupported",zt="__angularfire_symbol__messagingIsSupportedValue",jn="__angularfire_symbol__messagingIsSupported";function gr(B,F,j){if(F){if(1===F.length)return F[0];const Ze=F.filter(et=>et.app===j);if(1===Ze.length)return Ze[0]}return j.container.getProvider(B).getImmediate({optional:!0})}globalThis[Qo]||(globalThis[Qo]=Su().then(B=>globalThis[Zi]=B).catch(()=>globalThis[Zi]=!1)),globalThis[jn]||(globalThis[jn]=(0,Vn.Gb)().then(B=>globalThis[zt]=B).catch(()=>globalThis[zt]=!1)),globalThis[Xe]||(globalThis[Xe]=ar().then(B=>globalThis[Xn]=B).catch(()=>globalThis[Xn]=!1));const vs=(B,F)=>{const j=F?[F]:(0,V.C6)(),ge=[];return j.forEach(Pe=>{Pe.container.getProvider(B).instances.forEach(et=>{ge.includes(et)||ge.push(et)})}),ge};function wi(){}class kt{constructor(F,j=Lr){this.zone=F,this.delegate=j}now(){return this.delegate.now()}schedule(F,j,ge){const Pe=this.zone;return this.delegate.schedule(function(et){Pe.runGuarded(()=>{F.apply(this,[et])})},j,ge)}}class Jo{constructor(F){this.zone=F,this.task=null}call(F,j){const ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wi,{},wi,wi)),j.pipe((0,ei.b)({next:ge,complete:ge,error:ge})).subscribe(F).add(ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Od=(()=>{class B{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new kt(Zone.current)),this.insideAngular=j.run(()=>new kt(Zone.current,mo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return B.\u0275fac=function(j){return new(j||B)(d.LFG(d.R0b))},B.\u0275prov=d.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})();function br(){const B=globalThis.\u0275AngularFireScheduler;if(!B)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return B}function os(B){return br(),function Pc(B){return function(j){return(j=j.lift(new Jo(B.ngZone))).pipe((0,Oc.R)(B.outsideAngular),(0,Pa.Q)(B.insideAngular))}}(br())(B)}},6710:(_t,De,M)=>{M.d(De,{$:()=>Nd,A:()=>q,D:()=>Ie,I:()=>go,J:()=>H,L:()=>Xe,N:()=>Ct,P:()=>lr,Q:()=>Fi,R:()=>gp,U:()=>Pc,V:()=>Ys,W:()=>ws,X:()=>os,Y:()=>ge,Z:()=>Pe,_:()=>qt,a:()=>$c,a0:()=>Mw,a1:()=>Er,a2:()=>DT,a3:()=>TT,a4:()=>hy,a5:()=>vo,a6:()=>xu,a7:()=>kd,a8:()=>Fd,a9:()=>fy,aA:()=>k,aB:()=>Ha,aC:()=>He,aD:()=>mn,aE:()=>Ao,aF:()=>Wc,aG:()=>io,aH:()=>tr,aL:()=>Nu,aO:()=>F,aa:()=>Kf,ab:()=>py,ac:()=>Yf,ad:()=>my,ae:()=>Fc,af:()=>yy,ai:()=>Ow,aj:()=>AT,ak:()=>vy,an:()=>_o,ao:()=>Pu,aq:()=>Gd,ar:()=>jc,as:()=>be,at:()=>st,au:()=>Re,av:()=>ee,aw:()=>us,ax:()=>rh,ay:()=>yn,az:()=>Te,b:()=>Zd,c:()=>Ti,d:()=>qc,e:()=>ea,f:()=>Kc,g:()=>Ai,h:()=>Wn,i:()=>Us,j:()=>Ny,k:()=>oo,l:()=>mp,m:()=>za,p:()=>Oe,r:()=>Pt,s:()=>bi,u:()=>Di});var d=M(5861),V=M(9058),N=M(7592),Y=M(7582),se=M(7879),ve=M(4537);const Oe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ie=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ye=function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ke=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new se.Yd("@firebase/auth");function pt(w,...p){Se.logLevel<=se.in.ERROR&&Se.error(`Auth (${N.SDK_VERSION}): ${w}`,...p)}function ee(w,...p){throw je(w,...p)}function Te(w,...p){return je(w,...p)}function ue(w,p,m){const E=Object.assign(Object.assign({},Ye()),{[p]:m});return new V.LL("auth","Firebase",E).create(p,{appName:w.name})}function Me(w,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&ee(w,"argument-error"),ue(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(w,...p){if("string"!=typeof w){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(m,...E)}return ke.create(w,...p)}function k(w,p,...m){if(!w)throw je(p,...m)}function te(w){const p="INTERNAL ASSERTION FAILED: "+w;throw pt(p),new Error(p)}function be(w,p){w||te(p)}function it(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Lt(){return"http:"===$t()||"https:"===$t()}function $t(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Xt{constructor(p,m){this.shortDelay=p,this.longDelay=m,be(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Ht(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Lt()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zn(w,p){be(w.emulator,"Emulator should always be set here");const{url:m}=w.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ae{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void te("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void te("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void te("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ce=new Xt(3e4,6e4);function oe(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function Ae(w,p,m,E){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,d.Z)(function*(w,p,m,E,T={}){return tt(w,T,(0,d.Z)(function*(){let O={},Q={};E&&("GET"===p?Q=E:O={body:JSON.stringify(E)});const me=(0,V.xO)(Object.assign({key:w.config.apiKey},Q)).slice(1),Je=yield w._getAdditionalHeaders();return Je["Content-Type"]="application/json",w.languageCode&&(Je["X-Firebase-Locale"]=w.languageCode),ae.fetch()(nn(w,w.config.apiHost,m,me),Object.assign({method:p,headers:Je,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function tt(w,p,m){return qe.apply(this,arguments)}function qe(){return(qe=(0,d.Z)(function*(w,p,m){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},pe),p);try{const T=new yt(w),O=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const Q=yield O.json();if("needConfirmation"in Q)throw fn(w,"account-exists-with-different-credential",Q);if(O.ok&&!("errorMessage"in Q))return Q;{const me=O.ok?Q.errorMessage:Q.error.message,[Je,rt]=me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw fn(w,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Je)throw fn(w,"email-already-in-use",Q);if("USER_DISABLED"===Je)throw fn(w,"user-disabled",Q);const At=E[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw ue(w,At,rt);ee(w,At)}}catch(T){if(T instanceof V.ZR)throw T;ee(w,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function Wt(w,p,m,E){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(w,p,m,E,T={}){const O=yield Ae(w,p,m,E,T);return"mfaPendingCredential"in O&&ee(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function nn(w,p,m,E){const T=`${p}${m}?${E}`;return w.config.emulator?Zn(w.config,T):`${w.config.apiScheme}://${T}`}class yt{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Te(this.auth,"network-request-failed")),ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fn(w,p,m){const E={appName:w.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const T=Te(w,p,E);return T.customData._tokenResponse=m,T}function Un(){return(Un=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Vn(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function $r(){return($r=(0,d.Z)(function*(w,p=!1){const m=(0,V.m9)(w),E=yield m.getIdToken(p),T=It(E);k(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const O="object"==typeof T.firebase?T.firebase:void 0,Q=O?.sign_in_provider;return{claims:T,token:E,authTime:Vn(Et(T.auth_time)),issuedAtTime:Vn(Et(T.iat)),expirationTime:Vn(Et(T.exp)),signInProvider:Q||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Et(w){return 1e3*Number(w)}function It(w){const[p,m,E]=w.split(".");if(void 0===p||void 0===m||void 0===E)return pt("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,V.tV)(m);return T?JSON.parse(T):(pt("Failed to decode base64 JWT payload"),null)}catch(T){return pt("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Rt(w,p){return vr.apply(this,arguments)}function vr(){return(vr=(0,d.Z)(function*(w,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof V.ZR&&function pn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}class Kt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class gn{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vn(this.lastLoginAt),this.creationTime=Vn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xr(w){return rn.apply(this,arguments)}function rn(){return rn=(0,d.Z)(function*(w){var p;const m=w.auth,E=yield w.getIdToken(),T=yield Rt(w,function ar(w,p){return Jn.apply(this,arguments)}(m,{idToken:E}));k(T?.users.length,m,"internal-error");const O=T.users[0];w._notifyReloadListener(O);const Q=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?function Ir(w){return w.map(p=>{var{providerId:m}=p,E=(0,Y._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(O.providerUserInfo):[],me=function ln(w,p){return[...w.filter(E=>!p.some(T=>T.providerId===E.providerId)),...p]}(w.providerData,Q),At=!!w.isAnonymous&&!(w.email&&O.passwordHash||me?.length),In={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:me,metadata:new gn(O.createdAt,O.lastLoginAt),isAnonymous:At};Object.assign(w,In)}),rn.apply(this,arguments)}function en(){return(en=(0,d.Z)(function*(w){const p=(0,V.m9)(w);yield xr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function fr(){return(fr=(0,d.Z)(function*(w,p){const m=yield tt(w,{},(0,d.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:T,apiKey:O}=w.config,Q=nn(w,T,"/v1/token",`key=${O}`),me=yield w._getAdditionalHeaders();return me["Content-Type"]="application/x-www-form-urlencoded",ae.fetch()(Q,{method:"POST",headers:me,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Bn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){k(p.idToken,"internal-error"),k(typeof p.idToken<"u","internal-error"),k(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Nt(w){const p=It(w);return k(p,"internal-error"),k(typeof p.exp<"u","internal-error"),k(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,d.Z)(function*(){return k(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,d.Z)(function*(){const{accessToken:T,refreshToken:O,expiresIn:Q}=yield function ur(w,p){return fr.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(T,O,Number(Q))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:T,expirationTime:O}=m,Q=new Bn;return E&&(k("string"==typeof E,"internal-error",{appName:p}),Q.refreshToken=E),T&&(k("string"==typeof T,"internal-error",{appName:p}),Q.accessToken=T),O&&(k("number"==typeof O,"internal-error",{appName:p}),Q.expirationTime=O),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Bn,this.toJSON())}_performRefresh(){return te("not implemented")}}function ye(w,p){k("string"==typeof w||typeof w>"u","internal-error",{appName:p})}class Z{constructor(p){var{uid:m,auth:E,stsTokenManager:T}=p,O=(0,Y._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new gn(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,d.Z)(function*(){const E=yield Rt(m,m.stsTokenManager.getToken(m.auth,p));return k(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function ir(w){return $r.apply(this,arguments)}(this,p)}reload(){return function li(w){return en.apply(this,arguments)}(this)}_assign(p){this!==p&&(k(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Z(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,d.Z)(function*(){let T=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),T=!0),m&&(yield xr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,d.Z)(function*(){const m=yield p.getIdToken();return yield Rt(p,function Gn(w,p){return Un.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,T,O,Q,me,Je,rt,At;const In=null!==(E=m.displayName)&&void 0!==E?E:void 0,pi=null!==(T=m.email)&&void 0!==T?T:void 0,cs=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,ao=null!==(Q=m.photoURL)&&void 0!==Q?Q:void 0,Sp=null!==(me=m.tenantId)&&void 0!==me?me:void 0,Hu=null!==(Je=m._redirectEventId)&&void 0!==Je?Je:void 0,aa=null!==(rt=m.createdAt)&&void 0!==rt?rt:void 0,ua=null!==(At=m.lastLoginAt)&&void 0!==At?At:void 0,{uid:ol,emailVerified:Gu,isAnonymous:ls,providerData:Ka,stsTokenManager:uo}=m;k(ol&&uo,p,"internal-error");const zu=Bn.fromJSON(this.name,uo);k("string"==typeof ol,p,"internal-error"),ye(In,p.name),ye(pi,p.name),k("boolean"==typeof Gu,p,"internal-error"),k("boolean"==typeof ls,p,"internal-error"),ye(cs,p.name),ye(ao,p.name),ye(Sp,p.name),ye(Hu,p.name),ye(aa,p.name),ye(ua,p.name);const No=new Z({uid:ol,auth:p,email:pi,emailVerified:Gu,displayName:In,isAnonymous:ls,photoURL:ao,phoneNumber:cs,tenantId:Sp,stsTokenManager:zu,createdAt:aa,lastLoginAt:ua});return Ka&&Array.isArray(Ka)&&(No.providerData=Ka.map(al=>Object.assign({},al))),Hu&&(No._redirectEventId=Hu),No}static _fromIdTokenResponse(p,m,E=!1){return(0,d.Z)(function*(){const T=new Bn;T.updateFromServerResponse(m);const O=new Z({uid:m.localId,auth:p,stsTokenManager:T,isAnonymous:E});return yield xr(O),O})()}}const Ce=new Map;function He(w){be(w instanceof Function,"Expected a class definition");let p=Ce.get(w);return p?(be(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,Ce.set(w,p),p)}const Ct=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,E){var T=this;return(0,d.Z)(function*(){T.storage[m]=E})()}_get(m){var E=this;return(0,d.Z)(function*(){const T=E.storage[m];return void 0===T?null:T})()}_remove(m){var E=this;return(0,d.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return w.type="NONE",w})();function mn(w,p,m){return`firebase:${w}:${p}:${m}`}class z{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:T,name:O}=this.auth;this.fullUserKey=mn(this.userKey,T.apiKey,O),this.fullPersistenceKey=mn("persistence",T.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Z._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,d.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,d.Z)(function*(){if(!m.length)return new z(He(Ct),p,E);const T=(yield Promise.all(m.map(function(){var rt=(0,d.Z)(function*(At){if(yield At._isAvailable())return At});return function(At){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let O=T[0]||He(Ct);const Q=mn(E,p.config.apiKey,p.name);let me=null;for(const rt of m)try{const At=yield rt._get(Q);if(At){const In=Z._fromJSON(p,At);rt!==O&&(me=In),O=rt;break}}catch{}const Je=T.filter(rt=>rt._shouldAllowMigration);return O._shouldAllowMigration&&Je.length?(O=Je[0],me&&(yield O._set(Q,me.toJSON())),yield Promise.all(m.map(function(){var rt=(0,d.Z)(function*(At){if(At!==O)try{yield At._remove(Q)}catch{}});return function(At){return rt.apply(this,arguments)}}())),new z(O,p,E)):new z(O,p,E)})()}}function G(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(X(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(P(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Qe(p))return"Blackberry";if(xt(p))return"Webos";if(R(p))return"Safari";if((p.includes("chrome/")||x(p))&&!p.includes("edge/"))return"Chrome";if(Re(p))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function P(w=(0,V.z$)()){return/firefox\//i.test(w)}function R(w=(0,V.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function x(w=(0,V.z$)()){return/crios\//i.test(w)}function X(w=(0,V.z$)()){return/iemobile/i.test(w)}function Re(w=(0,V.z$)()){return/android/i.test(w)}function Qe(w=(0,V.z$)()){return/blackberry/i.test(w)}function xt(w=(0,V.z$)()){return/webos/i.test(w)}function st(w=(0,V.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function yn(w=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Yt(w=(0,V.z$)()){return st(w)||Re(w)||xt(w)||Qe(w)||/windows phone/i.test(w)||X(w)}function K(w,p=[]){let m;switch(w){case"Browser":m=G((0,V.z$)());break;case"Worker":m=`${G((0,V.z$)())}-${w}`;break;default:m=w}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${N.SDK_VERSION}/${E}`}function nt(){return(nt=(0,d.Z)(function*(w){return(yield Ae(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ot(w,p){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,d.Z)(function*(w,p){return Ae(w,"GET","/v2/recaptchaConfig",oe(w,p))})).apply(this,arguments)}function ct(w){return void 0!==w&&void 0!==w.getResponse}function An(w){return void 0!==w&&void 0!==w.enterprise}class Jr{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function zi(w){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=p,E.onerror=T=>{const O=Te("internal-error");O.customData=T,m(O)},E.type="text/javascript",E.charset="UTF-8",function Xr(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(E)})}function Or(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Hr{constructor(p){this.type="recaptcha-enterprise",this.auth=tr(p)}verify(p="verify",m=!1){var E=this;return(0,d.Z)(function*(){function O(){return O=(0,d.Z)(function*(me){if(!m){if(null==me.tenantId&&null!=me._agentRecaptchaConfig)return me._agentRecaptchaConfig.siteKey;if(null!=me.tenantId&&void 0!==me._tenantRecaptchaConfigs[me.tenantId])return me._tenantRecaptchaConfigs[me.tenantId].siteKey}return new Promise(function(){var Je=(0,d.Z)(function*(rt,At){ot(me,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(In=>{if(void 0!==In.recaptchaKey){const pi=new Jr(In);return null==me.tenantId?me._agentRecaptchaConfig=pi:me._tenantRecaptchaConfigs[me.tenantId]=pi,rt(pi.siteKey)}At(new Error("recaptcha Enterprise site key undefined"))}).catch(In=>{At(In)})});return function(rt,At){return Je.apply(this,arguments)}}())}),O.apply(this,arguments)}function Q(me,Je,rt){const At=window.grecaptcha;An(At)?At.enterprise.ready(()=>{At.enterprise.execute(me,{action:p}).then(In=>{Je(In)}).catch(()=>{Je("NO_RECAPTCHA")})}):rt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((me,Je)=>{(function T(me){return O.apply(this,arguments)})(E.auth).then(rt=>{if(!m&&An(window.grecaptcha))Q(rt,me,Je);else{if(typeof window>"u")return void Je(new Error("RecaptchaVerifier is only supported in browser"));zi("https://www.google.com/recaptcha/enterprise.js?render="+rt).then(()=>{Q(rt,me,Je)}).catch(At=>{Je(At)})}}).catch(rt=>{Je(rt)})})})()}}function di(w,p,m){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,d.Z)(function*(w,p,m,E=!1){const T=new Hr(w);let O;try{O=yield T.verify(m)}catch{O=yield T.verify(m,!0)}const Q=Object.assign({},p);return Object.assign(Q,E?{captchaResp:O}:{captchaResponse:O}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class ys{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=O=>new Promise((Q,me)=>{try{Q(p(O))}catch(Je){me(Je)}});E.onAbort=m,this.queue.push(E);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const T of m.queue)yield T(p),T.onAbort&&E.push(T.onAbort)}catch(T){E.reverse();for(const O of E)try{O()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class _s{constructor(p,m,E,T){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=E,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qi(this),this.idTokenSubscription=new qi(this),this.beforeStateQueue=new ys(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=He(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var T,O;if(!E._deleted&&(E.persistenceManager=yield z.create(E,p),!E._deleted)){if(null!==(T=E._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,d.Z)(function*(){var E;const T=yield m.assertedPersistence.getCurrentUser();let O=T,Q=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const me=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Je=O?._redirectEventId,rt=yield m.tryRedirectSignIn(p);(!me||me===Je)&&rt?.user&&(O=rt.user,Q=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(Q)try{yield m.beforeStateQueue.runMiddleware(O)}catch(me){O=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(me))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return k(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var m=this;return(0,d.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,d.Z)(function*(){try{yield xr(p)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function hn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,d.Z)(function*(){const E=p?(0,V.m9)(p):null;return E&&k(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return p&&k(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(He(p))}))}initializeRecaptchaConfig(){var p=this;return(0,d.Z)(function*(){const m=yield ot(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new Jr(m);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new Hr(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new V.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,d.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(m);return null===p?T.removeCurrentUser():T.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&He(p)||m._popupRedirectResolver;k(E,m,"argument-error"),m.redirectPersistenceManager=yield z.create(m,[He(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,d.Z)(function*(){var E,T;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,d.Z)(function*(){if(p===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,T){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return k(Q,this,"internal-error"),Q.then(()=>O(this.currentUser)),"function"==typeof m?p.addObserver(m,E,T):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=K(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const T=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();T&&(E["X-Firebase-Client"]=T);const O=yield p._getAppCheckToken();return O&&(E["X-Firebase-AppCheck"]=O),E})()}_getAppCheckToken(){var p=this;return(0,d.Z)(function*(){var m;const E=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return E?.error&&function ft(w,...p){Se.logLevel<=se.in.WARN&&Se.warn(`Auth (${N.SDK_VERSION}): ${w}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function tr(w){return(0,V.m9)(w)}class qi{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,V.ne)(m=>this.observer=m)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function go(w,p,m){const E=tr(w);k(E._canInitEmulator,E,"emulator-config-failed"),k(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const T=!!m?.disableWarnings,O=Gr(p),{host:Q,port:me}=function Sa(w){const p=Gr(w),m=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const O=T[1];return{host:O,port:Ko(E.substr(O.length+1))}}{const[O,Q]=E.split(":");return{host:O,port:Ko(Q)}}}(p);E.config.emulator={url:`${O}//${Q}${null===me?"":`:${me}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:me,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Su(){function w(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Gr(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function Ko(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class H{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return te("not implemented")}_getIdTokenResponse(p){return te("not implemented")}_linkToIdToken(p,m){return te("not implemented")}_getReauthenticationResolver(p){return te("not implemented")}}function re(w,p){return xe.apply(this,arguments)}function xe(){return(xe=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:resetPassword",oe(w,p))})).apply(this,arguments)}function gt(w,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function tn(){return(tn=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:update",oe(w,p))})).apply(this,arguments)}function sr(w,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,d.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithPassword",oe(w,p))})).apply(this,arguments)}function Pr(w,p){return ss.apply(this,arguments)}function ss(){return(ss=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:sendOobCode",oe(w,p))})).apply(this,arguments)}function Mu(){return(Mu=(0,d.Z)(function*(w,p){return Pr(w,p)})).apply(this,arguments)}function Ma(w,p){return xa.apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(w,p){return Pr(w,p)})).apply(this,arguments)}function Oa(w,p){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,d.Z)(function*(w,p){return Pr(w,p)})).apply(this,arguments)}function zr(){return(zr=(0,d.Z)(function*(w,p){return Pr(w,p)})).apply(this,arguments)}function ei(){return(ei=(0,d.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithEmailLink",oe(w,p))})).apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithEmailLink",oe(w,p))})).apply(this,arguments)}class ks extends H{constructor(p,m,E,T=null){super("password",E),this._email=p,this._password=m,this._tenantId=T}static _fromEmailAndPassword(p,m){return new ks(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new ks(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,d.Z)(function*(){var E;switch(m.signInMethod){case"password":const T={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const O=yield di(p,T,"signInWithPassword");return sr(p,O)}return sr(p,T).catch(function(){var O=(0,d.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const me=yield di(p,T,"signInWithPassword");return sr(p,me)}return Promise.reject(Q)});return function(Q){return O.apply(this,arguments)}}());case"emailLink":return function mo(w,p){return ei.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:ee(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return gt(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Oc(w,p){return Pa.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:ee(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Zi(w,p){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,d.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithIdp",oe(w,p))})).apply(this,arguments)}class Xe extends H{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Xe(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):ee("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:T}=m,O=(0,Y._T)(m,["providerId","signInMethod"]);if(!E||!T)return null;const Q=new Xe(E,T);return Q.idToken=O.idToken||void 0,Q.accessToken=O.accessToken||void 0,Q.secret=O.secret,Q.nonce=O.nonce,Q.pendingToken=O.pendingToken||null,Q}_getIdTokenResponse(p){return Zi(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Zi(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Zi(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,V.xO)(m)}return p}}function jn(){return(jn=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:sendVerificationCode",oe(w,p))})).apply(this,arguments)}function Fs(){return(Fs=(0,d.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,p))})).apply(this,arguments)}function yo(){return(yo=(0,d.Z)(function*(w,p){const m=yield Wt(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,p));if(m.temporaryProof)throw fn(w,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const gr={USER_NOT_FOUND:"user-not-found"};function wi(){return(wi=(0,d.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),gr)})).apply(this,arguments)}class kt extends H{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new kt({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new kt({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function ti(w,p){return Fs.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function qr(w,p){return yo.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function vs(w,p){return wi.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:T}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:T}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:O}=p;return E||m||T||O?new kt({verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:O}):null}}class br{constructor(p){var m,E,T,O,Q,me;const Je=(0,V.zd)((0,V.pd)(p)),rt=null!==(m=Je.apiKey)&&void 0!==m?m:null,At=null!==(E=Je.oobCode)&&void 0!==E?E:null,In=function Jo(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Je.mode)&&void 0!==T?T:null);k(rt&&At&&In,"argument-error"),this.apiKey=rt,this.operation=In,this.code=At,this.continueUrl=null!==(O=Je.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Q=Je.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(me=Je.tenantId)&&void 0!==me?me:null}static parseLink(p){const m=function Od(w){const p=(0,V.zd)((0,V.pd)(w)).link,m=p?(0,V.zd)((0,V.pd)(p)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(w)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||m||p||w}(p);try{return new br(m)}catch{return null}}}let Fi=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(m,E){return ks._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const T=br.parseLink(E);return k(T,"argument-error"),ks._fromEmailAndCode(m,T.code,T.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Li{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class fi extends Li{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class os extends fi{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return k("providerId"in m&&"signInMethod"in m,"argument-error"),Xe._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return k(p.idToken||p.accessToken,"argument-error"),Xe._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return os.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return os.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:O,nonce:Q,providerId:me}=p;if(!E&&!T&&!m&&!O||!me)return null;try{return new os(me)._credential({idToken:m,accessToken:E,nonce:Q,pendingToken:O})}catch{return null}}}let Pc=(()=>{class w extends fi{constructor(){super("facebook.com")}static credential(m){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Ys=(()=>{class w extends fi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:T}=m;if(!E&&!T)return null;try{return w.credential(E,T)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),ws=(()=>{class w extends fi{constructor(){super("github.com")}static credential(m){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class F extends H{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Zi(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Zi(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Zi(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:T,pendingToken:O}=m;return E&&T&&O&&E===T?new F(E,O):null}static _create(p,m){return new F(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ge extends Li{constructor(p){k(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ge.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ge.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=F.fromJSON(p);return k(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return F._create(E,m)}catch{return null}}}let Pe=(()=>{class w extends fi{constructor(){super("twitter.com")}static credential(m,E){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=m;if(!E||!T)return null;try{return w.credential(E,T)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Ze(w,p){return et.apply(this,arguments)}function et(){return(et=(0,d.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signUp",oe(w,p))})).apply(this,arguments)}class bt{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,T=!1){return(0,d.Z)(function*(){const O=yield Z._fromIdTokenResponse(p,E,T),Q=Ft(E);return new bt({user:O,providerId:Q,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const T=Ft(E);return new bt({user:p,providerId:T,_tokenResponse:E,operationType:m})})()}}function Ft(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function qt(w){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,d.Z)(function*(w){var p;const m=tr(w);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new bt({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Ze(m,{returnSecureToken:!0}),T=yield bt._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ur extends V.ZR{constructor(p,m,E,T){var O;super(m.code,m.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,Ur.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,T){return new Ur(p,m,E,T)}}function er(w,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(w):m._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Ur._fromErrorAndOperation(w,O,p,E):O})}function On(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function _o(w,p){return Wi.apply(this,arguments)}function Wi(){return Wi=(0,d.Z)(function*(w,p){const m=(0,V.m9)(w);yield Ei(!0,m,p);const{providerUserInfo:E}=yield function _n(w,p){return Nn.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),T=On(E||[]);return m.providerData=m.providerData.filter(O=>T.has(O.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),Wi.apply(this,arguments)}function Es(w,p){return cr.apply(this,arguments)}function cr(){return(cr=(0,d.Z)(function*(w,p,m=!1){const E=yield Rt(w,p._linkToIdToken(w.auth,yield w.getIdToken()),m);return bt._forOperation(w,"link",E)})).apply(this,arguments)}function Ei(w,p,m){return Na.apply(this,arguments)}function Na(){return(Na=(0,d.Z)(function*(w,p,m){yield xr(p);const T=!1===w?"provider-already-linked":"no-such-provider";k(On(p.providerData).has(m)===w,p.auth,T)})).apply(this,arguments)}function Zf(w,p){return iy.apply(this,arguments)}function iy(){return(iy=(0,d.Z)(function*(w,p,m=!1){const{auth:E}=w,T="reauthenticate";try{const O=yield Rt(w,er(E,T,p,w),m);k(O.idToken,E,"internal-error");const Q=It(O.idToken);k(Q,E,"internal-error");const{sub:me}=Q;return k(w.uid===me,E,"user-mismatch"),bt._forOperation(w,T,O)}catch(O){throw"auth/user-not-found"===O?.code&&ee(E,"user-mismatch"),O}})).apply(this,arguments)}function sy(w,p){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,d.Z)(function*(w,p,m=!1){const E="signIn",T=yield er(w,E,p),O=yield bt._fromIdTokenResponse(w,E,T);return m||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Nd(w,p){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,d.Z)(function*(w,p){return sy(tr(w),p)})).apply(this,arguments)}function Mw(w,p){return oy.apply(this,arguments)}function oy(){return(oy=(0,d.Z)(function*(w,p){const m=(0,V.m9)(w);return yield Ei(!1,m,p.providerId),Es(m,p)})).apply(this,arguments)}function Er(w,p){return ay.apply(this,arguments)}function ay(){return(ay=(0,d.Z)(function*(w,p){return Zf((0,V.m9)(w),p)})).apply(this,arguments)}function uy(){return(uy=(0,d.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithCustomToken",oe(w,p))})).apply(this,arguments)}function DT(w,p){return cy.apply(this,arguments)}function cy(){return cy=(0,d.Z)(function*(w,p){const m=tr(w),E=yield function bT(w,p){return uy.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),T=yield bt._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(T.user),T}),cy.apply(this,arguments)}class Rd{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?ly._fromServerResponse(p,m):"totpInfo"in m?Nc._fromServerResponse(p,m):ee(p,"internal-error")}}class ly extends Rd{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new ly(m)}}class Nc extends Rd{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new Nc(m)}}function Ra(w,p,m){var E;k((null===(E=m.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),k(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(k(m.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(k(m.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function TT(w,p,m){return dy.apply(this,arguments)}function dy(){return dy=(0,d.Z)(function*(w,p,m){var E;const T=tr(w),O={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Q=yield di(T,O,"getOobCode",!0);m&&Ra(T,Q,m),yield Ma(T,Q)}else m&&Ra(T,O,m),yield Ma(T,O).catch(function(){var Q=(0,d.Z)(function*(me){if("auth/missing-recaptcha-token"!==me.code)return Promise.reject(me);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Je=yield di(T,O,"getOobCode",!0);m&&Ra(T,Je,m),yield Ma(T,Je)}});return function(me){return Q.apply(this,arguments)}}())}),dy.apply(this,arguments)}function hy(w,p,m){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,d.Z)(function*(w,p,m){yield re((0,V.m9)(w),{oobCode:p,newPassword:m})})).apply(this,arguments)}function vo(w,p){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,d.Z)(function*(w,p){yield function En(w,p){return tn.apply(this,arguments)}((0,V.m9)(w),{oobCode:p})}),Rc.apply(this,arguments)}function xu(w,p){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,d.Z)(function*(w,p){const m=(0,V.m9)(w),E=yield re(m,{oobCode:p}),T=E.requestType;switch(k(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":k(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":k(E.mfaInfo,m,"internal-error");default:k(E.email,m,"internal-error")}let O=null;return E.mfaInfo&&(O=Rd._fromServerResponse(tr(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:T}})).apply(this,arguments)}function kd(w,p){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,d.Z)(function*(w,p){const{data:m}=yield xu((0,V.m9)(w),p);return m.email})).apply(this,arguments)}function Fd(w,p,m){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,d.Z)(function*(w,p,m){var E;const T=tr(w),O={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const rt=yield di(T,O,"signUpPassword");Q=Ze(T,rt)}else Q=Ze(T,O).catch(function(){var rt=(0,d.Z)(function*(At){if("auth/missing-recaptcha-token"===At.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const In=yield di(T,O,"signUpPassword");return Ze(T,In)}return Promise.reject(At)});return function(At){return rt.apply(this,arguments)}}());const me=yield Q.catch(rt=>Promise.reject(rt)),Je=yield bt._fromIdTokenResponse(T,"signIn",me);return yield T._updateCurrentUser(Je.user),Je}),Ld.apply(this,arguments)}function fy(w,p,m){return Nd((0,V.m9)(w),Fi.credential(p,m))}function Kf(w,p,m){return ka.apply(this,arguments)}function ka(){return ka=(0,d.Z)(function*(w,p,m){var E;const T=tr(w),O={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Q(me,Je){k(Je.handleCodeInApp,T,"argument-error"),Je&&Ra(T,me,Je)}if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const me=yield di(T,O,"getOobCode",!0);Q(me,m),yield Oa(T,me)}else Q(O,m),yield Oa(T,O).catch(function(){var me=(0,d.Z)(function*(Je){if("auth/missing-recaptcha-token"!==Je.code)return Promise.reject(Je);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const rt=yield di(T,O,"getOobCode",!0);Q(rt,m),yield Oa(T,rt)}});return function(Je){return me.apply(this,arguments)}}())}),ka.apply(this,arguments)}function py(w,p){const m=br.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}function Yf(w,p,m){return kc.apply(this,arguments)}function kc(){return(kc=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w),T=Fi.credentialWithLink(p,m||it());return k(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Nd(E,T)})).apply(this,arguments)}function Ud(){return(Ud=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:createAuthUri",oe(w,p))})).apply(this,arguments)}function my(w,p){return Ou.apply(this,arguments)}function Ou(){return Ou=(0,d.Z)(function*(w,p){const E={identifier:p,continueUri:Lt()?it():"http://localhost"},{signinMethods:T}=yield function gy(w,p){return Ud.apply(this,arguments)}((0,V.m9)(w),E);return T||[]}),Ou.apply(this,arguments)}function Fc(w,p){return wo.apply(this,arguments)}function wo(){return wo=(0,d.Z)(function*(w,p){const m=(0,V.m9)(w),T={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&Ra(m.auth,T,p);const{email:O}=yield function Yo(w,p){return Mu.apply(this,arguments)}(m.auth,T);O!==w.email&&(yield w.reload())}),wo.apply(this,arguments)}function yy(w,p,m){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};m&&Ra(E.auth,O,m);const{email:Q}=yield function Lr(w,p){return zr.apply(this,arguments)}(E.auth,O);Q!==w.email&&(yield w.reload())}),Qf.apply(this,arguments)}function _y(){return(_y=(0,d.Z)(function*(w,p){return Ae(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ow(w,p){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,d.Z)(function*(w,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,V.m9)(w),O={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Q=yield Rt(E,function xw(w,p){return _y.apply(this,arguments)}(E.auth,O));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const me=E.providerData.find(({providerId:Je})=>"password"===Je);me&&(me.displayName=E.displayName,me.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)}),Jf.apply(this,arguments)}function AT(w,p){return Vd((0,V.m9)(w),p,null)}function vy(w,p){return Vd((0,V.m9)(w),null,p)}function Vd(w,p,m){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,d.Z)(function*(w,p,m){const{auth:E}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(O.email=p),m&&(O.password=m);const Q=yield Rt(w,gt(E,O));yield w._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class Lc{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class Pw extends Lc{constructor(p,m,E,T){super(p,m,E),this.username=T}}class Uc extends Lc{constructor(p,m){super(p,"facebook.com",m)}}class wy extends Pw{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class tp extends Lc{constructor(p,m){super(p,"google.com",m)}}class Bd extends Pw{constructor(p,m,E){super(p,"twitter.com",m,E)}}function Pu(w){const{user:p,_tokenResponse:m}=w;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ep(w){var p,m;if(!w)return null;const{providerId:E}=w,T=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const Q=null===(m=null===(p=It(w.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Q)return new Lc(O,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new Uc(O,T);case"github.com":return new wy(O,T);case"google.com":return new tp(O,T);case"twitter.com":return new Bd(O,T,w.screenName||null);case"custom":case"anonymous":return new Lc(O,null);default:return new Lc(O,E,T)}}(m)}class Js{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new Js("enroll",p,m)}static _fromMfaPendingCredential(p){return new Js("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Js._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return Js._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Fa{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=tr(p),T=m.customData._serverResponse,O=(T.mfaInfo||[]).map(me=>Rd._fromServerResponse(E,me));k(T.mfaPendingCredential,E,"internal-error");const Q=Js._fromMfaPendingCredential(T.mfaPendingCredential);return new Fa(Q,O,function(){var me=(0,d.Z)(function*(Je){const rt=yield Je._process(E,Q);delete T.mfaInfo,delete T.mfaPendingCredential;const At=Object.assign(Object.assign({},T),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(m.operationType){case"signIn":const In=yield bt._fromIdTokenResponse(E,m.operationType,At);return yield E._updateCurrentUser(In.user),In;case"reauthenticate":return k(m.user,E,"internal-error"),bt._forOperation(m.user,m.operationType,At);default:ee(E,"internal-error")}});return function(Je){return me.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,d.Z)(function*(){return m.signInResolver(p)})()}}function Gd(w,p){var m;const E=(0,V.m9)(w),T=p;return k(p.customData.operationType,E,"argument-error"),k(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Fa._fromError(E,T)}class Bc{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Rd._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Bc(p)}getSession(){var p=this;return(0,d.Z)(function*(){return Js._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,d.Z)(function*(){const T=p,O=yield E.getSession(),Q=yield Rt(E.user,T._process(E.user.auth,O,m));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(p){var m=this;return(0,d.Z)(function*(){const E="string"==typeof p?p:p.uid,T=yield m.user.getIdToken();try{const O=yield Rt(m.user,function rp(w,p){return Ae(w,"POST","/v2/accounts/mfaEnrollment:withdraw",oe(w,p))}(m.user.auth,{idToken:T,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Q})=>Q!==E),yield m.user._updateTokensIfNecessary(O),yield m.user.reload()}catch(O){throw O}})()}}const zn=new WeakMap;function jc(w){const p=(0,V.m9)(w);return zn.has(p)||zn.set(p,Bc._fromUser(p)),zn.get(p)}const Xs="__sak";class Ii{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Xs,"1"),this.storage.removeItem(Xs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zd=(()=>{class w extends Ii{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fw(){const w=(0,V.z$)();return R(w)||st(w)}()&&function wr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Yt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),O=this.localCache[E];T!==O&&m(E,O,T)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((me,Je,rt)=>{this.notifyListeners(me,rt)});const T=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const me=this.storage.getItem(T);if(m.newValue!==me)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!E)return}const O=()=>{const me=this.storage.getItem(T);!E&&this.localCache[T]===me||this.notifyListeners(T,me)},Q=this.storage.getItem(T);!function vn(){return(0,V.w1)()&&10===document.documentMode}()||Q===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const O of Array.from(T))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var T=()=>super._set,O=this;return(0,d.Z)(function*(){yield T().call(O,m,E),O.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,T=this;return(0,d.Z)(function*(){const O=yield E().call(T,m);return T.localCache[m]=JSON.stringify(O),O})()}_remove(m){var E=()=>super._remove,T=this;return(0,d.Z)(function*(){yield E().call(T,m),delete T.localCache[m]})()}}return w.type="LOCAL",w})(),$c=(()=>{class w extends Ii{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return w.type="SESSION",w})();let ip=(()=>{class w{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(O=>O.isListeningto(m));if(E)return E;const T=new w(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,d.Z)(function*(){const T=m,{eventId:O,eventType:Q,data:me}=T.data,Je=E.handlersMap[Q];if(!Je?.size)return;T.ports[0].postMessage({status:"ack",eventId:O,eventType:Q});const rt=Array.from(Je).map(function(){var In=(0,d.Z)(function*(pi){return pi(T.origin,me)});return function(pi){return In.apply(this,arguments)}}()),At=yield function Eo(w){return Promise.all(w.map(function(){var p=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(rt);T.ports[0].postMessage({status:"done",eventId:O,eventType:Q,response:At})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Nu(w="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return w+m}class Dy{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var T=this;return(0,d.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Q,me;return new Promise((Je,rt)=>{const At=Nu("",20);O.port1.start();const In=setTimeout(()=>{rt(new Error("unsupported_event"))},E);me={messageChannel:O,onMessage(pi){const cs=pi;if(cs.data.eventId===At)switch(cs.data.status){case"ack":clearTimeout(In),Q=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Je(cs.data.response);break;default:clearTimeout(In),clearTimeout(Q),rt(new Error("invalid_response"))}}},T.handlers.add(me),O.port1.addEventListener("message",me.onMessage),T.target.postMessage({eventType:p,eventId:At,data:m},[O.port2])}).finally(()=>{me&&T.removeMessageHandler(me)})})()}}function Nr(){return window}function sp(){return typeof Nr().WorkerGlobalScope<"u"&&"function"==typeof Nr().importScripts}function Hc(){return(Hc=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ap="firebaseLocalStorageDb",Ua="firebaseLocalStorage",Co="fbase_key";class Ru{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Kd(w,p){return w.transaction([Ua],p?"readwrite":"readonly").objectStore(Ua)}function up(){const w=indexedDB.open(ap,1);return new Promise((p,m)=>{w.addEventListener("error",()=>{m(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(Ua,{keyPath:Co})}catch(T){m(T)}}),w.addEventListener("success",(0,d.Z)(function*(){const E=w.result;E.objectStoreNames.contains(Ua)?p(E):(E.close(),yield function Ay(){const w=indexedDB.deleteDatabase(ap);return new Ru(w).toPromise()}(),p(yield up()))}))})}function cp(w,p,m){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,d.Z)(function*(w,p,m){const E=Kd(w,!0).put({[Co]:p,value:m});return new Ru(E).toPromise()})).apply(this,arguments)}function Cs(){return(Cs=(0,d.Z)(function*(w,p){const m=Kd(w,!1).get(p),E=yield new Ru(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Yd(w,p){const m=Kd(w,!0).delete(p);return new Ru(m).toPromise()}const Us=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield up()),m.db})()}_withRetries(m){var E=this;return(0,d.Z)(function*(){let T=0;for(;;)try{const O=yield E._openDb();return yield m(O)}catch(O){if(T++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return sp()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=ip._getInstance(function op(){return sp()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(T,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(T,O){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(T,O){return["keyChanged"]});return function(T,O){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var E,T;if(m.activeServiceWorker=yield function Gt(){return Hc.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Dy(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);O&&null!==(E=O[0])&&void 0!==E&&E.fulfilled&&null!==(T=O[0])&&void 0!==T&&T.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Uw(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield up();return yield cp(m,Xs,"1"),yield Yd(m,Xs),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var T=this;return(0,d.Z)(function*(){return T._withPendingWrite((0,d.Z)(function*(){return yield T._withRetries(O=>cp(O,m,E)),T.localCache[m]=E,T.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,d.Z)(function*(){const T=yield E._withRetries(O=>function Sn(w,p){return Cs.apply(this,arguments)}(O,m));return E.localCache[m]=T,T})()}_remove(m){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(T=>Yd(T,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const E=yield m._withRetries(Q=>{const me=Kd(Q,!1).getAll();return new Ru(me).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const T=[],O=new Set;for(const{fbase_key:Q,value:me}of E)O.add(Q),JSON.stringify(m.localCache[Q])!==JSON.stringify(me)&&(m.notifyListeners(Q,me),T.push(Q));for(const Q of Object.keys(m.localCache))m.localCache[Q]&&!O.has(Q)&&(m.notifyListeners(Q,null),T.push(Q));return T})()}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const O of Array.from(T))O(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),ri=1e12;class Io{constructor(p){this.auth=p,this.counter=ri,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new xy(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||ri;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||ri))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,d.Z)(function*(){var E;return null===(E=m._widgets.get(p||ri))||void 0===E||E.execute(),""})()}}class xy{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof p?document.getElementById(p):p;k(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Fu(w){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Vs=Or("rcb"),Vw=new Xt(3e4,6e4);class fp{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Nr().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return k(function Bw(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&ct(Nr().grecaptcha)?Promise.resolve(Nr().grecaptcha):new Promise((E,T)=>{const O=Nr().setTimeout(()=>{T(Te(p,"network-request-failed"))},Vw.get());Nr()[Vs]=()=>{Nr().clearTimeout(O),delete Nr()[Vs];const me=Nr().grecaptcha;if(!me||!ct(me))return void T(Te(p,"internal-error"));const Je=me.render;me.render=(rt,At)=>{const In=Je(rt,At);return this.counter++,In},this.hostLanguage=m,E(me)},zi(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Vs,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),T(Te(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Nr().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class pp{load(p){return(0,d.Z)(function*(){return new Io(p)})()}clearedOneInstance(){}}const Qd="recaptcha",Oy={theme:"light",type:"image"};class gp{constructor(p,m=Object.assign({},Oy),E){this.parameters=m,this.type=Qd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tr(E),this.isInvisible="invisible"===this.parameters.size,k(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof p?document.getElementById(p):p;k(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pp:new fp,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(O=>{const Q=me=>{me&&(p.tokenChangeListeners.delete(Q),O(me))};p.tokenChangeListeners.add(Q),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){k(!this.parameters.sitekey,this.auth,"argument-error"),k(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),k(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Nr()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){k(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){k(Lt()&&!sp(),p.auth,"internal-error"),yield function jw(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function de(w){return nt.apply(this,arguments)}(p.auth);k(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return k(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jd{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=kt._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function bi(w,p,m){return bo.apply(this,arguments)}function bo(){return(bo=(0,d.Z)(function*(w,p,m){const E=tr(w),T=yield zc(E,p,(0,V.m9)(m));return new Jd(T,O=>Nd(E,O))})).apply(this,arguments)}function mp(w,p,m){return nr.apply(this,arguments)}function nr(){return(nr=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w);yield Ei(!1,E,"phone");const T=yield zc(E.auth,p,(0,V.m9)(m));return new Jd(T,O=>Mw(E,O))})).apply(this,arguments)}function Pt(w,p,m){return ii.apply(this,arguments)}function ii(){return(ii=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w),T=yield zc(E.auth,p,(0,V.m9)(m));return new Jd(T,O=>Er(E,O))})).apply(this,arguments)}function zc(w,p,m){return Xd.apply(this,arguments)}function Xd(){return Xd=(0,d.Z)(function*(w,p,m){var E;const T=yield m.verify();try{let O;if(k("string"==typeof T,w,"argument-error"),k(m.type===Qd,w,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const Q=O.session;if("phoneNumber"in O)return k("enroll"===Q.type,w,"internal-error"),(yield function by(w,p){return Ae(w,"POST","/v2/accounts/mfaEnrollment:start",oe(w,p))}(w,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{k("signin"===Q.type,w,"internal-error");const me=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return k(me,w,"missing-multi-factor-info"),(yield function lp(w,p){return Ae(w,"POST","/v2/accounts/mfaSignIn:start",oe(w,p))}(w,{mfaPendingCredential:Q.credential,mfaEnrollmentId:me,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function zt(w,p){return jn.apply(this,arguments)}(w,{phoneNumber:O.phoneNumber,recaptchaToken:T});return Q}}finally{m._reset()}}),Xd.apply(this,arguments)}function Di(w,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,d.Z)(function*(w,p){yield Es((0,V.m9)(w),p)})).apply(this,arguments)}let lr=(()=>{class w{constructor(m){this.providerId=w.PROVIDER_ID,this.auth=tr(m)}verifyPhoneNumber(m,E){return zc(this.auth,m,(0,V.m9)(E))}static credential(m,E){return kt._fromVerification(m,E)}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:T}=m;return E&&T?kt._fromTokenResponse(E,T):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Do(w,p){return p?He(p):(k(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Xo extends H{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Zi(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Zi(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Zi(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Qt(w){return sy(w.auth,new Xo(w),w.bypassAuthState)}function Py(w){const{auth:p,user:m}=w;return k(m,p,"internal-error"),Zf(m,new Xo(w),w.bypassAuthState)}function yp(w){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,d.Z)(function*(w){const{auth:p,user:m}=w;return k(m,p,"internal-error"),Es(m,new Xo(w),w.bypassAuthState)})).apply(this,arguments)}class to{constructor(p,m,E,T,O=!1){this.auth=p,this.resolver=E,this.user=T,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,d.Z)(function*(E,T){p.pendingPromise={resolve:E,reject:T};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(E,T){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:O,tenantId:Q,error:me,type:Je}=p;if(me)return void m.reject(me);const rt={auth:m.auth,requestUri:E,sessionId:T,tenantId:Q||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Je)(rt))}catch(At){m.reject(At)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Qt;case"linkViaPopup":case"linkViaRedirect":return yp;case"reauthViaPopup":case"reauthViaRedirect":return Py;default:ee(this.auth,"internal-error")}}resolve(p){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){be(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const no=new Xt(2e3,1e4);function Ti(w,p,m){return Va.apply(this,arguments)}function Va(){return(Va=(0,d.Z)(function*(w,p,m){const E=tr(w);Me(w,p,Li);const T=Do(E,m);return new ro(E,"signInViaPopup",p,T).executeNotNull()})).apply(this,arguments)}function ea(w,p,m){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w);Me(E.auth,p,Li);const T=Do(E.auth,m);return new ro(E.auth,"reauthViaPopup",p,T,E).executeNotNull()})).apply(this,arguments)}function qc(w,p,m){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w);Me(E.auth,p,Li);const T=Do(E.auth,m);return new ro(E.auth,"linkViaPopup",p,T,E).executeNotNull()})).apply(this,arguments)}let ro=(()=>{class w extends to{constructor(m,E,T,O,Q){super(m,E,O,Q),this.provider=T,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const E=yield m.execute();return k(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,d.Z)(function*(){be(1===m.filter.length,"Popup operations only handle one event");const E=Nu();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(Te(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,T;this.pollId=null!==(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,no.get())};m()}}return w.currentPopupAction=null,w})();const Uu="pendingRedirect",Bs=new Map;class To extends to{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,d.Z)(function*(){let E=Bs.get(m.auth._key());if(!E){try{const O=(yield function Vu(w,p){return eh.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(O)}catch(T){E=()=>Promise.reject(T)}Bs.set(m.auth._key(),E)}return m.bypassAuthState||Bs.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const T=yield E.auth._redirectUserForId(p.eventId);if(T)return E.user=T,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function eh(){return(eh=(0,d.Z)(function*(w,p){const m=th(p),E=Vi(w);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(m));return yield E._remove(m),T})).apply(this,arguments)}function Bu(w,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,d.Z)(function*(w,p){return Vi(w)._set(th(p),"true")})).apply(this,arguments)}function io(){Bs.clear()}function Wc(w,p){Bs.set(w._key(),p)}function Vi(w){return He(w._redirectPersistence)}function th(w){return mn(Uu,w.config.apiKey,w.name)}function Kc(w,p,m){return function Ki(w,p,m){return $n.apply(this,arguments)}(w,p,m)}function $n(){return($n=(0,d.Z)(function*(w,p,m){const E=tr(w);Me(w,p,Li),yield E._initializationPromise;const T=Do(E,m);return yield Bu(T,E),T._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Wn(w,p,m){return function ja(w,p,m){return si.apply(this,arguments)}(w,p,m)}function si(){return(si=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w);Me(E.auth,p,Li),yield E.auth._initializationPromise;const T=Do(E.auth,m);yield Bu(T,E.auth);const O=yield as(E);return T._openRedirect(E.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function Ai(w,p,m){return function $a(w,p,m){return ju.apply(this,arguments)}(w,p,m)}function ju(){return(ju=(0,d.Z)(function*(w,p,m){const E=(0,V.m9)(w);Me(E.auth,p,Li),yield E.auth._initializationPromise;const T=Do(E.auth,m);yield Ei(!1,E,p.providerId),yield Bu(T,E.auth);const O=yield as(E);return T._openRedirect(E.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function Ny(w,p){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,d.Z)(function*(w,p){return yield tr(w)._initializationPromise,Ao(w,p,!1)})).apply(this,arguments)}function Ao(w,p){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,d.Z)(function*(w,p,m=!1){const E=tr(w),T=Do(E,p),Q=yield new To(E,T,m).execute();return Q&&!m&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,p)),Q})).apply(this,arguments)}function as(w){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,d.Z)(function*(w){const p=Nu(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class Ha{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ra(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nh(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!nh(p)){const T=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Te(this.auth,T))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_p(p))}saveEventToCache(p){this.cachedEventUids.add(_p(p)),this.lastProcessedEventTime=Date.now()}}function _p(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function nh({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===p?.code}function rh(w){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,d.Z)(function*(w,p={}){return Ae(w,"GET","/v1/projects",p)})).apply(this,arguments)}const sn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,So=/^https?/;function Mo(){return(Mo=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield rh(w);for(const m of p)try{if(vp(m))return}catch{}ee(w,"unauthorized-domain")})).apply(this,arguments)}function vp(w){const p=it(),{protocol:m,hostname:E}=new URL(p);if(w.startsWith("chrome-extension://")){const Q=new URL(w);return""===Q.hostname&&""===E?"chrome-extension:"===m&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Q.hostname===E}if(!So.test(m))return!1;if(sn.test(w))return E===w;const T=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const wp=new Xt(3e4,6e4);function Si(){const w=Nr().___jsl;if(w?.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let m=0;m<w.CP.length;m++)w.CP[m]=null}let Br=null;const Cp=new Xt(5e3,15e3),Jc="__/auth/iframe",Ip="emulator/auth/iframe",bp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ga(w){const p=w.config;k(p.authDomain,w,"auth-domain-config-required");const m=p.emulator?Zn(p,Ip):`https://${w.config.authDomain}/${Jc}`,E={apiKey:p.apiKey,appName:w.name,v:N.SDK_VERSION},T=Xc.get(w.config.apiHost);T&&(E.eid=T);const O=w._getFrameworks();return O.length&&(E.fw=O.join(",")),`${m}?${(0,V.xO)(E).slice(1)}`}function so(){return so=(0,d.Z)(function*(w){const p=yield function xo(w){return Br=Br||function Ep(w){return new Promise((p,m)=>{var E,T,O;function Q(){Si(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Si(),m(Te(w,"network-request-failed"))},timeout:wp.get()})}if(null!==(T=null===(E=Nr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==T&&T.Iframe)p(gapi.iframes.getContext());else{if(null===(O=Nr().gapi)||void 0===O||!O.load){const me=Or("iframefcb");return Nr()[me]=()=>{gapi.load?Q():m(Te(w,"network-request-failed"))},zi(`https://apis.google.com/js/api.js?onload=${me}`).catch(Je=>m(Je))}Q()}}).catch(p=>{throw Br=null,p})}(w),Br}(w),m=Nr().gapi;return k(m,w,"internal-error"),p.open({where:document.body,url:Ga(w),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bp,dontclear:!0},E=>new Promise(function(){var T=(0,d.Z)(function*(O,Q){yield E.restyle({setHideOnLeave:!1});const me=Te(w,"network-request-failed"),Je=Nr().setTimeout(()=>{Q(me)},Cp.get());function rt(){Nr().clearTimeout(Je),O(E)}E.ping(rt).then(rt,()=>{Q(me)})});return function(O,Q){return T.apply(this,arguments)}}()))}),so.apply(this,arguments)}const $u={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oa{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Dp="__/auth/handler",Hw="emulator/auth/handler",ih=encodeURIComponent("fac");function us(w,p,m,E,T,O){return nl.apply(this,arguments)}function nl(){return(nl=(0,d.Z)(function*(w,p,m,E,T,O){k(w.config.authDomain,w,"auth-domain-config-required"),k(w.config.apiKey,w,"invalid-api-key");const Q={apiKey:w.config.apiKey,appName:w.name,authType:m,redirectUrl:E,v:N.SDK_VERSION,eventId:T};if(p instanceof Li){p.setDefaultLanguage(w.languageCode),Q.providerId=p.providerId||"",(0,V.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[At,In]of Object.entries(O||{}))Q[At]=In}if(p instanceof fi){const At=p.getScopes().filter(In=>""!==In);At.length>0&&(Q.scopes=At.join(","))}w.tenantId&&(Q.tid=w.tenantId);const me=Q;for(const At of Object.keys(me))void 0===me[At]&&delete me[At];const Je=yield w._getAppCheckToken(),rt=Je?`#${ih}=${encodeURIComponent(Je)}`:"";return`${function rl({config:w}){return w.emulator?Zn(w,Hw):`https://${w.authDomain}/${Dp}`}(w)}?${(0,V.xO)(me).slice(1)}${rt}`})).apply(this,arguments)}const Ar="webStorageSupport",oo=class sh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$c,this._completeRedirectFn=Ao,this._overrideRedirectResult=Wc}_openPopup(p,m,E,T){var O=this;return(0,d.Z)(function*(){var Q;be(null===(Q=O.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const me=yield us(p,m,E,it(),T);return function $w(w,p,m,E=500,T=600){const O=Math.max((window.screen.availHeight-T)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let me="";const Je=Object.assign(Object.assign({},$u),{width:E.toString(),height:T.toString(),top:O,left:Q}),rt=(0,V.z$)().toLowerCase();m&&(me=x(rt)?"_blank":m),P(rt)&&(p=p||"http://localhost",Je.scrollbars="yes");const At=Object.entries(Je).reduce((pi,[cs,ao])=>`${pi}${cs}=${ao},`,"");if(function Ut(w=(0,V.z$)()){var p;return st(w)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(rt)&&"_self"!==me)return function tl(w,p){const m=document.createElement("a");m.href=w,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",me),new oa(null);const In=window.open(p||"",me,At);k(In,w,"popup-blocked");try{In.focus()}catch{}return new oa(In)}(p,me,Nu())})()}_openRedirect(p,m,E,T){var O=this;return(0,d.Z)(function*(){return yield O._originValidation(p),function Wd(w){Nr().location.href=w}(yield us(p,m,E,it(),T)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:T,promise:O}=this.eventManagers[m];return T?Promise.resolve(T):(be(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,d.Z)(function*(){const E=yield function sa(w){return so.apply(this,arguments)}(p),T=new Ha(p);return E.register("authEvent",O=>(k(O?.authEvent,p,"invalid-auth-event"),{status:T.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:T},m.iframes[p._key()]=E,T})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Ar,{type:Ar},T=>{var O;const Q=null===(O=T?.[0])||void 0===O?void 0:O[Ar];void 0!==Q&&m(!!Q),ee(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ia(w){return Mo.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Yt()||R()||st()}};class Tp{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return te("unexpected MultiFactorSessionType")}}}class Mi extends Tp{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Mi(p)}_finalizeEnroll(p,m,E){return function zd(w,p){return Ae(w,"POST","/v2/accounts/mfaEnrollment:finalize",oe(w,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function dp(w,p){return Ae(w,"POST","/v2/accounts/mfaSignIn:finalize",oe(w,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let za=(()=>{class w{constructor(){}static assertion(m){return Mi._fromCredential(m)}}return w.FACTOR_ID="phone",w})();var Fy="@firebase/auth";class Gw{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,V.Pz)("authIdTokenMaxAge"),function oh(w){(0,N._registerComponent)(new ve.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),T=p.getProvider("heartbeat"),O=p.getProvider("app-check-internal"),{apiKey:Q,authDomain:me}=E.options;k(Q&&!Q.includes(":"),"invalid-api-key",{appName:E.name});const Je={apiKey:Q,authDomain:me,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K(w)},rt=new _s(E,T,O,Je);return function Aa(w,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(He);p?.errorMap&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(E,p?.popupRedirectResolver)}(rt,m),rt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ve.wA("auth-internal",p=>{const m=tr(p.getProvider("auth").getImmediate());return new Gw(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Fy,"0.23.2",function Yi(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(Fy,"0.23.2","esm2017")}("Browser")},9058:(_t,De,M)=>{M.d(De,{$s:()=>He,BH:()=>ue,G6:()=>Zn,L:()=>he,LL:()=>Ge,Pz:()=>Te,Sg:()=>Me,UG:()=>te,US:()=>ve,ZB:()=>ne,ZR:()=>Ae,aH:()=>ee,b$:()=>Lt,eu:()=>pe,hl:()=>ae,jU:()=>be,m9:()=>mn,ne:()=>Rt,pd:()=>It,r3:()=>_n,ru:()=>it,tV:()=>U,uI:()=>k,vZ:()=>Vn,w1:()=>Ht,xO:()=>$r,xb:()=>ar,z$:()=>je,zI:()=>ce,zd:()=>Et});const Y=function(z){const G=[];let P=0;for(let R=0;R<z.length;R++){let x=z.charCodeAt(R);x<128?G[P++]=x:x<2048?(G[P++]=x>>6|192,G[P++]=63&x|128):55296==(64512&x)&&R+1<z.length&&56320==(64512&z.charCodeAt(R+1))?(x=65536+((1023&x)<<10)+(1023&z.charCodeAt(++R)),G[P++]=x>>18|240,G[P++]=x>>12&63|128,G[P++]=x>>6&63|128,G[P++]=63&x|128):(G[P++]=x>>12|224,G[P++]=x>>6&63|128,G[P++]=63&x|128)}return G},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,G){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const P=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,R=[];for(let x=0;x<z.length;x+=3){const X=z[x],Re=x+1<z.length,Qe=Re?z[x+1]:0,xt=x+2<z.length,st=xt?z[x+2]:0;let vn=(15&Qe)<<2|st>>6,Yt=63&st;xt||(Yt=64,Re||(vn=64)),R.push(P[X>>2],P[(3&X)<<4|Qe>>4],P[vn],P[Yt])}return R.join("")},encodeString(z,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(z):this.encodeByteArray(Y(z),G)},decodeString(z,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(z):function(z){const G=[];let P=0,R=0;for(;P<z.length;){const x=z[P++];if(x<128)G[R++]=String.fromCharCode(x);else if(x>191&&x<224){const X=z[P++];G[R++]=String.fromCharCode((31&x)<<6|63&X)}else if(x>239&&x<365){const xt=((7&x)<<18|(63&z[P++])<<12|(63&z[P++])<<6|63&z[P++])-65536;G[R++]=String.fromCharCode(55296+(xt>>10)),G[R++]=String.fromCharCode(56320+(1023&xt))}else{const X=z[P++],Re=z[P++];G[R++]=String.fromCharCode((15&x)<<12|(63&X)<<6|63&Re)}}return G.join("")}(this.decodeStringToByteArray(z,G))},decodeStringToByteArray(z,G){this.init_();const P=G?this.charToByteMapWebSafe_:this.charToByteMap_,R=[];for(let x=0;x<z.length;){const X=P[z.charAt(x++)],Qe=x<z.length?P[z.charAt(x)]:0;++x;const st=x<z.length?P[z.charAt(x)]:64;++x;const Ut=x<z.length?P[z.charAt(x)]:64;if(++x,null==X||null==Qe||null==st||null==Ut)throw new Ee;R.push(X<<2|Qe>>4),64!==st&&(R.push(Qe<<4&240|st>>2),64!==Ut&&R.push(st<<6&192|Ut))}return R},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const he=function(z){return function(z){const G=Y(z);return ve.encodeByteArray(G,!0)}(z).replace(/\./g,"")},U=function(z){try{return ve.decodeString(z,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function ne(z,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return G}for(const P in G)!G.hasOwnProperty(P)||!Be(P)||(z[P]=ne(z[P],G[P]));return z}function Be(z){return"__proto__"!==z}const Se=()=>{try{return function Ie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=z&&U(z[1]);return G&&JSON.parse(G)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},ee=()=>{var z;return null===(z=Se())||void 0===z?void 0:z.config},Te=z=>{var G;return null===(G=Se())||void 0===G?void 0:G[`_${z}`]};class ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,P)=>{this.resolve=G,this.reject=P})}wrapCallback(G){return(P,R)=>{P?this.reject(P):this.resolve(R),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(P):G(P,R))}}}function Me(z,G){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const R=G||"demo-project",x=z.iat||0,X=z.sub||z.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${R}`,aud:R,iat:x,exp:x+3600,auth_time:x,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},z);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Re)),""].join(".")}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function k(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function te(){var z;const G=null===(z=Se())||void 0===z?void 0:z.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function be(){return"object"==typeof self&&self.self===self}function it(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ht(){const z=je();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Zn(){return!te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){try{return"object"==typeof indexedDB}catch{return!1}}function pe(){return new Promise((z,G)=>{try{let P=!0;const R="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(R);x.onsuccess=()=>{x.result.close(),P||self.indexedDB.deleteDatabase(R),z(!0)},x.onupgradeneeded=()=>{P=!1},x.onerror=()=>{var X;G((null===(X=x.error)||void 0===X?void 0:X.message)||"")}}catch(P){G(P)}})}function ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ae extends Error{constructor(G,P,R){super(P),this.code=G,this.customData=R,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(G,P,R){this.service=G,this.serviceName=P,this.errors=R}create(G,...P){const R=P[0]||{},x=`${this.service}/${G}`,X=this.errors[G],Re=X?function tt(z,G){return z.replace(qe,(P,R)=>{const x=G[R];return null!=x?String(x):`<${R}?>`})}(X,R):"Error";return new Ae(x,`${this.serviceName}: ${Re} (${x}).`,R)}}const qe=/\{\$([^}]+)}/g;function _n(z,G){return Object.prototype.hasOwnProperty.call(z,G)}function ar(z){for(const G in z)if(Object.prototype.hasOwnProperty.call(z,G))return!1;return!0}function Vn(z,G){if(z===G)return!0;const P=Object.keys(z),R=Object.keys(G);for(const x of P){if(!R.includes(x))return!1;const X=z[x],Re=G[x];if(Tn(X)&&Tn(Re)){if(!Vn(X,Re))return!1}else if(X!==Re)return!1}for(const x of R)if(!P.includes(x))return!1;return!0}function Tn(z){return null!==z&&"object"==typeof z}function $r(z){const G=[];for(const[P,R]of Object.entries(z))Array.isArray(R)?R.forEach(x=>{G.push(encodeURIComponent(P)+"="+encodeURIComponent(x))}):G.push(encodeURIComponent(P)+"="+encodeURIComponent(R));return G.length?"&"+G.join("&"):""}function Et(z){const G={};return z.replace(/^\?/,"").split("&").forEach(R=>{if(R){const[x,X]=R.split("=");G[decodeURIComponent(x)]=decodeURIComponent(X)}}),G}function It(z){const G=z.indexOf("?");if(!G)return"";const P=z.indexOf("#",G);return z.substring(G,P>0?P:void 0)}function Rt(z,G){const P=new vr(z,G);return P.subscribe.bind(P)}class vr{constructor(G,P){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=P,this.task.then(()=>{G(this)}).catch(R=>{this.error(R)})}next(G){this.forEachObserver(P=>{P.next(G)})}error(G){this.forEachObserver(P=>{P.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,P,R){let x;if(void 0===G&&void 0===P&&void 0===R)throw new Error("Missing Observer.");x=function Kt(z,G){if("object"!=typeof z||null===z)return!1;for(const P of G)if(P in z&&"function"==typeof z[P])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:P,complete:R},void 0===x.next&&(x.next=gn),void 0===x.error&&(x.error=gn),void 0===x.complete&&(x.complete=gn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),X}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let P=0;P<this.observers.length;P++)this.sendOne(P,G)}sendOne(G,P){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{P(this.observers[G])}catch(R){typeof console<"u"&&console.error&&console.error(R)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gn(){}const Bn=1e3,ye=2,Z=144e5,Ce=.5;function He(z,G=Bn,P=ye){const R=G*Math.pow(P,z),x=Math.round(Ce*R*(Math.random()-.5)*2);return Math.min(Z,R+x)}function mn(z){return z&&z._delegate?z._delegate:z}},4165:(_t,De,M)=>{var d=M(5879);let V=null;function N(){return V}class se{}const ve=new d.OlP("DocumentToken");let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(he)},providedIn:"platform"})}return n})();const Oe=new d.OlP("Location Initialized");let he=(()=>{class n extends Ee{constructor(){super(),this._doc=(0,d.f3M)(ve),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function q(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ne(n){return n&&"?"!==n[0]?"?"+n:n}let Be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Ye)},providedIn:"root"})}return n})();const Ie=new d.OlP("appBaseHref");let Ye=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ne(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+ne(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+ne(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee),d.LFG(Ie,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ke=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=U(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+ne(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+ne(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ee),d.LFG(Ie,8))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})(),Ke=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(q(pt(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ne(r))}normalize(t){return n.stripTrailingSlash(function ft(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,pt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}static#e=this.normalizeQueryParams=ne;static#t=this.joinWithSlash=U;static#n=this.stripTrailingSlash=q;static#r=this.\u0275fac=function(r){return new(r||n)(d.LFG(Be))};static#i=this.\u0275prov=d.Yz7({token:n,factory:function(){return function Se(){return new Ke((0,d.LFG)(Be))}()},providedIn:"root"})}return n})();function pt(n){return n.replace(/\/index.html$/,"")}var ue=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(ue||{}),be=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(be||{});function Ae(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===be.CurrencyDecimal)return t[d.wAp.NumberSymbols][be.Decimal];if(e===be.CurrencyGroup)return t[d.wAp.NumberSymbols][be.Group]}return r}const x=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function An(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function dn(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}const Ns=/\s+/,Ks=[];let Hr=(()=>{class n{constructor(t,r,s,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=u,this.initialClasses=Ks,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Ns):Ks}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Ns):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const s=this.stateMap.get(t);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],s=t[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Ns).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class ys{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _s=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new ys(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),tr(g,s)}});for(let s=0,u=r.length;s<u;s++){const g=r.get(s).context;g.index=s,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{tr(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function tr(n,e){n.context.$implicit=e.item}let hi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Aa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){go("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){go("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.s_b),d.Y36(d.Rgc))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Aa{constructor(){this.$implicit=null,this.ngIf=null}}function go(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}function tn(n,e){return new d.vHH(2100,!1)}class sr{createSubscription(e,t){return(0,d.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,d.rg0)(()=>e.unsubscribe())}}class pr{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Pr=new pr,ss=new sr;let Yo=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return Pr;if((0,d.F4k)(t))return ss;throw tn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.sBO,16))};static#t=this.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),Xe=(()=>{class n{constructor(t){this._locale=t}transform(t,r,s){if(!function ti(n){return!(null==n||""===n||n!=n)}(t))return null;s=s||this._locale;try{return function de(n,e,t){return function Yt(n,e,t,r,s,u,l=!1){let g="",_=!1;if(isFinite(n)){let I=function Ot(n){let r,s,u,l,g,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;"0"===e.charAt(u);u++);if(u===(g=e.length))r=[0],s=1;else{for(g--;"0"===e.charAt(g);)g--;for(s-=u,r=[],l=0;u<=g;u++,l++)r[l]=Number(e.charAt(u))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);l&&(I=function ot(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(I));let D=e.minInt,S=e.minFrac,$=e.maxFrac;if(u){const Vt=u.match(x);if(null===Vt)throw new Error(`${u} is not a valid digit info`);const wt=Vt[1],jt=Vt[3],cn=Vt[5];null!=wt&&(D=An(wt)),null!=jt&&(S=An(jt)),null!=cn?$=An(cn):null!=jt&&S>$&&($=S)}!function ct(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let l=u+n.integerLen,g=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let S=l;S<r.length;S++)r[S]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,l=u+1),r[0]=0;for(let S=1;S<l;S++)r[S]=0}if(g>=5)if(l-1<0){for(let S=0;S>l;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;s<Math.max(0,u);s++)r.push(0);let _=0!==u;const I=e+n.integerLen,D=r.reduceRight(function(S,$,J,we){return we[J]=($+=S)<10?$:$-10,_&&(0===we[J]&&J>=I?we.pop():_=!1),$>=10?1:0},0);D&&(r.unshift(D),n.integerLen++)}(I,S,$);let J=I.digits,we=I.integerLen;const Fe=I.exponent;let Le=[];for(_=J.every(Vt=>!Vt);we<D;we++)J.unshift(0);for(;we<0;we++)J.unshift(0);we>0?Le=J.splice(we,J.length):(Le=J,J=[0]);const ht=[];for(J.length>=e.lgSize&&ht.unshift(J.splice(-e.lgSize,J.length).join(""));J.length>e.gSize;)ht.unshift(J.splice(-e.gSize,J.length).join(""));J.length&&ht.unshift(J.join("")),g=ht.join(Ae(t,r)),Le.length&&(g+=Ae(t,s)+Le.join("")),Fe&&(g+=Ae(t,be.Exponential)+"+"+Fe)}else g=Ae(t,be.Infinity);return g=n<0&&!_?e.negPre+g+e.negSuf:e.posPre+g+e.posSuf,g}(n,function nt(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],u=r[1],l=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],g=l[0],_=l[1]||"";t.posPre=g.substring(0,g.indexOf("#"));for(let D=0;D<_.length;D++){const S=_.charAt(D);"0"===S?t.minFrac=t.maxFrac=D+1:"#"===S?t.maxFrac=D+1:t.posSuf+=S}const I=g.split(",");if(t.gSize=I[1]?I[1].length:0,t.lgSize=I[2]||I[1]?(I[2]||I[1]).length:0,u){const D=s.length-t.posPre.length-t.posSuf.length,S=u.indexOf("#");t.negPre=u.substring(0,S).replace(/'/g,""),t.negSuf=u.slice(S+D).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Ge(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,ue.Decimal),Ae(e,be.MinusSign)),e,be.Group,be.Decimal,t)}(function Fs(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),s,r)}catch(u){throw tn()}}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.soG,16))};static#t=this.\u0275pipe=d.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let qr=(()=>{class n{transform(t,r,s){if(null==t)return null;if(!this.supports(t))throw tn();return t.slice(r,s)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),gr=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function br(n){return"server"===n}let fi=(()=>{class n{static#e=this.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new os((0,d.LFG)(ve),window)})}return n})();class os{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Pc(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class ws{}class tp extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Bd extends tp{static makeCurrent(){!function Y(n){V||(V=n)}(new Bd)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Nw(){return Pu=Pu||document.querySelector("base"),Pu?Pu.getAttribute("href"):null}();return null==t?null:function Ey(n){jd=jd||document.createElement("a"),jd.setAttribute("href",n);const e=jd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Pu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dn(document.cookie,e)}}let jd,Pu=null,Rw=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const Cy=new d.OlP("EventManagerPlugins");let Iy=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Cy),d.LFG(d.R0b))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class $d{constructor(e){this._doc=e}}const Hd="ng-app-id";let Vc=(()=>{class n{constructor(t,r,s,u={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=br(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Hd}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const u=s.get(t);return u.usage+=r,u.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,u=s?.get(r);if(u?.parentNode===t)return s.delete(r),u.removeAttribute(Hd),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Hd,this.appId),l}}addStyleToHost(t,r){const s=this.getStyleElement(t,r);t.appendChild(s);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(s):u.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ve),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const Js={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fa=/%COMP%/g,Ls=new d.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function zn(n,e){return e.map(t=>t.replace(Fa,n))}let jc=(()=>{class n{constructor(t,r,s,u,l,g,_,I=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=u,this.doc=l,this.platformId=g,this.ngZone=_,this.nonce=I,this.rendererByCompId=new Map,this.platformIsServer=br(g),this.defaultRenderer=new Xs(t,l,_,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===d.ifc.ShadowDom&&(r={...r,encapsulation:d.ifc.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof Zd?s.applyToHost(t):s instanceof Ui&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.doc,g=this.ngZone,_=this.eventManager,I=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,S=this.platformIsServer;switch(r.encapsulation){case d.ifc.Emulated:u=new Zd(_,I,r,this.appId,D,l,g,S);break;case d.ifc.ShadowDom:return new La(_,I,t,r,l,g,this.nonce,S);default:u=new Ui(_,I,r,D,l,g,S)}s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Iy),d.LFG(Vc),d.LFG(d.AFp),d.LFG(Ls),d.LFG(ve),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();class Xs{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Js[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qd(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qd(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new d.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Js[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Js[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,s&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=N().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function qd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class La extends Xs{constructor(e,t,r,s,u,l,g,_){super(e,u,l,_),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const I=zn(s.id,s.styles);for(const D of I){const S=document.createElement("style");g&&S.setAttribute("nonce",g),S.textContent=D,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ui extends Xs{constructor(e,t,r,s,u,l,g,_){super(e,u,l,g),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=_?zn(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Zd extends Ui{constructor(e,t,r,s,u,l,g,_){const I=s+"-"+r.id;super(e,t,r,u,l,g,_,I),this.contentAttr=function rp(n){return"_ngcontent-%COMP%".replace(Fa,n)}(I),this.hostAttr=function Bc(n){return"_nghost-%COMP%".replace(Fa,n)}(I)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Lw=(()=>{class n extends $d{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ve))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const $c=["alt","control","meta","shift"],Eo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ip={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Nu=(()=>{class n extends $d{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),$c.forEach(I=>{const D=r.indexOf(I);D>-1&&(r.splice(D,1),l+=I+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let s=Eo[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),$c.forEach(l=>{l!==s&&(0,ip[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ve))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const ap=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Gt(){Bd.makeCurrent()},multi:!0},{provide:ve,useFactory:function Uw(){return(0,d.RDi)(document),document},deps:[]}]),Ty=new d.OlP(""),Ua=[{provide:d.rWj,useClass:class np{addToWindow(e){d.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new d.vHH(5103,!1);return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const s=d.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const g=function(_){l=l||_,u--,0==u&&r(l)};s.forEach(_=>{_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Co=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Hc(){return new d.qLn},deps:[]},{provide:Cy,useClass:Lw,multi:!0,deps:[ve,d.R0b,d.Lbi]},{provide:Cy,useClass:Nu,multi:!0,deps:[ve]},jc,Vc,Iy,{provide:d.FYo,useExisting:jc},{provide:ws,useClass:Rw,deps:[]},[]];let Ru=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ty,12))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[...Co,...Ua],imports:[gr,d.hGG]})}return n})(),Ve=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ve))};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(r){let s=null;return s=r?new r:function cp(){return new Ve((0,d.LFG)(ve))}(),s},providedIn:"root"})}return n})();typeof window<"u"&&window;var bi=M(5592),bo=M(4674),nr=M(2459),Pt=M(2096),ii=M(5619);const{isArray:zc}=Array,{getPrototypeOf:Xd,prototype:Di,keys:eo}=Object;function lr(n){if(1===n.length){const e=n[0];if(zc(e))return{args:e,keys:null};if(function Do(n){return n&&"object"==typeof n&&Xd(n)===Di}(e)){const t=eo(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Xo=M(2737),Qt=M(7398);const{isArray:Py}=Array;function Lu(n){return(0,Qt.U)(e=>function yp(n,e){return Py(e)?n(...e):n(e)}(n,e))}var to=M(9940);function no(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var Ti=M(8251),Va=M(7103);function ea(...n){const e=(0,to.yG)(n),t=(0,to.jO)(n),{args:r,keys:s}=lr(n);if(0===r.length)return(0,nr.D)([],e);const u=new bi.y(function Ba(n,e,t=Xo.y){return r=>{qc(e,()=>{const{length:s}=n,u=new Array(s);let l=s,g=s;for(let _=0;_<s;_++)qc(e,()=>{const I=(0,nr.D)(n[_],e);let D=!1;I.subscribe((0,Ti.x)(r,S=>{u[_]=S,D||(D=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>no(s,l):Xo.y));return t?u.pipe(Lu(t)):u}function qc(n,e,t){n?(0,Va.f)(t,n,e):e()}const ro=(0,M(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Uu=M(7537);function To(...n){return function Bs(){return(0,Uu.J)(1)}()((0,nr.D)(n,(0,to.yG)(n)))}var Vu=M(4829);function eh(n){return new bi.y(e=>{(0,Vu.Xf)(n()).subscribe(e)})}var Bu=M(8407);function ta(n,e){const t=(0,bo.m)(n)?n:()=>n,r=s=>s.error(t());return new bi.y(e?s=>e.schedule(r,0,s):r)}var io=M(6232),Wc=M(7394),Vi=M(9360);function th(){return(0,Vi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Ti.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Kc extends bi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Vi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Wc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ti.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Wc.w0.EMPTY)}return e}refCount(){return th()(this)}}var Ki=M(8645),$n=M(4664);function Wn(n){return n<=0?()=>io.E:(0,Vi.e)((e,t)=>{let r=0;e.subscribe((0,Ti.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function ja(...n){const e=(0,to.yG)(n);return(0,Vi.e)((t,r)=>{(e?To(n,t,e):To(n,t)).subscribe(r)})}function si(n,e){return(0,Vi.e)((t,r)=>{let s=0;t.subscribe((0,Ti.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var Ai=M(1631);function $a(n){return(0,Vi.e)((e,t)=>{let r=!1;e.subscribe((0,Ti.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function ju(n=Ny){return(0,Vi.e)((e,t)=>{let r=!1;e.subscribe((0,Ti.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Ny(){return new ro}function Vr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?si((s,u)=>n(s,u,r)):Xo.y,Wn(1),t?$a(e):ju(()=>new ro))}function Ao(n,e){return(0,bo.m)(e)?(0,Ai.z)(n,e,1):(0,Ai.z)(n,1)}var Tr=M(9397);function as(n){return(0,Vi.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Ti.x)(t,void 0,void 0,l=>{u=(0,Vu.Xf)(n(l,as(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function na(n,e){return(0,Vi.e)(function Yc(n,e,t,r,s){return(u,l)=>{let g=t,_=e,I=0;u.subscribe((0,Ti.x)(l,D=>{const S=I++;_=g?n(_,D,S):(g=!0,D),r&&l.next(_)},s&&(()=>{g&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Ha(n){return n<=0?()=>io.E:(0,Vi.e)((e,t)=>{let r=[];e.subscribe((0,Ti.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function ra(n){return(0,Vi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var rh=M(2420);const sn="primary",So=Symbol("RouteTitle");class ia{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Mo(n){return new ia(n)}function vp(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))s[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Si(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Ep(n[s],e[s]))return!1;return!0}function Ep(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Br(n){return n.length>0?n[n.length-1]:null}function xo(n){return function mp(n){return!!n&&(n instanceof bi.y||(0,bo.m)(n.lift)&&(0,bo.m)(n.subscribe))}(n)?n:(0,d.QGY)(n)?(0,nr.D)(Promise.resolve(n)):(0,Pt.of)(n)}const Cp={exact:function Xc(n,e,t){if(!oa(n.segments,e.segments)||!$u(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Xc(n.children[r],e.children[r],t))return!1;return!0},subset:sa},Jc={exact:function bp(n,e){return Si(n,e)},subset:function Ga(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ep(n[t],e[t]))},ignored:()=>!0};function Ip(n,e,t){return Cp[t.paths](n.root,e.root,t.matrixParams)&&Jc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sa(n,e,t){return so(n,e,e.segments,t)}function so(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!oa(s,t)||e.hasChildren()||!$u(s,t,r))}if(n.segments.length===t.length){if(!oa(n.segments,t)||!$u(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!sa(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(oa(n.segments,s)&&$u(n.segments,s,r)&&n.children[sn])&&so(n.children[sn],e,u,r)}}function $u(n,e,t){return e.every((r,s)=>Jc[t](n[s].parameters,r.parameters))}class Oo{constructor(e=new Pn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mo(this.queryParams)),this._queryParamMap}toString(){return Hw.serialize(this)}}class Pn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ih(this)}}class el{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Mo(this.parameters)),this._parameterMap}toString(){return Mi(this)}}function oa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let tl=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return new Dp},providedIn:"root"})}return n})();class Dp{parse(e){const t=new Za(e);return new Oo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${us(e.root,!0)}`,r=function ky(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${rl(t)}=${rl(s)}`).join("&"):`${rl(t)}=${rl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ar(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Hw=new Dp;function ih(n){return n.segments.map(e=>Mi(e)).join("/")}function us(n,e){if(!n.hasChildren())return ih(n);if(e){const t=n.children[sn]?us(n.children[sn],!1):"",r=[];return Object.entries(n.children).forEach(([s,u])=>{s!==sn&&r.push(`${s}:${us(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $w(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===sn&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==sn&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===sn?[us(n.children[sn],!1)]:[`${s}:${us(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[sn]?`${ih(n)}/${t[0]}`:`${ih(n)}/(${t.join("//")})`}}function nl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rl(n){return nl(n).replace(/%3B/gi,";")}function sh(n){return nl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oo(n){return decodeURIComponent(n)}function Tp(n){return oo(n.replace(/\+/g,"%20"))}function Mi(n){return`${sh(n.path)}${function za(n){return Object.keys(n).map(e=>`;${sh(e)}=${sh(n[e])}`).join("")}(n.parameters)}`}const qa=/^[^\/()?;#]+/;function Po(n){const e=n.match(qa);return e?e[0]:""}const il=/^[^\/()?;=#]+/,Ap=/^[^=?&#]+/,Yi=/^[^&#]+/;class Za{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pn([],{}):new Pn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[sn]=new Pn(e,t)),r}parseSegment(){const e=Po(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new el(oo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Fy(n){const e=n.match(il);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Po(this.remaining);s&&(r=s,this.capture(r))}e[oo(t)]=oo(r)}parseQueryParam(e){const t=function Gw(n){const e=n.match(Ap);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function oh(n){const e=n.match(Yi);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Tp(t),u=Tp(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Po(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new d.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=sn);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[sn]:new Pn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function Ly(n){return n.segments.length>0?new Pn([],{[sn]:n}):n}function sl(n){const e={};for(const r of Object.keys(n.children)){const u=sl(n.children[r]);if(r===sn&&0===u.segments.length&&u.hasChildren())for(const[l,g]of Object.entries(u.children))e[l]=g;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Uy(n){if(1===n.numberOfChildren&&n.children[sn]){const e=n.children[sn];return new Pn(n.segments.concat(e.segments),e.children)}return n}(new Pn(n.segments,e))}function Wa(n){return n instanceof Oo}function p(n){let e;const s=Ly(function t(u){const l={};for(const _ of u.children){const I=t(_);l[_.outlet]=I}const g=new Pn(u.url,l);return u===n&&(e=g),g}(n.root));return e??s}function m(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return O(s,s,s,t,r);const u=function Je(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new me(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Object.entries(u.outlets).forEach(([_,I])=>{g[_]="string"==typeof I?I.split("/"):I}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new me(t,e,r)}(e);if(u.toRoot())return O(s,s,new Pn([],{}),t,r);const l=function At(n,e,t){if(n.isAbsolute)return new rt(e,!0,0);if(!t)return new rt(e,!1,NaN);if(null===t.parent)return new rt(t,!0,0);const r=E(n.commands[0])?0:1;return function In(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new d.vHH(4005,!1);s=r.segments.length}return new rt(r,!1,s-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,s,n),g=l.processChildren?ao(l.segmentGroup,l.index,u.commands):cs(l.segmentGroup,l.index,u.commands);return O(s,l.segmentGroup,g,t,r)}function E(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function T(n){return"object"==typeof n&&null!=n&&n.outlets}function O(n,e,t,r,s){let l,u={};r&&Object.entries(r).forEach(([_,I])=>{u[_]=Array.isArray(I)?I.map(D=>`${D}`):`${I}`}),l=n===e?t:Q(n,e,t);const g=Ly(sl(l));return new Oo(g,u,s)}function Q(n,e,t){const r={};return Object.entries(n.children).forEach(([s,u])=>{r[s]=u===e?t:Q(u,e,t)}),new Pn(n.segments,r)}class me{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&E(r[0]))throw new d.vHH(4003,!1);const s=r.find(T);if(s&&s!==Br(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rt{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cs(n,e,t){if(n||(n=new Pn([],{})),0===n.segments.length&&n.hasChildren())return ao(n,e,t);const r=function Sp(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],g=t[r];if(T(g))break;const _=`${g}`,I=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&I&&"object"==typeof I&&void 0===I.outlets){if(!ol(_,I,l))return u;r+=2}else{if(!ol(_,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Pn(n.segments.slice(0,r.pathIndex),{});return u.children[sn]=new Pn(n.segments.slice(r.pathIndex),n.children),ao(u,0,s)}return r.match&&0===s.length?new Pn(n.segments,{}):r.match&&!n.hasChildren()?Hu(n,e,t):r.match?ao(n,0,s):Hu(n,e,t)}function ao(n,e,t){if(0===t.length)return new Pn(n.segments,{});{const r=function pi(n){return T(n[0])?n[0].outlets:{[sn]:n}}(t),s={};if(Object.keys(r).some(u=>u!==sn)&&n.children[sn]&&1===n.numberOfChildren&&0===n.children[sn].segments.length){const u=ao(n.children[sn],e,t);return new Pn(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(s[u]=cs(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(s[u]=l)}),new Pn(n.segments,s)}}function Hu(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(T(u)){const _=aa(u.outlets);return new Pn(r,_)}if(0===s&&E(t[0])){r.push(new el(n.segments[e].path,ua(t[0]))),s++;continue}const l=T(u)?u.outlets[sn]:`${u}`,g=s<t.length-1?t[s+1]:null;l&&g&&E(g)?(r.push(new el(l,ua(g))),s+=2):(r.push(new el(l,{})),s++)}return new Pn(r,{})}function aa(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Hu(new Pn([],{}),0,r))}),e}function ua(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ol(n,e,t){return n==t.path&&Si(e,t.parameters)}const Gu="imperative";class ls{constructor(e,t){this.id=e,this.url=t}}class Ka extends ls{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class uo extends ls{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zu extends ls{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class No extends ls{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class al extends ls{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ah extends ls{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zw extends ls{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MT extends ls{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qw extends ls{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PP extends ls{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zw{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class NP{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xT{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class OT{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vy{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RP{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PT{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class uh{}class Ww{constructor(e){this.url=e}}class kP{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Mp,this.attachRef=null}}let Mp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new kP,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class NT{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=By(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=By(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ul(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return ul(e,this._root).map(t=>t.value)}}function By(n,e){if(n===e.value)return e;for(const t of e.children){const r=By(n,t);if(r)return r}return null}function ul(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ul(n,t);if(r.length)return r.unshift(e),r}return[]}class js{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function qu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class jy extends NT{constructor(e,t){super(e),this.snapshot=t,Gy(this,e)}toString(){return this.snapshot.toString()}}function $y(n,e){const t=function cl(n,e){const l=new Wu([],{},{},"",{},sn,e,null,{});return new ch("",new js(l,[]))}(0,e),r=new ii.X([new el("",{})]),s=new ii.X({}),u=new ii.X({}),l=new ii.X({}),g=new ii.X(""),_=new Zu(r,s,l,g,u,sn,e,t.root);return _.snapshot=t.root,new jy(new js(_,[]),t)}class Zu{constructor(e,t,r,s,u,l,g,_){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=u,this.outlet=l,this.component=g,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,Qt.U)(I=>I[So]))??(0,Pt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qt.U)(e=>Mo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qt.U)(e=>Mo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function xp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Wu{get title(){return this.data?.[So]}constructor(e,t,r,s,u,l,g,_,I){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=g,this.routeConfig=_,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ch extends NT{constructor(e,t){super(t),this.url=e,Gy(this,t)}toString(){return Kw(this._root)}}function Gy(n,e){e.value._routerState=n,e.children.forEach(t=>Gy(n,t))}function Kw(n){const e=n.children.length>0?` { ${n.children.map(Kw).join(", ")} } `:"";return`${n.value}${e}`}function zy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Si(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Si(e.params,t.params)||n.paramsSubject.next(t.params),function wp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Si(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Si(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Op(n,e){const t=Si(n.params,e.params)&&function Ry(n,e){return oa(n,e)&&n.every((t,r)=>Si(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Op(n.parent,e.parent))}let lh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=sn,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Mp),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)(Pp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new RT(t,g,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:_,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]})}return n})();class RT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Zu?this.route:e===Mp?this.childContexts:this.parent.get(e,t)}}const Pp=new d.OlP("");let Yw=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=ea([r.queryParams,r.params,r.data]).pipe((0,$n.w)(([u,l,g],_)=>(g={...u,...l,...g},0===_?(0,Pt.of)(g):Promise.resolve(g)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,d.qFp)(r.component);if(l)for(const{templateName:g}of l.inputs)t.activatedComponentRef.setInput(g,u[g]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function dh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function kT(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return dh(n,r,s);return dh(n,r)})}(n,e,t);return new js(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>dh(n,g)),l}}const r=function ds(n){return new Zu(new ii.X(n.url),new ii.X(n.params),new ii.X(n.queryParams),new ii.X(n.fragment),new ii.X(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>dh(n,u));return new js(r,s)}}const hh="ngNavigationCancelingError";function qy(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Wa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Np(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Np(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[hh]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ll(n){return n&&n[hh]}let Zy=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(r,s){1&r&&d._UZ(0,"router-outlet")},dependencies:[lh],encapsulation:2})}return n})();function fh(n){const e=n.children&&n.children.map(fh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==sn&&(t.component=Zy),t}function Is(n){return n.outlet||sn}function ca(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Xw{constructor(e,t,r,s,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),zy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=qu(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),Object.values(s).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=qu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=qu(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=qu(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new RP(u.value.snapshot))}),e.children.length&&this.forwardEvent(new OT(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(zy(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),zy(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=ca(s.snapshot);l.attachRef=null,l.route=s,l.injector=g,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Wy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ph{constructor(e,t){this.component=e,this.route=t}}function dl(n,e,t){const r=n._root;return Yu(r,e?e._root:null,t,[r.value])}function Ku(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Yu(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=qu(e);return n.children.forEach(l=>{(function kp(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function GT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!oa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!oa(n.url,e.url)||!Si(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Op(n,e)||!Si(n.queryParams,e.queryParams);default:return!Op(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new Wy(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Yu(n,e,u.component?g?g.children:null:t,r,s),_&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new ph(g.outlet.component,l))}else l&&gh(e,g,s),s.canActivateChecks.push(new Wy(r)),Yu(n,null,u.component?g?g.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,g])=>gh(g,t.getContext(l),s)),s}function gh(n,e,t){const r=qu(n),s=n.value;Object.entries(r).forEach(([u,l])=>{gh(l,s.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new ph(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function mh(n){return"function"==typeof n}function nE(n){return n instanceof ro||"EmptyError"===n?.name}const hl=Symbol("INITIAL_VALUE");function Qu(){return(0,$n.w)(n=>ea(n.map(e=>e.pipe(Wn(1),ja(hl)))).pipe((0,Qt.U)(e=>{for(const t of e)if(!0!==t){if(t===hl)return hl;if(!1===t||t instanceof Oo)return t}return!0}),si(e=>e!==hl),Wn(1)))}function Yy(n){return(0,Bu.z)((0,Tr.b)(e=>{if(Wa(e))throw qy(0,e)}),(0,Qt.U)(e=>!0===e))}class yh{constructor(e){this.segmentGroup=e||null}}class _h{constructor(e){this.urlTree=e}}function Ro(n){return ta(new yh(n))}function Jy(n){return ta(new _h(n))}class aE{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new d.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return(0,Pt.of)(r);if(s.numberOfChildren>1||!s.children[sn])return ta(new d.vHH(4e3,!1));s=s.children[sn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Oo(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,u])=>{if("string"==typeof u&&u.startsWith(":")){const g=u.substring(1);r[s]=t[g]}else r[s]=u}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return Object.entries(t.children).forEach(([g,_])=>{l[g]=this.createSegmentGroup(e,_,r,s)}),new Pn(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new d.vHH(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const vh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wh(n,e,t,r,s){const u=e_(n,e,t);return u.matched?(r=function Jw(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Qy(n,e,t,r){const s=e.canMatch;if(!s||0===s.length)return(0,Pt.of)(!0);const u=s.map(l=>{const g=Ku(l,n);return xo(function Ky(n){return n&&mh(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))});return(0,Pt.of)(u).pipe(Qu(),Yy())}(r,e,t).pipe((0,Qt.U)(l=>!0===l?u:{...vh}))):(0,Pt.of)(u)}function e_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...vh}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||vp)(t,n,e);if(!s)return{...vh};const u={};Object.entries(s.posParams??{}).forEach(([g,_])=>{u[g]=_.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function t_(n,e,t,r){return t.length>0&&function XT(n,e,t){return t.some(r=>Eh(n,e,r)&&Is(r)!==sn)}(n,t,r)?{segmentGroup:new Pn(e,JT(r,new Pn(t,n.children))),slicedSegments:[]}:0===t.length&&function uE(n,e,t){return t.some(r=>Eh(n,e,r))}(n,t,r)?{segmentGroup:new Pn(n.segments,QT(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Pn(n.segments,n.children),slicedSegments:t}}function QT(n,e,t,r,s){const u={};for(const l of r)if(Eh(n,t,l)&&!s[Is(l)]){const g=new Pn([],{});u[Is(l)]=g}return{...s,...u}}function JT(n,e){const t={};t[sn]=e;for(const r of n)if(""===r.path&&Is(r)!==sn){const s=new Pn([],{});t[Is(r)]=s}return t}function Eh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class e1{constructor(e,t,r,s,u,l,g){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g,this.allowRedirects=!0,this.applyRedirects=new aE(this.urlSerializer,this.urlTree)}noMatchError(e){return new d.vHH(4002,!1)}recognize(){const e=t_(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,sn).pipe(as(t=>{if(t instanceof _h)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof yh?this.noMatchError(t):t}),(0,Qt.U)(t=>{const r=new Wu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},sn,this.rootComponentType,null,{}),s=new js(r,t),u=new ch("",s),l=function w(n,e,t=null,r=null){return m(p(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,sn).pipe(as(r=>{throw r instanceof yh?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Hy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s,!0)}processChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,nr.D)(s).pipe(Ao(u=>{const l=r.children[u],g=function $T(n,e){const t=n.filter(r=>Is(r)===e);return t.push(...n.filter(r=>Is(r)!==e)),t}(t,u);return this.processSegmentGroup(e,g,l,u)}),na((u,l)=>(u.push(...l),u)),$a(null),function _p(n,e){const t=arguments.length>=2;return r=>r.pipe(n?si((s,u)=>n(s,u,r)):Xo.y,Ha(1),t?$a(e):ju(()=>new ro))}(),(0,Ai.z)(u=>{if(null===u)return Ro(r);const l=cE(u);return function t1(n){n.sort((e,t)=>e.value.outlet===sn?-1:t.value.outlet===sn?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,Pt.of)(l)}))}processSegment(e,t,r,s,u,l){return(0,nr.D)(t).pipe(Ao(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,s,u,l).pipe(as(_=>{if(_ instanceof yh)return(0,Pt.of)(null);throw _}))),Vr(g=>!!g),as(g=>{if(nE(g))return function n_(n,e,t){return 0===e.length&&!n.children[t]}(r,s,u)?(0,Pt.of)([]):Ro(r);throw g}))}processSegmentAgainstRoute(e,t,r,s,u,l,g){return function Vp(n,e,t,r){return!!(Is(n)===r||r!==sn&&Eh(e,t,n))&&("**"===n.path||e_(e,n,t).matched)}(r,s,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,u,l,g):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,u,l):Ro(s):Ro(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Jy(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Ai.z)(l=>{const g=new Pn(l,{});return this.processSegment(e,t,g,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:g,consumedSegments:_,remainingSegments:I,positionalParamSegments:D}=e_(t,s,u);if(!g)return Ro(t);const S=this.applyRedirects.applyRedirectCommands(_,s.redirectTo,D);return s.redirectTo.startsWith("/")?Jy(S):this.applyRedirects.lineralizeSegments(s,S).pipe((0,Ai.z)($=>this.processSegment(e,r,t,$.concat(I),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u,l){let g;if("**"===r.path){const _=s.length>0?Br(s).parameters:{},I=new Wu(s,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dE(r),Is(r),r.component??r._loadedComponent??null,r,Xu(r));g=(0,Pt.of)({snapshot:I,consumedSegments:[],remainingSegments:[]}),t.children={}}else g=wh(t,r,s,e).pipe((0,Qt.U)(({matched:_,consumedSegments:I,remainingSegments:D,parameters:S})=>_?{snapshot:new Wu(I,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dE(r),Is(r),r.component??r._loadedComponent??null,r,Xu(r)),consumedSegments:I,remainingSegments:D}:null));return g.pipe((0,$n.w)(_=>null===_?Ro(t):this.getChildConfig(e=r._injector??e,r,s).pipe((0,$n.w)(({routes:I})=>{const D=r._loadedInjector??e,{snapshot:S,consumedSegments:$,remainingSegments:J}=_,{segmentGroup:we,slicedSegments:Fe}=t_(t,$,J,I);if(0===Fe.length&&we.hasChildren())return this.processChildren(D,I,we).pipe((0,Qt.U)(ht=>null===ht?null:[new js(S,ht)]));if(0===I.length&&0===Fe.length)return(0,Pt.of)([new js(S,[])]);const Le=Is(r)===u;return this.processSegment(D,I,we,Fe,Le?sn:u,!0).pipe((0,Qt.U)(ht=>[new js(S,ht)]))}))))}getChildConfig(e,t,r){return t.children?(0,Pt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Pt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function oE(n,e,t,r){const s=e.canLoad;if(void 0===s||0===s.length)return(0,Pt.of)(!0);const u=s.map(l=>{const g=Ku(l,n);return xo(function qT(n){return n&&mh(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))});return(0,Pt.of)(u).pipe(Qu(),Yy())}(e,t,r).pipe((0,Ai.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Tr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Up(n){return ta(Np(!1,3))}())):(0,Pt.of)({routes:[],injector:e})}}function BP(n){const e=n.value.routeConfig;return e&&""===e.path}function cE(n){const e=[],t=new Set;for(const r of n){if(!BP(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=cE(r.children);e.push(new js(r.value,s))}return e.filter(r=>!t.has(r))}function dE(n){return n.data||{}}function Xu(n){return n.resolve||{}}function mE(n){return"string"==typeof n.title||null===n.title}function i_(n){return(0,$n.w)(e=>{const t=n(e);return t?(0,nr.D)(t).pipe((0,Qt.U)(()=>e)):(0,Pt.of)(e)})}const pl=new d.OlP("ROUTES");let s_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,Pt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=xo(t.loadComponent()).pipe((0,Qt.U)(gl),(0,Tr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),ra(()=>{this.componentLoaders.delete(t)})),s=new Kc(r,()=>new Ki.x).pipe(th());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,Pt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function n1(n,e,t,r){return xo(n.loadChildren()).pipe((0,Qt.U)(gl),(0,Ai.z)(s=>s instanceof d.YKP||Array.isArray(s)?(0,Pt.of)(s):(0,nr.D)(e.compileModuleAsync(s))),(0,Qt.U)(s=>{r&&r(n);let u,l,g=!1;return Array.isArray(s)?(l=s,!0):(u=s.create(t).injector,l=u.get(pl,[],{optional:!0,self:!0}).flat()),{routes:l.map(fh),injector:u}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(ra(()=>{this.childrenLoaders.delete(r)})),l=new Kc(u,()=>new Ki.x).pipe(th());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gl(n){return function Ya(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let jp=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ki.x,this.transitionAbortSubject=new Ki.x,this.configLoader=(0,d.f3M)(s_),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(tl),this.rootContexts=(0,d.f3M)(Mp),this.inputBindingEnabled=null!==(0,d.f3M)(Pp,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Pt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new NP(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Zw(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,s){return this.transitions=new ii.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Gu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(si(u=>0!==u.id),(0,Qt.U)(u=>({...u,extractedUrl:t.urlHandlingStrategy.extract(u.rawUrl)})),(0,$n.w)(u=>{this.currentTransition=u;let l=!1,g=!1;return(0,Pt.of)(u).pipe((0,Tr.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.rawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,$n.w)(_=>{const I=_.currentBrowserUrl.toString(),D=!t.navigated||_.extractedUrl.toString()!==I||I!==_.currentUrlTree.toString();if(!D&&"reload"!==(_.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const $="";return this.events.next(new No(_.id,this.urlSerializer.serialize(_.rawUrl),$,0)),_.resolve(null),io.E}if(t.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return(0,Pt.of)(_).pipe((0,$n.w)($=>{const J=this.transitions?.getValue();return this.events.next(new Ka($.id,this.urlSerializer.serialize($.extractedUrl),$.source,$.restoredState)),J!==this.transitions?.getValue()?io.E:Promise.resolve($)}),function Bp(n,e,t,r,s,u){return(0,Ai.z)(l=>function fl(n,e,t,r,s,u,l="emptyOnly"){return new e1(n,e,t,r,s,l,u).recognize()}(n,e,t,r,l.extractedUrl,s,u).pipe((0,Qt.U)(({state:g,tree:_})=>({...l,targetSnapshot:g,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Tr.b)($=>{u.targetSnapshot=$.targetSnapshot,u.urlAfterRedirects=$.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:$.urlAfterRedirects};const J=new ah($.id,this.urlSerializer.serialize($.extractedUrl),this.urlSerializer.serialize($.urlAfterRedirects),$.targetSnapshot);this.events.next(J)}));if(D&&t.urlHandlingStrategy.shouldProcessUrl(_.currentRawUrl)){const{id:$,extractedUrl:J,source:we,restoredState:Fe,extras:Le}=_,ht=new Ka($,this.urlSerializer.serialize(J),we,Fe);this.events.next(ht);const Vt=$y(0,this.rootComponentType).snapshot;return this.currentTransition=u={..._,targetSnapshot:Vt,urlAfterRedirects:J,extras:{...Le,skipLocationChange:!1,replaceUrl:!1}},(0,Pt.of)(u)}{const $="";return this.events.next(new No(_.id,this.urlSerializer.serialize(_.extractedUrl),$,1)),_.resolve(null),io.E}}),(0,Tr.b)(_=>{const I=new zw(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(I)}),(0,Qt.U)(_=>(this.currentTransition=u={..._,guards:dl(_.targetSnapshot,_.currentSnapshot,this.rootContexts)},u)),function Ju(n,e){return(0,Ai.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,Pt.of)({...t,guardsResult:!0}):function rE(n,e,t,r){return(0,nr.D)(n).pipe((0,Ai.z)(s=>function sE(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,Pt.of)(!0);const l=u.map(g=>{const _=ca(e)??s,I=Ku(g,_);return xo(function Fp(n){return n&&mh(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):_.runInContext(()=>I(n,e,t,r))).pipe(Vr())});return(0,Pt.of)(l).pipe(Qu())}(s.component,s.route,t,e,r)),Vr(s=>!0!==s,!0))}(l,r,s,n).pipe((0,Ai.z)(g=>g&&function zT(n){return"boolean"==typeof n}(g)?function iE(n,e,t,r){return(0,nr.D)(e).pipe(Ao(s=>To(function VP(n,e){return null!==n&&e&&e(new xT(n)),(0,Pt.of)(!0)}(s.route.parent,r),function KT(n,e){return null!==n&&e&&e(new Vy(n)),(0,Pt.of)(!0)}(s.route,r),function YT(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function Rp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>eh(()=>{const g=l.guards.map(_=>{const I=ca(l.node)??t,D=Ku(_,I);return xo(function eE(n){return n&&mh(n.canActivateChild)}(D)?D.canActivateChild(r,n):I.runInContext(()=>D(r,n))).pipe(Vr())});return(0,Pt.of)(g).pipe(Qu())}));return(0,Pt.of)(u).pipe(Qu())}(n,s.path,t),function Lp(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Pt.of)(!0);const s=r.map(u=>eh(()=>{const l=ca(e)??t,g=Ku(u,l);return xo(function ZT(n){return n&&mh(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(Vr())}));return(0,Pt.of)(s).pipe(Qu())}(n,s.route,t))),Vr(s=>!0!==s,!0))}(r,u,n,e):(0,Pt.of)(g)),(0,Qt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,_=>this.events.next(_)),(0,Tr.b)(_=>{if(u.guardsResult=_.guardsResult,Wa(_.guardsResult))throw qy(0,_.guardsResult);const I=new MT(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.events.next(I)}),si(_=>!!_.guardsResult||(this.cancelNavigationTransition(_,"",3),!1)),i_(_=>{if(_.guards.canActivateChecks.length)return(0,Pt.of)(_).pipe((0,Tr.b)(I=>{const D=new qw(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(D)}),(0,$n.w)(I=>{let D=!1;return(0,Pt.of)(I).pipe(function r_(n,e){return(0,Ai.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return(0,Pt.of)(t);let u=0;return(0,nr.D)(s).pipe(Ao(l=>function hE(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!mE(s)&&(u[So]=s.title),function fE(n,e,t,r){const s=function pE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return(0,Pt.of)({});const u={};return(0,nr.D)(s).pipe((0,Ai.z)(l=>function gE(n,e,t,r){const s=ca(e)??r,u=Ku(n,s);return xo(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Vr(),(0,Tr.b)(g=>{u[l]=g}))),Ha(1),function nh(n){return(0,Qt.U)(()=>n)}(u),as(l=>nE(l)?io.E:ta(l)))}(u,n,e,r).pipe((0,Qt.U)(l=>(n._resolvedData=l,n.data=Hy(n,t).resolve,s&&mE(s)&&(n.data[So]=s.title),null)))}(l.route,r,n,e)),(0,Tr.b)(()=>u++),Ha(1),(0,Ai.z)(l=>u===s.length?(0,Pt.of)(t):io.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Tr.b)({next:()=>D=!0,complete:()=>{D||this.cancelNavigationTransition(I,"",2)}}))}),(0,Tr.b)(I=>{const D=new PP(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(D)}))}),i_(_=>{const I=D=>{const S=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(D.routeConfig).pipe((0,Tr.b)($=>{D.component=$}),(0,Qt.U)(()=>{})));for(const $ of D.children)S.push(...I($));return S};return ea(I(_.targetSnapshot.root)).pipe($a(),Wn(1))}),i_(()=>this.afterPreactivation()),(0,Qt.U)(_=>{const I=function Qw(n,e,t){const r=dh(n,e._root,t?t._root:void 0);return new jy(r,e)}(t.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return this.currentTransition=u={..._,targetRouterState:I},u}),(0,Tr.b)(()=>{this.events.next(new uh)}),((n,e,t,r)=>(0,Qt.U)(s=>(new Xw(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,_=>this.events.next(_),this.inputBindingEnabled),Wn(1),(0,Tr.b)({next:_=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new uo(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects))),t.titleStrategy?.updateTitle(_.targetRouterState.snapshot),_.resolve(!0)},complete:()=>{l=!0}}),function Qc(n){return(0,Vi.e)((e,t)=>{(0,Vu.Xf)(n).subscribe((0,Ti.x)(t,()=>t.complete(),rh.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,Tr.b)(_=>{throw _}))),ra(()=>{l||g||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),as(_=>{if(g=!0,ll(_))this.events.next(new zu(u.id,this.urlSerializer.serialize(u.extractedUrl),_.message,_.cancellationCode)),function Bi(n){return ll(n)&&Wa(n.url)}(_)?this.events.next(new Ww(_.url)):u.resolve(!1);else{this.events.next(new al(u.id,this.urlSerializer.serialize(u.extractedUrl),_,u.targetSnapshot??void 0));try{u.resolve(t.errorHandler(_))}catch(I){u.reject(I)}}return io.E}))}))}cancelNavigationTransition(t,r,s){const u=new zu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function r1(n){return n!==Gu}let i1=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===sn);return r}getResolvedTitleForRoute(t){return t.data[So]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(jP)},providedIn:"root"})}return n})(),jP=(()=>{class n extends i1{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Ve))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$P=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(yE)},providedIn:"root"})}return n})();class HP{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let yE=(()=>{class n extends HP{static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=d.n5z(n)))(s||n)}}();static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const $p=new d.OlP("",{providedIn:"root",factory:()=>({})});let s1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(o1)},providedIn:"root"})}return n})(),o1=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ch=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ch||{});function Hp(n,e){n.events.pipe(si(t=>t instanceof uo||t instanceof zu||t instanceof al||t instanceof No),(0,Qt.U)(t=>t instanceof uo||t instanceof No?Ch.COMPLETE:t instanceof zu&&(0===t.code||1===t.code)?Ch.REDIRECTING:Ch.FAILED),si(t=>t!==Ch.REDIRECTING),Wn(1)).subscribe(()=>{e()})}function la(n){throw n}function Ih(n,e,t){return e.parse("/")}const _E={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this._events=new Ki.x,this.options=(0,d.f3M)($p,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||la,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ih,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(s1),this.routeReuseStrategy=(0,d.f3M)($P),this.titleStrategy=(0,d.f3M)(i1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(pl,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(jp),this.urlSerializer=(0,d.f3M)(tl),this.location=(0,d.f3M)(Ke),this.componentInputBindingEnabled=!!(0,d.f3M)(Pp,{optional:!0}),this.eventsSubscription=new Wc.w0,this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Oo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=$y(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:s}=this.navigationTransitions;if(null===s)return void(a1(r)&&this._events.next(r));if(r instanceof Ka)r1(s.source)&&(this.browserUrlTree=s.extractedUrl);else if(r instanceof No)this.rawUrlTree=s.rawUrl;else if(r instanceof ah){if("eager"===this.urlUpdateStrategy){if(!s.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl);this.setBrowserUrl(u,s)}this.browserUrlTree=s.urlAfterRedirects}}else if(r instanceof uh)this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects);else if(r instanceof zu)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(s);else if(r instanceof Ww){const u=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||r1(s.source)};this.scheduleNavigation(u,Gu,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}r instanceof al&&this.restoreHistory(s,!0),r instanceof uo&&(this.navigated=!0),a1(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Gu,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const _={...s};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(fh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,I=_?this.currentUrlTree.fragment:l;let S,D=null;switch(g){case"merge":D={...this.currentUrlTree.queryParams,...u};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=u||null}null!==D&&(D=this.removeEmptyProps(D));try{S=p(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),S=this.currentUrlTree.root}return m(S,t,D,I??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Wa(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,Gu,null,r)}navigate(t,r={skipLocationChange:!1}){return function GP(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new d.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{..._E}:!1===r?{...vE}:r,Wa(t))return Ip(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Ip(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let g,_,I;l?(g=l.resolve,_=l.reject,I=l.promise):I=new Promise((S,$)=>{g=S,_=$});const D=this.pendingTasks.add();return Hp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function a1(n){return!(n instanceof uh||n instanceof Ww)}let Gp=(()=>{class n{constructor(t,r,s,u,l,g){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=g,this.href=null,this.commands=null,this.onChanges=new Ki.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const _=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(I=>{I instanceof uo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Wr),d.Y36(Zu),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Be))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){1&r&&d.NdJ("click",function(l){return s.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&r&&d.uIk("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",d.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",d.VuI],replaceUrl:["replaceUrl","replaceUrl",d.VuI],routerLink:"routerLink"},standalone:!0,features:[d.Xq5,d.TTD]})}return n})(),bh=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,s,u,l){this.router=t,this.element=r,this.renderer=s,this.cdr=u,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(g=>{g instanceof uo&&this.update()})}ngAfterContentInit(){(0,Pt.of)(this.links.changes,(0,Pt.of)(null)).pipe((0,Uu.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,nr.D)(t).pipe((0,Uu.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function o_(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Wr),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(Gp,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,s,u){if(1&r&&d.Suo(u,Gp,5),2&r){let l;d.iGM(l=d.CRH())&&(s.links=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]})}return n})();class u1{}let l1=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(si(t=>t instanceof uo),Ao(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,nr.D)(s).pipe((0,Uu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,Pt.of)(null);const u=s.pipe((0,Ai.z)(l=>null===l?(0,Pt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,nr.D)([u,l]).pipe((0,Uu.J)())}return u})}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Wr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(u1),d.LFG(s_))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const a_=new d.OlP("");let wE=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ka?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof uo?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof No&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof PT&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new PT(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){d.$Z()};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function $s(n,e){return{\u0275kind:n,\u0275providers:e}}function CE(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Wr),s=n.get(IE);1===n.get(Th)&&r.initialNavigation(),n.get(DE,null,d.XFs.Optional)?.setUpPreloading(),n.get(a_,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const IE=new d.OlP("",{factory:()=>new Ki.x}),Th=new d.OlP("",{providedIn:"root",factory:()=>1}),DE=new d.OlP("");function f1(n){return $s(0,[{provide:DE,useExisting:l1},{provide:u1,useExisting:n}])}const ml=new d.OlP("ROUTER_FORROOT_GUARD"),TE=[Ke,{provide:tl,useClass:Dp},Wr,Mp,{provide:Zu,useFactory:function u_(n){return n.routerState.root},deps:[Wr]},s_,[]];function AE(){return new d.PXZ("Router",Wr)}let zp=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[TE,[],{provide:pl,multi:!0,useValue:t},{provide:ml,useFactory:ME,deps:[[Wr,new d.FiY,new d.tp0]]},{provide:$p,useValue:r||{}},r?.useHash?{provide:Be,useClass:ke}:{provide:Be,useClass:Ye},{provide:a_,useFactory:()=>{const n=(0,d.f3M)(fi),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)($p),r=(0,d.f3M)(jp),s=(0,d.f3M)(tl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new wE(s,r,n,e,t)}},r?.preloadingStrategy?f1(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:AE},r?.initialNavigation?qp(r):[],r?.bindToComponentInputs?$s(8,[Yw,{provide:Pp,useExisting:Yw}]).\u0275providers:[],[{provide:m1,useFactory:CE},{provide:d.tb,multi:!0,useExisting:m1}]]}}static forChild(t){return{ngModule:n,providers:[{provide:pl,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ml,8))};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();function ME(n){return"guarded"}function qp(n){return["disabled"===n.initialNavigation?$s(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Wr);return()=>{e.setUpLocationChangeListener()}}},{provide:Th,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?$s(2,[{provide:Th,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(Oe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Wr),u=e.get(IE);Hp(s,()=>{r(!0)}),e.get(jp).afterPreactivation=()=>(r(!0),u.closed?(0,Pt.of)(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const m1=new d.OlP("");var fe=M(5861),Zp=M(305);function Wp(n,e){const t="object"==typeof e;return new Promise((r,s)=>{const u=new Zp.Hp({next:l=>{r(l),u.unsubscribe()},error:s,complete:()=>{t?r(e.defaultValue):s(new ro)}});n.subscribe(u)})}var Kp=M(6321),Yp=M(671);const ec=function OE(n,e){return n===e||n!=n&&e!=e},Jp=function E1(n,e){for(var t=n.length;t--;)if(ec(n[t][0],e))return t;return-1};var h_=Array.prototype.splice;function Sh(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Sh.prototype.clear=function v1(){this.__data__=[],this.size=0},Sh.prototype.delete=function PE(n){var e=this.__data__,t=Jp(e,n);return!(t<0||(t==e.length-1?e.pop():h_.call(e,t,1),--this.size,0))},Sh.prototype.get=function NE(n){var e=this.__data__,t=Jp(e,n);return t<0?void 0:e[t][1]},Sh.prototype.has=function YP(n){return Jp(this.__data__,n)>-1},Sh.prototype.set=function b1(n,e){var t=this.__data__,r=Jp(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const p_=Sh,tc="object"==typeof global&&global&&global.Object===Object&&global;var v_="object"==typeof self&&self&&self.Object===Object&&self;const bs=tc||v_||Function("return this")(),Qa=bs.Symbol;var vl=Object.prototype,A1=vl.hasOwnProperty,RE=vl.toString,xh=Qa?Qa.toStringTag:void 0;var M1=Object.prototype.toString;var ng=Qa?Qa.toStringTag:void 0;const wl=function P1(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":ng&&ng in Object(n)?function S1(n){var e=A1.call(n,xh),t=n[xh];try{n[xh]=void 0;var r=!0}catch{}var s=RE.call(n);return r&&(e?n[xh]=t:delete n[xh]),s}(n):function x1(n){return M1.call(n)}(n)},Ja=function C_(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},UE=function e2(n){if(!Ja(n))return!1;var e=wl(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var n,rg=bs["__core-js_shared__"],nc=(n=/[^.]+$/.exec(rg&&rg.keys&&rg.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var F1=Function.prototype.toString;const rc=function L1(n){if(null!=n){try{return F1.call(n)}catch{}try{return n+""}catch{}}return""};var jE=/^\[object .+?Constructor\]$/,U1=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const HE=function V1(n){return!(!Ja(n)||function Oh(n){return!!nc&&nc in n}(n))&&(UE(n)?U1:jE).test(rc(n))},ic=function j1(n,e){var t=function B1(n,e){return n?.[e]}(n,e);return HE(t)?t:void 0},El=ic(bs,"Map"),Qi=ic(Object,"create");var i2=Object.prototype.hasOwnProperty;var ZE=Object.prototype.hasOwnProperty;function Cl(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Cl.prototype.clear=function qE(){this.__data__=Qi?Qi(null):{},this.size=0},Cl.prototype.delete=function T_(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},Cl.prototype.get=function H1(n){var e=this.__data__;if(Qi){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return i2.call(e,n)?e[n]:void 0},Cl.prototype.has=function G1(n){var e=this.__data__;return Qi?void 0!==e[n]:ZE.call(e,n)},Cl.prototype.set=function z1(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Qi&&void 0===e?"__lodash_hash_undefined__":e,this};const WE=Cl,Ph=function QE(n,e){var t=n.__data__;return function YE(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function Dl(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Dl.prototype.clear=function x_(){this.size=0,this.__data__={hash:new WE,map:new(El||p_),string:new WE}},Dl.prototype.delete=function Z1(n){var e=Ph(this,n).delete(n);return this.size-=e?1:0,e},Dl.prototype.get=function K1(n){return Ph(this,n).get(n)},Dl.prototype.has=function Il(n){return Ph(this,n).has(n)},Dl.prototype.set=function bl(n,e){var t=Ph(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const XE=Dl;function ha(n){var e=this.__data__=new p_(n);this.size=e.size}ha.prototype.clear=function Xp(){this.__data__=new p_,this.size=0},ha.prototype.delete=function g_(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},ha.prototype.get=function _l(n){return this.__data__.get(n)},ha.prototype.has=function __(n){return this.__data__.has(n)},ha.prototype.set=function O_(n,e){var t=this.__data__;if(t instanceof p_){var r=t.__data__;if(!El||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new XE(r)}return t.set(n,e),this.size=t.size,this};const tC=ha;var J1=function(){try{var n=ic(Object,"defineProperty");return n({},"",{}),n}catch{}}();const rC=J1,P_=function X1(n,e,t){"__proto__"==e&&rC?rC(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var eA=Object.prototype.hasOwnProperty;const tA=function a2(n,e,t){var r=n[e];(!eA.call(n,e)||!ec(r,t)||void 0===t&&!(e in n))&&P_(n,e,t)},Rh=function iC(n,e,t,r){var s=!t;t||(t={});for(var u=-1,l=e.length;++u<l;){var g=e[u],_=r?r(t[g],n[g],g,t,n):void 0;void 0===_&&(_=n[g]),s?P_(t,g,_):tA(t,g,_)}return t},Tl=function c2(n){return null!=n&&"object"==typeof n},N_=function nA(n){return Tl(n)&&"[object Arguments]"==wl(n)};var R_=Object.prototype,on=R_.hasOwnProperty,oC=R_.propertyIsEnumerable,aC=N_(function(){return arguments}())?N_:function(n){return Tl(n)&&on.call(n,"callee")&&!oC.call(n,"callee")};const Al=aC,k_=Array.isArray;var og="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ml=og&&"object"==typeof module&&module&&!module.nodeType&&module,ag=Ml&&Ml.exports===og?bs.Buffer:void 0;const U_=(ag?ag.isBuffer:void 0)||function sg(){return!1};var rA=/^(?:0|[1-9]\d*)$/;const sA=function iA(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&rA.test(n))&&n>-1&&n%1==0&&n<e},dC=function oA(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991};var Fn={};Fn["[object Float32Array]"]=Fn["[object Float64Array]"]=Fn["[object Int8Array]"]=Fn["[object Int16Array]"]=Fn["[object Int32Array]"]=Fn["[object Uint8Array]"]=Fn["[object Uint8ClampedArray]"]=Fn["[object Uint16Array]"]=Fn["[object Uint32Array]"]=!0,Fn["[object Arguments]"]=Fn["[object Array]"]=Fn["[object ArrayBuffer]"]=Fn["[object Boolean]"]=Fn["[object DataView]"]=Fn["[object Date]"]=Fn["[object Error]"]=Fn["[object Function]"]=Fn["[object Map]"]=Fn["[object Number]"]=Fn["[object Object]"]=Fn["[object RegExp]"]=Fn["[object Set]"]=Fn["[object String]"]=Fn["[object WeakMap]"]=!1;const H_=function mC(n){return function(e){return n(e)}};var G_="object"==typeof exports&&exports&&!exports.nodeType&&exports,xl=G_&&"object"==typeof module&&module&&!module.nodeType&&module,kh=xl&&xl.exports===G_&&tc.process;const sc=function(){try{return xl&&xl.require&&xl.require("util").types||kh&&kh.binding&&kh.binding("util")}catch{}}();var z_=sc&&sc.isTypedArray;const _C=z_?H_(z_):function $_(n){return Tl(n)&&dC(n.length)&&!!Fn[wl(n)]};var fa=Object.prototype.hasOwnProperty;const vC=function bA(n,e){var t=k_(n),r=!t&&Al(n),s=!t&&!r&&U_(n),u=!t&&!r&&!s&&_C(n),l=t||r||s||u,g=l?function u2(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],_=g.length;for(var I in n)(e||fa.call(n,I))&&(!l||!("length"==I||s&&("offset"==I||"parent"==I)||u&&("buffer"==I||"byteLength"==I||"byteOffset"==I)||sA(I,_)))&&g.push(I);return g};var Z_=Object.prototype;const cg=function DA(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||Z_)},Fh=function TA(n,e){return function(t){return n(e(t))}},wC=Fh(Object.keys,Object);var h2=Object.prototype.hasOwnProperty;const IC=function CC(n){return null!=n&&dC(n.length)&&!UE(n)},dg=function SA(n){return IC(n)?vC(n):function AA(n){if(!cg(n))return wC(n);var e=[];for(var t in Object(n))h2.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n)};var xA=Object.prototype.hasOwnProperty;const Vh=function OA(n){if(!Ja(n))return function MA(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=cg(n),t=[];for(var r in n)"constructor"==r&&(e||!xA.call(n,r))||t.push(r);return t},W_=function PA(n){return IC(n)?vC(n,!0):Vh(n)};var AC="object"==typeof exports&&exports&&!exports.nodeType&&exports,SC=AC&&"object"==typeof module&&module&&!module.nodeType&&module,MC=SC&&SC.exports===AC?bs.Buffer:void 0,K_=MC?MC.allocUnsafe:void 0;const xC=function BA(){return[]};var $A=Object.prototype.propertyIsEnumerable,Q_=Object.getOwnPropertySymbols,OC=Q_?function(n){return null==n?[]:(n=Object(n),function UA(n,e){for(var t=-1,r=null==n?0:n.length,s=0,u=[];++t<r;){var l=n[t];e(l,t,n)&&(u[s++]=l)}return u}(Q_(n),function(e){return $A.call(n,e)}))}:xC;const J_=OC,HA=function NC(n,e){for(var t=-1,r=e.length,s=n.length;++t<r;)n[s+t]=e[t];return n},RC=Fh(Object.getPrototypeOf,Object);var X_=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)HA(e,J_(n)),n=RC(n);return e}:xC;const kC=X_,eu=function ji(n,e,t){var r=e(n);return k_(n)?r:HA(r,t(n))},Hs=function pg(n){return eu(n,dg,J_)},Ol=function ev(n){return eu(n,W_,kC)},tu=ic(bs,"DataView"),nu=ic(bs,"Promise"),ru=ic(bs,"Set"),iu=ic(bs,"WeakMap");var tv="[object Map]",nv="[object Promise]",rv="[object Set]",iv="[object WeakMap]",sv="[object DataView]",LC=rc(tu),UC=rc(El),VC=rc(nu),ov=rc(ru),zA=rc(iu),Fl=wl;(tu&&Fl(new tu(new ArrayBuffer(1)))!=sv||El&&Fl(new El)!=tv||nu&&Fl(nu.resolve())!=nv||ru&&Fl(new ru)!=rv||iu&&Fl(new iu)!=iv)&&(Fl=function(n){var e=wl(n),t="[object Object]"==e?n.constructor:void 0,r=t?rc(t):"";if(r)switch(r){case LC:return sv;case UC:return tv;case VC:return nv;case ov:return rv;case zA:return iv}return e});const BC=Fl;var ZA=Object.prototype.hasOwnProperty;const jC=bs.Uint8Array,av=function KA(n){var e=new n.constructor(n.byteLength);return new jC(e).set(new jC(n)),e};var cv=/\w*$/;var Ll=Qa?Qa.prototype:void 0,lv=Ll?Ll.valueOf:void 0;const fv=function ZC(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return av(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function uv(n,e){var t=e?av(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function QA(n,e){var t=e?av(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function gg(n){var e=new n.constructor(n.source,cv.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function YA(n){return lv?Object(lv.call(n)):{}}(n)}};var _g=Object.create,cS=function(){function n(){}return function(e){if(!Ja(e))return{};if(_g)return _g(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const vg=cS;var KC=sc&&sc.isMap;const mv=KC?H_(KC):function lS(n){return Tl(n)&&"[object Map]"==BC(n)};var JC=sc&&sc.isSet;const yv=JC?H_(JC):function QC(n){return Tl(n)&&"[object Set]"==BC(n)};var nI="[object Arguments]",aI="[object Function]",Eg="[object Object]",rr={};rr[nI]=rr["[object Array]"]=rr["[object ArrayBuffer]"]=rr["[object DataView]"]=rr["[object Boolean]"]=rr["[object Date]"]=rr["[object Float32Array]"]=rr["[object Float64Array]"]=rr["[object Int8Array]"]=rr["[object Int16Array]"]=rr["[object Int32Array]"]=rr["[object Map]"]=rr["[object Number]"]=rr[Eg]=rr["[object RegExp]"]=rr["[object Set]"]=rr["[object String]"]=rr["[object Symbol]"]=rr["[object Uint8Array]"]=rr["[object Uint8ClampedArray]"]=rr["[object Uint16Array]"]=rr["[object Uint32Array]"]=!0,rr["[object Error]"]=rr[aI]=rr["[object WeakMap]"]=!1;const y2=function Ev(n,e,t,r,s,u){var l,g=1&e,_=2&e,I=4&e;if(t&&(l=s?t(n,r,s,u):t(n)),void 0!==l)return l;if(!Ja(n))return n;var D=k_(n);if(D){if(l=function p2(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&ZA.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!g)return function hg(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(n,l)}else{var S=BC(n),$=S==aI||"[object GeneratorFunction]"==S;if(U_(n))return function Y_(n,e){if(e)return n.slice();var t=n.length,r=K_?K_(t):new n.constructor(t);return n.copy(r),r}(n,g);if(S==Eg||S==nI||$&&!s){if(l=_||$?{}:function wg(n){return"function"!=typeof n.constructor||cg(n)?{}:vg(RC(n))}(n),!g)return _?function Lo(n,e){return Rh(n,kC(n),e)}(n,function NA(n,e){return n&&Rh(e,W_(e),n)}(l,n)):function f2(n,e){return Rh(n,J_(n),e)}(n,function bC(n,e){return n&&Rh(e,dg(e),n)}(l,n))}else{if(!rr[S])return s?n:{};l=fv(n,S,g)}}u||(u=new tC);var J=u.get(n);if(J)return J;u.set(n,l),yv(n)?n.forEach(function(Le){l.add(Ev(Le,e,t,Le,n,u))}):mv(n)&&n.forEach(function(Le,ht){l.set(ht,Ev(Le,e,t,ht,n,u))});var Fe=D?void 0:(I?_?Ol:Hs:_?W_:dg)(n);return function nC(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(Fe||n,function(Le,ht){Fe&&(Le=n[ht=Le]),tA(l,ht,Ev(Le,e,t,ht,n,u))}),l},Ig=function yI(n){return y2(n,5)};var Dn=M(4556);function bg(){return(0,Vi.e)((n,e)=>{let t,r=!1;n.subscribe((0,Ti.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}var mt,wS=M(3997),xi=M(6304),CS=(M(8661),M(3399)),Hh=M(7592),Gh=M(4537),Ts=M(7879),Hn=M(9058),IS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gs={},Dg=Dg||{},an=IS||self;function zh(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ac(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Cv="closure_uid_"+(1e9*Math.random()>>>0),_I=0;function Vo(n,e,t){return n.call.apply(n.bind,arguments)}function co(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function dr(n,e,t){return(dr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vo:co).apply(null,arguments)}function qh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function oi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[s].apply(r,l)}}function ou(){this.s=this.s,this.o=this.o}ou.prototype.s=!1,ou.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Uo(n){Object.prototype.hasOwnProperty.call(n,Cv)&&n[Cv]||(n[Cv]=++_I)}(this)},ou.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Iv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Tg(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(zh(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function Kr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Kr.prototype.h=function(){this.defaultPrevented=!0};var DS=function(){if(!an.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{an.addEventListener("test",()=>{},e),an.removeEventListener("test",()=>{},e)}catch{}return n}();function Ul(n){return/^[\s\xa0]*$/.test(n)}function Ag(){var n=an.navigator;return n&&(n=n.userAgent)?n:""}function Bo(n){return-1!=Ag().indexOf(n)}function Sg(n){return Sg[" "](n),n}Sg[" "]=function(){};var Zh,Mg=Bo("Opera"),Vl=Bo("Trident")||Bo("MSIE"),bv=Bo("Edge"),xg=bv||Vl,Dv=Bo("Gecko")&&!(-1!=Ag().toLowerCase().indexOf("webkit")&&!Bo("Edge"))&&!(Bo("Trident")||Bo("MSIE"))&&!Bo("Edge"),TS=-1!=Ag().toLowerCase().indexOf("webkit")&&!Bo("Edge");function EI(){var n=an.document;return n?n.documentMode:void 0}e:{var Bl="",Wh=function(){var n=Ag();return Dv?/rv:([^\);]+)(\)|;)/.exec(n):bv?/Edge\/([\d\.]+)/.exec(n):Vl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):TS?/WebKit\/(\S+)/.exec(n):Mg?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(Wh&&(Bl=Wh?Wh[1]:""),Vl){var Og=EI();if(null!=Og&&Og>parseFloat(Bl)){Zh=String(Og);break e}}Zh=Bl}var CI=an.document&&Vl&&(EI()||parseInt(Zh,10))||void 0;function jl(n,e){if(Kr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Dv){e:{try{Sg(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:II[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&jl.$.h.call(this)}}oi(jl,Kr);var II={2:"touch",3:"pen",4:"mouse"};jl.prototype.h=function(){jl.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $l="closure_listenable_"+(1e6*Math.random()|0),AS=0;function SS(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++AS,this.fa=this.ia=!1}function Ng(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Av(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function bI(n){const e={};for(const t in n)e[t]=n[t];return e}const DI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function TI(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<DI.length;u++)t=DI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Rg(n){this.src=n,this.g={},this.h=0}function Sv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=vI(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Ng(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Mv(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Rg.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Mv(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new SS(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var xv="closure_lm_"+(1e6*Math.random()|0),Ov={};function AI(n,e,t,r,s){if(r&&r.once)return MI(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)AI(n,e[u],t,r,s);return null}return t=Ug(t),n&&n[$l]?n.O(e,t,ac(r)?!!r.capture:!!r,s):SI(n,e,t,!1,r,s)}function SI(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=ac(s)?!!s.capture:!!s,g=Fg(n);if(g||(n[xv]=g=new Rg(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function xS(){const e=OI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)DS||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Pv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function MI(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)MI(n,e[u],t,r,s);return null}return t=Ug(t),n&&n[$l]?n.P(e,t,ac(r)?!!r.capture:!!r,s):SI(n,e,t,!0,r,s)}function xI(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)xI(n,e[u],t,r,s);else r=ac(r)?!!r.capture:!!r,t=Ug(t),n&&n[$l]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Mv(u=n.g[e],t,r,s))&&(Ng(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Fg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Mv(e,t,r,s)),(t=-1<n?e[n]:null)&&kg(t))}function kg(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[$l])Sv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Pv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Fg(e))?(Sv(t,n),0==t.h&&(t.src=null,e[xv]=null)):Ng(n)}}}function Pv(n){return n in Ov?Ov[n]:Ov[n]="on"+n}function OI(n,e){if(n.fa)n=!0;else{e=new jl(e,this);var t=n.listener,r=n.la||n.src;n.ia&&kg(n),n=t.call(r,e)}return n}function Fg(n){return(n=n[xv])instanceof Rg?n:null}var Lg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ug(n){return"function"==typeof n?n:(n[Lg]||(n[Lg]=function(e){return n.handleEvent(e)}),n[Lg])}function ai(){ou.call(this),this.i=new Rg(this),this.S=this,this.J=null}function mi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Kr(e,n);else if(e instanceof Kr)e.target=e.target||n;else{var s=e;TI(e=new Kr(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=Kh(l,r,!0,e)&&s}if(s=Kh(l=e.g=n,r,!0,e)&&s,s=Kh(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Kh(l=e.g=t[u],r,!1,e)&&s}function Kh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var g=l.listener,_=l.la||l.src;l.ia&&Sv(n.i,l),s=!1!==g.call(_,r)&&s}}return s&&!r.defaultPrevented}oi(ai,ou),ai.prototype[$l]=!0,ai.prototype.removeEventListener=function(n,e,t,r){xI(this,n,e,t,r)},ai.prototype.N=function(){if(ai.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ng(t[r]);delete n.g[e],n.h--}}this.J=null},ai.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ai.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Vg=an.JSON.stringify;function uc(){var n=jg;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var NI=new class PI{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Hl,n=>n.reset());class Hl{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _2(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Nv(n){an.setTimeout(()=>{throw n},0)}let Bg,Gl=!1,jg=new class OS{constructor(){this.h=this.g=null}add(e,t){const r=NI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},PS=()=>{const n=an.Promise.resolve(void 0);Bg=()=>{n.then(zl)}};var zl=()=>{for(var n;n=uc();){try{n.h.call(n.g)}catch(t){Nv(t)}var e=NI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Gl=!1};function $g(n,e){ai.call(this),this.h=n||1,this.g=e||an,this.j=dr(this.qb,this),this.l=Date.now()}function Rv(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function kv(n,e,t){if("function"==typeof n)t&&(n=dr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=dr(n.handleEvent,n)}return 2147483647<Number(e)?-1:an.setTimeout(n,e||0)}function cc(n){n.g=kv(()=>{n.g=null,n.i&&(n.i=!1,cc(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}oi($g,ai),(mt=$g.prototype).ga=!1,mt.T=null,mt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),mi(this,"tick"),this.ga&&(Rv(this),this.start()))}},mt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.N=function(){$g.$.N.call(this),Rv(this),delete this.g};class NS extends ou{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cc(this)}N(){super.N(),this.g&&(an.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function au(n){ou.call(this),this.h=n,this.g={}}oi(au,ou);var Yh=[];function Ji(n,e,t,r){Array.isArray(t)||(t&&(Yh[0]=t.toString()),t=Yh);for(var s=0;s<t.length;s++){var u=AI(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function RS(n){Av(n.g,function(e,t){this.g.hasOwnProperty(t)&&kg(e)},n),n.g={}}function Qh(){this.g=!0}function lc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function FI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return Vg(t)}catch{return e}}(n,t)+(r?" "+r:"")})}au.prototype.N=function(){au.$.N.call(this),RS(this)},au.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qh.prototype.Ea=function(){this.g=!1},Qh.prototype.info=function(){};var uu={},LI=null;function Hg(){return LI=LI||new ai}function UI(n){Kr.call(this,uu.Ta,n)}function pa(n){const e=Hg();mi(e,new UI(e))}function VI(n,e){Kr.call(this,uu.STAT_EVENT,n),this.stat=e}function Xi(n){const e=Hg();mi(e,new VI(e,n))}function BI(n,e){Kr.call(this,uu.Ua,n),this.size=e}function cu(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return an.setTimeout(function(){n()},e)}uu.Ta="serverreachability",oi(UI,Kr),uu.STAT_EVENT="statevent",oi(VI,Kr),uu.Ua="timingevent",oi(BI,Kr);var Jh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Fv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Gg(){}function ql(){}Gg.prototype.h=null;var Vv,ga={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Lv(){Kr.call(this,"d")}function Uv(){Kr.call(this,"c")}function Xh(){}function Zl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new au(this),this.P=FS,this.V=new $g(n=xg?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Bv}function Bv(){this.i=null,this.g="",this.h=!1}oi(Lv,Kr),oi(Uv,Kr),oi(Xh,Gg),Xh.prototype.g=function(){return new XMLHttpRequest},Xh.prototype.i=function(){return{}},Vv=new Xh;var FS=45e3,zg={},qg={};function jv(n,e,t){n.L=1,n.v=nf(jo(e)),n.s=t,n.S=!0,LS(n,null)}function LS(n,e){n.G=Date.now(),Wl(n),n.A=jo(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Yg(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Bv,n.g=lb(n.l,t?e:null,!n.s),0<n.O&&(n.M=new NS(dr(n.Pa,n,n.g),n.O)),Ji(n.U,n.g,"readystatechange",n.nb),e=n.I?bI(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),pa(),function RI(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),_=0;_<g.length;_++){var I=g[_].split("=");if(1<I.length){var D=I[0];I=I[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+I+"&":l+(D+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function US(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function VS(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=v2(n,t),s==qg){4==e&&(n.o=4,Xi(14),r=!1),lc(n.j,n.m,null,"[Incomplete Response]");break}if(s==zg){n.o=4,Xi(15),lc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}lc(n.j,n.m,s,null),dc(n,s)}US(n)&&s!=qg&&s!=zg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Xi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),rm(e),e.M=!0,Xi(11))):(lc(n.j,n.m,t,"[Invalid Chunked Response]"),lu(n),tf(n))}function v2(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?qg:(t=Number(e.substring(t,r)),isNaN(t)?zg:(r+=1)+t>e.length?qg:(e=e.slice(r,r+t),n.C=r+t,e))}function Wl(n){n.Y=Date.now()+n.P,ef(n,n.P)}function ef(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=cu(dr(n.lb,n),e)}function Zg(n){n.B&&(an.clearTimeout(n.B),n.B=null)}function tf(n){0==n.l.H||n.J||QS(n.l,n)}function lu(n){Zg(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Rv(n.V),RS(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function dc(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Gv(t.i,n)))if(!n.K&&Gv(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;im(t),af(t)}ab(t),Xi(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=cu(dr(t.ib,t),6e3));if(1>=YI(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else pc(t,11)}else if((n.K||t.g==n)&&im(t),!Ul(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let I=s[e];if(t.V=I[0],I=I[1],2==t.H)if("c"==I[0]){t.K=I[1],t.pa=I[2];const D=I[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const S=I[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const $=I[5];null!=$&&"number"==typeof $&&0<$&&(t.L=r=1.5*$,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const we=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(we){var u=r.i;u.g||-1==we.indexOf("spdy")&&-1==we.indexOf("quic")&&-1==we.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(zv(u,u.h),u.h=null))}if(r.F){const Fe=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.Da=Fe,mr(r.I,r.F,Fe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=r0(r,r.J?r.pa:null,r.Y),l.K){QI(r.i,l);var g=l,_=r.L;_&&g.setTimeout(_),g.B&&(Zg(g),Wl(g)),r.g=l}else t0(r);0<t.j.length&&uf(t)}else"stop"!=I[0]&&"close"!=I[0]||pc(t,7);else 3==t.H&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?pc(t,7):nm(t):"noop"!=I[0]&&t.h&&t.h.Aa(I),t.A=0)}pa()}catch{}}function $I(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zh(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function jS(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(zh(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function BS(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(zh(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(mt=Zl.prototype).setTimeout=function(n){this.P=n},mt.nb=function(n){n=n.target;const e=this.M;e&&3==zs(n)?e.l():this.Pa(n)},mt.Pa=function(n){try{if(n==this.g)e:{const D=zs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||xg||this.g&&(this.h.h||this.g.ja()||rb(this.g)))){this.J||4!=D||7==e||pa(),Zg(this);var t=this.g.da();this.ca=t;t:if(US(this)){var r=rb(this.g);n="";var s=r.length,u=4==zs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){lu(this),tf(this);var l="";break t}this.h.i=new an.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function kS(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ul(g)){var I=g;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Xi(12),lu(this),tf(this);break e}lc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dc(this,t)}this.S?(VS(this,D,l),xg&&this.i&&3==D&&(Ji(this.U,this.V,"tick",this.mb),this.V.start())):(lc(this.j,this.m,l,null),dc(this,l)),4==D&&lu(this),this.i&&!this.J&&(4==D?QS(this.l,this):(this.i=!1,Wl(this)))}else(function ib(n){const e={};n=(n.g&&2<=zs(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Ul(n[r]))continue;var t=_2(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function MS(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Xi(12)):(this.o=0,Xi(13)),lu(this),tf(this)}}}catch{}},mt.mb=function(){if(this.g){var n=zs(this.g),e=this.g.ja();this.C<e.length&&(Zg(this),VS(this,n,e),this.i&&4!=n&&Wl(this))}},mt.cancel=function(){this.J=!0,lu(this)},mt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function kI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(pa(),Xi(17)),lu(this),this.o=2,tf(this)):ef(this,this.Y-n)};var HI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof hc){this.h=n.h,Wg(this,n.j),this.s=n.s,this.g=n.g,Kg(this,n.m),this.l=n.l;var e=n.i,t=new Ql;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Kl(this,t),this.o=n.o}else n&&(e=String(n).match(HI))?(this.h=!1,Wg(this,e[1]||"",!0),this.s=rf(e[2]||""),this.g=rf(e[3]||"",!0),Kg(this,e[4]),this.l=rf(e[5]||"",!0),Kl(this,e[6]||"",!0),this.o=rf(e[7]||"")):(this.h=!1,this.i=new Ql(null,this.h))}function jo(n){return new hc(n)}function Wg(n,e,t){n.j=t?rf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Kg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Kl(n,e,t){e instanceof Ql?(n.i=e,function ZI(n,e){e&&!n.j&&(du(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(zI(this,r),Yg(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Yl(e,GS)),n.i=new Ql(e,n.h))}function mr(n,e,t){n.i.set(e,t)}function nf(n){return mr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Yl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,$S),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function $S(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}hc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Yl(e,$v,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Yl(e,$v,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Yl(t,"/"==t.charAt(0)?Hv:HS,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Yl(t,GI)),n.join("")};var $v=/[#\/\?@]/g,HS=/[#\?:]/g,Hv=/[#\?]/g,GS=/[#\?@]/g,GI=/#/g;function Ql(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function du(n){n.g||(n.g=new Map,n.h=0,n.i&&function w2(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zI(n,e){du(n),e=Jl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function qI(n,e){return du(n),e=Jl(n,e),n.g.has(e)}function Yg(n,e,t){zI(n,e),0<t.length&&(n.i=null,n.g.set(Jl(n,e),Iv(t)),n.h+=t.length)}function Jl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function WI(n){this.l=n||qS,n=an.PerformanceNavigationTiming?0<(n=an.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(an.g&&an.g.Ka&&an.g.Ka()&&an.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(mt=Ql.prototype).add=function(n,e){du(this),this.i=null,n=Jl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},mt.forEach=function(n,e){du(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},mt.ta=function(){du(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},mt.Z=function(n){du(this);let e=[];if("string"==typeof n)qI(this,n)&&(e=e.concat(this.g.get(Jl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},mt.set=function(n,e){return du(this),this.i=null,qI(this,n=Jl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},mt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var qS=10;function KI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function YI(n){return n.h?1:n.g?n.g.size:0}function Gv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function zv(n,e){n.g?n.g.add(e):n.h=e}function QI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function qv(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Iv(n.i)}WI.prototype.cancel=function(){if(this.i=qv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var JI=class{stringify(n){return an.JSON.stringify(n,void 0)}parse(n){return an.JSON.parse(n,void 0)}};function ZS(){this.g=new JI}function WS(n,e,t){const r=t||"";try{$I(n,function(s,u){let l=s;ac(s)&&(l=Vg(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Qg(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function sf(n){this.l=n.fc||null,this.j=n.ob||!1}function Jg(n,e){ai.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Zv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oi(sf,Gg),sf.prototype.g=function(){return new Jg(this.l,this.j)},sf.prototype.i=function(n){return function(){return n}}({}),oi(Jg,ai);var Zv=0;function Xg(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function fc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Xl(n)}function Xl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(mt=Jg.prototype).open=function(n,e){if(this.readyState!=Zv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Xl(this)},mt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||an).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fc(this)),this.readyState=Zv},mt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Xl(this)),this.g&&(this.readyState=3,Xl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof an.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xg(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},mt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?fc(this):Xl(this),3==this.readyState&&Xg(this)}},mt.Za=function(n){this.g&&(this.response=this.responseText=n,fc(this))},mt.Ya=function(n){this.g&&(this.response=n,fc(this))},mt.ka=function(){this.g&&fc(this)},mt.setRequestHeader=function(n,e){this.v.append(n,e)},mt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Jg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Wv=an.JSON.parse;function Rr(n){ai.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=eb,this.L=this.M=!1}oi(Rr,ai);var eb="",Kv=/^https?$/i,KS=["POST","PUT"];function hu(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Yv(n),Qv(n)}function Yv(n){n.F||(n.F=!0,mi(n,"complete"),mi(n,"error"))}function nb(n){if(n.h&&typeof Dg<"u"&&(!n.C[1]||4!=zs(n)||2!=n.da()))if(n.v&&4==zs(n))kv(n.La,0,n);else if(mi(n,"readystatechange"),4==zs(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(HI)[1]||null;!s&&an.self&&an.self.location&&(s=an.self.location.protocol.slice(0,-1)),r=!Kv.test(s?s.toLowerCase():"")}t=r}if(t)mi(n,"complete"),mi(n,"success");else{n.m=6;try{var u=2<zs(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",Yv(n)}}finally{Qv(n)}}}function Qv(n,e){if(n.g){em(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||mi(n,"ready");try{t.onreadystatechange=r}catch{}}}function em(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(an.clearTimeout(n.A),n.A=null)}function zs(n){return n.g?n.g.readyState:0}function rb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case eb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Jv(n){let e="";return Av(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Xv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Jv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):mr(n,e,t))}function ed(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function tm(n){this.Ga=0,this.j=[],this.l=new Qh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ed("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ed("baseRetryDelayMs",5e3,n),this.hb=ed("retryDelaySeedMs",1e4,n),this.eb=ed("forwardChannelMaxRetries",2,n),this.xa=ed("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new WI(n&&n.concurrentRequestLimit),this.Ja=new ZS,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function nm(n){if(e0(n),3==n.H){var e=n.W++,t=jo(n.I);if(mr(t,"SID",n.K),mr(t,"RID",e),mr(t,"TYPE","terminate"),cf(n,t),(e=new Zl(n,n.l,e)).L=2,e.v=nf(jo(t)),t=!1,an.navigator&&an.navigator.sendBeacon)try{t=an.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&an.Image&&((new Image).src=e.v,t=!0),t||(e.g=lb(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Wl(e)}n0(n)}function af(n){n.g&&(rm(n),n.g.cancel(),n.g=null)}function e0(n){af(n),n.u&&(an.clearTimeout(n.u),n.u=null),im(n),n.i.cancel(),n.m&&("number"==typeof n.m&&an.clearTimeout(n.m),n.m=null)}function uf(n){if(!KI(n.i)&&!n.m){n.m=!0;var e=n.Na;Bg||PS(),Gl||(Bg(),Gl=!0),jg.add(e,n),n.C=0}}function sb(n,e){var t;t=e?e.m:n.W++;const r=jo(n.I);mr(r,"SID",n.K),mr(r,"RID",t),mr(r,"AID",n.V),cf(n,r),n.o&&n.s&&Xv(r,n.o,n.s),t=new Zl(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=ob(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),zv(n.i,t),jv(t,r,e)}function cf(n,e){n.na&&Av(n.na,function(t,r){mr(e,r,t)}),n.h&&$I({},function(t,r){mr(e,r,t)})}function ob(n,e,t){t=Math.min(n.j.length,t);var r=n.h?dr(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let I=s[_].g;const D=s[_].map;if(I-=u,0>I)u=Math.max(0,s[_].g-100),g=!1;else try{WS(D,l,"req"+I+"_")}catch{r&&r(D)}}if(g){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function t0(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Bg||PS(),Gl||(Bg(),Gl=!0),jg.add(e,n),n.A=0}}function ab(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=cu(dr(n.Ma,n),cb(n,n.A)),n.A++,0))}function rm(n){null!=n.B&&(an.clearTimeout(n.B),n.B=null)}function ub(n){n.g=new Zl(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=jo(n.wa);mr(e,"RID","rpc"),mr(e,"SID",n.K),mr(e,"AID",n.V),mr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&mr(e,"TO",n.qa),mr(e,"TYPE","xmlhttp"),cf(n,e),n.o&&n.s&&Xv(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=nf(jo(e)),t.s=null,t.S=!0,LS(t,n)}function im(n){null!=n.v&&(an.clearTimeout(n.v),n.v=null)}function QS(n,e){var t=null;if(n.g==e){im(n),rm(n),n.g=null;var r=2}else{if(!Gv(n.i,e))return;t=e.F,QI(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;mi(r=Hg(),new BI(r,t)),uf(n)}else t0(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function YS(n,e){return!(YI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=cu(dr(n.Na,n,e),cb(n,n.C)),n.C++,0)))}(n,e)||2==r&&ab(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:pc(n,5);break;case 4:pc(n,10);break;case 3:pc(n,6);break;default:pc(n,2)}}function cb(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function pc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=dr(n.pb,n);t||(t=new hc("//www.google.com/images/cleardot.gif"),an.location&&"http"==an.location.protocol||Wg(t,"https"),nf(t)),function XI(n,e){const t=new Qh;if(an.Image){const r=new Image;r.onload=qh(Qg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=qh(Qg,t,r,"TestLoadImage: error",!1,e),r.onabort=qh(Qg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=qh(Qg,t,r,"TestLoadImage: timeout",!1,e),an.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Xi(2);n.H=0,n.h&&n.h.za(e),n0(n),e0(n)}function n0(n){if(n.H=0,n.ma=[],n.h){const e=qv(n.i);(0!=e.length||0!=n.j.length)&&(Tg(n.ma,e),Tg(n.ma,n.j),n.i.i.length=0,Iv(n.j),n.j.length=0),n.h.ya()}}function r0(n,e,t){var r=t instanceof hc?jo(t):new hc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Kg(r,r.m);else{var s=an.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new hc(null);r&&Wg(u,r),e&&(u.g=e),s&&Kg(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&mr(r,t,e),mr(r,"VER",n.ra),cf(n,r),r}function lb(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rr(t&&n.Ha&&!n.va?new sf({ob:!0}):n.va)).Oa(n.J),e}function db(){}function sm(){if(Vl&&!(10<=Number(CI)))throw Error("Environmental error: no available transport.")}function As(n,e){ai.call(this),this.g=new tm(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Ul(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ul(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new td(this)}function hb(n){Lv.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fb(){Uv.call(this),this.status=1}function td(n){this.g=n}function es(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function om(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function Yn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(mt=Rr.prototype).Oa=function(n){this.M=n},mt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Vv.g(),this.C=function jI(n){return n.h||(n.h=n.i())}(this.u?this.u:Vv),this.g.onreadystatechange=dr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void hu(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=an.FormData&&n instanceof an.FormData,!(0<=vI(KS,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{em(this),0<this.B&&((this.L=function tb(n){return Vl&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=dr(this.ua,this)):this.A=kv(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){hu(this,u)}},mt.ua=function(){typeof Dg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mi(this,"timeout"),this.abort(8))},mt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,mi(this,"complete"),mi(this,"abort"),Qv(this))},mt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qv(this,!0)),Rr.$.N.call(this)},mt.La=function(){this.s||(this.G||this.v||this.l?nb(this):this.kb())},mt.kb=function(){nb(this)},mt.isActive=function(){return!!this.g},mt.da=function(){try{return 2<zs(this)?this.g.status:-1}catch{return-1}},mt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},mt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Wv(e)}},mt.Ia=function(){return this.m},mt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=tm.prototype).ra=8,mt.H=1,mt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Zl(this,this.l,n);let u=this.s;if(this.U&&(u?(u=bI(u),TI(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ob(this,s,e),mr(t=jo(this.I),"RID",n),mr(t,"CVER",22),this.F&&mr(t,"X-HTTP-Session-Id",this.F),cf(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(Jv(u)))+"&"+e:this.o&&Xv(t,this.o,u)),zv(this.i,s),this.bb&&mr(t,"TYPE","init"),this.P?(mr(t,"$req",e),mr(t,"SID","null"),s.aa=!0,jv(s,t,null)):jv(s,t,e),this.H=2}}else 3==this.H&&(n?sb(this,n):0==this.j.length||KI(this.i)||sb(this))},mt.Ma=function(){if(this.u=null,ub(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=cu(dr(this.jb,this),n)}},mt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xi(10),af(this),ub(this))},mt.ib=function(){null!=this.v&&(this.v=null,af(this),ab(this),Xi(19))},mt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Xi(2)):(this.l.info("Failed to ping google.com"),Xi(1))},mt.isActive=function(){return!!this.h&&this.h.isActive(this)},(mt=db.prototype).Ba=function(){},mt.Aa=function(){},mt.za=function(){},mt.ya=function(){},mt.isActive=function(){return!0},mt.Va=function(){},sm.prototype.g=function(n,e){return new As(n,e)},oi(As,ai),As.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Xi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=r0(n,null,n.Y),uf(n)},As.prototype.close=function(){nm(this.g)},As.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Vg(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&uf(e)},As.prototype.N=function(){this.g.h=null,delete this.j,nm(this.g),delete this.g,As.$.N.call(this)},oi(hb,Lv),oi(fb,Uv),oi(td,db),td.prototype.Ba=function(){mi(this.g,"a")},td.prototype.Aa=function(n){mi(this.g,new hb(n))},td.prototype.za=function(n){mi(this.g,new fb)},td.prototype.ya=function(){mi(this.g,"b")},oi(es,function JS(){this.blockSize=-1}),es.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},es.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)om(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){om(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){om(this,r),s=0;break}}this.h=s,this.i+=e},es.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var pb={};function am(n){return-128<=n&&128>n?function wI(n,e){var t=pb;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Yn([0|e],0>e?-1:0)}):new Yn([0|n],0>n?-1:0)}function lo(n){if(isNaN(n)||!isFinite(n))return lf;if(0>n)return Oi(lo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=o0;return new Yn(e,0)}var o0=4294967296,lf=am(0),gb=am(1),a0=am(16777216);function ma(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ss(n){return-1==n.h}function Oi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Yn(t,~n.h).add(gb)}function um(n,e){return n.add(Oi(e))}function fu(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function df(n,e){this.g=n,this.h=e}function nd(n,e){if(ma(e))throw Error("division by zero");if(ma(n))return new df(lf,lf);if(Ss(n))return e=nd(Oi(n),e),new df(Oi(e.g),Oi(e.h));if(Ss(e))return e=nd(n,Oi(e)),new df(Oi(e.g),e.h);if(30<n.g.length){if(Ss(n)||Ss(e))throw Error("slowDivide_ only works with positive integers.");for(var t=gb,r=e;0>=r.X(n);)t=mb(t),r=mb(r);var s=hf(t,1),u=hf(r,1);for(r=hf(r,2),t=hf(t,2);!ma(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=hf(r,1),t=hf(t,1)}return e=um(n,s.R(e)),new df(s,e)}for(s=lf;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=lo(t)).R(e);Ss(l)||0<l.X(n);)l=(u=lo(t-=r)).R(e);ma(u)&&(u=gb),s=s.add(u),n=um(n,l)}return new df(s,n)}function mb(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Yn(t,n.h)}function hf(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Yn(s,n.h)}(mt=Yn.prototype).ea=function(){if(Ss(this))return-Oi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:o0+r)*e,e*=o0}return n},mt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ma(this))return"0";if(Ss(this))return"-"+Oi(this).toString(n);for(var e=lo(Math.pow(n,6)),t=this,r="";;){var s=nd(t,e).g,u=((0<(t=um(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ma(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},mt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},mt.X=function(n){return Ss(n=um(this,n))?-1:ma(n)?0:1},mt.abs=function(){return Ss(this)?Oi(this):this},mt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new Yn(t,-2147483648&t[t.length-1]?-1:0)},mt.R=function(n){if(ma(this)||ma(n))return lf;if(Ss(this))return Ss(n)?Oi(this).R(Oi(n)):Oi(Oi(this).R(n));if(Ss(n))return Oi(this.R(Oi(n)));if(0>this.X(a0)&&0>n.X(a0))return lo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),g=n.D(s)>>>16,_=65535&n.D(s);t[2*r+2*s]+=l*_,fu(t,2*r+2*s),t[2*r+2*s+1]+=u*_,fu(t,2*r+2*s+1),t[2*r+2*s+1]+=l*g,fu(t,2*r+2*s+1),t[2*r+2*s+2]+=u*g,fu(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Yn(t,0)},mt.gb=function(n){return nd(this,n).h},mt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Yn(t,this.h&n.h)},mt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Yn(t,this.h|n.h)},mt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Yn(t,this.h^n.h)},sm.prototype.createWebChannel=sm.prototype.g,As.prototype.send=As.prototype.u,As.prototype.open=As.prototype.m,As.prototype.close=As.prototype.close,Jh.NO_ERROR=0,Jh.TIMEOUT=8,Jh.HTTP_ERROR=6,Fv.COMPLETE="complete",ql.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",ai.prototype.listen=ai.prototype.O,Rr.prototype.listenOnce=Rr.prototype.P,Rr.prototype.getLastError=Rr.prototype.Sa,Rr.prototype.getLastErrorCode=Rr.prototype.Ia,Rr.prototype.getStatus=Rr.prototype.da,Rr.prototype.getResponseJson=Rr.prototype.Wa,Rr.prototype.getResponseText=Rr.prototype.ja,Rr.prototype.send=Rr.prototype.ha,Rr.prototype.setWithCredentials=Rr.prototype.Oa,es.prototype.digest=es.prototype.l,es.prototype.reset=es.prototype.reset,es.prototype.update=es.prototype.j,Yn.prototype.add=Yn.prototype.add,Yn.prototype.multiply=Yn.prototype.R,Yn.prototype.modulo=Yn.prototype.gb,Yn.prototype.compare=Yn.prototype.X,Yn.prototype.toNumber=Yn.prototype.ea,Yn.prototype.toString=Yn.prototype.toString,Yn.prototype.getBits=Yn.prototype.D,Yn.fromNumber=lo,Yn.fromString=function s0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Oi(s0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=lo(Math.pow(e,8)),r=lf,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=lo(Math.pow(e,u)),r=r.R(u).add(lo(l))):r=(r=r.R(t)).add(lo(l))}return r};var XS=Gs.createWebChannelTransport=function(){return new sm},E2=Gs.getStatEventTarget=function(){return Hg()},gc=Gs.ErrorCode=Jh,eM=Gs.EventType=Fv,tM=Gs.Event=uu,yb=Gs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},cm=Gs.FetchXmlHttpFactory=sf,ff=Gs.WebChannel=ql,nM=Gs.XhrIo=Rr,_b=Gs.Md5=es,ya=Gs.Integer=Yn;const vb="@firebase/firestore";class yi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");let mc="9.23.0";const pu=new Ts.Yd("@firebase/firestore");function u0(){return pu.logLevel}function ze(n,...e){if(pu.logLevel<=Ts.in.DEBUG){const t=e.map(lm);pu.debug(`Firestore (${mc}): ${n}`,...t)}}function jr(n,...e){if(pu.logLevel<=Ts.in.ERROR){const t=e.map(lm);pu.error(`Firestore (${mc}): ${n}`,...t)}}function qs(n,...e){if(pu.logLevel<=Ts.in.WARN){const t=e.map(lm);pu.warn(`Firestore (${mc}): ${n}`,...t)}}function lm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function vt(n="Unexpected state"){const e=`FIRESTORE (${mc}) INTERNAL ASSERTION FAILED: `+n;throw jr(e),new Error(e)}function Tt(n,e){n||vt()}function lt(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends Hn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Cb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yi.UNAUTHENTICATED))}shutdown(){}}class l0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ib{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=I=>this.i!==s?(s=this.i,t(I)):Promise.resolve();let l=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ui,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const I=l;e.enqueueRetryable((0,fe.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},_=I=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(I=>_(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?_(I):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ui)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new Cb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new yi(e)}}class d0{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=yi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class h0{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new d0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rM{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.T=t.token,new bb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function iM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class f0{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=iM(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function Jt(n,e){return n<e?-1:n>e?1:0}function yc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Db(n){return n+"\0"}class yr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $e(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $e(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $e(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yr.fromMillis(Date.now())}static fromDate(e){return yr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new yr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new yr(0,0))}static max(){return new St(new yr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class pf{constructor(e,t,r){void 0===t?t=0:t>e.length&&vt(),void 0===r?r=e.length-t:r>e.length-t&&vt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===pf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rn extends pf{construct(e,t,r){return new Rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new $e(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Rn(t)}static emptyPath(){return new Rn([])}}const Tb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kr extends pf{construct(e,t,r){return new kr(e,t,r)}static isValidIdentifier(e){return Tb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new $e(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new $e(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new $e(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===g?(l=!l,s++):"."!==g||l?(r+=g,s++):(u(),s++)}if(u(),l)throw new $e(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kr(t)}static emptyPath(){return new kr([])}}class at{constructor(e){this.path=e}static fromPath(e){return new at(Rn.fromString(e))}static fromName(e){return new at(Rn.fromString(e).popFirst(5))}static empty(){return new at(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new Rn(e.slice()))}}class gf{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Pi(n){return n.fields.find(e=>2===e.kind)}function Zs(n){return n.fields.filter(e=>2!==e.kind)}gf.UNKNOWN_ID=-1;class dm{constructor(e,t){this.fieldPath=e,this.kind=t}}class hm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hm(0,Ws.min())}}function p0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=St.fromTimestamp(1e9===r?new yr(t+1,0):new yr(t,r));return new Ws(s,at.empty(),e)}function fm(n){return new Ws(n.readTime,n.key,-1)}class Ws{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ws(St.min(),at.empty(),-1)}static max(){return new Ws(St.max(),at.empty(),-1)}}function Ab(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=at.comparator(n.documentKey,e.documentKey),0!==t?t:Jt(n.largestBatchId,e.largestBatchId))}const oM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function gu(n){return mf.apply(this,arguments)}function mf(){return mf=(0,fe.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==oM)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),mf.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let s=0,u=0,l=!1;e.forEach(g=>{++s,g.next(()=>{++u,l&&u===s&&t()},_=>r(_))}),l=!0,u===s&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(s=>s?le.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new le((r,s)=>{const u=e.length,l=new Array(u);let g=0;for(let _=0;_<u;_++){const I=_;t(e[I]).next(D=>{l[I]=D,++g,g===u&&r(l)},D=>s(D))}})}static doWhile(e,t){return new le((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class yf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ui,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new _f(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=wf(r.target.error);this.v.reject(new _f(e,s))}}static open(e,t,r,s){try{return new yf(t,e.transaction(s,r))}catch(u){throw new _f(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Sb(t)}}class ho{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===ho.S((0,Hn.z$)())&&jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),_c(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Hn.hl)())return!1;if(ho.C())return!0;const e=(0,Hn.z$)(),t=ho.S(e),r=0<t&&t<10,s=ho.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,fe.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new _f(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;s("VersionError"===g.name?new $e(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new $e(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new _f(e,g))},u.onupgradeneeded=l=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,fe.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.$(e);const _=yf.open(u.db,e,l?"readonly":"readwrite",r),I=s(_).next(D=>(_.P(),D)).catch(D=>(_.abort(D),le.reject(D))).toPromise();return I.catch(()=>{}),yield _.R,I}catch(_){const I=_,D="FirebaseError"!==I.name&&g<3;if(ze("SimpleDb","Transaction failed with error:",I.message,"Retrying:",D),u.close(),!D)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class aM{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return _c(this.L.delete())}}class _f extends $e{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $o(n){return"IndexedDbTransactionError"===n.name}class Sb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_c(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),_c(this.store.add(e))}get(e){return _c(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),_c(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),_c(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new le((u,l)=>{s.onerror=g=>{l(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new le((r,s)=>{t.onerror=u=>{const l=wf(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}W(e,t){const r=[];return new le((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void s();const _=new aM(g),I=t(g.primaryKey,g.value,_);if(I instanceof le){const D=I.catch(S=>(_.done(),le.reject(S)));r.push(D)}_.isDone?s():null===_.K?g.continue():g.continue(_.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _c(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=wf(r.target.error);t(s)}})}let vf=!1;function wf(n){const e=ho.S((0,Hn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new $e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vf||(vf=!0,setTimeout(()=>{throw r},0)),r}}return n}class b2{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,fe.Z)(function*(){t.task=null;try{ze("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){$o(r)?ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield gu(r)}yield t.et(6e4)}))}}class Mb{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,fe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return le.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ze("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(g=>{s-=g,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(g=>(ze("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=fm(u);Ab(l,r)>0&&(r=l)}),new Ws(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ms=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function id(n){return null==n}function Ho(n){return 0===n&&1/n==-1/0}function xb(n){return"number"==typeof n&&Number.isInteger(n)&&!Ho(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ni(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uM(e)),e=g0(n.get(t),e);return uM(e)}function g0(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function uM(n){return n+"\x01\x01"}function Go(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&vt(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let _;0===s.length?_=g:(s+=g,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:vt()}u=l+2}return new Rn(r)}const cM=["userId","batchId"];function pm(n,e){return[n,Ni(e)]}function Ob(n,e,t){return[n,Ni(e),t]}const lM={},Pb=["prefixPath","collectionGroup","readTime","documentId"],Nb=["prefixPath","collectionGroup","documentId"],dM=["collectionGroup","readTime","prefixPath","documentId"],Rb=["canonicalId","targetId"],kb=["targetId","path"],hM=["path","targetId"],fM=["collectionId","parent"],Fb=["indexId","uid"],pM=["uid","sequenceNumber"],Lb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ub=["indexId","uid","orderedDocumentKey"],Vb=["userId","collectionPath","documentId"],Bb=["userId","collectionPath","largestBatchId"],gM=["userId","collectionGroup","largestBatchId"],jb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],D2=[...jb,"documentOverlays"],m0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mM=m0,T2=[...mM,"indexConfiguration","indexState","indexEntries"];class $b extends rd{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ri(n,e){const t=lt(n);return ho.M(t.ht,e)}function yM(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _M(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class _r{constructor(e,t){this.comparator=e,this.root=t||_i.EMPTY}insert(e,t){return new _r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_i.BLACK,null,null))}remove(e){return new _r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_i.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new y0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new y0(this.root,e,this.comparator,!1)}getReverseIterator(){return new y0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new y0(this.root,e,this.comparator,!0)}}class y0{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _i{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??_i.RED,this.left=s??_i.EMPTY,this.right=u??_i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new _i(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return _i.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}_i.EMPTY=null,_i.RED=!0,_i.BLACK=!1,_i.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new _i(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class or{constructor(e){this.comparator=e,this.data=new _r(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _0(this.data.getIterator())}getIteratorFrom(e){return new _0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new or(this.comparator);return t.data=e,t}}class _0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sd(n){return n.hasNext()?n.getNext():void 0}class ki{constructor(e){this.fields=e,e.sort(kr.comparator)}static empty(){return new ki([])}unionWith(e){let t=new or(kr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ki(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Hb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Hb("Invalid base64 string: "+s):s}}(e);return new vi(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const vM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=vM.exec(n);if(Tt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fr(n.seconds),nanos:Fr(n.nanos)}}function Fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function va(n){return"string"==typeof n?vi.fromBase64String(n):vi.fromUint8Array(n)}function gm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function v0(n){const e=n.mapValue.fields.__previous_value__;return gm(e)?v0(e):e}function Ef(n){const e=_a(n.mapValue.fields.__local_write_time__.timestampValue);return new yr(e.seconds,e.nanos)}class Cf{constructor(e,t,r,s,u,l,g,_,I){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=I}}class fo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fo&&e.projectId===this.projectId&&e.database===this.database}}const mu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mm={nullValue:"NULL_VALUE"};function yu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gm(n)?4:wm(n)?9007199254740991:10:vt()}function zo(n,e){if(n===e)return!0;const t=yu(n);if(t!==yu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ef(n).isEqual(Ef(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=_a(r.timestampValue),l=_a(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,va(n.bytesValue).isEqual(va(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Fr(r.geoPointValue.latitude)===Fr(s.geoPointValue.latitude)&&Fr(r.geoPointValue.longitude)===Fr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Fr(r.integerValue)===Fr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Fr(r.doubleValue),l=Fr(s.doubleValue);return u===l?Ho(u)===Ho(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return yc(n.arrayValue.values||[],e.arrayValue.values||[],zo);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(yM(u)!==yM(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!zo(u[g],l[g])))return!1;return!0}(n,e);default:return vt()}var s}function If(n,e){return void 0!==(n.values||[]).find(t=>zo(t,e))}function _u(n,e){if(n===e)return 0;const t=yu(n),r=yu(e);if(t!==r)return Jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Jt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=Fr(s.integerValue||s.doubleValue),g=Fr(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return ym(n.timestampValue,e.timestampValue);case 4:return ym(Ef(n),Ef(e));case 5:return Jt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=va(s),g=va(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),g=u.split("/");for(let _=0;_<l.length&&_<g.length;_++){const I=Jt(l[_],g[_]);if(0!==I)return I}return Jt(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Jt(Fr(s.latitude),Fr(u.latitude));return 0!==l?l:Jt(Fr(s.longitude),Fr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],g=u.values||[];for(let _=0;_<l.length&&_<g.length;++_){const I=_u(l[_],g[_]);if(I)return I}return Jt(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===mu.mapValue&&u===mu.mapValue)return 0;if(s===mu.mapValue)return 1;if(u===mu.mapValue)return-1;const l=s.fields||{},g=Object.keys(l),_=u.fields||{},I=Object.keys(_);g.sort(),I.sort();for(let D=0;D<g.length&&D<I.length;++D){const S=Jt(g[D],I[D]);if(0!==S)return S;const $=_u(l[g[D]],_[I[D]]);if(0!==$)return $}return Jt(g.length,I.length)}(n.mapValue,e.mapValue);default:throw vt()}}function ym(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Jt(n,e);const t=_a(n),r=_a(e),s=Jt(t.seconds,r.seconds);return 0!==s?s:Jt(t.nanos,r.nanos)}function od(n){return w0(n)}function w0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=_a(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?va(n.bytesValue).toBase64():"referenceValue"in n?at.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=w0(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of s)l?l=!1:u+=",",u+=`${g}:${w0(r.fields[g])}`;return u+"}"}(n.mapValue):vt();var e}function wc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function E0(n){return!!n&&"integerValue"in n}function bf(n){return!!n&&"arrayValue"in n}function Gb(n){return!!n&&"nullValue"in n}function zb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vm(n){return!!n&&"mapValue"in n}function ad(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ad(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ad(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function wM(n){return"nullValue"in n?mm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wc(fo.empty(),at.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:vt()}function EM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wc(fo.empty(),at.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?mu:vt()}function C0(n,e){const t=_u(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function I0(n,e){const t=_u(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $i{constructor(e){this.value=e}static empty(){return new $i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ad(t)}setAll(e){let t=kr.emptyPath(),r={},s=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=g.popLast()}l?r[g.lastSegment()]=ad(l):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());vm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];vm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){vc(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new $i(ad(this.value))}}function ts(n){const e=[];return vc(n.fields,(t,r)=>{const s=new kr([t]);if(vm(r)){const u=ts(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new ki(e)}class hr{constructor(e,t,r,s,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new hr(e,0,St.min(),St.min(),St.min(),$i.empty(),0)}static newFoundDocument(e,t,r,s){return new hr(e,1,t,St.min(),r,s,0)}static newNoDocument(e,t){return new hr(e,2,t,St.min(),St.min(),$i.empty(),0)}static newUnknownDocument(e,t){return new hr(e,3,t,St.min(),St.min(),$i.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(St.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wa{constructor(e,t){this.position=e,this.inclusive=t}}function qb(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?at.comparator(at.fromName(l.referenceValue),t.key):_u(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function b0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zo(n.position[t],e.position[t]))return!1;return!0}class ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function D0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Ea{}class Mn extends Ea{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Qb(e,t,r):"array-contains"===t?new eD(e,r):"in"===t?new CM(e,r):"not-in"===t?new M0(e,r):"array-contains-any"===t?new tD(e,r):new Mn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new S2(e,r):new Jb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(_u(t,this.value)):null!==t&&yu(this.value)===yu(t)&&this.matchesComparison(_u(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class qn extends Ea{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new qn(e,t)}matches(e){return vu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function vu(n){return"and"===n.op}function T0(n){return"or"===n.op}function Zb(n){return A0(n)&&vu(n)}function A0(n){for(const e of n.filters)if(e instanceof qn)return!1;return!0}function S0(n){if(n instanceof Mn)return n.field.canonicalString()+n.op.toString()+od(n.value);if(Zb(n))return n.filters.map(e=>S0(e)).join(",");{const e=n.filters.map(t=>S0(t)).join(",");return`${n.op}(${e})`}}function Wb(n,e){return n instanceof Mn?(t=n,(r=e)instanceof Mn&&t.op===r.op&&t.field.isEqual(r.field)&&zo(t.value,r.value)):n instanceof qn?function(t,r){return r instanceof qn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&Wb(u,r.filters[l]),!0)}(n,e):void vt();var t,r}function Kb(n,e){const t=n.filters.concat(e);return qn.create(t,n.op)}function Yb(n){return n instanceof Mn?`${(e=n).field.canonicalString()} ${e.op} ${od(e.value)}`:n instanceof qn?function(e){return e.op.toString()+" {"+e.getFilters().map(Yb).join(" ,")+"}"}(n):"Filter";var e}class Qb extends Mn{constructor(e,t,r){super(e,t,r),this.key=at.fromName(r.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.matchesComparison(t)}}class S2 extends Mn{constructor(e,t){super(e,"in",t),this.keys=Xb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Jb extends Mn{constructor(e,t){super(e,"not-in",t),this.keys=Xb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>at.fromName(r.referenceValue))}class eD extends Mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bf(t)&&If(t.arrayValue,this.value)}}class CM extends Mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&If(this.value.arrayValue,t)}}class M0 extends Mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(If(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!If(this.value.arrayValue,t)}}class tD extends Mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>If(this.value.arrayValue,r))}}class nD{constructor(e,t=null,r=[],s=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=g,this.dt=null}}function x0(n,e=null,t=[],r=[],s=null,u=null,l=null){return new nD(n,e,t,r,s,u,l)}function wu(n){const e=lt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>S0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),id(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>od(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>od(r)).join(",")),e.dt=t}return e.dt}function cd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!D0(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Wb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!b0(n.startAt,e.startAt)&&b0(n.endAt,e.endAt)}function Ca(n){return at.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ec(n,e){return n.filters.filter(t=>t instanceof Mn&&t.field.isEqual(e))}function O0(n,e,t){let r=mm,s=!0;for(const u of Ec(n,e)){let l=mm,g=!0;switch(u.op){case"<":case"<=":l=wM(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=mm}C0({value:r,inclusive:s},{value:l,inclusive:g})<0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];C0({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function P0(n,e,t){let r=mu,s=!0;for(const u of Ec(n,e)){let l=mu,g=!0;switch(u.op){case">=":case">":l=EM(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=mu}I0({value:r,inclusive:s},{value:l,inclusive:g})>0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];I0({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class Ia{constructor(e,t=null,r=[],s=[],u=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=_,this.wt=null,this._t=null}}function rD(n,e,t,r,s,u,l,g){return new Ia(n,e,t,r,s,u,l,g)}function Df(n){return new Ia(n)}function N0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function R0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Em(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function iD(n){return null!==n.collectionGroup}function ld(n){const e=lt(n);if(null===e.wt){e.wt=[];const t=Em(e),r=R0(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new ud(t)),e.wt.push(new ud(kr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ud(kr.keyField(),u))}}}return e.wt}function hs(n){const e=lt(n);if(!e._t)if("F"===e.limitType)e._t=x0(e.path,e.collectionGroup,ld(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ld(e))t.push(new ud(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new wa(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new wa(e.startAt.position,e.startAt.inclusive):null;e._t=x0(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function Cm(n,e){e.getFirstInequalityField(),Em(n);const t=n.filters.concat([e]);return new Ia(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Im(n,e,t){return new Ia(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tf(n,e){return cd(hs(n),hs(e))&&n.limitType===e.limitType}function sD(n){return`${wu(hs(n))}|lt:${n.limitType}`}function oD(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Yb(r)).join(", ")}]`),id(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>od(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>od(r)).join(",")),`Target(${t})`}(hs(n))}; limitType=${n.limitType})`}function bm(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):at.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of ld(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const g=qb(s,u,l);return s.inclusive?g<=0:g<0}(t.startAt,ld(t),r)||t.endAt&&!function(s,u,l){const g=qb(s,u,l);return s.inclusive?g>=0:g>0}(t.endAt,ld(t),r)));var t,r}function IM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bM(n){return(e,t)=>{let r=!1;for(const s of ld(n)){const u=M2(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function M2(n,e,t){const r=n.field.isKeyField()?at.comparator(e.key,t.key):function(s,u,l){const g=u.data.field(s),_=l.data.field(s);return null!==g&&null!==_?_u(g,_):vt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}class ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vc(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return _M(this.inner)}size(){return this.innerSize}}const Dm=new _r(at.comparator);function fs(){return Dm}const aD=new _r(at.comparator);function dd(...n){let e=aD;for(const t of n)e=e.insert(t.key,t);return e}function Eu(n){let e=aD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function po(){return Cc()}function Tm(){return Cc()}function Cc(){return new ba(n=>n.toString(),(n,e)=>n.isEqual(e))}const DM=new _r(at.comparator),k0=new or(at.comparator);function un(...n){let e=k0;for(const t of n)e=e.add(t);return e}const Am=new or(Jt);function uD(){return Am}function TM(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ho(e)?"-0":e}}function AM(n){return{integerValue:""+n}}function F0(n,e){return xb(e)?AM(e):TM(n,e)}class Sm{constructor(){this._=void 0}}function SM(n,e,t){return n instanceof Ic?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&gm(s)&&(s=v0(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Cu?L0(n,e):n instanceof bc?lD(n,e):function(r,s){const u=cD(r,s),l=Mm(u)+Mm(r.gt);return E0(u)&&E0(r.gt)?AM(l):TM(r.serializer,l)}(n,e)}function MM(n,e,t){return n instanceof Cu?L0(n,e):n instanceof bc?lD(n,e):t}function cD(n,e){return n instanceof Dc?E0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ic extends Sm{}class Cu extends Sm{constructor(e){super(),this.elements=e}}function L0(n,e){const t=xM(e);for(const r of n.elements)t.some(s=>zo(s,r))||t.push(r);return{arrayValue:{values:t}}}class bc extends Sm{constructor(e){super(),this.elements=e}}function lD(n,e){let t=xM(e);for(const r of n.elements)t=t.filter(s=>!zo(s,r));return{arrayValue:{values:t}}}class Dc extends Sm{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Mm(n){return Fr(n.integerValue||n.doubleValue)}function xM(n){return bf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hd{constructor(e,t){this.field=e,this.transform=t}}class OM{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function V0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class B0{}function dD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new fd(n.key,Cr.none()):new Tc(n.key,n.data,Cr.none());{const t=n.data,r=$i.empty();let s=new or(kr.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new Da(n.key,r,new ki(s.toArray()),Cr.none())}}function PM(n,e,t){n instanceof Tc?function(r,s,u){const l=r.value.clone(),g=H0(r.fieldTransforms,s,u.transformResults);l.setAll(g),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Da?function(r,s,u){if(!V0(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=H0(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll($0(r)),g.setAll(l),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Af(n,e,t,r){return n instanceof Tc?function(s,u,l,g){if(!V0(s.precondition,u))return l;const _=s.value.clone(),I=RM(s.fieldTransforms,g,u);return _.setAll(I),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Da?function(s,u,l,g){if(!V0(s.precondition,u))return l;const _=RM(s.fieldTransforms,g,u),I=u.data;return I.setAll($0(s)),I.setAll(_),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,V0(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function NM(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=cD(r.transform,s||null);null!=u&&(null===t&&(t=$i.empty()),t.set(r.field,u))}return t||null}function j0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&yc(t,r,(s,u)=>function U0(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Cu&&r instanceof Cu||t instanceof bc&&r instanceof bc?yc(t.elements,r.elements,zo):t instanceof Dc&&r instanceof Dc?zo(t.gt,r.gt):t instanceof Ic&&r instanceof Ic);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Tc extends B0{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Da extends B0{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function $0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function H0(n,e,t){const r=new Map;Tt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,g=e.data.field(u.field);r.set(u.field,MM(l,g,t[s]))}return r}function RM(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,SM(u,l,e))}return r}class fd extends B0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sf extends B0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xm{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&PM(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Af(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Af(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Tm();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(s.key)?null:g;const _=dD(l,g);null!==_&&r.set(s.key,_),l.isValidDocument()||l.convertToNoDocument(St.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&yc(this.mutations,e.mutations,(t,r)=>j0(t,r))&&yc(this.baseMutations,e.baseMutations,(t,r)=>j0(t,r))}}class Om{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Tt(e.mutations.length===r.length);let s=DM;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new Om(e,t,r,s)}}class G0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class kM{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yr,kn;function z0(n){switch(n){default:return vt();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function FM(n){if(void 0===n)return jr("GRPC error has no .code"),_e.UNKNOWN;switch(n){case Yr.OK:return _e.OK;case Yr.CANCELLED:return _e.CANCELLED;case Yr.UNKNOWN:return _e.UNKNOWN;case Yr.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Yr.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Yr.INTERNAL:return _e.INTERNAL;case Yr.UNAVAILABLE:return _e.UNAVAILABLE;case Yr.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Yr.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Yr.NOT_FOUND:return _e.NOT_FOUND;case Yr.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Yr.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Yr.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Yr.ABORTED:return _e.ABORTED;case Yr.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Yr.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Yr.DATA_LOSS:return _e.DATA_LOSS;default:return vt()}}(kn=Yr||(Yr={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";class q0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Z0}static getOrCreateInstance(){return null===Z0&&(Z0=new q0),Z0}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Z0=null;function hD(){return new TextEncoder}const x2=new ya([4294967295,4294967295],0);function LM(n){const e=hD().encode(n),t=new _b;return t.update(e),new Uint8Array(t.digest())}function fD(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ya([t,r],0),new ya([s,u],0)]}class W0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Nm(`Invalid padding: ${t}`);if(r<0)throw new Nm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Nm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Nm(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ya.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(ya.fromNumber(r)));return 1===s.compare(x2)&&(s=new ya([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=LM(e),[r,s]=fD(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new W0(u,s,t);return r.forEach(g=>l.insert(g)),l}insert(e){if(0===this.It)return;const t=LM(e),[r,s]=fD(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Nm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rm{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,km.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Rm(St.min(),s,new _r(Jt),fs(),un())}}class km{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new km(r,t,un(),un(),un())}}class K0{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class UM{constructor(e,t){this.targetId=e,this.Vt=t}}class pD{constructor(e,t,r=vi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class VM{constructor(){this.St=0,this.Dt=jM(),this.Ct=vi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=un(),t=un(),r=un();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:vt()}}),new km(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=jM()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class O2{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=fs(),this.zt=BM(),this.Wt=new _r(Jt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:vt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(Ca(l))if(0===s){const g=new at(l.path);this.Yt(r,g,hr.newNoDocument(g,St.min()))}else Tt(1===s);else{const g=this.ie(r);if(g!==s){const _=this.re(e,g);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=q0.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(I,D,S){var $,J,we,Fe,Le,ht;const Vt={localCacheCount:D,existenceFilterCount:S.count},wt=S.unchangedNames;return wt&&(Vt.bloomFilter={applied:0===I,hashCount:null!==($=wt?.hashCount)&&void 0!==$?$:0,bitmapLength:null!==(Fe=null===(we=null===(J=wt?.bits)||void 0===J?void 0:J.bitmap)||void 0===we?void 0:we.length)&&void 0!==Fe?Fe:0,padding:null!==(ht=null===(Le=wt?.bits)||void 0===Le?void 0:Le.padding)&&void 0!==ht?ht:0}),Vt}(_,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:g=0}=r;let _,I;try{_=va(u).toUint8Array()}catch(D){if(D instanceof Hb)return qs("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{I=new W0(_,l,g)}catch(D){return qs(D instanceof Nm?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===I.It?1:s!==t-this.oe(e.targetId,I)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),g=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const g=this.se(l);if(g){if(u.current&&Ca(g.target)){const _=new at(g.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,hr.newNoDocument(_,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=un();this.zt.forEach((u,l)=>{let g=!0;l.forEachWhile(_=>{const I=this.se(_);return!I||"TargetPurposeLimboResolution"===I.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new Rm(e,t,this.Wt,this.jt,r);return this.jt=fs(),this.zt=BM(),this.Wt=new _r(Jt),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new VM,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new or(Jt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new VM),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function BM(){return new _r(at.comparator)}function jM(){return new _r(at.comparator)}const P2={asc:"ASCENDING",desc:"DESCENDING"},$M={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N2={and:"AND",or:"OR"};class i{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function o(n,e){return n.useProto3Json||id(e)?e:{value:e}}function a(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function h(n,e){return a(n,e.toTimestamp())}function f(n){return Tt(!!n),St.fromTimestamp(function(e){const t=_a(e);return new yr(t.seconds,t.nanos)}(n))}function y(n,e){return(t=n,new Rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function v(n){const e=Rn.fromString(n);return Tt(k2(e)),e}function C(n,e){return y(n.databaseId,e.path)}function b(n,e){const t=v(e);if(t.get(1)!==n.databaseId.projectId)throw new $e(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $e(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new at(ie(t))}function A(n,e){return y(n.databaseId,e)}function L(n){const e=v(n);return 4===e.length?Rn.emptyPath():ie(e)}function W(n){return new Rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ie(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Ne(n,e,t){return{name:C(n,e),fields:t.value.mapValue.fields}}function We(n,e,t){const r=b(n,e.name),s=f(e.updateTime),u=e.createTime?f(e.createTime):St.min(),l=new $i({mapValue:{fields:e.fields}}),g=hr.newFoundDocument(r,s,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function Ue(n,e){let t;if(e instanceof Tc)t={update:Ne(n,e.key,e.value)};else if(e instanceof fd)t={delete:C(n,e.key)};else if(e instanceof Da)t={update:Ne(n,e.key,e.data),updateMask:YF(e.fieldMask)};else{if(!(e instanceof Sf))return vt();t={verify:C(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Ic)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Cu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof bc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Dc)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw vt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:h(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:vt()),t;var s}function Zt(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Cr.updateTime(f(s.updateTime)):void 0!==s.exists?Cr.exists(s.exists):Cr.none():Cr.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let g=null;"setToServerValue"in l?(Tt("REQUEST_TIME"===l.setToServerValue),g=new Ic):"appendMissingElements"in l?g=new Cu(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new bc(l.removeAllFromArray.values||[]):"increment"in l?g=new Dc(u,l.increment):vt();const _=kr.fromServerFormat(l.fieldPath);return new hd(_,g)}(n,s)):[];var s;if(e.update){const s=b(n,e.update.name),u=new $i({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ki((e.updateMask.fieldPaths||[]).map(I=>kr.fromServerFormat(I)));return new Da(s,u,l,t,r)}return new Tc(s,u,t,r)}if(e.delete){const s=b(n,e.delete);return new fd(s,t)}if(e.verify){const s=b(n,e.verify);return new Sf(s,t)}return vt()}function Qn(n,e){return{documents:[A(n,e.path)]}}function Hi(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=A(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=A(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return R2(qn.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(I=>{return{field:gd((D=I).field),direction:HM(D.dir)};var D})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=o(n,e.limit);var g,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function qo(n){let e=L(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Tt(1===r);const D=t.from[0];D.allDescendants?s=D.collectionId:e=e.child(D.collectionId)}let u=[];t.where&&(u=function(D){const S=Fm(D);return S instanceof qn&&Zb(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new ud(Lm((S=D).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let g=null;t.limit&&(g=function(D){let S;return S="object"==typeof D?D.value:D,id(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new wa((D=t.startAt).values||[],!!D.before));let I=null;return t.endAt&&(I=function(D){return new wa(D.values||[],!D.before)}(t.endAt)),rD(e,s,l,u,g,"F",_,I)}function Fm(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Lm(e.unaryFilter.field);return Mn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Lm(e.unaryFilter.field);return Mn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Lm(e.unaryFilter.field);return Mn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Lm(e.unaryFilter.field);return Mn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(n):void 0!==n.fieldFilter?Mn.create(Lm((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return qn.create(e.compositeFilter.filters.map(t=>Fm(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return vt()}}(e.compositeFilter.op))}(n):vt();var e}function HM(n){return P2[n]}function GM(n){return $M[n]}function KF(n){return N2[n]}function gd(n){return{fieldPath:n.canonicalString()}}function Lm(n){return kr.fromServerFormat(n.fieldPath)}function R2(n){return n instanceof Mn?function(e){if("=="===e.op){if(zb(e.value))return{unaryFilter:{field:gd(e.field),op:"IS_NAN"}};if(Gb(e.value))return{unaryFilter:{field:gd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zb(e.value))return{unaryFilter:{field:gd(e.field),op:"IS_NOT_NAN"}};if(Gb(e.value))return{unaryFilter:{field:gd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gd(e.field),op:GM(e.op),value:e.value}}}(n):n instanceof qn?function(e){const t=e.getFilters().map(r=>R2(r));return 1===t.length?t[0]:{compositeFilter:{op:KF(e.op),filters:t}}}(n):vt()}function YF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function k2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ac{constructor(e,t,r,s,u=St.min(),l=St.min(),g=vi.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new Ac(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ac(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ac(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ac(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class F2{constructor(e){this.fe=e}}function L2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:C(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:a(s,u.version.toTimestamp()),createTime:a(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Mf(e.version)};else{if(!e.isUnknownDocument())return vt();r.unknownDocument={path:t.path.toArray(),version:Mf(e.version)}}var s,u;return r}function gD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Mf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xf(n){const e=new yr(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function Of(n,e){const t=(e.baseMutations||[]).map(u=>Zt(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>Zt(n.fe,u)),s=yr.fromMillis(e.localWriteTimeMs);return new xm(e.batchId,s,t,r)}function Y0(n){const e=xf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?xf(n.lastLimboFreeSnapshotVersion):St.min();let r;var s;return void 0!==n.query.documents?(Tt(1===(s=n.query).documents.length),r=hs(Df(L(s.documents[0])))):r=hs(qo(n.query)),new Ac(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,vi.fromBase64String(n.resumeToken))}function U2(n,e){const t=Mf(e.snapshotVersion),r=Mf(e.lastLimboFreeSnapshotVersion);let s;s=Ca(e.target)?Qn(n.fe,e.target):Hi(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function zM(n){const e=qo({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Im(e,e.limit,"L"):e}function qM(n,e){return new G0(e.largestBatchId,Zt(n.fe,e.overlayMutation))}function V2(n,e){const t=e.path.lastSegment();return[n,Ni(e.path.popLast()),t]}function B2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Mf(r.readTime),documentKey:Ni(r.documentKey.path),largestBatchId:r.largestBatchId}}class JF{getBundleMetadata(e,t){return j2(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:xf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return j2(e).put({bundleId:(r=t).id,createTime:Mf(f(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return $2(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:zM(s.bundledQuery),readTime:xf(s.readTime)};var s})}saveNamedQuery(e,t){return $2(e).put({name:(r=t).name,readTime:Mf(f(r.readTime)),bundledQuery:r.bundledQuery});var r}}function j2(n){return Ri(n,"bundles")}function $2(n){return Ri(n,"namedQueries")}class mD{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new mD(e,t.uid||"")}getOverlay(e,t){return Q0(e).get(V2(this.userId,t)).next(r=>r?qM(this.serializer,r):null)}getOverlays(e,t){const r=po();return le.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const g=new G0(t,l);s.push(this.we(e,g))}),le.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(Ni(l.getCollectionPath())));const u=[];return s.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Q0(e).J("collectionPathOverlayIndex",g))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const s=po(),u=Ni(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Q0(e).j("collectionPathOverlayIndex",l).next(g=>{for(const _ of g){const I=qM(this.serializer,_);s.set(I.getKey(),I)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=po();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Q0(e).X({index:"collectionGroupOverlayIndex",range:g},(_,I,D)=>{const S=qM(this.serializer,I);u.size()<s||S.largestBatchId===l?(u.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>u)}we(e,t){return Q0(e).put(function(r,s,u){const[l,g,_]=V2(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ue(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Q0(n){return Ri(n,"documentOverlays")}class Pf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Fr(e.integerValue));else if("doubleValue"in e){const r=Fr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Ho(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(va(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?wm(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):vt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),at.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function XF(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function H2(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=XF(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Pf.Ve=new Pf;class eL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=H2(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=H2(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class tL{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class nL{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class J0{constructor(){this.je=new eL,this.ze=new tL(this.je),this.We=new nL(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Nf{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Nf(this.indexId,this.documentKey,this.arrayValue,r)}}function md(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=G2(n.arrayValue,e.arrayValue),0!==t?t:(t=G2(n.directionalValue,e.directionalValue),0!==t?t:at.comparator(n.documentKey,e.documentKey)))}function G2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class rL{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Tt(e.collectionGroup===this.collectionId);const t=Pi(e);if(void 0!==t&&!this.en(t))return!1;const r=Zs(e);let s=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const g=r[u];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[l++],g))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function z2(n){var e,t;if(Tt(n instanceof Mn||n instanceof qn),n instanceof Mn){if(n instanceof CM){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Mn.create(n.field,"==",u)))||[];return qn.create(s,"or")}return n}const r=n.filters.map(s=>z2(s));return qn.create(r,n.op)}function iL(n){if(0===n.getFilters().length)return[];const e=KM(z2(n));return Tt(q2(e)),ZM(e)||WM(e)?[e]:e.getFilters()}function ZM(n){return n instanceof Mn}function WM(n){return n instanceof qn&&Zb(n)}function q2(n){return ZM(n)||WM(n)||function(e){if(e instanceof qn&&T0(e)){for(const t of e.getFilters())if(!ZM(t)&&!WM(t))return!1;return!0}return!1}(n)}function KM(n){if(Tt(n instanceof Mn||n instanceof qn),n instanceof Mn)return n;if(1===n.filters.length)return KM(n.filters[0]);const e=n.filters.map(r=>KM(r));let t=qn.create(e,n.op);return t=yD(t),q2(t)?t:(Tt(t instanceof qn),Tt(vu(t)),Tt(t.filters.length>1),t.filters.reduce((r,s)=>YM(r,s)))}function YM(n,e){let t;return Tt(n instanceof Mn||n instanceof qn),Tt(e instanceof Mn||e instanceof qn),t=n instanceof Mn?e instanceof Mn?qn.create([n,e],"and"):Z2(n,e):e instanceof Mn?Z2(e,n):function(r,s){if(Tt(r.filters.length>0&&s.filters.length>0),vu(r)&&vu(s))return Kb(r,s.getFilters());const u=T0(r)?r:s,l=T0(r)?s:r,g=u.filters.map(_=>YM(_,l));return qn.create(g,"or")}(n,e),yD(t)}function Z2(n,e){if(vu(e))return Kb(e,n.getFilters());{const t=e.filters.map(r=>YM(n,r));return qn.create(t,"or")}}function yD(n){if(Tt(n instanceof Mn||n instanceof qn),n instanceof Mn)return n;const e=n.getFilters();if(1===e.length)return yD(e[0]);if(A0(n))return n;const t=e.map(s=>yD(s)),r=[];return t.forEach(s=>{s instanceof Mn?r.push(s):s instanceof qn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:qn.create(r,n.op)}class sL{constructor(){this.rn=new QM}addToCollectionParentIndex(e,t){return this.rn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Ws.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class QM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new or(Rn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new or(Rn.comparator)).toArray()}}const _D=new Uint8Array(0);class oL{constructor(e,t){this.user=e,this.databaseId=t,this.on=new QM,this.un=new ba(r=>wu(r),(r,s)=>cd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Ni(s)};return W2(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Db(t),""],!1,!0);return W2(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Go(l.parent))}return r})}addFieldIndex(e,t){const r=vD(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=ew(e);return u.next(g=>{l.put(B2(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=vD(e),s=ew(e),u=X0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=X0(e);let s=!0;const u=new Map;return le.forEach(this.cn(t),l=>this.an(e,l).next(g=>{s&&(s=!!g),u.set(l,g)})).next(()=>{if(s){let l=un();const g=[];return le.forEach(u,(_,I)=>{var D;ze("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(wt=>`${wt.fieldPath}:${wt.kind}`).join(",")}`} to execute ${wu(t)}`);const S=function(wt,jt){const cn=Pi(jt);if(void 0===cn)return null;for(const xn of Ec(wt,cn.fieldPath))switch(xn.op){case"array-contains-any":return xn.value.arrayValue.values||[];case"array-contains":return[xn.value]}return null}(I,_),$=function(wt,jt){const cn=new Map;for(const xn of Zs(jt))for(const is of Ec(wt,xn.fieldPath))switch(is.op){case"==":case"in":cn.set(xn.fieldPath.canonicalString(),is.value);break;case"not-in":case"!=":return cn.set(xn.fieldPath.canonicalString(),is.value),Array.from(cn.values())}return null}(I,_),J=function(wt,jt){const cn=[];let xn=!0;for(const is of Zs(jt)){const xd=0===is.kind?O0(wt,is.fieldPath,wt.startAt):P0(wt,is.fieldPath,wt.startAt);cn.push(xd.value),xn&&(xn=xd.inclusive)}return new wa(cn,xn)}(I,_),we=function(wt,jt){const cn=[];let xn=!0;for(const is of Zs(jt)){const xd=0===is.kind?P0(wt,is.fieldPath,wt.endAt):O0(wt,is.fieldPath,wt.endAt);cn.push(xd.value),xn&&(xn=xd.inclusive)}return new wa(cn,xn)}(I,_),Fe=this.hn(_,I,J),Le=this.hn(_,I,we),ht=this.ln(_,I,$),Vt=this.fn(_.indexId,S,Fe,J.inclusive,Le,we.inclusive,ht);return le.forEach(Vt,wt=>r.H(wt,t.limit).next(jt=>{jt.forEach(cn=>{const xn=at.fromSegments(cn.documentKey);l.has(xn)||(l=l.add(xn),g.push(xn))})}))}).next(()=>g)}return le.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:iL(qn.create(e.filters,"and")).map(r=>x0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),I=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const $=t?this.dn(t[S/I]):_D,J=this.wn(e,$,r[S%I],s),we=this._n(e,$,u[S%I],l),Fe=g.map(Le=>this.wn(e,$,Le,!0));D.push(...this.createRange(J,we,Fe))}return D}wn(e,t,r,s){const u=new Nf(e,at.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new Nf(e,at.empty(),t,r);return s?u.Je():u}an(e,t){const r=new rL(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const g of u)r.tn(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return le.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let _=new or(kr.comparator),I=!1;for(const D of g.filters)for(const S of D.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?I=!0:_=_.add(S.field));for(const D of g.orderBy)D.field.isKeyField()||(_=_.add(D.field));return _.size+(I?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new J0;for(const s of Zs(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);Pf.Ve._e(u,l)}return r.Qe()}dn(e){const t=new J0;return Pf.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new J0;return Pf.Ve._e(wc(this.databaseId,t),r.He(function(s){const u=Zs(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new J0);let u=0;for(const l of Zs(e)){const g=r[u++];for(const _ of s)if(this.yn(t,l.fieldPath)&&bf(g))s=this.pn(s,l,g);else{const I=_.He(l.kind);Pf.Ve._e(g,I)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of s){const _=new J0;_.seed(g.Qe()),Pf.Ve._e(l,_.He(t.kind)),u.push(_)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof Mn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=vD(e),s=ew(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return le.forEach(u,g=>s.get([g.indexId,this.uid]).next(_=>{l.push(function(I,D){const S=D?new hm(D.sequenceNumber,new Ws(xf(D.readTime),new at(Go(D.documentKey)),D.largestBatchId)):hm.empty(),$=I.fields.map(([J,we])=>new dm(kr.fromServerFormat(J),we));return new gf(I.indexId,I.collectionGroup,$,S)}(g,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Jt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=vD(e),u=ew(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>le.forEach(g,_=>u.put(B2(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?le.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),le.forEach(g,_=>this.En(e,s,_).next(I=>{const D=this.An(u,_);return I.isEqual(D)?le.resolve():this.vn(e,u,_,I,D)}))))})}Rn(e,t,r,s){return X0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return X0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=X0(e);let u=new or(md);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,g)=>{u=u.add(new Nf(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}An(e,t){let r=new or(md);const s=this.mn(t,e);if(null==s)return r;const u=Pi(t);if(null!=u){const l=e.data.field(u.fieldPath);if(bf(l))for(const g of l.arrayValue.values||[])r=r.add(new Nf(t.indexId,e.key,this.dn(g),s))}else r=r.add(new Nf(t.indexId,e.key,_D,s));return r}vn(e,t,r,s,u){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,_,I,D,S){const $=g.getIterator(),J=_.getIterator();let we=sd($),Fe=sd(J);for(;we||Fe;){let Le=!1,ht=!1;if(we&&Fe){const Vt=I(we,Fe);Vt<0?ht=!0:Vt>0&&(Le=!0)}else null!=we?ht=!0:Le=!0;Le?(D(Fe),Fe=sd(J)):ht?(S(we),we=sd($)):(we=sd($),Fe=sd(J))}}(s,u,md,g=>{l.push(this.Rn(e,t,r,g))},g=>{l.push(this.Pn(e,t,r,g))}),le.waitFor(l)}Tn(e){let t=1;return ew(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>md(l,g)).filter((l,g,_)=>!g||0!==md(l,_[g-1]));const s=[];s.push(e);for(const l of r){const g=md(l,e),_=md(l,t);if(0===g)s[0]=e.Je();else if(g>0&&_<0)s.push(l),s.push(l.Je());else if(_>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,_D,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,_D,[]]))}return u}bn(e,t){return md(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(K2)}getMinOffset(e,t){return le.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||vt())).next(K2)}}function W2(n){return Ri(n,"collectionParents")}function X0(n){return Ri(n,"indexEntries")}function vD(n){return Ri(n,"indexConfiguration")}function ew(n){return Ri(n,"indexState")}function K2(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Ab(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Ws(e.readTime,e.documentKey,t)}const Y2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ps{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ps(e,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Q2(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.X({range:l},(D,S,$)=>(g++,$.delete()));u.push(_.next(()=>{Tt(1===g)}));const I=[];for(const D of t.mutations){const S=Ob(e,D.key.path,t.batchId);u.push(s.delete(S)),I.push(D.key)}return le.waitFor(u).next(()=>I)}function wD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw vt();e=n.noDocument}return JSON.stringify(e).length}ps.DEFAULT_COLLECTION_PERCENTILE=10,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ps.DEFAULT=new ps(41943040,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ps.DISABLED=new ps(-1,0,0);class ED{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new ED(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yd(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Um(e),l=yd(e);return l.add({}).next(g=>{Tt("number"==typeof g);const _=new xm(g,t,r,s),I=function($,J,we){const Fe=we.baseMutations.map(ht=>Ue($.fe,ht)),Le=we.mutations.map(ht=>Ue($.fe,ht));return{userId:J,batchId:we.batchId,localWriteTimeMs:we.localWriteTime.toMillis(),baseMutations:Fe,mutations:Le}}(this.serializer,this.userId,_),D=[];let S=new or(($,J)=>Jt($.canonicalString(),J.canonicalString()));for(const $ of s){const J=Ob(this.userId,$.key.path,g);S=S.add($.key.path.popLast()),D.push(l.put(I)),D.push(u.put(J,lM))}return S.forEach($=>{D.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.Vn[g]=_.keys()}),le.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return yd(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Of(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?le.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return yd(e).X({index:"userMutationsIndex",range:s},(l,g,_)=>{g.userId===this.userId&&(Tt(g.batchId>=r),u=Of(this.serializer,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yd(e).j("userMutationsIndex",t).next(r=>r.map(s=>Of(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=pm(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Um(e).X({range:s},(l,g,_)=>{const[I,D,S]=l,$=Go(D);if(I===this.userId&&t.path.isEqual($))return yd(e).get(S).next(J=>{if(!J)throw vt();Tt(J.userId===this.userId),u.push(Of(this.serializer,J))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or(Jt);const s=[];return t.forEach(u=>{const l=pm(this.userId,u.path),g=IDBKeyRange.lowerBound(l),_=Um(e).X({range:g},(I,D,S)=>{const[$,J,we]=I,Fe=Go(J);$===this.userId&&u.path.isEqual(Fe)?r=r.add(we):S.done()});s.push(_)}),le.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=pm(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new or(Jt);return Um(e).X({range:l},(_,I,D)=>{const[S,$,J]=_,we=Go($);S===this.userId&&r.isPrefixOf(we)?we.length===s&&(g=g.add(J)):D.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(yd(e).get(u).next(l=>{if(null===l)throw vt();Tt(l.userId===this.userId),r.push(Of(this.serializer,l))}))}),le.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return Q2(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),le.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Um(e).X({range:r},(u,l,g)=>{if(u[0]===this.userId){const _=Go(u[1]);s.push(_)}else g.done()}).next(()=>{Tt(0===s.length)})})}containsKey(e,t){return J2(e,this.userId,t)}xn(e){return X2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function J2(n,e,t){const r=pm(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Um(n).X({range:u,Y:!0},(g,_,I)=>{const[D,S,$]=g;D===e&&S===s&&(l=!0),I.done()}).next(()=>l)}function yd(n){return Ri(n,"mutations")}function Um(n){return Ri(n,"documentMutations")}function X2(n){return Ri(n,"mutationQueues")}class Rf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Rf(0)}static Mn(){return new Rf(-1)}}class aL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Rf(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>St.fromTimestamp(new yr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Vm(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Vm(e).X((l,g)=>{const _=Y0(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>le.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Vm(e).X((r,s)=>{const u=Y0(s);t(u)})}$n(e){return eN(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}On(e,t){return eN(e).put("targetGlobalKey",t)}Fn(e,t){return Vm(e).put(U2(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=wu(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Vm(e).X({range:s,index:"queryTargetsIndex"},(l,g,_)=>{const I=Y0(g);cd(t,I.target)&&(u=I,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=_d(e);return t.forEach(l=>{const g=Ni(l.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,l))}),le.waitFor(s)}removeMatchingKeys(e,t,r){const s=_d(e);return le.forEach(t,u=>{const l=Ni(u.path);return le.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=_d(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=_d(e);let u=un();return s.X({range:r,Y:!0},(l,g,_)=>{const I=Go(l[1]),D=new at(I);u=u.add(D)}).next(()=>u)}containsKey(e,t){const r=Ni(t.path),s=IDBKeyRange.bound([r],[Db(r)],!1,!0);let u=0;return _d(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,g],_,I)=>{0!==l&&(u++,I.done())}).next(()=>u>0)}le(e,t){return Vm(e).get(t).next(r=>r?Y0(r):null)}}function Vm(n){return Ri(n,"targets")}function eN(n){return Ri(n,"targetGlobal")}function _d(n){return Ri(n,"targetDocuments")}function tN([n,e],[t,r]){const s=Jt(n,t);return 0===s?Jt(e,r):s}class uL{constructor(e){this.Ln=e,this.buffer=new or(tN),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,fe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){$o(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield gu(r)}yield t.Qn(3e5)}))}}class cL{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Ms.ct);const r=new uL(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Y2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y2):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,g,_,I;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),s=this.params.maximumSequenceNumbersToCollect):s=S,l=Date.now(),this.nthSequenceNumber(e,s))).next(S=>(r=S,g=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(I=Date.now(),u0()<=Ts.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${s} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${S} documents in `+(I-_)+`ms\nTotal Duration: ${I-D}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:S})))}}class lL{constructor(e,t){this.db=e,this.garbageCollector=function rN(n,e){return new cL(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return CD(e,r)}removeReference(e,t,r){return CD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return CD(e,t)}Xn(e,t){return function(r,s){let u=!1;return X2(r).Z(l=>J2(r,l,s).next(g=>(g&&(u=!0),le.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,g)=>{if(g<=t){const _=this.Xn(e,l).next(I=>{if(!I)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,St.min()),_d(e).delete([0,Ni(l.path)])))});s.push(_)}}).next(()=>le.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return CD(e,t)}Yn(e,t){const r=_d(e);let s,u=Ms.ct;return r.X({index:"documentTargetsIndex"},([l,g],{path:_,sequenceNumber:I})=>{0===l?(u!==Ms.ct&&t(new at(Go(s)),u),u=I,s=_):u=Ms.ct}).next(()=>{u!==Ms.ct&&t(new at(Go(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function CD(n,e){return _d(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ni(e.path),sequenceNumber:r}));var r}class iN{constructor(){this.changes=new ba(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return kf(e).put(r)}removeEntry(e,t,r){return kf(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],gD(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=hr.newInvalidDocument(t);return kf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(tw(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:hr.newInvalidDocument(t)};return kf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(tw(t))},(s,u)=>{r={document:this.ts(t,u),size:wD(u)}}).next(()=>r)}getEntries(e,t){let r=fs();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=fs(),s=new _r(at.comparator);return this.ns(e,t,(u,l)=>{const g=this.ts(u,l);r=r.insert(u,g),s=s.insert(u,wD(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return le.resolve();let s=new or(uN);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(tw(s.first()),tw(s.last())),l=s.getIterator();let g=l.getNext();return kf(e).X({index:"documentKeyIndex",range:u},(_,I,D)=>{const S=at.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;g&&uN(g,S)<0;)r(g,null),g=l.getNext();g&&g.isEqual(S)&&(r(g,I),g=l.hasNext()?l.getNext():null),g?D.G(tw(g)):D.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),gD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return kf(e).j(IDBKeyRange.bound(l,g,!0)).next(_=>{let I=fs();for(const D of _){const S=this.ts(at.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);S.isFoundDocument()&&(bm(t,S)||s.has(S.key))&&(I=I.insert(S.key,S))}return I})}getAllFromCollectionGroup(e,t,r,s){let u=fs();const l=aN(t,r),g=aN(t,Ws.max());return kf(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(_,I,D)=>{const S=this.ts(at.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(S.key,S),u.size===s&&D.done()}).next(()=>u)}newChangeBuffer(e){return new hL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oN(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Zn(e,t){return oN(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function QF(n,e){let t;if(e.document)t=We(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=at.fromSegments(e.noDocument.path),s=xf(e.noDocument.readTime);t=hr.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return vt();{const r=at.fromSegments(e.unknownDocument.path),s=xf(e.unknownDocument.version);t=hr.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new yr(r[0],r[1]);return St.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return hr.newInvalidDocument(e)}}function sN(n){return new dL(n)}class hL extends iN{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ba(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new or((u,l)=>Jt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.us.get(u);if(t.push(this.os.removeEntry(e,u,g.readTime)),l.isValidDocument()){const _=L2(this.os.serializer,l);s=s.add(u.path.popLast());const I=wD(_);r+=I-g.size,t.push(this.os.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=L2(this.os.serializer,l.convertToNoDocument(St.min()));t.push(this.os.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function oN(n){return Ri(n,"remoteDocumentGlobal")}function kf(n){return Ri(n,"remoteDocumentsV14")}function tw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aN(n,e){const t=e.documentKey.path.toArray();return[n,gD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function uN(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Jt(t[u],r[u]),s)return s;return s=Jt(t.length,r.length),s||(s=Jt(t[t.length-2],r[r.length-2]),s||Jt(t[t.length-1],r[r.length-1]))}class fL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cN{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&Af(r.mutation,s,ki.empty(),yr.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,un()).next(()=>r))}getLocalViewOfDocuments(e,t,r=un()){const s=po();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=dd();return u.forEach((g,_)=>{l=l.insert(g,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=po();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,un()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,s){let u=fs();const l=Cc(),g=Cc();return t.forEach((_,I)=>{const D=r.get(I.key);s.has(I.key)&&(void 0===D||D.mutation instanceof Da)?u=u.insert(I.key,I):void 0!==D?(l.set(I.key,D.mutation.getFieldMask()),Af(D.mutation,I,D.mutation.getFieldMask(),yr.now())):l.set(I.key,ki.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((I,D)=>l.set(I,D)),t.forEach((I,D)=>{var S;return g.set(I,new fL(D,null!==(S=l.get(I))&&void 0!==S?S:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Cc();let s=new _r((l,g)=>l-g),u=un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(_=>{const I=t.get(_);if(null===I)return;let D=r.get(_)||ki.empty();D=g.applyToLocalView(I,D),r.set(_,D);const S=(s.get(g.batchId)||un()).add(_);s=s.insert(g.batchId,S)})}).next(()=>{const l=[],g=s.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),I=_.key,D=_.value,S=Tm();D.forEach($=>{if(!u.has($)){const J=dD(t.get($),r.get($));null!==J&&S.set($,J),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,I,S))}return le.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return at.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):iD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):le.resolve(po());let g=-1,_=u;return l.next(I=>le.forEach(I,(D,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),u.get(D)?le.resolve():this.remoteDocumentCache.getEntry(e,D).next($=>{_=_.insert(D,$)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,_,I,un())).next(D=>({batchId:g,changes:Eu(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next(r=>{let s=dd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=dd();return this.indexManager.getCollectionParents(e,s).next(l=>le.forEach(l,g=>{const _=(I=t,D=g.child(s),new Ia(D,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,D;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(I=>{I.forEach((D,S)=>{u=u.insert(D,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((g,_)=>{const I=_.getKey();null===u.get(I)&&(u=u.insert(I,hr.newInvalidDocument(I)))});let l=dd();return u.forEach((g,_)=>{const I=s.get(g);void 0!==I&&Af(I.mutation,_,ki.empty(),yr.now()),bm(t,_)&&(l=l.insert(g,_))}),l})}}class pL{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return le.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:f(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:zM(r.bundledQuery),readTime:f(r.readTime)}),le.resolve();var r}}class gL{constructor(){this.overlays=new _r(at.comparator),this.ls=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=po();return le.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const s=po(),u=t.length+1,l=new at(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const _=g.getNext().value,I=_.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return le.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new _r((I,D)=>I-D);const l=this.overlays.getIterator();for(;l.hasNext();){const I=l.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let D=u.get(I.largestBatchId);null===D&&(D=po(),u=u.insert(I.largestBatchId,D)),D.set(I.getKey(),I)}}const g=po(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((I,D)=>g.set(I,D)),!(g.size()>=s)););return le.resolve(g)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new G0(t,r));let u=this.ls.get(t);void 0===u&&(u=un(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class JM{constructor(){this.fs=new or(Gi.ds),this.ws=new or(Gi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Gi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Gi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new at(new Rn([])),r=new Gi(t,e),s=new Gi(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new at(new Rn([])),r=new Gi(t,e),s=new Gi(t,e+1);let u=un();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Gi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Gi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return at.comparator(e.key,t.key)||Jt(e.As,t.As)}static _s(e,t){return Jt(e.As,t.As)||at.comparator(e.key,t.key)}}class mL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new or(Gi.ds)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new xm(u,t,r,s);this.mutationQueue.push(l);for(const g of s)this.Rs=this.Rs.add(new Gi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return le.resolve(l)}lookupMutationBatch(e,t){return le.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gi(t,0),s=new Gi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const g=this.Ps(l.As);u.push(g)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or(Jt);return t.forEach(s=>{const u=new Gi(s,0),l=new Gi(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],g=>{r=r.add(g.As)})}),le.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;at.isDocumentKey(u)||(u=u.child(""));const l=new Gi(new at(u),0);let g=new or(Jt);return this.Rs.forEachWhile(_=>{const I=_.key.path;return!!r.isPrefixOf(I)&&(I.length===s&&(g=g.add(_.As)),!0)},l),le.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Tt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return le.forEach(t.mutations,s=>{const u=new Gi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Gi(t,0),s=this.Rs.firstAfterOrEqual(r);return le.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return le.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yL{constructor(e){this.Ds=e,this.docs=new _r(at.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(t))}getEntries(e,t){let r=fs();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():hr.newInvalidDocument(s))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=fs();const l=t.path,g=new at(l.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:I,value:{document:D}}=_.getNext();if(!l.isPrefixOf(I.path))break;I.path.length>l.length+1||Ab(fm(D),r)<=0||(s.has(D.key)||bm(t,D))&&(u=u.insert(D.key,D.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,t,r,s){vt()}Cs(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _L(this)}getSize(e){return le.resolve(this.size)}}class _L extends iN{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class vL{constructor(e){this.persistence=e,this.xs=new ba(t=>wu(t),cd),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Ns=0,this.ks=new JM,this.targetCount=0,this.Ms=Rf.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),le.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Rf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Fn(t),le.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),le.waitFor(u).next(()=>s)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.ks.containsKey(t))}}class XM{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ms(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new vL(this),this.indexManager=new sL,this.remoteDocumentCache=new yL(r=>this.referenceDelegate.Ls(r)),this.serializer=new F2(t),this.qs=new pL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new mL(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const s=new wL(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return le.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class wL extends rd{constructor(e){super(),this.currentSequenceNumber=e}}class ID{constructor(e){this.persistence=e,this.Qs=new JM,this.js=null}static zs(e){return new ID(e)}get Ws(){if(this.js)return this.js;throw vt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ws,r=>{const s=at.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,St.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return le.or([()=>le.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class EL{constructor(e){this.serializer=e}O(e,t,r,s){const u=new yf("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cM,{unique:!0}),g.createObjectStore("documentMutations"),lN(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=le.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),lN(e)),l=l.next(()=>function(g){const _=g.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",I)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store("mutations").j().next(I=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cM,{unique:!0});const D=_.store("mutations"),S=I.map($=>D.put($));return le.waitFor(S)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:Vb});_.createIndex("collectionPathOverlayIndex",Bb,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",gM,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:Pb});_.createIndex("documentKeyIndex",Nb),_.createIndex("collectionGroupIndex",dM)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:Fb}).createIndex("sequenceNumberIndex",pM,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:Lb}).createIndex("documentKeyIndex",Ub,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=wD(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>le.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(g=>le.forEach(g,_=>{Tt(_.userId===u.userId);const I=Of(this.serializer,_);return Q2(e,u.userId,I).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,g)=>{const _=new Rn(l),I=[0,Ni(_)];u.push(t.get(I).next(D=>D?le.resolve():t.put({targetId:0,path:Ni(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:fM});const r=t.store("collectionParents"),s=new QM,u=l=>{if(s.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:Ni(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,g)=>{const _=new Rn(l);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,g,_],I)=>{const D=Go(g);return u(D.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=Y0(s),l=U2(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const g=t.store("remoteDocumentsV14"),_=(I=l,I.document?new at(Rn.fromString(I.document.name).popFirst(5)):I.noDocument?at.fromSegments(I.noDocument.path):I.unknownDocument?at.fromSegments(I.unknownDocument.path):vt()).path.toArray();var I;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(g.put(D))}).next(()=>le.waitFor(s))}si(e,t){const r=t.store("mutations"),s=sN(this.serializer),u=new XM(ID.zs,this.serializer.fe);return r.j().next(l=>{const g=new Map;return l.forEach(_=>{var I;let D=null!==(I=g.get(_.userId))&&void 0!==I?I:un();Of(this.serializer,_).keys().forEach(S=>D=D.add(S)),g.set(_.userId,D)}),le.forEach(g,(_,I)=>{const D=new yi(I),S=mD.de(this.serializer,D),$=u.getIndexManager(D),J=ED.de(D,this.serializer,$,u.referenceDelegate);return new cN(s,J,S,$).recalculateAndSaveOverlaysForDocumentKeys(new $b(t,Ms.ct),_).next()})})}}function lN(n){n.createObjectStore("targetDocuments",{keyPath:kb}).createIndex("documentTargetsIndex",hM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rb,{unique:!0}),n.createObjectStore("targetGlobal")}const ex="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tx{constructor(e,t,r,s,u,l,g,_,I,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=g,this.ri=I,this.oi=D,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=$=>Promise.resolve(),!tx.D())throw new $e(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lL(this,s),this.di=t+"main",this.serializer=new F2(_),this.wi=new ho(this.di,this.ui,new EL(this.serializer)),this.Bs=new aL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sN(this.serializer),this.qs=new JF,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===D&&jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $e(_e.FAILED_PRECONDITION,ex);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ms(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,fe.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>DD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if($o(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return nw(e).get("owner").next(t=>le.resolve(this.Ri(t)))}Pi(e){return DD(e).delete(this.clientId)}bi(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Ri(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),g=u.filter(_=>-1===l.indexOf(_));return le.forEach(g,_=>s.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?le.resolve(!0):nw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new $e(_e.FAILED_PRECONDITION,ex);return!1}}return!(!this.networkEnabled||!this.inForeground)||DD(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new $b(t,Ms.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>DD(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return ED.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oL(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return mD.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){ze("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?T2:14===l?mM:13===l?m0:12===l?D2:11===l?jb:void vt();var l;let g;return this.wi.runTransaction(e,s,u,_=>(g=new $b(_,this.Os?this.Os.next():Ms.ct),"readwrite-primary"===t?this.Ti(g).next(I=>!!I||this.Ei(g)).next(I=>{if(!I)throw jr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new $e(_e.FAILED_PRECONDITION,oM);return r(g)}).next(I=>this.vi(g).next(()=>I)):this.Oi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Oi(e){return nw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new $e(_e.FAILED_PRECONDITION,ex)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nw(e).put("owner",t)}static D(){return ho.D()}Ai(e){const t=nw(e);return t.get("owner").next(r=>this.Ri(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(jr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Hn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){jr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nw(n){return Ri(n,"owner")}function DD(n){return Ri(n,"clientMetadata")}function nx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class rx{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=un(),s=un();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new rx(e,t.fromCache,r,s)}}class dN{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(N0(t))return le.resolve(null);let r=hs(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Im(t,null,"F"),r=hs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=un(...u);return this.Ui.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const I=this.ji(t,g);return this.zi(t,I,l,_.readTime)?this.Ki(e,Im(t,null,"F")):this.Wi(e,I,t,_)}))})))}Gi(e,t,r,s){return N0(t)||s.isEqual(St.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(u0()<=Ts.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oD(t)),this.Wi(e,l,t,p0(s,-1)))})}ji(e,t){let r=new or(bM(e));return t.forEach((s,u)=>{bm(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return u0()<=Ts.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",oD(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ws.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class CL{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new _r(Jt),this.Yi=new ba(u=>wu(u),cd),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cN(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function hN(n,e,t,r){return new CL(n,e,t,r)}function fN(n,e){return ix.apply(this,arguments)}function ix(){return ix=(0,fe.Z)(function*(n,e){const t=lt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let _=un();for(const I of s){l.push(I.batchId);for(const D of I.mutations)_=_.add(D.key)}for(const I of u){g.push(I.batchId);for(const D of I.mutations)_=_.add(D.key)}return t.localDocuments.getDocuments(r,_).next(I=>({er:I,removedBatchIds:l,addedBatchIds:g}))})})}),ix.apply(this,arguments)}function pN(n){const e=lt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function gN(n,e,t){let r=un(),s=un();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=fs();return t.forEach((g,_)=>{const I=u.get(g);_.isFoundDocument()!==I.isFoundDocument()&&(s=s.add(g)),_.isNoDocument()&&_.version.isEqual(St.min())?(e.removeEntry(g,_.readTime),l=l.insert(g,_)):!I.isValidDocument()||_.version.compareTo(I.version)>0||0===_.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(_),l=l.insert(g,_)):ze("LocalStore","Ignoring outdated watch update for ",g,". Current version:",I.version," Watch version:",_.version)}),{nr:l,sr:s}})}function DL(n,e){const t=lt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bm(n,e){const t=lt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,le.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new Ac(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function jm(n,e,t){return sx.apply(this,arguments)}function sx(){return sx=(0,fe.Z)(function*(n,e,t){const r=lt(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!$o(l))throw l;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),sx.apply(this,arguments)}function TD(n,e,t){const r=lt(n);let s=St.min(),u=un();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,I){const D=lt(g),S=D.Yi.get(I);return void 0!==S?le.resolve(D.Ji.get(S)):D.Bs.getTargetData(_,I)}(r,l,hs(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,g.targetId).next(_=>{u=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:St.min(),t?u:un())).next(g=>(_N(r,IM(e),g),{documents:g,ir:u})))}function mN(n,e){const t=lt(n),r=lt(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function yN(n,e){const t=lt(n),r=t.Xi.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,p0(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(_N(t,e,s),s))}function _N(n,e,t){let r=n.Xi.get(e)||St.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function ox(){return ox=(0,fe.Z)(function*(n,e,t,r){const s=lt(n);let u=un(),l=fs();for(const I of t){const D=e.rr(I.metadata.name);I.document&&(u=u.add(D));const S=e.ur(I);S.setReadTime(e.cr(I.metadata.readTime)),l=l.insert(D,S)}const g=s.Zi.newChangeBuffer({trackRemovals:!0}),_=yield Bm(s,(I=r,hs(Df(Rn.fromString(`__bundle__/docs/${I}`)))));var I;return s.persistence.runTransaction("Apply bundle documents","readwrite",I=>gN(I,g,l).next(D=>(g.apply(I),D)).next(D=>s.Bs.removeMatchingKeysForTargetId(I,_.targetId).next(()=>s.Bs.addMatchingKeys(I,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(I,D.nr,D.sr)).next(()=>D.nr)))}),ox.apply(this,arguments)}function AL(n,e){return ax.apply(this,arguments)}function ax(){return ax=(0,fe.Z)(function*(n,e,t=un()){const r=yield Bm(n,hs(zM(e.bundledQuery))),s=lt(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=f(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const g=r.withResumeToken(vi.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(g.targetId,g),s.Bs.updateTargetData(u,g).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),ax.apply(this,arguments)}function vN(n,e){return`firestore_clients_${n}_${e}`}function wN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ux(n,e){return`firestore_targets_${n}_${e}`}class AD{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new $e(s.error.code,s.error.message))),l?new AD(e,t,s.state,u):(jr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new $e(r.error.code,r.error.message))),u?new rw(e,r.state,s):(jr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class SD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=uD();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=xb(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new SD(e,u):(jr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cx{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cx(t.clientId,t.onlineState):(jr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lx{constructor(){this.activeTargetIds=uD()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dx{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new _r(Jt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=vN(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new lx),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(vN(e.persistenceKey,s));if(u){const l=SD.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ux(this.persistenceKey,e));if(r){const s=rw.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ux(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=Ms.ct;if(null!=u)try{const g=JSON.parse(u);Tt("number"==typeof g),l=g}catch(g){jr("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);s!==Ms.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new AD(this.currentUser,e,t,r),u=wN(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=wN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=ux(this.persistenceKey,e),u=new rw(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return SD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return AD.ar(new yi(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return rw.ar(s,t)}br(e){return cx.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],g=[];return u.forEach(_=>{s.has(_)||l.push(_)}),s.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Wr(l,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=uD();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class EN{constructor(){this.Hr=new lx,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new lx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class SL{Yr(e){}shutdown(){}}class CN{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let MD=null;function hx(){return null===MD?MD=268435456+Math.round(2147483648*Math.random()):MD++,"0x"+MD.toString(16)}const ML={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xL{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const gs="WebChannelConnection";class OL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=hx(),g=this.To(e,t);ze("RestConnection",`Sending RPC '${e}' ${l}:`,g,r);const _={};return this.Eo(_,s,u),this.Ao(e,g,_,r).then(I=>(ze("RestConnection",`Received RPC '${e}' ${l}: `,I),I),I=>{throw qs("RestConnection",`RPC '${e}' ${l} failed with error: `,I,"url: ",g,"request:",r),I})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+mc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${ML[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=hx();return new Promise((l,g)=>{const _=new nM;_.setWithCredentials(!0),_.listenOnce(eM.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case gc.NO_ERROR:const D=_.getResponseJson();ze(gs,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(D)),l(D);break;case gc.TIMEOUT:ze(gs,`RPC '${e}' ${u} timed out`),g(new $e(_e.DEADLINE_EXCEEDED,"Request time out"));break;case gc.HTTP_ERROR:const S=_.getStatus();if(ze(gs,`RPC '${e}' ${u} failed with status:`,S,"response text:",_.getResponseText()),S>0){let $=_.getResponseJson();Array.isArray($)&&($=$[0]);const J=$?.error;if(J&&J.status&&J.message){const we=function(Fe){const Le=Fe.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(Le)>=0?Le:_e.UNKNOWN}(J.status);g(new $e(we,J.message))}else g(new $e(_e.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new $e(_e.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{ze(gs,`RPC '${e}' ${u} completed.`)}});const I=JSON.stringify(s);ze(gs,`RPC '${e}' ${u} sending request:`,s),_.send(t,"POST",I,r,15)})}Ro(e,t,r){const s=hx(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=XS(),g=E2(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},I=this.longPollingOptions.timeoutSeconds;void 0!==I&&(_.longPollingTimeout=Math.round(1e3*I)),this.useFetchStreams&&(_.xmlHttpFactory=new cm({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const D=u.join("");ze(gs,`Creating RPC '${e}' stream ${s}: ${D}`,_);const S=l.createWebChannel(D,_);let $=!1,J=!1;const we=new xL({ro:Le=>{J?ze(gs,`Not sending because RPC '${e}' stream ${s} is closed:`,Le):($||(ze(gs,`Opening RPC '${e}' stream ${s} transport.`),S.open(),$=!0),ze(gs,`RPC '${e}' stream ${s} sending:`,Le),S.send(Le))},oo:()=>S.close()}),Fe=(Le,ht,Vt)=>{Le.listen(ht,wt=>{try{Vt(wt)}catch(jt){setTimeout(()=>{throw jt},0)}})};return Fe(S,ff.EventType.OPEN,()=>{J||ze(gs,`RPC '${e}' stream ${s} transport opened.`)}),Fe(S,ff.EventType.CLOSE,()=>{J||(J=!0,ze(gs,`RPC '${e}' stream ${s} transport closed`),we.wo())}),Fe(S,ff.EventType.ERROR,Le=>{J||(J=!0,qs(gs,`RPC '${e}' stream ${s} transport errored:`,Le),we.wo(new $e(_e.UNAVAILABLE,"The operation could not be completed")))}),Fe(S,ff.EventType.MESSAGE,Le=>{var ht;if(!J){const Vt=Le.data[0];Tt(!!Vt);const jt=Vt.error||(null===(ht=Vt[0])||void 0===ht?void 0:ht.error);if(jt){ze(gs,`RPC '${e}' stream ${s} received error:`,jt);const cn=jt.status;let xn=function(xd){const GF=Yr[xd];if(void 0!==GF)return FM(GF)}(cn),is=jt.message;void 0===xn&&(xn=_e.INTERNAL,is="Unknown error status: "+cn+" with message "+jt.message),J=!0,we.wo(new $e(xn,is)),S.close()}else ze(gs,`RPC '${e}' stream ${s} received:`,Vt),we._o(Vt)}}),Fe(g,tM.STAT_EVENT,Le=>{Le.stat===yb.PROXY?ze(gs,`RPC '${e}' stream ${s} detected buffering proxy`):Le.stat===yb.NOPROXY&&ze(gs,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{we.fo()},0),we}}function IN(){return typeof window<"u"?window:null}function xD(){return typeof document<"u"?document:null}function iw(n){return new i(n,!0)}class fx{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&ze("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class bN{constructor(e,t,r,s,u,l,g,_){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new fx(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,fe.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,fe.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new $e(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,fe.Z)(function*(){e.state=0,e.start()}))}tu(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PL extends bN{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Mt(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:vt(),s=e.targetChange.targetIds||[],u=function(_,I){return _.useProto3Json?(Tt(void 0===I||"string"==typeof I),vi.fromBase64String(I||"")):(Tt(void 0===I||I instanceof Uint8Array),vi.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const I=void 0===_.code?_e.UNKNOWN:FM(_.code);return new $e(I,_.message||"")}(l);t=new pD(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=b(n,r.document.name),u=f(r.document.updateTime),l=r.document.createTime?f(r.document.createTime):St.min(),g=new $i({mapValue:{fields:r.document.fields}}),_=hr.newFoundDocument(s,u,l,g);t=new K0(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=b(n,r.document),u=r.readTime?f(r.readTime):St.min(),l=hr.newNoDocument(s,u);t=new K0([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=b(n,r.document);t=new K0([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return vt();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new kM(s,u);t=new UM(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return St.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?St.min():u.readTime?f(u.readTime):St.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=W(this.serializer),t.addTarget=function(s,u){let l;const g=u.target;if(l=Ca(g)?{documents:Qn(s,g)}:{query:Hi(s,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=c(s,u.resumeToken);const _=o(s,u.expectedCount);null!==_&&(l.expectedCount=_)}else if(u.snapshotVersion.compareTo(St.min())>0){l.readTime=a(s,u.snapshotVersion.toTimestamp());const _=o(s,u.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function pd(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=W(this.serializer),t.removeTarget=e,this.Wo(t)}}class NL extends bN{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function bn(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,s){let u=f(r.updateTime?r.updateTime:s);return u.isEqual(St.min())&&(u=f(s)),new OM(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=f(e.commitTime);return this.listener.cu(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=W(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ue(this.serializer,r))};this.Wo(t)}}class RL extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new $e(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $e(_e.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new $e(_e.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class FL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(jr(t),this.mu=!1):ze("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class LL{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,fe.Z)(function*(){var _;vd(l)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,fe.Z)(function*(I){const D=lt(I);D.vu.add(4),yield $m(D),D.bu.set("Unknown"),D.vu.delete(4),yield sw(D)}),function(I){return _.apply(this,arguments)})(l))}))}),this.bu=new FL(r,s)}}function sw(n){return gx.apply(this,arguments)}function gx(){return gx=(0,fe.Z)(function*(n){if(vd(n))for(const e of n.Ru)yield e(!0)}),gx.apply(this,arguments)}function $m(n){return mx.apply(this,arguments)}function mx(){return mx=(0,fe.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),mx.apply(this,arguments)}function OD(n,e){const t=lt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),vx(t)?_x(t):Gm(t).Ko()&&yx(t,e))}function ow(n,e){const t=lt(n),r=Gm(t);t.Au.delete(e),r.Ko()&&DN(t,e),0===t.Au.size&&(r.Ko()?r.jo():vd(t)&&t.bu.set("Unknown"))}function yx(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(St.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gm(n).su(e)}function DN(n,e){n.Vu.qt(e),Gm(n).iu(e)}function _x(n){n.Vu=new O2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Gm(n).start(),n.bu.gu()}function vx(n){return vd(n)&&!Gm(n).Uo()&&n.Au.size>0}function vd(n){return 0===lt(n).vu.size}function TN(n){n.Vu=void 0}function UL(n){return wx.apply(this,arguments)}function wx(){return wx=(0,fe.Z)(function*(n){n.Au.forEach((e,t)=>{yx(n,e)})}),wx.apply(this,arguments)}function VL(n,e){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,fe.Z)(function*(n,e){TN(n),vx(n)?(n.bu.Iu(e),_x(n)):n.bu.set("Unknown")}),Ex.apply(this,arguments)}function BL(n,e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,fe.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof pD&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(s,u){const l=u.cause;for(const g of u.targetIds)s.Au.has(g)&&(yield s.remoteSyncer.rejectListen(g,l),s.Au.delete(g),s.Vu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield PD(n,r)}else if(e instanceof K0?n.Vu.Ht(e):e instanceof UM?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(St.min()))try{const r=yield pN(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const I=s.Au.get(_);I&&s.Au.set(_,I.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach((g,_)=>{const I=s.Au.get(g);if(!I)return;s.Au.set(g,I.withResumeToken(vi.EMPTY_BYTE_STRING,I.snapshotVersion)),DN(s,g);const D=new Ac(I.target,g,_,I.sequenceNumber);yx(s,D)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield PD(n,r)}var r}),Cx.apply(this,arguments)}function PD(n,e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,fe.Z)(function*(n,e,t){if(!$o(e))throw e;n.vu.add(1),yield $m(n),n.bu.set("Offline"),t||(t=()=>pN(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield sw(n)}))}),Ix.apply(this,arguments)}function AN(n,e){return e().catch(t=>PD(n,t,e))}function Hm(n){return bx.apply(this,arguments)}function bx(){return bx=(0,fe.Z)(function*(n){const e=lt(n),t=wd(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;jL(e);)try{const s=yield DL(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,$L(e,s)}catch(s){yield PD(e,s)}SN(e)&&MN(e)}),bx.apply(this,arguments)}function jL(n){return vd(n)&&n.Eu.length<10}function $L(n,e){n.Eu.push(e);const t=wd(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function SN(n){return vd(n)&&!wd(n).Uo()&&n.Eu.length>0}function MN(n){wd(n).start()}function HL(n){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,fe.Z)(function*(n){wd(n).hu()}),Dx.apply(this,arguments)}function GL(n){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,fe.Z)(function*(n){const e=wd(n);for(const t of n.Eu)e.uu(t.mutations)}),Tx.apply(this,arguments)}function zL(n,e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,fe.Z)(function*(n,e,t){const r=n.Eu.shift(),s=Om.from(r,e,t);yield AN(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Hm(n)}),Ax.apply(this,arguments)}function qL(n,e){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,fe.Z)(function*(n,e){var t;e&&wd(n).ou&&(yield(t=(0,fe.Z)(function*(r,s){if(z0(u=s.code)&&u!==_e.ABORTED){const l=r.Eu.shift();wd(r).Qo(),yield AN(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Hm(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),SN(n)&&MN(n)}),Sx.apply(this,arguments)}function xN(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,fe.Z)(function*(n,e){const t=lt(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=vd(t);t.vu.add(3),yield $m(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield sw(t)}),Mx.apply(this,arguments)}function xx(n,e){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,fe.Z)(function*(n,e){const t=lt(n);e?(t.vu.delete(2),yield sw(t)):e||(t.vu.add(2),yield $m(t),t.bu.set("Unknown"))}),Ox.apply(this,arguments)}function Gm(n){return n.Su||(n.Su=function(e,t,r){const s=lt(e);return s.fu(),new PL(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:UL.bind(null,n),ao:VL.bind(null,n),nu:BL.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Su.Qo(),vx(n)?_x(n):n.bu.set("Unknown")):(yield n.Su.stop(),TN(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function wd(n){return n.Du||(n.Du=function(e,t,r){const s=lt(e);return s.fu(),new NL(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:HL.bind(null,n),ao:qL.bind(null,n),au:GL.bind(null,n),cu:zL.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Du.Qo(),yield Hm(n)):(yield n.Du.stop(),n.Eu.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Px{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,g=new Px(e,t,l,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $e(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zm(n,e){if(jr("AsyncQueue",`${e}: ${n}`),$o(n))return new $e(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class qm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||at.comparator(t.key,r.key):(t,r)=>at.comparator(t.key,r.key),this.keyedMap=dd(),this.sortedSet=new _r(this.comparator)}static emptySet(e){return new qm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new qm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ON{constructor(){this.Cu=new _r(at.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):vt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Zm{constructor(e,t,r,s,u,l,g,_,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new Zm(e,t,qm.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class ZL{constructor(){this.Nu=void 0,this.listeners=[]}}class WL{constructor(){this.queries=new ba(e=>sD(e),Tf),this.onlineState="Unknown",this.ku=new Set}}function Nx(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,fe.Z)(function*(n,e){const t=lt(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new ZL),s)try{u.Nu=yield t.onListen(r)}catch(l){const g=zm(l,`Initialization of query '${oD(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&Lx(t)}),Rx.apply(this,arguments)}function kx(n,e){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,fe.Z)(function*(n,e){const t=lt(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),Fx.apply(this,arguments)}function KL(n,e){const t=lt(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const g of l.listeners)g.$u(s)&&(r=!0);l.Nu=s}}r&&Lx(t)}function YL(n,e,t){const r=lt(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function Lx(n){n.ku.forEach(e=>{e.next()})}class Ux{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Zm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Zm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class QL{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class PN{constructor(e){this.serializer=e}rr(e){return b(this.serializer,e)}ur(e){return e.metadata.exists?We(this.serializer,e.document,!1):hr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return f(e)}}class JL{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=NN(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Rn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new PN(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const g=(t.get(l)||un()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function TL(n,e,t,r){return ox.apply(this,arguments)}(e.localStore,new PN(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield AL(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function NN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class RN{constructor(e){this.key=e}}class kN{constructor(e){this.key=e}}class FN{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=un(),this.mutatedKeys=un(),this.tc=bM(e),this.ec=new qm(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new ON,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,g=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,I="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((D,S)=>{const $=s.get(D),J=bm(this.query,S)?S:null,we=!!$&&this.mutatedKeys.has($.key),Fe=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let Le=!1;$&&J?$.data.isEqual(J.data)?we!==Fe&&(r.track({type:3,doc:J}),Le=!0):this.rc($,J)||(r.track({type:2,doc:J}),Le=!0,(_&&this.tc(J,_)>0||I&&this.tc(J,I)<0)&&(g=!0)):!$&&J?(r.track({type:0,doc:J}),Le=!0):$&&!J&&(r.track({type:1,doc:$}),Le=!0,(_||I)&&(g=!0)),Le&&(J?(l=l.add(J),u=Fe?u.add(D):u.delete(D)):(l=l.delete(D),u=u.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),u=u.delete(D.key),r.track({type:1,doc:D})}return{ec:l,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((I,D)=>function(S,$){const J=we=>{switch(we){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return J(S)-J($)}(I.type,D.type)||this.tc(I.doc,D.doc)),this.oc(r);const l=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,_=g!==this.Xu;return this.Xu=g,0!==u.length||_?{snapshot:new Zm(this.query,e.ec,s,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new ON,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=un(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new kN(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new RN(r))}),t}hc(e){this.Yu=e.ir,this.Zu=un();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Zm.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class XL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class e4{constructor(e){this.key=e,this.fc=!1}}class t4{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new ba(g=>sD(g),Tf),this._c=new Map,this.mc=new Set,this.gc=new _r(at.comparator),this.yc=new Map,this.Ic=new JM,this.Tc={},this.Ec=new Map,this.Ac=Rf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function n4(n,e){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,fe.Z)(function*(n,e){const t=uO(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield Bm(t.localStore,hs(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield Bx(t,e,r,"current"===g,l.resumeToken),t.isPrimaryClient&&OD(t.remoteStore,l)}return s}),Vx.apply(this,arguments)}function Bx(n,e,t,r,s){return jx.apply(this,arguments)}function jx(){return jx=(0,fe.Z)(function*(n,e,t,r,s){n.Rc=(S,$,J)=>{return(we=(0,fe.Z)(function*(Fe,Le,ht,Vt){let wt=Le.view.sc(ht);wt.zi&&(wt=yield TD(Fe.localStore,Le.query,!1).then(({documents:xn})=>Le.view.sc(xn,wt)));const jt=Vt&&Vt.targetChanges.get(Le.targetId),cn=Le.view.applyChanges(wt,Fe.isPrimaryClient,jt);return Qx(Fe,Le.targetId,cn.cc),cn.snapshot}),function(Fe,Le,ht,Vt){return we.apply(this,arguments)})(n,S,$,J);var we};const u=yield TD(n.localStore,e,!0),l=new FN(e,u.ir),g=l.sc(u.documents),_=km.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),I=l.applyChanges(g,n.isPrimaryClient,_);Qx(n,t,I.cc);const D=new XL(e,t,l);return n.wc.set(e,D),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),I.snapshot}),jx.apply(this,arguments)}function r4(n,e){return $x.apply(this,arguments)}function $x(){return $x=(0,fe.Z)(function*(n,e){const t=lt(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!Tf(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield jm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ow(t.remoteStore,r.targetId),Wm(t,r.targetId)}).catch(gu))):(Wm(t,r.targetId),yield jm(t.localStore,r.targetId,!0))}),$x.apply(this,arguments)}function Hx(){return Hx=(0,fe.Z)(function*(n,e,t){const r=cO(n);try{const s=yield function(u,l){const g=lt(u),_=yr.now(),I=l.reduce(($,J)=>$.add(J.key),un());let D,S;return g.persistence.runTransaction("Locally write mutations","readwrite",$=>{let J=fs(),we=un();return g.Zi.getEntries($,I).next(Fe=>{J=Fe,J.forEach((Le,ht)=>{ht.isValidDocument()||(we=we.add(Le))})}).next(()=>g.localDocuments.getOverlayedDocuments($,J)).next(Fe=>{D=Fe;const Le=[];for(const ht of l){const Vt=NM(ht,D.get(ht.key).overlayedDocument);null!=Vt&&Le.push(new Da(ht.key,Vt,ts(Vt.value.mapValue),Cr.exists(!0)))}return g.mutationQueue.addMutationBatch($,_,Le,l)}).next(Fe=>{S=Fe;const Le=Fe.applyToLocalDocumentSet(D,we);return g.documentOverlayCache.saveOverlays($,Fe.batchId,Le)})}).then(()=>({batchId:S.batchId,changes:Eu(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,g){let _=u.Tc[u.currentUser.toKey()];_||(_=new _r(Jt)),_=_.insert(l,g),u.Tc[u.currentUser.toKey()]=_}(r,s.batchId,t),yield Sc(r,s.changes),yield Hm(r.remoteStore)}catch(s){const u=zm(s,"Failed to persist write");t.reject(u)}}),Hx.apply(this,arguments)}function LN(n,e){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,fe.Z)(function*(n,e){const t=lt(n);try{const r=yield function bL(n,e){const t=lt(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const g=[];e.targetChanges.forEach((D,S)=>{const $=s.get(S);if(!$)return;g.push(t.Bs.removeMatchingKeys(u,D.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(u,D.addedDocuments,S)));let J=$.withSequenceNumber(u.currentSequenceNumber);var we,Fe,Le;null!==e.targetMismatches.get(S)?J=J.withResumeToken(vi.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):D.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(D.resumeToken,r)),s=s.insert(S,J),Fe=J,Le=D,(0===(we=$).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-we.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,J))});let _=fs(),I=un();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,D))}),g.push(gN(u,l,e.documentUpdates).next(D=>{_=D.nr,I=D.sr})),!r.isEqual(St.min())){const D=t.Bs.getLastRemoteSnapshotVersion(u).next(S=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(D)}return le.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,I)).next(()=>_)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?Tt(l.fc):s.removedDocuments.size>0&&(Tt(l.fc),l.fc=!1))}),yield Sc(t,r,e)}catch(r){yield gu(r)}}),Gx.apply(this,arguments)}function UN(n,e,t){const r=lt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const g=l.view.Mu(e);g.snapshot&&s.push(g.snapshot)}),function(u,l){const g=lt(u);g.onlineState=l;let _=!1;g.queries.forEach((I,D)=>{for(const S of D.listeners)S.Mu(l)&&(_=!0)}),_&&Lx(g)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function s4(n,e,t){return zx.apply(this,arguments)}function zx(){return zx=(0,fe.Z)(function*(n,e,t){const r=lt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new _r(at.comparator);l=l.insert(u,hr.newNoDocument(u,St.min()));const g=un().add(u),_=new Rm(St.min(),new Map,new _r(Jt),l,g);yield LN(r,_),r.gc=r.gc.remove(u),r.yc.delete(e),Jx(r)}else yield jm(r.localStore,e,!1).then(()=>Wm(r,e,t)).catch(gu)}),zx.apply(this,arguments)}function o4(n,e){return qx.apply(this,arguments)}function qx(){return qx=(0,fe.Z)(function*(n,e){const t=lt(n),r=e.batch.batchId;try{const s=yield function IL(n,e){const t=lt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,g,_,I){const D=_.batch,S=D.keys();let $=le.resolve();return S.forEach(J=>{$=$.next(()=>I.getEntry(g,J)).next(we=>{const Fe=_.docVersions.get(J);Tt(null!==Fe),we.version.compareTo(Fe)<0&&(D.applyToRemoteDocument(we,_),we.isValidDocument()&&(we.setReadTime(_.commitVersion),I.addEntry(we)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(g,D))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=un();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(g=g.add(l.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);Yx(t,r,null),Kx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Sc(t,s)}catch(s){yield gu(s)}}),qx.apply(this,arguments)}function a4(n,e,t){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,fe.Z)(function*(n,e,t){const r=lt(n);try{const s=yield function(u,l){const g=lt(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return g.mutationQueue.lookupMutationBatch(_,l).next(D=>(Tt(null!==D),I=D.keys(),g.mutationQueue.removeMutationBatch(_,D))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,I,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>g.localDocuments.getDocuments(_,I))})}(r.localStore,e);Yx(r,e,t),Kx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Sc(r,s)}catch(s){yield gu(s)}}),Zx.apply(this,arguments)}function Wx(){return Wx=(0,fe.Z)(function*(n,e){const t=lt(n);vd(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=lt(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=zm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),Wx.apply(this,arguments)}function Kx(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Yx(n,e,t){const r=lt(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function Wm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||VN(n,r)})}function VN(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(ow(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Jx(n))}function Qx(n,e,t){for(const r of t)r instanceof RN?(n.Ic.addReference(r.key,e),c4(n,r)):r instanceof kN?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||VN(n,r.key)):vt()}function c4(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.mc.add(r),Jx(n))}function Jx(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new at(Rn.fromString(e)),r=n.Ac.next();n.yc.set(r,new e4(t)),n.gc=n.gc.insert(t,r),OD(n.remoteStore,new Ac(hs(Df(t.path)),r,"TargetPurposeLimboResolution",Ms.ct))}}function Sc(n,e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,fe.Z)(function*(n,e,t){const r=lt(n),s=[],u=[],l=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,_)=>{l.push(r.Rc(_,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,I?.fromCache?"not-current":"current"),I){s.push(I);const D=rx.Li(_.targetId,I);u.push(D)}}))}),yield Promise.all(l),r.dc.nu(s),yield(g=(0,fe.Z)(function*(_,I){const D=lt(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>le.forEach(I,$=>le.forEach($.Fi,J=>D.persistence.referenceDelegate.addReference(S,$.targetId,J)).next(()=>le.forEach($.Bi,J=>D.persistence.referenceDelegate.removeReference(S,$.targetId,J)))))}catch(S){if(!$o(S))throw S;ze("LocalStore","Failed to update sequence numbers: "+S)}for(const S of I){const $=S.targetId;if(!S.fromCache){const J=D.Ji.get($),Fe=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);D.Ji=D.Ji.insert($,Fe)}}}),function(_,I){return g.apply(this,arguments)})(r.localStore,u))}),Xx.apply(this,arguments)}function l4(n,e){return eO.apply(this,arguments)}function eO(){return eO=(0,fe.Z)(function*(n,e){const t=lt(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield fN(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(g=>{g.reject(new $e(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Sc(t,r.er)}var s}),eO.apply(this,arguments)}function d4(n,e){const t=lt(n),r=t.yc.get(e);if(r&&r.fc)return un().add(r.key);{let s=un();const u=t._c.get(e);if(!u)return s;for(const l of u){const g=t.wc.get(l);s=s.unionWith(g.view.nc)}return s}}function h4(n,e){return tO.apply(this,arguments)}function tO(){return tO=(0,fe.Z)(function*(n,e){const t=lt(n),r=yield TD(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&Qx(t,e.targetId,s.cc),s}),tO.apply(this,arguments)}function f4(n,e){return nO.apply(this,arguments)}function nO(){return nO=(0,fe.Z)(function*(n,e){const t=lt(n);return yN(t.localStore,e).then(r=>Sc(t,r))}),nO.apply(this,arguments)}function p4(n,e,t,r){return rO.apply(this,arguments)}function rO(){return rO=(0,fe.Z)(function*(n,e,t,r){const s=lt(n),u=yield function(l,g){const _=lt(l),I=lt(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>I.Sn(D,g).next(S=>S?_.localDocuments.getDocuments(D,S):le.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield Hm(s.remoteStore):"acknowledged"===t||"rejected"===t?(Yx(s,e,r||null),Kx(s,e),g=e,lt(lt(s.localStore).mutationQueue).Cn(g)):vt(),yield Sc(s,u)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),rO.apply(this,arguments)}function iO(){return iO=(0,fe.Z)(function*(n,e){const t=lt(n);if(uO(t),cO(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield BN(t,r.toArray());t.vc=!0,yield xx(t.remoteStore,!0);for(const u of s)OD(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(Wm(t,l),jm(t.localStore,l,!0))),ow(t.remoteStore,l)}),yield s,yield BN(t,r),function(u){const l=lt(u);l.yc.forEach((g,_)=>{ow(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new _r(at.comparator)}(t),t.vc=!1,yield xx(t.remoteStore,!1)}}),iO.apply(this,arguments)}function BN(n,e,t){return sO.apply(this,arguments)}function sO(){return sO=(0,fe.Z)(function*(n,e,t){const r=lt(n),s=[],u=[];for(const l of e){let g;const _=r._c.get(l);if(_&&0!==_.length){g=yield Bm(r.localStore,hs(_[0]));for(const I of _){const D=r.wc.get(I),S=yield h4(r,D);S.snapshot&&u.push(S.snapshot)}}else{const I=yield mN(r.localStore,l);g=yield Bm(r.localStore,I),yield Bx(r,jN(I),l,!1,g.resumeToken)}s.push(g)}return r.dc.nu(u),s}),sO.apply(this,arguments)}function jN(n){return rD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function m4(n){const e=lt(n);return lt(lt(e.localStore).persistence).$i()}function y4(n,e,t,r){return oO.apply(this,arguments)}function oO(){return oO=(0,fe.Z)(function*(n,e,t,r){const s=lt(n);if(s.vc)return void ze("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield yN(s.localStore,IM(u[0])),g=Rm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,vi.EMPTY_BYTE_STRING);yield Sc(s,l,g);break}case"rejected":yield jm(s.localStore,e,!0),Wm(s,e,r);break;default:vt()}}),oO.apply(this,arguments)}function _4(n,e,t){return aO.apply(this,arguments)}function aO(){return aO=(0,fe.Z)(function*(n,e,t){const r=uO(n);if(r.vc){for(const s of e){if(r._c.has(s)){ze("SyncEngine","Adding an already active target "+s);continue}const u=yield mN(r.localStore,s),l=yield Bm(r.localStore,u);yield Bx(r,jN(u),l.targetId,!1,l.resumeToken),OD(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield jm(r.localStore,s,!1).then(()=>{ow(r.remoteStore,s),Wm(r,s)}).catch(gu))}}),aO.apply(this,arguments)}function uO(n){const e=lt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=s4.bind(null,e),e.dc.nu=KL.bind(null,e.eventManager),e.dc.Pc=YL.bind(null,e.eventManager),e}function cO(n){const e=lt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a4.bind(null,e),e}class aw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.serializer=iw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return hN(this.persistence,new dN,e.initialUser,this.serializer)}createPersistence(e){return new XM(ID.zs,this.serializer)}createSharedClientState(e){return new EN}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lO extends aw{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield cO(r.Vc.syncEngine),yield Hm(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return hN(this.persistence,new dN,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new nN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Mb(t,this.persistence);return new b2(e.asyncQueue,r)}createPersistence(e){const t=nx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ps.withCacheSize(this.cacheSizeBytes):ps.DEFAULT;return new tx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,IN(),xD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new EN}}class $N extends lO{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof dx&&(r.sharedClientState.syncEngine={jr:p4.bind(null,s),zr:y4.bind(null,s),Wr:_4.bind(null,s),$i:m4.bind(null,s),Qr:f4.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,fe.Z)(function*(l){yield function g4(n,e){return iO.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=IN();if(!dx.D(t))throw new $e(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Km{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>UN(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=l4.bind(null,r.syncEngine),yield xx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new WL}createDatastore(e){const t=iw(e.databaseInfo.databaseId),r=new OL(e.databaseInfo);return new RL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>UN(this.syncEngine,g,0),l=CN.D()?new CN:new SL,new LL(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,g,_,I){const D=new t4(r,s,u,l,g,_);return I&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=lt(t);ze("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield $m(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function HN(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ND{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class E4{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ui,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new QL(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,fe.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class C4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new $e(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,fe.Z)(function*(u,l){const g=lt(u),_=W(g.serializer)+"/documents",I={documents:l.map(J=>C(g.serializer,J))},D=yield g.vo("BatchGetDocuments",_,I,l.length),S=new Map;D.forEach(J=>{const we=function dt(n,e){return"found"in e?function(t,r){Tt(!!r.found);const s=b(t,r.found.name),u=f(r.found.updateTime),l=r.found.createTime?f(r.found.createTime):St.min(),g=new $i({mapValue:{fields:r.found.fields}});return hr.newFoundDocument(s,u,l,g)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const s=b(t,r.missing),u=f(r.readTime);return hr.newNoDocument(s,u)}(n,e):vt()}(g.serializer,J);S.set(we.key.toString(),we)});const $=[];return l.forEach(J=>{const we=S.get(J.toString());Tt(!!we),$.push(we)}),$}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new fd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=at.fromPath(s);e.mutations.push(new Sf(u,e.precondition(u)))}),yield(r=(0,fe.Z)(function*(s,u){const l=lt(s),g=W(l.serializer)+"/documents",_={writes:u.map(I=>Ue(l.serializer,I))};yield l.Io("Commit",g,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw vt();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new $e(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(St.min())?Cr.exists(!1):Cr.updateTime(t):Cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new $e(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cr.updateTime(t)}return Cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class I4{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new fx(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,fe.Z)(function*(){const t=new C4(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!id(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!z0(t)}return!1}}class b4{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=yi.UNAUTHENTICATED,this.clientId=f0.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,fe.Z)(function*(g){ze("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $e(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=zm(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function RD(n,e){return dO.apply(this,arguments)}function dO(){return dO=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,fe.Z)(function*(u){r.isEqual(u)||(yield fN(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),dO.apply(this,arguments)}function hO(n,e){return fO.apply(this,arguments)}function fO(){return fO=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield pO(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>xN(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>xN(e.remoteStore,u)),n._onlineComponents=e}),fO.apply(this,arguments)}function GN(n){return"FirebaseError"===n.name?n.code===_e.FAILED_PRECONDITION||n.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function pO(n){return gO.apply(this,arguments)}function gO(){return gO=(0,fe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ze("FirestoreClient","Using user provided OfflineComponentProvider");try{yield RD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!GN(t))throw t;qs("Error using user provided cache. Falling back to memory cache: "+t),yield RD(n,new aw)}}else ze("FirestoreClient","Using default OfflineComponentProvider"),yield RD(n,new aw);return n._offlineComponents}),gO.apply(this,arguments)}function kD(n){return mO.apply(this,arguments)}function mO(){return mO=(0,fe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ze("FirestoreClient","Using user provided OnlineComponentProvider"),yield hO(n,n._uninitializedComponentsProvider._online)):(ze("FirestoreClient","Using default OnlineComponentProvider"),yield hO(n,new Km))),n._onlineComponents}),mO.apply(this,arguments)}function zN(n){return pO(n).then(e=>e.persistence)}function FD(n){return pO(n).then(e=>e.localStore)}function qN(n){return kD(n).then(e=>e.remoteStore)}function yO(n){return kD(n).then(e=>e.syncEngine)}function Ym(n){return _O.apply(this,arguments)}function _O(){return _O=(0,fe.Z)(function*(n){const e=yield kD(n),t=e.eventManager;return t.onListen=n4.bind(null,e.syncEngine),t.onUnlisten=r4.bind(null,e.syncEngine),t}),_O.apply(this,arguments)}function WN(n,e,t={}){const r=new ui;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(s,u,l,g,_){const I=new ND({next:S=>{u.enqueueAndForget(()=>kx(s,D));const $=S.docs.has(l);!$&&S.fromCache?_.reject(new $e(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&S.fromCache&&g&&"server"===g.source?_.reject(new $e(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new Ux(Df(l.path),I,{includeMetadataChanges:!0,Ku:!0});return Nx(s,D)}(yield Ym(n),n.asyncQueue,e,t,r)})),r.promise}function KN(n,e,t={}){const r=new ui;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(s,u,l,g,_){const I=new ND({next:S=>{u.enqueueAndForget(()=>kx(s,D)),S.fromCache&&"server"===g.source?_.reject(new $e(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new Ux(l,I,{includeMetadataChanges:!0,Ku:!0});return Nx(s,D)}(yield Ym(n),n.asyncQueue,e,t,r)})),r.promise}function YN(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const QN=new Map;function vO(n,e,t){if(!t)throw new $e(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JN(n,e,t,r){if(!0===e&&!0===r)throw new $e(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function XN(n){if(!at.isDocumentKey(n))throw new $e(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eR(n){if(at.isDocumentKey(n))throw new $e(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":vt()}function Ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $e(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=LD(n);throw new $e(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tR(n,e){if(e<=0)throw new $e(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class nR{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new $e(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new $e(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=YN(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new $e(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $e(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $e(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uw{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $e(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new $e(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new c0;switch(t.type){case"firstParty":return new h0(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new $e(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=QN.get(e);t&&(ze("ComponentProvider","Removing Datastore"),QN.delete(e),t.terminate())}(this),Promise.resolve()}}class Sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sr(this.firestore,e,this._key)}}class ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class Iu extends ns{constructor(e,t,r){super(e,t,Df(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sr(this.firestore,null,new at(e))}withConverter(e){return new Iu(this.firestore,e,this._path)}}function iR(n,e,...t){if(n=(0,Hn.m9)(n),vO("collection","path",e),n instanceof uw){const r=Rn.fromString(e,...t);return eR(r),new Iu(n,null,r)}{if(!(n instanceof Sr||n instanceof Iu))throw new $e(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return eR(r),new Iu(n.firestore,null,r)}}function UD(n,e,...t){if(n=(0,Hn.m9)(n),1===arguments.length&&(e=f0.A()),vO("doc","path",e),n instanceof uw){const r=Rn.fromString(e,...t);return XN(r),new Sr(n,null,new at(r))}{if(!(n instanceof Sr||n instanceof Iu))throw new $e(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return XN(r),new Sr(n.firestore,n instanceof Iu?n.converter:null,new at(r))}}function sR(n,e){return n=(0,Hn.m9)(n),e=(0,Hn.m9)(e),(n instanceof Sr||n instanceof Iu)&&(e instanceof Sr||e instanceof Iu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wO(n,e){return n=(0,Hn.m9)(n),e=(0,Hn.m9)(e),n instanceof ns&&e instanceof ns&&n.firestore===e.firestore&&Tf(n._query,e._query)&&n.converter===e.converter}class R4{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new fx(this,"async_queue_retry"),this.Xc=()=>{const t=xD();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=xD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=xD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ui;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!$o(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,jr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=Px.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&vt()}verifyOperationInProgress(){}sa(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function EO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class k4{constructor(){this._progressObserver={},this._taskCompletionResolver=new ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Mr extends uw{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new R4,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||oR(this),this._firestoreClient.terminate()}}function ci(n){return n._firestoreClient||oR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function oR(n){var e,t,r;const s=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Cf(n._databaseId,g,n._persistenceKey,(I=s).host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,YN(I.experimentalLongPollingOptions),I.useFetchStreams));var g,I;n._firestoreClient=new b4(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function aR(n,e,t){const r=new ui;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield RD(n,t),yield hO(n,e),r.resolve()}catch(s){const u=s;if(!GN(u))throw u;qs("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function uR(n){if(n._initialized||n._terminated)throw new $e(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bu(vi.fromBase64String(e))}catch(t){throw new $e(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bu(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new $e(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ff{constructor(e){this._methodName=e}}class VD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $e(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $e(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}const q4=/^__.*__$/;class Z4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Da(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tc(e,this.data,t,this.fieldTransforms)}}class cR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Da(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class BD{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new BD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return HD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(lR(this.ca)&&q4.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class W4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||iw(e)}ya(e,t,r,s=!1){return new BD({ca:e,methodName:t,ga:r,path:kr.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lf(n){const e=n._freezeSettings(),t=iw(n._databaseId);return new W4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jD(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);DO("Data must be an object, but it was:",l,r);const g=fR(r,l);let _,I;if(u.merge)_=new ki(l.fieldMask),I=l.fieldTransforms;else if(u.mergeFields){const D=[];for(const S of u.mergeFields){const $=dw(e,S,t);if(!l.contains($))throw new $e(_e.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);gR(D,$)||D.push($)}_=new ki(D),I=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,I=l.fieldTransforms;return new Z4(new $i(g),_,I)}class lw extends Ff{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lw}}function dR(n,e,t){return new BD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class CO extends Ff{_toFieldTransform(e){return new hd(e.path,new Ic)}isEqual(e){return e instanceof CO}}class K4 extends Ff{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=dR(this,e,!0),r=this.pa.map(u=>Uf(u,t)),s=new Cu(r);return new hd(e.path,s)}isEqual(e){return this===e}}class Y4 extends Ff{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=dR(this,e,!0),r=this.pa.map(u=>Uf(u,t)),s=new bc(r);return new hd(e.path,s)}isEqual(e){return this===e}}class Q4 extends Ff{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Dc(e.serializer,F0(e.serializer,this.Ia));return new hd(e.path,t)}isEqual(e){return this===e}}function IO(n,e,t,r){const s=n.ya(1,e,t);DO("Data must be an object, but it was:",s,r);const u=[],l=$i.empty();vc(r,(_,I)=>{const D=$D(e,_,t);I=(0,Hn.m9)(I);const S=s.da(D);if(I instanceof lw)u.push(D);else{const $=Uf(I,S);null!=$&&(u.push(D),l.set(D,$))}});const g=new ki(u);return new cR(l,g,s.fieldTransforms)}function bO(n,e,t,r,s,u){const l=n.ya(1,e,t),g=[dw(e,r,t)],_=[s];if(u.length%2!=0)throw new $e(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)g.push(dw(e,u[$])),_.push(u[$+1]);const I=[],D=$i.empty();for(let $=g.length-1;$>=0;--$)if(!gR(I,g[$])){const J=g[$];let we=_[$];we=(0,Hn.m9)(we);const Fe=l.da(J);if(we instanceof lw)I.push(J);else{const Le=Uf(we,Fe);null!=Le&&(I.push(J),D.set(J,Le))}}const S=new ki(I);return new cR(D,S,l.fieldTransforms)}function hR(n,e,t,r=!1){return Uf(t,n.ya(r?4:3,e))}function Uf(n,e){if(pR(n=(0,Hn.m9)(n)))return DO("Unsupported field value:",e,n),fR(n,e);if(n instanceof Ff)return function(t,r){if(!lR(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let g=Uf(l,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Hn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return F0(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=yr.fromDate(t);return{timestampValue:a(r.serializer,s)}}if(t instanceof yr){const s=new yr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:a(r.serializer,s)}}if(t instanceof VD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bu)return{bytesValue:c(r.serializer,t._byteString)};if(t instanceof Sr){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:y(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${LD(t)}`)}(n,e)}function fR(n,e){const t={};return _M(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vc(n,(r,s)=>{const u=Uf(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function pR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof yr||n instanceof VD||n instanceof bu||n instanceof Sr||n instanceof Ff)}function DO(n,e,t){if(!pR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=LD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function dw(n,e,t){if((e=(0,Hn.m9)(e))instanceof Mc)return e._internalPath;if("string"==typeof e)return $D(n,e);throw HD("Field path arguments must be of type string or ",n,!1,void 0,t)}const J4=new RegExp("[~\\*/\\[\\]]");function $D(n,e,t){if(e.search(J4)>=0)throw HD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Mc(...e.split("."))._internalPath}catch{throw HD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function HD(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${s}`),_+=")"),new $e(_e.INVALID_ARGUMENT,g+n+_)}function gR(n,e){return n.some(t=>t.isEqual(e))}class hw{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Sr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new X4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(GD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class X4 extends hw{data(){return super.data()}}function GD(n,e){return"string"==typeof e?$D(n,e):e instanceof Mc?e._internalPath:e._delegate._internalPath}function mR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new $e(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TO{}class fw extends TO{}function Ed(n,e,...t){let r=[];e instanceof TO&&r.push(e),r=r.concat(t),function(s){const u=s.filter(g=>g instanceof Qm).length,l=s.filter(g=>g instanceof pw).length;if(u>1||u>0&&l>0)throw new $e(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class pw extends fw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new pw(e,t,r)}_apply(e){const t=this._parse(e);return wR(e._query,t),new ns(e.firestore,e.converter,Cm(e._query,t))}_parse(e){const t=Lf(e.firestore);return function(s,u,l,g,_,I,D){let S;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new $e(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){vR(D,I);const $=[];for(const J of D)$.push(_R(g,s,J));S={arrayValue:{values:$}}}else S=_R(g,s,D)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||vR(D,I),S=hR(l,"where",D,"in"===I||"not-in"===I);return Mn.create(_,I,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Qm extends TO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:qn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const g of l)wR(u,g),u=Cm(u,g)}(e._query,t),new ns(e.firestore,e.converter,Cm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class AO extends fw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new AO(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new $e(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new $e(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ud(s,u);return function(g,_){if(null===R0(g)){const I=Em(g);null!==I&&ER(0,I,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new ns(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Ia(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class zD extends fw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new zD(e,t,r)}_apply(e){return new ns(e.firestore,e.converter,Im(e._query,this._limit,this._limitType))}}class qD extends fw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new qD(e,t,r)}_apply(e){const t=yR(e,this.type,this._docOrFields,this._inclusive);return new ns(e.firestore,e.converter,(s=t,new Ia((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class ZD extends fw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ZD(e,t,r)}_apply(e){const t=yR(e,this.type,this._docOrFields,this._inclusive);return new ns(e.firestore,e.converter,(s=t,new Ia((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function yR(n,e,t,r){if(t[0]=(0,Hn.m9)(t[0]),t[0]instanceof hw)return function(s,u,l,g,_){if(!g)throw new $e(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const I=[];for(const D of ld(s))if(D.field.isKeyField())I.push(wc(u,g.key));else{const S=g.data.field(D.field);if(gm(S))throw new $e(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const $=D.field.canonicalString();throw new $e(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}I.push(S)}return new wa(I,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Lf(n.firestore);return function(u,l,g,_,I,D){const S=u.explicitOrderBy;if(I.length>S.length)throw new $e(_e.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let J=0;J<I.length;J++){const we=I[J];if(S[J].field.isKeyField()){if("string"!=typeof we)throw new $e(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof we}`);if(!iD(u)&&-1!==we.indexOf("/"))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${we}' contains a slash.`);const Fe=u.path.child(Rn.fromString(we));if(!at.isDocumentKey(Fe))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const Le=new at(Fe);$.push(wc(l,Le))}else{const Fe=hR(g,_,we);$.push(Fe)}}return new wa($,D)}(n._query,n.firestore._databaseId,s,e,t,r)}}function _R(n,e,t){if("string"==typeof(t=(0,Hn.m9)(t))){if(""===t)throw new $e(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iD(e)&&-1!==t.indexOf("/"))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rn.fromString(t));if(!at.isDocumentKey(r))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wc(n,new at(r))}if(t instanceof Sr)return wc(n,t._key);throw new $e(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${LD(t)}.`)}function vR(n,e){if(!Array.isArray(n)||0===n.length)throw new $e(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wR(n,e){if(e.isInequality()){const r=Em(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=R0(n);null!==u&&ER(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new $e(_e.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ER(n,e,t){if(!t.isEqual(e))throw new $e(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class SO{convertValue(e,t="none"){switch(yu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return vc(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new VD(Fr(e.latitude),Fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=v0(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ef(e));default:return null}}convertTimestamp(e){const t=_a(e);return new yr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rn.fromString(e);Tt(k2(r));const s=new fo(r.get(1),r.get(3)),u=new at(r.popFirst(5));return s.isEqual(t)||jr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function WD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class u3 extends SO{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sr(this.firestore,null,t)}}class Vf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xc extends hw{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(GD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class gw extends xc{data(e={}){return super.data(e)}}class Cd{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Vf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gw(this._firestore,this._userDataWriter,r.key,r,new Vf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $e(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new gw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Vf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const g=new gw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Vf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,I=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),I=u.indexOf(l.doc.key)),{type:l3(l.type),doc:g,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function l3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}function IR(n,e){return n instanceof xc&&e instanceof xc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Cd&&e instanceof Cd&&n._firestore===e._firestore&&wO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Id extends SO{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sr(this.firestore,null,t)}}function bR(n,e,t){n=Ln(n,Sr);const r=Ln(n.firestore,Mr),s=WD(n.converter,e,t);return Jm(r,[jD(Lf(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Cr.none())])}function DR(n,e,t,...r){n=Ln(n,Sr);const s=Ln(n.firestore,Mr),u=Lf(s);let l;return l="string"==typeof(e=(0,Hn.m9)(e))||e instanceof Mc?bO(u,"updateDoc",n._key,e,t,r):IO(u,"updateDoc",n._key,e),Jm(s,[l.toMutation(n._key,Cr.exists(!0))])}function TR(n,...e){var t,r,s;n=(0,Hn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||EO(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(EO(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(s=S.complete)||void 0===s?void 0:s.bind(S)}let _,I,D;if(n instanceof Sr)I=Ln(n.firestore,Mr),D=Df(n._key.path),_={next:S=>{e[l]&&e[l](MO(I,n,S))},error:e[l+1],complete:e[l+2]};else{const S=Ln(n,ns);I=Ln(S.firestore,Mr),D=S._query;const $=new Id(I);_={next:J=>{e[l]&&e[l](new Cd(I,$,S,J))},error:e[l+1],complete:e[l+2]},mR(n._query)}return function(S,$,J,we){const Fe=new ND(we),Le=new Ux($,Fe,J);return S.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return Nx(yield Ym(S),Le)})),()=>{Fe.Dc(),S.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return kx(yield Ym(S),Le)}))}}(ci(I),D,g,_)}function Jm(n,e){return function(t,r){const s=new ui;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function i4(n,e,t){return Hx.apply(this,arguments)}(yield yO(t),r,s)})),s.promise}(ci(n),e)}function MO(n,e,t){const r=t.docs.get(e._key),s=new Id(n);return new xc(n,s,e._key,r,new Vf(t.hasPendingWrites,t.fromCache),e.converter)}const S3={maxAttempts:5};class AR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lf(e)}set(e,t,r){this._verifyNotCommitted();const s=bd(e,this._firestore),u=WD(s.converter,t,r),l=jD(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Cr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=bd(e,this._firestore);let l;return l="string"==typeof(t=(0,Hn.m9)(t))||t instanceof Mc?bO(this._dataReader,"WriteBatch.update",u._key,t,r,s):IO(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bd(e,this._firestore);return this._mutations=this._mutations.concat(new fd(t._key,Cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $e(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bd(n,e){if((n=(0,Hn.m9)(n)).firestore!==e)throw new $e(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class M3 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Lf(e)}get(e){const t=bd(e,this._firestore),r=new u3(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return vt();const u=s[0];if(u.isFoundDocument())return new hw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new hw(this._firestore,r,t._key,null,t.converter);throw vt()})}set(e,t,r){const s=bd(e,this._firestore),u=WD(s.converter,t,r),l=jD(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=bd(e,this._firestore);let l;return l="string"==typeof(t=(0,Hn.m9)(t))||t instanceof Mc?bO(this._dataReader,"Transaction.update",u._key,t,r,s):IO(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=bd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bd(e,this._firestore),r=new Id(this._firestore);return super.get(e).then(s=>new xc(this._firestore,r,t._key,s._document,new Vf(!1,!1),t.converter))}}function xO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new $e("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function MR(){if(typeof Uint8Array>"u")throw new $e("unimplemented","Uint8Arrays are not available in this environment.")}function xR(){if(!function A2(){return typeof atob<"u"}())throw new $e("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){mc=Hh.SDK_VERSION,(0,Hh._registerComponent)(new Gh.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Mr(new Ib(t.getProvider("auth-internal")),new rM(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new $e(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fo(g.options.projectId,_)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,Hh.registerVersion)(vb,"3.13.0",n),(0,Hh.registerVersion)(vb,"3.13.0","esm2017")}();class mw{constructor(e){this._delegate=e}static fromBase64String(e){return xR(),new mw(bu.fromBase64String(e))}static fromUint8Array(e){return MR(),new mw(bu.fromUint8Array(e))}toBase64(){return xR(),this._delegate.toBase64()}toUint8Array(){return MR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function OO(n){return function U3(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class V3{enableIndexedDbPersistence(e,t){return function L4(n,e){uR(n=Ln(n,Mr));const t=ci(n);if(t._uninitializedComponentsProvider)throw new $e(_e.FAILED_PRECONDITION,"SDK cache is already specified.");qs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new Km;return aR(t,s,new lO(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function U4(n){uR(n=Ln(n,Mr));const e=ci(n);if(e._uninitializedComponentsProvider)throw new $e(_e.FAILED_PRECONDITION,"SDK cache is already specified.");qs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Km;return aR(e,r,new $N(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function V4(n){if(n._initialized&&!n._terminated)throw new $e(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ui;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!ho.D())return Promise.resolve();const s=r+"main";yield ho.delete(s)}),function(r){return t.apply(this,arguments)})(nx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class OR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function rR(n,e,t,r={}){var s;const u=(n=Ln(n,uw))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let g,_;if("string"==typeof r.mockUserToken)g=r.mockUserToken,_=yi.MOCK_USER;else{g=(0,Hn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new $e(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new yi(I)}n._authCredentials=new l0(new Cb(g,_))}}(this._delegate,e,t,r)}enableNetwork(){return function j4(n){return function D4(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield zN(n),t=yield qN(n);return e.setNetworkEnabled(!0),function(r){const s=lt(r);return s.vu.delete(0),sw(s)}(t)}))}(ci(n=Ln(n,Mr)))}(this._delegate)}disableNetwork(){return function $4(n){return function T4(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield zN(n),t=yield qN(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(s){const u=lt(s);u.vu.add(0),yield $m(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(ci(n=Ln(n,Mr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function B4(n){return function(e){const t=new ui;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function u4(n,e){return Wx.apply(this,arguments)}(yield yO(e),t)})),t.promise}(ci(n=Ln(n,Mr)))}(this._delegate)}onSnapshotsInSync(e){return function v3(n,e){return function M4(n,e){const t=new ND(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield Ym(n),s=t,lt(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield Ym(n),s=t,void lt(r).ku.delete(s);var r,s}))}}(ci(n=Ln(n,Mr)),EO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new $e("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xm(this,iR(this._delegate,e))}catch(t){throw xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Zo(this,UD(this._delegate,e))}catch(t){throw xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Os(this,function N4(n,e){if(n=Ln(n,uw),vO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $e(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ns(n,null,(t=e,new Ia(Rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function x3(n,e,t){n=Ln(n,Mr);const r=Object.assign(Object.assign({},S3),t);return function(s){if(s.maxAttempts<1)throw new $e(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const g=new ui;return s.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const _=yield function ZN(n){return kD(n).then(e=>e.datastore)}(s);new I4(s.asyncQueue,_,l,u,g).run()})),g.promise}(ci(n),s=>e(new M3(n,s)),r)}(this._delegate,t=>e(new PR(this,t)))}batch(){return ci(this._delegate),new NR(new AR(this._delegate,e=>Jm(this._delegate,e)))}loadBundle(e){return function H4(n,e){const t=ci(n=Ln(n,Mr)),r=new k4;return function x4(n,e,t,r){const s=function(u,l){let g;return g="string"==typeof u?hD().encode(u):u,_=function(_,I){if(_ instanceof Uint8Array)return HN(_,I);if(_ instanceof ArrayBuffer)return HN(new Uint8Array(_),I);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new E4(_,l);var _}(t,iw(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function v4(n,e,t){const r=lt(n);var s;(s=(0,fe.Z)(function*(u,l,g){try{const _=yield l.getMetadata();if(yield function($,J){const we=lt($),Fe=f(J.createTime);return we.persistence.runTransaction("hasNewerBundle","readonly",Le=>we.qs.getBundleMetadata(Le,J.id)).then(Le=>!!Le&&Le.createTime.compareTo(Fe)>=0)}(u.localStore,_))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:($=_).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);g._updateProgress(NN(_));const I=new JL(_,u.localStore,l.serializer);let D=yield l.bc();for(;D;){const $=yield I.zu(D);$&&g._updateProgress($),D=yield l.bc()}const S=yield I.complete();return yield Sc(u,S.Ju,void 0),yield function($,J){const we=lt($);return we.persistence.runTransaction("Save bundle","readwrite",Fe=>we.qs.saveBundleMetadata(Fe,J))}(u.localStore,_),g._completeWith(S.progress),Promise.resolve(S.Hu)}catch(_){return qs("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var $}),function(u,l,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield yO(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function G4(n,e){return function O4(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const s=lt(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield FD(n),e)}))}(ci(n=Ln(n,Mr)),e).then(t=>t?new ns(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Os(this,t):null)}}class KD extends SO{constructor(e){super(),this.firestore=e}convertBytes(e){return new mw(new bu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Zo.forKey(t,this.firestore,null)}}class PR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new KD(e)}get(e){const t=jf(e);return this._delegate.get(t).then(r=>new yw(this._firestore,new xc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=jf(e);return r?(xO("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=jf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=jf(e);return this._delegate.delete(t),this}}class NR{constructor(e){this._delegate=e}set(e,t,r){const s=jf(e);return r?(xO("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=jf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=jf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new gw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _w(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Bf.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Bf(e,new KD(e),t),s.set(t,u)),u}}Bf.INSTANCES=new WeakMap;class Zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new $e("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Zo(t,new Sr(t._delegate,r,new at(e)))}static forKey(e,t,r){return new Zo(t,new Sr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xm(this.firestore,iR(this._delegate,e))}catch(t){throw xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Hn.m9)(e))instanceof Sr&&sR(this._delegate,e)}set(e,t){t=xO("DocumentReference.set",t);try{return t?bR(this._delegate,e,t):bR(this._delegate,e)}catch(r){throw xs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?DR(this._delegate,e):DR(this._delegate,e,t,...r)}catch(s){throw xs(s,"updateDoc()","DocumentReference.update()")}}delete(){return function y3(n){return Jm(Ln(n.firestore,Mr),[new fd(n._key,Cr.none())])}(this._delegate)}onSnapshot(...e){const t=RR(e),r=kR(e,s=>new yw(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return TR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function h3(n){n=Ln(n,Sr);const e=Ln(n.firestore,Mr),t=ci(e),r=new Id(e);return function A4(n,e){const t=new ui;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(s,u,l){try{const g=yield function(_,I){const D=lt(_);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,I))}(s,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new $e(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=zm(g,`Failed to get document '${u} from cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield FD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new xc(e,r,n._key,s,new Vf(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function f3(n){n=Ln(n,Sr);const e=Ln(n.firestore,Mr);return WN(ci(e),n._key,{source:"server"}).then(t=>MO(e,n,t))}(this._delegate):function d3(n){n=Ln(n,Sr);const e=Ln(n.firestore,Mr);return WN(ci(e),n._key).then(t=>MO(e,n,t))}(this._delegate),t.then(r=>new yw(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Zo(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}function xs(n,e,t){return n.message=n.message.replace(e,t),n}function RR(n){for(const e of n)if("object"==typeof e&&!OO(e))return e;return{}}function kR(n,e){var t,r;let s;return s=OO(n[0])?n[0]:OO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class yw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return IR(this._delegate,e._delegate)}}class _w extends yw{data(e){const t=this._delegate.data(e);return function Eb(n,e){n||vt()}(void 0!==t),t}}class Os{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KD(e)}where(e,t,r){try{return new Os(this.firestore,Ed(this._delegate,function e3(n,e,t){const r=e,s=GD("where",n);return pw._create(s,r,t)}(e,t,r)))}catch(s){throw xs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Os(this.firestore,Ed(this._delegate,function t3(n,e="asc"){const t=e,r=GD("orderBy",n);return AO._create(r,t)}(e,t)))}catch(r){throw xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Os(this.firestore,Ed(this._delegate,function n3(n){return tR("limit",n),zD._create("limit",n,"F")}(e)))}catch(t){throw xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Os(this.firestore,Ed(this._delegate,function r3(n){return tR("limitToLast",n),zD._create("limitToLast",n,"L")}(e)))}catch(t){throw xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Os(this.firestore,Ed(this._delegate,function i3(...n){return qD._create("startAt",n,!0)}(...e)))}catch(t){throw xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Os(this.firestore,Ed(this._delegate,function s3(...n){return qD._create("startAfter",n,!1)}(...e)))}catch(t){throw xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Os(this.firestore,Ed(this._delegate,function o3(...n){return ZD._create("endBefore",n,!1)}(...e)))}catch(t){throw xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Os(this.firestore,Ed(this._delegate,function a3(...n){return ZD._create("endAt",n,!0)}(...e)))}catch(t){throw xs(t,"endAt()","Query.endAt()")}}isEqual(e){return wO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function g3(n){n=Ln(n,ns);const e=Ln(n.firestore,Mr),t=ci(e),r=new Id(e);return function S4(n,e){const t=new ui;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(s,u,l){try{const g=yield TD(s,u,!0),_=new FN(u,g.ir),I=_.sc(g.documents),D=_.applyChanges(I,!1);l.resolve(D.snapshot)}catch(g){const _=zm(g,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield FD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Cd(e,r,n,s))}(this._delegate):"server"===e?.source?function m3(n){n=Ln(n,ns);const e=Ln(n.firestore,Mr),t=ci(e),r=new Id(e);return KN(t,n._query,{source:"server"}).then(s=>new Cd(e,r,n,s))}(this._delegate):function p3(n){n=Ln(n,ns);const e=Ln(n.firestore,Mr),t=ci(e),r=new Id(e);return mR(n._query),KN(t,n._query).then(s=>new Cd(e,r,n,s))}(this._delegate),t.then(r=>new PO(this.firestore,new Cd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=RR(e),r=kR(e,s=>new PO(this.firestore,new Cd(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return TR(this._delegate,t,r)}withConverter(e){return new Os(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}class j3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _w(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Os(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _w(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new j3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _w(this._firestore,r))})}isEqual(e){return IR(this._delegate,e._delegate)}}class Xm extends Os{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Zo(this.firestore,e):null}doc(e){try{return new Zo(this.firestore,void 0===e?UD(this._delegate):UD(this._delegate,e))}catch(t){throw xs(t,"doc()","CollectionReference.doc()")}}add(e){return function _3(n,e){const t=Ln(n.firestore,Mr),r=UD(n),s=WD(n.converter,e);return Jm(t,[jD(Lf(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Zo(this.firestore,t))}isEqual(e){return sR(this._delegate,e._delegate)}withConverter(e){return new Xm(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}function jf(n){return Ln(n,Sr)}class NO{constructor(...e){this._delegate=new Mc(...e)}static documentId(){return new NO(kr.keyField().canonicalString())}isEqual(e){return(e=(0,Hn.m9)(e))instanceof Mc&&this._delegate._internalPath.isEqual(e._internalPath)}}class $f{constructor(e){this._delegate=e}static serverTimestamp(){const e=function P3(){return new CO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new $f(e)}static delete(){const e=function O3(){return new lw("deleteField")}();return e._methodName="FieldValue.delete",new $f(e)}static arrayUnion(...e){const t=function N3(...n){return new K4("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new $f(t)}static arrayRemove(...e){const t=function R3(...n){return new Y4("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new $f(t)}static increment(e){const t=function k3(n){return new Q4("increment",n)}(e);return t._methodName="FieldValue.increment",new $f(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $3={Firestore:OR,GeoPoint:VD,Timestamp:yr,Blob:mw,Transaction:PR,WriteBatch:NR,DocumentReference:Zo,DocumentSnapshot:yw,Query:Os,QueryDocumentSnapshot:_w,QuerySnapshot:PO,CollectionReference:Xm,FieldPath:NO,FieldValue:$f,setLogLevel:function B3(n){!function wb(n){pu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function G3(n){(function H3(n,e){n.INTERNAL.registerComponent(new Gh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},$3)))})(n,(e,t)=>new OR(e,t,new V3)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(CS.Z);var z3=M(3019),Wo=M(3093),q3=M(4552);class Z3 extends Ki.x{constructor(e=1/0,t=1/0,r=q3.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)g=_;g&&r.splice(0,g+1)}}}var W3=M(3020);function RO(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,W3.B)({connector:()=>new Z3(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function YD(n,e){return(0,bo.m)(e)?(0,$n.w)(()=>n,e):(0,$n.w)(()=>n)}var Ta=M(5137);M(4097);var FO=M(4303);const LO=new Map,LR={activated:!1,tokenObservers:[]},X3={initialized:!1,enabled:!1};function Qr(n){return LO.get(n)||Object.assign({},LR)}function JD(){return X3}const UO="https://content-firebaseappcheck.googleapis.com/v1",rU="exchangeDebugToken",UR={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class sU{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new Hn.BH,yield function oU(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Hn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const rs=new Hn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function VO(n){if(!Qr(n).activated)throw rs.create("use-before-activation",{appName:n.name})}function tT(n,e){return jO.apply(this,arguments)}function jO(){return jO=(0,fe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const S=yield s.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(S){throw rs.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw rs.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(S){throw rs.create("fetch-parse-error",{originalErrorMessage:S?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw rs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const I=1e3*Number(_[1]),D=Date.now();return{token:g.token,expireTimeMillis:D+I,issuedAtTimeMillis:D}}),jO.apply(this,arguments)}function VR(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${UO}/projects/${t}/apps/${r}:${rU}?key=${s}`,body:{debug_token:e}}}const lU="firebase-app-check-database",dU=1,vw="firebase-app-check-store";let nT=null;function $O(){return $O=(0,fe.Z)(function*(n,e){const r=(yield function jR(){return nT||(nT=new Promise((n,e)=>{try{const t=indexedDB.open(lU,dU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(rs.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(vw,{keyPath:"compositeKey"})}}catch(t){e(rs.create("storage-open",{originalErrorMessage:t?.message}))}}),nT)}()).transaction(vw,"readwrite"),u=r.objectStore(vw).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var I;g(rs.create("storage-set",{originalErrorMessage:null===(I=_.target.error)||void 0===I?void 0:I.message}))}})}),$O.apply(this,arguments)}const ww=new Ts.Yd("@firebase/app-check");function zO(n,e){return(0,Hn.hl)()?function fU(n,e){return function $R(n,e){return $O.apply(this,arguments)}(function GR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ww.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ZO(){return JD().enabled}function WO(){return KO.apply(this,arguments)}function KO(){return KO=(0,fe.Z)(function*(){const n=JD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),KO.apply(this,arguments)}const vU={error:"UNKNOWN_ERROR"};function wU(n){return Hn.US.encodeString(JSON.stringify(n),!1)}function rT(n){return YO.apply(this,arguments)}function YO(){return YO=(0,fe.Z)(function*(n,e=!1){const t=n.app;VO(t);const r=Qr(t);let u,s=r.token;if(s&&!ey(s)&&(r.token=void 0,s=void 0),!s){const _=yield r.cachedTokenPromise;_&&(ey(_)?s=_:yield zO(t,void 0))}if(!e&&s&&ey(s))return{token:s.token};let g,l=!1;if(ZO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=tT(VR(t,yield WO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield zO(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield Qr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?ww.warn(_.message):ww.error(_),u=_}return s?u?g=ey(s)?{token:s.token,internalError:u}:WR(u):(g={token:s.token},r.token=s,yield zO(t,s)):g=WR(u),l&&function ZR(n,e){const t=Qr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g}),YO.apply(this,arguments)}function QO(){return QO=(0,fe.Z)(function*(n){const e=n.app;VO(e);const{provider:t}=Qr(e);if(ZO()){const r=yield WO(),{token:s}=yield tT(VR(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}}),QO.apply(this,arguments)}function XO(n,e){const t=Qr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function qR(n){const{app:e}=n,t=Qr(e);let r=t.tokenRefresher;r||(r=function EU(n){const{app:e}=n;return new sU((0,fe.Z)(function*(){let r;if(r=Qr(e).token?yield rT(n,!0):yield rT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Qr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},UR.RETRIAL_MIN_WAIT,UR.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ey(n){return n.expireTimeMillis-Date.now()>0}function WR(n){return{token:wU(vU),error:n}}class CU{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qr(this.app);for(const t of e)XO(this.app,t.next);return Promise.resolve()}}const nk="app-check-internal";!function FU(){(0,FO._registerComponent)(new Gh.wA("app-check",n=>function IU(n,e){return new CU(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(nk).initialize()})),(0,FO._registerComponent)(new Gh.wA(nk,n=>function bU(n){return{getToken:e=>rT(n,e),getLimitedUseToken:()=>function zR(n){return QO.apply(this,arguments)}(n),addTokenListener:e=>function JO(n,e,t,r){const{app:s}=n,u=Qr(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&ey(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),qR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>qR(n))}(n,"INTERNAL",e),removeTokenListener:e=>XO(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,FO.registerVersion)("@firebase/app-check","0.8.0")}();class rP{constructor(){return(0,Dn.vb)("app-check")}}typeof window<"u"&&window;var sP=M(120);const ik=new d.OlP("angularfire2.auth.use-emulator"),sk=new d.OlP("angularfire2.auth.settings"),ok=new d.OlP("angularfire2.auth.tenant-id"),ak=new d.OlP("angularfire2.auth.langugage-code"),uk=new d.OlP("angularfire2.auth.use-device-language"),ck=new d.OlP("angularfire.auth.persistence"),lk=(n,e,t,r,s,u,l,g)=>(0,xi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),l)for(const[I,D]of Object.entries(l))_.settings[I]=D;return g&&_.setPersistence(g),_},[t,r,s,u,l,g]);let sT=(()=>{class n{constructor(t,r,s,u,l,g,_,I,D,S,$,J){const we=new Ki.x,Fe=(0,Pt.of)(void 0).pipe((0,Wo.Q)(l.outsideAngular),(0,$n.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,8661)))),(0,Qt.U)(()=>(0,xi.on)(t,u,r)),(0,Qt.U)(Le=>lk(Le,u,g,I,D,S,_,$)),RO({bufferSize:1,refCount:!1}));if(br(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Pt.of)(null);else{Fe.pipe(Vr()).subscribe();const ht=Fe.pipe((0,$n.w)(jt=>jt.getRedirectResult().then(cn=>cn,()=>null)),Dn.iC,RO({bufferSize:1,refCount:!1})),Vt=Fe.pipe((0,$n.w)(jt=>new bi.y(cn=>({unsubscribe:u.runOutsideAngular(()=>jt.onAuthStateChanged(xn=>cn.next(xn),xn=>cn.error(xn),()=>cn.complete()))})))),wt=Fe.pipe((0,$n.w)(jt=>new bi.y(cn=>({unsubscribe:u.runOutsideAngular(()=>jt.onIdTokenChanged(xn=>cn.next(xn),xn=>cn.error(xn),()=>cn.complete()))}))));this.authState=ht.pipe(YD(Vt),(0,Ta.R)(l.outsideAngular),(0,Wo.Q)(l.insideAngular)),this.user=ht.pipe(YD(wt),(0,Ta.R)(l.outsideAngular),(0,Wo.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,$n.w)(jt=>jt?(0,nr.D)(jt.getIdToken()):(0,Pt.of)(null))),this.idTokenResult=this.user.pipe((0,$n.w)(jt=>jt?(0,nr.D)(jt.getIdTokenResult()):(0,Pt.of)(null))),this.credential=(0,z3.T)(ht,we,this.authState.pipe(si(jt=>!jt))).pipe((0,Qt.U)(jt=>jt?.user?jt:null),(0,Ta.R)(l.outsideAngular),(0,Wo.Q)(l.insideAngular))}return(0,xi.pX)(this,Fe,u,{spy:{apply:(Le,ht,Vt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&Vt.then(wt=>we.next(wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xi.Dh),d.LFG(xi.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Dn.HU),d.LFG(ik,8),d.LFG(sk,8),d.LFG(ok,8),d.LFG(ak,8),d.LFG(uk,8),d.LFG(ck,8),d.LFG(rP,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$U=(()=>{class n{constructor(){sP.Z.registerVersion("angularfire",Dn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[sT]}),n})();function dk(n,e){return function HU(n,e=Kp.z){return new bi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function oP(n,e){return dk(n,e).pipe((0,Qt.U)(t=>({payload:t,type:"query"})))}function oT(n,e){return oP(n,e).pipe(ja(void 0),bg(),(0,Qt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=s.find(D=>D.doc.ref.isEqual(l.ref)),I=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&I&&JSON.stringify(I.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function hk(n,e,t){return oT(n,t).pipe(na((r,s)=>function zU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function qU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return aP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return aP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return aP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),(0,wS.x)(),(0,Qt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function aP(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function fk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class pk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=oT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Qt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(ja(void 0),bg(),si(([r,s])=>s.length>0||!r),(0,Qt.U)(([r,s])=>s),Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fk(e);return hk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return oP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Dn.iC)}get(e){return(0,nr.D)(this.query.get(e)).pipe(Dn.iC)}add(e){return this.ref.add(e)}doc(e){return new gk(this.ref.doc(e),this.afs)}}class gk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=_k(r,t);return new pk(s,u,this.afs)}snapshotChanges(){return function GU(n,e){return dk(n,e).pipe(ja(void 0),bg(),(0,Qt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Qt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nr.D)(this.ref.get(e)).pipe(Dn.iC)}}class ZU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?oT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),si(t=>t.length>0),Dn.iC):oT(this.query,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fk(e);return hk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return oP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Dn.iC)}get(e){return(0,nr.D)(this.query.get(e)).pipe(Dn.iC)}}const mk=new d.OlP("angularfire2.enableFirestorePersistence"),yk=new d.OlP("angularfire2.firestore.persistenceSettings"),WU=new d.OlP("angularfire2.firestore.settings"),KU=new d.OlP("angularfire2.firestore.use-emulator");function _k(n,e=(t=>t)){return{query:e(n),ref:n}}let aT=(()=>{class n{constructor(t,r,s,u,l,g,_,I,D,S,$,J,we,Fe,Le,ht,Vt){this.schedulers=_;const wt=(0,xi.on)(t,g,r),jt=D;S&&lk(wt,g,$,we,Fe,Le,J,ht),[this.firestore,this.persistenceEnabled$]=(0,xi.cc)(`${wt.name}.firestore`,"AngularFirestore",wt.name,()=>{const cn=g.runOutsideAngular(()=>wt.firestore());if(u&&cn.settings(u),jt&&cn.useEmulator(...jt),s&&!br(l)){const xn=()=>{try{return(0,nr.D)(cn.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(is){return typeof console<"u"&&console.warn(is),(0,Pt.of)(!1)}};return[cn,g.runOutsideAngular(xn)]}return[cn,(0,Pt.of)(!1)]},[u,jt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=_k(s,r),g=this.schedulers.ngZone.run(()=>u);return new pk(g,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new ZU(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new gk(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xi.Dh),d.LFG(xi.xv,8),d.LFG(mk,8),d.LFG(WU,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Dn.HU),d.LFG(yk,8),d.LFG(KU,8),d.LFG(sT,8),d.LFG(ik,8),d.LFG(sk,8),d.LFG(ok,8),d.LFG(ak,8),d.LFG(uk,8),d.LFG(ck,8),d.LFG(rP,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YU=(()=>{class n{constructor(){sP.Z.registerVersion("angularfire",Dn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:mk,useValue:!0},{provide:yk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[aT]}),n})();var QU=M(6710);let Du=(()=>{class n{constructor(t,r){this.afs=t,this.db=r,this._loggedInUser$=new ii.X(JSON.parse(sessionStorage.getItem("loggedInUser"))||null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,fe.Z)(function*(){try{const r=yield t.afs.signInWithPopup(new QU.V);return yield t.createOrUpdateUserOnDB(r),sessionStorage.setItem("loggedInUser",JSON.stringify(r)),t._loggedInUser$.next(r),r}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,fe.Z)(function*(){try{const s=yield r.afs.signInWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(s,t),sessionStorage.setItem("loggedInUser",JSON.stringify(s)),r._loggedInUser$.next(s),s}catch(s){throw console.error(s.message),s.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,fe.Z)(function*(){try{const s=yield r.afs.createUserWithEmailAndPassword(t.email,t.password);return yield r.createOrUpdateUserOnDB(s,t),sessionStorage.setItem("loggedInUser",JSON.stringify(s)),r._loggedInUser$.next(s),s}catch(s){throw console.error(s.message),s.message}})()}logOut(){var t=this;return(0,fe.Z)(function*(){try{yield t.afs.signOut(),sessionStorage.removeItem("loggedInUser"),t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}createOrUpdateUserOnDB(t,r=null){var s=this;return(0,fe.Z)(function*(){var u;s.db.collection("users").doc(t.user.uid).get().pipe(Wn(1)).subscribe({next:(u=(0,fe.Z)(function*(l){if(l.exists){const g=l.data();g._id||(yield s.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),g.fullName||(yield s.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.additionalUserInfo?.profile?.name})),g.imgUrl||(yield s.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),g.followedByUsers||(yield s.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),g.followingUsers||(yield s.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield s.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.additionalUserInfo?.profile?.name,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[]})}),function(g){return u.apply(this,arguments)}),error:u=>{console.error(u)}})})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(sT),d.LFG(aT))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vk=(()=>{class n{constructor(t,r){this.db=t,this.authService=r,this._posts$=new ii.X([]),this.posts$=this._posts$.asObservable()}getPosts(){var t=this;return this.db.collection("posts").valueChanges().pipe((0,$n.w)(r=>{let s=r.reduce((l,g)=>l.concat(g.likedByUsers||[]),[]);return ea(Array.from(new Set(s)).map(l=>this.authService.getUserById(l))).pipe((0,Qt.U)(l=>r.map(g=>(g.likedByUsers=g.likedByUsers?g.likedByUsers.map(_=>l.find(I=>I._id===_)):[],g))),ra((0,fe.Z)(function*(){console.log("posts before filter",r);const l=t.authService.loggedInUser$,g=yield Wp(l),_=t.db.collection("users").doc(g?.user?.uid).valueChanges(),I=yield Wp(_),D=r.filter(S=>I.followingUsers.find($=>$===S.creatorId));console.log("filteredPostsByFollowingUsers",D),t._posts$.next([...D])})),function d_(n=1/0){let e;e=n&&"object"==typeof n?n:{count:n};const{count:t=1/0,delay:r,resetOnSuccess:s=!1}=e;return t<=0?Xo.y:(0,Vi.e)((u,l)=>{let _,g=0;const I=()=>{let D=!1;_=u.subscribe((0,Ti.x)(l,S=>{s&&(g=0),l.next(S)},void 0,S=>{if(g++<t){const $=()=>{_?(_.unsubscribe(),_=null,I()):D=!0};if(null!=r){const J="number"==typeof r?function Qp(n=0,e,t=Kp.P){let r=-1;return null!=e&&((0,Yp.K)(e)?t=e:r=e),new bi.y(s=>{let u=function ko(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let l=0;return t.schedule(function(){s.closed||(s.next(l++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(r):(0,Vu.Xf)(r(S,g)),we=(0,Ti.x)(l,()=>{we.unsubscribe(),$()},()=>{l.complete()});J.subscribe(we)}else $()}else l.error(S)})),D&&(_.unsubscribe(),_=null,I())};I()})}(1),as(this._handleError))}))}toggleLike(t,r){var s=this;return(0,fe.Z)(function*(){t?yield s.addLike(r):yield s.removeLike(r)})()}addLike(t){var r=this;return(0,fe.Z)(function*(){const s=Ig(t);r.authService.loggedInUser$.pipe(Wn(1)).subscribe({next:u=>{const l=u.user.uid;var g;r.db.collection("users").doc(l).valueChanges().pipe(Wn(1)).subscribe({next:(g=(0,fe.Z)(function*(_){const I=_,D=s.likedByUsers.slice();D.push(I),s.likedByUsers=s.likedByUsers.map(we=>we._id),s.likedByUsers.push(l),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...s.likedByUsers]});const S=r._posts$.value,$=S.findIndex(we=>we._id===t._id),J={...s,likedByUsers:[...D]};S.splice($,1,J),r._posts$.next([...S])}),function(I){return g.apply(this,arguments)})})}})})()}removeLike(t){var r=this;return(0,fe.Z)(function*(){const s=Ig(t);var u;r.authService.loggedInUser$.pipe(Wn(1)).subscribe({next:(u=(0,fe.Z)(function*(l){const g=l.user.uid,_=s.likedByUsers.findIndex($=>$._id===g);s.likedByUsers.splice(_,1),s.likedByUsers=s.likedByUsers.map($=>$._id),yield r.db.collection("posts").doc(s._id).update({likedByUsers:[...s.likedByUsers]});const I=r._posts$.value,D=I.findIndex($=>$._id===t._id);t.likedByUsers.splice(_,1);const S={...t,likedByUsers:[...t.likedByUsers]};I.splice(D,1,S),r._posts$.next([...I])}),function(g){return u.apply(this,arguments)})})})()}_handleError(t){return console.log("err:",t),ta(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(aT),d.LFG(Du))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uT(n,e){const t="object"==typeof e;return new Promise((r,s)=>{let l,u=!1;n.subscribe({next:g=>{l=g,u=!0},error:s,complete:()=>{u?r(l):t?r(e.defaultValue):s(new ro)}})})}let JU=(()=>{class n{constructor(t,r){this.authService=t,this.db=r}toggleFollow(t,r,s){var u=this;return(0,fe.Z)(function*(){t?yield u.addFollow(r,s):yield u.removeFollow(r,s)})()}addFollow(t,r){var s=this;return(0,fe.Z)(function*(){var I;s.authService.loggedInUser$.pipe(Wn(1)).subscribe({next:(I=(0,fe.Z)(function*(D){yield s.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,D?.user?.uid]})}),function(S){return I.apply(this,arguments)})});const u=s.authService.loggedInUser$.pipe(Wn(1)),l=yield uT(u),g=s.db.collection("users").doc(l?.user?.uid).valueChanges().pipe(Wn(1)),_=yield uT(g);yield s.db.collection("users").doc(_._id).update({followingUsers:[..._.followingUsers,t._id]})})()}removeFollow(t,r){var s=this;return(0,fe.Z)(function*(){const u=s.authService.loggedInUser$.pipe(Wn(1)),l=yield uT(u),g=s.db.collection("users").doc(l?.user?.uid).valueChanges().pipe(Wn(1)),_=yield uT(g),I=Ig(t.followedByUsers),D=I.findIndex($=>$===l?.user?.uid);if(-1===D)return;I.splice(D,1),yield s.db.collection("users").doc(t._id).update({followedByUsers:I});const S=_.followingUsers.findIndex($=>$===t._id);_.followingUsers.splice(S,1),yield s.db.collection("users").doc(_._id).update({followingUsers:_.followingUsers})})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(Du),d.LFG(aT))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XU=(()=>{class n{transform(t){const s=Math.floor(Date.now()/1e3)-t/1e3;return s<60?"just now":s<3600?`${Math.floor(s/60)}m`:s<86400?`${Math.floor(s/3600)}h`:`${Math.floor(s/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=d.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function eV(n,e){if(1&n&&(d.TgZ(0,"div",1)(1,"div",2),d._UZ(2,"img",3),d.TgZ(3,"h5"),d._uU(4),d.TgZ(5,"span"),d._uU(6),d.ALo(7,"timeAgo"),d.qZA()()(),d.TgZ(8,"button",4),d.O4$(),d.TgZ(9,"svg",5),d._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),d.qZA()()()),2&n){const t=d.oxw();d.xp6(2),d.Q6J("src",t.creator.imgUrl,d.LSH),d.xp6(2),d.hij(" ",t.creator.fullName," "),d.xp6(2),d.hij("\u2022 ",d.lcZ(7,3,t.post.createdAt),"")}}let tV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"]],template:function(r,s){1&r&&d.YNc(0,eV,13,5,"div",0),2&r&&d.Q6J("ngIf",s.creator)},dependencies:[hi,XU],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})();const nV=function(n){return{"btn-toggle-follow":!0,following:n}};function rV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li"),d._UZ(1,"img",1),d.TgZ(2,"h4"),d._uU(3),d.qZA(),d.TgZ(4,"button",2),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.toggleFollow())}),d._uU(5),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("src",t.user.imgUrl,d.LSH),d.xp6(2),d.Oqu(t.user.fullName),d.xp6(1),d.Q6J("ngClass",d.VKq(4,nV,t.isFollowClicked)),d.xp6(1),d.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}let iV=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new d.vpe,this.isFollowClicked=!1,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,fe.Z)(function*(){const r=t.authService.getUserById(t.user._id),s=yield Wp(r),u=t.authService.loggedInUser$,l=yield Wp(u);t.isFollowClicked=!!s.followedByUsers.find(g=>g===l?.user?.uid),t.isComponentInitialized=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.user,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Du))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[[4,"ngIf"],["alt","user",3,"src"],[3,"ngClass","click"]],template:function(r,s){1&r&&d.YNc(0,rV,6,6,"li",0),2&r&&d.Q6J("ngIf",s.isComponentInitialized)},dependencies:[Hr,hi],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:45px;border-radius:50%;flex:1}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function sV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-user-row",7),d.NdJ("onToggleFollow",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleFollow.emit(s))}),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw();d.Q6J("post",r.post)("user",t)}}let oV=(()=>{class n{constructor(){this.onToggleLikedByUsersModal=new d.vpe,this.onToggleFollow=new d.vpe}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow"},decls:12,vars:1,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","user","onToggleFollow"]],template:function(r,s){1&r&&(d.TgZ(0,"article",0)(1,"div",1)(2,"h3"),d._uU(3,"Likes"),d.qZA(),d.TgZ(4,"button",2),d.NdJ("click",function(){return s.toggleLikedByUsersModal()}),d.O4$(),d.TgZ(5,"svg",3)(6,"title"),d._uU(7,"Close"),d.qZA(),d._UZ(8,"polyline",4)(9,"line",5),d.qZA()()(),d.kcU(),d.TgZ(10,"ul"),d.YNc(11,sV,1,2,"liked-by-user-row",6),d.qZA()()),2&r&&(d.xp6(11),d.Q6J("ngForOf",s.post.likedByUsers))},dependencies:[_s,iV],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:calc(100vw - 70px);max-width:27em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3.5em;position:relative}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1.2em;top:50%;transform:translateY(-50%);cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em}"]})}return n})();function aV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",20),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.toggleLike())}),d.O4$(),d.TgZ(1,"svg",21)(2,"title"),d._uU(3,"Like"),d.qZA(),d._UZ(4,"path",22),d.qZA()()}}function uV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",20),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.toggleLike())}),d.O4$(),d.TgZ(1,"svg",23)(2,"title"),d._uU(3,"Unlike"),d.qZA(),d._UZ(4,"path",24),d.qZA()()}}function cV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span"),d._uU(1," and "),d.TgZ(2,"span",30),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(3);return d.KtG(s.isLikedByUsersModalShown=!s.isLikedByUsersModalShown)}),d._uU(3),d.ALo(4,"number"),d.qZA()()}if(2&n){const t=d.oxw(3);d.xp6(3),d.AsE("",d.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function lV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"liked-by-users-list",31),d.NdJ("onToggleLikedByUsersModal",function(s){d.CHM(t);const u=d.oxw(3);return d.KtG(u.toggleLikedByUsersModal(s))})("onToggleFollow",function(s){d.CHM(t);const u=d.oxw(3);return d.KtG(u.onToggleFollow.emit(s))}),d.qZA()}if(2&n){const t=d.oxw(3);d.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function dV(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",25),d._UZ(1,"img",26),d.TgZ(2,"p"),d._uU(3," Liked by "),d.TgZ(4,"span",27),d._uU(5),d.qZA(),d.YNc(6,cV,5,4,"span",28),d.qZA(),d.YNc(7,lV,1,2,"liked-by-users-list",29),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("src",t.post.likedByUsers[0].imgUrl,d.LSH),d.xp6(4),d.Oqu(t.post.likedByUsers[0].fullName),d.xp6(1),d.Q6J("ngIf",t.post.likedByUsers.length>1),d.xp6(1),d.Q6J("ngIf",t.isLikedByUsersModalShown)}}function hV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",35),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(4);return d.KtG(s.isMoreClicked=!s.isMoreClicked)}),d._uU(1," more "),d.qZA()}}function fV(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",33),d._uU(2),d.qZA(),d._uU(3),d.ALo(4,"slice"),d.YNc(5,hV,2,0,"button",34),d.qZA()),2&n){const t=d.oxw(3);d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.AsE(" ",d.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120&&"..."," "),d.xp6(2),d.Q6J("ngIf",t.post.content.length>=120)}}function pV(n,e){if(1&n&&(d.TgZ(0,"p")(1,"span",33),d._uU(2),d.qZA(),d._uU(3),d.qZA()),2&n){const t=d.oxw(3);d.xp6(2),d.Oqu(t.creator.fullName),d.xp6(1),d.hij(" ",t.post.content," ")}}function gV(n,e){if(1&n&&(d.O4$(),d.kcU(),d.TgZ(0,"div",32),d.YNc(1,fV,6,8,"p",28),d.YNc(2,pV,4,2,"p",28),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",!t.isMoreClicked),d.xp6(1),d.Q6J("ngIf",t.isMoreClicked)}}function mV(n,e){if(1&n&&(d.TgZ(0,"li",1),d._UZ(1,"post-header",2)(2,"img",3),d.TgZ(3,"div",4)(4,"div",5)(5,"div",6),d.YNc(6,aV,5,0,"button",7),d.YNc(7,uV,5,0,"button",7),d.TgZ(8,"button",8),d.O4$(),d.TgZ(9,"svg",9)(10,"title"),d._uU(11,"Comment"),d.qZA(),d._UZ(12,"path",10),d.qZA()(),d.kcU(),d.TgZ(13,"button",11),d.O4$(),d.TgZ(14,"svg",12)(15,"title"),d._uU(16,"Share PostModel"),d.qZA(),d._UZ(17,"line",13)(18,"polygon",14),d.qZA()()(),d.kcU(),d.TgZ(19,"button",15),d.O4$(),d.TgZ(20,"svg",16)(21,"title"),d._uU(22,"Save"),d.qZA(),d._UZ(23,"polygon",17),d.qZA()()(),d.YNc(24,dV,8,4,"div",18),d.YNc(25,gV,3,2,"div",19),d.qZA()()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("post",t.post)("creator",t.creator),d.xp6(1),d.Q6J("src",t.post.imgUrl,d.LSH),d.xp6(4),d.Q6J("ngIf",!t.isLikeClicked),d.xp6(1),d.Q6J("ngIf",t.isLikeClicked),d.xp6(17),d.Q6J("ngIf",t.post.likedByUsers.length),d.xp6(1),d.Q6J("ngIf",t.creator)}}let yV=(()=>{class n{constructor(t){this.authService=t,this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.isLikeClicked=!1,this.isToggleLikeProcessing=!1,this.isComponentInitialized=!1}ngOnInit(){this.authService.getUserById(this.post.creatorId).pipe(Wn(1)).subscribe({next:r=>{this.creator=r}}),this.authService.loggedInUser$.pipe(Wn(1)).subscribe({next:r=>{this.loggedInUser=r}}),this.post.likedByUsers.find(r=>r._id===this.loggedInUser.user.uid)&&(this.isLikeClicked=!0),this.isComponentInitialized=!0}toggleLike(){this.isToggleLikeProcessing||(this.isToggleLikeProcessing=!0,setTimeout(()=>{this.isToggleLikeProcessing=!1},2e3),this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:Ig(this.post),isLikeClicked:this.isLikeClicked}))}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Du))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","post-card",4,"ngIf"],[1,"post-card"],[3,"post","creator"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment"],["aria-label","Comment","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],["class","content",4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24",1,"x1lliihq","x1n2onr6"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src"],[1,"username"],[4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"content"],[1,"creatorFullName"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"]],template:function(r,s){1&r&&d.YNc(0,mV,26,7,"li",0),2&r&&d.Q6J("ngIf",s.isComponentInitialized)},dependencies:[hi,tV,oV,qr,Xe],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}"]})}return n})();function _V(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"post-card",2),d.NdJ("onToggleLike",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleLike.emit(s))})("onToggleFollow",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleFollow.emit(s))}),d.qZA()}2&n&&d.Q6J("post",e.$implicit)}let vV=(()=>{class n{constructor(){this.onToggleLike=new d.vpe,this.onToggleFollow=new d.vpe}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow"},decls:3,vars:1,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow",4,"ngFor","ngForOf"],[3,"post","onToggleLike","onToggleFollow"]],template:function(r,s){1&r&&(d.TgZ(0,"section",0)(1,"ul"),d.YNc(2,_V,1,1,"post-card",1),d.qZA()()),2&r&&(d.xp6(2),d.Q6J("ngForOf",s.posts))},dependencies:[_s,yV],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function wV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"post-list",2),d.NdJ("onToggleLike",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleLike(s))})("onToggleFollow",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.onToggleFollow(s))}),d.qZA()()}if(2&n){const t=e.ngIf;d.xp6(1),d.Q6J("posts",t)}}let EV=(()=>{class n{constructor(t,r,s){this.postService=t,this.authService=r,this.userService=s}ngOnInit(){this.posts$=this.postService.posts$}onToggleLike(t){var r=this;return(0,fe.Z)(function*(){yield r.postService.toggleLike(t.isLikeClicked,t.post)})()}onToggleFollow(t){var r=this;this.authService.getUserById(t.user._id).pipe(Wn(1)).subscribe(function(){var s=(0,fe.Z)(function*(u){t.user=u,yield r.userService.toggleFollow(t.isFollowClicked,t.user,t.post)});return function(u){return s.apply(this,arguments)}}())}ngOnDestroy(){}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(vk),d.Y36(Du),d.Y36(JU))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["home-page-page"]],decls:2,vars:3,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow"]],template:function(r,s){1&r&&(d.YNc(0,wV,2,1,"section",0),d.ALo(1,"async")),2&r&&d.Q6J("ngIf",d.lcZ(1,1,s.posts$))},dependencies:[hi,vV,Yo]})}return n})(),wk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq))};static#t=this.\u0275dir=d.lG2({type:n})}return n})(),Hf=(()=>{class n extends wk{static#e=this.\u0275fac=function(){let t;return function(s){return(t||(t=d.n5z(n)))(s||n)}}();static#t=this.\u0275dir=d.lG2({type:n,features:[d.qOj]})}return n})();const Tu=new d.OlP("NgValueAccessor"),bV={provide:Tu,useExisting:(0,d.Gpc)(()=>cT),multi:!0},TV=new d.OlP("CompositionEventMode");let cT=(()=>{class n extends wk{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function DV(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(TV,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&d.NdJ("input",function(l){return s._handleInput(l.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(l){return s._compositionEnd(l.target.value)})},features:[d._Bn([bV]),d.qOj]})}return n})();const ms=new d.OlP("NgValidators"),Td=new d.OlP("NgAsyncValidators");function Ok(n){return null!=n}function Pk(n){return(0,d.QGY)(n)?(0,nr.D)(n):n}function Nk(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Rk(n,e){return e.map(t=>t(n))}function kk(n){return n.map(e=>function SV(n){return!n.validate}(e)?e:t=>e.validate(t))}function uP(n){return null!=n?function Fk(n){if(!n)return null;const e=n.filter(Ok);return 0==e.length?null:function(t){return Nk(Rk(t,e))}}(kk(n)):null}function cP(n){return null!=n?function Lk(n){if(!n)return null;const e=n.filter(Ok);return 0==e.length?null:function(t){return function CV(...n){const e=(0,to.jO)(n),{args:t,keys:r}=lr(n),s=new bi.y(u=>{const{length:l}=t;if(!l)return void u.complete();const g=new Array(l);let _=l,I=l;for(let D=0;D<l;D++){let S=!1;(0,Vu.Xf)(t[D]).subscribe((0,Ti.x)(u,$=>{S||(S=!0,I--),g[D]=$},()=>_--,void 0,()=>{(!_||!S)&&(I||u.next(r?no(r,g):g),u.complete())}))}});return e?s.pipe(Lu(e)):s}(Rk(t,e).map(Pk)).pipe((0,Qt.U)(Nk))}}(kk(n)):null}function Uk(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function lP(n){return n?Array.isArray(n)?n:[n]:[]}function dT(n,e){return Array.isArray(n)?n.includes(e):n===e}function jk(n,e){const t=lP(e);return lP(n).forEach(s=>{dT(t,s)||t.push(s)}),t}function $k(n,e){return lP(e).filter(t=>!dT(n,t))}class Hk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ps extends Hk{get formDirective(){return null}get path(){return null}}class Ad extends Hk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gk{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zk=(()=>{class n extends Gk{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Ad,2))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&d.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[d.qOj]})}return n})(),qk=(()=>{class n extends Gk{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Ps,10))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){2&r&&d.ekj("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[d.qOj]})}return n})();const Ew="VALID",fT="INVALID",ty="PENDING",Cw="DISABLED";function fP(n){return(pT(n)?n.validators:n)||null}function pP(n,e){return(pT(e)?e.asyncValidators:n)||null}function pT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Yk{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ew}get invalid(){return this.status===fT}get pending(){return this.status==ty}get disabled(){return this.status===Cw}get enabled(){return this.status!==Cw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(jk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($k(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($k(e,this._rawAsyncValidators))}hasValidator(e){return dT(this._rawValidators,e)}hasAsyncValidator(e){return dT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ty,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ew,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ew||this.status===ty)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cw:Ew}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ty,this._hasOwnPendingAsyncValidator=!0;const t=Pk(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Cw:this.errors?fT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ty)?ty:this._anyControlsHaveStatus(fT)?fT:Ew}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function PV(n){return Array.isArray(n)?uP(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function NV(n){return Array.isArray(n)?cP(n):n||null}(this._rawAsyncValidators)}}class gP extends Yk{constructor(e,t,r){super(fP(t),pP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Kk(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Wk(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Gf=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Iw}),Iw="always";function bw(n,e,t=Iw){mP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function FV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Qk(n,e)})}(n,e),function UV(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function LV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Qk(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function kV(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function yT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mP(n,e){const t=function Vk(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Uk(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Bk(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Uk(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();yT(e._rawValidators,s),yT(e._rawAsyncValidators,s)}function Qk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const HV={provide:Ps,useExisting:(0,d.Gpc)(()=>vT)},Dw=(()=>Promise.resolve())();let vT=(()=>{class n extends Ps{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new gP({},uP(t),cP(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Dw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),bw(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Dw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Dw.then(()=>{const r=this._findContainer(t.path),s=new gP({});(function Jk(n,e){mP(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Dw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Dw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Xk(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(ms,10),d.Y36(Td,10),d.Y36(Gf,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){1&r&&d.NdJ("submit",function(l){return s.onSubmit(l)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([HV]),d.qOj]})}return n})();function eF(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function tF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const nF=class extends Yk{constructor(e=null,t,r){super(fP(t),pP(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=tF(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){tF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},qV={provide:Ad,useExisting:(0,d.Gpc)(()=>wP)},sF=(()=>Promise.resolve())();let wP=(()=>{class n extends Ad{constructor(t,r,s,u,l,g){super(),this._changeDetectorRef=l,this.callSetDisabledState=g,this.control=new nF,this._registered=!1,this.name="",this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function vP(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===cT?t=u:function jV(n){return Object.getPrototypeOf(n.constructor)===Hf}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function _P(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){sF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,d.VuI)(r);sF.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function gT(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Ps,9),d.Y36(ms,10),d.Y36(Td,10),d.Y36(Tu,10),d.Y36(d.sBO,8),d.Y36(Gf,8))};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([qV]),d.qOj,d.TTD]})}return n})(),oF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),uF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({})}return n})();const EP=new d.OlP("NgModelWithFormControlWarning");let DF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[uF]})}return n})(),y5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gf,useValue:t.callSetDisabledState??Iw}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[DF]})}return n})(),_5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:EP,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Gf,useValue:t.callSetDisabledState??Iw}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[DF]})}return n})();function v5(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.onLogInWithEmailAndPassword())}),d.TgZ(1,"input",13),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.email=s)}),d.qZA(),d.TgZ(2,"input",14),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.password=s)}),d.qZA(),d.TgZ(3,"button",15),d._uU(4,"Log in"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}function w5(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.onRegisterWithEmailAndPassword())}),d.TgZ(1,"input",16),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.fullName=s)}),d.qZA(),d.TgZ(2,"input",13),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.email=s)}),d.qZA(),d.TgZ(3,"input",14),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.userCred.password=s)}),d.qZA(),d.TgZ(4,"button",17),d._uU(5,"Register"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.userCred.fullName),d.xp6(1),d.Q6J("ngModel",t.userCred.email),d.xp6(1),d.Q6J("ngModel",t.userCred.password)}}let E5=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0}ngOnInit(){}onLogInWithGoogle(){var t=this;return(0,fe.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(Wn(1)).subscribe({next:s=>{s&&t.router.navigateByUrl("/")},error:s=>{console.error(s)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,fe.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(Wn(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,fe.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(Wn(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Du),d.Y36(Wr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,s){1&r&&(d.TgZ(0,"section",0)(1,"div",1),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()(),d.YNc(4,v5,5,2,"form",4),d.YNc(5,w5,6,3,"form",4),d.kcU(),d.TgZ(6,"p",5),d.NdJ("click",function(){return s.isLogInFormShown=!s.isLogInFormShown}),d._uU(7," Don't you have a user? Register here "),d.qZA(),d.TgZ(8,"button",6),d.NdJ("click",function(){return s.onLogInWithGoogle()}),d.O4$(),d.TgZ(9,"svg",7),d._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),d.qZA(),d.kcU(),d.TgZ(14,"span"),d._uU(15,"Log in with Google"),d.qZA()()()),2&r&&(d.xp6(4),d.Q6J("ngIf",s.isLogInFormShown),d.xp6(1),d.Q6J("ngIf",!s.isLogInFormShown))},dependencies:[hi,oF,cT,zk,qk,wP,vT],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})(),C5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["message-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,s){1&r&&(d.TgZ(0,"p"),d._uU(1,"message-page works!"),d.qZA())}})}return n})(),I5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,s){1&r&&(d.TgZ(0,"p"),d._uU(1,"notification-page works!"),d.qZA())}})}return n})(),b5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["create-post-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,consts:[[1,"create-post-page"]],template:function(r,s){1&r&&(d.TgZ(0,"section",0),d._uU(1,"Hello"),d.qZA())}})}return n})();const Tw=()=>{let n=null;return(0,d.f3M)(Du).loggedInUser$.pipe(Wn(1)).subscribe({next:e=>{n=e}}),!!n||((0,d.f3M)(Wr).navigateByUrl("/login"),!1)},D5=[{path:"",component:EV,canActivate:[Tw]},{path:"login",component:E5,canActivate:[()=>{let n=null;return(0,d.f3M)(Du).loggedInUser$.pipe(Wn(1)).subscribe({next:e=>{n=e}}),!n||((0,d.f3M)(Wr).navigateByUrl("/"),!1)}]},{path:"message",component:C5,canActivate:[Tw]},{path:"notification",component:I5,canActivate:[Tw]},{path:"create-post",component:b5,canActivate:[Tw]},{path:"profile",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["profile"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,s){1&r&&(d.TgZ(0,"p"),d._uU(1,"profile works!"),d.qZA())}})}return n})(),canActivate:[Tw]}];let T5=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({imports:[zp.forRoot(D5,{useHash:!0}),zp]})}return n})();function A5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",31),d.qZA())}function S5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",30),d._UZ(1,"path",32),d.qZA())}function M5(n,e){if(1&n&&d._UZ(0,"img",33),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function x5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",34),d._UZ(1,"path",35)(2,"circle",36),d.qZA())}function O5(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",37)(1,"ul")(2,"li",38),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const P5=function(){return{exact:!0}};function N5(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"div",3),d.O4$(),d.TgZ(3,"svg",4),d._UZ(4,"path",5),d.qZA()(),d.kcU(),d.TgZ(5,"nav")(6,"ul")(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8),d.qZA()(),d.kcU(),d.TgZ(10,"li",9),d.O4$(),d.TgZ(11,"svg",10),d._UZ(12,"path",11)(13,"path",12),d.qZA()(),d.kcU(),d.TgZ(14,"li",13,14),d.YNc(16,A5,2,0,"svg",15),d.YNc(17,S5,2,0,"svg",15),d.qZA(),d.TgZ(18,"li",16),d.O4$(),d.TgZ(19,"svg",17),d._UZ(20,"path",18)(21,"line",19)(22,"line",20),d.qZA()(),d.kcU(),d.TgZ(23,"li",21),d.YNc(24,M5,1,1,"img",22),d.YNc(25,x5,3,0,"ng-template",null,23,d.W1O),d.qZA()()()(),d.TgZ(27,"div",24),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.isExtraMenuOpen=!s.isExtraMenuOpen)}),d.O4$(),d.TgZ(28,"svg",25),d._UZ(29,"line",26)(30,"line",27)(31,"line",28),d.qZA(),d.YNc(32,O5,4,0,"div",29),d.qZA()()}if(2&n){const t=d.MAs(15),r=d.MAs(26),s=d.oxw();d.xp6(7),d.Q6J("routerLinkActiveOptions",d.DdM(6,P5)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",s.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",s.isExtraMenuOpen)}}let R5=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,fe.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Du),d.Y36(Wr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,s){1&r&&d.YNc(0,N5,33,7,"section",0),2&r&&d.Q6J("ngIf",s.user&&s.user.user)},dependencies:[hi,Gp,bh],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.19);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:55px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function k5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",28),d.qZA())}function F5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",27),d._UZ(1,"path",29),d.qZA())}function L5(n,e){if(1&n&&d._UZ(0,"img",30),2&n){const t=d.oxw(2);d.Q6J("src",t.user.user.photoURL,d.LSH)}}function U5(n,e){1&n&&(d.O4$(),d.TgZ(0,"svg",31),d._UZ(1,"path",32)(2,"circle",33),d.qZA())}function V5(n,e){if(1&n){const t=d.EpF();d.O4$(),d.kcU(),d.TgZ(0,"div",34)(1,"ul")(2,"li",35),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.onLogOut())}),d._uU(3,"Log out"),d.qZA()()()}}const B5=function(){return{exact:!0}};function j5(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),d.O4$(),d.TgZ(5,"svg",4),d._UZ(6,"path",5),d.qZA()(),d.kcU(),d.TgZ(7,"li",6),d.O4$(),d.TgZ(8,"svg",7),d._UZ(9,"path",8)(10,"path",9),d.qZA()(),d.kcU(),d.TgZ(11,"li",10,11),d.YNc(13,k5,2,0,"svg",12),d.YNc(14,F5,2,0,"svg",12),d.qZA(),d.TgZ(15,"li",13),d.O4$(),d.TgZ(16,"svg",14),d._UZ(17,"path",15)(18,"line",16)(19,"line",17),d.qZA()(),d.kcU(),d.TgZ(20,"li",18),d.YNc(21,L5,1,1,"img",19),d.YNc(22,U5,3,0,"ng-template",null,20,d.W1O),d.qZA(),d.TgZ(24,"li",21),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.isExtraMenuOpen=!s.isExtraMenuOpen)}),d.O4$(),d.TgZ(25,"svg",22),d._UZ(26,"line",23)(27,"line",24)(28,"line",25),d.qZA(),d.YNc(29,V5,4,0,"div",26),d.qZA()()()()()}if(2&n){const t=d.MAs(12),r=d.MAs(23),s=d.oxw();d.xp6(4),d.Q6J("routerLinkActiveOptions",d.DdM(6,B5)),d.xp6(9),d.Q6J("ngIf",!t.classList.contains("active")),d.xp6(1),d.Q6J("ngIf",t.classList.contains("active")),d.xp6(7),d.Q6J("ngIf",s.user.user.photoURL)("ngIfElse",r),d.xp6(8),d.Q6J("ngIf",s.isExtraMenuOpen)}}let $5=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,fe.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Du),d.Y36(Wr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","user",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,s){1&r&&d.YNc(0,j5,30,7,"section",0),2&r&&d.Q6J("ngIf",s.user&&s.user.user)},dependencies:[hi,Gp,bh],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;z-index:99;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#5b5b5b;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})(),H5=(()=>{class n{constructor(t){this.router=t}onClickLogo(){this.router.navigateByUrl("/")}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Wr))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-header-mobile"]],decls:4,vars:0,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"]],template:function(r,s){1&r&&(d.TgZ(0,"header",0)(1,"div",1),d.NdJ("click",function(){return s.onClickLogo()}),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3),d.qZA()()())},styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:99;top:0;border-block-end:1px solid rgba(255,255,255,.27);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}"]})}return n})();function G5(n,e){1&n&&d._UZ(0,"router-outlet")}function z5(n,e){1&n&&d._UZ(0,"app-header-mobile")}function q5(n,e){1&n&&d._UZ(0,"aside-menu")}function Z5(n,e){1&n&&(d.TgZ(0,"main",3),d._UZ(1,"router-outlet"),d.qZA())}function W5(n,e){1&n&&d._UZ(0,"menu-mobile")}function K5(n,e){if(1&n&&(d.TgZ(0,"section"),d.YNc(1,G5,1,0,"router-outlet",1),d.YNc(2,z5,1,0,"app-header-mobile",1),d.YNc(3,q5,1,0,"aside-menu",1),d.YNc(4,Z5,2,0,"main",2),d.YNc(5,W5,1,0,"menu-mobile",1),d.qZA()),2&n){const t=d.oxw();d.Tol("/login"===t.routerUrl?"main-app login-layout":"main-app app-layout"),d.xp6(1),d.Q6J("ngIf","/login"===t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl),d.xp6(1),d.Q6J("ngIf","/login"!==t.routerUrl)}}let Y5=(()=>{class n{constructor(t,r){this.router=t,this.postService=r,this.routerUrl=this.router.url,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,fe.Z)(function*(){t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof uo&&(t.routerUrl=t.router.url)}),t.postService.getPosts().pipe(Wn(1)).subscribe({error:r=>{console.error(r)},complete:()=>{t.isComponentInitialized=!0}})})()}ngOnDestroy(){this.routerUrlSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(d.Y36(Wr),d.Y36(vk))};static#t=this.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,s){1&r&&d.YNc(0,K5,6,7,"section",0),2&r&&d.Q6J("ngIf",s.isComponentInitialized)},dependencies:[hi,lh,R5,$5,H5]})}return n})();class wT{}class ET{}class Au{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Au?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Au;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Au?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(g=>-1===u.indexOf(g)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(u=>u.toString()),s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Q5{encodeKey(e){return TF(e)}encodeValue(e){return TF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const X5=/%(\d[a-f0-9])/gi,e6={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function TF(n){return encodeURIComponent(n).replace(X5,(e,t)=>e6[t]??e)}function CT(n){return`${n}`}class Sd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Q5,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function J5(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,g]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],_=t.get(l)||[];_.push(g),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(CT):[CT(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Sd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(CT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(CT(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class t6{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function AF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function SF(n){return typeof Blob<"u"&&n instanceof Blob}function MF(n){return typeof FormData<"u"&&n instanceof FormData}class Aw{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function n6(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Au),this.context||(this.context=new t6),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+l}}else this.params=new Sd,this.urlWithParams=t}serializeBody(){return null===this.body?null:AF(this.body)||SF(this.body)||MF(this.body)||function r6(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Sd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||MF(this.body)?null:SF(this.body)?this.body.type||null:AF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Sd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,I=e.params||this.params;const D=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((S,$)=>S.set($,e.setHeaders[$]),_)),e.setParams&&(I=Object.keys(e.setParams).reduce((S,$)=>S.set($,e.setParams[$]),I)),new Aw(t,r,u,{params:I,headers:_,context:D,reportProgress:g,responseType:s,withCredentials:l})}}var ny=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ny||{});class SP{constructor(e,t=200,r="OK"){this.headers=e.headers||new Au,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class MP extends SP{constructor(e={}){super(e),this.type=ny.ResponseHeader}clone(e={}){return new MP({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ry extends SP{constructor(e={}){super(e),this.type=ny.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ry({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class xF extends SP{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function xP(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let i6=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof Aw)u=t;else{let _,I;_=s.headers instanceof Au?s.headers:new Au(s.headers),s.params&&(I=s.params instanceof Sd?s.params:new Sd({fromObject:s.params})),u=new Aw(t,r,void 0!==s.body?s.body:null,{headers:_,context:s.context,params:I,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=(0,Pt.of)(u).pipe(Ao(_=>this.handler.handle(_)));if(t instanceof Aw||"events"===s.observe)return l;const g=l.pipe(si(_=>_ instanceof ry));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,Qt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,Qt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,Qt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,Qt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Sd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,xP(s,r))}post(t,r,s={}){return this.request("POST",t,xP(s,r))}put(t,r,s={}){return this.request("PUT",t,xP(s,r))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(wT))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function NF(n,e){return e(n)}function o6(n,e){return(t,r)=>e.intercept(t,{handle:s=>n(s,r)})}const u6=new d.OlP(""),Sw=new d.OlP(""),RF=new d.OlP("");function c6(){let n=null;return(e,t)=>{null===n&&(n=((0,d.f3M)(u6,{optional:!0})??[]).reduceRight(o6,NF));const r=(0,d.f3M)(d.HDt),s=r.add();return n(e,t).pipe(ra(()=>r.remove(s)))}}let kF=(()=>{class n extends wT{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,d.f3M)(d.HDt)}handle(t){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(Sw),...this.injector.get(RF,[])]));this.chain=s.reduceRight((u,l)=>function a6(n,e,t){return(r,s)=>t.runInContext(()=>e(r,u=>n(u,s)))}(u,l,this.injector),NF)}const r=this.pendingTasks.add();return this.chain(t,s=>this.backend.handle(s)).pipe(ra(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ET),d.LFG(d.lqb))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const f6=/^\)\]\}',?\n/;let LF=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new d.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,nr.D)(r.\u0275loadImpl()):(0,Pt.of)(null)).pipe((0,$n.w)(()=>new bi.y(u=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((Fe,Le)=>l.setRequestHeader(Fe,Le.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Fe=t.detectContentTypeHeader();null!==Fe&&l.setRequestHeader("Content-Type",Fe)}if(t.responseType){const Fe=t.responseType.toLowerCase();l.responseType="json"!==Fe?Fe:"text"}const g=t.serializeBody();let _=null;const I=()=>{if(null!==_)return _;const Fe=l.statusText||"OK",Le=new Au(l.getAllResponseHeaders()),ht=function p6(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return _=new MP({headers:Le,status:l.status,statusText:Fe,url:ht}),_},D=()=>{let{headers:Fe,status:Le,statusText:ht,url:Vt}=I(),wt=null;204!==Le&&(wt=typeof l.response>"u"?l.responseText:l.response),0===Le&&(Le=wt?200:0);let jt=Le>=200&&Le<300;if("json"===t.responseType&&"string"==typeof wt){const cn=wt;wt=wt.replace(f6,"");try{wt=""!==wt?JSON.parse(wt):null}catch(xn){wt=cn,jt&&(jt=!1,wt={error:xn,text:wt})}}jt?(u.next(new ry({body:wt,headers:Fe,status:Le,statusText:ht,url:Vt||void 0})),u.complete()):u.error(new xF({error:wt,headers:Fe,status:Le,statusText:ht,url:Vt||void 0}))},S=Fe=>{const{url:Le}=I(),ht=new xF({error:Fe,status:l.status||0,statusText:l.statusText||"Unknown Error",url:Le||void 0});u.error(ht)};let $=!1;const J=Fe=>{$||(u.next(I()),$=!0);let Le={type:ny.DownloadProgress,loaded:Fe.loaded};Fe.lengthComputable&&(Le.total=Fe.total),"text"===t.responseType&&l.responseText&&(Le.partialText=l.responseText),u.next(Le)},we=Fe=>{let Le={type:ny.UploadProgress,loaded:Fe.loaded};Fe.lengthComputable&&(Le.total=Fe.total),u.next(Le)};return l.addEventListener("load",D),l.addEventListener("error",S),l.addEventListener("timeout",S),l.addEventListener("abort",S),t.reportProgress&&(l.addEventListener("progress",J),null!==g&&l.upload&&l.upload.addEventListener("progress",we)),l.send(g),u.next({type:ny.Sent}),()=>{l.removeEventListener("error",S),l.removeEventListener("abort",S),l.removeEventListener("load",D),l.removeEventListener("timeout",S),t.reportProgress&&(l.removeEventListener("progress",J),null!==g&&l.upload&&l.upload.removeEventListener("progress",we)),l.readyState!==l.DONE&&l.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ws))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();const OP=new d.OlP("XSRF_ENABLED"),UF=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),VF=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class BF{}let y6=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=dn(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(d.LFG(ve),d.LFG(d.Lbi),d.LFG(UF))};static#t=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac})}return n})();function _6(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(OP)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(BF).getToken(),s=(0,d.f3M)(VF);return null!=r&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),e(n)}var Md=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Md||{});function v6(...n){const e=[i6,LF,kF,{provide:wT,useExisting:kF},{provide:ET,useExisting:LF},{provide:Sw,useValue:_6,multi:!0},{provide:OP,useValue:!0},{provide:BF,useClass:y6}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const jF=new d.OlP("LEGACY_INTERCEPTOR_FN");function w6(){return function qf(n,e){return{\u0275kind:n,\u0275providers:e}}(Md.LegacyInterceptors,[{provide:jF,useFactory:c6},{provide:Sw,useExisting:jF,multi:!0}])}let E6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n});static#n=this.\u0275inj=d.cJS({providers:[v6(w6())]})}return n})();const A6_firebaseConfig={projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",storageBucket:"instagram-clone-gilshaashua.appspot.com",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"};var $F=M(7582),S6=M(9519);const x6=new d.OlP("angularfire2.messaging.vapid-key"),O6=new d.OlP("angularfire2.messaging.service-worker-registeration");let HF=(()=>{class n{constructor(t,r,s,u,l,g,_){const I=_,D=(0,Pt.of)(void 0).pipe((0,Ta.R)(l.outsideAngular),(0,Wo.Q)(l.insideAngular),(0,$n.w)(S6.Gb),(0,$n.w)(J=>J?M.e(922).then(M.bind(M,5922)):io.E),(0,Qt.U)(()=>(0,xi.on)(t,u,r)),(0,$n.w)(J=>(0,xi.cc)(`${J.name}.messaging`,"AngularFireMessaging",J.name,()=>(0,$F.mG)(this,void 0,void 0,function*(){return J.messaging()}),[])),RO({bufferSize:1,refCount:!1}));this.requestPermission=D.pipe((0,Ta.R)(l.outsideAngular),(0,Wo.Q)(l.insideAngular),(0,$n.w)(()=>Notification.requestPermission())),this.getToken=D.pipe((0,Ta.R)(l.outsideAngular),(0,Wo.Q)(l.insideAngular),(0,$n.w)(J=>(0,$F.mG)(this,void 0,void 0,function*(){if("granted"===Notification.permission){const we=I?yield I:null;return yield J.getToken({vapidKey:g,serviceWorkerRegistration:we})}return null})));const S=new bi.y(J=>{navigator.permissions.query({name:"notifications"}).then(we=>{we.onchange=()=>J.next()})}),$=D.pipe((0,Ta.R)(l.outsideAngular),(0,Wo.Q)(l.insideAngular),YD(S),YD(this.getToken));return this.tokenChanges=D.pipe((0,Ta.R)(l.outsideAngular),(0,Wo.Q)(l.insideAngular),(0,$n.w)(()=>To(this.getToken,$))),this.messages=D.pipe((0,Ta.R)(l.outsideAngular),(0,Wo.Q)(l.insideAngular),(0,$n.w)(J=>new bi.y(we=>J.onMessage(we)))),this.requestToken=D.pipe((0,Ta.R)(l.outsideAngular),(0,Wo.Q)(l.insideAngular),(0,$n.w)(()=>this.requestPermission),as(()=>(0,Pt.of)(null)),(0,Ai.z)(()=>this.tokenChanges)),this.deleteToken=()=>D.pipe((0,Ta.R)(l.outsideAngular),(0,Wo.Q)(l.insideAngular),(0,$n.w)(J=>J.deleteToken()),$a(!1)),(0,xi.pX)(this,D,u)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xi.Dh),d.LFG(xi.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Dn.HU),d.LFG(x6,8),d.LFG(O6,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),P6=(()=>{class n{constructor(){sP.Z.registerVersion("angularfire",Dn.q4.full,"fcm-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[HF]}),n})(),N6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=d.oAB({type:n,bootstrap:[Y5]});static#n=this.\u0275inj=d.cJS({imports:[Ru,T5,E6,y5,_5,xi.hO.initializeApp(A6_firebaseConfig),$U,P6,YU]})}return n})();ap().bootstrapModule(N6).catch(n=>console.error(n))},5619:(_t,De,M)=>{M.d(De,{X:()=>V});var d=M(8645);class V extends d.x{constructor(Y){super(),this._value=Y}get value(){return this.getValue()}_subscribe(Y){const se=super._subscribe(Y);return!se.closed&&Y.next(this._value),se}getValue(){const{hasError:Y,thrownError:se,_value:ve}=this;if(Y)throw se;return this._throwIfClosed(),ve}next(Y){super.next(this._value=Y)}}},5592:(_t,De,M)=>{M.d(De,{y:()=>Oe});var d=M(305),V=M(7394),N=M(4850),Y=M(8407),se=M(2653),ve=M(4674),Ee=M(1441);let Oe=(()=>{class ne{constructor(Ie){Ie&&(this._subscribe=Ie)}lift(Ie){const Ye=new ne;return Ye.source=this,Ye.operator=Ie,Ye}subscribe(Ie,Ye,ke){const Ke=function q(ne){return ne&&ne instanceof d.Lv||function U(ne){return ne&&(0,ve.m)(ne.next)&&(0,ve.m)(ne.error)&&(0,ve.m)(ne.complete)}(ne)&&(0,V.Nn)(ne)}(Ie)?Ie:new d.Hp(Ie,Ye,ke);return(0,Ee.x)(()=>{const{operator:Se,source:ft}=this;Ke.add(Se?Se.call(Ke,ft):ft?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(Ye){Ie.error(Ye)}}forEach(Ie,Ye){return new(Ye=he(Ye))((ke,Ke)=>{const Se=new d.Hp({next:ft=>{try{Ie(ft)}catch(pt){Ke(pt),Se.unsubscribe()}},error:Ke,complete:ke});this.subscribe(Se)})}_subscribe(Ie){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Ie)}[N.L](){return this}pipe(...Ie){return(0,Y.U)(Ie)(this)}toPromise(Ie){return new(Ie=he(Ie))((Ye,ke)=>{let Ke;this.subscribe(Se=>Ke=Se,Se=>ke(Se),()=>Ye(Ke))})}}return ne.create=Be=>new ne(Be),ne})();function he(ne){var Be;return null!==(Be=ne??se.config.Promise)&&void 0!==Be?Be:Promise}},8645:(_t,De,M)=>{M.d(De,{x:()=>Ee});var d=M(5592),V=M(7394);const Y=(0,M(2306).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=M(9039),ve=M(1441);let Ee=(()=>{class he extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ne=new Oe(this,this);return ne.operator=q,ne}_throwIfClosed(){if(this.closed)throw new Y}next(q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(q)}})}error(q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ne}=this;for(;ne.length;)ne.shift().error(q)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ne,isStopped:Be,observers:Ie}=this;return ne||Be?V.Lc:(this.currentObservers=null,Ie.push(q),new V.w0(()=>{this.currentObservers=null,(0,se.P)(Ie,q)}))}_checkFinalizedStatuses(q){const{hasError:ne,thrownError:Be,isStopped:Ie}=this;ne?q.error(Be):Ie&&q.complete()}asObservable(){const q=new d.y;return q.source=this,q}}return he.create=(U,q)=>new Oe(U,q),he})();class Oe extends Ee{constructor(U,q){super(),this.destination=U,this.source=q}next(U){var q,ne;null===(ne=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ne||ne.call(q,U)}error(U){var q,ne;null===(ne=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ne||ne.call(q,U)}complete(){var U,q;null===(q=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===q||q.call(U)}_subscribe(U){var q,ne;return null!==(ne=null===(q=this.source)||void 0===q?void 0:q.subscribe(U))&&void 0!==ne?ne:V.Lc}}},305:(_t,De,M)=>{M.d(De,{Hp:()=>ke,Lv:()=>ne});var d=M(4674),V=M(7394),N=M(2653),Y=M(3894),se=M(2420);const ve=he("C",void 0,void 0);function he(ee,Te,ue){return{kind:ee,value:Te,error:ue}}var U=M(7599),q=M(1441);class ne extends V.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,V.Nn)(Te)&&Te.add(this)):this.destination=pt}static create(Te,ue,Me){return new ke(Te,ue,Me)}next(Te){this.isStopped?ft(function Oe(ee){return he("N",ee,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?ft(function Ee(ee){return he("E",void 0,ee)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?ft(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Ie(ee,Te){return Be.call(ee,Te)}class Ye{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:ue}=this;if(ue.next)try{ue.next(Te)}catch(Me){Ke(Me)}}error(Te){const{partialObserver:ue}=this;if(ue.error)try{ue.error(Te)}catch(Me){Ke(Me)}else Ke(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(ue){Ke(ue)}}}class ke extends ne{constructor(Te,ue,Me){let je;if(super(),(0,d.m)(Te)||!Te)je={next:Te??void 0,error:ue??void 0,complete:Me??void 0};else{let k;this&&N.config.useDeprecatedNextContext?(k=Object.create(Te),k.unsubscribe=()=>this.unsubscribe(),je={next:Te.next&&Ie(Te.next,k),error:Te.error&&Ie(Te.error,k),complete:Te.complete&&Ie(Te.complete,k)}):je=Te}this.destination=new Ye(je)}}function Ke(ee){N.config.useDeprecatedSynchronousErrorHandling?(0,q.O)(ee):(0,Y.h)(ee)}function ft(ee,Te){const{onStoppedNotification:ue}=N.config;ue&&U.z.setTimeout(()=>ue(ee,Te))}const pt={closed:!0,next:se.Z,error:function Se(ee){throw ee},complete:se.Z}},7394:(_t,De,M)=>{M.d(De,{Lc:()=>ve,w0:()=>se,Nn:()=>Ee});var d=M(4674);const N=(0,M(2306).d)(he=>function(q){he(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ne,Be)=>`${Be+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var Y=M(9039);class se{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Ie of q)Ie.remove(this);else q.remove(this);const{initialTeardown:ne}=this;if((0,d.m)(ne))try{ne()}catch(Ie){U=Ie instanceof N?Ie.errors:[Ie]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Ie of Be)try{Oe(Ie)}catch(Ye){U=U??[],Ye instanceof N?U=[...U,...Ye.errors]:U.push(Ye)}}if(U)throw new N(U)}}add(U){var q;if(U&&U!==this)if(this.closed)Oe(U);else{if(U instanceof se){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(U)}}_hasParent(U){const{_parentage:q}=this;return q===U||Array.isArray(q)&&q.includes(U)}_addParent(U){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(U),q):q?[q,U]:U}_removeParent(U){const{_parentage:q}=this;q===U?this._parentage=null:Array.isArray(q)&&(0,Y.P)(q,U)}remove(U){const{_finalizers:q}=this;q&&(0,Y.P)(q,U),U instanceof se&&U._removeParent(this)}}se.EMPTY=(()=>{const he=new se;return he.closed=!0,he})();const ve=se.EMPTY;function Ee(he){return he instanceof se||he&&"closed"in he&&(0,d.m)(he.remove)&&(0,d.m)(he.add)&&(0,d.m)(he.unsubscribe)}function Oe(he){(0,d.m)(he)?he():he.unsubscribe()}},2653:(_t,De,M)=>{M.d(De,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(_t,De,M)=>{M.d(De,{E:()=>V});const V=new(M(5592).y)(se=>se.complete())},2459:(_t,De,M)=>{M.d(De,{D:()=>Te});var d=M(4829),V=M(3093),N=M(5137),ve=M(5592),Oe=M(4971),he=M(4674),U=M(7103);function ne(ue,Me){if(!ue)throw new Error("Iterable cannot be null");return new ve.y(je=>{(0,U.f)(je,Me,()=>{const k=ue[Symbol.asyncIterator]();(0,U.f)(je,Me,()=>{k.next().then(te=>{te.done?je.complete():je.next(te.value)})},0,!0)})})}var Be=M(8382),Ie=M(4026),Ye=M(4266),ke=M(3664),Ke=M(5726),Se=M(9853),ft=M(541);function Te(ue,Me){return Me?function ee(ue,Me){if(null!=ue){if((0,Be.c)(ue))return function Y(ue,Me){return(0,d.Xf)(ue).pipe((0,N.R)(Me),(0,V.Q)(Me))}(ue,Me);if((0,Ye.z)(ue))return function Ee(ue,Me){return new ve.y(je=>{let k=0;return Me.schedule(function(){k===ue.length?je.complete():(je.next(ue[k++]),je.closed||this.schedule())})})}(ue,Me);if((0,Ie.t)(ue))return function se(ue,Me){return(0,d.Xf)(ue).pipe((0,N.R)(Me),(0,V.Q)(Me))}(ue,Me);if((0,Ke.D)(ue))return ne(ue,Me);if((0,ke.T)(ue))return function q(ue,Me){return new ve.y(je=>{let k;return(0,U.f)(je,Me,()=>{k=ue[Oe.h](),(0,U.f)(je,Me,()=>{let te,be;try{({value:te,done:be}=k.next())}catch(it){return void je.error(it)}be?je.complete():je.next(te)},0,!0)}),()=>(0,he.m)(k?.return)&&k.return()})}(ue,Me);if((0,ft.L)(ue))return function pt(ue,Me){return ne((0,ft.Q)(ue),Me)}(ue,Me)}throw(0,Se.z)(ue)}(ue,Me):(0,d.Xf)(ue)}},4829:(_t,De,M)=>{M.d(De,{Xf:()=>Be});var d=M(7582),V=M(4266),N=M(4026),Y=M(5592),se=M(8382),ve=M(5726),Ee=M(9853),Oe=M(3664),he=M(541),U=M(4674),q=M(3894),ne=M(4850);function Be(ee){if(ee instanceof Y.y)return ee;if(null!=ee){if((0,se.c)(ee))return function Ie(ee){return new Y.y(Te=>{const ue=ee[ne.L]();if((0,U.m)(ue.subscribe))return ue.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,V.z)(ee))return function Ye(ee){return new Y.y(Te=>{for(let ue=0;ue<ee.length&&!Te.closed;ue++)Te.next(ee[ue]);Te.complete()})}(ee);if((0,N.t)(ee))return function ke(ee){return new Y.y(Te=>{ee.then(ue=>{Te.closed||(Te.next(ue),Te.complete())},ue=>Te.error(ue)).then(null,q.h)})}(ee);if((0,ve.D)(ee))return Se(ee);if((0,Oe.T)(ee))return function Ke(ee){return new Y.y(Te=>{for(const ue of ee)if(Te.next(ue),Te.closed)return;Te.complete()})}(ee);if((0,he.L)(ee))return function ft(ee){return Se((0,he.Q)(ee))}(ee)}throw(0,Ee.z)(ee)}function Se(ee){return new Y.y(Te=>{(function pt(ee,Te){var ue,Me,je,k;return(0,d.mG)(this,void 0,void 0,function*(){try{for(ue=(0,d.KL)(ee);!(Me=yield ue.next()).done;)if(Te.next(Me.value),Te.closed)return}catch(te){je={error:te}}finally{try{Me&&!Me.done&&(k=ue.return)&&(yield k.call(ue))}finally{if(je)throw je.error}}Te.complete()})})(ee,Te).catch(ue=>Te.error(ue))})}},3019:(_t,De,M)=>{M.d(De,{T:()=>ve});var d=M(7537),V=M(4829),N=M(6232),Y=M(9940),se=M(2459);function ve(...Ee){const Oe=(0,Y.yG)(Ee),he=(0,Y._6)(Ee,1/0),U=Ee;return U.length?1===U.length?(0,V.Xf)(U[0]):(0,d.J)(he)((0,se.D)(U,Oe)):N.E}},2096:(_t,De,M)=>{M.d(De,{of:()=>N});var d=M(9940),V=M(2459);function N(...Y){const se=(0,d.yG)(Y);return(0,V.D)(Y,se)}},8251:(_t,De,M)=>{M.d(De,{x:()=>V});var d=M(305);function V(Y,se,ve,Ee,Oe){return new N(Y,se,ve,Ee,Oe)}class N extends d.Lv{constructor(se,ve,Ee,Oe,he,U){super(se),this.onFinalize=he,this.shouldUnsubscribe=U,this._next=ve?function(q){try{ve(q)}catch(ne){se.error(ne)}}:super._next,this._error=Oe?function(q){try{Oe(q)}catch(ne){se.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},3997:(_t,De,M)=>{M.d(De,{x:()=>Y});var d=M(2737),V=M(9360),N=M(8251);function Y(ve,Ee=d.y){return ve=ve??se,(0,V.e)((Oe,he)=>{let U,q=!0;Oe.subscribe((0,N.x)(he,ne=>{const Be=Ee(ne);(q||!ve(U,Be))&&(q=!1,U=Be,he.next(ne))}))})}function se(ve,Ee){return ve===Ee}},7398:(_t,De,M)=>{M.d(De,{U:()=>N});var d=M(9360),V=M(8251);function N(Y,se){return(0,d.e)((ve,Ee)=>{let Oe=0;ve.subscribe((0,V.x)(Ee,he=>{Ee.next(Y.call(se,he,Oe++))}))})}},7537:(_t,De,M)=>{M.d(De,{J:()=>N});var d=M(1631),V=M(2737);function N(Y=1/0){return(0,d.z)(V.y,Y)}},1631:(_t,De,M)=>{M.d(De,{z:()=>Oe});var d=M(7398),V=M(4829),N=M(9360),Y=M(7103),se=M(8251),Ee=M(4674);function Oe(he,U,q=1/0){return(0,Ee.m)(U)?Oe((ne,Be)=>(0,d.U)((Ie,Ye)=>U(ne,Ie,Be,Ye))((0,V.Xf)(he(ne,Be))),q):("number"==typeof U&&(q=U),(0,N.e)((ne,Be)=>function ve(he,U,q,ne,Be,Ie,Ye,ke){const Ke=[];let Se=0,ft=0,pt=!1;const ee=()=>{pt&&!Ke.length&&!Se&&U.complete()},Te=Me=>Se<ne?ue(Me):Ke.push(Me),ue=Me=>{Ie&&U.next(Me),Se++;let je=!1;(0,V.Xf)(q(Me,ft++)).subscribe((0,se.x)(U,k=>{Be?.(k),Ie?Te(k):U.next(k)},()=>{je=!0},void 0,()=>{if(je)try{for(Se--;Ke.length&&Se<ne;){const k=Ke.shift();Ye?(0,Y.f)(U,Ye,()=>ue(k)):ue(k)}ee()}catch(k){U.error(k)}}))};return he.subscribe((0,se.x)(U,Te,()=>{pt=!0,ee()})),()=>{ke?.()}}(ne,Be,he,q)))}},3093:(_t,De,M)=>{M.d(De,{Q:()=>Y});var d=M(7103),V=M(9360),N=M(8251);function Y(se,ve=0){return(0,V.e)((Ee,Oe)=>{Ee.subscribe((0,N.x)(Oe,he=>(0,d.f)(Oe,se,()=>Oe.next(he),ve),()=>(0,d.f)(Oe,se,()=>Oe.complete(),ve),he=>(0,d.f)(Oe,se,()=>Oe.error(he),ve)))})}},3020:(_t,De,M)=>{M.d(De,{B:()=>se});var d=M(4829),V=M(8645),N=M(305),Y=M(9360);function se(Ee={}){const{connector:Oe=(()=>new V.x),resetOnError:he=!0,resetOnComplete:U=!0,resetOnRefCountZero:q=!0}=Ee;return ne=>{let Be,Ie,Ye,ke=0,Ke=!1,Se=!1;const ft=()=>{Ie?.unsubscribe(),Ie=void 0},pt=()=>{ft(),Be=Ye=void 0,Ke=Se=!1},ee=()=>{const Te=Be;pt(),Te?.unsubscribe()};return(0,Y.e)((Te,ue)=>{ke++,!Se&&!Ke&&ft();const Me=Ye=Ye??Oe();ue.add(()=>{ke--,0===ke&&!Se&&!Ke&&(Ie=ve(ee,q))}),Me.subscribe(ue),!Be&&ke>0&&(Be=new N.Hp({next:je=>Me.next(je),error:je=>{Se=!0,ft(),Ie=ve(pt,he,je),Me.error(je)},complete:()=>{Ke=!0,ft(),Ie=ve(pt,U),Me.complete()}}),(0,d.Xf)(Te).subscribe(Be))})(ne)}}function ve(Ee,Oe,...he){if(!0===Oe)return void Ee();if(!1===Oe)return;const U=new N.Hp({next:()=>{U.unsubscribe(),Ee()}});return(0,d.Xf)(Oe(...he)).subscribe(U)}},5137:(_t,De,M)=>{M.d(De,{R:()=>V});var d=M(9360);function V(N,Y=0){return(0,d.e)((se,ve)=>{ve.add(N.schedule(()=>se.subscribe(ve),Y))})}},4664:(_t,De,M)=>{M.d(De,{w:()=>Y});var d=M(4829),V=M(9360),N=M(8251);function Y(se,ve){return(0,V.e)((Ee,Oe)=>{let he=null,U=0,q=!1;const ne=()=>q&&!he&&Oe.complete();Ee.subscribe((0,N.x)(Oe,Be=>{he?.unsubscribe();let Ie=0;const Ye=U++;(0,d.Xf)(se(Be,Ye)).subscribe(he=(0,N.x)(Oe,ke=>Oe.next(ve?ve(Be,ke,Ye,Ie++):ke),()=>{he=null,ne()}))},()=>{q=!0,ne()}))})}},9397:(_t,De,M)=>{M.d(De,{b:()=>se});var d=M(4674),V=M(9360),N=M(8251),Y=M(2737);function se(ve,Ee,Oe){const he=(0,d.m)(ve)||Ee||Oe?{next:ve,error:Ee,complete:Oe}:ve;return he?(0,V.e)((U,q)=>{var ne;null===(ne=he.subscribe)||void 0===ne||ne.call(he);let Be=!0;U.subscribe((0,N.x)(q,Ie=>{var Ye;null===(Ye=he.next)||void 0===Ye||Ye.call(he,Ie),q.next(Ie)},()=>{var Ie;Be=!1,null===(Ie=he.complete)||void 0===Ie||Ie.call(he),q.complete()},Ie=>{var Ye;Be=!1,null===(Ye=he.error)||void 0===Ye||Ye.call(he,Ie),q.error(Ie)},()=>{var Ie,Ye;Be&&(null===(Ie=he.unsubscribe)||void 0===Ie||Ie.call(he)),null===(Ye=he.finalize)||void 0===Ye||Ye.call(he)}))}):Y.y}},1954:(_t,De,M)=>{M.d(De,{o:()=>se});var d=M(7394);class V extends d.w0{constructor(Ee,Oe){super()}schedule(Ee,Oe=0){return this}}const N={setInterval(ve,Ee,...Oe){const{delegate:he}=N;return he?.setInterval?he.setInterval(ve,Ee,...Oe):setInterval(ve,Ee,...Oe)},clearInterval(ve){const{delegate:Ee}=N;return(Ee?.clearInterval||clearInterval)(ve)},delegate:void 0};var Y=M(9039);class se extends V{constructor(Ee,Oe){super(Ee,Oe),this.scheduler=Ee,this.work=Oe,this.pending=!1}schedule(Ee,Oe=0){var he;if(this.closed)return this;this.state=Ee;const U=this.id,q=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(q,U,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(q,this.id,Oe),this}requestAsyncId(Ee,Oe,he=0){return N.setInterval(Ee.flush.bind(Ee,this),he)}recycleAsyncId(Ee,Oe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return Oe;null!=Oe&&N.clearInterval(Oe)}execute(Ee,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(Ee,Oe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,Oe){let U,he=!1;try{this.work(Ee)}catch(q){he=!0,U=q||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:Oe}=this,{actions:he}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Y.P)(he,this),null!=Ee&&(this.id=this.recycleAsyncId(Oe,Ee,null)),this.delay=null,super.unsubscribe()}}}},2631:(_t,De,M)=>{M.d(De,{v:()=>N});var d=M(4552);class V{constructor(se,ve=V.now){this.schedulerActionCtor=se,this.now=ve}schedule(se,ve=0,Ee){return new this.schedulerActionCtor(this,se).schedule(Ee,ve)}}V.now=d.l.now;class N extends V{constructor(se,ve=V.now){super(se,ve),this.actions=[],this._active=!1}flush(se){const{actions:ve}=this;if(this._active)return void ve.push(se);let Ee;this._active=!0;do{if(Ee=se.execute(se.state,se.delay))break}while(se=ve.shift());if(this._active=!1,Ee){for(;se=ve.shift();)se.unsubscribe();throw Ee}}}},6321:(_t,De,M)=>{M.d(De,{P:()=>Y,z:()=>N});var d=M(1954);const N=new(M(2631).v)(d.o),Y=N},4552:(_t,De,M)=>{M.d(De,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},7599:(_t,De,M)=>{M.d(De,{z:()=>d});const d={setTimeout(V,N,...Y){const{delegate:se}=d;return se?.setTimeout?se.setTimeout(V,N,...Y):setTimeout(V,N,...Y)},clearTimeout(V){const{delegate:N}=d;return(N?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4971:(_t,De,M)=>{M.d(De,{h:()=>V});const V=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(_t,De,M)=>{M.d(De,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(_t,De,M)=>{M.d(De,{_6:()=>ve,jO:()=>Y,yG:()=>se});var d=M(4674),V=M(671);function N(Ee){return Ee[Ee.length-1]}function Y(Ee){return(0,d.m)(N(Ee))?Ee.pop():void 0}function se(Ee){return(0,V.K)(N(Ee))?Ee.pop():void 0}function ve(Ee,Oe){return"number"==typeof N(Ee)?Ee.pop():Oe}},9039:(_t,De,M)=>{function d(V,N){if(V){const Y=V.indexOf(N);0<=Y&&V.splice(Y,1)}}M.d(De,{P:()=>d})},2306:(_t,De,M)=>{function d(V){const Y=V(se=>{Error.call(se),se.stack=(new Error).stack});return Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y}M.d(De,{d:()=>d})},1441:(_t,De,M)=>{M.d(De,{O:()=>Y,x:()=>N});var d=M(2653);let V=null;function N(se){if(d.config.useDeprecatedSynchronousErrorHandling){const ve=!V;if(ve&&(V={errorThrown:!1,error:null}),se(),ve){const{errorThrown:Ee,error:Oe}=V;if(V=null,Ee)throw Oe}}else se()}function Y(se){d.config.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=se)}},7103:(_t,De,M)=>{function d(V,N,Y,se=0,ve=!1){const Ee=N.schedule(function(){Y(),ve?V.add(this.schedule(null,se)):this.unsubscribe()},se);if(V.add(Ee),!ve)return Ee}M.d(De,{f:()=>d})},2737:(_t,De,M)=>{function d(V){return V}M.d(De,{y:()=>d})},4266:(_t,De,M)=>{M.d(De,{z:()=>d});const d=V=>V&&"number"==typeof V.length&&"function"!=typeof V},5726:(_t,De,M)=>{M.d(De,{D:()=>V});var d=M(4674);function V(N){return Symbol.asyncIterator&&(0,d.m)(N?.[Symbol.asyncIterator])}},4674:(_t,De,M)=>{function d(V){return"function"==typeof V}M.d(De,{m:()=>d})},8382:(_t,De,M)=>{M.d(De,{c:()=>N});var d=M(4850),V=M(4674);function N(Y){return(0,V.m)(Y[d.L])}},3664:(_t,De,M)=>{M.d(De,{T:()=>N});var d=M(4971),V=M(4674);function N(Y){return(0,V.m)(Y?.[d.h])}},4026:(_t,De,M)=>{M.d(De,{t:()=>V});var d=M(4674);function V(N){return(0,d.m)(N?.then)}},541:(_t,De,M)=>{M.d(De,{L:()=>Y,Q:()=>N});var d=M(7582),V=M(4674);function N(se){return(0,d.FC)(this,arguments,function*(){const Ee=se.getReader();try{for(;;){const{value:Oe,done:he}=yield(0,d.qq)(Ee.read());if(he)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Oe)}}finally{Ee.releaseLock()}})}function Y(se){return(0,V.m)(se?.getReader)}},671:(_t,De,M)=>{M.d(De,{K:()=>V});var d=M(4674);function V(N){return N&&(0,d.m)(N.schedule)}},9360:(_t,De,M)=>{M.d(De,{A:()=>V,e:()=>N});var d=M(4674);function V(Y){return(0,d.m)(Y?.lift)}function N(Y){return se=>{if(V(se))return se.lift(function(ve){try{return Y(ve,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(_t,De,M)=>{function d(){}M.d(De,{Z:()=>d})},8407:(_t,De,M)=>{M.d(De,{U:()=>N,z:()=>V});var d=M(2737);function V(...Y){return N(Y)}function N(Y){return 0===Y.length?d.y:1===Y.length?Y[0]:function(ve){return Y.reduce((Ee,Oe)=>Oe(Ee),ve)}}},3894:(_t,De,M)=>{M.d(De,{h:()=>N});var d=M(2653),V=M(7599);function N(Y){V.z.setTimeout(()=>{const{onUnhandledError:se}=d.config;if(!se)throw Y;se(Y)})}},9853:(_t,De,M)=>{function d(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(De,{z:()=>d})},5879:(_t,De,M)=>{M.d(De,{$8M:()=>Xc,$WT:()=>mo,$Z:()=>uC,AFp:()=>PE,ALo:()=>s0,AaK:()=>ne,AsE:()=>Wh,CHM:()=>Cs,CRH:()=>St,DdM:()=>n0,Dn7:()=>Ss,EJc:()=>Hb,EpF:()=>XC,F4k:()=>eI,FYo:()=>VE,FiY:()=>me,GfV:()=>BE,Gpc:()=>Ye,HDt:()=>_a,JOm:()=>ch,KtG:()=>Yd,LFG:()=>Qe,LSH:()=>Th,Lbi:()=>f_,Lck:()=>nb,MAs:()=>ZC,MMx:()=>Jv,MR2:()=>c_,NdJ:()=>_v,O4$:()=>Do,Ojb:()=>b1,OlP:()=>Kn,Oqu:()=>Zh,P3R:()=>p1,PXZ:()=>Wb,Q6J:()=>fv,QGY:()=>yv,Qsj:()=>F1,R0b:()=>gi,RDi:()=>dE,Rgc:()=>gc,SBq:()=>Oh,Sil:()=>va,Suo:()=>yr,TTD:()=>$d,TgZ:()=>vg,Tol:()=>_I,VKq:()=>r0,VuI:()=>W0,W1O:()=>gf,X6Q:()=>Em,XFs:()=>Et,Xpm:()=>sr,Xq5:()=>NC,Xts:()=>ml,Y36:()=>Al,YKP:()=>Yv,YNc:()=>GC,Yjl:()=>Oa,Yz7:()=>yt,Z0I:()=>_n,ZZ4:()=>Mm,_Bn:()=>tb,_UZ:()=>pv,_c5:()=>dD,_uU:()=>xg,aQg:()=>U0,c2e:()=>_0,cJS:()=>Gn,cg1:()=>Nv,dDg:()=>qb,dqk:()=>Kt,eFA:()=>Jb,eJc:()=>fm,ekj:()=>ac,eoX:()=>b0,f3M:()=>st,g9A:()=>NE,h0i:()=>hu,hGG:()=>PM,hij:()=>Bl,iGM:()=>yc,ifc:()=>ot,ip1:()=>_i,jDz:()=>ed,kL8:()=>Gl,kcU:()=>Qt,lG2:()=>xa,lcZ:()=>a0,lqb:()=>ko,lri:()=>hr,n5z:()=>Cp,oAB:()=>Yo,oxw:()=>oI,q4F:()=>jE,qFp:()=>$M,qLn:()=>Xa,qOj:()=>Y_,qZA:()=>wg,rWj:()=>wa,rg0:()=>jd,sBO:()=>Im,s_b:()=>ze,soG:()=>ki,tb:()=>vu,tp0:()=>rt,uIk:()=>ev,vHH:()=>ee,vpe:()=>Fo,wAp:()=>zl,xp6:()=>oC,z2F:()=>Ca,zSh:()=>fe,zs3:()=>Qi});var d=M(8645),V=M(7394),N=M(5592),Y=M(3019),se=M(5619),ve=M(2096),Ee=M(3020),Oe=M(4664),he=M(3997);function U(i){for(let o in i)if(i[o]===U)return o;throw Error("Could not find renamed property on target object.")}function q(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ne(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ne).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Be(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const Ie=U({__forward_ref__:U});function Ye(i){return i.__forward_ref__=Ye,i.toString=function(){return ne(this())},i}function ke(i){return Ke(i)?i():i}function Ke(i){return"function"==typeof i&&i.hasOwnProperty(Ie)&&i.__forward_ref__===Ye}function Se(i){return i&&!!i.\u0275providers}const pt="https://g.co/ng/security#xss";class ee extends Error{constructor(o,a){super(function Te(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function ue(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i,o){throw new ee(-201,!1)}function tt(i,o){null==i&&function qe(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Gn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Un(i){return Nn(i,Vn)||Nn(i,ir)}function _n(i){return null!==Un(i)}function Nn(i,o){return i.hasOwnProperty(o)?i[o]:null}function Jn(i){return i&&(i.hasOwnProperty(Tn)||i.hasOwnProperty($r))?i[Tn]:null}const Vn=U({\u0275prov:U}),Tn=U({\u0275inj:U}),ir=U({ngInjectableDef:U}),$r=U({ngInjectorDef:U});var Et=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Et||{});let It;function Rt(i){const o=It;return It=i,o}function vr(i,o,a){const c=Un(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Et.Optional?null:void 0!==o?o:void be(ne(i))}const Kt=globalThis,He={},ut="__NG_DI_FLAG__",Ct="ngTempTokenPath",z=/\n/gm,P="__source";let R;function X(i){const o=R;return R=i,o}function Re(i,o=Et.Default){if(void 0===R)throw new ee(-203,!1);return null===R?vr(i,void 0,o):R.get(i,o&Et.Optional?null:void 0,o)}function Qe(i,o=Et.Default){return(function Nt(){return It}()||Re)(ke(i),o)}function st(i,o=Et.Default){return Qe(i,yn(o))}function yn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Ut(i){const o=[];for(let a=0;a<i.length;a++){const c=ke(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ee(900,!1);let h,f=Et.Default;for(let y=0;y<c.length;y++){const v=c[y],C=Yt(v);"number"==typeof C?-1===C?h=v.token:f|=C:h=v}o.push(Qe(h,f))}else o.push(Qe(c))}return o}function vn(i,o){return i[ut]=o,i.prototype[ut]=o,i}function Yt(i){return i[ut]}function de(i){return{toString:i}.toString()}var nt=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(nt||{}),ot=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(ot||{});const Ot={},ct=[],An=U({\u0275cmp:U}),Jr=U({\u0275dir:U}),Xr=U({\u0275pipe:U}),zi=U({\u0275mod:U}),Or=U({\u0275fac:U}),dn=U({__NG_ELEMENT_ID__:U}),Ns=U({__NG_ENV_ID__:U});function Ks(i,o,a){let c=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const f=o.length;if(h+f===c||i.charCodeAt(h+f)<=32)return h}a=h+1}}function Hr(i,o,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const f=a[c++],y=a[c++],v=a[c++];i.setAttribute(o,y,v,f)}else{const f=h,y=a[++c];Rs(f)?i.setProperty(o,f,y):i.setAttribute(o,f,y),c++}}return c}function di(i){return 3===i||4===i||6===i}function Rs(i){return 64===i.charCodeAt(0)}function ys(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||_s(i,a,h,null,-1===a||2===a?o[++c]:null)}}return i}function _s(i,o,a,c,h){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const v=i[f++];if("number"==typeof v){if(v===o){y=-1;break}if(v>o){y=f-1;break}}}for(;f<i.length;){const v=i[f];if("number"==typeof v)break;if(v===a){if(null===c)return void(null!==h&&(i[f+1]=h));if(c===i[f+1])return void(i[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==h&&i.splice(f++,0,h)}const tr="ng-template";function qi(i,o,a){let c=0,h=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&h){const y=i[c++];if(a&&"class"===f&&-1!==Ks(y.toLowerCase(),o,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(h=!1)}}return!1}function hi(i){return 4===i.type&&i.value!==tr}function Aa(i,o,a){return o===(4!==i.type||a?i.value:tr)}function go(i,o,a){let c=4;const h=i.attrs||[],f=function H(i){for(let o=0;o<i.length;o++)if(di(i[o]))return o;return i.length}(h);let y=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!Aa(i,C,a)||""===C&&1===o.length){if(Gr(c))return!1;y=!0}}else{const b=8&c?C:o[++v];if(8&c&&null!==i.attrs){if(!qi(i.attrs,b,a)){if(Gr(c))return!1;y=!0}continue}const L=Sa(8&c?"class":C,h,hi(i),a);if(-1===L){if(Gr(c))return!1;y=!0;continue}if(""!==b){let W;W=L>f?"":h[L+1].toLowerCase();const ie=8&c?W:null;if(ie&&-1!==Ks(ie,b,0)||2&c&&b!==W){if(Gr(c))return!1;y=!0}}}}else{if(!y&&!Gr(c)&&!Gr(C))return!1;if(y&&Gr(C))continue;y=!1,c=C|1&c}}return Gr(c)||y}function Gr(i){return 0==(1&i)}function Sa(i,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let f=!1;for(;h<o.length;){const y=o[h];if(y===i)return h;if(3===y||6===y)f=!0;else{if(1===y||2===y){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=f?1:2}return-1}return function re(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function Ko(i,o,a=!1){for(let c=0;c<o.length;c++)if(go(i,o[c],a))return!0;return!1}function gt(i,o){return i?":not("+o.trim()+")":o}function wn(i){let o=i[0],a=1,c=2,h="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const v=i[++a];h+="["+y+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Gr(y)&&(o+=gt(f,h),h=""),c=y,f=f||!Gr(c);a++}return""!==h&&(o+=gt(f,h)),o}function sr(i){return de(()=>{const o=Oc(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===nt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||ot.Emulated,styles:i.styles||ct,_:null,schemas:i.schemas||null,tView:null,id:""};Pa(a);const c=i.dependencies;return a.directiveDefs=ks(c,!1),a.pipeDefs=ks(c,!0),a.id=function Qo(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const h of a)o=Math.imul(31,o)+h.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function Pr(i){return Cn(i)||Lr(i)}function ss(i){return null!==i}function Yo(i){return de(()=>({type:i.type,bootstrap:i.bootstrap||ct,declarations:i.declarations||ct,imports:i.imports||ct,exports:i.exports||ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ma(i,o){if(null==i)return Ot;const a={};for(const c in i)if(i.hasOwnProperty(c)){let h=i[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),a[h]=c,o&&(o[h]=f)}return a}function xa(i){return de(()=>{const o=Oc(i);return Pa(o),o})}function Oa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Cn(i){return i[An]||null}function Lr(i){return i[Jr]||null}function zr(i){return i[Xr]||null}function mo(i){const o=Cn(i)||Lr(i)||zr(i);return null!==o&&o.standalone}function ei(i,o){const a=i[zi]||null;if(!a&&!0===o)throw new Error(`Type ${ne(i)} does not have '\u0275mod' property.`);return a}function Oc(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||Ot,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||ct,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ma(i.inputs,o),outputs:Ma(i.outputs)}}function Pa(i){i.features?.forEach(o=>o(i))}function ks(i,o){if(!i)return null;const a=o?zr:Pr;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(ss)}const Xn=0,Xe=1,zt=2,jn=3,ti=4,Fs=5,qr=6,yo=7,gr=8,vs=9,wi=10,kt=11,Jo=12,Od=13,br=14,Dr=15,Fi=16,Li=17,fi=18,os=19,Pc=20,Ys=21,ws=22,B=23,F=24,j=25,Pe=1,Ze=2,et=7,Ft=9,Bt=11;function er(i){return Array.isArray(i)&&"object"==typeof i[Pe]}function On(i){return Array.isArray(i)&&!0===i[Pe]}function _o(i){return 0!=(4&i.flags)}function Wi(i){return i.componentOffset>-1}function Es(i){return 1==(1&i.flags)}function cr(i){return!!i.template}function Ei(i){return 0!=(512&i[zt])}function Qs(i,o){return i.hasOwnProperty(Or)?i[Or]:null}let Zr=null,kd=!1;function Ci(i){const o=Zr;return Zr=i,o}const Fd={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function fy(i){if(!Fc(i)||i.dirty){if(!i.producerMustRecompute(i)&&!gy(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function py(i){i.dirty=!0,function Kf(i){if(void 0===i.liveConsumerNode)return;const o=kd;kd=!0;try{for(const a of i.liveConsumerNode)a.dirty||py(a)}finally{kd=o}}(i),i.consumerMarkedDirty?.(i)}function Yf(i){return i&&(i.nextProducerIndex=0),Ci(i)}function kc(i,o){if(Ci(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(Fc(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)Ou(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function gy(i){wo(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],c=i.producerLastReadVersion[o];if(c!==a.version||(fy(a),c!==a.version))return!0}return!1}function Ud(i){if(wo(i),Fc(i))for(let o=0;o<i.producerNode.length;o++)Ou(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function Ou(i,o){if(function yy(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),wo(i),1===i.liveConsumerNode.length)for(let c=0;c<i.producerNode.length;c++)Ou(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[o],h=i.liveConsumerNode[o];wo(h),h.producerIndexOfThis[c]=o}}function Fc(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function wo(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let vy=null;function jd(i){const o=Ci(null);try{return i()}finally{Ci(o)}}const np=()=>{},Rw=(()=>({...Fd,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:np}))();class Iy{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function $d(){return Hd}function Hd(i){return i.type.prototype.ngOnChanges&&(i.setInput=Js),Vc}function Vc(){const i=Gd(this),o=i?.current;if(o){const a=i.previous;if(a===Ot)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function Js(i,o,a,c){const h=this.declaredInputs[a],f=Gd(i)||function by(i,o){return i[Fa]=o}(i,{previous:Ot,current:null}),y=f.current||(f.current={}),v=f.previous,C=v[h];y[h]=new Iy(C&&C.currentValue,o,v===Ot),i[c]=o}$d.ngInherit=!0;const Fa="__ngSimpleChanges__";function Gd(i){return i[Fa]||null}const Ls=function(i,o,a){},rp="svg";function zn(i){for(;Array.isArray(i);)i=i[Xn];return i}function Xs(i,o){return zn(o[i])}function Ii(i,o){return zn(o[i.index])}function qd(i,o){return i.data[o]}function La(i,o){return i[o]}function Ui(i,o){const a=o[i];return er(a)?a:a[Xn]}function Eo(i,o){return null==o?null:i[o]}function ip(i){i[Li]=0}function Nu(i){1024&i[zt]||(i[zt]|=1024,Nr(i,1))}function Dy(i){1024&i[zt]&&(i[zt]&=-1025,Nr(i,-1))}function Nr(i,o){let a=i[jn];if(null===a)return;a[Fs]+=o;let c=a;for(a=a[jn];null!==a&&(1===o&&1===c[Fs]||-1===o&&0===c[Fs]);)a[Fs]+=o,c=a,a=a[jn]}const Gt={lFrame:mp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ua(){return Gt.bindingsEnabled}function Ve(){return Gt.lFrame.lView}function Sn(){return Gt.lFrame.tView}function Cs(i){return Gt.lFrame.contextLView=i,i[gr]}function Yd(i){return Gt.lFrame.contextLView=null,i}function ni(){let i=Gc();for(;null!==i&&64===i.type;)i=i.parent;return i}function Gc(){return Gt.lFrame.currentTNode}function Us(i,o){const a=Gt.lFrame;a.currentTNode=i,a.isParent=o}function lp(){return Gt.lFrame.isParent}function ri(){const i=Gt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Fu(){return Gt.lFrame.bindingIndex++}function Vs(i){const o=Gt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function fp(i,o){const a=Gt.lFrame;a.bindingIndex=a.bindingRootIndex=i,pp(o)}function pp(i){Gt.lFrame.currentDirectiveIndex=i}function Oy(){return Gt.lFrame.currentQueryIndex}function gp(i){Gt.lFrame.currentQueryIndex=i}function jw(i){const o=i[Xe];return 2===o.type?o.declTNode:1===o.type?i[qr]:null}function Jd(i,o,a){if(a&Et.SkipSelf){let h=o,f=i;for(;!(h=h.parent,null!==h||a&Et.Host||(h=jw(f),null===h||(f=f[br],10&h.type))););if(null===h)return!1;o=h,i=f}const c=Gt.lFrame=bo();return c.currentTNode=o,c.lView=i,!0}function bi(i){const o=bo(),a=i[Xe];Gt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function bo(){const i=Gt.lFrame,o=null===i?null:i.child;return null===o?mp(i):o}function mp(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function nr(){const i=Gt.lFrame;return Gt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Pt=nr;function ii(){const i=nr();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Di(){return Gt.lFrame.selectedIndex}function eo(i){Gt.lFrame.selectedIndex=i}function lr(){const i=Gt.lFrame;return qd(i.tView,i.selectedIndex)}function Do(){Gt.lFrame.currentNamespace=rp}function Qt(){!function Py(){Gt.lFrame.currentNamespace=null}()}let Lu=!0;function to(){return Lu}function no(i){Lu=i}function Va(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:b,ngOnDestroy:A}=f;y&&(i.contentHooks??=[]).push(-a,y),v&&((i.contentHooks??=[]).push(a,v),(i.contentCheckHooks??=[]).push(a,v)),C&&(i.viewHooks??=[]).push(-a,C),b&&((i.viewHooks??=[]).push(a,b),(i.viewCheckHooks??=[]).push(a,b)),null!=A&&(i.destroyHooks??=[]).push(a,A)}}function ea(i,o,a){Zc(i,o,3,a)}function Ba(i,o,a,c){(3&i[zt])===a&&Zc(i,o,a,c)}function qc(i,o){let a=i[zt];(3&a)===o&&(a&=8191,a+=1,i[zt]=a)}function Zc(i,o,a,c){const f=c??-1,y=o.length-1;let v=0;for(let C=void 0!==c?65535&i[Li]:0;C<y;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=c&&v>=c)break}else o[C]<0&&(i[Li]+=65536),(v<f||-1==f)&&(Uu(i,a,o,C),i[Li]=(4294901760&i[Li])+C+2),C++}function ro(i,o){Ls(4,i,o);const a=Ci(null);try{o.call(i)}finally{Ci(a),Ls(5,i,o)}}function Uu(i,o,a,c){const h=a[c]<0,f=a[c+1],v=i[h?-a[c]:a[c]];h?i[zt]>>13<i[Li]>>16&&(3&i[zt])===o&&(i[zt]+=8192,ro(v,f)):ro(v,f)}const Bs=-1;class To{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Kc(i){return i!==Bs}function Ki(i){return 32767&i}function Wn(i,o){let a=function $n(i){return i>>16}(i),c=o;for(;a>0;)c=c[br],a--;return c}let ja=!0;function si(i){const o=ja;return ja=i,o}const $a=255,ju=5;let Ny=0;const Vr={};function Tr(i,o){const a=Yc(i,o);if(-1!==a)return a;const c=o[Xe];c.firstCreatePass&&(i.injectorIndex=o.length,as(c.data,i),as(o,null),as(c.blueprint,null));const h=na(i,o),f=i.injectorIndex;if(Kc(h)){const y=Ki(h),v=Wn(h,o),C=v[Xe].data;for(let b=0;b<8;b++)o[f+b]=v[y+b]|C[y+b]}return o[f+8]=h,f}function as(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Yc(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function na(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){if(c=bp(h),null===c)return Bs;if(a++,h=h[br],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Bs}function Ha(i,o,a){!function Ao(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(dn)&&(c=a[dn]),null==c&&(c=a[dn]=Ny++);const h=c&$a;o.data[i+(h>>ju)]|=1<<h}(i,o,a)}function nh(i,o,a){if(a&Et.Optional||void 0!==i)return i;be()}function ra(i,o,a,c){if(a&Et.Optional&&void 0===c&&(c=null),!(a&(Et.Self|Et.Host))){const h=i[vs],f=Rt(void 0);try{return h?h.get(o,c,a&Et.Optional):vr(o,c,a&Et.Optional)}finally{Rt(f)}}return nh(c,0,a)}function rh(i,o,a,c=Et.Default,h){if(null!==i){if(2048&o[zt]&&!(c&Et.Self)){const y=function Ip(i,o,a,c,h){let f=i,y=o;for(;null!==f&&null!==y&&2048&y[zt]&&!(512&y[zt]);){const v=Qc(f,y,a,c|Et.Self,Vr);if(v!==Vr)return v;let C=f.parent;if(!C){const b=y[Pc];if(b){const A=b.get(a,Vr,c);if(A!==Vr)return A}C=bp(y),y=y[br]}f=C}return h}(i,o,a,c,Vr);if(y!==Vr)return y}const f=Qc(i,o,a,c,Vr);if(f!==Vr)return f}return ra(o,a,c,h)}function Qc(i,o,a,c,h){const f=function Mo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(dn)?i[dn]:void 0;return"number"==typeof o?o>=0?o&$a:xo:o}(a);if("function"==typeof f){if(!Jd(o,i,c))return c&Et.Host?nh(h,0,c):ra(o,a,c,h);try{let y;if(y=f(c),null!=y||c&Et.Optional)return y;be()}finally{Pt()}}else if("number"==typeof f){let y=null,v=Yc(i,o),C=Bs,b=c&Et.Host?o[Dr][qr]:null;for((-1===v||c&Et.SkipSelf)&&(C=-1===v?na(i,o):o[v+8],C!==Bs&&wp(c,!1)?(y=o[Xe],v=Ki(C),o=Wn(C,o)):v=-1);-1!==v;){const A=o[Xe];if(vp(f,v,A.data)){const L=sn(v,o,a,y,c,b);if(L!==Vr)return L}C=o[v+8],C!==Bs&&wp(c,o[Xe].data[v+8]===b)&&vp(f,v,o)?(y=A,v=Ki(C),o=Wn(C,o)):v=-1}}return h}function sn(i,o,a,c,h,f){const y=o[Xe],v=y.data[i+8],A=So(v,y,a,null==c?Wi(v)&&ja:c!=y&&0!=(3&v.type),h&Et.Host&&f===v);return null!==A?ia(o,y,A,v):Vr}function So(i,o,a,c,h){const f=i.providerIndexes,y=o.data,v=1048575&f,C=i.directiveStart,A=f>>20,W=h?v+A:i.directiveEnd;for(let ie=c?v:v+A;ie<W;ie++){const Ne=y[ie];if(ie<C&&a===Ne||ie>=C&&Ne.type===a)return ie}if(h){const ie=y[C];if(ie&&cr(ie)&&ie.type===a)return C}return null}function ia(i,o,a,c){let h=i[a];const f=o.data;if(function Vu(i){return i instanceof To}(h)){const y=h;y.resolving&&function je(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new ee(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Me(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ue(i)}(f[a]));const v=si(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?Rt(y.injectImpl):null;Jd(i,c,Et.Default);try{h=i[a]=y.factory(void 0,f,i,c),o.firstCreatePass&&a>=c.directiveStart&&function Ti(i,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(c){const y=Hd(o);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}h&&(a.preOrderHooks??=[]).push(0-i,h),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],o)}finally{null!==b&&Rt(b),si(v),y.resolving=!1,Pt()}}return h}function vp(i,o,a){return!!(a[o+(i>>ju)]&1<<i)}function wp(i,o){return!(i&Et.Self||i&Et.Host&&o)}class Br{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return rh(this._tNode,this._lView,o,yn(c),a)}}function xo(){return new Br(ni(),Ve())}function Cp(i){return de(()=>{const o=i.prototype.constructor,a=o[Or]||Jc(o),c=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==c;){const f=h[Or]||Jc(h);if(f&&f!==a)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function Jc(i){return Ke(i)?()=>{const o=Jc(ke(i));return o&&o()}:Qs(i)}function bp(i){const o=i[Xe],a=o.type;return 2===a?o.declTNode:1===a?i[qr]:null}function Xc(i){return function _p(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const f=a[h];if(di(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(f===o)return a[h+1];h+=2}}}return null}(ni(),i)}const sa="__parameters__";function Pn(i,o,a){return de(()=>{const c=function Oo(i){return function(...a){if(i){const c=i(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...f){if(this instanceof h)return c.apply(this,f),this;const y=new h(...f);return v.annotation=y,v;function v(C,b,A){const L=C.hasOwnProperty(sa)?C[sa]:Object.defineProperty(C,sa,{value:[]})[sa];for(;L.length<=A;)L.push(null);return(L[A]=L[A]||[]).push(y),C}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}function za(i,o){i.forEach(a=>Array.isArray(a)?za(a,o):o(a))}function ky(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function qa(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Yi(i,o,a){let c=Za(i,o);return c>=0?i[1|c]=a:(c=~c,function Ap(i,o,a,c){let h=i.length;if(h==o)i.push(a,c);else if(1===h)i.push(c,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function oh(i,o){const a=Za(i,o);if(a>=0)return i[1|a]}function Za(i,o){return function sl(i,o,a){let c=0,h=i.length>>a;for(;h!==c;){const f=c+(h-c>>1),y=i[f<<a];if(o===y)return f<<a;y>o?h=f:c=f+1}return~(h<<a)}(i,o,1)}const me=vn(Pn("Optional"),8),rt=vn(Pn("SkipSelf"),4);function xp(i){return 128==(128&i.flags)}var ch=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(ch||{});const lh=new Map;let RT=0;const Np="__ngContext__";function Bi(i,o){er(o)?(i[Np]=o[os],function Yw(i){lh.set(i[os],i)}(o)):i[Np]=o}let fh;function Is(i,o){return fh(i,o)}function ca(i){const o=i[jn];return On(o)?o[jn]:o}function Xw(i){return ph(i[Jo])}function Wy(i){return ph(i[ti])}function ph(i){for(;null!==i&&!On(i);)i=i[ti];return i}function dl(i,o,a,c,h){if(null!=c){let f,y=!1;On(c)?f=c:er(c)&&(y=!0,c=c[Xn]);const v=zn(c);0===i&&null!==a?null==h?rE(o,a,v):Ju(o,a,v,h||null,!0):1===i&&null!==a?Ju(o,a,v,h||null,!0):2===i?function Up(i,o,a){const c=Lp(i,o);c&&function KT(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,v,y):3===i&&o.destroyNode(v),null!=f&&function QT(i,o,a,c,h){const f=a[et];f!==zn(a)&&dl(o,i,c,f,h);for(let v=Bt;v<a.length;v++){const C=a[v];wh(C[Xe],C,i,o,c,f)}}(o,i,f,a,h)}}function kp(i,o,a){return i.createElement(o,a)}function eE(i,o){const a=i[Ft],c=a.indexOf(o);Dy(o),a.splice(c,1)}function Fp(i,o){if(i.length<=Bt)return;const a=Bt+o,c=i[a];if(c){const h=c[Fi];null!==h&&h!==i&&eE(h,c),o>0&&(i[a-1][ti]=c[ti]);const f=qa(i,Bt+o);!function GT(i,o){wh(i,o,o[kt],2,null,null),o[Xn]=null,o[qr]=null}(c[Xe],c);const y=f[fi];null!==y&&y.detachView(f[Xe]),c[jn]=null,c[ti]=null,c[zt]&=-129}return c}function Ky(i,o){if(!(256&o[zt])){const a=o[kt];o[B]&&Ud(o[B]),o[F]&&Ud(o[F]),a.destroyNode&&wh(i,o,a,3,null,null),function zT(i){let o=i[Jo];if(!o)return tE(i[Xe],i);for(;o;){let a=null;if(er(o))a=o[Jo];else{const c=o[Bt];c&&(a=c)}if(!a){for(;o&&!o[ti]&&o!==i;)er(o)&&tE(o[Xe],o),o=o[jn];null===o&&(o=i),er(o)&&tE(o[Xe],o),a=o&&o[ti]}o=a}}(o)}}function tE(i,o){if(!(256&o[zt])){o[zt]&=-129,o[zt]|=256,function nE(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof To)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const v=h[f[y]],C=f[y+1];Ls(4,v,C);try{C.call(v)}finally{Ls(5,v,C)}}else{Ls(4,h,f);try{f.call(h)}finally{Ls(5,h,f)}}}}}(i,o),function WT(i,o){const a=i.cleanup,c=o[yo];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[y]():c[-y].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(o[yo]=null);const h=o[Ys];if(null!==h){o[Ys]=null;for(let f=0;f<h.length;f++)(0,h[f])()}}(i,o),1===o[Xe].type&&o[kt].destroy();const a=o[Fi];if(null!==a&&On(o[jn])){a!==o[jn]&&eE(a,o);const c=o[fi];null!==c&&c.detachView(i)}!function dh(i){lh.delete(i[os])}(o)}}function hl(i,o,a){return function Qu(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[Xn];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:f}=i.data[c.directiveStart+h];if(f===ot.None||f===ot.Emulated)return null}return Ii(c,a)}}(i,o.parent,a)}function Ju(i,o,a,c,h){i.insertBefore(o,a,c,h)}function rE(i,o,a){i.appendChild(o,a)}function iE(i,o,a,c,h){null!==c?Ju(i,o,a,c,h):rE(i,o,a)}function Lp(i,o){return i.parentNode(o)}let Qy,lE,Bp,Yy=function oE(i,o,a){return 40&i.type?Ii(i,a):null};function _h(i,o,a,c){const h=hl(i,c,o),f=o[kt],v=function sE(i,o,a){return Yy(i,o,a)}(c.parent||o[qr],c,o);if(null!=h)if(Array.isArray(a))for(let C=0;C<a.length;C++)iE(f,h,a[C],v,!1);else iE(f,h,a,v,!1);void 0!==Qy&&Qy(f,c,o,a,h)}function Ro(i,o){if(null!==o){const a=o.type;if(3&a)return Ii(o,i);if(4&a)return Xy(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Ro(i,c);{const h=i[o.index];return On(h)?Xy(-1,h):zn(h)}}if(32&a)return Is(o,i)()||zn(i[o.index]);{const c=Jy(i,o);return null!==c?Array.isArray(c)?c[0]:Ro(ca(i[Dr]),c):Ro(i,o.next)}}return null}function Jy(i,o){return null!==o?i[Dr][qr].projection[o.projection]:null}function Xy(i,o){const a=Bt+i+1;if(a<o.length){const c=o[a],h=c[Xe].firstChild;if(null!==h)return Ro(c,h)}return o[et]}function vh(i,o,a,c,h,f,y){for(;null!=a;){const v=c[a.index],C=a.type;if(y&&0===o&&(v&&Bi(zn(v),c),a.flags|=2),32!=(32&a.flags))if(8&C)vh(i,o,a.child,c,h,f,!1),dl(o,i,h,v,f);else if(32&C){const b=Is(a,c);let A;for(;A=b();)dl(o,i,h,A,f);dl(o,i,h,v,f)}else 16&C?t_(i,o,c,a,h,f):dl(o,i,h,v,f);a=y?a.projectionNext:a.next}}function wh(i,o,a,c,h,f){vh(a,c,i.firstChild,o,h,f,!1)}function t_(i,o,a,c,h,f){const y=a[Dr],C=y[qr].projection[c.projection];if(Array.isArray(C))for(let b=0;b<C.length;b++)dl(o,i,h,C[b],f);else{let b=C;const A=y[jn];xp(c)&&(b.flags|=128),vh(i,o,b,A,h,f,!0)}}function uE(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Eh(i,o,a){const{mergedAttrs:c,classes:h,styles:f}=a;null!==c&&Hr(i,o,c),null!==h&&uE(i,o,h),null!==f&&function XT(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}function dE(i){lE=i}function pE(i){return function r_(){if(void 0===Bp&&(Bp=null,Kt.trustedTypes))try{Bp=Kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Bp}()?.createScriptURL(i)||i}class gE{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pt})`}}function Ya(i){return i instanceof gE?i.changingThisBreaksApplicationSecurity:i}function gl(i,o){const a=function jp(i){return i instanceof gE&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${pt})`)}return a===o}const Ch=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Dh=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Dh||{});function Th(i){const o=Ah();return o?o.sanitize(Dh.URL,i)||"":gl(i,"URL")?Ya(i):function Hp(i){return(i=String(i)).match(Ch)?i:"unsafe:"+i}(ue(i))}function bE(i){const o=Ah();if(o)return pE(o.sanitize(Dh.RESOURCE_URL,i)||"");if(gl(i,"ResourceURL"))return pE(Ya(i));throw new ee(904,!1)}function p1(i,o,a){return function f1(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?bE:Th}(o,a)(i)}function Ah(){const i=Ve();return i&&i[wi].sanitizer}class Kn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ml=new Kn("ENVIRONMENT_INITIALIZER"),TE=new Kn("INJECTOR",-1),AE=new Kn("INJECTOR_DEF_TYPES");class zp{get(o,a=He){if(a===He){const c=new Error(`NullInjectorError: No provider for ${ne(o)}!`);throw c.name="NullInjectorError",c}return a}}function c_(i){return{\u0275providers:i}}function g1(...i){return{\u0275providers:SE(0,i),\u0275fromNgModule:!0}}function SE(i,...o){const a=[],c=new Set;let h;const f=y=>{a.push(y)};return za(o,y=>{const v=y;qp(v,f,[],c)&&(h||=[],h.push(v))}),void 0!==h&&ME(h,f),a}function ME(i,o){for(let a=0;a<i.length;a++){const{ngModule:c,providers:h}=i[a];l_(h,f=>{o(f,c)})}}function qp(i,o,a,c){if(!(i=ke(i)))return!1;let h=null,f=Jn(i);const y=!f&&Cn(i);if(f||y){if(y&&!y.standalone)return!1;h=i}else{const C=i.ngModule;if(f=Jn(C),!f)return!1;h=C}const v=c.has(h);if(y){if(v)return!1;if(c.add(h),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const b of C)qp(b,o,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!v){let b;c.add(h);try{za(f.imports,A=>{qp(A,o,a,c)&&(b||=[],b.push(A))})}finally{}void 0!==b&&ME(b,o)}if(!v){const b=Qs(h)||(()=>new h);o({provide:h,useFactory:b,deps:ct},h),o({provide:AE,useValue:h,multi:!0},h),o({provide:ml,useValue:()=>Qe(h),multi:!0},h)}const C=f.providers;if(null!=C&&!v){const b=i;l_(C,A=>{o(A,b)})}}}return h!==i&&void 0!==i.providers}function l_(i,o){for(let a of i)Se(a)&&(a=a.\u0275providers),Array.isArray(a)?l_(a,o):o(a)}const WP=U({provide:String,useValue:U});function xE(i){return null!==i&&"object"==typeof i&&WP in i}function yl(i){return"function"==typeof i}const fe=new Kn("Set Injector scope."),Zp={},Wp={};let Kp;function Yp(){return void 0===Kp&&(Kp=new zp),Kp}class ko{}class Qp extends ko{get destroyed(){return this._destroyed}constructor(o,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,h_(o,y=>this.processProvider(y)),this.records.set(TE,ec(void 0,this)),h.has("environment")&&this.records.set(ko,ec(void 0,this));const f=this.records.get(fe);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(AE.multi,ct,Et.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=X(this),c=Rt(void 0);try{return o()}finally{X(a),Rt(c)}}get(o,a=He,c=Et.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Ns))return o[Ns](this);c=yn(c);const f=X(this),y=Rt(void 0);try{if(!(c&Et.SkipSelf)){let C=this.records.get(o);if(void 0===C){const b=function C1(i){return"function"==typeof i||"object"==typeof i&&i instanceof Kn}(o)&&Un(o);C=b&&this.injectableDefInScope(b)?ec(d_(o),Zp):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&Et.Self?Yp():this.parent).get(o,a=c&Et.Optional&&a===He?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Ct]=v[Ct]||[]).unshift(ne(o)),f)throw v;return function wr(i,o,a,c){const h=i[Ct];throw o[P]&&h.unshift(o[P]),i.message=function K(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=ne(o);if(Array.isArray(o))h=o.map(ne).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let v=o[y];f.push(y+":"+("string"==typeof v?JSON.stringify(v):ne(v)))}h=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${i.replace(z,"\n  ")}`}("\n"+i.message,h,a,c),i.ngTokenPath=h,i[Ct]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{Rt(y),X(f)}}resolveInjectorInitializers(){const o=X(this),a=Rt(void 0);try{const h=this.get(ml.multi,ct,Et.Self);for(const f of h)f()}finally{X(o),Rt(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(ne(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(o){let a=yl(o=ke(o))?o:ke(o&&o.provide);const c=function w1(i){return xE(i)?ec(void 0,i.useValue):ec(OE(i),Zp)}(o);if(yl(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=ec(void 0,Zp,!0),h.factory=()=>Ut(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Zp&&(a.value=Wp,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Jp(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=ke(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function d_(i){const o=Un(i),a=null!==o?o.factory:Qs(i);if(null!==a)return a;if(i instanceof Kn)throw new ee(204,!1);if(i instanceof Function)return function v1(i){const o=i.length;if(o>0)throw function Po(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new ee(204,!1);const a=function ar(i){return i&&(i[Vn]||i[ir])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ee(204,!1)}function OE(i,o,a){let c;if(yl(i)){const h=ke(i);return Qs(h)||d_(h)}if(xE(i))c=()=>ke(i.useValue);else if(function _1(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Ut(i.deps||[]));else if(function y1(i){return!(!i||!i.useExisting)}(i))c=()=>Qe(ke(i.useExisting));else{const h=ke(i&&(i.useClass||i.provide));if(!function E1(i){return!!i.deps}(i))return Qs(h)||d_(h);c=()=>new h(...Ut(i.deps))}return c}function ec(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function h_(i,o){for(const a of i)Array.isArray(a)?h_(a,o):a&&Se(a)?h_(a.\u0275providers,o):o(a)}const PE=new Kn("AppId",{providedIn:"root",factory:()=>I1}),I1="ng",NE=new Kn("Platform Initializer"),f_=new Kn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),b1=new Kn("CSP nonce",{providedIn:"root",factory:()=>function Xu(){if(void 0!==lE)return lE;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let RE=(i,o,a)=>null;function E_(i,o,a=!1){return RE(i,o,a)}class N1{}class FE{}class UE{resolveComponentFactory(o){throw function R1(i){const o=Error(`No component factory found for ${ne(i)}.`);return o.ngComponent=i,o}(o)}}let rg=(()=>{class i{static#e=this.NULL=new UE}return i})();function I_(){return nc(ni(),Ve())}function nc(i,o){return new Oh(Ii(i,o))}let Oh=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=I_}return i})();function k1(i){return i instanceof Oh?i.nativeElement:i}class VE{}let F1=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function L1(){const i=Ve(),a=Ui(ni().index,i);return(er(a)?a:i)[kt]}()}return i})(),rc=(()=>{class i{static#e=this.\u0275prov=yt({token:i,providedIn:"root",factory:()=>null})}return i})();class BE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const jE=new BE("16.2.8"),b_={};function El(i,o=null,a=null,c){const h=zE(i,o,a,c);return h.resolveInjectorInitializers(),h}function zE(i,o=null,a=null,c,h=new Set){const f=[a||ct,g1(i)];return c=c||("object"==typeof i?void 0:ne(i)),new Qp(f,o||Yp(),c||null,h)}let Qi=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=He;static#t=this.NULL=new zp;static create(a,c){if(Array.isArray(a))return El({name:""},c,a,"");{const h=a.name??"";return El({name:h},a.parent,a.providers,h)}}static#n=this.\u0275prov=yt({token:i,providedIn:"any",factory:()=>Qe(TE)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function T_(i){return i.ngOriginalError}class Xa{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&T_(o);for(;a&&T_(a);)a=T_(a);return a||null}}function S_(i){return o=>{setTimeout(i,void 0,o)}}const Fo=class H1 extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let h=o,f=a||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=S_(f),h&&(h=S_(h)),y&&(y=S_(y)));const v=super.subscribe({next:h,error:f,complete:y});return o instanceof V.w0&&o.add(v),v}};function ZE(...i){}class gi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fo(!1),this.onMicrotaskEmpty=new Fo(!1),this.onStable=new Fo(!1),this.onError=new Fo(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function G1(){const i="function"==typeof Kt.requestAnimationFrame;let o=Kt[i?"requestAnimationFrame":"setTimeout"],a=Kt[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function WE(i){const o=()=>{!function Cl(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Kt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,x_(i),i.isCheckStableRunning=!0,M_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),x_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,f,y,v)=>{if(function Z1(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(v))return a.invokeTask(h,f,y,v);try{return KE(i),a.invokeTask(h,f,y,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),YE(i)}},onInvoke:(a,c,h,f,y,v,C)=>{try{return KE(i),a.invoke(h,f,y,v,C)}finally{i.shouldCoalesceRunChangeDetection&&o(),YE(i)}},onHasTask:(a,c,h,f)=>{a.hasTask(h,f),c===h&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,x_(i),M_(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,h,f)=>(a.handleError(h,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gi.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(gi.isInAngularZone())throw new ee(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+h,o,z1,ZE,ZE);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const z1={};function M_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function x_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function KE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function YE(i){i._nesting--,M_(i)}class q1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fo,this.onMicrotaskEmpty=new Fo,this.onStable=new Fo,this.onError=new Fo}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}const QE=new Kn("",{providedIn:"root",factory:Ph});function Ph(){const i=st(gi);let o=!0;const a=new N.y(h=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{h.next(o),h.complete()})}),c=new N.y(h=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{gi.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,h.next(!0))})})});const y=i.onUnstable.subscribe(()=>{gi.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{h.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,Y.T)(a,c.pipe((0,Ee.B)()))}function da(i){return i instanceof Function?i():i}let O_=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=yt({token:i,providedIn:"root",factory:()=>new i})}return i})();function Nh(i){for(;i;){i[zt]|=64;const o=ca(i);if(Ei(i)&&!o)return i;i=o}return null}const nC=new Kn("",{providedIn:"root",factory:()=>!1});let ig=null;function Tl(i,o){return i[o]??R_()}function sC(i,o){const a=R_();a.producerNode?.length&&(i[o]=ig,a.lView=i,ig=N_())}const nA={...Fd,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{Nh(i.lView)},lView:null};function N_(){return Object.create(nA)}function R_(){return ig??=N_(),ig}const on={};function oC(i){aC(Sn(),Ve(),Di()+i,!1)}function aC(i,o,a,c){if(!c)if(3==(3&o[zt])){const f=i.preOrderCheckHooks;null!==f&&ea(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Ba(o,f,0,a)}eo(a)}function Al(i,o=Et.Default){const a=Ve();return null===a?Qe(i,o):rh(ni(),a,ke(i),o)}function uC(){throw new Error("invalid")}function sg(i,o,a,c,h,f,y,v,C,b,A){const L=o.blueprint.slice();return L[Xn]=h,L[zt]=140|c,(null!==b||i&&2048&i[zt])&&(L[zt]|=2048),ip(L),L[jn]=L[br]=i,L[gr]=a,L[wi]=y||i&&i[wi],L[kt]=v||i&&i[kt],L[vs]=C||i&&i[vs]||null,L[qr]=f,L[os]=function Pp(){return RT++}(),L[ws]=A,L[Pc]=b,L[Dr]=2==o.type?i[Dr]:L,L}function Sl(i,o,a,c,h){let f=i.data[o];if(null===f)f=function og(i,o,a,c,h){const f=Gc(),y=lp(),C=i.data[o]=function uA(i,o,a,c,h,f){let y=o?o.injectorIndex:-1,v=0;return function Co(){return null!==Gt.skipHydrationRootTNode}()&&(v|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:v,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,c,h);return null===i.firstChild&&(i.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C,C.prev=f)),C}(i,o,a,c,h),function Vw(){return Gt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=h;const y=function ku(){const i=Gt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Us(f,!0),f}function Ml(i,o,a,c){if(0===a)return-1;const h=o.length;for(let f=0;f<a;f++)o.push(c),i.blueprint.push(c),i.data.push(null);return h}function cC(i,o,a,c,h){const f=Tl(o,B),y=Di(),v=2&c;try{eo(-1),v&&o.length>j&&aC(i,o,j,!1),Ls(v?2:0,h);const b=v?f:null,A=Yf(b);try{null!==b&&(b.dirty=!1),a(c,h)}finally{kc(b,A)}}finally{v&&null===o[B]&&sC(o,B),eo(y),Ls(v?3:1,h)}}function ag(i,o,a){if(_o(o)){const c=Ci(null);try{const f=o.directiveEnd;for(let y=o.directiveStart;y<f;y++){const v=i.data[y];v.contentQueries&&v.contentQueries(1,a[y],y)}}finally{Ci(c)}}}function F_(i,o,a){Ua()&&(function gA(i,o,a,c){const h=a.directiveStart,f=a.directiveEnd;Wi(a)&&function CA(i,o,a){const c=Ii(o,i),h=U_(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const v=ug(i,sg(i,h,null,y,c,o,null,i[wi].rendererFactory.createRenderer(c,a),null,null,null));i[o.index]=v}(o,a,i.data[h+a.componentOffset]),i.firstCreatePass||Tr(a,o),Bi(c,o);const y=a.initialInputs;for(let v=h;v<f;v++){const C=i.data[v],b=ia(o,i,v,a);Bi(b,o),null!==y&&IA(0,v-h,b,C,0,y),cr(C)&&(Ui(a.index,o)[gr]=ia(o,i,v,a))}}(i,o,a,Ii(a,o)),64==(64&a.flags)&&gC(i,o,a))}function L_(i,o,a=Ii){const c=o.localNames;if(null!==c){let h=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],v=-1===y?a(o,i):i[y];i[h++]=v}}}function U_(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=V_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function V_(i,o,a,c,h,f,y,v,C,b,A){const L=j+c,W=L+h,ie=function rA(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:on);return a}(L,W),Ne="function"==typeof b?b():b;return ie[Xe]={type:i,blueprint:ie,template:a,queries:null,viewQuery:v,declTNode:o,data:ie.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:Ne,incompleteFirstPass:!1,ssrId:A}}let lC=i=>null;function hC(i,o,a,c){for(let h in i)if(i.hasOwnProperty(h)){a=null===a?{}:a;const f=i[h];null===c?fC(a,o,h,f):c.hasOwnProperty(h)&&fC(a,o,c[h],f)}return a}function fC(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function B_(i,o,a,c){if(Ua()){const h=null===c?null:{"":-1},f=function yA(i,o){const a=i.directiveRegistry;let c=null,h=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(Ko(o,y.selectors,!1))if(c||(c=[]),cr(y))if(null!==y.findHostDirectiveDefs){const v=[];h=h||new Map,y.findHostDirectiveDefs(y,v,h),c.unshift(...v,y),j_(i,o,v.length)}else c.unshift(y),j_(i,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,c,h),c.push(y)}return null===c?null:[c,h]}(i,a);let y,v;null===f?y=v=null:[y,v]=f,null!==y&&pC(i,o,a,y,h,v),h&&function _A(i,o,a){if(o){const c=i.localNames=[];for(let h=0;h<o.length;h+=2){const f=a[o[h+1]];if(null==f)throw new ee(-301,!1);c.push(o[h],f)}}}(a,c,h)}a.mergedAttrs=ys(a.mergedAttrs,a.attrs)}function pC(i,o,a,c,h,f){for(let b=0;b<c.length;b++)Ha(Tr(a,o),i,c[b].type);!function wA(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let b=0;b<c.length;b++){const A=c[b];A.providersResolver&&A.providersResolver(A)}let y=!1,v=!1,C=Ml(i,o,c.length,null);for(let b=0;b<c.length;b++){const A=c[b];a.mergedAttrs=ys(a.mergedAttrs,A.hostAttrs),EA(i,a,o,C,A),vA(C,A,h),null!==A.contentQueries&&(a.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(a.flags|=64);const L=A.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!v&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),v=!0),C++}!function cA(i,o,a){const h=o.directiveEnd,f=i.data,y=o.attrs,v=[];let C=null,b=null;for(let A=o.directiveStart;A<h;A++){const L=f[A],W=a?a.get(L):null,Ne=W?W.outputs:null;C=hC(L.inputs,A,C,W?W.inputs:null),b=hC(L.outputs,A,b,Ne);const We=null===C||null===y||hi(o)?null:H_(C,A,y);v.push(We)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=v,o.inputs=C,o.outputs=b}(i,a,f)}function gC(i,o,a){const c=a.directiveStart,h=a.directiveEnd,f=a.index,y=function Bw(){return Gt.lFrame.currentDirectiveIndex}();try{eo(f);for(let v=c;v<h;v++){const C=i.data[v],b=o[v];pp(v),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&mA(C,b)}}finally{eo(-1),pp(y)}}function mA(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function j_(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function vA(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;cr(o)&&(a[""]=i)}}function EA(i,o,a,c,h){i.data[c]=h;const f=h.factory||(h.factory=Qs(h.type)),y=new To(f,cr(h),Al);i.blueprint[c]=y,a[c]=y,function fA(i,o,a,c,h){const f=h.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const v=~o.index;(function pA(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=v&&y.push(v),y.push(a,c,f)}}(i,o,c,Ml(i,a,h.hostVars,on),h)}function Fn(i,o,a,c,h,f){const y=Ii(i,o);!function $_(i,o,a,c,h,f,y){if(null==f)i.removeAttribute(o,h,a);else{const v=null==y?ue(f):y(f,c||"",h);i.setAttribute(o,h,v,a)}}(o[kt],y,f,i.value,a,c,h)}function IA(i,o,a,c,h,f){const y=f[o];if(null!==y)for(let v=0;v<y.length;)mC(c,a,y[v++],y[v++],y[v++])}function mC(i,o,a,c,h){const f=Ci(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(h=y[c].call(o,h)),null!==i.setInput?i.setInput(o,h,a,c):o[c]=h}finally{Ci(f)}}function H_(i,o,a){let c=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let v=0;v<y.length;v+=2)if(y[v]===o){c.push(f,y[v+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function G_(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null,null]}function xl(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];gp(a[c]),y.contentQueries(2,o[f],f)}}}function ug(i,o){return i[Jo]?i[Od][ti]=o:i[Jo]=o,i[Od]=o,o}function kh(i,o,a){gp(0);const c=Ci(null);try{o(i,a)}finally{Ci(c)}}function sc(i){return i[yo]||(i[yo]=[])}function z_(i){return i.cleanup||(i.cleanup=[])}function _C(i,o){const a=i[vs],c=a?a.get(Xa,null):null;c&&c.handleError(o)}function q_(i,o,a,c,h){for(let f=0;f<a.length;){const y=a[f++],v=a[f++];mC(i.data[y],o[y],c,v,h)}}function fa(i,o,a){const c=Xs(o,i);!function Ku(i,o,a){i.setValue(o,a)}(i[kt],c,a)}function bA(i,o){const a=Ui(o,i),c=a[Xe];!function vC(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(c,a);const h=a[Xn];null!==h&&null===a[ws]&&(a[ws]=E_(h,a[vs])),Z_(c,a,a[gr])}function Z_(i,o,a){bi(o);try{const c=i.viewQuery;null!==c&&kh(1,c,a);const h=i.template;null!==h&&cC(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&xl(i,o),i.staticViewQueries&&kh(2,i.viewQuery,a);const f=i.components;null!==f&&function DA(i,o){for(let a=0;a<o.length;a++)bA(i,o[a])}(o,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[zt]&=-5,ii()}}let cg=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,h){const f=typeof Zone>"u"?null:Zone.current,y=function Ey(i,o,a){const c=Object.create(Rw);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=o;const h=y=>{c.cleanupFn=y};return c.ref={notify:()=>py(c),run:()=>{if(c.dirty=!1,c.hasRun&&!gy(c))return;c.hasRun=!0;const y=Yf(c);try{c.cleanupFn(),c.cleanupFn=np,c.fn(h)}finally{kc(c,y)}},cleanup:()=>c.cleanupFn()},c.ref}(a,b=>{this.all.has(b)&&this.queue.set(b,f)},h);let v;this.all.add(y),y.notify();const C=()=>{y.cleanup(),v?.(),this.all.delete(y),this.queue.delete(y)};return v=c?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=yt({token:i,providedIn:"root",factory:()=>new i})}return i})();function Fh(i,o,a){let c=a?i.styles:null,h=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const v=o[y];"number"==typeof v?f=v:1==f?h=Be(h,v):2==f&&(c=Be(c,v+": "+o[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=h:i.classesWithoutHost=h}function Lh(i,o,a,c,h=!1){for(;null!==a;){const f=o[a.index];null!==f&&c.push(zn(f)),On(f)&&wC(f,c);const y=a.type;if(8&y)Lh(i,o,a.child,c);else if(32&y){const v=Is(a,o);let C;for(;C=v();)c.push(C)}else if(16&y){const v=Jy(o,a);if(Array.isArray(v))c.push(...v);else{const C=ca(o[Dr]);Lh(C[Xe],C,v,c,!0)}}a=h?a.projectionNext:a.next}return c}function wC(i,o){for(let a=Bt;a<i.length;a++){const c=i[a],h=c[Xe].firstChild;null!==h&&Lh(c[Xe],c,h,o)}i[et]!==i[Xn]&&o.push(i[et])}function lg(i,o,a,c=!0){const h=o[wi],f=h.rendererFactory,y=h.afterRenderEventManager;f.begin?.(),y?.begin();try{EC(i,o,i.template,a)}catch(C){throw c&&_C(o,C),C}finally{f.end?.(),h.effectManager?.flush(),y?.end()}}function EC(i,o,a,c){const h=o[zt];if(256!=(256&h)){o[wi].effectManager?.flush(),bi(o);try{ip(o),function xy(i){return Gt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&cC(i,o,a,2,c);const y=3==(3&h);if(y){const b=i.preOrderCheckHooks;null!==b&&ea(o,b,null)}else{const b=i.preOrderHooks;null!==b&&Ba(o,b,0,null),qc(o,0)}if(function IC(i){for(let o=Xw(i);null!==o;o=Wy(o)){if(!o[Ze])continue;const a=o[Ft];for(let c=0;c<a.length;c++){Nu(a[c])}}}(o),CC(o,2),null!==i.contentQueries&&xl(i,o),y){const b=i.contentCheckHooks;null!==b&&ea(o,b)}else{const b=i.contentHooks;null!==b&&Ba(o,b,1),qc(o,1)}!function k_(i,o){const a=i.hostBindingOpCodes;if(null===a)return;const c=Tl(o,F);try{for(let h=0;h<a.length;h++){const f=a[h];if(f<0)eo(~f);else{const y=f,v=a[++h],C=a[++h];fp(v,y),c.dirty=!1;const b=Yf(c);try{C(2,o[y])}finally{kc(c,b)}}}}finally{null===o[F]&&sC(o,F),eo(-1)}}(i,o);const v=i.components;null!==v&&bC(o,v,0);const C=i.viewQuery;if(null!==C&&kh(2,C,c),y){const b=i.viewCheckHooks;null!==b&&ea(o,b)}else{const b=i.viewHooks;null!==b&&Ba(o,b,2),qc(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[zt]&=-73,Dy(o)}finally{ii()}}}function CC(i,o){for(let a=Xw(i);null!==a;a=Wy(a))for(let c=Bt;c<a.length;c++)dg(a[c],o)}function SA(i,o,a){dg(Ui(o,i),a)}function dg(i,o){if(!function Lw(i){return 128==(128&i[zt])}(i))return;const a=i[Xe],c=i[zt];if(80&c&&0===o||1024&c||2===o)EC(a,i,a.template,i[gr]);else if(i[Fs]>0){CC(i,1);const h=a.components;null!==h&&bC(i,h,1)}}function bC(i,o,a){for(let c=0;c<o.length;c++)SA(i,o[c],a)}class Uh{get rootNodes(){const o=this._lView,a=o[Xe];return Lh(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gr]}set context(o){this._lView[gr]=o}get destroyed(){return 256==(256&this._lView[zt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[jn];if(On(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Fp(o,c),qa(a,c))}this._attachedToViewContainer=!1}Ky(this._lView[Xe],this._lView)}onDestroy(o){!function Wd(i,o){if(256==(256&i[zt]))throw new ee(911,!1);null===i[Ys]&&(i[Ys]=[]),i[Ys].push(o)}(this._lView,o)}markForCheck(){Nh(this._cdRefInjectingView||this._lView)}detach(){this._lView[zt]&=-129}reattach(){this._lView[zt]|=128}detectChanges(){lg(this._lView[Xe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mh(i,o){wh(i,o,o[kt],2,null,null)}(this._lView[Xe],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=o}}class MA extends Uh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;lg(o[Xe],o,o[gr],!1)}checkNoChanges(){}get context(){return null}}class DC extends rg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Cn(o);return new Vh(a,this.ngModule)}}function TC(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class OA{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=yn(c);const h=this.injector.get(o,b_,c);return h!==b_||a===b_?h:this.parentInjector.get(o,a,c)}}class Vh extends FE{get inputs(){const o=this.componentDef,a=o.inputTransforms,c=TC(o.inputs);if(null!==a)for(const h of c)a.hasOwnProperty(h.propName)&&(h.transform=a[h.propName]);return c}get outputs(){return TC(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function En(i){return i.map(wn).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,h){let f=(h=h||this.ngModule)instanceof ko?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new OA(o,f):o,v=y.get(VE,null);if(null===v)throw new ee(407,!1);const L={rendererFactory:v,sanitizer:y.get(rc,null),effectManager:y.get(cg,null),afterRenderEventManager:y.get(O_,null)},W=v.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",Ne=c?function iA(i,o,a,c){const f=c.get(nC,!1)||a===ot.ShadowDom,y=i.selectRootElement(o,f);return function sA(i){lC(i)}(y),y}(W,c,this.componentDef.encapsulation,y):kp(W,ie,function xA(i){const o=i.toLowerCase();return"svg"===o?rp:"math"===o?"math":null}(ie)),Mt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Ue=null;null!==Ne&&(Ue=E_(Ne,y,!0));const Zt=V_(0,null,null,1,0,null,null,null,null,null,null),bn=sg(null,Zt,null,Mt,null,null,L,W,y,null,Ue);let Qn,Hi;bi(bn);try{const qo=this.componentDef;let pd,Fm=null;qo.findHostDirectiveDefs?(pd=[],Fm=new Map,qo.findHostDirectiveDefs(qo,pd,Fm),pd.push(qo)):pd=[qo];const HM=function W_(i,o){const a=i[Xe],c=j;return i[c]=o,Sl(a,c,2,"#host",null)}(bn,Ne),GM=function NA(i,o,a,c,h,f,y){const v=h[Xe];!function RA(i,o,a,c){for(const h of i)o.mergedAttrs=ys(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(Fh(o,o.mergedAttrs,!0),null!==a&&Eh(c,a,o))}(c,i,o,y);let C=null;null!==o&&(C=E_(o,h[vs]));const b=f.rendererFactory.createRenderer(o,a);let A=16;a.signals?A=4096:a.onPush&&(A=64);const L=sg(h,U_(a),null,A,h[i.index],i,f,b,null,null,C);return v.firstCreatePass&&j_(v,i,c.length-1),ug(h,L),h[i.index]=L}(HM,Ne,qo,pd,bn,L,W);Hi=qd(Zt,j),Ne&&function SC(i,o,a,c){if(c)Hr(i,a,["ng-version",jE.full]);else{const{attrs:h,classes:f}=function tn(i){const o=[],a=[];let c=1,h=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===h?""!==f&&o.push(f,i[++c]):8===h&&a.push(f);else{if(!Gr(h))break;h=f}c++}return{attrs:o,classes:a}}(o.selectors[0]);h&&Hr(i,a,h),f&&f.length>0&&uE(i,a,f.join(" "))}}(W,qo,Ne,c),void 0!==a&&function kA(i,o,a){const c=i.projection=[];for(let h=0;h<o.length;h++){const f=a[h];c.push(null!=f?Array.from(f):null)}}(Hi,this.ngContentSelectors,a),Qn=function AC(i,o,a,c,h,f){const y=ni(),v=h[Xe],C=Ii(y,h);pC(v,h,y,a,null,c);for(let A=0;A<a.length;A++)Bi(ia(h,v,y.directiveStart+A,y),h);gC(v,h,y),C&&Bi(C,h);const b=ia(h,v,y.directiveStart+y.componentOffset,y);if(i[gr]=h[gr]=b,null!==f)for(const A of f)A(b,o);return ag(v,y,i),b}(GM,qo,pd,Fm,bn,[MC]),Z_(Zt,bn,null)}finally{ii()}return new PA(this.componentType,Qn,nc(Hi,bn),bn,Hi)}}class PA extends N1{constructor(o,a,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new MA(h),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const f=this._rootLView;q_(f[Xe],f,h,o,a),this.previousInputValues.set(o,a),Nh(Ui(this._tNode.index,f))}}get injector(){return new Br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function MC(){const i=ni();Va(Ve()[Xe],i)}function Y_(i){let o=function K_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let h;if(cr(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ee(903,!1);h=o.\u0275dir}if(h){if(a){c.push(h);const y=i;y.inputs=hg(i.inputs),y.inputTransforms=hg(i.inputTransforms),y.declaredInputs=hg(i.declaredInputs),y.outputs=hg(i.outputs);const v=h.hostBindings;v&&VA(i,v);const C=h.viewQuery,b=h.contentQueries;if(C&&LA(i,C),b&&UA(i,b),q(i.inputs,h.inputs),q(i.declaredInputs,h.declaredInputs),q(i.outputs,h.outputs),null!==h.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),q(y.inputTransforms,h.inputTransforms)),cr(h)&&h.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let y=0;y<f.length;y++){const v=f[y];v&&v.ngInherit&&v(i),v===Y_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function FA(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const h=i[c];h.hostVars=o+=h.hostVars,h.hostAttrs=ys(h.hostAttrs,a=ys(a,h.hostAttrs))}}(c)}function hg(i){return i===Ot?{}:i===ct?[]:i}function LA(i,o){const a=i.viewQuery;i.viewQuery=a?(c,h)=>{o(c,h),a(c,h)}:o}function UA(i,o){const a=i.contentQueries;i.contentQueries=a?(c,h,f)=>{o(c,h,f),a(c,h,f)}:o}function VA(i,o){const a=i.hostBindings;i.hostBindings=a?(c,h)=>{o(c,h),a(c,h)}:o}function NC(i){const o=i.inputConfig,a={};for(const c in o)if(o.hasOwnProperty(c)){const h=o[c];Array.isArray(h)&&h[2]&&(a[c]=h[2])}i.inputTransforms=a}function fg(i){return!!X_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function X_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Lo(i,o,a){return i[o]=a}function ji(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function eu(i,o,a,c){const h=ji(i,o,a);return ji(i,o+1,c)||h}function ev(i,o,a,c){const h=Ve();return ji(h,Fu(),o)&&(Sn(),Fn(lr(),h,i,o,a,c)),ev}function tu(i,o,a,c,h,f){const v=eu(i,function Io(){return Gt.lFrame.bindingIndex}(),a,h);return Vs(2),v?o+ue(a)+c+ue(h)+f:on}function GC(i,o,a,c,h,f,y,v){const C=Ve(),b=Sn(),A=i+j,L=b.firstCreatePass?function sS(i,o,a,c,h,f,y,v,C){const b=o.consts,A=Sl(o,i,4,y||null,Eo(b,v));B_(o,a,A,Eo(b,C)),Va(o,A);const L=A.tView=V_(2,A,c,h,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,b,null);return null!==o.queries&&(o.queries.template(o,A),L.queries=o.queries.embeddedTView(A)),A}(A,b,C,o,a,c,h,f,y):b.data[A];Us(L,!1);const W=zC(b,C,L,i);to()&&_h(b,C,W,L),Bi(W,C),ug(C,C[A]=G_(W,C,W,L)),Es(L)&&F_(b,C,L),null!=y&&L_(C,L,v)}let zC=function qC(i,o,a,c){return no(!0),o[kt].createComment("")};function ZC(i){return La(function Sy(){return Gt.lFrame.contextLView}(),j+i)}function fv(i,o,a){const c=Ve();return ji(c,Fu(),o)&&function Ds(i,o,a,c,h,f,y,v){const C=Ii(o,a);let A,b=o.inputs;!v&&null!=b&&(A=b[c])?(q_(i,a,A,c,h),Wi(o)&&function dA(i,o){const a=Ui(o,i);16&a[zt]||(a[zt]|=64)}(a,o.index)):3&o.type&&(c=function lA(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),h=null!=y?y(h,o.value||"",c):h,f.setProperty(C,c,h))}(Sn(),lr(),c,i,o,c[kt],a,!1),fv}function _g(i,o,a,c,h){const y=h?"class":"style";q_(i,a,o.inputs[y],y,c)}function vg(i,o,a,c){const h=Ve(),f=Sn(),y=j+i,v=h[kt],C=f.firstCreatePass?function cS(i,o,a,c,h,f){const y=o.consts,C=Sl(o,i,2,c,Eo(y,h));return B_(o,a,C,Eo(y,f)),null!==C.attrs&&Fh(C,C.attrs,!1),null!==C.mergedAttrs&&Fh(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(y,f,h,o,a,c):f.data[y],b=WC(f,h,C,v,o,i);h[y]=b;const A=Es(C);return Us(C,!0),Eh(v,b,C),32!=(32&C.flags)&&to()&&_h(f,h,b,C),0===function op(){return Gt.lFrame.elementDepthCount}()&&Bi(b,h),function ap(){Gt.lFrame.elementDepthCount++}(),A&&(F_(f,h,C),ag(f,C,h)),null!==c&&L_(h,C),vg}function wg(){let i=ni();lp()?function dp(){Gt.lFrame.isParent=!1}():(i=i.parent,Us(i,!1));const o=i;(function Ru(i){return Gt.skipHydrationRootTNode===i})(o)&&function cp(){Gt.skipHydrationRootTNode=null}(),function Ty(){Gt.lFrame.elementDepthCount--}();const a=Sn();return a.firstCreatePass&&(Va(a,i),_o(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function io(i){return 0!=(8&i.flags)}(o)&&_g(a,o,Ve(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Wc(i){return 0!=(16&i.flags)}(o)&&_g(a,o,Ve(),o.stylesWithoutHost,!1),wg}function pv(i,o,a,c){return vg(i,o,a,c),wg(),pv}let WC=(i,o,a,c,h,f)=>(no(!0),kp(c,h,function yp(){return Gt.lFrame.currentNamespace}()));function XC(){return Ve()}function yv(i){return!!i&&"function"==typeof i.then}function eI(i){return!!i&&"function"==typeof i.subscribe}function _v(i,o,a,c){const h=Ve(),f=Sn(),y=ni();return function rI(i,o,a,c,h,f,y){const v=Es(c),b=i.firstCreatePass&&z_(i),A=o[gr],L=sc(o);let W=!0;if(3&c.type||y){const We=Ii(c,o),dt=y?y(We):We,Mt=L.length,Ue=y?bn=>y(zn(bn[c.index])):c.index;let Zt=null;if(!y&&v&&(Zt=function nI(i,o,a,c){const h=i.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const y=h[f];if(y===a&&h[f+1]===c){const v=o[yo],C=h[f+2];return v.length>C?v[C]:null}"string"==typeof y&&(f+=2)}return null}(i,o,h,c.index)),null!==Zt)(Zt.__ngLastListenerFn__||Zt).__ngNextListenerFn__=f,Zt.__ngLastListenerFn__=f,W=!1;else{f=sI(c,o,A,f,!1);const bn=a.listen(dt,h,f);L.push(f,bn),b&&b.push(h,Ue,Mt,Mt+1)}}else f=sI(c,o,A,f,!1);const ie=c.outputs;let Ne;if(W&&null!==ie&&(Ne=ie[h])){const We=Ne.length;if(We)for(let dt=0;dt<We;dt+=2){const Qn=o[Ne[dt]][Ne[dt+1]].subscribe(f),Hi=L.length;L.push(f,Qn),b&&b.push(h,c.index,Hi,-(Hi+1))}}}(f,h,h[kt],y,i,o,c),_v}function iI(i,o,a,c){try{return Ls(6,o,a),!1!==a(c)}catch(h){return _C(i,h),!1}finally{Ls(7,o,a)}}function sI(i,o,a,c,h){return function f(y){if(y===Function)return c;Nh(i.componentOffset>-1?Ui(i.index,o):o);let C=iI(o,a,c,y),b=f.__ngNextListenerFn__;for(;b;)C=iI(o,a,b,y)&&C,b=b.__ngNextListenerFn__;return h&&!1===C&&y.preventDefault(),C}}function oI(i=1){return function zc(i){return(Gt.lFrame.contextLView=function Xd(i,o){for(;i>0;)o=o[br],i--;return o}(i,Gt.lFrame.contextLView))[gr]}(i)}function Cg(i,o){return i<<17|o<<2}function su(i){return i>>17&32767}function vv(i){return 2|i}function oc(i){return(131068&i)>>2}function wv(i,o){return-131069&i|o<<2}function rr(i){return 1|i}function yI(i,o,a,c,h){const f=i[a+1],y=null===o;let v=c?su(f):oc(f),C=!1;for(;0!==v&&(!1===C||y);){const A=i[v+1];Ig(i[v],o)&&(C=!0,i[v+1]=c?rr(A):vv(A)),v=c?su(A):oc(A)}C&&(i[a+1]=c?vv(f):rr(f))}function Ig(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Za(i,o)>=0}const Dn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function bg(i){return i.substring(Dn.key,Dn.keyEnd)}function ES(i,o){const a=Dn.textEnd;return a===o?-1:(o=Dn.keyEnd=function Hn(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,Dn.key=o,a),Ts(i,o,a))}function Ts(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function ac(i,o){return function co(i,o,a,c){const h=Ve(),f=Sn(),y=Vs(2);f.firstUpdatePass&&oi(f,i,y,c),o!==on&&ji(h,y,o)&&Sg(f,f.data[Di()],h,h[kt],i,h[y+1]=function Vl(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ne(Ya(i)))),i}(o,a),c,y)}(i,o,null,!0),ac}function _I(i){!function dr(i,o,a,c){const h=Sn(),f=Vs(2);h.firstUpdatePass&&oi(h,null,f,c);const y=Ve();if(a!==on&&ji(y,f,a)){const v=h.data[Di()];if(bv(v,c)&&!qh(h,f)){let C=c?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(a=Be(C,a||"")),_g(h,v,y,a,c)}else!function Bo(i,o,a,c,h,f,y,v){h===on&&(h=ct);let C=0,b=0,A=0<h.length?h[0]:null,L=0<f.length?f[0]:null;for(;null!==A||null!==L;){const W=C<h.length?h[C+1]:void 0,ie=b<f.length?f[b+1]:void 0;let We,Ne=null;A===L?(C+=2,b+=2,W!==ie&&(Ne=L,We=ie)):null===L||null!==A&&A<L?(C+=2,Ne=A):(b+=2,Ne=L,We=ie),null!==Ne&&Sg(i,o,a,c,Ne,We,y,v),A=C<h.length?h[C]:null,L=b<f.length?f[b]:null}}(h,v,y,y[kt],y[f+1],y[f+1]=function DS(i,o,a){if(null==a||""===a)return ct;const c=[],h=Ya(a);if(Array.isArray(h))for(let f=0;f<h.length;f++)i(c,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&i(c,f,h[f]);else"string"==typeof h&&o(c,h);return c}(i,o,a),c,f)}}(Ag,Vo,i,!0)}function Vo(i,o){for(let a=function xi(i){return function Gh(i){Dn.key=0,Dn.keyEnd=0,Dn.value=0,Dn.valueEnd=0,Dn.textEnd=i.length}(i),ES(i,Ts(i,0,Dn.textEnd))}(o);a>=0;a=ES(o,a))Yi(i,bg(o),!0)}function qh(i,o){return o>=i.expandoStartIndex}function oi(i,o,a,c){const h=i.data;if(null===h[a+1]){const f=h[Di()],y=qh(i,a);bv(f,c)&&null===o&&!y&&(o=!1),o=function ou(i,o,a,c){const h=function Qd(i){const o=Gt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(a=Kr(a=Tg(null,i,o,a,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==h)if(a=Tg(h,i,o,a,c),null===f){let C=function bS(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==oc(c))return i[su(c)]}(i,o,c);void 0!==C&&Array.isArray(C)&&(C=Tg(null,i,o,C[1],c),C=Kr(C,o.attrs,c),function vI(i,o,a,c){i[su(a?o.classBindings:o.styleBindings)]=c}(i,o,c,C))}else f=function Iv(i,o,a){let c;const h=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<h;f++)c=Kr(c,i[f].hostAttrs,a);return Kr(c,o.attrs,a)}(i,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),a}(h,f,o,c),function _S(i,o,a,c,h,f){let y=f?o.classBindings:o.styleBindings,v=su(y),C=oc(y);i[c]=a;let A,b=!1;if(Array.isArray(a)?(A=a[1],(null===A||Za(a,A)>0)&&(b=!0)):A=a,h)if(0!==C){const W=su(i[v+1]);i[c+1]=Cg(W,v),0!==W&&(i[W+1]=wv(i[W+1],c)),i[v+1]=function mS(i,o){return 131071&i|o<<17}(i[v+1],c)}else i[c+1]=Cg(v,0),0!==v&&(i[v+1]=wv(i[v+1],c)),v=c;else i[c+1]=Cg(C,0),0===v?v=c:i[C+1]=wv(i[C+1],c),C=c;b&&(i[c+1]=vv(i[c+1])),yI(i,A,c,!0),yI(i,A,c,!1),function vS(i,o,a,c,h){const f=h?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&Za(f,o)>=0&&(a[c+1]=rr(a[c+1]))}(o,A,i,c,f),y=Cg(v,C),f?o.classBindings=y:o.styleBindings=y}(h,f,o,a,y,c)}}function Tg(i,o,a,c,h){let f=null;const y=a.directiveEnd;let v=a.directiveStylingLast;for(-1===v?v=a.directiveStart:v++;v<y&&(f=o[v],c=Kr(c,f.hostAttrs,h),f!==i);)v++;return null!==i&&(a.directiveStylingLast=v),c}function Kr(i,o,a){const c=a?1:2;let h=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?h=y:h===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Yi(i,y,!!a||o[++f]))}return void 0===i?null:i}function Ag(i,o,a){const c=String(o);""!==c&&!c.includes(" ")&&Yi(i,c,a)}function Sg(i,o,a,c,h,f,y,v){if(!(3&o.type))return;const C=i.data,b=C[v+1],A=function yS(i){return 1==(1&i)}(b)?wI(C,o,a,h,oc(b),y):void 0;Mg(A)||(Mg(f)||function gS(i){return 2==(2&i)}(b)&&(f=wI(C,null,a,h,v,y)),function JT(i,o,a,c,h){if(o)h?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:ch.DashCase;null==h?i.removeStyle(a,c,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=ch.Important),i.setStyle(a,c,h,f))}}(c,y,Xs(Di(),a),h,f))}function wI(i,o,a,c,h,f){const y=null===o;let v;for(;h>0;){const C=i[h],b=Array.isArray(C),A=b?C[1]:C,L=null===A;let W=a[h+1];W===on&&(W=L?ct:void 0);let ie=L?oh(W,c):A===c?W:void 0;if(b&&!Mg(ie)&&(ie=oh(C,c)),Mg(ie)&&(v=ie,y))return v;const Ne=i[h+1];h=y?su(Ne):oc(Ne)}if(null!==o){let C=f?o.residualClasses:o.residualStyles;null!=C&&(v=oh(C,c))}return v}function Mg(i){return void 0!==i}function bv(i,o){return 0!=(i.flags&(o?8:16))}function xg(i,o=""){const a=Ve(),c=Sn(),h=i+j,f=c.firstCreatePass?Sl(c,h,1,o,null):c.data[h],y=Dv(c,a,f,o,i);a[h]=y,to()&&_h(c,a,y,f),Us(f,!1)}let Dv=(i,o,a,c,h)=>(no(!0),function Rp(i,o){return i.createText(o)}(o[kt],c));function Zh(i){return Bl("",i,""),Zh}function Bl(i,o,a){const c=Ve(),h=function Pl(i,o,a,c){return ji(i,Fu(),a)?o+ue(a)+c:on}(c,i,o,a);return h!==on&&fa(c,Di(),h),Bl}function Wh(i,o,a,c,h){const f=Ve(),y=tu(f,i,o,a,c,h);return y!==on&&fa(f,Di(),y),Wh}const uc=void 0;var NI=["en",[["a","p"],["AM","PM"],uc],[["AM","PM"],uc,uc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],uc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],uc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",uc,"{1} 'at' {0}",uc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function OS(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Hl={};function Nv(i){const o=function $g(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=jg(o);if(a)return a;const c=o.split("-")[0];if(a=jg(c),a)return a;if("en"===c)return NI;throw new ee(701,!1)}function Gl(i){return Nv(i)[zl.PluralCase]}function jg(i){return i in Hl||(Hl[i]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[i]),Hl[i]}var zl=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(zl||{});const cc="en-US";let Qh=cc;function Xg(i,o,a,c,h){if(i=ke(i),Array.isArray(i))for(let f=0;f<i.length;f++)Xg(i[f],o,a,c,h);else{const f=Sn(),y=Ve(),v=ni();let C=yl(i)?i:ke(i.provide);const b=OE(i),A=1048575&v.providerIndexes,L=v.directiveStart,W=v.providerIndexes>>20;if(yl(i)||!i.multi){const ie=new To(b,h,Al),Ne=Wv(C,o,h?A:A+W,L);-1===Ne?(Ha(Tr(v,y),f,C),fc(f,i,o.length),o.push(C),v.directiveStart++,v.directiveEnd++,h&&(v.providerIndexes+=1048576),a.push(ie),y.push(ie)):(a[Ne]=ie,y[Ne]=ie)}else{const ie=Wv(C,o,A+W,L),Ne=Wv(C,o,A,A+W),dt=Ne>=0&&a[Ne];if(h&&!dt||!h&&!(ie>=0&&a[ie])){Ha(Tr(v,y),f,C);const Mt=function KS(i,o,a,c,h){const f=new To(i,a,Al);return f.multi=[],f.index=o,f.componentProviders=0,Xl(f,h,c&&!a),f}(h?eb:Rr,a.length,h,c,b);!h&&dt&&(a[Ne].providerFactory=Mt),fc(f,i,o.length,0),o.push(C),v.directiveStart++,v.directiveEnd++,h&&(v.providerIndexes+=1048576),a.push(Mt),y.push(Mt)}else fc(f,i,ie>-1?ie:Ne,Xl(a[h?Ne:ie],b,!h&&c));!h&&c&&dt&&a[Ne].componentProviders++}}}function fc(i,o,a,c){const h=yl(o),f=function KP(i){return!!i.useClass}(o);if(h||f){const C=(f?ke(o.useClass):o).prototype.ngOnDestroy;if(C){const b=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const A=b.indexOf(a);-1===A?b.push(a,[c,C]):b[A+1].push(c,C)}else b.push(a,C)}}}function Xl(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Wv(i,o,a,c){for(let h=a;h<c;h++)if(o[h]===i)return h;return-1}function Rr(i,o,a,c){return Kv(this.multi,[])}function eb(i,o,a,c){const h=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,v=ia(a,a[Xe],this.providerFactory.index,c);f=v.slice(0,y),Kv(h,f);for(let C=y;C<v.length;C++)f.push(v[C])}else f=[],Kv(h,f);return f}function Kv(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function tb(i,o=[]){return a=>{a.providersResolver=(c,h)=>function Zv(i,o,a){const c=Sn();if(c.firstCreatePass){const h=cr(i);Xg(a,c.data,c.blueprint,h,!0),Xg(o,c.data,c.blueprint,h,!1)}}(c,h?h(i):i,o)}}class hu{}class Yv{}function nb(i,o){return new em(i,o??null,[])}class em extends hu{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new DC(this);const h=ei(o);this._bootstrapComponents=da(h.bootstrap),this._r3Injector=zE(o,a,[{provide:hu,useValue:this},{provide:rg,useValue:this.componentFactoryResolver},...c],ne(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class zs extends Yv{constructor(o){super(),this.moduleType=o}create(o){return new em(this.moduleType,o,[])}}class ib extends hu{constructor(o){super(),this.componentFactoryResolver=new DC(this),this.instance=null;const a=new Qp([...o.providers,{provide:hu,useValue:this},{provide:rg,useValue:this.componentFactoryResolver}],o.parent||Yp(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Jv(i,o,a=null){return new ib({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let Xv=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=SE(0,a.type),h=c.length>0?Jv([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,h)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=yt({token:i,providedIn:"environment",factory:()=>new i(Qe(ko))})}return i})();function ed(i){i.getStandaloneInjector=o=>o.get(Xv).getOrCreateStandaloneInjector(i)}function n0(i,o,a){const c=ri()+i,h=Ve();return h[c]===on?Lo(h,c,a?o.call(a):o()):function Bh(i,o){return i[o]}(h,c)}function r0(i,o,a,c){return om(Ve(),ri(),i,o,a,c)}function es(i,o){const a=i[o];return a===on?void 0:a}function om(i,o,a,c,h,f){const y=o+a;return ji(i,y,h)?Lo(i,y+1,f?c.call(f,h):c(h)):es(i,y+1)}function pb(i,o,a,c,h,f,y,v){const C=o+a;return function pg(i,o,a,c,h){const f=eu(i,o,a,c);return ji(i,o+2,h)||f}(i,C,h,f,y)?Lo(i,C+3,v?c.call(v,h,f,y):c(h,f,y)):es(i,C+3)}function s0(i,o){const a=Sn();let c;const h=i+j;a.firstCreatePass?(c=function o0(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[h]=c,c.onDestroy&&(a.destroyHooks??=[]).push(h,c.onDestroy)):c=a.data[h];const f=c.factory||(c.factory=Qs(c.type)),v=Rt(Al);try{const C=si(!1),b=f();return si(C),function uS(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,Ve(),h,b),b}finally{Rt(v)}}function a0(i,o,a){const c=i+j,h=Ve(),f=La(h,c);return fu(h,c)?om(h,ri(),o,f.transform,a,f):f.transform(a)}function Ss(i,o,a,c,h){const f=i+j,y=Ve(),v=La(y,f);return fu(y,f)?pb(y,ri(),o,v.transform,a,c,h,v):v.transform(a,c,h)}function fu(i,o){return i[Xe].data[o].pure}function df(){return this._results[Symbol.iterator]()}class nd{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Fo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=nd.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=df)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=function Mi(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Tp(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let h=i[c],f=o[c];if(a&&(h=a(h),f=a(f)),f!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function XS(i,o,a,c=!0){const h=o[Xe];if(function qT(i,o,a,c){const h=Bt+c,f=a.length;c>0&&(a[h-1][ti]=o),c<f-Bt?(o[ti]=a[h],ky(a,Bt+c,o)):(a.push(o),o[ti]=null),o[jn]=a;const y=o[Fi];null!==y&&a!==y&&function ZT(i,o){const a=i[Ft];o[Dr]!==o[jn][jn][Dr]&&(i[Ze]=!0),null===a?i[Ft]=[o]:a.push(o)}(y,o);const v=o[fi];null!==v&&v.insertView(i),o[zt]|=128}(h,o,i,a),c){const f=Xy(a,i),y=o[kt],v=Lp(y,i[et]);null!==v&&function gh(i,o,a,c,h,f){c[Xn]=h,c[qr]=o,wh(i,c,a,1,h,f)}(h,i[qr],y,o,v,f)}}let gc=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=yb}return i})();const eM=gc,tM=class extends eM{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,c){const h=function mb(i,o,a,c){const h=o.tView,v=sg(i,h,a,4096&i[zt]?4096:16,null,o,null,null,null,c?.injector??null,c?.hydrationInfo??null);v[Fi]=i[o.index];const b=i[fi];return null!==b&&(v[fi]=b.createEmbeddedView(h)),Z_(h,v,a),v}(this._declarationLView,this._declarationTContainer,o,{injector:a,hydrationInfo:c});return new Uh(h)}};function yb(){return cm(ni(),Ve())}function cm(i,o){return 4&i.type?new tM(o,i,nc(i,o)):null}let ze=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=jr}return i})();function jr(){return Eb(ni(),Ve())}const qs=ze,lm=class extends qs{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return nc(this._hostTNode,this._hostLView)}get injector(){return new Br(this._hostTNode,this._hostLView)}get parentInjector(){const o=na(this._hostTNode,this._hostLView);if(Kc(o)){const a=Wn(o,this._hostLView),c=Ki(o);return new Br(a[Xe].data[c+8],a)}return new Br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=vt(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(o,a,c){let h,f;"number"==typeof c?h=c:null!=c&&(h=c.index,f=c.injector);const v=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(v,h,false),v}createComponent(o,a,c,h,f){const y=o&&!function oo(i){return"function"==typeof i}(o);let v;if(y)v=a;else{const We=a||{};v=We.index,c=We.injector,h=We.projectableNodes,f=We.environmentInjector||We.ngModuleRef}const C=y?o:new Vh(Cn(o)),b=c||this.parentInjector;if(!f&&null==C.ngModule){const dt=(y?b:this.parentInjector).get(ko,null);dt&&(f=dt)}Cn(C.componentType??{});const ie=C.create(b,h,null,f);return this.insertImpl(ie.hostView,v,false),ie}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,c){const h=o._lView;if(function $c(i){return On(i[jn])}(h)){const C=this.indexOf(o);if(-1!==C)this.detach(C);else{const b=h[jn],A=new lm(b,b[qr],b[jn]);A.detach(A.indexOf(o))}}const y=this._adjustIndex(a),v=this._lContainer;return XS(v,h,y,!c),o.attachToViewContainerRef(),ky(Tt(v),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=vt(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Fp(this._lContainer,a);c&&(qa(Tt(this._lContainer),a),Ky(c[Xe],c))}detach(o){const a=this._adjustIndex(o,-1),c=Fp(this._lContainer,a);return c&&null!=qa(Tt(this._lContainer),a)?new Uh(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function vt(i){return i[8]}function Tt(i){return i[8]||(i[8]=[])}function Eb(i,o){let a;const c=o[i.index];return On(c)?a=c:(a=G_(c,o,null,i),o[i.index]=a,ug(o,a)),_e(a,o,i,c),new lm(a,i,o)}let _e=function $e(i,o,a,c){if(i[et])return;let h;h=8&a.type?zn(c):function lt(i,o){const a=i[kt],c=a.createComment(""),h=Ii(o,i);return Ju(a,Lp(a,h),c,function YT(i,o){return i.nextSibling(o)}(a,h),!1),c}(o,a),i[et]=h};class c0{constructor(o){this.queryList=o,this.matches=null}clone(){return new c0(this.queryList)}setDirty(){this.queryList.setDirty()}}class l0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);h.push(this.queries[y.indexInDeclarationView].clone())}return new l0(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==at(o,a).matches&&this.queries[a].setDirty()}}class Ib{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class d0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(o,h);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new d0(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class h0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new h0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(o,a,bb(a,f)),this.matchTNodeWithReadOption(o,a,So(a,o,f,!1,!1))}else c===gc?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,So(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Oh||h===ze||h===gc&&4&a.type)this.addMatch(a.index,-2);else{const f=So(a,o,h,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function bb(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function C2(i,o,a,c){return-1===a?function rM(i,o){return 11&i.type?nc(i,o):4&i.type?cm(i,o):null}(o,i):-2===a?function iM(i,o,a){return a===Oh?nc(o,i):a===gc?cm(o,i):a===ze?Eb(o,i):void 0}(i,o,c):ia(i,i[Xe],a,o)}function f0(i,o,a,c){const h=o[fi].queries[c];if(null===h.matches){const f=i.data,y=a.matches,v=[];for(let C=0;C<y.length;C+=2){const b=y[C];v.push(b<0?null:C2(o,f[b],y[C+1],a.metadata.read))}h.matches=v}return h.matches}function Jt(i,o,a,c){const h=i.queries.getByIndex(a),f=h.matches;if(null!==f){const y=f0(i,o,h,a);for(let v=0;v<f.length;v+=2){const C=f[v];if(C>0)c.push(y[v/2]);else{const b=f[v+1],A=o[-C];for(let L=Bt;L<A.length;L++){const W=A[L];W[Fi]===W[jn]&&Jt(W[Xe],W,b,c)}if(null!==A[Ft]){const L=A[Ft];for(let W=0;W<L.length;W++){const ie=L[W];Jt(ie[Xe],ie,b,c)}}}}}return c}function yc(i){const o=Ve(),a=Sn(),c=Oy();gp(c+1);const h=at(a,c);if(i.dirty&&function Zd(i){return 4==(4&i[zt])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const f=h.crossesNgTemplate?Jt(a,o,c,[]):f0(a,o,h,c);i.reset(f,k1),i.notifyOnChanges()}return!0}return!1}function yr(i,o,a,c){const h=Sn();if(h.firstCreatePass){const f=ni();(function Tb(i,o,a){null===i.queries&&(i.queries=new d0),i.queries.track(new h0(o,a))})(h,new Ib(o,a,c),f.index),function kr(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function Rn(i,o,a){const c=new nd(4==(4&a));(function aA(i,o,a,c){const h=sc(o);h.push(a),i.firstCreatePass&&z_(i).push(c,h.length-1)})(i,o,c,c.destroy),null===o[fi]&&(o[fi]=new l0),o[fi].queries.push(new c0(c))}(h,Ve(),a)}function St(){return function pf(i,o){return i[fi].queries[o].queryList}(Ve(),Oy())}function at(i,o){return i.queries.getByIndex(o)}function gf(i,o){return cm(i,o)}function fm(i){return!!ei(i)}const _i=new Kn("Application Initializer");let or=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=st(_i,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const h of this.appInits){const f=h();if(yv(f))a.push(f);else if(eI(f)){const y=new Promise((v,C)=>{f.subscribe({complete:v,error:C})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),_0=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const ki=new Kn("LocaleId",{providedIn:"root",factory:()=>st(ki,Et.Optional|Et.SkipSelf)||function sd(){return typeof $localize<"u"&&$localize.locale||cc}()}),Hb=new Kn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let _a=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new se.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class Fr{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let va=(()=>{class i{compileModuleSync(a){return new zs(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=da(ei(a).declarations).reduce((y,v)=>{const C=Cn(v);return C&&y.push(new Vh(C)),y},[]);return new Fr(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const hr=new Kn(""),wa=new Kn("");let D0,qb=(()=>{class i{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,D0||(function ud(i){D0=i}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}static#e=this.\u0275fac=function(c){return new(c||i)(Qe(gi),Qe(b0),Qe(wa))};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac})}return i})(),b0=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return D0?.findTestabilityInTree(this,a,c)??null}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),Ea=null;const Mn=new Kn("AllowMultipleToken"),qn=new Kn("PlatformDestroyListeners"),vu=new Kn("appBootstrapListener");class Wb{constructor(o,a){this.name=o,this.token=a}}function Jb(i,o,a=[]){const c=`Platform: ${o}`,h=new Kn(c);return(f=[])=>{let y=M0();if(!y||y.injector.get(Mn,!1)){const v=[...a,...f,{provide:h,useValue:!0}];i?i(v):function Kb(i){if(Ea&&!Ea.get(Mn,!1))throw new ee(400,!1);(function A0(){!function Xf(i){vy=i}(()=>{throw new ee(600,!1)})})(),Ea=i;const o=i.get(tD);(function Qb(i){i.get(NE,null)?.forEach(a=>a())})(i)}(function eD(i=[],o){return Qi.create({name:o,providers:[{provide:fe,useValue:"platform"},{provide:qn,useValue:new Set([()=>Ea=null])},...i]})}(v,c))}return function Xb(i){const o=M0();if(!o)throw new ee(401,!1);return o}()}}function M0(){return Ea?.get(tD)??null}let tD=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function x0(i="zone.js",o){return"noop"===i?new q1:"zone.js"===i?new gi(o):i}(c?.ngZone,function nD(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return h.run(()=>{const f=function rb(i,o,a){return new em(i,o,a)}(a.moduleType,this.injector,function N0(i){return[{provide:gi,useFactory:i},{provide:ml,multi:!0,useFactory:()=>{const o=st(rD,{optional:!0});return()=>o.initialize()}},{provide:P0,useFactory:Ia},{provide:QE,useFactory:Ph}]}(()=>h)),y=f.injector.get(Xa,null);return h.runOutsideAngular(()=>{const v=h.onError.subscribe({next:C=>{y.handleError(C)}});f.onDestroy(()=>{Ec(this._modules,f),v.unsubscribe()})}),function wu(i,o,a){try{const c=a();return yv(c)?c.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(y,h,()=>{const v=f.injector.get(or);return v.runInitializers(),v.donePromise.then(()=>(function RI(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(Qh=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(ki,cc)||cc),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const h=cd({},c);return function T0(i,o,a){const c=new zs(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(a){const c=a.injector.get(Ca);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new ee(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(qn,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||i)(Qe(Qi))};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function cd(i,o){return Array.isArray(o)?o.reduce(cd,i):{...i,...o}}let Ca=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=st(P0),this.zoneIsStable=st(QE),this.componentTypes=[],this.components=[],this.isStable=st(_a).hasPendingTasks.pipe((0,Oe.w)(a=>a?(0,ve.of)(!1):this.zoneIsStable),(0,he.x)(),(0,Ee.B)()),this._injector=st(ko)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const h=a instanceof FE;if(!this._injector.get(or).done)throw!h&&mo(a),new ee(405,!1);let y;y=h?a:this._injector.get(rg).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const v=function S0(i){return i.isBoundToModule}(y)?void 0:this._injector.get(hu),b=y.create(Qi.NULL,[],c||y.selector,v),A=b.location.nativeElement,L=b.injector.get(hr,null);return L?.registerApplication(A),b.onDestroy(()=>{this.detachView(b.hostView),Ec(this.components,b),L?.unregisterApplication(A)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Ec(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(vu,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Ec(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ee(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Ec(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}const P0=new Kn("",{providedIn:"root",factory:()=>st(Xa).handleError.bind(void 0)});function Ia(){const i=st(gi),o=st(Xa);return a=>i.runOutsideAngular(()=>o.handleError(a))}let rD=(()=>{class i{constructor(){this.zone=st(gi),this.applicationRef=st(Ca)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=yt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Em(){return!1}let Im=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Tf}return i})();function Tf(i){return function sD(i,o,a){if(Wi(i)&&!a){const c=Ui(i.index,o);return new Uh(c,c)}return 47&i.type?new Uh(o[Dr],o):null}(ni(),Ve(),16==(16&i))}class F0{constructor(){}supports(o){return fg(o)}create(o){return new SM(o)}}const Sm=(i,o)=>o;class SM{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Sm}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<Cu(c,h,f)?a:c,v=Cu(y,h,f),C=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{f||(f=[]);const b=v-h,A=C-h;if(b!=A){for(let W=0;W<b;W++){const ie=W<f.length?f[W]:f[W]=0,Ne=ie+W;A<=Ne&&Ne<b&&(f[W]=ie+1)}f[y.previousIndex]=A-b}}v!==C&&o(y,v,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!fg(o))throw new ee(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)f=o[v],y=this._trackByFn(v,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,v)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,v),c=!0),a=a._next}else h=0,function GA(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,v=>{y=this._trackByFn(h,v),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,v,y,h)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,y,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,h)):o=this._addAfter(new MM(a,c),f,h),o}_verifyReinsertion(o,a,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ic),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ic),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class MM{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Ic{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new cD,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Cu(i,o,a){const c=i.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class L0{constructor(){}supports(o){return o instanceof Map||X_(o)}create(){return new bc}}class bc{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||X_(o)))throw new ee(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const f=h._prev,y=h._next;return f&&(f._next=y),y&&(y._prev=f),h._next=null,h._prev=null,h}const c=new lD(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class lD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Dc(){return new Mm([new F0])}let Mm=(()=>{class i{static#e=this.\u0275prov=yt({token:i,providedIn:"root",factory:Dc});constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Dc()),deps:[[i,new rt,new me]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new ee(901,!1)}}return i})();function hd(){return new U0([new L0])}let U0=(()=>{class i{static#e=this.\u0275prov=yt({token:i,providedIn:"root",factory:hd});constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||hd()),deps:[[i,new rt,new me]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new ee(901,!1)}}return i})();const dD=Jb(null,"core",[]);let PM=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(c){return new(c||i)(Qe(Ca))};static#t=this.\u0275mod=Yo({type:i});static#n=this.\u0275inj=Gn({})}return i})();function W0(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function $M(i){const o=Cn(i);if(!o)return null;const a=new Vh(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3399:(_t,De,M)=>{M.d(De,{Z:()=>Ye});var d=M(9058),V=M(4537),N=M(7592),Y=M(7879);class se{constructor(Ke,Se){this._delegate=Ke,this.firebase=Se,(0,N._addComponent)(Ke,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=Ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this._delegate.automaticDataCollectionEnabled=Ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ke=>{this._delegate.checkDestroyed(),Ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(Ke,Se=N._DEFAULT_ENTRY_NAME){var ft;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(Ke);return!pt.isInitialized()&&"EXPLICIT"===(null===(ft=pt.getComponent())||void 0===ft?void 0:ft.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:Se})}_removeServiceInstance(Ke,Se=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ke).clearInstance(Se)}_addComponent(Ke){(0,N._addComponent)(this._delegate,Ke)}_addOrOverwriteComponent(Ke){(0,N._addOrOverwriteComponent)(this._delegate,Ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function he(){const ke=function Oe(ke){const Ke={},Se={__esModule:!0,initializeApp:function ee(je,k={}){const te=N.initializeApp(je,k);if((0,d.r3)(Ke,te.name))return Ke[te.name];const be=new ke(te,Se);return Ke[te.name]=be,be},app:pt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function ue(je){const k=je.name,te=k.replace("-compat","");if(N._registerComponent(je)&&"PUBLIC"===je.type){const be=(it=pt())=>{if("function"!=typeof it[te])throw Ee.create("invalid-app-argument",{appName:k});return it[te]()};void 0!==je.serviceProps&&(0,d.ZB)(be,je.serviceProps),Se[te]=be,ke.prototype[te]=function(...it){return this._getService.bind(this,k).apply(this,je.multipleInstances?it:[])}}return"PUBLIC"===je.type?Se[te]:null},removeApp:function ft(je){delete Ke[je]},useAsService:function Me(je,k){return"serverAuth"===k?null:k},modularAPIs:N}};function pt(je){if(!(0,d.r3)(Ke,je=je||N._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:je});return Ke[je]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function Te(){return Object.keys(Ke).map(je=>Ke[je])}}),pt.App=ke,Se}(se);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function Ke(Se){(0,d.ZB)(ke,Se)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ke}(),q=new Y.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=U;!function Ie(ke){(0,N.registerVersion)("@firebase/app-compat","0.2.13",ke)}()},7592:(_t,De,M)=>{M.r(De),M.d(De,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>Gn,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>Ae,_addOrOverwriteComponent:()=>Ge,_apps:()=>ce,_clearComponents:()=>Dt,_components:()=>oe,_getProvider:()=>qe,_registerComponent:()=>tt,_removeServiceInstance:()=>Wt,deleteApp:()=>ar,getApp:()=>_n,getApps:()=>Nn,initializeApp:()=>Un,onLog:()=>Tn,registerVersion:()=>Vn,setLogLevel:()=>ir});var d=M(5861),V=M(4537),N=M(7879),Y=M(9058),se=M(1878);class ve{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(Ce=>{if(function Ee(ye){const Z=ye.getComponent();return"VERSION"===Z?.type}(Ce)){const He=Ce.getImmediate();return`${He.library}/${He.version}`}return null}).filter(Ce=>Ce).join(" ")}}const Oe="@firebase/app",U=new N.Yd("@firebase/app"),ae="[DEFAULT]",pe={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ce=new Map,oe=new Map;function Ae(ye,Z){try{ye.container.addComponent(Z)}catch(Ce){U.debug(`Component ${Z.name} failed to register with FirebaseApp ${ye.name}`,Ce)}}function Ge(ye,Z){ye.container.addOrOverwriteComponent(Z)}function tt(ye){const Z=ye.name;if(oe.has(Z))return U.debug(`There were multiple attempts to register component ${Z}.`),!1;oe.set(Z,ye);for(const Ce of ce.values())Ae(Ce,ye);return!0}function qe(ye,Z){const Ce=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return Ce&&Ce.triggerHeartbeat(),ye.container.getProvider(Z)}function Wt(ye,Z,Ce=ae){qe(ye,Z).clearInstance(Ce)}function Dt(){oe.clear()}const yt=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fn{constructor(Z,Ce,He){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},Ce),this._name=Ce.name,this._automaticDataCollectionEnabled=Ce.automaticDataCollectionEnabled,this._container=He,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw yt.create("app-deleted",{appName:this._name})}}const Gn="9.23.0";function Un(ye,Z={}){let Ce=ye;"object"!=typeof Z&&(Z={name:Z});const He=Object.assign({name:ae,automaticDataCollectionEnabled:!1},Z),ut=He.name;if("string"!=typeof ut||!ut)throw yt.create("bad-app-name",{appName:String(ut)});if(Ce||(Ce=(0,Y.aH)()),!Ce)throw yt.create("no-options");const Ct=ce.get(ut);if(Ct){if((0,Y.vZ)(Ce,Ct.options)&&(0,Y.vZ)(He,Ct.config))return Ct;throw yt.create("duplicate-app",{appName:ut})}const mn=new V.H0(ut);for(const G of oe.values())mn.addComponent(G);const z=new fn(Ce,He,mn);return ce.set(ut,z),z}function _n(ye=ae){const Z=ce.get(ye);if(!Z&&ye===ae&&(0,Y.aH)())return Un();if(!Z)throw yt.create("no-app",{appName:ye});return Z}function Nn(){return Array.from(ce.values())}function ar(ye){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*(ye){const Z=ye.name;ce.has(Z)&&(ce.delete(Z),yield Promise.all(ye.container.getProviders().map(Ce=>Ce.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function Vn(ye,Z,Ce){var He;let ut=null!==(He=pe[ye])&&void 0!==He?He:ye;Ce&&(ut+=`-${Ce}`);const Ct=ut.match(/\s|\//),mn=Z.match(/\s|\//);if(Ct||mn){const z=[`Unable to register library "${ut}" with version "${Z}":`];return Ct&&z.push(`library name "${ut}" contains illegal characters (whitespace or "/")`),Ct&&mn&&z.push("and"),mn&&z.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void U.warn(z.join(" "))}tt(new V.wA(`${ut}-version`,()=>({library:ut,version:Z}),"VERSION"))}function Tn(ye,Z){if(null!==ye&&"function"!=typeof ye)throw yt.create("invalid-log-argument");(0,N.Am)(ye,Z)}function ir(ye){(0,N.Ub)(ye)}const $r="firebase-heartbeat-database",Et=1,It="firebase-heartbeat-store";let Nt=null;function Rt(){return Nt||(Nt=(0,se.X3)($r,Et,{upgrade:(ye,Z)=>{0===Z&&ye.createObjectStore(It)}}).catch(ye=>{throw yt.create("idb-open",{originalErrorMessage:ye.message})})),Nt}function pn(){return(pn=(0,d.Z)(function*(ye){try{return yield(yield Rt()).transaction(It).objectStore(It).get(xr(ye))}catch(Z){if(Z instanceof Y.ZR)U.warn(Z.message);else{const Ce=yt.create("idb-get",{originalErrorMessage:Z?.message});U.warn(Ce.message)}}})).apply(this,arguments)}function Kt(ye,Z){return gn.apply(this,arguments)}function gn(){return(gn=(0,d.Z)(function*(ye,Z){try{const He=(yield Rt()).transaction(It,"readwrite");yield He.objectStore(It).put(Z,xr(ye)),yield He.done}catch(Ce){if(Ce instanceof Y.ZR)U.warn(Ce.message);else{const He=yt.create("idb-set",{originalErrorMessage:Ce?.message});U.warn(He.message)}}})).apply(this,arguments)}function xr(ye){return`${ye.name}!${ye.options.appId}`}class en{constructor(Z){this.container=Z,this._heartbeatsCache=null;const Ce=this.container.getProvider("app").getImmediate();this._storage=new ur(Ce),this._heartbeatsCachePromise=this._storage.read().then(He=>(this._heartbeatsCache=He,He))}triggerHeartbeat(){var Z=this;return(0,d.Z)(function*(){const He=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=ln();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==ut&&!Z._heartbeatsCache.heartbeats.some(Ct=>Ct.date===ut))return Z._heartbeatsCache.heartbeats.push({date:ut,agent:He}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(Ct=>{const mn=new Date(Ct.date).valueOf();return Date.now()-mn<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,d.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const Ce=ln(),{heartbeatsToSend:He,unsentEntries:ut}=function Ir(ye,Z=1024){const Ce=[];let He=ye.slice();for(const ut of ye){const Ct=Ce.find(mn=>mn.agent===ut.agent);if(Ct){if(Ct.dates.push(ut.date),fr(Ce)>Z){Ct.dates.pop();break}}else if(Ce.push({agent:ut.agent,dates:[ut.date]}),fr(Ce)>Z){Ce.pop();break}He=He.slice(1)}return{heartbeatsToSend:Ce,unsentEntries:He}}(Z._heartbeatsCache.heartbeats),Ct=(0,Y.L)(JSON.stringify({version:2,heartbeats:He}));return Z._heartbeatsCache.lastSentHeartbeatDate=Ce,ut.length>0?(Z._heartbeatsCache.heartbeats=ut,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),Ct})()}}function ln(){return(new Date).toISOString().substring(0,10)}class ur{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,d.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function vr(ye){return pn.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var Ce=this;return(0,d.Z)(function*(){var He;if(yield Ce._canUseIndexedDBPromise){const Ct=yield Ce.read();return Kt(Ce.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Ct.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var Ce=this;return(0,d.Z)(function*(){var He;if(yield Ce._canUseIndexedDBPromise){const Ct=yield Ce.read();return Kt(Ce.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Ct.lastSentHeartbeatDate,heartbeats:[...Ct.heartbeats,...Z.heartbeats]})}})()}}function fr(ye){return(0,Y.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function Bn(ye){tt(new V.wA("platform-logger",Z=>new ve(Z),"PRIVATE")),tt(new V.wA("heartbeat",Z=>new en(Z),"PRIVATE")),Vn(Oe,"0.9.13",ye),Vn(Oe,"0.9.13","esm2017"),Vn("fire-js","")}("")},4097:(_t,De,M)=>{M.d(De,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=M(7592);(0,d.registerVersion)("firebase","9.23.0","app")},120:(_t,De,M)=>{M.d(De,{Z:()=>d.Z});var d=M(3399);d.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(_t,De,M)=>{M.r(De);var d=M(5861),V=M(3399),N=M(6710),Y=M(9058),Ee=(M(7592),M(7879),M(4537));function Oe(){return window}function q(){return q=(0,d.Z)(function*(P,R,x){var X;const{BuildInfo:Re}=Oe();(0,N.as)(R.sessionId,"AuthEvent did not contain a session ID");const Qe=yield function Se(P){return ft.apply(this,arguments)}(R.sessionId),xt={};return(0,N.at)()?xt.ibi=Re.packageName:(0,N.au)()?xt.apn=Re.packageName:(0,N.av)(P,"operation-not-supported-in-this-environment"),Re.displayName&&(xt.appDisplayName=Re.displayName),xt.sessionId=Qe,(0,N.aw)(P,x,R.type,void 0,null!==(X=R.eventId)&&void 0!==X?X:void 0,xt)}),q.apply(this,arguments)}function Be(){return(Be=(0,d.Z)(function*(P){const{BuildInfo:R}=Oe(),x={};(0,N.at)()?x.iosBundleId=R.packageName:(0,N.au)()?x.androidPackageName=R.packageName:(0,N.av)(P,"operation-not-supported-in-this-environment"),yield(0,N.ax)(P,x)})).apply(this,arguments)}function ke(){return(ke=(0,d.Z)(function*(P,R,x){const{cordova:X}=Oe();let Re=()=>{};try{yield new Promise((Qe,xt)=>{let st=null;function yn(){var Yt;Qe();const wr=null===(Yt=X.plugins.browsertab)||void 0===Yt?void 0:Yt.close;"function"==typeof wr&&wr(),"function"==typeof x?.close&&x.close()}function Ut(){st||(st=window.setTimeout(()=>{xt((0,N.az)(P,"redirect-cancelled-by-user"))},2e3))}function vn(){"visible"===document?.visibilityState&&Ut()}R.addPassiveListener(yn),document.addEventListener("resume",Ut,!1),(0,N.au)()&&document.addEventListener("visibilitychange",vn,!1),Re=()=>{R.removePassiveListener(yn),document.removeEventListener("resume",Ut,!1),document.removeEventListener("visibilitychange",vn,!1),st&&window.clearTimeout(st)}})}finally{Re()}})).apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(P){const R=function pt(P){if((0,N.as)(/[0-9a-zA-Z]+/.test(P),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(P);const R=new ArrayBuffer(P.length),x=new Uint8Array(R);for(let X=0;X<P.length;X++)x[X]=P.charCodeAt(X);return x}(P),x=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(x)).map(Re=>Re.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Te extends N.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(R)),super.onEvent(R)}initialized(){var R=this;return(0,d.Z)(function*(){yield R.initPromise})()}}function je(P){return k.apply(this,arguments)}function k(){return(k=(0,d.Z)(function*(P){const R=yield it()._get(Lt(P));return R&&(yield it()._remove(Lt(P))),R})).apply(this,arguments)}function be(){const P=[];for(let x=0;x<20;x++){const X=Math.floor(62*Math.random());P.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(X))}return P.join("")}function it(){return(0,N.aC)(N.b)}function Lt(P){return(0,N.aD)("authEvent",P.config.apiKey,P.name)}function hn(P){if(!P?.includes("?"))return{};const[R,...x]=P.split("?");return(0,Y.zd)(x.join("?"))}const ae=class Zn{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize(R){var x=this;return(0,d.Z)(function*(){const X=R._key();let Re=x.eventManagers.get(X);return Re||(Re=new Te(R),x.eventManagers.set(X,Re),x.attachCallbackListeners(R,Re)),Re})()}_openPopup(R){(0,N.av)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,x,X,Re){var Qe=this;return(0,d.Z)(function*(){!function Ke(P){var R,x,X,Re,Qe,xt,st,yn,Ut,vn;const Yt=Oe();(0,N.aA)("function"==typeof(null===(R=Yt?.universalLinks)||void 0===R?void 0:R.subscribe),P,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aA)(typeof(null===(x=Yt?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aA)("function"==typeof(null===(Qe=null===(Re=null===(X=Yt?.cordova)||void 0===X?void 0:X.plugins)||void 0===Re?void 0:Re.browsertab)||void 0===Qe?void 0:Qe.openUrl),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(yn=null===(st=null===(xt=Yt?.cordova)||void 0===xt?void 0:xt.plugins)||void 0===st?void 0:st.browsertab)||void 0===yn?void 0:yn.isAvailable),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aA)("function"==typeof(null===(vn=null===(Ut=Yt?.cordova)||void 0===Ut?void 0:Ut.InAppBrowser)||void 0===vn?void 0:vn.open),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const xt=yield Qe._initialize(R);yield xt.initialized(),xt.resetRedirect(),(0,N.aG)(),yield Qe._originValidation(R);const st=function ue(P,R,x=null){return{type:R,eventId:x,urlResponse:null,sessionId:be(),postBody:null,tenantId:P.tenantId,error:(0,N.az)(P,"no-auth-event")}}(R,X,Re);yield function Me(P,R){return it()._set(Lt(P),R)}(R,st);const yn=yield function U(P,R,x){return q.apply(this,arguments)}(R,st,x),Ut=yield function Ie(P){const{cordova:R}=Oe();return new Promise(x=>{R.plugins.browsertab.isAvailable(X=>{let Re=null;X?R.plugins.browsertab.openUrl(P):Re=R.InAppBrowser.open(P,(0,N.ay)()?"_blank":"_system","location=yes"),x(Re)})})}(yn);return function Ye(P,R,x){return ke.apply(this,arguments)}(R,xt,Ut)})()}_isIframeWebStorageSupported(R,x){throw new Error("Method not implemented.")}_originValidation(R){const x=R._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function ne(P){return Be.apply(this,arguments)}(R)),this.originValidationPromises[x]}attachCallbackListeners(R,x){const{universalLinks:X,handleOpenURL:Re,BuildInfo:Qe}=Oe(),xt=setTimeout((0,d.Z)(function*(){yield je(R),x.onEvent(pe())}),500),st=function(){var vn=(0,d.Z)(function*(Yt){clearTimeout(xt);const wr=yield je(R);let K=null;wr&&Yt?.url&&(K=function te(P,R){var x,X;const Re=function Ht(P){const R=hn(P),x=R.link?decodeURIComponent(R.link):void 0,X=hn(x).link,Re=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return hn(Re).link||Re||X||x||P}(R);if(Re.includes("/__/auth/callback")){const Qe=hn(Re),xt=Qe.firebaseError?function $t(P){try{return JSON.parse(P)}catch{return null}}(decodeURIComponent(Qe.firebaseError)):null,st=null===(X=null===(x=xt?.code)||void 0===x?void 0:x.split("auth/"))||void 0===X?void 0:X[1],yn=st?(0,N.az)(st):null;return yn?{type:P.type,eventId:P.eventId,tenantId:P.tenantId,error:yn,urlResponse:null,sessionId:null,postBody:null}:{type:P.type,eventId:P.eventId,tenantId:P.tenantId,sessionId:P.sessionId,urlResponse:Re,postBody:null}}return null}(wr,Yt.url)),x.onEvent(K||pe())});return function(wr){return vn.apply(this,arguments)}}();typeof X<"u"&&"function"==typeof X.subscribe&&X.subscribe(null,st);const yn=Re,Ut=`${Qe.packageName.toLowerCase()}://`;Oe().handleOpenURL=function(){var vn=(0,d.Z)(function*(Yt){if(Yt.toLowerCase().startsWith(Ut)&&st({url:Yt}),"function"==typeof yn)try{yn(Yt)}catch(wr){console.error(wr)}});return function(Yt){return vn.apply(this,arguments)}}()}};function pe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.az)("no-auth-event")}}function tt(){var P;return(null===(P=self?.location)||void 0===P?void 0:P.protocol)||null}function Wt(P=(0,Y.z$)()){return!("file:"!==tt()&&"ionic:"!==tt()&&"capacitor:"!==tt()||!P.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gn(){try{const P=self.localStorage,R=N.aL();if(P)return P.setItem(R,"1"),P.removeItem(R),!function fn(P=(0,Y.z$)()){return function nn(){return(0,Y.w1)()&&11===document?.documentMode}()||function yt(P=(0,Y.z$)()){return/Edge\/\d+/.test(P)}(P)}()||(0,Y.hl)()}catch{return Un()&&(0,Y.hl)()}return!1}function Un(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function _n(){return(function qe(){return"http:"===tt()||"https:"===tt()}()||(0,Y.ru)()||Wt())&&!function Dt(){return(0,Y.b$)()||(0,Y.UG)()}()&&Gn()&&!Un()}function Nn(){return Wt()&&typeof document<"u"}function Jn(){return(Jn=(0,d.Z)(function*(){return!!Nn()&&new Promise(P=>{const R=setTimeout(()=>{P(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),P(!0)})})})).apply(this,arguments)}const Tn={LOCAL:"local",NONE:"none",SESSION:"session"},ir=N.aA,$r="persistence";function It(P){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(P){yield P._initializationPromise;const R=vr(),x=N.aD($r,P.config.apiKey,P.name);R&&R.setItem(x,P._getPersistence())})).apply(this,arguments)}function vr(){var P;try{return(null===(P=function Vn(){return typeof window<"u"?window:null}())||void 0===P?void 0:P.sessionStorage)||null}catch{return null}}const pn=N.aA;class Kt{constructor(){this.browserResolver=N.aC(N.k),this.cordovaResolver=N.aC(ae),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aE,this._overrideRedirectResult=N.aF}_initialize(R){var x=this;return(0,d.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,x,X,Re){var Qe=this;return(0,d.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openPopup(R,x,X,Re)})()}_openRedirect(R,x,X,Re){var Qe=this;return(0,d.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openRedirect(R,x,X,Re)})()}_isIframeWebStorageSupported(R,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,x)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return Nn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,d.Z)(function*(){if(R.underlyingResolver)return;const x=yield function ar(){return Jn.apply(this,arguments)}();R.underlyingResolver=x?R.cordovaResolver:R.browserResolver})()}}function gn(P){return P.unwrap()}function rn(P){return en(P)}function en(P){const{_tokenResponse:R}=P instanceof Y.ZR?P.customData:P;if(!R)return null;if(!(P instanceof Y.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return N.P.credentialFromResult(P);const x=R.providerId;if(!x||x===N.p.PASSWORD)return null;let X;switch(x){case N.p.GOOGLE:X=N.V;break;case N.p.FACEBOOK:X=N.U;break;case N.p.GITHUB:X=N.W;break;case N.p.TWITTER:X=N.Z;break;default:const{oauthIdToken:Re,oauthAccessToken:Qe,oauthTokenSecret:xt,pendingToken:st,nonce:yn}=R;return Qe||xt||Re||st?st?x.startsWith("saml.")?N.aO._create(x,st):N.L._fromParams({providerId:x,signInMethod:x,pendingToken:st,idToken:Re,accessToken:Qe}):new N.X(x).credential({idToken:Re,accessToken:Qe,rawNonce:yn}):null}return P instanceof Y.ZR?X.credentialFromError(P):X.credentialFromResult(P)}function ln(P,R){return R.catch(x=>{throw x instanceof Y.ZR&&function li(P,R){var x;const X=null===(x=R.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===R?.code)R.resolver=new fr(P,N.aq(P,R));else if(X){const Re=en(R),Qe=R;Re&&(Qe.credential=Re,Qe.tenantId=X.tenantId||void 0,Qe.email=X.email||void 0,Qe.phoneNumber=X.phoneNumber||void 0)}}(P,x),x}).then(x=>{const Re=x.user;return{operationType:x.operationType,credential:rn(x),additionalUserInfo:N.ao(x),user:Bn.getOrCreate(Re)}})}function Ir(P,R){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(P,R){const x=yield R;return{verificationId:x.verificationId,confirm:X=>ln(P,x.confirm(X))}})).apply(this,arguments)}class fr{constructor(R,x){this.resolver=x,this.auth=function xr(P){return P.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return ln(gn(this.auth),this.resolver.resolveSignIn(R))}}class Bn{constructor(R){this._delegate=R,this.multiFactor=N.ar(R)}static getOrCreate(R){return Bn.USER_MAP.has(R)||Bn.USER_MAP.set(R,new Bn(R)),Bn.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var x=this;return(0,d.Z)(function*(){return ln(x.auth,N.a0(x._delegate,R))})()}linkWithPhoneNumber(R,x){var X=this;return(0,d.Z)(function*(){return Ir(X.auth,N.l(X._delegate,R,x))})()}linkWithPopup(R){var x=this;return(0,d.Z)(function*(){return ln(x.auth,N.d(x._delegate,R,Kt))})()}linkWithRedirect(R){var x=this;return(0,d.Z)(function*(){return yield It(N.aH(x.auth)),N.g(x._delegate,R,Kt)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var x=this;return(0,d.Z)(function*(){return ln(x.auth,N.a1(x._delegate,R))})()}reauthenticateWithPhoneNumber(R,x){return Ir(this.auth,N.r(this._delegate,R,x))}reauthenticateWithPopup(R){return ln(this.auth,N.e(this._delegate,R,Kt))}reauthenticateWithRedirect(R){var x=this;return(0,d.Z)(function*(){return yield It(N.aH(x.auth)),N.h(x._delegate,R,Kt)})()}sendEmailVerification(R){return N.ae(this._delegate,R)}unlink(R){var x=this;return(0,d.Z)(function*(){return yield N.an(x._delegate,R),x})()}updateEmail(R){return N.aj(this._delegate,R)}updatePassword(R){return N.ak(this._delegate,R)}updatePhoneNumber(R){return N.u(this._delegate,R)}updateProfile(R){return N.ai(this._delegate,R)}verifyBeforeUpdateEmail(R,x){return N.af(this._delegate,R,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bn.USER_MAP=new WeakMap;const ye=N.aA;let Z=(()=>{class P{constructor(x,X){if(this.app=x,X.isInitialized())return this._delegate=X.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Re}=x.options;ye(Re,"invalid-api-key",{appName:x.name}),ye(Re,"invalid-api-key",{appName:x.name});const Qe=typeof window<"u"?Kt:void 0;this._delegate=X.initialize({options:{persistence:He(Re,x.name),popupRedirectResolver:Qe}}),this._delegate._updateErrorMap(N.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,X){N.I(this._delegate,x,X)}applyActionCode(x){return N.a5(this._delegate,x)}checkActionCode(x){return N.a6(this._delegate,x)}confirmPasswordReset(x,X){return N.a4(this._delegate,x,X)}createUserWithEmailAndPassword(x,X){var Re=this;return(0,d.Z)(function*(){return ln(Re._delegate,N.a8(Re._delegate,x,X))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return N.ad(this._delegate,x)}isSignInWithEmailLink(x){return N.ab(this._delegate,x)}getRedirectResult(){var x=this;return(0,d.Z)(function*(){ye(_n(),x._delegate,"operation-not-supported-in-this-environment");const X=yield N.j(x._delegate,Kt);return X?ln(x._delegate,Promise.resolve(X)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function ce(P,R){(0,N.aH)(P)._logFramework(R)}(this._delegate,x)}onAuthStateChanged(x,X,Re){const{next:Qe,error:xt,complete:st}=Ce(x,X,Re);return this._delegate.onAuthStateChanged(Qe,xt,st)}onIdTokenChanged(x,X,Re){const{next:Qe,error:xt,complete:st}=Ce(x,X,Re);return this._delegate.onIdTokenChanged(Qe,xt,st)}sendSignInLinkToEmail(x,X){return N.aa(this._delegate,x,X)}sendPasswordResetEmail(x,X){return N.a3(this._delegate,x,X||void 0)}setPersistence(x){var X=this;return(0,d.Z)(function*(){let Re;switch(function Et(P,R){ir(Object.values(Tn).includes(R),P,"invalid-persistence-type"),(0,Y.b$)()?ir(R!==Tn.SESSION,P,"unsupported-persistence-type"):(0,Y.UG)()?ir(R===Tn.NONE,P,"unsupported-persistence-type"):Un()?ir(R===Tn.NONE||R===Tn.LOCAL&&(0,Y.hl)(),P,"unsupported-persistence-type"):ir(R===Tn.NONE||Gn(),P,"unsupported-persistence-type")}(X._delegate,x),x){case Tn.SESSION:Re=N.a;break;case Tn.LOCAL:Re=(yield N.aC(N.i)._isAvailable())?N.i:N.b;break;case Tn.NONE:Re=N.N;break;default:return N.av("argument-error",{appName:X._delegate.name})}return X._delegate.setPersistence(Re)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return ln(this._delegate,N._(this._delegate))}signInWithCredential(x){return ln(this._delegate,N.$(this._delegate,x))}signInWithCustomToken(x){return ln(this._delegate,N.a2(this._delegate,x))}signInWithEmailAndPassword(x,X){return ln(this._delegate,N.a9(this._delegate,x,X))}signInWithEmailLink(x,X){return ln(this._delegate,N.ac(this._delegate,x,X))}signInWithPhoneNumber(x,X){return Ir(this._delegate,N.s(this._delegate,x,X))}signInWithPopup(x){var X=this;return(0,d.Z)(function*(){return ye(_n(),X._delegate,"operation-not-supported-in-this-environment"),ln(X._delegate,N.c(X._delegate,x,Kt))})()}signInWithRedirect(x){var X=this;return(0,d.Z)(function*(){return ye(_n(),X._delegate,"operation-not-supported-in-this-environment"),yield It(X._delegate),N.f(X._delegate,x,Kt)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return N.a7(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return P.Persistence=Tn,P})();function Ce(P,R,x){let X=P;"function"!=typeof P&&({next:X,error:R,complete:x}=P);const Re=X;return{next:xt=>Re(xt&&Bn.getOrCreate(xt)),error:R,complete:x}}function He(P,R){const x=function Rt(P,R){const x=vr();if(!x)return[];const X=N.aD($r,P,R);switch(x.getItem(X)){case Tn.NONE:return[N.N];case Tn.LOCAL:return[N.i,N.a];case Tn.SESSION:return[N.a];default:return[]}}(P,R);if(typeof self<"u"&&!x.includes(N.i)&&x.push(N.i),typeof window<"u")for(const X of[N.b,N.a])x.includes(X)||x.push(X);return x.includes(N.N)||x.push(N.N),x}class ut{constructor(){this.providerId="phone",this._delegate=new N.P(gn(V.Z.auth()))}static credential(R,x){return N.P.credential(R,x)}verifyPhoneNumber(R,x){return this._delegate.verifyPhoneNumber(R,x)}unwrap(){return this._delegate}}ut.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,ut.PROVIDER_ID=N.P.PROVIDER_ID;const Ct=N.aA;class mn{constructor(R,x,X=V.Z.app()){var Re;Ct(null===(Re=X.options)||void 0===Re?void 0:Re.apiKey,"invalid-api-key",{appName:X.name}),this._delegate=new N.R(R,x,X.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function G(P){P.INTERNAL.registerComponent(new Ee.wA("auth-compat",R=>{const x=R.getProvider("app-compat").getImmediate(),X=R.getProvider("auth");return new Z(x,X)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.Q,FacebookAuthProvider:N.U,GithubAuthProvider:N.W,GoogleAuthProvider:N.V,OAuthProvider:N.X,SAMLAuthProvider:N.Y,PhoneAuthProvider:ut,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:mn,TwitterAuthProvider:N.Z,Auth:Z,AuthCredential:N.J,Error:Y.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),P.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},9519:(_t,De,M)=>{M.d(De,{Gb:()=>d.Gb});var d=M(2650)},4303:(_t,De,M)=>{M.r(De),M.d(De,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>Gn,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>Ae,_addOrOverwriteComponent:()=>Ge,_apps:()=>ce,_clearComponents:()=>Dt,_components:()=>oe,_getProvider:()=>qe,_registerComponent:()=>tt,_removeServiceInstance:()=>Wt,deleteApp:()=>ar,getApp:()=>_n,getApps:()=>Nn,initializeApp:()=>Un,onLog:()=>Tn,registerVersion:()=>Vn,setLogLevel:()=>ir});var d=M(5861),V=M(4537),N=M(7879),Y=M(9058),se=M(1878);class ve{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(Ce=>{if(function Ee(ye){const Z=ye.getComponent();return"VERSION"===Z?.type}(Ce)){const He=Ce.getImmediate();return`${He.library}/${He.version}`}return null}).filter(Ce=>Ce).join(" ")}}const Oe="@firebase/app",U=new N.Yd("@firebase/app"),ae="[DEFAULT]",pe={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ce=new Map,oe=new Map;function Ae(ye,Z){try{ye.container.addComponent(Z)}catch(Ce){U.debug(`Component ${Z.name} failed to register with FirebaseApp ${ye.name}`,Ce)}}function Ge(ye,Z){ye.container.addOrOverwriteComponent(Z)}function tt(ye){const Z=ye.name;if(oe.has(Z))return U.debug(`There were multiple attempts to register component ${Z}.`),!1;oe.set(Z,ye);for(const Ce of ce.values())Ae(Ce,ye);return!0}function qe(ye,Z){const Ce=ye.container.getProvider("heartbeat").getImmediate({optional:!0});return Ce&&Ce.triggerHeartbeat(),ye.container.getProvider(Z)}function Wt(ye,Z,Ce=ae){qe(ye,Z).clearInstance(Ce)}function Dt(){oe.clear()}const yt=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fn{constructor(Z,Ce,He){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},Ce),this._name=Ce.name,this._automaticDataCollectionEnabled=Ce.automaticDataCollectionEnabled,this._container=He,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw yt.create("app-deleted",{appName:this._name})}}const Gn="10.4.0";function Un(ye,Z={}){let Ce=ye;"object"!=typeof Z&&(Z={name:Z});const He=Object.assign({name:ae,automaticDataCollectionEnabled:!1},Z),ut=He.name;if("string"!=typeof ut||!ut)throw yt.create("bad-app-name",{appName:String(ut)});if(Ce||(Ce=(0,Y.aH)()),!Ce)throw yt.create("no-options");const Ct=ce.get(ut);if(Ct){if((0,Y.vZ)(Ce,Ct.options)&&(0,Y.vZ)(He,Ct.config))return Ct;throw yt.create("duplicate-app",{appName:ut})}const mn=new V.H0(ut);for(const G of oe.values())mn.addComponent(G);const z=new fn(Ce,He,mn);return ce.set(ut,z),z}function _n(ye=ae){const Z=ce.get(ye);if(!Z&&ye===ae&&(0,Y.aH)())return Un();if(!Z)throw yt.create("no-app",{appName:ye});return Z}function Nn(){return Array.from(ce.values())}function ar(ye){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*(ye){const Z=ye.name;ce.has(Z)&&(ce.delete(Z),yield Promise.all(ye.container.getProviders().map(Ce=>Ce.delete())),ye.isDeleted=!0)})).apply(this,arguments)}function Vn(ye,Z,Ce){var He;let ut=null!==(He=pe[ye])&&void 0!==He?He:ye;Ce&&(ut+=`-${Ce}`);const Ct=ut.match(/\s|\//),mn=Z.match(/\s|\//);if(Ct||mn){const z=[`Unable to register library "${ut}" with version "${Z}":`];return Ct&&z.push(`library name "${ut}" contains illegal characters (whitespace or "/")`),Ct&&mn&&z.push("and"),mn&&z.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void U.warn(z.join(" "))}tt(new V.wA(`${ut}-version`,()=>({library:ut,version:Z}),"VERSION"))}function Tn(ye,Z){if(null!==ye&&"function"!=typeof ye)throw yt.create("invalid-log-argument");(0,N.Am)(ye,Z)}function ir(ye){(0,N.Ub)(ye)}const $r="firebase-heartbeat-database",Et=1,It="firebase-heartbeat-store";let Nt=null;function Rt(){return Nt||(Nt=(0,se.X3)($r,Et,{upgrade:(ye,Z)=>{0===Z&&ye.createObjectStore(It)}}).catch(ye=>{throw yt.create("idb-open",{originalErrorMessage:ye.message})})),Nt}function pn(){return(pn=(0,d.Z)(function*(ye){try{return yield(yield Rt()).transaction(It).objectStore(It).get(xr(ye))}catch(Z){if(Z instanceof Y.ZR)U.warn(Z.message);else{const Ce=yt.create("idb-get",{originalErrorMessage:Z?.message});U.warn(Ce.message)}}})).apply(this,arguments)}function Kt(ye,Z){return gn.apply(this,arguments)}function gn(){return(gn=(0,d.Z)(function*(ye,Z){try{const He=(yield Rt()).transaction(It,"readwrite");yield He.objectStore(It).put(Z,xr(ye)),yield He.done}catch(Ce){if(Ce instanceof Y.ZR)U.warn(Ce.message);else{const He=yt.create("idb-set",{originalErrorMessage:Ce?.message});U.warn(He.message)}}})).apply(this,arguments)}function xr(ye){return`${ye.name}!${ye.options.appId}`}class en{constructor(Z){this.container=Z,this._heartbeatsCache=null;const Ce=this.container.getProvider("app").getImmediate();this._storage=new ur(Ce),this._heartbeatsCachePromise=this._storage.read().then(He=>(this._heartbeatsCache=He,He))}triggerHeartbeat(){var Z=this;return(0,d.Z)(function*(){const He=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=ln();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==ut&&!Z._heartbeatsCache.heartbeats.some(Ct=>Ct.date===ut))return Z._heartbeatsCache.heartbeats.push({date:ut,agent:He}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(Ct=>{const mn=new Date(Ct.date).valueOf();return Date.now()-mn<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,d.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const Ce=ln(),{heartbeatsToSend:He,unsentEntries:ut}=function Ir(ye,Z=1024){const Ce=[];let He=ye.slice();for(const ut of ye){const Ct=Ce.find(mn=>mn.agent===ut.agent);if(Ct){if(Ct.dates.push(ut.date),fr(Ce)>Z){Ct.dates.pop();break}}else if(Ce.push({agent:ut.agent,dates:[ut.date]}),fr(Ce)>Z){Ce.pop();break}He=He.slice(1)}return{heartbeatsToSend:Ce,unsentEntries:He}}(Z._heartbeatsCache.heartbeats),Ct=(0,Y.L)(JSON.stringify({version:2,heartbeats:He}));return Z._heartbeatsCache.lastSentHeartbeatDate=Ce,ut.length>0?(Z._heartbeatsCache.heartbeats=ut,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),Ct})()}}function ln(){return(new Date).toISOString().substring(0,10)}class ur{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,d.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function vr(ye){return pn.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var Ce=this;return(0,d.Z)(function*(){var He;if(yield Ce._canUseIndexedDBPromise){const Ct=yield Ce.read();return Kt(Ce.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Ct.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var Ce=this;return(0,d.Z)(function*(){var He;if(yield Ce._canUseIndexedDBPromise){const Ct=yield Ce.read();return Kt(Ce.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Ct.lastSentHeartbeatDate,heartbeats:[...Ct.heartbeats,...Z.heartbeats]})}})()}}function fr(ye){return(0,Y.L)(JSON.stringify({version:2,heartbeats:ye})).length}!function Bn(ye){tt(new V.wA("platform-logger",Z=>new ve(Z),"PRIVATE")),tt(new V.wA("heartbeat",Z=>new en(Z),"PRIVATE")),Vn(Oe,"0.9.19",ye),Vn(Oe,"0.9.19","esm2017"),Vn("fire-js","")}("")},4537:(_t,De,M)=>{M.d(De,{H0:()=>Oe,wA:()=>N});var d=M(5861),V=M(9058);class N{constructor(U,q,ne){this.name=U,this.instanceFactory=q,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const Y="[DEFAULT]";class se{constructor(U,q){this.name=U,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const q=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(q)){const ne=new V.BH;if(this.instancesDeferred.set(q,ne),this.isInitialized(q)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:q});Be&&ne.resolve(Be)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(U){var q;const ne=this.normalizeInstanceIdentifier(U?.identifier),Be=null!==(q=U?.optional)&&void 0!==q&&q;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Ie){if(Be)return null;throw Ie}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function Ee(he){return"EAGER"===he.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:Y})}catch{}for(const[q,ne]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(q);try{const Ie=this.getOrInitializeService({instanceIdentifier:Be});ne.resolve(Ie)}catch{}}}}clearInstance(U=Y){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,d.Z)(function*(){const q=Array.from(U.instances.values());yield Promise.all([...q.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...q.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=Y){return this.instances.has(U)}getOptions(U=Y){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:q={}}=U,ne=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:ne,options:q});for(const[Ie,Ye]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Ie)&&Ye.resolve(Be);return Be}onInit(U,q){var ne;const Be=this.normalizeInstanceIdentifier(q),Ie=null!==(ne=this.onInitCallbacks.get(Be))&&void 0!==ne?ne:new Set;Ie.add(U),this.onInitCallbacks.set(Be,Ie);const Ye=this.instances.get(Be);return Ye&&U(Ye,Be),()=>{Ie.delete(U)}}invokeOnInitCallbacks(U,q){const ne=this.onInitCallbacks.get(q);if(ne)for(const Be of ne)try{Be(U,q)}catch{}}getOrInitializeService({instanceIdentifier:U,options:q={}}){let ne=this.instances.get(U);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(he=U,he===Y?void 0:he),options:q}),this.instances.set(U,ne),this.instancesOptions.set(U,q),this.invokeOnInitCallbacks(ne,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,ne)}catch{}var he;return ne||null}normalizeInstanceIdentifier(U=Y){return this.component?this.component.multipleInstances?U:Y:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const q=this.getProvider(U.name);if(q.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);q.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const q=new se(U,this);return this.providers.set(U,q),q}getProviders(){return Array.from(this.providers.values())}}},2591:(_t,De,M)=>{var d=M(5861),V=M(4303),N=M(4537),Y=M(9058);const se=(H,re)=>re.some(xe=>H instanceof xe);let ve,Ee;const U=new WeakMap,q=new WeakMap,ne=new WeakMap,Be=new WeakMap,Ie=new WeakMap;let Ke={get(H,re,xe){if(H instanceof IDBTransaction){if("done"===re)return q.get(H);if("objectStoreNames"===re)return H.objectStoreNames||ne.get(H);if("store"===re)return xe.objectStoreNames[1]?void 0:xe.objectStore(xe.objectStoreNames[0])}return ee(H[re])},set:(H,re,xe)=>(H[re]=xe,!0),has:(H,re)=>H instanceof IDBTransaction&&("done"===re||"store"===re)||re in H};function pt(H){return"function"==typeof H?function ft(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...re){return H.apply(Te(this),re),ee(U.get(this))}:function(...re){return ee(H.apply(Te(this),re))}:function(re,...xe){const gt=H.call(Te(this),re,...xe);return ne.set(gt,re.sort?re.sort():[re]),ee(gt)}}(H):(H instanceof IDBTransaction&&function ke(H){if(q.has(H))return;const re=new Promise((xe,gt)=>{const wn=()=>{H.removeEventListener("complete",En),H.removeEventListener("error",tn),H.removeEventListener("abort",tn)},En=()=>{xe(),wn()},tn=()=>{gt(H.error||new DOMException("AbortError","AbortError")),wn()};H.addEventListener("complete",En),H.addEventListener("error",tn),H.addEventListener("abort",tn)});q.set(H,re)}(H),se(H,function Oe(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,Ke):H)}function ee(H){if(H instanceof IDBRequest)return function Ye(H){const re=new Promise((xe,gt)=>{const wn=()=>{H.removeEventListener("success",En),H.removeEventListener("error",tn)},En=()=>{xe(ee(H.result)),wn()},tn=()=>{gt(H.error),wn()};H.addEventListener("success",En),H.addEventListener("error",tn)});return re.then(xe=>{xe instanceof IDBCursor&&U.set(xe,H)}).catch(()=>{}),Ie.set(re,H),re}(H);if(Be.has(H))return Be.get(H);const re=pt(H);return re!==H&&(Be.set(H,re),Ie.set(re,H)),re}const Te=H=>Ie.get(H),je=["get","getKey","getAll","getAllKeys","count"],k=["put","add","delete","clear"],te=new Map;function be(H,re){if(!(H instanceof IDBDatabase)||re in H||"string"!=typeof re)return;if(te.get(re))return te.get(re);const xe=re.replace(/FromIndex$/,""),gt=re!==xe,wn=k.includes(xe);if(!(xe in(gt?IDBIndex:IDBObjectStore).prototype)||!wn&&!je.includes(xe))return;const En=function(){var tn=(0,d.Z)(function*(sr,...pr){const Pr=this.transaction(sr,wn?"readwrite":"readonly");let ss=Pr.store;return gt&&(ss=ss.index(pr.shift())),(yield Promise.all([ss[xe](...pr),wn&&Pr.done]))[0]});return function(pr){return tn.apply(this,arguments)}}();return te.set(re,En),En}!function Se(H){Ke=H(Ke)}(H=>({...H,get:(re,xe,gt)=>be(re,xe)||H.get(re,xe,gt),has:(re,xe)=>!!be(re,xe)||H.has(re,xe)}));const it="@firebase/installations",Lt="0.6.4",$t=1e4,Ht=`w:${Lt}`,hn="FIS_v2",Xt="https://firebaseinstallations.googleapis.com/v1",Zn=36e5,oe=new Y.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ae(H){return H instanceof Y.ZR&&H.code.includes("request-failed")}function Ge({projectId:H}){return`${Xt}/projects/${H}/installations`}function tt(H){return{token:H.token,requestStatus:2,expiresIn:Gn(H.expiresIn),creationTime:Date.now()}}function qe(H,re){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,d.Z)(function*(H,re){const gt=(yield re.json()).error;return oe.create("request-failed",{requestName:H,serverCode:gt.code,serverMessage:gt.message,serverStatus:gt.status})})).apply(this,arguments)}function Dt({apiKey:H}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":H})}function yt(H){return fn.apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(H){const re=yield H();return re.status>=500&&re.status<600?H():re})).apply(this,arguments)}function Gn(H){return Number(H.replace("s","000"))}function Nn(){return(Nn=(0,d.Z)(function*({appConfig:H,heartbeatServiceProvider:re},{fid:xe}){const gt=Ge(H),wn=Dt(H),En=re.getImmediate({optional:!0});if(En){const Pr=yield En.getHeartbeatsHeader();Pr&&wn.append("x-firebase-client",Pr)}const sr={method:"POST",headers:wn,body:JSON.stringify({fid:xe,authVersion:hn,appId:H.appId,sdkVersion:Ht})},pr=yield yt(()=>fetch(gt,sr));if(pr.ok){const Pr=yield pr.json();return{fid:Pr.fid||xe,registrationStatus:2,refreshToken:Pr.refreshToken,authToken:tt(Pr.authToken)}}throw yield qe("Create Installation",pr)})).apply(this,arguments)}function ar(H){return new Promise(re=>{setTimeout(re,H)})}const Vn=/^[cdef][\w-]{21}$/,Tn="";function ir(){try{const H=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(H),H[0]=112+H[0]%16;const xe=function $r(H){return function Jn(H){return btoa(String.fromCharCode(...H)).replace(/\+/g,"-").replace(/\//g,"_")}(H).substr(0,22)}(H);return Vn.test(xe)?xe:Tn}catch{return Tn}}function Et(H){return`${H.appName}!${H.appId}`}const It=new Map;function Nt(H,re){const xe=Et(H);pn(xe,re),function Kt(H,re){const xe=function xr(){return!gn&&"BroadcastChannel"in self&&(gn=new BroadcastChannel("[Firebase] FID Change"),gn.onmessage=H=>{pn(H.data.key,H.data.fid)}),gn}();xe&&xe.postMessage({key:H,fid:re}),function rn(){0===It.size&&gn&&(gn.close(),gn=null)}()}(xe,re)}function pn(H,re){const xe=It.get(H);if(xe)for(const gt of xe)gt(re)}let gn=null;const li="firebase-installations-database",en=1,ln="firebase-installations-store";let Ir=null;function ur(){return Ir||(Ir=function ue(H,re,{blocked:xe,upgrade:gt,blocking:wn,terminated:En}={}){const tn=indexedDB.open(H,re),sr=ee(tn);return gt&&tn.addEventListener("upgradeneeded",pr=>{gt(ee(tn.result),pr.oldVersion,pr.newVersion,ee(tn.transaction))}),xe&&tn.addEventListener("blocked",()=>xe()),sr.then(pr=>{En&&pr.addEventListener("close",()=>En()),wn&&pr.addEventListener("versionchange",()=>wn())}).catch(()=>{}),sr}(li,en,{upgrade:(H,re)=>{0===re&&H.createObjectStore(ln)}})),Ir}function fr(H,re){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(H,re){const xe=Et(H),wn=(yield ur()).transaction(ln,"readwrite"),En=wn.objectStore(ln),tn=yield En.get(xe);return yield En.put(re,xe),yield wn.done,(!tn||tn.fid!==re.fid)&&Nt(H,re.fid),re})).apply(this,arguments)}function ye(H){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(H){const re=Et(H),gt=(yield ur()).transaction(ln,"readwrite");yield gt.objectStore(ln).delete(re),yield gt.done})).apply(this,arguments)}function Ce(H,re){return He.apply(this,arguments)}function He(){return(He=(0,d.Z)(function*(H,re){const xe=Et(H),wn=(yield ur()).transaction(ln,"readwrite"),En=wn.objectStore(ln),tn=yield En.get(xe),sr=re(tn);return void 0===sr?yield En.delete(xe):yield En.put(sr,xe),yield wn.done,sr&&(!tn||tn.fid!==sr.fid)&&Nt(H,sr.fid),sr})).apply(this,arguments)}function ut(H){return Ct.apply(this,arguments)}function Ct(){return Ct=(0,d.Z)(function*(H){let re;const xe=yield Ce(H.appConfig,gt=>{const wn=function mn(H){return Re(H||{fid:ir(),registrationStatus:0})}(gt),En=function z(H,re){if(0===re.registrationStatus){if(!navigator.onLine)return{installationEntry:re,registrationPromise:Promise.reject(oe.create("app-offline"))};const xe={fid:re.fid,registrationStatus:1,registrationTime:Date.now()},gt=function G(H,re){return P.apply(this,arguments)}(H,xe);return{installationEntry:xe,registrationPromise:gt}}return 1===re.registrationStatus?{installationEntry:re,registrationPromise:R(H)}:{installationEntry:re}}(H,wn);return re=En.registrationPromise,En.installationEntry});return xe.fid===Tn?{installationEntry:yield re}:{installationEntry:xe,registrationPromise:re}}),Ct.apply(this,arguments)}function P(){return P=(0,d.Z)(function*(H,re){try{const xe=yield function _n(H,re){return Nn.apply(this,arguments)}(H,re);return fr(H.appConfig,xe)}catch(xe){throw Ae(xe)&&409===xe.customData.serverCode?yield ye(H.appConfig):yield fr(H.appConfig,{fid:re.fid,registrationStatus:0}),xe}}),P.apply(this,arguments)}function R(H){return x.apply(this,arguments)}function x(){return(x=(0,d.Z)(function*(H){let re=yield X(H.appConfig);for(;1===re.registrationStatus;)yield ar(100),re=yield X(H.appConfig);if(0===re.registrationStatus){const{installationEntry:xe,registrationPromise:gt}=yield ut(H);return gt||xe}return re})).apply(this,arguments)}function X(H){return Ce(H,re=>{if(!re)throw oe.create("installation-not-found");return Re(re)})}function Re(H){return function Qe(H){return 1===H.registrationStatus&&H.registrationTime+$t<Date.now()}(H)?{fid:H.fid,registrationStatus:0}:H}function st(){return(st=(0,d.Z)(function*({appConfig:H,heartbeatServiceProvider:re},xe){const gt=function yn(H,{fid:re}){return`${Ge(H)}/${re}/authTokens:generate`}(H,xe),wn=function nn(H,{refreshToken:re}){const xe=Dt(H);return xe.append("Authorization",function Un(H){return`${hn} ${H}`}(re)),xe}(H,xe),En=re.getImmediate({optional:!0});if(En){const Pr=yield En.getHeartbeatsHeader();Pr&&wn.append("x-firebase-client",Pr)}const sr={method:"POST",headers:wn,body:JSON.stringify({installation:{sdkVersion:Ht,appId:H.appId}})},pr=yield yt(()=>fetch(gt,sr));if(pr.ok)return tt(yield pr.json());throw yield qe("Generate Auth Token",pr)})).apply(this,arguments)}function Ut(H){return vn.apply(this,arguments)}function vn(){return vn=(0,d.Z)(function*(H,re=!1){let xe;const gt=yield Ce(H.appConfig,En=>{if(!ot(En))throw oe.create("not-registered");const tn=En.authToken;if(!re&&function Ot(H){return 2===H.requestStatus&&!function ct(H){const re=Date.now();return re<H.creationTime||H.creationTime+H.expiresIn<re+Zn}(H)}(tn))return En;if(1===tn.requestStatus)return xe=function Yt(H,re){return wr.apply(this,arguments)}(H,re),En;{if(!navigator.onLine)throw oe.create("app-offline");const sr=function An(H){const re={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},H),{authToken:re})}(En);return xe=function de(H,re){return nt.apply(this,arguments)}(H,sr),sr}});return xe?yield xe:gt.authToken}),vn.apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(H,re){let xe=yield K(H.appConfig);for(;1===xe.authToken.requestStatus;)yield ar(100),xe=yield K(H.appConfig);const gt=xe.authToken;return 0===gt.requestStatus?Ut(H,re):gt})).apply(this,arguments)}function K(H){return Ce(H,re=>{if(!ot(re))throw oe.create("not-registered");return function Jr(H){return 1===H.requestStatus&&H.requestTime+$t<Date.now()}(re.authToken)?Object.assign(Object.assign({},re),{authToken:{requestStatus:0}}):re})}function nt(){return nt=(0,d.Z)(function*(H,re){try{const xe=yield function xt(H,re){return st.apply(this,arguments)}(H,re),gt=Object.assign(Object.assign({},re),{authToken:xe});return yield fr(H.appConfig,gt),xe}catch(xe){if(!Ae(xe)||401!==xe.customData.serverCode&&404!==xe.customData.serverCode){const gt=Object.assign(Object.assign({},re),{authToken:{requestStatus:0}});yield fr(H.appConfig,gt)}else yield ye(H.appConfig);throw xe}}),nt.apply(this,arguments)}function ot(H){return void 0!==H&&2===H.registrationStatus}function zi(){return(zi=(0,d.Z)(function*(H){const re=H,{installationEntry:xe,registrationPromise:gt}=yield ut(re);return gt?gt.catch(console.error):Ut(re).catch(console.error),xe.fid})).apply(this,arguments)}function dn(){return dn=(0,d.Z)(function*(H,re=!1){const xe=H;return yield function Ns(H){return Ks.apply(this,arguments)}(xe),(yield Ut(xe,re)).token}),dn.apply(this,arguments)}function Ks(){return(Ks=(0,d.Z)(function*(H){const{registrationPromise:re}=yield ut(H);re&&(yield re)})).apply(this,arguments)}function Aa(H){return oe.create("missing-app-config-values",{valueName:H})}const go="installations",Sa=H=>{const re=H.getProvider("app").getImmediate(),xe=function hi(H){if(!H||!H.options)throw Aa("App Configuration");if(!H.name)throw Aa("App Name");const re=["projectId","apiKey","appId"];for(const xe of re)if(!H.options[xe])throw Aa(xe);return{appName:H.name,projectId:H.options.projectId,apiKey:H.options.apiKey,appId:H.options.appId}}(re);return{app:re,appConfig:xe,heartbeatServiceProvider:(0,V._getProvider)(re,"heartbeat"),_delete:()=>Promise.resolve()}},Ko=H=>{const re=H.getProvider("app").getImmediate(),xe=(0,V._getProvider)(re,go).getImmediate();return{getId:()=>function Xr(H){return zi.apply(this,arguments)}(xe),getToken:wn=>function Or(H){return dn.apply(this,arguments)}(xe,wn)}};(function Su(){(0,V._registerComponent)(new N.wA(go,Sa,"PUBLIC")),(0,V._registerComponent)(new N.wA("installations-internal",Ko,"PRIVATE"))})(),(0,V.registerVersion)(it,Lt),(0,V.registerVersion)(it,Lt,"esm2017")},7879:(_t,De,M)=>{M.d(De,{Am:()=>he,Ub:()=>Oe,Yd:()=>Ee,in:()=>V});const d=[];var V=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(V||{});const N={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},Y=V.INFO,se={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},ve=(U,q,...ne)=>{if(q<U.logLevel)return;const Be=(new Date).toISOString(),Ie=se[q];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Ie](`[${Be}]  ${U.name}:`,...ne)};class Ee{constructor(q){this.name=q,this._logLevel=Y,this._logHandler=ve,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in V))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?N[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...q),this._logHandler(this,V.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...q),this._logHandler(this,V.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,V.INFO,...q),this._logHandler(this,V.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,V.WARN,...q),this._logHandler(this,V.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...q),this._logHandler(this,V.ERROR,...q)}}function Oe(U){d.forEach(q=>{q.setLogLevel(U)})}function he(U,q){for(const ne of d){let Be=null;q&&q.level&&(Be=N[q.level]),ne.userLogHandler=null===U?null:(Ie,Ye,...ke)=>{const Ke=ke.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch{return null}}).filter(Se=>Se).join(" ");Ye>=(Be??Ie.logLevel)&&U({level:V[Ye].toLowerCase(),message:Ke,args:ke,type:Ie.name})}}}},2650:(_t,De,M)=>{M.d(De,{Gb:()=>X,LP:()=>Ut,pQ:()=>Yt,ps:()=>wr});var d=M(5861),N=(M(2591),M(4537)),Y=M(9240),se=M(9058),ve=M(4303);const Ee="/firebase-messaging-sw.js",Oe="/firebase-cloud-messaging-push-scope",he="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",U="https://fcmregistrations.googleapis.com/v1",q="google.c.a.c_id",ne="google.c.a.c_l",Be="google.c.a.ts";var ke=function(K){return K.PUSH_RECEIVED="push-received",K.NOTIFICATION_CLICKED="notification-clicked",K}(ke||{});function Ke(K){const de=new Uint8Array(K);return btoa(String.fromCharCode(...de)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Se(K){const nt=(K+"=".repeat((4-K.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ot=atob(nt),Ot=new Uint8Array(ot.length);for(let ct=0;ct<ot.length;++ct)Ot[ct]=ot.charCodeAt(ct);return Ot}const ft="fcm_token_details_db",pt=5,ee="fcm_token_object_Store";function ue(){return ue=(0,d.Z)(function*(K){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ct=>ct.name).includes(ft))return null;let de=null;return(yield(0,Y.X3)(ft,pt,{upgrade:(ot=(0,d.Z)(function*(Ot,ct,An,Jr){var Xr;if(ct<2||!Ot.objectStoreNames.contains(ee))return;const zi=Jr.objectStore(ee),Or=yield zi.index("fcmSenderId").get(K);if(yield zi.clear(),Or)if(2===ct){const dn=Or;if(!dn.auth||!dn.p256dh||!dn.endpoint)return;de={token:dn.fcmToken,createTime:null!==(Xr=dn.createTime)&&void 0!==Xr?Xr:Date.now(),subscriptionOptions:{auth:dn.auth,p256dh:dn.p256dh,endpoint:dn.endpoint,swScope:dn.swScope,vapidKey:"string"==typeof dn.vapidKey?dn.vapidKey:Ke(dn.vapidKey)}}}else if(3===ct){const dn=Or;de={token:dn.fcmToken,createTime:dn.createTime,subscriptionOptions:{auth:Ke(dn.auth),p256dh:Ke(dn.p256dh),endpoint:dn.endpoint,swScope:dn.swScope,vapidKey:Ke(dn.vapidKey)}}}else if(4===ct){const dn=Or;de={token:dn.fcmToken,createTime:dn.createTime,subscriptionOptions:{auth:Ke(dn.auth),p256dh:Ke(dn.p256dh),endpoint:dn.endpoint,swScope:dn.swScope,vapidKey:Ke(dn.vapidKey)}}}}),function(ct,An,Jr,Xr){return ot.apply(this,arguments)})})).close(),yield(0,Y.Lj)(ft),yield(0,Y.Lj)("fcm_vapid_details_db"),yield(0,Y.Lj)("undefined"),function Me(K){if(!K||!K.subscriptionOptions)return!1;const{subscriptionOptions:de}=K;return"number"==typeof K.createTime&&K.createTime>0&&"string"==typeof K.token&&K.token.length>0&&"string"==typeof de.auth&&de.auth.length>0&&"string"==typeof de.p256dh&&de.p256dh.length>0&&"string"==typeof de.endpoint&&de.endpoint.length>0&&"string"==typeof de.swScope&&de.swScope.length>0&&"string"==typeof de.vapidKey&&de.vapidKey.length>0}(de)?de:null;var ot}),ue.apply(this,arguments)}const je="firebase-messaging-database",k=1,te="firebase-messaging-store";let be=null;function it(){return be||(be=(0,Y.X3)(je,k,{upgrade:(K,de)=>{0===de&&K.createObjectStore(te)}})),be}function Lt(K){return $t.apply(this,arguments)}function $t(){return $t=(0,d.Z)(function*(K){const de=ae(K),ot=yield(yield it()).transaction(te).objectStore(te).get(de);if(ot)return ot;{const Ot=yield function Te(K){return ue.apply(this,arguments)}(K.appConfig.senderId);if(Ot)return yield Ht(K,Ot),Ot}}),$t.apply(this,arguments)}function Ht(K,de){return hn.apply(this,arguments)}function hn(){return(hn=(0,d.Z)(function*(K,de){const nt=ae(K),Ot=(yield it()).transaction(te,"readwrite");return yield Ot.objectStore(te).put(de,nt),yield Ot.done,de})).apply(this,arguments)}function Zn(){return(Zn=(0,d.Z)(function*(K){const de=ae(K),ot=(yield it()).transaction(te,"readwrite");yield ot.objectStore(te).delete(de),yield ot.done})).apply(this,arguments)}function ae({appConfig:K}){return K.appId}const ce=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function oe(K,de){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,d.Z)(function*(K,de){const nt=yield nn(K),ot=fn(de),Ot={method:"POST",headers:nt,body:JSON.stringify(ot)};let ct;try{ct=yield(yield fetch(Dt(K.appConfig),Ot)).json()}catch(An){throw ce.create("token-subscribe-failed",{errorInfo:An?.toString()})}if(ct.error)throw ce.create("token-subscribe-failed",{errorInfo:ct.error.message});if(!ct.token)throw ce.create("token-subscribe-no-token");return ct.token})).apply(this,arguments)}function tt(){return(tt=(0,d.Z)(function*(K,de){const nt=yield nn(K),ot=fn(de.subscriptionOptions),Ot={method:"PATCH",headers:nt,body:JSON.stringify(ot)};let ct;try{ct=yield(yield fetch(`${Dt(K.appConfig)}/${de.token}`,Ot)).json()}catch(An){throw ce.create("token-update-failed",{errorInfo:An?.toString()})}if(ct.error)throw ce.create("token-update-failed",{errorInfo:ct.error.message});if(!ct.token)throw ce.create("token-update-no-token");return ct.token})).apply(this,arguments)}function qe(K,de){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,d.Z)(function*(K,de){const ot={method:"DELETE",headers:yield nn(K)};try{const ct=yield(yield fetch(`${Dt(K.appConfig)}/${de}`,ot)).json();if(ct.error)throw ce.create("token-unsubscribe-failed",{errorInfo:ct.error.message})}catch(Ot){throw ce.create("token-unsubscribe-failed",{errorInfo:Ot?.toString()})}})).apply(this,arguments)}function Dt({projectId:K}){return`${U}/projects/${K}/registrations`}function nn(K){return yt.apply(this,arguments)}function yt(){return(yt=(0,d.Z)(function*({appConfig:K,installations:de}){const nt=yield de.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":K.apiKey,"x-goog-firebase-installations-auth":`FIS ${nt}`})})).apply(this,arguments)}function fn({p256dh:K,auth:de,endpoint:nt,vapidKey:ot}){const Ot={web:{endpoint:nt,auth:de,p256dh:K}};return ot!==he&&(Ot.web.applicationPubKey=ot),Ot}const Gn=6048e5;function _n(){return _n=(0,d.Z)(function*(K){const de=yield function $r(K,de){return Et.apply(this,arguments)}(K.swRegistration,K.vapidKey),nt={vapidKey:K.vapidKey,swScope:K.swRegistration.scope,endpoint:de.endpoint,auth:Ke(de.getKey("auth")),p256dh:Ke(de.getKey("p256dh"))},ot=yield Lt(K.firebaseDependencies);if(ot){if(function It(K,de){return de.vapidKey===K.vapidKey&&de.endpoint===K.endpoint&&de.auth===K.auth&&de.p256dh===K.p256dh}(ot.subscriptionOptions,nt))return Date.now()>=ot.createTime+Gn?function Jn(K,de){return Vn.apply(this,arguments)}(K,{token:ot.token,createTime:Date.now(),subscriptionOptions:nt}):ot.token;try{yield qe(K.firebaseDependencies,ot.token)}catch(Ot){console.warn(Ot)}return Tn(K.firebaseDependencies,nt)}return Tn(K.firebaseDependencies,nt)}),_n.apply(this,arguments)}function Nn(K){return ar.apply(this,arguments)}function ar(){return ar=(0,d.Z)(function*(K){const de=yield Lt(K.firebaseDependencies);de&&(yield qe(K.firebaseDependencies,de.token),yield function Xt(K){return Zn.apply(this,arguments)}(K.firebaseDependencies));const nt=yield K.swRegistration.pushManager.getSubscription();return!nt||nt.unsubscribe()}),ar.apply(this,arguments)}function Vn(){return Vn=(0,d.Z)(function*(K,de){try{const nt=yield function Ge(K,de){return tt.apply(this,arguments)}(K.firebaseDependencies,de),ot=Object.assign(Object.assign({},de),{token:nt,createTime:Date.now()});return yield Ht(K.firebaseDependencies,ot),nt}catch(nt){throw yield Nn(K),nt}}),Vn.apply(this,arguments)}function Tn(K,de){return ir.apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(K,de){const ot={token:yield oe(K,de),createTime:Date.now(),subscriptionOptions:de};return yield Ht(K,ot),ot.token})).apply(this,arguments)}function Et(){return(Et=(0,d.Z)(function*(K,de){return(yield K.pushManager.getSubscription())||K.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Se(de)})})).apply(this,arguments)}function Nt(K){const de={from:K.from,collapseKey:K.collapse_key,messageId:K.fcmMessageId};return function Rt(K,de){if(!de.notification)return;K.notification={};const nt=de.notification.title;nt&&(K.notification.title=nt);const ot=de.notification.body;ot&&(K.notification.body=ot);const Ot=de.notification.image;Ot&&(K.notification.image=Ot);const ct=de.notification.icon;ct&&(K.notification.icon=ct)}(de,K),function vr(K,de){de.data&&(K.data=de.data)}(de,K),function pn(K,de){var nt,ot,Ot,ct,An;if(!(de.fcmOptions||null!==(nt=de.notification)&&void 0!==nt&&nt.click_action))return;K.fcmOptions={};const Jr=null!==(Ot=null===(ot=de.fcmOptions)||void 0===ot?void 0:ot.link)&&void 0!==Ot?Ot:null===(ct=de.notification)||void 0===ct?void 0:ct.click_action;Jr&&(K.fcmOptions.link=Jr);const Xr=null===(An=de.fcmOptions)||void 0===An?void 0:An.analytics_label;Xr&&(K.fcmOptions.analyticsLabel=Xr)}(de,K),de}function gn(K,de){const nt=[];for(let ot=0;ot<K.length;ot++)nt.push(K.charAt(ot)),ot<de.length&&nt.push(de.charAt(ot));return nt.join("")}function rn(K){return ce.create("missing-app-config-values",{valueName:K})}gn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class li{constructor(de,nt,ot){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ot=function xr(K){if(!K||!K.options)throw rn("App Configuration Object");if(!K.name)throw rn("App Name");const de=["projectId","apiKey","appId","messagingSenderId"],{options:nt}=K;for(const ot of de)if(!nt[ot])throw rn(ot);return{appName:K.name,projectId:nt.projectId,apiKey:nt.apiKey,appId:nt.appId,senderId:nt.messagingSenderId}}(de);this.firebaseDependencies={app:de,appConfig:Ot,installations:nt,analyticsProvider:ot}}_delete(){return Promise.resolve()}}function en(K){return ln.apply(this,arguments)}function ln(){return(ln=(0,d.Z)(function*(K){try{K.swRegistration=yield navigator.serviceWorker.register(Ee,{scope:Oe}),K.swRegistration.update().catch(()=>{})}catch(de){throw ce.create("failed-service-worker-registration",{browserErrorMessage:de?.message})}})).apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(K,de){if(!de&&!K.swRegistration&&(yield en(K)),de||!K.swRegistration){if(!(de instanceof ServiceWorkerRegistration))throw ce.create("invalid-sw-registration");K.swRegistration=de}})).apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(K,de){de?K.vapidKey=de:K.vapidKey||(K.vapidKey=he)})).apply(this,arguments)}function ye(K,de){return Z.apply(this,arguments)}function Z(){return Z=(0,d.Z)(function*(K,de){if(!navigator)throw ce.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ce.create("permission-blocked");return yield function fr(K,de){return Bn.apply(this,arguments)}(K,de?.vapidKey),yield function Ir(K,de){return ur.apply(this,arguments)}(K,de?.serviceWorkerRegistration),function Un(K){return _n.apply(this,arguments)}(K)}),Z.apply(this,arguments)}function He(){return(He=(0,d.Z)(function*(K,de,nt){const ot=function ut(K){switch(K){case ke.NOTIFICATION_CLICKED:return"notification_open";case ke.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(de);(yield K.firebaseDependencies.analyticsProvider.get()).logEvent(ot,{message_id:nt[q],message_name:nt[ne],message_time:nt[Be],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function mn(){return mn=(0,d.Z)(function*(K,de){const nt=de.data;if(!nt.isFirebaseMessaging)return;K.onMessageHandler&&nt.messageType===ke.PUSH_RECEIVED&&("function"==typeof K.onMessageHandler?K.onMessageHandler(Nt(nt)):K.onMessageHandler.next(Nt(nt)));const ot=nt.data;(function Kt(K){return"object"==typeof K&&!!K&&q in K})(ot)&&"1"===ot["google.c.a.e"]&&(yield function Ce(K,de,nt){return He.apply(this,arguments)}(K,nt.messageType,ot))}),mn.apply(this,arguments)}const z="@firebase/messaging",G="0.12.4",P=K=>{const de=new li(K.getProvider("app").getImmediate(),K.getProvider("installations-internal").getImmediate(),K.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",nt=>function Ct(K,de){return mn.apply(this,arguments)}(de,nt)),de},R=K=>{const de=K.getProvider("messaging").getImmediate();return{getToken:ot=>ye(de,ot)}};function X(){return Re.apply(this,arguments)}function Re(){return(Re=(0,d.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function xt(){return(xt=(0,d.Z)(function*(K){if(!navigator)throw ce.create("only-available-in-window");return K.swRegistration||(yield en(K)),Nn(K)})).apply(this,arguments)}function Ut(K,de){return vn.apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*(K,de){return ye(K=(0,se.m9)(K),de)})).apply(this,arguments)}function Yt(K){return function Qe(K){return xt.apply(this,arguments)}(K=(0,se.m9)(K))}function wr(K,de){return function st(K,de){if(!navigator)throw ce.create("only-available-in-window");return K.onMessageHandler=de,()=>{K.onMessageHandler=null}}(K=(0,se.m9)(K),de)}!function x(){(0,ve._registerComponent)(new N.wA("messaging",P,"PUBLIC")),(0,ve._registerComponent)(new N.wA("messaging-internal",R,"PRIVATE")),(0,ve.registerVersion)(z,G),(0,ve.registerVersion)(z,G,"esm2017")}()},9240:(_t,De,M)=>{M.d(De,{Lj:()=>ee,X3:()=>pt});var d=M(5861);const V=(k,te)=>te.some(be=>k instanceof be);let N,Y;const Ee=new WeakMap,Oe=new WeakMap,he=new WeakMap,U=new WeakMap,q=new WeakMap;let Ie={get(k,te,be){if(k instanceof IDBTransaction){if("done"===te)return Oe.get(k);if("objectStoreNames"===te)return k.objectStoreNames||he.get(k);if("store"===te)return be.objectStoreNames[1]?void 0:be.objectStore(be.objectStoreNames[0])}return Se(k[te])},set:(k,te,be)=>(k[te]=be,!0),has:(k,te)=>k instanceof IDBTransaction&&("done"===te||"store"===te)||te in k};function Ke(k){return"function"==typeof k?function ke(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...te){return k.apply(ft(this),te),Se(Ee.get(this))}:function(...te){return Se(k.apply(ft(this),te))}:function(te,...be){const it=k.call(ft(this),te,...be);return he.set(it,te.sort?te.sort():[te]),Se(it)}}(k):(k instanceof IDBTransaction&&function Be(k){if(Oe.has(k))return;const te=new Promise((be,it)=>{const Lt=()=>{k.removeEventListener("complete",$t),k.removeEventListener("error",Ht),k.removeEventListener("abort",Ht)},$t=()=>{be(),Lt()},Ht=()=>{it(k.error||new DOMException("AbortError","AbortError")),Lt()};k.addEventListener("complete",$t),k.addEventListener("error",Ht),k.addEventListener("abort",Ht)});Oe.set(k,te)}(k),V(k,function se(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ie):k)}function Se(k){if(k instanceof IDBRequest)return function ne(k){const te=new Promise((be,it)=>{const Lt=()=>{k.removeEventListener("success",$t),k.removeEventListener("error",Ht)},$t=()=>{be(Se(k.result)),Lt()},Ht=()=>{it(k.error),Lt()};k.addEventListener("success",$t),k.addEventListener("error",Ht)});return te.then(be=>{be instanceof IDBCursor&&Ee.set(be,k)}).catch(()=>{}),q.set(te,k),te}(k);if(U.has(k))return U.get(k);const te=Ke(k);return te!==k&&(U.set(k,te),q.set(te,k)),te}const ft=k=>q.get(k);function pt(k,te,{blocked:be,upgrade:it,blocking:Lt,terminated:$t}={}){const Ht=indexedDB.open(k,te),hn=Se(Ht);return it&&Ht.addEventListener("upgradeneeded",Xt=>{it(Se(Ht.result),Xt.oldVersion,Xt.newVersion,Se(Ht.transaction))}),be&&Ht.addEventListener("blocked",()=>be()),hn.then(Xt=>{$t&&Xt.addEventListener("close",()=>$t()),Lt&&Xt.addEventListener("versionchange",()=>Lt())}).catch(()=>{}),hn}function ee(k,{blocked:te}={}){const be=indexedDB.deleteDatabase(k);return te&&be.addEventListener("blocked",()=>te()),Se(be).then(()=>{})}const Te=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],Me=new Map;function je(k,te){if(!(k instanceof IDBDatabase)||te in k||"string"!=typeof te)return;if(Me.get(te))return Me.get(te);const be=te.replace(/FromIndex$/,""),it=te!==be,Lt=ue.includes(be);if(!(be in(it?IDBIndex:IDBObjectStore).prototype)||!Lt&&!Te.includes(be))return;const $t=function(){var Ht=(0,d.Z)(function*(hn,...Xt){const Zn=this.transaction(hn,Lt?"readwrite":"readonly");let ae=Zn.store;return it&&(ae=ae.index(Xt.shift())),(yield Promise.all([ae[be](...Xt),Lt&&Zn.done]))[0]});return function(Xt){return Ht.apply(this,arguments)}}();return Me.set(te,$t),$t}!function Ye(k){Ie=k(Ie)}(k=>({...k,get:(te,be,it)=>je(te,be)||k.get(te,be,it),has:(te,be)=>!!je(te,be)||k.has(te,be)}))},1878:(_t,De,M)=>{M.d(De,{X3:()=>pt});var d=M(5861);const V=(k,te)=>te.some(be=>k instanceof be);let N,Y;const Ee=new WeakMap,Oe=new WeakMap,he=new WeakMap,U=new WeakMap,q=new WeakMap;let Ie={get(k,te,be){if(k instanceof IDBTransaction){if("done"===te)return Oe.get(k);if("objectStoreNames"===te)return k.objectStoreNames||he.get(k);if("store"===te)return be.objectStoreNames[1]?void 0:be.objectStore(be.objectStoreNames[0])}return Se(k[te])},set:(k,te,be)=>(k[te]=be,!0),has:(k,te)=>k instanceof IDBTransaction&&("done"===te||"store"===te)||te in k};function Ke(k){return"function"==typeof k?function ke(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...te){return k.apply(ft(this),te),Se(Ee.get(this))}:function(...te){return Se(k.apply(ft(this),te))}:function(te,...be){const it=k.call(ft(this),te,...be);return he.set(it,te.sort?te.sort():[te]),Se(it)}}(k):(k instanceof IDBTransaction&&function Be(k){if(Oe.has(k))return;const te=new Promise((be,it)=>{const Lt=()=>{k.removeEventListener("complete",$t),k.removeEventListener("error",Ht),k.removeEventListener("abort",Ht)},$t=()=>{be(),Lt()},Ht=()=>{it(k.error||new DOMException("AbortError","AbortError")),Lt()};k.addEventListener("complete",$t),k.addEventListener("error",Ht),k.addEventListener("abort",Ht)});Oe.set(k,te)}(k),V(k,function se(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ie):k)}function Se(k){if(k instanceof IDBRequest)return function ne(k){const te=new Promise((be,it)=>{const Lt=()=>{k.removeEventListener("success",$t),k.removeEventListener("error",Ht)},$t=()=>{be(Se(k.result)),Lt()},Ht=()=>{it(k.error),Lt()};k.addEventListener("success",$t),k.addEventListener("error",Ht)});return te.then(be=>{be instanceof IDBCursor&&Ee.set(be,k)}).catch(()=>{}),q.set(te,k),te}(k);if(U.has(k))return U.get(k);const te=Ke(k);return te!==k&&(U.set(k,te),q.set(te,k)),te}const ft=k=>q.get(k);function pt(k,te,{blocked:be,upgrade:it,blocking:Lt,terminated:$t}={}){const Ht=indexedDB.open(k,te),hn=Se(Ht);return it&&Ht.addEventListener("upgradeneeded",Xt=>{it(Se(Ht.result),Xt.oldVersion,Xt.newVersion,Se(Ht.transaction),Xt)}),be&&Ht.addEventListener("blocked",Xt=>be(Xt.oldVersion,Xt.newVersion,Xt)),hn.then(Xt=>{$t&&Xt.addEventListener("close",()=>$t()),Lt&&Xt.addEventListener("versionchange",Zn=>Lt(Zn.oldVersion,Zn.newVersion,Zn))}).catch(()=>{}),hn}const Te=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],Me=new Map;function je(k,te){if(!(k instanceof IDBDatabase)||te in k||"string"!=typeof te)return;if(Me.get(te))return Me.get(te);const be=te.replace(/FromIndex$/,""),it=te!==be,Lt=ue.includes(be);if(!(be in(it?IDBIndex:IDBObjectStore).prototype)||!Lt&&!Te.includes(be))return;const $t=function(){var Ht=(0,d.Z)(function*(hn,...Xt){const Zn=this.transaction(hn,Lt?"readwrite":"readonly");let ae=Zn.store;return it&&(ae=ae.index(Xt.shift())),(yield Promise.all([ae[be](...Xt),Lt&&Zn.done]))[0]});return function(Xt){return Ht.apply(this,arguments)}}();return Me.set(te,$t),$t}!function Ye(k){Ie=k(Ie)}(k=>({...k,get:(te,be,it)=>je(te,be)||k.get(te,be,it),has:(te,be)=>!!je(te,be)||k.has(te,be)}))},5861:(_t,De,M)=>{function d(N,Y,se,ve,Ee,Oe,he){try{var U=N[Oe](he),q=U.value}catch(ne){return void se(ne)}U.done?Y(q):Promise.resolve(q).then(ve,Ee)}function V(N){return function(){var Y=this,se=arguments;return new Promise(function(ve,Ee){var Oe=N.apply(Y,se);function he(q){d(Oe,ve,Ee,he,U,"next",q)}function U(q){d(Oe,ve,Ee,he,U,"throw",q)}he(void 0)})}}M.d(De,{Z:()=>V})},7582:(_t,De,M)=>{function Y(ae,pe){var ce={};for(var oe in ae)Object.prototype.hasOwnProperty.call(ae,oe)&&pe.indexOf(oe)<0&&(ce[oe]=ae[oe]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(oe=Object.getOwnPropertySymbols(ae);Ae<oe.length;Ae++)pe.indexOf(oe[Ae])<0&&Object.prototype.propertyIsEnumerable.call(ae,oe[Ae])&&(ce[oe[Ae]]=ae[oe[Ae]])}return ce}function ne(ae,pe,ce,oe){return new(ce||(ce=Promise))(function(Ge,tt){function qe(nn){try{Dt(oe.next(nn))}catch(yt){tt(yt)}}function Wt(nn){try{Dt(oe.throw(nn))}catch(yt){tt(yt)}}function Dt(nn){nn.done?Ge(nn.value):function Ae(Ge){return Ge instanceof ce?Ge:new ce(function(tt){tt(Ge)})}(nn.value).then(qe,Wt)}Dt((oe=oe.apply(ae,pe||[])).next())})}function ee(ae){return this instanceof ee?(this.v=ae,this):new ee(ae)}function Te(ae,pe,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,oe=ce.apply(ae,pe||[]),Ge=[];return Ae={},tt("next"),tt("throw"),tt("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function tt(fn){oe[fn]&&(Ae[fn]=function(Gn){return new Promise(function(Un,_n){Ge.push([fn,Gn,Un,_n])>1||qe(fn,Gn)})})}function qe(fn,Gn){try{!function Wt(fn){fn.value instanceof ee?Promise.resolve(fn.value.v).then(Dt,nn):yt(Ge[0][2],fn)}(oe[fn](Gn))}catch(Un){yt(Ge[0][3],Un)}}function Dt(fn){qe("next",fn)}function nn(fn){qe("throw",fn)}function yt(fn,Gn){fn(Gn),Ge.shift(),Ge.length&&qe(Ge[0][0],Ge[0][1])}}function Me(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,pe=ae[Symbol.asyncIterator];return pe?pe.call(ae):(ae=function ke(ae){var pe="function"==typeof Symbol&&Symbol.iterator,ce=pe&&ae[pe],oe=0;if(ce)return ce.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&oe>=ae.length&&(ae=void 0),{value:ae&&ae[oe++],done:!ae}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),ce={},oe("next"),oe("throw"),oe("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function oe(Ge){ce[Ge]=ae[Ge]&&function(tt){return new Promise(function(qe,Wt){!function Ae(Ge,tt,qe,Wt){Promise.resolve(Wt).then(function(Dt){Ge({value:Dt,done:qe})},tt)}(qe,Wt,(tt=ae[Ge](tt)).done,tt.value)})}}}M.d(De,{FC:()=>Te,KL:()=>Me,_T:()=>Y,mG:()=>ne,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},_t=>{_t(_t.s=4165)}]);