"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(yt,Ae,M)=>{M.d(Ae,{Dh:()=>Oe,GT:()=>ve,cc:()=>Ee,hO:()=>Ue,on:()=>V,pX:()=>se,xv:()=>he});var h=M(5879),B=M(120),R=M(4556);yt=M.hmd(yt);const Y=["ngOnDestroy"],se=(Se,ht,ft,ee={})=>new Proxy(Se,{get:(De,ue)=>ft.runOutsideAngular(()=>{var Me;if(Se[ue])return!(null===(Me=ee?.spy)||void 0===Me)&&Me.get&&ee.spy.get(ue,Se[ue]),Se[ue];if(Y.indexOf(ue)>-1)return()=>{};const Be=ht.toPromise().then(k=>{const te=k&&k[ue];return"function"==typeof te?te.bind(k):te&&te.then?te.then(Ce=>ft.run(()=>Ce)):ft.run(()=>te)});return new Proxy(()=>{},{get:(k,te)=>Be[te],apply:(k,te,Ce)=>Be.then(it=>{var Lt;const $t=it&&it(...Ce);return!(null===(Lt=ee?.spy)||void 0===Lt)&&Lt.apply&&ee.spy.apply(ue,Ce,$t),$t})})})}),ve=(Se,ht)=>{ht.forEach(ft=>{Object.getOwnPropertyNames(ft.prototype||ft).forEach(ee=>{Object.defineProperty(Se.prototype,ee,Object.getOwnPropertyDescriptor(ft.prototype||ft,ee))})})};class _e{constructor(ht){return ht}}const Oe=new h.OlP("angularfire2.app.options"),he=new h.OlP("angularfire2.app.name");function V(Se,ht,ft){const De="object"==typeof ft&&ft||{};De.name=De.name||"string"==typeof ft&&ft||"[DEFAULT]";const Me=B.Z.apps.filter(Be=>Be&&Be.name===De.name)[0]||ht.runOutsideAngular(()=>B.Z.initializeApp(Se,De));try{JSON.stringify(Se)!==JSON.stringify(Me.options)&&z("error",`${Me.name} Firebase App already initialized with different options${yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new _e(Me)}const z=(Se,...ht)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Se](...ht)},ne={provide:_e,useFactory:V,deps:[Oe,h.R0b,[new h.FiY,he]]};let Ue=(()=>{class Se{constructor(ft){B.Z.registerVersion("angularfire",R.q4.full,"core"),B.Z.registerVersion("angularfire",R.q4.full,"app-compat"),B.Z.registerVersion("angular",h.q4F.full,ft.toString())}static initializeApp(ft,ee){return{ngModule:Se,providers:[{provide:Oe,useValue:ft},{provide:he,useValue:ee}]}}}return Se.\u0275fac=function(ft){return new(ft||Se)(h.LFG(h.Lbi))},Se.\u0275mod=h.oAB({type:Se}),Se.\u0275inj=h.cJS({providers:[ne]}),Se})();function Ee(Se,ht,ft,ee,De){const[,ue,Me]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Se)||[];if(ue)return function Ye(Se,ht){try{return Se.toString()===ht.toString()}catch{return Se===ht}}(De,Me)||(We("error",`${ht} was already initialized on the ${ft} Firebase App with different settings.${ke?" You may need to reload as Firebase is not HMR aware.":""}`),We("warn",{is:De,was:Me})),ue;{const Be=ee();return globalThis.\u0275AngularfireInstanceCache.push([Se,Be,De]),Be}}const ke=!!yt.hot,We=(Se,...ht)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Se](...ht)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4556:(yt,Ae,M)=>{M.d(Ae,{q4:()=>Fs,iC:()=>as,HU:()=>Qd,vb:()=>ws,JM:()=>hr});var h=M(5879),B=M(4097),R=M(5861),Y=M(4303),se=M(9058),ve=M(4537),_e=M(7879);M(2591);const he="@firebase/remote-config",V="0.4.4",Ee=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Jt{constructor(F,j,pe,Ne){this.client=F,this.storage=j,this.storageCache=pe,this.logger=Ne}isCachedDataFresh(F,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const pe=Date.now()-j,Ne=pe<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${pe}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${Ne}.`),Ne}fetch(F){var j=this;return(0,R.Z)(function*(){const[pe,Ne]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(Ne&&j.isCachedDataFresh(F.cacheMaxAgeMillis,pe))return Ne;F.eTag=Ne&&Ne.eTag;const Ze=yield j.client.fetch(F),et=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ze.status&&et.push(j.storage.setLastSuccessfulFetchResponse(Ze)),yield Promise.all(et),Ze})()}}function zn(U=navigator){return U.languages&&U.languages[0]||U.language}class ae{constructor(F,j,pe,Ne,Ze,et){this.firebaseInstallations=F,this.sdkVersion=j,this.namespace=pe,this.projectId=Ne,this.apiKey=Ze,this.appId=et}fetch(F){var j=this;return(0,R.Z)(function*(){const[pe,Ne]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),et=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,Dt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},Ft={sdk_version:j.sdkVersion,app_instance_id:pe,app_instance_id_token:Ne,app_id:j.appId,language_code:zn()},qt={method:"POST",headers:Dt,body:JSON.stringify(Ft)},Bt=fetch(et,qt),Fr=new Promise((or,Di)=>{F.signal.addEventListener(()=>{const ka=new Error("The operation was aborted.");ka.name="AbortError",Di(ka)})});let Qn;try{yield Promise.race([Bt,Fr]),Qn=yield Bt}catch(or){let Di="fetch-client-network";throw"AbortError"===or?.name&&(Di="fetch-timeout"),Ee.create(Di,{originalErrorMessage:or?.message})}let Mn=Qn.status;const So=Qn.headers.get("ETag")||void 0;let Ki,Is;if(200===Qn.status){let or;try{or=yield Qn.json()}catch(Di){throw Ee.create("fetch-client-parse",{originalErrorMessage:Di?.message})}Ki=or.entries,Is=or.state}if("INSTANCE_STATE_UNSPECIFIED"===Is?Mn=500:"NO_CHANGE"===Is?Mn=304:("NO_TEMPLATE"===Is||"EMPTY_CONFIG"===Is)&&(Ki={}),304!==Mn&&200!==Mn)throw Ee.create("fetch-status",{httpStatus:Mn});return{status:Mn,eTag:So,config:Ki}})()}}class oe{constructor(F,j){this.client=F,this.storage=j}fetch(F){var j=this;return(0,R.Z)(function*(){const pe=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(F,pe)})()}attemptFetch(F,{throttleEndTimeMillis:j,backoffCount:pe}){var Ne=this;return(0,R.Z)(function*(){yield function fe(U,F){return new Promise((j,pe)=>{const Ne=Math.max(F-Date.now(),0),Ze=setTimeout(j,Ne);U.addEventListener(()=>{clearTimeout(Ze),pe(Ee.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,j);try{const Ze=yield Ne.client.fetch(F);return yield Ne.storage.deleteThrottleMetadata(),Ze}catch(Ze){if(!function ce(U){if(!(U instanceof se.ZR&&U.customData))return!1;const F=Number(U.customData.httpStatus);return 429===F||500===F||503===F||504===F}(Ze))throw Ze;const et={throttleEndTimeMillis:Date.now()+(0,se.$s)(pe),backoffCount:pe+1};return yield Ne.storage.setThrottleMetadata(et),Ne.attemptFetch(F,et)}})()}}class tt{constructor(F,j,pe,Ne,Ze){this.app=F,this._client=j,this._storageCache=pe,this._storage=Ne,this._logger=Ze,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qe(U,F){const j=U.target.error||void 0;return Ee.create(F,{originalErrorMessage:j&&j?.message})}const Wt="app_namespace_store";class fn{constructor(F,j,pe,Ne=function mt(){return new Promise((U,F)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=pe=>{F(qe(pe,"storage-open"))},j.onsuccess=pe=>{U(pe.target.result)},j.onupgradeneeded=pe=>{0===pe.oldVersion&&pe.target.result.createObjectStore(Wt,{keyPath:"compositeKey"})}}catch(j){F(Ee.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=F,this.appName=j,this.namespace=pe,this.openDbPromise=Ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var j=this;return(0,R.Z)(function*(){const pe=yield j.openDbPromise;return new Promise((Ne,Ze)=>{const Dt=pe.transaction([Wt],"readonly").objectStore(Wt),Ft=j.createCompositeKey(F);try{const qt=Dt.get(Ft);qt.onerror=Bt=>{Ze(qe(Bt,"storage-get"))},qt.onsuccess=Bt=>{const Fr=Bt.target.result;Ne(Fr?Fr.value:void 0)}}catch(qt){Ze(Ee.create("storage-get",{originalErrorMessage:qt?.message}))}})})()}set(F,j){var pe=this;return(0,R.Z)(function*(){const Ne=yield pe.openDbPromise;return new Promise((Ze,et)=>{const Ft=Ne.transaction([Wt],"readwrite").objectStore(Wt),qt=pe.createCompositeKey(F);try{const Bt=Ft.put({compositeKey:qt,value:j});Bt.onerror=Fr=>{et(qe(Fr,"storage-set"))},Bt.onsuccess=()=>{Ze()}}catch(Bt){et(Ee.create("storage-set",{originalErrorMessage:Bt?.message}))}})})()}delete(F){var j=this;return(0,R.Z)(function*(){const pe=yield j.openDbPromise;return new Promise((Ne,Ze)=>{const Dt=pe.transaction([Wt],"readwrite").objectStore(Wt),Ft=j.createCompositeKey(F);try{const qt=Dt.delete(Ft);qt.onerror=Bt=>{Ze(qe(Bt,"storage-delete"))},qt.onsuccess=()=>{Ne()}}catch(qt){Ze(Ee.create("storage-delete",{originalErrorMessage:qt?.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class jn{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,R.Z)(function*(){const j=F.storage.getLastFetchStatus(),pe=F.storage.getLastSuccessfulFetchTimestampMillis(),Ne=F.storage.getActiveConfig(),Ze=yield j;Ze&&(F.lastFetchStatus=Ze);const et=yield pe;et&&(F.lastSuccessfulFetchTimestampMillis=et);const Dt=yield Ne;Dt&&(F.activeConfig=Dt)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function ir(){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,R.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Ln(){(0,Y._registerComponent)(new ve.wA("remote-config",function U(F,{instanceIdentifier:j}){const pe=F.getProvider("app").getImmediate(),Ne=F.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ee.create("registration-window");if(!(0,se.hl)())throw Ee.create("indexed-db-unavailable");const{projectId:Ze,apiKey:et,appId:Dt}=pe.options;if(!Ze)throw Ee.create("registration-project-id");if(!et)throw Ee.create("registration-api-key");if(!Dt)throw Ee.create("registration-app-id");const Ft=new fn(Dt,pe.name,j=j||"firebase"),qt=new jn(Ft),Bt=new _e.Yd(he);Bt.logLevel=_e.in.ERROR;const Fr=new ae(Ne,Y.SDK_VERSION,j,Ze,et,Dt),Qn=new oe(Fr,Ft),Mn=new Jt(Qn,Ft,qt,Bt),So=new tt(pe,Mn,qt,Ft,Bt);return function Me(U){const F=(0,se.m9)(U);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(So),So},"PUBLIC").setMultipleInstances(!0)),(0,Y.registerVersion)(he,V),(0,Y.registerVersion)(he,V,"esm2017")}();var Vn=M(9519);const bn="analytics",nr="firebase_id",Hr="origin",wt=6e4,Ct="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Rt="https://www.googletagmanager.com/gtag/js",Pt=new _e.Yd("@firebase/analytics"),pn=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Kt(U){if(!U.startsWith(Rt)){const F=pn.create("invalid-gtag-resource",{gtagURL:U});return Pt.warn(F.message),""}return U}function gn(U){return Promise.all(U.map(F=>F.catch(j=>j)))}function cn(){return(cn=(0,R.Z)(function*(U,F,j,pe,Ne,Ze){const et=pe[Ne];try{if(et)yield F[et];else{const Ft=(yield gn(j)).find(qt=>qt.measurementId===Ne);Ft&&(yield F[Ft.appId])}}catch(Dt){Pt.error(Dt)}U("config",Ne,Ze)})).apply(this,arguments)}function sr(){return(sr=(0,R.Z)(function*(U,F,j,pe,Ne){try{let Ze=[];if(Ne&&Ne.send_to){let et=Ne.send_to;Array.isArray(et)||(et=[et]);const Dt=yield gn(j);for(const Ft of et){const qt=Dt.find(Fr=>Fr.measurementId===Ft),Bt=qt&&F[qt.appId];if(!Bt){Ze=[];break}Ze.push(Bt)}}0===Ze.length&&(Ze=Object.values(F)),yield Promise.all(Ze),U("event",pe,Ne||{})}catch(Ze){Pt.error(Ze)}})).apply(this,arguments)}const Z=30,ut=new class He{constructor(F={},j=1e3){this.throttleMetadata=F,this.intervalMillis=j}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,j){this.throttleMetadata[F]=j}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function Et(U){return new Headers({Accept:"application/json","x-goog-api-key":U})}function G(){return(G=(0,R.Z)(function*(U){var F;const{appId:j,apiKey:pe}=U,Ne={method:"GET",headers:Et(pe)},Ze=Ct.replace("{app-id}",j),et=yield fetch(Ze,Ne);if(200!==et.status&&304!==et.status){let Dt="";try{const Ft=yield et.json();null!==(F=Ft.error)&&void 0!==F&&F.message&&(Dt=Ft.error.message)}catch{}throw pn.create("config-fetch-failed",{httpStatus:et.status,responseMessage:Dt})}return et.json()})).apply(this,arguments)}function N(){return(N=(0,R.Z)(function*(U,F=ut,j){const{appId:pe,apiKey:Ne,measurementId:Ze}=U.options;if(!pe)throw pn.create("no-app-id");if(!Ne){if(Ze)return{measurementId:Ze,appId:pe};throw pn.create("no-api-key")}const et=F.getThrottleMetadata(pe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Dt=new Qe;return setTimeout((0,R.Z)(function*(){Dt.abort()}),void 0!==j?j:wt),P({appId:pe,apiKey:Ne,measurementId:Ze},et,Dt,F)})).apply(this,arguments)}function P(U,F,j){return S.apply(this,arguments)}function S(){return S=(0,R.Z)(function*(U,{throttleEndTimeMillis:F,backoffCount:j},pe,Ne=ut){var Ze;const{appId:et,measurementId:Dt}=U;try{yield function J(U,F){return new Promise((j,pe)=>{const Ne=Math.max(F-Date.now(),0),Ze=setTimeout(j,Ne);U.addEventListener(()=>{clearTimeout(Ze),pe(pn.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(pe,F)}catch(Ft){if(Dt)return Pt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${Ft?.message}]`),{appId:et,measurementId:Dt};throw Ft}try{const Ft=yield function mn(U){return G.apply(this,arguments)}(U);return Ne.deleteThrottleMetadata(et),Ft}catch(Ft){const qt=Ft;if(!function Re(U){if(!(U instanceof se.ZR&&U.customData))return!1;const F=Number(U.customData.httpStatus);return 429===F||500===F||503===F||504===F}(qt)){if(Ne.deleteThrottleMetadata(et),Dt)return Pt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${qt?.message}]`),{appId:et,measurementId:Dt};throw Ft}const Bt=503===Number(null===(Ze=qt?.customData)||void 0===Ze?void 0:Ze.httpStatus)?(0,se.$s)(j,Ne.intervalMillis,Z):(0,se.$s)(j,Ne.intervalMillis),Fr={throttleEndTimeMillis:Date.now()+Bt,backoffCount:j+1};return Ne.setThrottleMetadata(et,Fr),Pt.debug(`Calling attemptFetch again in ${Bt} millis`),P(U,Fr,pe,Ne)}}),S.apply(this,arguments)}class Qe{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}let xt,Tn;function yn(){return(yn=(0,R.Z)(function*(U,F,j,pe,Ne){if(Ne&&Ne.global)U("event",j,pe);else{const Ze=yield F;U("event",j,Object.assign(Object.assign({},pe),{send_to:Ze}))}})).apply(this,arguments)}function Mr(){return(Mr=(0,R.Z)(function*(){if(!(0,se.hl)())return Pt.warn(pn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(U){return Pt.warn(pn.create("indexeddb-unavailable",{errorInfo:U?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ps(){return Ps=(0,R.Z)(function*(U,F,j,pe,Ne,Ze,et){var Dt;const Ft=function H(U){return N.apply(this,arguments)}(U);Ft.then(Mn=>{j[Mn.measurementId]=Mn.appId,U.options.measurementId&&Mn.measurementId!==U.options.measurementId&&Pt.warn(`The measurement ID in the local Firebase config (${U.options.measurementId}) does not match the measurement ID fetched from the server (${Mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mn=>Pt.error(Mn)),F.push(Ft);const qt=function qi(){return Mr.apply(this,arguments)}().then(Mn=>{if(Mn)return pe.getId()}),[Bt,Fr]=yield Promise.all([Ft,qt]);(function me(U){const F=window.document.getElementsByTagName("script");for(const j of Object.values(F))if(j.src&&j.src.includes(Rt)&&j.src.includes(U))return j;return null})(Ze)||function sn(U,F){const j=function Sr(U,F){let j;return window.trustedTypes&&(j=window.trustedTypes.createPolicy(U,F)),j}("firebase-js-sdk-policy",{createScriptURL:Kt}),pe=document.createElement("script"),Ne=`${Rt}?l=${U}&id=${F}`;pe.src=j?j?.createScriptURL(Ne):Ne,pe.async=!0,document.head.appendChild(pe)}(Ze,Bt.measurementId),Tn&&(Ne("consent","default",Tn),function Yr(U){Tn=U}(void 0)),Ne("js",new Date);const Qn=null!==(Dt=et?.config)&&void 0!==Dt?Dt:{};return Qn[Hr]="firebase",Qn.update=!0,null!=Fr&&(Qn[nr]=Fr),Ne("config",Bt.measurementId,Qn),xt&&(Ne("set",xt),function Qr(U){xt=U}(void 0)),Bt.measurementId}),Ps.apply(this,arguments)}class Ys{constructor(F){this.app=F}_delete(){return delete Jr[this.app.options.appId],Promise.resolve()}}let Jr={},fi=[];const ks={};let er,Zi,vs="dataLayer",_s=!1;function Gr(U,F,j){!function bo(){const U=[];if((0,se.ru)()&&U.push("This is a browser extension environment."),(0,se.zI)()||U.push("Cookies are not available."),U.length>0){const F=U.map((pe,Ne)=>`(${Ne+1}) ${pe}`).join(" "),j=pn.create("invalid-analytics-context",{errorInfo:F});Pt.warn(j.message)}}();const pe=U.options.appId;if(!pe)throw pn.create("no-app-id");if(!U.options.apiKey){if(!U.options.measurementId)throw pn.create("no-api-key");Pt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${U.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Jr[pe])throw pn.create("already-exists",{id:pe});if(!_s){!function hi(U){let F=[];Array.isArray(window[U])?F=window[U]:window[U]=F}(vs);const{wrappedGtag:Ze,gtagCore:et}=function Un(U,F,j,pe,Ne){let Ze=function(...et){window[pe].push(arguments)};return window[Ne]&&"function"==typeof window[Ne]&&(Ze=window[Ne]),window[Ne]=function lr(U,F,j,pe){function Ze(){return Ze=(0,R.Z)(function*(et,...Dt){try{if("event"===et){const[Ft,qt]=Dt;yield function Er(U,F,j,pe,Ne){return sr.apply(this,arguments)}(U,F,j,Ft,qt)}else if("config"===et){const[Ft,qt]=Dt;yield function Xt(U,F,j,pe,Ne,Ze){return cn.apply(this,arguments)}(U,F,j,pe,Ft,qt)}else if("consent"===et){const[Ft]=Dt;U("consent","update",Ft)}else if("get"===et){const[Ft,qt,Bt]=Dt;U("get",Ft,qt,Bt)}else if("set"===et){const[Ft]=Dt;U("set",Ft)}else U(et,...Dt)}catch(Ft){Pt.error(Ft)}}),Ze.apply(this,arguments)}return function Ne(et){return Ze.apply(this,arguments)}}(Ze,U,F,j),{gtagCore:Ze,wrappedGtag:window[Ne]}}(Jr,fi,ks,vs,"gtag");Zi=Ze,er=et,_s=!0}return Jr[pe]=function ln(U,F,j,pe,Ne,Ze,et){return Ps.apply(this,arguments)}(U,fi,ks,F,er,vs,j),new Ys(U)}function Bu(){return $.apply(this,arguments)}function $(){return($=(0,R.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const os="@firebase/analytics";!function ju(){(0,Y._registerComponent)(new ve.wA(bn,(F,{options:j})=>Gr(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,Y._registerComponent)(new ve.wA("analytics-internal",function U(F){try{const j=F.getProvider(bn).getImmediate();return{logEvent:(pe,Ne,Ze)=>function dr(U,F,j,pe){U=(0,se.m9)(U),function st(U,F,j,pe,Ne){return yn.apply(this,arguments)}(Zi,Jr[U.app.options.appId],F,j,pe).catch(Ne=>Pt.error(Ne))}(j,pe,Ne,Ze)}}catch(j){throw pn.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,Y.registerVersion)(os,"0.10.0"),(0,Y.registerVersion)(os,"0.10.0","esm2017")}();var Oa=M(1954),Ra=M(2631);const kr=new class In extends Ra.v{}(class Na extends Oa.o{constructor(F,j){super(F,j),this.scheduler=F,this.work=j}schedule(F,j=0){return j>0?super.schedule(F,j):(this.delay=j,this.state=F,this.scheduler.flush(this),this)}execute(F,j){return j>0||this.closed?super.execute(F,j):this._execute(F,j)}requestAsyncId(F,j,pe=0){return null!=pe&&pe>0||null==pe&&this.delay>0?super.requestAsyncId(F,j,pe):(F.flush(this),0)}});var To=M(6321),Xr=M(9397),nl=M(5137),Pa=M(3093);const Fs=new h.GfV("7.6.1"),Wi="__angularfire_symbol__analyticsIsSupportedValue",aa="__angularfire_symbol__analyticsIsSupported",Yn="__angularfire_symbol__remoteConfigIsSupportedValue",Xe="__angularfire_symbol__remoteConfigIsSupported",zt="__angularfire_symbol__messagingIsSupportedValue",Bn="__angularfire_symbol__messagingIsSupported";function hr(U,F,j){if(F){if(1===F.length)return F[0];const Ze=F.filter(et=>et.app===j);if(1===Ze.length)return Ze[0]}return j.container.getProvider(U).getImmediate({optional:!0})}globalThis[aa]||(globalThis[aa]=Bu().then(U=>globalThis[Wi]=U).catch(()=>globalThis[Wi]=!1)),globalThis[Bn]||(globalThis[Bn]=(0,Vn.Gb)().then(U=>globalThis[zt]=U).catch(()=>globalThis[zt]=!1)),globalThis[Xe]||(globalThis[Xe]=ir().then(U=>globalThis[Yn]=U).catch(()=>globalThis[Yn]=!1));const ws=(U,F)=>{const j=F?[F]:(0,B.C6)(),pe=[];return j.forEach(Ne=>{Ne.container.getProvider(U).instances.forEach(et=>{pe.includes(et)||pe.push(et)})}),pe};function Ci(){}class kt{constructor(F,j=kr){this.zone=F,this.delegate=j}now(){return this.delegate.now()}schedule(F,j,pe){const Ne=this.zone;return this.delegate.schedule(function(et){Ne.runGuarded(()=>{F.apply(this,[et])})},j,pe)}}class ua{constructor(F){this.zone=F,this.task=null}call(F,j){const pe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ci,{},Ci,Ci)),j.pipe((0,Xr.b)({next:pe,complete:pe,error:pe})).subscribe(F).add(pe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Qd=(()=>{class U{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new kt(Zone.current)),this.insideAngular=j.run(()=>new kt(Zone.current,To.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return U.\u0275fac=function(j){return new(j||U)(h.LFG(h.R0b))},U.\u0275prov=h.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();function Ir(){const U=globalThis.\u0275AngularFireScheduler;if(!U)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return U}function as(U){return Ir(),function rl(U){return function(j){return(j=j.lift(new ua(U.ngZone))).pipe((0,nl.R)(U.outsideAngular),(0,Pa.Q)(U.insideAngular))}}(Ir())(U)}},6710:(yt,Ae,M)=>{M.d(Ae,{$:()=>Xd,A:()=>z,D:()=>Ee,I:()=>bo,J:()=>$,L:()=>Xe,N:()=>Et,P:()=>ar,Q:()=>ki,R:()=>qp,U:()=>rl,V:()=>Js,W:()=>Es,X:()=>as,Y:()=>pe,Z:()=>Ne,_:()=>qt,a:()=>fl,a0:()=>uE,a1:()=>mr,a2:()=>lT,a3:()=>dT,a4:()=>ev,a5:()=>Mo,a6:()=>$u,a7:()=>th,a8:()=>nh,a9:()=>tv,aA:()=>k,aB:()=>Wa,aC:()=>He,aD:()=>mn,aE:()=>Lo,aF:()=>wl,aG:()=>so,aH:()=>er,aL:()=>zu,aO:()=>F,aa:()=>Tp,ab:()=>nv,ac:()=>Ap,ad:()=>iv,ae:()=>al,af:()=>sv,ai:()=>lE,aj:()=>hT,ak:()=>av,an:()=>So,ao:()=>Gu,aq:()=>lh,ar:()=>hl,as:()=>Ce,at:()=>st,au:()=>Re,av:()=>ee,aw:()=>us,ax:()=>Ch,ay:()=>yn,az:()=>De,b:()=>fh,c:()=>Yi,d:()=>yl,e:()=>Ha,f:()=>El,g:()=>Si,h:()=>Zr,i:()=>Us,j:()=>Ev,k:()=>ao,l:()=>Zp,m:()=>Qa,p:()=>Oe,r:()=>Nt,s:()=>Vi,u:()=>Ai});var h=M(5861),B=M(9058),R=M(7592),Y=M(7582),se=M(7879),ve=M(4537);const Oe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ee=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ye=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ke=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new se.Yd("@firebase/auth");function ft(w,...p){Se.logLevel<=se.in.ERROR&&Se.error(`Auth (${R.SDK_VERSION}): ${w}`,...p)}function ee(w,...p){throw Be(w,...p)}function De(w,...p){return Be(w,...p)}function ue(w,p,g){const E=Object.assign(Object.assign({},Ye()),{[p]:g});return new B.LL("auth","Firebase",E).create(p,{appName:w.name})}function Me(w,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&ee(w,"argument-error"),ue(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(w,...p){if("string"!=typeof w){const g=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(g,...E)}return ke.create(w,...p)}function k(w,p,...g){if(!w)throw Be(p,...g)}function te(w){const p="INTERNAL ASSERTION FAILED: "+w;throw ft(p),new Error(p)}function Ce(w,p){w||te(p)}function it(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Lt(){return"http:"===$t()||"https:"===$t()}function $t(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Jt{constructor(p,g){this.shortDelay=p,this.longDelay=g,Ce(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Ht(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Lt()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zn(w,p){Ce(w.emulator,"Emulator should always be set here");const{url:g}=w.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class ae{static initialize(p,g,E){this.fetchImpl=p,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void te("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void te("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void te("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ce=new Jt(3e4,6e4);function oe(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function Te(w,p,g,E){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,h.Z)(function*(w,p,g,E,T={}){return tt(w,T,(0,h.Z)(function*(){let O={},Q={};E&&("GET"===p?Q=E:O={body:JSON.stringify(E)});const ge=(0,B.xO)(Object.assign({key:w.config.apiKey},Q)).slice(1),Je=yield w._getAdditionalHeaders();return Je["Content-Type"]="application/json",w.languageCode&&(Je["X-Firebase-Locale"]=w.languageCode),ae.fetch()(rn(w,w.config.apiHost,g,ge),Object.assign({method:p,headers:Je,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function tt(w,p,g){return qe.apply(this,arguments)}function qe(){return(qe=(0,h.Z)(function*(w,p,g){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},fe),p);try{const T=new mt(w),O=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const Q=yield O.json();if("needConfirmation"in Q)throw fn(w,"account-exists-with-different-credential",Q);if(O.ok&&!("errorMessage"in Q))return Q;{const ge=O.ok?Q.errorMessage:Q.error.message,[Je,rt]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw fn(w,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Je)throw fn(w,"email-already-in-use",Q);if("USER_DISABLED"===Je)throw fn(w,"user-disabled",Q);const Tt=E[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw ue(w,Tt,rt);ee(w,Tt)}}catch(T){if(T instanceof B.ZR)throw T;ee(w,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function Wt(w,p,g,E){return bt.apply(this,arguments)}function bt(){return(bt=(0,h.Z)(function*(w,p,g,E,T={}){const O=yield Te(w,p,g,E,T);return"mfaPendingCredential"in O&&ee(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function rn(w,p,g,E){const T=`${p}${g}?${E}`;return w.config.emulator?zn(w.config,T):`${w.config.apiScheme}://${T}`}class mt{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(De(this.auth,"network-request-failed")),ce.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fn(w,p,g){const E={appName:w.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const T=De(w,p,E);return T.customData._tokenResponse=g,T}function Ln(){return(Ln=(0,h.Z)(function*(w,p){return Te(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Nn(){return(Nn=(0,h.Z)(function*(w,p){return Te(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Kn(){return(Kn=(0,h.Z)(function*(w,p){return Te(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Vn(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Hr(){return(Hr=(0,h.Z)(function*(w,p=!1){const g=(0,B.m9)(w),E=yield g.getIdToken(p),T=Ct(E);k(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const O="object"==typeof T.firebase?T.firebase:void 0,Q=O?.sign_in_provider;return{claims:T,token:E,authTime:Vn(wt(T.auth_time)),issuedAtTime:Vn(wt(T.iat)),expirationTime:Vn(wt(T.exp)),signInProvider:Q||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(w){return 1e3*Number(w)}function Ct(w){const[p,g,E]=w.split(".");if(void 0===p||void 0===g||void 0===E)return ft("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,B.tV)(g);return T?JSON.parse(T):(ft("Failed to decode base64 JWT payload"),null)}catch(T){return ft("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Pt(w,p){return pr.apply(this,arguments)}function pr(){return(pr=(0,h.Z)(function*(w,p,g=!1){if(g)return p;try{return yield p}catch(E){throw E instanceof B.ZR&&function pn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}class Kt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&p.schedule(!0))}p.schedule()})()}}class gn{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vn(this.lastLoginAt),this.creationTime=Vn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sr(w){return sn.apply(this,arguments)}function sn(){return sn=(0,h.Z)(function*(w){var p;const g=w.auth,E=yield w.getIdToken(),T=yield Pt(w,function ir(w,p){return Kn.apply(this,arguments)}(g,{idToken:E}));k(T?.users.length,g,"internal-error");const O=T.users[0];w._notifyReloadListener(O);const Q=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?function Er(w){return w.map(p=>{var{providerId:g}=p,E=(0,Y._T)(p,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(O.providerUserInfo):[],ge=function cn(w,p){return[...w.filter(E=>!p.some(T=>T.providerId===E.providerId)),...p]}(w.providerData,Q),Tt=!!w.isAnonymous&&!(w.email&&O.passwordHash||ge?.length),Cn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ge,metadata:new gn(O.createdAt,O.lastLoginAt),isAnonymous:Tt};Object.assign(w,Cn)}),sn.apply(this,arguments)}function Xt(){return(Xt=(0,h.Z)(function*(w){const p=(0,B.m9)(w);yield Sr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function lr(){return(lr=(0,h.Z)(function*(w,p){const g=yield tt(w,{},(0,h.Z)(function*(){const E=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:T,apiKey:O}=w.config,Q=rn(w,T,"/v1/token",`key=${O}`),ge=yield w._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",ae.fetch()(Q,{method:"POST",headers:ge,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Un{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){k(p.idToken,"internal-error"),k(typeof p.idToken<"u","internal-error"),k(typeof p.refreshToken<"u","internal-error");const g="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Rt(w){const p=Ct(w);return k(p,"internal-error"),k(typeof p.exp<"u","internal-error"),k(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var E=this;return(0,h.Z)(function*(){return k(!E.accessToken||E.refreshToken,p,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var E=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:O,expiresIn:Q}=yield function sr(w,p){return lr.apply(this,arguments)}(p,g);E.updateTokensAndExpiration(T,O,Number(Q))})()}updateTokensAndExpiration(p,g,E){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,g){const{refreshToken:E,accessToken:T,expirationTime:O}=g,Q=new Un;return E&&(k("string"==typeof E,"internal-error",{appName:p}),Q.refreshToken=E),T&&(k("string"==typeof T,"internal-error",{appName:p}),Q.accessToken=T),O&&(k("number"==typeof O,"internal-error",{appName:p}),Q.expirationTime=O),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Un,this.toJSON())}_performRefresh(){return te("not implemented")}}function me(w,p){k("string"==typeof w||typeof w>"u","internal-error",{appName:p})}class Z{constructor(p){var{uid:g,auth:E,stsTokenManager:T}=p,O=(0,Y._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new gn(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,h.Z)(function*(){const E=yield Pt(g,g.stsTokenManager.getToken(g.auth,p));return k(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(p){return function nr(w){return Hr.apply(this,arguments)}(this,p)}reload(){return function hi(w){return Xt.apply(this,arguments)}(this)}_assign(p){this!==p&&(k(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const g=new Z(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(p){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var E=this;return(0,h.Z)(function*(){let T=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),T=!0),g&&(yield Sr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const g=yield p.getIdToken();return yield Pt(p,function jn(w,p){return Ln.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var E,T,O,Q,ge,Je,rt,Tt;const Cn=null!==(E=g.displayName)&&void 0!==E?E:void 0,yi=null!==(T=g.email)&&void 0!==T?T:void 0,cs=null!==(O=g.phoneNumber)&&void 0!==O?O:void 0,uo=null!==(Q=g.photoURL)&&void 0!==Q?Q:void 0,sg=null!==(ge=g.tenantId)&&void 0!==ge?ge:void 0,ec=null!==(Je=g._redirectEventId)&&void 0!==Je?Je:void 0,pa=null!==(rt=g.createdAt)&&void 0!==rt?rt:void 0,ga=null!==(Tt=g.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:Nl,emailVerified:tc,isAnonymous:ls,providerData:tu,stsTokenManager:co}=g;k(Nl&&co,p,"internal-error");const nc=Un.fromJSON(this.name,co);k("string"==typeof Nl,p,"internal-error"),me(Cn,p.name),me(yi,p.name),k("boolean"==typeof tc,p,"internal-error"),k("boolean"==typeof ls,p,"internal-error"),me(cs,p.name),me(uo,p.name),me(sg,p.name),me(ec,p.name),me(pa,p.name),me(ga,p.name);const Ho=new Z({uid:Nl,auth:p,email:yi,emailVerified:tc,displayName:Cn,isAnonymous:ls,photoURL:uo,phoneNumber:cs,tenantId:sg,stsTokenManager:nc,createdAt:pa,lastLoginAt:ga});return tu&&Array.isArray(tu)&&(Ho.providerData=tu.map(Rl=>Object.assign({},Rl))),ec&&(Ho._redirectEventId=ec),Ho}static _fromIdTokenResponse(p,g,E=!1){return(0,h.Z)(function*(){const T=new Un;T.updateFromServerResponse(g);const O=new Z({uid:g.localId,auth:p,stsTokenManager:T,isAnonymous:E});return yield Sr(O),O})()}}const we=new Map;function He(w){Ce(w instanceof Function,"Expected a class definition");let p=we.get(w);return p?(Ce(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,we.set(w,p),p)}const Et=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,E){var T=this;return(0,h.Z)(function*(){T.storage[g]=E})()}_get(g){var E=this;return(0,h.Z)(function*(){const T=E.storage[g];return void 0===T?null:T})()}_remove(g){var E=this;return(0,h.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return w.type="NONE",w})();function mn(w,p,g){return`firebase:${w}:${p}:${g}`}class G{constructor(p,g,E){this.persistence=p,this.auth=g,this.userKey=E;const{config:T,name:O}=this.auth;this.fullUserKey=mn(this.userKey,T.apiKey,O),this.fullPersistenceKey=mn("persistence",T.apiKey,O),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?Z._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,h.Z)(function*(){if(g.persistence===p)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,E="authUser"){return(0,h.Z)(function*(){if(!g.length)return new G(He(Et),p,E);const T=(yield Promise.all(g.map(function(){var rt=(0,h.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let O=T[0]||He(Et);const Q=mn(E,p.config.apiKey,p.name);let ge=null;for(const rt of g)try{const Tt=yield rt._get(Q);if(Tt){const Cn=Z._fromJSON(p,Tt);rt!==O&&(ge=Cn),O=rt;break}}catch{}const Je=T.filter(rt=>rt._shouldAllowMigration);return O._shouldAllowMigration&&Je.length?(O=Je[0],ge&&(yield O._set(Q,ge.toJSON())),yield Promise.all(g.map(function(){var rt=(0,h.Z)(function*(Tt){if(Tt!==O)try{yield Tt._remove(Q)}catch{}});return function(Tt){return rt.apply(this,arguments)}}())),new G(O,p,E)):new G(O,p,E)})()}}function H(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(J(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(N(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Qe(p))return"Blackberry";if(xt(p))return"Webos";if(P(p))return"Safari";if((p.includes("chrome/")||S(p))&&!p.includes("edge/"))return"Chrome";if(Re(p))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function N(w=(0,B.z$)()){return/firefox\//i.test(w)}function P(w=(0,B.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function S(w=(0,B.z$)()){return/crios\//i.test(w)}function J(w=(0,B.z$)()){return/iemobile/i.test(w)}function Re(w=(0,B.z$)()){return/android/i.test(w)}function Qe(w=(0,B.z$)()){return/blackberry/i.test(w)}function xt(w=(0,B.z$)()){return/webos/i.test(w)}function st(w=(0,B.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function yn(w=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Yt(w=(0,B.z$)()){return st(w)||Re(w)||xt(w)||Qe(w)||/windows phone/i.test(w)||J(w)}function K(w,p=[]){let g;switch(w){case"Browser":g=H((0,B.z$)());break;case"Worker":g=`${H((0,B.z$)())}-${w}`;break;default:g=w}const E=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${R.SDK_VERSION}/${E}`}function nt(){return(nt=(0,h.Z)(function*(w){return(yield Te(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ot(w,p){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,h.Z)(function*(w,p){return Te(w,"GET","/v2/recaptchaConfig",oe(w,p))})).apply(this,arguments)}function ct(w){return void 0!==w&&void 0!==w.getResponse}function Tn(w){return void 0!==w&&void 0!==w.enterprise}class Yr{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function qi(w){return new Promise((p,g)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=p,E.onerror=T=>{const O=De("internal-error");O.customData=T,g(O)},E.type="text/javascript",E.charset="UTF-8",function Qr(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(E)})}function Mr(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Jr{constructor(p){this.type="recaptcha-enterprise",this.auth=er(p)}verify(p="verify",g=!1){var E=this;return(0,h.Z)(function*(){function O(){return O=(0,h.Z)(function*(ge){if(!g){if(null==ge.tenantId&&null!=ge._agentRecaptchaConfig)return ge._agentRecaptchaConfig.siteKey;if(null!=ge.tenantId&&void 0!==ge._tenantRecaptchaConfigs[ge.tenantId])return ge._tenantRecaptchaConfigs[ge.tenantId].siteKey}return new Promise(function(){var Je=(0,h.Z)(function*(rt,Tt){ot(ge,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Cn=>{if(void 0!==Cn.recaptchaKey){const yi=new Yr(Cn);return null==ge.tenantId?ge._agentRecaptchaConfig=yi:ge._tenantRecaptchaConfigs[ge.tenantId]=yi,rt(yi.siteKey)}Tt(new Error("recaptcha Enterprise site key undefined"))}).catch(Cn=>{Tt(Cn)})});return function(rt,Tt){return Je.apply(this,arguments)}}())}),O.apply(this,arguments)}function Q(ge,Je,rt){const Tt=window.grecaptcha;Tn(Tt)?Tt.enterprise.ready(()=>{Tt.enterprise.execute(ge,{action:p}).then(Cn=>{Je(Cn)}).catch(()=>{Je("NO_RECAPTCHA")})}):rt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ge,Je)=>{(function T(ge){return O.apply(this,arguments)})(E.auth).then(rt=>{if(!g&&Tn(window.grecaptcha))Q(rt,ge,Je);else{if(typeof window>"u")return void Je(new Error("RecaptchaVerifier is only supported in browser"));qi("https://www.google.com/recaptcha/enterprise.js?render="+rt).then(()=>{Q(rt,ge,Je)}).catch(Tt=>{Je(Tt)})}}).catch(rt=>{Je(rt)})})})()}}function fi(w,p,g){return ks.apply(this,arguments)}function ks(){return(ks=(0,h.Z)(function*(w,p,g,E=!1){const T=new Jr(w);let O;try{O=yield T.verify(g)}catch{O=yield T.verify(g,!0)}const Q=Object.assign({},p);return Object.assign(Q,E?{captchaResp:O}:{captchaResponse:O}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class vs{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const E=O=>new Promise((Q,ge)=>{try{Q(p(O))}catch(Je){ge(Je)}});E.onAbort=g,this.queue.push(E);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===p)return;const E=[];try{for(const T of g.queue)yield T(p),T.onAbort&&E.push(T.onAbort)}catch(T){E.reverse();for(const O of E)try{O()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class Qs{constructor(p,g,E,T){this.app=p,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=E,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zi(this),this.idTokenSubscription=new Zi(this),this.beforeStateQueue=new vs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(p,g){var E=this;return g&&(this._popupRedirectResolver=He(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,O;if(!E._deleted&&(E.persistenceManager=yield G.create(E,p),!E._deleted)){if(null!==(T=E._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,h.Z)(function*(){var E;const T=yield g.assertedPersistence.getCurrentUser();let O=T,Q=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ge=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,Je=O?._redirectEventId,rt=yield g.tryRedirectSignIn(p);(!ge||ge===Je)&&rt?.user&&(O=rt.user,Q=!0)}if(!O)return g.directlySetCurrentUser(null);if(!O._redirectEventId){if(Q)try{yield g.beforeStateQueue.runMiddleware(O)}catch(ge){O=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ge))}return O?g.reloadAndSetCurrentUserOrClear(O):g.directlySetCurrentUser(null)}return k(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===O._redirectEventId?g.directlySetCurrentUser(O):g.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var g=this;return(0,h.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,h.Z)(function*(){try{yield Sr(p)}catch(E){if("auth/network-request-failed"!==E?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function hn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,h.Z)(function*(){const E=p?(0,B.m9)(p):null;return E&&k(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(p,g=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return p&&k(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(He(p))}))}initializeRecaptchaConfig(){var p=this;return(0,h.Z)(function*(){const g=yield ot(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new Yr(g);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new Jr(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,g,E){return this.registerStateListener(this.authStateSubscription,p,g,E)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,E){return this.registerStateListener(this.idTokenSubscription,p,g,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var E=this;return(0,h.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(g);return null===p?T.removeCurrentUser():T.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const E=p&&He(p)||g._popupRedirectResolver;k(E,g,"argument-error"),g.redirectPersistenceManager=yield G.create(g,[He(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,h.Z)(function*(){var E,T;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===p?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,h.Z)(function*(){if(p===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,E,T){if(this._deleted)return()=>{};const O="function"==typeof g?g:g.next.bind(g),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return k(Q,this,"internal-error"),Q.then(()=>O(this.currentUser)),"function"==typeof g?p.addObserver(g,E,T):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=K(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var g;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const T=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();T&&(E["X-Firebase-Client"]=T);const O=yield p._getAppCheckToken();return O&&(E["X-Firebase-AppCheck"]=O),E})()}_getAppCheckToken(){var p=this;return(0,h.Z)(function*(){var g;const E=yield null===(g=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return E?.error&&function ht(w,...p){Se.logLevel<=se.in.WARN&&Se.warn(`Auth (${R.SDK_VERSION}): ${w}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function er(w){return(0,B.m9)(w)}class Zi{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(g=>this.observer=g)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function bo(w,p,g){const E=er(w);k(E._canInitEmulator,E,"emulator-config-failed"),k(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const T=!!g?.disableWarnings,O=Gr(p),{host:Q,port:ge}=function Ma(w){const p=Gr(w),g=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const O=T[1];return{host:O,port:oa(E.substr(O.length+1))}}{const[O,Q]=E.split(":");return{host:O,port:oa(Q)}}}(p);E.config.emulator={url:`${O}//${Q}${null===ge?"":`:${ge}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:ge,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Bu(){function w(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Gr(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function oa(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class ${constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return te("not implemented")}_getIdTokenResponse(p){return te("not implemented")}_linkToIdToken(p,g){return te("not implemented")}_getReauthenticationResolver(p){return te("not implemented")}}function re(w,p){return xe.apply(this,arguments)}function xe(){return(xe=(0,h.Z)(function*(w,p){return Te(w,"POST","/v1/accounts:resetPassword",oe(w,p))})).apply(this,arguments)}function pt(w,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,h.Z)(function*(w,p){return Te(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function en(){return(en=(0,h.Z)(function*(w,p){return Te(w,"POST","/v1/accounts:update",oe(w,p))})).apply(this,arguments)}function rr(w,p){return dr.apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithPassword",oe(w,p))})).apply(this,arguments)}function xr(w,p){return os.apply(this,arguments)}function os(){return(os=(0,h.Z)(function*(w,p){return Te(w,"POST","/v1/accounts:sendOobCode",oe(w,p))})).apply(this,arguments)}function ju(){return(ju=(0,h.Z)(function*(w,p){return xr(w,p)})).apply(this,arguments)}function Oa(w,p){return Na.apply(this,arguments)}function Na(){return(Na=(0,h.Z)(function*(w,p){return xr(w,p)})).apply(this,arguments)}function Ra(w,p){return In.apply(this,arguments)}function In(){return(In=(0,h.Z)(function*(w,p){return xr(w,p)})).apply(this,arguments)}function zr(){return(zr=(0,h.Z)(function*(w,p){return xr(w,p)})).apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithEmailLink",oe(w,p))})).apply(this,arguments)}function Pa(){return(Pa=(0,h.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithEmailLink",oe(w,p))})).apply(this,arguments)}class Fs extends ${constructor(p,g,E,T=null){super("password",E),this._email=p,this._password=g,this._tenantId=T}static _fromEmailAndPassword(p,g){return new Fs(p,g,"password")}static _fromEmailAndCode(p,g,E=null){return new Fs(p,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,h.Z)(function*(){var E;switch(g.signInMethod){case"password":const T={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const O=yield fi(p,T,"signInWithPassword");return rr(p,O)}return rr(p,T).catch(function(){var O=(0,h.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ge=yield fi(p,T,"signInWithPassword");return rr(p,ge)}return Promise.reject(Q)});return function(Q){return O.apply(this,arguments)}}());case"emailLink":return function To(w,p){return Xr.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:ee(p,"internal-error")}})()}_linkToIdToken(p,g){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return pt(p,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function nl(w,p){return Pa.apply(this,arguments)}(p,{idToken:g,email:E._email,oobCode:E._password});default:ee(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Wi(w,p){return aa.apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithIdp",oe(w,p))})).apply(this,arguments)}class Xe extends ${constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new Xe(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):ee("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:T}=g,O=(0,Y._T)(g,["providerId","signInMethod"]);if(!E||!T)return null;const Q=new Xe(E,T);return Q.idToken=O.idToken||void 0,Q.accessToken=O.accessToken||void 0,Q.secret=O.secret,Q.nonce=O.nonce,Q.pendingToken=O.pendingToken||null,Q}_getIdTokenResponse(p){return Wi(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Wi(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Wi(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,B.xO)(g)}return p}}function Bn(){return(Bn=(0,h.Z)(function*(w,p){return Te(w,"POST","/v1/accounts:sendVerificationCode",oe(w,p))})).apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,p))})).apply(this,arguments)}function Ao(){return(Ao=(0,h.Z)(function*(w,p){const g=yield Wt(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,p));if(g.temporaryProof)throw fn(w,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const hr={USER_NOT_FOUND:"user-not-found"};function Ci(){return(Ci=(0,h.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithPhoneNumber",oe(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),hr)})).apply(this,arguments)}class kt extends ${constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new kt({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new kt({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function ei(w,p){return Ls.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function pi(w,p){return Ao.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ws(w,p){return Ci.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:E,verificationCode:T}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:E,code:T}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:E,phoneNumber:T,temporaryProof:O}=p;return E||g||T||O?new kt({verificationId:g,verificationCode:E,phoneNumber:T,temporaryProof:O}):null}}class Ir{constructor(p){var g,E,T,O,Q,ge;const Je=(0,B.zd)((0,B.pd)(p)),rt=null!==(g=Je.apiKey)&&void 0!==g?g:null,Tt=null!==(E=Je.oobCode)&&void 0!==E?E:null,Cn=function ua(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Je.mode)&&void 0!==T?T:null);k(rt&&Tt&&Cn,"argument-error"),this.apiKey=rt,this.operation=Cn,this.code=Tt,this.continueUrl=null!==(O=Je.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Q=Je.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(ge=Je.tenantId)&&void 0!==ge?ge:null}static parseLink(p){const g=function Qd(w){const p=(0,B.zd)((0,B.pd)(w)).link,g=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,E=(0,B.zd)((0,B.pd)(w)).deep_link_id;return(E?(0,B.zd)((0,B.pd)(E)).link:null)||E||g||p||w}(p);try{return new Ir(g)}catch{return null}}}let ki=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(g,E){return Fs._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const T=Ir.parseLink(E);return k(T,"argument-error"),Fs._fromEmailAndCode(g,T.code,T.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Fi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class gi extends Fi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class as extends gi{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return k("providerId"in g&&"signInMethod"in g,"argument-error"),Xe._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return k(p.idToken||p.accessToken,"argument-error"),Xe._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return as.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return as.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:O,nonce:Q,providerId:ge}=p;if(!E&&!T&&!g&&!O||!ge)return null;try{return new as(ge)._credential({idToken:g,accessToken:E,nonce:Q,pendingToken:O})}catch{return null}}}let rl=(()=>{class w extends gi{constructor(){super("facebook.com")}static credential(g){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return w.credential(g.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Js=(()=>{class w extends gi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:T}=g;if(!E&&!T)return null;try{return w.credential(E,T)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Es=(()=>{class w extends gi{constructor(){super("github.com")}static credential(g){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return w.credential(g.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class F extends ${constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Wi(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Wi(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Wi(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:T,pendingToken:O}=g;return E&&T&&O&&E===T?new F(E,O):null}static _create(p,g){return new F(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pe extends Fi{constructor(p){k(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return pe.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return pe.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=F.fromJSON(p);return k(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:E}=p;if(!g||!E)return null;try{return F._create(E,g)}catch{return null}}}let Ne=(()=>{class w extends gi{constructor(){super("twitter.com")}static credential(g,E){return Xe._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=g;if(!E||!T)return null;try{return w.credential(E,T)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Ze(w,p){return et.apply(this,arguments)}function et(){return(et=(0,h.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signUp",oe(w,p))})).apply(this,arguments)}class Dt{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,E,T=!1){return(0,h.Z)(function*(){const O=yield Z._fromIdTokenResponse(p,E,T),Q=Ft(E);return new Dt({user:O,providerId:Q,_tokenResponse:E,operationType:g})})()}static _forOperation(p,g,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const T=Ft(E);return new Dt({user:p,providerId:T,_tokenResponse:E,operationType:g})})()}}function Ft(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function qt(w){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,h.Z)(function*(w){var p;const g=er(w);if(yield g._initializationPromise,null!==(p=g.currentUser)&&void 0!==p&&p.isAnonymous)return new Dt({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield Ze(g,{returnSecureToken:!0}),T=yield Dt._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Fr extends B.ZR{constructor(p,g,E,T){var O;super(g.code,g.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,Fr.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,g,E,T){return new Fr(p,g,E,T)}}function Qn(w,p,g,E){return("reauthenticate"===p?g._getReauthenticationResolver(w):g._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Fr._fromErrorAndOperation(w,O,p,E):O})}function Mn(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function So(w,p){return Ki.apply(this,arguments)}function Ki(){return Ki=(0,h.Z)(function*(w,p){const g=(0,B.m9)(w);yield Di(!0,g,p);const{providerUserInfo:E}=yield function vn(w,p){return Nn.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),T=Mn(E||[]);return g.providerData=g.providerData.filter(O=>T.has(O.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),Ki.apply(this,arguments)}function Is(w,p){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(w,p,g=!1){const E=yield Pt(w,p._linkToIdToken(w.auth,yield w.getIdToken()),g);return Dt._forOperation(w,"link",E)})).apply(this,arguments)}function Di(w,p,g){return ka.apply(this,arguments)}function ka(){return(ka=(0,h.Z)(function*(w,p,g){yield Sr(p);const T=!1===w?"provider-already-linked":"no-such-provider";k(Mn(p.providerData).has(g)===w,p.auth,T)})).apply(this,arguments)}function Dp(w,p){return qy.apply(this,arguments)}function qy(){return(qy=(0,h.Z)(function*(w,p,g=!1){const{auth:E}=w,T="reauthenticate";try{const O=yield Pt(w,Qn(E,T,p,w),g);k(O.idToken,E,"internal-error");const Q=Ct(O.idToken);k(Q,E,"internal-error");const{sub:ge}=Q;return k(w.uid===ge,E,"user-mismatch"),Dt._forOperation(w,T,O)}catch(O){throw"auth/user-not-found"===O?.code&&ee(E,"user-mismatch"),O}})).apply(this,arguments)}function Zy(w,p){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,h.Z)(function*(w,p,g=!1){const E="signIn",T=yield Qn(w,E,p),O=yield Dt._fromIdTokenResponse(w,E,T);return g||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Xd(w,p){return bp.apply(this,arguments)}function bp(){return(bp=(0,h.Z)(function*(w,p){return Zy(er(w),p)})).apply(this,arguments)}function uE(w,p){return Wy.apply(this,arguments)}function Wy(){return(Wy=(0,h.Z)(function*(w,p){const g=(0,B.m9)(w);return yield Di(!1,g,p.providerId),Is(g,p)})).apply(this,arguments)}function mr(w,p){return Ky.apply(this,arguments)}function Ky(){return(Ky=(0,h.Z)(function*(w,p){return Dp((0,B.m9)(w),p)})).apply(this,arguments)}function Yy(){return(Yy=(0,h.Z)(function*(w,p){return Wt(w,"POST","/v1/accounts:signInWithCustomToken",oe(w,p))})).apply(this,arguments)}function lT(w,p){return Qy.apply(this,arguments)}function Qy(){return Qy=(0,h.Z)(function*(w,p){const g=er(w),E=yield function cT(w,p){return Yy.apply(this,arguments)}(g,{token:p,returnSecureToken:!0}),T=yield Dt._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(T.user),T}),Qy.apply(this,arguments)}class eh{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?Jy._fromServerResponse(p,g):"totpInfo"in g?il._fromServerResponse(p,g):ee(p,"internal-error")}}class Jy extends eh{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new Jy(g)}}class il extends eh{constructor(p){super("totp",p)}static _fromServerResponse(p,g){return new il(g)}}function Fa(w,p,g){var E;k((null===(E=g.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),k(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(k(g.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(k(g.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function dT(w,p,g){return Xy.apply(this,arguments)}function Xy(){return Xy=(0,h.Z)(function*(w,p,g){var E;const T=er(w),O={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Q=yield fi(T,O,"getOobCode",!0);g&&Fa(T,Q,g),yield Oa(T,Q)}else g&&Fa(T,O,g),yield Oa(T,O).catch(function(){var Q=(0,h.Z)(function*(ge){if("auth/missing-recaptcha-token"!==ge.code)return Promise.reject(ge);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Je=yield fi(T,O,"getOobCode",!0);g&&Fa(T,Je,g),yield Oa(T,Je)}});return function(ge){return Q.apply(this,arguments)}}())}),Xy.apply(this,arguments)}function ev(w,p,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,h.Z)(function*(w,p,g){yield re((0,B.m9)(w),{oobCode:p,newPassword:g})})).apply(this,arguments)}function Mo(w,p){return sl.apply(this,arguments)}function sl(){return sl=(0,h.Z)(function*(w,p){yield function En(w,p){return en.apply(this,arguments)}((0,B.m9)(w),{oobCode:p})}),sl.apply(this,arguments)}function $u(w,p){return qr.apply(this,arguments)}function qr(){return(qr=(0,h.Z)(function*(w,p){const g=(0,B.m9)(w),E=yield re(g,{oobCode:p}),T=E.requestType;switch(k(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":k(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":k(E.mfaInfo,g,"internal-error");default:k(E.email,g,"internal-error")}let O=null;return E.mfaInfo&&(O=eh._fromServerResponse(er(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:T}})).apply(this,arguments)}function th(w,p){return bi.apply(this,arguments)}function bi(){return(bi=(0,h.Z)(function*(w,p){const{data:g}=yield $u((0,B.m9)(w),p);return g.email})).apply(this,arguments)}function nh(w,p,g){return rh.apply(this,arguments)}function rh(){return rh=(0,h.Z)(function*(w,p,g){var E;const T=er(w),O={returnSecureToken:!0,email:p,password:g,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const rt=yield fi(T,O,"signUpPassword");Q=Ze(T,rt)}else Q=Ze(T,O).catch(function(){var rt=(0,h.Z)(function*(Tt){if("auth/missing-recaptcha-token"===Tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Cn=yield fi(T,O,"signUpPassword");return Ze(T,Cn)}return Promise.reject(Tt)});return function(Tt){return rt.apply(this,arguments)}}());const ge=yield Q.catch(rt=>Promise.reject(rt)),Je=yield Dt._fromIdTokenResponse(T,"signIn",ge);return yield T._updateCurrentUser(Je.user),Je}),rh.apply(this,arguments)}function tv(w,p,g){return Xd((0,B.m9)(w),ki.credential(p,g))}function Tp(w,p,g){return La.apply(this,arguments)}function La(){return La=(0,h.Z)(function*(w,p,g){var E;const T=er(w),O={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Q(ge,Je){k(Je.handleCodeInApp,T,"argument-error"),Je&&Fa(T,ge,Je)}if(null!==(E=T._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const ge=yield fi(T,O,"getOobCode",!0);Q(ge,g),yield Ra(T,ge)}else Q(O,g),yield Ra(T,O).catch(function(){var ge=(0,h.Z)(function*(Je){if("auth/missing-recaptcha-token"!==Je.code)return Promise.reject(Je);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const rt=yield fi(T,O,"getOobCode",!0);Q(rt,g),yield Ra(T,rt)}});return function(Je){return ge.apply(this,arguments)}}())}),La.apply(this,arguments)}function nv(w,p){const g=Ir.parseLink(p);return"EMAIL_SIGNIN"===g?.operation}function Ap(w,p,g){return ol.apply(this,arguments)}function ol(){return(ol=(0,h.Z)(function*(w,p,g){const E=(0,B.m9)(w),T=ki.credentialWithLink(p,g||it());return k(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Xd(E,T)})).apply(this,arguments)}function ih(){return(ih=(0,h.Z)(function*(w,p){return Te(w,"POST","/v1/accounts:createAuthUri",oe(w,p))})).apply(this,arguments)}function iv(w,p){return Hu.apply(this,arguments)}function Hu(){return Hu=(0,h.Z)(function*(w,p){const E={identifier:p,continueUri:Lt()?it():"http://localhost"},{signinMethods:T}=yield function rv(w,p){return ih.apply(this,arguments)}((0,B.m9)(w),E);return T||[]}),Hu.apply(this,arguments)}function al(w,p){return xo.apply(this,arguments)}function xo(){return xo=(0,h.Z)(function*(w,p){const g=(0,B.m9)(w),T={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&Fa(g.auth,T,p);const{email:O}=yield function xa(w,p){return ju.apply(this,arguments)}(g.auth,T);O!==w.email&&(yield w.reload())}),xo.apply(this,arguments)}function sv(w,p,g){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,h.Z)(function*(w,p,g){const E=(0,B.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};g&&Fa(E.auth,O,g);const{email:Q}=yield function kr(w,p){return zr.apply(this,arguments)}(E.auth,O);Q!==w.email&&(yield w.reload())}),Sp.apply(this,arguments)}function ov(){return(ov=(0,h.Z)(function*(w,p){return Te(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function lE(w,p){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,h.Z)(function*(w,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const E=(0,B.m9)(w),O={idToken:yield E.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},Q=yield Pt(E,function cE(w,p){return ov.apply(this,arguments)}(E.auth,O));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const ge=E.providerData.find(({providerId:Je})=>"password"===Je);ge&&(ge.displayName=E.displayName,ge.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)}),Mp.apply(this,arguments)}function hT(w,p){return sh((0,B.m9)(w),p,null)}function av(w,p){return sh((0,B.m9)(w),null,p)}function sh(w,p,g){return xp.apply(this,arguments)}function xp(){return(xp=(0,h.Z)(function*(w,p,g){const{auth:E}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(O.email=p),g&&(O.password=g);const Q=yield Pt(w,pt(E,O));yield w._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class ul{constructor(p,g,E={}){this.isNewUser=p,this.providerId=g,this.profile=E}}class dE extends ul{constructor(p,g,E,T){super(p,g,E),this.username=T}}class cl extends ul{constructor(p,g){super(p,"facebook.com",g)}}class uv extends dE{constructor(p,g){super(p,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Np extends ul{constructor(p,g){super(p,"google.com",g)}}class oh extends dE{constructor(p,g,E){super(p,"twitter.com",g,E)}}function Gu(w){const{user:p,_tokenResponse:g}=w;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Op(w){var p,g;if(!w)return null;const{providerId:E}=w,T=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const Q=null===(g=null===(p=Ct(w.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(Q)return new ul(O,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new cl(O,T);case"github.com":return new uv(O,T);case"google.com":return new Np(O,T);case"twitter.com":return new oh(O,T,w.screenName||null);case"custom":case"anonymous":return new ul(O,null);default:return new ul(O,E,T)}}(g)}class eo{constructor(p,g,E){this.type=p,this.credential=g,this.auth=E}static _fromIdtoken(p,g){return new eo("enroll",p,g)}static _fromMfaPendingCredential(p){return new eo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,E;if(p?.multiFactorSession){if(null!==(g=p.multiFactorSession)&&void 0!==g&&g.pendingCredential)return eo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return eo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Va{constructor(p,g,E){this.session=p,this.hints=g,this.signInResolver=E}static _fromError(p,g){const E=er(p),T=g.customData._serverResponse,O=(T.mfaInfo||[]).map(ge=>eh._fromServerResponse(E,ge));k(T.mfaPendingCredential,E,"internal-error");const Q=eo._fromMfaPendingCredential(T.mfaPendingCredential);return new Va(Q,O,function(){var ge=(0,h.Z)(function*(Je){const rt=yield Je._process(E,Q);delete T.mfaInfo,delete T.mfaPendingCredential;const Tt=Object.assign(Object.assign({},T),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(g.operationType){case"signIn":const Cn=yield Dt._fromIdTokenResponse(E,g.operationType,Tt);return yield E._updateCurrentUser(Cn.user),Cn;case"reauthenticate":return k(g.user,E,"internal-error"),Dt._forOperation(g.user,g.operationType,Tt);default:ee(E,"internal-error")}});return function(Je){return ge.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,h.Z)(function*(){return g.signInResolver(p)})()}}function lh(w,p){var g;const E=(0,B.m9)(w),T=p;return k(p.customData.operationType,E,"argument-error"),k(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Va._fromError(E,T)}class dl{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>eh._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new dl(p)}getSession(){var p=this;return(0,h.Z)(function*(){return eo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,g){var E=this;return(0,h.Z)(function*(){const T=p,O=yield E.getSession(),Q=yield Pt(E.user,T._process(E.user.auth,O,g));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(p){var g=this;return(0,h.Z)(function*(){const E="string"==typeof p?p:p.uid,T=yield g.user.getIdToken();try{const O=yield Pt(g.user,function Pp(w,p){return Te(w,"POST","/v2/accounts/mfaEnrollment:withdraw",oe(w,p))}(g.user.auth,{idToken:T,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Q})=>Q!==E),yield g.user._updateTokensIfNecessary(O),yield g.user.reload()}catch(O){throw O}})()}}const $n=new WeakMap;function hl(w){const p=(0,B.m9)(w);return $n.has(p)||$n.set(p,dl._fromUser(p)),$n.get(p)}const to="__sak";class Ti{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(to,"1"),this.storage.removeItem(to),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const fh=(()=>{class w extends Ti{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function gE(){const w=(0,B.z$)();return P(w)||st(w)}()&&function gr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Yt(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),O=this.localCache[E];T!==O&&g(E,O,T)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((ge,Je,rt)=>{this.notifyListeners(ge,rt)});const T=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(T);if(g.newValue!==ge)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!E)return}const O=()=>{const ge=this.storage.getItem(T);!E&&this.localCache[T]===ge||this.notifyListeners(T,ge)},Q=this.storage.getItem(T);!function _n(){return(0,B.w1)()&&10===document.documentMode}()||Q===g.newValue||g.newValue===g.oldValue?O():setTimeout(O,10)}notifyListeners(g,E){this.localCache[g]=E;const T=this.listeners[g];if(T)for(const O of Array.from(T))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var T=()=>super._set,O=this;return(0,h.Z)(function*(){yield T().call(O,g,E),O.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,T=this;return(0,h.Z)(function*(){const O=yield E().call(T,g);return T.localCache[g]=JSON.stringify(O),O})()}_remove(g){var E=()=>super._remove,T=this;return(0,h.Z)(function*(){yield E().call(T,g),delete T.localCache[g]})()}}return w.type="LOCAL",w})(),fl=(()=>{class w extends Ti{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return w.type="SESSION",w})();let kp=(()=>{class w{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(O=>O.isListeningto(g));if(E)return E;const T=new w(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,h.Z)(function*(){const T=g,{eventId:O,eventType:Q,data:ge}=T.data,Je=E.handlersMap[Q];if(!Je?.size)return;T.ports[0].postMessage({status:"ack",eventId:O,eventType:Q});const rt=Array.from(Je).map(function(){var Cn=(0,h.Z)(function*(yi){return yi(T.origin,ge)});return function(yi){return Cn.apply(this,arguments)}}()),Tt=yield function Oo(w){return Promise.all(w.map(function(){var p=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return p.apply(this,arguments)}}()))}(rt);T.ports[0].postMessage({status:"done",eventId:O,eventType:Q,response:Tt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function zu(w="",p=10){let g="";for(let E=0;E<p;E++)g+=Math.floor(10*Math.random());return w+g}class fv{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,E=50){var T=this;return(0,h.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Q,ge;return new Promise((Je,rt)=>{const Tt=zu("",20);O.port1.start();const Cn=setTimeout(()=>{rt(new Error("unsupported_event"))},E);ge={messageChannel:O,onMessage(yi){const cs=yi;if(cs.data.eventId===Tt)switch(cs.data.status){case"ack":clearTimeout(Cn),Q=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Je(cs.data.response);break;default:clearTimeout(Cn),clearTimeout(Q),rt(new Error("invalid_response"))}}},T.handlers.add(ge),O.port1.addEventListener("message",ge.onMessage),T.target.postMessage({eventType:p,eventId:Tt,data:g},[O.port2])}).finally(()=>{ge&&T.removeMessageHandler(ge)})})()}}function Or(){return window}function Fp(){return typeof Or().WorkerGlobalScope<"u"&&"function"==typeof Or().importScripts}function pl(){return(pl=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Vp="firebaseLocalStorageDb",Ba="firebaseLocalStorage",No="fbase_key";class qu{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function gh(w,p){return w.transaction([Ba],p?"readwrite":"readonly").objectStore(Ba)}function Up(){const w=indexedDB.open(Vp,1);return new Promise((p,g)=>{w.addEventListener("error",()=>{g(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(Ba,{keyPath:No})}catch(T){g(T)}}),w.addEventListener("success",(0,h.Z)(function*(){const E=w.result;E.objectStoreNames.contains(Ba)?p(E):(E.close(),yield function gv(){const w=indexedDB.deleteDatabase(Vp);return new qu(w).toPromise()}(),p(yield Up()))}))})}function Bp(w,p,g){return Le.apply(this,arguments)}function Le(){return(Le=(0,h.Z)(function*(w,p,g){const E=gh(w,!0).put({[No]:p,value:g});return new qu(E).toPromise()})).apply(this,arguments)}function Cs(){return(Cs=(0,h.Z)(function*(w,p){const g=gh(w,!1).get(p),E=yield new qu(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function mh(w,p){const g=gh(w,!0).delete(p);return new qu(g).toPromise()}const Us=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield Up()),g.db})()}_withRetries(g){var E=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const O=yield E._openDb();return yield g(O)}catch(O){if(T++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return Fp()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=kp._getInstance(function Lp(){return Fp()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(T,O){return{keyProcessed:(yield g._poll()).includes(O.key)}});return function(T,O){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(T,O){return["keyChanged"]});return function(T,O){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var E,T;if(g.activeServiceWorker=yield function Gt(){return pl.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new fv(g.activeServiceWorker);const O=yield g.sender._send("ping",{},800);O&&null!==(E=O[0])&&void 0!==E&&E.fulfilled&&null!==(T=O[0])&&void 0!==T&&T.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function yE(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Up();return yield Bp(g,to,"1"),yield mh(g,to),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(O=>Bp(O,g,E)),T.localCache[g]=E,T.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,h.Z)(function*(){const T=yield E._withRetries(O=>function An(w,p){return Cs.apply(this,arguments)}(O,g));return E.localCache[g]=T,T})()}_remove(g){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(T=>mh(T,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const E=yield g._withRetries(Q=>{const ge=gh(Q,!1).getAll();return new qu(ge).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const T=[],O=new Set;for(const{fbase_key:Q,value:ge}of E)O.add(Q),JSON.stringify(g.localCache[Q])!==JSON.stringify(ge)&&(g.notifyListeners(Q,ge),T.push(Q));for(const Q of Object.keys(g.localCache))g.localCache[Q]&&!O.has(Q)&&(g.notifyListeners(Q,null),T.push(Q));return T})()}notifyListeners(g,E){this.localCache[g]=E;const T=this.listeners[g];if(T)for(const O of Array.from(T))O(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),ni=1e12;class Ro{constructor(p){this.auth=p,this.counter=ni,this._widgets=new Map}render(p,g){const E=this.counter;return this._widgets.set(E,new vv(p,this.auth.name,g||{})),this.counter++,E}reset(p){var g;const E=p||ni;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(p){var g;return(null===(g=this._widgets.get(p||ni))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,h.Z)(function*(){var E;return null===(E=g._widgets.get(p||ni))||void 0===E||E.execute(),""})()}}class vv{constructor(p,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof p?document.getElementById(p):p;k(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Wu(w){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)p.push(g.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bs=Mr("rcb"),vE=new Jt(3e4,6e4);class Gp{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Or().grecaptcha)||void 0===p||!p.render)}load(p,g=""){return k(function _E(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(g),p,"argument-error"),this.shouldResolveImmediately(g)&&ct(Or().grecaptcha)?Promise.resolve(Or().grecaptcha):new Promise((E,T)=>{const O=Or().setTimeout(()=>{T(De(p,"network-request-failed"))},vE.get());Or()[Bs]=()=>{Or().clearTimeout(O),delete Or()[Bs];const ge=Or().grecaptcha;if(!ge||!ct(ge))return void T(De(p,"internal-error"));const Je=ge.render;ge.render=(rt,Tt)=>{const Cn=Je(rt,Tt);return this.counter++,Cn},this.hostLanguage=g,E(ge)},qi(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Bs,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(O),T(De(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!(null===(g=Or().grecaptcha)||void 0===g||!g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zp{load(p){return(0,h.Z)(function*(){return new Ro(p)})()}clearedOneInstance(){}}const yh="recaptcha",_v={theme:"light",type:"image"};class qp{constructor(p,g=Object.assign({},_v),E){this.parameters=g,this.type=yh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=er(E),this.isInvisible="invisible"===this.parameters.size,k(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof p?document.getElementById(p):p;k(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zp:new Gp,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(g)||new Promise(O=>{const Q=ge=>{ge&&(p.tokenChangeListeners.delete(Q),O(ge))};p.tokenChangeListeners.add(Q),p.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){k(!this.parameters.sitekey,this.auth,"argument-error"),k(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),k(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof p)p(g);else if("string"==typeof p){const E=Or()[p];"function"==typeof E&&E(g)}}}assertNotDestroyed(){k(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){k(Lt()&&!Fp(),p.auth,"internal-error"),yield function wE(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function de(w){return nt.apply(this,arguments)}(p.auth);k(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return k(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vh{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=kt._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function Vi(w,p,g){return Po.apply(this,arguments)}function Po(){return(Po=(0,h.Z)(function*(w,p,g){const E=er(w),T=yield ml(E,p,(0,B.m9)(g));return new vh(T,O=>Xd(E,O))})).apply(this,arguments)}function Zp(w,p,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,h.Z)(function*(w,p,g){const E=(0,B.m9)(w);yield Di(!1,E,"phone");const T=yield ml(E.auth,p,(0,B.m9)(g));return new vh(T,O=>uE(E,O))})).apply(this,arguments)}function Nt(w,p,g){return mi.apply(this,arguments)}function mi(){return(mi=(0,h.Z)(function*(w,p,g){const E=(0,B.m9)(w),T=yield ml(E.auth,p,(0,B.m9)(g));return new vh(T,O=>mr(E,O))})).apply(this,arguments)}function ml(w,p,g){return _h.apply(this,arguments)}function _h(){return _h=(0,h.Z)(function*(w,p,g){var E;const T=yield g.verify();try{let O;if(k("string"==typeof T,w,"argument-error"),k(g.type===yh,w,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const Q=O.session;if("phoneNumber"in O)return k("enroll"===Q.type,w,"internal-error"),(yield function hv(w,p){return Te(w,"POST","/v2/accounts/mfaEnrollment:start",oe(w,p))}(w,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{k("signin"===Q.type,w,"internal-error");const ge=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return k(ge,w,"missing-multi-factor-info"),(yield function jp(w,p){return Te(w,"POST","/v2/accounts/mfaSignIn:start",oe(w,p))}(w,{mfaPendingCredential:Q.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function zt(w,p){return Bn.apply(this,arguments)}(w,{phoneNumber:O.phoneNumber,recaptchaToken:T});return Q}}finally{g._reset()}}),_h.apply(this,arguments)}function Ai(w,p){return no.apply(this,arguments)}function no(){return(no=(0,h.Z)(function*(w,p){yield Is((0,B.m9)(w),p)})).apply(this,arguments)}let ar=(()=>{class w{constructor(g){this.providerId=w.PROVIDER_ID,this.auth=er(g)}verifyPhoneNumber(g,E){return ml(this.auth,g,(0,B.m9)(E))}static credential(g,E){return kt._fromVerification(g,E)}static credentialFromResult(g){return w.credentialFromTaggedObject(g)}static credentialFromError(g){return w.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:T}=g;return E&&T?kt._fromTokenResponse(E,T):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ko(w,p){return p?He(p):(k(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class ja extends ${constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Wi(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Wi(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Wi(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function Qt(w){return Zy(w.auth,new ja(w),w.bypassAuthState)}function wv(w){const{auth:p,user:g}=w;return k(g,p,"internal-error"),Dp(g,new ja(w),w.bypassAuthState)}function Wp(w){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,h.Z)(function*(w){const{auth:p,user:g}=w;return k(g,p,"internal-error"),Is(g,new ja(w),w.bypassAuthState)})).apply(this,arguments)}class ro{constructor(p,g,E,T,O=!1){this.auth=p,this.resolver=E,this.user=T,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,h.Z)(function*(E,T){p.pendingPromise={resolve:E,reject:T};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(E,T){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:O,tenantId:Q,error:ge,type:Je}=p;if(ge)return void g.reject(ge);const rt={auth:g.auth,requestUri:E,sessionId:T,tenantId:Q||void 0,postBody:O||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Je)(rt))}catch(Tt){g.reject(Tt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Qt;case"linkViaPopup":case"linkViaRedirect":return Wp;case"reauthViaPopup":case"reauthViaRedirect":return wv;default:ee(this.auth,"internal-error")}}resolve(p){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const io=new Jt(2e3,1e4);function Yi(w,p,g){return $a.apply(this,arguments)}function $a(){return($a=(0,h.Z)(function*(w,p,g){const E=er(w);Me(w,p,Fi);const T=ko(E,g);return new ca(E,"signInViaPopup",p,T).executeNotNull()})).apply(this,arguments)}function Ha(w,p,g){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(w,p,g){const E=(0,B.m9)(w);Me(E.auth,p,Fi);const T=ko(E.auth,g);return new ca(E.auth,"reauthViaPopup",p,T,E).executeNotNull()})).apply(this,arguments)}function yl(w,p,g){return vl.apply(this,arguments)}function vl(){return(vl=(0,h.Z)(function*(w,p,g){const E=(0,B.m9)(w);Me(E.auth,p,Fi);const T=ko(E.auth,g);return new ca(E.auth,"linkViaPopup",p,T,E).executeNotNull()})).apply(this,arguments)}let ca=(()=>{class w extends ro{constructor(g,E,T,O,Q){super(g,E,O,Q),this.provider=T,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const E=yield g.execute();return k(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,h.Z)(function*(){Ce(1===g.filter.length,"Popup operations only handle one event");const E=zu();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(De(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,T;this.pollId=null!==(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,io.get())};g()}}return w.currentPopupAction=null,w})();const Yu="pendingRedirect",js=new Map;class Fo extends ro{constructor(p,g,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,h.Z)(function*(){let E=js.get(g.auth._key());if(!E){try{const O=(yield function _l(w,p){return wh.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;E=()=>Promise.resolve(O)}catch(T){E=()=>Promise.reject(T)}js.set(g.auth._key(),E)}return g.bypassAuthState||js.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(E,p);if("unknown"!==p.type){if(p.eventId){const T=yield E.auth._redirectUserForId(p.eventId);if(T)return E.user=T,g().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function wh(){return(wh=(0,h.Z)(function*(w,p){const g=Eh(p),E=Qi(w);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(g));return yield E._remove(g),T})).apply(this,arguments)}function Qu(w,p){return za.apply(this,arguments)}function za(){return(za=(0,h.Z)(function*(w,p){return Qi(w)._set(Eh(p),"true")})).apply(this,arguments)}function so(){js.clear()}function wl(w,p){js.set(w._key(),p)}function Qi(w){return He(w._redirectPersistence)}function Eh(w){return mn(Yu,w.config.apiKey,w.name)}function El(w,p,g){return function Ji(w,p,g){return Hn.apply(this,arguments)}(w,p,g)}function Hn(){return(Hn=(0,h.Z)(function*(w,p,g){const E=er(w);Me(w,p,Fi),yield E._initializationPromise;const T=ko(E,g);return yield Qu(T,E),T._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Zr(w,p,g){return function qa(w,p,g){return ri.apply(this,arguments)}(w,p,g)}function ri(){return(ri=(0,h.Z)(function*(w,p,g){const E=(0,B.m9)(w);Me(E.auth,p,Fi),yield E.auth._initializationPromise;const T=ko(E.auth,g);yield Qu(T,E.auth);const O=yield Ds(E);return T._openRedirect(E.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function Si(w,p,g){return function Za(w,p,g){return Ju.apply(this,arguments)}(w,p,g)}function Ju(){return(Ju=(0,h.Z)(function*(w,p,g){const E=(0,B.m9)(w);Me(E.auth,p,Fi),yield E.auth._initializationPromise;const T=ko(E.auth,g);yield Di(!1,E,p.providerId),yield Qu(T,E.auth);const O=yield Ds(E);return T._openRedirect(E.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function Ev(w,p){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,h.Z)(function*(w,p){return yield er(w)._initializationPromise,Lo(w,p,!1)})).apply(this,arguments)}function Lo(w,p){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,h.Z)(function*(w,p,g=!1){const E=er(w),T=ko(E,p),Q=yield new Fo(E,T,g).execute();return Q&&!g&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,p)),Q})).apply(this,arguments)}function Ds(w){return Il.apply(this,arguments)}function Il(){return(Il=(0,h.Z)(function*(w){const p=zu(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class Wa{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(g=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Ka(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ih(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var E;if(p.error&&!Ih(p)){const T=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(De(this.auth,T))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const E=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kp(p))}saveEventToCache(p){this.cachedEventUids.add(Kp(p)),this.lastProcessedEventTime=Date.now()}}function Kp(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function Ih({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===p?.code}function Ch(w){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,h.Z)(function*(w,p={}){return Te(w,"GET","/v1/projects",p)})).apply(this,arguments)}const on=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vo=/^https?/;function Uo(){return(Uo=(0,h.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield Ch(w);for(const g of p)try{if(Yp(g))return}catch{}ee(w,"unauthorized-domain")})).apply(this,arguments)}function Yp(w){const p=it(),{protocol:g,hostname:E}=new URL(p);if(w.startsWith("chrome-extension://")){const Q=new URL(w);return""===Q.hostname&&""===E?"chrome-extension:"===g&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&Q.hostname===E}if(!Vo.test(g))return!1;if(on.test(w))return E===w;const T=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const Qp=new Jt(3e4,6e4);function Mi(){const w=Or().___jsl;if(w?.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let g=0;g<w.CP.length;g++)w.CP[g]=null}let Vr=null;const Xp=new Jt(5e3,15e3),Dl="__/auth/iframe",eg="emulator/auth/iframe",tg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ya(w){const p=w.config;k(p.authDomain,w,"auth-domain-config-required");const g=p.emulator?zn(p,eg):`https://${w.config.authDomain}/${Dl}`,E={apiKey:p.apiKey,appName:w.name,v:R.SDK_VERSION},T=bl.get(w.config.apiHost);T&&(E.eid=T);const O=w._getFrameworks();return O.length&&(E.fw=O.join(",")),`${g}?${(0,B.xO)(E).slice(1)}`}function oo(){return oo=(0,h.Z)(function*(w){const p=yield function Bo(w){return Vr=Vr||function Jp(w){return new Promise((p,g)=>{var E,T,O;function Q(){Mi(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Mi(),g(De(w,"network-request-failed"))},timeout:Qp.get()})}if(null!==(T=null===(E=Or().gapi)||void 0===E?void 0:E.iframes)&&void 0!==T&&T.Iframe)p(gapi.iframes.getContext());else{if(null===(O=Or().gapi)||void 0===O||!O.load){const ge=Mr("iframefcb");return Or()[ge]=()=>{gapi.load?Q():g(De(w,"network-request-failed"))},qi(`https://apis.google.com/js/api.js?onload=${ge}`).catch(Je=>g(Je))}Q()}}).catch(p=>{throw Vr=null,p})}(w),Vr}(w),g=Or().gapi;return k(g,w,"internal-error"),p.open({where:document.body,url:Ya(w),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tg,dontclear:!0},E=>new Promise(function(){var T=(0,h.Z)(function*(O,Q){yield E.restyle({setHideOnLeave:!1});const ge=De(w,"network-request-failed"),Je=Or().setTimeout(()=>{Q(ge)},Xp.get());function rt(){Or().clearTimeout(Je),O(E)}E.ping(rt).then(rt,()=>{Q(ge)})});return function(O,Q){return T.apply(this,arguments)}}()))}),oo.apply(this,arguments)}const Xu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fa{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ng="__/auth/handler",IE="emulator/auth/handler",Dh=encodeURIComponent("fac");function us(w,p,g,E,T,O){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,h.Z)(function*(w,p,g,E,T,O){k(w.config.authDomain,w,"auth-domain-config-required"),k(w.config.apiKey,w,"invalid-api-key");const Q={apiKey:w.config.apiKey,appName:w.name,authType:g,redirectUrl:E,v:R.SDK_VERSION,eventId:T};if(p instanceof Fi){p.setDefaultLanguage(w.languageCode),Q.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Tt,Cn]of Object.entries(O||{}))Q[Tt]=Cn}if(p instanceof gi){const Tt=p.getScopes().filter(Cn=>""!==Cn);Tt.length>0&&(Q.scopes=Tt.join(","))}w.tenantId&&(Q.tid=w.tenantId);const ge=Q;for(const Tt of Object.keys(ge))void 0===ge[Tt]&&delete ge[Tt];const Je=yield w._getAppCheckToken(),rt=Je?`#${Dh}=${encodeURIComponent(Je)}`:"";return`${function Ml({config:w}){return w.emulator?zn(w,IE):`https://${w.authDomain}/${ng}`}(w)}?${(0,B.xO)(ge).slice(1)}${rt}`})).apply(this,arguments)}const br="webStorageSupport",ao=class bh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fl,this._completeRedirectFn=Lo,this._overrideRedirectResult=wl}_openPopup(p,g,E,T){var O=this;return(0,h.Z)(function*(){var Q;Ce(null===(Q=O.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const ge=yield us(p,g,E,it(),T);return function EE(w,p,g,E=500,T=600){const O=Math.max((window.screen.availHeight-T)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let ge="";const Je=Object.assign(Object.assign({},Xu),{width:E.toString(),height:T.toString(),top:O,left:Q}),rt=(0,B.z$)().toLowerCase();g&&(ge=S(rt)?"_blank":g),N(rt)&&(p=p||"http://localhost",Je.scrollbars="yes");const Tt=Object.entries(Je).reduce((yi,[cs,uo])=>`${yi}${cs}=${uo},`,"");if(function Vt(w=(0,B.z$)()){var p;return st(w)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(rt)&&"_self"!==ge)return function Al(w,p){const g=document.createElement("a");g.href=w,g.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(p||"",ge),new fa(null);const Cn=window.open(p||"",ge,Tt);k(Cn,w,"popup-blocked");try{Cn.focus()}catch{}return new fa(Cn)}(p,ge,zu())})()}_openRedirect(p,g,E,T){var O=this;return(0,h.Z)(function*(){return yield O._originValidation(p),function ph(w){Or().location.href=w}(yield us(p,g,E,it(),T)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:T,promise:O}=this.eventManagers[g];return T?Promise.resolve(T):(Ce(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(p);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(p){var g=this;return(0,h.Z)(function*(){const E=yield function ha(w){return oo.apply(this,arguments)}(p),T=new Wa(p);return E.register("authEvent",O=>(k(O?.authEvent,p,"invalid-auth-event"),{status:T.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:T},g.iframes[p._key()]=E,T})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(br,{type:br},T=>{var O;const Q=null===(O=T?.[0])||void 0===O?void 0:O[br];void 0!==Q&&g(!!Q),ee(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function da(w){return Uo.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return Yt()||P()||st()}};class rg{constructor(p){this.factorId=p}_process(p,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,E);case"signin":return this._finalizeSignIn(p,g.credential);default:return te("unexpected MultiFactorSessionType")}}}class xi extends rg{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new xi(p)}_finalizeEnroll(p,g,E){return function dh(w,p){return Te(w,"POST","/v2/accounts/mfaEnrollment:finalize",oe(w,p))}(p,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function $p(w,p){return Te(w,"POST","/v2/accounts/mfaSignIn:finalize",oe(w,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qa=(()=>{class w{constructor(){}static assertion(g){return xi._fromCredential(g)}}return w.FACTOR_ID="phone",w})();var Dv="@firebase/auth";class CE{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);g&&(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,B.Pz)("authIdTokenMaxAge"),function Th(w){(0,R._registerComponent)(new ve.wA("auth",(p,{options:g})=>{const E=p.getProvider("app").getImmediate(),T=p.getProvider("heartbeat"),O=p.getProvider("app-check-internal"),{apiKey:Q,authDomain:ge}=E.options;k(Q&&!Q.includes(":"),"invalid-api-key",{appName:E.name});const Je={apiKey:Q,authDomain:ge,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K(w)},rt=new Qs(E,T,O,Je);return function Sa(w,p){const g=p?.persistence||[],E=(Array.isArray(g)?g:[g]).map(He);p?.errorMap&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(E,p?.popupRedirectResolver)}(rt,g),rt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,E)=>{p.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new ve.wA("auth-internal",p=>{const g=er(p.getProvider("auth").getImmediate());return new CE(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(Dv,"0.23.2",function Xi(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,R.registerVersion)(Dv,"0.23.2","esm2017")}("Browser")},9058:(yt,Ae,M)=>{M.d(Ae,{$s:()=>He,BH:()=>ue,G6:()=>zn,L:()=>he,LL:()=>Ge,Pz:()=>De,Sg:()=>Me,UG:()=>te,US:()=>ve,ZB:()=>ne,ZR:()=>Te,aH:()=>ee,b$:()=>Lt,eu:()=>fe,hl:()=>ae,jU:()=>Ce,m9:()=>mn,ne:()=>Pt,pd:()=>Ct,r3:()=>vn,ru:()=>it,tV:()=>V,uI:()=>k,vZ:()=>Vn,w1:()=>Ht,xO:()=>Hr,xb:()=>ir,z$:()=>Be,zI:()=>ce,zd:()=>wt});const Y=function(G){const H=[];let N=0;for(let P=0;P<G.length;P++){let S=G.charCodeAt(P);S<128?H[N++]=S:S<2048?(H[N++]=S>>6|192,H[N++]=63&S|128):55296==(64512&S)&&P+1<G.length&&56320==(64512&G.charCodeAt(P+1))?(S=65536+((1023&S)<<10)+(1023&G.charCodeAt(++P)),H[N++]=S>>18|240,H[N++]=S>>12&63|128,H[N++]=S>>6&63|128,H[N++]=63&S|128):(H[N++]=S>>12|224,H[N++]=S>>6&63|128,H[N++]=63&S|128)}return H},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,H){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const N=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,P=[];for(let S=0;S<G.length;S+=3){const J=G[S],Re=S+1<G.length,Qe=Re?G[S+1]:0,xt=S+2<G.length,st=xt?G[S+2]:0;let _n=(15&Qe)<<2|st>>6,Yt=63&st;xt||(Yt=64,Re||(_n=64)),P.push(N[J>>2],N[(3&J)<<4|Qe>>4],N[_n],N[Yt])}return P.join("")},encodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(G):this.encodeByteArray(Y(G),H)},decodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(G):function(G){const H=[];let N=0,P=0;for(;N<G.length;){const S=G[N++];if(S<128)H[P++]=String.fromCharCode(S);else if(S>191&&S<224){const J=G[N++];H[P++]=String.fromCharCode((31&S)<<6|63&J)}else if(S>239&&S<365){const xt=((7&S)<<18|(63&G[N++])<<12|(63&G[N++])<<6|63&G[N++])-65536;H[P++]=String.fromCharCode(55296+(xt>>10)),H[P++]=String.fromCharCode(56320+(1023&xt))}else{const J=G[N++],Re=G[N++];H[P++]=String.fromCharCode((15&S)<<12|(63&J)<<6|63&Re)}}return H.join("")}(this.decodeStringToByteArray(G,H))},decodeStringToByteArray(G,H){this.init_();const N=H?this.charToByteMapWebSafe_:this.charToByteMap_,P=[];for(let S=0;S<G.length;){const J=N[G.charAt(S++)],Qe=S<G.length?N[G.charAt(S)]:0;++S;const st=S<G.length?N[G.charAt(S)]:64;++S;const Vt=S<G.length?N[G.charAt(S)]:64;if(++S,null==J||null==Qe||null==st||null==Vt)throw new _e;P.push(J<<2|Qe>>4),64!==st&&(P.push(Qe<<4&240|st>>2),64!==Vt&&P.push(st<<6&192|Vt))}return P},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const he=function(G){return function(G){const H=Y(G);return ve.encodeByteArray(H,!0)}(G).replace(/\./g,"")},V=function(G){try{return ve.decodeString(G,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function ne(G,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return H}for(const N in H)!H.hasOwnProperty(N)||!Ue(N)||(G[N]=ne(G[N],H[N]));return G}function Ue(G){return"__proto__"!==G}const Se=()=>{try{return function Ee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=G&&V(G[1]);return H&&JSON.parse(H)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},ee=()=>{var G;return null===(G=Se())||void 0===G?void 0:G.config},De=G=>{var H;return null===(H=Se())||void 0===H?void 0:H[`_${G}`]};class ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,N)=>{this.resolve=H,this.reject=N})}wrapCallback(H){return(N,P)=>{N?this.reject(N):this.resolve(P),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(N):H(N,P))}}}function Me(G,H){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const P=H||"demo-project",S=G.iat||0,J=G.sub||G.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${P}`,aud:P,iat:S,exp:S+3600,auth_time:S,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},G);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Re)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function k(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function te(){var G;const H=null===(G=Se())||void 0===G?void 0:G.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ce(){return"object"==typeof self&&self.self===self}function it(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function Lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ht(){const G=Be();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function zn(){return!te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){try{return"object"==typeof indexedDB}catch{return!1}}function fe(){return new Promise((G,H)=>{try{let N=!0;const P="validate-browser-context-for-indexeddb-analytics-module",S=self.indexedDB.open(P);S.onsuccess=()=>{S.result.close(),N||self.indexedDB.deleteDatabase(P),G(!0)},S.onupgradeneeded=()=>{N=!1},S.onerror=()=>{var J;H((null===(J=S.error)||void 0===J?void 0:J.message)||"")}}catch(N){H(N)}})}function ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Te extends Error{constructor(H,N,P){super(N),this.code=H,this.customData=P,this.name="FirebaseError",Object.setPrototypeOf(this,Te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(H,N,P){this.service=H,this.serviceName=N,this.errors=P}create(H,...N){const P=N[0]||{},S=`${this.service}/${H}`,J=this.errors[H],Re=J?function tt(G,H){return G.replace(qe,(N,P)=>{const S=H[P];return null!=S?String(S):`<${P}?>`})}(J,P):"Error";return new Te(S,`${this.serviceName}: ${Re} (${S}).`,P)}}const qe=/\{\$([^}]+)}/g;function vn(G,H){return Object.prototype.hasOwnProperty.call(G,H)}function ir(G){for(const H in G)if(Object.prototype.hasOwnProperty.call(G,H))return!1;return!0}function Vn(G,H){if(G===H)return!0;const N=Object.keys(G),P=Object.keys(H);for(const S of N){if(!P.includes(S))return!1;const J=G[S],Re=H[S];if(bn(J)&&bn(Re)){if(!Vn(J,Re))return!1}else if(J!==Re)return!1}for(const S of P)if(!N.includes(S))return!1;return!0}function bn(G){return null!==G&&"object"==typeof G}function Hr(G){const H=[];for(const[N,P]of Object.entries(G))Array.isArray(P)?P.forEach(S=>{H.push(encodeURIComponent(N)+"="+encodeURIComponent(S))}):H.push(encodeURIComponent(N)+"="+encodeURIComponent(P));return H.length?"&"+H.join("&"):""}function wt(G){const H={};return G.replace(/^\?/,"").split("&").forEach(P=>{if(P){const[S,J]=P.split("=");H[decodeURIComponent(S)]=decodeURIComponent(J)}}),H}function Ct(G){const H=G.indexOf("?");if(!H)return"";const N=G.indexOf("#",H);return G.substring(H,N>0?N:void 0)}function Pt(G,H){const N=new pr(G,H);return N.subscribe.bind(N)}class pr{constructor(H,N){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=N,this.task.then(()=>{H(this)}).catch(P=>{this.error(P)})}next(H){this.forEachObserver(N=>{N.next(H)})}error(H){this.forEachObserver(N=>{N.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,N,P){let S;if(void 0===H&&void 0===N&&void 0===P)throw new Error("Missing Observer.");S=function Kt(G,H){if("object"!=typeof G||null===G)return!1;for(const N of H)if(N in G&&"function"==typeof G[N])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:N,complete:P},void 0===S.next&&(S.next=gn),void 0===S.error&&(S.error=gn),void 0===S.complete&&(S.complete=gn);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?S.error(this.finalError):S.complete()}catch{}}),this.observers.push(S),J}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let N=0;N<this.observers.length;N++)this.sendOne(N,H)}sendOne(H,N){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{N(this.observers[H])}catch(P){typeof console<"u"&&console.error&&console.error(P)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gn(){}const Un=1e3,me=2,Z=144e5,we=.5;function He(G,H=Un,N=me){const P=H*Math.pow(N,G),S=Math.round(we*P*(Math.random()-.5)*2);return Math.min(Z,P+S)}function mn(G){return G&&G._delegate?G._delegate:G}},359:(yt,Ae,M)=>{var h=M(5879);let B=null;function R(){return B}class se{}const ve=new h.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(he)},providedIn:"platform"})}return n})();const Oe=new h.OlP("Location Initialized");let he=(()=>{class n extends _e{constructor(){super(),this._doc=(0,h.f3M)(ve),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function V(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function z(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ne(n){return n&&"?"!==n[0]?"?"+n:n}let Ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ye)},providedIn:"root"})}return n})();const Ee=new h.OlP("appBaseHref");let Ye=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return V(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ne(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+ne(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+ne(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(_e),h.LFG(Ee,8))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ke=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=V(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+ne(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+ne(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(_e),h.LFG(Ee,8))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})(),We=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(z(ft(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ne(r))}normalize(t){return n.stripTrailingSlash(function ht(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ft(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ne(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static#e=this.normalizeQueryParams=ne;static#t=this.joinWithSlash=V;static#n=this.stripTrailingSlash=z;static#r=this.\u0275fac=function(r){return new(r||n)(h.LFG(Ue))};static#i=this.\u0275prov=h.Yz7({token:n,factory:function(){return function Se(){return new We((0,h.LFG)(Ue))}()},providedIn:"root"})}return n})();function ft(n){return n.replace(/\/index.html$/,"")}function ln(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}let _s=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Sa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.s_b),h.Y36(h.Rgc))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Sa{constructor(){this.$implicit=null,this.ngIf=null}}function bo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let hr=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({})}return n})();function Ir(n){return"server"===n}let gi=(()=>{class n{static#e=this.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new as((0,h.LFG)(ve),window)})}return n})();class as{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function rl(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Es{}class Np extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oh extends Np{static makeCurrent(){!function Y(n){B||(B=n)}(new oh)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function hE(){return Gu=Gu||document.querySelector("base"),Gu?Gu.getAttribute("href"):null}();return null==t?null:function cv(n){ah=ah||document.createElement("a"),ah.setAttribute("href",n);const e=ah.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Gu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ln(document.cookie,e)}}let ah,Gu=null,fE=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();const lv=new h.OlP("EventManagerPlugins");let dv=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new h.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(lv),h.LFG(h.R0b))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();class uh{constructor(e){this._doc=e}}const ch="ng-app-id";let ll=(()=>{class n{constructor(t,r,o,u={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ir(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${ch}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const u=o.get(t);return u.usage+=r,u.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,u=o?.get(r);if(u?.parentNode===t)return o.delete(r),u.removeAttribute(ch),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(ch,this.appId),l}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(o):u.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(ve),h.LFG(h.AFp),h.LFG(h.Ojb,8),h.LFG(h.Lbi))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();const eo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Va=/%COMP%/g,Vs=new h.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function $n(n,e){return e.map(t=>t.replace(Va,n))}let hl=(()=>{class n{constructor(t,r,o,u,l,m,v,C=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=u,this.doc=l,this.platformId=m,this.ngZone=v,this.nonce=C,this.rendererByCompId=new Map,this.platformIsServer=Ir(m),this.defaultRenderer=new to(t,l,v,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===h.ifc.ShadowDom&&(r={...r,encapsulation:h.ifc.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof fh?o.applyToHost(t):o instanceof Li&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.doc,m=this.ngZone,v=this.eventManager,C=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,x=this.platformIsServer;switch(r.encapsulation){case h.ifc.Emulated:u=new fh(v,C,r,this.appId,b,l,m,x);break;case h.ifc.ShadowDom:return new Ua(v,C,t,r,l,m,this.nonce,x);default:u=new Li(v,C,r,b,l,m,x)}o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(dv),h.LFG(ll),h.LFG(h.AFp),h.LFG(Vs),h.LFG(ve),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(h.Ojb))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();class to{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(eo[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(hh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(hh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new h.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=eo[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=eo[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=R().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function hh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ua extends to{constructor(e,t,r,o,u,l,m,v){super(e,u,l,v),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const C=$n(o.id,o.styles);for(const b of C){const x=document.createElement("style");m&&x.setAttribute("nonce",m),x.textContent=b,this.shadowRoot.appendChild(x)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Li extends to{constructor(e,t,r,o,u,l,m,v){super(e,u,l,m),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=v?$n(v,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class fh extends Li{constructor(e,t,r,o,u,l,m,v){const C=o+"-"+r.id;super(e,t,r,u,l,m,v,C),this.contentAttr=function Pp(n){return"_ngcontent-%COMP%".replace(Va,n)}(C),this.hostAttr=function dl(n){return"_nghost-%COMP%".replace(Va,n)}(C)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let mE=(()=>{class n extends uh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(ve))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();const fl=["alt","control","meta","shift"],Oo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let zu=(()=>{class n extends uh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),fl.forEach(C=>{const b=r.indexOf(C);b>-1&&(r.splice(b,1),l+=C+".")}),l+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=o,v.fullKey=l,v}static matchEventFullKeyCode(t,r){let o=Oo[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),fl.forEach(l=>{l!==o&&(0,kp[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(ve))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();const Vp=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Gt(){oh.makeCurrent()},multi:!0},{provide:ve,useFactory:function yE(){return(0,h.RDi)(document),document},deps:[]}]),pv=new h.OlP(""),Ba=[{provide:h.rWj,useClass:class Rp{addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new h.vHH(5103,!1);return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(v){l=l||v,u--,0==u&&r(l)};o.forEach(v=>{v.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],No=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function pl(){return new h.qLn},deps:[]},{provide:lv,useClass:mE,multi:!0,deps:[ve,h.R0b,h.Lbi]},{provide:lv,useClass:zu,multi:!0,deps:[ve]},hl,ll,dv,{provide:h.FYo,useExisting:hl},{provide:Es,useClass:fE,deps:[]},[]];let qu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(pv,12))};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({providers:[...No,...Ba],imports:[hr,h.hGG]})}return n})(),Le=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(ve))};static#t=this.\u0275prov=h.Yz7({token:n,factory:function(r){let o=null;return o=r?new r:function Bp(){return new Le((0,h.LFG)(ve))}(),o},providedIn:"root"})}return n})();typeof window<"u"&&window;var Vi=M(5592),Po=M(4674),tr=M(2459),Nt=M(2096),mi=M(5619);const{isArray:ml}=Array,{getPrototypeOf:_h,prototype:Ai,keys:no}=Object;function ar(n){if(1===n.length){const e=n[0];if(ml(e))return{args:e,keys:null};if(function ko(n){return n&&"object"==typeof n&&_h(n)===Ai}(e)){const t=no(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ja=M(2737),Qt=M(7398);const{isArray:wv}=Array;function Ku(n){return(0,Qt.U)(e=>function Wp(n,e){return wv(e)?n(...e):n(e)}(n,e))}var ro=M(4564);function io(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Yi=M(8251),$a=M(7103);function Ha(...n){const e=(0,ro.yG)(n),t=(0,ro.jO)(n),{args:r,keys:o}=ar(n);if(0===r.length)return(0,tr.D)([],e);const u=new Vi.y(function Ga(n,e,t=ja.y){return r=>{yl(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let v=0;v<o;v++)yl(e,()=>{const C=(0,tr.D)(n[v],e);let b=!1;C.subscribe((0,Yi.x)(r,x=>{u[v]=x,b||(b=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>io(o,l):ja.y));return t?u.pipe(Ku(t)):u}function yl(n,e,t){n?(0,$a.f)(t,n,e):e()}const ca=(0,M(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Yu=M(7537);function Fo(...n){return function js(){return(0,Yu.J)(1)}()((0,tr.D)(n,(0,ro.yG)(n)))}var _l=M(4829);function wh(n){return new Vi.y(e=>{(0,_l.Xf)(n()).subscribe(e)})}var Qu=M(8407);function za(n,e){const t=(0,Po.m)(n)?n:()=>n,r=o=>o.error(t());return new Vi.y(e?o=>e.schedule(r,0,o):r)}var so=M(6232),wl=M(7394),Qi=M(9360);function Eh(){return(0,Qi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Yi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class El extends Vi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Qi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Yi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wl.w0.EMPTY)}return e}refCount(){return Eh()(this)}}var Ji=M(8645),Hn=M(4664);function Zr(n){return n<=0?()=>so.E:(0,Qi.e)((e,t)=>{let r=0;e.subscribe((0,Yi.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function qa(...n){const e=(0,ro.yG)(n);return(0,Qi.e)((t,r)=>{(e?Fo(n,t,e):Fo(n,t)).subscribe(r)})}function ri(n,e){return(0,Qi.e)((t,r)=>{let o=0;t.subscribe((0,Yi.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Si=M(1631);function Za(n){return(0,Qi.e)((e,t)=>{let r=!1;e.subscribe((0,Yi.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Ju(n=Ev){return(0,Qi.e)((e,t)=>{let r=!1;e.subscribe((0,Yi.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Ev(){return new ca}function Lr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ri((o,u)=>n(o,u,r)):ja.y,Zr(1),t?Za(e):Ju(()=>new ca))}function Lo(n,e){return(0,Po.m)(e)?(0,Si.z)(n,e,1):(0,Si.z)(n,1)}var Dr=M(9397);function Ds(n){return(0,Qi.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Yi.x)(t,void 0,void 0,l=>{u=(0,_l.Xf)(n(l,Ds(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function la(n,e){return(0,Qi.e)(function Il(n,e,t,r,o){return(u,l)=>{let m=t,v=e,C=0;u.subscribe((0,Yi.x)(l,b=>{const x=C++;v=m?n(v,b,x):(m=!0,b),r&&l.next(v)},o&&(()=>{m&&l.next(v),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Wa(n){return n<=0?()=>so.E:(0,Qi.e)((e,t)=>{let r=[];e.subscribe((0,Yi.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Ka(n){return(0,Qi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Ch=M(2420);const on="primary",Vo=Symbol("RouteTitle");class da{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Uo(n){return new da(n)}function Yp(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Mi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Jp(n[o],e[o]))return!1;return!0}function Jp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Vr(n){return n.length>0?n[n.length-1]:null}function Bo(n){return function Zp(n){return!!n&&(n instanceof Vi.y||(0,Po.m)(n.lift)&&(0,Po.m)(n.subscribe))}(n)?n:(0,h.QGY)(n)?(0,tr.D)(Promise.resolve(n)):(0,Nt.of)(n)}const Xp={exact:function bl(n,e,t){if(!fa(n.segments,e.segments)||!Xu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!bl(n.children[r],e.children[r],t))return!1;return!0},subset:ha},Dl={exact:function tg(n,e){return Mi(n,e)},subset:function Ya(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Jp(n[t],e[t]))},ignored:()=>!0};function eg(n,e,t){return Xp[t.paths](n.root,e.root,t.matrixParams)&&Dl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ha(n,e,t){return oo(n,e,e.segments,t)}function oo(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!fa(o,t)||e.hasChildren()||!Xu(o,t,r))}if(n.segments.length===t.length){if(!fa(n.segments,t)||!Xu(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!ha(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(fa(n.segments,o)&&Xu(n.segments,o,r)&&n.children[on])&&oo(n.children[on],e,u,r)}}function Xu(n,e,t){return e.every((r,o)=>Dl[t](n[o].parameters,r.parameters))}class jo{constructor(e=new xn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uo(this.queryParams)),this._queryParamMap}toString(){return IE.serialize(this)}}class xn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dh(this)}}class Tl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Uo(this.parameters)),this._parameterMap}toString(){return xi(this)}}function fa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Al=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:function(){return new ng},providedIn:"root"})}return n})();class ng{parse(e){const t=new Xa(e);return new jo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${us(e.root,!0)}`,r=function Cv(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ml(t)}=${Ml(o)}`).join("&"):`${Ml(t)}=${Ml(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function br(n){return encodeURI(n)}(e.fragment)}`:""}`}}const IE=new ng;function Dh(n){return n.segments.map(e=>xi(e)).join("/")}function us(n,e){if(!n.hasChildren())return Dh(n);if(e){const t=n.children[on]?us(n.children[on],!1):"",r=[];return Object.entries(n.children).forEach(([o,u])=>{o!==on&&r.push(`${o}:${us(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function EE(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===on&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==on&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===on?[us(n.children[on],!1)]:[`${o}:${us(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[on]?`${Dh(n)}/${t[0]}`:`${Dh(n)}/(${t.join("//")})`}}function Sl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ml(n){return Sl(n).replace(/%3B/gi,";")}function bh(n){return Sl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ao(n){return decodeURIComponent(n)}function rg(n){return ao(n.replace(/\+/g,"%20"))}function xi(n){return`${bh(n.path)}${function Qa(n){return Object.keys(n).map(e=>`;${bh(e)}=${bh(n[e])}`).join("")}(n.parameters)}`}const Ja=/^[^\/()?;#]+/;function $o(n){const e=n.match(Ja);return e?e[0]:""}const xl=/^[^\/()?;=#]+/,ig=/^[^=?&#]+/,Xi=/^[^&#]+/;class Xa{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xn([],{}):new xn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[on]=new xn(e,t)),r}parseSegment(){const e=$o(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Tl(ao(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Dv(n){const e=n.match(xl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=$o(this.remaining);o&&(r=o,this.capture(r))}e[ao(t)]=ao(r)}parseQueryParam(e){const t=function CE(n){const e=n.match(ig);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Th(n){const e=n.match(Xi);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=rg(t),u=rg(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=$o(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=on);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[on]:new xn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function bv(n){return n.segments.length>0?new xn([],{[on]:n}):n}function Ol(n){const e={};for(const r of Object.keys(n.children)){const u=Ol(n.children[r]);if(r===on&&0===u.segments.length&&u.hasChildren())for(const[l,m]of Object.entries(u.children))e[l]=m;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Tv(n){if(1===n.numberOfChildren&&n.children[on]){const e=n.children[on];return new xn(n.segments.concat(e.segments),e.children)}return n}(new xn(n.segments,e))}function eu(n){return n instanceof jo}function p(n){let e;const o=bv(function t(u){const l={};for(const v of u.children){const C=t(v);l[v.outlet]=C}const m=new xn(u.url,l);return u===n&&(e=m),m}(n.root));return e??o}function g(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return O(o,o,o,t,r);const u=function Je(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ge(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Object.entries(u.outlets).forEach(([v,C])=>{m[v]="string"==typeof C?C.split("/"):C}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new ge(t,e,r)}(e);if(u.toRoot())return O(o,o,new xn([],{}),t,r);const l=function Tt(n,e,t){if(n.isAbsolute)return new rt(e,!0,0);if(!t)return new rt(e,!1,NaN);if(null===t.parent)return new rt(t,!0,0);const r=E(n.commands[0])?0:1;return function Cn(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new h.vHH(4005,!1);o=r.segments.length}return new rt(r,!1,o-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,o,n),m=l.processChildren?uo(l.segmentGroup,l.index,u.commands):cs(l.segmentGroup,l.index,u.commands);return O(o,l.segmentGroup,m,t,r)}function E(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function T(n){return"object"==typeof n&&null!=n&&n.outlets}function O(n,e,t,r,o){let l,u={};r&&Object.entries(r).forEach(([v,C])=>{u[v]=Array.isArray(C)?C.map(b=>`${b}`):`${C}`}),l=n===e?t:Q(n,e,t);const m=bv(Ol(l));return new jo(m,u,o)}function Q(n,e,t){const r={};return Object.entries(n.children).forEach(([o,u])=>{r[o]=u===e?t:Q(u,e,t)}),new xn(n.segments,r)}class ge{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&E(r[0]))throw new h.vHH(4003,!1);const o=r.find(T);if(o&&o!==Vr(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rt{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cs(n,e,t){if(n||(n=new xn([],{})),0===n.segments.length&&n.hasChildren())return uo(n,e,t);const r=function sg(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(T(m))break;const v=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&C&&"object"==typeof C&&void 0===C.outlets){if(!Nl(v,C,l))return u;r+=2}else{if(!Nl(v,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xn(n.segments.slice(0,r.pathIndex),{});return u.children[on]=new xn(n.segments.slice(r.pathIndex),n.children),uo(u,0,o)}return r.match&&0===o.length?new xn(n.segments,{}):r.match&&!n.hasChildren()?ec(n,e,t):r.match?uo(n,0,o):ec(n,e,t)}function uo(n,e,t){if(0===t.length)return new xn(n.segments,{});{const r=function yi(n){return T(n[0])?n[0].outlets:{[on]:n}}(t),o={};if(Object.keys(r).some(u=>u!==on)&&n.children[on]&&1===n.numberOfChildren&&0===n.children[on].segments.length){const u=uo(n.children[on],e,t);return new xn(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(o[u]=cs(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(o[u]=l)}),new xn(n.segments,o)}}function ec(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(T(u)){const v=pa(u.outlets);return new xn(r,v)}if(0===o&&E(t[0])){r.push(new Tl(n.segments[e].path,ga(t[0]))),o++;continue}const l=T(u)?u.outlets[on]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&E(m)?(r.push(new Tl(l,ga(m))),o+=2):(r.push(new Tl(l,{})),o++)}return new xn(r,{})}function pa(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=ec(new xn([],{}),0,r))}),e}function ga(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Nl(n,e,t){return n==t.path&&Mi(e,t.parameters)}const tc="imperative";class ls{constructor(e,t){this.id=e,this.url=t}}class tu extends ls{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class co extends ls{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nc extends ls{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ho extends ls{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class Rl extends ls{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ah extends ls{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DE extends ls{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pT extends ls{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bE extends ls{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nx extends ls{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Rx{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gT{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mT{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Av{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Px{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yT{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Sh{}class AE{constructor(e){this.url=e}}class kx{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new og,this.attachRef=null}}let og=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new kx,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class vT{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Sv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Sv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Pl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Pl(e,this._root).map(t=>t.value)}}function Sv(n,e){if(n===e.value)return e;for(const t of e.children){const r=Sv(n,t);if(r)return r}return null}function Pl(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Pl(n,t);if(r.length)return r.unshift(e),r}return[]}class $s{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function rc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Mv extends vT{constructor(e,t){super(e),this.snapshot=t,Nv(this,e)}toString(){return this.snapshot.toString()}}function xv(n,e){const t=function kl(n,e){const l=new sc([],{},{},"",{},on,e,null,{});return new Mh("",new $s(l,[]))}(0,e),r=new mi.X([new Tl("",{})]),o=new mi.X({}),u=new mi.X({}),l=new mi.X({}),m=new mi.X(""),v=new ic(r,o,l,m,u,on,e,t.root);return v.snapshot=t.root,new Mv(new $s(v,[]),t)}class ic{constructor(e,t,r,o,u,l,m,v){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=u,this.outlet=l,this.component=m,this._futureSnapshot=v,this.title=this.dataSubject?.pipe((0,Qt.U)(C=>C[Vo]))??(0,Nt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qt.U)(e=>Uo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qt.U)(e=>Uo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ov(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function ag(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class sc{get title(){return this.data?.[Vo]}constructor(e,t,r,o,u,l,m,v,C){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=v,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Uo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Mh extends vT{constructor(e,t){super(t),this.url=e,Nv(this,t)}toString(){return SE(this._root)}}function Nv(n,e){e.value._routerState=n,e.children.forEach(t=>Nv(n,t))}function SE(n){const e=n.children.length>0?` { ${n.children.map(SE).join(", ")} } `:"";return`${n.value}${e}`}function Rv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Mi(e.params,t.params)||n.paramsSubject.next(t.params),function Qp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Mi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ug(n,e){const t=Mi(n.params,e.params)&&function Iv(n,e){return fa(n,e)&&n.every((t,r)=>Mi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ug(n.parent,e.parent))}let xh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=on,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(og),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb),this.inputBinder=(0,h.f3M)(cg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,!1);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new _T(t,m,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:v,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]})}return n})();class _T{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ic?this.route:e===og?this.childContexts:this.parent.get(e,t)}}const cg=new h.OlP("");let ME=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=Ha([r.queryParams,r.params,r.data]).pipe((0,Hn.w)(([u,l,m],v)=>(m={...u,...l,...m},0===v?(0,Nt.of)(m):Promise.resolve(m)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,h.qFp)(r.component);if(l)for(const{templateName:m}of l.inputs)t.activatedComponentRef.setInput(m,u[m]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();function Oh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function wT(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Oh(n,r,o);return Oh(n,r)})}(n,e,t);return new $s(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>Oh(n,m)),l}}const r=function ds(n){return new ic(new mi.X(n.url),new mi.X(n.params),new mi.X(n.queryParams),new mi.X(n.fragment),new mi.X(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Oh(n,u));return new $s(r,o)}}const Nh="ngNavigationCancelingError";function Pv(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=eu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=lg(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function lg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Nh]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Fl(n){return n&&n[Nh]}let kv=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(r,o){1&r&&h._UZ(0,"router-outlet")},dependencies:[xh],encapsulation:2})}return n})();function Rh(n){const e=n.children&&n.children.map(Rh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==on&&(t.component=kv),t}function bs(n){return n.outlet||on}function ma(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class NE{constructor(e,t,r,o,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=rc(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Object.values(o).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=rc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=rc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=rc(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Px(u.value.snapshot))}),e.children.length&&this.forwardEvent(new mT(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Rv(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Rv(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=ma(o.snapshot);l.attachRef=null,l.route=o,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Fv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ph{constructor(e,t){this.component=e,this.route=t}}function Ll(n,e,t){const r=n._root;return ac(r,e?e._root:null,t,[r.value])}function oc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function ac(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=rc(e);return n.children.forEach(l=>{(function hg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const v=function MT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!fa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!fa(n.url,e.url)||!Mi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ug(n,e)||!Mi(n.queryParams,e.queryParams);default:return!ug(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new Fv(r)):(u.data=l.data,u._resolvedData=l._resolvedData),ac(n,e,u.component?m?m.children:null:t,r,o),v&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Ph(m.outlet.component,l))}else l&&kh(e,m,o),o.canActivateChecks.push(new Fv(r)),ac(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,m])=>kh(m,t.getContext(l),o)),o}function kh(n,e,t){const r=rc(n),o=n.value;Object.entries(r).forEach(([u,l])=>{kh(l,o.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Ph(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Fh(n){return"function"==typeof n}function kE(n){return n instanceof ca||"EmptyError"===n?.name}const Vl=Symbol("INITIAL_VALUE");function uc(){return(0,Hn.w)(n=>Ha(n.map(e=>e.pipe(Zr(1),qa(Vl)))).pipe((0,Qt.U)(e=>{for(const t of e)if(!0!==t){if(t===Vl)return Vl;if(!1===t||t instanceof jo)return t}return!0}),ri(e=>e!==Vl),Zr(1)))}function Vv(n){return(0,Qu.z)((0,Dr.b)(e=>{if(eu(e))throw Pv(0,e)}),(0,Qt.U)(e=>!0===e))}class Lh{constructor(e){this.segmentGroup=e||null}}class Vh{constructor(e){this.urlTree=e}}function Go(n){return za(new Lh(n))}function Bv(n){return za(new Vh(n))}class BE{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new h.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,Nt.of)(r);if(o.numberOfChildren>1||!o.children[on])return za(new h.vHH(4e3,!1));o=o.children[on]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new jo(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,u])=>{if("string"==typeof u&&u.startsWith(":")){const m=u.substring(1);r[o]=t[m]}else r[o]=u}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Object.entries(t.children).forEach(([m,v])=>{l[m]=this.createSegmentGroup(e,v,r,o)}),new xn(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new h.vHH(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const Uh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bh(n,e,t,r,o){const u=$v(n,e,t);return u.matched?(r=function OE(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Uv(n,e,t,r){const o=e.canMatch;if(!o||0===o.length)return(0,Nt.of)(!0);const u=o.map(l=>{const m=oc(l,n);return Bo(function Lv(n){return n&&Fh(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))});return(0,Nt.of)(u).pipe(uc(),Vv())}(r,e,t).pipe((0,Qt.U)(l=>!0===l?u:{...Uh}))):(0,Nt.of)(u)}function $v(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Uh}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Yp)(t,n,e);if(!o)return{...Uh};const u={};Object.entries(o.posParams??{}).forEach(([m,v])=>{u[m]=v.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function Hv(n,e,t,r){return t.length>0&&function VT(n,e,t){return t.some(r=>jh(n,e,r)&&bs(r)!==on)}(n,t,r)?{segmentGroup:new xn(e,LT(r,new xn(t,n.children))),slicedSegments:[]}:0===t.length&&function jE(n,e,t){return t.some(r=>jh(n,e,r))}(n,t,r)?{segmentGroup:new xn(n.segments,FT(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xn(n.segments,n.children),slicedSegments:t}}function FT(n,e,t,r,o){const u={};for(const l of r)if(jh(n,t,l)&&!o[bs(l)]){const m=new xn([],{});u[bs(l)]=m}return{...o,...u}}function LT(n,e){const t={};t[on]=e;for(const r of n)if(""===r.path&&bs(r)!==on){const o=new xn([],{});t[bs(r)]=o}return t}function jh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class UT{constructor(e,t,r,o,u,l,m){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m,this.allowRedirects=!0,this.applyRedirects=new BE(this.urlSerializer,this.urlTree)}noMatchError(e){return new h.vHH(4002,!1)}recognize(){const e=Hv(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,on).pipe(Ds(t=>{if(t instanceof Vh)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Lh?this.noMatchError(t):t}),(0,Qt.U)(t=>{const r=new sc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},on,this.rootComponentType,null,{}),o=new $s(r,t),u=new Mh("",o),l=function w(n,e,t=null,r=null){return g(p(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,on).pipe(Ds(r=>{throw r instanceof Lh?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Ov(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0)}processChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,tr.D)(o).pipe(Lo(u=>{const l=r.children[u],m=function AT(n,e){const t=n.filter(r=>bs(r)===e);return t.push(...n.filter(r=>bs(r)!==e)),t}(t,u);return this.processSegmentGroup(e,m,l,u)}),la((u,l)=>(u.push(...l),u)),Za(null),function Kp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ri((o,u)=>n(o,u,r)):ja.y,Wa(1),t?Za(e):Ju(()=>new ca))}(),(0,Si.z)(u=>{if(null===u)return Go(r);const l=$E(u);return function BT(n){n.sort((e,t)=>e.value.outlet===on?-1:t.value.outlet===on?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,Nt.of)(l)}))}processSegment(e,t,r,o,u,l){return(0,tr.D)(t).pipe(Lo(m=>this.processSegmentAgainstRoute(m._injector??e,t,m,r,o,u,l).pipe(Ds(v=>{if(v instanceof Lh)return(0,Nt.of)(null);throw v}))),Lr(m=>!!m),Ds(m=>{if(kE(m))return function Gv(n,e,t){return 0===e.length&&!n.children[t]}(r,o,u)?(0,Nt.of)([]):Go(r);throw m}))}processSegmentAgainstRoute(e,t,r,o,u,l,m){return function mg(n,e,t,r){return!!(bs(n)===r||r!==on&&jh(e,t,n))&&("**"===n.path||$v(e,n,t).matched)}(r,o,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,u,l,m):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,u,l):Go(o):Go(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Bv(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Si.z)(l=>{const m=new xn(l,{});return this.processSegment(e,t,m,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:v,remainingSegments:C,positionalParamSegments:b}=$v(t,o,u);if(!m)return Go(t);const x=this.applyRedirects.applyRedirectCommands(v,o.redirectTo,b);return o.redirectTo.startsWith("/")?Bv(x):this.applyRedirects.lineralizeSegments(o,x).pipe((0,Si.z)(q=>this.processSegment(e,r,t,q.concat(C),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u,l){let m;if("**"===r.path){const v=o.length>0?Vr(o).parameters:{},C=new sc(o,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,GE(r),bs(r),r.component??r._loadedComponent??null,r,lc(r));m=(0,Nt.of)({snapshot:C,consumedSegments:[],remainingSegments:[]}),t.children={}}else m=Bh(t,r,o,e).pipe((0,Qt.U)(({matched:v,consumedSegments:C,remainingSegments:b,parameters:x})=>v?{snapshot:new sc(C,x,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,GE(r),bs(r),r.component??r._loadedComponent??null,r,lc(r)),consumedSegments:C,remainingSegments:b}:null));return m.pipe((0,Hn.w)(v=>null===v?Go(t):this.getChildConfig(e=r._injector??e,r,o).pipe((0,Hn.w)(({routes:C})=>{const b=r._loadedInjector??e,{snapshot:x,consumedSegments:q,remainingSegments:X}=v,{segmentGroup:be,slicedSegments:Fe}=Hv(t,q,X,C);if(0===Fe.length&&be.hasChildren())return this.processChildren(b,C,be).pipe((0,Qt.U)(It=>null===It?null:[new $s(x,It)]));if(0===C.length&&0===Fe.length)return(0,Nt.of)([new $s(x,[])]);const Ve=bs(r)===u;return this.processSegment(b,C,be,Fe,Ve?on:u,!0).pipe((0,Qt.U)(It=>[new $s(x,It)]))}))))}getChildConfig(e,t,r){return t.children?(0,Nt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Nt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function UE(n,e,t,r){const o=e.canLoad;if(void 0===o||0===o.length)return(0,Nt.of)(!0);const u=o.map(l=>{const m=oc(l,n);return Bo(function OT(n){return n&&Fh(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))});return(0,Nt.of)(u).pipe(uc(),Vv())}(e,t,r).pipe((0,Si.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Dr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function gg(n){return za(lg(!1,3))}())):(0,Nt.of)({routes:[],injector:e})}}function Bx(n){const e=n.value.routeConfig;return e&&""===e.path}function $E(n){const e=[],t=new Set;for(const r of n){if(!Bx(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=$E(r.children);e.push(new $s(r.value,o))}return e.filter(r=>!t.has(r))}function GE(n){return n.data||{}}function lc(n){return n.resolve||{}}function KE(n){return"string"==typeof n.title||null===n.title}function qv(n){return(0,Hn.w)(e=>{const t=n(e);return t?(0,tr.D)(t).pipe((0,Qt.U)(()=>e)):(0,Nt.of)(e)})}const Bl=new h.OlP("ROUTES");let Zv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,Nt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Bo(t.loadComponent()).pipe((0,Qt.U)(jl),(0,Dr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Ka(()=>{this.componentLoaders.delete(t)})),o=new El(r,()=>new Ji.x).pipe(Eh());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,Nt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function jT(n,e,t,r){return Bo(n.loadChildren()).pipe((0,Qt.U)(jl),(0,Si.z)(o=>o instanceof h.YKP||Array.isArray(o)?(0,Nt.of)(o):(0,tr.D)(e.compileModuleAsync(o))),(0,Qt.U)(o=>{r&&r(n);let u,l,m=!1;return Array.isArray(o)?(l=o,!0):(u=o.create(t).injector,l=u.get(Bl,[],{optional:!0,self:!0}).flat()),{routes:l.map(Rh),injector:u}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Ka(()=>{this.childrenLoaders.delete(r)})),l=new El(u,()=>new Ji.x).pipe(Eh());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jl(n){return function nu(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let vg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ji.x,this.transitionAbortSubject=new Ji.x,this.configLoader=(0,h.f3M)(Zv),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(Al),this.rootContexts=(0,h.f3M)(og),this.inputBindingEnabled=null!==(0,h.f3M)(cg,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Nt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new Rx(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new TE(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,o){return this.transitions=new mi.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:tc,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ri(u=>0!==u.id),(0,Qt.U)(u=>({...u,extractedUrl:t.urlHandlingStrategy.extract(u.rawUrl)})),(0,Hn.w)(u=>{this.currentTransition=u;let l=!1,m=!1;return(0,Nt.of)(u).pipe((0,Dr.b)(v=>{this.currentNavigation={id:v.id,initialUrl:v.rawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Hn.w)(v=>{const C=v.currentBrowserUrl.toString(),b=!t.navigated||v.extractedUrl.toString()!==C||C!==v.currentUrlTree.toString();if(!b&&"reload"!==(v.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const q="";return this.events.next(new Ho(v.id,this.urlSerializer.serialize(v.rawUrl),q,0)),v.resolve(null),so.E}if(t.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return(0,Nt.of)(v).pipe((0,Hn.w)(q=>{const X=this.transitions?.getValue();return this.events.next(new tu(q.id,this.urlSerializer.serialize(q.extractedUrl),q.source,q.restoredState)),X!==this.transitions?.getValue()?so.E:Promise.resolve(q)}),function yg(n,e,t,r,o,u){return(0,Si.z)(l=>function Ul(n,e,t,r,o,u,l="emptyOnly"){return new UT(n,e,t,r,o,l,u).recognize()}(n,e,t,r,l.extractedUrl,o,u).pipe((0,Qt.U)(({state:m,tree:v})=>({...l,targetSnapshot:m,urlAfterRedirects:v}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Dr.b)(q=>{u.targetSnapshot=q.targetSnapshot,u.urlAfterRedirects=q.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:q.urlAfterRedirects};const X=new Ah(q.id,this.urlSerializer.serialize(q.extractedUrl),this.urlSerializer.serialize(q.urlAfterRedirects),q.targetSnapshot);this.events.next(X)}));if(b&&t.urlHandlingStrategy.shouldProcessUrl(v.currentRawUrl)){const{id:q,extractedUrl:X,source:be,restoredState:Fe,extras:Ve}=v,It=new tu(q,this.urlSerializer.serialize(X),be,Fe);this.events.next(It);const Ut=xv(0,this.rootComponentType).snapshot;return this.currentTransition=u={...v,targetSnapshot:Ut,urlAfterRedirects:X,extras:{...Ve,skipLocationChange:!1,replaceUrl:!1}},(0,Nt.of)(u)}{const q="";return this.events.next(new Ho(v.id,this.urlSerializer.serialize(v.extractedUrl),q,1)),v.resolve(null),so.E}}),(0,Dr.b)(v=>{const C=new DE(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(C)}),(0,Qt.U)(v=>(this.currentTransition=u={...v,guards:Ll(v.targetSnapshot,v.currentSnapshot,this.rootContexts)},u)),function cc(n,e){return(0,Si.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,Nt.of)({...t,guardsResult:!0}):function FE(n,e,t,r){return(0,tr.D)(n).pipe((0,Si.z)(o=>function VE(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,Nt.of)(!0);const l=u.map(m=>{const v=ma(e)??o,C=oc(m,v);return Bo(function fg(n){return n&&Fh(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):v.runInContext(()=>C(n,e,t,r))).pipe(Lr())});return(0,Nt.of)(l).pipe(uc())}(o.component,o.route,t,e,r)),Lr(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Si.z)(m=>m&&function xT(n){return"boolean"==typeof n}(m)?function LE(n,e,t,r){return(0,tr.D)(e).pipe(Lo(o=>Fo(function Ux(n,e){return null!==n&&e&&e(new gT(n)),(0,Nt.of)(!0)}(o.route.parent,r),function PT(n,e){return null!==n&&e&&e(new Av(n)),(0,Nt.of)(!0)}(o.route,r),function kT(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function dg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>wh(()=>{const m=l.guards.map(v=>{const C=ma(l.node)??t,b=oc(v,C);return Bo(function RE(n){return n&&Fh(n.canActivateChild)}(b)?b.canActivateChild(r,n):C.runInContext(()=>b(r,n))).pipe(Lr())});return(0,Nt.of)(m).pipe(uc())}));return(0,Nt.of)(u).pipe(uc())}(n,o.path,t),function pg(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Nt.of)(!0);const o=r.map(u=>wh(()=>{const l=ma(e)??t,m=oc(u,l);return Bo(function NT(n){return n&&Fh(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Lr())}));return(0,Nt.of)(o).pipe(uc())}(n,o.route,t))),Lr(o=>!0!==o,!0))}(r,u,n,e):(0,Nt.of)(m)),(0,Qt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,v=>this.events.next(v)),(0,Dr.b)(v=>{if(u.guardsResult=v.guardsResult,eu(v.guardsResult))throw Pv(0,v.guardsResult);const C=new pT(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.events.next(C)}),ri(v=>!!v.guardsResult||(this.cancelNavigationTransition(v,"",3),!1)),qv(v=>{if(v.guards.canActivateChecks.length)return(0,Nt.of)(v).pipe((0,Dr.b)(C=>{const b=new bE(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(b)}),(0,Hn.w)(C=>{let b=!1;return(0,Nt.of)(C).pipe(function zv(n,e){return(0,Si.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,Nt.of)(t);let u=0;return(0,tr.D)(o).pipe(Lo(l=>function zE(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!KE(o)&&(u[Vo]=o.title),function qE(n,e,t,r){const o=function ZE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,Nt.of)({});const u={};return(0,tr.D)(o).pipe((0,Si.z)(l=>function WE(n,e,t,r){const o=ma(e)??r,u=oc(n,o);return Bo(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Lr(),(0,Dr.b)(m=>{u[l]=m}))),Wa(1),function Ih(n){return(0,Qt.U)(()=>n)}(u),Ds(l=>kE(l)?so.E:za(l)))}(u,n,e,r).pipe((0,Qt.U)(l=>(n._resolvedData=l,n.data=Ov(n,t).resolve,o&&KE(o)&&(n.data[Vo]=o.title),null)))}(l.route,r,n,e)),(0,Dr.b)(()=>u++),Wa(1),(0,Si.z)(l=>u===o.length?(0,Nt.of)(t):so.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Dr.b)({next:()=>b=!0,complete:()=>{b||this.cancelNavigationTransition(C,"",2)}}))}),(0,Dr.b)(C=>{const b=new Nx(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(b)}))}),qv(v=>{const C=b=>{const x=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&x.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,Dr.b)(q=>{b.component=q}),(0,Qt.U)(()=>{})));for(const q of b.children)x.push(...C(q));return x};return Ha(C(v.targetSnapshot.root)).pipe(Za(),Zr(1))}),qv(()=>this.afterPreactivation()),(0,Qt.U)(v=>{const C=function xE(n,e,t){const r=Oh(n,e._root,t?t._root:void 0);return new Mv(r,e)}(t.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return this.currentTransition=u={...v,targetRouterState:C},u}),(0,Dr.b)(()=>{this.events.next(new Sh)}),((n,e,t,r)=>(0,Qt.U)(o=>(new NE(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,v=>this.events.next(v),this.inputBindingEnabled),Zr(1),(0,Dr.b)({next:v=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new co(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects))),t.titleStrategy?.updateTitle(v.targetRouterState.snapshot),v.resolve(!0)},complete:()=>{l=!0}}),function Cl(n){return(0,Qi.e)((e,t)=>{(0,_l.Xf)(n).subscribe((0,Yi.x)(t,()=>t.complete(),Ch.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,Dr.b)(v=>{throw v}))),Ka(()=>{l||m||this.cancelNavigationTransition(u,"",1),this.currentNavigation?.id===u.id&&(this.currentNavigation=null)}),Ds(v=>{if(m=!0,Fl(v))this.events.next(new nc(u.id,this.urlSerializer.serialize(u.extractedUrl),v.message,v.cancellationCode)),function Ui(n){return Fl(n)&&eu(n.url)}(v)?this.events.next(new AE(v.url)):u.resolve(!1);else{this.events.next(new Rl(u.id,this.urlSerializer.serialize(u.extractedUrl),v,u.targetSnapshot??void 0));try{u.resolve(t.errorHandler(v))}catch(C){u.reject(C)}}return so.E}))}))}cancelNavigationTransition(t,r,o){const u=new nc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $T(n){return n!==tc}let HT=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===on);return r}getResolvedTitleForRoute(t){return t.data[Vo]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(jx)},providedIn:"root"})}return n})(),jx=(()=>{class n extends HT{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(Le))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$x=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(YE)},providedIn:"root"})}return n})();class Hx{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let YE=(()=>{class n extends Hx{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=h.n5z(n)))(o||n)}}();static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const _g=new h.OlP("",{providedIn:"root",factory:()=>({})});let GT=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(zT)},providedIn:"root"})}return n})(),zT=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $h=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}($h||{});function wg(n,e){n.events.pipe(ri(t=>t instanceof co||t instanceof nc||t instanceof Rl||t instanceof Ho),(0,Qt.U)(t=>t instanceof co||t instanceof Ho?$h.COMPLETE:t instanceof nc&&(0===t.code||1===t.code)?$h.REDIRECTING:$h.FAILED),ri(t=>t!==$h.REDIRECTING),Zr(1)).subscribe(()=>{e()})}function ya(n){throw n}function Hh(n,e,t){return e.parse("/")}const QE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this._events=new Ji.x,this.options=(0,h.f3M)(_g,{optional:!0})||{},this.pendingTasks=(0,h.f3M)(h.HDt),this.errorHandler=this.options.errorHandler||ya,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Hh,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(GT),this.routeReuseStrategy=(0,h.f3M)($x),this.titleStrategy=(0,h.f3M)(HT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,h.f3M)(Bl,{optional:!0})?.flat()??[],this.navigationTransitions=(0,h.f3M)(vg),this.urlSerializer=(0,h.f3M)(Al),this.location=(0,h.f3M)(We),this.componentInputBindingEnabled=!!(0,h.f3M)(cg,{optional:!0}),this.eventsSubscription=new wl.w0,this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new jo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xv(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(qT(r)&&this._events.next(r));if(r instanceof tu)$T(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof Ho)this.rawUrlTree=o.rawUrl;else if(r instanceof Ah){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const u=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(u,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof Sh)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof nc)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof AE){const u=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||$T(o.source)};this.scheduleNavigation(u,tc,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof Rl&&this.restoreHistory(o,!0),r instanceof co&&(this.navigated=!0),qT(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),tc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const v={...o};delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Rh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:v}=r,C=v?this.currentUrlTree.fragment:l;let x,b=null;switch(m){case"merge":b={...this.currentUrlTree.queryParams,...u};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=u||null}null!==b&&(b=this.removeEmptyProps(b));try{x=p(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),x=this.currentUrlTree.root}return g(x,t,b,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=eu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,tc,null,r)}navigate(t,r={skipLocationChange:!1}){return function Gx(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new h.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...QE}:!1===r?{...JE}:r,eu(t))return eg(this.currentUrlTree,t,o);const u=this.parseUrl(t);return eg(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,v,C;l?(m=l.resolve,v=l.reject,C=l.promise):C=new Promise((x,q)=>{m=x,v=q});const b=this.pendingTasks.add();return wg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:u,resolve:m,reject:v,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qT(n){return!(n instanceof Sh||n instanceof AE)}let Wv=(()=>{class n{constructor(t,r,o,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=l,this.locationStrategy=m,this.href=null,this.commands=null,this.onChanges=new Ji.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const v=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===v||"area"===v,this.isAnchorElement?this.subscription=t.events.subscribe(C=>{C instanceof co&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,u=this.el.nativeElement;null!==r?o.setAttribute(u,t,r):o.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(vi),h.Y36(ic),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Ue))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){1&r&&h.NdJ("click",function(l){return o.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&r&&h.uIk("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",h.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",h.VuI],replaceUrl:["replaceUrl","replaceUrl",h.VuI],routerLink:"routerLink"},standalone:!0,features:[h.Xq5,h.TTD]})}return n})(),Eg=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,o,u,l){this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(m=>{m instanceof co&&this.update()})}ngAfterContentInit(){(0,Nt.of)(this.links.changes,(0,Nt.of)(null)).pipe((0,Yu.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,tr.D)(t).pipe((0,Yu.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Kv(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(vi),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(Wv,8))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,o,u){if(1&r&&h.Suo(u,Wv,5),2&r){let l;h.iGM(l=h.CRH())&&(o.links=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[h.TTD]})}return n})();class ZT{}let KT=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ri(t=>t instanceof co),Lo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&o.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,tr.D)(o).pipe((0,Yu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,Nt.of)(null);const u=o.pipe((0,Si.z)(l=>null===l?(0,Nt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,tr.D)([u,l]).pipe((0,Yu.J)())}return u})}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(vi),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(ZT),h.LFG(Zv))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Yv=new h.OlP("");let XE=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof tu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof co?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ho&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yT&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new yT(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){h.$Z()};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();function Hs(n,e){return{\u0275kind:n,\u0275providers:e}}function tI(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(vi),o=n.get(nI);1===n.get(zh)&&r.initialNavigation(),n.get(iI,null,h.XFs.Optional)?.setUpPreloading(),n.get(Yv,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const nI=new h.OlP("",{factory:()=>new Ji.x}),zh=new h.OlP("",{providedIn:"root",factory:()=>1}),iI=new h.OlP("");function JT(n){return Hs(0,[{provide:iI,useExisting:KT},{provide:ZT,useExisting:n}])}const $l=new h.OlP("ROUTER_FORROOT_GUARD"),sI=[We,{provide:Al,useClass:ng},vi,og,{provide:ic,useFactory:function Qv(n){return n.routerState.root},deps:[vi]},Zv,[]];function oI(){return new h.PXZ("Router",vi)}let Ig=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[sI,[],{provide:Bl,multi:!0,useValue:t},{provide:$l,useFactory:uI,deps:[[vi,new h.FiY,new h.tp0]]},{provide:_g,useValue:r||{}},r?.useHash?{provide:Ue,useClass:ke}:{provide:Ue,useClass:Ye},{provide:Yv,useFactory:()=>{const n=(0,h.f3M)(gi),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(_g),r=(0,h.f3M)(vg),o=(0,h.f3M)(Al);return t.scrollOffset&&n.setOffset(t.scrollOffset),new XE(o,r,n,e,t)}},r?.preloadingStrategy?JT(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:oI},r?.initialNavigation?Cg(r):[],r?.bindToComponentInputs?Hs(8,[ME,{provide:cg,useExisting:ME}]).\u0275providers:[],[{provide:tA,useFactory:tI},{provide:h.tb,multi:!0,useExisting:tA}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Bl,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG($l,8))};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({})}return n})();function uI(n){return"guarded"}function Cg(n){return["disabled"===n.initialNavigation?Hs(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(vi);return()=>{e.setUpLocationChangeListener()}}},{provide:zh,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Hs(2,[{provide:zh,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Oe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(vi),u=e.get(nI);wg(o,()=>{r(!0)}),e.get(vg).afterPreactivation=()=>(r(!0),u.closed?(0,Nt.of)(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const tA=new h.OlP("");let e_=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["home-page-page"]],decls:128,vars:0,template:function(r,o){1&r&&(h.TgZ(0,"p"),h._uU(1,"home works!"),h.qZA(),h.TgZ(2,"p"),h._uU(3,"home works!"),h.qZA(),h.TgZ(4,"p"),h._uU(5,"home works!"),h.qZA(),h.TgZ(6,"p"),h._uU(7,"home works!"),h.qZA(),h.TgZ(8,"p"),h._uU(9,"home works!"),h.qZA(),h.TgZ(10,"p"),h._uU(11,"home works!"),h.qZA(),h.TgZ(12,"p"),h._uU(13,"home works!"),h.qZA(),h.TgZ(14,"p"),h._uU(15,"home works!"),h.qZA(),h.TgZ(16,"p"),h._uU(17,"home works!"),h.qZA(),h.TgZ(18,"p"),h._uU(19,"home works!"),h.qZA(),h.TgZ(20,"p"),h._uU(21,"home works!"),h.qZA(),h.TgZ(22,"p"),h._uU(23,"home works!"),h.qZA(),h.TgZ(24,"p"),h._uU(25,"home works!"),h.qZA(),h.TgZ(26,"p"),h._uU(27,"home works!"),h.qZA(),h.TgZ(28,"p"),h._uU(29,"home works!"),h.qZA(),h.TgZ(30,"p"),h._uU(31,"home works!"),h.qZA(),h.TgZ(32,"p"),h._uU(33,"home works!"),h.qZA(),h.TgZ(34,"p"),h._uU(35,"home works!"),h.qZA(),h.TgZ(36,"p"),h._uU(37,"home works!"),h.qZA(),h.TgZ(38,"p"),h._uU(39,"home works!"),h.qZA(),h.TgZ(40,"p"),h._uU(41,"home works!"),h.qZA(),h.TgZ(42,"p"),h._uU(43,"home works!"),h.qZA(),h.TgZ(44,"p"),h._uU(45,"home works!"),h.qZA(),h.TgZ(46,"p"),h._uU(47,"home works!"),h.qZA(),h.TgZ(48,"p"),h._uU(49,"home works!"),h.qZA(),h.TgZ(50,"p"),h._uU(51,"home works!"),h.qZA(),h.TgZ(52,"p"),h._uU(53,"home works!"),h.qZA(),h.TgZ(54,"p"),h._uU(55,"home works!"),h.qZA(),h.TgZ(56,"p"),h._uU(57,"home works!"),h.qZA(),h.TgZ(58,"p"),h._uU(59,"home works!"),h.qZA(),h.TgZ(60,"p"),h._uU(61,"home works!"),h.qZA(),h.TgZ(62,"p"),h._uU(63,"home works!"),h.qZA(),h.TgZ(64,"p"),h._uU(65,"home works!"),h.qZA(),h.TgZ(66,"p"),h._uU(67,"home works!"),h.qZA(),h.TgZ(68,"p"),h._uU(69,"home works!"),h.qZA(),h.TgZ(70,"p"),h._uU(71,"home works!"),h.qZA(),h.TgZ(72,"p"),h._uU(73,"home works!"),h.qZA(),h.TgZ(74,"p"),h._uU(75,"home works!"),h.qZA(),h.TgZ(76,"p"),h._uU(77,"home works!"),h.qZA(),h.TgZ(78,"p"),h._uU(79,"home works!"),h.qZA(),h.TgZ(80,"p"),h._uU(81,"home works!"),h.qZA(),h.TgZ(82,"p"),h._uU(83,"home works!"),h.qZA(),h.TgZ(84,"p"),h._uU(85,"home works!"),h.qZA(),h.TgZ(86,"p"),h._uU(87,"home works!"),h.qZA(),h.TgZ(88,"p"),h._uU(89,"home works!"),h.qZA(),h.TgZ(90,"p"),h._uU(91,"home works!"),h.qZA(),h.TgZ(92,"p"),h._uU(93,"home works!"),h.qZA(),h.TgZ(94,"p"),h._uU(95,"home works!"),h.qZA(),h.TgZ(96,"p"),h._uU(97,"home works!"),h.qZA(),h.TgZ(98,"p"),h._uU(99,"home works!"),h.qZA(),h.TgZ(100,"p"),h._uU(101,"home works!"),h.qZA(),h.TgZ(102,"p"),h._uU(103,"home works!"),h.qZA(),h.TgZ(104,"p"),h._uU(105,"home works!"),h.qZA(),h.TgZ(106,"p"),h._uU(107,"home works!"),h.qZA(),h.TgZ(108,"p"),h._uU(109,"home works!"),h.qZA(),h.TgZ(110,"p"),h._uU(111,"home works!"),h.qZA(),h.TgZ(112,"p"),h._uU(113,"home works!"),h.qZA(),h.TgZ(114,"p"),h._uU(115,"home works!"),h.qZA(),h.TgZ(116,"p"),h._uU(117,"home works!"),h.qZA(),h.TgZ(118,"p"),h._uU(119,"home works!"),h.qZA(),h.TgZ(120,"p"),h._uU(121,"home works!"),h.qZA(),h.TgZ(122,"p"),h._uU(123,"home works!"),h.qZA(),h.TgZ(124,"p"),h._uU(125,"home works!"),h.qZA(),h.TgZ(126,"p"),h._uU(127,"home works!"),h.qZA())}})}return n})();var Ie=M(5861),iA=M(6710),Rn=M(9058),dc=M(7592),Oi=M(7879),hc=M(4537),t_=M(3019),Gs=M(3093),sA=M(4552);class lI extends Ji.x{constructor(e=1/0,t=1/0,r=sA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=l;v+=2)m=v;m&&r.splice(0,m+1)}}}var Gl=M(3020);function n_(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,Gl.B)({connector:()=>new lI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Dg(n,e){return(0,Po.m)(e)?(0,Hn.w)(()=>n,e):(0,Hn.w)(()=>n)}var lo=M(5137),Nr=M(4556),_i=M(6304);M(4097);var ru=M(4303);const Kh=new Map,Ag={activated:!1,tokenObservers:[]},Sg={initialized:!1,enabled:!1};function Ur(n){return Kh.get(n)||Object.assign({},Ag)}function iu(){return Sg}const a_="https://content-firebaseappcheck.googleapis.com/v1",aA="exchangeDebugToken",Mg={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class uA{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new Rn.BH,yield function cA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Rn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ni=new Rn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Yh(n){if(!Ur(n).activated)throw Ni.create("use-before-activation",{appName:n.name})}function zl(n,e){return ql.apply(this,arguments)}function ql(){return(ql=(0,Ie.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const x=yield o.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(x){throw Ni.create("fetch-network-error",{originalErrorMessage:x?.message})}if(200!==l.status)throw Ni.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(x){throw Ni.create("fetch-parse-error",{originalErrorMessage:x?.message})}const v=m.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Ni.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(v[1]),b=Date.now();return{token:m.token,expireTimeMillis:b+C,issuedAtTimeMillis:b}})).apply(this,arguments)}function _I(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${a_}/projects/${t}/apps/${r}:${aA}?key=${o}`,body:{debug_token:e}}}const wI="firebase-app-check-database",tO=1,Jh="firebase-app-check-store";let xg=null;function c_(){return(c_=(0,Ie.Z)(function*(n,e){const r=(yield function pc(){return xg||(xg=new Promise((n,e)=>{try{const t=indexedDB.open(wI,tO);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Ni.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Jh,{keyPath:"compositeKey"})}}catch(t){e(Ni.create("storage-open",{originalErrorMessage:t?.message}))}}),xg)}()).transaction(Jh,"readwrite"),u=r.objectStore(Jh).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=v=>{l()},r.onerror=v=>{var C;m(Ni.create("storage-set",{originalErrorMessage:null===(C=v.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Rg=new Oi.Yd("@firebase/app-check");function h_(n,e){return(0,Rn.hl)()?function dA(n,e){return function II(n,e){return c_.apply(this,arguments)}(function Ng(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Rg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function f_(){return iu().enabled}function Fg(){return p_.apply(this,arguments)}function p_(){return(p_=(0,Ie.Z)(function*(){const n=iu();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const nO={error:"UNKNOWN_ERROR"};function CI(n){return Rn.US.encodeString(JSON.stringify(n),!1)}function tf(n){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,Ie.Z)(function*(n,e=!1){const t=n.app;Yh(t);const r=Ur(t);let u,o=r.token;if(o&&!Zl(o)&&(r.token=void 0,o=void 0),!o){const v=yield r.cachedTokenPromise;v&&(Zl(v)?o=v:yield h_(t,void 0))}if(!e&&o&&Zl(o))return{token:o.token};let m,l=!1;if(f_()){r.exchangeTokenPromise||(r.exchangeTokenPromise=zl(_I(t,yield Fg()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const v=yield r.exchangeTokenPromise;return yield h_(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Ur(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Rg.warn(v.message):Rg.error(v),u=v}return o?u?m=Zl(o)?{token:o.token,internalError:u}:Vg(u):(m={token:o.token},r.token=o,yield h_(t,o)):m=Vg(u),l&&function mA(n,e){const t=Ur(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m})).apply(this,arguments)}function g_(n){return DI.apply(this,arguments)}function DI(){return(DI=(0,Ie.Z)(function*(n){const e=n.app;Yh(e);const{provider:t}=Ur(e);if(f_()){const r=yield Fg(),{token:o}=yield zl(_I(e,r),n.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function zo(n,e){const t=Ur(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Lg(n){const{app:e}=n,t=Ur(e);let r=t.tokenRefresher;r||(r=function gA(n){const{app:e}=n;return new uA((0,Ie.Z)(function*(){let r;if(r=Ur(e).token?yield tf(n,!0):yield tf(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ur(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Mg.RETRIAL_MIN_WAIT,Mg.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Zl(n){return n.expireTimeMillis-Date.now()>0}function Vg(n){return{token:CI(nO),error:n}}class qo{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ur(this.app);for(const t of e)zo(this.app,t.next);return Promise.resolve()}}const E_="app-check-internal";!function OI(){(0,ru._registerComponent)(new hc.wA("app-check",n=>function bI(n,e){return new qo(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(E_).initialize()})),(0,ru._registerComponent)(new hc.wA(E_,n=>function yA(n){return{getToken:e=>tf(n,e),getLimitedUseToken:()=>g_(n),addTokenListener:e=>function nf(n,e,t,r){const{app:o}=n,u=Ur(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Zl(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),Lg(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Lg(n))}(n,"INTERNAL",e),removeTokenListener:e=>zo(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ru.registerVersion)("@firebase/app-check","0.8.0")}();class C_{constructor(){return(0,Nr.vb)("app-check")}}typeof window<"u"&&window;var Gg=M(120);const D_=new h.OlP("angularfire2.auth.use-emulator"),b_=new h.OlP("angularfire2.auth.settings"),mc=new h.OlP("angularfire2.auth.tenant-id"),T_=new h.OlP("angularfire2.auth.langugage-code"),PI=new h.OlP("angularfire2.auth.use-device-language"),sf=new h.OlP("angularfire.auth.persistence"),yc=(n,e,t,r,o,u,l,m)=>(0,_i.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),l)for(const[C,b]of Object.entries(l))v.settings[C]=b;return m&&v.setPersistence(m),v},[t,r,o,u,l,m]);let Kl=(()=>{class n{constructor(t,r,o,u,l,m,v,C,b,x,q,X){const be=new Ji.x,Fe=(0,Nt.of)(void 0).pipe((0,Gs.Q)(l.outsideAngular),(0,Hn.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,8661)))),(0,Qt.U)(()=>(0,_i.on)(t,u,r)),(0,Qt.U)(Ve=>yc(Ve,u,m,C,b,x,v,q)),n_({bufferSize:1,refCount:!1}));if(Ir(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Nt.of)(null);else{Fe.pipe(Lr()).subscribe();const It=Fe.pipe((0,Hn.w)(jt=>jt.getRedirectResult().then(un=>un,()=>null)),Nr.iC,n_({bufferSize:1,refCount:!1})),Ut=Fe.pipe((0,Hn.w)(jt=>new Vi.y(un=>({unsubscribe:u.runOutsideAngular(()=>jt.onAuthStateChanged(Sn=>un.next(Sn),Sn=>un.error(Sn),()=>un.complete()))})))),_t=Fe.pipe((0,Hn.w)(jt=>new Vi.y(un=>({unsubscribe:u.runOutsideAngular(()=>jt.onIdTokenChanged(Sn=>un.next(Sn),Sn=>un.error(Sn),()=>un.complete()))}))));this.authState=It.pipe(Dg(Ut),(0,lo.R)(l.outsideAngular),(0,Gs.Q)(l.insideAngular)),this.user=It.pipe(Dg(_t),(0,lo.R)(l.outsideAngular),(0,Gs.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Hn.w)(jt=>jt?(0,tr.D)(jt.getIdToken()):(0,Nt.of)(null))),this.idTokenResult=this.user.pipe((0,Hn.w)(jt=>jt?(0,tr.D)(jt.getIdTokenResult()):(0,Nt.of)(null))),this.credential=(0,t_.T)(It,be,this.authState.pipe(ri(jt=>!jt))).pipe((0,Qt.U)(jt=>jt?.user?jt:null),(0,lo.R)(l.outsideAngular),(0,Gs.Q)(l.insideAngular))}return(0,_i.pX)(this,Fe,u,{spy:{apply:(Ve,It,Ut)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&Ut.then(_t=>be.next(_t))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_i.Dh),h.LFG(_i.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Nr.HU),h.LFG(D_,8),h.LFG(b_,8),h.LFG(mc,8),h.LFG(T_,8),h.LFG(PI,8),h.LFG(sf,8),h.LFG(C_,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),af=(()=>{class n{constructor(){Gg.Z.registerVersion("angularfire",Nr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Kl]}),n})();var kI=M(6321);function uf(){return(0,Qi.e)((n,e)=>{let t,r=!1;n.subscribe((0,Yi.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var gt,A_=M(3997),LI=(M(8661),M(3399)),S_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ho={},M_=M_||{},tn=S_||self;function zg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function cf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var x_="closure_uid_"+(1e9*Math.random()>>>0),VI=0;function UI(n,e,t){return n.call.apply(n.bind,arguments)}function xA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Bi(n,e,t){return(Bi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?UI:xA).apply(null,arguments)}function ji(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ei(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function su(){this.s=this.s,this.o=this.o}su.prototype.s=!1,su.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function MA(n){Object.prototype.hasOwnProperty.call(n,x_)&&n[x_]||(n[x_]=++VI)}(this)},su.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qg=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Zg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function BI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(zg(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function $i(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}$i.prototype.h=function(){this.defaultPrevented=!0};var OA=function(){if(!tn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{tn.addEventListener("test",()=>{},e),tn.removeEventListener("test",()=>{},e)}catch{}return n}();function Yl(n){return/^[\s\xa0]*$/.test(n)}function Wg(){var n=tn.navigator;return n&&(n=n.userAgent)?n:""}function Wo(n){return-1!=Wg().indexOf(n)}function lf(n){return lf[" "](n),n}lf[" "]=function(){};var Kg,n,RA=Wo("Opera"),Ql=Wo("Trident")||Wo("MSIE"),jI=Wo("Edge"),O_=jI||Ql,fo=Wo("Gecko")&&!(-1!=Wg().toLowerCase().indexOf("webkit")&&!Wo("Edge"))&&!(Wo("Trident")||Wo("MSIE"))&&!Wo("Edge"),N_=-1!=Wg().toLowerCase().indexOf("webkit")&&!Wo("Edge");function $I(){var n=tn.document;return n?n.documentMode:void 0}e:{var R_="",Yg=(n=Wg(),fo?/rv:([^\);]+)(\)|;)/.exec(n):jI?/Edge\/([\d\.]+)/.exec(n):Ql?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):N_?/WebKit\/(\S+)/.exec(n):RA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Yg&&(R_=Yg?Yg[1]:""),Ql){var Qg=$I();if(null!=Qg&&Qg>parseFloat(R_)){Kg=String(Qg);break e}}Kg=R_}var cO=tn.document&&Ql&&($I()||parseInt(Kg,10))||void 0;function Xl(n,e){if($i.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(fo){e:{try{lf(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:HI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xl.$.h.call(this)}}Ei(Xl,$i);var HI={2:"touch",3:"pen",4:"mouse"};Xl.prototype.h=function(){Xl.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ed="closure_listenable_"+(1e6*Math.random()|0),GI=0;function P_(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=o,this.key=++GI,this.fa=this.ia=!1}function zs(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function k_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Xg(n){const e={};for(const t in n)e[t]=n[t];return e}const zI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F_(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<zI.length;u++)t=zI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function em(n){this.src=n,this.g={},this.h=0}function td(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=qg(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(zs(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function vc(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return o}return-1}em.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=vc(n,e,r,o);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new P_(e,this.src,u,!!r,o)).ia=t,n.push(e)),e};var tm="closure_lm_"+(1e6*Math.random()|0),nd={};function kA(n,e,t,r,o){if(r&&r.once)return L_(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)kA(n,e[u],t,r,o);return null}return t=nm(t),n&&n[ed]?n.O(e,t,cf(r)?!!r.capture:!!r,o):qI(n,e,t,!1,r,o)}function qI(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=cf(o)?!!o.capture:!!o,m=_c(n);if(m||(n[tm]=m=new em(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function ZI(){const e=KI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)OA||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(U_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function L_(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)L_(n,e[u],t,r,o);return null}return t=nm(t),n&&n[ed]?n.P(e,t,cf(r)?!!r.capture:!!r,o):qI(n,e,t,!0,r,o)}function WI(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)WI(n,e[u],t,r,o);else r=cf(r)?!!r.capture:!!r,t=nm(t),n&&n[ed]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=vc(u=n.g[e],t,r,o))&&(zs(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=_c(n))&&(e=n.g[e.toString()],n=-1,e&&(n=vc(e,t,r,o)),(t=-1<n?e[n]:null)&&V_(t))}function V_(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[ed])td(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(U_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=_c(e))?(td(t,n),0==t.h&&(t.src=null,e[tm]=null)):zs(n)}}}function U_(n){return n in nd?nd[n]:nd[n]="on"+n}function KI(n,e){if(n.fa)n=!0;else{e=new Xl(e,this);var t=n.listener,r=n.la||n.src;n.ia&&V_(n),n=t.call(r,e)}return n}function _c(n){return(n=n[tm])instanceof em?n:null}var B_="__closure_events_fn_"+(1e9*Math.random()>>>0);function nm(n){return"function"==typeof n?n:(n[B_]||(n[B_]=function(e){return n.handleEvent(e)}),n[B_])}function ii(){su.call(this),this.i=new em(this),this.S=this,this.J=null}function Ri(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new $i(e,n);else if(e instanceof $i)e.target=e.target||n;else{var o=e;F_(e=new $i(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=rm(l,r,!0,e)&&o}if(o=rm(l=e.g=n,r,!0,e)&&o,o=rm(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=rm(l=e.g=t[u],r,!1,e)&&o}function rm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,v=l.la||l.src;l.ia&&td(n.i,l),o=!1!==m.call(v,r)&&o}}return o&&!r.defaultPrevented}Ei(ii,su),ii.prototype[ed]=!0,ii.prototype.removeEventListener=function(n,e,t,r){WI(this,n,e,t,r)},ii.prototype.N=function(){if(ii.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)zs(t[r]);delete n.g[e],n.h--}}this.J=null},ii.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ii.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var wc=tn.JSON.stringify;function LA(){var n=hf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var YI=new class FA{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new UA,n=>n.reset());class UA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function BA(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function jA(n){tn.setTimeout(()=>{throw n},0)}let df,rd=!1,hf=new class VA{constructor(){this.h=this.g=null}add(e,t){const r=YI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},QI=()=>{const n=tn.Promise.resolve(void 0);df=()=>{n.then(im)}};var im=()=>{for(var n;n=LA();){try{n.h.call(n.g)}catch(t){jA(t)}var e=YI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}rd=!1};function sm(n,e){ii.call(this),this.h=n||1,this.g=e||tn,this.j=Bi(this.qb,this),this.l=Date.now()}function j_(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function $_(n,e,t){if("function"==typeof n)t&&(n=Bi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Bi(n.handleEvent,n)}return 2147483647<Number(e)?-1:tn.setTimeout(n,e||0)}function JI(n){n.g=$_(()=>{n.g=null,n.i&&(n.i=!1,JI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ei(sm,ii),(gt=sm.prototype).ga=!1,gt.T=null,gt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ri(this,"tick"),this.ga&&(j_(this),this.start()))}},gt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gt.N=function(){sm.$.N.call(this),j_(this),delete this.g};class $A extends su{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:JI(this)}N(){super.N(),this.g&&(tn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ff(n){su.call(this),this.h=n,this.g={}}Ei(ff,su);var XI=[];function H_(n,e,t,r){Array.isArray(t)||(t&&(XI[0]=t.toString()),t=XI);for(var o=0;o<t.length;o++){var u=kA(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function G_(n){k_(n.g,function(e,t){this.g.hasOwnProperty(t)&&V_(e)},n),n.g={}}function om(){this.g=!0}function Ec(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function am(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return wc(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ff.prototype.N=function(){ff.$.N.call(this),G_(this)},ff.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},om.prototype.Ea=function(){this.g=!1},om.prototype.info=function(){};var Ic={},tC=null;function id(){return tC=tC||new ii}function nC(n){$i.call(this,Ic.Ta,n)}function hs(n){const e=id();Ri(e,new nC(e))}function sd(n,e){$i.call(this,Ic.STAT_EVENT,n),this.stat=e}function Zn(n){const e=id();Ri(e,new sd(e,n))}function ou(n,e){$i.call(this,Ic.Ua,n),this.size=e}function au(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return tn.setTimeout(function(){n()},e)}Ic.Ta="serverreachability",Ei(nC,$i),Ic.STAT_EVENT="statevent",Ei(sd,$i),Ic.Ua="timingevent",Ei(ou,$i);var es={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},um={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function uu(){}function Dc(){}uu.prototype.h=null;var du,Ko={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function cu(){$i.call(this,"d")}function lu(){$i.call(this,"c")}function va(){}function Yo(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new ff(this),this.P=rC,this.V=new sm(n=O_?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new z_}function z_(){this.i=null,this.g="",this.h=!1}Ei(cu,$i),Ei(lu,$i),Ei(va,uu),va.prototype.g=function(){return new XMLHttpRequest},va.prototype.i=function(){return{}},du=new va;var rC=45e3,cm={},pf={};function lm(n,e,t){n.L=1,n.v=fu(po(e)),n.s=t,n.S=!0,q_(n,null)}function q_(n,e){n.G=Date.now(),bc(n),n.A=po(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),cC(t.i,"t",r),n.C=0,t=n.l.J,n.h=new z_,n.g=IC(n.l,t?e:null,!n.s),0<n.O&&(n.M=new $A(Bi(n.Pa,n,n.g),n.O)),H_(n.U,n.g,"readystatechange",n.nb),e=n.I?Xg(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),hs(),function lO(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),v=0;v<m.length;v++){var C=m[v].split("=");if(1<C.length){var b=C[0];C=C[1];var x=b.split("_");l=2<=x.length&&"type"==x[1]?l+(b+"=")+C+"&":l+(b+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Z_(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function W_(n,e,t){let o,r=!0;for(;!n.J&&n.C<t.length;){if(o=iC(n,t),o==pf){4==e&&(n.o=4,Zn(14),r=!1),Ec(n.j,n.m,null,"[Incomplete Response]");break}if(o==cm){n.o=4,Zn(15),Ec(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ec(n.j,n.m,o,null),Y_(n,o)}Z_(n)&&o!=pf&&o!=cm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),vm(e),e.M=!0,Zn(11))):(Ec(n.j,n.m,t,"[Invalid Chunked Response]"),Tc(n),dm(n))}function iC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?pf:(t=Number(e.substring(t,r)),isNaN(t)?cm:(r+=1)+t>e.length?pf:(e=e.slice(r,r+t),n.C=r+t,e))}function bc(n){n.Y=Date.now()+n.P,sC(n,n.P)}function sC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=au(Bi(n.lb,n),e)}function K_(n){n.B&&(tn.clearTimeout(n.B),n.B=null)}function dm(n){0==n.l.H||n.J||wC(n.l,n)}function Tc(n){K_(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,j_(n.V),G_(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Y_(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||hm(t.i,n)))if(!n.K&&hm(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;mo(t),Ef(t)}ym(t),Zn(18)}}else t.Fa=o[1],0<t.Fa-t.V&&37500>o[2]&&t.G&&0==t.A&&!t.v&&(t.v=au(Bi(t.ib,t),6e3));if(1>=X_(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else _a(t,11)}else if((n.K||t.g==n)&&mo(t),!Yl(e))for(o=t.Ja.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.V=C[0],C=C[1],2==t.H)if("c"==C[0]){t.K=C[1],t.pa=C[2];const b=C[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const x=C[4];null!=x&&(t.Ga=x,t.l.info("SVER="+t.Ga));const q=C[5];null!=q&&"number"==typeof q&&0<q&&(t.L=r=1.5*q,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const X=n.g;if(X){const be=X.g?X.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(be){var u=r.i;u.g||-1==be.indexOf("spdy")&&-1==be.indexOf("quic")&&-1==be.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(e0(u,u.h),u.h=null))}if(r.F){const Fe=X.g?X.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.Da=Fe,ur(r.I,r.F,Fe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=_m(r,r.J?r.pa:null,r.Y),l.K){hC(r.i,l);var m=l,v=r.L;v&&m.setTimeout(v),m.B&&(K_(m),bc(m)),r.g=l}else p0(r);0<t.j.length&&If(t)}else"stop"!=C[0]&&"close"!=C[0]||_a(t,7);else 3==t.H&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?_a(t,7):d0(t):"noop"!=C[0]&&t.h&&t.h.Aa(C),t.A=0)}hs()}catch{}}function GA(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function HA(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(zg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function hO(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(zg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(gt=Yo.prototype).setTimeout=function(n){this.P=n},gt.nb=function(n){n=n.target;const e=this.M;e&&3==Qo(n)?e.l():this.Pa(n)},gt.Pa=function(n){try{if(n==this.g)e:{const b=Qo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||O_||this.g&&(this.h.h||this.g.ja()||c0(this.g)))){this.J||4!=b||7==e||hs(),K_(this);var t=this.g.da();this.ca=t;t:if(Z_(this)){var r=c0(this.g);n="";var o=r.length,u=4==Qo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Tc(this),dm(this);var l="";break t}this.h.i=new tn.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function eC(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yl(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Zn(12),Tc(this),dm(this);break e}Ec(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Y_(this,t)}this.S?(W_(this,b,l),O_&&this.i&&3==b&&(H_(this.U,this.V,"tick",this.mb),this.V.start())):(Ec(this.j,this.m,l,null),Y_(this,l)),4==b&&Tc(this),this.i&&!this.J&&(4==b?wC(this.l,this):(this.i=!1,bc(this)))}else(function yC(n){const e={};n=(n.g&&2<=Qo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Yl(n[r]))continue;var t=BA(n[r]);const o=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[o]||[];e[o]=u,u.push(t)}!function PA(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Zn(12)):(this.o=0,Zn(13)),Tc(this),dm(this)}}}catch{}},gt.mb=function(){if(this.g){var n=Qo(this.g),e=this.g.ja();this.C<e.length&&(K_(this),W_(this,n,e),this.i&&4!=n&&bc(this))}},gt.cancel=function(){this.J=!0,Tc(this)},gt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function dO(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(hs(),Zn(17)),Tc(this),this.o=2,dm(this)):sC(this,this.Y-n)};var oC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ac(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ac){this.h=n.h,hu(this,n.j),this.s=n.s,this.g=n.g,od(this,n.m),this.l=n.l;var e=n.i,t=new pu;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),gf(this,t),this.o=n.o}else n&&(e=String(n).match(oC))?(this.h=!1,hu(this,e[1]||"",!0),this.s=ad(e[2]||""),this.g=ad(e[3]||"",!0),od(this,e[4]),this.l=ad(e[5]||"",!0),gf(this,e[6]||"",!0),this.o=ad(e[7]||"")):(this.h=!1,this.i=new pu(null,this.h))}function po(n){return new Ac(n)}function hu(n,e,t){n.j=t?ad(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function od(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function gf(n,e,t){e instanceof pu?(n.i=e,function YA(n,e){e&&!n.j&&(go(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(KA(this,r),cC(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=mf(e,WA)),n.i=new pu(e,n.h))}function ur(n,e,t){n.i.set(e,t)}function fu(n){return ur(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ad(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function mf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,yf),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function yf(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ac.prototype.toString=function(){var n=[],e=this.j;e&&n.push(mf(e,aC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(mf(e,aC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(mf(t,"/"==t.charAt(0)?ZA:qA,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",mf(t,Q_)),n.join("")};var aC=/[#\/\?@]/g,qA=/[#\?:]/g,ZA=/[#\?]/g,WA=/[#\?@]/g,Q_=/#/g;function pu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function go(n){n.g||(n.g=new Map,n.h=0,n.i&&function zA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function KA(n,e){go(n),e=gu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function uC(n,e){return go(n),e=gu(n,e),n.g.has(e)}function cC(n,e,t){KA(n,e),0<t.length&&(n.i=null,n.g.set(gu(n,e),Zg(t)),n.h+=t.length)}function gu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function dC(n){this.l=n||QA,n=tn.PerformanceNavigationTiming?0<(n=tn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(tn.g&&tn.g.Ka&&tn.g.Ka()&&tn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gt=pu.prototype).add=function(n,e){go(this),this.i=null,n=gu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},gt.forEach=function(n,e){go(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},gt.ta=function(){go(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},gt.Z=function(n){go(this);let e=[];if("string"==typeof n)uC(this,n)&&(e=e.concat(this.g.get(gu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},gt.set=function(n,e){return go(this),this.i=null,uC(this,n=gu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},gt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var QA=10;function J_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function X_(n){return n.h?1:n.g?n.g.size:0}function hm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function e0(n,e){n.g?n.g.add(e):n.h=e}function hC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function fC(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Zg(n.i)}dC.prototype.cancel=function(){if(this.i=fC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var pC=class{stringify(n){return tn.JSON.stringify(n,void 0)}parse(n){return tn.JSON.parse(n,void 0)}};function t0(){this.g=new pC}function n0(n,e,t){const r=t||"";try{GA(n,function(o,u){let l=o;cf(o)&&(l=wc(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Sc(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function mu(n){this.l=n.fc||null,this.j=n.ob||!1}function ud(n,e){ii.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=fm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ei(mu,uu),mu.prototype.g=function(){return new ud(this.l,this.j)},mu.prototype.i=function(n){return function(){return n}}({}),Ei(ud,ii);var fm=0;function gC(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function vf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_f(n)}function _f(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(gt=ud.prototype).open=function(n,e){if(this.readyState!=fm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_f(this)},gt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||tn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vf(this)),this.readyState=fm},gt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_f(this)),this.g&&(this.readyState=3,_f(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof tn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gC(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},gt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?vf(this):_f(this),3==this.readyState&&gC(this)}},gt.Za=function(n){this.g&&(this.response=this.responseText=n,vf(this))},gt.Ya=function(n){this.g&&(this.response=n,vf(this))},gt.ka=function(){this.g&&vf(this)},gt.setRequestHeader=function(n,e){this.v.append(n,e)},gt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},gt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ud.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var r0=tn.JSON.parse;function yr(n){ii.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=s0,this.L=this.M=!1}Ei(yr,ii);var s0="",mC=/^https?$/i,XA=["POST","PUT"];function o0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,pm(n),cd(n)}function pm(n){n.F||(n.F=!0,Ri(n,"complete"),Ri(n,"error"))}function a0(n){if(n.h&&typeof M_<"u"&&(!n.C[1]||4!=Qo(n)||2!=n.da()))if(n.v&&4==Qo(n))$_(n.La,0,n);else if(Ri(n,"readystatechange"),4==Qo(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var o=String(n.I).match(oC)[1]||null;!o&&tn.self&&tn.self.location&&(o=tn.self.location.protocol.slice(0,-1)),r=!mC.test(o?o.toLowerCase():"")}t=r}if(t)Ri(n,"complete"),Ri(n,"success");else{n.m=6;try{var u=2<Qo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",pm(n)}}finally{cd(n)}}}function cd(n,e){if(n.g){u0(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ri(n,"ready");try{t.onreadystatechange=r}catch{}}}function u0(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(tn.clearTimeout(n.A),n.A=null)}function Qo(n){return n.g?n.g.readyState:0}function c0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case s0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function l0(n){let e="";return k_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function gm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=l0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ur(n,e,t))}function wf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function vC(n){this.Ga=0,this.j=[],this.l=new om,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=wf("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=wf("baseRetryDelayMs",5e3,n),this.hb=wf("retryDelaySeedMs",1e4,n),this.eb=wf("forwardChannelMaxRetries",2,n),this.xa=wf("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new dC(n&&n.concurrentRequestLimit),this.Ja=new t0,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function d0(n){if(mm(n),3==n.H){var e=n.W++,t=po(n.I);if(ur(t,"SID",n.K),ur(t,"RID",e),ur(t,"TYPE","terminate"),ld(n,t),(e=new Yo(n,n.l,e)).L=2,e.v=fu(po(t)),t=!1,tn.navigator&&tn.navigator.sendBeacon)try{t=tn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&tn.Image&&((new Image).src=e.v,t=!0),t||(e.g=IC(e.l,null),e.g.ha(e.v)),e.G=Date.now(),bc(e)}yu(n)}function Ef(n){n.g&&(vm(n),n.g.cancel(),n.g=null)}function mm(n){Ef(n),n.u&&(tn.clearTimeout(n.u),n.u=null),mo(n),n.i.cancel(),n.m&&("number"==typeof n.m&&tn.clearTimeout(n.m),n.m=null)}function If(n){if(!J_(n.i)&&!n.m){n.m=!0;var e=n.Na;df||QI(),rd||(df(),rd=!0),hf.add(e,n),n.C=0}}function h0(n,e){var t;t=e?e.m:n.W++;const r=po(n.I);ur(r,"SID",n.K),ur(r,"RID",t),ur(r,"AID",n.V),ld(n,r),n.o&&n.s&&gm(r,n.o,n.s),t=new Yo(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=f0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),e0(n.i,t),lm(t,r,e)}function ld(n,e){n.na&&k_(n.na,function(t,r){ur(e,r,t)}),n.h&&GA({},function(t,r){ur(e,r,t)})}function f0(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Bi(n.h.Va,n.h,n):null;e:{var o=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let C=o[v].g;const b=o[v].map;if(C-=u,0>C)u=Math.max(0,o[v].g-100),m=!1;else try{n0(b,l,"req"+C+"_")}catch{r&&r(b)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function p0(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;df||QI(),rd||(df(),rd=!0),hf.add(e,n),n.A=0}}function ym(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=au(Bi(n.Ma,n),EC(n,n.A)),n.A++,0))}function vm(n){null!=n.B&&(tn.clearTimeout(n.B),n.B=null)}function Cf(n){n.g=new Yo(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=po(n.wa);ur(e,"RID","rpc"),ur(e,"SID",n.K),ur(e,"AID",n.V),ur(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ur(e,"TO",n.qa),ur(e,"TYPE","xmlhttp"),ld(n,e),n.o&&n.s&&gm(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=fu(po(e)),t.s=null,t.S=!0,q_(t,n)}function mo(n){null!=n.v&&(tn.clearTimeout(n.v),n.v=null)}function wC(n,e){var t=null;if(n.g==e){mo(n),vm(n),n.g=null;var r=2}else{if(!hm(n.i,e))return;t=e.F,hC(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var o=n.C;Ri(r=id(),new ou(r,t)),If(n)}else p0(n);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function _C(n,e){return!(X_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=au(Bi(n.Na,n,e),EC(n,n.C)),n.C++,0)))}(n,e)||2==r&&ym(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:_a(n,5);break;case 4:_a(n,10);break;case 3:_a(n,6);break;default:_a(n,2)}}function EC(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function _a(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Bi(n.pb,n);t||(t=new Ac("//www.google.com/images/cleardot.gif"),tn.location&&"http"==tn.location.protocol||hu(t,"https"),fu(t)),function JA(n,e){const t=new om;if(tn.Image){const r=new Image;r.onload=ji(Sc,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ji(Sc,t,r,"TestLoadImage: error",!1,e),r.onabort=ji(Sc,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ji(Sc,t,r,"TestLoadImage: timeout",!1,e),tn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zn(2);n.H=0,n.h&&n.h.za(e),yu(n),mm(n)}function yu(n){if(n.H=0,n.ma=[],n.h){const e=fC(n.i);(0!=e.length||0!=n.j.length)&&(BI(n.ma,e),BI(n.ma,n.j),n.i.i.length=0,Zg(n.j),n.j.length=0),n.h.ya()}}function _m(n,e,t){var r=t instanceof Ac?po(t):new Ac(t);if(""!=r.g)e&&(r.g=e+"."+r.g),od(r,r.m);else{var o=tn.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Ac(null);r&&hu(u,r),e&&(u.g=e),o&&od(u,o),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&ur(r,t,e),ur(r,"VER",n.ra),ld(n,r),r}function IC(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yr(t&&n.Ha&&!n.va?new mu({ob:!0}):n.va)).Oa(n.J),e}function wm(){}function g0(){if(Ql&&!(10<=Number(cO)))throw Error("Environmental error: no available transport.")}function qs(n,e){ii.call(this),this.g=new vC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Yl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yl(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Mc(this)}function CC(n){cu.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function DC(){lu.call(this),this.status=1}function Mc(n){this.g=n}function Jn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Em(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(o=0;16>o;++o)r[o]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((o=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^u&(t^o))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^o^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(o^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(o^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((o=u+((l=o+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(o+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+u&4294967295}function Xn(n,e){this.h=e;for(var t=[],r=!0,o=n.length-1;0<=o;o--){var u=0|n[o];r&&u==e||(t[o]=u,r=!1)}this.g=t}(gt=yr.prototype).Oa=function(n){this.M=n},gt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():du.g(),this.C=function Cc(n){return n.h||(n.h=n.i())}(this.u?this.u:du),this.g.onreadystatechange=Bi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void o0(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=tn.FormData&&n instanceof tn.FormData,!(0<=qg(XA,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{u0(this),0<this.B&&((this.L=function eS(n){return Ql&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bi(this.ua,this)):this.A=$_(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){o0(this,u)}},gt.ua=function(){typeof M_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ri(this,"timeout"),this.abort(8))},gt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ri(this,"complete"),Ri(this,"abort"),cd(this))},gt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cd(this,!0)),yr.$.N.call(this)},gt.La=function(){this.s||(this.G||this.v||this.l?a0(this):this.kb())},gt.kb=function(){a0(this)},gt.isActive=function(){return!!this.g},gt.da=function(){try{return 2<Qo(this)?this.g.status:-1}catch{return-1}},gt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},gt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),r0(e)}},gt.Ia=function(){return this.m},gt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(gt=vC.prototype).ra=8,gt.H=1,gt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new Yo(this,this.l,n);let u=this.s;if(this.U&&(u?(u=Xg(u),F_(u,this.U)):u=this.U),null!==this.o||this.O||(o.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=f0(this,o,e),ur(t=po(this.I),"RID",n),ur(t,"CVER",22),this.F&&ur(t,"X-HTTP-Session-Id",this.F),ld(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(l0(u)))+"&"+e:this.o&&gm(t,this.o,u)),e0(this.i,o),this.bb&&ur(t,"TYPE","init"),this.P?(ur(t,"$req",e),ur(t,"SID","null"),o.aa=!0,lm(o,t,null)):lm(o,t,e),this.H=2}}else 3==this.H&&(n?h0(this,n):0==this.j.length||J_(this.i)||h0(this))},gt.Ma=function(){if(this.u=null,Cf(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=au(Bi(this.jb,this),n)}},gt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zn(10),Ef(this),Cf(this))},gt.ib=function(){null!=this.v&&(this.v=null,Ef(this),ym(this),Zn(19))},gt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Zn(2)):(this.l.info("Failed to ping google.com"),Zn(1))},gt.isActive=function(){return!!this.h&&this.h.isActive(this)},(gt=wm.prototype).Ba=function(){},gt.Aa=function(){},gt.za=function(){},gt.ya=function(){},gt.isActive=function(){return!0},gt.Va=function(){},g0.prototype.g=function(n,e){return new qs(n,e)},Ei(qs,ii),qs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Zn(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=_m(n,null,n.Y),If(n)},qs.prototype.close=function(){d0(this.g)},qs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=wc(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&If(e)},qs.prototype.N=function(){this.g.h=null,delete this.j,d0(this.g),delete this.g,qs.$.N.call(this)},Ei(CC,cu),Ei(DC,lu),Ei(Mc,wm),Mc.prototype.Ba=function(){Ri(this.g,"a")},Mc.prototype.Aa=function(n){Ri(this.g,new CC(n))},Mc.prototype.za=function(n){Ri(this.g,new DC)},Mc.prototype.ya=function(){Ri(this.g,"b")},Ei(Jn,function tS(){this.blockSize=-1}),Jn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Jn.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,o=this.h,u=0;u<e;){if(0==o)for(;u<=t;)Em(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[o++]=n.charCodeAt(u++),o==this.blockSize){Em(this,r),o=0;break}}else for(;u<e;)if(r[o++]=n[u++],o==this.blockSize){Em(this,r),o=0;break}}this.h=o,this.i+=e},Jn.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var nS={};function Im(n){return-128<=n&&128>n?function NA(n,e){var t=nS;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Xn([0|e],0>e?-1:0)}):new Xn([0|n],0>n?-1:0)}function Jo(n){if(isNaN(n)||!isFinite(n))return yo;if(0>n)return Ii(Jo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Cm;return new Xn(e,0)}var Cm=4294967296,yo=Im(0),y0=Im(1),bC=Im(16777216);function Xo(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Zs(n){return-1==n.h}function Ii(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Xn(t,~n.h).add(y0)}function v0(n,e){return n.add(Ii(e))}function Df(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function xc(n,e){this.g=n,this.h=e}function As(n,e){if(Xo(e))throw Error("division by zero");if(Xo(n))return new xc(yo,yo);if(Zs(n))return e=As(Ii(n),e),new xc(Ii(e.g),Ii(e.h));if(Zs(e))return e=As(n,Ii(e)),new xc(Ii(e.g),e.h);if(30<n.g.length){if(Zs(n)||Zs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=y0,r=e;0>=r.X(n);)t=TC(t),r=TC(r);var o=Oc(t,1),u=Oc(r,1);for(r=Oc(r,2),t=Oc(t,2);!Xo(r);){var l=u.add(r);0>=l.X(n)&&(o=o.add(t),u=l),r=Oc(r,1),t=Oc(t,1)}return e=v0(n,o.R(e)),new xc(o,e)}for(o=yo;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=Jo(t)).R(e);Zs(l)||0<l.X(n);)l=(u=Jo(t-=r)).R(e);Xo(u)&&(u=y0),o=o.add(u),n=v0(n,l)}return new xc(o,n)}function TC(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Xn(t,n.h)}function Oc(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,o=[],u=0;u<r;u++)o[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Xn(o,n.h)}(gt=Xn.prototype).ea=function(){if(Zs(this))return-Ii(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Cm+r)*e,e*=Cm}return n},gt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Xo(this))return"0";if(Zs(this))return"-"+Ii(this).toString(n);for(var e=Jo(Math.pow(n,6)),t=this,r="";;){var o=As(t,e).g,u=((0<(t=v0(t,o.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Xo(t=o))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},gt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},gt.X=function(n){return Zs(n=v0(this,n))?-1:Xo(n)?0:1},gt.abs=function(){return Zs(this)?Ii(this):this},gt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,o=0;o<=e;o++){var u=r+(65535&this.D(o))+(65535&n.D(o)),l=(u>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);r=l>>>16,t[o]=(l&=65535)<<16|(u&=65535)}return new Xn(t,-2147483648&t[t.length-1]?-1:0)},gt.R=function(n){if(Xo(this)||Xo(n))return yo;if(Zs(this))return Zs(n)?Ii(this).R(Ii(n)):Ii(Ii(this).R(n));if(Zs(n))return Ii(this.R(Ii(n)));if(0>this.X(bC)&&0>n.X(bC))return Jo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<n.g.length;o++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(o)>>>16,v=65535&n.D(o);t[2*r+2*o]+=l*v,Df(t,2*r+2*o),t[2*r+2*o+1]+=u*v,Df(t,2*r+2*o+1),t[2*r+2*o+1]+=l*m,Df(t,2*r+2*o+1),t[2*r+2*o+2]+=u*m,Df(t,2*r+2*o+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Xn(t,0)},gt.gb=function(n){return As(this,n).h},gt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Xn(t,this.h&n.h)},gt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Xn(t,this.h|n.h)},gt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Xn(t,this.h^n.h)},g0.prototype.createWebChannel=g0.prototype.g,qs.prototype.send=qs.prototype.u,qs.prototype.open=qs.prototype.m,qs.prototype.close=qs.prototype.close,es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,um.COMPLETE="complete",Dc.EventType=Ko,Ko.OPEN="a",Ko.CLOSE="b",Ko.ERROR="c",Ko.MESSAGE="d",ii.prototype.listen=ii.prototype.O,yr.prototype.listenOnce=yr.prototype.P,yr.prototype.getLastError=yr.prototype.Sa,yr.prototype.getLastErrorCode=yr.prototype.Ia,yr.prototype.getStatus=yr.prototype.da,yr.prototype.getResponseJson=yr.prototype.Wa,yr.prototype.getResponseText=yr.prototype.ja,yr.prototype.send=yr.prototype.ha,yr.prototype.setWithCredentials=yr.prototype.Oa,Jn.prototype.digest=Jn.prototype.l,Jn.prototype.reset=Jn.prototype.reset,Jn.prototype.update=Jn.prototype.j,Xn.prototype.add=Xn.prototype.add,Xn.prototype.multiply=Xn.prototype.R,Xn.prototype.modulo=Xn.prototype.gb,Xn.prototype.compare=Xn.prototype.X,Xn.prototype.toNumber=Xn.prototype.ea,Xn.prototype.toString=Xn.prototype.toString,Xn.prototype.getBits=Xn.prototype.D,Xn.fromNumber=Jo,Xn.fromString=function m0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ii(m0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Jo(Math.pow(e,8)),r=yo,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+u),e);8>u?(u=Jo(Math.pow(e,u)),r=r.R(u).add(Jo(l))):r=(r=r.R(t)).add(Jo(l))}return r};var ea=ho.createWebChannelTransport=function(){return new g0},vo=ho.getStatEventTarget=function(){return id()},Ss=ho.ErrorCode=es,AC=ho.EventType=um,SC=ho.Event=Ic,MC=ho.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},rS=ho.FetchXmlHttpFactory=mu,Dm=ho.WebChannel=Dc,iS=ho.XhrIo=yr,_0=ho.Md5=Jn,ta=ho.Integer=Xn;const xC="@firebase/firestore";class si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");let dd="9.23.0";const vu=new Oi.Yd("@firebase/firestore");function bm(){return vu.logLevel}function ze(n,...e){if(vu.logLevel<=Oi.in.DEBUG){const t=e.map(Tm);vu.debug(`Firestore (${dd}): ${n}`,...t)}}function Br(n,...e){if(vu.logLevel<=Oi.in.ERROR){const t=e.map(Tm);vu.error(`Firestore (${dd}): ${n}`,...t)}}function Ms(n,...e){if(vu.logLevel<=Oi.in.WARN){const t=e.map(Tm);vu.warn(`Firestore (${dd}): ${n}`,...t)}}function Tm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function vt(n="Unexpected state"){const e=`FIRESTORE (${dd}) INTERNAL ASSERTION FAILED: `+n;throw Br(e),new Error(e)}function St(n,e){n||vt()}function lt(n,e){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends Rn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class w0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(si.UNAUTHENTICATED))}shutdown(){}}class RC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class PC{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=l;e.enqueueRetryable((0,Ie.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},v=C=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>v(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?v(C):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new w0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new si(e)}}class kC{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=si.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class FC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new kC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oS{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?o(u):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.T=t.token,new LC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function aS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class VC{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=aS(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[u]%62))}return r}}function nn(n,e){return n<e?-1:n>e?1:0}function hd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function UC(n){return n+"\0"}class vr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new je(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vr.fromMillis(Date.now())}static fromDate(e){return vr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new vr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new vr(0,0))}static max(){return new Mt(new vr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class bf{constructor(e,t,r){void 0===t?t=0:t>e.length&&vt(),void 0===r?r=e.length-t:r>e.length-t&&vt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===bf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Pn extends bf{construct(e,t,r){return new Pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Pn(t)}static emptyPath(){return new Pn([])}}const uS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rr extends bf{construct(e,t,r){return new Rr(e,t,r)}static isValidIdentifier(e){return uS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new je(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new je(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new je(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new je(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rr(t)}static emptyPath(){return new Rr([])}}class at{constructor(e){this.path=e}static fromPath(e){return new at(Pn.fromString(e))}static fromName(e){return new at(Pn.fromString(e).popFirst(5))}static empty(){return new at(Pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new Pn(e.slice()))}}class Am{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function E0(n){return n.fields.find(e=>2===e.kind)}function Nc(n){return n.fields.filter(e=>2!==e.kind)}Am.UNKNOWN_ID=-1;class Tf{constructor(e,t){this.fieldPath=e,this.kind=t}}class fd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fd(0,fs.min())}}function I0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Mt.fromTimestamp(1e9===r?new vr(t+1,0):new vr(t,r));return new fs(o,at.empty(),e)}function C0(n){return new fs(n.readTime,n.key,-1)}class fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fs(Mt.min(),at.empty(),-1)}static max(){return new fs(Mt.max(),at.empty(),-1)}}function Sm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=at.comparator(n.documentKey,e.documentKey),0!==t?t:nn(n.largestBatchId,e.largestBatchId))}const D0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wa(n){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,Ie.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==D0)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),Ea.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},v=>r(v))}),l=!0,u===o&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(o=>o?le.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new le((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let v=0;v<u;v++){const C=v;t(e[C]).next(b=>{l[C]=b,++m,m===u&&r(l)},b=>o(b))}})}static doWhile(e,t){return new le((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Mm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Wr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Rc(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=wu(r.target.error);this.v.reject(new Rc(e,o))}}static open(e,t,r,o){try{return new Mm(t,e.transaction(o,r))}catch(u){throw new Rc(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $C(t)}}class Hi{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Hi.S((0,Rn.z$)())&&Br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),_u(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Rn.hl)())return!1;if(Hi.C())return!0;const e=(0,Rn.z$)(),t=Hi.S(e),r=0<t&&t<10,o=Hi.N(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new Rc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new je(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new je(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Rc(e,m))},u.onupgradeneeded=l=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ie.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const v=Mm.open(u.db,e,l?"readonly":"readwrite",r),C=o(v).next(b=>(v.P(),b)).catch(b=>(v.abort(b),le.reject(b))).toPromise();return C.catch(()=>{}),yield v.R,C}catch(v){const C=v,b="FirebaseError"!==C.name&&m<3;if(ze("SimpleDb","Transaction failed with error:",C.message,"Retrying:",b),u.close(),!b)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pO{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return _u(this.L.delete())}}class Rc extends je{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pc(n){return"IndexedDbTransactionError"===n.name}class $C{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_u(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),_u(this.store.add(e))}get(e){return _u(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),_u(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),_u(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.W(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new le((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}J(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}Z(e){const t=this.cursor({});return new le((r,o)=>{t.onerror=u=>{const l=wu(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new le((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const v=new pO(m),C=t(m.primaryKey,m.value,v);if(C instanceof le){const b=C.catch(x=>(v.done(),le.reject(x)));r.push(b)}v.isDone?o():null===v.K?m.continue():m.continue(v.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _u(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=wu(r.target.error);t(o)}})}let cS=!1;function wu(n){const e=Hi.S((0,Rn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cS||(cS=!0,setTimeout(()=>{throw r},0)),r}}return n}class lS{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{ze("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Pc(r)?ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield wa(r)}yield t.et(6e4)}))}}class dS{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,u=!0;return le.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ze("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(o,u)).next(m=>(ze("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=C0(u);Sm(l,r)>0&&(r=l)}),new fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let xs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function na(n){return null==n}function Af(n){return 0===n&&1/n==-1/0}function Sf(n){return"number"==typeof n&&Number.isInteger(n)&&!Af(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function oi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=hS(e)),e=ps(n.get(t),e);return hS(e)}function ps(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function hS(n){return n+"\x01\x01"}function _o(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Pn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&vt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let v;0===o.length?v=m:(o+=m,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:vt()}u=l+2}return new Pn(r)}const T0=["userId","batchId"];function xm(n,e){return[n,oi(e)]}function A0(n,e,t){return[n,oi(e),t]}const HC={},GC=["prefixPath","collectionGroup","readTime","documentId"],zC=["prefixPath","collectionGroup","documentId"],fS=["collectionGroup","readTime","prefixPath","documentId"],pS=["canonicalId","targetId"],gS=["targetId","path"],Mf=["path","targetId"],mS=["collectionId","parent"],yS=["indexId","uid"],vS=["uid","sequenceNumber"],Om=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qC=["indexId","uid","orderedDocumentKey"],ZC=["userId","collectionPath","documentId"],WC=["userId","collectionPath","largestBatchId"],_S=["userId","collectionGroup","largestBatchId"],pd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xf=[...pd,"documentOverlays"],KC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],YC=KC,wS=[...YC,"indexConfiguration","indexState","indexEntries"];class Nm extends b0{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ai(n,e){const t=lt(n);return Hi.M(t.ht,e)}function S0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Eu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function M0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class cr{constructor(e,t){this.comparator=e,this.root=t||Gi.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rm(this.root,e,this.comparator,!0)}}class Rm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gi{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Gi.RED,this.left=o??Gi.EMPTY,this.right=u??Gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Gi(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Gi.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1,Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Gi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _r{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ES(this.data.getIterator())}getIteratorFrom(e){return new ES(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _r)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _r(this.comparator);return t.data=e,t}}class ES{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Of(n){return n.hasNext()?n.getNext():void 0}class ts{constructor(e){this.fields=e,e.sort(Rr.comparator)}static empty(){return new ts([])}unionWith(e){let t=new _r(Rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Nf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Nf("Invalid base64 string: "+o):o}}(e);return new ui(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new ui(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const QC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(n){if(St(!!n),"string"==typeof n){let e=0;const t=QC.exec(n);if(St(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pr(n.seconds),nanos:Pr(n.nanos)}}function Pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ia(n){return"string"==typeof n?ui.fromBase64String(n):ui.fromUint8Array(n)}function Pm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function km(n){const e=n.mapValue.fields.__previous_value__;return Pm(e)?km(e):e}function Fm(n){const e=Ws(n.mapValue.fields.__local_write_time__.timestampValue);return new vr(e.seconds,e.nanos)}class CS{constructor(e,t,r,o,u,l,m,v,C){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=v,this.useFetchStreams=C}}class Ca{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ca("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ca&&e.projectId===this.projectId&&e.database===this.database}}const Iu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lm={nullValue:"NULL_VALUE"};function Ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pm(n)?4:jm(n)?9007199254740991:10:vt()}function ra(n,e){if(n===e)return!0;const t=Ks(n);if(t!==Ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fm(n).isEqual(Fm(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ws(r.timestampValue),l=Ws(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ia(n.bytesValue).isEqual(Ia(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Pr(r.geoPointValue.latitude)===Pr(o.geoPointValue.latitude)&&Pr(r.geoPointValue.longitude)===Pr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Pr(r.integerValue)===Pr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Pr(r.doubleValue),l=Pr(o.doubleValue);return u===l?Af(u)===Af(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return hd(n.arrayValue.values||[],e.arrayValue.values||[],ra);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(S0(u)!==S0(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!ra(u[m],l[m])))return!1;return!0}(n,e);default:return vt()}var o}function gd(n,e){return void 0!==(n.values||[]).find(t=>ra(t,e))}function Cu(n,e){if(n===e)return 0;const t=Ks(n),r=Ks(e);if(t!==r)return nn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return nn(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=Pr(o.integerValue||o.doubleValue),m=Pr(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return x0(n.timestampValue,e.timestampValue);case 4:return x0(Fm(n),Fm(e));case 5:return nn(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Ia(o),m=Ia(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let v=0;v<l.length&&v<m.length;v++){const C=nn(l[v],m[v]);if(0!==C)return C}return nn(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=nn(Pr(o.latitude),Pr(u.latitude));return 0!==l?l:nn(Pr(o.longitude),Pr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let v=0;v<l.length&&v<m.length;++v){const C=Cu(l[v],m[v]);if(C)return C}return nn(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Iu.mapValue&&u===Iu.mapValue)return 0;if(o===Iu.mapValue)return 1;if(u===Iu.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),v=u.fields||{},C=Object.keys(v);m.sort(),C.sort();for(let b=0;b<m.length&&b<C.length;++b){const x=nn(m[b],C[b]);if(0!==x)return x;const q=Cu(l[m[b]],v[C[b]]);if(0!==q)return q}return nn(m.length,C.length)}(n.mapValue,e.mapValue);default:throw vt()}}function x0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return nn(n,e);const t=Ws(n),r=Ws(e),o=nn(t.seconds,r.seconds);return 0!==o?o:nn(t.nanos,r.nanos)}function md(n){return Vm(n)}function Vm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ws(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ia(n.bytesValue).toBase64():"referenceValue"in n?at.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=Vm(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${Vm(r.fields[m])}`;return u+"}"}(n.mapValue):vt();var e}function Da(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function O0(n){return!!n&&"integerValue"in n}function yd(n){return!!n&&"arrayValue"in n}function N0(n){return!!n&&"nullValue"in n}function JC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bm(n){return!!n&&"mapValue"in n}function Rf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Eu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Rf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function DS(n){return"nullValue"in n?Lm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Da(Ca.empty(),at.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:vt()}function XC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Da(Ca.empty(),at.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Iu:vt()}function eD(n,e){const t=Cu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function tD(n,e){const t=Cu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Pi{constructor(e){this.value=e}static empty(){return new Pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rf(t)}setAll(e){let t=Rr.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=Rf(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Bm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Bm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Eu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Pi(Rf(this.value))}}function nD(n){const e=[];return Eu(n.fields,(t,r)=>{const o=new Rr([t]);if(Bm(r)){const u=nD(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new ts(e)}class fr{constructor(e,t,r,o,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new fr(e,0,Mt.min(),Mt.min(),Mt.min(),Pi.empty(),0)}static newFoundDocument(e,t,r,o){return new fr(e,1,t,Mt.min(),r,o,0)}static newNoDocument(e,t){return new fr(e,2,t,Mt.min(),Mt.min(),Pi.empty(),0)}static newUnknownDocument(e,t){return new fr(e,3,t,Mt.min(),Mt.min(),Pi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Du{constructor(e,t){this.position=e,this.inclusive=t}}function rD(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?at.comparator(at.fromName(l.referenceValue),t.key):Cu(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function iD(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ra(n.position[t],e.position[t]))return!1;return!0}class kc{constructor(e,t="asc"){this.field=e,this.dir=t}}function sD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class oD{}class On extends oD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new bS(e,t,r):"array-contains"===t?new cD(e,r):"in"===t?new bu(e,r):"not-in"===t?new lD(e,r):"array-contains-any"===t?new AS(e,r):new On(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new TS(e,r):new F0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Cu(t,this.value)):null!==t&&Ks(this.value)===Ks(t)&&this.matchesComparison(Cu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Wn extends oD{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Wn(e,t)}matches(e){return vd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function vd(n){return"and"===n.op}function R0(n){return"or"===n.op}function P0(n){return aD(n)&&vd(n)}function aD(n){for(const e of n.filters)if(e instanceof Wn)return!1;return!0}function Pf(n){if(n instanceof On)return n.field.canonicalString()+n.op.toString()+md(n.value);if(P0(n))return n.filters.map(e=>Pf(e)).join(",");{const e=n.filters.map(t=>Pf(t)).join(",");return`${n.op}(${e})`}}function $m(n,e){return n instanceof On?(t=n,(r=e)instanceof On&&t.op===r.op&&t.field.isEqual(r.field)&&ra(t.value,r.value)):n instanceof Wn?function(t,r){return r instanceof Wn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&$m(u,r.filters[l]),!0)}(n,e):void vt();var t,r}function k0(n,e){const t=n.filters.concat(e);return Wn.create(t,n.op)}function Hm(n){return n instanceof On?`${(e=n).field.canonicalString()} ${e.op} ${md(e.value)}`:n instanceof Wn?function(e){return e.op.toString()+" {"+e.getFilters().map(Hm).join(" ,")+"}"}(n):"Filter";var e}class bS extends On{constructor(e,t,r){super(e,t,r),this.key=at.fromName(r.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.matchesComparison(t)}}class TS extends On{constructor(e,t){super(e,"in",t),this.keys=uD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class F0 extends On{constructor(e,t){super(e,"not-in",t),this.keys=uD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>at.fromName(r.referenceValue))}class cD extends On{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yd(t)&&gd(t.arrayValue,this.value)}}class bu extends On{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gd(this.value.arrayValue,t)}}class lD extends On{constructor(e,t){super(e,"not-in",t)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gd(this.value.arrayValue,t)}}class AS extends On{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gd(this.value.arrayValue,r))}}class gO{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function kf(n,e=null,t=[],r=[],o=null,u=null,l=null){return new gO(n,e,t,r,o,u,l)}function ba(n){const e=lt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Pf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),na(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>md(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>md(r)).join(",")),e.dt=t}return e.dt}function Ff(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$m(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iD(n.startAt,e.startAt)&&iD(n.endAt,e.endAt)}function Lf(n){return at.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Vf(n,e){return n.filters.filter(t=>t instanceof On&&t.field.isEqual(e))}function dD(n,e,t){let r=Lm,o=!0;for(const u of Vf(n,e)){let l=Lm,m=!0;switch(u.op){case"<":case"<=":l=DS(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Lm}eD({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];eD({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function L0(n,e,t){let r=Iu,o=!0;for(const u of Vf(n,e)){let l=Iu,m=!0;switch(u.op){case">=":case">":l=XC(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Iu}tD({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];tD({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class wo{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=v,this.wt=null,this._t=null}}function V0(n,e,t,r,o,u,l,m){return new wo(n,e,t,r,o,u,l,m)}function Fc(n){return new wo(n)}function U0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Gm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function zm(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function B0(n){return null!==n.collectionGroup}function Lc(n){const e=lt(n);if(null===e.wt){e.wt=[];const t=zm(e),r=Gm(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new kc(t)),e.wt.push(new kc(Rr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new kc(Rr.keyField(),u))}}}return e.wt}function ns(n){const e=lt(n);if(!e._t)if("F"===e.limitType)e._t=kf(e.path,e.collectionGroup,Lc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Lc(e))t.push(new kc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Du(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Du(e.startAt.position,e.startAt.inclusive):null;e._t=kf(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function qm(n,e){e.getFirstInequalityField(),zm(n);const t=n.filters.concat([e]);return new wo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function j0(n,e,t){return new wo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _d(n,e){return Ff(ns(n),ns(e))&&n.limitType===e.limitType}function hD(n){return`${ba(ns(n))}|lt:${n.limitType}`}function $0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Hm(r)).join(", ")}]`),na(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>md(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>md(r)).join(",")),`Target(${t})`}(ns(n))}; limitType=${n.limitType})`}function Zm(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):at.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of Lc(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=rD(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,Lc(t),r)||t.endAt&&!function(o,u,l){const m=rD(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,Lc(t),r)));var t,r}function fD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pD(n){return(e,t)=>{let r=!1;for(const o of Lc(n)){const u=gD(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function gD(n,e,t){const r=n.field.isKeyField()?at.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),v=l.data.field(o);return null!==m&&null!==v?Cu(m,v):vt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}class Ta{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Eu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return M0(this.inner)}size(){return this.innerSize}}const SS=new cr(at.comparator);function gs(){return SS}const mD=new cr(at.comparator);function Uf(...n){let e=mD;for(const t of n)e=e.insert(t.key,t);return e}function yD(n){let e=mD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ia(){return Bf()}function vD(){return Bf()}function Bf(){return new Ta(n=>n.toString(),(n,e)=>n.isEqual(e))}const jf=new cr(at.comparator),_D=new _r(at.comparator);function dn(...n){let e=_D;for(const t of n)e=e.add(t);return e}const wD=new _r(nn);function Wm(){return wD}function H0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Af(e)?"-0":e}}function ED(n){return{integerValue:""+n}}function ID(n,e){return Sf(e)?ED(e):H0(n,e)}class G0{constructor(){this._=void 0}}function mO(n,e,t){return n instanceof wd?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Pm(o)&&(o=km(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Vc?DD(n,e):n instanceof Eo?bD(n,e):function(r,o){const u=CD(r,o),l=TD(u)+TD(r.gt);return O0(u)&&O0(r.gt)?ED(l):H0(r.serializer,l)}(n,e)}function MS(n,e,t){return n instanceof Vc?DD(n,e):n instanceof Eo?bD(n,e):t}function CD(n,e){return n instanceof Tu?O0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class wd extends G0{}class Vc extends G0{constructor(e){super(),this.elements=e}}function DD(n,e){const t=xS(e);for(const r of n.elements)t.some(o=>ra(o,r))||t.push(r);return{arrayValue:{values:t}}}class Eo extends G0{constructor(e){super(),this.elements=e}}function bD(n,e){let t=xS(e);for(const r of n.elements)t=t.filter(o=>!ra(o,r));return{arrayValue:{values:t}}}class Tu extends G0{constructor(e,t){super(),this.serializer=e,this.gt=t}}function TD(n){return Pr(n.integerValue||n.doubleValue)}function xS(n){return yd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $f{constructor(e,t){this.field=e,this.transform=t}}class Hf{constructor(e,t){this.version=e,this.transformResults=t}}class wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Km(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ym{}function Gf(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Uc(n.key,wr.none()):new Ed(n.key,n.data,wr.none());{const t=n.data,r=Pi.empty();let o=new _r(Rr.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Aa(n.key,r,new ts(o.toArray()),wr.none())}}function AD(n,e,t){n instanceof Ed?function(r,o,u){const l=r.value.clone(),m=MD(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Aa?function(r,o,u){if(!Km(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=MD(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(z0(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zf(n,e,t,r){return n instanceof Ed?function(o,u,l,m){if(!Km(o.precondition,u))return l;const v=o.value.clone(),C=xD(o.fieldTransforms,m,u);return v.setAll(C),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Aa?function(o,u,l,m){if(!Km(o.precondition,u))return l;const v=xD(o.fieldTransforms,m,u),C=u.data;return C.setAll(z0(o)),C.setAll(v),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,Km(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function SD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=CD(r.transform,o||null);null!=u&&(null===t&&(t=Pi.empty()),t.set(r.field,u))}return t||null}function qf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&hd(t,r,(o,u)=>function yO(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Vc&&r instanceof Vc||t instanceof Eo&&r instanceof Eo?hd(t.elements,r.elements,ra):t instanceof Tu&&r instanceof Tu?ra(t.gt,r.gt):t instanceof wd&&r instanceof wd);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ed extends Ym{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Aa extends Ym{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function z0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function MD(n,e,t){const r=new Map;St(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,MS(l,m,t[o]))}return r}function xD(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,mO(u,l,e))}return r}class Uc extends Ym{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Id extends Ym{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class q0{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&AD(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vD();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const v=Gf(l,m);null!==v&&r.set(o.key,v),l.isValidDocument()||l.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dn())}isEqual(e){return this.batchId===e.batchId&&hd(this.mutations,e.mutations,(t,r)=>qf(t,r))&&hd(this.baseMutations,e.baseMutations,(t,r)=>qf(t,r))}}class Z0{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){St(e.mutations.length===r.length);let o=jf;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new Z0(e,t,r,o)}}class Qm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class W0{constructor(e,t){this.count=e,this.unchangedNames=t}}var jr,kn;function K0(n){switch(n){default:return vt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function Y0(n){if(void 0===n)return Br("GRPC error has no .code"),ye.UNKNOWN;switch(n){case jr.OK:return ye.OK;case jr.CANCELLED:return ye.CANCELLED;case jr.UNKNOWN:return ye.UNKNOWN;case jr.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case jr.INTERNAL:return ye.INTERNAL;case jr.UNAVAILABLE:return ye.UNAVAILABLE;case jr.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case jr.NOT_FOUND:return ye.NOT_FOUND;case jr.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case jr.ABORTED:return ye.ABORTED;case jr.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case jr.DATA_LOSS:return ye.DATA_LOSS;default:return vt()}}(kn=jr||(jr={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";class Q0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Jm}static getOrCreateInstance(){return null===Jm&&(Jm=new Q0),Jm}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Jm=null;function Xm(){return new TextEncoder}const J0=new ta([4294967295,4294967295],0);function X0(n){const e=Xm().encode(n),t=new _0;return t.update(e),new Uint8Array(t.digest())}function ey(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ta([t,r],0),new ta([o,u],0)]}class Zf{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wf(`Invalid padding: ${t}`);if(r<0)throw new Wf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Wf(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Wf(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ta.fromNumber(this.It)}Et(e,t,r){let o=e.add(t.multiply(ta.fromNumber(r)));return 1===o.compare(J0)&&(o=new ta([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=X0(e),[r,o]=ey(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new Zf(u,o,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=X0(e),[r,o]=ey(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Wf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Kf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Yf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Kf(Mt.min(),o,new cr(nn),gs(),dn())}}class Yf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Yf(r,t,dn(),dn(),dn())}}class ty{constructor(e,t,r,o){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=o}}class ew{constructor(e,t){this.targetId=e,this.Vt=t}}class ny{constructor(e,t,r=ui.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class tw{constructor(){this.St=0,this.Dt=rw(),this.Ct=ui.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=dn(),t=dn(),r=dn();return this.Dt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:vt()}}),new Yf(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=rw()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class OS{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=gs(),this.zt=nw(),this.Wt=new cr(nn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:vt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,o)=>{this.te(o)&&t(o)})}ne(e){var t;const r=e.targetId,o=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(Lf(l))if(0===o){const m=new at(l.path);this.Yt(r,m,fr.newNoDocument(m,Mt.min()))}else St(1===o);else{const m=this.ie(r);if(m!==o){const v=this.re(e,m);0!==v&&(this.ee(r),this.Wt=this.Wt.insert(r,2===v?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Q0.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(C,b,x){var q,X,be,Fe,Ve,It;const Ut={localCacheCount:b,existenceFilterCount:x.count},_t=x.unchangedNames;return _t&&(Ut.bloomFilter={applied:0===C,hashCount:null!==(q=_t?.hashCount)&&void 0!==q?q:0,bitmapLength:null!==(Fe=null===(be=null===(X=_t?.bits)||void 0===X?void 0:X.bitmap)||void 0===be?void 0:be.length)&&void 0!==Fe?Fe:0,padding:null!==(It=null===(Ve=_t?.bits)||void 0===Ve?void 0:Ve.padding)&&void 0!==It?It:0}),Ut}(v,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let v,C;try{v=Ia(u).toUint8Array()}catch(b){if(b instanceof Nf)return Ms("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{C=new Zf(v,l,m)}catch(b){return Ms(b instanceof Wf?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===C.It?1:o!==t-this.oe(e.targetId,C)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),o++)}),o}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&Lf(m.target)){const v=new at(m.target.path);null!==this.jt.get(v)||this.ae(l,v)||this.Yt(l,v,fr.newNoDocument(v,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=dn();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(v=>{const C=this.se(v);return!C||"TargetPurposeLimboResolution"===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const o=new Kf(e,t,this.Wt,this.jt,r);return this.jt=gs(),this.zt=nw(),this.Wt=new cr(nn),o}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,t)?o.Bt(t,1):o.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new tw,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new _r(nn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new tw),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function nw(){return new cr(at.comparator)}function rw(){return new cr(at.comparator)}const NS={asc:"ASCENDING",desc:"DESCENDING"},ND={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RD={and:"AND",or:"OR"};class RS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ry(n,e){return n.useProto3Json||na(e)?e:{value:e}}function Bc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zi(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Cd(n,e){return Bc(n,e.toTimestamp())}function $r(n){return St(!!n),Mt.fromTimestamp(function(e){const t=Ws(e);return new vr(t.seconds,t.nanos)}(n))}function iw(n,e){return(t=n,new Pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function PS(n){const e=Pn.fromString(n);return St(cw(e)),e}function iy(n,e){return iw(n.databaseId,e.path)}function Io(n,e){const t=PS(e);if(t.get(1)!==n.databaseId.projectId)throw new je(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new at(FS(t))}function Qf(n,e){return iw(n.databaseId,e)}function kS(n){const e=PS(n);return 4===e.length?Pn.emptyPath():FS(e)}function sy(n){return new Pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FS(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Dd(n,e,t){return{name:iy(n,e),fields:t.value.mapValue.fields}}function PD(n,e,t){const r=Io(n,e.name),o=$r(e.updateTime),u=e.createTime?$r(e.createTime):Mt.min(),l=new Pi({mapValue:{fields:e.fields}}),m=fr.newFoundDocument(r,o,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function bd(n,e){let t;if(e instanceof Ed)t={update:Dd(n,e.key,e.value)};else if(e instanceof Uc)t={delete:iy(n,e.key)};else if(e instanceof Aa)t={update:Dd(n,e.key,e.data),updateMask:BS(e.fieldMask)};else{if(!(e instanceof Id))return vt();t={verify:iy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof wd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Vc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Eo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Tu)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw vt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Cd(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:vt()),t;var o}function ow(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?wr.updateTime($r(o.updateTime)):void 0!==o.exists?wr.exists(o.exists):wr.none():wr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(St("REQUEST_TIME"===l.setToServerValue),m=new wd):"appendMissingElements"in l?m=new Vc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Eo(l.removeAllFromArray.values||[]):"increment"in l?m=new Tu(u,l.increment):vt();const v=Rr.fromServerFormat(l.fieldPath);return new $f(v,m)}(n,o)):[];var o;if(e.update){const o=Io(n,e.update.name),u=new Pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ts((e.updateMask.fieldPaths||[]).map(C=>Rr.fromServerFormat(C)));return new Aa(o,u,l,t,r)}return new Ed(o,u,t,r)}if(e.delete){const o=Io(n,e.delete);return new Uc(o,t)}if(e.verify){const o=Io(n,e.verify);return new Id(o,t)}return vt()}function kD(n,e){return{documents:[Qf(n,e.path)]}}function Jf(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Qf(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Qf(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0!==v.length)return $c(Wn.create(v,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(C=>{return{field:Au((b=C).field),direction:uw(b.dir)};var b})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=ry(n,e.limit);var m,v;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function aw(n){let e=kS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){St(1===r);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=function(b){const x=Xf(b);return x instanceof Wn&&P0(x)?x.getFilters():[x]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new kc(jc((x=b).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let m=null;t.limit&&(m=function(b){let x;return x="object"==typeof b?b.value:b,na(x)?null:x}(t.limit));let v=null;var b;t.startAt&&(v=new Du((b=t.startAt).values||[],!!b.before));let C=null;return t.endAt&&(C=function(b){return new Du(b.values||[],!b.before)}(t.endAt)),V0(e,o,l,u,m,"F",v,C)}function Xf(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=jc(e.unaryFilter.field);return On.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=jc(e.unaryFilter.field);return On.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=jc(e.unaryFilter.field);return On.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=jc(e.unaryFilter.field);return On.create(u,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(n):void 0!==n.fieldFilter?On.create(jc((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Wn.create(e.compositeFilter.filters.map(t=>Xf(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return vt()}}(e.compositeFilter.op))}(n):vt();var e}function uw(n){return NS[n]}function vO(n){return ND[n]}function FD(n){return RD[n]}function Au(n){return{fieldPath:n.canonicalString()}}function jc(n){return Rr.fromServerFormat(n.fieldPath)}function $c(n){return n instanceof On?function(e){if("=="===e.op){if(JC(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NAN"}};if(N0(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(JC(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NOT_NAN"}};if(N0(e.value))return{unaryFilter:{field:Au(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Au(e.field),op:vO(e.op),value:e.value}}}(n):n instanceof Wn?function(e){const t=e.getFilters().map(r=>$c(r));return 1===t.length?t[0]:{compositeFilter:{op:FD(e.op),filters:t}}}(n):vt()}function BS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Co{constructor(e,t,r,o,u=Mt.min(),l=Mt.min(),m=ui.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=v}withSequenceNumber(e){return new Co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class jS{constructor(e){this.fe=e}}function HS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:oy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:iy(o=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Bc(o,u.version.toTimestamp()),createTime:Bc(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hc(e.version)};else{if(!e.isUnknownDocument())return vt();r.unknownDocument={path:t.path.toArray(),version:Hc(e.version)}}var o,u;return r}function oy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gc(n){const e=new vr(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function Su(n,e){const t=(e.baseMutations||[]).map(u=>ow(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>ow(n.fe,u)),o=vr.fromMillis(e.localWriteTimeMs);return new q0(e.batchId,o,t,r)}function Td(n){const e=Gc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Gc(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var o;return void 0!==n.query.documents?(St(1===(o=n.query).documents.length),r=ns(Fc(kS(o.documents[0])))):r=ns(aw(n.query)),new Co(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ui.fromBase64String(n.resumeToken))}function LD(n,e){const t=Hc(e.snapshotVersion),r=Hc(e.lastLimboFreeSnapshotVersion);let o;o=Lf(e.target)?kD(n.fe,e.target):Jf(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ba(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function ay(n){const e=aw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?j0(e,e.limit,"L"):e}function uy(n,e){return new Qm(e.largestBatchId,ow(n.fe,e.overlayMutation))}function VD(n,e){const t=e.path.lastSegment();return[n,oi(e.path.popLast()),t]}function UD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Hc(r.readTime),documentKey:oi(r.documentKey.path),largestBatchId:r.largestBatchId}}class BD{getBundleMetadata(e,t){return jD(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Gc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return jD(e).put({bundleId:(r=t).id,createTime:Hc($r(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return lw(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:ay(o.bundledQuery),readTime:Gc(o.readTime)};var o})}saveNamedQuery(e,t){return lw(e).put({name:(r=t).name,readTime:Hc($r(r.readTime)),bundledQuery:r.bundledQuery});var r}}function jD(n){return ai(n,"bundles")}function lw(n){return ai(n,"namedQueries")}class ep{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new ep(e,t.uid||"")}getOverlay(e,t){return Ad(e).get(VD(this.userId,t)).next(r=>r?uy(this.serializer,r):null)}getOverlays(e,t){const r=ia();return le.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new Qm(t,l);o.push(this.we(e,m))}),le.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(oi(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Ad(e).J("collectionPathOverlayIndex",m))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const o=ia(),u=oi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Ad(e).j("collectionPathOverlayIndex",l).next(m=>{for(const v of m){const C=uy(this.serializer,v);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=ia();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ad(e).X({index:"collectionGroupOverlayIndex",range:m},(v,C,b)=>{const x=uy(this.serializer,C);u.size()<o||x.largestBatchId===l?(u.set(x.getKey(),x),l=x.largestBatchId):b.done()}).next(()=>u)}we(e,t){return Ad(e).put(function(r,o,u){const[l,m,v]=VD(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:bd(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Ad(n){return ai(n,"documentOverlays")}class Mu{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Pr(e.integerValue));else if("doubleValue"in e){const r=Pr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Af(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ia(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?jm(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):vt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const o of Object.keys(r))this.Te(o,t),this.me(r[o],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const o of r)this.me(o,t)}ve(e,t){this.ye(t,37),at.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function GS(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function $D(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=GS(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Mu.Ve=new Mu;class _O{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=t.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=t.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(e){const t=this.Fe(e),r=$D(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Le(e){const t=this.Fe(e),r=$D(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class HD{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class wO{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class cy{constructor(){this.je=new _O,this.ze=new HD(this.je),this.We=new wO(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Sd{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Sd(this.indexId,this.documentKey,this.arrayValue,r)}}function zc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=zS(n.arrayValue,e.arrayValue),0!==t?t:(t=zS(n.directionalValue,e.directionalValue),0!==t?t:at.comparator(n.documentKey,e.documentKey)))}function zS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class EO{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){St(e.collectionGroup===this.collectionId);const t=E0(e);if(void 0!==t&&!this.en(t))return!1;const r=Nc(e);let o=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function qS(n){var e,t;if(St(n instanceof On||n instanceof Wn),n instanceof On){if(n instanceof bu){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>On.create(n.field,"==",u)))||[];return Wn.create(o,"or")}return n}const r=n.filters.map(o=>qS(o));return Wn.create(r,n.op)}function IO(n){if(0===n.getFilters().length)return[];const e=hy(qS(n));return St(dy(e)),GD(e)||ly(e)?[e]:e.getFilters()}function GD(n){return n instanceof On}function ly(n){return n instanceof Wn&&P0(n)}function dy(n){return GD(n)||ly(n)||function(e){if(e instanceof Wn&&R0(e)){for(const t of e.getFilters())if(!GD(t)&&!ly(t))return!1;return!0}return!1}(n)}function hy(n){if(St(n instanceof On||n instanceof Wn),n instanceof On)return n;if(1===n.filters.length)return hy(n.filters[0]);const e=n.filters.map(r=>hy(r));let t=Wn.create(e,n.op);return t=fy(t),dy(t)?t:(St(t instanceof Wn),St(vd(t)),St(t.filters.length>1),t.filters.reduce((r,o)=>dw(r,o)))}function dw(n,e){let t;return St(n instanceof On||n instanceof Wn),St(e instanceof On||e instanceof Wn),t=n instanceof On?e instanceof On?Wn.create([n,e],"and"):tp(n,e):e instanceof On?tp(e,n):function(r,o){if(St(r.filters.length>0&&o.filters.length>0),vd(r)&&vd(o))return k0(r,o.getFilters());const u=R0(r)?r:o,l=R0(r)?o:r,m=u.filters.map(v=>dw(v,l));return Wn.create(m,"or")}(n,e),fy(t)}function tp(n,e){if(vd(e))return k0(e,n.getFilters());{const t=e.filters.map(r=>dw(n,r));return Wn.create(t,"or")}}function fy(n){if(St(n instanceof On||n instanceof Wn),n instanceof On)return n;const e=n.getFilters();if(1===e.length)return fy(e[0]);if(aD(n))return n;const t=e.map(o=>fy(o)),r=[];return t.forEach(o=>{o instanceof On?r.push(o):o instanceof Wn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:Wn.create(r,n.op)}class CO{constructor(){this.rn=new zD}addToCollectionParentIndex(e,t){return this.rn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(fs.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class zD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new _r(Pn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new _r(Pn.comparator)).toArray()}}const py=new Uint8Array(0);class qD{constructor(e,t){this.user=e,this.databaseId=t,this.on=new zD,this.un=new Ta(r=>ba(r),(r,o)=>Ff(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:oi(o)};return ZD(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[UC(t),""],!1,!0);return ZD(e).j(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(_o(l.parent))}return r})}addFieldIndex(e,t){const r=gy(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=my(e);return u.next(m=>{l.put(UD(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=gy(e),o=my(e),u=np(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=np(e);let o=!0;const u=new Map;return le.forEach(this.cn(t),l=>this.an(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=dn();const m=[];return le.forEach(u,(v,C)=>{var b;ze("IndexedDbIndexManager",`Using index ${b=v,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(_t=>`${_t.fieldPath}:${_t.kind}`).join(",")}`} to execute ${ba(t)}`);const x=function(_t,jt){const un=E0(jt);if(void 0===un)return null;for(const Sn of Vf(_t,un.fieldPath))switch(Sn.op){case"array-contains-any":return Sn.value.arrayValue.values||[];case"array-contains":return[Sn.value]}return null}(C,v),q=function(_t,jt){const un=new Map;for(const Sn of Nc(jt))for(const ss of Vf(_t,Sn.fieldPath))switch(ss.op){case"==":case"in":un.set(Sn.fieldPath.canonicalString(),ss.value);break;case"not-in":case"!=":return un.set(Sn.fieldPath.canonicalString(),ss.value),Array.from(un.values())}return null}(C,v),X=function(_t,jt){const un=[];let Sn=!0;for(const ss of Nc(jt)){const Yd=0===ss.kind?dD(_t,ss.fieldPath,_t.startAt):L0(_t,ss.fieldPath,_t.startAt);un.push(Yd.value),Sn&&(Sn=Yd.inclusive)}return new Du(un,Sn)}(C,v),be=function(_t,jt){const un=[];let Sn=!0;for(const ss of Nc(jt)){const Yd=0===ss.kind?L0(_t,ss.fieldPath,_t.endAt):dD(_t,ss.fieldPath,_t.endAt);un.push(Yd.value),Sn&&(Sn=Yd.inclusive)}return new Du(un,Sn)}(C,v),Fe=this.hn(v,C,X),Ve=this.hn(v,C,be),It=this.ln(v,C,q),Ut=this.fn(v.indexId,x,Fe,X.inclusive,Ve,be.inclusive,It);return le.forEach(Ut,_t=>r.H(_t,t.limit).next(jt=>{jt.forEach(un=>{const Sn=at.fromSegments(un.documentKey);l.has(Sn)||(l=l.add(Sn),m.push(Sn))})}))}).next(()=>m)}return le.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:IO(Wn.create(e.filters,"and")).map(r=>kf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,o,u,l,m){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),C=v/(null!=t?t.length:1),b=[];for(let x=0;x<v;++x){const q=t?this.dn(t[x/C]):py,X=this.wn(e,q,r[x%C],o),be=this._n(e,q,u[x%C],l),Fe=m.map(Ve=>this.wn(e,q,Ve,!0));b.push(...this.createRange(X,be,Fe))}return b}wn(e,t,r,o){const u=new Sd(e,at.empty(),t,r);return o?u:u.Je()}_n(e,t,r,o){const u=new Sd(e,at.empty(),t,r);return o?u.Je():u}an(e,t){const r=new EO(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const o=this.cn(t);return le.forEach(o,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let v=new _r(Rr.comparator),C=!1;for(const b of m.filters)for(const x of b.getFlattenedFilters())x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?C=!0:v=v.add(x.field));for(const b of m.orderBy)b.field.isKeyField()||(v=v.add(b.field));return v.size+(C?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}mn(e,t){const r=new cy;for(const o of Nc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.He(o.kind);Mu.Ve._e(u,l)}return r.Qe()}dn(e){const t=new cy;return Mu.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new cy;return Mu.Ve._e(Da(this.databaseId,t),r.He(function(o){const u=Nc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let o=[];o.push(new cy);let u=0;for(const l of Nc(e)){const m=r[u++];for(const v of o)if(this.yn(t,l.fieldPath)&&yd(m))o=this.pn(o,l,m);else{const C=v.He(l.kind);Mu.Ve._e(m,C)}}return this.In(o)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const v=new cy;v.seed(m.Qe()),Mu.Ve._e(l,v.He(t.kind)),u.push(v)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof On&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=gy(e),o=my(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return le.forEach(u,m=>o.get([m.indexId,this.uid]).next(v=>{l.push(function(C,b){const x=b?new fd(b.sequenceNumber,new fs(Gc(b.readTime),new at(_o(b.documentKey)),b.largestBatchId)):fd.empty(),q=C.fields.map(([X,be])=>new Tf(Rr.fromServerFormat(X),be));return new Am(C.indexId,C.collectionGroup,q,x)}(m,v))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:nn(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=gy(e),u=my(e);return this.Tn(e).next(l=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>le.forEach(m,v=>u.put(UD(v.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?le.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),le.forEach(m,v=>this.En(e,o,v).next(C=>{const b=this.An(u,v);return C.isEqual(b)?le.resolve():this.vn(e,u,v,C,b)}))))})}Rn(e,t,r,o){return np(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,o){return np(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const o=np(e);let u=new _r(zc);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new Sd(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new _r(zc);const o=this.mn(t,e);if(null==o)return r;const u=E0(t);if(null!=u){const l=e.data.field(u.fieldPath);if(yd(l))for(const m of l.arrayValue.values||[])r=r.add(new Sd(t.indexId,e.key,this.dn(m),o))}else r=r.add(new Sd(t.indexId,e.key,py,o));return r}vn(e,t,r,o,u){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,v,C,b,x){const q=m.getIterator(),X=v.getIterator();let be=Of(q),Fe=Of(X);for(;be||Fe;){let Ve=!1,It=!1;if(be&&Fe){const Ut=C(be,Fe);Ut<0?It=!0:Ut>0&&(Ve=!0)}else null!=be?It=!0:Ve=!0;Ve?(b(Fe),Fe=Of(X)):It?(x(be),be=Of(q)):(be=Of(q),Fe=Of(X))}}(o,u,zc,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),le.waitFor(l)}Tn(e){let t=1;return my(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>zc(l,m)).filter((l,m,v)=>!m||0!==zc(l,v[m-1]));const o=[];o.push(e);for(const l of r){const m=zc(l,e),v=zc(l,t);if(0===m)o[0]=e.Je();else if(m>0&&v<0)o.push(l),o.push(l.Je());else if(v>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.bn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,py,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,py,[]]))}return u}bn(e,t){return zc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(WD)}getMinOffset(e,t){return le.mapArray(this.cn(t),r=>this.an(e,r).next(o=>o||vt())).next(WD)}}function ZD(n){return ai(n,"collectionParents")}function np(n){return ai(n,"indexEntries")}function gy(n){return ai(n,"indexConfiguration")}function my(n){return ai(n,"indexState")}function WD(n){St(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Sm(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new fs(e.readTime,e.documentKey,t)}const Md={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ci{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ci(e,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function KD(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const v=r.X({range:l},(b,x,q)=>(m++,q.delete()));u.push(v.next(()=>{St(1===m)}));const C=[];for(const b of t.mutations){const x=A0(e,b.key.path,t.batchId);u.push(o.delete(x)),C.push(b.key)}return le.waitFor(u).next(()=>C)}function yy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw vt();e=n.noDocument}return JSON.stringify(e).length}ci.DEFAULT_COLLECTION_PERCENTILE=10,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ci.DEFAULT=new ci(41943040,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ci.DISABLED=new ci(-1,0,0);class vy{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(e,t,r,o){St(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new vy(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xu(e).X({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=xd(e),l=xu(e);return l.add({}).next(m=>{St("number"==typeof m);const v=new q0(m,t,r,o),C=function(q,X,be){const Fe=be.baseMutations.map(It=>bd(q.fe,It)),Ve=be.mutations.map(It=>bd(q.fe,It));return{userId:X,batchId:be.batchId,localWriteTimeMs:be.localWriteTime.toMillis(),baseMutations:Fe,mutations:Ve}}(this.serializer,this.userId,v),b=[];let x=new _r((q,X)=>nn(q.canonicalString(),X.canonicalString()));for(const q of o){const X=A0(this.userId,q.key.path,m);x=x.add(q.key.path.popLast()),b.push(l.put(C)),b.push(u.put(X,HC))}return x.forEach(q=>{b.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.Vn[m]=v.keys()}),le.waitFor(b).next(()=>v)})}lookupMutationBatch(e,t){return xu(e).get(t).next(r=>r?(St(r.userId===this.userId),Su(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?le.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Vn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return xu(e).X({index:"userMutationsIndex",range:o},(l,m,v)=>{m.userId===this.userId&&(St(m.batchId>=r),u=Su(this.serializer,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return xu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xu(e).j("userMutationsIndex",t).next(r=>r.map(o=>Su(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=xm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return xd(e).X({range:o},(l,m,v)=>{const[C,b,x]=l,q=_o(b);if(C===this.userId&&t.path.isEqual(q))return xu(e).get(x).next(X=>{if(!X)throw vt();St(X.userId===this.userId),u.push(Su(this.serializer,X))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _r(nn);const o=[];return t.forEach(u=>{const l=xm(this.userId,u.path),m=IDBKeyRange.lowerBound(l),v=xd(e).X({range:m},(C,b,x)=>{const[q,X,be]=C,Fe=_o(X);q===this.userId&&u.path.isEqual(Fe)?r=r.add(be):x.done()});o.push(v)}),le.waitFor(o).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=xm(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new _r(nn);return xd(e).X({range:l},(v,C,b)=>{const[x,q,X]=v,be=_o(q);x===this.userId&&r.isPrefixOf(be)?be.length===o&&(m=m.add(X)):b.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(xu(e).get(u).next(l=>{if(null===l)throw vt();St(l.userId===this.userId),r.push(Su(this.serializer,l))}))}),le.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return KD(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),le.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return xd(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const v=_o(u[1]);o.push(v)}else m.done()}).next(()=>{St(0===o.length)})})}containsKey(e,t){return YD(e,this.userId,t)}xn(e){return _y(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function YD(n,e,t){const r=xm(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return xd(n).X({range:u,Y:!0},(m,v,C)=>{const[b,x,q]=m;b===e&&x===o&&(l=!0),C.done()}).next(()=>l)}function xu(n){return ai(n,"mutations")}function xd(n){return ai(n,"documentMutations")}function _y(n){return ai(n,"mutationQueues")}class qc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new qc(0)}static Mn(){return new qc(-1)}}class ZS{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new qc(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Mt.fromTimestamp(new vr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.On(e,o)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Od(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Od(e).X((l,m)=>{const v=Td(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>le.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Od(e).X((r,o)=>{const u=Td(o);t(u)})}$n(e){return QD(e).get("targetGlobalKey").next(t=>(St(null!==t),t))}On(e,t){return QD(e).put("targetGlobalKey",t)}Fn(e,t){return Od(e).put(LD(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ba(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Od(e).X({range:o,index:"queryTargetsIndex"},(l,m,v)=>{const C=Td(m);Ff(t,C.target)&&(u=C,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Ou(e);return t.forEach(l=>{const m=oi(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),le.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ou(e);return le.forEach(t,u=>{const l=oi(u.path);return le.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ou(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ou(e);let u=dn();return o.X({range:r,Y:!0},(l,m,v)=>{const C=_o(l[1]),b=new at(C);u=u.add(b)}).next(()=>u)}containsKey(e,t){const r=oi(t.path),o=IDBKeyRange.bound([r],[UC(r)],!1,!0);let u=0;return Ou(e).X({index:"documentTargetsIndex",Y:!0,range:o},([l,m],v,C)=>{0!==l&&(u++,C.done())}).next(()=>u>0)}le(e,t){return Od(e).get(t).next(r=>r?Td(r):null)}}function Od(n){return ai(n,"targets")}function QD(n){return ai(n,"targetGlobal")}function Ou(n){return ai(n,"targetDocuments")}function JD([n,e],[t,r]){const o=nn(n,t);return 0===o?nn(e,r):o}class WS{constructor(e){this.Ln=e,this.buffer=new _r(JD),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();JD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class XD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Pc(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield wa(r)}yield t.Qn(3e5)}))}}class KS{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(xs.ct);const r=new WS(t);return this.jn.forEachTarget(e,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(e,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Md)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Md):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,o,u,l,m,v,C;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,l=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(r=x,m=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(C=Date.now(),bm()<=Oi.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${x} documents in `+(C-v)+`ms\nTotal Duration: ${C-b}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x})))}}class fw{constructor(e,t){this.db=e,this.garbageCollector=function hw(n,e){return new KS(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,o)=>t(o))}addReference(e,t,r){return wy(e,r)}removeReference(e,t,r){return wy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return wy(e,t)}Xn(e,t){return function(r,o){let u=!1;return _y(r).Z(l=>YD(r,l,o).next(m=>(m&&(u=!0),le.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const v=this.Xn(e,l).next(C=>{if(!C)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Mt.min()),Ou(e).delete([0,oi(l.path)])))});o.push(v)}}).next(()=>le.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return wy(e,t)}Yn(e,t){const r=Ou(e);let o,u=xs.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:v,sequenceNumber:C})=>{0===l?(u!==xs.ct&&t(new at(_o(o)),u),u=C,o=v):u=xs.ct}).next(()=>{u!==xs.ct&&t(new at(_o(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wy(n,e){return Ou(n).put((r=n.currentSequenceNumber,{targetId:0,path:oi(e.path),sequenceNumber:r}));var r}class eb{constructor(){this.changes=new Ta(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tb{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Nu(e).put(r)}removeEntry(e,t,r){return Nu(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],oy(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=fr.newInvalidDocument(t);return Nu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Nd(t))},(o,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:fr.newInvalidDocument(t)};return Nu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Nd(t))},(o,u)=>{r={document:this.ts(t,u),size:yy(u)}}).next(()=>r)}getEntries(e,t){let r=gs();return this.ns(e,t,(o,u)=>{const l=this.ts(o,u);r=r.insert(o,l)}).next(()=>r)}ss(e,t){let r=gs(),o=new cr(at.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),o=o.insert(u,yy(l))}).next(()=>({documents:r,rs:o}))}ns(e,t,r){if(t.isEmpty())return le.resolve();let o=new _r(gw);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(Nd(o.first()),Nd(o.last())),l=o.getIterator();let m=l.getNext();return Nu(e).X({index:"documentKeyIndex",range:u},(v,C,b)=>{const x=at.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&gw(m,x)<0;)r(m,null),m=l.getNext();m&&m.isEqual(x)&&(r(m,C),m=l.hasNext()?l.getNext():null),m?b.G(Nd(m)):b.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),oy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nu(e).j(IDBKeyRange.bound(l,m,!0)).next(v=>{let C=gs();for(const b of v){const x=this.ts(at.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);x.isFoundDocument()&&(Zm(t,x)||o.has(x.key))&&(C=C.insert(x.key,x))}return C})}getAllFromCollectionGroup(e,t,r,o){let u=gs();const l=nb(t,r),m=nb(t,fs.max());return Nu(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(v,C,b)=>{const x=this.ts(at.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(x.key,x),u.size===o&&b.done()}).next(()=>u)}newChangeBuffer(e){return new DO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return rs(e).get("remoteDocumentGlobalKey").next(t=>(St(!!t),t))}Zn(e,t){return rs(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function $S(n,e){let t;if(e.document)t=PD(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=at.fromSegments(e.noDocument.path),o=Gc(e.noDocument.readTime);t=fr.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return vt();{const r=at.fromSegments(e.unknownDocument.path),o=Gc(e.unknownDocument.version);t=fr.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new vr(r[0],r[1]);return Mt.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return fr.newInvalidDocument(e)}}function pw(n){return new tb(n)}class DO extends eb{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ta(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new _r((u,l)=>nn(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const v=HS(this.os.serializer,l);o=o.add(u.path.popLast());const C=yy(v);r+=C-m.size,t.push(this.os.addEntry(e,u,v))}else if(r-=m.size,this.trackRemovals){const v=HS(this.os.serializer,l.convertToNoDocument(Mt.min()));t.push(this.os.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:o})=>(o.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function rs(n){return ai(n,"remoteDocumentGlobal")}function Nu(n){return ai(n,"remoteDocumentsV14")}function Nd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nb(n,e){const t=e.documentKey.path.toArray();return[n,oy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gw(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=nn(t[u],r[u]),o)return o;return o=nn(t.length,r.length),o||(o=nn(t[t.length-2],r[r.length-2]),o||nn(t[t.length-1],r[r.length-1]))}class YS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ey{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&zf(r.mutation,o,ts.empty(),vr.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,dn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=dn()){const o=ia();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Uf();return u.forEach((m,v)=>{l=l.insert(m,v.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ia();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,dn()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=gs();const l=Bf(),m=Bf();return t.forEach((v,C)=>{const b=r.get(C.key);o.has(C.key)&&(void 0===b||b.mutation instanceof Aa)?u=u.insert(C.key,C):void 0!==b?(l.set(C.key,b.mutation.getFieldMask()),zf(b.mutation,C,b.mutation.getFieldMask(),vr.now())):l.set(C.key,ts.empty())}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((C,b)=>l.set(C,b)),t.forEach((C,b)=>{var x;return m.set(C,new YS(b,null!==(x=l.get(C))&&void 0!==x?x:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Bf();let o=new cr((l,m)=>l-m),u=dn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(v=>{const C=t.get(v);if(null===C)return;let b=r.get(v)||ts.empty();b=m.applyToLocalView(C,b),r.set(v,b);const x=(o.get(m.batchId)||dn()).add(v);o=o.insert(m.batchId,x)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),C=v.key,b=v.value,x=vD();b.forEach(q=>{if(!u.has(q)){const X=Gf(t.get(q),r.get(q));null!==X&&x.set(q,X),u=u.add(q)}}),l.push(this.documentOverlayCache.saveOverlays(e,C,x))}return le.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return at.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):B0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):le.resolve(ia());let m=-1,v=u;return l.next(C=>le.forEach(C,(b,x)=>(m<x.largestBatchId&&(m=x.largestBatchId),u.get(b)?le.resolve():this.remoteDocumentCache.getEntry(e,b).next(q=>{v=v.insert(b,q)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,v,C,dn())).next(b=>({batchId:m,changes:yD(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next(r=>{let o=Uf();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Uf();return this.indexManager.getCollectionParents(e,o).next(l=>le.forEach(l,m=>{const v=(C=t,b=m.child(o),new wo(b,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,b;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(C=>{C.forEach((b,x)=>{u=u.insert(b,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,v)=>{const C=v.getKey();null===u.get(C)&&(u=u.insert(C,fr.newInvalidDocument(C)))});let l=Uf();return u.forEach((m,v)=>{const C=o.get(m);void 0!==C&&zf(C.mutation,v,ts.empty(),vr.now()),Zm(t,v)&&(l=l.insert(m,v))}),l})}}class Ru{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return le.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:$r(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:ay(r.bundledQuery),readTime:$r(r.readTime)}),le.resolve();var r}}class rb{constructor(){this.overlays=new cr(at.comparator),this.ls=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ia();return le.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.we(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const o=ia(),u=t.length+1,l=new at(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const v=m.getNext().value,C=v.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new cr((C,b)=>C-b);const l=this.overlays.getIterator();for(;l.hasNext();){const C=l.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let b=u.get(C.largestBatchId);null===b&&(b=ia(),u=u.insert(C.largestBatchId,b)),b.set(C.getKey(),C)}}const m=ia(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((C,b)=>m.set(C,b)),!(m.size()>=o)););return le.resolve(m)}we(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Qm(t,r));let u=this.ls.get(t);void 0===u&&(u=dn(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class rp{constructor(){this.fs=new _r(Kr.ds),this.ws=new _r(Kr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Kr(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Kr(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new at(new Pn([])),r=new Kr(t,e),o=new Kr(t,e+1),u=[];return this.ws.forEachInRange([r,o],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new at(new Pn([])),r=new Kr(t,e),o=new Kr(t,e+1);let u=dn();return this.ws.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Kr(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Kr{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return at.comparator(e.key,t.key)||nn(e.As,t.As)}static _s(e,t){return nn(e.As,t.As)||at.comparator(e.key,t.key)}}class QS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new _r(Kr.ds)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.vs;this.vs++;const l=new q0(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.Rs=this.Rs.add(new Kr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return le.resolve(l)}lookupMutationBatch(e,t){return le.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.bs(t+1),u=o<0?0:o;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kr(t,0),o=new Kr(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,o],l=>{const m=this.Ps(l.As);u.push(m)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _r(nn);return t.forEach(o=>{const u=new Kr(o,0),l=new Kr(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),le.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;at.isDocumentKey(u)||(u=u.child(""));const l=new Kr(new at(u),0);let m=new _r(nn);return this.Rs.forEachWhile(v=>{const C=v.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(v.As)),!0)},l),le.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){St(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return le.forEach(t.mutations,o=>{const u=new Kr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Kr(t,0),o=this.Rs.firstAfterOrEqual(r);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return le.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bO{constructor(e){this.Ds=e,this.docs=new cr(at.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let r=gs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():fr.newInvalidDocument(o))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=gs();const l=t.path,m=new at(l.child("")),v=this.docs.getIteratorFrom(m);for(;v.hasNext();){const{key:C,value:{document:b}}=v.getNext();if(!l.isPrefixOf(C.path))break;C.path.length>l.length+1||Sm(C0(b),r)<=0||(o.has(b.key)||Zm(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,t,r,o){vt()}Cs(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ib(this)}getSize(e){return le.resolve(this.size)}}class ib extends eb{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class JS{constructor(e){this.persistence=e,this.xs=new Ta(t=>ba(t),Ff),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new rp,this.targetCount=0,this.Ms=qc.kn()}forEachTarget(e,t){return this.xs.forEach((r,o)=>t(o)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),le.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new qc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Fn(t),le.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),le.waitFor(u).next(()=>o)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.ks.containsKey(t))}}class mw{constructor(e,t){this.$s={},this.overlays={},this.Os=new xs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new JS(this),this.indexManager=new CO,this.remoteDocumentCache=new bO(r=>this.referenceDelegate.Ls(r)),this.serializer=new jS(t),this.qs=new Ru(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new QS(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const o=new XS(this.Os.next());return this.referenceDelegate.Us(),r(o).next(u=>this.referenceDelegate.Ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Gs(e,t){return le.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class XS extends b0{constructor(e){super(),this.currentSequenceNumber=e}}class Iy{constructor(e){this.persistence=e,this.Qs=new rp,this.js=null}static zs(e){return new Iy(e)}get Ws(){if(this.js)return this.js;throw vt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ws,r=>{const o=at.fromPath(r);return this.Hs(e,o).next(u=>{u||t.removeEntry(o,Mt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return le.or([()=>le.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class TO{constructor(e){this.serializer=e}O(e,t,r,o){const u=new Mm("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T0,{unique:!0}),m.createObjectStore("documentMutations"),yw(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=le.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),yw(e)),l=l.next(()=>function(m){const v=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,v){return v.store("mutations").j().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T0,{unique:!0});const b=v.store("mutations"),x=C.map(q=>b.put(q));return le.waitFor(x)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Ys(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&o>=7&&(l=l.next(()=>this.Zs(u))),r<8&&o>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.ei(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:ZC});v.createIndex("collectionPathOverlayIndex",WC,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",_S,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:GC});v.createIndex("documentKeyIndex",zC),v.createIndex("collectionGroupIndex",fS)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.si(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:yS}).createIndex("sequenceNumberIndex",vS,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Om}).createIndex("documentKeyIndex",qC,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=yy(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>le.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>le.forEach(m,v=>{St(v.userId===u.userId);const C=Su(this.serializer,v);return KD(e,u.userId,C).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((l,m)=>{const v=new Pn(l),C=[0,oi(v)];u.push(t.get(C).next(b=>b?le.resolve():t.put({targetId:0,path:oi(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:mS});const r=t.store("collectionParents"),o=new zD,u=l=>{if(o.add(l)){const m=l.lastSegment(),v=l.popLast();return r.put({collectionId:m,parent:oi(v)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const v=new Pn(l);return u(v.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,v],C)=>{const b=_o(m);return u(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,o)=>{const u=Td(o),l=LD(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),v=(C=l,C.document?new at(Pn.fromString(C.document.name).popFirst(5)):C.noDocument?at.fromSegments(C.noDocument.path):C.unknownDocument?at.fromSegments(C.unknownDocument.path):vt()).path.toArray();var C;const b={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(b))}).next(()=>le.waitFor(o))}si(e,t){const r=t.store("mutations"),o=pw(this.serializer),u=new mw(Iy.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(v=>{var C;let b=null!==(C=m.get(v.userId))&&void 0!==C?C:dn();Su(this.serializer,v).keys().forEach(x=>b=b.add(x)),m.set(v.userId,b)}),le.forEach(m,(v,C)=>{const b=new si(C),x=ep.de(this.serializer,b),q=u.getIndexManager(b),X=vy.de(b,this.serializer,q,u.referenceDelegate);return new Ey(o,X,x,q).recalculateAndSaveOverlaysForDocumentKeys(new Nm(t,xs.ct),v).next()})})}}function yw(n){n.createObjectStore("targetDocuments",{keyPath:gS}).createIndex("documentTargetsIndex",Mf,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pS,{unique:!0}),n.createObjectStore("targetGlobal")}const vw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Cy{constructor(e,t,r,o,u,l,m,v,C,b,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=C,this.oi=b,this.ui=x,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=q=>Promise.resolve(),!Cy.D())throw new je(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fw(this,o),this.di=t+"main",this.serializer=new jS(v),this.wi=new Hi(this.di,this.ui,new TO(this.serializer)),this.Bs=new ZS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pw(this.serializer),this.qs=new BD,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&Br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new je(ye.FAILED_PRECONDITION,vw);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new xs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ie.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Pc(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Dy(e).get("owner").next(t=>le.resolve(this.Ri(t)))}Pi(e){return Rd(e).delete(this.clientId)}bi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ai(r,"clientMetadata");return o.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(v=>-1===l.indexOf(v));return le.forEach(m,v=>o.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?le.resolve(!0):Dy(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new je(ye.FAILED_PRECONDITION,vw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rd(e).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Nm(t,xs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Rd(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return vy.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qD(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return ep.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){ze("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?wS:14===l?YC:13===l?KC:12===l?xf:11===l?pd:void vt();var l;let m;return this.wi.runTransaction(e,o,u,v=>(m=new Nm(v,this.Os?this.Os.next():xs.ct),"readwrite-primary"===t?this.Ti(m).next(C=>!!C||this.Ei(m)).next(C=>{if(!C)throw Br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new je(ye.FAILED_PRECONDITION,D0);return r(m)}).next(C=>this.vi(m).next(()=>C)):this.Oi(m).next(()=>r(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Oi(e){return Dy(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new je(ye.FAILED_PRECONDITION,vw)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dy(e).put("owner",t)}static D(){return Hi.D()}Ai(e){const t=Dy(e);return t.get("owner").next(r=>this.Ri(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Br(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Rn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Br("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dy(n){return ai(n,"owner")}function Rd(n){return ai(n,"clientMetadata")}function by(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ty{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=o}static Li(e,t){let r=dn(),o=dn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ty(e,t.fromCache,r,o)}}class sb{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ki(e,t).next(u=>u||this.Gi(e,t,o,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(U0(t))return le.resolve(null);let r=ns(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=j0(t,null,"F"),r=ns(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=dn(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(v=>{const C=this.ji(t,m);return this.zi(t,C,l,v.readTime)?this.Ki(e,j0(t,null,"F")):this.Wi(e,C,t,v)}))})))}Gi(e,t,r,o){return U0(t)||o.isEqual(Mt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,o)?this.Qi(e,t):(bm()<=Oi.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),$0(t)),this.Wi(e,l,t,I0(o,-1)))})}ji(e,t){let r=new _r(pD(e));return t.forEach((o,u)=>{Zm(e,u)&&(r=r.add(u))}),r}zi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Qi(e,t){return bm()<=Oi.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",$0(t)),this.Ui.getDocumentsMatchingQuery(e,t,fs.min())}Wi(e,t,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class ob{constructor(e,t,r,o){this.persistence=e,this.Hi=t,this.serializer=o,this.Ji=new cr(nn),this.Yi=new Ta(u=>ba(u),Ff),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ey(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function _w(n,e,t,r){return new ob(n,e,t,r)}function Zc(n,e){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,Ie.Z)(function*(n,e){const t=lt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let v=dn();for(const C of o){l.push(C.batchId);for(const b of C.mutations)v=v.add(b.key)}for(const C of u){m.push(C.batchId);for(const b of C.mutations)v=v.add(b.key)}return t.localDocuments.getDocuments(r,v).next(C=>({er:C,removedBatchIds:l,addedBatchIds:m}))})})}),Pd.apply(this,arguments)}function ww(n){const e=lt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function ub(n,e,t){let r=dn(),o=dn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=gs();return t.forEach((m,v)=>{const C=u.get(m);v.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(m)),v.isNoDocument()&&v.version.isEqual(Mt.min())?(e.removeEntry(m,v.readTime),l=l.insert(m,v)):!C.isValidDocument()||v.version.compareTo(C.version)>0||0===v.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(v),l=l.insert(m,v)):ze("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",v.version)}),{nr:l,sr:o}})}function AO(n,e){const t=lt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wc(n,e){const t=lt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Bs.getTargetData(r,e).next(u=>u?(o=u,le.resolve(o)):t.Bs.allocateTargetId(r).next(l=>(o=new Co(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function kd(n,e,t){return Ew.apply(this,arguments)}function Ew(){return Ew=(0,Ie.Z)(function*(n,e,t){const r=lt(n),o=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Pc(l))throw l;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),Ew.apply(this,arguments)}function Iw(n,e,t){const r=lt(n);let o=Mt.min(),u=dn();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,v,C){const b=lt(m),x=b.Yi.get(C);return void 0!==x?le.resolve(b.Ji.get(x)):b.Bs.getTargetData(v,C)}(r,l,ns(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(v=>{u=v})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?o:Mt.min(),t?u:dn())).next(m=>(Cw(r,fD(e),m),{documents:m,ir:u})))}function tM(n,e){const t=lt(n),r=lt(t.Bs),o=t.Ji.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function nM(n,e){const t=lt(n),r=t.Xi.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Zi.getAllFromCollectionGroup(o,e,I0(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Cw(t,e,o),o))}function Cw(n,e,t){let r=n.Xi.get(e)||Mt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function Dw(){return Dw=(0,Ie.Z)(function*(n,e,t,r){const o=lt(n);let u=dn(),l=gs();for(const C of t){const b=e.rr(C.metadata.name);C.document&&(u=u.add(b));const x=e.ur(C);x.setReadTime(e.cr(C.metadata.readTime)),l=l.insert(b,x)}const m=o.Zi.newChangeBuffer({trackRemovals:!0}),v=yield Wc(o,(C=r,ns(Fc(Pn.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>ub(C,m,l).next(b=>(m.apply(C),b)).next(b=>o.Bs.removeMatchingKeysForTargetId(C,v.targetId).next(()=>o.Bs.addMatchingKeys(C,u,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,b.nr,b.sr)).next(()=>b.nr)))}),Dw.apply(this,arguments)}function iM(n,e){return cb.apply(this,arguments)}function cb(){return cb=(0,Ie.Z)(function*(n,e,t=dn()){const r=yield Wc(n,ns(ay(e.bundledQuery))),o=lt(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=$r(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.qs.saveNamedQuery(u,e);const m=r.withResumeToken(ui.EMPTY_BYTE_STRING,l);return o.Ji=o.Ji.insert(m.targetId,m),o.Bs.updateTargetData(u,m).next(()=>o.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>o.qs.saveNamedQuery(u,e))})}),cb.apply(this,arguments)}function sM(n,e){return`firestore_clients_${n}_${e}`}function oM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function lb(n,e){return`firestore_targets_${n}_${e}`}class bw{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static ar(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new je(o.error.code,o.error.message))),l?new bw(e,t,o.state,u):(Br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new je(r.error.code,r.error.message))),u?new sp(e,r.state,o):(Br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kc{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Wm();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=Sf(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new Kc(e,u):(Br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Tw{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Tw(t.clientId,t.onlineState):(Br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Aw{constructor(){this.activeTargetIds=Wm()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ay{constructor(e,t,r,o,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new cr(nn),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=sM(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Aw),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.$i();for(const o of t){if(o===e.wr)continue;const u=e.getItem(sM(e.persistenceKey,o));if(u){const l=Kc.ar(o,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const o=e.br(r);o&&e.Vr(o)}for(const o of e.yr)e.mr(o);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(lb(this.persistenceKey,e));if(r){const o=sp.ar(e,r);o&&(t=o.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lb(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Cr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const o=t.Or(r.key);return t.Fr(o,null)}{const o=t.Br(r.key,r.newValue);if(o)return t.Fr(o.clientId,o)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const o=t.Lr(r.key,r.newValue);if(o)return t.qr(o)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const o=t.Ur(r.key,r.newValue);if(o)return t.Kr(o)}}else if(r.key===t.vr){if(null!==r.newValue){const o=t.br(r.newValue);if(o)return t.Vr(o)}}else if(r.key===t.Ir){const o=function(u){let l=xs.ct;if(null!=u)try{const m=JSON.parse(u);St("number"==typeof m),l=m}catch(m){Br("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==xs.ct&&t.sequenceNumberHandler(o)}else if(r.key===t.Rr){const o=t.Gr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const o=new bw(this.currentUser,e,t,r),u=oM(this.persistenceKey,this.currentUser,e);this.setItem(u,o.hr())}Cr(e){const t=oM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const o=lb(this.persistenceKey,e),u=new sp(e,t,r);this.setItem(o,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Kc.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),o=Number(r[1]);return bw.ar(new si(void 0!==r[2]?r[2]:null),o,t)}Ur(e,t){const r=this.Ar.exec(e),o=Number(r[1]);return sp.ar(o,t)}br(e){return Tw.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),o=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(v=>{o.has(v)||l.push(v)}),o.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Wm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Pu{constructor(){this.Hr=new Aw,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Aw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class db{Yr(e){}shutdown(){}}class Sy{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fd=null;function Sw(){return null===Fd?Fd=268435456+Math.round(2147483648*Math.random()):Fd++,"0x"+Fd.toString(16)}const Mw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xw{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const li="WebChannelConnection";class SO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,o,u){const l=Sw(),m=this.To(e,t);ze("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const v={};return this.Eo(v,o,u),this.Ao(e,m,v,r).then(C=>(ze("RestConnection",`Received RPC '${e}' ${l}: `,C),C),C=>{throw Ms("RestConnection",`RPC '${e}' ${l} failed with error: `,C,"url: ",m,"request:",r),C})}vo(e,t,r,o,u,l){return this.Io(e,t,r,o,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+dd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}To(e,t){return`${this.mo}/v1/${t}:${Mw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,o){const u=Sw();return new Promise((l,m)=>{const v=new iS;v.setWithCredentials(!0),v.listenOnce(AC.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Ss.NO_ERROR:const b=v.getResponseJson();ze(li,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),l(b);break;case Ss.TIMEOUT:ze(li,`RPC '${e}' ${u} timed out`),m(new je(ye.DEADLINE_EXCEEDED,"Request time out"));break;case Ss.HTTP_ERROR:const x=v.getStatus();if(ze(li,`RPC '${e}' ${u} failed with status:`,x,"response text:",v.getResponseText()),x>0){let q=v.getResponseJson();Array.isArray(q)&&(q=q[0]);const X=q?.error;if(X&&X.status&&X.message){const be=function(Fe){const Ve=Fe.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(Ve)>=0?Ve:ye.UNKNOWN}(X.status);m(new je(be,X.message))}else m(new je(ye.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new je(ye.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{ze(li,`RPC '${e}' ${u} completed.`)}});const C=JSON.stringify(o);ze(li,`RPC '${e}' ${u} sending request:`,o),v.send(t,"POST",C,r,15)})}Ro(e,t,r){const o=Sw(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ea(),m=vo(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},C=this.longPollingOptions.timeoutSeconds;void 0!==C&&(v.longPollingTimeout=Math.round(1e3*C)),this.useFetchStreams&&(v.xmlHttpFactory=new rS({})),this.Eo(v.initMessageHeaders,t,r),v.encodeInitMessageHeaders=!0;const b=u.join("");ze(li,`Creating RPC '${e}' stream ${o}: ${b}`,v);const x=l.createWebChannel(b,v);let q=!1,X=!1;const be=new xw({ro:Ve=>{X?ze(li,`Not sending because RPC '${e}' stream ${o} is closed:`,Ve):(q||(ze(li,`Opening RPC '${e}' stream ${o} transport.`),x.open(),q=!0),ze(li,`RPC '${e}' stream ${o} sending:`,Ve),x.send(Ve))},oo:()=>x.close()}),Fe=(Ve,It,Ut)=>{Ve.listen(It,_t=>{try{Ut(_t)}catch(jt){setTimeout(()=>{throw jt},0)}})};return Fe(x,Dm.EventType.OPEN,()=>{X||ze(li,`RPC '${e}' stream ${o} transport opened.`)}),Fe(x,Dm.EventType.CLOSE,()=>{X||(X=!0,ze(li,`RPC '${e}' stream ${o} transport closed`),be.wo())}),Fe(x,Dm.EventType.ERROR,Ve=>{X||(X=!0,Ms(li,`RPC '${e}' stream ${o} transport errored:`,Ve),be.wo(new je(ye.UNAVAILABLE,"The operation could not be completed")))}),Fe(x,Dm.EventType.MESSAGE,Ve=>{var It;if(!X){const Ut=Ve.data[0];St(!!Ut);const jt=Ut.error||(null===(It=Ut[0])||void 0===It?void 0:It.error);if(jt){ze(li,`RPC '${e}' stream ${o} received error:`,jt);const un=jt.status;let Sn=function(Yd){const l1=jr[Yd];if(void 0!==l1)return Y0(l1)}(un),ss=jt.message;void 0===Sn&&(Sn=ye.INTERNAL,ss="Unknown error status: "+un+" with message "+jt.message),X=!0,be.wo(new je(Sn,ss)),x.close()}else ze(li,`RPC '${e}' stream ${o} received:`,Ut),be._o(Ut)}}),Fe(m,SC.STAT_EVENT,Ve=>{Ve.stat===MC.PROXY?ze(li,`RPC '${e}' stream ${o} detected buffering proxy`):Ve.stat===MC.NOPROXY&&ze(li,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{be.fo()},0),be}}function aM(){return typeof window<"u"?window:null}function Ow(){return typeof document<"u"?document:null}function Ld(n){return new RS(n,!0)}class Nw{constructor(e,t,r=1e3,o=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=o,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,t-r);o>0&&ze("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class hb{constructor(e,t,r,o,u,l,m,v){this.ii=e,this.$o=r,this.Oo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Nw(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ie.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ie.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ye.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===t&&this.Zo(r,o)},r=>{e(()=>{const o=new je(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,Ie.Z)(function*(){e.state=0,e.start()}))}tu(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uM extends hb{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function LS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:vt(),o=e.targetChange.targetIds||[],u=function(v,C){return v.useProto3Json?(St(void 0===C||"string"==typeof C),ui.fromBase64String(C||"")):(St(void 0===C||C instanceof Uint8Array),ui.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(v){const C=void 0===v.code?ye.UNKNOWN:Y0(v.code);return new je(C,v.message||"")}(l);t=new ny(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Io(n,r.document.name),u=$r(r.document.updateTime),l=r.document.createTime?$r(r.document.createTime):Mt.min(),m=new Pi({mapValue:{fields:r.document.fields}}),v=fr.newFoundDocument(o,u,l,m);t=new ty(r.targetIds||[],r.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const r=e.documentDelete,o=Io(n,r.document),u=r.readTime?$r(r.readTime):Mt.min(),l=fr.newNoDocument(o,u);t=new ty([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=Io(n,r.document);t=new ty([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return vt();{const r=e.filter,{count:o=0,unchangedNames:u}=r,l=new W0(o,u);t=new ew(r.targetId,l)}}var v;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return Mt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Mt.min():u.readTime?$r(u.readTime):Mt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=sy(this.serializer),t.addTarget=function(o,u){let l;const m=u.target;if(l=Lf(m)?{documents:kD(o,m)}:{query:Jf(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=zi(o,u.resumeToken);const v=ry(o,u.expectedCount);null!==v&&(l.expectedCount=v)}else if(u.snapshotVersion.compareTo(Mt.min())>0){l.readTime=Bc(o,u.snapshotVersion.toTimestamp());const v=ry(o,u.expectedCount);null!==v&&(l.expectedCount=v)}return l}(this.serializer,e);const r=function US(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=sy(this.serializer),t.removeTarget=e,this.Wo(t)}}class cM extends hb{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function VS(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,o){let u=$r(r.updateTime?r.updateTime:o);return u.isEqual(Mt.min())&&(u=$r(o)),new Hf(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=$r(e.commitTime);return this.listener.cu(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=sy(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>bd(this.serializer,r))};this.Wo(t)}}class fb extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new je(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Io(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new je(ye.UNKNOWN,o.toString())})}vo(e,t,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new je(ye.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class lM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Br(t),this.mu=!1):ze("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class dM{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,Ie.Z)(function*(){var v;ku(l)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,Ie.Z)(function*(C){const b=lt(C);b.vu.add(4),yield ap(b),b.bu.set("Unknown"),b.vu.delete(4),yield Vd(b)}),function(C){return v.apply(this,arguments)})(l))}))}),this.bu=new lM(r,o)}}function Vd(n){return op.apply(this,arguments)}function op(){return op=(0,Ie.Z)(function*(n){if(ku(n))for(const e of n.Ru)yield e(!0)}),op.apply(this,arguments)}function ap(n){return xy.apply(this,arguments)}function xy(){return xy=(0,Ie.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),xy.apply(this,arguments)}function Ud(n,e){const t=lt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Pw(t)?gb(t):cp(t).Ko()&&Rw(t,e))}function up(n,e){const t=lt(n),r=cp(t);t.Au.delete(e),r.Ko()&&hM(t,e),0===t.Au.size&&(r.Ko()?r.jo():ku(t)&&t.bu.set("Unknown"))}function Rw(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Mt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cp(n).su(e)}function hM(n,e){n.Vu.qt(e),cp(n).iu(e)}function gb(n){n.Vu=new OS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),cp(n).start(),n.bu.gu()}function Pw(n){return ku(n)&&!cp(n).Uo()&&n.Au.size>0}function ku(n){return 0===lt(n).vu.size}function mb(n){n.Vu=void 0}function fM(n){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,Ie.Z)(function*(n){n.Au.forEach((e,t)=>{Rw(n,e)})}),Oy.apply(this,arguments)}function yb(n,e){return kw.apply(this,arguments)}function kw(){return kw=(0,Ie.Z)(function*(n,e){mb(n),Pw(n)?(n.bu.Iu(e),gb(n)):n.bu.set("Unknown")}),kw.apply(this,arguments)}function vb(n,e,t){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,Ie.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof ny&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.Au.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.Au.delete(m),o.Vu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Fw(n,r)}else if(e instanceof ty?n.Vu.Ht(e):e instanceof ew?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Mt.min()))try{const r=yield ww(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.Vu.ce(u);return l.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.Au.get(v);C&&o.Au.set(v,C.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,v)=>{const C=o.Au.get(m);if(!C)return;o.Au.set(m,C.withResumeToken(ui.EMPTY_BYTE_STRING,C.snapshotVersion)),hM(o,m);const b=new Co(C.target,m,v,C.sequenceNumber);Rw(o,b)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield Fw(n,r)}var r}),Ny.apply(this,arguments)}function Fw(n,e,t){return Lw.apply(this,arguments)}function Lw(){return Lw=(0,Ie.Z)(function*(n,e,t){if(!Pc(e))throw e;n.vu.add(1),yield ap(n),n.bu.set("Offline"),t||(t=()=>ww(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Vd(n)}))}),Lw.apply(this,arguments)}function Ry(n,e){return e().catch(t=>Fw(n,t,e))}function Yc(n){return Py.apply(this,arguments)}function Py(){return Py=(0,Ie.Z)(function*(n){const e=lt(n),t=Qc(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;pM(e);)try{const o=yield AO(e.localStore,r);if(null===o){0===e.Eu.length&&t.jo();break}r=o.batchId,ky(e,o)}catch(o){yield Fw(e,o)}_b(e)&&wb(e)}),Py.apply(this,arguments)}function pM(n){return ku(n)&&n.Eu.length<10}function ky(n,e){n.Eu.push(e);const t=Qc(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function _b(n){return ku(n)&&!Qc(n).Uo()&&n.Eu.length>0}function wb(n){Qc(n).start()}function Eb(n){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,Ie.Z)(function*(n){Qc(n).hu()}),Fy.apply(this,arguments)}function MO(n){return Vw.apply(this,arguments)}function Vw(){return Vw=(0,Ie.Z)(function*(n){const e=Qc(n);for(const t of n.Eu)e.uu(t.mutations)}),Vw.apply(this,arguments)}function xO(n,e,t){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,Ie.Z)(function*(n,e,t){const r=n.Eu.shift(),o=Z0.from(r,e,t);yield Ry(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Yc(n)}),Uw.apply(this,arguments)}function OO(n,e){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,Ie.Z)(function*(n,e){var t;e&&Qc(n).ou&&(yield(t=(0,Ie.Z)(function*(r,o){if(K0(u=o.code)&&u!==ye.ABORTED){const l=r.Eu.shift();Qc(r).Qo(),yield Ry(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield Yc(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),_b(n)&&wb(n)}),Ib.apply(this,arguments)}function Cb(n,e){return Bw.apply(this,arguments)}function Bw(){return Bw=(0,Ie.Z)(function*(n,e){const t=lt(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=ku(t);t.vu.add(3),yield ap(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Vd(t)}),Bw.apply(this,arguments)}function Db(n,e){return bb.apply(this,arguments)}function bb(){return bb=(0,Ie.Z)(function*(n,e){const t=lt(n);e?(t.vu.delete(2),yield Vd(t)):e||(t.vu.add(2),yield ap(t),t.bu.set("Unknown"))}),bb.apply(this,arguments)}function cp(n){return n.Su||(n.Su=function(e,t,r){const o=lt(e);return o.fu(),new uM(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:fM.bind(null,n),ao:yb.bind(null,n),nu:vb.bind(null,n)}),n.Ru.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Su.Qo(),Pw(n)?gb(n):n.bu.set("Unknown")):(yield n.Su.stop(),mb(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Qc(n){return n.Du||(n.Du=function(e,t,r){const o=lt(e);return o.fu(),new cM(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:Eb.bind(null,n),ao:OO.bind(null,n),au:MO.bind(null,n),cu:xO.bind(null,n)}),n.Ru.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Du.Qo(),yield Yc(n)):(yield n.Du.stop(),n.Eu.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Tb{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new Tb(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new je(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bd(n,e){if(Br("AsyncQueue",`${e}: ${n}`),Pc(n))return new je(ye.UNAVAILABLE,`${e}: ${n}`);throw n}class lp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||at.comparator(t.key,r.key):(t,r)=>at.comparator(t.key,r.key),this.keyedMap=Uf(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new lp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new lp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class gM{constructor(){this.Cu=new cr(at.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):vt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class dp{constructor(e,t,r,o,u,l,m,v,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new dp(e,t,lp.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class NO{constructor(){this.Nu=void 0,this.listeners=[]}}class RO{constructor(){this.queries=new Ta(e=>hD(e),_d),this.onlineState="Unknown",this.ku=new Set}}function jw(n,e){return Ab.apply(this,arguments)}function Ab(){return Ab=(0,Ie.Z)(function*(n,e){const t=lt(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new NO),o)try{u.Nu=yield t.onListen(r)}catch(l){const m=Bd(l,`Initialization of query '${$0(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&d(t)}),Ab.apply(this,arguments)}function i(n,e){return s.apply(this,arguments)}function s(){return s=(0,Ie.Z)(function*(n,e){const t=lt(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),s.apply(this,arguments)}function a(n,e){const t=lt(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.$u(o)&&(r=!0);l.Nu=o}}r&&d(t)}function c(n,e,t){const r=lt(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function d(n){n.ku.forEach(e=>{e.next()})}class f{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new dp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=dp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class y{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class _{constructor(e){this.serializer=e}rr(e){return Io(this.serializer,e)}ur(e){return e.metadata.exists?PD(this.serializer,e.document,!1):fr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return $r(e)}}class I{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=D(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Pn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new _(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.rr(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||dn()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function rM(n,e,t,r){return Dw.apply(this,arguments)}(e.localStore,new _(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const o of e.queries)yield iM(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function D(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class A{constructor(e){this.key=e}}class L{constructor(e){this.key=e}}class W{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=dn(),this.mutatedKeys=dn(),this.tc=pD(e),this.ec=new lp(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new gM,o=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,x)=>{const q=o.get(b),X=Zm(this.query,x)?x:null,be=!!q&&this.mutatedKeys.has(q.key),Fe=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let Ve=!1;q&&X?q.data.isEqual(X.data)?be!==Fe&&(r.track({type:3,doc:X}),Ve=!0):this.rc(q,X)||(r.track({type:2,doc:X}),Ve=!0,(v&&this.tc(X,v)>0||C&&this.tc(X,C)<0)&&(m=!0)):!q&&X?(r.track({type:0,doc:X}),Ve=!0):q&&!X&&(r.track({type:1,doc:q}),Ve=!0,(v||C)&&(m=!0)),Ve&&(X?(l=l.add(X),u=Fe?u.add(b):u.delete(b)):(l=l.delete(b),u=u.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((C,b)=>function(x,q){const X=be=>{switch(be){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return X(x)-X(q)}(C.type,b.type)||this.tc(C.doc,b.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,v=m!==this.Xu;return this.Xu=m,0!==u.length||v?{snapshot:new dp(this.query,e.ec,o,u,e.mutatedKeys,0===m,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new gM,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=dn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new L(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new A(r))}),t}hc(e){this.Yu=e.ir,this.Zu=dn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return dp.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class ie{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Pe{constructor(e){this.key=e,this.fc=!1}}class Ke{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Ta(m=>hD(m),_d),this._c=new Map,this.mc=new Set,this.gc=new cr(at.comparator),this.yc=new Map,this.Ic=new rp,this.Tc={},this.Ec=new Map,this.Ac=qc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function dt(n,e){return At.apply(this,arguments)}function At(){return At=(0,Ie.Z)(function*(n,e){const t=PM(n);let r,o;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.lc();else{const l=yield Wc(t.localStore,ns(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield $e(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&Ud(t.remoteStore,l)}return o}),At.apply(this,arguments)}function $e(n,e,t,r,o){return Zt.apply(this,arguments)}function Zt(){return Zt=(0,Ie.Z)(function*(n,e,t,r,o){n.Rc=(x,q,X)=>{return(be=(0,Ie.Z)(function*(Fe,Ve,It,Ut){let _t=Ve.view.sc(It);_t.zi&&(_t=yield Iw(Fe.localStore,Ve.query,!1).then(({documents:Sn})=>Ve.view.sc(Sn,_t)));const jt=Ut&&Ut.targetChanges.get(Ve.targetId),un=Ve.view.applyChanges(_t,Fe.isPrimaryClient,jt);return CM(Fe,Ve.targetId,un.cc),un.snapshot}),function(Fe,Ve,It,Ut){return be.apply(this,arguments)})(n,x,q,X);var be};const u=yield Iw(n.localStore,e,!0),l=new W(e,u.ir),m=l.sc(u.documents),v=Yf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=l.applyChanges(m,n.isPrimaryClient,v);CM(n,t,C.cc);const b=new ie(e,t,l);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),C.snapshot}),Zt.apply(this,arguments)}function Dn(n,e){return Gn.apply(this,arguments)}function Gn(){return Gn=(0,Ie.Z)(function*(n,e){const t=lt(n),r=t.wc.get(e),o=t._c.get(r.targetId);if(o.length>1)return t._c.set(r.targetId,o.filter(u=>!_d(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield kd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),up(t.remoteStore,r.targetId),Ly(t,r.targetId)}).catch(wa))):(Ly(t,r.targetId),yield kd(t.localStore,r.targetId,!0))}),Gn.apply(this,arguments)}function Do(){return Do=(0,Ie.Z)(function*(n,e,t){const r=kM(n);try{const o=yield function(u,l){const m=lt(u),v=vr.now(),C=l.reduce((q,X)=>q.add(X.key),dn());let b,x;return m.persistence.runTransaction("Locally write mutations","readwrite",q=>{let X=gs(),be=dn();return m.Zi.getEntries(q,C).next(Fe=>{X=Fe,X.forEach((Ve,It)=>{It.isValidDocument()||(be=be.add(Ve))})}).next(()=>m.localDocuments.getOverlayedDocuments(q,X)).next(Fe=>{b=Fe;const Ve=[];for(const It of l){const Ut=SD(It,b.get(It.key).overlayedDocument);null!=Ut&&Ve.push(new Aa(It.key,Ut,nD(Ut.value.mapValue),wr.exists(!0)))}return m.mutationQueue.addMutationBatch(q,v,Ve,l)}).next(Fe=>{x=Fe;const Ve=Fe.applyToLocalDocumentSet(b,be);return m.documentOverlayCache.saveOverlays(q,Fe.batchId,Ve)})}).then(()=>({batchId:x.batchId,changes:yD(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let v=u.Tc[u.currentUser.toKey()];v||(v=new cr(nn)),v=v.insert(l,m),u.Tc[u.currentUser.toKey()]=v}(r,o.batchId,t),yield Xc(r,o.changes),yield Yc(r.remoteStore)}catch(o){const u=Bd(o,"Failed to persist write");t.reject(u)}}),Do.apply(this,arguments)}function Jc(n,e){return hp.apply(this,arguments)}function hp(){return hp=(0,Ie.Z)(function*(n,e){const t=lt(n);try{const r=yield function eM(n,e){const t=lt(n),r=e.snapshotVersion;let o=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});o=t.Ji;const m=[];e.targetChanges.forEach((b,x)=>{const q=o.get(x);if(!q)return;m.push(t.Bs.removeMatchingKeys(u,b.removedDocuments,x).next(()=>t.Bs.addMatchingKeys(u,b.addedDocuments,x)));let X=q.withSequenceNumber(u.currentSequenceNumber);var be,Fe,Ve;null!==e.targetMismatches.get(x)?X=X.withResumeToken(ui.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):b.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(b.resumeToken,r)),o=o.insert(x,X),Fe=X,Ve=b,(0===(be=q).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-be.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,X))});let v=gs(),C=dn();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),m.push(ub(u,l,e.documentUpdates).next(b=>{v=b.nr,C=b.sr})),!r.isEqual(Mt.min())){const b=t.Bs.getLastRemoteSnapshotVersion(u).next(x=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(b)}return le.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,C)).next(()=>v)}).then(u=>(t.Ji=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.yc.get(u);l&&(St(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.fc=!0:o.modifiedDocuments.size>0?St(l.fc):o.removedDocuments.size>0&&(St(l.fc),l.fc=!1))}),yield Xc(t,r,e)}catch(r){yield wa(r)}}),hp.apply(this,arguments)}function Sb(n,e,t){const r=lt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=lt(u);m.onlineState=l;let v=!1;m.queries.forEach((C,b)=>{for(const x of b.listeners)x.Mu(l)&&(v=!0)}),v&&d(m)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mM(n,e,t){return yM.apply(this,arguments)}function yM(){return yM=(0,Ie.Z)(function*(n,e,t){const r=lt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.yc.get(e),u=o&&o.key;if(u){let l=new cr(at.comparator);l=l.insert(u,fr.newNoDocument(u,Mt.min()));const m=dn().add(u),v=new Kf(Mt.min(),new Map,new cr(nn),l,m);yield Jc(r,v),r.gc=r.gc.remove(u),r.yc.delete(e),DM(r)}else yield kd(r.localStore,e,!1).then(()=>Ly(r,e,t)).catch(wa)}),yM.apply(this,arguments)}function E1(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,Ie.Z)(function*(n,e){const t=lt(n),r=e.batch.batchId;try{const o=yield function ab(n,e){const t=lt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,v,C){const b=v.batch,x=b.keys();let q=le.resolve();return x.forEach(X=>{q=q.next(()=>C.getEntry(m,X)).next(be=>{const Fe=v.docVersions.get(X);St(null!==Fe),be.version.compareTo(Fe)<0&&(b.applyToRemoteDocument(be,v),be.isValidDocument()&&(be.setReadTime(v.commitVersion),C.addEntry(be)))})}),q.next(()=>l.mutationQueue.removeMutationBatch(m,b))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=dn();for(let v=0;v<l.mutationResults.length;++v)l.mutationResults[v].transformResults.length>0&&(m=m.add(l.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);IM(t,r,null),EM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xc(t,o)}catch(o){yield wa(o)}}),vM.apply(this,arguments)}function I1(n,e,t){return _M.apply(this,arguments)}function _M(){return _M=(0,Ie.Z)(function*(n,e,t){const r=lt(n);try{const o=yield function(u,l){const m=lt(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let C;return m.mutationQueue.lookupMutationBatch(v,l).next(b=>(St(null!==b),C=b.keys(),m.mutationQueue.removeMutationBatch(v,b))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,C,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,C)).next(()=>m.localDocuments.getDocuments(v,C))})}(r.localStore,e);IM(r,e,t),EM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xc(r,o)}catch(o){yield wa(o)}}),_M.apply(this,arguments)}function wM(){return wM=(0,Ie.Z)(function*(n,e){const t=lt(n);ku(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=lt(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ec.get(r)||[];o.push(e),t.Ec.set(r,o)}catch(r){const o=Bd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),wM.apply(this,arguments)}function EM(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function IM(n,e,t){const r=lt(n);let o=r.Tc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function Ly(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||PO(n,r)})}function PO(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(up(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),DM(n))}function CM(n,e,t){for(const r of t)r instanceof A?(n.Ic.addReference(r.key,e),D1(n,r)):r instanceof L?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||PO(n,r.key)):vt()}function D1(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.mc.add(r),DM(n))}function DM(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new at(Pn.fromString(e)),r=n.Ac.next();n.yc.set(r,new Pe(t)),n.gc=n.gc.insert(t,r),Ud(n.remoteStore,new Co(ns(Fc(t.path)),r,"TargetPurposeLimboResolution",xs.ct))}}function Xc(n,e,t){return bM.apply(this,arguments)}function bM(){return bM=(0,Ie.Z)(function*(n,e,t){const r=lt(n),o=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,v)=>{l.push(r.Rc(v,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const b=Ty.Li(v.targetId,C);u.push(b)}}))}),yield Promise.all(l),r.dc.nu(o),yield(m=(0,Ie.Z)(function*(v,C){const b=lt(v);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>le.forEach(C,q=>le.forEach(q.Fi,X=>b.persistence.referenceDelegate.addReference(x,q.targetId,X)).next(()=>le.forEach(q.Bi,X=>b.persistence.referenceDelegate.removeReference(x,q.targetId,X)))))}catch(x){if(!Pc(x))throw x;ze("LocalStore","Failed to update sequence numbers: "+x)}for(const x of C){const q=x.targetId;if(!x.fromCache){const X=b.Ji.get(q),Fe=X.withLastLimboFreeSnapshotVersion(X.snapshotVersion);b.Ji=b.Ji.insert(q,Fe)}}}),function(v,C){return m.apply(this,arguments)})(r.localStore,u))}),bM.apply(this,arguments)}function b1(n,e){return TM.apply(this,arguments)}function TM(){return TM=(0,Ie.Z)(function*(n,e){const t=lt(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield Zc(t.localStore,e);t.currentUser=e,(o=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new je(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xc(t,r.er)}var o}),TM.apply(this,arguments)}function T1(n,e){const t=lt(n),r=t.yc.get(e);if(r&&r.fc)return dn().add(r.key);{let o=dn();const u=t._c.get(e);if(!u)return o;for(const l of u){const m=t.wc.get(l);o=o.unionWith(m.view.nc)}return o}}function A1(n,e){return AM.apply(this,arguments)}function AM(){return AM=(0,Ie.Z)(function*(n,e){const t=lt(n),r=yield Iw(t.localStore,e.query,!0),o=e.view.hc(r);return t.isPrimaryClient&&CM(t,e.targetId,o.cc),o}),AM.apply(this,arguments)}function S1(n,e){return SM.apply(this,arguments)}function SM(){return SM=(0,Ie.Z)(function*(n,e){const t=lt(n);return nM(t.localStore,e).then(r=>Xc(t,r))}),SM.apply(this,arguments)}function M1(n,e,t,r){return MM.apply(this,arguments)}function MM(){return MM=(0,Ie.Z)(function*(n,e,t,r){const o=lt(n),u=yield function(l,m){const v=lt(l),C=lt(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",b=>C.Sn(b,m).next(x=>x?v.localDocuments.getDocuments(b,x):le.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Yc(o.remoteStore):"acknowledged"===t||"rejected"===t?(IM(o,e,r||null),EM(o,e),m=e,lt(lt(o.localStore).mutationQueue).Cn(m)):vt(),yield Xc(o,u)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),MM.apply(this,arguments)}function xM(){return xM=(0,Ie.Z)(function*(n,e){const t=lt(n);if(PM(t),kM(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield kO(t,r.toArray());t.vc=!0,yield Db(t.remoteStore,!0);for(const u of o)Ud(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let o=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Ly(t,l),kd(t.localStore,l,!0))),up(t.remoteStore,l)}),yield o,yield kO(t,r),function(u){const l=lt(u);l.yc.forEach((m,v)=>{up(l.remoteStore,v)}),l.Ic.Ts(),l.yc=new Map,l.gc=new cr(at.comparator)}(t),t.vc=!1,yield Db(t.remoteStore,!1)}}),xM.apply(this,arguments)}function kO(n,e,t){return OM.apply(this,arguments)}function OM(){return OM=(0,Ie.Z)(function*(n,e,t){const r=lt(n),o=[],u=[];for(const l of e){let m;const v=r._c.get(l);if(v&&0!==v.length){m=yield Wc(r.localStore,ns(v[0]));for(const C of v){const b=r.wc.get(C),x=yield A1(r,b);x.snapshot&&u.push(x.snapshot)}}else{const C=yield tM(r.localStore,l);m=yield Wc(r.localStore,C),yield $e(r,FO(C),l,!1,m.resumeToken)}o.push(m)}return r.dc.nu(u),o}),OM.apply(this,arguments)}function FO(n){return V0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function O1(n){const e=lt(n);return lt(lt(e.localStore).persistence).$i()}function N1(n,e,t,r){return NM.apply(this,arguments)}function NM(){return NM=(0,Ie.Z)(function*(n,e,t,r){const o=lt(n);if(o.vc)return void ze("SyncEngine","Ignoring unexpected query state notification.");const u=o._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield nM(o.localStore,fD(u[0])),m=Kf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ui.EMPTY_BYTE_STRING);yield Xc(o,l,m);break}case"rejected":yield kd(o.localStore,e,!0),Ly(o,e,r);break;default:vt()}}),NM.apply(this,arguments)}function R1(n,e,t){return RM.apply(this,arguments)}function RM(){return RM=(0,Ie.Z)(function*(n,e,t){const r=PM(n);if(r.vc){for(const o of e){if(r._c.has(o)){ze("SyncEngine","Adding an already active target "+o);continue}const u=yield tM(r.localStore,o),l=yield Wc(r.localStore,u);yield $e(r,FO(u),l.targetId,!1,l.resumeToken),Ud(r.remoteStore,l)}for(const o of t)r._c.has(o)&&(yield kd(r.localStore,o,!1).then(()=>{up(r.remoteStore,o),Ly(r,o)}).catch(wa))}}),RM.apply(this,arguments)}function PM(n){const e=lt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mM.bind(null,e),e.dc.nu=a.bind(null,e.eventManager),e.dc.Pc=c.bind(null,e.eventManager),e}function kM(n){const e=lt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I1.bind(null,e),e}class $w{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.serializer=Ld(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return _w(this.persistence,new sb,e.initialUser,this.serializer)}createPersistence(e){return new mw(Iy.zs,this.serializer)}createSharedClientState(e){return new Pu}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class FM extends $w{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield kM(r.Vc.syncEngine),yield Yc(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return _w(this.persistence,new sb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new XD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new dS(t,this.persistence);return new lS(e.asyncQueue,r)}createPersistence(e){const t=by(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ci.withCacheSize(this.cacheSizeBytes):ci.DEFAULT;return new Cy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,aM(),Ow(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Pu}}class LO extends FM{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const o=r.Vc.syncEngine;r.sharedClientState instanceof Ay&&(r.sharedClientState.syncEngine={jr:M1.bind(null,o),zr:N1.bind(null,o),Wr:R1.bind(null,o),$i:O1.bind(null,o),Qr:S1.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,Ie.Z)(function*(l){yield function x1(n,e){return xM.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=aM();if(!Ay.D(t))throw new je(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=by(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ay(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vy{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Sb(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=b1.bind(null,r.syncEngine),yield Db(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new RO}createDatastore(e){const t=Ld(e.databaseInfo.databaseId),r=new SO(e.databaseInfo);return new fb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>Sb(this.syncEngine,m,0),l=Sy.D()?new Sy:new db,new dM(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,v,C){const b=new Ke(r,o,u,l,m,v);return C&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=lt(t);ze("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield ap(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function VO(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Mb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class F1{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Wr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),o=Number(r);isNaN(o)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(o);return new y(JSON.parse(u),t.length+o)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ie.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class L1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new je(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ie.Z)(function*(u,l){const m=lt(u),v=sy(m.serializer)+"/documents",C={documents:l.map(X=>iy(m.serializer,X))},b=yield m.vo("BatchGetDocuments",v,C,l.length),x=new Map;b.forEach(X=>{const be=function sw(n,e){return"found"in e?function(t,r){St(!!r.found);const o=Io(t,r.found.name),u=$r(r.found.updateTime),l=r.found.createTime?$r(r.found.createTime):Mt.min(),m=new Pi({mapValue:{fields:r.found.fields}});return fr.newFoundDocument(o,u,l,m)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const o=Io(t,r.missing),u=$r(r.readTime);return fr.newNoDocument(o,u)}(n,e):vt()}(m.serializer,X);x.set(be.key.toString(),be)});const q=[];return l.forEach(X=>{const be=x.get(X.toString());St(!!be),q.push(be)}),q}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=at.fromPath(o);e.mutations.push(new Id(u,e.precondition(u)))}),yield(r=(0,Ie.Z)(function*(o,u){const l=lt(o),m=sy(l.serializer)+"/documents",v={writes:u.map(C=>bd(l.serializer,C))};yield l.Io("Commit",m,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw vt();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new je(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mt.min())?wr.exists(!1):wr.updateTime(t):wr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new je(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wr.updateTime(t)}return wr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class V1{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new Nw(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ie.Z)(function*(){const t=new L1(e.datastore),r=e.qc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Uc(u)}))}).catch(o=>{e.Uc(o)})}))}qc(e){try{const t=this.updateFunction(e);return!na(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!K0(t)}return!1}}class U1{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=si.UNAUTHENTICATED,this.clientId=VC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ie.Z)(function*(m){ze("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new je(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Bd(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function xb(n,e){return LM.apply(this,arguments)}function LM(){return LM=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ie.Z)(function*(u){r.isEqual(u)||(yield Zc(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),LM.apply(this,arguments)}function VM(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield BM(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>Cb(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>Cb(e.remoteStore,u)),n._onlineComponents=e}),UM.apply(this,arguments)}function UO(n){return"FirebaseError"===n.name?n.code===ye.FAILED_PRECONDITION||n.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function BM(n){return jM.apply(this,arguments)}function jM(){return jM=(0,Ie.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ze("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xb(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!UO(t))throw t;Ms("Error using user provided cache. Falling back to memory cache: "+t),yield xb(n,new $w)}}else ze("FirestoreClient","Using default OfflineComponentProvider"),yield xb(n,new $w);return n._offlineComponents}),jM.apply(this,arguments)}function Ob(n){return $M.apply(this,arguments)}function $M(){return $M=(0,Ie.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ze("FirestoreClient","Using user provided OnlineComponentProvider"),yield VM(n,n._uninitializedComponentsProvider._online)):(ze("FirestoreClient","Using default OnlineComponentProvider"),yield VM(n,new Vy))),n._onlineComponents}),$M.apply(this,arguments)}function BO(n){return BM(n).then(e=>e.persistence)}function Nb(n){return BM(n).then(e=>e.localStore)}function jO(n){return Ob(n).then(e=>e.remoteStore)}function HM(n){return Ob(n).then(e=>e.syncEngine)}function Uy(n){return GM.apply(this,arguments)}function GM(){return GM=(0,Ie.Z)(function*(n){const e=yield Ob(n),t=e.eventManager;return t.onListen=dt.bind(null,e.syncEngine),t.onUnlisten=Dn.bind(null,e.syncEngine),t}),GM.apply(this,arguments)}function HO(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,l,m,v){const C=new Mb({next:x=>{u.enqueueAndForget(()=>i(o,b));const q=x.docs.has(l);!q&&x.fromCache?v.reject(new je(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&x.fromCache&&m&&"server"===m.source?v.reject(new je(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),b=new f(Fc(l.path),C,{includeMetadataChanges:!0,Ku:!0});return jw(o,b)}(yield Uy(n),n.asyncQueue,e,t,r)})),r.promise}function GO(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,l,m,v){const C=new Mb({next:x=>{u.enqueueAndForget(()=>i(o,b)),x.fromCache&&"server"===m.source?v.reject(new je(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(x)},error:x=>v.reject(x)}),b=new f(l,C,{includeMetadataChanges:!0,Ku:!0});return jw(o,b)}(yield Uy(n),n.asyncQueue,e,t,r)})),r.promise}function zO(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const qO=new Map;function zM(n,e,t){if(!t)throw new je(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZO(n,e,t,r){if(!0===e&&!0===r)throw new je(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function WO(n){if(!at.isDocumentKey(n))throw new je(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KO(n){if(at.isDocumentKey(n))throw new je(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":vt()}function Fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rb(n);throw new je(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function YO(n,e){if(e<=0)throw new je(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class QO{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new je(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new je(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=zO(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new je(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new je(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new je(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hw{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new je(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new je(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new NC;switch(t.type){case"firstParty":return new FC(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new je(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=qO.get(e);t&&(ze("ComponentProvider","Removing Datastore"),qO.delete(e),t.terminate())}(this),Promise.resolve()}}class Tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tr(this.firestore,e,this._key)}}class is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class Fu extends is{constructor(e,t,r){super(e,t,Fc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tr(this.firestore,null,new at(e))}withConverter(e){return new Fu(this.firestore,e,this._path)}}function XO(n,e,...t){if(n=(0,Rn.m9)(n),zM("collection","path",e),n instanceof Hw){const r=Pn.fromString(e,...t);return KO(r),new Fu(n,null,r)}{if(!(n instanceof Tr||n instanceof Fu))throw new je(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pn.fromString(e,...t));return KO(r),new Fu(n.firestore,null,r)}}function Pb(n,e,...t){if(n=(0,Rn.m9)(n),1===arguments.length&&(e=VC.A()),zM("doc","path",e),n instanceof Hw){const r=Pn.fromString(e,...t);return WO(r),new Tr(n,null,new at(r))}{if(!(n instanceof Tr||n instanceof Fu))throw new je(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pn.fromString(e,...t));return WO(r),new Tr(n.firestore,n instanceof Fu?n.converter:null,new at(r))}}function eN(n,e){return n=(0,Rn.m9)(n),e=(0,Rn.m9)(e),(n instanceof Tr||n instanceof Fu)&&(e instanceof Tr||e instanceof Fu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function qM(n,e){return n=(0,Rn.m9)(n),e=(0,Rn.m9)(e),n instanceof is&&e instanceof is&&n.firestore===e.firestore&&_d(n._query,e._query)&&n.converter===e.converter}class K1{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Nw(this,"async_queue_retry"),this.Xc=()=>{const t=Ow();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Ow();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Ow();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Wr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Pc(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Br("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const o=Tb.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(o),o}Zc(){this.Wc&&vt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function ZM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Y1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ar extends Hw{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new K1,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tN(this),this._firestoreClient.terminate()}}function di(n){return n._firestoreClient||tN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tN(n){var e,t,r;const o=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new CS(n._databaseId,m,n._persistenceKey,(C=o).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,zO(C.experimentalLongPollingOptions),C.useFetchStreams));var m,C;n._firestoreClient=new U1(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function nN(n,e,t){const r=new Wr;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield xb(n,t),yield VM(n,e),r.resolve()}catch(o){const u=o;if(!UO(u))throw u;Ms("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function rN(n){if(n._initialized||n._terminated)throw new je(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lu(ui.fromBase64String(e))}catch(t){throw new je(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lu(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class el{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new je(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fp{constructor(e){this._methodName=e}}class kb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}}const aP=/^__.*__$/;class uP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Aa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ed(e,this.data,t,this.fieldTransforms)}}class iN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Aa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class Fb{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Fb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Ub(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(sN(this.ca)&&aP.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class cP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ld(e)}ya(e,t,r,o=!1){return new Fb({ca:e,methodName:t,ga:r,path:Rr.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pp(n){const e=n._freezeSettings(),t=Ld(n._databaseId);return new cP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Lb(n,e,t,r,o,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,o);QM("Data must be an object, but it was:",l,r);const m=uN(r,l);let v,C;if(u.merge)v=new ts(l.fieldMask),C=l.fieldTransforms;else if(u.mergeFields){const b=[];for(const x of u.mergeFields){const q=qw(e,x,t);if(!l.contains(q))throw new je(ye.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);lN(b,q)||b.push(q)}v=new ts(b),C=l.fieldTransforms.filter(x=>v.covers(x.field))}else v=null,C=l.fieldTransforms;return new uP(new Pi(m),v,C)}class zw extends fp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zw}}function oN(n,e,t){return new Fb({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class WM extends fp{_toFieldTransform(e){return new $f(e.path,new wd)}isEqual(e){return e instanceof WM}}class lP extends fp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=oN(this,e,!0),r=this.pa.map(u=>gp(u,t)),o=new Vc(r);return new $f(e.path,o)}isEqual(e){return this===e}}class dP extends fp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=oN(this,e,!0),r=this.pa.map(u=>gp(u,t)),o=new Eo(r);return new $f(e.path,o)}isEqual(e){return this===e}}class hP extends fp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Tu(e.serializer,ID(e.serializer,this.Ia));return new $f(e.path,t)}isEqual(e){return this===e}}function KM(n,e,t,r){const o=n.ya(1,e,t);QM("Data must be an object, but it was:",o,r);const u=[],l=Pi.empty();Eu(r,(v,C)=>{const b=Vb(e,v,t);C=(0,Rn.m9)(C);const x=o.da(b);if(C instanceof zw)u.push(b);else{const q=gp(C,x);null!=q&&(u.push(b),l.set(b,q))}});const m=new ts(u);return new iN(l,m,o.fieldTransforms)}function YM(n,e,t,r,o,u){const l=n.ya(1,e,t),m=[qw(e,r,t)],v=[o];if(u.length%2!=0)throw new je(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<u.length;q+=2)m.push(qw(e,u[q])),v.push(u[q+1]);const C=[],b=Pi.empty();for(let q=m.length-1;q>=0;--q)if(!lN(C,m[q])){const X=m[q];let be=v[q];be=(0,Rn.m9)(be);const Fe=l.da(X);if(be instanceof zw)C.push(X);else{const Ve=gp(be,Fe);null!=Ve&&(C.push(X),b.set(X,Ve))}}const x=new ts(C);return new iN(b,x,l.fieldTransforms)}function aN(n,e,t,r=!1){return gp(t,n.ya(r?4:3,e))}function gp(n,e){if(cN(n=(0,Rn.m9)(n)))return QM("Unsupported field value:",e,n),uN(n,e);if(n instanceof fp)return function(t,r){if(!sN(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=gp(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Rn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ID(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=vr.fromDate(t);return{timestampValue:Bc(r.serializer,o)}}if(t instanceof vr){const o=new vr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Bc(r.serializer,o)}}if(t instanceof kb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Lu)return{bytesValue:zi(r.serializer,t._byteString)};if(t instanceof Tr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:iw(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Rb(t)}`)}(n,e)}function uN(n,e){const t={};return M0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eu(n,(r,o)=>{const u=gp(o,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function cN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof vr||n instanceof kb||n instanceof Lu||n instanceof Tr||n instanceof fp)}function QM(n,e,t){if(!cN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Rb(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function qw(n,e,t){if((e=(0,Rn.m9)(e))instanceof el)return e._internalPath;if("string"==typeof e)return Vb(n,e);throw Ub("Field path arguments must be of type string or ",n,!1,void 0,t)}const fP=new RegExp("[~\\*/\\[\\]]");function Vb(n,e,t){if(e.search(fP)>=0)throw Ub(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new el(...e.split("."))._internalPath}catch{throw Ub(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ub(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||l)&&(v+=" (found",u&&(v+=` in field ${r}`),l&&(v+=` in document ${o}`),v+=")"),new je(ye.INVALID_ARGUMENT,m+n+v)}function lN(n,e){return n.some(t=>t.isEqual(e))}class Zw{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pP extends Zw{data(){return super.data()}}function Bb(n,e){return"string"==typeof e?Vb(n,e):e instanceof el?e._internalPath:e._delegate._internalPath}function dN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new je(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JM{}class Ww extends JM{}function jd(n,e,...t){let r=[];e instanceof JM&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof By).length,l=o.filter(m=>m instanceof Kw).length;if(u>1||u>0&&l>0)throw new je(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class Kw extends Ww{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Kw(e,t,r)}_apply(e){const t=this._parse(e);return gN(e._query,t),new is(e.firestore,e.converter,qm(e._query,t))}_parse(e){const t=pp(e.firestore);return function(o,u,l,m,v,C,b){let x;if(v.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new je(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){pN(b,C);const q=[];for(const X of b)q.push(fN(m,o,X));x={arrayValue:{values:q}}}else x=fN(m,o,b)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||pN(b,C),x=aN(l,"where",b,"in"===C||"not-in"===C);return On.create(v,C,x)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class By extends JM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new By(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const m of l)gN(u,m),u=qm(u,m)}(e._query,t),new is(e.firestore,e.converter,qm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class XM extends Ww{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new XM(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new je(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new je(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new kc(o,u);return function(m,v){if(null===Gm(m)){const C=zm(m);null!==C&&mN(0,C,v.field)}}(r,l),l}(e._query,this._field,this._direction);return new is(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new wo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class jb extends Ww{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new jb(e,t,r)}_apply(e){return new is(e.firestore,e.converter,j0(e._query,this._limit,this._limitType))}}class $b extends Ww{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new $b(e,t,r)}_apply(e){const t=hN(e,this.type,this._docOrFields,this._inclusive);return new is(e.firestore,e.converter,(o=t,new wo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class Hb extends Ww{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Hb(e,t,r)}_apply(e){const t=hN(e,this.type,this._docOrFields,this._inclusive);return new is(e.firestore,e.converter,(o=t,new wo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function hN(n,e,t,r){if(t[0]=(0,Rn.m9)(t[0]),t[0]instanceof Zw)return function(o,u,l,m,v){if(!m)throw new je(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const C=[];for(const b of Lc(o))if(b.field.isKeyField())C.push(Da(u,m.key));else{const x=m.data.field(b.field);if(Pm(x))throw new je(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const q=b.field.canonicalString();throw new je(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}C.push(x)}return new Du(C,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=pp(n.firestore);return function(u,l,m,v,C,b){const x=u.explicitOrderBy;if(C.length>x.length)throw new je(ye.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let X=0;X<C.length;X++){const be=C[X];if(x[X].field.isKeyField()){if("string"!=typeof be)throw new je(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof be}`);if(!B0(u)&&-1!==be.indexOf("/"))throw new je(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${be}' contains a slash.`);const Fe=u.path.child(Pn.fromString(be));if(!at.isDocumentKey(Fe))throw new je(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const Ve=new at(Fe);q.push(Da(l,Ve))}else{const Fe=aN(m,v,be);q.push(Fe)}}return new Du(q,b)}(n._query,n.firestore._databaseId,o,e,t,r)}}function fN(n,e,t){if("string"==typeof(t=(0,Rn.m9)(t))){if(""===t)throw new je(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B0(e)&&-1!==t.indexOf("/"))throw new je(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Pn.fromString(t));if(!at.isDocumentKey(r))throw new je(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Da(n,new at(r))}if(t instanceof Tr)return Da(n,t._key);throw new je(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rb(t)}.`)}function pN(n,e){if(!Array.isArray(n)||0===n.length)throw new je(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gN(n,e){if(e.isInequality()){const r=zm(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new je(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=Gm(n);null!==u&&mN(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new je(ye.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function mN(n,e,t){if(!t.isEqual(e))throw new je(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class ex{convertValue(e,t="none"){switch(Ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Eu(e,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new kb(Pr(e.latitude),Pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=km(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fm(e));default:return null}}convertTimestamp(e){const t=Ws(e);return new vr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Pn.fromString(e);St(cw(r));const o=new Ca(r.get(1),r.get(3)),u=new at(r.popFirst(5));return o.isEqual(t)||Br(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Gb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class CP extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}class mp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tl extends Zw{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Bb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Yw extends tl{data(e={}){return super.data(e)}}class $d{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new mp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Yw(this._firestore,this._userDataWriter,r.key,r,new mp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Yw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new mp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new Yw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new mp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,C=-1;return 0!==l.type&&(v=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),C=u.indexOf(l.doc.key)),{type:bP(l.type),doc:m,oldIndex:v,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function bP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}function vN(n,e){return n instanceof tl&&e instanceof tl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $d&&e instanceof $d&&n._firestore===e._firestore&&qM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Hd extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}function _N(n,e,t){n=Fn(n,Tr);const r=Fn(n.firestore,Ar),o=Gb(n.converter,e,t);return jy(r,[Lb(pp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,wr.none())])}function wN(n,e,t,...r){n=Fn(n,Tr);const o=Fn(n.firestore,Ar),u=pp(o);let l;return l="string"==typeof(e=(0,Rn.m9)(e))||e instanceof el?YM(u,"updateDoc",n._key,e,t,r):KM(u,"updateDoc",n._key,e),jy(o,[l.toMutation(n._key,wr.exists(!0))])}function EN(n,...e){var t,r,o;n=(0,Rn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||ZM(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(ZM(e[l])){const x=e[l];e[l]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[l+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[l+2]=null===(o=x.complete)||void 0===o?void 0:o.bind(x)}let v,C,b;if(n instanceof Tr)C=Fn(n.firestore,Ar),b=Fc(n._key.path),v={next:x=>{e[l]&&e[l](tx(C,n,x))},error:e[l+1],complete:e[l+2]};else{const x=Fn(n,is);C=Fn(x.firestore,Ar),b=x._query;const q=new Hd(C);v={next:X=>{e[l]&&e[l](new $d(C,q,x,X))},error:e[l+1],complete:e[l+2]},dN(n._query)}return function(x,q,X,be){const Fe=new Mb(be),Ve=new f(q,Fe,X);return x.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return jw(yield Uy(x),Ve)})),()=>{Fe.Dc(),x.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return i(yield Uy(x),Ve)}))}}(di(C),b,m,v)}function jy(n,e){return function(t,r){const o=new Wr;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function ms(n,e,t){return Do.apply(this,arguments)}(yield HM(t),r,o)})),o.promise}(di(n),e)}function tx(n,e,t){const r=t.docs.get(e._key),o=new Hd(n);return new tl(n,o,e._key,r,new mp(t.hasPendingWrites,t.fromCache),e.converter)}const HP={maxAttempts:5};class IN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pp(e)}set(e,t,r){this._verifyNotCommitted();const o=Gd(e,this._firestore),u=Gb(o.converter,t,r),l=Lb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,wr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Gd(e,this._firestore);let l;return l="string"==typeof(t=(0,Rn.m9)(t))||t instanceof el?YM(this._dataReader,"WriteBatch.update",u._key,t,r,o):KM(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,wr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Gd(e,this._firestore);return this._mutations=this._mutations.concat(new Uc(t._key,wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new je(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gd(n,e){if((n=(0,Rn.m9)(n)).firestore!==e)throw new je(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class GP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=pp(e)}get(e){const t=Gd(e,this._firestore),r=new CP(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return vt();const u=o[0];if(u.isFoundDocument())return new Zw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Zw(this._firestore,r,t._key,null,t.converter);throw vt()})}set(e,t,r){const o=Gd(e,this._firestore),u=Gb(o.converter,t,r),l=Lb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=Gd(e,this._firestore);let l;return l="string"==typeof(t=(0,Rn.m9)(t))||t instanceof el?YM(this._dataReader,"Transaction.update",u._key,t,r,o):KM(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Gd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Gd(e,this._firestore),r=new Hd(this._firestore);return super.get(e).then(o=>new tl(this._firestore,r,t._key,o._document,new mp(!1,!1),t.converter))}}function nx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function DN(){if(typeof Uint8Array>"u")throw new je("unimplemented","Uint8Arrays are not available in this environment.")}function bN(){if(!function IS(){return typeof atob<"u"}())throw new je("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){dd=dc.SDK_VERSION,(0,dc._registerComponent)(new hc.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Ar(new PC(t.getProvider("auth-internal")),new oS(t.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new je(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ca(m.options.projectId,v)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,dc.registerVersion)(xC,"3.13.0",n),(0,dc.registerVersion)(xC,"3.13.0","esm2017")}();class Qw{constructor(e){this._delegate=e}static fromBase64String(e){return bN(),new Qw(Lu.fromBase64String(e))}static fromUint8Array(e){return DN(),new Qw(Lu.fromUint8Array(e))}toBase64(){return bN(),this._delegate.toBase64()}toUint8Array(){return DN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function rx(n){return function XP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ek{enableIndexedDbPersistence(e,t){return function J1(n,e){rN(n=Fn(n,Ar));const t=di(n);if(t._uninitializedComponentsProvider)throw new je(ye.FAILED_PRECONDITION,"SDK cache is already specified.");Ms("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new Vy;return nN(t,o,new FM(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function X1(n){rN(n=Fn(n,Ar));const e=di(n);if(e._uninitializedComponentsProvider)throw new je(ye.FAILED_PRECONDITION,"SDK cache is already specified.");Ms("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Vy;return nN(e,r,new LO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function eP(n){if(n._initialized&&!n._terminated)throw new je(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!Hi.D())return Promise.resolve();const o=r+"main";yield Hi.delete(o)}),function(r){return t.apply(this,arguments)})(by(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class TN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ca||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ms("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function JO(n,e,t,r={}){var o;const u=(n=Fn(n,Hw))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,v;if("string"==typeof r.mockUserToken)m=r.mockUserToken,v=si.MOCK_USER;else{m=(0,Rn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new je(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new si(C)}n._authCredentials=new RC(new w0(m,v))}}(this._delegate,e,t,r)}enableNetwork(){return function nP(n){return function B1(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield BO(n),t=yield jO(n);return e.setNetworkEnabled(!0),function(r){const o=lt(r);return o.vu.delete(0),Vd(o)}(t)}))}(di(n=Fn(n,Ar)))}(this._delegate)}disableNetwork(){return function rP(n){return function j1(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield BO(n),t=yield jO(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(o){const u=lt(o);u.vu.add(0),yield ap(u),u.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(di(n=Fn(n,Ar)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ZO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function tP(n){return function(e){const t=new Wr;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function C1(n,e){return wM.apply(this,arguments)}(yield HM(e),t)})),t.promise}(di(n=Fn(n,Ar)))}(this._delegate)}onSnapshotsInSync(e){return function PP(n,e){return function G1(n,e){const t=new Mb(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Uy(n),o=t,lt(r).ku.add(o),void o.next();var r,o})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Uy(n),o=t,void lt(r).ku.delete(o);var r,o}))}}(di(n=Fn(n,Ar)),ZM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $y(this,XO(this._delegate,e))}catch(t){throw Os(t,"collection()","Firestore.collection()")}}doc(e){try{return new sa(this,Pb(this._delegate,e))}catch(t){throw Os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ns(this,function W1(n,e){if(n=Fn(n,Hw),zM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new je(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new is(n,null,(t=e,new wo(Pn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function zP(n,e,t){n=Fn(n,Ar);const r=Object.assign(Object.assign({},HP),t);return function(o){if(o.maxAttempts<1)throw new je(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new Wr;return o.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const v=yield function $O(n){return Ob(n).then(e=>e.datastore)}(o);new V1(o.asyncQueue,v,l,u,m).run()})),m.promise}(di(n),o=>e(new GP(n,o)),r)}(this._delegate,t=>e(new AN(this,t)))}batch(){return di(this._delegate),new SN(new IN(this._delegate,e=>jy(this._delegate,e)))}loadBundle(e){return function iP(n,e){const t=di(n=Fn(n,Ar)),r=new Y1;return function z1(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?Xm().encode(u):u,v=function(v,C){if(v instanceof Uint8Array)return VO(v,C);if(v instanceof ArrayBuffer)return VO(new Uint8Array(v),C);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new F1(v,l);var v}(t,Ld(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function P1(n,e,t){const r=lt(n);var o;(o=(0,Ie.Z)(function*(u,l,m){try{const v=yield l.getMetadata();if(yield function(q,X){const be=lt(q),Fe=$r(X.createTime);return be.persistence.runTransaction("hasNewerBundle","readonly",Ve=>be.qs.getBundleMetadata(Ve,X.id)).then(Ve=>!!Ve&&Ve.createTime.compareTo(Fe)>=0)}(u.localStore,v))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(q=v).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);m._updateProgress(D(v));const C=new I(v,u.localStore,l.serializer);let b=yield l.bc();for(;b;){const q=yield C.zu(b);q&&m._updateProgress(q),b=yield l.bc()}const x=yield C.complete();return yield Xc(u,x.Ju,void 0),yield function(q,X){const be=lt(q);return be.persistence.runTransaction("Save bundle","readwrite",Fe=>be.qs.saveBundleMetadata(Fe,X))}(u.localStore,v),m._completeWith(x.progress),Promise.resolve(x.Hu)}catch(v){return Ms("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var q}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield HM(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function sP(n,e){return function q1(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const o=lt(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.qs.getNamedQuery(u,r))}(yield Nb(n),e)}))}(di(n=Fn(n,Ar)),e).then(t=>t?new is(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ns(this,t):null)}}class zb extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qw(new Lu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sa.forKey(t,this.firestore,null)}}class AN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zb(e)}get(e){const t=vp(e);return this._delegate.get(t).then(r=>new Jw(this._firestore,new tl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=vp(e);return r?(nx("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=vp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=vp(e);return this._delegate.delete(t),this}}class SN{constructor(e){this._delegate=e}set(e,t,r){const o=vp(e);return r?(nx("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=vp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=vp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Yw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=yp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new yp(e,new zb(e),t),o.set(t,u)),u}}yp.INSTANCES=new WeakMap;class sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sa(t,new Tr(t._delegate,r,new at(e)))}static forKey(e,t,r){return new sa(t,new Tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $y(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $y(this.firestore,XO(this._delegate,e))}catch(t){throw Os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Rn.m9)(e))instanceof Tr&&eN(this._delegate,e)}set(e,t){t=nx("DocumentReference.set",t);try{return t?_N(this._delegate,e,t):_N(this._delegate,e)}catch(r){throw Os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?wN(this._delegate,e):wN(this._delegate,e,t,...r)}catch(o){throw Os(o,"updateDoc()","DocumentReference.update()")}}delete(){return function NP(n){return jy(Fn(n.firestore,Ar),[new Uc(n._key,wr.none())])}(this._delegate)}onSnapshot(...e){const t=MN(e),r=xN(e,o=>new Jw(this.firestore,new tl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return EN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function AP(n){n=Fn(n,Tr);const e=Fn(n.firestore,Ar),t=di(e),r=new Hd(e);return function $1(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,l){try{const m=yield function(v,C){const b=lt(v);return b.persistence.runTransaction("read document","readonly",x=>b.localDocuments.getDocument(x,C))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new je(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Bd(m,`Failed to get document '${u} from cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield Nb(n),e,t);var r})),t.promise}(t,n._key).then(o=>new tl(e,r,n._key,o,new mp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function SP(n){n=Fn(n,Tr);const e=Fn(n.firestore,Ar);return HO(di(e),n._key,{source:"server"}).then(t=>tx(e,n,t))}(this._delegate):function TP(n){n=Fn(n,Tr);const e=Fn(n.firestore,Ar);return HO(di(e),n._key).then(t=>tx(e,n,t))}(this._delegate),t.then(r=>new Jw(this.firestore,new tl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new sa(this.firestore,this._delegate.withConverter(e?yp.getInstance(this.firestore,e):null))}}function Os(n,e,t){return n.message=n.message.replace(e,t),n}function MN(n){for(const e of n)if("object"==typeof e&&!rx(e))return e;return{}}function xN(n,e){var t,r;let o;return o=rx(n[0])?n[0]:rx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Jw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return vN(this._delegate,e._delegate)}}class Xw extends Jw{data(e){const t=this._delegate.data(e);return function sS(n,e){n||vt()}(void 0!==t),t}}class Ns{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zb(e)}where(e,t,r){try{return new Ns(this.firestore,jd(this._delegate,function gP(n,e,t){const r=e,o=Bb("where",n);return Kw._create(o,r,t)}(e,t,r)))}catch(o){throw Os(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ns(this.firestore,jd(this._delegate,function mP(n,e="asc"){const t=e,r=Bb("orderBy",n);return XM._create(r,t)}(e,t)))}catch(r){throw Os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ns(this.firestore,jd(this._delegate,function yP(n){return YO("limit",n),jb._create("limit",n,"F")}(e)))}catch(t){throw Os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ns(this.firestore,jd(this._delegate,function vP(n){return YO("limitToLast",n),jb._create("limitToLast",n,"L")}(e)))}catch(t){throw Os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ns(this.firestore,jd(this._delegate,function _P(...n){return $b._create("startAt",n,!0)}(...e)))}catch(t){throw Os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ns(this.firestore,jd(this._delegate,function wP(...n){return $b._create("startAfter",n,!1)}(...e)))}catch(t){throw Os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ns(this.firestore,jd(this._delegate,function EP(...n){return Hb._create("endBefore",n,!1)}(...e)))}catch(t){throw Os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ns(this.firestore,jd(this._delegate,function IP(...n){return Hb._create("endAt",n,!0)}(...e)))}catch(t){throw Os(t,"endAt()","Query.endAt()")}}isEqual(e){return qM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function xP(n){n=Fn(n,is);const e=Fn(n.firestore,Ar),t=di(e),r=new Hd(e);return function H1(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,l){try{const m=yield Iw(o,u,!0),v=new W(u,m.ir),C=v.sc(m.documents),b=v.applyChanges(C,!1);l.resolve(b.snapshot)}catch(m){const v=Bd(m,`Failed to execute query '${u} against cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield Nb(n),e,t);var r})),t.promise}(t,n._query).then(o=>new $d(e,r,n,o))}(this._delegate):"server"===e?.source?function OP(n){n=Fn(n,is);const e=Fn(n.firestore,Ar),t=di(e),r=new Hd(e);return GO(t,n._query,{source:"server"}).then(o=>new $d(e,r,n,o))}(this._delegate):function MP(n){n=Fn(n,is);const e=Fn(n.firestore,Ar),t=di(e),r=new Hd(e);return dN(n._query),GO(t,n._query).then(o=>new $d(e,r,n,o))}(this._delegate),t.then(r=>new ix(this.firestore,new $d(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=MN(e),r=xN(e,o=>new ix(this.firestore,new $d(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return EN(this._delegate,t,r)}withConverter(e){return new Ns(this.firestore,this._delegate.withConverter(e?yp.getInstance(this.firestore,e):null))}}class nk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ix{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xw(this._firestore,r))})}isEqual(e){return vN(this._delegate,e._delegate)}}class $y extends Ns{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sa(this.firestore,e):null}doc(e){try{return new sa(this.firestore,void 0===e?Pb(this._delegate):Pb(this._delegate,e))}catch(t){throw Os(t,"doc()","CollectionReference.doc()")}}add(e){return function RP(n,e){const t=Fn(n.firestore,Ar),r=Pb(n),o=Gb(n.converter,e);return jy(t,[Lb(pp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,wr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new sa(this.firestore,t))}isEqual(e){return eN(this._delegate,e._delegate)}withConverter(e){return new $y(this.firestore,this._delegate.withConverter(e?yp.getInstance(this.firestore,e):null))}}function vp(n){return Fn(n,Tr)}class sx{constructor(...e){this._delegate=new el(...e)}static documentId(){return new sx(Rr.keyField().canonicalString())}isEqual(e){return(e=(0,Rn.m9)(e))instanceof el&&this._delegate._internalPath.isEqual(e._internalPath)}}class _p{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ZP(){return new WM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _p(e)}static delete(){const e=function qP(){return new zw("deleteField")}();return e._methodName="FieldValue.delete",new _p(e)}static arrayUnion(...e){const t=function WP(...n){return new lP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new _p(t)}static arrayRemove(...e){const t=function KP(...n){return new dP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new _p(t)}static increment(e){const t=function YP(n){return new hP("increment",n)}(e);return t._methodName="FieldValue.increment",new _p(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rk={Firestore:TN,GeoPoint:kb,Timestamp:vr,Blob:Qw,Transaction:AN,WriteBatch:SN,DocumentReference:sa,DocumentSnapshot:Jw,Query:Ns,QueryDocumentSnapshot:Xw,QuerySnapshot:ix,CollectionReference:$y,FieldPath:sx,FieldValue:_p,setLogLevel:function tk(n){!function OC(n){vu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function ON(n,e){return function ok(n,e=kI.z){return new Vi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ox(n,e){return ON(n,e).pipe((0,Qt.U)(t=>({payload:t,type:"query"})))}function qb(n,e){return ox(n,e).pipe(qa(void 0),uf(),(0,Qt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const v=o.find(b=>b.doc.ref.isEqual(l.ref)),C=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(l.metadata)||!v&&C&&JSON.stringify(C.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function NN(n,e,t){return qb(n,t).pipe(la((r,o)=>function uk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function ck(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ax(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ax(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ax(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),(0,A_.x)(),(0,Qt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function ax(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function RN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function sk(n){(function ik(n,e){n.INTERNAL.registerComponent(new hc.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},rk)))})(n,(e,t)=>new TN(e,t,new ek)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(LI.Z);class PN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Qt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(qa(void 0),uf(),ri(([r,o])=>o.length>0||!r),(0,Qt.U)(([r,o])=>o),Nr.iC)}auditTrail(e){return this.stateChanges(e).pipe(la((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RN(e);return NN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}valueChanges(e={}){return ox(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Nr.iC)}get(e){return(0,tr.D)(this.query.get(e)).pipe(Nr.iC)}add(e){return this.ref.add(e)}doc(e){return new kN(this.ref.doc(e),this.afs)}}class kN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=VN(r,t);return new PN(o,u,this.afs)}snapshotChanges(){return function ak(n,e){return ON(n,e).pipe(qa(void 0),uf(),(0,Qt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Qt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,tr.D)(this.ref.get(e)).pipe(Nr.iC)}}class lk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ri(t=>t.length>0),Nr.iC):qb(this.query,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}auditTrail(e){return this.stateChanges(e).pipe(la((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RN(e);return NN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nr.iC)}valueChanges(e={}){return ox(this.query,this.afs.schedulers.outsideAngular).pipe((0,Qt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Nr.iC)}get(e){return(0,tr.D)(this.query.get(e)).pipe(Nr.iC)}}const FN=new h.OlP("angularfire2.enableFirestorePersistence"),LN=new h.OlP("angularfire2.firestore.persistenceSettings"),dk=new h.OlP("angularfire2.firestore.settings"),hk=new h.OlP("angularfire2.firestore.use-emulator");function VN(n,e=(t=>t)){return{query:e(n),ref:n}}let UN=(()=>{class n{constructor(t,r,o,u,l,m,v,C,b,x,q,X,be,Fe,Ve,It,Ut){this.schedulers=v;const _t=(0,_i.on)(t,m,r),jt=b;x&&yc(_t,m,q,be,Fe,Ve,X,It),[this.firestore,this.persistenceEnabled$]=(0,_i.cc)(`${_t.name}.firestore`,"AngularFirestore",_t.name,()=>{const un=m.runOutsideAngular(()=>_t.firestore());if(u&&un.settings(u),jt&&un.useEmulator(...jt),o&&!Ir(l)){const Sn=()=>{try{return(0,tr.D)(un.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(ss){return typeof console<"u"&&console.warn(ss),(0,Nt.of)(!1)}};return[un,m.runOutsideAngular(Sn)]}return[un,(0,Nt.of)(!1)]},[u,jt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=VN(o,r),m=this.schedulers.ngZone.run(()=>u);return new PN(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new lk(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new kN(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_i.Dh),h.LFG(_i.xv,8),h.LFG(FN,8),h.LFG(dk,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Nr.HU),h.LFG(LN,8),h.LFG(hk,8),h.LFG(Kl,8),h.LFG(D_,8),h.LFG(b_,8),h.LFG(mc,8),h.LFG(T_,8),h.LFG(PI,8),h.LFG(sf,8),h.LFG(C_,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fk=(()=>{class n{constructor(){Gg.Z.registerVersion("angularfire",Nr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:FN,useValue:!0},{provide:LN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[UN]}),n})(),Zb=(()=>{class n{constructor(t,r){this.afs=t,this.db=r,this._loggedInUser$=new mi.X(JSON.parse(sessionStorage.getItem("loggedInUser"))||null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,Ie.Z)(function*(){try{const r=yield t.afs.signInWithPopup(new iA.V);return t.db.collection("users").doc(r.user.uid).get().pipe(Zr(1)).subscribe({next:o=>{o.exists?o.data():t.db.collection("users").doc(r.user.uid).set({followedByUsers:[]})},error:o=>{console.error(o)}}),sessionStorage.setItem("loggedInUser",JSON.stringify(r)),t._loggedInUser$.next(r),r}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,Ie.Z)(function*(){try{const o=yield r.afs.signInWithEmailAndPassword(t.email,t.password);return r.db.collection("users").doc(o.user.uid).get().pipe(Zr(1)).subscribe({next:u=>{u.exists?u.data():r.db.collection("users").doc(o.user.uid).set({followedByUsers:[]})},error:u=>{console.error(u)}}),sessionStorage.setItem("loggedInUser",JSON.stringify(o)),r._loggedInUser$.next(o),o}catch(o){throw console.error(o.message),o.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,Ie.Z)(function*(){try{const o=yield r.afs.createUserWithEmailAndPassword(t.email,t.password);return r.db.collection("users").doc(o.user.uid).get().pipe(Zr(1)).subscribe({next:u=>{u.exists?u.data():r.db.collection("users").doc(o.user.uid).set({followedByUsers:[]})},error:u=>{console.error(u)}}),sessionStorage.setItem("loggedInUser",JSON.stringify(o)),r._loggedInUser$.next(o),o}catch(o){throw console.error(o.message),o.message}})()}logOut(){var t=this;return(0,Ie.Z)(function*(){try{yield t.afs.signOut(),sessionStorage.removeItem("loggedInUser"),t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(Kl),h.LFG(UN))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BN=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.Qsj),h.Y36(h.SBq))};static#t=this.\u0275dir=h.lG2({type:n})}return n})(),wp=(()=>{class n extends BN{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=h.n5z(n)))(o||n)}}();static#t=this.\u0275dir=h.lG2({type:n,features:[h.qOj]})}return n})();const Vu=new h.OlP("NgValueAccessor"),mk={provide:Vu,useExisting:(0,h.Gpc)(()=>Wb),multi:!0},vk=new h.OlP("CompositionEventMode");let Wb=(()=>{class n extends BN{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yk(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(vk,8))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){1&r&&h.NdJ("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[h._Bn([mk]),h.qOj]})}return n})();const ys=new h.OlP("NgValidators"),qd=new h.OlP("NgAsyncValidators");function QN(n){return null!=n}function JN(n){return(0,h.QGY)(n)?(0,tr.D)(n):n}function XN(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function eR(n,e){return e.map(t=>t(n))}function tR(n){return n.map(e=>function wk(n){return!n.validate}(e)?e:t=>e.validate(t))}function ux(n){return null!=n?function nR(n){if(!n)return null;const e=n.filter(QN);return 0==e.length?null:function(t){return XN(eR(t,e))}}(tR(n)):null}function cx(n){return null!=n?function rR(n){if(!n)return null;const e=n.filter(QN);return 0==e.length?null:function(t){return function pk(...n){const e=(0,ro.jO)(n),{args:t,keys:r}=ar(n),o=new Vi.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let v=l,C=l;for(let b=0;b<l;b++){let x=!1;(0,_l.Xf)(t[b]).subscribe((0,Yi.x)(u,q=>{x||(x=!0,C--),m[b]=q},()=>v--,void 0,()=>{(!v||!x)&&(C||u.next(r?io(r,m):m),u.complete())}))}});return e?o.pipe(Ku(e)):o}(eR(t,e).map(JN)).pipe((0,Qt.U)(XN))}}(tR(n)):null}function iR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function lx(n){return n?Array.isArray(n)?n:[n]:[]}function Yb(n,e){return Array.isArray(n)?n.includes(e):n===e}function aR(n,e){const t=lx(e);return lx(n).forEach(o=>{Yb(t,o)||t.push(o)}),t}function uR(n,e){return lx(e).filter(t=>!Yb(n,t))}class cR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ux(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Rs extends cR{get formDirective(){return null}get path(){return null}}class Zd extends cR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lR{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let dR=(()=>{class n extends lR{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(Zd,2))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){2&r&&h.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[h.qOj]})}return n})(),hR=(()=>{class n extends lR{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(Rs,10))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){2&r&&h.ekj("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[h.qOj]})}return n})();const eE="VALID",Jb="INVALID",Hy="PENDING",tE="DISABLED";function fx(n){return(Xb(n)?n.validators:n)||null}function px(n,e){return(Xb(e)?e.asyncValidators:n)||null}function Xb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class mR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===eE}get invalid(){return this.status===Jb}get pending(){return this.status==Hy}get disabled(){return this.status===tE}get enabled(){return this.status!==tE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(aR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(aR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uR(e,this._rawAsyncValidators))}hasValidator(e){return Yb(this._rawValidators,e)}hasAsyncValidator(e){return Yb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Hy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=tE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=eE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===eE||this.status===Hy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tE:eE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Hy,this._hasOwnPendingAsyncValidator=!0;const t=JN(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?tE:this.errors?Jb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hy)?Hy:this._anyControlsHaveStatus(Jb)?Jb:eE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Dk(n){return Array.isArray(n)?ux(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function bk(n){return Array.isArray(n)?cx(n):n||null}(this._rawAsyncValidators)}}class gx extends mR{constructor(e,t,r){super(fx(t),px(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function gR(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function pR(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ep=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>nE}),nE="always";function rE(n,e,t=nE){mx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Sk(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&yR(n,e)})}(n,e),function xk(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Mk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&yR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ak(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function nT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mx(n,e){const t=function sR(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(iR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function oR(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(iR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();nT(e._rawValidators,o),nT(e._rawAsyncValidators,o)}function yR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const kk={provide:Rs,useExisting:(0,h.Gpc)(()=>iT)},iE=(()=>Promise.resolve())();let iT=(()=>{class n extends Rs{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new gx({},ux(t),cx(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){iE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),rE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){iE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){iE.then(()=>{const r=this._findContainer(t.path),o=new gx({});(function vR(n,e){mx(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){iE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){iE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function _R(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(ys,10),h.Y36(qd,10),h.Y36(Ep,8))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){1&r&&h.NdJ("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([kk]),h.qOj]})}return n})();function wR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ER(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const IR=class extends mR{constructor(e=null,t,r){super(fx(t),px(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ER(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ER(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Vk={provide:Zd,useExisting:(0,h.Gpc)(()=>wx)},bR=(()=>Promise.resolve())();let wx=(()=>{class n extends Zd{constructor(t,r,o,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new IR,this._registered=!1,this.name="",this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function _x(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Wb?t=u:function Rk(n){return Object.getPrototypeOf(n.constructor)===wp}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function vx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){rE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){bR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,h.VuI)(r);bR.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function eT(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(Rs,9),h.Y36(ys,10),h.Y36(qd,10),h.Y36(Vu,10),h.Y36(h.sBO,8),h.Y36(Ep,8))};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([Vk]),h.qOj,h.TTD]})}return n})(),TR=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),SR=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({})}return n})();const Ex=new h.OlP("NgModelWithFormControlWarning");let zR=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({imports:[SR]})}return n})(),cF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ep,useValue:t.callSetDisabledState??nE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({imports:[zR]})}return n})(),lF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ex,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ep,useValue:t.callSetDisabledState??nE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({imports:[zR]})}return n})();function dF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"form",9),h.NdJ("ngSubmit",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.onLogInWithEmailAndPassword())}),h.TgZ(1,"input",10),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.userCred.email=o)}),h.qZA(),h.TgZ(2,"input",11),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.userCred.password=o)}),h.qZA(),h.TgZ(3,"button",12),h._uU(4,"Log in"),h.qZA()()}if(2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngModel",t.userCred.email),h.xp6(1),h.Q6J("ngModel",t.userCred.password)}}function hF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"form",9),h.NdJ("ngSubmit",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.onRegisterWithEmailAndPassword())}),h.TgZ(1,"input",10),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.userCred.email=o)}),h.qZA(),h.TgZ(2,"input",11),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.userCred.password=o)}),h.qZA(),h.TgZ(3,"button",13),h._uU(4,"Register"),h.qZA()()}if(2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngModel",t.userCred.email),h.xp6(1),h.Q6J("ngModel",t.userCred.password)}}let fF=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.userCred={email:"",password:""},this.isLogInFormShown=!1}ngOnInit(){}onLogInWithGoogle(){var t=this;return(0,Ie.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(Zr(1)).subscribe({next:o=>{o&&t.router.navigateByUrl("/")},error:o=>{console.error(o)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,Ie.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(Zr(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,Ie.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(Zr(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(Zb),h.Y36(vi))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["login-page"]],decls:13,vars:2,consts:[[1,"login"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48","width","30px","height","30px"],["fill","#FFC107","d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"],["fill","#FF3D00","d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"],["fill","#4CAF50","d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"],["fill","#1976D2","d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"],[3,"ngSubmit"],["type","email","name","email","placeholder","Enter email",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","Enter password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],[1,"btn-register-with-email-password"]],template:function(r,o){1&r&&(h.TgZ(0,"section",0),h.YNc(1,dF,5,2,"form",1),h.YNc(2,hF,5,2,"form",1),h.TgZ(3,"p",2),h.NdJ("click",function(){return o.isLogInFormShown=!o.isLogInFormShown}),h._uU(4," Don't you have a user? Register here "),h.qZA(),h.TgZ(5,"button",3),h.NdJ("click",function(){return o.onLogInWithGoogle()}),h.O4$(),h.TgZ(6,"svg",4),h._UZ(7,"path",5)(8,"path",6)(9,"path",7)(10,"path",8),h.qZA(),h.kcU(),h.TgZ(11,"span"),h._uU(12,"Log in with Google"),h.qZA()()()),2&r&&(h.xp6(1),h.Q6J("ngIf",!o.isLogInFormShown),h.xp6(1),h.Q6J("ngIf",o.isLogInFormShown))},dependencies:[_s,TR,Wb,dR,hR,wx,iT],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:2em;border:none;border-radius:.3em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2em;cursor:pointer;border:none;border-radius:.3em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2em;cursor:pointer;border:none;border-radius:.3em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.5em;height:3em;border-radius:.4em;border:none;cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})(),pF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["message-page"]],decls:2,vars:0,template:function(r,o){1&r&&(h.TgZ(0,"p"),h._uU(1,"message-page works!"),h.qZA())}})}return n})(),gF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["notification-page"]],decls:2,vars:0,template:function(r,o){1&r&&(h.TgZ(0,"p"),h._uU(1,"notification-page works!"),h.qZA())}})}return n})(),mF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["create-post-page"]],decls:2,vars:0,template:function(r,o){1&r&&(h.TgZ(0,"p"),h._uU(1,"create-post-page works!"),h.qZA())}})}return n})();const sE=()=>{let n=null;return(0,h.f3M)(Zb).loggedInUser$.pipe(Zr(1)).subscribe({next:e=>{n=e}}),!!n||((0,h.f3M)(vi).navigateByUrl("/login"),!1)},yF=[{path:"",component:e_,canActivate:[sE]},{path:"login",component:fF,canActivate:[()=>{let n=null;return(0,h.f3M)(Zb).loggedInUser$.pipe(Zr(1)).subscribe({next:e=>{n=e}}),!n||((0,h.f3M)(vi).navigateByUrl("/"),!1)}]},{path:"message",component:pF,canActivate:[sE]},{path:"notification",component:gF,canActivate:[sE]},{path:"create-post",component:mF,canActivate:[sE]},{path:"profile",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["profile"]],decls:2,vars:0,template:function(r,o){1&r&&(h.TgZ(0,"p"),h._uU(1,"profile works!"),h.qZA())}})}return n})(),canActivate:[sE]}];let vF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({imports:[Ig.forRoot(yF,{useHash:!0}),Ig]})}return n})();function _F(n,e){if(1&n&&h._UZ(0,"img",30),2&n){const t=h.oxw(2);h.Q6J("src",t.user.user.photoURL,h.LSH)}}function wF(n,e){1&n&&(h.O4$(),h.TgZ(0,"svg",31),h._UZ(1,"path",32)(2,"circle",33),h.qZA())}function EF(n,e){if(1&n){const t=h.EpF();h.O4$(),h.kcU(),h.TgZ(0,"div",34)(1,"ul")(2,"li",35),h.NdJ("click",function(){h.CHM(t);const o=h.oxw(2);return h.KtG(o.onLogOut())}),h._uU(3,"Log out"),h.qZA()()()}}const IF=function(){return{exact:!0}};function CF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"section",1)(1,"div",2)(2,"div",3),h.O4$(),h.TgZ(3,"svg",4),h._UZ(4,"path",5),h.qZA()(),h.kcU(),h.TgZ(5,"nav")(6,"ul")(7,"li",6),h.O4$(),h.TgZ(8,"svg",7),h._UZ(9,"path",8),h.qZA()(),h.kcU(),h.TgZ(10,"li",9),h.O4$(),h.TgZ(11,"svg",10),h._UZ(12,"path",11)(13,"path",12),h.qZA()(),h.kcU(),h.TgZ(14,"li",13),h.O4$(),h.TgZ(15,"svg",14),h._UZ(16,"path",15),h.qZA()(),h.kcU(),h.TgZ(17,"li",16),h.O4$(),h.TgZ(18,"svg",17),h._UZ(19,"path",18)(20,"line",19)(21,"line",20),h.qZA()(),h.kcU(),h.TgZ(22,"li",21),h.YNc(23,_F,1,1,"img",22),h.YNc(24,wF,3,0,"ng-template",null,23,h.W1O),h.qZA()()()(),h.TgZ(26,"div",24),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.isExtraMenuOpen=!o.isExtraMenuOpen)}),h.O4$(),h.TgZ(27,"svg",25),h._UZ(28,"line",26)(29,"line",27)(30,"line",28),h.qZA(),h.YNc(31,EF,4,0,"div",29),h.qZA()()}if(2&n){const t=h.MAs(25),r=h.oxw();h.xp6(7),h.Q6J("routerLinkActiveOptions",h.DdM(4,IF)),h.xp6(16),h.Q6J("ngIf",r.user.user.photoURL)("ngIfElse",t),h.xp6(8),h.Q6J("ngIf",r.isExtraMenuOpen)}}let DF=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,Ie.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(Zb),h.Y36(vi))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["aria-label","Notifications","color","rgb(245, 245, 245)","stroke","rgb(245, 245, 245)","stroke-width","2","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","user",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["alt","user",3,"src"],["xmlns","http://www.w3.org/2000/svg","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","color","white","viewBox","0 0 24 24","width","24px",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,o){1&r&&h.YNc(0,CF,32,5,"section",0),2&r&&h.Q6J("ngIf",o.user&&o.user.user)},dependencies:[_s,Wv,Eg],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.19);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:55px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function bF(n,e){1&n&&h._UZ(0,"router-outlet")}function TF(n,e){1&n&&h._UZ(0,"aside-menu")}function AF(n,e){1&n&&(h.TgZ(0,"main",2),h._UZ(1,"router-outlet"),h.qZA())}let SF=(()=>{class n{constructor(t){this.router=t,this.routerUrl=this.router.url}ngOnInit(){this.router.events.subscribe(t=>{t instanceof co&&(this.routerUrl=this.router.url)})}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(vi))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:5,consts:[[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,o){1&r&&(h.TgZ(0,"section"),h.YNc(1,bF,1,0,"router-outlet",0),h.YNc(2,TF,1,0,"aside-menu",0),h.YNc(3,AF,2,0,"main",1),h.qZA()),2&r&&(h.Tol("/login"===o.routerUrl?"main-app login-layout":"main-app app-layout"),h.xp6(1),h.Q6J("ngIf","/login"===o.routerUrl),h.xp6(1),h.Q6J("ngIf","/login"!==o.routerUrl),h.xp6(1),h.Q6J("ngIf","/login"!==o.routerUrl))},dependencies:[_s,xh,DF]})}return n})();class sT{}class oT{}class Uu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),u=o.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(o,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Uu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Uu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Uu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(m=>-1===u.indexOf(m)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(u=>u.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class MF{encodeKey(e){return qR(e)}encodeValue(e){return qR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const OF=/%(\d[a-f0-9])/gi,NF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function qR(n){return encodeURIComponent(n).replace(OF,(e,t)=>NF[t]??e)}function aT(n){return`${n}`}class Wd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new MF,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function xF(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const u=o.indexOf("="),[l,m]=-1==u?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,u)),e.decodeValue(o.slice(u+1))],v=t.get(l)||[];v.push(m),t.set(l,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],o=Array.isArray(r)?r.map(aT):[aT(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Wd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(aT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(aT(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class RF{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function ZR(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function WR(n){return typeof Blob<"u"&&n instanceof Blob}function KR(n){return typeof FormData<"u"&&n instanceof FormData}class oE{constructor(e,t,r,o){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function PF(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Uu),this.context||(this.context=new RF),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+l}}else this.params=new Wd,this.urlWithParams=t}serializeBody(){return null===this.body?null:ZR(this.body)||WR(this.body)||KR(this.body)||function kF(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Wd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||KR(this.body)?null:WR(this.body)?this.body.type||null:ZR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,C=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((x,q)=>x.set(q,e.setHeaders[q]),v)),e.setParams&&(C=Object.keys(e.setParams).reduce((x,q)=>x.set(q,e.setParams[q]),C)),new oE(t,r,u,{params:C,headers:v,context:b,reportProgress:m,responseType:o,withCredentials:l})}}var Gy=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Gy||{});class Sx{constructor(e,t=200,r="OK"){this.headers=e.headers||new Uu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Mx extends Sx{constructor(e={}){super(e),this.type=Gy.ResponseHeader}clone(e={}){return new Mx({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class zy extends Sx{constructor(e={}){super(e),this.type=Gy.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new zy({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class YR extends Sx{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function xx(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let FF=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let u;if(t instanceof oE)u=t;else{let v,C;v=o.headers instanceof Uu?o.headers:new Uu(o.headers),o.params&&(C=o.params instanceof Wd?o.params:new Wd({fromObject:o.params})),u=new oE(t,r,void 0!==o.body?o.body:null,{headers:v,context:o.context,params:C,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const l=(0,Nt.of)(u).pipe(Lo(v=>this.handler.handle(v)));if(t instanceof oE||"events"===o.observe)return l;const m=l.pipe(ri(v=>v instanceof zy));switch(o.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,Qt.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return m.pipe((0,Qt.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return m.pipe((0,Qt.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return m.pipe((0,Qt.U)(v=>v.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Wd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,xx(o,r))}post(t,r,o={}){return this.request("POST",t,xx(o,r))}put(t,r,o={}){return this.request("PUT",t,xx(o,r))}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(sT))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();function XR(n,e){return e(n)}function VF(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}const BF=new h.OlP(""),aE=new h.OlP(""),e1=new h.OlP("");function jF(){let n=null;return(e,t)=>{null===n&&(n=((0,h.f3M)(BF,{optional:!0})??[]).reduceRight(VF,XR));const r=(0,h.f3M)(h.HDt),o=r.add();return n(e,t).pipe(Ka(()=>r.remove(o)))}}let t1=(()=>{class n extends sT{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,h.f3M)(h.HDt)}handle(t){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(aE),...this.injector.get(e1,[])]));this.chain=o.reduceRight((u,l)=>function UF(n,e,t){return(r,o)=>t.runInContext(()=>e(r,u=>n(u,o)))}(u,l,this.injector),XR)}const r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(Ka(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(oT),h.LFG(h.lqb))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();const zF=/^\)\]\}',?\n/;let r1=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new h.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,tr.D)(r.\u0275loadImpl()):(0,Nt.of)(null)).pipe((0,Hn.w)(()=>new Vi.y(u=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((Fe,Ve)=>l.setRequestHeader(Fe,Ve.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Fe=t.detectContentTypeHeader();null!==Fe&&l.setRequestHeader("Content-Type",Fe)}if(t.responseType){const Fe=t.responseType.toLowerCase();l.responseType="json"!==Fe?Fe:"text"}const m=t.serializeBody();let v=null;const C=()=>{if(null!==v)return v;const Fe=l.statusText||"OK",Ve=new Uu(l.getAllResponseHeaders()),It=function qF(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return v=new Mx({headers:Ve,status:l.status,statusText:Fe,url:It}),v},b=()=>{let{headers:Fe,status:Ve,statusText:It,url:Ut}=C(),_t=null;204!==Ve&&(_t=typeof l.response>"u"?l.responseText:l.response),0===Ve&&(Ve=_t?200:0);let jt=Ve>=200&&Ve<300;if("json"===t.responseType&&"string"==typeof _t){const un=_t;_t=_t.replace(zF,"");try{_t=""!==_t?JSON.parse(_t):null}catch(Sn){_t=un,jt&&(jt=!1,_t={error:Sn,text:_t})}}jt?(u.next(new zy({body:_t,headers:Fe,status:Ve,statusText:It,url:Ut||void 0})),u.complete()):u.error(new YR({error:_t,headers:Fe,status:Ve,statusText:It,url:Ut||void 0}))},x=Fe=>{const{url:Ve}=C(),It=new YR({error:Fe,status:l.status||0,statusText:l.statusText||"Unknown Error",url:Ve||void 0});u.error(It)};let q=!1;const X=Fe=>{q||(u.next(C()),q=!0);let Ve={type:Gy.DownloadProgress,loaded:Fe.loaded};Fe.lengthComputable&&(Ve.total=Fe.total),"text"===t.responseType&&l.responseText&&(Ve.partialText=l.responseText),u.next(Ve)},be=Fe=>{let Ve={type:Gy.UploadProgress,loaded:Fe.loaded};Fe.lengthComputable&&(Ve.total=Fe.total),u.next(Ve)};return l.addEventListener("load",b),l.addEventListener("error",x),l.addEventListener("timeout",x),l.addEventListener("abort",x),t.reportProgress&&(l.addEventListener("progress",X),null!==m&&l.upload&&l.upload.addEventListener("progress",be)),l.send(m),u.next({type:Gy.Sent}),()=>{l.removeEventListener("error",x),l.removeEventListener("abort",x),l.removeEventListener("load",b),l.removeEventListener("timeout",x),t.reportProgress&&(l.removeEventListener("progress",X),null!==m&&l.upload&&l.upload.removeEventListener("progress",be)),l.readyState!==l.DONE&&l.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(Es))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ox=new h.OlP("XSRF_ENABLED"),i1=new h.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),s1=new h.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class o1{}let KF=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ln(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(ve),h.LFG(h.Lbi),h.LFG(i1))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac})}return n})();function YF(n,e){const t=n.url.toLowerCase();if(!(0,h.f3M)(Ox)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,h.f3M)(o1).getToken(),o=(0,h.f3M)(s1);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var Kd=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Kd||{});function QF(...n){const e=[FF,r1,t1,{provide:sT,useExisting:t1},{provide:oT,useExisting:r1},{provide:aE,useValue:YF,multi:!0},{provide:Ox,useValue:!0},{provide:o1,useClass:KF}];for(const t of n)e.push(...t.\u0275providers);return(0,h.MR2)(e)}const a1=new h.OlP("LEGACY_INTERCEPTOR_FN");function JF(){return function Cp(n,e){return{\u0275kind:n,\u0275providers:e}}(Kd.LegacyInterceptors,[{provide:a1,useFactory:jF},{provide:aE,useExisting:a1,multi:!0}])}let XF=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({providers:[QF(JF())]})}return n})();const sL_firebaseConfig={projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",storageBucket:"instagram-clone-gilshaashua.appspot.com",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"};var u1=M(7582),oL=M(9519);const uL=new h.OlP("angularfire2.messaging.vapid-key"),cL=new h.OlP("angularfire2.messaging.service-worker-registeration");let c1=(()=>{class n{constructor(t,r,o,u,l,m,v){const C=v,b=(0,Nt.of)(void 0).pipe((0,lo.R)(l.outsideAngular),(0,Gs.Q)(l.insideAngular),(0,Hn.w)(oL.Gb),(0,Hn.w)(X=>X?M.e(922).then(M.bind(M,5922)):so.E),(0,Qt.U)(()=>(0,_i.on)(t,u,r)),(0,Hn.w)(X=>(0,_i.cc)(`${X.name}.messaging`,"AngularFireMessaging",X.name,()=>(0,u1.mG)(this,void 0,void 0,function*(){return X.messaging()}),[])),n_({bufferSize:1,refCount:!1}));this.requestPermission=b.pipe((0,lo.R)(l.outsideAngular),(0,Gs.Q)(l.insideAngular),(0,Hn.w)(()=>Notification.requestPermission())),this.getToken=b.pipe((0,lo.R)(l.outsideAngular),(0,Gs.Q)(l.insideAngular),(0,Hn.w)(X=>(0,u1.mG)(this,void 0,void 0,function*(){if("granted"===Notification.permission){const be=C?yield C:null;return yield X.getToken({vapidKey:m,serviceWorkerRegistration:be})}return null})));const x=new Vi.y(X=>{navigator.permissions.query({name:"notifications"}).then(be=>{be.onchange=()=>X.next()})}),q=b.pipe((0,lo.R)(l.outsideAngular),(0,Gs.Q)(l.insideAngular),Dg(x),Dg(this.getToken));return this.tokenChanges=b.pipe((0,lo.R)(l.outsideAngular),(0,Gs.Q)(l.insideAngular),(0,Hn.w)(()=>Fo(this.getToken,q))),this.messages=b.pipe((0,lo.R)(l.outsideAngular),(0,Gs.Q)(l.insideAngular),(0,Hn.w)(X=>new Vi.y(be=>X.onMessage(be)))),this.requestToken=b.pipe((0,lo.R)(l.outsideAngular),(0,Gs.Q)(l.insideAngular),(0,Hn.w)(()=>this.requestPermission),Ds(()=>(0,Nt.of)(null)),(0,Si.z)(()=>this.tokenChanges)),this.deleteToken=()=>b.pipe((0,lo.R)(l.outsideAngular),(0,Gs.Q)(l.insideAngular),(0,Hn.w)(X=>X.deleteToken()),Za(!1)),(0,_i.pX)(this,b,u)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_i.Dh),h.LFG(_i.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Nr.HU),h.LFG(uL,8),h.LFG(cL,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lL=(()=>{class n{constructor(){Gg.Z.registerVersion("angularfire",Nr.q4.full,"fcm-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[c1]}),n})(),dL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n,bootstrap:[SF]});static#n=this.\u0275inj=h.cJS({imports:[qu,vF,XF,cF,lF,_i.hO.initializeApp(sL_firebaseConfig),af,lL,fk]})}return n})();Vp().bootstrapModule(dL).catch(n=>console.error(n))},5619:(yt,Ae,M)=>{M.d(Ae,{X:()=>B});var h=M(8645);class B extends h.x{constructor(Y){super(),this._value=Y}get value(){return this.getValue()}_subscribe(Y){const se=super._subscribe(Y);return!se.closed&&Y.next(this._value),se}getValue(){const{hasError:Y,thrownError:se,_value:ve}=this;if(Y)throw se;return this._throwIfClosed(),ve}next(Y){super.next(this._value=Y)}}},5592:(yt,Ae,M)=>{M.d(Ae,{y:()=>Oe});var h=M(305),B=M(7394),R=M(4850),Y=M(8407),se=M(2653),ve=M(4674),_e=M(1441);let Oe=(()=>{class ne{constructor(Ee){Ee&&(this._subscribe=Ee)}lift(Ee){const Ye=new ne;return Ye.source=this,Ye.operator=Ee,Ye}subscribe(Ee,Ye,ke){const We=function z(ne){return ne&&ne instanceof h.Lv||function V(ne){return ne&&(0,ve.m)(ne.next)&&(0,ve.m)(ne.error)&&(0,ve.m)(ne.complete)}(ne)&&(0,B.Nn)(ne)}(Ee)?Ee:new h.Hp(Ee,Ye,ke);return(0,_e.x)(()=>{const{operator:Se,source:ht}=this;We.add(Se?Se.call(We,ht):ht?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Ee){try{return this._subscribe(Ee)}catch(Ye){Ee.error(Ye)}}forEach(Ee,Ye){return new(Ye=he(Ye))((ke,We)=>{const Se=new h.Hp({next:ht=>{try{Ee(ht)}catch(ft){We(ft),Se.unsubscribe()}},error:We,complete:ke});this.subscribe(Se)})}_subscribe(Ee){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Ee)}[R.L](){return this}pipe(...Ee){return(0,Y.U)(Ee)(this)}toPromise(Ee){return new(Ee=he(Ee))((Ye,ke)=>{let We;this.subscribe(Se=>We=Se,Se=>ke(Se),()=>Ye(We))})}}return ne.create=Ue=>new ne(Ue),ne})();function he(ne){var Ue;return null!==(Ue=ne??se.config.Promise)&&void 0!==Ue?Ue:Promise}},8645:(yt,Ae,M)=>{M.d(Ae,{x:()=>_e});var h=M(5592),B=M(7394);const Y=(0,M(2306).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=M(9039),ve=M(1441);let _e=(()=>{class he extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const ne=new Oe(this,this);return ne.operator=z,ne}_throwIfClosed(){if(this.closed)throw new Y}next(z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(z)}})}error(z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:ne}=this;for(;ne.length;)ne.shift().error(z)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:ne,isStopped:Ue,observers:Ee}=this;return ne||Ue?B.Lc:(this.currentObservers=null,Ee.push(z),new B.w0(()=>{this.currentObservers=null,(0,se.P)(Ee,z)}))}_checkFinalizedStatuses(z){const{hasError:ne,thrownError:Ue,isStopped:Ee}=this;ne?z.error(Ue):Ee&&z.complete()}asObservable(){const z=new h.y;return z.source=this,z}}return he.create=(V,z)=>new Oe(V,z),he})();class Oe extends _e{constructor(V,z){super(),this.destination=V,this.source=z}next(V){var z,ne;null===(ne=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===ne||ne.call(z,V)}error(V){var z,ne;null===(ne=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===ne||ne.call(z,V)}complete(){var V,z;null===(z=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===z||z.call(V)}_subscribe(V){var z,ne;return null!==(ne=null===(z=this.source)||void 0===z?void 0:z.subscribe(V))&&void 0!==ne?ne:B.Lc}}},305:(yt,Ae,M)=>{M.d(Ae,{Hp:()=>ke,Lv:()=>ne});var h=M(4674),B=M(7394),R=M(2653),Y=M(3894),se=M(2420);const ve=he("C",void 0,void 0);function he(ee,De,ue){return{kind:ee,value:De,error:ue}}var V=M(7599),z=M(1441);class ne extends B.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,B.Nn)(De)&&De.add(this)):this.destination=ft}static create(De,ue,Me){return new ke(De,ue,Me)}next(De){this.isStopped?ht(function Oe(ee){return he("N",ee,void 0)}(De),this):this._next(De)}error(De){this.isStopped?ht(function _e(ee){return he("E",void 0,ee)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?ht(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Ee(ee,De){return Ue.call(ee,De)}class Ye{constructor(De){this.partialObserver=De}next(De){const{partialObserver:ue}=this;if(ue.next)try{ue.next(De)}catch(Me){We(Me)}}error(De){const{partialObserver:ue}=this;if(ue.error)try{ue.error(De)}catch(Me){We(Me)}else We(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(ue){We(ue)}}}class ke extends ne{constructor(De,ue,Me){let Be;if(super(),(0,h.m)(De)||!De)Be={next:De??void 0,error:ue??void 0,complete:Me??void 0};else{let k;this&&R.config.useDeprecatedNextContext?(k=Object.create(De),k.unsubscribe=()=>this.unsubscribe(),Be={next:De.next&&Ee(De.next,k),error:De.error&&Ee(De.error,k),complete:De.complete&&Ee(De.complete,k)}):Be=De}this.destination=new Ye(Be)}}function We(ee){R.config.useDeprecatedSynchronousErrorHandling?(0,z.O)(ee):(0,Y.h)(ee)}function ht(ee,De){const{onStoppedNotification:ue}=R.config;ue&&V.z.setTimeout(()=>ue(ee,De))}const ft={closed:!0,next:se.Z,error:function Se(ee){throw ee},complete:se.Z}},7394:(yt,Ae,M)=>{M.d(Ae,{Lc:()=>ve,w0:()=>se,Nn:()=>_e});var h=M(4674);const R=(0,M(2306).d)(he=>function(z){he(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((ne,Ue)=>`${Ue+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var Y=M(9039);class se{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Ee of z)Ee.remove(this);else z.remove(this);const{initialTeardown:ne}=this;if((0,h.m)(ne))try{ne()}catch(Ee){V=Ee instanceof R?Ee.errors:[Ee]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Ee of Ue)try{Oe(Ee)}catch(Ye){V=V??[],Ye instanceof R?V=[...V,...Ye.errors]:V.push(Ye)}}if(V)throw new R(V)}}add(V){var z;if(V&&V!==this)if(this.closed)Oe(V);else{if(V instanceof se){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(V)}}_hasParent(V){const{_parentage:z}=this;return z===V||Array.isArray(z)&&z.includes(V)}_addParent(V){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(V),z):z?[z,V]:V}_removeParent(V){const{_parentage:z}=this;z===V?this._parentage=null:Array.isArray(z)&&(0,Y.P)(z,V)}remove(V){const{_finalizers:z}=this;z&&(0,Y.P)(z,V),V instanceof se&&V._removeParent(this)}}se.EMPTY=(()=>{const he=new se;return he.closed=!0,he})();const ve=se.EMPTY;function _e(he){return he instanceof se||he&&"closed"in he&&(0,h.m)(he.remove)&&(0,h.m)(he.add)&&(0,h.m)(he.unsubscribe)}function Oe(he){(0,h.m)(he)?he():he.unsubscribe()}},2653:(yt,Ae,M)=>{M.d(Ae,{config:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(yt,Ae,M)=>{M.d(Ae,{E:()=>B});const B=new(M(5592).y)(se=>se.complete())},2459:(yt,Ae,M)=>{M.d(Ae,{D:()=>De});var h=M(4829),B=M(3093),R=M(5137),ve=M(5592),Oe=M(4971),he=M(4674),V=M(7103);function ne(ue,Me){if(!ue)throw new Error("Iterable cannot be null");return new ve.y(Be=>{(0,V.f)(Be,Me,()=>{const k=ue[Symbol.asyncIterator]();(0,V.f)(Be,Me,()=>{k.next().then(te=>{te.done?Be.complete():Be.next(te.value)})},0,!0)})})}var Ue=M(8382),Ee=M(4026),Ye=M(4266),ke=M(3664),We=M(5726),Se=M(9853),ht=M(541);function De(ue,Me){return Me?function ee(ue,Me){if(null!=ue){if((0,Ue.c)(ue))return function Y(ue,Me){return(0,h.Xf)(ue).pipe((0,R.R)(Me),(0,B.Q)(Me))}(ue,Me);if((0,Ye.z)(ue))return function _e(ue,Me){return new ve.y(Be=>{let k=0;return Me.schedule(function(){k===ue.length?Be.complete():(Be.next(ue[k++]),Be.closed||this.schedule())})})}(ue,Me);if((0,Ee.t)(ue))return function se(ue,Me){return(0,h.Xf)(ue).pipe((0,R.R)(Me),(0,B.Q)(Me))}(ue,Me);if((0,We.D)(ue))return ne(ue,Me);if((0,ke.T)(ue))return function z(ue,Me){return new ve.y(Be=>{let k;return(0,V.f)(Be,Me,()=>{k=ue[Oe.h](),(0,V.f)(Be,Me,()=>{let te,Ce;try{({value:te,done:Ce}=k.next())}catch(it){return void Be.error(it)}Ce?Be.complete():Be.next(te)},0,!0)}),()=>(0,he.m)(k?.return)&&k.return()})}(ue,Me);if((0,ht.L)(ue))return function ft(ue,Me){return ne((0,ht.Q)(ue),Me)}(ue,Me)}throw(0,Se.z)(ue)}(ue,Me):(0,h.Xf)(ue)}},4829:(yt,Ae,M)=>{M.d(Ae,{Xf:()=>Ue});var h=M(7582),B=M(4266),R=M(4026),Y=M(5592),se=M(8382),ve=M(5726),_e=M(9853),Oe=M(3664),he=M(541),V=M(4674),z=M(3894),ne=M(4850);function Ue(ee){if(ee instanceof Y.y)return ee;if(null!=ee){if((0,se.c)(ee))return function Ee(ee){return new Y.y(De=>{const ue=ee[ne.L]();if((0,V.m)(ue.subscribe))return ue.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,B.z)(ee))return function Ye(ee){return new Y.y(De=>{for(let ue=0;ue<ee.length&&!De.closed;ue++)De.next(ee[ue]);De.complete()})}(ee);if((0,R.t)(ee))return function ke(ee){return new Y.y(De=>{ee.then(ue=>{De.closed||(De.next(ue),De.complete())},ue=>De.error(ue)).then(null,z.h)})}(ee);if((0,ve.D)(ee))return Se(ee);if((0,Oe.T)(ee))return function We(ee){return new Y.y(De=>{for(const ue of ee)if(De.next(ue),De.closed)return;De.complete()})}(ee);if((0,he.L)(ee))return function ht(ee){return Se((0,he.Q)(ee))}(ee)}throw(0,_e.z)(ee)}function Se(ee){return new Y.y(De=>{(function ft(ee,De){var ue,Me,Be,k;return(0,h.mG)(this,void 0,void 0,function*(){try{for(ue=(0,h.KL)(ee);!(Me=yield ue.next()).done;)if(De.next(Me.value),De.closed)return}catch(te){Be={error:te}}finally{try{Me&&!Me.done&&(k=ue.return)&&(yield k.call(ue))}finally{if(Be)throw Be.error}}De.complete()})})(ee,De).catch(ue=>De.error(ue))})}},3019:(yt,Ae,M)=>{M.d(Ae,{T:()=>ve});var h=M(7537),B=M(4829),R=M(6232),Y=M(4564),se=M(2459);function ve(..._e){const Oe=(0,Y.yG)(_e),he=(0,Y._6)(_e,1/0),V=_e;return V.length?1===V.length?(0,B.Xf)(V[0]):(0,h.J)(he)((0,se.D)(V,Oe)):R.E}},2096:(yt,Ae,M)=>{M.d(Ae,{of:()=>R});var h=M(4564),B=M(2459);function R(...Y){const se=(0,h.yG)(Y);return(0,B.D)(Y,se)}},8251:(yt,Ae,M)=>{M.d(Ae,{x:()=>B});var h=M(305);function B(Y,se,ve,_e,Oe){return new R(Y,se,ve,_e,Oe)}class R extends h.Lv{constructor(se,ve,_e,Oe,he,V){super(se),this.onFinalize=he,this.shouldUnsubscribe=V,this._next=ve?function(z){try{ve(z)}catch(ne){se.error(ne)}}:super._next,this._error=Oe?function(z){try{Oe(z)}catch(ne){se.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(z){se.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},3997:(yt,Ae,M)=>{M.d(Ae,{x:()=>Y});var h=M(2737),B=M(9360),R=M(8251);function Y(ve,_e=h.y){return ve=ve??se,(0,B.e)((Oe,he)=>{let V,z=!0;Oe.subscribe((0,R.x)(he,ne=>{const Ue=_e(ne);(z||!ve(V,Ue))&&(z=!1,V=Ue,he.next(ne))}))})}function se(ve,_e){return ve===_e}},7398:(yt,Ae,M)=>{M.d(Ae,{U:()=>R});var h=M(9360),B=M(8251);function R(Y,se){return(0,h.e)((ve,_e)=>{let Oe=0;ve.subscribe((0,B.x)(_e,he=>{_e.next(Y.call(se,he,Oe++))}))})}},7537:(yt,Ae,M)=>{M.d(Ae,{J:()=>R});var h=M(1631),B=M(2737);function R(Y=1/0){return(0,h.z)(B.y,Y)}},1631:(yt,Ae,M)=>{M.d(Ae,{z:()=>Oe});var h=M(7398),B=M(4829),R=M(9360),Y=M(7103),se=M(8251),_e=M(4674);function Oe(he,V,z=1/0){return(0,_e.m)(V)?Oe((ne,Ue)=>(0,h.U)((Ee,Ye)=>V(ne,Ee,Ue,Ye))((0,B.Xf)(he(ne,Ue))),z):("number"==typeof V&&(z=V),(0,R.e)((ne,Ue)=>function ve(he,V,z,ne,Ue,Ee,Ye,ke){const We=[];let Se=0,ht=0,ft=!1;const ee=()=>{ft&&!We.length&&!Se&&V.complete()},De=Me=>Se<ne?ue(Me):We.push(Me),ue=Me=>{Ee&&V.next(Me),Se++;let Be=!1;(0,B.Xf)(z(Me,ht++)).subscribe((0,se.x)(V,k=>{Ue?.(k),Ee?De(k):V.next(k)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Se--;We.length&&Se<ne;){const k=We.shift();Ye?(0,Y.f)(V,Ye,()=>ue(k)):ue(k)}ee()}catch(k){V.error(k)}}))};return he.subscribe((0,se.x)(V,De,()=>{ft=!0,ee()})),()=>{ke?.()}}(ne,Ue,he,z)))}},3093:(yt,Ae,M)=>{M.d(Ae,{Q:()=>Y});var h=M(7103),B=M(9360),R=M(8251);function Y(se,ve=0){return(0,B.e)((_e,Oe)=>{_e.subscribe((0,R.x)(Oe,he=>(0,h.f)(Oe,se,()=>Oe.next(he),ve),()=>(0,h.f)(Oe,se,()=>Oe.complete(),ve),he=>(0,h.f)(Oe,se,()=>Oe.error(he),ve)))})}},3020:(yt,Ae,M)=>{M.d(Ae,{B:()=>se});var h=M(4829),B=M(8645),R=M(305),Y=M(9360);function se(_e={}){const{connector:Oe=(()=>new B.x),resetOnError:he=!0,resetOnComplete:V=!0,resetOnRefCountZero:z=!0}=_e;return ne=>{let Ue,Ee,Ye,ke=0,We=!1,Se=!1;const ht=()=>{Ee?.unsubscribe(),Ee=void 0},ft=()=>{ht(),Ue=Ye=void 0,We=Se=!1},ee=()=>{const De=Ue;ft(),De?.unsubscribe()};return(0,Y.e)((De,ue)=>{ke++,!Se&&!We&&ht();const Me=Ye=Ye??Oe();ue.add(()=>{ke--,0===ke&&!Se&&!We&&(Ee=ve(ee,z))}),Me.subscribe(ue),!Ue&&ke>0&&(Ue=new R.Hp({next:Be=>Me.next(Be),error:Be=>{Se=!0,ht(),Ee=ve(ft,he,Be),Me.error(Be)},complete:()=>{We=!0,ht(),Ee=ve(ft,V),Me.complete()}}),(0,h.Xf)(De).subscribe(Ue))})(ne)}}function ve(_e,Oe,...he){if(!0===Oe)return void _e();if(!1===Oe)return;const V=new R.Hp({next:()=>{V.unsubscribe(),_e()}});return(0,h.Xf)(Oe(...he)).subscribe(V)}},5137:(yt,Ae,M)=>{M.d(Ae,{R:()=>B});var h=M(9360);function B(R,Y=0){return(0,h.e)((se,ve)=>{ve.add(R.schedule(()=>se.subscribe(ve),Y))})}},4664:(yt,Ae,M)=>{M.d(Ae,{w:()=>Y});var h=M(4829),B=M(9360),R=M(8251);function Y(se,ve){return(0,B.e)((_e,Oe)=>{let he=null,V=0,z=!1;const ne=()=>z&&!he&&Oe.complete();_e.subscribe((0,R.x)(Oe,Ue=>{he?.unsubscribe();let Ee=0;const Ye=V++;(0,h.Xf)(se(Ue,Ye)).subscribe(he=(0,R.x)(Oe,ke=>Oe.next(ve?ve(Ue,ke,Ye,Ee++):ke),()=>{he=null,ne()}))},()=>{z=!0,ne()}))})}},9397:(yt,Ae,M)=>{M.d(Ae,{b:()=>se});var h=M(4674),B=M(9360),R=M(8251),Y=M(2737);function se(ve,_e,Oe){const he=(0,h.m)(ve)||_e||Oe?{next:ve,error:_e,complete:Oe}:ve;return he?(0,B.e)((V,z)=>{var ne;null===(ne=he.subscribe)||void 0===ne||ne.call(he);let Ue=!0;V.subscribe((0,R.x)(z,Ee=>{var Ye;null===(Ye=he.next)||void 0===Ye||Ye.call(he,Ee),z.next(Ee)},()=>{var Ee;Ue=!1,null===(Ee=he.complete)||void 0===Ee||Ee.call(he),z.complete()},Ee=>{var Ye;Ue=!1,null===(Ye=he.error)||void 0===Ye||Ye.call(he,Ee),z.error(Ee)},()=>{var Ee,Ye;Ue&&(null===(Ee=he.unsubscribe)||void 0===Ee||Ee.call(he)),null===(Ye=he.finalize)||void 0===Ye||Ye.call(he)}))}):Y.y}},1954:(yt,Ae,M)=>{M.d(Ae,{o:()=>se});var h=M(7394);class B extends h.w0{constructor(_e,Oe){super()}schedule(_e,Oe=0){return this}}const R={setInterval(ve,_e,...Oe){const{delegate:he}=R;return he?.setInterval?he.setInterval(ve,_e,...Oe):setInterval(ve,_e,...Oe)},clearInterval(ve){const{delegate:_e}=R;return(_e?.clearInterval||clearInterval)(ve)},delegate:void 0};var Y=M(9039);class se extends B{constructor(_e,Oe){super(_e,Oe),this.scheduler=_e,this.work=Oe,this.pending=!1}schedule(_e,Oe=0){var he;if(this.closed)return this;this.state=_e;const V=this.id,z=this.scheduler;return null!=V&&(this.id=this.recycleAsyncId(z,V,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(z,this.id,Oe),this}requestAsyncId(_e,Oe,he=0){return R.setInterval(_e.flush.bind(_e,this),he)}recycleAsyncId(_e,Oe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return Oe;null!=Oe&&R.clearInterval(Oe)}execute(_e,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(_e,Oe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,Oe){let V,he=!1;try{this.work(_e)}catch(z){he=!0,V=z||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:_e,scheduler:Oe}=this,{actions:he}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Y.P)(he,this),null!=_e&&(this.id=this.recycleAsyncId(Oe,_e,null)),this.delay=null,super.unsubscribe()}}}},2631:(yt,Ae,M)=>{M.d(Ae,{v:()=>R});var h=M(4552);class B{constructor(se,ve=B.now){this.schedulerActionCtor=se,this.now=ve}schedule(se,ve=0,_e){return new this.schedulerActionCtor(this,se).schedule(_e,ve)}}B.now=h.l.now;class R extends B{constructor(se,ve=B.now){super(se,ve),this.actions=[],this._active=!1}flush(se){const{actions:ve}=this;if(this._active)return void ve.push(se);let _e;this._active=!0;do{if(_e=se.execute(se.state,se.delay))break}while(se=ve.shift());if(this._active=!1,_e){for(;se=ve.shift();)se.unsubscribe();throw _e}}}},6321:(yt,Ae,M)=>{M.d(Ae,{z:()=>R});var h=M(1954);const R=new(M(2631).v)(h.o)},4552:(yt,Ae,M)=>{M.d(Ae,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},7599:(yt,Ae,M)=>{M.d(Ae,{z:()=>h});const h={setTimeout(B,R,...Y){const{delegate:se}=h;return se?.setTimeout?se.setTimeout(B,R,...Y):setTimeout(B,R,...Y)},clearTimeout(B){const{delegate:R}=h;return(R?.clearTimeout||clearTimeout)(B)},delegate:void 0}},4971:(yt,Ae,M)=>{M.d(Ae,{h:()=>B});const B=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(yt,Ae,M)=>{M.d(Ae,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(yt,Ae,M)=>{M.d(Ae,{_6:()=>ve,jO:()=>Y,yG:()=>se});var h=M(4674);function R(_e){return _e[_e.length-1]}function Y(_e){return(0,h.m)(R(_e))?_e.pop():void 0}function se(_e){return function B(_e){return _e&&(0,h.m)(_e.schedule)}(R(_e))?_e.pop():void 0}function ve(_e,Oe){return"number"==typeof R(_e)?_e.pop():Oe}},9039:(yt,Ae,M)=>{function h(B,R){if(B){const Y=B.indexOf(R);0<=Y&&B.splice(Y,1)}}M.d(Ae,{P:()=>h})},2306:(yt,Ae,M)=>{function h(B){const Y=B(se=>{Error.call(se),se.stack=(new Error).stack});return Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y}M.d(Ae,{d:()=>h})},1441:(yt,Ae,M)=>{M.d(Ae,{O:()=>Y,x:()=>R});var h=M(2653);let B=null;function R(se){if(h.config.useDeprecatedSynchronousErrorHandling){const ve=!B;if(ve&&(B={errorThrown:!1,error:null}),se(),ve){const{errorThrown:_e,error:Oe}=B;if(B=null,_e)throw Oe}}else se()}function Y(se){h.config.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=se)}},7103:(yt,Ae,M)=>{function h(B,R,Y,se=0,ve=!1){const _e=R.schedule(function(){Y(),ve?B.add(this.schedule(null,se)):this.unsubscribe()},se);if(B.add(_e),!ve)return _e}M.d(Ae,{f:()=>h})},2737:(yt,Ae,M)=>{function h(B){return B}M.d(Ae,{y:()=>h})},4266:(yt,Ae,M)=>{M.d(Ae,{z:()=>h});const h=B=>B&&"number"==typeof B.length&&"function"!=typeof B},5726:(yt,Ae,M)=>{M.d(Ae,{D:()=>B});var h=M(4674);function B(R){return Symbol.asyncIterator&&(0,h.m)(R?.[Symbol.asyncIterator])}},4674:(yt,Ae,M)=>{function h(B){return"function"==typeof B}M.d(Ae,{m:()=>h})},8382:(yt,Ae,M)=>{M.d(Ae,{c:()=>R});var h=M(4850),B=M(4674);function R(Y){return(0,B.m)(Y[h.L])}},3664:(yt,Ae,M)=>{M.d(Ae,{T:()=>R});var h=M(4971),B=M(4674);function R(Y){return(0,B.m)(Y?.[h.h])}},4026:(yt,Ae,M)=>{M.d(Ae,{t:()=>B});var h=M(4674);function B(R){return(0,h.m)(R?.then)}},541:(yt,Ae,M)=>{M.d(Ae,{L:()=>Y,Q:()=>R});var h=M(7582),B=M(4674);function R(se){return(0,h.FC)(this,arguments,function*(){const _e=se.getReader();try{for(;;){const{value:Oe,done:he}=yield(0,h.qq)(_e.read());if(he)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Oe)}}finally{_e.releaseLock()}})}function Y(se){return(0,B.m)(se?.getReader)}},9360:(yt,Ae,M)=>{M.d(Ae,{A:()=>B,e:()=>R});var h=M(4674);function B(Y){return(0,h.m)(Y?.lift)}function R(Y){return se=>{if(B(se))return se.lift(function(ve){try{return Y(ve,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(yt,Ae,M)=>{function h(){}M.d(Ae,{Z:()=>h})},8407:(yt,Ae,M)=>{M.d(Ae,{U:()=>R,z:()=>B});var h=M(2737);function B(...Y){return R(Y)}function R(Y){return 0===Y.length?h.y:1===Y.length?Y[0]:function(ve){return Y.reduce((_e,Oe)=>Oe(_e),ve)}}},3894:(yt,Ae,M)=>{M.d(Ae,{h:()=>R});var h=M(2653),B=M(7599);function R(Y){B.z.setTimeout(()=>{const{onUnhandledError:se}=h.config;if(!se)throw Y;se(Y)})}},9853:(yt,Ae,M)=>{function h(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(Ae,{z:()=>h})},5879:(yt,Ae,M)=>{M.d(Ae,{$8M:()=>bl,$WT:()=>To,$Z:()=>T_,AFp:()=>_i,AaK:()=>ne,CHM:()=>Cs,CRH:()=>rw,DdM:()=>gD,EJc:()=>fy,EpF:()=>o0,F4k:()=>a0,FYo:()=>EI,FiY:()=>ge,GfV:()=>l_,Gpc:()=>Ye,HDt:()=>qD,JOm:()=>Mh,KtG:()=>mh,LFG:()=>Qe,LSH:()=>zh,Lbi:()=>r_,Lck:()=>AS,MAs:()=>pC,MMx:()=>Vf,MR2:()=>Jv,NdJ:()=>cd,O4$:()=>ko,Ojb:()=>i_,OlP:()=>qn,P3R:()=>XT,PXZ:()=>mw,Q6J:()=>t0,QGY:()=>pm,Qsj:()=>hA,R0b:()=>wi,RDi:()=>GE,Rgc:()=>Hf,SBq:()=>ef,Sil:()=>np,Suo:()=>nw,TTD:()=>uh,TgZ:()=>Sc,Tol:()=>Oc,VuI:()=>Bw,W1O:()=>Bc,X6Q:()=>Ew,XFs:()=>wt,Xpm:()=>rr,Xq5:()=>Ec,Xts:()=>$l,Y36:()=>mc,YKP:()=>lD,YNc:()=>J_,Yjl:()=>Ra,Yz7:()=>mt,Z0I:()=>vn,ZZ4:()=>op,_Bn:()=>cD,_UZ:()=>ud,_c5:()=>Pw,_uU:()=>Tm,aQg:()=>Ud,c2e:()=>hy,cJS:()=>jn,cg1:()=>Rc,dDg:()=>nb,dqk:()=>Kt,eFA:()=>yw,eJc:()=>Qf,ekj:()=>xc,eoX:()=>gw,f3M:()=>st,g9A:()=>Zh,h0i:()=>bu,hGG:()=>ku,iGM:()=>tw,ifc:()=>ot,ip1:()=>ly,jDz:()=>L0,kL8:()=>$C,kcU:()=>Qt,lG2:()=>Na,lqb:()=>Oi,lri:()=>Nu,n5z:()=>Xp,oAB:()=>xa,oxw:()=>gm,q4F:()=>Og,qFp:()=>jw,qLn:()=>zo,qOj:()=>hf,qZA:()=>mu,rWj:()=>Nd,rg0:()=>ah,sBO:()=>rM,s_b:()=>Id,soG:()=>tp,tb:()=>Kr,tp0:()=>rt,uIk:()=>um,vHH:()=>ee,vpe:()=>qo,wAp:()=>wu,xp6:()=>D_,z2F:()=>Zc,zSh:()=>e_,zs3:()=>Ts});var h=M(8645),B=M(7394),R=M(5592),Y=M(3019),se=M(5619),ve=M(2096),_e=M(3020),Oe=M(4664),he=M(3997);function V(i){for(let s in i)if(i[s]===V)return s;throw Error("Could not find renamed property on target object.")}function z(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ne(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ne).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Ee=V({__forward_ref__:V});function Ye(i){return i.__forward_ref__=Ye,i.toString=function(){return ne(this())},i}function ke(i){return We(i)?i():i}function We(i){return"function"==typeof i&&i.hasOwnProperty(Ee)&&i.__forward_ref__===Ye}function Se(i){return i&&!!i.\u0275providers}const ft="https://g.co/ng/security#xss";class ee extends Error{constructor(s,a){super(function De(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function ue(i){return"string"==typeof i?i:null==i?"":String(i)}function Ce(i,s){throw new ee(-201,!1)}function tt(i,s){null==i&&function qe(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function mt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function jn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ln(i){return Nn(i,Vn)||Nn(i,nr)}function vn(i){return null!==Ln(i)}function Nn(i,s){return i.hasOwnProperty(s)?i[s]:null}function Kn(i){return i&&(i.hasOwnProperty(bn)||i.hasOwnProperty(Hr))?i[bn]:null}const Vn=V({\u0275prov:V}),bn=V({\u0275inj:V}),nr=V({ngInjectableDef:V}),Hr=V({ngInjectorDef:V});var wt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(wt||{});let Ct;function Pt(i){const s=Ct;return Ct=i,s}function pr(i,s,a){const c=Ln(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&wt.Optional?null:void 0!==s?s:void Ce(ne(i))}const Kt=globalThis,He={},ut="__NG_DI_FLAG__",Et="ngTempTokenPath",G=/\n/gm,N="__source";let P;function J(i){const s=P;return P=i,s}function Re(i,s=wt.Default){if(void 0===P)throw new ee(-203,!1);return null===P?pr(i,void 0,s):P.get(i,s&wt.Optional?null:void 0,s)}function Qe(i,s=wt.Default){return(function Rt(){return Ct}()||Re)(ke(i),s)}function st(i,s=wt.Default){return Qe(i,yn(s))}function yn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Vt(i){const s=[];for(let a=0;a<i.length;a++){const c=ke(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ee(900,!1);let d,f=wt.Default;for(let y=0;y<c.length;y++){const _=c[y],I=Yt(_);"number"==typeof I?-1===I?d=_.token:f|=I:d=_}s.push(Qe(d,f))}else s.push(Qe(c))}return s}function _n(i,s){return i[ut]=s,i.prototype[ut]=s,i}function Yt(i){return i[ut]}function de(i){return{toString:i}.toString()}var nt=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(nt||{}),ot=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(ot||{});const Ot={},ct=[],Tn=V({\u0275cmp:V}),Yr=V({\u0275dir:V}),Qr=V({\u0275pipe:V}),qi=V({\u0275mod:V}),Mr=V({\u0275fac:V}),ln=V({__NG_ELEMENT_ID__:V}),Ps=V({__NG_ENV_ID__:V});function Ys(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}function Jr(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],y=a[c++],_=a[c++];i.setAttribute(s,y,_,f)}else{const f=d,y=a[++c];ks(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),c++}}return c}function fi(i){return 3===i||4===i||6===i}function ks(i){return 64===i.charCodeAt(0)}function vs(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||Qs(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function Qs(i,s,a,c,d){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const _=i[f++];if("number"==typeof _){if(_===s){y=-1;break}if(_>s){y=f-1;break}}}for(;f<i.length;){const _=i[f];if("number"==typeof _)break;if(_===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}const er="ng-template";function Zi(i,s,a){let c=0,d=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&d){const y=i[c++];if(a&&"class"===f&&-1!==Ys(y.toLowerCase(),s,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===s)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function _s(i){return 4===i.type&&i.value!==er}function Sa(i,s,a){return s===(4!==i.type||a?i.value:er)}function bo(i,s,a){let c=4;const d=i.attrs||[],f=function $(i){for(let s=0;s<i.length;s++)if(fi(i[s]))return s;return i.length}(d);let y=!1;for(let _=0;_<s.length;_++){const I=s[_];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!Sa(i,I,a)||""===I&&1===s.length){if(Gr(c))return!1;y=!0}}else{const D=8&c?I:s[++_];if(8&c&&null!==i.attrs){if(!Zi(i.attrs,D,a)){if(Gr(c))return!1;y=!0}continue}const L=Ma(8&c?"class":I,d,_s(i),a);if(-1===L){if(Gr(c))return!1;y=!0;continue}if(""!==D){let W;W=L>f?"":d[L+1].toLowerCase();const ie=8&c?W:null;if(ie&&-1!==Ys(ie,D,0)||2&c&&D!==W){if(Gr(c))return!1;y=!0}}}}else{if(!y&&!Gr(c)&&!Gr(I))return!1;if(y&&Gr(I))continue;y=!1,c=I|1&c}}return Gr(c)||y}function Gr(i){return 0==(1&i)}function Ma(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let _=s[++d];for(;"string"==typeof _;)_=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function re(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function oa(i,s,a=!1){for(let c=0;c<s.length;c++)if(bo(i,s[c],a))return!0;return!1}function pt(i,s){return i?":not("+s.trim()+")":s}function wn(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const _=i[++a];d+="["+y+(_.length>0?'="'+_+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Gr(y)&&(s+=pt(f,d),d=""),c=y,f=f||!Gr(c);a++}return""!==d&&(s+=pt(f,d)),s}function rr(i){return de(()=>{const s=nl(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===nt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||ot.Emulated,styles:i.styles||ct,_:null,schemas:i.schemas||null,tView:null,id:""};Pa(a);const c=i.dependencies;return a.directiveDefs=Fs(c,!1),a.pipeDefs=Fs(c,!0),a.id=function aa(i){let s=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)s=Math.imul(31,s)+d.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(a),a})}function xr(i){return In(i)||kr(i)}function os(i){return null!==i}function xa(i){return de(()=>({type:i.type,bootstrap:i.bootstrap||ct,declarations:i.declarations||ct,imports:i.imports||ct,exports:i.exports||ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Oa(i,s){if(null==i)return Ot;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}function Na(i){return de(()=>{const s=nl(i);return Pa(s),s})}function Ra(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function In(i){return i[Tn]||null}function kr(i){return i[Yr]||null}function zr(i){return i[Qr]||null}function To(i){const s=In(i)||kr(i)||zr(i);return null!==s&&s.standalone}function Xr(i,s){const a=i[qi]||null;if(!a&&!0===s)throw new Error(`Type ${ne(i)} does not have '\u0275mod' property.`);return a}function nl(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:i.inputs||Ot,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||ct,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Oa(i.inputs,s),outputs:Oa(i.outputs)}}function Pa(i){i.features?.forEach(s=>s(i))}function Fs(i,s){if(!i)return null;const a=s?zr:xr;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(os)}const Yn=0,Xe=1,zt=2,Bn=3,ei=4,Ls=5,pi=6,Ao=7,hr=8,ws=9,Ci=10,kt=11,ua=12,Qd=13,Ir=14,Cr=15,ki=16,Fi=17,gi=18,as=19,rl=20,Js=21,Es=22,U=23,F=24,j=25,Ne=1,Ze=2,et=7,Ft=9,Bt=11;function Qn(i){return Array.isArray(i)&&"object"==typeof i[Ne]}function Mn(i){return Array.isArray(i)&&!0===i[Ne]}function So(i){return 0!=(4&i.flags)}function Ki(i){return i.componentOffset>-1}function Is(i){return 1==(1&i.flags)}function or(i){return!!i.template}function Di(i){return 0!=(512&i[zt])}function Xs(i,s){return i.hasOwnProperty(Mr)?i[Mr]:null}let qr=null,th=!1;function bi(i){const s=qr;return qr=i,s}const nh={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function tv(i){if(!al(i)||i.dirty){if(!i.producerMustRecompute(i)&&!rv(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function nv(i){i.dirty=!0,function Tp(i){if(void 0===i.liveConsumerNode)return;const s=th;th=!0;try{for(const a of i.liveConsumerNode)a.dirty||nv(a)}finally{th=s}}(i),i.consumerMarkedDirty?.(i)}function Ap(i){return i&&(i.nextProducerIndex=0),bi(i)}function ol(i,s){if(bi(s),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(al(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)Hu(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function rv(i){xo(i);for(let s=0;s<i.producerNode.length;s++){const a=i.producerNode[s],c=i.producerLastReadVersion[s];if(c!==a.version||(tv(a),c!==a.version))return!0}return!1}function ih(i){if(xo(i),al(i))for(let s=0;s<i.producerNode.length;s++)Hu(i.producerNode[s],i.producerIndexOfThis[s]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function Hu(i,s){if(function sv(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),xo(i),1===i.liveConsumerNode.length)for(let c=0;c<i.producerNode.length;c++)Hu(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[s]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[s]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,s<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[s],d=i.liveConsumerNode[s];xo(d),d.producerIndexOfThis[c]=s}}function al(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function xo(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let av=null;function ah(i){const s=bi(null);try{return i()}finally{bi(s)}}const Rp=()=>{},fE=(()=>({...nh,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:Rp}))();class dv{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function uh(){return ch}function ch(i){return i.type.prototype.ngOnChanges&&(i.setInput=eo),ll}function ll(){const i=lh(this),s=i?.current;if(s){const a=i.previous;if(a===Ot)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function eo(i,s,a,c){const d=this.declaredInputs[a],f=lh(i)||function hv(i,s){return i[Va]=s}(i,{previous:Ot,current:null}),y=f.current||(f.current={}),_=f.previous,I=_[d];y[d]=new dv(I&&I.currentValue,s,_===Ot),i[c]=s}uh.ngInherit=!0;const Va="__ngSimpleChanges__";function lh(i){return i[Va]||null}const Vs=function(i,s,a){},Pp="svg";function $n(i){for(;Array.isArray(i);)i=i[Yn];return i}function Ti(i,s){return $n(s[i.index])}function hh(i,s){return i.data[s]}function Li(i,s){const a=s[i];return Qn(a)?a:a[Yn]}function Oo(i,s){return null==s?null:i[s]}function kp(i){i[Fi]=0}function zu(i){1024&i[zt]||(i[zt]|=1024,Or(i,1))}function fv(i){1024&i[zt]&&(i[zt]&=-1025,Or(i,-1))}function Or(i,s){let a=i[Bn];if(null===a)return;a[Ls]+=s;let c=a;for(a=a[Bn];null!==a&&(1===s&&1===c[Ls]||-1===s&&0===c[Ls]);)a[Ls]+=s,c=a,a=a[Bn]}const Gt={lFrame:Zp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ba(){return Gt.bindingsEnabled}function Le(){return Gt.lFrame.lView}function An(){return Gt.lFrame.tView}function Cs(i){return Gt.lFrame.contextLView=i,i[hr]}function mh(i){return Gt.lFrame.contextLView=null,i}function ti(){let i=gl();for(;null!==i&&64===i.type;)i=i.parent;return i}function gl(){return Gt.lFrame.currentTNode}function Us(i,s){const a=Gt.lFrame;a.currentTNode=i,a.isParent=s}function jp(){return Gt.lFrame.isParent}function Wu(){return Gt.lFrame.bindingIndex++}function Bs(i){const s=Gt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function Gp(i,s){const a=Gt.lFrame;a.bindingIndex=a.bindingRootIndex=i,zp(s)}function zp(i){Gt.lFrame.currentDirectiveIndex=i}function _v(){return Gt.lFrame.currentQueryIndex}function qp(i){Gt.lFrame.currentQueryIndex=i}function wE(i){const s=i[Xe];return 2===s.type?s.declTNode:1===s.type?i[pi]:null}function vh(i,s,a){if(a&wt.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&wt.Host||(d=wE(f),null===d||(f=f[Ir],10&d.type))););if(null===d)return!1;s=d,i=f}const c=Gt.lFrame=Po();return c.currentTNode=s,c.lView=i,!0}function Vi(i){const s=Po(),a=i[Xe];Gt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Po(){const i=Gt.lFrame,s=null===i?null:i.child;return null===s?Zp(i):s}function Zp(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function tr(){const i=Gt.lFrame;return Gt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Nt=tr;function mi(){const i=tr();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ai(){return Gt.lFrame.selectedIndex}function no(i){Gt.lFrame.selectedIndex=i}function ar(){const i=Gt.lFrame;return hh(i.tView,i.selectedIndex)}function ko(){Gt.lFrame.currentNamespace=Pp}function Qt(){!function wv(){Gt.lFrame.currentNamespace=null}()}let Ku=!0;function ro(){return Ku}function io(i){Ku=i}function $a(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:_,ngAfterViewInit:I,ngAfterViewChecked:D,ngOnDestroy:A}=f;y&&(i.contentHooks??=[]).push(-a,y),_&&((i.contentHooks??=[]).push(a,_),(i.contentCheckHooks??=[]).push(a,_)),I&&(i.viewHooks??=[]).push(-a,I),D&&((i.viewHooks??=[]).push(a,D),(i.viewCheckHooks??=[]).push(a,D)),null!=A&&(i.destroyHooks??=[]).push(a,A)}}function Ha(i,s,a){vl(i,s,3,a)}function Ga(i,s,a,c){(3&i[zt])===a&&vl(i,s,a,c)}function yl(i,s){let a=i[zt];(3&a)===s&&(a&=8191,a+=1,i[zt]=a)}function vl(i,s,a,c){const f=c??-1,y=s.length-1;let _=0;for(let I=void 0!==c?65535&i[Fi]:0;I<y;I++)if("number"==typeof s[I+1]){if(_=s[I],null!=c&&_>=c)break}else s[I]<0&&(i[Fi]+=65536),(_<f||-1==f)&&(Yu(i,a,s,I),i[Fi]=(4294901760&i[Fi])+I+2),I++}function ca(i,s){Vs(4,i,s);const a=bi(null);try{s.call(i)}finally{bi(a),Vs(5,i,s)}}function Yu(i,s,a,c){const d=a[c]<0,f=a[c+1],_=i[d?-a[c]:a[c]];d?i[zt]>>13<i[Fi]>>16&&(3&i[zt])===s&&(i[zt]+=8192,ca(_,f)):ca(_,f)}const js=-1;class Fo{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function El(i){return i!==js}function Ji(i){return 32767&i}function Zr(i,s){let a=function Hn(i){return i>>16}(i),c=s;for(;a>0;)c=c[Ir],a--;return c}let qa=!0;function ri(i){const s=qa;return qa=i,s}const Za=255,Ju=5;let Ev=0;const Lr={};function Dr(i,s){const a=Il(i,s);if(-1!==a)return a;const c=s[Xe];c.firstCreatePass&&(i.injectorIndex=s.length,Ds(c.data,i),Ds(s,null),Ds(c.blueprint,null));const d=la(i,s),f=i.injectorIndex;if(El(d)){const y=Ji(d),_=Zr(d,s),I=_[Xe].data;for(let D=0;D<8;D++)s[f+D]=_[y+D]|I[y+D]}return s[f+8]=d,f}function Ds(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Il(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function la(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=tg(d),null===c)return js;if(a++,d=d[Ir],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return js}function Wa(i,s,a){!function Lo(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(ln)&&(c=a[ln]),null==c&&(c=a[ln]=Ev++);const d=c&Za;s.data[i+(d>>Ju)]|=1<<d}(i,s,a)}function Ih(i,s,a){if(a&wt.Optional||void 0!==i)return i;Ce()}function Ka(i,s,a,c){if(a&wt.Optional&&void 0===c&&(c=null),!(a&(wt.Self|wt.Host))){const d=i[ws],f=Pt(void 0);try{return d?d.get(s,c,a&wt.Optional):pr(s,c,a&wt.Optional)}finally{Pt(f)}}return Ih(c,0,a)}function Ch(i,s,a,c=wt.Default,d){if(null!==i){if(2048&s[zt]&&!(c&wt.Self)){const y=function eg(i,s,a,c,d){let f=i,y=s;for(;null!==f&&null!==y&&2048&y[zt]&&!(512&y[zt]);){const _=Cl(f,y,a,c|wt.Self,Lr);if(_!==Lr)return _;let I=f.parent;if(!I){const D=y[rl];if(D){const A=D.get(a,Lr,c);if(A!==Lr)return A}I=tg(y),y=y[Ir]}f=I}return d}(i,s,a,c,Lr);if(y!==Lr)return y}const f=Cl(i,s,a,c,Lr);if(f!==Lr)return f}return Ka(s,a,c,d)}function Cl(i,s,a,c,d){const f=function Uo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ln)?i[ln]:void 0;return"number"==typeof s?s>=0?s&Za:Bo:s}(a);if("function"==typeof f){if(!vh(s,i,c))return c&wt.Host?Ih(d,0,c):Ka(s,a,c,d);try{let y;if(y=f(c),null!=y||c&wt.Optional)return y;Ce()}finally{Nt()}}else if("number"==typeof f){let y=null,_=Il(i,s),I=js,D=c&wt.Host?s[Cr][pi]:null;for((-1===_||c&wt.SkipSelf)&&(I=-1===_?la(i,s):s[_+8],I!==js&&Qp(c,!1)?(y=s[Xe],_=Ji(I),s=Zr(I,s)):_=-1);-1!==_;){const A=s[Xe];if(Yp(f,_,A.data)){const L=on(_,s,a,y,c,D);if(L!==Lr)return L}I=s[_+8],I!==js&&Qp(c,s[Xe].data[_+8]===D)&&Yp(f,_,s)?(y=A,_=Ji(I),s=Zr(I,s)):_=-1}}return d}function on(i,s,a,c,d,f){const y=s[Xe],_=y.data[i+8],A=Vo(_,y,a,null==c?Ki(_)&&qa:c!=y&&0!=(3&_.type),d&wt.Host&&f===_);return null!==A?da(s,y,A,_):Lr}function Vo(i,s,a,c,d){const f=i.providerIndexes,y=s.data,_=1048575&f,I=i.directiveStart,A=f>>20,W=d?_+A:i.directiveEnd;for(let ie=c?_:_+A;ie<W;ie++){const Pe=y[ie];if(ie<I&&a===Pe||ie>=I&&Pe.type===a)return ie}if(d){const ie=y[I];if(ie&&or(ie)&&ie.type===a)return I}return null}function da(i,s,a,c){let d=i[a];const f=s.data;if(function _l(i){return i instanceof Fo}(d)){const y=d;y.resolving&&function Be(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new ee(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Me(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ue(i)}(f[a]));const _=ri(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?Pt(y.injectImpl):null;vh(i,c,wt.Default);try{d=i[a]=y.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Yi(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const y=ch(s);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],s)}finally{null!==D&&Pt(D),ri(_),y.resolving=!1,Nt()}}return d}function Yp(i,s,a){return!!(a[s+(i>>Ju)]&1<<i)}function Qp(i,s){return!(i&wt.Self||i&wt.Host&&s)}class Vr{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Ch(this._tNode,this._lView,s,yn(c),a)}}function Bo(){return new Vr(ti(),Le())}function Xp(i){return de(()=>{const s=i.prototype.constructor,a=s[Mr]||Dl(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[Mr]||Dl(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Dl(i){return We(i)?()=>{const s=Dl(ke(i));return s&&s()}:Xs(i)}function tg(i){const s=i[Xe],a=s.type;return 2===a?s.declTNode:1===a?i[pi]:null}function bl(i){return function Kp(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(fi(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(ti(),i)}const ha="__parameters__";function xn(i,s,a){return de(()=>{const c=function jo(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return _.annotation=y,_;function _(I,D,A){const L=I.hasOwnProperty(ha)?I[ha]:Object.defineProperty(I,ha,{value:[]})[ha];for(;L.length<=A;)L.push(null);return(L[A]=L[A]||[]).push(y),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function Qa(i,s){i.forEach(a=>Array.isArray(a)?Qa(a,s):s(a))}function Cv(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ja(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Xi(i,s,a){let c=Xa(i,s);return c>=0?i[1|c]=a:(c=~c,function ig(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Th(i,s){const a=Xa(i,s);if(a>=0)return i[1|a]}function Xa(i,s){return function Ol(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),y=i[f<<a];if(s===y)return f<<a;y>s?d=f:c=f+1}return~(d<<a)}(i,s,1)}const ge=_n(xn("Optional"),8),rt=_n(xn("SkipSelf"),4);function ag(i){return 128==(128&i.flags)}var Mh=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Mh||{});const xh=new Map;let _T=0;const lg="__ngContext__";function Ui(i,s){Qn(s)?(i[lg]=s[as],function ME(i){xh.set(i[as],i)}(s)):i[lg]=s}let Rh;function bs(i,s){return Rh(i,s)}function ma(i){const s=i[Bn];return Mn(s)?s[Bn]:s}function NE(i){return Ph(i[ua])}function Fv(i){return Ph(i[ei])}function Ph(i){for(;null!==i&&!Mn(i);)i=i[ei];return i}function Ll(i,s,a,c,d){if(null!=c){let f,y=!1;Mn(c)?f=c:Qn(c)&&(y=!0,c=c[Yn]);const _=$n(c);0===i&&null!==a?null==d?FE(s,a,_):cc(s,a,_,d||null,!0):1===i&&null!==a?cc(s,a,_,d||null,!0):2===i?function gg(i,s,a){const c=pg(i,s);c&&function PT(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,_,y):3===i&&s.destroyNode(_),null!=f&&function FT(i,s,a,c,d){const f=a[et];f!==$n(a)&&Ll(s,i,c,f,d);for(let _=Bt;_<a.length;_++){const I=a[_];Bh(I[Xe],I,i,s,c,f)}}(s,i,f,a,d)}}function hg(i,s,a){return i.createElement(s,a)}function RE(i,s){const a=i[Ft],c=a.indexOf(s);fv(s),a.splice(c,1)}function fg(i,s){if(i.length<=Bt)return;const a=Bt+s,c=i[a];if(c){const d=c[ki];null!==d&&d!==i&&RE(d,c),s>0&&(i[a-1][ei]=c[ei]);const f=Ja(i,Bt+s);!function MT(i,s){Bh(i,s,s[kt],2,null,null),s[Yn]=null,s[pi]=null}(c[Xe],c);const y=f[gi];null!==y&&y.detachView(f[Xe]),c[Bn]=null,c[ei]=null,c[zt]&=-129}return c}function Lv(i,s){if(!(256&s[zt])){const a=s[kt];s[U]&&ih(s[U]),s[F]&&ih(s[F]),a.destroyNode&&Bh(i,s,a,3,null,null),function xT(i){let s=i[ua];if(!s)return PE(i[Xe],i);for(;s;){let a=null;if(Qn(s))a=s[ua];else{const c=s[Bt];c&&(a=c)}if(!a){for(;s&&!s[ei]&&s!==i;)Qn(s)&&PE(s[Xe],s),s=s[Bn];null===s&&(s=i),Qn(s)&&PE(s[Xe],s),a=s&&s[ei]}s=a}}(s)}}function PE(i,s){if(!(256&s[zt])){s[zt]&=-129,s[zt]|=256,function kE(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof Fo)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const _=d[f[y]],I=f[y+1];Vs(4,_,I);try{I.call(_)}finally{Vs(5,_,I)}}else{Vs(4,d,f);try{f.call(d)}finally{Vs(5,d,f)}}}}}(i,s),function RT(i,s){const a=i.cleanup,c=s[Ao];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[y]():c[-y].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(s[Ao]=null);const d=s[Js];if(null!==d){s[Js]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,s),1===s[Xe].type&&s[kt].destroy();const a=s[ki];if(null!==a&&Mn(s[Bn])){a!==s[Bn]&&RE(a,s);const c=s[gi];null!==c&&c.detachView(i)}!function Oh(i){xh.delete(i[as])}(s)}}function Vl(i,s,a){return function uc(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[Yn];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===ot.None||f===ot.Emulated)return null}return Ti(c,a)}}(i,s.parent,a)}function cc(i,s,a,c,d){i.insertBefore(s,a,c,d)}function FE(i,s,a){i.appendChild(s,a)}function LE(i,s,a,c,d){null!==c?cc(i,s,a,c,d):FE(i,s,a)}function pg(i,s){return i.parentNode(s)}let Uv,HE,yg,Vv=function UE(i,s,a){return 40&i.type?Ti(i,a):null};function Vh(i,s,a,c){const d=Vl(i,c,s),f=s[kt],_=function VE(i,s,a){return Vv(i,s,a)}(c.parent||s[pi],c,s);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)LE(f,d,a[I],_,!1);else LE(f,d,a,_,!1);void 0!==Uv&&Uv(f,c,s,a,d)}function Go(i,s){if(null!==s){const a=s.type;if(3&a)return Ti(s,i);if(4&a)return jv(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Go(i,c);{const d=i[s.index];return Mn(d)?jv(-1,d):$n(d)}}if(32&a)return bs(s,i)()||$n(i[s.index]);{const c=Bv(i,s);return null!==c?Array.isArray(c)?c[0]:Go(ma(i[Cr]),c):Go(i,s.next)}}return null}function Bv(i,s){return null!==s?i[Cr][pi].projection[s.projection]:null}function jv(i,s){const a=Bt+i+1;if(a<s.length){const c=s[a],d=c[Xe].firstChild;if(null!==d)return Go(c,d)}return s[et]}function Uh(i,s,a,c,d,f,y){for(;null!=a;){const _=c[a.index],I=a.type;if(y&&0===s&&(_&&Ui($n(_),c),a.flags|=2),32!=(32&a.flags))if(8&I)Uh(i,s,a.child,c,d,f,!1),Ll(s,i,d,_,f);else if(32&I){const D=bs(a,c);let A;for(;A=D();)Ll(s,i,d,A,f);Ll(s,i,d,_,f)}else 16&I?Hv(i,s,c,a,d,f):Ll(s,i,d,_,f);a=y?a.projectionNext:a.next}}function Bh(i,s,a,c,d,f){Uh(a,c,i.firstChild,s,d,f,!1)}function Hv(i,s,a,c,d,f){const y=a[Cr],I=y[pi].projection[c.projection];if(Array.isArray(I))for(let D=0;D<I.length;D++)Ll(s,i,d,I[D],f);else{let D=I;const A=y[Bn];ag(c)&&(D.flags|=128),Uh(i,s,D,A,d,f,!0)}}function jE(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function jh(i,s,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&Jr(i,s,c),null!==d&&jE(i,s,d),null!==f&&function VT(i,s,a){i.setAttribute(s,"style",a)}(i,s,f)}function GE(i){HE=i}function ZE(i){return function zv(){if(void 0===yg&&(yg=null,Kt.trustedTypes))try{yg=Kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return yg}()?.createScriptURL(i)||i}class WE{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ft})`}}function nu(i){return i instanceof WE?i.changingThisBreaksApplicationSecurity:i}function jl(i,s){const a=function vg(i){return i instanceof WE&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${ft})`)}return a===s}const $h=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Gh=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Gh||{});function zh(i){const s=qh();return s?s.sanitize(Gh.URL,i)||"":jl(i,"URL")?nu(i):function wg(i){return(i=String(i)).match($h)?i:"unsafe:"+i}(ue(i))}function rI(i){const s=qh();if(s)return ZE(s.sanitize(Gh.RESOURCE_URL,i)||"");if(jl(i,"ResourceURL"))return ZE(nu(i));throw new ee(904,!1)}function XT(i,s,a){return function JT(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?rI:zh}(s,a)(i)}function qh(){const i=Le();return i&&i[Ci].sanitizer}class qn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=mt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const $l=new qn("ENVIRONMENT_INITIALIZER"),sI=new qn("INJECTOR",-1),oI=new qn("INJECTOR_DEF_TYPES");class Ig{get(s,a=He){if(a===He){const c=new Error(`NullInjectorError: No provider for ${ne(s)}!`);throw c.name="NullInjectorError",c}return a}}function Jv(i){return{\u0275providers:i}}function eA(...i){return{\u0275providers:aI(0,i),\u0275fromNgModule:!0}}function aI(i,...s){const a=[],c=new Set;let d;const f=y=>{a.push(y)};return Qa(s,y=>{const _=y;Cg(_,f,[],c)&&(d||=[],d.push(_))}),void 0!==d&&uI(d,f),a}function uI(i,s){for(let a=0;a<i.length;a++){const{ngModule:c,providers:d}=i[a];Xv(d,f=>{s(f,c)})}}function Cg(i,s,a,c){if(!(i=ke(i)))return!1;let d=null,f=Kn(i);const y=!f&&In(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const I=i.ngModule;if(f=Kn(I),!f)return!1;d=I}const _=c.has(d);if(y){if(_)return!1;if(c.add(d),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const D of I)Cg(D,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!_){let D;c.add(d);try{Qa(f.imports,A=>{Cg(A,s,a,c)&&(D||=[],D.push(A))})}finally{}void 0!==D&&uI(D,s)}if(!_){const D=Xs(d)||(()=>new d);s({provide:d,useFactory:D,deps:ct},d),s({provide:oI,useValue:d,multi:!0},d),s({provide:$l,useValue:()=>Qe(d),multi:!0},d)}const I=f.providers;if(null!=I&&!_){const D=i;Xv(I,A=>{s(A,D)})}}}return d!==i&&void 0!==i.providers}function Xv(i,s){for(let a of i)Se(a)&&(a=a.\u0275providers),Array.isArray(a)?Xv(a,s):s(a)}const Wx=V({provide:String,useValue:V});function cI(i){return null!==i&&"object"==typeof i&&Wx in i}function Hl(i){return"function"==typeof i}const e_=new qn("Set Injector scope."),Ie={},iA={};let Rn;function dc(){return void 0===Rn&&(Rn=new Ig),Rn}class Oi{}class hc extends Oi{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Nr(s,y=>this.processProvider(y)),this.records.set(sI,Gl(void 0,this)),d.has("environment")&&this.records.set(Oi,Gl(void 0,this));const f=this.records.get(e_);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(oI.multi,ct,wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const a=J(this),c=Pt(void 0);try{return s()}finally{J(a),Pt(c)}}get(s,a=He,c=wt.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(Ps))return s[Ps](this);c=yn(c);const f=J(this),y=Pt(void 0);try{if(!(c&wt.SkipSelf)){let I=this.records.get(s);if(void 0===I){const D=function lo(i){return"function"==typeof i||"object"==typeof i&&i instanceof qn}(s)&&Ln(s);I=D&&this.injectableDefInScope(D)?Gl(t_(s),Ie):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&wt.Self?dc():this.parent).get(s,a=c&wt.Optional&&a===He?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Et]=_[Et]||[]).unshift(ne(s)),f)throw _;return function gr(i,s,a,c){const d=i[Et];throw s[N]&&d.unshift(s[N]),i.message=function K(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=ne(s);if(Array.isArray(s))d=s.map(ne).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let _=s[y];f.push(y+":"+("string"==typeof _?JSON.stringify(_):ne(_)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(G,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Et]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Pt(y),J(f)}}resolveInjectorInitializers(){const s=J(this),a=Pt(void 0);try{const d=this.get($l.multi,ct,wt.Self);for(const f of d)f()}finally{J(s),Pt(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(ne(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(s){let a=Hl(s=ke(s))?s:ke(s&&s.provide);const c=function sA(i){return cI(i)?Gl(void 0,i.useValue):Gl(lI(i),Ie)}(s);if(Hl(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Gl(void 0,Ie,!0),d.factory=()=>Vt(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Ie&&(a.value=iA,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Dg(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ke(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(s){const a=this._onDestroyHooks.indexOf(s);-1!==a&&this._onDestroyHooks.splice(a,1)}}function t_(i){const s=Ln(i),a=null!==s?s.factory:Xs(i);if(null!==a)return a;if(i instanceof qn)throw new ee(204,!1);if(i instanceof Function)return function Gs(i){const s=i.length;if(s>0)throw function $o(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new ee(204,!1);const a=function ir(i){return i&&(i[Vn]||i[nr])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ee(204,!1)}function lI(i,s,a){let c;if(Hl(i)){const d=ke(i);return Xs(d)||t_(d)}if(cI(i))c=()=>ke(i.useValue);else if(function rA(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Vt(i.deps||[]));else if(function nA(i){return!(!i||!i.useExisting)}(i))c=()=>Qe(ke(i.useExisting));else{const d=ke(i&&(i.useClass||i.provide));if(!function n_(i){return!!i.deps}(i))return Xs(d)||t_(d);c=()=>new d(...Vt(i.deps))}return c}function Gl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Nr(i,s){for(const a of i)Array.isArray(a)?Nr(a,s):a&&Se(a)?Nr(a.\u0275providers,s):s(a)}const _i=new qn("AppId",{providedIn:"root",factory:()=>dI}),dI="ng",Zh=new qn("Platform Initializer"),r_=new qn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),i_=new qn("CSP nonce",{providedIn:"root",factory:()=>function lc(){if(void 0!==HE)return HE;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let mI=(i,s,a)=>null;function Mg(i,s,a=!1){return mI(i,s,a)}class lA{}class vI{}class Jh{resolveComponentFactory(s){throw function _I(i){const s=Error(`No component factory found for ${ne(i)}.`);return s.ngComponent=i,s}(s)}}let Xh=(()=>{class i{static#e=this.NULL=new Jh}return i})();function xg(){return pc(ti(),Le())}function pc(i,s){return new ef(Ti(i,s))}let ef=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=xg}return i})();function dA(i){return i instanceof ef?i.nativeElement:i}class EI{}let hA=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function II(){const i=Le(),a=Li(ti().index,i);return(Qn(a)?a:i)[kt]}()}return i})(),c_=(()=>{class i{static#e=this.\u0275prov=mt({token:i,providedIn:"root",factory:()=>null})}return i})();class l_{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Og=new l_("16.2.8"),Ng={};function CI(i,s=null,a=null,c){const d=tf(i,s,a,c);return d.resolveInjectorInitializers(),d}function tf(i,s=null,a=null,c,d=new Set){const f=[a||ct,eA(i)];return c=c||("object"==typeof i?void 0:ne(i)),new hc(f,s||dc(),c||null,d)}let Ts=(()=>{class i{static#e=this.THROW_IF_NOT_FOUND=He;static#t=this.NULL=new Ig;static create(a,c){if(Array.isArray(a))return CI({name:""},c,a,"");{const d=a.name??"";return CI({name:d},a.parent,a.providers,d)}}static#n=this.\u0275prov=mt({token:i,providedIn:"any",factory:()=>Qe(sI)});static#r=this.__NG_ELEMENT_ID__=-1}return i})();function nf(i){return i.ngOriginalError}class zo{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&nf(s);for(;a&&nf(a);)a=nf(a);return a||null}}function Vg(i){return s=>{setTimeout(i,void 0,s)}}const qo=class Zl extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),y=c;if(s&&"object"==typeof s){const I=s;d=I.next?.bind(I),f=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(f=Vg(f),d&&(d=Vg(d)),y&&(y=Vg(y)));const _=super.subscribe({next:d,error:f,complete:y});return s instanceof B.w0&&s.add(_),_}};function bI(...i){}class wi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qo(!1),this.onMicrotaskEmpty=new qo(!1),this.onStable=new qo(!1),this.onError=new qo(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function yA(){const i="function"==typeof Kt.requestAnimationFrame;let s=Kt[i?"requestAnimationFrame":"setTimeout"],a=Kt[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function wA(i){const s=()=>{!function _A(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Kt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Wl(i),i.isCheckStableRunning=!0,m_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Wl(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,y,_)=>{if(function EA(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(_))return a.invokeTask(d,f,y,_);try{return y_(i),a.invokeTask(d,f,y,_)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),v_(i)}},onInvoke:(a,c,d,f,y,_,I)=>{try{return y_(i),a.invoke(d,f,y,_,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),v_(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Wl(i),m_(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wi.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(wi.isInAngularZone())throw new ee(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,s,vA,bI,bI);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const vA={};function m_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Wl(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function y_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function v_(i){i._nesting--,m_(i)}class __{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qo,this.onMicrotaskEmpty=new qo,this.onStable=new qo,this.onError=new qo}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const TI=new qn("",{providedIn:"root",factory:AI});function AI(){const i=st(wi);let s=!0;const a=new R.y(d=>{s=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(s),d.complete()})}),c=new R.y(d=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{wi.assertNotInAngularZone(),queueMicrotask(()=>{!s&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(s=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{wi.assertInAngularZone(),s&&(s=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,Y.T)(a,c.pipe((0,_e.B)()))}function Zo(i){return i instanceof Function?i():i}let xI=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=mt({token:i,providedIn:"root",factory:()=>new i})}return i})();function Bg(i){for(;i;){i[zt]|=64;const s=ma(i);if(Di(i)&&!s)return i;i=s}return null}const OI=new qn("",{providedIn:"root",factory:()=>!1});let Hg=null;function TA(i,s){return i[s]??Gg()}function AA(i,s){const a=Gg();a.producerNode?.length&&(i[s]=Hg,a.lView=i,Hg=SA())}const aO={...nh,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{Bg(i.lView)},lView:null};function SA(){return Object.create(aO)}function Gg(){return Hg??=SA(),Hg}const an={};function D_(i){b_(An(),Le(),Ai()+i,!1)}function b_(i,s,a,c){if(!c)if(3==(3&s[zt])){const f=i.preOrderCheckHooks;null!==f&&Ha(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Ga(s,f,0,a)}no(a)}function mc(i,s=wt.Default){const a=Le();return null===a?Qe(i,s):Ch(ti(),a,ke(i),s)}function T_(){throw new Error("invalid")}function sf(i,s,a,c,d,f,y,_,I,D,A){const L=s.blueprint.slice();return L[Yn]=d,L[zt]=140|c,(null!==D||i&&2048&i[zt])&&(L[zt]|=2048),kp(L),L[Bn]=L[Ir]=i,L[hr]=a,L[Ci]=y||i&&i[Ci],L[kt]=_||i&&i[kt],L[ws]=I||i&&i[ws]||null,L[pi]=f,L[as]=function cg(){return _T++}(),L[Es]=A,L[rl]=D,L[Cr]=2==s.type?i[Cr]:L,L}function yc(i,s,a,c,d){let f=i.data[s];if(null===f)f=function Kl(i,s,a,c,d){const f=gl(),y=jp(),I=i.data[s]=function x_(i,s,a,c,d,f){let y=s?s.injectorIndex:-1,_=0;return function No(){return null!==Gt.skipHydrationRootTNode}()&&(_|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:_,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I,I.prev=f)),I}(i,s,a,c,d),function vE(){return Gt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const y=function Zu(){const i=Gt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Us(f,!0),f}function af(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function kI(i,s,a,c,d){const f=TA(s,U),y=Ai(),_=2&c;try{no(-1),_&&s.length>j&&b_(i,s,j,!1),Vs(_?2:0,d);const D=_?f:null,A=Ap(D);try{null!==D&&(D.dirty=!1),a(c,d)}finally{ol(D,A)}}finally{_&&null===s[U]&&AA(s,U),no(y),Vs(_?3:1,d)}}function uf(i,s,a){if(So(s)){const c=bi(null);try{const f=s.directiveEnd;for(let y=s.directiveStart;y<f;y++){const _=i.data[y];_.contentQueries&&_.contentQueries(1,a[y],y)}}finally{bi(c)}}}function A_(i,s,a){Ba()&&(function OA(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;Ki(a)&&function O_(i,s,a){const c=Ti(s,i),d=LI(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const _=Jl(i,sf(i,d,null,y,c,s,null,i[Ci].rendererFactory.createRenderer(c,a),null,null,null));i[s.index]=_}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||Dr(a,s),Ui(c,s);const y=a.initialInputs;for(let _=d;_<f;_++){const I=i.data[_],D=da(s,i,_,a);Ui(D,s),null!==y&&$I(0,_-d,D,I,0,y),or(I)&&(Li(a.index,s)[hr]=da(s,i,_,a))}}(i,s,a,Ti(a,s)),64==(64&a.flags)&&Yl(i,s,a))}function FI(i,s,a=Ti){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],_=-1===y?a(s,i):i[y];i[d++]=_}}}function LI(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=S_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):s}function S_(i,s,a,c,d,f,y,_,I,D,A){const L=j+c,W=L+d,ie=function ho(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:an);return a}(L,W),Pe="function"==typeof D?D():D;return ie[Xe]={type:i,blueprint:ie,template:a,queries:null,viewQuery:_,declTNode:s,data:ie.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Pe,incompleteFirstPass:!1,ssrId:A}}let tn=i=>null;function VI(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?UI(a,s,d,f):c.hasOwnProperty(d)&&UI(a,s,c[d],f)}return a}function UI(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function qg(i,s,a,c){if(Ba()){const d=null===c?null:{"":-1},f=function Wo(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(oa(s,y.selectors,!1))if(c||(c=[]),or(y))if(null!==y.findHostDirectiveDefs){const _=[];d=d||new Map,y.findHostDirectiveDefs(y,_,d),c.unshift(..._,y),lf(i,s,_.length)}else c.unshift(y),lf(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,_;null===f?y=_=null:[y,_]=f,null!==y&&Zg(i,s,a,y,d,_),d&&function NA(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new ee(-301,!1);c.push(s[d],f)}}}(a,c,d)}a.mergedAttrs=vs(a.mergedAttrs,a.attrs)}function Zg(i,s,a,c,d,f){for(let D=0;D<c.length;D++)Wa(Dr(a,s),i,c[D].type);!function Ql(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let D=0;D<c.length;D++){const A=c[D];A.providersResolver&&A.providersResolver(A)}let y=!1,_=!1,I=af(i,s,c.length,null);for(let D=0;D<c.length;D++){const A=c[D];a.mergedAttrs=vs(a.mergedAttrs,A.hostAttrs),jI(i,a,s,I,A),RA(I,A,d),null!==A.contentQueries&&(a.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(a.flags|=64);const L=A.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!_&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),_=!0),I++}!function xA(i,s,a){const d=s.directiveEnd,f=i.data,y=s.attrs,_=[];let I=null,D=null;for(let A=s.directiveStart;A<d;A++){const L=f[A],W=a?a.get(L):null,Pe=W?W.outputs:null;I=VI(L.inputs,A,I,W?W.inputs:null),D=VI(L.outputs,A,D,Pe);const Ke=null===I||null===y||_s(s)?null:R_(I,A,y);_.push(Ke)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=8),I.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=_,s.inputs=I,s.outputs=D}(i,a,f)}function Yl(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,y=function _E(){return Gt.lFrame.currentDirectiveIndex}();try{no(f);for(let _=c;_<d;_++){const I=i.data[_],D=s[_];zp(_),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Wg(I,D)}}finally{no(-1),zp(y)}}function Wg(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function lf(i,s,a){s.componentOffset=a,(i.components??=[]).push(s.index)}function RA(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;or(s)&&(a[""]=i)}}function jI(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=Xs(d.type)),y=new Fo(f,or(d),mc);i.blueprint[c]=y,a[c]=y,function BI(i,s,a,c,d){const f=d.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const _=~s.index;(function $i(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=_&&y.push(_),y.push(a,c,f)}}(i,s,c,af(i,a,d.hostVars,an),d)}function fo(i,s,a,c,d,f){const y=Ti(i,s);!function N_(i,s,a,c,d,f,y){if(null==f)i.removeAttribute(s,d,a);else{const _=null==y?ue(f):y(f,c||"",d);i.setAttribute(s,d,_,a)}}(s[kt],y,f,i.value,a,c,d)}function $I(i,s,a,c,d,f){const y=f[s];if(null!==y)for(let _=0;_<y.length;)Kg(c,a,y[_++],y[_++],y[_++])}function Kg(i,s,a,c,d){const f=bi(null);try{const y=i.inputTransforms;null!==y&&y.hasOwnProperty(c)&&(d=y[c].call(s,d)),null!==i.setInput?i.setInput(s,d,a,c):s[c]=d}finally{bi(f)}}function R_(i,s,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let _=0;_<y.length;_+=2)if(y[_]===s){c.push(f,y[_+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Yg(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null,null]}function Qg(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];qp(a[c]),y.contentQueries(2,s[f],f)}}}function Jl(i,s){return i[ua]?i[Qd][ei]=s:i[ua]=s,i[Qd]=s,s}function Jg(i,s,a){qp(0);const c=bi(null);try{s(i,a)}finally{bi(c)}}function Xl(i){return i[Ao]||(i[Ao]=[])}function HI(i){return i.cleanup||(i.cleanup=[])}function GI(i,s){const a=i[ws],c=a?a.get(zo,null):null;c&&c.handleError(s)}function P_(i,s,a,c,d){for(let f=0;f<a.length;){const y=a[f++],_=a[f++];Kg(i.data[y],s[y],c,_,d)}}function k_(i,s){const a=Li(s,i),c=a[Xe];!function PA(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])}(c,a);const d=a[Yn];null!==d&&null===a[Es]&&(a[Es]=Mg(d,a[ws])),Xg(c,a,a[hr])}function Xg(i,s,a){Vi(s);try{const c=i.viewQuery;null!==c&&Jg(1,c,a);const d=i.template;null!==d&&kI(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Qg(i,s),i.staticViewQueries&&Jg(2,i.viewQuery,a);const f=i.components;null!==f&&function zI(i,s){for(let a=0;a<s.length;a++)k_(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[zt]&=-5,mi()}}let F_=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const f=typeof Zone>"u"?null:Zone.current,y=function cv(i,s,a){const c=Object.create(fE);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=s;const d=y=>{c.cleanupFn=y};return c.ref={notify:()=>nv(c),run:()=>{if(c.dirty=!1,c.hasRun&&!rv(c))return;c.hasRun=!0;const y=Ap(c);try{c.cleanupFn(),c.cleanupFn=Rp,c.fn(d)}finally{ol(c,y)}},cleanup:()=>c.cleanupFn()},c.ref}(a,D=>{this.all.has(D)&&this.queue.set(D,f)},d);let _;this.all.add(y),y.notify();const I=()=>{y.cleanup(),_?.(),this.all.delete(y),this.queue.delete(y)};return _=c?.onDestroy(I),{destroy:I}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=mt({token:i,providedIn:"root",factory:()=>new i})}return i})();function td(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const _=s[y];"number"==typeof _?f=_:1==f?d=Ue(d,_):2==f&&(c=Ue(c,_+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function vc(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];null!==f&&c.push($n(f)),Mn(f)&&tm(f,c);const y=a.type;if(8&y)vc(i,s,a.child,c);else if(32&y){const _=bs(a,s);let I;for(;I=_();)c.push(I)}else if(16&y){const _=Bv(s,a);if(Array.isArray(_))c.push(..._);else{const I=ma(s[Cr]);vc(I[Xe],I,_,c,!0)}}a=d?a.projectionNext:a.next}return c}function tm(i,s){for(let a=Bt;a<i.length;a++){const c=i[a],d=c[Xe].firstChild;null!==d&&vc(c[Xe],c,d,s)}i[et]!==i[Yn]&&s.push(i[et])}function nd(i,s,a,c=!0){const d=s[Ci],f=d.rendererFactory,y=d.afterRenderEventManager;f.begin?.(),y?.begin();try{ZI(i,s,i.template,a)}catch(I){throw c&&GI(s,I),I}finally{f.end?.(),d.effectManager?.flush(),y?.end()}}function ZI(i,s,a,c){const d=s[zt];if(256!=(256&d)){s[Ci].effectManager?.flush(),Vi(s);try{kp(s),function vv(i){return Gt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&kI(i,s,a,2,c);const y=3==(3&d);if(y){const D=i.preOrderCheckHooks;null!==D&&Ha(s,D,null)}else{const D=i.preOrderHooks;null!==D&&Ga(s,D,0,null),yl(s,0)}if(function WI(i){for(let s=NE(i);null!==s;s=Fv(s)){if(!s[Ze])continue;const a=s[Ft];for(let c=0;c<a.length;c++){zu(a[c])}}}(s),L_(s,2),null!==i.contentQueries&&Qg(i,s),y){const D=i.contentCheckHooks;null!==D&&Ha(s,D)}else{const D=i.contentHooks;null!==D&&Ga(s,D,1),yl(s,1)}!function PI(i,s){const a=i.hostBindingOpCodes;if(null===a)return;const c=TA(s,F);try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)no(~f);else{const y=f,_=a[++d],I=a[++d];Gp(_,y),c.dirty=!1;const D=Ap(c);try{I(2,s[y])}finally{ol(c,D)}}}}finally{null===s[F]&&AA(s,F),no(-1)}}(i,s);const _=i.components;null!==_&&KI(s,_,0);const I=i.viewQuery;if(null!==I&&Jg(2,I,c),y){const D=i.viewCheckHooks;null!==D&&Ha(s,D)}else{const D=i.viewHooks;null!==D&&Ga(s,D,2),yl(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[zt]&=-73,fv(s)}finally{mi()}}}function L_(i,s){for(let a=NE(i);null!==a;a=Fv(a))for(let c=Bt;c<a.length;c++)U_(a[c],s)}function V_(i,s,a){U_(Li(s,i),a)}function U_(i,s){if(!function mE(i){return 128==(128&i[zt])}(i))return;const a=i[Xe],c=i[zt];if(80&c&&0===s||1024&c||2===s)ZI(a,i,a.template,i[hr]);else if(i[Ls]>0){L_(i,1);const d=a.components;null!==d&&KI(i,d,1)}}function KI(i,s,a){for(let c=0;c<s.length;c++)V_(i,s[c],a)}class _c{get rootNodes(){const s=this._lView,a=s[Xe];return vc(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[hr]}set context(s){this._lView[hr]=s}get destroyed(){return 256==(256&this._lView[zt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[Bn];if(Mn(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(fg(s,c),Ja(a,c))}this._attachedToViewContainer=!1}Lv(this._lView[Xe],this._lView)}onDestroy(s){!function ph(i,s){if(256==(256&i[zt]))throw new ee(911,!1);null===i[Js]&&(i[Js]=[]),i[Js].push(s)}(this._lView,s)}markForCheck(){Bg(this._cdRefInjectingView||this._lView)}detach(){this._lView[zt]&=-129}reattach(){this._lView[zt]|=128}detectChanges(){nd(this._lView[Xe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Fh(i,s){Bh(i,s,s[kt],2,null,null)}(this._lView[Xe],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=s}}class B_ extends _c{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;nd(s[Xe],s,s[hr],!1)}checkNoChanges(){}get context(){return null}}class nm extends Xh{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=In(s);return new wc(a,this.ngModule)}}function ii(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class rm{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=yn(c);const d=this.injector.get(s,Ng,c);return d!==Ng||a===Ng?d:this.parentInjector.get(s,a,c)}}class wc extends vI{get inputs(){const s=this.componentDef,a=s.inputTransforms,c=ii(s.inputs);if(null!==a)for(const d of c)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return c}get outputs(){return ii(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function En(i){return i.map(wn).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof Oi?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new rm(s,f):s,_=y.get(EI,null);if(null===_)throw new ee(407,!1);const L={rendererFactory:_,sanitizer:y.get(c_,null),effectManager:y.get(F_,null),afterRenderEventManager:y.get(xI,null)},W=_.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",Pe=c?function gt(i,s,a,c){const f=c.get(OI,!1)||a===ot.ShadowDom,y=i.selectRootElement(s,f);return function M_(i){tn(i)}(y),y}(W,c,this.componentDef.encapsulation,y):hg(W,ie,function Ri(i){const s=i.toLowerCase();return"svg"===s?Pp:"math"===s?"math":null}(ie)),At=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let $e=null;null!==Pe&&($e=Mg(Pe,y,!0));const Zt=S_(0,null,null,1,0,null,null,null,null,null,null),Dn=sf(null,Zt,null,At,null,null,L,W,y,null,$e);let Gn,ms;Vi(Dn);try{const Do=this.componentDef;let Jc,hp=null;Do.findHostDirectiveDefs?(Jc=[],hp=new Map,Do.findHostDirectiveDefs(Do,Jc,hp),Jc.push(Do)):Jc=[Do];const Sb=function LA(i,s){const a=i[Xe],c=j;return i[c]=s,yc(a,c,2,"#host",null)}(Dn,Pe),mM=function VA(i,s,a,c,d,f,y){const _=d[Xe];!function YI(i,s,a,c){for(const d of i)s.mergedAttrs=vs(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(td(s,s.mergedAttrs,!0),null!==a&&jh(c,a,s))}(c,i,s,y);let I=null;null!==s&&(I=Mg(s,d[ws]));const D=f.rendererFactory.createRenderer(s,a);let A=16;a.signals?A=4096:a.onPush&&(A=64);const L=sf(d,LI(a),null,A,d[i.index],i,f,D,null,null,I);return _.firstCreatePass&&lf(_,i,c.length-1),Jl(d,L),d[i.index]=L}(Sb,Pe,Do,Jc,Dn,L,W);ms=hh(Zt,j),Pe&&function BA(i,s,a,c){if(c)Jr(i,a,["ng-version",Og.full]);else{const{attrs:d,classes:f}=function en(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!Gr(d))break;d=f}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&Jr(i,a,d),f&&f.length>0&&jE(i,a,f.join(" "))}}(W,Do,Pe,c),void 0!==a&&function jA(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(ms,this.ngContentSelectors,a),Gn=function UA(i,s,a,c,d,f){const y=ti(),_=d[Xe],I=Ti(y,d);Zg(_,d,y,a,null,c);for(let A=0;A<a.length;A++)Ui(da(d,_,y.directiveStart+A,y),d);Yl(_,d,y),I&&Ui(I,d);const D=da(d,_,y.directiveStart+y.componentOffset,y);if(i[hr]=d[hr]=D,null!==f)for(const A of f)A(D,s);return uf(_,y,i),D}(mM,Do,Jc,hp,Dn,[df]),Xg(Zt,Dn,null)}finally{mi()}return new FA(this.componentType,Gn,pc(ms,Dn),Dn,ms)}}class FA extends lA{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new B_(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),a))return;const f=this._rootLView;P_(f[Xe],f,d,s,a),this.previousInputValues.set(s,a),Bg(Li(this._tNode.index,f))}}get injector(){return new Vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function df(){const i=ti();$a(Le()[Xe],i)}function hf(i){let s=function rd(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(or(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new ee(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=im(i.inputs),y.inputTransforms=im(i.inputTransforms),y.declaredInputs=im(i.declaredInputs),y.outputs=im(i.outputs);const _=d.hostBindings;_&&$_(i,_);const I=d.viewQuery,D=d.contentQueries;if(I&&sm(i,I),D&&j_(i,D),z(i.inputs,d.inputs),z(i.declaredInputs,d.declaredInputs),z(i.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),z(y.inputTransforms,d.inputTransforms)),or(d)&&d.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const _=f[y];_&&_.ngInherit&&_(i),_===hf&&(a=!1)}}s=Object.getPrototypeOf(s)}!function QI(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=vs(d.hostAttrs,a=vs(a,d.hostAttrs))}}(c)}function im(i){return i===Ot?{}:i===ct?[]:i}function sm(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function j_(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{s(c,d,f),a(c,d,f)}:s}function $_(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}function Ec(i){const s=i.inputConfig,a={};for(const c in s)if(s.hasOwnProperty(c)){const d=s[c];Array.isArray(d)&&d[2]&&(a[c]=d[2])}i.inputTransforms=a}function am(i){return!!id(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function id(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Zn(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function um(i,s,a,c){const d=Le();return Zn(d,Wu(),s)&&(An(),fo(ar(),d,i,s,a,c)),um}function J_(i,s,a,c,d,f,y,_){const I=Le(),D=An(),A=i+j,L=D.firstCreatePass?function QA(i,s,a,c,d,f,y,_,I){const D=s.consts,A=yc(s,i,4,y||null,Oo(D,_));qg(s,a,A,Oo(D,I)),$a(s,A);const L=A.tView=S_(2,A,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,D,null);return null!==s.queries&&(s.queries.template(s,A),L.queries=s.queries.embeddedTView(A)),A}(A,D,I,s,a,c,d,f,y):D.data[A];Us(L,!1);const W=X_(D,I,L,i);ro()&&Vh(D,I,W,L),Ui(W,I),Jl(I,I[A]=Yg(W,I,W,L)),Is(L)&&A_(D,I,L),null!=y&&FI(I,L,_)}let X_=function hm(i,s,a,c){return io(!0),s[kt].createComment("")};function pC(i){return function Ua(i,s){return i[s]}(function mv(){return Gt.lFrame.contextLView}(),j+i)}function t0(i,s,a){const c=Le();return Zn(c,Wu(),s)&&function ji(i,s,a,c,d,f,y,_){const I=Ti(s,a);let A,D=s.inputs;!_&&null!=D&&(A=D[c])?(P_(i,a,A,c,d),Ki(s)&&function Ei(i,s){const a=Li(s,i);16&a[zt]||(a[zt]|=64)}(a,s.index)):3&s.type&&(c=function Bi(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,f.setProperty(I,c,d))}(An(),ar(),c,i,s,c[kt],a,!1),t0}function n0(i,s,a,c,d){const y=d?"class":"style";P_(i,a,s.inputs[y],y,c)}function Sc(i,s,a,c){const d=Le(),f=An(),y=j+i,_=d[kt],I=f.firstCreatePass?function JA(i,s,a,c,d,f){const y=s.consts,I=yc(s,i,2,c,Oo(y,d));return qg(s,a,I,Oo(y,f)),null!==I.attrs&&td(I,I.attrs,!1),null!==I.mergedAttrs&&td(I,I.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,I),I}(y,f,d,s,a,c):f.data[y],D=fm(f,d,I,_,s,i);d[y]=D;const A=Is(I);return Us(I,!0),jh(_,D,I),32!=(32&I.flags)&&ro()&&Vh(f,d,D,I),0===function Lp(){return Gt.lFrame.elementDepthCount}()&&Ui(D,d),function Vp(){Gt.lFrame.elementDepthCount++}(),A&&(A_(f,d,I),uf(f,I,d)),null!==c&&FI(d,I),Sc}function mu(){let i=ti();jp()?function $p(){Gt.lFrame.isParent=!1}():(i=i.parent,Us(i,!1));const s=i;(function qu(i){return Gt.skipHydrationRootTNode===i})(s)&&function Bp(){Gt.skipHydrationRootTNode=null}(),function pv(){Gt.lFrame.elementDepthCount--}();const a=An();return a.firstCreatePass&&($a(a,i),So(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function so(i){return 0!=(8&i.flags)}(s)&&n0(a,s,Le(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function wl(i){return 0!=(16&i.flags)}(s)&&n0(a,s,Le(),s.stylesWithoutHost,!1),mu}function ud(i,s,a,c){return Sc(i,s,a,c),mu(),ud}let fm=(i,s,a,c,d,f)=>(io(!0),hg(c,d,function Wp(){return Gt.lFrame.currentNamespace}()));function o0(){return Le()}function pm(i){return!!i&&"function"==typeof i.then}function a0(i){return!!i&&"function"==typeof i.subscribe}function cd(i,s,a,c){const d=Le(),f=An(),y=ti();return function c0(i,s,a,c,d,f,y){const _=Is(c),D=i.firstCreatePass&&HI(i),A=s[hr],L=Xl(s);let W=!0;if(3&c.type||y){const Ke=Ti(c,s),dt=y?y(Ke):Ke,At=L.length,$e=y?Dn=>y($n(Dn[c.index])):c.index;let Zt=null;if(!y&&_&&(Zt=function Qo(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===c){const _=s[Ao],I=d[f+2];return _.length>I?_[I]:null}"string"==typeof y&&(f+=2)}return null}(i,s,d,c.index)),null!==Zt)(Zt.__ngLastListenerFn__||Zt).__ngNextListenerFn__=f,Zt.__ngLastListenerFn__=f,W=!1;else{f=l0(c,s,A,f,!1);const Dn=a.listen(dt,d,f);L.push(f,Dn),D&&D.push(d,$e,At,At+1)}}else f=l0(c,s,A,f,!1);const ie=c.outputs;let Pe;if(W&&null!==ie&&(Pe=ie[d])){const Ke=Pe.length;if(Ke)for(let dt=0;dt<Ke;dt+=2){const Gn=s[Pe[dt]][Pe[dt+1]].subscribe(f),ms=L.length;L.push(f,Gn),D&&D.push(d,c.index,ms,-(ms+1))}}}(f,d,d[kt],y,i,s,c),cd}function yC(i,s,a,c){try{return Vs(6,s,a),!1!==a(c)}catch(d){return GI(i,d),!1}finally{Vs(7,s,a)}}function l0(i,s,a,c,d){return function f(y){if(y===Function)return c;Bg(i.componentOffset>-1?Li(i.index,s):s);let I=yC(s,a,c,y),D=f.__ngNextListenerFn__;for(;D;)I=yC(s,a,D,y)&&I,D=D.__ngNextListenerFn__;return d&&!1===I&&y.preventDefault(),I}}function gm(i=1){return function ml(i){return(Gt.lFrame.contextLView=function _h(i,s){for(;i>0;)s=s[Ir],i--;return s}(i,Gt.lFrame.contextLView))[hr]}(i)}function Cf(i,s){return i<<17|s<<2}function mo(i){return i>>17&32767}function _a(i){return 2|i}function yu(i){return(131068&i)>>2}function _m(i,s){return-131069&i|s<<2}function wm(i){return 1|i}function Mc(i,s,a,c,d){const f=i[a+1],y=null===s;let _=c?mo(f):yu(f),I=!1;for(;0!==_&&(!1===I||y);){const A=i[_+1];tS(i[_],s)&&(I=!0,i[_+1]=c?wm(A):_a(A)),_=c?mo(A):yu(A)}I&&(i[a+1]=c?_a(f):wm(f))}function tS(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Xa(i,s)>=0}const Jn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Em(i){return i.substring(Jn.key,Jn.keyEnd)}function Im(i,s){const a=Jn.textEnd;return a===s?-1:(s=Jn.keyEnd=function y0(i,s,a){for(;s<a&&i.charCodeAt(s)>32;)s++;return s}(i,Jn.key=s,a),yo(i,s,a))}function yo(i,s,a){for(;s<a&&i.charCodeAt(s)<=32;)s++;return s}function xc(i,s){return function vo(i,s,a,c){const d=Le(),f=An(),y=Bs(2);f.firstUpdatePass&&SC(f,i,y,c),s!==an&&Zn(d,y,s)&&bm(f,f.data[Ai()],d,d[kt],i,d[y+1]=function Br(i,s){return null==i||""===i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ne(nu(i)))),i}(s,a),c,y)}(i,s,null,!0),xc}function Oc(i){!function Ss(i,s,a,c){const d=An(),f=Bs(2);d.firstUpdatePass&&SC(d,null,f,c);const y=Le();if(a!==an&&Zn(y,f,a)){const _=d.data[Ai()];if(Ms(_,c)&&!AC(d,f)){let I=c?_.classesWithoutHost:_.stylesWithoutHost;null!==I&&(a=Ue(I,a||"")),n0(d,_,y,a,c)}else!function vu(i,s,a,c,d,f,y,_){d===an&&(d=ct);let I=0,D=0,A=0<d.length?d[0]:null,L=0<f.length?f[0]:null;for(;null!==A||null!==L;){const W=I<d.length?d[I+1]:void 0,ie=D<f.length?f[D+1]:void 0;let Ke,Pe=null;A===L?(I+=2,D+=2,W!==ie&&(Pe=L,Ke=ie)):null===L||null!==A&&A<L?(I+=2,Pe=A):(D+=2,Pe=L,Ke=ie),null!==Pe&&bm(i,s,a,c,Pe,Ke,y,_),A=I<d.length?d[I]:null,L=D<f.length?f[D]:null}}(d,_,y,y[kt],y[f+1],y[f+1]=function xC(i,s,a){if(null==a||""===a)return ct;const c=[],d=nu(a);if(Array.isArray(d))for(let f=0;f<d.length;f++)i(c,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&i(c,f,d[f]);else"string"==typeof d&&s(c,d);return c}(i,s,a),c,f)}}(dd,ea,i,!0)}function ea(i,s){for(let a=function nS(i){return function Cm(i){Jn.key=0,Jn.keyEnd=0,Jn.value=0,Jn.valueEnd=0,Jn.textEnd=i.length}(i),Im(i,yo(i,0,Jn.textEnd))}(s);a>=0;a=Im(s,a))Xi(i,Em(s),!0)}function AC(i,s){return s>=i.expandoStartIndex}function SC(i,s,a,c){const d=i.data;if(null===d[a+1]){const f=d[Ai()],y=AC(i,a);Ms(f,c)&&null===s&&!y&&(s=!1),s=function MC(i,s,a,c){const d=function yh(i){const s=Gt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=ta(a=_0(null,i,s,a,c),s.attrs,c),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=_0(d,i,s,a,c),null===f){let I=function rS(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==yu(c))return i[mo(c)]}(i,s,c);void 0!==I&&Array.isArray(I)&&(I=_0(null,i,s,I[1],c),I=ta(I,s.attrs,c),function Dm(i,s,a,c){i[mo(a?s.classBindings:s.styleBindings)]=c}(i,s,c,I))}else f=function iS(i,s,a){let c;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)c=ta(c,i[f].hostAttrs,a);return ta(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,c),function CC(i,s,a,c,d,f){let y=f?s.classBindings:s.styleBindings,_=mo(y),I=yu(y);i[c]=a;let A,D=!1;if(Array.isArray(a)?(A=a[1],(null===A||Xa(a,A)>0)&&(D=!0)):A=a,d)if(0!==I){const W=mo(i[_+1]);i[c+1]=Cf(W,_),0!==W&&(i[W+1]=_m(i[W+1],c)),i[_+1]=function EC(i,s){return 131071&i|s<<17}(i[_+1],c)}else i[c+1]=Cf(_,0),0!==_&&(i[_+1]=_m(i[_+1],c)),_=c;else i[c+1]=Cf(I,0),0===_?_=c:i[I+1]=_m(i[I+1],c),I=c;D&&(i[c+1]=_a(i[c+1])),Mc(i,A,c,!0),Mc(i,A,c,!1),function DC(i,s,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Xa(f,s)>=0&&(a[c+1]=wm(a[c+1]))}(s,A,i,c,f),y=Cf(_,I),f?s.classBindings=y:s.styleBindings=y}(d,f,s,a,y,c)}}function _0(i,s,a,c,d){let f=null;const y=a.directiveEnd;let _=a.directiveStylingLast;for(-1===_?_=a.directiveStart:_++;_<y&&(f=s[_],c=ta(c,f.hostAttrs,d),f!==i);)_++;return null!==i&&(a.directiveStylingLast=_),c}function ta(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Xi(i,y,!!a||s[++f]))}return void 0===i?null:i}function dd(i,s,a){const c=String(s);""!==c&&!c.includes(" ")&&Xi(i,c,a)}function bm(i,s,a,c,d,f,y,_){if(!(3&s.type))return;const I=i.data,D=I[_+1],A=function IC(i){return 1==(1&i)}(D)?OC(I,s,a,d,yu(D),y):void 0;ze(A)||(ze(f)||function wC(i){return 2==(2&i)}(D)&&(f=OC(I,null,a,d,_,y)),function LT(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Mh.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Mh.Important),i.setStyle(a,c,d,f))}}(c,y,function to(i,s){return $n(s[i])}(Ai(),a),d,f))}function OC(i,s,a,c,d,f){const y=null===s;let _;for(;d>0;){const I=i[d],D=Array.isArray(I),A=D?I[1]:I,L=null===A;let W=a[d+1];W===an&&(W=L?ct:void 0);let ie=L?Th(W,c):A===c?W:void 0;if(D&&!ze(ie)&&(ie=Th(I,c)),ze(ie)&&(_=ie,y))return _;const Pe=i[d+1];d=y?mo(Pe):yu(Pe)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(_=Th(I,c))}return _}function ze(i){return void 0!==i}function Ms(i,s){return 0!=(i.flags&(s?8:16))}function Tm(i,s=""){const a=Le(),c=An(),d=i+j,f=c.firstCreatePass?yc(c,d,1,s,null):c.data[d],y=vt(c,a,f,s,i);a[d]=y,ro()&&Vh(c,a,y,f),Us(f,!1)}let vt=(i,s,a,c,d)=>(io(!0),function dg(i,s){return i.createText(s)}(s[kt],c));const Ea=void 0;var Mm=["en",[["a","p"],["AM","PM"],Ea],[["AM","PM"],Ea,Ea],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ea,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ea,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ea,"{1} 'at' {0}",Ea],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function le(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Hi={};function Rc(i){const s=function lS(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=_u(s);if(a)return a;const c=s.split("-")[0];if(a=_u(c),a)return a;if("en"===c)return Mm;throw new ee(701,!1)}function $C(i){return Rc(i)[wu.PluralCase]}function _u(i){return i in Hi||(Hi[i]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[i]),Hi[i]}var wu=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(wu||{});const na="en-US";let _o=na;function Pf(i,s,a,c,d){if(i=ke(i),Array.isArray(i))for(let f=0;f<i.length;f++)Pf(i[f],s,a,c,d);else{const f=An(),y=Le(),_=ti();let I=Hl(i)?i:ke(i.provide);const D=lI(i),A=1048575&_.providerIndexes,L=_.directiveStart,W=_.providerIndexes>>20;if(Hl(i)||!i.multi){const ie=new Fo(D,d,mc),Pe=Hm(I,s,d?A:A+W,L);-1===Pe?(Wa(Dr(_,y),f,I),$m(f,i,s.length),s.push(I),_.directiveStart++,_.directiveEnd++,d&&(_.providerIndexes+=1048576),a.push(ie),y.push(ie)):(a[Pe]=ie,y[Pe]=ie)}else{const ie=Hm(I,s,A+W,L),Pe=Hm(I,s,A,A+W),dt=Pe>=0&&a[Pe];if(d&&!dt||!d&&!(ie>=0&&a[ie])){Wa(Dr(_,y),f,I);const At=function uD(i,s,a,c,d){const f=new Fo(i,a,mc);return f.multi=[],f.index=s,f.componentProviders=0,k0(f,d,c&&!a),f}(d?TS:bS,a.length,d,c,D);!d&&dt&&(a[Pe].providerFactory=At),$m(f,i,s.length,0),s.push(I),_.directiveStart++,_.directiveEnd++,d&&(_.providerIndexes+=1048576),a.push(At),y.push(At)}else $m(f,i,ie>-1?ie:Pe,k0(a[d?Pe:ie],D,!d&&c));!d&&c&&dt&&a[Pe].componentProviders++}}}function $m(i,s,a,c){const d=Hl(s),f=function Kx(i){return!!i.useClass}(s);if(d||f){const I=(f?ke(s.useClass):s).prototype.ngOnDestroy;if(I){const D=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const A=D.indexOf(a);-1===A?D.push(a,[c,I]):D[A+1].push(c,I)}else D.push(a,I)}}}function k0(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Hm(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function bS(i,s,a,c){return F0(this.multi,[])}function TS(i,s,a,c){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,_=da(a,a[Xe],this.providerFactory.index,c);f=_.slice(0,y),F0(d,f);for(let I=y;I<_.length;I++)f.push(_[I])}else f=[],F0(d,f);return f}function F0(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function cD(i,s=[]){return a=>{a.providersResolver=(c,d)=>function aD(i,s,a){const c=An();if(c.firstCreatePass){const d=or(i);Pf(a,c.data,c.blueprint,d,!0),Pf(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class bu{}class lD{}function AS(i,s){return new kf(i,s??null,[])}class kf extends bu{constructor(s,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nm(this);const d=Xr(s);this._bootstrapComponents=Zo(d.bootstrap),this._r3Injector=tf(s,a,[{provide:bu,useValue:this},{provide:Xh,useValue:this.componentFactoryResolver},...c],ne(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class ba extends lD{constructor(s){super(),this.moduleType=s}create(s){return new kf(this.moduleType,s,[])}}class Lf extends bu{constructor(s){super(),this.componentFactoryResolver=new nm(this),this.instance=null;const a=new hc([...s.providers,{provide:bu,useValue:this},{provide:Xh,useValue:this.componentFactoryResolver}],s.parent||dc(),s.debugName,new Set(["environment"]));this.injector=a,s.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Vf(i,s,a=null){return new Lf({providers:i,parent:s,debugName:a,runEnvironmentInitializers:!0}).injector}let dD=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=aI(0,a.type),d=c.length>0?Vf([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=mt({token:i,providedIn:"environment",factory:()=>new i(Qe(Oi))})}return i})();function L0(i){i.getStandaloneInjector=s=>s.get(dD).getOrCreateStandaloneInjector(i)}function gD(i,s,a){const c=function ni(){const i=Gt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}()+i,d=Le();return d[c]===an?function hs(i,s,a){return i[s]=a}(d,c,a?s.call(a):s()):function sd(i,s){return i[s]}(d,c)}function bD(){return this._results[Symbol.iterator]()}class Tu{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new qo)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Tu.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=bD)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function xi(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function rg(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function $f(i,s,a,c=!0){const d=s[Xe];if(function OT(i,s,a,c){const d=Bt+c,f=a.length;c>0&&(a[d-1][ei]=s),c<f-Bt?(s[ei]=a[d],Cv(a,Bt+c,s)):(a.push(s),s[ei]=null),s[Bn]=a;const y=s[ki];null!==y&&a!==y&&function NT(i,s){const a=i[Ft];s[Cr]!==s[Bn][Bn][Cr]&&(i[Ze]=!0),null===a?i[Ft]=[s]:a.push(s)}(y,s);const _=s[gi];null!==_&&_.insertView(i),s[zt]|=128}(d,s,i,a),c){const f=jv(a,i),y=s[kt],_=pg(y,i[et]);null!==_&&function kh(i,s,a,c,d,f){c[Yn]=d,c[pi]=s,Bh(i,c,a,1,d,f)}(d,i[pi],y,s,_,f)}}let Hf=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Ym}return i})();const wr=Hf,Km=class extends wr{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,a){return this.createEmbeddedViewImpl(s,a)}createEmbeddedViewImpl(s,a,c){const d=function TD(i,s,a,c){const d=s.tView,_=sf(i,d,a,4096&i[zt]?4096:16,null,s,null,null,null,c?.injector??null,c?.hydrationInfo??null);_[ki]=i[s.index];const D=i[gi];return null!==D&&(_[gi]=D.createEmbeddedView(d)),Xg(d,_,a),_}(this._declarationLView,this._declarationTContainer,s,{injector:a,hydrationInfo:c});return new _c(d)}};function Ym(){return Gf(ti(),Le())}function Gf(i,s){return 4&i.type?new Km(s,i,pc(i,s)):null}let Id=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=q0}return i})();function q0(){return jr(ti(),Le())}const Z0=Id,Qm=class extends Z0{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return pc(this._hostTNode,this._hostLView)}get injector(){return new Vr(this._hostTNode,this._hostLView)}get parentInjector(){const s=la(this._hostTNode,this._hostLView);if(El(s)){const a=Zr(s,this._hostLView),c=Ji(s);return new Vr(a[Xe].data[c+8],a)}return new Vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=OD(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const _=s.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(_,d,false),_}createComponent(s,a,c,d,f){const y=s&&!function ao(i){return"function"==typeof i}(s);let _;if(y)_=a;else{const Ke=a||{};_=Ke.index,c=Ke.injector,d=Ke.projectableNodes,f=Ke.environmentInjector||Ke.ngModuleRef}const I=y?s:new wc(In(s)),D=c||this.parentInjector;if(!f&&null==I.ngModule){const dt=(y?D:this.parentInjector).get(Oi,null);dt&&(f=dt)}In(I.componentType??{});const ie=I.create(D,d,null,f);return this.insertImpl(ie.hostView,_,false),ie}insert(s,a){return this.insertImpl(s,a,!1)}insertImpl(s,a,c){const d=s._lView;if(function fl(i){return Mn(i[Bn])}(d)){const I=this.indexOf(s);if(-1!==I)this.detach(I);else{const D=d[Bn],A=new Qm(D,D[pi],D[Bn]);A.detach(A.indexOf(s))}}const y=this._adjustIndex(a),_=this._lContainer;return $f(_,d,y,!c),s.attachToViewContainerRef(),Cv(W0(_),y,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=OD(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=fg(this._lContainer,a);c&&(Ja(W0(this._lContainer),a),Lv(c[Xe],c))}detach(s){const a=this._adjustIndex(s,-1),c=fg(this._lContainer,a);return c&&null!=Ja(W0(this._lContainer),a)?new _c(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function OD(i){return i[8]}function W0(i){return i[8]||(i[8]=[])}function jr(i,s){let a;const c=s[i.index];return Mn(c)?a=c:(a=Yg(c,s,null,i),s[i.index]=a,Jl(s,a)),K0(a,s,i,c),new Qm(a,i,s)}let K0=function Y0(i,s,a,c){if(i[et])return;let d;d=8&a.type?$n(c):function kn(i,s){const a=i[kt],c=a.createComment(""),d=Ti(s,i);return cc(a,pg(a,d),c,function kT(i,s){return i.nextSibling(s)}(a,d),!1),c}(s,a),i[et]=d};class Xm{constructor(s){this.queryList=s,this.matches=null}clone(){return new Xm(this.queryList)}setDirty(){this.queryList.setDirty()}}class J0{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new J0(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==ry(s,a).matches&&this.queries[a].setDirty()}}class X0{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class ey{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new ey(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Zf{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Zf(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,Wf(a,f)),this.matchTNodeWithReadOption(s,a,Vo(a,s,f,!1,!1))}else c===Hf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Vo(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ef||d===Id||d===Hf&&4&a.type)this.addMatch(a.index,-2);else{const f=Vo(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Wf(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Yf(i,s,a,c){return-1===a?function Kf(i,s){return 11&i.type?pc(i,s):4&i.type?Gf(i,s):null}(s,i):-2===a?function ty(i,s,a){return a===ef?pc(s,i):a===Hf?Gf(s,i):a===Id?jr(s,i):void 0}(i,s,c):da(i,i[Xe],a,s)}function ew(i,s,a,c){const d=s[gi].queries[c];if(null===d.matches){const f=i.data,y=a.matches,_=[];for(let I=0;I<y.length;I+=2){const D=y[I];_.push(D<0?null:Yf(s,f[D],y[I+1],a.metadata.read))}d.matches=_}return d.matches}function ny(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=ew(i,s,d,a);for(let _=0;_<f.length;_+=2){const I=f[_];if(I>0)c.push(y[_/2]);else{const D=f[_+1],A=s[-I];for(let L=Bt;L<A.length;L++){const W=A[L];W[ki]===W[Bn]&&ny(W[Xe],W,D,c)}if(null!==A[Ft]){const L=A[Ft];for(let W=0;W<L.length;W++){const ie=L[W];ny(ie[Xe],ie,D,c)}}}}}return c}function tw(i){const s=Le(),a=An(),c=_v();qp(c+1);const d=ry(a,c);if(i.dirty&&function fh(i){return 4==(4&i[zt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?ny(a,s,c,[]):ew(a,s,d,c);i.reset(f,dA),i.notifyOnChanges()}return!0}return!1}function nw(i,s,a,c){const d=An();if(d.firstCreatePass){const f=ti();(function RD(i,s,a){null===i.queries&&(i.queries=new ey),i.queries.track(new Zf(s,a))})(d,new X0(s,a,c),f.index),function RS(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function ND(i,s,a){const c=new Tu(4==(4&a));(function MA(i,s,a,c){const d=Xl(s);d.push(a),i.firstCreatePass&&HI(i).push(c,d.length-1)})(i,s,c,c.destroy),null===s[gi]&&(s[gi]=new J0),s[gi].queries.push(new Xm(c))}(d,Le(),a)}function rw(){return function NS(i,s){return i[gi].queries[s].queryList}(Le(),_v())}function ry(i,s){return i.queries.getByIndex(s)}function Bc(i,s){return Gf(i,s)}function Qf(i){return!!Xr(i)}const ly=new qn("Application Initializer");let dy=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=st(ly,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const f=d();if(pm(f))a.push(f);else if(a0(f)){const y=new Promise((_,I)=>{f.subscribe({complete:_,error:I})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=mt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),hy=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=mt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const tp=new qn("LocaleId",{providedIn:"root",factory:()=>st(tp,wt.Optional|wt.SkipSelf)||function dw(){return typeof $localize<"u"&&$localize.locale||na}()}),fy=new qn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let qD=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new se.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=mt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();class ZD{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let np=(()=>{class i{compileModuleSync(a){return new ba(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Zo(Xr(a).declarations).reduce((y,_)=>{const I=In(_);return I&&y.push(new wc(I)),y},[]);return new ZD(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=mt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Nu=new qn(""),Nd=new qn("");let Ey,nb=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ey||(function YS(i){Ey=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}static#e=this.\u0275fac=function(c){return new(c||i)(Qe(wi),Qe(gw),Qe(Nd))};static#t=this.\u0275prov=mt({token:i,factory:i.\u0275fac})}return i})(),gw=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Ey?.findTestabilityInTree(this,a,c)??null}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=mt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),Ru=null;const rb=new qn("AllowMultipleToken"),rp=new qn("PlatformDestroyListeners"),Kr=new qn("appBootstrapListener");class mw{constructor(s,a){this.name=s,this.token=a}}function yw(i,s,a=[]){const c=`Platform: ${s}`,d=new qn(c);return(f=[])=>{let y=Rd();if(!y||y.injector.get(rb,!1)){const _=[...a,...f,{provide:d,useValue:!0}];i?i(_):function XS(i){if(Ru&&!Ru.get(rb,!1))throw new ee(400,!1);(function ib(){!function xp(i){av=i}(()=>{throw new ee(600,!1)})})(),Ru=i;const s=i.get(by);(function ip(i){i.get(Zh,null)?.forEach(a=>a())})(i)}(function Cy(i=[],s){return Ts.create({name:s,providers:[{provide:e_,useValue:"platform"},{provide:rp,useValue:new Set([()=>Ru=null])},...i]})}(_,c))}return function vw(i){const s=Rd();if(!s)throw new ee(401,!1);return s}()}}function Rd(){return Ru?.get(by)??null}let by=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function sb(i="zone.js",s){return"noop"===i?new __:"zone.js"===i?new wi(s):i}(c?.ngZone,function Ty(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const f=function Ff(i,s,a){return new kf(i,s,a)}(a.moduleType,this.injector,function Wc(i){return[{provide:wi,useFactory:i},{provide:$l,multi:!0,useFactory:()=>{const s=st(ub,{optional:!0});return()=>s.initialize()}},{provide:ww,useFactory:eM},{provide:TI,useFactory:AI}]}(()=>d)),y=f.injector.get(zo,null);return d.runOutsideAngular(()=>{const _=d.onError.subscribe({next:I=>{y.handleError(I)}});f.onDestroy(()=>{Pd(this._modules,f),_.unsubscribe()})}),function ob(i,s,a){try{const c=a();return pm(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(y,d,()=>{const _=f.injector.get(dy);return _.runInitializers(),_.donePromise.then(()=>(function T0(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(_o=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(tp,na)||na),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const d=_w({},c);return function QS(i,s,a){const c=new ba(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(Zc);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ee(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(rp,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||i)(Qe(Ts))};static#t=this.\u0275prov=mt({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function _w(i,s){return Array.isArray(s)?s.reduce(_w,i):{...i,...s}}let Zc=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=st(ww),this.zoneIsStable=st(TI),this.componentTypes=[],this.components=[],this.isStable=st(qD).hasPendingTasks.pipe((0,Oe.w)(a=>a?(0,ve.of)(!1):this.zoneIsStable),(0,he.x)(),(0,_e.B)()),this._injector=st(Oi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof vI;if(!this._injector.get(dy).done)throw!d&&To(a),new ee(405,!1);let y;y=d?a:this._injector.get(Xh).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const _=function JS(i){return i.isBoundToModule}(y)?void 0:this._injector.get(bu),D=y.create(Ts.NULL,[],c||y.selector,_),A=D.location.nativeElement,L=D.injector.get(Nu,null);return L?.registerApplication(A),D.onDestroy(()=>{this.detachView(D.hostView),Pd(this.components,D),L?.unregisterApplication(A)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Pd(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Kr,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Pd(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ee(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=mt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Pd(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const ww=new qn("",{providedIn:"root",factory:()=>st(zo).handleError.bind(void 0)});function eM(){const i=st(wi),s=st(zo);return a=>i.runOutsideAngular(()=>s.handleError(a))}let ub=(()=>{class i{constructor(){this.zone=st(wi),this.applicationRef=st(Zc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=mt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Ew(){return!1}let rM=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Dw}return i})();function Dw(i){return function iM(i,s,a){if(Ki(i)&&!a){const c=Li(i.index,s);return new _c(c,c)}return 47&i.type?new _c(s[Cr],s):null}(ti(),Le(),16==(16&i))}class Ld{constructor(){}supports(s){return am(s)}create(s){return new hb(s)}}const Nw=(i,s)=>s;class hb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Nw}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<pb(c,d,f)?a:c,_=pb(y,d,f),I=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const D=_-d,A=I-d;if(D!=A){for(let W=0;W<D;W++){const ie=W<f.length?f[W]:f[W]=0,Pe=ie+W;A<=Pe&&Pe<D&&(f[W]=ie+1)}f[y.previousIndex]=A-D}}_!==I&&s(y,_,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!am(s))throw new ee(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let _=0;_<this.length;_++)f=s[_],y=this._trackByFn(_,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,_)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,_),c=!0),a=a._next}else d=0,function tC(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,_=>{y=this._trackByFn(d,_),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,_,y,d)),Object.is(a.item,_)||this._addIdentityChange(a,_)):(a=this._mismatch(a,_,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new uM(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new fb),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class uM{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cM{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class fb{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new cM,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pb(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class My{constructor(){}supports(s){return s instanceof Map||id(s)}create(){return new lM}}class lM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||id(s)))throw new ee(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new dM(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class dM{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Vd(){return new op([new Ld])}let op=(()=>{class i{static#e=this.\u0275prov=mt({token:i,providedIn:"root",factory:Vd});constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Vd()),deps:[[i,new rt,new ge]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new ee(901,!1)}}return i})();function xy(){return new Ud([new My])}let Ud=(()=>{class i{static#e=this.\u0275prov=mt({token:i,providedIn:"root",factory:xy});constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||xy()),deps:[[i,new rt,new ge]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new ee(901,!1)}}return i})();const Pw=yw(null,"core",[]);let ku=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(c){return new(c||i)(Qe(Zc))};static#t=this.\u0275mod=xa({type:i});static#n=this.\u0275inj=jn({})}return i})();function Bw(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function jw(i){const s=In(i);if(!s)return null;const a=new wc(s);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},3399:(yt,Ae,M)=>{M.d(Ae,{Z:()=>Ye});var h=M(9058),B=M(4537),R=M(7592),Y=M(7879);class se{constructor(We,Se){this._delegate=We,this.firebase=Se,(0,R._addComponent)(We,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=We.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this._delegate.automaticDataCollectionEnabled=We}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(We=>{this._delegate.checkDestroyed(),We()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(We,Se=R._DEFAULT_ENTRY_NAME){var ht;this._delegate.checkDestroyed();const ft=this._delegate.container.getProvider(We);return!ft.isInitialized()&&"EXPLICIT"===(null===(ht=ft.getComponent())||void 0===ht?void 0:ht.instantiationMode)&&ft.initialize(),ft.getImmediate({identifier:Se})}_removeServiceInstance(We,Se=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(We).clearInstance(Se)}_addComponent(We){(0,R._addComponent)(this._delegate,We)}_addOrOverwriteComponent(We){(0,R._addOrOverwriteComponent)(this._delegate,We)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function he(){const ke=function Oe(ke){const We={},Se={__esModule:!0,initializeApp:function ee(Be,k={}){const te=R.initializeApp(Be,k);if((0,h.r3)(We,te.name))return We[te.name];const Ce=new ke(te,Se);return We[te.name]=Ce,Ce},app:ft,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function ue(Be){const k=Be.name,te=k.replace("-compat","");if(R._registerComponent(Be)&&"PUBLIC"===Be.type){const Ce=(it=ft())=>{if("function"!=typeof it[te])throw _e.create("invalid-app-argument",{appName:k});return it[te]()};void 0!==Be.serviceProps&&(0,h.ZB)(Ce,Be.serviceProps),Se[te]=Ce,ke.prototype[te]=function(...it){return this._getService.bind(this,k).apply(this,Be.multipleInstances?it:[])}}return"PUBLIC"===Be.type?Se[te]:null},removeApp:function ht(Be){delete We[Be]},useAsService:function Me(Be,k){return"serverAuth"===k?null:k},modularAPIs:R}};function ft(Be){if(!(0,h.r3)(We,Be=Be||R._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:Be});return We[Be]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function De(){return Object.keys(We).map(Be=>We[Be])}}),ft.App=ke,Se}(se);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function We(Se){(0,h.ZB)(ke,Se)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),ke}(),z=new Y.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=V;!function Ee(ke){(0,R.registerVersion)("@firebase/app-compat","0.2.13",ke)}()},7592:(yt,Ae,M)=>{M.r(Ae),M.d(Ae,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>jn,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>Te,_addOrOverwriteComponent:()=>Ge,_apps:()=>ce,_clearComponents:()=>bt,_components:()=>oe,_getProvider:()=>qe,_registerComponent:()=>tt,_removeServiceInstance:()=>Wt,deleteApp:()=>ir,getApp:()=>vn,getApps:()=>Nn,initializeApp:()=>Ln,onLog:()=>bn,registerVersion:()=>Vn,setLogLevel:()=>nr});var h=M(5861),B=M(4537),R=M(7879),Y=M(9058),se=M(1878);class ve{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(we=>{if(function _e(me){const Z=me.getComponent();return"VERSION"===Z?.type}(we)){const He=we.getImmediate();return`${He.library}/${He.version}`}return null}).filter(we=>we).join(" ")}}const Oe="@firebase/app",V=new R.Yd("@firebase/app"),ae="[DEFAULT]",fe={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ce=new Map,oe=new Map;function Te(me,Z){try{me.container.addComponent(Z)}catch(we){V.debug(`Component ${Z.name} failed to register with FirebaseApp ${me.name}`,we)}}function Ge(me,Z){me.container.addOrOverwriteComponent(Z)}function tt(me){const Z=me.name;if(oe.has(Z))return V.debug(`There were multiple attempts to register component ${Z}.`),!1;oe.set(Z,me);for(const we of ce.values())Te(we,me);return!0}function qe(me,Z){const we=me.container.getProvider("heartbeat").getImmediate({optional:!0});return we&&we.triggerHeartbeat(),me.container.getProvider(Z)}function Wt(me,Z,we=ae){qe(me,Z).clearInstance(we)}function bt(){oe.clear()}const mt=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fn{constructor(Z,we,He){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},we),this._name=we.name,this._automaticDataCollectionEnabled=we.automaticDataCollectionEnabled,this._container=He,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw mt.create("app-deleted",{appName:this._name})}}const jn="9.23.0";function Ln(me,Z={}){let we=me;"object"!=typeof Z&&(Z={name:Z});const He=Object.assign({name:ae,automaticDataCollectionEnabled:!1},Z),ut=He.name;if("string"!=typeof ut||!ut)throw mt.create("bad-app-name",{appName:String(ut)});if(we||(we=(0,Y.aH)()),!we)throw mt.create("no-options");const Et=ce.get(ut);if(Et){if((0,Y.vZ)(we,Et.options)&&(0,Y.vZ)(He,Et.config))return Et;throw mt.create("duplicate-app",{appName:ut})}const mn=new B.H0(ut);for(const H of oe.values())mn.addComponent(H);const G=new fn(we,He,mn);return ce.set(ut,G),G}function vn(me=ae){const Z=ce.get(me);if(!Z&&me===ae&&(0,Y.aH)())return Ln();if(!Z)throw mt.create("no-app",{appName:me});return Z}function Nn(){return Array.from(ce.values())}function ir(me){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,h.Z)(function*(me){const Z=me.name;ce.has(Z)&&(ce.delete(Z),yield Promise.all(me.container.getProviders().map(we=>we.delete())),me.isDeleted=!0)})).apply(this,arguments)}function Vn(me,Z,we){var He;let ut=null!==(He=fe[me])&&void 0!==He?He:me;we&&(ut+=`-${we}`);const Et=ut.match(/\s|\//),mn=Z.match(/\s|\//);if(Et||mn){const G=[`Unable to register library "${ut}" with version "${Z}":`];return Et&&G.push(`library name "${ut}" contains illegal characters (whitespace or "/")`),Et&&mn&&G.push("and"),mn&&G.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void V.warn(G.join(" "))}tt(new B.wA(`${ut}-version`,()=>({library:ut,version:Z}),"VERSION"))}function bn(me,Z){if(null!==me&&"function"!=typeof me)throw mt.create("invalid-log-argument");(0,R.Am)(me,Z)}function nr(me){(0,R.Ub)(me)}const Hr="firebase-heartbeat-database",wt=1,Ct="firebase-heartbeat-store";let Rt=null;function Pt(){return Rt||(Rt=(0,se.X3)(Hr,wt,{upgrade:(me,Z)=>{0===Z&&me.createObjectStore(Ct)}}).catch(me=>{throw mt.create("idb-open",{originalErrorMessage:me.message})})),Rt}function pn(){return(pn=(0,h.Z)(function*(me){try{return yield(yield Pt()).transaction(Ct).objectStore(Ct).get(Sr(me))}catch(Z){if(Z instanceof Y.ZR)V.warn(Z.message);else{const we=mt.create("idb-get",{originalErrorMessage:Z?.message});V.warn(we.message)}}})).apply(this,arguments)}function Kt(me,Z){return gn.apply(this,arguments)}function gn(){return(gn=(0,h.Z)(function*(me,Z){try{const He=(yield Pt()).transaction(Ct,"readwrite");yield He.objectStore(Ct).put(Z,Sr(me)),yield He.done}catch(we){if(we instanceof Y.ZR)V.warn(we.message);else{const He=mt.create("idb-set",{originalErrorMessage:we?.message});V.warn(He.message)}}})).apply(this,arguments)}function Sr(me){return`${me.name}!${me.options.appId}`}class Xt{constructor(Z){this.container=Z,this._heartbeatsCache=null;const we=this.container.getProvider("app").getImmediate();this._storage=new sr(we),this._heartbeatsCachePromise=this._storage.read().then(He=>(this._heartbeatsCache=He,He))}triggerHeartbeat(){var Z=this;return(0,h.Z)(function*(){const He=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=cn();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==ut&&!Z._heartbeatsCache.heartbeats.some(Et=>Et.date===ut))return Z._heartbeatsCache.heartbeats.push({date:ut,agent:He}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(Et=>{const mn=new Date(Et.date).valueOf();return Date.now()-mn<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,h.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const we=cn(),{heartbeatsToSend:He,unsentEntries:ut}=function Er(me,Z=1024){const we=[];let He=me.slice();for(const ut of me){const Et=we.find(mn=>mn.agent===ut.agent);if(Et){if(Et.dates.push(ut.date),lr(we)>Z){Et.dates.pop();break}}else if(we.push({agent:ut.agent,dates:[ut.date]}),lr(we)>Z){we.pop();break}He=He.slice(1)}return{heartbeatsToSend:we,unsentEntries:He}}(Z._heartbeatsCache.heartbeats),Et=(0,Y.L)(JSON.stringify({version:2,heartbeats:He}));return Z._heartbeatsCache.lastSentHeartbeatDate=we,ut.length>0?(Z._heartbeatsCache.heartbeats=ut,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),Et})()}}function cn(){return(new Date).toISOString().substring(0,10)}class sr{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,h.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function pr(me){return pn.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var we=this;return(0,h.Z)(function*(){var He;if(yield we._canUseIndexedDBPromise){const Et=yield we.read();return Kt(we.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Et.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var we=this;return(0,h.Z)(function*(){var He;if(yield we._canUseIndexedDBPromise){const Et=yield we.read();return Kt(we.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Et.lastSentHeartbeatDate,heartbeats:[...Et.heartbeats,...Z.heartbeats]})}})()}}function lr(me){return(0,Y.L)(JSON.stringify({version:2,heartbeats:me})).length}!function Un(me){tt(new B.wA("platform-logger",Z=>new ve(Z),"PRIVATE")),tt(new B.wA("heartbeat",Z=>new Xt(Z),"PRIVATE")),Vn(Oe,"0.9.13",me),Vn(Oe,"0.9.13","esm2017"),Vn("fire-js","")}("")},4097:(yt,Ae,M)=>{M.d(Ae,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=M(7592);(0,h.registerVersion)("firebase","9.23.0","app")},120:(yt,Ae,M)=>{M.d(Ae,{Z:()=>h.Z});var h=M(3399);h.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(yt,Ae,M)=>{M.r(Ae);var h=M(5861),B=M(3399),R=M(6710),Y=M(9058),_e=(M(7592),M(7879),M(4537));function Oe(){return window}function z(){return z=(0,h.Z)(function*(N,P,S){var J;const{BuildInfo:Re}=Oe();(0,R.as)(P.sessionId,"AuthEvent did not contain a session ID");const Qe=yield function Se(N){return ht.apply(this,arguments)}(P.sessionId),xt={};return(0,R.at)()?xt.ibi=Re.packageName:(0,R.au)()?xt.apn=Re.packageName:(0,R.av)(N,"operation-not-supported-in-this-environment"),Re.displayName&&(xt.appDisplayName=Re.displayName),xt.sessionId=Qe,(0,R.aw)(N,S,P.type,void 0,null!==(J=P.eventId)&&void 0!==J?J:void 0,xt)}),z.apply(this,arguments)}function Ue(){return(Ue=(0,h.Z)(function*(N){const{BuildInfo:P}=Oe(),S={};(0,R.at)()?S.iosBundleId=P.packageName:(0,R.au)()?S.androidPackageName=P.packageName:(0,R.av)(N,"operation-not-supported-in-this-environment"),yield(0,R.ax)(N,S)})).apply(this,arguments)}function ke(){return(ke=(0,h.Z)(function*(N,P,S){const{cordova:J}=Oe();let Re=()=>{};try{yield new Promise((Qe,xt)=>{let st=null;function yn(){var Yt;Qe();const gr=null===(Yt=J.plugins.browsertab)||void 0===Yt?void 0:Yt.close;"function"==typeof gr&&gr(),"function"==typeof S?.close&&S.close()}function Vt(){st||(st=window.setTimeout(()=>{xt((0,R.az)(N,"redirect-cancelled-by-user"))},2e3))}function _n(){"visible"===document?.visibilityState&&Vt()}P.addPassiveListener(yn),document.addEventListener("resume",Vt,!1),(0,R.au)()&&document.addEventListener("visibilitychange",_n,!1),Re=()=>{P.removePassiveListener(yn),document.removeEventListener("resume",Vt,!1),document.removeEventListener("visibilitychange",_n,!1),st&&window.clearTimeout(st)}})}finally{Re()}})).apply(this,arguments)}function ht(){return(ht=(0,h.Z)(function*(N){const P=function ft(N){if((0,R.as)(/[0-9a-zA-Z]+/.test(N),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(N);const P=new ArrayBuffer(N.length),S=new Uint8Array(P);for(let J=0;J<N.length;J++)S[J]=N.charCodeAt(J);return S}(N),S=yield crypto.subtle.digest("SHA-256",P);return Array.from(new Uint8Array(S)).map(Re=>Re.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class De extends R.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(P=>{this.resolveInialized=P})}addPassiveListener(P){this.passiveListeners.add(P)}removePassiveListener(P){this.passiveListeners.delete(P)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(P){return this.resolveInialized(),this.passiveListeners.forEach(S=>S(P)),super.onEvent(P)}initialized(){var P=this;return(0,h.Z)(function*(){yield P.initPromise})()}}function Be(N){return k.apply(this,arguments)}function k(){return(k=(0,h.Z)(function*(N){const P=yield it()._get(Lt(N));return P&&(yield it()._remove(Lt(N))),P})).apply(this,arguments)}function Ce(){const N=[];for(let S=0;S<20;S++){const J=Math.floor(62*Math.random());N.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(J))}return N.join("")}function it(){return(0,R.aC)(R.b)}function Lt(N){return(0,R.aD)("authEvent",N.config.apiKey,N.name)}function hn(N){if(!N?.includes("?"))return{};const[P,...S]=N.split("?");return(0,Y.zd)(S.join("?"))}const ae=class zn{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aE,this._overrideRedirectResult=R.aF}_initialize(P){var S=this;return(0,h.Z)(function*(){const J=P._key();let Re=S.eventManagers.get(J);return Re||(Re=new De(P),S.eventManagers.set(J,Re),S.attachCallbackListeners(P,Re)),Re})()}_openPopup(P){(0,R.av)(P,"operation-not-supported-in-this-environment")}_openRedirect(P,S,J,Re){var Qe=this;return(0,h.Z)(function*(){!function We(N){var P,S,J,Re,Qe,xt,st,yn,Vt,_n;const Yt=Oe();(0,R.aA)("function"==typeof(null===(P=Yt?.universalLinks)||void 0===P?void 0:P.subscribe),N,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.aA)(typeof(null===(S=Yt?.BuildInfo)||void 0===S?void 0:S.packageName)<"u",N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.aA)("function"==typeof(null===(Qe=null===(Re=null===(J=Yt?.cordova)||void 0===J?void 0:J.plugins)||void 0===Re?void 0:Re.browsertab)||void 0===Qe?void 0:Qe.openUrl),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aA)("function"==typeof(null===(yn=null===(st=null===(xt=Yt?.cordova)||void 0===xt?void 0:xt.plugins)||void 0===st?void 0:st.browsertab)||void 0===yn?void 0:yn.isAvailable),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aA)("function"==typeof(null===(_n=null===(Vt=Yt?.cordova)||void 0===Vt?void 0:Vt.InAppBrowser)||void 0===_n?void 0:_n.open),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(P);const xt=yield Qe._initialize(P);yield xt.initialized(),xt.resetRedirect(),(0,R.aG)(),yield Qe._originValidation(P);const st=function ue(N,P,S=null){return{type:P,eventId:S,urlResponse:null,sessionId:Ce(),postBody:null,tenantId:N.tenantId,error:(0,R.az)(N,"no-auth-event")}}(P,J,Re);yield function Me(N,P){return it()._set(Lt(N),P)}(P,st);const yn=yield function V(N,P,S){return z.apply(this,arguments)}(P,st,S),Vt=yield function Ee(N){const{cordova:P}=Oe();return new Promise(S=>{P.plugins.browsertab.isAvailable(J=>{let Re=null;J?P.plugins.browsertab.openUrl(N):Re=P.InAppBrowser.open(N,(0,R.ay)()?"_blank":"_system","location=yes"),S(Re)})})}(yn);return function Ye(N,P,S){return ke.apply(this,arguments)}(P,xt,Vt)})()}_isIframeWebStorageSupported(P,S){throw new Error("Method not implemented.")}_originValidation(P){const S=P._key();return this.originValidationPromises[S]||(this.originValidationPromises[S]=function ne(N){return Ue.apply(this,arguments)}(P)),this.originValidationPromises[S]}attachCallbackListeners(P,S){const{universalLinks:J,handleOpenURL:Re,BuildInfo:Qe}=Oe(),xt=setTimeout((0,h.Z)(function*(){yield Be(P),S.onEvent(fe())}),500),st=function(){var _n=(0,h.Z)(function*(Yt){clearTimeout(xt);const gr=yield Be(P);let K=null;gr&&Yt?.url&&(K=function te(N,P){var S,J;const Re=function Ht(N){const P=hn(N),S=P.link?decodeURIComponent(P.link):void 0,J=hn(S).link,Re=P.deep_link_id?decodeURIComponent(P.deep_link_id):void 0;return hn(Re).link||Re||J||S||N}(P);if(Re.includes("/__/auth/callback")){const Qe=hn(Re),xt=Qe.firebaseError?function $t(N){try{return JSON.parse(N)}catch{return null}}(decodeURIComponent(Qe.firebaseError)):null,st=null===(J=null===(S=xt?.code)||void 0===S?void 0:S.split("auth/"))||void 0===J?void 0:J[1],yn=st?(0,R.az)(st):null;return yn?{type:N.type,eventId:N.eventId,tenantId:N.tenantId,error:yn,urlResponse:null,sessionId:null,postBody:null}:{type:N.type,eventId:N.eventId,tenantId:N.tenantId,sessionId:N.sessionId,urlResponse:Re,postBody:null}}return null}(gr,Yt.url)),S.onEvent(K||fe())});return function(gr){return _n.apply(this,arguments)}}();typeof J<"u"&&"function"==typeof J.subscribe&&J.subscribe(null,st);const yn=Re,Vt=`${Qe.packageName.toLowerCase()}://`;Oe().handleOpenURL=function(){var _n=(0,h.Z)(function*(Yt){if(Yt.toLowerCase().startsWith(Vt)&&st({url:Yt}),"function"==typeof yn)try{yn(Yt)}catch(gr){console.error(gr)}});return function(Yt){return _n.apply(this,arguments)}}()}};function fe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.az)("no-auth-event")}}function tt(){var N;return(null===(N=self?.location)||void 0===N?void 0:N.protocol)||null}function Wt(N=(0,Y.z$)()){return!("file:"!==tt()&&"ionic:"!==tt()&&"capacitor:"!==tt()||!N.toLowerCase().match(/iphone|ipad|ipod|android/))}function jn(){try{const N=self.localStorage,P=R.aL();if(N)return N.setItem(P,"1"),N.removeItem(P),!function fn(N=(0,Y.z$)()){return function rn(){return(0,Y.w1)()&&11===document?.documentMode}()||function mt(N=(0,Y.z$)()){return/Edge\/\d+/.test(N)}(N)}()||(0,Y.hl)()}catch{return Ln()&&(0,Y.hl)()}return!1}function Ln(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vn(){return(function qe(){return"http:"===tt()||"https:"===tt()}()||(0,Y.ru)()||Wt())&&!function bt(){return(0,Y.b$)()||(0,Y.UG)()}()&&jn()&&!Ln()}function Nn(){return Wt()&&typeof document<"u"}function Kn(){return(Kn=(0,h.Z)(function*(){return!!Nn()&&new Promise(N=>{const P=setTimeout(()=>{N(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(P),N(!0)})})})).apply(this,arguments)}const bn={LOCAL:"local",NONE:"none",SESSION:"session"},nr=R.aA,Hr="persistence";function Ct(N){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,h.Z)(function*(N){yield N._initializationPromise;const P=pr(),S=R.aD(Hr,N.config.apiKey,N.name);P&&P.setItem(S,N._getPersistence())})).apply(this,arguments)}function pr(){var N;try{return(null===(N=function Vn(){return typeof window<"u"?window:null}())||void 0===N?void 0:N.sessionStorage)||null}catch{return null}}const pn=R.aA;class Kt{constructor(){this.browserResolver=R.aC(R.k),this.cordovaResolver=R.aC(ae),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aE,this._overrideRedirectResult=R.aF}_initialize(P){var S=this;return(0,h.Z)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._initialize(P)})()}_openPopup(P,S,J,Re){var Qe=this;return(0,h.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openPopup(P,S,J,Re)})()}_openRedirect(P,S,J,Re){var Qe=this;return(0,h.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openRedirect(P,S,J,Re)})()}_isIframeWebStorageSupported(P,S){this.assertedUnderlyingResolver._isIframeWebStorageSupported(P,S)}_originValidation(P){return this.assertedUnderlyingResolver._originValidation(P)}get _shouldInitProactively(){return Nn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var P=this;return(0,h.Z)(function*(){if(P.underlyingResolver)return;const S=yield function ir(){return Kn.apply(this,arguments)}();P.underlyingResolver=S?P.cordovaResolver:P.browserResolver})()}}function gn(N){return N.unwrap()}function sn(N){return Xt(N)}function Xt(N){const{_tokenResponse:P}=N instanceof Y.ZR?N.customData:N;if(!P)return null;if(!(N instanceof Y.ZR)&&"temporaryProof"in P&&"phoneNumber"in P)return R.P.credentialFromResult(N);const S=P.providerId;if(!S||S===R.p.PASSWORD)return null;let J;switch(S){case R.p.GOOGLE:J=R.V;break;case R.p.FACEBOOK:J=R.U;break;case R.p.GITHUB:J=R.W;break;case R.p.TWITTER:J=R.Z;break;default:const{oauthIdToken:Re,oauthAccessToken:Qe,oauthTokenSecret:xt,pendingToken:st,nonce:yn}=P;return Qe||xt||Re||st?st?S.startsWith("saml.")?R.aO._create(S,st):R.L._fromParams({providerId:S,signInMethod:S,pendingToken:st,idToken:Re,accessToken:Qe}):new R.X(S).credential({idToken:Re,accessToken:Qe,rawNonce:yn}):null}return N instanceof Y.ZR?J.credentialFromError(N):J.credentialFromResult(N)}function cn(N,P){return P.catch(S=>{throw S instanceof Y.ZR&&function hi(N,P){var S;const J=null===(S=P.customData)||void 0===S?void 0:S._tokenResponse;if("auth/multi-factor-auth-required"===P?.code)P.resolver=new lr(N,R.aq(N,P));else if(J){const Re=Xt(P),Qe=P;Re&&(Qe.credential=Re,Qe.tenantId=J.tenantId||void 0,Qe.email=J.email||void 0,Qe.phoneNumber=J.phoneNumber||void 0)}}(N,S),S}).then(S=>{const Re=S.user;return{operationType:S.operationType,credential:sn(S),additionalUserInfo:R.ao(S),user:Un.getOrCreate(Re)}})}function Er(N,P){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(N,P){const S=yield P;return{verificationId:S.verificationId,confirm:J=>cn(N,S.confirm(J))}})).apply(this,arguments)}class lr{constructor(P,S){this.resolver=S,this.auth=function Sr(N){return N.wrapped()}(P)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(P){return cn(gn(this.auth),this.resolver.resolveSignIn(P))}}class Un{constructor(P){this._delegate=P,this.multiFactor=R.ar(P)}static getOrCreate(P){return Un.USER_MAP.has(P)||Un.USER_MAP.set(P,new Un(P)),Un.USER_MAP.get(P)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(P){return this._delegate.getIdTokenResult(P)}getIdToken(P){return this._delegate.getIdToken(P)}linkAndRetrieveDataWithCredential(P){return this.linkWithCredential(P)}linkWithCredential(P){var S=this;return(0,h.Z)(function*(){return cn(S.auth,R.a0(S._delegate,P))})()}linkWithPhoneNumber(P,S){var J=this;return(0,h.Z)(function*(){return Er(J.auth,R.l(J._delegate,P,S))})()}linkWithPopup(P){var S=this;return(0,h.Z)(function*(){return cn(S.auth,R.d(S._delegate,P,Kt))})()}linkWithRedirect(P){var S=this;return(0,h.Z)(function*(){return yield Ct(R.aH(S.auth)),R.g(S._delegate,P,Kt)})()}reauthenticateAndRetrieveDataWithCredential(P){return this.reauthenticateWithCredential(P)}reauthenticateWithCredential(P){var S=this;return(0,h.Z)(function*(){return cn(S.auth,R.a1(S._delegate,P))})()}reauthenticateWithPhoneNumber(P,S){return Er(this.auth,R.r(this._delegate,P,S))}reauthenticateWithPopup(P){return cn(this.auth,R.e(this._delegate,P,Kt))}reauthenticateWithRedirect(P){var S=this;return(0,h.Z)(function*(){return yield Ct(R.aH(S.auth)),R.h(S._delegate,P,Kt)})()}sendEmailVerification(P){return R.ae(this._delegate,P)}unlink(P){var S=this;return(0,h.Z)(function*(){return yield R.an(S._delegate,P),S})()}updateEmail(P){return R.aj(this._delegate,P)}updatePassword(P){return R.ak(this._delegate,P)}updatePhoneNumber(P){return R.u(this._delegate,P)}updateProfile(P){return R.ai(this._delegate,P)}verifyBeforeUpdateEmail(P,S){return R.af(this._delegate,P,S)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Un.USER_MAP=new WeakMap;const me=R.aA;let Z=(()=>{class N{constructor(S,J){if(this.app=S,J.isInitialized())return this._delegate=J.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Re}=S.options;me(Re,"invalid-api-key",{appName:S.name}),me(Re,"invalid-api-key",{appName:S.name});const Qe=typeof window<"u"?Kt:void 0;this._delegate=J.initialize({options:{persistence:He(Re,S.name),popupRedirectResolver:Qe}}),this._delegate._updateErrorMap(R.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Un.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(S){this._delegate.languageCode=S}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(S){this._delegate.tenantId=S}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(S,J){R.I(this._delegate,S,J)}applyActionCode(S){return R.a5(this._delegate,S)}checkActionCode(S){return R.a6(this._delegate,S)}confirmPasswordReset(S,J){return R.a4(this._delegate,S,J)}createUserWithEmailAndPassword(S,J){var Re=this;return(0,h.Z)(function*(){return cn(Re._delegate,R.a8(Re._delegate,S,J))})()}fetchProvidersForEmail(S){return this.fetchSignInMethodsForEmail(S)}fetchSignInMethodsForEmail(S){return R.ad(this._delegate,S)}isSignInWithEmailLink(S){return R.ab(this._delegate,S)}getRedirectResult(){var S=this;return(0,h.Z)(function*(){me(vn(),S._delegate,"operation-not-supported-in-this-environment");const J=yield R.j(S._delegate,Kt);return J?cn(S._delegate,Promise.resolve(J)):{credential:null,user:null}})()}addFrameworkForLogging(S){!function ce(N,P){(0,R.aH)(N)._logFramework(P)}(this._delegate,S)}onAuthStateChanged(S,J,Re){const{next:Qe,error:xt,complete:st}=we(S,J,Re);return this._delegate.onAuthStateChanged(Qe,xt,st)}onIdTokenChanged(S,J,Re){const{next:Qe,error:xt,complete:st}=we(S,J,Re);return this._delegate.onIdTokenChanged(Qe,xt,st)}sendSignInLinkToEmail(S,J){return R.aa(this._delegate,S,J)}sendPasswordResetEmail(S,J){return R.a3(this._delegate,S,J||void 0)}setPersistence(S){var J=this;return(0,h.Z)(function*(){let Re;switch(function wt(N,P){nr(Object.values(bn).includes(P),N,"invalid-persistence-type"),(0,Y.b$)()?nr(P!==bn.SESSION,N,"unsupported-persistence-type"):(0,Y.UG)()?nr(P===bn.NONE,N,"unsupported-persistence-type"):Ln()?nr(P===bn.NONE||P===bn.LOCAL&&(0,Y.hl)(),N,"unsupported-persistence-type"):nr(P===bn.NONE||jn(),N,"unsupported-persistence-type")}(J._delegate,S),S){case bn.SESSION:Re=R.a;break;case bn.LOCAL:Re=(yield R.aC(R.i)._isAvailable())?R.i:R.b;break;case bn.NONE:Re=R.N;break;default:return R.av("argument-error",{appName:J._delegate.name})}return J._delegate.setPersistence(Re)})()}signInAndRetrieveDataWithCredential(S){return this.signInWithCredential(S)}signInAnonymously(){return cn(this._delegate,R._(this._delegate))}signInWithCredential(S){return cn(this._delegate,R.$(this._delegate,S))}signInWithCustomToken(S){return cn(this._delegate,R.a2(this._delegate,S))}signInWithEmailAndPassword(S,J){return cn(this._delegate,R.a9(this._delegate,S,J))}signInWithEmailLink(S,J){return cn(this._delegate,R.ac(this._delegate,S,J))}signInWithPhoneNumber(S,J){return Er(this._delegate,R.s(this._delegate,S,J))}signInWithPopup(S){var J=this;return(0,h.Z)(function*(){return me(vn(),J._delegate,"operation-not-supported-in-this-environment"),cn(J._delegate,R.c(J._delegate,S,Kt))})()}signInWithRedirect(S){var J=this;return(0,h.Z)(function*(){return me(vn(),J._delegate,"operation-not-supported-in-this-environment"),yield Ct(J._delegate),R.f(J._delegate,S,Kt)})()}updateCurrentUser(S){return this._delegate.updateCurrentUser(S)}verifyPasswordResetCode(S){return R.a7(this._delegate,S)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return N.Persistence=bn,N})();function we(N,P,S){let J=N;"function"!=typeof N&&({next:J,error:P,complete:S}=N);const Re=J;return{next:xt=>Re(xt&&Un.getOrCreate(xt)),error:P,complete:S}}function He(N,P){const S=function Pt(N,P){const S=pr();if(!S)return[];const J=R.aD(Hr,N,P);switch(S.getItem(J)){case bn.NONE:return[R.N];case bn.LOCAL:return[R.i,R.a];case bn.SESSION:return[R.a];default:return[]}}(N,P);if(typeof self<"u"&&!S.includes(R.i)&&S.push(R.i),typeof window<"u")for(const J of[R.b,R.a])S.includes(J)||S.push(J);return S.includes(R.N)||S.push(R.N),S}class ut{constructor(){this.providerId="phone",this._delegate=new R.P(gn(B.Z.auth()))}static credential(P,S){return R.P.credential(P,S)}verifyPhoneNumber(P,S){return this._delegate.verifyPhoneNumber(P,S)}unwrap(){return this._delegate}}ut.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,ut.PROVIDER_ID=R.P.PROVIDER_ID;const Et=R.aA;class mn{constructor(P,S,J=B.Z.app()){var Re;Et(null===(Re=J.options)||void 0===Re?void 0:Re.apiKey,"invalid-api-key",{appName:J.name}),this._delegate=new R.R(P,S,J.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function H(N){N.INTERNAL.registerComponent(new _e.wA("auth-compat",P=>{const S=P.getProvider("app-compat").getImmediate(),J=P.getProvider("auth");return new Z(S,J)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.Q,FacebookAuthProvider:R.U,GithubAuthProvider:R.W,GoogleAuthProvider:R.V,OAuthProvider:R.X,SAMLAuthProvider:R.Y,PhoneAuthProvider:ut,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:mn,TwitterAuthProvider:R.Z,Auth:Z,AuthCredential:R.J,Error:Y.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),N.registerVersion("@firebase/auth-compat","0.4.2")}(B.Z)},9519:(yt,Ae,M)=>{M.d(Ae,{Gb:()=>h.Gb});var h=M(2650)},4303:(yt,Ae,M)=>{M.r(Ae),M.d(Ae,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>jn,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>Te,_addOrOverwriteComponent:()=>Ge,_apps:()=>ce,_clearComponents:()=>bt,_components:()=>oe,_getProvider:()=>qe,_registerComponent:()=>tt,_removeServiceInstance:()=>Wt,deleteApp:()=>ir,getApp:()=>vn,getApps:()=>Nn,initializeApp:()=>Ln,onLog:()=>bn,registerVersion:()=>Vn,setLogLevel:()=>nr});var h=M(5861),B=M(4537),R=M(7879),Y=M(9058),se=M(1878);class ve{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(we=>{if(function _e(me){const Z=me.getComponent();return"VERSION"===Z?.type}(we)){const He=we.getImmediate();return`${He.library}/${He.version}`}return null}).filter(we=>we).join(" ")}}const Oe="@firebase/app",V=new R.Yd("@firebase/app"),ae="[DEFAULT]",fe={[Oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ce=new Map,oe=new Map;function Te(me,Z){try{me.container.addComponent(Z)}catch(we){V.debug(`Component ${Z.name} failed to register with FirebaseApp ${me.name}`,we)}}function Ge(me,Z){me.container.addOrOverwriteComponent(Z)}function tt(me){const Z=me.name;if(oe.has(Z))return V.debug(`There were multiple attempts to register component ${Z}.`),!1;oe.set(Z,me);for(const we of ce.values())Te(we,me);return!0}function qe(me,Z){const we=me.container.getProvider("heartbeat").getImmediate({optional:!0});return we&&we.triggerHeartbeat(),me.container.getProvider(Z)}function Wt(me,Z,we=ae){qe(me,Z).clearInstance(we)}function bt(){oe.clear()}const mt=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fn{constructor(Z,we,He){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},we),this._name=we.name,this._automaticDataCollectionEnabled=we.automaticDataCollectionEnabled,this._container=He,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw mt.create("app-deleted",{appName:this._name})}}const jn="10.4.0";function Ln(me,Z={}){let we=me;"object"!=typeof Z&&(Z={name:Z});const He=Object.assign({name:ae,automaticDataCollectionEnabled:!1},Z),ut=He.name;if("string"!=typeof ut||!ut)throw mt.create("bad-app-name",{appName:String(ut)});if(we||(we=(0,Y.aH)()),!we)throw mt.create("no-options");const Et=ce.get(ut);if(Et){if((0,Y.vZ)(we,Et.options)&&(0,Y.vZ)(He,Et.config))return Et;throw mt.create("duplicate-app",{appName:ut})}const mn=new B.H0(ut);for(const H of oe.values())mn.addComponent(H);const G=new fn(we,He,mn);return ce.set(ut,G),G}function vn(me=ae){const Z=ce.get(me);if(!Z&&me===ae&&(0,Y.aH)())return Ln();if(!Z)throw mt.create("no-app",{appName:me});return Z}function Nn(){return Array.from(ce.values())}function ir(me){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,h.Z)(function*(me){const Z=me.name;ce.has(Z)&&(ce.delete(Z),yield Promise.all(me.container.getProviders().map(we=>we.delete())),me.isDeleted=!0)})).apply(this,arguments)}function Vn(me,Z,we){var He;let ut=null!==(He=fe[me])&&void 0!==He?He:me;we&&(ut+=`-${we}`);const Et=ut.match(/\s|\//),mn=Z.match(/\s|\//);if(Et||mn){const G=[`Unable to register library "${ut}" with version "${Z}":`];return Et&&G.push(`library name "${ut}" contains illegal characters (whitespace or "/")`),Et&&mn&&G.push("and"),mn&&G.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void V.warn(G.join(" "))}tt(new B.wA(`${ut}-version`,()=>({library:ut,version:Z}),"VERSION"))}function bn(me,Z){if(null!==me&&"function"!=typeof me)throw mt.create("invalid-log-argument");(0,R.Am)(me,Z)}function nr(me){(0,R.Ub)(me)}const Hr="firebase-heartbeat-database",wt=1,Ct="firebase-heartbeat-store";let Rt=null;function Pt(){return Rt||(Rt=(0,se.X3)(Hr,wt,{upgrade:(me,Z)=>{0===Z&&me.createObjectStore(Ct)}}).catch(me=>{throw mt.create("idb-open",{originalErrorMessage:me.message})})),Rt}function pn(){return(pn=(0,h.Z)(function*(me){try{return yield(yield Pt()).transaction(Ct).objectStore(Ct).get(Sr(me))}catch(Z){if(Z instanceof Y.ZR)V.warn(Z.message);else{const we=mt.create("idb-get",{originalErrorMessage:Z?.message});V.warn(we.message)}}})).apply(this,arguments)}function Kt(me,Z){return gn.apply(this,arguments)}function gn(){return(gn=(0,h.Z)(function*(me,Z){try{const He=(yield Pt()).transaction(Ct,"readwrite");yield He.objectStore(Ct).put(Z,Sr(me)),yield He.done}catch(we){if(we instanceof Y.ZR)V.warn(we.message);else{const He=mt.create("idb-set",{originalErrorMessage:we?.message});V.warn(He.message)}}})).apply(this,arguments)}function Sr(me){return`${me.name}!${me.options.appId}`}class Xt{constructor(Z){this.container=Z,this._heartbeatsCache=null;const we=this.container.getProvider("app").getImmediate();this._storage=new sr(we),this._heartbeatsCachePromise=this._storage.read().then(He=>(this._heartbeatsCache=He,He))}triggerHeartbeat(){var Z=this;return(0,h.Z)(function*(){const He=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ut=cn();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==ut&&!Z._heartbeatsCache.heartbeats.some(Et=>Et.date===ut))return Z._heartbeatsCache.heartbeats.push({date:ut,agent:He}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(Et=>{const mn=new Date(Et.date).valueOf();return Date.now()-mn<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,h.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const we=cn(),{heartbeatsToSend:He,unsentEntries:ut}=function Er(me,Z=1024){const we=[];let He=me.slice();for(const ut of me){const Et=we.find(mn=>mn.agent===ut.agent);if(Et){if(Et.dates.push(ut.date),lr(we)>Z){Et.dates.pop();break}}else if(we.push({agent:ut.agent,dates:[ut.date]}),lr(we)>Z){we.pop();break}He=He.slice(1)}return{heartbeatsToSend:we,unsentEntries:He}}(Z._heartbeatsCache.heartbeats),Et=(0,Y.L)(JSON.stringify({version:2,heartbeats:He}));return Z._heartbeatsCache.lastSentHeartbeatDate=we,ut.length>0?(Z._heartbeatsCache.heartbeats=ut,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),Et})()}}function cn(){return(new Date).toISOString().substring(0,10)}class sr{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,h.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function pr(me){return pn.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var we=this;return(0,h.Z)(function*(){var He;if(yield we._canUseIndexedDBPromise){const Et=yield we.read();return Kt(we.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Et.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var we=this;return(0,h.Z)(function*(){var He;if(yield we._canUseIndexedDBPromise){const Et=yield we.read();return Kt(we.app,{lastSentHeartbeatDate:null!==(He=Z.lastSentHeartbeatDate)&&void 0!==He?He:Et.lastSentHeartbeatDate,heartbeats:[...Et.heartbeats,...Z.heartbeats]})}})()}}function lr(me){return(0,Y.L)(JSON.stringify({version:2,heartbeats:me})).length}!function Un(me){tt(new B.wA("platform-logger",Z=>new ve(Z),"PRIVATE")),tt(new B.wA("heartbeat",Z=>new Xt(Z),"PRIVATE")),Vn(Oe,"0.9.19",me),Vn(Oe,"0.9.19","esm2017"),Vn("fire-js","")}("")},4537:(yt,Ae,M)=>{M.d(Ae,{H0:()=>Oe,wA:()=>R});var h=M(5861),B=M(9058);class R{constructor(V,z,ne){this.name=V,this.instanceFactory=z,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const Y="[DEFAULT]";class se{constructor(V,z){this.name=V,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const z=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(z)){const ne=new B.BH;if(this.instancesDeferred.set(z,ne),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:z});Ue&&ne.resolve(Ue)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(V){var z;const ne=this.normalizeInstanceIdentifier(V?.identifier),Ue=null!==(z=V?.optional)&&void 0!==z&&z;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Ee){if(Ue)return null;throw Ee}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function _e(he){return"EAGER"===he.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:Y})}catch{}for(const[z,ne]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(z);try{const Ee=this.getOrInitializeService({instanceIdentifier:Ue});ne.resolve(Ee)}catch{}}}}clearInstance(V=Y){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,h.Z)(function*(){const z=Array.from(V.instances.values());yield Promise.all([...z.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...z.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=Y){return this.instances.has(V)}getOptions(V=Y){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:z={}}=V,ne=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:ne,options:z});for(const[Ee,Ye]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Ee)&&Ye.resolve(Ue);return Ue}onInit(V,z){var ne;const Ue=this.normalizeInstanceIdentifier(z),Ee=null!==(ne=this.onInitCallbacks.get(Ue))&&void 0!==ne?ne:new Set;Ee.add(V),this.onInitCallbacks.set(Ue,Ee);const Ye=this.instances.get(Ue);return Ye&&V(Ye,Ue),()=>{Ee.delete(V)}}invokeOnInitCallbacks(V,z){const ne=this.onInitCallbacks.get(z);if(ne)for(const Ue of ne)try{Ue(V,z)}catch{}}getOrInitializeService({instanceIdentifier:V,options:z={}}){let ne=this.instances.get(V);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(he=V,he===Y?void 0:he),options:z}),this.instances.set(V,ne),this.instancesOptions.set(V,z),this.invokeOnInitCallbacks(ne,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,ne)}catch{}var he;return ne||null}normalizeInstanceIdentifier(V=Y){return this.component?this.component.multipleInstances?V:Y:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const z=this.getProvider(V.name);if(z.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);z.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const z=new se(V,this);return this.providers.set(V,z),z}getProviders(){return Array.from(this.providers.values())}}},2591:(yt,Ae,M)=>{var h=M(5861),B=M(4303),R=M(4537),Y=M(9058);const se=($,re)=>re.some(xe=>$ instanceof xe);let ve,_e;const V=new WeakMap,z=new WeakMap,ne=new WeakMap,Ue=new WeakMap,Ee=new WeakMap;let We={get($,re,xe){if($ instanceof IDBTransaction){if("done"===re)return z.get($);if("objectStoreNames"===re)return $.objectStoreNames||ne.get($);if("store"===re)return xe.objectStoreNames[1]?void 0:xe.objectStore(xe.objectStoreNames[0])}return ee($[re])},set:($,re,xe)=>($[re]=xe,!0),has:($,re)=>$ instanceof IDBTransaction&&("done"===re||"store"===re)||re in $};function ft($){return"function"==typeof $?function ht($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...re){return $.apply(De(this),re),ee(V.get(this))}:function(...re){return ee($.apply(De(this),re))}:function(re,...xe){const pt=$.call(De(this),re,...xe);return ne.set(pt,re.sort?re.sort():[re]),ee(pt)}}($):($ instanceof IDBTransaction&&function ke($){if(z.has($))return;const re=new Promise((xe,pt)=>{const wn=()=>{$.removeEventListener("complete",En),$.removeEventListener("error",en),$.removeEventListener("abort",en)},En=()=>{xe(),wn()},en=()=>{pt($.error||new DOMException("AbortError","AbortError")),wn()};$.addEventListener("complete",En),$.addEventListener("error",en),$.addEventListener("abort",en)});z.set($,re)}($),se($,function Oe(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,We):$)}function ee($){if($ instanceof IDBRequest)return function Ye($){const re=new Promise((xe,pt)=>{const wn=()=>{$.removeEventListener("success",En),$.removeEventListener("error",en)},En=()=>{xe(ee($.result)),wn()},en=()=>{pt($.error),wn()};$.addEventListener("success",En),$.addEventListener("error",en)});return re.then(xe=>{xe instanceof IDBCursor&&V.set(xe,$)}).catch(()=>{}),Ee.set(re,$),re}($);if(Ue.has($))return Ue.get($);const re=ft($);return re!==$&&(Ue.set($,re),Ee.set(re,$)),re}const De=$=>Ee.get($),Be=["get","getKey","getAll","getAllKeys","count"],k=["put","add","delete","clear"],te=new Map;function Ce($,re){if(!($ instanceof IDBDatabase)||re in $||"string"!=typeof re)return;if(te.get(re))return te.get(re);const xe=re.replace(/FromIndex$/,""),pt=re!==xe,wn=k.includes(xe);if(!(xe in(pt?IDBIndex:IDBObjectStore).prototype)||!wn&&!Be.includes(xe))return;const En=function(){var en=(0,h.Z)(function*(rr,...dr){const xr=this.transaction(rr,wn?"readwrite":"readonly");let os=xr.store;return pt&&(os=os.index(dr.shift())),(yield Promise.all([os[xe](...dr),wn&&xr.done]))[0]});return function(dr){return en.apply(this,arguments)}}();return te.set(re,En),En}!function Se($){We=$(We)}($=>({...$,get:(re,xe,pt)=>Ce(re,xe)||$.get(re,xe,pt),has:(re,xe)=>!!Ce(re,xe)||$.has(re,xe)}));const it="@firebase/installations",Lt="0.6.4",$t=1e4,Ht=`w:${Lt}`,hn="FIS_v2",Jt="https://firebaseinstallations.googleapis.com/v1",zn=36e5,oe=new Y.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Te($){return $ instanceof Y.ZR&&$.code.includes("request-failed")}function Ge({projectId:$}){return`${Jt}/projects/${$}/installations`}function tt($){return{token:$.token,requestStatus:2,expiresIn:jn($.expiresIn),creationTime:Date.now()}}function qe($,re){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,h.Z)(function*($,re){const pt=(yield re.json()).error;return oe.create("request-failed",{requestName:$,serverCode:pt.code,serverMessage:pt.message,serverStatus:pt.status})})).apply(this,arguments)}function bt({apiKey:$}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$})}function mt($){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*($){const re=yield $();return re.status>=500&&re.status<600?$():re})).apply(this,arguments)}function jn($){return Number($.replace("s","000"))}function Nn(){return(Nn=(0,h.Z)(function*({appConfig:$,heartbeatServiceProvider:re},{fid:xe}){const pt=Ge($),wn=bt($),En=re.getImmediate({optional:!0});if(En){const xr=yield En.getHeartbeatsHeader();xr&&wn.append("x-firebase-client",xr)}const rr={method:"POST",headers:wn,body:JSON.stringify({fid:xe,authVersion:hn,appId:$.appId,sdkVersion:Ht})},dr=yield mt(()=>fetch(pt,rr));if(dr.ok){const xr=yield dr.json();return{fid:xr.fid||xe,registrationStatus:2,refreshToken:xr.refreshToken,authToken:tt(xr.authToken)}}throw yield qe("Create Installation",dr)})).apply(this,arguments)}function ir($){return new Promise(re=>{setTimeout(re,$)})}const Vn=/^[cdef][\w-]{21}$/,bn="";function nr(){try{const $=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues($),$[0]=112+$[0]%16;const xe=function Hr($){return function Kn($){return btoa(String.fromCharCode(...$)).replace(/\+/g,"-").replace(/\//g,"_")}($).substr(0,22)}($);return Vn.test(xe)?xe:bn}catch{return bn}}function wt($){return`${$.appName}!${$.appId}`}const Ct=new Map;function Rt($,re){const xe=wt($);pn(xe,re),function Kt($,re){const xe=function Sr(){return!gn&&"BroadcastChannel"in self&&(gn=new BroadcastChannel("[Firebase] FID Change"),gn.onmessage=$=>{pn($.data.key,$.data.fid)}),gn}();xe&&xe.postMessage({key:$,fid:re}),function sn(){0===Ct.size&&gn&&(gn.close(),gn=null)}()}(xe,re)}function pn($,re){const xe=Ct.get($);if(xe)for(const pt of xe)pt(re)}let gn=null;const hi="firebase-installations-database",Xt=1,cn="firebase-installations-store";let Er=null;function sr(){return Er||(Er=function ue($,re,{blocked:xe,upgrade:pt,blocking:wn,terminated:En}={}){const en=indexedDB.open($,re),rr=ee(en);return pt&&en.addEventListener("upgradeneeded",dr=>{pt(ee(en.result),dr.oldVersion,dr.newVersion,ee(en.transaction))}),xe&&en.addEventListener("blocked",()=>xe()),rr.then(dr=>{En&&dr.addEventListener("close",()=>En()),wn&&dr.addEventListener("versionchange",()=>wn())}).catch(()=>{}),rr}(hi,Xt,{upgrade:($,re)=>{0===re&&$.createObjectStore(cn)}})),Er}function lr($,re){return Un.apply(this,arguments)}function Un(){return(Un=(0,h.Z)(function*($,re){const xe=wt($),wn=(yield sr()).transaction(cn,"readwrite"),En=wn.objectStore(cn),en=yield En.get(xe);return yield En.put(re,xe),yield wn.done,(!en||en.fid!==re.fid)&&Rt($,re.fid),re})).apply(this,arguments)}function me($){return Z.apply(this,arguments)}function Z(){return(Z=(0,h.Z)(function*($){const re=wt($),pt=(yield sr()).transaction(cn,"readwrite");yield pt.objectStore(cn).delete(re),yield pt.done})).apply(this,arguments)}function we($,re){return He.apply(this,arguments)}function He(){return(He=(0,h.Z)(function*($,re){const xe=wt($),wn=(yield sr()).transaction(cn,"readwrite"),En=wn.objectStore(cn),en=yield En.get(xe),rr=re(en);return void 0===rr?yield En.delete(xe):yield En.put(rr,xe),yield wn.done,rr&&(!en||en.fid!==rr.fid)&&Rt($,rr.fid),rr})).apply(this,arguments)}function ut($){return Et.apply(this,arguments)}function Et(){return Et=(0,h.Z)(function*($){let re;const xe=yield we($.appConfig,pt=>{const wn=function mn($){return Re($||{fid:nr(),registrationStatus:0})}(pt),En=function G($,re){if(0===re.registrationStatus){if(!navigator.onLine)return{installationEntry:re,registrationPromise:Promise.reject(oe.create("app-offline"))};const xe={fid:re.fid,registrationStatus:1,registrationTime:Date.now()},pt=function H($,re){return N.apply(this,arguments)}($,xe);return{installationEntry:xe,registrationPromise:pt}}return 1===re.registrationStatus?{installationEntry:re,registrationPromise:P($)}:{installationEntry:re}}($,wn);return re=En.registrationPromise,En.installationEntry});return xe.fid===bn?{installationEntry:yield re}:{installationEntry:xe,registrationPromise:re}}),Et.apply(this,arguments)}function N(){return N=(0,h.Z)(function*($,re){try{const xe=yield function vn($,re){return Nn.apply(this,arguments)}($,re);return lr($.appConfig,xe)}catch(xe){throw Te(xe)&&409===xe.customData.serverCode?yield me($.appConfig):yield lr($.appConfig,{fid:re.fid,registrationStatus:0}),xe}}),N.apply(this,arguments)}function P($){return S.apply(this,arguments)}function S(){return(S=(0,h.Z)(function*($){let re=yield J($.appConfig);for(;1===re.registrationStatus;)yield ir(100),re=yield J($.appConfig);if(0===re.registrationStatus){const{installationEntry:xe,registrationPromise:pt}=yield ut($);return pt||xe}return re})).apply(this,arguments)}function J($){return we($,re=>{if(!re)throw oe.create("installation-not-found");return Re(re)})}function Re($){return function Qe($){return 1===$.registrationStatus&&$.registrationTime+$t<Date.now()}($)?{fid:$.fid,registrationStatus:0}:$}function st(){return(st=(0,h.Z)(function*({appConfig:$,heartbeatServiceProvider:re},xe){const pt=function yn($,{fid:re}){return`${Ge($)}/${re}/authTokens:generate`}($,xe),wn=function rn($,{refreshToken:re}){const xe=bt($);return xe.append("Authorization",function Ln($){return`${hn} ${$}`}(re)),xe}($,xe),En=re.getImmediate({optional:!0});if(En){const xr=yield En.getHeartbeatsHeader();xr&&wn.append("x-firebase-client",xr)}const rr={method:"POST",headers:wn,body:JSON.stringify({installation:{sdkVersion:Ht,appId:$.appId}})},dr=yield mt(()=>fetch(pt,rr));if(dr.ok)return tt(yield dr.json());throw yield qe("Generate Auth Token",dr)})).apply(this,arguments)}function Vt($){return _n.apply(this,arguments)}function _n(){return _n=(0,h.Z)(function*($,re=!1){let xe;const pt=yield we($.appConfig,En=>{if(!ot(En))throw oe.create("not-registered");const en=En.authToken;if(!re&&function Ot($){return 2===$.requestStatus&&!function ct($){const re=Date.now();return re<$.creationTime||$.creationTime+$.expiresIn<re+zn}($)}(en))return En;if(1===en.requestStatus)return xe=function Yt($,re){return gr.apply(this,arguments)}($,re),En;{if(!navigator.onLine)throw oe.create("app-offline");const rr=function Tn($){const re={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},$),{authToken:re})}(En);return xe=function de($,re){return nt.apply(this,arguments)}($,rr),rr}});return xe?yield xe:pt.authToken}),_n.apply(this,arguments)}function gr(){return(gr=(0,h.Z)(function*($,re){let xe=yield K($.appConfig);for(;1===xe.authToken.requestStatus;)yield ir(100),xe=yield K($.appConfig);const pt=xe.authToken;return 0===pt.requestStatus?Vt($,re):pt})).apply(this,arguments)}function K($){return we($,re=>{if(!ot(re))throw oe.create("not-registered");return function Yr($){return 1===$.requestStatus&&$.requestTime+$t<Date.now()}(re.authToken)?Object.assign(Object.assign({},re),{authToken:{requestStatus:0}}):re})}function nt(){return nt=(0,h.Z)(function*($,re){try{const xe=yield function xt($,re){return st.apply(this,arguments)}($,re),pt=Object.assign(Object.assign({},re),{authToken:xe});return yield lr($.appConfig,pt),xe}catch(xe){if(!Te(xe)||401!==xe.customData.serverCode&&404!==xe.customData.serverCode){const pt=Object.assign(Object.assign({},re),{authToken:{requestStatus:0}});yield lr($.appConfig,pt)}else yield me($.appConfig);throw xe}}),nt.apply(this,arguments)}function ot($){return void 0!==$&&2===$.registrationStatus}function qi(){return(qi=(0,h.Z)(function*($){const re=$,{installationEntry:xe,registrationPromise:pt}=yield ut(re);return pt?pt.catch(console.error):Vt(re).catch(console.error),xe.fid})).apply(this,arguments)}function ln(){return ln=(0,h.Z)(function*($,re=!1){const xe=$;return yield function Ps($){return Ys.apply(this,arguments)}(xe),(yield Vt(xe,re)).token}),ln.apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*($){const{registrationPromise:re}=yield ut($);re&&(yield re)})).apply(this,arguments)}function Sa($){return oe.create("missing-app-config-values",{valueName:$})}const bo="installations",Ma=$=>{const re=$.getProvider("app").getImmediate(),xe=function _s($){if(!$||!$.options)throw Sa("App Configuration");if(!$.name)throw Sa("App Name");const re=["projectId","apiKey","appId"];for(const xe of re)if(!$.options[xe])throw Sa(xe);return{appName:$.name,projectId:$.options.projectId,apiKey:$.options.apiKey,appId:$.options.appId}}(re);return{app:re,appConfig:xe,heartbeatServiceProvider:(0,B._getProvider)(re,"heartbeat"),_delete:()=>Promise.resolve()}},oa=$=>{const re=$.getProvider("app").getImmediate(),xe=(0,B._getProvider)(re,bo).getImmediate();return{getId:()=>function Qr($){return qi.apply(this,arguments)}(xe),getToken:wn=>function Mr($){return ln.apply(this,arguments)}(xe,wn)}};(function Bu(){(0,B._registerComponent)(new R.wA(bo,Ma,"PUBLIC")),(0,B._registerComponent)(new R.wA("installations-internal",oa,"PRIVATE"))})(),(0,B.registerVersion)(it,Lt),(0,B.registerVersion)(it,Lt,"esm2017")},7879:(yt,Ae,M)=>{M.d(Ae,{Am:()=>he,Ub:()=>Oe,Yd:()=>_e,in:()=>B});const h=[];var B=function(V){return V[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",V}(B||{});const R={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},Y=B.INFO,se={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},ve=(V,z,...ne)=>{if(z<V.logLevel)return;const Ue=(new Date).toISOString(),Ee=se[z];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Ee](`[${Ue}]  ${V.name}:`,...ne)};class _e{constructor(z){this.name=z,this._logLevel=Y,this._logHandler=ve,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in B))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?R[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...z),this._logHandler(this,B.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...z),this._logHandler(this,B.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,B.INFO,...z),this._logHandler(this,B.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,B.WARN,...z),this._logHandler(this,B.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...z),this._logHandler(this,B.ERROR,...z)}}function Oe(V){h.forEach(z=>{z.setLogLevel(V)})}function he(V,z){for(const ne of h){let Ue=null;z&&z.level&&(Ue=R[z.level]),ne.userLogHandler=null===V?null:(Ee,Ye,...ke)=>{const We=ke.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch{return null}}).filter(Se=>Se).join(" ");Ye>=(Ue??Ee.logLevel)&&V({level:B[Ye].toLowerCase(),message:We,args:ke,type:Ee.name})}}}},2650:(yt,Ae,M)=>{M.d(Ae,{Gb:()=>J,LP:()=>Vt,pQ:()=>Yt,ps:()=>gr});var h=M(5861),R=(M(2591),M(4537)),Y=M(9240),se=M(9058),ve=M(4303);const _e="/firebase-messaging-sw.js",Oe="/firebase-cloud-messaging-push-scope",he="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",V="https://fcmregistrations.googleapis.com/v1",z="google.c.a.c_id",ne="google.c.a.c_l",Ue="google.c.a.ts";var ke=function(K){return K.PUSH_RECEIVED="push-received",K.NOTIFICATION_CLICKED="notification-clicked",K}(ke||{});function We(K){const de=new Uint8Array(K);return btoa(String.fromCharCode(...de)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Se(K){const nt=(K+"=".repeat((4-K.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ot=atob(nt),Ot=new Uint8Array(ot.length);for(let ct=0;ct<ot.length;++ct)Ot[ct]=ot.charCodeAt(ct);return Ot}const ht="fcm_token_details_db",ft=5,ee="fcm_token_object_Store";function ue(){return ue=(0,h.Z)(function*(K){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ct=>ct.name).includes(ht))return null;let de=null;return(yield(0,Y.X3)(ht,ft,{upgrade:(ot=(0,h.Z)(function*(Ot,ct,Tn,Yr){var Qr;if(ct<2||!Ot.objectStoreNames.contains(ee))return;const qi=Yr.objectStore(ee),Mr=yield qi.index("fcmSenderId").get(K);if(yield qi.clear(),Mr)if(2===ct){const ln=Mr;if(!ln.auth||!ln.p256dh||!ln.endpoint)return;de={token:ln.fcmToken,createTime:null!==(Qr=ln.createTime)&&void 0!==Qr?Qr:Date.now(),subscriptionOptions:{auth:ln.auth,p256dh:ln.p256dh,endpoint:ln.endpoint,swScope:ln.swScope,vapidKey:"string"==typeof ln.vapidKey?ln.vapidKey:We(ln.vapidKey)}}}else if(3===ct){const ln=Mr;de={token:ln.fcmToken,createTime:ln.createTime,subscriptionOptions:{auth:We(ln.auth),p256dh:We(ln.p256dh),endpoint:ln.endpoint,swScope:ln.swScope,vapidKey:We(ln.vapidKey)}}}else if(4===ct){const ln=Mr;de={token:ln.fcmToken,createTime:ln.createTime,subscriptionOptions:{auth:We(ln.auth),p256dh:We(ln.p256dh),endpoint:ln.endpoint,swScope:ln.swScope,vapidKey:We(ln.vapidKey)}}}}),function(ct,Tn,Yr,Qr){return ot.apply(this,arguments)})})).close(),yield(0,Y.Lj)(ht),yield(0,Y.Lj)("fcm_vapid_details_db"),yield(0,Y.Lj)("undefined"),function Me(K){if(!K||!K.subscriptionOptions)return!1;const{subscriptionOptions:de}=K;return"number"==typeof K.createTime&&K.createTime>0&&"string"==typeof K.token&&K.token.length>0&&"string"==typeof de.auth&&de.auth.length>0&&"string"==typeof de.p256dh&&de.p256dh.length>0&&"string"==typeof de.endpoint&&de.endpoint.length>0&&"string"==typeof de.swScope&&de.swScope.length>0&&"string"==typeof de.vapidKey&&de.vapidKey.length>0}(de)?de:null;var ot}),ue.apply(this,arguments)}const Be="firebase-messaging-database",k=1,te="firebase-messaging-store";let Ce=null;function it(){return Ce||(Ce=(0,Y.X3)(Be,k,{upgrade:(K,de)=>{0===de&&K.createObjectStore(te)}})),Ce}function Lt(K){return $t.apply(this,arguments)}function $t(){return $t=(0,h.Z)(function*(K){const de=ae(K),ot=yield(yield it()).transaction(te).objectStore(te).get(de);if(ot)return ot;{const Ot=yield function De(K){return ue.apply(this,arguments)}(K.appConfig.senderId);if(Ot)return yield Ht(K,Ot),Ot}}),$t.apply(this,arguments)}function Ht(K,de){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(K,de){const nt=ae(K),Ot=(yield it()).transaction(te,"readwrite");return yield Ot.objectStore(te).put(de,nt),yield Ot.done,de})).apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(K){const de=ae(K),ot=(yield it()).transaction(te,"readwrite");yield ot.objectStore(te).delete(de),yield ot.done})).apply(this,arguments)}function ae({appConfig:K}){return K.appId}const ce=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function oe(K,de){return Te.apply(this,arguments)}function Te(){return(Te=(0,h.Z)(function*(K,de){const nt=yield rn(K),ot=fn(de),Ot={method:"POST",headers:nt,body:JSON.stringify(ot)};let ct;try{ct=yield(yield fetch(bt(K.appConfig),Ot)).json()}catch(Tn){throw ce.create("token-subscribe-failed",{errorInfo:Tn?.toString()})}if(ct.error)throw ce.create("token-subscribe-failed",{errorInfo:ct.error.message});if(!ct.token)throw ce.create("token-subscribe-no-token");return ct.token})).apply(this,arguments)}function tt(){return(tt=(0,h.Z)(function*(K,de){const nt=yield rn(K),ot=fn(de.subscriptionOptions),Ot={method:"PATCH",headers:nt,body:JSON.stringify(ot)};let ct;try{ct=yield(yield fetch(`${bt(K.appConfig)}/${de.token}`,Ot)).json()}catch(Tn){throw ce.create("token-update-failed",{errorInfo:Tn?.toString()})}if(ct.error)throw ce.create("token-update-failed",{errorInfo:ct.error.message});if(!ct.token)throw ce.create("token-update-no-token");return ct.token})).apply(this,arguments)}function qe(K,de){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,h.Z)(function*(K,de){const ot={method:"DELETE",headers:yield rn(K)};try{const ct=yield(yield fetch(`${bt(K.appConfig)}/${de}`,ot)).json();if(ct.error)throw ce.create("token-unsubscribe-failed",{errorInfo:ct.error.message})}catch(Ot){throw ce.create("token-unsubscribe-failed",{errorInfo:Ot?.toString()})}})).apply(this,arguments)}function bt({projectId:K}){return`${V}/projects/${K}/registrations`}function rn(K){return mt.apply(this,arguments)}function mt(){return(mt=(0,h.Z)(function*({appConfig:K,installations:de}){const nt=yield de.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":K.apiKey,"x-goog-firebase-installations-auth":`FIS ${nt}`})})).apply(this,arguments)}function fn({p256dh:K,auth:de,endpoint:nt,vapidKey:ot}){const Ot={web:{endpoint:nt,auth:de,p256dh:K}};return ot!==he&&(Ot.web.applicationPubKey=ot),Ot}const jn=6048e5;function vn(){return vn=(0,h.Z)(function*(K){const de=yield function Hr(K,de){return wt.apply(this,arguments)}(K.swRegistration,K.vapidKey),nt={vapidKey:K.vapidKey,swScope:K.swRegistration.scope,endpoint:de.endpoint,auth:We(de.getKey("auth")),p256dh:We(de.getKey("p256dh"))},ot=yield Lt(K.firebaseDependencies);if(ot){if(function Ct(K,de){return de.vapidKey===K.vapidKey&&de.endpoint===K.endpoint&&de.auth===K.auth&&de.p256dh===K.p256dh}(ot.subscriptionOptions,nt))return Date.now()>=ot.createTime+jn?function Kn(K,de){return Vn.apply(this,arguments)}(K,{token:ot.token,createTime:Date.now(),subscriptionOptions:nt}):ot.token;try{yield qe(K.firebaseDependencies,ot.token)}catch(Ot){console.warn(Ot)}return bn(K.firebaseDependencies,nt)}return bn(K.firebaseDependencies,nt)}),vn.apply(this,arguments)}function Nn(K){return ir.apply(this,arguments)}function ir(){return ir=(0,h.Z)(function*(K){const de=yield Lt(K.firebaseDependencies);de&&(yield qe(K.firebaseDependencies,de.token),yield function Jt(K){return zn.apply(this,arguments)}(K.firebaseDependencies));const nt=yield K.swRegistration.pushManager.getSubscription();return!nt||nt.unsubscribe()}),ir.apply(this,arguments)}function Vn(){return Vn=(0,h.Z)(function*(K,de){try{const nt=yield function Ge(K,de){return tt.apply(this,arguments)}(K.firebaseDependencies,de),ot=Object.assign(Object.assign({},de),{token:nt,createTime:Date.now()});return yield Ht(K.firebaseDependencies,ot),nt}catch(nt){throw yield Nn(K),nt}}),Vn.apply(this,arguments)}function bn(K,de){return nr.apply(this,arguments)}function nr(){return(nr=(0,h.Z)(function*(K,de){const ot={token:yield oe(K,de),createTime:Date.now(),subscriptionOptions:de};return yield Ht(K,ot),ot.token})).apply(this,arguments)}function wt(){return(wt=(0,h.Z)(function*(K,de){return(yield K.pushManager.getSubscription())||K.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Se(de)})})).apply(this,arguments)}function Rt(K){const de={from:K.from,collapseKey:K.collapse_key,messageId:K.fcmMessageId};return function Pt(K,de){if(!de.notification)return;K.notification={};const nt=de.notification.title;nt&&(K.notification.title=nt);const ot=de.notification.body;ot&&(K.notification.body=ot);const Ot=de.notification.image;Ot&&(K.notification.image=Ot);const ct=de.notification.icon;ct&&(K.notification.icon=ct)}(de,K),function pr(K,de){de.data&&(K.data=de.data)}(de,K),function pn(K,de){var nt,ot,Ot,ct,Tn;if(!(de.fcmOptions||null!==(nt=de.notification)&&void 0!==nt&&nt.click_action))return;K.fcmOptions={};const Yr=null!==(Ot=null===(ot=de.fcmOptions)||void 0===ot?void 0:ot.link)&&void 0!==Ot?Ot:null===(ct=de.notification)||void 0===ct?void 0:ct.click_action;Yr&&(K.fcmOptions.link=Yr);const Qr=null===(Tn=de.fcmOptions)||void 0===Tn?void 0:Tn.analytics_label;Qr&&(K.fcmOptions.analyticsLabel=Qr)}(de,K),de}function gn(K,de){const nt=[];for(let ot=0;ot<K.length;ot++)nt.push(K.charAt(ot)),ot<de.length&&nt.push(de.charAt(ot));return nt.join("")}function sn(K){return ce.create("missing-app-config-values",{valueName:K})}gn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hi{constructor(de,nt,ot){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ot=function Sr(K){if(!K||!K.options)throw sn("App Configuration Object");if(!K.name)throw sn("App Name");const de=["projectId","apiKey","appId","messagingSenderId"],{options:nt}=K;for(const ot of de)if(!nt[ot])throw sn(ot);return{appName:K.name,projectId:nt.projectId,apiKey:nt.apiKey,appId:nt.appId,senderId:nt.messagingSenderId}}(de);this.firebaseDependencies={app:de,appConfig:Ot,installations:nt,analyticsProvider:ot}}_delete(){return Promise.resolve()}}function Xt(K){return cn.apply(this,arguments)}function cn(){return(cn=(0,h.Z)(function*(K){try{K.swRegistration=yield navigator.serviceWorker.register(_e,{scope:Oe}),K.swRegistration.update().catch(()=>{})}catch(de){throw ce.create("failed-service-worker-registration",{browserErrorMessage:de?.message})}})).apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(K,de){if(!de&&!K.swRegistration&&(yield Xt(K)),de||!K.swRegistration){if(!(de instanceof ServiceWorkerRegistration))throw ce.create("invalid-sw-registration");K.swRegistration=de}})).apply(this,arguments)}function Un(){return(Un=(0,h.Z)(function*(K,de){de?K.vapidKey=de:K.vapidKey||(K.vapidKey=he)})).apply(this,arguments)}function me(K,de){return Z.apply(this,arguments)}function Z(){return Z=(0,h.Z)(function*(K,de){if(!navigator)throw ce.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ce.create("permission-blocked");return yield function lr(K,de){return Un.apply(this,arguments)}(K,de?.vapidKey),yield function Er(K,de){return sr.apply(this,arguments)}(K,de?.serviceWorkerRegistration),function Ln(K){return vn.apply(this,arguments)}(K)}),Z.apply(this,arguments)}function He(){return(He=(0,h.Z)(function*(K,de,nt){const ot=function ut(K){switch(K){case ke.NOTIFICATION_CLICKED:return"notification_open";case ke.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(de);(yield K.firebaseDependencies.analyticsProvider.get()).logEvent(ot,{message_id:nt[z],message_name:nt[ne],message_time:nt[Ue],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function mn(){return mn=(0,h.Z)(function*(K,de){const nt=de.data;if(!nt.isFirebaseMessaging)return;K.onMessageHandler&&nt.messageType===ke.PUSH_RECEIVED&&("function"==typeof K.onMessageHandler?K.onMessageHandler(Rt(nt)):K.onMessageHandler.next(Rt(nt)));const ot=nt.data;(function Kt(K){return"object"==typeof K&&!!K&&z in K})(ot)&&"1"===ot["google.c.a.e"]&&(yield function we(K,de,nt){return He.apply(this,arguments)}(K,nt.messageType,ot))}),mn.apply(this,arguments)}const G="@firebase/messaging",H="0.12.4",N=K=>{const de=new hi(K.getProvider("app").getImmediate(),K.getProvider("installations-internal").getImmediate(),K.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",nt=>function Et(K,de){return mn.apply(this,arguments)}(de,nt)),de},P=K=>{const de=K.getProvider("messaging").getImmediate();return{getToken:ot=>me(de,ot)}};function J(){return Re.apply(this,arguments)}function Re(){return(Re=(0,h.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function xt(){return(xt=(0,h.Z)(function*(K){if(!navigator)throw ce.create("only-available-in-window");return K.swRegistration||(yield Xt(K)),Nn(K)})).apply(this,arguments)}function Vt(K,de){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(K,de){return me(K=(0,se.m9)(K),de)})).apply(this,arguments)}function Yt(K){return function Qe(K){return xt.apply(this,arguments)}(K=(0,se.m9)(K))}function gr(K,de){return function st(K,de){if(!navigator)throw ce.create("only-available-in-window");return K.onMessageHandler=de,()=>{K.onMessageHandler=null}}(K=(0,se.m9)(K),de)}!function S(){(0,ve._registerComponent)(new R.wA("messaging",N,"PUBLIC")),(0,ve._registerComponent)(new R.wA("messaging-internal",P,"PRIVATE")),(0,ve.registerVersion)(G,H),(0,ve.registerVersion)(G,H,"esm2017")}()},9240:(yt,Ae,M)=>{M.d(Ae,{Lj:()=>ee,X3:()=>ft});var h=M(5861);const B=(k,te)=>te.some(Ce=>k instanceof Ce);let R,Y;const _e=new WeakMap,Oe=new WeakMap,he=new WeakMap,V=new WeakMap,z=new WeakMap;let Ee={get(k,te,Ce){if(k instanceof IDBTransaction){if("done"===te)return Oe.get(k);if("objectStoreNames"===te)return k.objectStoreNames||he.get(k);if("store"===te)return Ce.objectStoreNames[1]?void 0:Ce.objectStore(Ce.objectStoreNames[0])}return Se(k[te])},set:(k,te,Ce)=>(k[te]=Ce,!0),has:(k,te)=>k instanceof IDBTransaction&&("done"===te||"store"===te)||te in k};function We(k){return"function"==typeof k?function ke(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...te){return k.apply(ht(this),te),Se(_e.get(this))}:function(...te){return Se(k.apply(ht(this),te))}:function(te,...Ce){const it=k.call(ht(this),te,...Ce);return he.set(it,te.sort?te.sort():[te]),Se(it)}}(k):(k instanceof IDBTransaction&&function Ue(k){if(Oe.has(k))return;const te=new Promise((Ce,it)=>{const Lt=()=>{k.removeEventListener("complete",$t),k.removeEventListener("error",Ht),k.removeEventListener("abort",Ht)},$t=()=>{Ce(),Lt()},Ht=()=>{it(k.error||new DOMException("AbortError","AbortError")),Lt()};k.addEventListener("complete",$t),k.addEventListener("error",Ht),k.addEventListener("abort",Ht)});Oe.set(k,te)}(k),B(k,function se(){return R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ee):k)}function Se(k){if(k instanceof IDBRequest)return function ne(k){const te=new Promise((Ce,it)=>{const Lt=()=>{k.removeEventListener("success",$t),k.removeEventListener("error",Ht)},$t=()=>{Ce(Se(k.result)),Lt()},Ht=()=>{it(k.error),Lt()};k.addEventListener("success",$t),k.addEventListener("error",Ht)});return te.then(Ce=>{Ce instanceof IDBCursor&&_e.set(Ce,k)}).catch(()=>{}),z.set(te,k),te}(k);if(V.has(k))return V.get(k);const te=We(k);return te!==k&&(V.set(k,te),z.set(te,k)),te}const ht=k=>z.get(k);function ft(k,te,{blocked:Ce,upgrade:it,blocking:Lt,terminated:$t}={}){const Ht=indexedDB.open(k,te),hn=Se(Ht);return it&&Ht.addEventListener("upgradeneeded",Jt=>{it(Se(Ht.result),Jt.oldVersion,Jt.newVersion,Se(Ht.transaction))}),Ce&&Ht.addEventListener("blocked",()=>Ce()),hn.then(Jt=>{$t&&Jt.addEventListener("close",()=>$t()),Lt&&Jt.addEventListener("versionchange",()=>Lt())}).catch(()=>{}),hn}function ee(k,{blocked:te}={}){const Ce=indexedDB.deleteDatabase(k);return te&&Ce.addEventListener("blocked",()=>te()),Se(Ce).then(()=>{})}const De=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],Me=new Map;function Be(k,te){if(!(k instanceof IDBDatabase)||te in k||"string"!=typeof te)return;if(Me.get(te))return Me.get(te);const Ce=te.replace(/FromIndex$/,""),it=te!==Ce,Lt=ue.includes(Ce);if(!(Ce in(it?IDBIndex:IDBObjectStore).prototype)||!Lt&&!De.includes(Ce))return;const $t=function(){var Ht=(0,h.Z)(function*(hn,...Jt){const zn=this.transaction(hn,Lt?"readwrite":"readonly");let ae=zn.store;return it&&(ae=ae.index(Jt.shift())),(yield Promise.all([ae[Ce](...Jt),Lt&&zn.done]))[0]});return function(Jt){return Ht.apply(this,arguments)}}();return Me.set(te,$t),$t}!function Ye(k){Ee=k(Ee)}(k=>({...k,get:(te,Ce,it)=>Be(te,Ce)||k.get(te,Ce,it),has:(te,Ce)=>!!Be(te,Ce)||k.has(te,Ce)}))},1878:(yt,Ae,M)=>{M.d(Ae,{X3:()=>ft});var h=M(5861);const B=(k,te)=>te.some(Ce=>k instanceof Ce);let R,Y;const _e=new WeakMap,Oe=new WeakMap,he=new WeakMap,V=new WeakMap,z=new WeakMap;let Ee={get(k,te,Ce){if(k instanceof IDBTransaction){if("done"===te)return Oe.get(k);if("objectStoreNames"===te)return k.objectStoreNames||he.get(k);if("store"===te)return Ce.objectStoreNames[1]?void 0:Ce.objectStore(Ce.objectStoreNames[0])}return Se(k[te])},set:(k,te,Ce)=>(k[te]=Ce,!0),has:(k,te)=>k instanceof IDBTransaction&&("done"===te||"store"===te)||te in k};function We(k){return"function"==typeof k?function ke(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...te){return k.apply(ht(this),te),Se(_e.get(this))}:function(...te){return Se(k.apply(ht(this),te))}:function(te,...Ce){const it=k.call(ht(this),te,...Ce);return he.set(it,te.sort?te.sort():[te]),Se(it)}}(k):(k instanceof IDBTransaction&&function Ue(k){if(Oe.has(k))return;const te=new Promise((Ce,it)=>{const Lt=()=>{k.removeEventListener("complete",$t),k.removeEventListener("error",Ht),k.removeEventListener("abort",Ht)},$t=()=>{Ce(),Lt()},Ht=()=>{it(k.error||new DOMException("AbortError","AbortError")),Lt()};k.addEventListener("complete",$t),k.addEventListener("error",Ht),k.addEventListener("abort",Ht)});Oe.set(k,te)}(k),B(k,function se(){return R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ee):k)}function Se(k){if(k instanceof IDBRequest)return function ne(k){const te=new Promise((Ce,it)=>{const Lt=()=>{k.removeEventListener("success",$t),k.removeEventListener("error",Ht)},$t=()=>{Ce(Se(k.result)),Lt()},Ht=()=>{it(k.error),Lt()};k.addEventListener("success",$t),k.addEventListener("error",Ht)});return te.then(Ce=>{Ce instanceof IDBCursor&&_e.set(Ce,k)}).catch(()=>{}),z.set(te,k),te}(k);if(V.has(k))return V.get(k);const te=We(k);return te!==k&&(V.set(k,te),z.set(te,k)),te}const ht=k=>z.get(k);function ft(k,te,{blocked:Ce,upgrade:it,blocking:Lt,terminated:$t}={}){const Ht=indexedDB.open(k,te),hn=Se(Ht);return it&&Ht.addEventListener("upgradeneeded",Jt=>{it(Se(Ht.result),Jt.oldVersion,Jt.newVersion,Se(Ht.transaction),Jt)}),Ce&&Ht.addEventListener("blocked",Jt=>Ce(Jt.oldVersion,Jt.newVersion,Jt)),hn.then(Jt=>{$t&&Jt.addEventListener("close",()=>$t()),Lt&&Jt.addEventListener("versionchange",zn=>Lt(zn.oldVersion,zn.newVersion,zn))}).catch(()=>{}),hn}const De=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],Me=new Map;function Be(k,te){if(!(k instanceof IDBDatabase)||te in k||"string"!=typeof te)return;if(Me.get(te))return Me.get(te);const Ce=te.replace(/FromIndex$/,""),it=te!==Ce,Lt=ue.includes(Ce);if(!(Ce in(it?IDBIndex:IDBObjectStore).prototype)||!Lt&&!De.includes(Ce))return;const $t=function(){var Ht=(0,h.Z)(function*(hn,...Jt){const zn=this.transaction(hn,Lt?"readwrite":"readonly");let ae=zn.store;return it&&(ae=ae.index(Jt.shift())),(yield Promise.all([ae[Ce](...Jt),Lt&&zn.done]))[0]});return function(Jt){return Ht.apply(this,arguments)}}();return Me.set(te,$t),$t}!function Ye(k){Ee=k(Ee)}(k=>({...k,get:(te,Ce,it)=>Be(te,Ce)||k.get(te,Ce,it),has:(te,Ce)=>!!Be(te,Ce)||k.has(te,Ce)}))},5861:(yt,Ae,M)=>{function h(R,Y,se,ve,_e,Oe,he){try{var V=R[Oe](he),z=V.value}catch(ne){return void se(ne)}V.done?Y(z):Promise.resolve(z).then(ve,_e)}function B(R){return function(){var Y=this,se=arguments;return new Promise(function(ve,_e){var Oe=R.apply(Y,se);function he(z){h(Oe,ve,_e,he,V,"next",z)}function V(z){h(Oe,ve,_e,he,V,"throw",z)}he(void 0)})}}M.d(Ae,{Z:()=>B})},7582:(yt,Ae,M)=>{function Y(ae,fe){var ce={};for(var oe in ae)Object.prototype.hasOwnProperty.call(ae,oe)&&fe.indexOf(oe)<0&&(ce[oe]=ae[oe]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Te=0;for(oe=Object.getOwnPropertySymbols(ae);Te<oe.length;Te++)fe.indexOf(oe[Te])<0&&Object.prototype.propertyIsEnumerable.call(ae,oe[Te])&&(ce[oe[Te]]=ae[oe[Te]])}return ce}function ne(ae,fe,ce,oe){return new(ce||(ce=Promise))(function(Ge,tt){function qe(rn){try{bt(oe.next(rn))}catch(mt){tt(mt)}}function Wt(rn){try{bt(oe.throw(rn))}catch(mt){tt(mt)}}function bt(rn){rn.done?Ge(rn.value):function Te(Ge){return Ge instanceof ce?Ge:new ce(function(tt){tt(Ge)})}(rn.value).then(qe,Wt)}bt((oe=oe.apply(ae,fe||[])).next())})}function ee(ae){return this instanceof ee?(this.v=ae,this):new ee(ae)}function De(ae,fe,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,oe=ce.apply(ae,fe||[]),Ge=[];return Te={},tt("next"),tt("throw"),tt("return"),Te[Symbol.asyncIterator]=function(){return this},Te;function tt(fn){oe[fn]&&(Te[fn]=function(jn){return new Promise(function(Ln,vn){Ge.push([fn,jn,Ln,vn])>1||qe(fn,jn)})})}function qe(fn,jn){try{!function Wt(fn){fn.value instanceof ee?Promise.resolve(fn.value.v).then(bt,rn):mt(Ge[0][2],fn)}(oe[fn](jn))}catch(Ln){mt(Ge[0][3],Ln)}}function bt(fn){qe("next",fn)}function rn(fn){qe("throw",fn)}function mt(fn,jn){fn(jn),Ge.shift(),Ge.length&&qe(Ge[0][0],Ge[0][1])}}function Me(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,fe=ae[Symbol.asyncIterator];return fe?fe.call(ae):(ae=function ke(ae){var fe="function"==typeof Symbol&&Symbol.iterator,ce=fe&&ae[fe],oe=0;if(ce)return ce.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&oe>=ae.length&&(ae=void 0),{value:ae&&ae[oe++],done:!ae}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),ce={},oe("next"),oe("throw"),oe("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function oe(Ge){ce[Ge]=ae[Ge]&&function(tt){return new Promise(function(qe,Wt){!function Te(Ge,tt,qe,Wt){Promise.resolve(Wt).then(function(bt){Ge({value:bt,done:qe})},tt)}(qe,Wt,(tt=ae[Ge](tt)).done,tt.value)})}}}M.d(Ae,{FC:()=>De,KL:()=>Me,_T:()=>Y,mG:()=>ne,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},yt=>{yt(yt.s=359)}]);