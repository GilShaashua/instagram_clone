"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(st,be,F)=>{F.d(be,{Dh:()=>Pe,GT:()=>ge,cc:()=>Oe,on:()=>Me,pX:()=>ne,xv:()=>Fe});var c=F(5879),V=F(120);st=F.hmd(st);const L=["ngOnDestroy"],ne=(De,Te,tt,ot={})=>new Proxy(De,{get:(ee,de)=>tt.runOutsideAngular(()=>{var re;if(De[de])return!(null===(re=ot?.spy)||void 0===re)&&re.get&&ot.spy.get(de,De[de]),De[de];if(L.indexOf(de)>-1)return()=>{};const he=Te.toPromise().then(Re=>{const j=Re&&Re[de];return"function"==typeof j?j.bind(Re):j&&j.then?j.then(we=>tt.run(()=>we)):tt.run(()=>j)});return new Proxy(()=>{},{get:(Re,j)=>he[j],apply:(Re,j,we)=>he.then(Ue=>{var lt;const en=Ue&&Ue(...we);return!(null===(lt=ot?.spy)||void 0===lt)&&lt.apply&&ot.spy.apply(de,we,en),en})})})}),ge=(De,Te)=>{Te.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(ot=>{Object.defineProperty(De.prototype,ot,Object.getOwnPropertyDescriptor(tt.prototype||tt,ot))})})};class Ie{constructor(Te){return Te}}const Pe=new c.OlP("angularfire2.app.options"),Fe=new c.OlP("angularfire2.app.name");function Me(De,Te,tt){const ee="object"==typeof tt&&tt||{};ee.name=ee.name||"string"==typeof tt&&tt||"[DEFAULT]";const re=V.Z.apps.filter(he=>he&&he.name===ee.name)[0]||Te.runOutsideAngular(()=>V.Z.initializeApp(De,ee));try{JSON.stringify(De)!==JSON.stringify(re.options)&&B("error",`${re.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ie(re)}const B=(De,...Te)=>{(0,c.X6Q)()&&typeof console<"u"&&console[De](...Te)};function Oe(De,Te,tt,ot,ee){const[,de,re]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===De)||[];if(de)return function xe(De,Te){try{return De.toString()===Te.toString()}catch{return De===Te}}(ee,re)||(Ce("error",`${Te} was already initialized on the ${tt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:ee,was:re})),de;{const he=ot();return globalThis.\u0275AngularfireInstanceCache.push([De,he,ee]),he}}const Je=!!st.hot,Ce=(De,...Te)=>{(0,c.X6Q)()&&typeof console<"u"&&console[De](...Te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6710:(st,be,F)=>{F.d(be,{$:()=>Oh,A:()=>G,D:()=>xe,I:()=>yh,J:()=>$c,L:()=>je,N:()=>Vt,P:()=>Cn,Q:()=>za,R:()=>am,U:()=>Lg,V:()=>sa,W:()=>bs,X:()=>Ys,Y:()=>Dh,Z:()=>Sh,_:()=>Gc,a:()=>Pu,a0:()=>CE,a1:()=>Ln,a2:()=>OA,a3:()=>kA,a4:()=>$v,a5:()=>Mo,a6:()=>Wc,a7:()=>Nh,a8:()=>Rh,a9:()=>Hv,aA:()=>j,aB:()=>nc,aC:()=>it,aD:()=>tr,aE:()=>ko,aF:()=>rl,aG:()=>Oo,aH:()=>Fn,aL:()=>Yc,aO:()=>qi,aa:()=>jg,ab:()=>zv,ac:()=>$g,ad:()=>qv,ae:()=>Tu,af:()=>Wv,ai:()=>IE,aj:()=>NA,ak:()=>Kv,an:()=>Ah,ao:()=>Kc,aq:()=>Hh,ar:()=>xu,as:()=>Ue,at:()=>Ke,au:()=>me,av:()=>ee,aw:()=>Zi,ax:()=>nf,ay:()=>Qt,az:()=>de,b:()=>qh,c:()=>mi,d:()=>Ru,e:()=>Xa,f:()=>Uu,g:()=>yi,h:()=>kt,i:()=>Ts,j:()=>u0,k:()=>ao,l:()=>cm,m:()=>sc,o:()=>fa,p:()=>Fe,r:()=>ut,s:()=>gi,u:()=>ri});var c=F(5861),V=F(9058),L=F(7592),ne=F(7582),ge=F(7879),Ie=F(4537);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Je=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ce=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Te=new ge.Yd("@firebase/auth");function ot(w,...m){Te.logLevel<=ge.in.ERROR&&Te.error(`Auth (${L.SDK_VERSION}): ${w}`,...m)}function ee(w,...m){throw Re(w,...m)}function de(w,...m){return Re(w,...m)}function re(w,m,_){const I=Object.assign(Object.assign({},Je()),{[m]:_});return new V.LL("auth","Firebase",I).create(m,{appName:w.name})}function he(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&ee(w,"argument-error"),re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Re(w,...m){if("string"!=typeof w){const _=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return Ce.create(w,...m)}function j(w,m,..._){if(!w)throw Re(m,..._)}function we(w){const m="INTERNAL ASSERTION FAILED: "+w;throw ot(m),new Error(m)}function Ue(w,m){w||we(m)}function lt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function en(){return"http:"===Gn()||"https:"===Gn()}function Gn(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class un{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ue(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function yn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(en()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zr(w,m){Ue(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class ie{static initialize(m,_,I){this.fetchImpl=m,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},le=new un(3e4,6e4);function se(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function pe(w,m,_,I){return ke.apply(this,arguments)}function ke(){return(ke=(0,c.Z)(function*(w,m,_,I,D={}){return Qe(w,D,(0,c.Z)(function*(){let P={},Z={};I&&("GET"===m?Z=I:P={body:JSON.stringify(I)});const oe=(0,V.xO)(Object.assign({key:w.config.apiKey},Z)).slice(1),Le=yield w._getAdditionalHeaders();return Le["Content-Type"]="application/json",w.languageCode&&(Le["X-Firebase-Locale"]=w.languageCode),ie.fetch()(Yt(w,w.config.apiHost,_,oe),Object.assign({method:m,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Qe(w,m,_){return Be.apply(this,arguments)}function Be(){return(Be=(0,c.Z)(function*(w,m,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},ce),m);try{const D=new ft(w),P=yield Promise.race([_(),D.promise]);D.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw nn(w,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const oe=P.ok?Z.errorMessage:Z.error.message,[Le,He]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw nn(w,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Le)throw nn(w,"email-already-in-use",Z);if("USER_DISABLED"===Le)throw nn(w,"user-disabled",Z);const nt=I[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw re(w,nt,He);ee(w,nt)}}catch(D){if(D instanceof V.ZR)throw D;ee(w,"network-request-failed",{message:String(D)})}})).apply(this,arguments)}function tn(w,m,_,I){return ht.apply(this,arguments)}function ht(){return(ht=(0,c.Z)(function*(w,m,_,I,D={}){const P=yield pe(w,m,_,I,D);return"mfaPendingCredential"in P&&ee(w,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Yt(w,m,_,I){const D=`${m}${_}?${I}`;return w.config.emulator?Zr(w.config,D):`${w.config.apiScheme}://${D}`}class ft{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(de(this.auth,"network-request-failed")),le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nn(w,m,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const D=de(w,m,I);return D.customData._tokenResponse=_,D}function In(){return(In=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function qn(){return(qn=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ur(){return(Ur=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function _r(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function ws(){return(ws=(0,c.Z)(function*(w,m=!1){const _=(0,V.m9)(w),I=yield _.getIdToken(m),D=mt(I);j(D&&D.exp&&D.auth_time&&D.iat,_.auth,"internal-error");const P="object"==typeof D.firebase?D.firebase:void 0,Z=P?.sign_in_provider;return{claims:D,token:I,authTime:_r(dt(D.auth_time)),issuedAtTime:_r(dt(D.iat)),expirationTime:_r(dt(D.exp)),signInProvider:Z||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(w){return 1e3*Number(w)}function mt(w){const[m,_,I]=w.split(".");if(void 0===m||void 0===_||void 0===I)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,V.tV)(_);return D?JSON.parse(D):(ot("Failed to decode base64 JWT payload"),null)}catch(D){return ot("Caught error parsing JWT payload as JSON",D?.toString()),null}}function sn(w,m){return di.apply(this,arguments)}function di(){return(di=(0,c.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(I){throw I instanceof V.ZR&&function Yr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}class Rt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const D=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,c.Z)(function*(){yield _.iteration()}),I)}iteration(){var m=this;return(0,c.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class Nn{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=_r(this.lastLoginAt),this.creationTime=_r(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Is(w){return Zt.apply(this,arguments)}function Zt(){return Zt=(0,c.Z)(function*(w){var m;const _=w.auth,I=yield w.getIdToken(),D=yield sn(w,function Mi(w,m){return Ur.apply(this,arguments)}(_,{idToken:I}));j(D?.users.length,_,"internal-error");const P=D.users[0];w._notifyReloadListener(P);const Z=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?function Hi(w){return w.map(m=>{var{providerId:_}=m,I=(0,ne._T)(m,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(P.providerUserInfo):[],oe=function Rn(w,m){return[...w.filter(I=>!m.some(D=>D.providerId===I.providerId)),...m]}(w.providerData,Z),nt=!!w.isAnonymous&&!(w.email&&P.passwordHash||oe?.length),Nt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:oe,metadata:new Nn(P.createdAt,P.lastLoginAt),isAnonymous:nt};Object.assign(w,Nt)}),Zt.apply(this,arguments)}function Bt(){return(Bt=(0,c.Z)(function*(w){const m=(0,V.m9)(w);yield Is(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function as(){return(as=(0,c.Z)(function*(w,m){const _=yield Qe(w,{},(0,c.Z)(function*(){const I=(0,V.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:D,apiKey:P}=w.config,Z=Yt(w,D,"/v1/token",`key=${P}`),oe=yield w._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(Z,{method:"POST",headers:oe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class yr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){j(m.idToken,"internal-error"),j(typeof m.idToken<"u","internal-error"),j(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Tt(w){const m=mt(w);return j(m,"internal-error"),j(typeof m.exp<"u","internal-error"),j(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var I=this;return(0,c.Z)(function*(){return j(!I.accessToken||I.refreshToken,m,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var I=this;return(0,c.Z)(function*(){const{accessToken:D,refreshToken:P,expiresIn:Z}=yield function os(w,m){return as.apply(this,arguments)}(m,_);I.updateTokensAndExpiration(D,P,Number(Z))})()}updateTokensAndExpiration(m,_,I){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,_){const{refreshToken:I,accessToken:D,expirationTime:P}=_,Z=new yr;return I&&(j("string"==typeof I,"internal-error",{appName:m}),Z.refreshToken=I),D&&(j("string"==typeof D,"internal-error",{appName:m}),Z.accessToken=D),P&&(j("number"==typeof P,"internal-error",{appName:m}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new yr,this.toJSON())}_performRefresh(){return we("not implemented")}}function Ge(w,m){j("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class _e{constructor(m){var{uid:_,auth:I,stsTokenManager:D}=m,P=(0,ne._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Nn(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,c.Z)(function*(){const I=yield sn(_,_.stsTokenManager.getToken(_.auth,m));return j(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(m){return function Kr(w){return ws.apply(this,arguments)}(this,m)}reload(){return function Io(w){return Bt.apply(this,arguments)}(this)}_assign(m){this!==m&&(j(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new _e(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var I=this;return(0,c.Z)(function*(){let D=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),D=!0),_&&(yield Is(I)),yield I.auth._persistUserIfCurrent(I),D&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,c.Z)(function*(){const _=yield m.getIdToken();return yield sn(m,function kn(w,m){return In.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var I,D,P,Z,oe,Le,He,nt;const Nt=null!==(I=_.displayName)&&void 0!==I?I:void 0,Vr=null!==(D=_.email)&&void 0!==D?D:void 0,Ki=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,co=null!==(Z=_.photoURL)&&void 0!==Z?Z:void 0,Cm=null!==(oe=_.tenantId)&&void 0!==oe?oe:void 0,al=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,pa=null!==(He=_.createdAt)&&void 0!==He?He:void 0,ga=null!==(nt=_.lastLoginAt)&&void 0!==nt?nt:void 0,{uid:Ku,emailVerified:cl,isAnonymous:Yi,providerData:cc,stsTokenManager:As}=_;j(Ku&&As,m,"internal-error");const ll=yr.fromJSON(this.name,As);j("string"==typeof Ku,m,"internal-error"),Ge(Nt,m.name),Ge(Vr,m.name),j("boolean"==typeof cl,m,"internal-error"),j("boolean"==typeof Yi,m,"internal-error"),Ge(Ki,m.name),Ge(co,m.name),Ge(Cm,m.name),Ge(al,m.name),Ge(pa,m.name),Ge(ga,m.name);const Bo=new _e({uid:Ku,auth:m,email:Vr,emailVerified:cl,displayName:Nt,isAnonymous:Yi,photoURL:co,phoneNumber:Ki,tenantId:Cm,stsTokenManager:ll,createdAt:pa,lastLoginAt:ga});return cc&&Array.isArray(cc)&&(Bo.providerData=cc.map(Yu=>Object.assign({},Yu))),al&&(Bo._redirectEventId=al),Bo}static _fromIdTokenResponse(m,_,I=!1){return(0,c.Z)(function*(){const D=new yr;D.updateFromServerResponse(_);const P=new _e({uid:_.localId,auth:m,stsTokenManager:D,isAnonymous:I});return yield Is(P),P})()}}const Xe=new Map;function it(w){Ue(w instanceof Function,"Expected a class definition");let m=Xe.get(w);return m?(Ue(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Xe.set(w,m),m)}const Vt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(_,I){var D=this;return(0,c.Z)(function*(){D.storage[_]=I})()}_get(_){var I=this;return(0,c.Z)(function*(){const D=I.storage[_];return void 0===D?null:D})()}_remove(_){var I=this;return(0,c.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function tr(w,m,_){return`firebase:${w}:${m}:${_}`}class H{constructor(m,_,I){this.persistence=m,this.auth=_,this.userKey=I;const{config:D,name:P}=this.auth;this.fullUserKey=tr(this.userKey,D.apiKey,P),this.fullPersistenceKey=tr("persistence",D.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,c.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?_e._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,c.Z)(function*(){if(_.persistence===m)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,I="authUser"){return(0,c.Z)(function*(){if(!_.length)return new H(it(Vt),m,I);const D=(yield Promise.all(_.map(function(){var He=(0,c.Z)(function*(nt){if(yield nt._isAvailable())return nt});return function(nt){return He.apply(this,arguments)}}()))).filter(He=>He);let P=D[0]||it(Vt);const Z=tr(I,m.config.apiKey,m.name);let oe=null;for(const He of _)try{const nt=yield He._get(Z);if(nt){const Nt=_e._fromJSON(m,nt);He!==P&&(oe=Nt),P=He;break}}catch{}const Le=D.filter(He=>He._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],oe&&(yield P._set(Z,oe.toJSON())),yield Promise.all(_.map(function(){var He=(0,c.Z)(function*(nt){if(nt!==P)try{yield nt._remove(Z)}catch{}});return function(nt){return He.apply(this,arguments)}}())),new H(P,m,I)):new H(P,m,I)})()}}function $(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(K(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Ve(m))return"Blackberry";if(vt(m))return"Webos";if(k(m))return"Safari";if((m.includes("chrome/")||x(m))&&!m.includes("edge/"))return"Chrome";if(me(m))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function O(w=(0,V.z$)()){return/firefox\//i.test(w)}function k(w=(0,V.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function x(w=(0,V.z$)()){return/crios\//i.test(w)}function K(w=(0,V.z$)()){return/iemobile/i.test(w)}function me(w=(0,V.z$)()){return/android/i.test(w)}function Ve(w=(0,V.z$)()){return/blackberry/i.test(w)}function vt(w=(0,V.z$)()){return/webos/i.test(w)}function Ke(w=(0,V.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Qt(w=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function xt(w=(0,V.z$)()){return Ke(w)||me(w)||vt(w)||Ve(w)||/windows phone/i.test(w)||K(w)}function Bc(w,m=[]){let _;switch(w){case"Browser":_=$((0,V.z$)());break;case"Worker":_=`${$((0,V.z$)())}-${w}`;break;default:_=w}const I=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${L.SDK_VERSION}/${I}`}function bo(){return(bo=(0,c.Z)(function*(w){return(yield pe(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zs(w,m){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,c.Z)(function*(w,m){return pe(w,"GET","/v2/recaptchaConfig",se(w,m))})).apply(this,arguments)}function Kt(w){return void 0!==w&&void 0!==w.getResponse}function ra(w){return void 0!==w&&void 0!==w.enterprise}class ja{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function fu(w){return new Promise((m,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=m,I.onerror=D=>{const P=de("internal-error");P.customData=D,_(P)},I.type="text/javascript",I.charset="UTF-8",function hu(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(I)})}function Gs(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Di{constructor(m){this.type="recaptcha-enterprise",this.auth=Fn(m)}verify(m="verify",_=!1){var I=this;return(0,c.Z)(function*(){function P(){return P=(0,c.Z)(function*(oe){if(!_){if(null==oe.tenantId&&null!=oe._agentRecaptchaConfig)return oe._agentRecaptchaConfig.siteKey;if(null!=oe.tenantId&&void 0!==oe._tenantRecaptchaConfigs[oe.tenantId])return oe._tenantRecaptchaConfigs[oe.tenantId].siteKey}return new Promise(function(){var Le=(0,c.Z)(function*(He,nt){zs(oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Nt=>{if(void 0!==Nt.recaptchaKey){const Vr=new ja(Nt);return null==oe.tenantId?oe._agentRecaptchaConfig=Vr:oe._tenantRecaptchaConfigs[oe.tenantId]=Vr,He(Vr.siteKey)}nt(new Error("recaptcha Enterprise site key undefined"))}).catch(Nt=>{nt(Nt)})});return function(He,nt){return Le.apply(this,arguments)}}())}),P.apply(this,arguments)}function Z(oe,Le,He){const nt=window.grecaptcha;ra(nt)?nt.enterprise.ready(()=>{nt.enterprise.execute(oe,{action:m}).then(Nt=>{Le(Nt)}).catch(()=>{Le("NO_RECAPTCHA")})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((oe,Le)=>{(function D(oe){return P.apply(this,arguments)})(I.auth).then(He=>{if(!_&&ra(window.grecaptcha))Z(He,oe,Le);else{if(typeof window>"u")return void Le(new Error("RecaptchaVerifier is only supported in browser"));fu("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{Z(He,oe,Le)}).catch(nt=>{Le(nt)})}}).catch(He=>{Le(He)})})})()}}function qs(w,m,_){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,c.Z)(function*(w,m,_,I=!1){const D=new Di(w);let P;try{P=yield D.verify(_)}catch{P=yield D.verify(_,!0)}const Z=Object.assign({},m);return Object.assign(Z,I?{captchaResp:P}:{captchaResponse:P}),Object.assign(Z,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Z,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Z})).apply(this,arguments)}class jc{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const I=P=>new Promise((Z,oe)=>{try{Z(m(P))}catch(Le){oe(Le)}});I.onAbort=_,this.queue.push(I);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,c.Z)(function*(){if(_.auth.currentUser===m)return;const I=[];try{for(const D of _.queue)yield D(m),D.onAbort&&I.push(D.onAbort)}catch(D){I.reverse();for(const P of I)try{P()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:D?.message})}})()}}class Si{constructor(m,_,I,D){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=I,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xv(this),this.idTokenSubscription=new xv(this),this.beforeStateQueue=new jc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ce,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(m,_){var I=this;return _&&(this._popupRedirectResolver=it(_)),this._initializationPromise=this.queue((0,c.Z)(function*(){var D,P;if(!I._deleted&&(I.persistenceManager=yield H.create(I,m),!I._deleted)){if(null!==(D=I._popupRedirectResolver)&&void 0!==D&&D._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(P=I.currentUser)||void 0===P?void 0:P.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,c.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,c.Z)(function*(){var I;const D=yield _.assertedPersistence.getCurrentUser();let P=D,Z=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const oe=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,Le=P?._redirectEventId,He=yield _.tryRedirectSignIn(m);(!oe||oe===Le)&&He?.user&&(P=He.user,Z=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield _.beforeStateQueue.runMiddleware(P)}catch(oe){P=D,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(oe))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return j(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,c.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,c.Z)(function*(){try{yield Is(m)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function wn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,c.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,c.Z)(function*(){const I=m?(0,V.m9)(m):null;return I&&j(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(m,_=!1){var I=this;return(0,c.Z)(function*(){if(!I._deleted)return m&&j(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,c.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,c.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,c.Z)(function*(){yield _.assertedPersistence.setPersistence(it(m))}))}initializeRecaptchaConfig(){var m=this;return(0,c.Z)(function*(){const _=yield zs(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new ja(_);null==m.tenantId?m._agentRecaptchaConfig=I:m._tenantRecaptchaConfigs[m.tenantId]=I,I.emailPasswordEnabled&&new Di(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new V.LL("auth","Firebase",m())}onAuthStateChanged(m,_,I){return this.registerStateListener(this.authStateSubscription,m,_,I)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,I){return this.registerStateListener(this.idTokenSubscription,m,_,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var I=this;return(0,c.Z)(function*(){const D=yield I.getOrInitRedirectPersistenceManager(_);return null===m?D.removeCurrentUser():D.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,c.Z)(function*(){if(!_.redirectPersistenceManager){const I=m&&it(m)||_._popupRedirectResolver;j(I,_,"argument-error"),_.redirectPersistenceManager=yield H.create(_,[it(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,c.Z)(function*(){var I,D;return _._isInitialized&&(yield _.queue((0,c.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===m?_._currentUser:(null===(D=_.redirectUser)||void 0===D?void 0:D._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,c.Z)(function*(){if(m===_.currentUser)return _.queue((0,c.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,I,D){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,I,D):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,c.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Bc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,c.Z)(function*(){var _;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const D=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();D&&(I["X-Firebase-Client"]=D);const P=yield m._getAppCheckToken();return P&&(I["X-Firebase-AppCheck"]=P),I})()}_getAppCheckToken(){var m=this;return(0,c.Z)(function*(){var _;const I=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return I?.error&&function tt(w,...m){Te.logLevel<=ge.in.WARN&&Te.warn(`Auth (${L.SDK_VERSION}): ${w}`,...m)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Fn(w){return(0,V.m9)(w)}class xv{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yh(w,m,_){const I=Fn(w);j(I._canInitEmulator,I,"emulator-config-failed"),j(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const D=!!_?.disableWarnings,P=hi(m),{host:Z,port:oe}=function vh(w){const m=hi(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(I);if(D){const P=D[1];return{host:P,port:Ch(I.substr(P.length+1))}}{const[P,Z]=I.split(":");return{host:P,port:Ch(Z)}}}(m);I.config.emulator={url:`${P}//${Z}${null===oe?"":`:${oe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Z,port:oe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function Ov(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function hi(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function Ch(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class $c{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return we("not implemented")}_getIdTokenResponse(m){return we("not implemented")}_linkToIdToken(m,_){return we("not implemented")}_getReauthenticationResolver(m){return we("not implemented")}}function wh(w,m){return kg.apply(this,arguments)}function kg(){return(kg=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:resetPassword",se(w,m))})).apply(this,arguments)}function Ng(w,m){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ai(){return(Ai=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",se(w,m))})).apply(this,arguments)}function gu(w,m){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,c.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithPassword",se(w,m))})).apply(this,arguments)}function mu(w,m){return bh.apply(this,arguments)}function bh(){return(bh=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendOobCode",se(w,m))})).apply(this,arguments)}function Th(){return(Th=(0,c.Z)(function*(w,m){return mu(w,m)})).apply(this,arguments)}function _u(w,m){return yu.apply(this,arguments)}function yu(){return(yu=(0,c.Z)(function*(w,m){return mu(w,m)})).apply(this,arguments)}function vu(w,m){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,c.Z)(function*(w,m){return mu(w,m)})).apply(this,arguments)}function Dr(){return(Dr=(0,c.Z)(function*(w,m){return mu(w,m)})).apply(this,arguments)}function Qr(){return(Qr=(0,c.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}function Cu(){return(Cu=(0,c.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}class Eo extends $c{constructor(m,_,I,D=null){super("password",I),this._email=m,this._password=_,this._tenantId=D}static _fromEmailAndPassword(m,_){return new Eo(m,_,"password")}static _fromEmailAndCode(m,_,I=null){return new Eo(m,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,c.Z)(function*(){var I;switch(_.signInMethod){case"password":const D={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=m._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const P=yield qs(m,D,"signInWithPassword");return gu(m,P)}return gu(m,D).catch(function(){var P=(0,c.Z)(function*(Z){if("auth/missing-recaptcha-token"===Z.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const oe=yield qs(m,D,"signInWithPassword");return gu(m,oe)}return Promise.reject(Z)});return function(Z){return P.apply(this,arguments)}}());case"emailLink":return function Ha(w,m){return Qr.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:ee(m,"internal-error")}})()}_linkToIdToken(m,_){var I=this;return(0,c.Z)(function*(){switch(I.signInMethod){case"password":return Ng(m,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Fg(w,m){return Cu.apply(this,arguments)}(m,{idToken:_,email:I._email,oobCode:I._password});default:ee(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Ws(w,m){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,c.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithIdp",se(w,m))})).apply(this,arguments)}class je extends $c{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new je(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):ee("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:D}=_,P=(0,ne._T)(_,["providerId","signInMethod"]);if(!I||!D)return null;const Z=new je(I,D);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(m){return Ws(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,Ws(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Ws(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,V.xO)(_)}return m}}function fn(){return(fn=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendVerificationCode",se(w,m))})).apply(this,arguments)}function Zs(){return(Zs=(0,c.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m))})).apply(this,arguments)}function ia(){return(ia=(0,c.Z)(function*(w,m){const _=yield tn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m));if(_.temporaryProof)throw nn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Zn={USER_NOT_FOUND:"user-not-found"};function To(){return(To=(0,c.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Zn)})).apply(this,arguments)}class pt extends $c{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new pt({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new pt({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function xi(w,m){return Zs.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Sr(w,m){return ia.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Ks(w,m){return To.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:I,verificationCode:D}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:I,code:D}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:I,phoneNumber:D,temporaryProof:P}=m;return I||_||D||P?new pt({verificationId:_,verificationCode:I,phoneNumber:D,temporaryProof:P}):null}}class Pi{constructor(m){var _,I,D,P,Z,oe;const Le=(0,V.zd)((0,V.pd)(m)),He=null!==(_=Le.apiKey)&&void 0!==_?_:null,nt=null!==(I=Le.oobCode)&&void 0!==I?I:null,Nt=function Hc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Le.mode)&&void 0!==D?D:null);j(He&&nt&&Nt,"argument-error"),this.apiKey=He,this.operation=Nt,this.code=nt,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Le.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(m){const _=function kv(w){const m=(0,V.zd)((0,V.pd)(w)).link,_=m?(0,V.zd)((0,V.pd)(m)).deep_link_id:null,I=(0,V.zd)((0,V.pd)(w)).deep_link_id;return(I?(0,V.zd)((0,V.pd)(I)).link:null)||I||_||m||w}(m);try{return new Pi(_)}catch{return null}}}let za=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return Eo._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const D=Pi.parseLink(I);return j(D,"argument-error"),Eo._fromEmailAndCode(_,D.code,D.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Oi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Jr extends Oi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Ys extends Jr{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return j("providerId"in _&&"signInMethod"in _,"argument-error"),je._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return j(m.idToken||m.accessToken,"argument-error"),je._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Ys.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Ys.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:D,pendingToken:P,nonce:Z,providerId:oe}=m;if(!I&&!D&&!_&&!P||!oe)return null;try{return new Ys(oe)._credential({idToken:_,accessToken:I,nonce:Z,pendingToken:P})}catch{return null}}}let Lg=(()=>{class w extends Jr{constructor(){super("facebook.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),sa=(()=>{class w extends Jr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:D}=_;if(!I&&!D)return null;try{return w.credential(I,D)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),bs=(()=>{class w extends Jr{constructor(){super("github.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class qi extends $c{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Ws(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,Ws(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Ws(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:D,pendingToken:P}=_;return I&&D&&P&&I===D?new qi(I,P):null}static _create(m,_){return new qi(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Dh extends Oi{constructor(m){j(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Dh.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Dh.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=qi.fromJSON(m);return j(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:I}=m;if(!_||!I)return null;try{return qi._create(I,_)}catch{return null}}}let Sh=(()=>{class w extends Jr{constructor(){super("twitter.com")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:D}=_;if(!I||!D)return null;try{return w.credential(I,D)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function zc(w,m){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,c.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signUp",se(w,m))})).apply(this,arguments)}class ei{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,I,D=!1){return(0,c.Z)(function*(){const P=yield _e._fromIdTokenResponse(m,I,D),Z=Ga(I);return new ei({user:P,providerId:Z,_tokenResponse:I,operationType:_})})()}static _forOperation(m,_,I){return(0,c.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const D=Ga(I);return new ei({user:m,providerId:D,_tokenResponse:I,operationType:_})})()}}function Ga(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Gc(w){return cr.apply(this,arguments)}function cr(){return(cr=(0,c.Z)(function*(w){var m;const _=Fn(w);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new ei({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield zc(_,{returnSecureToken:!0}),D=yield ei._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(D.user),D})).apply(this,arguments)}class Ug extends V.ZR{constructor(m,_,I,D){var P;super(_.code,_.message),this.operationType=I,this.user=D,Object.setPrototypeOf(this,Ug.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,_,I,D){return new Ug(m,_,I,D)}}function fi(w,m,_,I){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Ug._fromErrorAndOperation(w,P,m,I):P})}function Br(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Ah(w,m){return Qs.apply(this,arguments)}function Qs(){return Qs=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w);yield qa(!0,_,m);const{providerUserInfo:I}=yield function rn(w,m){return qn.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),D=Br(I||[]);return _.providerData=_.providerData.filter(P=>D.has(P.providerId)),D.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Qs.apply(this,arguments)}function qc(w,m){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,c.Z)(function*(w,m,_=!1){const I=yield sn(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return ei._forOperation(w,"link",I)})).apply(this,arguments)}function qa(w,m,_){return xh.apply(this,arguments)}function xh(){return(xh=(0,c.Z)(function*(w,m,_){yield Is(m);const D=!1===w?"provider-already-linked":"no-such-provider";j(Br(m.providerData).has(_)===w,m.auth,D)})).apply(this,arguments)}function Bg(w,m){return Nv.apply(this,arguments)}function Nv(){return(Nv=(0,c.Z)(function*(w,m,_=!1){const{auth:I}=w,D="reauthenticate";try{const P=yield sn(w,fi(I,D,m,w),_);j(P.idToken,I,"internal-error");const Z=mt(P.idToken);j(Z,I,"internal-error");const{sub:oe}=Z;return j(w.uid===oe,I,"user-mismatch"),ei._forOperation(w,D,P)}catch(P){throw"auth/user-not-found"===P?.code&&ee(I,"user-mismatch"),P}})).apply(this,arguments)}function Rv(w,m){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,c.Z)(function*(w,m,_=!1){const I="signIn",D=yield fi(w,I,m),P=yield ei._fromIdTokenResponse(w,I,D);return _||(yield w._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Oh(w,m){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,c.Z)(function*(w,m){return Rv(Fn(w),m)})).apply(this,arguments)}function CE(w,m){return Fv.apply(this,arguments)}function Fv(){return(Fv=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w);return yield qa(!1,_,m.providerId),qc(_,m)})).apply(this,arguments)}function Ln(w,m){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,c.Z)(function*(w,m){return Bg((0,V.m9)(w),m)})).apply(this,arguments)}function Uv(){return(Uv=(0,c.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithCustomToken",se(w,m))})).apply(this,arguments)}function OA(w,m){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,c.Z)(function*(w,m){const _=Fn(w),I=yield function PA(w,m){return Uv.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),D=yield ei._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(D.user),D}),Bv.apply(this,arguments)}class kh{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Vv._fromServerResponse(m,_):"totpInfo"in _?Iu._fromServerResponse(m,_):ee(m,"internal-error")}}class Vv extends kh{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Vv(_)}}class Iu extends kh{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new Iu(_)}}function Wa(w,m,_){var I;j((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),j(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(j(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(j(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function kA(w,m,_){return jv.apply(this,arguments)}function jv(){return jv=(0,c.Z)(function*(w,m,_){var I;const D=Fn(w),P={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=D._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Z=yield qs(D,P,"getOobCode",!0);_&&Wa(D,Z,_),yield _u(D,Z)}else _&&Wa(D,P,_),yield _u(D,P).catch(function(){var Z=(0,c.Z)(function*(oe){if("auth/missing-recaptcha-token"!==oe.code)return Promise.reject(oe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Le=yield qs(D,P,"getOobCode",!0);_&&Wa(D,Le,_),yield _u(D,Le)}});return function(oe){return Z.apply(this,arguments)}}())}),jv.apply(this,arguments)}function $v(w,m,_){return Js.apply(this,arguments)}function Js(){return(Js=(0,c.Z)(function*(w,m,_){yield wh((0,V.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Mo(w,m){return bu.apply(this,arguments)}function bu(){return bu=(0,c.Z)(function*(w,m){yield function vE(w,m){return Ai.apply(this,arguments)}((0,V.m9)(w),{oobCode:m})}),bu.apply(this,arguments)}function Wc(w,m){return vr.apply(this,arguments)}function vr(){return(vr=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w),I=yield wh(_,{oobCode:m}),D=I.requestType;switch(j(D,_,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(I.mfaInfo,_,"internal-error");default:j(I.email,_,"internal-error")}let P=null;return I.mfaInfo&&(P=kh._fromServerResponse(Fn(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:P},operation:D}})).apply(this,arguments)}function Nh(w,m){return ti.apply(this,arguments)}function ti(){return(ti=(0,c.Z)(function*(w,m){const{data:_}=yield Wc((0,V.m9)(w),m);return _.email})).apply(this,arguments)}function Rh(w,m,_){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,c.Z)(function*(w,m,_){var I;const D=Fn(w),P={returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"};let Z;if(null!==(I=D._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const He=yield qs(D,P,"signUpPassword");Z=zc(D,He)}else Z=zc(D,P).catch(function(){var He=(0,c.Z)(function*(nt){if("auth/missing-recaptcha-token"===nt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Nt=yield qs(D,P,"signUpPassword");return zc(D,Nt)}return Promise.reject(nt)});return function(nt){return He.apply(this,arguments)}}());const oe=yield Z.catch(He=>Promise.reject(He)),Le=yield ei._fromIdTokenResponse(D,"signIn",oe);return yield D._updateCurrentUser(Le.user),Le}),Fh.apply(this,arguments)}function Hv(w,m,_){return Oh((0,V.m9)(w),za.credential(m,_))}function jg(w,m,_){return Za.apply(this,arguments)}function Za(){return Za=(0,c.Z)(function*(w,m,_){var I;const D=Fn(w),P={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function Z(oe,Le){j(Le.handleCodeInApp,D,"argument-error"),Le&&Wa(D,oe,Le)}if(null!==(I=D._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const oe=yield qs(D,P,"getOobCode",!0);Z(oe,_),yield vu(D,oe)}else Z(P,_),yield vu(D,P).catch(function(){var oe=(0,c.Z)(function*(Le){if("auth/missing-recaptcha-token"!==Le.code)return Promise.reject(Le);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield qs(D,P,"getOobCode",!0);Z(He,_),yield vu(D,He)}});return function(Le){return oe.apply(this,arguments)}}())}),Za.apply(this,arguments)}function zv(w,m){const _=Pi.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}function $g(w,m,_){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w),D=za.credentialWithLink(m,_||lt());return j(D._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Oh(I,D)})).apply(this,arguments)}function Lh(){return(Lh=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:createAuthUri",se(w,m))})).apply(this,arguments)}function qv(w,m){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,c.Z)(function*(w,m){const I={identifier:m,continueUri:en()?lt():"http://localhost"},{signinMethods:D}=yield function Gv(w,m){return Lh.apply(this,arguments)}((0,V.m9)(w),I);return D||[]}),Zc.apply(this,arguments)}function Tu(w,m){return Do.apply(this,arguments)}function Do(){return Do=(0,c.Z)(function*(w,m){const _=(0,V.m9)(w),D={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Wa(_.auth,D,m);const{email:P}=yield function Eh(w,m){return Th.apply(this,arguments)}(_.auth,D);P!==w.email&&(yield w.reload())}),Do.apply(this,arguments)}function Wv(w,m,_){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&Wa(I.auth,P,_);const{email:Z}=yield function Mr(w,m){return Dr.apply(this,arguments)}(I.auth,P);Z!==w.email&&(yield w.reload())}),Hg.apply(this,arguments)}function Zv(){return(Zv=(0,c.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function IE(w,m){return zg.apply(this,arguments)}function zg(){return zg=(0,c.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const I=(0,V.m9)(w),P={idToken:yield I.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},Z=yield sn(I,function wE(w,m){return Zv.apply(this,arguments)}(I.auth,P));I.displayName=Z.displayName||null,I.photoURL=Z.photoUrl||null;const oe=I.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=I.displayName,oe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Z)}),zg.apply(this,arguments)}function NA(w,m){return Uh((0,V.m9)(w),m,null)}function Kv(w,m){return Uh((0,V.m9)(w),null,m)}function Uh(w,m,_){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,c.Z)(function*(w,m,_){const{auth:I}=w,P={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const Z=yield sn(w,Ng(I,P));yield w._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Mu{constructor(m,_,I={}){this.isNewUser=m,this.providerId=_,this.profile=I}}class bE extends Mu{constructor(m,_,I,D){super(m,_,I),this.username=D}}class Du extends Mu{constructor(m,_){super(m,"facebook.com",_)}}class Yv extends bE{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Wg extends Mu{constructor(m,_){super(m,"google.com",_)}}class Bh extends bE{constructor(m,_,I){super(m,"twitter.com",_,I)}}function Kc(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function qg(w){var m,_;if(!w)return null;const{providerId:I}=w,D=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},P=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const Z=null===(_=null===(m=mt(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(Z)return new Mu(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!I)return null;switch(I){case"facebook.com":return new Du(P,D);case"github.com":return new Yv(P,D);case"google.com":return new Wg(P,D);case"twitter.com":return new Bh(P,D,w.screenName||null);case"custom":case"anonymous":return new Mu(P,null);default:return new Mu(P,I,D)}}(_)}class Xs{constructor(m,_,I){this.type=m,this.credential=_,this.auth=I}static _fromIdtoken(m,_){return new Xs("enroll",m,_)}static _fromMfaPendingCredential(m){return new Xs("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,I;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Xs._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return Xs._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Ka{constructor(m,_,I){this.session=m,this.hints=_,this.signInResolver=I}static _fromError(m,_){const I=Fn(m),D=_.customData._serverResponse,P=(D.mfaInfo||[]).map(oe=>kh._fromServerResponse(I,oe));j(D.mfaPendingCredential,I,"internal-error");const Z=Xs._fromMfaPendingCredential(D.mfaPendingCredential);return new Ka(Z,P,function(){var oe=(0,c.Z)(function*(Le){const He=yield Le._process(I,Z);delete D.mfaInfo,delete D.mfaPendingCredential;const nt=Object.assign(Object.assign({},D),{idToken:He.idToken,refreshToken:He.refreshToken});switch(_.operationType){case"signIn":const Nt=yield ei._fromIdTokenResponse(I,_.operationType,nt);return yield I._updateCurrentUser(Nt.user),Nt;case"reauthenticate":return j(_.user,I,"internal-error"),ei._forOperation(_.user,_.operationType,nt);default:ee(I,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,c.Z)(function*(){return _.signInResolver(m)})()}}function Hh(w,m){var _;const I=(0,V.m9)(w),D=m;return j(m.customData.operationType,I,"argument-error"),j(null===(_=D.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),Ka._fromError(I,D)}class Au{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>kh._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new Au(m)}getSession(){var m=this;return(0,c.Z)(function*(){return Xs._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var I=this;return(0,c.Z)(function*(){const D=m,P=yield I.getSession(),Z=yield sn(I.user,D._process(I.user.auth,P,_));return yield I.user._updateTokensIfNecessary(Z),I.user.reload()})()}unenroll(m){var _=this;return(0,c.Z)(function*(){const I="string"==typeof m?m:m.uid,D=yield _.user.getIdToken();try{const P=yield sn(_.user,function Kg(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:withdraw",se(w,m))}(_.user.auth,{idToken:D,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Z})=>Z!==I),yield _.user._updateTokensIfNecessary(P),yield _.user.reload()}catch(P){throw P}})()}}const on=new WeakMap;function xu(w){const m=(0,V.m9)(w);return on.has(m)||on.set(m,Au._fromUser(m)),on.get(m)}const eo="__sak";class ni{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(eo,"1"),this.storage.removeItem(eo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const qh=(()=>{class w extends ni{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function DE(){const w=(0,V.z$)();return k(w)||Ke(w)}()&&function zi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const D=this.storage.getItem(I),P=this.localCache[I];D!==P&&_(I,P,D)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((oe,Le,He)=>{this.notifyListeners(oe,He)});const D=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(D);if(_.newValue!==oe)null!==_.newValue?this.storage.setItem(D,_.newValue):this.storage.removeItem(D);else if(this.localCache[D]===_.newValue&&!I)return}const P=()=>{const oe=this.storage.getItem(D);!I&&this.localCache[D]===oe||this.notifyListeners(D,oe)},Z=this.storage.getItem(D);!function hn(){return(0,V.w1)()&&10===document.documentMode}()||Z===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,I){this.localCache[_]=I;const D=this.listeners[_];if(D)for(const P of Array.from(D))P(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var D=()=>super._set,P=this;return(0,c.Z)(function*(){yield D().call(P,_,I),P.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,D=this;return(0,c.Z)(function*(){const P=yield I().call(D,_);return D.localCache[_]=JSON.stringify(P),P})()}_remove(_){var I=()=>super._remove,D=this;return(0,c.Z)(function*(){yield I().call(D,_),delete D.localCache[_]})()}}return w.type="LOCAL",w})(),Pu=(()=>{class w extends ni{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let Yg=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(P=>P.isListeningto(_));if(I)return I;const D=new w(_);return this.receivers.push(D),D}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,c.Z)(function*(){const D=_,{eventId:P,eventType:Z,data:oe}=D.data,Le=I.handlersMap[Z];if(!Le?.size)return;D.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const He=Array.from(Le).map(function(){var Nt=(0,c.Z)(function*(Vr){return Vr(D.origin,oe)});return function(Vr){return Nt.apply(this,arguments)}}()),nt=yield function So(w){return Promise.all(w.map(function(){var m=(0,c.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return m.apply(this,arguments)}}()))}(He);D.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:nt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Yc(w="",m=10){let _="";for(let I=0;I<m;I++)_+=Math.floor(10*Math.random());return w+_}class t0{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,I=50){var D=this;return(0,c.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,oe;return new Promise((Le,He)=>{const nt=Yc("",20);P.port1.start();const Nt=setTimeout(()=>{He(new Error("unsupported_event"))},I);oe={messageChannel:P,onMessage(Vr){const Ki=Vr;if(Ki.data.eventId===nt)switch(Ki.data.status){case"ack":clearTimeout(Nt),Z=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Le(Ki.data.response);break;default:clearTimeout(Nt),clearTimeout(Z),He(new Error("invalid_response"))}}},D.handlers.add(oe),P.port1.addEventListener("message",oe.onMessage),D.target.postMessage({eventType:m,eventId:nt,data:_},[P.port2])}).finally(()=>{oe&&D.removeMessageHandler(oe)})})()}}function nr(){return window}function Qg(){return typeof nr().WorkerGlobalScope<"u"&&"function"==typeof nr().importScripts}function Ou(){return(Ou=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Xg="firebaseLocalStorageDb",Qa="firebaseLocalStorage",Ao="fbase_key";class Qc{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Zh(w,m){return w.transaction([Qa],m?"readwrite":"readonly").objectStore(Qa)}function em(){const w=indexedDB.open(Xg,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(Qa,{keyPath:Ao})}catch(D){_(D)}}),w.addEventListener("success",(0,c.Z)(function*(){const I=w.result;I.objectStoreNames.contains(Qa)?m(I):(I.close(),yield function r0(){const w=indexedDB.deleteDatabase(Xg);return new Qc(w).toPromise()}(),m(yield em()))}))})}function tm(w,m,_){return ve.apply(this,arguments)}function ve(){return(ve=(0,c.Z)(function*(w,m,_){const I=Zh(w,!0).put({[Ao]:m,value:_});return new Qc(I).toPromise()})).apply(this,arguments)}function cs(){return(cs=(0,c.Z)(function*(w,m){const _=Zh(w,!1).get(m),I=yield new Qc(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Kh(w,m){const _=Zh(w,!0).delete(m);return new Qc(_).toPromise()}const Ts=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,c.Z)(function*(){return _.db||(_.db=yield em()),_.db})()}_withRetries(_){var I=this;return(0,c.Z)(function*(){let D=0;for(;;)try{const P=yield I._openDb();return yield _(P)}catch(P){if(D++>3)throw P;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,c.Z)(function*(){return Qg()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,c.Z)(function*(){_.receiver=Yg._getInstance(function Jg(){return Qg()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,c.Z)(function*(D,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(D,P){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,c.Z)(function*(D,P){return["keyChanged"]});return function(D,P){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,c.Z)(function*(){var I,D;if(_.activeServiceWorker=yield function _t(){return Ou.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new t0(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(I=P[0])&&void 0!==I&&I.fulfilled&&null!==(D=P[0])&&void 0!==D&&D.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,c.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function AE(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const _=yield em();return yield tm(_,eo,"1"),yield Kh(_,eo),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,c.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var D=this;return(0,c.Z)(function*(){return D._withPendingWrite((0,c.Z)(function*(){return yield D._withRetries(P=>tm(P,_,I)),D.localCache[_]=I,D.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,c.Z)(function*(){const D=yield I._withRetries(P=>function jt(w,m){return cs.apply(this,arguments)}(P,_));return I.localCache[_]=D,D})()}_remove(_){var I=this;return(0,c.Z)(function*(){return I._withPendingWrite((0,c.Z)(function*(){return yield I._withRetries(D=>Kh(D,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,c.Z)(function*(){const I=yield _._withRetries(Z=>{const oe=Zh(Z,!1).getAll();return new Qc(oe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const D=[],P=new Set;for(const{fbase_key:Z,value:oe}of I)P.add(Z),JSON.stringify(_.localCache[Z])!==JSON.stringify(oe)&&(_.notifyListeners(Z,oe),D.push(Z));for(const Z of Object.keys(_.localCache))_.localCache[Z]&&!P.has(Z)&&(_.notifyListeners(Z,null),D.push(Z));return D})()}notifyListeners(_,I){this.localCache[_]=I;const D=this.listeners[_];if(D)for(const P of Array.from(D))P(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),xr=1e12;class xo{constructor(m){this.auth=m,this.counter=xr,this._widgets=new Map}render(m,_){const I=this.counter;return this._widgets.set(I,new a0(m,this.auth.name,_||{})),this.counter++,I}reset(m){var _;const I=m||xr;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(m){var _;return(null===(_=this._widgets.get(m||xr))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,c.Z)(function*(){var I;return null===(I=_._widgets.get(m||xr))||void 0===I||I.execute(),""})()}}class a0{constructor(m,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof m?document.getElementById(m):m;j(D,"argument-error",{appName:_}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xc(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ms=Gs("rcb"),xE=new un(3e4,6e4);class sm{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=nr().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return j(function PE(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Kt(nr().grecaptcha)?Promise.resolve(nr().grecaptcha):new Promise((I,D)=>{const P=nr().setTimeout(()=>{D(de(m,"network-request-failed"))},xE.get());nr()[Ms]=()=>{nr().clearTimeout(P),delete nr()[Ms];const oe=nr().grecaptcha;if(!oe||!Kt(oe))return void D(de(m,"internal-error"));const Le=oe.render;oe.render=(He,nt)=>{const Nt=Le(He,nt);return this.counter++,Nt},this.hostLanguage=_,I(oe)},fu(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Ms,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),D(de(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=nr().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class om{load(m){return(0,c.Z)(function*(){return new xo(m)})()}clearedOneInstance(){}}const Yh="recaptcha",c0={theme:"light",type:"image"};class am{constructor(m,_=Object.assign({},c0),I){this.parameters=_,this.type=Yh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fn(I),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof m?document.getElementById(m):m;j(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new om:new sm,this.validateStartingState()}verify(){var m=this;return(0,c.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(_)||new Promise(P=>{const Z=oe=>{oe&&(m.tokenChangeListeners.delete(Z),P(oe))};m.tokenChangeListeners.add(Z),m.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof m)m(_);else if("string"==typeof m){const I=nr()[m];"function"==typeof I&&I(_)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,c.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,c.Z)(function*(){j(en()&&!Qg(),m.auth,"internal-error"),yield function OE(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Hs(w){return bo.apply(this,arguments)}(m.auth);j(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qh{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=pt._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function gi(w,m,_){return to.apply(this,arguments)}function to(){return(to=(0,c.Z)(function*(w,m,_){const I=Fn(w),D=yield Nu(I,m,(0,V.m9)(_));return new Qh(D,P=>Oh(I,P))})).apply(this,arguments)}function cm(w,m,_){return pn.apply(this,arguments)}function pn(){return(pn=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w);yield qa(!1,I,"phone");const D=yield Nu(I.auth,m,(0,V.m9)(_));return new Qh(D,P=>CE(I,P))})).apply(this,arguments)}function ut(w,m,_){return lr.apply(this,arguments)}function lr(){return(lr=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w),D=yield Nu(I.auth,m,(0,V.m9)(_));return new Qh(D,P=>Ln(I,P))})).apply(this,arguments)}function Nu(w,m,_){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,c.Z)(function*(w,m,_){var I;const D=yield _.verify();try{let P;if(j("string"==typeof D,w,"argument-error"),j(_.type===Yh,w,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const Z=P.session;if("phoneNumber"in P)return j("enroll"===Z.type,w,"internal-error"),(yield function e0(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:start",se(w,m))}(w,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{j("signin"===Z.type,w,"internal-error");const oe=(null===(I=P.multiFactorHint)||void 0===I?void 0:I.uid)||P.multiFactorUid;return j(oe,w,"missing-multi-factor-info"),(yield function nm(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:start",se(w,m))}(w,{mfaPendingCredential:Z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield function Et(w,m){return fn.apply(this,arguments)}(w,{phoneNumber:P.phoneNumber,recaptchaToken:D});return Z}}finally{_._reset()}}),Jh.apply(this,arguments)}function ri(w,m){return no.apply(this,arguments)}function no(){return(no=(0,c.Z)(function*(w,m){yield qc((0,V.m9)(w),m)})).apply(this,arguments)}let Cn=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Fn(_)}verifyPhoneNumber(_,I){return Nu(this.auth,_,(0,V.m9)(I))}static credential(_,I){return pt._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:D}=_;return I&&D?pt._fromTokenResponse(I,D):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Po(w,m){return m?it(m):(j(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class oa extends $c{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Ws(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Ws(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Ws(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function yt(w){return Rv(w.auth,new oa(w),w.bypassAuthState)}function l0(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),Bg(_,new oa(w),w.bypassAuthState)}function lm(w){return el.apply(this,arguments)}function el(){return(el=(0,c.Z)(function*(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),qc(_,new oa(w),w.bypassAuthState)})).apply(this,arguments)}class ro{constructor(m,_,I,D,P=!1){this.auth=m,this.resolver=I,this.user=D,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,c.Z)(function*(I,D){m.pendingPromise={resolve:I,reject:D};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(I,D){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,c.Z)(function*(){const{urlResponse:I,sessionId:D,postBody:P,tenantId:Z,error:oe,type:Le}=m;if(oe)return void _.reject(oe);const He={auth:_.auth,requestUri:I,sessionId:D,tenantId:Z||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)(He))}catch(nt){_.reject(nt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return yt;case"linkViaPopup":case"linkViaRedirect":return lm;case"reauthViaPopup":case"reauthViaRedirect":return l0;default:ee(this.auth,"internal-error")}}resolve(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const io=new un(2e3,1e4);function mi(w,m,_){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,c.Z)(function*(w,m,_){const I=Fn(w);he(w,m,Oi);const D=Po(I,_);return new so(I,"signInViaPopup",m,D).executeNotNull()})).apply(this,arguments)}function Xa(w,m,_){return ec.apply(this,arguments)}function ec(){return(ec=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,Oi);const D=Po(I.auth,_);return new so(I.auth,"reauthViaPopup",m,D,I).executeNotNull()})).apply(this,arguments)}function Ru(w,m,_){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,Oi);const D=Po(I.auth,_);return new so(I.auth,"linkViaPopup",m,D,I).executeNotNull()})).apply(this,arguments)}let so=(()=>{class w extends ro{constructor(_,I,D,P,Z){super(_,I,P,Z),this.provider=D,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,c.Z)(function*(){const I=yield _.execute();return j(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,c.Z)(function*(){Ue(1===_.filter.length,"Popup operations only handle one event");const I=Yc();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(D=>{_.reject(D)}),_.resolver._isIframeWebStorageSupported(_.auth,D=>{D||_.reject(de(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(de(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,D;this.pollId=null!==(D=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==D&&D.closed?window.setTimeout(()=>{this.pollId=null,this.reject(de(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,io.get())};_()}}return w.currentPopupAction=null,w})();const tl="pendingRedirect",Ds=new Map;class aa extends ro{constructor(m,_,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,c.Z)(function*(){let I=Ds.get(_.auth._key());if(!I){try{const P=(yield function Lu(w,m){return Xh.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;I=()=>Promise.resolve(P)}catch(D){I=()=>Promise.reject(D)}Ds.set(_.auth._key(),I)}return _.bypassAuthState||Ds.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,I=this;return(0,c.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(I,m);if("unknown"!==m.type){if(m.eventId){const D=yield I.auth._redirectUserForId(m.eventId);if(D)return I.user=D,_().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Xh(){return(Xh=(0,c.Z)(function*(w,m){const _=ef(m),I=_i(w);if(!(yield I._isAvailable()))return!1;const D="true"===(yield I._get(_));return yield I._remove(_),D})).apply(this,arguments)}function nl(w,m){return ca.apply(this,arguments)}function ca(){return(ca=(0,c.Z)(function*(w,m){return _i(w)._set(ef(m),"true")})).apply(this,arguments)}function Oo(){Ds.clear()}function rl(w,m){Ds.set(w._key(),m)}function _i(w){return it(w._redirectPersistence)}function ef(w){return tr(tl,w.config.apiKey,w.name)}function Uu(w,m,_){return function ki(w,m,_){return En.apply(this,arguments)}(w,m,_)}function En(){return(En=(0,c.Z)(function*(w,m,_){const I=Fn(w);he(w,m,Oi),yield I._initializationPromise;const D=Po(I,_);return yield nl(D,I),D._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function kt(w,m,_){return function tc(w,m,_){return Cr.apply(this,arguments)}(w,m,_)}function Cr(){return(Cr=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,Oi),yield I.auth._initializationPromise;const D=Po(I.auth,_);yield nl(D,I.auth);const P=yield Ss(I);return D._openRedirect(I.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function yi(w,m,_){return function il(w,m,_){return sl.apply(this,arguments)}(w,m,_)}function sl(){return(sl=(0,c.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,Oi),yield I.auth._initializationPromise;const D=Po(I.auth,_);yield qa(!1,I,m.providerId),yield nl(D,I.auth);const P=yield Ss(I);return D._openRedirect(I.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function u0(w,m){return ur.apply(this,arguments)}function ur(){return(ur=(0,c.Z)(function*(w,m){return yield Fn(w)._initializationPromise,ko(w,m,!1)})).apply(this,arguments)}function ko(w,m){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,c.Z)(function*(w,m,_=!1){const I=Fn(w),D=Po(I,m),Z=yield new aa(I,D,_).execute();return Z&&!_&&(delete Z.user._redirectEventId,yield I._persistUserIfCurrent(Z.user),yield I._setRedirectUser(null,m)),Z})).apply(this,arguments)}function Ss(w){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,c.Z)(function*(w){const m=Yc(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class nc{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(_=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function rc(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tf(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var I;if(m.error&&!tf(m)){const D=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(de(this.auth,D))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const I=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(um(m))}saveEventToCache(m){this.cachedEventUids.add(um(m)),this.lastProcessedEventTime=Date.now()}}function um(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function tf({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function nf(w){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,c.Z)(function*(w,m={}){return pe(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Mt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,No=/^https?/;function Ro(){return(Ro=(0,c.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield nf(w);for(const _ of m)try{if(dm(_))return}catch{}ee(w,"unauthorized-domain")})).apply(this,arguments)}function dm(w){const m=lt(),{protocol:_,hostname:I}=new URL(m);if(w.startsWith("chrome-extension://")){const Z=new URL(w);return""===Z.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&Z.hostname===I}if(!No.test(_))return!1;if(Mt.test(w))return I===w;const D=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(I)}const hm=new un(3e4,6e4);function ii(){const w=nr().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let dr=null;const pm=new un(5e3,15e3),ju="__/auth/iframe",gm="emulator/auth/iframe",mm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$u=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ic(w){const m=w.config;j(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?Zr(m,gm):`https://${w.config.authDomain}/${ju}`,I={apiKey:m.apiKey,appName:w.name,v:L.SDK_VERSION},D=$u.get(w.config.apiHost);D&&(I.eid=D);const P=w._getFrameworks();return P.length&&(I.fw=P.join(",")),`${_}?${(0,V.xO)(I).slice(1)}`}function oo(){return oo=(0,c.Z)(function*(w){const m=yield function Fo(w){return dr=dr||function fm(w){return new Promise((m,_)=>{var I,D,P;function Z(){ii(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ii(),_(de(w,"network-request-failed"))},timeout:hm.get()})}if(null!==(D=null===(I=nr().gapi)||void 0===I?void 0:I.iframes)&&void 0!==D&&D.Iframe)m(gapi.iframes.getContext());else{if(null===(P=nr().gapi)||void 0===P||!P.load){const oe=Gs("iframefcb");return nr()[oe]=()=>{gapi.load?Z():_(de(w,"network-request-failed"))},fu(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>_(Le))}Z()}}).catch(m=>{throw dr=null,m})}(w),dr}(w),_=nr().gapi;return j(_,w,"internal-error"),m.open({where:document.body,url:ic(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mm,dontclear:!0},I=>new Promise(function(){var D=(0,c.Z)(function*(P,Z){yield I.restyle({setHideOnLeave:!1});const oe=de(w,"network-request-failed"),Le=nr().setTimeout(()=>{Z(oe)},pm.get());function He(){nr().clearTimeout(Le),P(I)}I.ping(He).then(He,()=>{Z(oe)})});return function(P,Z){return D.apply(this,arguments)}}()))}),oo.apply(this,arguments)}const ol={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ha{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const _m="__/auth/handler",NE="emulator/auth/handler",rf=encodeURIComponent("fac");function Zi(w,m,_,I,D,P){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,c.Z)(function*(w,m,_,I,D,P){j(w.config.authDomain,w,"auth-domain-config-required"),j(w.config.apiKey,w,"invalid-api-key");const Z={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:L.SDK_VERSION,eventId:D};if(m instanceof Oi){m.setDefaultLanguage(w.languageCode),Z.providerId=m.providerId||"",(0,V.xb)(m.getCustomParameters())||(Z.customParameters=JSON.stringify(m.getCustomParameters()));for(const[nt,Nt]of Object.entries(P||{}))Z[nt]=Nt}if(m instanceof Jr){const nt=m.getScopes().filter(Nt=>""!==Nt);nt.length>0&&(Z.scopes=nt.join(","))}w.tenantId&&(Z.tid=w.tenantId);const oe=Z;for(const nt of Object.keys(oe))void 0===oe[nt]&&delete oe[nt];const Le=yield w._getAppCheckToken(),He=Le?`#${rf}=${encodeURIComponent(Le)}`:"";return`${function qu({config:w}){return w.emulator?Zr(w,NE):`https://${w.authDomain}/${_m}`}(w)}?${(0,V.xO)(oe).slice(1)}${He}`})).apply(this,arguments)}const Kn="webStorageSupport",ao=class sf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pu,this._completeRedirectFn=ko,this._overrideRedirectResult=rl}_openPopup(m,_,I,D){var P=this;return(0,c.Z)(function*(){var Z;Ue(null===(Z=P.eventManagers[m._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const oe=yield Zi(m,_,I,lt(),D);return function kE(w,m,_,I=500,D=600){const P=Math.max((window.screen.availHeight-D)/2,0).toString(),Z=Math.max((window.screen.availWidth-I)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},ol),{width:I.toString(),height:D.toString(),top:P,left:Z}),He=(0,V.z$)().toLowerCase();_&&(oe=x(He)?"_blank":_),O(He)&&(m=m||"http://localhost",Le.scrollbars="yes");const nt=Object.entries(Le).reduce((Vr,[Ki,co])=>`${Vr}${Ki}=${co},`,"");if(function wt(w=(0,V.z$)()){var m;return Ke(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(He)&&"_self"!==oe)return function zu(w,m){const _=document.createElement("a");_.href=w,_.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(m||"",oe),new ha(null);const Nt=window.open(m||"",oe,nt);j(Nt,w,"popup-blocked");try{Nt.focus()}catch{}return new ha(Nt)}(m,oe,Yc())})()}_openRedirect(m,_,I,D){var P=this;return(0,c.Z)(function*(){return yield P._originValidation(m),function Wh(w){nr().location.href=w}(yield Zi(m,_,I,lt(),D)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:D,promise:P}=this.eventManagers[_];return D?Promise.resolve(D):(Ue(P,"If manager is not set, promise should be"),P)}const I=this.initAndGetManager(m);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(m){var _=this;return(0,c.Z)(function*(){const I=yield function da(w){return oo.apply(this,arguments)}(m),D=new nc(m);return I.register("authEvent",P=>(j(P?.authEvent,m,"invalid-auth-event"),{status:D.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:D},_.iframes[m._key()]=I,D})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Kn,{type:Kn},D=>{var P;const Z=null===(P=D?.[0])||void 0===P?void 0:P[Kn];void 0!==Z&&_(!!Z),ee(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ua(w){return Ro.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return xt()||k()||Ke()}};class ym{constructor(m){this.factorId=m}_process(m,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,I);case"signin":return this._finalizeSignIn(m,_.credential);default:return we("unexpected MultiFactorSessionType")}}}class si extends ym{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new si(m)}_finalizeEnroll(m,_,I){return function zh(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:finalize",se(w,m))}(m,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function rm(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:finalize",se(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let sc=(()=>{class w{constructor(){}static assertion(_){return si._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var f0="@firebase/auth";class RE{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,c.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(I=>{m(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const p0=(0,V.Pz)("authIdTokenMaxAge")||300;let Zu=null;const g0=w=>function(){var m=(0,c.Z)(function*(_){const I=_&&(yield _.getIdTokenResult()),D=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(D&&D>p0)return;const P=I?.token;Zu!==P&&(Zu=P,yield fetch(w,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function fa(w=(0,L.getApp)()){const m=(0,L._getProvider)(w,"auth");if(m.isInitialized())return m.getImmediate();const _=function vn(w,m){const _=(0,L._getProvider)(w,"auth");if(_.isInitialized()){const D=_.getImmediate(),P=_.getOptions();if((0,V.vZ)(P,m??{}))return D;ee(D,"already-initialized")}return _.initialize({options:m})}(w,{popupRedirectResolver:ao,persistence:[Ts,qh,Pu]}),I=(0,V.Pz)("authTokenSyncURL");if(I){const P=g0(I);(function Zg(w,m,_){(0,V.m9)(w).beforeAuthStateChanged(m,_)})(_,P,()=>P(_.currentUser)),function Qv(w,m,_,I){(0,V.m9)(w).onIdTokenChanged(m,_,I)}(_,Z=>P(Z))}const D=(0,V.q4)("auth");return D&&yh(_,`http://${D}`),_}!function af(w){(0,L._registerComponent)(new Ie.wA("auth",(m,{options:_})=>{const I=m.getProvider("app").getImmediate(),D=m.getProvider("heartbeat"),P=m.getProvider("app-check-internal"),{apiKey:Z,authDomain:oe}=I.options;j(Z&&!Z.includes(":"),"invalid-api-key",{appName:I.name});const Le={apiKey:Z,authDomain:oe,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bc(w)},He=new Si(I,D,P,Le);return function Pv(w,m){const _=m?.persistence||[],I=(Array.isArray(_)?_:[_]).map(it);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(I,m?.popupRedirectResolver)}(He,_),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,I)=>{m.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new Ie.wA("auth-internal",m=>{const _=Fn(m.getProvider("auth").getImmediate());return new RE(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(f0,"0.23.2",function Ni(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,L.registerVersion)(f0,"0.23.2","esm2017")}("Browser")},9058:(st,be,F)=>{F.d(be,{$s:()=>it,BH:()=>re,DV:()=>qn,G6:()=>Zr,GJ:()=>In,L:()=>Me,LL:()=>ke,P0:()=>ot,Pz:()=>de,Sg:()=>he,UG:()=>we,UI:()=>Ur,US:()=>Ie,Wl:()=>ht,Yr:()=>un,ZB:()=>X,ZR:()=>pe,aH:()=>ee,b$:()=>en,cI:()=>tn,dS:()=>Hi,eu:()=>ce,g5:()=>L,gK:()=>Zt,gQ:()=>Tt,h$:()=>Fe,hl:()=>ie,hu:()=>V,jU:()=>Ue,m9:()=>tr,ne:()=>sn,p$:()=>G,pd:()=>mt,q4:()=>tt,r3:()=>rn,ru:()=>lt,tV:()=>B,uI:()=>j,ug:()=>os,vZ:()=>_r,w1:()=>yn,w9:()=>kn,xO:()=>ws,xb:()=>Mi,z$:()=>Re,zI:()=>le,zd:()=>dt});const c={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},V=function(H,$){if(!H)throw L($)},L=function(H){return new Error("Firebase Database ("+c.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},ne=function(H){const $=[];let O=0;for(let k=0;k<H.length;k++){let x=H.charCodeAt(k);x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):55296==(64512&x)&&k+1<H.length&&56320==(64512&H.charCodeAt(k+1))?(x=65536+((1023&x)<<10)+(1023&H.charCodeAt(++k)),$[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,$){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let x=0;x<H.length;x+=3){const K=H[x],me=x+1<H.length,Ve=me?H[x+1]:0,vt=x+2<H.length,Ke=vt?H[x+2]:0;let hn=(15&Ve)<<2|Ke>>6,xt=63&Ke;vt||(xt=64,me||(hn=64)),k.push(O[K>>2],O[(3&K)<<4|Ve>>4],O[hn],O[xt])}return k.join("")},encodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(H):this.encodeByteArray(ne(H),$)},decodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(H):function(H){const $=[];let O=0,k=0;for(;O<H.length;){const x=H[O++];if(x<128)$[k++]=String.fromCharCode(x);else if(x>191&&x<224){const K=H[O++];$[k++]=String.fromCharCode((31&x)<<6|63&K)}else if(x>239&&x<365){const vt=((7&x)<<18|(63&H[O++])<<12|(63&H[O++])<<6|63&H[O++])-65536;$[k++]=String.fromCharCode(55296+(vt>>10)),$[k++]=String.fromCharCode(56320+(1023&vt))}else{const K=H[O++],me=H[O++];$[k++]=String.fromCharCode((15&x)<<12|(63&K)<<6|63&me)}}return $.join("")}(this.decodeStringToByteArray(H,$))},decodeStringToByteArray(H,$){this.init_();const O=$?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let x=0;x<H.length;){const K=O[H.charAt(x++)],Ve=x<H.length?O[H.charAt(x)]:0;++x;const Ke=x<H.length?O[H.charAt(x)]:64;++x;const wt=x<H.length?O[H.charAt(x)]:64;if(++x,null==K||null==Ve||null==Ke||null==wt)throw new Pe;k.push(K<<2|Ve>>4),64!==Ke&&(k.push(Ve<<4&240|Ke>>2),64!==wt&&k.push(Ke<<6&192|wt))}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class Pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(H){const $=ne(H);return Ie.encodeByteArray($,!0)},Me=function(H){return Fe(H).replace(/\./g,"")},B=function(H){try{return Ie.decodeString(H,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function G(H){return X(void 0,H)}function X(H,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return $}for(const O in $)!$.hasOwnProperty(O)||!Oe(O)||(H[O]=X(H[O],$[O]));return H}function Oe(H){return"__proto__"!==H}const Te=()=>{try{return function xe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=H&&B(H[1]);return $&&JSON.parse($)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},tt=H=>{var $,O;return null===(O=null===($=Te())||void 0===$?void 0:$.emulatorHosts)||void 0===O?void 0:O[H]},ot=H=>{const $=tt(H);if(!$)return;const O=$.lastIndexOf(":");if(O<=0||O+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const k=parseInt($.substring(O+1),10);return"["===$[0]?[$.substring(1,O-1),k]:[$.substring(0,O),k]},ee=()=>{var H;return null===(H=Te())||void 0===H?void 0:H.config},de=H=>{var $;return null===($=Te())||void 0===$?void 0:$[`_${H}`]};class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,O)=>{this.resolve=$,this.reject=O})}wrapCallback($){return(O,k)=>{O?this.reject(O):this.resolve(k),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(O):$(O,k))}}}function he(H,$){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const k=$||"demo-project",x=H.iat||0,K=H.sub||H.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${k}`,aud:k,iat:x,exp:x+3600,auth_time:x,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},H);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(me)),""].join(".")}function Re(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function j(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function we(){var H;const $=null===(H=Te())||void 0===H?void 0:H.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function lt(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function en(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function yn(){const H=Re();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function un(){return!0===c.NODE_CLIENT||!0===c.NODE_ADMIN}function Zr(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ce(){return new Promise((H,$)=>{try{let O=!0;const k="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(k);x.onsuccess=()=>{x.result.close(),O||self.indexedDB.deleteDatabase(k),H(!0)},x.onupgradeneeded=()=>{O=!1},x.onerror=()=>{var K;$((null===(K=x.error)||void 0===K?void 0:K.message)||"")}}catch(O){$(O)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class pe extends Error{constructor($,O,k){super(O),this.code=$,this.customData=k,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ke.prototype.create)}}class ke{constructor($,O,k){this.service=$,this.serviceName=O,this.errors=k}create($,...O){const k=O[0]||{},x=`${this.service}/${$}`,K=this.errors[$],me=K?function Qe(H,$){return H.replace(Be,(O,k)=>{const x=$[k];return null!=x?String(x):`<${k}?>`})}(K,k):"Error";return new pe(x,`${this.serviceName}: ${me} (${x}).`,k)}}const Be=/\{\$([^}]+)}/g;function tn(H){return JSON.parse(H)}function ht(H){return JSON.stringify(H)}const Yt=function(H){let $={},O={},k={},x="";try{const K=H.split(".");$=tn(B(K[0])||""),O=tn(B(K[1])||""),x=K[2],k=O.d||{},delete O.d}catch{}return{header:$,claims:O,data:k,signature:x}},kn=function(H){const O=Yt(H).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},In=function(H){const $=Yt(H).claims;return"object"==typeof $&&!0===$.admin};function rn(H,$){return Object.prototype.hasOwnProperty.call(H,$)}function qn(H,$){if(Object.prototype.hasOwnProperty.call(H,$))return H[$]}function Mi(H){for(const $ in H)if(Object.prototype.hasOwnProperty.call(H,$))return!1;return!0}function Ur(H,$,O){const k={};for(const x in H)Object.prototype.hasOwnProperty.call(H,x)&&(k[x]=$.call(O,H[x],x,H));return k}function _r(H,$){if(H===$)return!0;const O=Object.keys(H),k=Object.keys($);for(const x of O){if(!k.includes(x))return!1;const K=H[x],me=$[x];if(Wn(K)&&Wn(me)){if(!_r(K,me))return!1}else if(K!==me)return!1}for(const x of k)if(!O.includes(x))return!1;return!0}function Wn(H){return null!==H&&"object"==typeof H}function ws(H){const $=[];for(const[O,k]of Object.entries(H))Array.isArray(k)?k.forEach(x=>{$.push(encodeURIComponent(O)+"="+encodeURIComponent(x))}):$.push(encodeURIComponent(O)+"="+encodeURIComponent(k));return $.length?"&"+$.join("&"):""}function dt(H){const $={};return H.replace(/^\?/,"").split("&").forEach(k=>{if(k){const[x,K]=k.split("=");$[decodeURIComponent(x)]=decodeURIComponent(K)}}),$}function mt(H){const $=H.indexOf("?");if(!$)return"";const O=H.indexOf("#",$);return H.substring($,O>0?O:void 0)}class Tt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,O){O||(O=0);const k=this.W_;if("string"==typeof $)for(let wt=0;wt<16;wt++)k[wt]=$.charCodeAt(O)<<24|$.charCodeAt(O+1)<<16|$.charCodeAt(O+2)<<8|$.charCodeAt(O+3),O+=4;else for(let wt=0;wt<16;wt++)k[wt]=$[O]<<24|$[O+1]<<16|$[O+2]<<8|$[O+3],O+=4;for(let wt=16;wt<80;wt++){const hn=k[wt-3]^k[wt-8]^k[wt-14]^k[wt-16];k[wt]=4294967295&(hn<<1|hn>>>31)}let Ke,Qt,x=this.chain_[0],K=this.chain_[1],me=this.chain_[2],Ve=this.chain_[3],vt=this.chain_[4];for(let wt=0;wt<80;wt++){wt<40?wt<20?(Ke=Ve^K&(me^Ve),Qt=1518500249):(Ke=K^me^Ve,Qt=1859775393):wt<60?(Ke=K&me|Ve&(K|me),Qt=2400959708):(Ke=K^me^Ve,Qt=3395469782);const hn=(x<<5|x>>>27)+Ke+vt+Qt+k[wt]&4294967295;vt=Ve,Ve=me,me=4294967295&(K<<30|K>>>2),K=x,x=hn}this.chain_[0]=this.chain_[0]+x&4294967295,this.chain_[1]=this.chain_[1]+K&4294967295,this.chain_[2]=this.chain_[2]+me&4294967295,this.chain_[3]=this.chain_[3]+Ve&4294967295,this.chain_[4]=this.chain_[4]+vt&4294967295}update($,O){if(null==$)return;void 0===O&&(O=$.length);const k=O-this.blockSize;let x=0;const K=this.buf_;let me=this.inbuf_;for(;x<O;){if(0===me)for(;x<=k;)this.compress_($,x),x+=this.blockSize;if("string"==typeof $){for(;x<O;)if(K[me]=$.charCodeAt(x),++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}else for(;x<O;)if(K[me]=$[x],++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}this.inbuf_=me,this.total_+=O}digest(){const $=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let x=this.blockSize-1;x>=56;x--)this.buf_[x]=255&O,O/=256;this.compress_(this.buf_);let k=0;for(let x=0;x<5;x++)for(let K=24;K>=0;K-=8)$[k]=this.chain_[x]>>K&255,++k;return $}}function sn(H,$){const O=new di(H,$);return O.subscribe.bind(O)}class di{constructor($,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{$(this)}).catch(k=>{this.error(k)})}next($){this.forEachObserver(O=>{O.next($)})}error($){this.forEachObserver(O=>{O.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,O,k){let x;if(void 0===$&&void 0===O&&void 0===k)throw new Error("Missing Observer.");x=function Rt(H,$){if("object"!=typeof H||null===H)return!1;for(const O of $)if(O in H&&"function"==typeof H[O])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:O,complete:k},void 0===x.next&&(x.next=Nn),void 0===x.error&&(x.error=Nn),void 0===x.complete&&(x.complete=Nn);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),K}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,$)}sendOne($,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{O(this.observers[$])}catch(k){typeof console<"u"&&console.error&&console.error(k)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nn(){}function Zt(H,$){return`${H} failed: ${$} argument `}const Hi=function(H){const $=[];let O=0;for(let k=0;k<H.length;k++){let x=H.charCodeAt(k);if(x>=55296&&x<=56319){const K=x-55296;k++,V(k<H.length,"Surrogate pair missing trail surrogate."),x=65536+(K<<10)+(H.charCodeAt(k)-56320)}x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):x<65536?($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},os=function(H){let $=0;for(let O=0;O<H.length;O++){const k=H.charCodeAt(O);k<128?$++:k<2048?$+=2:k>=55296&&k<=56319?($+=4,O++):$+=3}return $},yr=1e3,Ge=2,_e=144e5,Xe=.5;function it(H,$=yr,O=Ge){const k=$*Math.pow(O,H),x=Math.round(Xe*k*(Math.random()-.5)*2);return Math.min(_e,k+x)}function tr(H){return H&&H._delegate?H._delegate:H}},5711:(st,be,F)=>{var c=F(5879);let V=null;function L(){return V}class ge{}const Ie=new c.OlP("DocumentToken");let Pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Me)},providedIn:"platform"})}return n})();const Fe=new c.OlP("Location Initialized");let Me=(()=>{class n extends Pe{constructor(){super(),this._doc=(0,c.f3M)(Ie),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function B(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Je)},providedIn:"root"})}return n})();const xe=new c.OlP("appBaseHref");let Je=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return B(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const u=this.prepareExternalUrl(i+X(o));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){const u=this.prepareExternalUrl(i+X(o));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Pe),c.LFG(xe,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ce=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=B(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let u=this.prepareExternalUrl(i+X(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,o){let u=this.prepareExternalUrl(i+X(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Pe),c.LFG(xe,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})(),De=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(ot(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function tt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ot(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=X;static#t=this.joinWithSlash=B;static#n=this.stripTrailingSlash=G;static#r=this.\u0275fac=function(r){return new(r||n)(c.LFG(Oe))};static#i=this.\u0275prov=c.Yz7({token:n,factory:function(){return function Te(){return new De((0,c.LFG)(Oe))}()},providedIn:"root"})}return n})();function ot(n){return n.replace(/\/index.html$/,"")}var re=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(re||{}),Ue=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Ue||{});function pe(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Ue.CurrencyDecimal)return t[c.wAp.NumberSymbols][Ue.Decimal];if(e===Ue.CurrencyGroup)return t[c.wAp.NumberSymbols][Ue.Group]}return r}const x=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ra(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function $a(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}const pu=/\s+/,_h=[];let Di=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=_h,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(pu):_h}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(pu):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(pu).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class jc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Si=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new jc(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===o?void 0:o);else if(null!==o){const f=r.get(o);r.move(f,u),Fn(f,i)}});for(let i=0,o=r.length;i<o;i++){const f=r.get(i).context;f.index=i,f.count=o,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Fn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Fn(n,e){n.context.$implicit=e.item}let vn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Pv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.s_b),c.Y36(c.Rgc))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Pv{constructor(){this.$implicit=null,this.ngIf=null}}function yh(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}function Ai(n,e){return new c.vHH(2100,!1)}let je=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function xi(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Hs(n,e,t){return function xt(n,e,t,r,i,o,u=!1){let f="",g=!1;if(isFinite(n)){let v=function Gi(n){let r,i,o,u,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;"0"===e.charAt(o);o++);if(o===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=o,r=[],u=0;o<=f;o++,u++)r[u]=Number(e.charAt(o))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);u&&(v=function zs(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(v));let b=e.minInt,T=e.minFrac,S=e.maxFrac;if(o){const ze=o.match(x);if(null===ze)throw new Error(`${o} is not a valid digit info`);const Ne=ze[1],Ye=ze[3],gt=ze[5];null!=Ne&&(b=ra(Ne)),null!=Ye&&(T=ra(Ye)),null!=gt?S=ra(gt):null!=Ye&&T>S&&(S=T)}!function Kt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const o=Math.min(Math.max(e,i),t);let u=o+n.integerLen,f=r[u];if(u>0){r.splice(Math.max(n.integerLen,u));for(let T=u;T<r.length;T++)r[T]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,u=o+1),r[0]=0;for(let T=1;T<u;T++)r[T]=0}if(f>=5)if(u-1<0){for(let T=0;T>u;T--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[u-1]++;for(;i<Math.max(0,o);i++)r.push(0);let g=0!==o;const v=e+n.integerLen,b=r.reduceRight(function(T,S,N,q){return q[N]=(S+=T)<10?S:S-10,g&&(0===q[N]&&N>=v?q.pop():g=!1),S>=10?1:0},0);b&&(r.unshift(b),n.integerLen++)}(v,T,S);let N=v.digits,q=v.integerLen;const Q=v.exponent;let J=[];for(g=N.every(ze=>!ze);q<b;q++)N.unshift(0);for(;q<0;q++)N.unshift(0);q>0?J=N.splice(q,N.length):(J=N,N=[0]);const Ee=[];for(N.length>=e.lgSize&&Ee.unshift(N.splice(-e.lgSize,N.length).join(""));N.length>e.gSize;)Ee.unshift(N.splice(-e.gSize,N.length).join(""));N.length&&Ee.unshift(N.join("")),f=Ee.join(pe(t,r)),J.length&&(f+=pe(t,i)+J.join("")),Q&&(f+=pe(t,Ue.Exponential)+"+"+Q)}else f=pe(t,Ue.Infinity);return f=n<0&&!g?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function bo(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],o=r[1],u=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=u[0],g=u[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let b=0;b<g.length;b++){const T=g.charAt(b);"0"===T?t.minFrac=t.maxFrac=b+1:"#"===T?t.maxFrac=b+1:t.posSuf+=T}const v=f.split(",");if(t.gSize=v[1]?v[1].length:0,t.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,o){const b=i.length-t.posPre.length-t.posSuf.length,T=o.indexOf("#");t.negPre=o.substring(0,T).replace(/'/g,""),t.negSuf=o.slice(T+b).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function ke(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,re.Decimal),pe(e,Ue.MinusSign)),e,Ue.Group,Ue.Decimal,t)}(function Zs(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(o){throw Ai()}}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.soG,16))};static#t=this.\u0275pipe=c.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let Sr=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw Ai();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=c.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),Zn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();function Pi(n){return"server"===n}let Jr=(()=>{class n{static#e=this.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Ys((0,c.LFG)(Ie),window)})}return n})();class Ys{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Lg(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const u=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class bs{}class Wg extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Bh extends Wg{static makeCurrent(){!function ne(n){V||(V=n)}(new Bh)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function EE(){return Kc=Kc||document.querySelector("base"),Kc?Kc.getAttribute("href"):null}();return null==t?null:function Qv(n){Vh=Vh||document.createElement("a"),Vh.setAttribute("href",n);const e=Vh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Kc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $a(document.cookie,e)}}let Vh,Kc=null,TE=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const Jv=new c.OlP("EventManagerPlugins");let Xv=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new c.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Jv),c.LFG(c.R0b))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();class jh{constructor(e){this._doc=e}}const $h="ng-app-id";let Su=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Pi(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${$h}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute($h),o;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=r,this.platformIsServer&&u.setAttribute($h,this.appId),u}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const o=this.styleRef,u=o.get(r)?.elements;u?u.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ie),c.LFG(c.AFp),c.LFG(c.Ojb,8),c.LFG(c.Lbi))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const Xs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ka=/%COMP%/g,Es=new c.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function on(n,e){return e.map(t=>t.replace(Ka,n))}let xu=(()=>{class n{constructor(t,r,i,o,u,f,g,v=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=u,this.platformId=f,this.ngZone=g,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=Pi(f),this.defaultRenderer=new eo(t,u,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===c.ifc.ShadowDom&&(r={...r,encapsulation:c.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof qh?i.applyToHost(t):i instanceof pi&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const u=this.doc,f=this.ngZone,g=this.eventManager,v=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(r.encapsulation){case c.ifc.Emulated:o=new qh(g,v,r,this.appId,b,u,f,T);break;case c.ifc.ShadowDom:return new Ya(g,v,t,r,u,f,this.nonce,T);default:o=new pi(g,v,r,b,u,f,T)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Xv),c.LFG(Su),c.LFG(c.AFp),c.LFG(Es),c.LFG(Ie),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(c.Ojb))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();class eo{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Xs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Gh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Gh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new c.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Xs[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Xs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=L().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Gh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ya extends eo{constructor(e,t,r,i,o,u,f,g){super(e,o,u,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=on(i.id,i.styles);for(const b of v){const T=document.createElement("style");f&&T.setAttribute("nonce",f),T.textContent=b,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class pi extends eo{constructor(e,t,r,i,o,u,f,g){super(e,o,u,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?on(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class qh extends pi{constructor(e,t,r,i,o,u,f,g){const v=i+"-"+r.id;super(e,t,r,o,u,f,g,v),this.contentAttr=function Kg(n){return"_ngcontent-%COMP%".replace(Ka,n)}(v),this.hostAttr=function Au(n){return"_nghost-%COMP%".replace(Ka,n)}(v)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let SE=(()=>{class n extends jh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ie))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const Pu=["alt","control","meta","shift"],So={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Yc=(()=>{class n extends jh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),u=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let u="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),u="code."),Pu.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),u+=v+".")}),u+=o,0!=r.length||0===o.length)return null;const g={};return g.domEventName=i,g.fullKey=u,g}static matchEventFullKeyCode(t,r){let i=So[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pu.forEach(u=>{u!==i&&(0,Yg[u])(t)&&(o+=u+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ie))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const Xg=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function _t(){Bh.makeCurrent()},multi:!0},{provide:Ie,useFactory:function AE(){return(0,c.RDi)(document),document},deps:[]}]),n0=new c.OlP(""),Qa=[{provide:c.rWj,useClass:class Zg{addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new c.vHH(5103,!1);return o},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let o=i.length,u=!1;const f=function(g){u=u||g,o--,0==o&&r(u)};i.forEach(g=>{g.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],Ao=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Ou(){return new c.qLn},deps:[]},{provide:Jv,useClass:SE,multi:!0,deps:[Ie,c.R0b,c.Lbi]},{provide:Jv,useClass:Yc,multi:!0,deps:[Ie]},xu,Su,Xv,{provide:c.FYo,useExisting:xu},{provide:bs,useClass:TE,deps:[]},[]];let Qc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(n0,12))};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({providers:[...Ao,...Qa],imports:[Zn,c.hGG]})}return n})(),ve=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ie))};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function tm(){return new ve((0,c.LFG)(Ie))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var gi=F(5592),to=F(4674),pn=F(2459),ut=F(2096),lr=F(5619);const{isArray:Nu}=Array,{getPrototypeOf:Jh,prototype:ri,keys:no}=Object;function Cn(n){if(1===n.length){const e=n[0];if(Nu(e))return{args:e,keys:null};if(function Po(n){return n&&"object"==typeof n&&Jh(n)===ri}(e)){const t=no(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var oa=F(2737),yt=F(7398);const{isArray:l0}=Array;function el(n){return(0,yt.U)(e=>function lm(n,e){return l0(e)?n(...e):n(e)}(n,e))}var ro=F(4564);function io(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var mi=F(8251),Ja=F(7103);function Xa(...n){const e=(0,ro.yG)(n),t=(0,ro.jO)(n),{args:r,keys:i}=Cn(n);if(0===r.length)return(0,pn.D)([],e);const o=new gi.y(function ec(n,e,t=oa.y){return r=>{Ru(e,()=>{const{length:i}=n,o=new Array(i);let u=i,f=i;for(let g=0;g<i;g++)Ru(e,()=>{const v=(0,pn.D)(n[g],e);let b=!1;v.subscribe((0,mi.x)(r,T=>{o[g]=T,b||(b=!0,f--),f||r.next(t(o.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>io(i,u):oa.y));return t?o.pipe(el(t)):o}function Ru(n,e,t){n?(0,Ja.f)(t,n,e):e()}const so=(0,F(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var tl=F(7537);function aa(...n){return function Ds(){return(0,tl.J)(1)}()((0,pn.D)(n,(0,ro.yG)(n)))}var Lu=F(4829);function Xh(n){return new gi.y(e=>{(0,Lu.Xf)(n()).subscribe(e)})}var nl=F(8407);function ca(n,e){const t=(0,to.m)(n)?n:()=>n,r=i=>i.error(t());return new gi.y(e?i=>e.schedule(r,0,i):r)}var Oo=F(6232),rl=F(7394),_i=F(9360);function ef(){return(0,_i.e)((n,e)=>{let t=null;n._refCount++;const r=(0,mi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Uu extends gi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_i.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,mi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rl.w0.EMPTY)}return e}refCount(){return ef()(this)}}var ki=F(8645),En=F(4664);function kt(n){return n<=0?()=>Oo.E:(0,_i.e)((e,t)=>{let r=0;e.subscribe((0,mi.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function tc(...n){const e=(0,ro.yG)(n);return(0,_i.e)((t,r)=>{(e?aa(n,t,e):aa(n,t)).subscribe(r)})}function Cr(n,e){return(0,_i.e)((t,r)=>{let i=0;t.subscribe((0,mi.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var yi=F(1631);function il(n){return(0,_i.e)((e,t)=>{let r=!1;e.subscribe((0,mi.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sl(n=u0){return(0,_i.e)((e,t)=>{let r=!1;e.subscribe((0,mi.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function u0(){return new so}function ur(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,o)=>n(i,o,r)):oa.y,kt(1),t?il(e):sl(()=>new so))}function ko(n,e){return(0,to.m)(e)?(0,yi.z)(n,e,1):(0,yi.z)(n,1)}function Tn(n,e,t){const r=(0,to.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,_i.e)((i,o)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let f=!0;i.subscribe((0,mi.x)(o,g=>{var v;null===(v=r.next)||void 0===v||v.call(r,g),o.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),o.complete()},g=>{var v;f=!1,null===(v=r.error)||void 0===v||v.call(r,g),o.error(g)},()=>{var g,v;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(v=r.finalize)||void 0===v||v.call(r)}))}):oa.y}function Ss(n){return(0,_i.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,mi.x)(t,void 0,void 0,u=>{o=(0,Lu.Xf)(n(u,Ss(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function la(n,e){return(0,_i.e)(function Bu(n,e,t,r,i){return(o,u)=>{let f=t,g=e,v=0;o.subscribe((0,mi.x)(u,b=>{const T=v++;g=f?n(g,b,T):(f=!0,b),r&&u.next(g)},i&&(()=>{f&&u.next(g),u.complete()})))}}(n,e,arguments.length>=2,!0))}function nc(n){return n<=0?()=>Oo.E:(0,_i.e)((e,t)=>{let r=[];e.subscribe((0,mi.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function rc(n){return(0,_i.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var nf=F(2420);const Mt="primary",No=Symbol("RouteTitle");class ua{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ro(n){return new ua(n)}function dm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const u=r[o],f=n[o];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ii(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!fm(n[i],e[i]))return!1;return!0}function fm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function dr(n){return n.length>0?n[n.length-1]:null}function Fo(n){return function cm(n){return!!n&&(n instanceof gi.y||(0,to.m)(n.lift)&&(0,to.m)(n.subscribe))}(n)?n:(0,c.QGY)(n)?(0,pn.D)(Promise.resolve(n)):(0,ut.of)(n)}const pm={exact:function $u(n,e,t){if(!ha(n.segments,e.segments)||!ol(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!$u(n.children[r],e.children[r],t))return!1;return!0},subset:da},ju={exact:function mm(n,e){return ii(n,e)},subset:function ic(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fm(n[t],e[t]))},ignored:()=>!0};function gm(n,e,t){return pm[t.paths](n.root,e.root,t.matrixParams)&&ju[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function da(n,e,t){return oo(n,e,e.segments,t)}function oo(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ha(i,t)||e.hasChildren()||!ol(i,t,r))}if(n.segments.length===t.length){if(!ha(n.segments,t)||!ol(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!da(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(ha(n.segments,i)&&ol(n.segments,i,r)&&n.children[Mt])&&oo(n.children[Mt],e,o,r)}}function ol(n,e,t){return e.every((r,i)=>ju[t](n[i].parameters,r.parameters))}class Lo{constructor(e=new Gt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return NE.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rf(this)}}class Hu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ro(this.parameters)),this._parameterMap}toString(){return si(this)}}function ha(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let zu=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return new _m},providedIn:"root"})}return n})();class _m{parse(e){const t=new ac(e);return new Lo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Zi(e.root,!0)}`,r=function h0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${qu(t)}=${qu(i)}`).join("&"):`${qu(t)}=${qu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Kn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const NE=new _m;function rf(n){return n.segments.map(e=>si(e)).join("/")}function Zi(n,e){if(!n.hasChildren())return rf(n);if(e){const t=n.children[Mt]?Zi(n.children[Mt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Mt&&r.push(`${i}:${Zi(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function kE(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Mt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Mt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Mt?[Zi(n.children[Mt],!1)]:[`${i}:${Zi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${rf(n)}/${t[0]}`:`${rf(n)}/(${t.join("//")})`}}function Gu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qu(n){return Gu(n).replace(/%3B/gi,";")}function sf(n){return Gu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ao(n){return decodeURIComponent(n)}function ym(n){return ao(n.replace(/\+/g,"%20"))}function si(n){return`${sf(n.path)}${function sc(n){return Object.keys(n).map(e=>`;${sf(e)}=${sf(n[e])}`).join("")}(n.parameters)}`}const oc=/^[^\/()?;#]+/;function Uo(n){const e=n.match(oc);return e?e[0]:""}const Wu=/^[^\/()?;=#]+/,vm=/^[^=?&#]+/,Ni=/^[^&#]+/;class ac{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new Gt(e,t)),r}parseSegment(){const e=Uo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,!1);return this.capture(e),new Hu(ao(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function f0(n){const e=n.match(Wu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Uo(this.remaining);i&&(r=i,this.capture(r))}e[ao(t)]=ao(r)}parseQueryParam(e){const t=function RE(n){const e=n.match(vm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function af(n){const e=n.match(Ni);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=ym(t),o=ym(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Uo(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new c.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Mt);const u=this.parseChildren();t[o]=1===Object.keys(u).length?u[Mt]:new Gt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,!1)}}function p0(n){return n.segments.length>0?new Gt([],{[Mt]:n}):n}function Zu(n){const e={};for(const r of Object.keys(n.children)){const o=Zu(n.children[r]);if(r===Mt&&0===o.segments.length&&o.hasChildren())for(const[u,f]of Object.entries(o.children))e[u]=f;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function g0(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}function fa(n){return n instanceof Lo}function m(n){let e;const i=p0(function t(o){const u={};for(const g of o.children){const v=t(g);u[g.outlet]=v}const f=new Gt(o.url,u);return o===n&&(e=f),f}(n.root));return e??i}function _(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return P(i,i,i,t,r);const o=function Le(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oe(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,u)=>{if("object"==typeof o&&null!=o){if(o.outlets){const f={};return Object.entries(o.outlets).forEach(([g,v])=>{f[g]="string"==typeof v?v.split("/"):v}),[...i,{outlets:f}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===u?(o.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,o]},[]);return new oe(t,e,r)}(e);if(o.toRoot())return P(i,i,new Gt([],{}),t,r);const u=function nt(n,e,t){if(n.isAbsolute)return new He(e,!0,0);if(!t)return new He(e,!1,NaN);if(null===t.parent)return new He(t,!0,0);const r=I(n.commands[0])?0:1;return function Nt(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new c.vHH(4005,!1);i=r.segments.length}return new He(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),f=u.processChildren?co(u.segmentGroup,u.index,o.commands):Ki(u.segmentGroup,u.index,o.commands);return P(i,u.segmentGroup,f,t,r)}function I(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function D(n){return"object"==typeof n&&null!=n&&n.outlets}function P(n,e,t,r,i){let u,o={};r&&Object.entries(r).forEach(([g,v])=>{o[g]=Array.isArray(v)?v.map(b=>`${b}`):`${v}`}),u=n===e?t:Z(n,e,t);const f=p0(Zu(u));return new Lo(f,o,i)}function Z(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:Z(o,e,t)}),new Gt(n.segments,r)}class oe{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&I(r[0]))throw new c.vHH(4003,!1);const i=r.find(D);if(i&&i!==dr(r))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class He{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ki(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return co(n,e,t);const r=function Cm(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const u=n.segments[i],f=t[r];if(D(f))break;const g=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!Ku(g,v,u))return o;r+=2}else{if(!Ku(g,{},u))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Gt(n.segments.slice(0,r.pathIndex),{});return o.children[Mt]=new Gt(n.segments.slice(r.pathIndex),n.children),co(o,0,i)}return r.match&&0===i.length?new Gt(n.segments,{}):r.match&&!n.hasChildren()?al(n,e,t):r.match?co(n,0,i):al(n,e,t)}function co(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const r=function Vr(n){return D(n[0])?n[0].outlets:{[Mt]:n}}(t),i={};if(Object.keys(r).some(o=>o!==Mt)&&n.children[Mt]&&1===n.numberOfChildren&&0===n.children[Mt].segments.length){const o=co(n.children[Mt],e,t);return new Gt(n.segments,o.children)}return Object.entries(r).forEach(([o,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(i[o]=Ki(n.children[o],e,u))}),Object.entries(n.children).forEach(([o,u])=>{void 0===r[o]&&(i[o]=u)}),new Gt(n.segments,i)}}function al(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(D(o)){const g=pa(o.outlets);return new Gt(r,g)}if(0===i&&I(t[0])){r.push(new Hu(n.segments[e].path,ga(t[0]))),i++;continue}const u=D(o)?o.outlets[Mt]:`${o}`,f=i<t.length-1?t[i+1]:null;u&&f&&I(f)?(r.push(new Hu(u,ga(f))),i+=2):(r.push(new Hu(u,{})),i++)}return new Gt(r,{})}function pa(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=al(new Gt([],{}),0,r))}),e}function ga(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Ku(n,e,t){return n==t.path&&ii(e,t.parameters)}const cl="imperative";class Yi{constructor(e,t){this.id=e,this.url=t}}class cc extends Yi{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class As extends Yi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ll extends Yi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bo extends Yi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Yu extends Yi{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cf extends Yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FE extends Yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FA extends Yi{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class LE extends Yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cL extends Yi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lL{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class LA{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UA{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uL{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BA{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lf{}class BE{constructor(e){this.url=e}}class dL{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new wm,this.attachRef=null}}let wm=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new dL,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class VA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Qu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Qu(e,this._root).map(t=>t.value)}}function _0(n,e){if(n===e.value)return e;for(const t of e.children){const r=_0(n,t);if(r)return r}return null}function Qu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Qu(n,t);if(r.length)return r.unshift(e),r}return[]}class xs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ul(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class y0 extends VA{constructor(e,t){super(e),this.snapshot=t,w0(this,e)}toString(){return this.snapshot.toString()}}function v0(n,e){const t=function Ju(n,e){const u=new dl([],{},{},"",{},Mt,e,null,{});return new uf("",new xs(u,[]))}(0,e),r=new lr.X([new Hu("",{})]),i=new lr.X({}),o=new lr.X({}),u=new lr.X({}),f=new lr.X(""),g=new ma(r,i,u,f,o,Mt,e,t.root);return g.snapshot=t.root,new y0(new xs(g,[]),t)}class ma{constructor(e,t,r,i,o,u,f,g){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=u,this.component=f,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,yt.U)(v=>v[No]))??(0,ut.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>Ro(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>Ro(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function C0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Im(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class dl{get title(){return this.data?.[No]}constructor(e,t,r,i,o,u,f,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=u,this.component=f,this.routeConfig=g,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ro(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uf extends VA{constructor(e,t){super(t),this.url=e,w0(this,t)}toString(){return VE(this._root)}}function w0(n,e){e.value._routerState=n,e.children.forEach(t=>w0(n,t))}function VE(n){const e=n.children.length>0?` { ${n.children.map(VE).join(", ")} } `:"";return`${n.value}${e}`}function I0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ii(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ii(e.params,t.params)||n.paramsSubject.next(t.params),function hm(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ii(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ii(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function bm(n,e){const t=ii(n.params,e.params)&&function d0(n,e){return ha(n,e)&&n.every((t,r)=>ii(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||bm(n.parent,e.parent))}let df=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Mt,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(wm),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb),this.inputBinder=(0,c.f3M)(Em,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,!1);this._activatedRoute=t;const i=this.location,u=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new jA(t,f,i.injector);this.activated=i.createComponent(u,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]})}return n})();class jA{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ma?this.route:e===wm?this.childContexts:this.parent.get(e,t)}}const Em=new c.OlP("");let jE=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Xa([r.queryParams,r.params,r.data]).pipe((0,En.w)(([o,u,f],g)=>(f={...o,...u,...f},0===g?(0,ut.of)(f):Promise.resolve(f)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const u=(0,c.qFp)(r.component);if(u)for(const{templateName:f}of u.inputs)t.activatedComponentRef.setInput(f,o[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function hf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function $A(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return hf(n,r,i);return hf(n,r)})}(n,e,t);return new xs(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const u=o.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(f=>hf(n,f)),u}}const r=function Qi(n){return new ma(new lr.X(n.url),new lr.X(n.params),new lr.X(n.queryParams),new lr.X(n.fragment),new lr.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>hf(n,o));return new xs(r,i)}}const ff="ngNavigationCancelingError";function b0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=fa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Tm(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Tm(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ff]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Xu(n){return n&&n[ff]}let E0=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(r,i){1&r&&c._UZ(0,"router-outlet")},dependencies:[df],encapsulation:2})}return n})();function pf(n){const e=n.children&&n.children.map(pf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=E0),t}function ls(n){return n.outlet||Mt}function _a(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class zE{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),I0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ul(t);e.children.forEach(o=>{const u=o.value.outlet;this.deactivateRoutes(o,i[u],r),delete i[u]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ul(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);if(r&&r.outlet){const u=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ul(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=ul(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new uL(o.value.snapshot))}),e.children.length&&this.forwardEvent(new UA(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(I0(i),i===o)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),I0(f.route.value),this.activateChildRoutes(e,null,u.children)}else{const f=_a(i.snapshot);u.attachRef=null,u.route=i,u.injector=f,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class T0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gf{constructor(e,t){this.component=e,this.route=t}}function ed(n,e,t){const r=n._root;return fl(r,e?e._root:null,t,[r.value])}function hl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function fl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ul(e);return n.children.forEach(u=>{(function Dm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){const g=function QA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ha(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ha(n.url,e.url)||!ii(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bm(n,e)||!ii(n.queryParams,e.queryParams);default:return!bm(n,e)}}(u,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new T0(r)):(o.data=u.data,o._resolvedData=u._resolvedData),fl(n,e,o.component?f?f.children:null:t,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new gf(f.outlet.component,u))}else u&&mf(e,f,i),i.canActivateChecks.push(new T0(r)),fl(n,null,o.component?f?f.children:null:t,r,i)})(u,o[u.value.outlet],t,r.concat([u.value]),i),delete o[u.value.outlet]}),Object.entries(o).forEach(([u,f])=>mf(f,t.getContext(u),i)),i}function mf(n,e,t){const r=ul(n),i=n.value;Object.entries(r).forEach(([o,u])=>{mf(u,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new gf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function _f(n){return"function"==typeof n}function WE(n){return n instanceof so||"EmptyError"===n?.name}const td=Symbol("INITIAL_VALUE");function pl(){return(0,En.w)(n=>Xa(n.map(e=>e.pipe(kt(1),tc(td)))).pipe((0,yt.U)(e=>{for(const t of e)if(!0!==t){if(t===td)return td;if(!1===t||t instanceof Lo)return t}return!0}),Cr(e=>e!==td),kt(1)))}function D0(n){return(0,nl.z)(Tn(e=>{if(fa(e))throw b0(0,e)}),(0,yt.U)(e=>!0===e))}class yf{constructor(e){this.segmentGroup=e||null}}class vf{constructor(e){this.urlTree=e}}function Vo(n){return ca(new yf(n))}function A0(n){return ca(new vf(n))}class JE{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new c.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,ut.of)(r);if(i.numberOfChildren>1||!i.children[Mt])return ca(new c.vHH(4e3,!1));i=i.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Lo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const f=o.substring(1);r[i]=t[f]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let u={};return Object.entries(t.children).forEach(([f,g])=>{u[f]=this.createSegmentGroup(e,g,r,i)}),new Gt(o,u)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new c.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Cf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wf(n,e,t,r,i){const o=P0(n,e,t);return o.matched?(r=function HE(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function S0(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,ut.of)(!0);const o=i.map(u=>{const f=hl(u,n);return Fo(function M0(n){return n&&_f(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,ut.of)(o).pipe(pl(),D0())}(r,e,t).pipe((0,yt.U)(u=>!0===u?o:{...Cf}))):(0,ut.of)(o)}function P0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Cf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||dm)(t,n,e);if(!i)return{...Cf};const o={};Object.entries(i.posParams??{}).forEach(([f,g])=>{o[f]=g.path});const u=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function O0(n,e,t,r){return t.length>0&&function ox(n,e,t){return t.some(r=>If(n,e,r)&&ls(r)!==Mt)}(n,t,r)?{segmentGroup:new Gt(e,sx(r,new Gt(t,n.children))),slicedSegments:[]}:0===t.length&&function XE(n,e,t){return t.some(r=>If(n,e,r))}(n,t,r)?{segmentGroup:new Gt(n.segments,ix(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Gt(n.segments,n.children),slicedSegments:t}}function ix(n,e,t,r,i){const o={};for(const u of r)if(If(n,t,u)&&!i[ls(u)]){const f=new Gt([],{});o[ls(u)]=f}return{...i,...o}}function sx(n,e){const t={};t[Mt]=e;for(const r of n)if(""===r.path&&ls(r)!==Mt){const i=new Gt([],{});t[ls(r)]=i}return t}function If(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class ax{constructor(e,t,r,i,o,u,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=u,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new JE(this.urlSerializer,this.urlTree)}noMatchError(e){return new c.vHH(4002,!1)}recognize(){const e=O0(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Mt).pipe(Ss(t=>{if(t instanceof vf)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof yf?this.noMatchError(t):t}),(0,yt.U)(t=>{const r=new dl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Mt,this.rootComponentType,null,{}),i=new xs(r,t),o=new uf("",i),u=function w(n,e,t=null,r=null){return _(m(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(o._root),{state:o,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Mt).pipe(Ss(r=>{throw r instanceof yf?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=C0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,pn.D)(i).pipe(ko(o=>{const u=r.children[o],f=function KA(n,e){const t=n.filter(r=>ls(r)===e);return t.push(...n.filter(r=>ls(r)!==e)),t}(t,o);return this.processSegmentGroup(e,f,u,o)}),la((o,u)=>(o.push(...u),o)),il(null),function um(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cr((i,o)=>n(i,o,r)):oa.y,nc(1),t?il(e):sl(()=>new so))}(),(0,yi.z)(o=>{if(null===o)return Vo(r);const u=e1(o);return function cx(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),(0,ut.of)(u)}))}processSegment(e,t,r,i,o,u){return(0,pn.D)(t).pipe(ko(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,o,u).pipe(Ss(g=>{if(g instanceof yf)return(0,ut.of)(null);throw g}))),ur(f=>!!f),Ss(f=>{if(WE(f))return function k0(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?(0,ut.of)([]):Vo(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,o,u,f){return function Pm(n,e,t,r){return!!(ls(n)===r||r!==Mt&&If(e,t,n))&&("**"===n.path||P0(e,n,t).matched)}(r,i,o,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,u,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,u):Vo(i):Vo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?A0(o):this.applyRedirects.lineralizeSegments(r,o).pipe((0,yi.z)(u=>{const f=new Gt(u,{});return this.processSegment(e,t,f,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,u){const{matched:f,consumedSegments:g,remainingSegments:v,positionalParamSegments:b}=P0(t,i,o);if(!f)return Vo(t);const T=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,b);return i.redirectTo.startsWith("/")?A0(T):this.applyRedirects.lineralizeSegments(i,T).pipe((0,yi.z)(S=>this.processSegment(e,r,t,S.concat(v),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,u){let f;if("**"===r.path){const g=i.length>0?dr(i).parameters:{},v=new dl(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,n1(r),ls(r),r.component??r._loadedComponent??null,r,ml(r));f=(0,ut.of)({snapshot:v,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=wf(t,r,i,e).pipe((0,yt.U)(({matched:g,consumedSegments:v,remainingSegments:b,parameters:T})=>g?{snapshot:new dl(v,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,n1(r),ls(r),r.component??r._loadedComponent??null,r,ml(r)),consumedSegments:v,remainingSegments:b}:null));return f.pipe((0,En.w)(g=>null===g?Vo(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,En.w)(({routes:v})=>{const b=r._loadedInjector??e,{snapshot:T,consumedSegments:S,remainingSegments:N}=g,{segmentGroup:q,slicedSegments:Q}=O0(t,S,N,v);if(0===Q.length&&q.hasChildren())return this.processChildren(b,v,q).pipe((0,yt.U)(Ee=>null===Ee?null:[new xs(T,Ee)]));if(0===v.length&&0===Q.length)return(0,ut.of)([new xs(T,[])]);const J=ls(r)===o;return this.processSegment(b,v,q,Q,J?Mt:o,!0).pipe((0,yt.U)(Ee=>[new xs(T,Ee)]))}))))}getChildConfig(e,t,r){return t.children?(0,ut.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,ut.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function QE(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,ut.of)(!0);const o=i.map(u=>{const f=hl(u,n);return Fo(function XA(n){return n&&_f(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,ut.of)(o).pipe(pl(),D0())}(e,t,r).pipe((0,yi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(Tn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function xm(n){return ca(Tm(!1,3))}())):(0,ut.of)({routes:[],injector:e})}}function mL(n){const e=n.value.routeConfig;return e&&""===e.path}function e1(n){const e=[],t=new Set;for(const r of n){if(!mL(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=e1(r.children);e.push(new xs(r.value,i))}return e.filter(r=>!t.has(r))}function n1(n){return n.data||{}}function ml(n){return n.resolve||{}}function c1(n){return"string"==typeof n.title||null===n.title}function R0(n){return(0,En.w)(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,yt.U)(()=>e)):(0,ut.of)(e)})}const rd=new c.OlP("ROUTES");let F0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,c.f3M)(c.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,ut.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Fo(t.loadComponent()).pipe((0,yt.U)(id),Tn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),rc(()=>{this.componentLoaders.delete(t)})),i=new Uu(r,()=>new ki.x).pipe(ef());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,ut.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function lx(n,e,t,r){return Fo(n.loadChildren()).pipe((0,yt.U)(id),(0,yi.z)(i=>i instanceof c.YKP||Array.isArray(i)?(0,ut.of)(i):(0,pn.D)(e.compileModuleAsync(i))),(0,yt.U)(i=>{r&&r(n);let o,u,f=!1;return Array.isArray(i)?(u=i,!0):(o=i.create(t).injector,u=o.get(rd,[],{optional:!0,self:!0}).flat()),{routes:u.map(pf),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(rc(()=>{this.childrenLoaders.delete(r)})),u=new Uu(o,()=>new ki.x).pipe(ef());return this.childrenLoaders.set(r,u),u}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function id(n){return function lc(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let km=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ki.x,this.transitionAbortSubject=new ki.x,this.configLoader=(0,c.f3M)(F0),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(zu),this.rootContexts=(0,c.f3M)(wm),this.inputBindingEnabled=null!==(0,c.f3M)(Em,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ut.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new lL(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new UE(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new lr.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:cl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Cr(o=>0!==o.id),(0,yt.U)(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),(0,En.w)(o=>{this.currentTransition=o;let u=!1,f=!1;return(0,ut.of)(o).pipe(Tn(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,En.w)(g=>{const v=g.currentBrowserUrl.toString(),b=!t.navigated||g.extractedUrl.toString()!==v||v!==g.currentUrlTree.toString();if(!b&&"reload"!==(g.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new Bo(g.id,this.urlSerializer.serialize(g.rawUrl),S,0)),g.resolve(null),Oo.E}if(t.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return(0,ut.of)(g).pipe((0,En.w)(S=>{const N=this.transitions?.getValue();return this.events.next(new cc(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions?.getValue()?Oo.E:Promise.resolve(S)}),function Om(n,e,t,r,i,o){return(0,yi.z)(u=>function nd(n,e,t,r,i,o,u="emptyOnly"){return new ax(n,e,t,r,i,u,o).recognize()}(n,e,t,r,u.extractedUrl,i,o).pipe((0,yt.U)(({state:f,tree:g})=>({...u,targetSnapshot:f,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Tn(S=>{o.targetSnapshot=S.targetSnapshot,o.urlAfterRedirects=S.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects};const N=new cf(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(N)}));if(b&&t.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:S,extractedUrl:N,source:q,restoredState:Q,extras:J}=g,Ee=new cc(S,this.urlSerializer.serialize(N),q,Q);this.events.next(Ee);const ze=v0(0,this.rootComponentType).snapshot;return this.currentTransition=o={...g,targetSnapshot:ze,urlAfterRedirects:N,extras:{...J,skipLocationChange:!1,replaceUrl:!1}},(0,ut.of)(o)}{const S="";return this.events.next(new Bo(g.id,this.urlSerializer.serialize(g.extractedUrl),S,1)),g.resolve(null),Oo.E}}),Tn(g=>{const v=new FE(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}),(0,yt.U)(g=>(this.currentTransition=o={...g,guards:ed(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},o)),function gl(n,e){return(0,yi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:u}}=t;return 0===u.length&&0===o.length?(0,ut.of)({...t,guardsResult:!0}):function ZE(n,e,t,r){return(0,pn.D)(n).pipe((0,yi.z)(i=>function YE(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,ut.of)(!0);const u=o.map(f=>{const g=_a(e)??i,v=hl(f,g);return Fo(function Sm(n){return n&&_f(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):g.runInContext(()=>v(n,e,t,r))).pipe(ur())});return(0,ut.of)(u).pipe(pl())}(i.component,i.route,t,e,r)),ur(i=>!0!==i,!0))}(u,r,i,n).pipe((0,yi.z)(f=>f&&function JA(n){return"boolean"==typeof n}(f)?function KE(n,e,t,r){return(0,pn.D)(e).pipe(ko(i=>aa(function gL(n,e){return null!==n&&e&&e(new LA(n)),(0,ut.of)(!0)}(i.route.parent,r),function nx(n,e){return null!==n&&e&&e(new m0(n)),(0,ut.of)(!0)}(i.route,r),function rx(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(u=>function Mm(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>Xh(()=>{const f=u.guards.map(g=>{const v=_a(u.node)??t,b=hl(g,v);return Fo(function GE(n){return n&&_f(n.canActivateChild)}(b)?b.canActivateChild(r,n):v.runInContext(()=>b(r,n))).pipe(ur())});return(0,ut.of)(f).pipe(pl())}));return(0,ut.of)(o).pipe(pl())}(n,i.path,t),function Am(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ut.of)(!0);const i=r.map(o=>Xh(()=>{const u=_a(e)??t,f=hl(o,u);return Fo(function ex(n){return n&&_f(n.canActivate)}(f)?f.canActivate(e,n):u.runInContext(()=>f(e,n))).pipe(ur())}));return(0,ut.of)(i).pipe(pl())}(n,i.route,t))),ur(i=>!0!==i,!0))}(r,o,n,e):(0,ut.of)(f)),(0,yt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,g=>this.events.next(g)),Tn(g=>{if(o.guardsResult=g.guardsResult,fa(g.guardsResult))throw b0(0,g.guardsResult);const v=new FA(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(v)}),Cr(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",3),!1)),R0(g=>{if(g.guards.canActivateChecks.length)return(0,ut.of)(g).pipe(Tn(v=>{const b=new LE(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}),(0,En.w)(v=>{let b=!1;return(0,ut.of)(v).pipe(function N0(n,e){return(0,yi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,ut.of)(t);let o=0;return(0,pn.D)(i).pipe(ko(u=>function r1(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!c1(i)&&(o[No]=i.title),function s1(n,e,t,r){const i=function o1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,ut.of)({});const o={};return(0,pn.D)(i).pipe((0,yi.z)(u=>function a1(n,e,t,r){const i=_a(e)??r,o=hl(n,i);return Fo(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[u],e,t,r).pipe(ur(),Tn(f=>{o[u]=f}))),nc(1),function tf(n){return(0,yt.U)(()=>n)}(o),Ss(u=>WE(u)?Oo.E:ca(u)))}(o,n,e,r).pipe((0,yt.U)(u=>(n._resolvedData=u,n.data=C0(n,t).resolve,i&&c1(i)&&(n.data[No]=i.title),null)))}(u.route,r,n,e)),Tn(()=>o++),nc(1),(0,yi.z)(u=>o===i.length?(0,ut.of)(t):Oo.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),Tn({next:()=>b=!0,complete:()=>{b||this.cancelNavigationTransition(v,"",2)}}))}),Tn(v=>{const b=new cL(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}))}),R0(g=>{const v=b=>{const T=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(b.routeConfig).pipe(Tn(S=>{b.component=S}),(0,yt.U)(()=>{})));for(const S of b.children)T.push(...v(S));return T};return Xa(v(g.targetSnapshot.root)).pipe(il(),kt(1))}),R0(()=>this.afterPreactivation()),(0,yt.U)(g=>{const v=function $E(n,e,t){const r=hf(n,e._root,t?t._root:void 0);return new y0(r,e)}(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=o={...g,targetRouterState:v},o}),Tn(()=>{this.events.next(new lf)}),((n,e,t,r)=>(0,yt.U)(i=>(new zE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),kt(1),Tn({next:g=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new As(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),t.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{u=!0}}),function Vu(n){return(0,_i.e)((e,t)=>{(0,Lu.Xf)(n).subscribe((0,mi.x)(t,()=>t.complete(),nf.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Tn(g=>{throw g}))),rc(()=>{u||f||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Ss(g=>{if(f=!0,Xu(g))this.events.next(new ll(o.id,this.urlSerializer.serialize(o.extractedUrl),g.message,g.cancellationCode)),function vi(n){return Xu(n)&&fa(n.url)}(g)?this.events.next(new BE(g.url)):o.resolve(!1);else{this.events.next(new Yu(o.id,this.urlSerializer.serialize(o.extractedUrl),g,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(g))}catch(v){o.reject(v)}}return Oo.E}))}))}cancelNavigationTransition(t,r,i){const o=new ll(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ux(n){return n!==cl}let dx=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Mt);return r}getResolvedTitleForRoute(t){return t.data[No]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(_L)},providedIn:"root"})}return n})(),_L=(()=>{class n extends dx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(ve))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(l1)},providedIn:"root"})}return n})();class vL{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let l1=(()=>{class n extends vL{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}();static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Nm=new c.OlP("",{providedIn:"root",factory:()=>({})});let hx=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(fx)},providedIn:"root"})}return n})(),fx=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bf=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(bf||{});function Rm(n,e){n.events.pipe(Cr(t=>t instanceof As||t instanceof ll||t instanceof Yu||t instanceof Bo),(0,yt.U)(t=>t instanceof As||t instanceof Bo?bf.COMPLETE:t instanceof ll&&(0===t.code||1===t.code)?bf.REDIRECTING:bf.FAILED),Cr(t=>t!==bf.REDIRECTING),kt(1)).subscribe(()=>{e()})}function ya(n){throw n}function Ef(n,e,t){return e.parse("/")}const u1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},d1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mn=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this._events=new ki.x,this.options=(0,c.f3M)(Nm,{optional:!0})||{},this.pendingTasks=(0,c.f3M)(c.HDt),this.errorHandler=this.options.errorHandler||ya,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ef,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(hx),this.routeReuseStrategy=(0,c.f3M)(yL),this.titleStrategy=(0,c.f3M)(dx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,c.f3M)(rd,{optional:!0})?.flat()??[],this.navigationTransitions=(0,c.f3M)(km),this.urlSerializer=(0,c.f3M)(zu),this.location=(0,c.f3M)(De),this.componentInputBindingEnabled=!!(0,c.f3M)(Em,{optional:!0}),this.eventsSubscription=new rl.w0,this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Lo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=v0(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(px(r)&&this._events.next(r));if(r instanceof cc)ux(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Bo)this.rawUrlTree=i.rawUrl;else if(r instanceof cf){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof lf)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof ll)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof BE){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ux(i.source)};this.scheduleNavigation(o,cl,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Yu&&this.restoreHistory(i,!0),r instanceof As&&(this.navigated=!0),px(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),cl,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},u=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,u,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(pf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:u,queryParamsHandling:f,preserveFragment:g}=r,v=g?this.currentUrlTree.fragment:u;let T,b=null;switch(f){case"merge":b={...this.currentUrlTree.queryParams,...o};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=o||null}null!==b&&(b=this.removeEmptyProps(b));try{T=m(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),T=this.currentUrlTree.root}return _(T,t,b,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=fa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,cl,null,r)}navigate(t,r={skipLocationChange:!1}){return function CL(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new c.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...u1}:!1===r?{...d1}:r,fa(t))return gm(this.currentUrlTree,t,i);const o=this.parseUrl(t);return gm(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,u){if(this.disposed)return Promise.resolve(!1);let f,g,v;u?(f=u.resolve,g=u.reject,v=u.promise):v=new Promise((T,S)=>{f=T,g=S});const b=this.pendingTasks.add();return Rm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:f,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",u)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function px(n){return!(n instanceof lf||n instanceof BE)}let Tf=(()=>{class n{constructor(t,r,i,o,u,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=u,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new ki.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const g=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof As&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,u){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,c.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Mn),c.Y36(ma),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(Oe))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&c.NdJ("click",function(u){return i.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&r&&c.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",c.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",c.VuI],replaceUrl:["replaceUrl","replaceUrl",c.VuI],routerLink:"routerLink"},standalone:!0,features:[c.Xq5,c.TTD]})}return n})(),Mf=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,u){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=u,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof As&&this.update()})}ngAfterContentInit(){(0,ut.of)(this.links.changes,(0,ut.of)(null)).pipe((0,tl.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,pn.D)(t).pipe((0,tl.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function L0(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Mn),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(Tf,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&c.Suo(o,Tf,5),2&r){let u;c.iGM(u=c.CRH())&&(i.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[c.TTD]})}return n})();class gx{}let _x=(()=>{class n{constructor(t,r,i,o,u){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Cr(t=>t instanceof As),ko(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,c.MMx)(o.providers,t,`Route: ${o.path}`));const u=o._injector??t,f=o._loadedInjector??u;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(u,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(f,o.children??o._loadedRoutes))}return(0,pn.D)(i).pipe((0,tl.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,ut.of)(null);const o=i.pipe((0,yi.z)(u=>null===u?(0,ut.of)(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,pn.D)([o,u]).pipe((0,tl.J)())}return o})}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Mn),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(gx),c.LFG(F0))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const U0=new c.OlP("");let h1=(()=>{class n{constructor(t,r,i,o,u={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof cc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof As?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Bo&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof BA&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new BA(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){c.$Z()};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function Ps(n,e){return{\u0275kind:n,\u0275providers:e}}function p1(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(Mn),i=n.get(g1);1===n.get(Sf)&&r.initialNavigation(),n.get(_1,null,c.XFs.Optional)?.setUpPreloading(),n.get(U0,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const g1=new c.OlP("",{factory:()=>new ki.x}),Sf=new c.OlP("",{providedIn:"root",factory:()=>1}),_1=new c.OlP("");function Cx(n){return Ps(0,[{provide:_1,useExisting:_x},{provide:gx,useExisting:n}])}const sd=new c.OlP("ROUTER_FORROOT_GUARD"),y1=[De,{provide:zu,useClass:_m},Mn,wm,{provide:ma,useFactory:function B0(n){return n.routerState.root},deps:[Mn]},F0,[]];function v1(){return new c.PXZ("Router",Mn)}let Fm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[y1,[],{provide:rd,multi:!0,useValue:t},{provide:sd,useFactory:w1,deps:[[Mn,new c.FiY,new c.tp0]]},{provide:Nm,useValue:r||{}},r?.useHash?{provide:Oe,useClass:Ce}:{provide:Oe,useClass:Je},{provide:U0,useFactory:()=>{const n=(0,c.f3M)(Jr),e=(0,c.f3M)(c.R0b),t=(0,c.f3M)(Nm),r=(0,c.f3M)(km),i=(0,c.f3M)(zu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new h1(i,r,n,e,t)}},r?.preloadingStrategy?Cx(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:v1},r?.initialNavigation?Lm(r):[],r?.bindToComponentInputs?Ps(8,[jE,{provide:Em,useExisting:jE}]).\u0275providers:[],[{provide:bx,useFactory:p1},{provide:c.tb,multi:!0,useExisting:bx}]]}}static forChild(t){return{ngModule:n,providers:[{provide:rd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(sd,8))};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();function w1(n){return"guarded"}function Lm(n){return["disabled"===n.initialNavigation?Ps(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(Mn);return()=>{e.setUpLocationChangeListener()}}},{provide:Sf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ps(2,[{provide:Sf,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(Fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Mn),o=e.get(g1);Rm(i,()=>{r(!0)}),e.get(km).afterPreactivation=()=>(r(!0),o.closed?(0,ut.of)(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const bx=new c.OlP("");var U=F(5861),Um=F(305);function Dn(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const o=new Um.Hp({next:u=>{r(u),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new so)}});n.subscribe(o)})}class $0 extends rl.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const _l={setInterval(n,e,...t){const{delegate:r}=_l;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=_l;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var jo=F(9039);class xf extends $0{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return _l.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&_l.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,jo.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Pf={now:()=>(Pf.delegate||Date).now(),delegate:void 0};class Of{constructor(e,t=Of.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Of.now=Pf.now;class b1 extends Of{constructor(e,t=Of.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const H0=new b1(xf);var Sn=F(7592);(0,Sn.registerVersion)("firebase","9.23.0","app");var wr=F(4537),Ri=F(7879),z=F(9058),E1=F(1878);class z0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function ML(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const T1="@firebase/app",yl=new Ri.Yd("@firebase/app"),$m="[DEFAULT]",xL={[T1]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vl=new Map,Cl=new Map;function X0(n,e){try{n.container.addComponent(e)}catch(t){yl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ji(n){const e=n.name;if(Cl.has(e))return yl.debug(`There were multiple attempts to register component ${e}.`),!1;Cl.set(e,n);for(const t of vl.values())X0(t,n);return!0}function wl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const va=new z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class x1{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wr.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw va.create("app-deleted",{appName:this._name})}}function P1(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:$m,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw va.create("bad-app-name",{appName:String(i)});if(t||(t=(0,z.aH)()),!t)throw va.create("no-options");const o=vl.get(i);if(o){if((0,z.vZ)(t,o.options)&&(0,z.vZ)(r,o.config))return o;throw va.create("duplicate-app",{appName:i})}const u=new wr.H0(i);for(const g of Cl.values())u.addComponent(g);const f=new x1(t,r,u);return vl.set(i,f),f}function Ff(n=$m){const e=vl.get(n);if(!e&&n===$m&&(0,z.aH)())return P1();if(!e)throw va.create("no-app",{appName:n});return e}function Fi(n,e,t){var r;let i=null!==(r=xL[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${i}" with version "${e}":`];return o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void yl.warn(f.join(" "))}Ji(new wr.wA(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Rx="firebase-heartbeat-database",Fx=1,ld="firebase-heartbeat-store";let Hm=null;function zm(){return Hm||(Hm=(0,E1.X3)(Rx,Fx,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ld)}}).catch(n=>{throw va.create("idb-open",{originalErrorMessage:n.message})})),Hm}function Uf(){return(Uf=(0,U.Z)(function*(n){try{return yield(yield zm()).transaction(ld).objectStore(ld).get(O1(n))}catch(e){if(e instanceof z.ZR)yl.warn(e.message);else{const t=va.create("idb-get",{originalErrorMessage:e?.message});yl.warn(t.message)}}})).apply(this,arguments)}function tC(n,e){return nC.apply(this,arguments)}function nC(){return(nC=(0,U.Z)(function*(n,e){try{const r=(yield zm()).transaction(ld,"readwrite");yield r.objectStore(ld).put(e,O1(n)),yield r.done}catch(t){if(t instanceof z.ZR)yl.warn(t.message);else{const r=va.create("idb-set",{originalErrorMessage:t?.message});yl.warn(r.message)}}})).apply(this,arguments)}function O1(n){return`${n.name}!${n.options.appId}`}class N1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new FL(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,U.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=R1();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(o=>o.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,U.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=R1(),{heartbeatsToSend:r,unsentEntries:i}=function Ux(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(u=>u.agent===i.agent);if(o){if(o.dates.push(i.date),rC(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),rC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=(0,z.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o})()}}function R1(){return(new Date).toISOString().substring(0,10)}class FL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,U.Z)(function*(){return!!(0,z.hl)()&&(0,z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,U.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function RL(n){return Uf.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,U.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return tC(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,U.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return tC(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function rC(n){return(0,z.L)(JSON.stringify({version:2,heartbeats:n})).length}!function F1(n){Ji(new wr.wA("platform-logger",e=>new z0(e),"PRIVATE")),Ji(new wr.wA("heartbeat",e=>new N1(e),"PRIVATE")),Fi(T1,"0.9.20",n),Fi(T1,"0.9.20","esm2017"),Fi("fire-js","")}("");const lo=(n,e)=>e.some(t=>n instanceof t);let iC,Bx;const Gm=new WeakMap,oC=new WeakMap,Vx=new WeakMap,aC=new WeakMap,Bf=new WeakMap;let cC={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return oC.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Vx.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ho(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function jx(n){return"function"==typeof n?function jr(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function uc(){return Bx||(Bx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(lC(this),e),Ho(Gm.get(this))}:function(...e){return Ho(n.apply(lC(this),e))}:function(e,...t){const r=n.call(lC(this),e,...t);return Vx.set(r,e.sort?e.sort():[e]),Ho(r)}}(n):(n instanceof IDBTransaction&&function L1(n){if(oC.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});oC.set(n,e)}(n),lo(n,function sC(){return iC||(iC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,cC):n)}function Ho(n){if(n instanceof IDBRequest)return function $o(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(Ho(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Gm.set(t,n)}).catch(()=>{}),Bf.set(e,n),e}(n);if(aC.has(n))return aC.get(n);const e=jx(n);return e!==n&&(aC.set(n,e),Bf.set(e,n)),e}const lC=n=>Bf.get(n),B1=["get","getKey","getAll","getAllKeys","count"],V1=["put","add","delete","clear"],uC=new Map;function dC(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(uC.get(e))return uC.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=V1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!B1.includes(t))return;const o=function(){var u=(0,U.Z)(function*(f,...g){const v=this.transaction(f,i?"readwrite":"readonly");let b=v.store;return r&&(b=b.index(g.shift())),(yield Promise.all([b[t](...g),i&&v.done]))[0]});return function(g){return u.apply(this,arguments)}}();return uC.set(e,o),o}!function LL(n){cC=n(cC)}(n=>({...n,get:(e,t,r)=>dC(e,t)||n.get(e,t,r),has:(e,t)=>!!dC(e,t)||n.has(e,t)}));const hC="@firebase/installations",fC="0.6.4",j1=1e4,$1=`w:${fC}`,pC="FIS_v2",ud="https://firebaseinstallations.googleapis.com/v1",Ca=36e5,zo=new z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function gC(n){return n instanceof z.ZR&&n.code.includes("request-failed")}function Vf({projectId:n}){return`${ud}/projects/${n}/installations`}function hd(n){return{token:n.token,requestStatus:2,expiresIn:Gx(n.expiresIn),creationTime:Date.now()}}function fd(n,e){return qm.apply(this,arguments)}function qm(){return(qm=(0,U.Z)(function*(n,e){const r=(yield e.json()).error;return zo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function mC({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function _C(n){return yC.apply(this,arguments)}function yC(){return(yC=(0,U.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function Gx(n){return Number(n.replace("s","000"))}function vC(){return(vC=(0,U.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Vf(n),i=mC(n),o=e.getImmediate({optional:!0});if(o){const v=yield o.getHeartbeatsHeader();v&&i.append("x-firebase-client",v)}const f={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:pC,appId:n.appId,sdkVersion:$1})},g=yield _C(()=>fetch(r,f));if(g.ok){const v=yield g.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:hd(v.authToken)}}throw yield fd("Create Installation",g)})).apply(this,arguments)}function qx(n){return new Promise(e=>{setTimeout(e,n)})}const G1=/^[cdef][\w-]{21}$/,Wm="";function VL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Zm(n){return function BL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return G1.test(t)?t:Wm}catch{return Wm}}function jf(n){return`${n.appName}!${n.appId}`}const bl=new Map;function CC(n,e){const t=jf(n);wC(t,e),function Dt(n,e){const t=function IC(){return!dc&&"BroadcastChannel"in self&&(dc=new BroadcastChannel("[Firebase] FID Change"),dc.onmessage=n=>{wC(n.data.key,n.data.fid)}),dc}();t&&t.postMessage({key:n,fid:e}),function El(){0===bl.size&&dc&&(dc.close(),dc=null)}()}(t,e)}function wC(n,e){const t=bl.get(n);if(t)for(const r of t)r(e)}let dc=null;const W1="firebase-installations-database",Zx=1,Go="firebase-installations-store";let hc=null;function $f(){return hc||(hc=function $x(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const u=indexedDB.open(n,e),f=Ho(u);return r&&u.addEventListener("upgradeneeded",g=>{r(Ho(u.result),g.oldVersion,g.newVersion,Ho(u.transaction))}),t&&u.addEventListener("blocked",()=>t()),f.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}(W1,Zx,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Go)}})),hc}function fc(n,e){return Km.apply(this,arguments)}function Km(){return(Km=(0,U.Z)(function*(n,e){const t=jf(n),i=(yield $f()).transaction(Go,"readwrite"),o=i.objectStore(Go),u=yield o.get(t);return yield o.put(e,t),yield i.done,(!u||u.fid!==e.fid)&&CC(n,e.fid),e})).apply(this,arguments)}function Hf(n){return zf.apply(this,arguments)}function zf(){return(zf=(0,U.Z)(function*(n){const e=jf(n),r=(yield $f()).transaction(Go,"readwrite");yield r.objectStore(Go).delete(e),yield r.done})).apply(this,arguments)}function Tl(n,e){return Ym.apply(this,arguments)}function Ym(){return(Ym=(0,U.Z)(function*(n,e){const t=jf(n),i=(yield $f()).transaction(Go,"readwrite"),o=i.objectStore(Go),u=yield o.get(t),f=e(u);return void 0===f?yield o.delete(t):yield o.put(f,t),yield i.done,f&&(!u||u.fid!==f.fid)&&CC(n,f.fid),f})).apply(this,arguments)}function Gf(n){return bC.apply(this,arguments)}function bC(){return bC=(0,U.Z)(function*(n){let e;const t=yield Tl(n.appConfig,r=>{const i=function Kx(n){return MC(n||{fid:VL(),registrationStatus:0})}(r),o=function Yx(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(zo.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Z1(n,e){return EC.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Qx(n)}:{installationEntry:e}}(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===Wm?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),bC.apply(this,arguments)}function EC(){return EC=(0,U.Z)(function*(n,e){try{const t=yield function UL(n,e){return vC.apply(this,arguments)}(n,e);return fc(n.appConfig,t)}catch(t){throw gC(t)&&409===t.customData.serverCode?yield Hf(n.appConfig):yield fc(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),EC.apply(this,arguments)}function Qx(n){return TC.apply(this,arguments)}function TC(){return(TC=(0,U.Z)(function*(n){let e=yield K1(n.appConfig);for(;1===e.registrationStatus;)yield qx(100),e=yield K1(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Gf(n);return r||t}return e})).apply(this,arguments)}function K1(n){return Tl(n,e=>{if(!e)throw zo.create("installation-not-found");return MC(e)})}function MC(n){return function Y1(n){return 1===n.registrationStatus&&n.registrationTime+j1<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function DC(){return(DC=(0,U.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function us(n,{fid:e}){return`${Vf(n)}/${e}/authTokens:generate`}(n,t),i=function H1(n,{refreshToken:e}){const t=mC(n);return t.append("Authorization",function z1(n){return`${pC} ${n}`}(e)),t}(n,t),o=e.getImmediate({optional:!0});if(o){const v=yield o.getHeartbeatsHeader();v&&i.append("x-firebase-client",v)}const f={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:$1,appId:n.appId}})},g=yield _C(()=>fetch(r,f));if(g.ok)return hd(yield g.json());throw yield fd("Generate Auth Token",g)})).apply(this,arguments)}function SC(n){return AC.apply(this,arguments)}function AC(){return AC=(0,U.Z)(function*(n,e=!1){let t;const r=yield Tl(n.appConfig,o=>{if(!Q1(o))throw zo.create("not-registered");const u=o.authToken;if(!e&&function J1(n){return 2===n.requestStatus&&!function eP(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Ca}(n)}(u))return o;if(1===u.requestStatus)return t=function jL(n,e){return qf.apply(this,arguments)}(n,e),o;{if(!navigator.onLine)throw zo.create("app-offline");const f=function tP(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(o);return t=function Xx(n,e){return PC.apply(this,arguments)}(n,f),f}});return t?yield t:r.authToken}),AC.apply(this,arguments)}function qf(){return(qf=(0,U.Z)(function*(n,e){let t=yield xC(n.appConfig);for(;1===t.authToken.requestStatus;)yield qx(100),t=yield xC(n.appConfig);const r=t.authToken;return 0===r.requestStatus?SC(n,e):r})).apply(this,arguments)}function xC(n){return Tl(n,e=>{if(!Q1(e))throw zo.create("not-registered");return function OC(n){return 1===n.requestStatus&&n.requestTime+j1<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function PC(){return PC=(0,U.Z)(function*(n,e){try{const t=yield function Jx(n,e){return DC.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield fc(n.appConfig,r),t}catch(t){if(!gC(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield fc(n.appConfig,r)}else yield Hf(n.appConfig);throw t}}),PC.apply(this,arguments)}function Q1(n){return void 0!==n&&2===n.registrationStatus}function kC(){return(kC=(0,U.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Gf(e);return r?r.catch(console.error):SC(e).catch(console.error),t.fid})).apply(this,arguments)}function NC(){return NC=(0,U.Z)(function*(n,e=!1){const t=n;return yield function iP(n){return Os.apply(this,arguments)}(t),(yield SC(t,e)).token}),NC.apply(this,arguments)}function Os(){return(Os=(0,U.Z)(function*(n){const{registrationPromise:e}=yield Gf(n);e&&(yield e)})).apply(this,arguments)}function eT(n){return zo.create("missing-app-config-values",{valueName:n})}const BC="installations",nT=n=>{const e=n.getProvider("app").getImmediate(),t=function UC(n){if(!n||!n.options)throw eT("App Configuration");if(!n.name)throw eT("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw eT(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:wl(e,"heartbeat"),_delete:()=>Promise.resolve()}},rT=n=>{const t=wl(n.getProvider("app").getImmediate(),BC).getImmediate();return{getId:()=>function nP(n){return kC.apply(this,arguments)}(t),getToken:i=>function rP(n){return NC.apply(this,arguments)}(t,i)}};(function VC(){Ji(new wr.wA(BC,nT,"PUBLIC")),Ji(new wr.wA("installations-internal",rT,"PRIVATE"))})(),Fi(hC,fC),Fi(hC,fC,"esm2017");const uo="@firebase/remote-config",Li=new z.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Kf{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,U.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const o=yield t.client.fetch(e),u=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===o.status&&u.push(t.storage.setLastSuccessfulFetchResponse(o)),yield Promise.all(u),o})()}}function pP(n=navigator){return n.languages&&n.languages[0]||n.language}class gP{constructor(e,t,r,i,o,u){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=u}fetch(e){var t=this;return(0,U.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),u=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,f={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},g={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:pP()},v={method:"POST",headers:f,body:JSON.stringify(g)},b=fetch(u,v),T=new Promise((Ee,ze)=>{e.signal.addEventListener(()=>{const Ne=new Error("The operation was aborted.");Ne.name="AbortError",ze(Ne)})});let S;try{yield Promise.race([b,T]),S=yield b}catch(Ee){let ze="fetch-client-network";throw"AbortError"===Ee?.name&&(ze="fetch-timeout"),Li.create(ze,{originalErrorMessage:Ee?.message})}let N=S.status;const q=S.headers.get("ETag")||void 0;let Q,J;if(200===S.status){let Ee;try{Ee=yield S.json()}catch(ze){throw Li.create("fetch-client-parse",{originalErrorMessage:ze?.message})}Q=Ee.entries,J=Ee.state}if("INSTANCE_STATE_UNSPECIFIED"===J?N=500:"NO_CHANGE"===J?N=304:("NO_TEMPLATE"===J||"EMPTY_CONFIG"===J)&&(Q={}),304!==N&&200!==N)throw Li.create("fetch-status",{httpStatus:N});return{status:N,eTag:q,config:Q}})()}}class yP{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,U.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,U.Z)(function*(){yield function mP(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Li.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const o=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),o}catch(o){if(!function _P(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o))throw o;const u={throttleEndTimeMillis:Date.now()+(0,z.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(u),i.attemptFetch(e,u)}})()}}class wP{constructor(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yf(n,e){const t=n.target.error||void 0;return Li.create(e,{originalErrorMessage:t&&t?.message})}const wa="app_namespace_store";class EP{constructor(e,t,r,i=function bP(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Yf(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(wa,{keyPath:"compositeKey"})}}catch(t){e(Li.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,U.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const f=r.transaction([wa],"readonly").objectStore(wa),g=t.createCompositeKey(e);try{const v=f.get(g);v.onerror=b=>{o(Yf(b,"storage-get"))},v.onsuccess=b=>{const T=b.target.result;i(T?T.value:void 0)}}catch(v){o(Li.create("storage-get",{originalErrorMessage:v?.message}))}})})()}set(e,t){var r=this;return(0,U.Z)(function*(){const i=yield r.openDbPromise;return new Promise((o,u)=>{const g=i.transaction([wa],"readwrite").objectStore(wa),v=r.createCompositeKey(e);try{const b=g.put({compositeKey:v,value:t});b.onerror=T=>{u(Yf(T,"storage-set"))},b.onsuccess=()=>{o()}}catch(b){u(Li.create("storage-set",{originalErrorMessage:b?.message}))}})})()}delete(e){var t=this;return(0,U.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const f=r.transaction([wa],"readwrite").objectStore(wa),g=t.createCompositeKey(e);try{const v=f.delete(g);v.onerror=b=>{o(Yf(b,"storage-delete"))},v.onsuccess=()=>{i()}}catch(v){o(Li.create("storage-delete",{originalErrorMessage:v?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class TP{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,U.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),o=yield t;o&&(e.lastFetchStatus=o);const u=yield r;u&&(e.lastSuccessfulFetchTimestampMillis=u);const f=yield i;f&&(e.activeConfig=f)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function DP(){return s_.apply(this,arguments)}function s_(){return(s_=(0,U.Z)(function*(){if(!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}!function MP(){Ji(new wr.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Li.create("registration-window");if(!(0,z.hl)())throw Li.create("indexed-db-unavailable");const{projectId:o,apiKey:u,appId:f}=r.options;if(!o)throw Li.create("registration-project-id");if(!u)throw Li.create("registration-api-key");if(!f)throw Li.create("registration-app-id");const g=new EP(f,r.name,t=t||"firebase"),v=new TP(g),b=new Ri.Yd(uo);b.logLevel=Ri.in.ERROR;const T=new gP(i,"10.5.0",t,o,u,f),S=new yP(T,g),N=new Kf(S,g,v,b),q=new wP(r,N,v,g,b);return function lP(n){const e=(0,z.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(q),q},"PUBLIC").setMultipleInstances(!0)),Fi(uo,"0.4.4"),Fi(uo,"0.4.4","esm2017")}();const aT=(n,e)=>e.some(t=>n instanceof t);let cT,SP;const AP=new WeakMap,pd=new WeakMap,dT=new WeakMap,HC=new WeakMap,Qf=new WeakMap;let Ml={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return pd.get(n);if("objectStoreNames"===e)return n.objectStoreNames||dT.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ir(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function o_(n){return"function"==typeof n?function Dl(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function uT(){return SP||(SP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Jf(this),e),Ir(AP.get(this))}:function(...e){return Ir(n.apply(Jf(this),e))}:function(e,...t){const r=n.call(Jf(this),e,...t);return dT.set(r,e.sort?e.sort():[e]),Ir(r)}}(n):(n instanceof IDBTransaction&&function qo(n){if(pd.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});pd.set(n,e)}(n),aT(n,function lT(){return cT||(cT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Ml):n)}function Ir(n){if(n instanceof IDBRequest)return function xP(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(Ir(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&AP.set(t,n)}).catch(()=>{}),Qf.set(e,n),e}(n);if(HC.has(n))return HC.get(n);const e=o_(n);return e!==n&&(HC.set(n,e),Qf.set(e,n)),e}const Jf=n=>Qf.get(n);function Sl(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const u=indexedDB.open(n,e),f=Ir(u);return r&&u.addEventListener("upgradeneeded",g=>{r(Ir(u.result),g.oldVersion,g.newVersion,Ir(u.transaction))}),t&&u.addEventListener("blocked",()=>t()),f.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}function pc(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Ir(t).then(()=>{})}const gd=["get","getKey","getAll","getAllKeys","count"],md=["put","add","delete","clear"],gc=new Map;function Al(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(gc.get(e))return gc.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=md.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!gd.includes(t))return;const o=function(){var u=(0,U.Z)(function*(f,...g){const v=this.transaction(f,i?"readwrite":"readonly");let b=v.store;return r&&(b=b.index(g.shift())),(yield Promise.all([b[t](...g),i&&v.done]))[0]});return function(g){return u.apply(this,arguments)}}();return gc.set(e,o),o}!function Ci(n){Ml=n(Ml)}(n=>({...n,get:(e,t,r)=>Al(e,t)||n.get(e,t,r),has:(e,t)=>!!Al(e,t)||n.has(e,t)}));const _d="/firebase-messaging-sw.js",yd="/firebase-cloud-messaging-push-scope",xl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hT="https://fcmregistrations.googleapis.com/v1",zC="google.c.a.c_id",fT="google.c.a.c_l",pT="google.c.a.ts";var Xf=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Xf||{});function Wo(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _T(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}const ep="fcm_token_details_db",PP=5,OP="fcm_token_object_Store";function GC(){return GC=(0,U.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(ep))return null;let e=null;return(yield Sl(ep,PP,{upgrade:(r=(0,U.Z)(function*(i,o,u,f){var g;if(o<2||!i.objectStoreNames.contains(OP))return;const v=f.objectStore(OP),b=yield v.index("fcmSenderId").get(n);if(yield v.clear(),b)if(2===o){const T=b;if(!T.auth||!T.p256dh||!T.endpoint)return;e={token:T.fcmToken,createTime:null!==(g=T.createTime)&&void 0!==g?g:Date.now(),subscriptionOptions:{auth:T.auth,p256dh:T.p256dh,endpoint:T.endpoint,swScope:T.swScope,vapidKey:"string"==typeof T.vapidKey?T.vapidKey:Wo(T.vapidKey)}}}else if(3===o){const T=b;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Wo(T.auth),p256dh:Wo(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Wo(T.vapidKey)}}}else if(4===o){const T=b;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Wo(T.auth),p256dh:Wo(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Wo(T.vapidKey)}}}}),function(o,u,f,g){return r.apply(this,arguments)})})).close(),yield pc(ep),yield pc("fcm_vapid_details_db"),yield pc("undefined"),function kP(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),GC.apply(this,arguments)}const ZL="firebase-messaging-database",NP=1,vd="firebase-messaging-store";let qC=null;function WC(){return qC||(qC=Sl(ZL,NP,{upgrade:(n,e)=>{0===e&&n.createObjectStore(vd)}})),qC}function yT(n){return tp.apply(this,arguments)}function tp(){return tp=(0,U.Z)(function*(n){const e=Ol(n),r=yield(yield WC()).transaction(vd).objectStore(vd).get(e);if(r)return r;{const i=yield function WL(n){return GC.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield Pl(n,i),i}}),tp.apply(this,arguments)}function Pl(n,e){return np.apply(this,arguments)}function np(){return(np=(0,U.Z)(function*(n,e){const t=Ol(n),i=(yield WC()).transaction(vd,"readwrite");return yield i.objectStore(vd).put(e,t),yield i.done,e})).apply(this,arguments)}function c_(){return(c_=(0,U.Z)(function*(n){const e=Ol(n),r=(yield WC()).transaction(vd,"readwrite");yield r.objectStore(vd).delete(e),yield r.done})).apply(this,arguments)}function Ol({appConfig:n}){return n.appId}const oi=new z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function rp(n,e){return ZC.apply(this,arguments)}function ZC(){return(ZC=(0,U.Z)(function*(n,e){const t=yield wd(n),r=IT(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(Cd(n.appConfig),i)).json()}catch(u){throw oi.create("token-subscribe-failed",{errorInfo:u?.toString()})}if(o.error)throw oi.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw oi.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function KC(){return(KC=(0,U.Z)(function*(n,e){const t=yield wd(n),r=IT(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${Cd(n.appConfig)}/${e.token}`,i)).json()}catch(u){throw oi.create("token-update-failed",{errorInfo:u?.toString()})}if(o.error)throw oi.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw oi.create("token-update-no-token");return o.token})).apply(this,arguments)}function CT(n,e){return ip.apply(this,arguments)}function ip(){return(ip=(0,U.Z)(function*(n,e){const r={method:"DELETE",headers:yield wd(n)};try{const o=yield(yield fetch(`${Cd(n.appConfig)}/${e}`,r)).json();if(o.error)throw oi.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(i){throw oi.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function Cd({projectId:n}){return`${hT}/projects/${n}/registrations`}function wd(n){return wT.apply(this,arguments)}function wT(){return(wT=(0,U.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function IT({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==xl&&(i.web.applicationPubKey=r),i}const FP=6048e5;function QC(){return QC=(0,U.Z)(function*(n){const e=yield function UP(n,e){return tw.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Wo(e.getKey("auth")),p256dh:Wo(e.getKey("p256dh"))},r=yield yT(n.firebaseDependencies);if(r){if(function BP(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+FP?function LP(n,e){return l_.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield CT(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return ew(n.firebaseDependencies,t)}return ew(n.firebaseDependencies,t)}),QC.apply(this,arguments)}function XC(){return XC=(0,U.Z)(function*(n){const e=yield yT(n.firebaseDependencies);e&&(yield CT(n.firebaseDependencies,e.token),yield function a_(n){return c_.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),XC.apply(this,arguments)}function l_(){return l_=(0,U.Z)(function*(n,e){try{const t=yield function RP(n,e){return KC.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Pl(n.firebaseDependencies,r),t}catch(t){throw yield function JC(n){return XC.apply(this,arguments)}(n),t}}),l_.apply(this,arguments)}function ew(n,e){return u_.apply(this,arguments)}function u_(){return(u_=(0,U.Z)(function*(n,e){const r={token:yield rp(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Pl(n,r),r.token})).apply(this,arguments)}function tw(){return(tw=(0,U.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_T(e)})})).apply(this,arguments)}function nw(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function rw(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const o=e.notification.icon;o&&(n.notification.icon=o)}(e,n),function iw(n,e){e.data&&(n.data=e.data)}(e,n),function VP(n,e){var t,r,i,o,u;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const f=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(o=e.notification)||void 0===o?void 0:o.click_action;f&&(n.fcmOptions.link=f);const g=null===(u=e.fcmOptions)||void 0===u?void 0:u.analytics_label;g&&(n.fcmOptions.analyticsLabel=g)}(e,n),e}function sp(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function h_(n){return oi.create("missing-app-config-values",{valueName:n})}sp("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),sp("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class jP{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function sw(n){if(!n||!n.options)throw h_("App Configuration Object");if(!n.name)throw h_("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw h_(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function ow(){return(ow=(0,U.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(_d,{scope:yd}),n.swRegistration.update().catch(()=>{})}catch(e){throw oi.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function op(){return(op=(0,U.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function bT(n){return ow.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw oi.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function f_(){return(f_=(0,U.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=xl)})).apply(this,arguments)}function cw(){return cw=(0,U.Z)(function*(n,e){if(!navigator)throw oi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw oi.create("permission-blocked");return yield function ET(n,e){return f_.apply(this,arguments)}(n,e?.vapidKey),yield function aw(n,e){return op.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function YC(n){return QC.apply(this,arguments)}(n)}),cw.apply(this,arguments)}function ap(){return(ap=(0,U.Z)(function*(n,e,t){const r=function DT(n){switch(n){case Xf.NOTIFICATION_CLICKED:return"notification_open";case Xf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[zC],message_name:t[fT],message_time:t[pT],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function p_(){return p_=(0,U.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Xf.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(nw(t)):n.onMessageHandler.next(nw(t)));const r=t.data;(function d_(n){return"object"==typeof n&&!!n&&zC in n})(r)&&"1"===r["google.c.a.e"]&&(yield function MT(n,e,t){return ap.apply(this,arguments)}(n,t.messageType,r))}),p_.apply(this,arguments)}const ST="@firebase/messaging",AT=n=>{const e=new jP(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function lw(n,e){return p_.apply(this,arguments)}(e,t)),e},xT=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function TT(n,e){return cw.apply(this,arguments)}(e,r)}};function OT(){return dw.apply(this,arguments)}function dw(){return(dw=(0,U.Z)(function*(){try{yield(0,z.eu)()}catch{return!1}return typeof window<"u"&&(0,z.hl)()&&(0,z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function kT(n=Ff()){return OT().then(e=>{if(!e)throw oi.create("unsupported-browser")},e=>{throw oi.create("indexed-db-unsupported")}),wl((0,z.m9)(n),"messaging").getImmediate()}!function PT(){Ji(new wr.wA("messaging",AT,"PUBLIC")),Ji(new wr.wA("messaging-internal",xT,"PRIVATE")),Fi(ST,"0.12.4"),Fi(ST,"0.12.4","esm2017")}();const lp="analytics",NT="firebase_id",RT="origin",__=6e4,mc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hw="https://www.googletagmanager.com/gtag/js",$r=new Ri.Yd("@firebase/analytics"),hr=new z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function pw(n){if(!n.startsWith(hw)){const e=hr.create("invalid-gtag-resource",{gtagURL:n});return $r.warn(e.message),""}return n}function FT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function mw(){return(mw=(0,U.Z)(function*(n,e,t,r,i,o){const u=r[i];try{if(u)yield e[u];else{const g=(yield FT(t)).find(v=>v.measurementId===i);g&&(yield e[g.appId])}}catch(f){$r.error(f)}n("config",i,o)})).apply(this,arguments)}function _w(){return(_w=(0,U.Z)(function*(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let u=i.send_to;Array.isArray(u)||(u=[u]);const f=yield FT(t);for(const g of u){const v=f.find(T=>T.measurementId===g),b=v&&e[v.appId];if(!b){o=[];break}o.push(b)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){$r.error(o)}})).apply(this,arguments)}const ZP=30,yw=new class KP{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function VT(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function vw(){return(vw=(0,U.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:VT(r)},o=mc.replace("{app-id}",t),u=yield fetch(o,i);if(200!==u.status&&304!==u.status){let f="";try{const g=yield u.json();null!==(e=g.error)&&void 0!==e&&e.message&&(f=g.error.message)}catch{}throw hr.create("config-fetch-failed",{httpStatus:u.status,responseMessage:f})}return u.json()})).apply(this,arguments)}function y_(){return(y_=(0,U.Z)(function*(n,e=yw,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw hr.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw hr.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new Cw;return setTimeout((0,U.Z)(function*(){f.abort()}),void 0!==t?t:__),jT({appId:r,apiKey:i,measurementId:o},u,f,e)})).apply(this,arguments)}function jT(n,e,t){return v_.apply(this,arguments)}function v_(){return v_=(0,U.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=yw){var o;const{appId:u,measurementId:f}=n;try{yield function QL(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(hr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(g){if(f)return $r.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:u,measurementId:f};throw g}try{const g=yield function Id(n){return vw.apply(this,arguments)}(n);return i.deleteThrottleMetadata(u),g}catch(g){const v=g;if(!function $T(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(v)){if(i.deleteThrottleMetadata(u),f)return $r.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:u,measurementId:f};throw g}const b=503===Number(null===(o=v?.customData)||void 0===o?void 0:o.httpStatus)?(0,z.$s)(t,i.intervalMillis,ZP):(0,z.$s)(t,i.intervalMillis),T={throttleEndTimeMillis:Date.now()+b,backoffCount:t+1};return i.setThrottleMetadata(u,T),$r.debug(`Calling attemptFetch again in ${b} millis`),jT(n,T,r,i)}}),v_.apply(this,arguments)}class Cw{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let ks,kl;function C_(){return(C_=(0,U.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const o=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function Ew(){return(Ew=(0,U.Z)(function*(){if(!(0,z.hl)())return $r.warn(hr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,z.eu)()}catch(n){return $r.warn(hr.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function I_(){return I_=(0,U.Z)(function*(n,e,t,r,i,o,u){var f;const g=function YP(n){return y_.apply(this,arguments)}(n);g.then(N=>{t[N.measurementId]=N.appId,n.options.measurementId&&N.measurementId!==n.options.measurementId&&$r.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>$r.error(N)),e.push(g);const v=function eO(){return Ew.apply(this,arguments)}().then(N=>{if(N)return r.getId()}),[b,T]=yield Promise.all([g,v]);(function WP(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(hw)&&t.src.includes(n))return t;return null})(o)||function KL(n,e){const t=function gw(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:pw}),r=document.createElement("script"),i=`${hw}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(o,b.measurementId),kl&&(i("consent","default",kl),function zT(n){kl=n}(void 0)),i("js",new Date);const S=null!==(f=u?.config)&&void 0!==f?f:{};return S[RT]="firebase",S.update=!0,null!=T&&(S[NT]=T),i("config",b.measurementId,S),ks&&(i("set",ks),function bw(n){ks=n}(void 0)),b.measurementId}),I_.apply(this,arguments)}class b_{constructor(e){this.app=e}_delete(){return delete Ko[this.app.options.appId],Promise.resolve()}}let Ko={},Tw=[];const Mw={};let WT,Ns,dp="dataLayer",bd=!1;function KT(n,e,t){!function Dw(){const n=[];if((0,z.ru)()&&n.push("This is a browser extension environment."),(0,z.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=hr.create("invalid-analytics-context",{errorInfo:e});$r.warn(t.message)}}();const r=n.options.appId;if(!r)throw hr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw hr.create("no-api-key");$r.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ko[r])throw hr.create("already-exists",{id:r});if(!bd){!function YL(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(dp);const{wrappedGtag:o,gtagCore:u}=function UT(n,e,t,r,i){let o=function(...u){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function Pr(n,e,t,r){function o(){return o=(0,U.Z)(function*(u,...f){try{if("event"===u){const[g,v]=f;yield function LT(n,e,t,r,i){return _w.apply(this,arguments)}(n,e,t,g,v)}else if("config"===u){const[g,v]=f;yield function qP(n,e,t,r,i,o){return mw.apply(this,arguments)}(n,e,t,r,g,v)}else if("consent"===u){const[g]=f;n("consent","update",g)}else if("get"===u){const[g,v,b]=f;n("get",g,v,b)}else if("set"===u){const[g]=f;n("set",g)}else n(u,...f)}catch(g){$r.error(g)}}),o.apply(this,arguments)}return function i(u){return o.apply(this,arguments)}}(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}(Ko,Tw,Mw,dp,"gtag");Ns=o,WT=u,bd=!0}return Ko[r]=function GT(n,e,t,r,i,o,u){return I_.apply(this,arguments)}(n,Tw,Mw,e,WT,dp,t),new b_(n)}function QT(){return E_.apply(this,arguments)}function E_(){return(E_=(0,U.Z)(function*(){if((0,z.ru)()||!(0,z.zI)()||!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}const JT="@firebase/analytics";!function iO(){Ji(new wr.wA(lp,(e,{options:t})=>KT(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Ji(new wr.wA("analytics-internal",function n(e){try{const t=e.getProvider(lp).getImmediate();return{logEvent:(r,i,o)=>function rO(n,e,t,r){n=(0,z.m9)(n),function QP(n,e,t,r,i){return C_.apply(this,arguments)}(Ns,Ko[n.app.options.appId],e,t,r).catch(i=>$r.error(i))}(t,r,i,o)}}catch(t){throw hr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Fi(JT,"0.10.0"),Fi(JT,"0.10.0","esm2017")}();const aO=new class oO extends b1{}(class sO extends xf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var hp=F(5137),Ed=F(3093);const Nl=new c.GfV("7.6.1"),T_="__angularfire_symbol__analyticsIsSupportedValue",M_="__angularfire_symbol__analyticsIsSupported",D_="__angularfire_symbol__remoteConfigIsSupportedValue",S_="__angularfire_symbol__remoteConfigIsSupported",A_="__angularfire_symbol__messagingIsSupportedValue",x_="__angularfire_symbol__messagingIsSupported";globalThis[M_]||(globalThis[M_]=QT().then(n=>globalThis[T_]=n).catch(()=>globalThis[T_]=!1)),globalThis[x_]||(globalThis[x_]=OT().then(n=>globalThis[A_]=n).catch(()=>globalThis[A_]=!1)),globalThis[S_]||(globalThis[S_]=DP().then(n=>globalThis[D_]=n).catch(()=>globalThis[D_]=!1));const fp={async:()=>globalThis[x_],sync:()=>{const n=globalThis[A_];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function Rl(n,e,t){if(e){if(1===e.length)return e[0];const o=e.filter(u=>u.app===t);if(1===o.length)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Rs=(n,e)=>{const t=e?[e]:(0,Sn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(u=>{r.includes(u)||r.push(u)})}),r};function Td(){}class eM{constructor(e,t=aO){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(u){i.runGuarded(()=>{e.apply(this,[u])})},t,r)}}class Md{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Td,{},Td,Td)),t.pipe(Tn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fl=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new eM(Zone.current)),this.insideAngular=t.run(()=>new eM(Zone.current,H0)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ia(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function _c(n){return Ia().ngZone.run(()=>n())}function Hr(n){return Ia(),function dO(n){return function(t){return(t=t.lift(new Md(n.ngZone))).pipe((0,hp.R)(n.outsideAngular),(0,Ed.Q)(n.insideAngular))}}(Ia())(n)}const hO=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),_c(()=>n.apply(void 0,r))},Dd=(n,e)=>function(){let t;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(t||(t=_c(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Td,{},Td,Td)))),r[o]=hO(r[o],t));const i=function s4(n){return Ia().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof gi.y){const o=Ia();return i.pipe((0,hp.R)(o.outsideAngular),(0,Ed.Q)(o.insideAngular))}return _c(()=>i)}return i instanceof gi.y?i.pipe(Hr):i instanceof Promise?_c(()=>new Promise((o,u)=>i.then(f=>_c(()=>o(f)),f=>_c(()=>u(f))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:_c(()=>i)};function yc(){return(0,_i.e)((n,e)=>{let t,r=!1;n.subscribe((0,mi.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var Ze,fO=F(3997),Xi=F(6304),es=(F(8661),F(3399)),o4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fs={},xw=xw||{},It=o4||self;function pp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Sd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Pw="closure_uid_"+(1e9*Math.random()>>>0),pO=0;function gO(n,e,t){return n.call.apply(n.bind,arguments)}function gp(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function wi(n,e,t){return(wi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gO:gp).apply(null,arguments)}function O_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function zr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function fo(){this.s=this.s,this.o=this.o}fo.prototype.s=!1,fo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function tM(n){Object.prototype.hasOwnProperty.call(n,Pw)&&n[Pw]||(n[Pw]=++pO)}(this)},fo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ow=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function k_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function rM(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(pp(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let u=0;u<o;u++)n[i+u]=r[u]}else n.push(r)}}function br(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}br.prototype.h=function(){this.defaultPrevented=!0};var mp=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",()=>{},e),It.removeEventListener("test",()=>{},e)}catch{}return n}();function _p(n){return/^[\s\xa0]*$/.test(n)}function N_(){var n=It.navigator;return n&&(n=n.userAgent)?n:""}function Yo(n){return-1!=N_().indexOf(n)}function R_(n){return R_[" "](n),n}R_[" "]=function(){};var aM,n,sM=Yo("Opera"),Ad=Yo("Trident")||Yo("MSIE"),kw=Yo("Edge"),Nw=kw||Ad,oM=Yo("Gecko")&&!(-1!=N_().toLowerCase().indexOf("webkit")&&!Yo("Edge"))&&!(Yo("Trident")||Yo("MSIE"))&&!Yo("Edge"),a4=-1!=N_().toLowerCase().indexOf("webkit")&&!Yo("Edge");function mO(){var n=It.document;return n?n.documentMode:void 0}e:{var cM="",F_=(n=N_(),oM?/rv:([^\);]+)(\)|;)/.exec(n):kw?/Edge\/([\d\.]+)/.exec(n):Ad?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):a4?/WebKit\/(\S+)/.exec(n):sM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(F_&&(cM=F_?F_[1]:""),Ad){var xd=mO();if(null!=xd&&xd>parseFloat(cM)){aM=String(xd);break e}}aM=cM}var uM=It.document&&Ad&&(mO()||parseInt(aM,10))||void 0;function ba(n,e){if(br.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(oM){e:{try{R_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_O[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ba.$.h.call(this)}}zr(ba,br);var _O={2:"touch",3:"pen",4:"mouse"};ba.prototype.h=function(){ba.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yp="closure_listenable_"+(1e6*Math.random()|0),yO=0;function vO(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++yO,this.fa=this.ia=!1}function Fw(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Lw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function hM(n){const e={};for(const t in n)e[t]=n[t];return e}const fM="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pd(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<fM.length;o++)t=fM[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function L_(n){this.src=n,this.g={},this.h=0}function U_(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=Ow(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Fw(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Uw(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}L_.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var u=Uw(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new vO(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var B_="closure_lm_"+(1e6*Math.random()|0),Bw={};function Vw(n,e,t,r,i){if(r&&r.once)return gM(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Vw(n,e[o],t,r,i);return null}return t=zw(t),n&&n[yp]?n.O(e,t,Sd(r)?!!r.capture:!!r,i):pM(n,e,t,!1,r,i)}function pM(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var u=Sd(i)?!!i.capture:!!i,f=Hw(n);if(f||(n[B_]=f=new L_(n)),(t=f.add(e,t,r,u,o)).proxy)return t;if(r=function jw(){const e=CO;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)mp||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(mM(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function gM(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)gM(n,e[o],t,r,i);return null}return t=zw(t),n&&n[yp]?n.P(e,t,Sd(r)?!!r.capture:!!r,i):pM(n,e,t,!0,r,i)}function $w(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)$w(n,e[o],t,r,i);else r=Sd(r)?!!r.capture:!!r,t=zw(t),n&&n[yp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Uw(o=n.g[e],t,r,i))&&(Fw(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Hw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Uw(e,t,r,i)),(t=-1<n?e[n]:null)&&V_(t))}function V_(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[yp])U_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(mM(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Hw(e))?(U_(t,n),0==t.h&&(t.src=null,e[B_]=null)):Fw(n)}}}function mM(n){return n in Bw?Bw[n]:Bw[n]="on"+n}function CO(n,e){if(n.fa)n=!0;else{e=new ba(e,this);var t=n.listener,r=n.la||n.src;n.ia&&V_(n),n=t.call(r,e)}return n}function Hw(n){return(n=n[B_])instanceof L_?n:null}var vp="__closure_events_fn_"+(1e9*Math.random()>>>0);function zw(n){return"function"==typeof n?n:(n[vp]||(n[vp]=function(e){return n.handleEvent(e)}),n[vp])}function Or(){fo.call(this),this.i=new L_(this),this.S=this,this.J=null}function ai(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new br(e,n);else if(e instanceof br)e.target=e.target||n;else{var i=e;Pd(e=new br(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var u=e.g=t[o];i=j_(u,r,!0,e)&&i}if(i=j_(u=e.g=n,r,!0,e)&&i,i=j_(u,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=j_(u=e.g=t[o],r,!1,e)&&i}function j_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var u=e[o];if(u&&!u.fa&&u.capture==t){var f=u.listener,g=u.la||u.src;u.ia&&U_(n.i,u),i=!1!==f.call(g,r)&&i}}return i&&!r.defaultPrevented}zr(Or,fo),Or.prototype[yp]=!0,Or.prototype.removeEventListener=function(n,e,t,r){$w(this,n,e,t,r)},Or.prototype.N=function(){if(Or.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Fw(t[r]);delete n.g[e],n.h--}}this.J=null},Or.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Or.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Gw=It.JSON.stringify;function IO(){var n=$_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var _M=new class wO{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new EO,n=>n.reset());class EO{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yM(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function vM(n){It.setTimeout(()=>{throw n},0)}let Cp,wp=!1,$_=new class bO{constructor(){this.h=this.g=null}add(e,t){const r=_M.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},CM=()=>{const n=It.Promise.resolve(void 0);Cp=()=>{n.then(TO)}};var TO=()=>{for(var n;n=IO();){try{n.h.call(n.g)}catch(t){vM(t)}var e=_M;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}wp=!1};function H_(n,e){Or.call(this),this.h=n||1,this.g=e||It,this.j=wi(this.qb,this),this.l=Date.now()}function qw(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Ip(n,e,t){if("function"==typeof n)t&&(n=wi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wi(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function z_(n){n.g=Ip(()=>{n.g=null,n.i&&(n.i=!1,z_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}zr(H_,Or),(Ze=H_.prototype).ga=!1,Ze.T=null,Ze.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ai(this,"tick"),this.ga&&(qw(this),this.start()))}},Ze.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.N=function(){H_.$.N.call(this),qw(this),delete this.g};class wM extends fo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:z_(this)}N(){super.N(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ll(n){fo.call(this),this.h=n,this.g={}}zr(Ll,fo);var IM=[];function bM(n,e,t,r){Array.isArray(t)||(t&&(IM[0]=t.toString()),t=IM);for(var i=0;i<t.length;i++){var o=Vw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function G_(n){Lw(n.g,function(e,t){this.g.hasOwnProperty(t)&&V_(e)},n),n.g={}}function q_(){this.g=!0}function Bl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function c4(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<i.length;u++)i[u]=""}}}return Gw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ll.prototype.N=function(){Ll.$.N.call(this),G_(this)},Ll.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},q_.prototype.Ea=function(){this.g=!1},q_.prototype.info=function(){};var Ea={},W_=null;function Z_(){return W_=W_||new Or}function Ww(n){br.call(this,Ea.Ta,n)}function Od(n){const e=Z_();ai(e,new Ww(e))}function TM(n,e){br.call(this,Ea.STAT_EVENT,n),this.stat=e}function Ii(n){const e=Z_();ai(e,new TM(e,n))}function K_(n,e){br.call(this,Ea.Ua,n),this.size=e}function kd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Ea.Ta="serverreachability",zr(Ww,br),Ea.STAT_EVENT="statevent",zr(TM,br),Ea.Ua="timingevent",zr(K_,br);var bp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Zw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Y_(){}function DM(){}Y_.prototype.h=null;var SM,Ep={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Kw(){br.call(this,"d")}function Q_(){br.call(this,"c")}function Tp(){}function Mp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Ll(this),this.P=l4,this.V=new H_(n=Nw?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new AM}function AM(){this.i=null,this.g="",this.h=!1}zr(Kw,br),zr(Q_,br),zr(Tp,Y_),Tp.prototype.g=function(){return new XMLHttpRequest},Tp.prototype.i=function(){return{}},SM=new Tp;var l4=45e3,Yw={},J_={};function X_(n,e,t){n.L=1,n.v=Ap(Ta(e)),n.s=t,n.S=!0,Qw(n,null)}function Qw(n,e){n.G=Date.now(),Dp(n),n.A=Ta(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),UM(t.i,"t",r),n.C=0,t=n.l.J,n.h=new AM,n.g=JM(n.l,t?e:null,!n.s),0<n.O&&(n.M=new wM(wi(n.Pa,n,n.g),n.O)),bM(n.U,n.g,"readystatechange",n.nb),e=n.I?hM(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Od(),function EM(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var u="",f=o.split("&"),g=0;g<f.length;g++){var v=f[g].split("=");if(1<v.length){var b=v[0];v=v[1];var T=b.split("_");u=2<=T.length&&"type"==T[1]?u+(b+"=")+v+"&":u+(b+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Jw(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function xM(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=DO(n,t),i==J_){4==e&&(n.o=4,Ii(14),r=!1),Bl(n.j,n.m,null,"[Incomplete Response]");break}if(i==Yw){n.o=4,Ii(15),Bl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Bl(n.j,n.m,i,null),jl(n,i)}Jw(n)&&i!=J_&&i!=Yw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),uy(e),e.M=!0,Ii(11))):(Bl(n.j,n.m,t,"[Invalid Chunked Response]"),Vl(n),Sp(n))}function DO(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?J_:(t=Number(e.substring(t,r)),isNaN(t)?Yw:(r+=1)+t>e.length?J_:(e=e.slice(r,r+t),n.C=r+t,e))}function Dp(n){n.Y=Date.now()+n.P,PM(n,n.P)}function PM(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kd(wi(n.lb,n),e)}function ey(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function Sp(n){0==n.l.H||n.J||RO(n.l,n)}function Vl(n){ey(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,qw(n.V),G_(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function jl(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||ry(t.i,n)))if(!n.K&&ry(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;_I(t),ly(t)}YM(t),Ii(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=kd(wi(t.ib,t),6e3));if(1>=jM(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else po(t,11)}else if((n.K||t.g==n)&&_I(t),!_p(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const b=v[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const T=v[4];null!=T&&(t.Ga=T,t.l.info("SVER="+t.Ga));const S=v[5];null!=S&&"number"==typeof S&&0<S&&(t.L=r=1.5*S,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const q=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var o=r.i;o.g||-1==q.indexOf("spdy")&&-1==q.indexOf("quic")&&-1==q.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(oI(o,o.h),o.h=null))}if(r.F){const Q=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,An(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=hy(r,r.J?r.pa:null,r.Y),u.K){$M(r.i,u);var f=u,g=r.L;g&&f.setTimeout(g),f.B&&(ey(f),Dp(f)),r.g=u}else NO(r);0<t.j.length&&Lp(t)}else"stop"!=v[0]&&"close"!=v[0]||po(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?po(t,7):cy(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}Od()}catch{}}function Xw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(pp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function kM(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(pp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function OM(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(pp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(Ze=Mp.prototype).setTimeout=function(n){this.P=n},Ze.nb=function(n){n=n.target;const e=this.M;e&&3==Us(n)?e.l():this.Pa(n)},Ze.Pa=function(n){try{if(n==this.g)e:{const b=Us(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||Nw||this.g&&(this.h.h||this.g.ja()||fI(this.g)))){this.J||4!=b||7==e||Od(),ey(this);var t=this.g.da();this.ca=t;t:if(Jw(this)){var r=fI(this.g);n="";var i=r.length,o=4==Us(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vl(this),Sp(this);var u="";break t}this.h.i=new It.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function Ul(n,e,t,r,i,o,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,g=this.g;if((f=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_p(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Ii(12),Vl(this),Sp(this);break e}Bl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jl(this,t)}this.S?(xM(this,b,u),Nw&&this.i&&3==b&&(bM(this.U,this.V,"tick",this.mb),this.V.start())):(Bl(this.j,this.m,u,null),jl(this,u)),4==b&&Vl(this),this.i&&!this.J&&(4==b?RO(this.l,this):(this.i=!1,Dp(this)))}else(function ZM(n){const e={};n=(n.g&&2<=Us(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(_p(n[r]))continue;var t=yM(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function dM(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Vl(this),Sp(this)}}}catch{}},Ze.mb=function(){if(this.g){var n=Us(this.g),e=this.g.ja();this.C<e.length&&(ey(this),xM(this,n,e),this.i&&4!=n&&Dp(this))}},Ze.cancel=function(){this.J=!0,Vl(this)},Ze.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function MO(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Od(),Ii(17)),Vl(this),this.o=2,Sp(this)):PM(this,this.Y-n)};var eI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof vc){this.h=n.h,tI(this,n.j),this.s=n.s,this.g=n.g,nI(this,n.m),this.l=n.l;var e=n.i,t=new ty;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),rI(this,t),this.o=n.o}else n&&(e=String(n).match(eI))?(this.h=!1,tI(this,e[1]||"",!0),this.s=xp(e[2]||""),this.g=xp(e[3]||"",!0),nI(this,e[4]),this.l=xp(e[5]||"",!0),rI(this,e[6]||"",!0),this.o=xp(e[7]||"")):(this.h=!1,this.i=new ty(null,this.h))}function Ta(n){return new vc(n)}function tI(n,e,t){n.j=t?xp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function nI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function rI(n,e,t){e instanceof ty?(n.i=e,function BM(n,e){e&&!n.j&&(Ls(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(FM(this,r),UM(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Pp(e,u4)),n.i=new ty(e,n.h))}function An(n,e,t){n.i.set(e,t)}function Ap(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function xp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Pp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Op),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Op(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}vc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Pp(e,RM,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Pp(e,RM,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Pp(t,"/"==t.charAt(0)?SO:iI,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Pp(t,AO)),n.join("")};var RM=/[#\/\?@]/g,iI=/[#\?:]/g,SO=/[#\?]/g,u4=/[#\?@]/g,AO=/#/g;function ty(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ls(n){n.g||(n.g=new Map,n.h=0,n.i&&function NM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function FM(n,e){Ls(n),e=Ma(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function LM(n,e){return Ls(n),e=Ma(n,e),n.g.has(e)}function UM(n,e,t){FM(n,e),0<t.length&&(n.i=null,n.g.set(Ma(n,e),k_(t)),n.h+=t.length)}function Ma(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function sI(n){this.l=n||ny,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ka&&It.g.Ka()&&It.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=ty.prototype).add=function(n,e){Ls(this),this.i=null,n=Ma(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){Ls(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ze.ta=function(){Ls(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},Ze.Z=function(n){Ls(this);let e=[];if("string"==typeof n)LM(this,n)&&(e=e.concat(this.g.get(Ma(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ze.set=function(n,e){return Ls(this),this.i=null,LM(this,n=Ma(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=o;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var ny=10;function VM(n){return!!n.h||!!n.g&&n.g.size>=n.j}function jM(n){return n.h?1:n.g?n.g.size:0}function ry(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function oI(n,e){n.g?n.g.add(e):n.h=e}function $M(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function aI(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return k_(n.i)}sI.prototype.cancel=function(){if(this.i=aI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var iy=class{stringify(n){return It.JSON.stringify(n,void 0)}parse(n){return It.JSON.parse(n,void 0)}};function PO(){this.g=new iy}function OO(n,e,t){const r=t||"";try{Xw(n,function(i,o){let u=i;Sd(i)&&(u=Gw(i)),e.push(r+o+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function kp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function $l(n){this.l=n.fc||null,this.j=n.ob||!1}function Np(n,e){Or.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=cI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zr($l,Y_),$l.prototype.g=function(){return new Np(this.l,this.j)},$l.prototype.i=function(n){return function(){return n}}({}),zr(Np,Or);var cI=0;function lI(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Nd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Rp(n)}function Rp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=Np.prototype).open=function(n,e){if(this.readyState!=cI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Rp(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||It).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nd(this)),this.readyState=cI},Ze.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Rp(this)),this.g&&(this.readyState=3,Rp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof It.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lI(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ze.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Nd(this):Rp(this),3==this.readyState&&lI(this)}},Ze.Za=function(n){this.g&&(this.response=this.responseText=n,Nd(this))},Ze.Ya=function(n){this.g&&(this.response=n,Nd(this))},Ze.ka=function(){this.g&&Nd(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Np.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var kO=It.JSON.parse;function Un(n){Or.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=sy,this.L=this.M=!1}zr(Un,Or);var sy="",zM=/^https?$/i,uI=["POST","PUT"];function GM(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qM(n),oy(n)}function qM(n){n.F||(n.F=!0,ai(n,"complete"),ai(n,"error"))}function WM(n){if(n.h&&typeof xw<"u"&&(!n.C[1]||4!=Us(n)||2!=n.da()))if(n.v&&4==Us(n))Ip(n.La,0,n);else if(ai(n,"readystatechange"),4==Us(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(eI)[1]||null;!i&&It.self&&It.self.location&&(i=It.self.location.protocol.slice(0,-1)),r=!zM.test(i?i.toLowerCase():"")}t=r}if(t)ai(n,"complete"),ai(n,"success");else{n.m=6;try{var o=2<Us(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",qM(n)}}finally{oy(n)}}}function oy(n,e){if(n.g){hI(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ai(n,"ready");try{t.onreadystatechange=r}catch{}}}function hI(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function Us(n){return n.g?n.g.readyState:0}function fI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case sy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function pI(n){let e="";return Lw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ay(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=pI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function Fp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function gI(n){this.Ga=0,this.j=[],this.l=new q_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Fp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Fp("baseRetryDelayMs",5e3,n),this.hb=Fp("retryDelaySeedMs",1e4,n),this.eb=Fp("forwardChannelMaxRetries",2,n),this.xa=Fp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new sI(n&&n.concurrentRequestLimit),this.Ja=new PO,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function cy(n){if(mI(n),3==n.H){var e=n.W++,t=Ta(n.I);if(An(t,"SID",n.K),An(t,"RID",e),An(t,"TYPE","terminate"),Up(n,t),(e=new Mp(n,n.l,e)).L=2,e.v=Ap(Ta(t)),t=!1,It.navigator&&It.navigator.sendBeacon)try{t=It.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=JM(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Dp(e)}QM(n)}function ly(n){n.g&&(uy(n),n.g.cancel(),n.g=null)}function mI(n){ly(n),n.u&&(It.clearTimeout(n.u),n.u=null),_I(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function Lp(n){if(!VM(n.i)&&!n.m){n.m=!0;var e=n.Na;Cp||CM(),wp||(Cp(),wp=!0),$_.add(e,n),n.C=0}}function Hl(n,e){var t;t=e?e.m:n.W++;const r=Ta(n.I);An(r,"SID",n.K),An(r,"RID",t),An(r,"AID",n.V),Up(n,r),n.o&&n.s&&ay(r,n.o,n.s),t=new Mp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=KM(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),oI(n.i,t),X_(t,r,e)}function Up(n,e){n.na&&Lw(n.na,function(t,r){An(e,r,t)}),n.h&&Xw({},function(t,r){An(e,r,t)})}function KM(n,e,t){t=Math.min(n.j.length,t);var r=n.h?wi(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const u=["count="+t];-1==o?0<t?(o=i[0].g,u.push("ofs="+o)):o=0:u.push("ofs="+o);let f=!0;for(let g=0;g<t;g++){let v=i[g].g;const b=i[g].map;if(v-=o,0>v)o=Math.max(0,i[g].g-100),f=!1;else try{OO(b,u,"req"+v+"_")}catch{r&&r(b)}}if(f){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function NO(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Cp||CM(),wp||(Cp(),wp=!0),$_.add(e,n),n.A=0}}function YM(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=kd(wi(n.Ma,n),FO(n,n.A)),n.A++,0))}function uy(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function dy(n){n.g=new Mp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ta(n.wa);An(e,"RID","rpc"),An(e,"SID",n.K),An(e,"AID",n.V),An(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&An(e,"TO",n.qa),An(e,"TYPE","xmlhttp"),Up(n,e),n.o&&n.s&&ay(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Ap(Ta(e)),t.s=null,t.S=!0,Qw(t,n)}function _I(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function RO(n,e){var t=null;if(n.g==e){_I(n),uy(n),n.g=null;var r=2}else{if(!ry(n.i,e))return;t=e.F,$M(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;ai(r=Z_(),new K_(r,t)),Lp(n)}else NO(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Ui(n,e){return!(jM(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=kd(wi(n.Na,n,e),FO(n,n.C)),n.C++,0)))}(n,e)||2==r&&YM(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:po(n,5);break;case 4:po(n,10);break;case 3:po(n,6);break;default:po(n,2)}}function FO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function po(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=wi(n.pb,n);t||(t=new vc("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||tI(t,"https"),Ap(t)),function HM(n,e){const t=new q_;if(It.Image){const r=new Image;r.onload=O_(kp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=O_(kp,t,r,"TestLoadImage: error",!1,e),r.onabort=O_(kp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=O_(kp,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.H=0,n.h&&n.h.za(e),QM(n),mI(n)}function QM(n){if(n.H=0,n.ma=[],n.h){const e=aI(n.i);(0!=e.length||0!=n.j.length)&&(rM(n.ma,e),rM(n.ma,n.j),n.i.i.length=0,k_(n.j),n.j.length=0),n.h.ya()}}function hy(n,e,t){var r=t instanceof vc?Ta(t):new vc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),nI(r,r.m);else{var i=It.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new vc(null);r&&tI(o,r),e&&(o.g=e),i&&nI(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&An(r,t,e),An(r,"VER",n.ra),Up(n,r),r}function JM(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Un(t&&n.Ha&&!n.va?new $l({ob:!0}):n.va)).Oa(n.J),e}function yI(){}function fy(){if(Ad&&!(10<=Number(uM)))throw Error("Environmental error: no available transport.")}function hs(n,e){Or.call(this),this.g=new gI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!_p(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_p(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zl(this)}function XM(n){Kw.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function py(){Q_.call(this),this.status=1}function zl(n){this.g=n}function ts(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Bp(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],u=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;u=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(u<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((o=(e=t+((u=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=o+((u=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function gn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(Ze=Un.prototype).Oa=function(n){this.M=n},Ze.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():SM.g(),this.C=function MM(n){return n.h||(n.h=n.i())}(this.u?this.u:SM),this.g.onreadystatechange=wi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void GM(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=It.FormData&&n instanceof It.FormData,!(0<=Ow(uI,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,u]of t)this.g.setRequestHeader(o,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{hI(this),0<this.B&&((this.L=function dI(n){return Ad&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wi(this.ua,this)):this.A=Ip(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){GM(this,o)}},Ze.ua=function(){typeof xw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ai(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ai(this,"complete"),ai(this,"abort"),oy(this))},Ze.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oy(this,!0)),Un.$.N.call(this)},Ze.La=function(){this.s||(this.G||this.v||this.l?WM(this):this.kb())},Ze.kb=function(){WM(this)},Ze.isActive=function(){return!!this.g},Ze.da=function(){try{return 2<Us(this)?this.g.status:-1}catch{return-1}},Ze.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ze.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),kO(e)}},Ze.Ia=function(){return this.m},Ze.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=gI.prototype).ra=8,Ze.H=1,Ze.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Mp(this,this.l,n);let o=this.s;if(this.U&&(o?(o=hM(o),Pd(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=KM(this,i,e),An(t=Ta(this.I),"RID",n),An(t,"CVER",22),this.F&&An(t,"X-HTTP-Session-Id",this.F),Up(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(pI(o)))+"&"+e:this.o&&ay(t,this.o,o)),oI(this.i,i),this.bb&&An(t,"TYPE","init"),this.P?(An(t,"$req",e),An(t,"SID","null"),i.aa=!0,X_(i,t,null)):X_(i,t,e),this.H=2}}else 3==this.H&&(n?Hl(this,n):0==this.j.length||VM(this.i)||Hl(this))},Ze.Ma=function(){if(this.u=null,dy(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=kd(wi(this.jb,this),n)}},Ze.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ii(10),ly(this),dy(this))},Ze.ib=function(){null!=this.v&&(this.v=null,ly(this),YM(this),Ii(19))},Ze.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ii(2)):(this.l.info("Failed to ping google.com"),Ii(1))},Ze.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ze=yI.prototype).Ba=function(){},Ze.Aa=function(){},Ze.za=function(){},Ze.ya=function(){},Ze.isActive=function(){return!0},Ze.Va=function(){},fy.prototype.g=function(n,e){return new hs(n,e)},zr(hs,Or),hs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ii(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=hy(n,null,n.Y),Lp(n)},hs.prototype.close=function(){cy(this.g)},hs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Gw(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Lp(e)},hs.prototype.N=function(){this.g.h=null,delete this.j,cy(this.g),delete this.g,hs.$.N.call(this)},zr(XM,Kw),zr(py,Q_),zr(zl,yI),zl.prototype.Ba=function(){ai(this.g,"a")},zl.prototype.Aa=function(n){ai(this.g,new XM(n))},zl.prototype.za=function(n){ai(this.g,new py)},zl.prototype.ya=function(){ai(this.g,"b")},zr(ts,function LO(){this.blockSize=-1}),ts.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ts.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)Bp(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){Bp(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){Bp(this,r),i=0;break}}this.h=i,this.i+=e},ts.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var eD={};function vI(n){return-128<=n&&128>n?function iM(n,e){var t=eD;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new gn([0|e],0>e?-1:0)}):new gn([0|n],0>n?-1:0)}function go(n){if(isNaN(n)||!isFinite(n))return ql;if(0>n)return ci(go(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=CI;return new gn(e,0)}var CI=4294967296,ql=vI(0),Vp=vI(1),UO=vI(16777216);function Da(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function mo(n){return-1==n.h}function ci(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new gn(t,~n.h).add(Vp)}function gy(n,e){return n.add(ci(e))}function my(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Rd(n,e){this.g=n,this.h=e}function jp(n,e){if(Da(e))throw Error("division by zero");if(Da(n))return new Rd(ql,ql);if(mo(n))return e=jp(ci(n),e),new Rd(ci(e.g),ci(e.h));if(mo(e))return e=jp(n,ci(e)),new Rd(ci(e.g),e.h);if(30<n.g.length){if(mo(n)||mo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Vp,r=e;0>=r.X(n);)t=tD(t),r=tD(r);var i=Wl(t,1),o=Wl(r,1);for(r=Wl(r,2),t=Wl(t,2);!Da(r);){var u=o.add(r);0>=u.X(n)&&(i=i.add(t),o=u),r=Wl(r,1),t=Wl(t,1)}return e=gy(n,i.R(e)),new Rd(i,e)}for(i=ql;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(o=go(t)).R(e);mo(u)||0<u.X(n);)u=(o=go(t-=r)).R(e);Da(o)&&(o=Vp),i=i.add(o),n=gy(n,u)}return new Rd(i,n)}function tD(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new gn(t,n.h)}function Wl(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new gn(i,n.h)}(Ze=gn.prototype).ea=function(){if(mo(this))return-ci(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:CI+r)*e,e*=CI}return n},Ze.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Da(this))return"0";if(mo(this))return"-"+ci(this).toString(n);for(var e=go(Math.pow(n,6)),t=this,r="";;){var i=jp(t,e).g,o=((0<(t=gy(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Da(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Ze.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ze.X=function(n){return mo(n=gy(this,n))?-1:Da(n)?0:1},Ze.abs=function(){return mo(this)?ci(this):this},Ze.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),u=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(o&=65535)}return new gn(t,-2147483648&t[t.length-1]?-1:0)},Ze.R=function(n){if(Da(this)||Da(n))return ql;if(mo(this))return mo(n)?ci(this).R(ci(n)):ci(ci(this).R(n));if(mo(n))return ci(this.R(ci(n)));if(0>this.X(UO)&&0>n.X(UO))return go(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,u=65535&this.D(r),f=n.D(i)>>>16,g=65535&n.D(i);t[2*r+2*i]+=u*g,my(t,2*r+2*i),t[2*r+2*i+1]+=o*g,my(t,2*r+2*i+1),t[2*r+2*i+1]+=u*f,my(t,2*r+2*i+1),t[2*r+2*i+2]+=o*f,my(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new gn(t,0)},Ze.gb=function(n){return jp(this,n).h},Ze.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new gn(t,this.h&n.h)},Ze.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new gn(t,this.h|n.h)},Ze.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new gn(t,this.h^n.h)},fy.prototype.createWebChannel=fy.prototype.g,hs.prototype.send=hs.prototype.u,hs.prototype.open=hs.prototype.m,hs.prototype.close=hs.prototype.close,bp.NO_ERROR=0,bp.TIMEOUT=8,bp.HTTP_ERROR=6,Zw.COMPLETE="complete",DM.EventType=Ep,Ep.OPEN="a",Ep.CLOSE="b",Ep.ERROR="c",Ep.MESSAGE="d",Or.prototype.listen=Or.prototype.O,Un.prototype.listenOnce=Un.prototype.P,Un.prototype.getLastError=Un.prototype.Sa,Un.prototype.getLastErrorCode=Un.prototype.Ia,Un.prototype.getStatus=Un.prototype.da,Un.prototype.getResponseJson=Un.prototype.Wa,Un.prototype.getResponseText=Un.prototype.ja,Un.prototype.send=Un.prototype.ha,Un.prototype.setWithCredentials=Un.prototype.Oa,ts.prototype.digest=ts.prototype.l,ts.prototype.reset=ts.prototype.reset,ts.prototype.update=ts.prototype.j,gn.prototype.add=gn.prototype.add,gn.prototype.multiply=gn.prototype.R,gn.prototype.modulo=gn.prototype.gb,gn.prototype.compare=gn.prototype.X,gn.prototype.toNumber=gn.prototype.ea,gn.prototype.toString=gn.prototype.toString,gn.prototype.getBits=gn.prototype.D,gn.fromNumber=go,gn.fromString=function Gl(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ci(Gl(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=go(Math.pow(e,8)),r=ql,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+o),e);8>o?(o=go(Math.pow(e,o)),r=r.R(o).add(go(u))):r=(r=r.R(t)).add(go(u))}return r};var nD=Fs.createWebChannelTransport=function(){return new fy},BO=Fs.getStatEventTarget=function(){return Z_()},wI=Fs.ErrorCode=bp,rD=Fs.EventType=Zw,VO=Fs.Event=Ea,II=Fs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},iD=Fs.FetchXmlHttpFactory=$l,$p=Fs.WebChannel=DM,sD=Fs.XhrIo=Un,jO=Fs.Md5=ts,Fd=Fs.Integer=gn;const $O="@firebase/firestore";class kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kr.UNAUTHENTICATED=new kr(null),kr.GOOGLE_CREDENTIALS=new kr("google-credentials-uid"),kr.FIRST_PARTY=new kr("first-party-uid"),kr.MOCK_USER=new kr("mock-user");let Hp="9.23.0";const Zl=new Ri.Yd("@firebase/firestore");function oD(){return Zl.logLevel}function Ae(n,...e){if(Zl.logLevel<=Ri.in.DEBUG){const t=e.map(aD);Zl.debug(`Firestore (${Hp}): ${n}`,...t)}}function Er(n,...e){if(Zl.logLevel<=Ri.in.ERROR){const t=e.map(aD);Zl.error(`Firestore (${Hp}): ${n}`,...t)}}function _o(n,...e){if(Zl.logLevel<=Ri.in.WARN){const t=e.map(aD);Zl.warn(`Firestore (${Hp}): ${n}`,...t)}}function aD(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${Hp}) INTERNAL ASSERTION FAILED: `+n;throw Er(e),new Error(e)}function rt(n,e){n||et()}function We(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class HO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kr.UNAUTHENTICATED))}shutdown(){}}class zO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cD{constructor(e){this.t=e,this.currentUser=kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let u=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Nr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const v=u;e.enqueueRetryable((0,U.Z)(function*(){yield v.promise,yield o(r.currentUser)}))},g=v=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Nr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt("string"==typeof r.accessToken),new HO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new kr(e)}}class GO{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=kr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class qO{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new GO(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class f4{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.T;return this.T=o.token,Ae("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt("string"==typeof t.token),this.T=t.token,new lD(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zp(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Gp{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=zp(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function bt(n,e){return n<e?-1:n>e?1:0}function Ld(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function uD(n){return n+"\0"}class Bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class at{constructor(e){this.timestamp=e}static fromTimestamp(e){return new at(e)}static min(){return new at(new Bn(0,0))}static max(){return new at(new Bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qp{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===qp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),u=t.get(i);if(o<u)return-1;if(o>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends qp{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const WO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends qp{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return WO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new ye(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new ye(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new ye(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(o(),i++)}if(o(),u)throw new ye(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(qt.fromString(e))}static fromName(e){return new qe(qt.fromString(e).popFirst(5))}static empty(){return new qe(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new qt(e.slice()))}}class _y{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function EI(n){return n.fields.find(e=>2===e.kind)}function Kl(n){return n.fields.filter(e=>2!==e.kind)}_y.UNKNOWN_ID=-1;class yy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ud{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ud(0,fs.min())}}function vy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=at.fromTimestamp(1e9===r?new Bn(t+1,0):new Bn(t,r));return new fs(i,qe.empty(),e)}function dD(n){return new fs(n.readTime,n.key,-1)}class fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fs(at.min(),qe.empty(),-1)}static max(){return new fs(at.max(),qe.empty(),-1)}}function Cy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:bt(n.largestBatchId,e.largestBatchId))}const TI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function fr(n){return wy.apply(this,arguments)}function wy(){return wy=(0,U.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==TI)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}),wy.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let i=0,o=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++o,u&&o===i&&t()},g=>r(g))}),u=!0,o===i&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(i=>i?te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new te((r,i)=>{const o=e.length,u=new Array(o);let f=0;for(let g=0;g<o;g++){const v=g;t(e[v]).next(b=>{u[v]=b,++f,f===o&&r(u)},b=>i(b))}})}static doWhile(e,t){return new te((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class Iy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Nr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Yl(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=MI(r.target.error);this.v.reject(new Yl(e,i))}}static open(e,t,r,i){try{return new Iy(t,e.transaction(i,r))}catch(o){throw new Yl(t,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new hD(t)}}class Bs{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Bs.S((0,z.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ae("SimpleDb","Removing database:",e),Sa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,z.hl)())return!1;if(Bs.C())return!0;const e=(0,z.z$)(),t=Bs.S(e),r=0<t&&t<10,i=Bs.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,U.Z)(function*(){return t.db||(Ae("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=u=>{r(u.target.result)},o.onblocked=()=>{i(new Yl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new ye(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new ye(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Yl(e,f))},o.onupgradeneeded=u=>{Ae("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.O(u.target.result,o.transaction,u.oldVersion,t.version).next(()=>{Ae("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,U.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{o.db=yield o.$(e);const g=Iy.open(o.db,e,u?"readonly":"readwrite",r),v=i(g).next(b=>(g.P(),b)).catch(b=>(g.abort(b),te.reject(b))).toPromise();return v.catch(()=>{}),yield g.R,v}catch(g){const v=g,b="FirebaseError"!==v.name&&f<3;if(Ae("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),o.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class QO{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Sa(this.L.delete())}}class Yl extends ye{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bi(n){return"IndexedDbTransactionError"===n.name}class hD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ae("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Sa(r)}add(e){return Ae("SimpleDb","ADD",this.store.name,e,e),Sa(this.store.add(e))}get(e){return Sa(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ae("SimpleDb","DELETE",this.store.name,e),Sa(this.store.delete(e))}count(){return Ae("SimpleDb","COUNT",this.store.name),Sa(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(u,f)=>{o.push(f)}).next(()=>o)}{const i=this.store.getAll(r.range);return new te((o,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{o(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((i,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){Ae("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,u,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new te((r,i)=>{t.onerror=o=>{const u=MI(o.target.error);i(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}W(e,t){const r=[];return new te((i,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const g=new QO(f),v=t(f.primaryKey,f.value,g);if(v instanceof te){const b=v.catch(T=>(g.done(),te.reject(T)));r.push(b)}g.isDone?i():null===g.K?f.continue():f.continue(g.K)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Sa(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=MI(r.target.error);t(i)}})}let by=!1;function MI(n){const e=Bs.S((0,z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return by||(by=!0,setTimeout(()=>{throw r},0)),r}}return n}class g4{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ae("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,U.Z)(function*(){t.task=null;try{Ae("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Bi(r)?Ae("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield fr(r)}yield t.et(6e4)}))}}class fD{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,U.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return te.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Ae("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(f=>{i-=f,r.add(u)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,o)).next(f=>(Ae("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const u=dD(o);Cy(u,r)>0&&(r=u)}),new fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ps=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Wp(n){return null==n}function Zp(n){return 0===n&&1/n==-1/0}function pD(n){return"number"==typeof n&&Number.isInteger(n)&&!Zp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DI(e)),e=m4(n.get(t),e);return DI(e)}function m4(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function DI(n){return n+"\x01\x01"}function Qo(n){const e=n.length;if(rt(e>=2),2===e)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const u=n.indexOf("\x01",o);switch((u<0||u>t)&&et(),n.charAt(u+1)){case"\x01":const f=n.substring(o,u);let g;0===i.length?g=f:(i+=f,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(o,u),i+="\0";break;case"\x11":i+=n.substring(o,u+1);break;default:et()}o=u+2}return new qt(r)}const SI=["userId","batchId"];function AI(n,e){return[n,li(e)]}function Ey(n,e,t){return[n,li(e),t]}const gD={},mD=["prefixPath","collectionGroup","readTime","documentId"],JO=["prefixPath","collectionGroup","documentId"],_D=["collectionGroup","readTime","prefixPath","documentId"],yD=["canonicalId","targetId"],Bd=["targetId","path"],Ty=["path","targetId"],vD=["collectionId","parent"],CD=["indexId","uid"],XO=["uid","sequenceNumber"],ek=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_4=["indexId","uid","orderedDocumentKey"],wD=["userId","collectionPath","documentId"],tk=["userId","collectionPath","largestBatchId"],nk=["userId","collectionGroup","largestBatchId"],rk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],y4=[...rk,"documentOverlays"],ik=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xI=ik,sk=[...xI,"indexConfiguration","indexState","indexEntries"];class PI extends YO{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Gr(n,e){const t=We(n);return Bs.M(t.ht,e)}function ok(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ql(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ak(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xn{constructor(e,t){this.comparator=e,this.root=t||ui.EMPTY}insert(e,t){return new xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new OI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new OI(this.root,e,this.comparator,!1)}getReverseIterator(){return new OI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new OI(this.root,e,this.comparator,!0)}}class OI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??ui.RED,this.left=i??ui.EMPTY,this.right=o??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ui(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ui.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1,ui.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ui(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ID(this.data.getIterator())}getIteratorFrom(e){return new ID(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class ID{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vd(n){return n.hasNext()?n.getNext():void 0}class Vi{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new Vi([])}unionWith(e){let t=new mn(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ld(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Cc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Cc("Invalid base64 string: "+i):i}}(e);return new pr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const kI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wc(n){if(rt(!!n),"string"==typeof n){let e=0;const t=kI.exec(n);if(rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vn(n.seconds),nanos:Vn(n.nanos)}}function Vn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function yo(n){return"string"==typeof n?pr.fromBase64String(n):pr.fromUint8Array(n)}function Jl(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function NI(n){const e=n.mapValue.fields.__previous_value__;return Jl(e)?NI(e):e}function My(n){const e=wc(n.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}class v4{constructor(e,t,r,i,o,u,f,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v}}class Aa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Aa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}const Ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dy={nullValue:"NULL_VALUE"};function bc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jl(n)?4:ck(n)?9007199254740991:10:et()}function Jo(n,e){if(n===e)return!0;const t=bc(n);if(t!==bc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return My(n).isEqual(My(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=wc(r.timestampValue),u=wc(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,yo(n.bytesValue).isEqual(yo(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Vn(r.geoPointValue.latitude)===Vn(i.geoPointValue.latitude)&&Vn(r.geoPointValue.longitude)===Vn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Vn(r.integerValue)===Vn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Vn(r.doubleValue),u=Vn(i.doubleValue);return o===u?Zp(o)===Zp(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return Ld(n.arrayValue.values||[],e.arrayValue.values||[],Jo);case 10:return function(r,i){const o=r.mapValue.fields||{},u=i.mapValue.fields||{};if(ok(o)!==ok(u))return!1;for(const f in o)if(o.hasOwnProperty(f)&&(void 0===u[f]||!Jo(o[f],u[f])))return!1;return!0}(n,e);default:return et()}var i}function jd(n,e){return void 0!==(n.values||[]).find(t=>Jo(t,e))}function xa(n,e){if(n===e)return 0;const t=bc(n),r=bc(e);if(t!==r)return bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return bt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Vn(i.integerValue||i.doubleValue),f=Vn(o.integerValue||o.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return RI(n.timestampValue,e.timestampValue);case 4:return RI(My(n),My(e));case 5:return bt(n.stringValue,e.stringValue);case 6:return function(i,o){const u=yo(i),f=yo(o);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),f=o.split("/");for(let g=0;g<u.length&&g<f.length;g++){const v=bt(u[g],f[g]);if(0!==v)return v}return bt(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const u=bt(Vn(i.latitude),Vn(o.latitude));return 0!==u?u:bt(Vn(i.longitude),Vn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const u=i.values||[],f=o.values||[];for(let g=0;g<u.length&&g<f.length;++g){const v=xa(u[g],f[g]);if(v)return v}return bt(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Ic.mapValue&&o===Ic.mapValue)return 0;if(i===Ic.mapValue)return 1;if(o===Ic.mapValue)return-1;const u=i.fields||{},f=Object.keys(u),g=o.fields||{},v=Object.keys(g);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const T=bt(f[b],v[b]);if(0!==T)return T;const S=xa(u[f[b]],g[v[b]]);if(0!==S)return S}return bt(f.length,v.length)}(n.mapValue,e.mapValue);default:throw et()}}function RI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return bt(n,e);const t=wc(n),r=wc(e),i=bt(t.seconds,r.seconds);return 0!==i?i:bt(t.nanos,r.nanos)}function $d(n){return FI(n)}function FI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=wc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?yo(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const u of r.values||[])o?o=!1:i+=",",i+=FI(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",u=!0;for(const f of i)u?u=!1:o+=",",o+=`${f}:${FI(r.fields[f])}`;return o+"}"}(n.mapValue):et();var e}function Pa(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ED(n){return!!n&&"integerValue"in n}function Hd(n){return!!n&&"arrayValue"in n}function Sy(n){return!!n&&"nullValue"in n}function TD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ay(n){return!!n&&"mapValue"in n}function xy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ql(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xy(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xy(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ck(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function lk(n){return"nullValue"in n?Dy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Pa(Aa.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function uk(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Pa(Aa.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ic:et()}function MD(n,e){const t=xa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function DD(n,e){const t=xa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ay(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xy(t)}setAll(e){let t=rr.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=xy(u):i.push(f.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Ay(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ay(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ql(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new qr(xy(this.value))}}function LI(n){const e=[];return Ql(n.fields,(t,r)=>{const i=new rr([t]);if(Ay(r)){const o=LI(r.mapValue).fields;if(0===o.length)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)}),new Vi(e)}class Pn{constructor(e,t,r,i,o,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Pn(e,0,at.min(),at.min(),at.min(),qr.empty(),0)}static newFoundDocument(e,t,r,i){return new Pn(e,1,t,at.min(),r,i,0)}static newNoDocument(e,t){return new Pn(e,2,t,at.min(),at.min(),qr.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,at.min(),at.min(),qr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(at.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Oa{constructor(e,t){this.position=e,this.inclusive=t}}function UI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],u=n.position[i];if(r=o.field.isKeyField()?qe.comparator(qe.fromName(u.referenceValue),t.key):xa(u,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function dk(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jo(n.position[t],e.position[t]))return!1;return!0}class zd{constructor(e,t="asc"){this.field=e,this.dir=t}}function BI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class VI{}class $t extends VI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new pk(e,t,r):"array-contains"===t?new gk(e,r):"in"===t?new mk(e,r):"not-in"===t?new I4(e,r):"array-contains-any"===t?new b4(e,r):new $t(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new C4(e,r):new w4(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xa(t,this.value)):null!==t&&bc(this.value)===bc(t)&&this.matchesComparison(xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class dn extends VI{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new dn(e,t)}matches(e){return ka(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ka(n){return"and"===n.op}function jI(n){return"or"===n.op}function $I(n){return HI(n)&&ka(n)}function HI(n){for(const e of n.filters)if(e instanceof dn)return!1;return!0}function Py(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+$d(n.value);if($I(n))return n.filters.map(e=>Py(e)).join(",");{const e=n.filters.map(t=>Py(t)).join(",");return`${n.op}(${e})`}}function hk(n,e){return n instanceof $t?(t=n,(r=e)instanceof $t&&t.op===r.op&&t.field.isEqual(r.field)&&Jo(t.value,r.value)):n instanceof dn?function(t,r){return r instanceof dn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,u)=>i&&hk(o,r.filters[u]),!0)}(n,e):void et();var t,r}function SD(n,e){const t=n.filters.concat(e);return dn.create(t,n.op)}function fk(n){return n instanceof $t?`${(e=n).field.canonicalString()} ${e.op} ${$d(e.value)}`:n instanceof dn?function(e){return e.op.toString()+" {"+e.getFilters().map(fk).join(" ,")+"}"}(n):"Filter";var e}class pk extends $t{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class C4 extends $t{constructor(e,t){super(e,"in",t),this.keys=AD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class w4 extends $t{constructor(e,t){super(e,"not-in",t),this.keys=AD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function AD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class gk extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hd(t)&&jd(t.arrayValue,this.value)}}class mk extends $t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jd(this.value.arrayValue,t)}}class I4 extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if(jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jd(this.value.arrayValue,t)}}class b4 extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jd(this.value.arrayValue,r))}}class E4{constructor(e,t=null,r=[],i=[],o=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=f,this.dt=null}}function xD(n,e=null,t=[],r=[],i=null,o=null,u=null){return new E4(n,e,t,r,i,o,u)}function Xl(n){const e=We(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Py(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Wp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$d(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$d(r)).join(",")),e.dt=t}return e.dt}function Oy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dk(n.startAt,e.startAt)&&dk(n.endAt,e.endAt)}function zI(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function GI(n,e){return n.filters.filter(t=>t instanceof $t&&t.field.isEqual(e))}function _k(n,e,t){let r=Dy,i=!0;for(const o of GI(n,e)){let u=Dy,f=!0;switch(o.op){case"<":case"<=":u=lk(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,f=!1;break;case"!=":case"not-in":u=Dy}MD({value:r,inclusive:i},{value:u,inclusive:f})<0&&(r=u,i=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];MD({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function yk(n,e,t){let r=Ic,i=!0;for(const o of GI(n,e)){let u=Ic,f=!0;switch(o.op){case">=":case">":u=uk(o.value),f=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,f=!1;break;case"!=":case"not-in":u=Ic}DD({value:r,inclusive:i},{value:u,inclusive:f})>0&&(r=u,i=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];DD({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Na{constructor(e,t=null,r=[],i=[],o=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=f,this.endAt=g,this.wt=null,this._t=null}}function vk(n,e,t,r,i,o,u,f){return new Na(n,e,t,r,i,o,u,f)}function s(n){return new Na(n)}function a(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function l(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function d(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function h(n){return null!==n.collectionGroup}function p(n){const e=We(n);if(null===e.wt){e.wt=[];const t=d(e),r=l(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new zd(t)),e.wt.push(new zd(rr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new zd(rr.keyField(),o))}}}return e.wt}function y(n){const e=We(n);if(!e._t)if("F"===e.limitType)e._t=xD(e.path,e.collectionGroup,p(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of p(e))t.push(new zd(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new Oa(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Oa(e.startAt.position,e.startAt.inclusive):null;e._t=xD(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function C(n,e){e.getFirstInequalityField(),d(n);const t=n.filters.concat([e]);return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function E(n,e,t){return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function M(n,e){return Oy(y(n),y(e))&&n.limitType===e.limitType}function A(n){return`${Xl(y(n))}|lt:${n.limitType}`}function R(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>fk(r)).join(", ")}]`),Wp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$d(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$d(r)).join(",")),`Target(${t})`}(y(n))}; limitType=${n.limitType})`}function W(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of p(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,u){const f=UI(i,o,u);return i.inclusive?f<=0:f<0}(t.startAt,p(t),r)||t.endAt&&!function(i,o,u){const f=UI(i,o,u);return i.inclusive?f>=0:f>0}(t.endAt,p(t),r)));var t,r}function Y(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ue(n){return(e,t)=>{let r=!1;for(const i of p(n)){const o=Se(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Se(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(i,o,u){const f=o.data.field(i),g=u.data.field(i);return null!==f&&null!==g?xa(f,g):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}class $e{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ql(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return ak(this.inner)}size(){return this.innerSize}}const ct=new xn(qe.comparator);function fe(){return ct}const Ct=new xn(qe.comparator);function St(...n){let e=Ct;for(const t of n)e=e.insert(t.key,t);return e}function cn(n){let e=Ct;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Yn(){return ea()}function Xo(){return ea()}function ea(){return new $e(n=>n.toString(),(n,e)=>n.isEqual(e))}const qI=new xn(qe.comparator),Ck=new mn(qe.comparator);function Pt(...n){let e=Ck;for(const t of n)e=e.add(t);return e}const H7=new mn(bt);function wk(){return H7}function T4(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zp(e)?"-0":e}}function M4(n){return{integerValue:""+n}}function D4(n,e){return pD(e)?M4(e):T4(n,e)}class PD{constructor(){this._=void 0}}function z7(n,e,t){return n instanceof ky?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Jl(i)&&(i=NI(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Yp?A4(n,e):n instanceof Qp?x4(n,e):function(r,i){const o=S4(r,i),u=P4(o)+P4(r.gt);return ED(o)&&ED(r.gt)?M4(u):T4(r.serializer,u)}(n,e)}function G7(n,e,t){return n instanceof Yp?A4(n,e):n instanceof Qp?x4(n,e):t}function S4(n,e){return n instanceof Ny?ED(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ky extends PD{}class Yp extends PD{constructor(e){super(),this.elements=e}}function A4(n,e){const t=O4(e);for(const r of n.elements)t.some(i=>Jo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Qp extends PD{constructor(e){super(),this.elements=e}}function x4(n,e){let t=O4(e);for(const r of n.elements)t=t.filter(i=>!Jo(i,r));return{arrayValue:{values:t}}}class Ny extends PD{constructor(e,t){super(),this.serializer=e,this.gt=t}}function P4(n){return Vn(n.integerValue||n.doubleValue)}function O4(n){return Hd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class WI{constructor(e,t){this.field=e,this.transform=t}}class W7{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function OD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class kD{}function k4(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Fy(n.key,ir.none()):new Ry(n.key,n.data,ir.none());{const t=n.data,r=qr.empty();let i=new mn(rr.comparator);for(let o of e.fields)if(!i.has(o)){let u=t.field(o);null===u&&o.length>1&&(o=o.popLast(),u=t.field(o)),null===u?r.delete(o):r.set(o,u),i=i.add(o)}return new eu(n.key,r,new Vi(i.toArray()),ir.none())}}function Z7(n,e,t){n instanceof Ry?function(r,i,o){const u=r.value.clone(),f=F4(r.fieldTransforms,i,o.transformResults);u.setAll(f),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof eu?function(r,i,o){if(!OD(r.precondition,i))return void i.convertToUnknownDocument(o.version);const u=F4(r.fieldTransforms,i,o.transformResults),f=i.data;f.setAll(R4(r)),f.setAll(u),i.convertToFoundDocument(o.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ZI(n,e,t,r){return n instanceof Ry?function(i,o,u,f){if(!OD(i.precondition,o))return u;const g=i.value.clone(),v=L4(i.fieldTransforms,f,o);return g.setAll(v),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof eu?function(i,o,u,f){if(!OD(i.precondition,o))return u;const g=L4(i.fieldTransforms,f,o),v=o.data;return v.setAll(R4(i)),v.setAll(g),o.convertToFoundDocument(o.version,v).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(u=t,OD(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u);var o,u}function K7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=S4(r.transform,i||null);null!=o&&(null===t&&(t=qr.empty()),t.set(r.field,o))}return t||null}function N4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ld(t,r,(i,o)=>function q7(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Yp&&r instanceof Yp||t instanceof Qp&&r instanceof Qp?Ld(t.elements,r.elements,Jo):t instanceof Ny&&r instanceof Ny?Jo(t.gt,r.gt):t instanceof ky&&r instanceof ky);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ry extends kD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class eu extends kD{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function R4(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function F4(n,e,t){const r=new Map;rt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],u=o.transform,f=e.data.field(o.field);r.set(o.field,G7(u,f,t[i]))}return r}function L4(n,e,t){const r=new Map;for(const i of n){const o=i.transform,u=t.data.field(i.field);r.set(i.field,z7(o,u,e))}return r}class Fy extends kD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ik extends kD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bk{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Z7(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ZI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ZI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Xo();return this.mutations.forEach(i=>{const o=e.get(i.key),u=o.overlayedDocument;let f=this.applyToLocalView(u,o.mutatedFields);f=t.has(i.key)?null:f;const g=k4(u,f);null!==g&&r.set(i.key,g),u.isValidDocument()||u.convertToNoDocument(at.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pt())}isEqual(e){return this.batchId===e.batchId&&Ld(this.mutations,e.mutations,(t,r)=>N4(t,r))&&Ld(this.baseMutations,e.baseMutations,(t,r)=>N4(t,r))}}class Ek{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length);let i=qI;const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new Ek(e,t,r,i)}}class Tk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Q7{constructor(e,t){this.count=e,this.unchangedNames=t}}var Wr,Xt;function U4(n){switch(n){default:return et();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function B4(n){if(void 0===n)return Er("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Wr.OK:return ae.OK;case Wr.CANCELLED:return ae.CANCELLED;case Wr.UNKNOWN:return ae.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return ae.INTERNAL;case Wr.UNAVAILABLE:return ae.UNAVAILABLE;case Wr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Wr.NOT_FOUND:return ae.NOT_FOUND;case Wr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Wr.ABORTED:return ae.ABORTED;case Wr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Wr.DATA_LOSS:return ae.DATA_LOSS;default:return et()}}(Xt=Wr||(Wr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class Mk{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ND}static getOrCreateInstance(){return null===ND&&(ND=new Mk),ND}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let ND=null;function V4(){return new TextEncoder}const J7=new Fd([4294967295,4294967295],0);function j4(n){const e=V4().encode(n),t=new jO;return t.update(e),new Uint8Array(t.digest())}function $4(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Fd([t,r],0),new Fd([i,o],0)]}class Dk{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new KI(`Invalid padding: ${t}`);if(r<0)throw new KI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new KI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new KI(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Fd.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Fd.fromNumber(r)));return 1===i.compare(J7)&&(i=new Fd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=j4(e),[r,i]=$4(t);for(let o=0;o<this.hashCount;o++){const u=this.Et(r,i,o);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new Dk(o,i,t);return r.forEach(f=>u.insert(f)),u}insert(e){if(0===this.It)return;const t=j4(e),[r,i]=$4(t);for(let o=0;o<this.hashCount;o++){const u=this.Et(r,i,o);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class KI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class YI{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,QI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new YI(at.min(),i,new xn(bt),fe(),Pt())}}class QI{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new QI(r,t,Pt(),Pt(),Pt())}}class RD{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class H4{constructor(e,t){this.targetId=e,this.Vt=t}}class z4{constructor(e,t,r=pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class G4{constructor(){this.St=0,this.Dt=W4(),this.Ct=pr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Pt(),t=Pt(),r=Pt();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new QI(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=W4()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class X7{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=fe(),this.zt=q4(),this.Wt=new xn(bt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const u=o.target;if(zI(u))if(0===i){const f=new qe(u.path);this.Yt(r,f,Pn.newNoDocument(f,at.min()))}else rt(1===i);else{const f=this.ie(r);if(f!==i){const g=this.re(e,f);0!==g&&(this.ee(r),this.Wt=this.Wt.insert(r,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Mk.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,b,T){var S,N,q,Q,J,Ee;const ze={localCacheCount:b,existenceFilterCount:T.count},Ne=T.unchangedNames;return Ne&&(ze.bloomFilter={applied:0===v,hashCount:null!==(S=Ne?.hashCount)&&void 0!==S?S:0,bitmapLength:null!==(Q=null===(q=null===(N=Ne?.bits)||void 0===N?void 0:N.bitmap)||void 0===q?void 0:q.length)&&void 0!==Q?Q:0,padding:null!==(Ee=null===(J=Ne?.bits)||void 0===J?void 0:J.padding)&&void 0!==Ee?Ee:0}),ze}(g,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:u=0},hashCount:f=0}=r;let g,v;try{g=yo(o).toUint8Array()}catch(b){if(b instanceof Cc)return _o("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{v=new Dk(g,u,f)}catch(b){return _o(b instanceof KI?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const u=this.Gt.ue(),f=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;t.vt(f)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,u)=>{const f=this.se(u);if(f){if(o.current&&zI(f.target)){const g=new qe(f.target.path);null!==this.jt.get(g)||this.ae(u,g)||this.Yt(u,g,Pn.newNoDocument(g,e))}o.Mt&&(t.set(u,o.Ot()),o.Ft())}});let r=Pt();this.zt.forEach((o,u)=>{let f=!0;u.forEachWhile(g=>{const v=this.se(g);return!v||"TargetPurposeLimboResolution"===v.purpose||(f=!1,!1)}),f&&(r=r.add(o))}),this.jt.forEach((o,u)=>u.setReadTime(e));const i=new YI(e,t,this.Wt,this.jt,r);return this.jt=fe(),this.zt=q4(),this.Wt=new xn(bt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new G4,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new mn(bt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new G4),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function q4(){return new xn(qe.comparator)}function W4(){return new xn(qe.comparator)}const ej={asc:"ASCENDING",desc:"DESCENDING"},tj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nj={and:"AND",or:"OR"};class rj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sk(n,e){return n.useProto3Json||Wp(e)?e:{value:e}}function Ly(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Z4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ij(n,e){return Ly(n,e.toTimestamp())}function Rr(n){return rt(!!n),at.fromTimestamp(function(e){const t=wc(e);return new Bn(t.seconds,t.nanos)}(n))}function Ak(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function K4(n){const e=qt.fromString(n);return rt(iU(e)),e}function JI(n,e){return Ak(n.databaseId,e.path)}function Ec(n,e){const t=K4(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(Q4(t))}function xk(n,e){return Ak(n.databaseId,e)}function Y4(n){const e=K4(n);return 4===e.length?qt.emptyPath():Q4(e)}function XI(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Q4(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function J4(n,e,t){return{name:JI(n,e),fields:t.value.mapValue.fields}}function X4(n,e,t){const r=Ec(n,e.name),i=Rr(e.updateTime),o=e.createTime?Rr(e.createTime):at.min(),u=new qr({mapValue:{fields:e.fields}}),f=Pn.newFoundDocument(r,i,o,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function eb(n,e){let t;if(e instanceof Ry)t={update:J4(n,e.key,e.value)};else if(e instanceof Fy)t={delete:JI(n,e.key)};else if(e instanceof eu)t={update:J4(n,e.key,e.data),updateMask:hj(e.fieldMask)};else{if(!(e instanceof Ik))return et();t={verify:JI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof ky)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Yp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Qp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ny)return{fieldPath:o.field.canonicalString(),increment:u.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:ij(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function Pk(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ir.updateTime(Rr(i.updateTime)):void 0!==i.exists?ir.exists(i.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,u){let f=null;"setToServerValue"in u?(rt("REQUEST_TIME"===u.setToServerValue),f=new ky):"appendMissingElements"in u?f=new Yp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new Qp(u.removeAllFromArray.values||[]):"increment"in u?f=new Ny(o,u.increment):et();const g=rr.fromServerFormat(u.fieldPath);return new WI(g,f)}(n,i)):[];var i;if(e.update){const i=Ec(n,e.update.name),o=new qr({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Vi((e.updateMask.fieldPaths||[]).map(v=>rr.fromServerFormat(v)));return new eu(i,o,u,t,r)}return new Ry(i,o,t,r)}if(e.delete){const i=Ec(n,e.delete);return new Fy(i,t)}if(e.verify){const i=Ec(n,e.verify);return new Ik(i,t)}return et()}function eU(n,e){return{documents:[xk(n,e.path)]}}function Ok(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=xk(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xk(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return rU(dn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(g){if(0!==g.length)return g.map(v=>{return{field:Gd((b=v).field),direction:lj(b.dir)};var b})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=Sk(n,e.limit);var f,g;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function tU(n){let e=Y4(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let o=[];t.where&&(o=function(b){const T=nU(b);return T instanceof dn&&$I(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(b=>{return new zd(Uy((T=b).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let f=null;t.limit&&(f=function(b){let T;return T="object"==typeof b?b.value:b,Wp(T)?null:T}(t.limit));let g=null;var b;t.startAt&&(g=new Oa((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new Oa(b.values||[],!b.before)}(t.endAt)),vk(e,i,u,o,f,"F",g,v)}function nU(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Uy(e.unaryFilter.field);return $t.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Uy(e.unaryFilter.field);return $t.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Uy(e.unaryFilter.field);return $t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Uy(e.unaryFilter.field);return $t.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?$t.create(Uy((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return dn.create(e.compositeFilter.filters.map(t=>nU(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function lj(n){return ej[n]}function uj(n){return tj[n]}function dj(n){return nj[n]}function Gd(n){return{fieldPath:n.canonicalString()}}function Uy(n){return rr.fromServerFormat(n.fieldPath)}function rU(n){return n instanceof $t?function(e){if("=="===e.op){if(TD(e.value))return{unaryFilter:{field:Gd(e.field),op:"IS_NAN"}};if(Sy(e.value))return{unaryFilter:{field:Gd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(TD(e.value))return{unaryFilter:{field:Gd(e.field),op:"IS_NOT_NAN"}};if(Sy(e.value))return{unaryFilter:{field:Gd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gd(e.field),op:uj(e.op),value:e.value}}}(n):n instanceof dn?function(e){const t=e.getFilters().map(r=>rU(r));return 1===t.length?t[0]:{compositeFilter:{op:dj(e.op),filters:t}}}(n):et()}function hj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class tu{constructor(e,t,r,i,o=at.min(),u=at.min(),f=pr.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new tu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class sU{constructor(e){this.fe=e}}function oU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:FD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:JI(i=n.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Ly(i,o.version.toTimestamp()),createTime:Ly(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jp(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Jp(e.version)}}var i,o;return r}function FD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xp(n){const e=new Bn(n.seconds,n.nanoseconds);return at.fromTimestamp(e)}function eg(n,e){const t=(e.baseMutations||[]).map(o=>Pk(n.fe,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>Pk(n.fe,o)),i=Bn.fromMillis(e.localWriteTimeMs);return new bk(e.batchId,i,t,r)}function tb(n){const e=Xp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xp(n.lastLimboFreeSnapshotVersion):at.min();let r;var i;return void 0!==n.query.documents?(rt(1===(i=n.query).documents.length),r=y(s(Y4(i.documents[0])))):r=y(tU(n.query)),new tu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,pr.fromBase64String(n.resumeToken))}function aU(n,e){const t=Jp(e.snapshotVersion),r=Jp(e.lastLimboFreeSnapshotVersion);let i;i=zI(e.target)?eU(n.fe,e.target):Ok(n.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xl(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function kk(n){const e=tU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?E(e,e.limit,"L"):e}function Nk(n,e){return new Tk(e.largestBatchId,Pk(n.fe,e.overlayMutation))}function cU(n,e){const t=e.path.lastSegment();return[n,li(e.path.popLast()),t]}function lU(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Jp(r.readTime),documentKey:li(r.documentKey.path),largestBatchId:r.largestBatchId}}class pj{getBundleMetadata(e,t){return uU(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Xp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return uU(e).put({bundleId:(r=t).id,createTime:Jp(Rr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return dU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:kk(i.bundledQuery),readTime:Xp(i.readTime)};var i})}saveNamedQuery(e,t){return dU(e).put({name:(r=t).name,readTime:Jp(Rr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function uU(n){return Gr(n,"bundles")}function dU(n){return Gr(n,"namedQueries")}class LD{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new LD(e,t.uid||"")}getOverlay(e,t){return nb(e).get(cU(this.userId,t)).next(r=>r?Nk(this.serializer,r):null)}getOverlays(e,t){const r=Yn();return te.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,u)=>{const f=new Tk(t,u);i.push(this.we(e,f))}),te.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(li(u.getCollectionPath())));const o=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(nb(e).J("collectionPathOverlayIndex",f))}),te.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Yn(),o=li(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return nb(e).j("collectionPathOverlayIndex",u).next(f=>{for(const g of f){const v=Nk(this.serializer,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Yn();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nb(e).X({index:"collectionGroupOverlayIndex",range:f},(g,v,b)=>{const T=Nk(this.serializer,v);o.size()<i||T.largestBatchId===u?(o.set(T.getKey(),T),u=T.largestBatchId):b.done()}).next(()=>o)}we(e,t){return nb(e).put(function(r,i,o){const[u,f,g]=cU(i,o.mutation.key);return{userId:i,collectionPath:f,documentId:g,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:eb(r.fe,o.mutation)}}(this.serializer,this.userId,t))}}function nb(n){return Gr(n,"documentOverlays")}class tg{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Vn(e.integerValue));else if("doubleValue"in e){const r=Vn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Zp(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(yo(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?ck(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function gj(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function hU(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=gj(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}tg.Ve=new tg;class mj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=hU(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=hU(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class _j{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class yj{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class rb{constructor(){this.je=new mj,this.ze=new _j(this.je),this.We=new yj(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class ng{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ng(this.indexId,this.documentKey,this.arrayValue,r)}}function qd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=fU(n.arrayValue,e.arrayValue),0!==t?t:(t=fU(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function fU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class vj{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){rt(e.collectionGroup===this.collectionId);const t=EI(e);if(void 0!==t&&!this.en(t))return!1;const r=Kl(e);let i=new Set,o=0,u=0;for(;o<r.length&&this.en(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[o];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[u++],f))return!1}++o}for(;o<r.length;++o)if(u>=this.Ye.length||!this.sn(this.Ye[u++],r[o]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function pU(n){var e,t;if(rt(n instanceof $t||n instanceof dn),n instanceof $t){if(n instanceof mk){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>$t.create(n.field,"==",o)))||[];return dn.create(i,"or")}return n}const r=n.filters.map(i=>pU(i));return dn.create(r,n.op)}function Cj(n){if(0===n.getFilters().length)return[];const e=Lk(pU(n));return rt(gU(e)),Rk(e)||Fk(e)?[e]:e.getFilters()}function Rk(n){return n instanceof $t}function Fk(n){return n instanceof dn&&$I(n)}function gU(n){return Rk(n)||Fk(n)||function(e){if(e instanceof dn&&jI(e)){for(const t of e.getFilters())if(!Rk(t)&&!Fk(t))return!1;return!0}return!1}(n)}function Lk(n){if(rt(n instanceof $t||n instanceof dn),n instanceof $t)return n;if(1===n.filters.length)return Lk(n.filters[0]);const e=n.filters.map(r=>Lk(r));let t=dn.create(e,n.op);return t=UD(t),gU(t)?t:(rt(t instanceof dn),rt(ka(t)),rt(t.filters.length>1),t.filters.reduce((r,i)=>Uk(r,i)))}function Uk(n,e){let t;return rt(n instanceof $t||n instanceof dn),rt(e instanceof $t||e instanceof dn),t=n instanceof $t?e instanceof $t?dn.create([n,e],"and"):mU(n,e):e instanceof $t?mU(e,n):function(r,i){if(rt(r.filters.length>0&&i.filters.length>0),ka(r)&&ka(i))return SD(r,i.getFilters());const o=jI(r)?r:i,u=jI(r)?i:r,f=o.filters.map(g=>Uk(g,u));return dn.create(f,"or")}(n,e),UD(t)}function mU(n,e){if(ka(e))return SD(e,n.getFilters());{const t=e.filters.map(r=>Uk(n,r));return dn.create(t,"or")}}function UD(n){if(rt(n instanceof $t||n instanceof dn),n instanceof $t)return n;const e=n.getFilters();if(1===e.length)return UD(e[0]);if(HI(n))return n;const t=e.map(i=>UD(i)),r=[];return t.forEach(i=>{i instanceof $t?r.push(i):i instanceof dn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:dn.create(r,n.op)}class wj{constructor(){this.rn=new Bk}addToCollectionParentIndex(e,t){return this.rn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(fs.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class Bk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mn(qt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mn(qt.comparator)).toArray()}}const BD=new Uint8Array(0);class Ij{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Bk,this.un=new $e(r=>Xl(r),(r,i)=>Oy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const o={collectionId:r,parent:li(i)};return _U(e).put(o)}return te.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[uD(t),""],!1,!0);return _U(e).j(i).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(Qo(u.parent))}return r})}addFieldIndex(e,t){const r=VD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var u;delete i.indexId;const o=r.add(i);if(t.indexState){const u=sb(e);return o.next(f=>{u.put(lU(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=VD(e),i=sb(e),o=ib(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ib(e);let i=!0;const o=new Map;return te.forEach(this.cn(t),u=>this.an(e,u).next(f=>{i&&(i=!!f),o.set(u,f)})).next(()=>{if(i){let u=Pt();const f=[];return te.forEach(o,(g,v)=>{var b;Ae("IndexedDbIndexManager",`Using index ${b=g,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Ne=>`${Ne.fieldPath}:${Ne.kind}`).join(",")}`} to execute ${Xl(t)}`);const T=function(Ne,Ye){const gt=EI(Ye);if(void 0===gt)return null;for(const At of GI(Ne,gt.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(v,g),S=function(Ne,Ye){const gt=new Map;for(const At of Kl(Ye))for(const Lr of GI(Ne,At.fieldPath))switch(Lr.op){case"==":case"in":gt.set(At.fieldPath.canonicalString(),Lr.value);break;case"not-in":case"!=":return gt.set(At.fieldPath.canonicalString(),Lr.value),Array.from(gt.values())}return null}(v,g),N=function(Ne,Ye){const gt=[];let At=!0;for(const Lr of Kl(Ye)){const $s=0===Lr.kind?_k(Ne,Lr.fieldPath,Ne.startAt):yk(Ne,Lr.fieldPath,Ne.startAt);gt.push($s.value),At&&(At=$s.inclusive)}return new Oa(gt,At)}(v,g),q=function(Ne,Ye){const gt=[];let At=!0;for(const Lr of Kl(Ye)){const $s=0===Lr.kind?yk(Ne,Lr.fieldPath,Ne.endAt):_k(Ne,Lr.fieldPath,Ne.endAt);gt.push($s.value),At&&(At=$s.inclusive)}return new Oa(gt,At)}(v,g),Q=this.hn(g,v,N),J=this.hn(g,v,q),Ee=this.ln(g,v,S),ze=this.fn(g.indexId,T,Q,N.inclusive,J,q.inclusive,Ee);return te.forEach(ze,Ne=>r.H(Ne,t.limit).next(Ye=>{Ye.forEach(gt=>{const At=qe.fromSegments(gt.documentKey);u.has(At)||(u=u.add(At),f.push(At))})}))}).next(()=>f)}return te.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Cj(dn.create(e.filters,"and")).map(r=>xD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,o,u,f){const g=(null!=t?t.length:1)*Math.max(r.length,o.length),v=g/(null!=t?t.length:1),b=[];for(let T=0;T<g;++T){const S=t?this.dn(t[T/v]):BD,N=this.wn(e,S,r[T%v],i),q=this._n(e,S,o[T%v],u),Q=f.map(J=>this.wn(e,S,J,!0));b.push(...this.createRange(N,q,Q))}return b}wn(e,t,r,i){const o=new ng(e,qe.empty(),t,r);return i?o:o.Je()}_n(e,t,r,i){const o=new ng(e,qe.empty(),t,r);return i?o.Je():o}an(e,t){const r=new vj(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let u=null;for(const f of o)r.tn(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u})}getIndexType(e,t){let r=2;const i=this.cn(t);return te.forEach(i,o=>this.an(e,o).next(u=>{u?0!==r&&u.fields.length<function(f){let g=new mn(rr.comparator),v=!1;for(const b of f.filters)for(const T of b.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?v=!0:g=g.add(T.field));for(const b of f.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new rb;for(const i of Kl(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const u=r.He(i.kind);tg.Ve._e(o,u)}return r.Qe()}dn(e){const t=new rb;return tg.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new rb;return tg.Ve._e(Pa(this.databaseId,t),r.He(function(i){const o=Kl(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new rb);let o=0;for(const u of Kl(e)){const f=r[o++];for(const g of i)if(this.yn(t,u.fieldPath)&&Hd(f))i=this.pn(i,u,f);else{const v=g.He(u.kind);tg.Ve._e(f,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],o=[];for(const u of r.arrayValue.values||[])for(const f of i){const g=new rb;g.seed(f.Qe()),tg.Ve._e(u,g.He(t.kind)),o.push(g)}return o}yn(e,t){return!!e.filters.find(r=>r instanceof $t&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=VD(e),i=sb(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const u=[];return te.forEach(o,f=>i.get([f.indexId,this.uid]).next(g=>{u.push(function(v,b){const T=b?new Ud(b.sequenceNumber,new fs(Xp(b.readTime),new qe(Qo(b.documentKey)),b.largestBatchId)):Ud.empty(),S=v.fields.map(([N,q])=>new yy(rr.fromServerFormat(N),q));return new _y(v.indexId,v.collectionGroup,S,T)}(f,g))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=VD(e),o=sb(e);return this.Tn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>te.forEach(f,g=>o.put(lU(g.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(i,o)=>{const u=r.get(i.collectionGroup);return(u?te.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),te.forEach(f,g=>this.En(e,i,g).next(v=>{const b=this.An(o,g);return v.isEqual(b)?te.resolve():this.vn(e,o,g,v,b)}))))})}Rn(e,t,r,i){return ib(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return ib(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=ib(e);let o=new mn(qd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(u,f)=>{o=o.add(new ng(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>o)}An(e,t){let r=new mn(qd);const i=this.mn(t,e);if(null==i)return r;const o=EI(t);if(null!=o){const u=e.data.field(o.fieldPath);if(Hd(u))for(const f of u.arrayValue.values||[])r=r.add(new ng(t.indexId,e.key,this.dn(f),i))}else r=r.add(new ng(t.indexId,e.key,BD,i));return r}vn(e,t,r,i,o){Ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,g,v,b,T){const S=f.getIterator(),N=g.getIterator();let q=Vd(S),Q=Vd(N);for(;q||Q;){let J=!1,Ee=!1;if(q&&Q){const ze=v(q,Q);ze<0?Ee=!0:ze>0&&(J=!0)}else null!=q?Ee=!0:J=!0;J?(b(Q),Q=Vd(N)):Ee?(T(q),q=Vd(S)):(q=Vd(S),Q=Vd(N))}}(i,o,qd,f=>{u.push(this.Rn(e,t,r,f))},f=>{u.push(this.Pn(e,t,r,f))}),te.waitFor(u)}Tn(e){let t=1;return sb(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,f)=>qd(u,f)).filter((u,f,g)=>!f||0!==qd(u,g[f-1]));const i=[];i.push(e);for(const u of r){const f=qd(u,e),g=qd(u,t);if(0===f)i[0]=e.Je();else if(f>0&&g<0)i.push(u),i.push(u.Je());else if(g>0)break}i.push(t);const o=[];for(let u=0;u<i.length;u+=2){if(this.bn(i[u],i[u+1]))return[];o.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,BD,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,BD,[]]))}return o}bn(e,t){return qd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yU)}getMinOffset(e,t){return te.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||et())).next(yU)}}function _U(n){return Gr(n,"collectionParents")}function ib(n){return Gr(n,"indexEntries")}function VD(n){return Gr(n,"indexConfiguration")}function sb(n){return Gr(n,"indexState")}function yU(n){rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Cy(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new fs(e.readTime,e.documentKey,t)}const vU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ns{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function CU(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],u=IDBKeyRange.only(t.batchId);let f=0;const g=r.X({range:u},(b,T,S)=>(f++,S.delete()));o.push(g.next(()=>{rt(1===f)}));const v=[];for(const b of t.mutations){const T=Ey(e,b.key.path,t.batchId);o.push(i.delete(T)),v.push(b.key)}return te.waitFor(o).next(()=>v)}function jD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(41943040,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);class $D{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){rt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new $D(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wd(e).X({index:"userMutationsIndex",range:r},(i,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=By(e),u=Wd(e);return u.add({}).next(f=>{rt("number"==typeof f);const g=new bk(f,t,r,i),v=function(S,N,q){const Q=q.baseMutations.map(Ee=>eb(S.fe,Ee)),J=q.mutations.map(Ee=>eb(S.fe,Ee));return{userId:N,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:Q,mutations:J}}(this.serializer,this.userId,g),b=[];let T=new mn((S,N)=>bt(S.canonicalString(),N.canonicalString()));for(const S of i){const N=Ey(this.userId,S.key.path,f);T=T.add(S.key.path.popLast()),b.push(u.put(v)),b.push(o.put(N,gD))}return T.forEach(S=>{b.push(this.indexManager.addToCollectionParentIndex(e,S))}),e.addOnCommittedListener(()=>{this.Vn[f]=g.keys()}),te.waitFor(b).next(()=>g)})}lookupMutationBatch(e,t){return Wd(e).get(t).next(r=>r?(rt(r.userId===this.userId),eg(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?te.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Wd(e).X({index:"userMutationsIndex",range:i},(u,f,g)=>{f.userId===this.userId&&(rt(f.batchId>=r),o=eg(this.serializer,f)),g.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Wd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wd(e).j("userMutationsIndex",t).next(r=>r.map(i=>eg(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=AI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return By(e).X({range:i},(u,f,g)=>{const[v,b,T]=u,S=Qo(b);if(v===this.userId&&t.path.isEqual(S))return Wd(e).get(T).next(N=>{if(!N)throw et();rt(N.userId===this.userId),o.push(eg(this.serializer,N))});g.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(bt);const i=[];return t.forEach(o=>{const u=AI(this.userId,o.path),f=IDBKeyRange.lowerBound(u),g=By(e).X({range:f},(v,b,T)=>{const[S,N,q]=v,Q=Qo(N);S===this.userId&&o.path.isEqual(Q)?r=r.add(q):T.done()});i.push(g)}),te.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=AI(this.userId,r),u=IDBKeyRange.lowerBound(o);let f=new mn(bt);return By(e).X({range:u},(g,v,b)=>{const[T,S,N]=g,q=Qo(S);T===this.userId&&r.isPrefixOf(q)?q.length===i&&(f=f.add(N)):b.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Wd(e).get(o).next(u=>{if(null===u)throw et();rt(u.userId===this.userId),r.push(eg(this.serializer,u))}))}),te.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return CU(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),te.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return By(e).X({range:r},(o,u,f)=>{if(o[0]===this.userId){const g=Qo(o[1]);i.push(g)}else f.done()}).next(()=>{rt(0===i.length)})})}containsKey(e,t){return wU(e,this.userId,t)}xn(e){return IU(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function wU(n,e,t){const r=AI(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return By(n).X({range:o,Y:!0},(f,g,v)=>{const[b,T,S]=f;b===e&&T===i&&(u=!0),v.done()}).next(()=>u)}function Wd(n){return Gr(n,"mutations")}function By(n){return Gr(n,"documentMutations")}function IU(n){return Gr(n,"mutationQueues")}class rg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new rg(0)}static Mn(){return new rg(-1)}}class bj{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new rg(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>at.fromTimestamp(new Bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Vy(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Vy(e).X((u,f)=>{const g=tb(f);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,o.push(this.removeTargetData(e,g)))}).next(()=>te.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Vy(e).X((r,i)=>{const o=tb(i);t(o)})}$n(e){return bU(e).get("targetGlobalKey").next(t=>(rt(null!==t),t))}On(e,t){return bU(e).put("targetGlobalKey",t)}Fn(e,t){return Vy(e).put(aU(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Vy(e).X({range:i,index:"queryTargetsIndex"},(u,f,g)=>{const v=tb(f);Oy(t,v.target)&&(o=v,g.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Zd(e);return t.forEach(u=>{const f=li(u.path);i.push(o.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,u))}),te.waitFor(i)}removeMatchingKeys(e,t,r){const i=Zd(e);return te.forEach(t,o=>{const u=li(o.path);return te.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Zd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Zd(e);let o=Pt();return i.X({range:r,Y:!0},(u,f,g)=>{const v=Qo(u[1]),b=new qe(v);o=o.add(b)}).next(()=>o)}containsKey(e,t){const r=li(t.path),i=IDBKeyRange.bound([r],[uD(r)],!1,!0);let o=0;return Zd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([u,f],g,v)=>{0!==u&&(o++,v.done())}).next(()=>o>0)}le(e,t){return Vy(e).get(t).next(r=>r?tb(r):null)}}function Vy(n){return Gr(n,"targets")}function bU(n){return Gr(n,"targetGlobal")}function Zd(n){return Gr(n,"targetDocuments")}function EU([n,e],[t,r]){const i=bt(n,t);return 0===i?bt(e,r):i}class Ej{constructor(e){this.Ln=e,this.buffer=new mn(EU),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();EU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class TU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,U.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Bi(r)?Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield fr(r)}yield t.Qn(3e5)}))}}class Tj{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(ps.ct);const r=new Ej(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(vU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vU):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,o,u,f,g,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,u=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,f=Date.now(),this.removeTargets(e,r,t))).next(T=>(o=T,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(v=Date.now(),oD()<=Ri.in.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-b}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${o} targets in `+(g-f)+`ms\n\tRemoved ${T} documents in `+(v-g)+`ms\nTotal Duration: ${v-b}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:T})))}}class Mj{constructor(e,t){this.db=e,this.garbageCollector=function MU(n,e){return new Tj(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return HD(e,r)}removeReference(e,t,r){return HD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return HD(e,t)}Xn(e,t){return function(r,i){let o=!1;return IU(r).Z(u=>wU(r,u,i).next(f=>(f&&(o=!0),te.resolve(!f)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(u,f)=>{if(f<=t){const g=this.Xn(e,u).next(v=>{if(!v)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,at.min()),Zd(e).delete([0,li(u.path)])))});i.push(g)}}).next(()=>te.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return HD(e,t)}Yn(e,t){const r=Zd(e);let i,o=ps.ct;return r.X({index:"documentTargetsIndex"},([u,f],{path:g,sequenceNumber:v})=>{0===u?(o!==ps.ct&&t(new qe(Qo(i)),o),o=v,i=g):o=ps.ct}).next(()=>{o!==ps.ct&&t(new qe(Qo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function HD(n,e){return Zd(n).put((r=n.currentSequenceNumber,{targetId:0,path:li(e.path),sequenceNumber:r}));var r}class DU{constructor(){this.changes=new $e(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Dj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ig(e).put(r)}removeEntry(e,t,r){return ig(e).delete(function(i,o){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],FD(o),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return ig(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ob(t))},(i,o)=>{r=this.ts(t,o)}).next(()=>r)}es(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return ig(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ob(t))},(i,o)=>{r={document:this.ts(t,o),size:jD(o)}}).next(()=>r)}getEntries(e,t){let r=fe();return this.ns(e,t,(i,o)=>{const u=this.ts(i,o);r=r.insert(i,u)}).next(()=>r)}ss(e,t){let r=fe(),i=new xn(qe.comparator);return this.ns(e,t,(o,u)=>{const f=this.ts(o,u);r=r.insert(o,f),i=i.insert(o,jD(u))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return te.resolve();let i=new mn(PU);t.forEach(g=>i=i.add(g));const o=IDBKeyRange.bound(ob(i.first()),ob(i.last())),u=i.getIterator();let f=u.getNext();return ig(e).X({index:"documentKeyIndex",range:o},(g,v,b)=>{const T=qe.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&PU(f,T)<0;)r(f,null),f=u.getNext();f&&f.isEqual(T)&&(r(f,v),f=u.hasNext()?u.getNext():null),f?b.G(ob(f)):b.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,u=[o.popLast().toArray(),o.lastSegment(),FD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ig(e).j(IDBKeyRange.bound(u,f,!0)).next(g=>{let v=fe();for(const b of g){const T=this.ts(qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);T.isFoundDocument()&&(W(t,T)||i.has(T.key))&&(v=v.insert(T.key,T))}return v})}getAllFromCollectionGroup(e,t,r,i){let o=fe();const u=xU(t,r),f=xU(t,fs.max());return ig(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(g,v,b)=>{const T=this.ts(qe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);o=o.insert(T.key,T),o.size===i&&b.done()}).next(()=>o)}newChangeBuffer(e){return new Sj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return AU(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}Zn(e,t){return AU(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function fj(n,e){let t;if(e.document)t=X4(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=Xp(e.noDocument.readTime);t=Pn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=qe.fromSegments(e.unknownDocument.path),i=Xp(e.unknownDocument.version);t=Pn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Bn(r[0],r[1]);return at.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(at.min()))return r}return Pn.newInvalidDocument(e)}}function SU(n){return new Dj(n)}class Sj extends DU{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new $e(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new mn((o,u)=>bt(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const f=this.us.get(o);if(t.push(this.os.removeEntry(e,o,f.readTime)),u.isValidDocument()){const g=oU(this.os.serializer,u);i=i.add(o.path.popLast());const v=jD(g);r+=v-f.size,t.push(this.os.addEntry(e,o,g))}else if(r-=f.size,this.trackRemovals){const g=oU(this.os.serializer,u.convertToNoDocument(at.min()));t.push(this.os.addEntry(e,o,g))}}),i.forEach(o=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.os.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((o,u)=>{this.us.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function AU(n){return Gr(n,"remoteDocumentGlobal")}function ig(n){return Gr(n,"remoteDocumentsV14")}function ob(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xU(n,e){const t=e.documentKey.path.toArray();return[n,FD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function PU(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=bt(t[o],r[o]),i)return i;return i=bt(t.length,r.length),i||(i=bt(t[t.length-2],r[r.length-2]),i||bt(t[t.length-1],r[r.length-1]))}class Aj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class OU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&ZI(r.mutation,i,Vi.empty(),Bn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pt()){const i=Yn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let u=St();return o.forEach((f,g)=>{u=u.insert(f,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Yn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,r,i){let o=fe();const u=ea(),f=ea();return t.forEach((g,v)=>{const b=r.get(v.key);i.has(v.key)&&(void 0===b||b.mutation instanceof eu)?o=o.insert(v.key,v):void 0!==b?(u.set(v.key,b.mutation.getFieldMask()),ZI(b.mutation,v,b.mutation.getFieldMask(),Bn.now())):u.set(v.key,Vi.empty())}),this.recalculateAndSaveOverlays(e,o).next(g=>(g.forEach((v,b)=>u.set(v,b)),t.forEach((v,b)=>{var T;return f.set(v,new Aj(b,null!==(T=u.get(v))&&void 0!==T?T:null))}),f))}recalculateAndSaveOverlays(e,t){const r=ea();let i=new xn((u,f)=>u-f),o=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let b=r.get(g)||Vi.empty();b=f.applyToLocalView(v,b),r.set(g,b);const T=(i.get(f.batchId)||Pt()).add(g);i=i.insert(f.batchId,T)})}).next(()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,b=g.value,T=Xo();b.forEach(S=>{if(!o.has(S)){const N=k4(t.get(S),r.get(S));null!==N&&T.set(S,N),o=o.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,v,T))}return te.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):h(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):te.resolve(Yn());let f=-1,g=o;return u.next(v=>te.forEach(v,(b,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),o.get(b)?te.resolve():this.remoteDocumentCache.getEntry(e,b).next(S=>{g=g.insert(b,S)}))).next(()=>this.populateOverlays(e,v,o)).next(()=>this.computeViews(e,g,v,Pt())).next(b=>({batchId:f,changes:cn(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=St();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=St();return this.indexManager.getCollectionParents(e,i).next(u=>te.forEach(u,f=>{const g=(v=t,b=f.child(i),new Na(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(v=>{v.forEach((b,T)=>{o=o.insert(b,T)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((f,g)=>{const v=g.getKey();null===o.get(v)&&(o=o.insert(v,Pn.newInvalidDocument(v)))});let u=St();return o.forEach((f,g)=>{const v=i.get(f);void 0!==v&&ZI(v.mutation,g,Vi.empty(),Bn.now()),W(t,g)&&(u=u.insert(f,g))}),u})}}class xj{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return te.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Rr(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:kk(r.bundledQuery),readTime:Rr(r.readTime)}),te.resolve();var r}}class Pj{constructor(){this.overlays=new xn(qe.comparator),this.ls=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Yn();return te.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const i=Yn(),o=t.length+1,u=new qe(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===o&&g.largestBatchId>r&&i.set(g.getKey(),g)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new xn((v,b)=>v-b);const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=o.get(v.largestBatchId);null===b&&(b=Yn(),o=o.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const f=Yn(),g=o.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,b)=>f.set(v,b)),!(f.size()>=i)););return te.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Tk(t,r));let o=this.ls.get(t);void 0===o&&(o=Pt(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class Vk{constructor(){this.fs=new mn(bi.ds),this.ws=new mn(bi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new bi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new bi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new qe(new qt([])),r=new bi(t,e),i=new bi(t,e+1),o=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),o.push(u.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new qe(new qt([])),r=new bi(t,e),i=new bi(t,e+1);let o=Pt();return this.ws.forEachInRange([r,i],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new bi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class bi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return qe.comparator(e.key,t.key)||bt(e.As,t.As)}static _s(e,t){return bt(e.As,t.As)||qe.comparator(e.key,t.key)}}class Oj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new mn(bi.ds)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const u=new bk(o,t,r,i);this.mutationQueue.push(u);for(const f of i)this.Rs=this.Rs.add(new bi(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return te.resolve(u)}lookupMutationBatch(e,t){return te.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bi(t,0),i=new bi(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],u=>{const f=this.Ps(u.As);o.push(f)}),te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(bt);return t.forEach(i=>{const o=new bi(i,0),u=new bi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,u],f=>{r=r.add(f.As)})}),te.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;qe.isDocumentKey(o)||(o=o.child(""));const u=new bi(new qe(o),0);let f=new mn(bt);return this.Rs.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(g.As)),!0)},u),te.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){rt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return te.forEach(t.mutations,i=>{const o=new bi(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new bi(t,0),i=this.Rs.firstAfterOrEqual(r);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return te.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kj{constructor(e){this.Ds=e,this.docs=new xn(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=fe();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Pn.newInvalidDocument(i))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=fe();const u=t.path,f=new qe(u.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:b}}=g.getNext();if(!u.isPrefixOf(v.path))break;v.path.length>u.length+1||Cy(dD(b),r)<=0||(i.has(b.key)||W(t,b))&&(o=o.insert(b.key,b.mutableCopy()))}return te.resolve(o)}getAllFromCollectionGroup(e,t,r,i){et()}Cs(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Nj(this)}getSize(e){return te.resolve(this.size)}}class Nj extends DU{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Rj{constructor(e){this.persistence=e,this.xs=new $e(t=>Xl(t),Oy),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Vk,this.targetCount=0,this.Ms=rg.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),te.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new rg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Fn(t),te.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(u),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),te.waitFor(o).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(u=>{o.push(i.markPotentiallyOrphaned(e,u))}),te.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.ks.containsKey(t))}}class jk{constructor(e,t){this.$s={},this.overlays={},this.Os=new ps(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Rj(this),this.indexManager=new wj,this.remoteDocumentCache=new kj(r=>this.referenceDelegate.Ls(r)),this.serializer=new sU(t),this.qs=new xj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new Oj(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new Fj(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return te.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Fj extends YO{constructor(e){super(),this.currentSequenceNumber=e}}class zD{constructor(e){this.persistence=e,this.Qs=new Vk,this.js=null}static zs(e){return new zD(e)}get Ws(){if(this.js)return this.js;throw et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),te.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Ws,r=>{const i=qe.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,at.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return te.or([()=>te.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Lj{constructor(e){this.serializer=e}O(e,t,r,i){const o=new Iy("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SI,{unique:!0}),f.createObjectStore("documentMutations"),kU(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=te.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),kU(e)),u=u.next(()=>function(f){const g=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:at.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(o))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,g){return g.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SI,{unique:!0});const b=g.store("mutations"),T=v.map(S=>b.put(S));return te.waitFor(T)})}(e,o))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ys(o))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(u=u.next(()=>this.Zs(o))),r<8&&i>=8&&(u=u.next(()=>this.ti(e,o))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.ei(o))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const g=f.createObjectStore("documentOverlays",{keyPath:wD});g.createIndex("collectionPathOverlayIndex",tk,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",nk,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const g=f.createObjectStore("remoteDocumentsV14",{keyPath:mD});g.createIndex("documentKeyIndex",JO),g.createIndex("collectionGroupIndex",_D)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.si(e,o))),r<15&&i>=15&&(u=u.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:CD}).createIndex("sequenceNumberIndex",XO,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:ek}).createIndex("documentKeyIndex",_4,{unique:!1})}(e))),u}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=jD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>te.forEach(i,o=>{const u=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(f=>te.forEach(f,g=>{rt(g.userId===o.userId);const v=eg(this.serializer,g);return CU(e,o.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((u,f)=>{const g=new qt(u),v=[0,li(g)];o.push(t.get(v).next(b=>b?te.resolve():t.put({targetId:0,path:li(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>te.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:vD});const r=t.store("collectionParents"),i=new Bk,o=u=>{if(i.add(u)){const f=u.lastSegment(),g=u.popLast();return r.put({collectionId:f,parent:li(g)})}};return t.store("remoteDocuments").X({Y:!0},(u,f)=>{const g=new qt(u);return o(g.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([u,f,g],v)=>{const b=Qo(f);return o(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const o=tb(i),u=aU(this.serializer,o);return t.put(u)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,u)=>{const f=t.store("remoteDocumentsV14"),g=(v=u,v.document?new qe(qt.fromString(v.document.name).popFirst(5)):v.noDocument?qe.fromSegments(v.noDocument.path):v.unknownDocument?qe.fromSegments(v.unknownDocument.path):et()).path.toArray();var v;const b={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(f.put(b))}).next(()=>te.waitFor(i))}si(e,t){const r=t.store("mutations"),i=SU(this.serializer),o=new jk(zD.zs,this.serializer.fe);return r.j().next(u=>{const f=new Map;return u.forEach(g=>{var v;let b=null!==(v=f.get(g.userId))&&void 0!==v?v:Pt();eg(this.serializer,g).keys().forEach(T=>b=b.add(T)),f.set(g.userId,b)}),te.forEach(f,(g,v)=>{const b=new kr(v),T=LD.de(this.serializer,b),S=o.getIndexManager(b),N=$D.de(b,this.serializer,S,o.referenceDelegate);return new OU(i,N,T,S).recalculateAndSaveOverlaysForDocumentKeys(new PI(t,ps.ct),g).next()})})}}function kU(n){n.createObjectStore("targetDocuments",{keyPath:Bd}).createIndex("documentTargetsIndex",Ty,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yD,{unique:!0}),n.createObjectStore("targetGlobal")}const $k="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hk{constructor(e,t,r,i,o,u,f,g,v,b,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=o,this.window=u,this.document=f,this.ri=v,this.oi=b,this.ui=T,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=S=>Promise.resolve(),!Hk.D())throw new ye(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mj(this,i),this.di=t+"main",this.serializer=new sU(g),this.wi=new Bs(this.di,this.ui,new Lj(this.serializer)),this.Bs=new bj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=SU(this.serializer),this.qs=new pj,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ye(ae.FAILED_PRECONDITION,$k);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ps(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,U.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,U.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,U.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Bi(e))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return ab(e).get("owner").next(t=>te.resolve(this.Ri(t)))}Pi(e){return qD(e).delete(this.clientId)}bi(){var e=this;return(0,U.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Gr(r,"clientMetadata");return i.j().next(o=>{const u=e.Si(o,18e5),f=o.filter(g=>-1===u.indexOf(g));return te.forEach(f,g=>i.delete(g.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?te.resolve(!0):ab(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new ye(ae.FAILED_PRECONDITION,$k);return!1}}return!(!this.networkEnabled||!this.inForeground)||qD(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,U.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new PI(t,ps.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>qD(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return $D.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ij(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return LD.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ae("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(u=this.ui)?sk:14===u?xI:13===u?ik:12===u?y4:11===u?rk:void et();var u;let f;return this.wi.runTransaction(e,i,o,g=>(f=new PI(g,this.Os?this.Os.next():ps.ct),"readwrite-primary"===t?this.Ti(f).next(v=>!!v||this.Ei(f)).next(v=>{if(!v)throw Er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new ye(ae.FAILED_PRECONDITION,TI);return r(f)}).next(v=>this.vi(f).next(()=>v)):this.Oi(f).next(()=>r(f)))).then(g=>(f.raiseOnCommittedEvent(),g))}Oi(e){return ab(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ye(ae.FAILED_PRECONDITION,$k)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ab(e).put("owner",t)}static D(){return Bs.D()}Ai(e){const t=ab(e);return t.get("owner").next(r=>this.Ri(r)?(Ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Er(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,z.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ae("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Er("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ab(n){return Gr(n,"owner")}function qD(n){return Gr(n,"clientMetadata")}function zk(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Gk{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Pt(),i=Pt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Gk(e,t.fromCache,r,i)}}class NU{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(a(t))return te.resolve(null);let r=y(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=E(t,null,"F"),r=y(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=Pt(...o);return this.Ui.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.ji(t,f);return this.zi(t,v,u,g.readTime)?this.Ki(e,E(t,null,"F")):this.Wi(e,v,t,g)}))})))}Gi(e,t,r,i){return a(t)||i.isEqual(at.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const u=this.ji(t,o);return this.zi(t,u,r,i)?this.Qi(e,t):(oD()<=Ri.in.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),R(t)),this.Wi(e,u,t,vy(i,-1)))})}ji(e,t){let r=new mn(ue(e));return t.forEach((i,o)=>{W(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return oD()<=Ri.in.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",R(t)),this.Ui.getDocumentsMatchingQuery(e,t,fs.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}class Uj{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new xn(bt),this.Yi=new $e(o=>Xl(o),Oy),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OU(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function RU(n,e,t,r){return new Uj(n,e,t,r)}function FU(n,e){return qk.apply(this,arguments)}function qk(){return qk=(0,U.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],f=[];let g=Pt();for(const v of i){u.push(v.batchId);for(const b of v.mutations)g=g.add(b.key)}for(const v of o){f.push(v.batchId);for(const b of v.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(r,g).next(v=>({er:v,removedBatchIds:u,addedBatchIds:f}))})})}),qk.apply(this,arguments)}function LU(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function UU(n,e,t){let r=Pt(),i=Pt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=fe();return t.forEach((f,g)=>{const v=o.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),g.isNoDocument()&&g.version.isEqual(at.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):Ae("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)}),{nr:u,sr:i}})}function jj(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jy(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,te.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new tu(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function $y(n,e,t){return Wk.apply(this,arguments)}function Wk(){return Wk=(0,U.Z)(function*(n,e,t){const r=We(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Bi(u))throw u;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),Wk.apply(this,arguments)}function WD(n,e,t){const r=We(n);let i=at.min(),o=Pt();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,g,v){const b=We(f),T=b.Yi.get(v);return void 0!==T?te.resolve(b.Ji.get(T)):b.Bs.getTargetData(g,v)}(r,u,y(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,f.targetId).next(g=>{o=g})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:at.min(),t?o:Pt())).next(f=>(jU(r,Y(e),f),{documents:f,ir:o})))}function BU(n,e){const t=We(n),r=We(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.le(o,e).next(u=>u?u.target:null))}function VU(n,e){const t=We(n),r=t.Xi.get(e)||at.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,vy(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(jU(t,e,i),i))}function jU(n,e,t){let r=n.Xi.get(e)||at.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}function Zk(){return Zk=(0,U.Z)(function*(n,e,t,r){const i=We(n);let o=Pt(),u=fe();for(const v of t){const b=e.rr(v.metadata.name);v.document&&(o=o.add(b));const T=e.ur(v);T.setReadTime(e.cr(v.metadata.readTime)),u=u.insert(b,T)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),g=yield jy(i,(v=r,y(s(qt.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>UU(v,f,u).next(b=>(f.apply(v),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.Bs.addMatchingKeys(v,o,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,b.nr,b.sr)).next(()=>b.nr)))}),Zk.apply(this,arguments)}function Hj(n,e){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,U.Z)(function*(n,e,t=Pt()){const r=yield jy(n,y(kk(e.bundledQuery))),i=We(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const u=Rr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.qs.saveNamedQuery(o,e);const f=r.withResumeToken(pr.EMPTY_BYTE_STRING,u);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(o,f).next(()=>i.Bs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Bs.addMatchingKeys(o,t,r.targetId)).next(()=>i.qs.saveNamedQuery(o,e))})}),Kk.apply(this,arguments)}function $U(n,e){return`firestore_clients_${n}_${e}`}function HU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Yk(n,e){return`firestore_targets_${n}_${e}`}class ZD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let o,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(o=new ye(i.error.code,i.error.message))),u?new ZD(e,t,i.state,o):(Er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cb{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ye(r.error.code,r.error.message))),o?new cb(e,r.state,i):(Er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class KD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=wk();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=pD(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return i?new KD(e,o):(Er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Qk{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Qk(t.clientId,t.onlineState):(Er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jk{constructor(){this.activeTargetIds=wk()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xk{constructor(e,t,r,i,o){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new xn(bt),this.started=!1,this.yr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.pr=$U(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Jk),this.Tr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,U.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const o=e.getItem($U(e.persistenceKey,i));if(o){const u=KD.ar(i,o);u&&(e.gr=e.gr.insert(u.clientId,u))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Yk(this.persistenceKey,e));if(r){const i=cb.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yk(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae("SharedClientState","READ",e,t),t}setItem(e,t){Ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ae("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,U.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(o){let u=ps.ct;if(null!=o)try{const f=JSON.parse(o);rt("number"==typeof f),u=f}catch(f){Er("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==ps.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Qr(o)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new ZD(this.currentUser,e,t,r),o=HU(this.persistenceKey,this.currentUser,e);this.setItem(o,i.hr())}Cr(e){const t=HU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=Yk(this.persistenceKey,e),o=new cb(e,t,r);this.setItem(i,o.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return KD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return ZD.ar(new kr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return cb.ar(i,t)}br(e){return Qk.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,U.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),o=this.Sr(r),u=[],f=[];return o.forEach(g=>{i.has(g)||u.push(g)}),i.forEach(g=>{o.has(g)||f.push(g)}),this.syncEngine.Wr(u,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=wk();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class zU{constructor(){this.Hr=new Jk,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Jk,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zj{Yr(e){}shutdown(){}}class GU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let YD=null;function e2(){return null===YD?YD=268435456+Math.round(2147483648*Math.random()):YD++,"0x"+YD.toString(16)}const Gj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qj{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const rs="WebChannelConnection";class Wj extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const u=e2(),f=this.To(e,t);Ae("RestConnection",`Sending RPC '${e}' ${u}:`,f,r);const g={};return this.Eo(g,i,o),this.Ao(e,f,g,r).then(v=>(Ae("RestConnection",`Received RPC '${e}' ${u}: `,v),v),v=>{throw _o("RestConnection",`RPC '${e}' ${u} failed with error: `,v,"url: ",f,"request:",r),v})}vo(e,t,r,i,o,u){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${Gj[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=e2();return new Promise((u,f)=>{const g=new sD;g.setWithCredentials(!0),g.listenOnce(rD.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case wI.NO_ERROR:const b=g.getResponseJson();Ae(rs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(b)),u(b);break;case wI.TIMEOUT:Ae(rs,`RPC '${e}' ${o} timed out`),f(new ye(ae.DEADLINE_EXCEEDED,"Request time out"));break;case wI.HTTP_ERROR:const T=g.getStatus();if(Ae(rs,`RPC '${e}' ${o} failed with status:`,T,"response text:",g.getResponseText()),T>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S?.error;if(N&&N.status&&N.message){const q=function(Q){const J=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(J)>=0?J:ae.UNKNOWN}(N.status);f(new ye(q,N.message))}else f(new ye(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ye(ae.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Ae(rs,`RPC '${e}' ${o} completed.`)}});const v=JSON.stringify(i);Ae(rs,`RPC '${e}' ${o} sending request:`,i),g.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=e2(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=nD(),f=BO(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.xmlHttpFactory=new iD({})),this.Eo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const b=o.join("");Ae(rs,`Creating RPC '${e}' stream ${i}: ${b}`,g);const T=u.createWebChannel(b,g);let S=!1,N=!1;const q=new qj({ro:J=>{N?Ae(rs,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(S||(Ae(rs,`Opening RPC '${e}' stream ${i} transport.`),T.open(),S=!0),Ae(rs,`RPC '${e}' stream ${i} sending:`,J),T.send(J))},oo:()=>T.close()}),Q=(J,Ee,ze)=>{J.listen(Ee,Ne=>{try{ze(Ne)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return Q(T,$p.EventType.OPEN,()=>{N||Ae(rs,`RPC '${e}' stream ${i} transport opened.`)}),Q(T,$p.EventType.CLOSE,()=>{N||(N=!0,Ae(rs,`RPC '${e}' stream ${i} transport closed`),q.wo())}),Q(T,$p.EventType.ERROR,J=>{N||(N=!0,_o(rs,`RPC '${e}' stream ${i} transport errored:`,J),q.wo(new ye(ae.UNAVAILABLE,"The operation could not be completed")))}),Q(T,$p.EventType.MESSAGE,J=>{var Ee;if(!N){const ze=J.data[0];rt(!!ze);const Ye=ze.error||(null===(Ee=ze[0])||void 0===Ee?void 0:Ee.error);if(Ye){Ae(rs,`RPC '${e}' stream ${i} received error:`,Ye);const gt=Ye.status;let At=function($s){const Av=Wr[$s];if(void 0!==Av)return B4(Av)}(gt),Lr=Ye.message;void 0===At&&(At=ae.INTERNAL,Lr="Unknown error status: "+gt+" with message "+Ye.message),N=!0,q.wo(new ye(At,Lr)),T.close()}else Ae(rs,`RPC '${e}' stream ${i} received:`,ze),q._o(ze)}}),Q(f,VO.STAT_EVENT,J=>{J.stat===II.PROXY?Ae(rs,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===II.NOPROXY&&Ae(rs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{q.fo()},0),q}}function qU(){return typeof window<"u"?window:null}function QD(){return typeof document<"u"?document:null}function lb(n){return new rj(n,!0)}class t2{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class WU{constructor(e,t,r,i,o,u,f,g){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new t2(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,U.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,U.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,U.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new ye(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,U.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zj extends WU{constructor(e,t,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function oj(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:et(),i=e.targetChange.targetIds||[],o=function(g,v){return g.useProto3Json?(rt(void 0===v||"string"==typeof v),pr.fromBase64String(v||"")):(rt(void 0===v||v instanceof Uint8Array),pr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(g){const v=void 0===g.code?ae.UNKNOWN:B4(g.code);return new ye(v,g.message||"")}(u);t=new z4(r,i,o,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ec(n,r.document.name),o=Rr(r.document.updateTime),u=r.document.createTime?Rr(r.document.createTime):at.min(),f=new qr({mapValue:{fields:r.document.fields}}),g=Pn.newFoundDocument(i,o,u,f);t=new RD(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=Ec(n,r.document),o=r.readTime?Rr(r.readTime):at.min(),u=Pn.newNoDocument(i,o);t=new RD([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Ec(n,r.document);t=new RD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,{count:i=0,unchangedNames:o}=r,u=new Q7(i,o);t=new H4(r.targetId,u)}}var g;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return at.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?at.min():o.readTime?Rr(o.readTime):at.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=XI(this.serializer),t.addTarget=function(i,o){let u;const f=o.target;if(u=zI(f)?{documents:eU(i,f)}:{query:Ok(i,f)},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=Z4(i,o.resumeToken);const g=Sk(i,o.expectedCount);null!==g&&(u.expectedCount=g)}else if(o.snapshotVersion.compareTo(at.min())>0){u.readTime=Ly(i,o.snapshotVersion.toTimestamp());const g=Sk(i,o.expectedCount);null!==g&&(u.expectedCount=g)}return u}(this.serializer,e);const r=function cj(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=XI(this.serializer),t.removeTarget=e,this.Wo(t)}}class Kj extends WU{constructor(e,t,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function aj(n,e){return n&&n.length>0?(rt(void 0!==e),n.map(t=>function(r,i){let o=Rr(r.updateTime?r.updateTime:i);return o.isEqual(at.min())&&(o=Rr(i)),new W7(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Rr(e.commitTime);return this.listener.cu(r,t)}return rt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=XI(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>eb(this.serializer,r))};this.Wo(t)}}class Yj extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ye(ae.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.vo(e,t,r,o,u,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ae.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class Jj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Er(t),this.mu=!1):Ae("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Xj{constructor(e,t,r,i,o){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(f=>{r.enqueueAndForget((0,U.Z)(function*(){var g;Kd(u)&&(Ae("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,U.Z)(function*(v){const b=We(v);b.vu.add(4),yield Hy(b),b.bu.set("Unknown"),b.vu.delete(4),yield ub(b)}),function(v){return g.apply(this,arguments)})(u))}))}),this.bu=new Jj(r,i)}}function ub(n){return r2.apply(this,arguments)}function r2(){return r2=(0,U.Z)(function*(n){if(Kd(n))for(const e of n.Ru)yield e(!0)}),r2.apply(this,arguments)}function Hy(n){return i2.apply(this,arguments)}function i2(){return i2=(0,U.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),i2.apply(this,arguments)}function JD(n,e){const t=We(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),a2(t)?o2(t):Gy(t).Ko()&&s2(t,e))}function db(n,e){const t=We(n),r=Gy(t);t.Au.delete(e),r.Ko()&&ZU(t,e),0===t.Au.size&&(r.Ko()?r.jo():Kd(t)&&t.bu.set("Unknown"))}function s2(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gy(n).su(e)}function ZU(n,e){n.Vu.qt(e),Gy(n).iu(e)}function o2(n){n.Vu=new X7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Gy(n).start(),n.bu.gu()}function a2(n){return Kd(n)&&!Gy(n).Uo()&&n.Au.size>0}function Kd(n){return 0===We(n).vu.size}function KU(n){n.Vu=void 0}function e$(n){return c2.apply(this,arguments)}function c2(){return c2=(0,U.Z)(function*(n){n.Au.forEach((e,t)=>{s2(n,e)})}),c2.apply(this,arguments)}function t$(n,e){return l2.apply(this,arguments)}function l2(){return l2=(0,U.Z)(function*(n,e){KU(n),a2(n)?(n.bu.Iu(e),o2(n)):n.bu.set("Unknown")}),l2.apply(this,arguments)}function n$(n,e,t){return u2.apply(this,arguments)}function u2(){return u2=(0,U.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof z4&&2===e.state&&e.cause)try{yield(r=(0,U.Z)(function*(i,o){const u=o.cause;for(const f of o.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield XD(n,r)}else if(e instanceof RD?n.Vu.Ht(e):e instanceof H4?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(at.min()))try{const r=yield LU(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const u=i.Vu.ce(o);return u.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.Au.get(g);v&&i.Au.set(g,v.withResumeToken(f.resumeToken,o))}}),u.targetMismatches.forEach((f,g)=>{const v=i.Au.get(f);if(!v)return;i.Au.set(f,v.withResumeToken(pr.EMPTY_BYTE_STRING,v.snapshotVersion)),ZU(i,f);const b=new tu(v.target,f,g,v.sequenceNumber);s2(i,b)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ae("RemoteStore","Failed to raise snapshot:",r),yield XD(n,r)}var r}),u2.apply(this,arguments)}function XD(n,e,t){return d2.apply(this,arguments)}function d2(){return d2=(0,U.Z)(function*(n,e,t){if(!Bi(e))throw e;n.vu.add(1),yield Hy(n),n.bu.set("Offline"),t||(t=()=>LU(n.localStore)),n.asyncQueue.enqueueRetryable((0,U.Z)(function*(){Ae("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield ub(n)}))}),d2.apply(this,arguments)}function YU(n,e){return e().catch(t=>XD(n,t,e))}function zy(n){return h2.apply(this,arguments)}function h2(){return h2=(0,U.Z)(function*(n){const e=We(n),t=Yd(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;r$(e);)try{const i=yield jj(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,i$(e,i)}catch(i){yield XD(e,i)}QU(e)&&JU(e)}),h2.apply(this,arguments)}function r$(n){return Kd(n)&&n.Eu.length<10}function i$(n,e){n.Eu.push(e);const t=Yd(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function QU(n){return Kd(n)&&!Yd(n).Uo()&&n.Eu.length>0}function JU(n){Yd(n).start()}function s$(n){return f2.apply(this,arguments)}function f2(){return f2=(0,U.Z)(function*(n){Yd(n).hu()}),f2.apply(this,arguments)}function o$(n){return p2.apply(this,arguments)}function p2(){return p2=(0,U.Z)(function*(n){const e=Yd(n);for(const t of n.Eu)e.uu(t.mutations)}),p2.apply(this,arguments)}function a$(n,e,t){return g2.apply(this,arguments)}function g2(){return g2=(0,U.Z)(function*(n,e,t){const r=n.Eu.shift(),i=Ek.from(r,e,t);yield YU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield zy(n)}),g2.apply(this,arguments)}function c$(n,e){return m2.apply(this,arguments)}function m2(){return m2=(0,U.Z)(function*(n,e){var t;e&&Yd(n).ou&&(yield(t=(0,U.Z)(function*(r,i){if(U4(o=i.code)&&o!==ae.ABORTED){const u=r.Eu.shift();Yd(r).Qo(),yield YU(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield zy(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),QU(n)&&JU(n)}),m2.apply(this,arguments)}function XU(n,e){return _2.apply(this,arguments)}function _2(){return _2=(0,U.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const r=Kd(t);t.vu.add(3),yield Hy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield ub(t)}),_2.apply(this,arguments)}function y2(n,e){return v2.apply(this,arguments)}function v2(){return v2=(0,U.Z)(function*(n,e){const t=We(n);e?(t.vu.delete(2),yield ub(t)):e||(t.vu.add(2),yield Hy(t),t.bu.set("Unknown"))}),v2.apply(this,arguments)}function Gy(n){return n.Su||(n.Su=function(e,t,r){const i=We(e);return i.fu(),new Zj(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:e$.bind(null,n),ao:t$.bind(null,n),nu:n$.bind(null,n)}),n.Ru.push(function(){var e=(0,U.Z)(function*(t){t?(n.Su.Qo(),a2(n)?o2(n):n.bu.set("Unknown")):(yield n.Su.stop(),KU(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Yd(n){return n.Du||(n.Du=function(e,t,r){const i=We(e);return i.fu(),new Kj(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:s$.bind(null,n),ao:c$.bind(null,n),au:o$.bind(null,n),cu:a$.bind(null,n)}),n.Ru.push(function(){var e=(0,U.Z)(function*(t){t?(n.Du.Qo(),yield zy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ae("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class C2{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,o){const u=Date.now()+r,f=new C2(e,t,u,i,o);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ye(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qy(n,e){if(Er("AsyncQueue",`${e}: ${n}`),Bi(n))return new ye(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Wy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=St(),this.sortedSet=new xn(this.comparator)}static emptySet(e){return new Wy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Wy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class e3{constructor(){this.Cu=new xn(qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Zy{constructor(e,t,r,i,o,u,f,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,o){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new Zy(e,t,Wy.emptySet(t),u,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&M(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class l${constructor(){this.Nu=void 0,this.listeners=[]}}class u${constructor(){this.queries=new $e(e=>A(e),M),this.onlineState="Unknown",this.ku=new Set}}function w2(n,e){return I2.apply(this,arguments)}function I2(){return I2=(0,U.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new l$),i)try{o.Nu=yield t.onListen(r)}catch(u){const f=qy(u,`Initialization of query '${R(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&T2(t)}),I2.apply(this,arguments)}function b2(n,e){return E2.apply(this,arguments)}function E2(){return E2=(0,U.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const u=o.listeners.indexOf(e);u>=0&&(o.listeners.splice(u,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),E2.apply(this,arguments)}function d$(n,e){const t=We(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.$u(i)&&(r=!0);u.Nu=i}}r&&T2(t)}function h$(n,e,t){const r=We(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function T2(n){n.ku.forEach(e=>{e.next()})}class M2{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Zy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Zy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class f${constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class t3{constructor(e){this.serializer=e}rr(e){return Ec(this.serializer,e)}ur(e){return e.metadata.exists?X4(this.serializer,e.document,!1):Pn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Rr(e)}}class p${constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=n3(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=qt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new t3(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.rr(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||Pt()).add(o);t.set(u,f)}}return t}complete(){var e=this;return(0,U.Z)(function*(){const t=yield function $j(n,e,t,r){return Zk.apply(this,arguments)}(e.localStore,new t3(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield Hj(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function n3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class r3{constructor(e){this.key=e}}class i3{constructor(e){this.key=e}}class s3{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Pt(),this.mutatedKeys=Pt(),this.tc=ue(e),this.ec=new Wy(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new e3,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,T)=>{const S=i.get(b),N=W(this.query,T)?T:null,q=!!S&&this.mutatedKeys.has(S.key),Q=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let J=!1;S&&N?S.data.isEqual(N.data)?q!==Q&&(r.track({type:3,doc:N}),J=!0):this.rc(S,N)||(r.track({type:2,doc:N}),J=!0,(g&&this.tc(N,g)>0||v&&this.tc(N,v)<0)&&(f=!0)):!S&&N?(r.track({type:0,doc:N}),J=!0):S&&!N&&(r.track({type:1,doc:S}),J=!0,(g||v)&&(f=!0)),J&&(N?(u=u.add(N),o=Q?o.add(b):o.delete(b)):(u=u.delete(b),o=o.delete(b)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const b="F"===this.query.limitType?u.last():u.first();u=u.delete(b.key),o=o.delete(b.key),r.track({type:1,doc:b})}return{ec:u,ic:r,zi:f,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((v,b)=>function(T,S){const N=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return N(T)-N(S)}(v.type,b.type)||this.tc(v.doc,b.doc)),this.oc(r);const u=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,g=f!==this.Xu;return this.Xu=f,0!==o.length||g?{snapshot:new Zy(this.query,e.ec,i,o,e.mutatedKeys,0===f,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new e3,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Pt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new i3(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new r3(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Pt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Zy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class g${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class m${constructor(e){this.key=e,this.fc=!1}}class _${constructor(e,t,r,i,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new $e(f=>A(f),M),this._c=new Map,this.mc=new Set,this.gc=new xn(qe.comparator),this.yc=new Map,this.Ic=new Vk,this.Tc={},this.Ec=new Map,this.Ac=rg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function y$(n,e){return D2.apply(this,arguments)}function D2(){return D2=(0,U.Z)(function*(n,e){const t=Y2(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const u=yield jy(t.localStore,y(e)),f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield S2(t,e,r,"current"===f,u.resumeToken),t.isPrimaryClient&&JD(t.remoteStore,u)}return i}),D2.apply(this,arguments)}function S2(n,e,t,r,i){return A2.apply(this,arguments)}function A2(){return A2=(0,U.Z)(function*(n,e,t,r,i){n.Rc=(T,S,N)=>{return(q=(0,U.Z)(function*(Q,J,Ee,ze){let Ne=J.view.sc(Ee);Ne.zi&&(Ne=yield WD(Q.localStore,J.query,!1).then(({documents:At})=>J.view.sc(At,Ne)));const Ye=ze&&ze.targetChanges.get(J.targetId),gt=J.view.applyChanges(Ne,Q.isPrimaryClient,Ye);return B2(Q,J.targetId,gt.cc),gt.snapshot}),function(Q,J,Ee,ze){return q.apply(this,arguments)})(n,T,S,N);var q};const o=yield WD(n.localStore,e,!0),u=new s3(e,o.ir),f=u.sc(o.documents),g=QI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=u.applyChanges(f,n.isPrimaryClient,g);B2(n,t,v.cc);const b=new g$(e,t,u);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),A2.apply(this,arguments)}function v$(n,e){return x2.apply(this,arguments)}function x2(){return x2=(0,U.Z)(function*(n,e){const t=We(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!M(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $y(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),db(t.remoteStore,r.targetId),Ky(t,r.targetId)}).catch(fr))):(Ky(t,r.targetId),yield $y(t.localStore,r.targetId,!0))}),x2.apply(this,arguments)}function P2(){return P2=(0,U.Z)(function*(n,e,t){const r=Q2(n);try{const i=yield function(o,u){const f=We(o),g=Bn.now(),v=u.reduce((S,N)=>S.add(N.key),Pt());let b,T;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>{let N=fe(),q=Pt();return f.Zi.getEntries(S,v).next(Q=>{N=Q,N.forEach((J,Ee)=>{Ee.isValidDocument()||(q=q.add(J))})}).next(()=>f.localDocuments.getOverlayedDocuments(S,N)).next(Q=>{b=Q;const J=[];for(const Ee of u){const ze=K7(Ee,b.get(Ee.key).overlayedDocument);null!=ze&&J.push(new eu(Ee.key,ze,LI(ze.value.mapValue),ir.exists(!0)))}return f.mutationQueue.addMutationBatch(S,g,J,u)}).next(Q=>{T=Q;const J=Q.applyToLocalDocumentSet(b,q);return f.documentOverlayCache.saveOverlays(S,Q.batchId,J)})}).then(()=>({batchId:T.batchId,changes:cn(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,f){let g=o.Tc[o.currentUser.toKey()];g||(g=new xn(bt)),g=g.insert(u,f),o.Tc[o.currentUser.toKey()]=g}(r,i.batchId,t),yield nu(r,i.changes),yield zy(r.remoteStore)}catch(i){const o=qy(i,"Failed to persist write");t.reject(o)}}),P2.apply(this,arguments)}function o3(n,e){return O2.apply(this,arguments)}function O2(){return O2=(0,U.Z)(function*(n,e){const t=We(n);try{const r=yield function Vj(n,e){const t=We(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((b,T)=>{const S=i.get(T);if(!S)return;f.push(t.Bs.removeMatchingKeys(o,b.removedDocuments,T).next(()=>t.Bs.addMatchingKeys(o,b.addedDocuments,T)));let N=S.withSequenceNumber(o.currentSequenceNumber);var q,Q,J;null!==e.targetMismatches.get(T)?N=N.withResumeToken(pr.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):b.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(b.resumeToken,r)),i=i.insert(T,N),Q=N,J=b,(0===(q=S).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(o,N))});let g=fe(),v=Pt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,b))}),f.push(UU(o,u,e.documentUpdates).next(b=>{g=b.nr,v=b.sr})),!r.isEqual(at.min())){const b=t.Bs.getLastRemoteSnapshotVersion(o).next(T=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));f.push(b)}return te.waitFor(f).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,g,v)).next(()=>g)}).then(o=>(t.Ji=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const u=t.yc.get(o);u&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?rt(u.fc):i.removedDocuments.size>0&&(rt(u.fc),u.fc=!1))}),yield nu(t,r,e)}catch(r){yield fr(r)}}),O2.apply(this,arguments)}function a3(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,u)=>{const f=u.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(o,u){const f=We(o);f.onlineState=u;let g=!1;f.queries.forEach((v,b)=>{for(const T of b.listeners)T.Mu(u)&&(g=!0)}),g&&T2(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function w$(n,e,t){return k2.apply(this,arguments)}function k2(){return k2=(0,U.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let u=new xn(qe.comparator);u=u.insert(o,Pn.newNoDocument(o,at.min()));const f=Pt().add(o),g=new YI(at.min(),new Map,new xn(bt),u,f);yield o3(r,g),r.gc=r.gc.remove(o),r.yc.delete(e),V2(r)}else yield $y(r.localStore,e,!1).then(()=>Ky(r,e,t)).catch(fr)}),k2.apply(this,arguments)}function I$(n,e){return N2.apply(this,arguments)}function N2(){return N2=(0,U.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const i=yield function Bj(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,f,g,v){const b=g.batch,T=b.keys();let S=te.resolve();return T.forEach(N=>{S=S.next(()=>v.getEntry(f,N)).next(q=>{const Q=g.docVersions.get(N);rt(null!==Q),q.version.compareTo(Q)<0&&(b.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),v.addEntry(q)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(f,b))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let f=Pt();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(f=f.add(u.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);U2(t,r,null),L2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nu(t,i)}catch(i){yield fr(i)}}),N2.apply(this,arguments)}function b$(n,e,t){return R2.apply(this,arguments)}function R2(){return R2=(0,U.Z)(function*(n,e,t){const r=We(n);try{const i=yield function(o,u){const f=We(o);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return f.mutationQueue.lookupMutationBatch(g,u).next(b=>(rt(null!==b),v=b.keys(),f.mutationQueue.removeMutationBatch(g,b))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,v,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>f.localDocuments.getDocuments(g,v))})}(r.localStore,e);U2(r,e,t),L2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nu(r,i)}catch(i){yield fr(i)}}),R2.apply(this,arguments)}function F2(){return F2=(0,U.Z)(function*(n,e){const t=We(n);Kd(t.remoteStore)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const u=We(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=qy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),F2.apply(this,arguments)}function L2(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function U2(n,e,t){const r=We(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Ky(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||c3(n,r)})}function c3(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(db(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),V2(n))}function B2(n,e,t){for(const r of t)r instanceof r3?(n.Ic.addReference(r.key,e),T$(n,r)):r instanceof i3?(Ae("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||c3(n,r.key)):et()}function T$(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ae("SyncEngine","New document in limbo: "+t),n.mc.add(r),V2(n))}function V2(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new qe(qt.fromString(e)),r=n.Ac.next();n.yc.set(r,new m$(t)),n.gc=n.gc.insert(t,r),JD(n.remoteStore,new tu(y(s(t.path)),r,"TargetPurposeLimboResolution",ps.ct))}}function nu(n,e,t){return j2.apply(this,arguments)}function j2(){return j2=(0,U.Z)(function*(n,e,t){const r=We(n),i=[],o=[],u=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,g)=>{u.push(r.Rc(g,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const b=Gk.Li(g.targetId,v);o.push(b)}}))}),yield Promise.all(u),r.dc.nu(i),yield(f=(0,U.Z)(function*(g,v){const b=We(g);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>te.forEach(v,S=>te.forEach(S.Fi,N=>b.persistence.referenceDelegate.addReference(T,S.targetId,N)).next(()=>te.forEach(S.Bi,N=>b.persistence.referenceDelegate.removeReference(T,S.targetId,N)))))}catch(T){if(!Bi(T))throw T;Ae("LocalStore","Failed to update sequence numbers: "+T)}for(const T of v){const S=T.targetId;if(!T.fromCache){const N=b.Ji.get(S),Q=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);b.Ji=b.Ji.insert(S,Q)}}}),function(g,v){return f.apply(this,arguments)})(r.localStore,o))}),j2.apply(this,arguments)}function M$(n,e){return $2.apply(this,arguments)}function $2(){return $2=(0,U.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const r=yield FU(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(f=>{f.reject(new ye(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nu(t,r.er)}var i}),$2.apply(this,arguments)}function D$(n,e){const t=We(n),r=t.yc.get(e);if(r&&r.fc)return Pt().add(r.key);{let i=Pt();const o=t._c.get(e);if(!o)return i;for(const u of o){const f=t.wc.get(u);i=i.unionWith(f.view.nc)}return i}}function S$(n,e){return H2.apply(this,arguments)}function H2(){return H2=(0,U.Z)(function*(n,e){const t=We(n),r=yield WD(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&B2(t,e.targetId,i.cc),i}),H2.apply(this,arguments)}function A$(n,e){return z2.apply(this,arguments)}function z2(){return z2=(0,U.Z)(function*(n,e){const t=We(n);return VU(t.localStore,e).then(r=>nu(t,r))}),z2.apply(this,arguments)}function x$(n,e,t,r){return G2.apply(this,arguments)}function G2(){return G2=(0,U.Z)(function*(n,e,t,r){const i=We(n),o=yield function(u,f){const g=We(u),v=We(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.Sn(b,f).next(T=>T?g.localDocuments.getDocuments(b,T):te.resolve(null)))}(i.localStore,e);var f;null!==o?("pending"===t?yield zy(i.remoteStore):"acknowledged"===t||"rejected"===t?(U2(i,e,r||null),L2(i,e),f=e,We(We(i.localStore).mutationQueue).Cn(f)):et(),yield nu(i,o)):Ae("SyncEngine","Cannot apply mutation batch with id: "+e)}),G2.apply(this,arguments)}function q2(){return q2=(0,U.Z)(function*(n,e){const t=We(n);if(Y2(t),Q2(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield l3(t,r.toArray());t.vc=!0,yield y2(t.remoteStore,!0);for(const o of i)JD(t.remoteStore,o)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Ky(t,u),$y(t.localStore,u,!0))),db(t.remoteStore,u)}),yield i,yield l3(t,r),function(o){const u=We(o);u.yc.forEach((f,g)=>{db(u.remoteStore,g)}),u.Ic.Ts(),u.yc=new Map,u.gc=new xn(qe.comparator)}(t),t.vc=!1,yield y2(t.remoteStore,!1)}}),q2.apply(this,arguments)}function l3(n,e,t){return W2.apply(this,arguments)}function W2(){return W2=(0,U.Z)(function*(n,e,t){const r=We(n),i=[],o=[];for(const u of e){let f;const g=r._c.get(u);if(g&&0!==g.length){f=yield jy(r.localStore,y(g[0]));for(const v of g){const b=r.wc.get(v),T=yield S$(r,b);T.snapshot&&o.push(T.snapshot)}}else{const v=yield BU(r.localStore,u);f=yield jy(r.localStore,v),yield S2(r,u3(v),u,!1,f.resumeToken)}i.push(f)}return r.dc.nu(o),i}),W2.apply(this,arguments)}function u3(n){return vk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function O$(n){const e=We(n);return We(We(e.localStore).persistence).$i()}function k$(n,e,t,r){return Z2.apply(this,arguments)}function Z2(){return Z2=(0,U.Z)(function*(n,e,t,r){const i=We(n);if(i.vc)return void Ae("SyncEngine","Ignoring unexpected query state notification.");const o=i._c.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=yield VU(i.localStore,Y(o[0])),f=YI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,pr.EMPTY_BYTE_STRING);yield nu(i,u,f);break}case"rejected":yield $y(i.localStore,e,!0),Ky(i,e,r);break;default:et()}}),Z2.apply(this,arguments)}function N$(n,e,t){return K2.apply(this,arguments)}function K2(){return K2=(0,U.Z)(function*(n,e,t){const r=Y2(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ae("SyncEngine","Adding an already active target "+i);continue}const o=yield BU(r.localStore,i),u=yield jy(r.localStore,o);yield S2(r,u3(o),u.targetId,!1,u.resumeToken),JD(r.remoteStore,u)}for(const i of t)r._c.has(i)&&(yield $y(r.localStore,i,!1).then(()=>{db(r.remoteStore,i),Ky(r,i)}).catch(fr))}}),K2.apply(this,arguments)}function Y2(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=o3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w$.bind(null,e),e.dc.nu=d$.bind(null,e.eventManager),e.dc.Pc=h$.bind(null,e.eventManager),e}function Q2(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b$.bind(null,e),e}class hb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,U.Z)(function*(){t.serializer=lb(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return RU(this.persistence,new NU,e.initialUser,this.serializer)}createPersistence(e){return new jk(zD.zs,this.serializer)}createSharedClientState(e){return new zU}terminate(){var e=this;return(0,U.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class J2 extends hb{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,U.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Q2(r.Vc.syncEngine),yield zy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return RU(this.persistence,new NU,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new TU(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new fD(t,this.persistence);return new g4(e.asyncQueue,r)}createPersistence(e){const t=zk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new Hk(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,qU(),QD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new zU}}class d3 extends J2{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,U.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof Xk&&(r.sharedClientState.syncEngine={jr:x$.bind(null,i),zr:k$.bind(null,i),Wr:N$.bind(null,i),$i:O$.bind(null,i),Qr:A$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var o=(0,U.Z)(function*(u){yield function P$(n,e){return q2.apply(this,arguments)}(r.Vc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=qU();if(!Xk.D(t))throw new ye(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xk(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Yy{initialize(e,t){var r=this;return(0,U.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>a3(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=M$.bind(null,r.syncEngine),yield y2(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new u$}createDatastore(e){const t=lb(e.databaseInfo.databaseId),r=new Wj(e.databaseInfo);return new Yj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=f=>a3(this.syncEngine,f,0),u=GU.D()?new GU:new zj,new Xj(t,r,i,o,u);var t,r,i,o,u}createSyncEngine(e,t){return function(r,i,o,u,f,g,v){const b=new _$(r,i,o,u,f,g);return v&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,U.Z)(function*(t){const r=We(t);Ae("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Hy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function h3(n,e=10240){let t=0;return{read:()=>(0,U.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,U.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class eS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class L${constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Nr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,U.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,U.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,U.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const o=yield e.$c(i);return new f$(JSON.parse(o),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,U.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,U.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,U.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class U${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,U.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ye(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,U.Z)(function*(o,u){const f=We(o),g=XI(f.serializer)+"/documents",v={documents:u.map(N=>JI(f.serializer,N))},b=yield f.vo("BatchGetDocuments",g,v,u.length),T=new Map;b.forEach(N=>{const q=function sj(n,e){return"found"in e?function(t,r){rt(!!r.found);const i=Ec(t,r.found.name),o=Rr(r.found.updateTime),u=r.found.createTime?Rr(r.found.createTime):at.min(),f=new qr({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(i,o,u,f)}(n,e):"missing"in e?function(t,r){rt(!!r.missing),rt(!!r.readTime);const i=Ec(t,r.missing),o=Rr(r.readTime);return Pn.newNoDocument(i,o)}(n,e):et()}(f.serializer,N);T.set(q.key.toString(),q)});const S=[];return u.forEach(N=>{const q=T.get(N.toString());rt(!!q),S.push(q)}),S}),function(o,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,U.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=qe.fromPath(i);e.mutations.push(new Ik(o,e.precondition(o)))}),yield(r=(0,U.Z)(function*(i,o){const u=We(i),f=XI(u.serializer)+"/documents",g={writes:o.map(v=>eb(u.serializer,v))};yield u.Io("Commit",f,g)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=at.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ye(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(at.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(at.min()))throw new ye(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class B${constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Bc=r.maxAttempts,this.qo=new t2(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,U.Z)(function*(){const t=new U$(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Uc(o)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Wp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!U4(t)}return!1}}class V${constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=kr.UNAUTHENTICATED,this.clientId=Gp.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,U.Z)(function*(f){Ae("FirestoreClient","Received user=",f.uid),yield o.authCredentialListener(f),o.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ae("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,U.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,U.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=qy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function tS(n,e){return X2.apply(this,arguments)}function X2(){return X2=(0,U.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,U.Z)(function*(o){r.isEqual(o)||(yield FU(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),X2.apply(this,arguments)}function eN(n,e){return tN.apply(this,arguments)}function tN(){return tN=(0,U.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield nN(n);Ae("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>XU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>XU(e.remoteStore,o)),n._onlineComponents=e}),tN.apply(this,arguments)}function f3(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function nN(n){return rN.apply(this,arguments)}function rN(){return rN=(0,U.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield tS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!f3(t))throw t;_o("Error using user provided cache. Falling back to memory cache: "+t),yield tS(n,new hb)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),yield tS(n,new hb);return n._offlineComponents}),rN.apply(this,arguments)}function nS(n){return iN.apply(this,arguments)}function iN(){return iN=(0,U.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield eN(n,n._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),yield eN(n,new Yy))),n._onlineComponents}),iN.apply(this,arguments)}function p3(n){return nN(n).then(e=>e.persistence)}function rS(n){return nN(n).then(e=>e.localStore)}function g3(n){return nS(n).then(e=>e.remoteStore)}function sN(n){return nS(n).then(e=>e.syncEngine)}function Qy(n){return oN.apply(this,arguments)}function oN(){return oN=(0,U.Z)(function*(n){const e=yield nS(n),t=e.eventManager;return t.onListen=y$.bind(null,e.syncEngine),t.onUnlisten=v$.bind(null,e.syncEngine),t}),oN.apply(this,arguments)}function _3(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function(i,o,u,f,g){const v=new eS({next:T=>{o.enqueueAndForget(()=>b2(i,b));const S=T.docs.has(u);!S&&T.fromCache?g.reject(new ye(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&f&&"server"===f.source?g.reject(new ye(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new M2(s(u.path),v,{includeMetadataChanges:!0,Ku:!0});return w2(i,b)}(yield Qy(n),n.asyncQueue,e,t,r)})),r.promise}function y3(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function(i,o,u,f,g){const v=new eS({next:T=>{o.enqueueAndForget(()=>b2(i,b)),T.fromCache&&"server"===f.source?g.reject(new ye(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new M2(u,v,{includeMetadataChanges:!0,Ku:!0});return w2(i,b)}(yield Qy(n),n.asyncQueue,e,t,r)})),r.promise}function v3(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const C3=new Map;function aN(n,e,t){if(!t)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function w3(n,e,t,r){if(!0===e&&!0===r)throw new ye(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function I3(n){if(!qe.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function b3(n){if(qe.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=iS(n);throw new ye(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function E3(n,e){if(e<=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class T3{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ye(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ye(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=v3(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fb{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ye(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new h4;switch(t.type){case"firstParty":return new qO(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ye(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=C3.get(e);t&&(Ae("ComponentProvider","Removing Datastore"),C3.delete(e),t.terminate())}(this),Promise.resolve()}}function M3(n,e,t,r={}){var i;const o=(n=Jt(n,fb))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==u&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:u,ssl:!1})),r.mockUserToken){let f,g;if("string"==typeof r.mockUserToken)f=r.mockUserToken,g=kr.MOCK_USER;else{f=(0,z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ye(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new kr(v)}n._authCredentials=new zO(new HO(f,g))}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class Tc extends ji{constructor(e,t,r){super(e,t,s(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new qe(e))}withConverter(e){return new Tc(this.firestore,e,this._path)}}function D3(n,e,...t){if(n=(0,z.m9)(n),aN("collection","path",e),n instanceof fb){const r=qt.fromString(e,...t);return b3(r),new Tc(n,null,r)}{if(!(n instanceof Qn||n instanceof Tc))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return b3(r),new Tc(n.firestore,null,r)}}function sS(n,e,...t){if(n=(0,z.m9)(n),1===arguments.length&&(e=Gp.A()),aN("doc","path",e),n instanceof fb){const r=qt.fromString(e,...t);return I3(r),new Qn(n,null,new qe(r))}{if(!(n instanceof Qn||n instanceof Tc))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return I3(r),new Qn(n.firestore,n instanceof Tc?n.converter:null,new qe(r))}}function S3(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),(n instanceof Qn||n instanceof Tc)&&(e instanceof Qn||e instanceof Tc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function cN(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),n instanceof ji&&e instanceof ji&&n.firestore===e.firestore&&M(n._query,e._query)&&n.converter===e.converter}class Y${constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new t2(this,"async_queue_retry"),this.Xc=()=>{const t=QD();t&&Ae("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=QD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=QD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Nr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,U.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Bi(t))throw t;Ae("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Er("INTERNAL UNHANDLED ERROR: ",function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=C2.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&et()}verifyOperationInProgress(){}sa(){var e=this;return(0,U.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function lN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Q${constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends fb{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Y$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||A3(this),this._firestoreClient.terminate()}}function X$(n,e){const t="object"==typeof n?n:(0,Sn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Sn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(0,z.P0)("firestore");o&&M3(i,...o)}return i}function Fr(n){return n._firestoreClient||A3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function A3(n){var e,t,r;const i=n._freezeSettings(),o=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new v4(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,v3(v.experimentalLongPollingOptions),v.useFetchStreams));var f,v;n._firestoreClient=new V$(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function x3(n,e,t){const r=new Nr;return n.asyncQueue.enqueue((0,U.Z)(function*(){try{yield tS(n,t),yield eN(n,e),r.resolve()}catch(i){const o=i;if(!f3(o))throw o;_o("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function P3(n){if(n._initialized||n._terminated)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Mc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mc(pr.fromBase64String(e))}catch(t){throw new ye(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mc(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ru{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ye(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sg{constructor(e){this._methodName=e}}class oS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}}const l8=/^__.*__$/;class u8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new eu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ry(e,this.data,t,this.fieldTransforms)}}class O3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new eu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function k3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class aS{constructor(e,t,r,i,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new aS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return uS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(k3(this.ca)&&l8.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class d8{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lb(e)}ya(e,t,r,i=!1){return new aS({ca:e,methodName:t,ga:r,path:rr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function og(n){const e=n._freezeSettings(),t=lb(n._databaseId);return new d8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cS(n,e,t,r,i,o={}){const u=n.ya(o.merge||o.mergeFields?2:0,e,t,i);fN("Data must be an object, but it was:",u,r);const f=F3(r,u);let g,v;if(o.merge)g=new Vi(u.fieldMask),v=u.fieldTransforms;else if(o.mergeFields){const b=[];for(const T of o.mergeFields){const S=mb(e,T,t);if(!u.contains(S))throw new ye(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);U3(b,S)||b.push(S)}g=new Vi(b),v=u.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,v=u.fieldTransforms;return new u8(new qr(f),g,v)}class gb extends sg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gb}}function N3(n,e,t){return new aS({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uN extends sg{_toFieldTransform(e){return new WI(e.path,new ky)}isEqual(e){return e instanceof uN}}class h8 extends sg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=N3(this,e,!0),r=this.pa.map(o=>ag(o,t)),i=new Yp(r);return new WI(e.path,i)}isEqual(e){return this===e}}class f8 extends sg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=N3(this,e,!0),r=this.pa.map(o=>ag(o,t)),i=new Qp(r);return new WI(e.path,i)}isEqual(e){return this===e}}class p8 extends sg{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Ny(e.serializer,D4(e.serializer,this.Ia));return new WI(e.path,t)}isEqual(e){return this===e}}function dN(n,e,t,r){const i=n.ya(1,e,t);fN("Data must be an object, but it was:",i,r);const o=[],u=qr.empty();Ql(r,(g,v)=>{const b=lS(e,g,t);v=(0,z.m9)(v);const T=i.da(b);if(v instanceof gb)o.push(b);else{const S=ag(v,T);null!=S&&(o.push(b),u.set(b,S))}});const f=new Vi(o);return new O3(u,f,i.fieldTransforms)}function hN(n,e,t,r,i,o){const u=n.ya(1,e,t),f=[mb(e,r,t)],g=[i];if(o.length%2!=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<o.length;S+=2)f.push(mb(e,o[S])),g.push(o[S+1]);const v=[],b=qr.empty();for(let S=f.length-1;S>=0;--S)if(!U3(v,f[S])){const N=f[S];let q=g[S];q=(0,z.m9)(q);const Q=u.da(N);if(q instanceof gb)v.push(N);else{const J=ag(q,Q);null!=J&&(v.push(N),b.set(N,J))}}const T=new Vi(v);return new O3(b,T,u.fieldTransforms)}function R3(n,e,t,r=!1){return ag(t,n.ya(r?4:3,e))}function ag(n,e){if(L3(n=(0,z.m9)(n)))return fN("Unsupported field value:",e,n),F3(n,e);if(n instanceof sg)return function(t,r){if(!k3(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const u of t){let f=ag(u,r.wa(o));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return D4(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Bn.fromDate(t);return{timestampValue:Ly(r.serializer,i)}}if(t instanceof Bn){const i=new Bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ly(r.serializer,i)}}if(t instanceof oS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Mc)return{bytesValue:Z4(r.serializer,t._byteString)};if(t instanceof Qn){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ak(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${iS(t)}`)}(n,e)}function F3(n,e){const t={};return ak(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ql(n,(r,i)=>{const o=ag(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function L3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Bn||n instanceof oS||n instanceof Mc||n instanceof Qn||n instanceof sg)}function fN(n,e,t){if(!L3(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=iS(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function mb(n,e,t){if((e=(0,z.m9)(e))instanceof ru)return e._internalPath;if("string"==typeof e)return lS(n,e);throw uS("Field path arguments must be of type string or ",n,!1,void 0,t)}const g8=new RegExp("[~\\*/\\[\\]]");function lS(n,e,t){if(e.search(g8)>=0)throw uS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ru(...e.split("."))._internalPath}catch{throw uS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uS(n,e,t,r,i){const o=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(o||u)&&(g+=" (found",o&&(g+=` in field ${r}`),u&&(g+=` in document ${i}`),g+=")"),new ye(ae.INVALID_ARGUMENT,f+n+g)}function U3(n,e){return n.some(t=>t.isEqual(e))}class _b{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new m8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class m8 extends _b{data(){return super.data()}}function dS(n,e){return"string"==typeof e?lS(n,e):e instanceof ru?e._internalPath:e._delegate._internalPath}function B3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ye(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pN{}class yb extends pN{}function Qd(n,e,...t){let r=[];e instanceof pN&&r.push(e),r=r.concat(t),function(i){const o=i.filter(f=>f instanceof Jy).length,u=i.filter(f=>f instanceof vb).length;if(o>1||o>0&&u>0)throw new ye(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class vb extends yb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new vb(e,t,r)}_apply(e){const t=this._parse(e);return H3(e._query,t),new ji(e.firestore,e.converter,C(e._query,t))}_parse(e){const t=og(e.firestore);return function(i,o,u,f,g,v,b){let T;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){$3(b,v);const S=[];for(const N of b)S.push(j3(f,i,N));T={arrayValue:{values:S}}}else T=j3(f,i,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||$3(b,v),T=R3(u,"where",b,"in"===v||"not-in"===v);return $t.create(g,v,T)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Jy extends pN{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:dn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const u=i.getFlattenedFilters();for(const f of u)H3(o,f),o=C(o,f)}(e._query,t),new ji(e.firestore,e.converter,C(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class gN extends yb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new gN(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new zd(i,o);return function(f,g){if(null===l(f)){const v=d(f);null!==v&&z3(0,v,g.field)}}(r,u),u}(e._query,this._field,this._direction);return new ji(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Na(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class hS extends yb{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new hS(e,t,r)}_apply(e){return new ji(e.firestore,e.converter,E(e._query,this._limit,this._limitType))}}class fS extends yb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new fS(e,t,r)}_apply(e){const t=V3(e,this.type,this._docOrFields,this._inclusive);return new ji(e.firestore,e.converter,(i=t,new Na((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class pS extends yb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pS(e,t,r)}_apply(e){const t=V3(e,this.type,this._docOrFields,this._inclusive);return new ji(e.firestore,e.converter,(i=t,new Na((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function V3(n,e,t,r){if(t[0]=(0,z.m9)(t[0]),t[0]instanceof _b)return function(i,o,u,f,g){if(!f)throw new ye(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const v=[];for(const b of p(i))if(b.field.isKeyField())v.push(Pa(o,f.key));else{const T=f.data.field(b.field);if(Jl(T))throw new ye(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const S=b.field.canonicalString();throw new ye(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}v.push(T)}return new Oa(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=og(n.firestore);return function(o,u,f,g,v,b){const T=o.explicitOrderBy;if(v.length>T.length)throw new ye(ae.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let N=0;N<v.length;N++){const q=v[N];if(T[N].field.isKeyField()){if("string"!=typeof q)throw new ye(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof q}`);if(!h(o)&&-1!==q.indexOf("/"))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${q}' contains a slash.`);const Q=o.path.child(qt.fromString(q));if(!qe.isDocumentKey(Q))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const J=new qe(Q);S.push(Pa(u,J))}else{const Q=R3(f,g,q);S.push(Q)}}return new Oa(S,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function j3(n,e,t){if("string"==typeof(t=(0,z.m9)(t))){if(""===t)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h(e)&&-1!==t.indexOf("/"))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!qe.isDocumentKey(r))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pa(n,new qe(r))}if(t instanceof Qn)return Pa(n,t._key);throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iS(t)}.`)}function $3(n,e){if(!Array.isArray(n)||0===n.length)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function H3(n,e){if(e.isInequality()){const r=d(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=l(n);null!==o&&z3(0,i,o)}const t=function(r,i){for(const o of r)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ye(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function z3(n,e,t){if(!t.isEqual(e))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class mN{convertValue(e,t="none"){switch(bc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ql(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new oS(Vn(e.latitude),Vn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=NI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(My(e));default:return null}}convertTimestamp(e){const t=wc(e);return new Bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);rt(iU(r));const i=new Aa(r.get(1),r.get(3)),o=new qe(r.popFirst(5));return i.isEqual(t)||Er(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function gS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class T8 extends mN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class cg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iu extends _b{constructor(e,t,r,i,o,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Cb extends iu{data(e={}){return super.data(e)}}class Jd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new cg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Cb(this._firestore,this._userDataWriter,r.key,r,new cg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Cb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new cg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new Cb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new cg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==u.type&&(g=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),1!==u.type&&(o=o.add(u.doc),v=o.indexOf(u.doc.key)),{type:D8(u.type),doc:f,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function D8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function q3(n,e){return n instanceof iu&&e instanceof iu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Jd&&e instanceof Jd&&n._firestore===e._firestore&&cN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Xd extends mN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function W3(n,e,t){n=Jt(n,Qn);const r=Jt(n.firestore,Jn),i=gS(n.converter,e,t);return Xy(r,[cS(og(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ir.none())])}function Z3(n,e,t,...r){n=Jt(n,Qn);const i=Jt(n.firestore,Jn),o=og(i);let u;return u="string"==typeof(e=(0,z.m9)(e))||e instanceof ru?hN(o,"updateDoc",n._key,e,t,r):dN(o,"updateDoc",n._key,e),Xy(i,[u.toMutation(n._key,ir.exists(!0))])}function K3(n,...e){var t,r,i;n=(0,z.m9)(n);let o={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||lN(e[u])||(o=e[u],u++);const f={includeMetadataChanges:o.includeMetadataChanges};if(lN(e[u])){const T=e[u];e[u]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[u+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[u+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let g,v,b;if(n instanceof Qn)v=Jt(n.firestore,Jn),b=s(n._key.path),g={next:T=>{e[u]&&e[u](_N(v,n,T))},error:e[u+1],complete:e[u+2]};else{const T=Jt(n,ji);v=Jt(T.firestore,Jn),b=T._query;const S=new Xd(v);g={next:N=>{e[u]&&e[u](new Jd(v,S,T,N))},error:e[u+1],complete:e[u+2]},B3(n._query)}return function(T,S,N,q){const Q=new eS(q),J=new M2(S,Q,N);return T.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return w2(yield Qy(T),J)})),()=>{Q.Dc(),T.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return b2(yield Qy(T),J)}))}}(Fr(v),b,f,g)}function Xy(n,e){return function(t,r){const i=new Nr;return t.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function C$(n,e,t){return P2.apply(this,arguments)}(yield sN(t),r,i)})),i.promise}(Fr(n),e)}function _N(n,e,t){const r=t.docs.get(e._key),i=new Xd(n);return new iu(n,i,e._key,r,new cg(t.hasPendingWrites,t.fromCache),e.converter)}const G8={maxAttempts:5};class Y3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=og(e)}set(e,t,r){this._verifyNotCommitted();const i=eh(e,this._firestore),o=gS(i.converter,t,r),u=cS(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=eh(e,this._firestore);let u;return u="string"==typeof(t=(0,z.m9)(t))||t instanceof ru?hN(this._dataReader,"WriteBatch.update",o._key,t,r,i):dN(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=eh(e,this._firestore);return this._mutations=this._mutations.concat(new Fy(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function eh(n,e){if((n=(0,z.m9)(n)).firestore!==e)throw new ye(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class q8 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=og(e)}get(e){const t=eh(e,this._firestore),r=new T8(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const o=i[0];if(o.isFoundDocument())return new _b(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new _b(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=eh(e,this._firestore),o=gS(i.converter,t,r),u=cS(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const o=eh(e,this._firestore);let u;return u="string"==typeof(t=(0,z.m9)(t))||t instanceof ru?hN(this._dataReader,"Transaction.update",o._key,t,r,i):dN(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=eh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=eh(e,this._firestore),r=new Xd(this._firestore);return super.get(e).then(i=>new iu(this._firestore,r,t._key,i._document,new cg(!1,!1),t.converter))}}function yN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ye("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function J3(){if(typeof Uint8Array>"u")throw new ye("unimplemented","Uint8Arrays are not available in this environment.")}function X3(){if(!function bD(){return typeof atob<"u"}())throw new ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Hp=Sn.SDK_VERSION,(0,Sn._registerComponent)(new wr.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),u=new Jn(new cD(t.getProvider("auth-internal")),new f4(t.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ye(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(f.options.projectId,g)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Sn.registerVersion)($O,"3.13.0",n),(0,Sn.registerVersion)($O,"3.13.0","esm2017")}();class wb{constructor(e){this._delegate=e}static fromBase64String(e){return X3(),new wb(Mc.fromBase64String(e))}static fromUint8Array(e){return J3(),new wb(Mc.fromUint8Array(e))}toBase64(){return X3(),this._delegate.toBase64()}toUint8Array(){return J3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vN(n){return function tH(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class nH{enableIndexedDbPersistence(e,t){return function e8(n,e){P3(n=Jt(n,Jn));const t=Fr(n);if(t._uninitializedComponentsProvider)throw new ye(ae.FAILED_PRECONDITION,"SDK cache is already specified.");_o("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Yy;return x3(t,i,new J2(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function t8(n){P3(n=Jt(n,Jn));const e=Fr(n);if(e._uninitializedComponentsProvider)throw new ye(ae.FAILED_PRECONDITION,"SDK cache is already specified.");_o("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Yy;return x3(e,r,new d3(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function n8(n){if(n._initialized&&!n._terminated)throw new ye(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,U.Z)(function*(){try{yield(t=(0,U.Z)(function*(r){if(!Bs.D())return Promise.resolve();const i=r+"main";yield Bs.delete(i)}),function(r){return t.apply(this,arguments)})(zk(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class e6{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Aa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_o("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){M3(this._delegate,e,t,r)}enableNetwork(){return function i8(n){return function j$(n){return n.asyncQueue.enqueue((0,U.Z)(function*(){const e=yield p3(n),t=yield g3(n);return e.setNetworkEnabled(!0),function(r){const i=We(r);return i.vu.delete(0),ub(i)}(t)}))}(Fr(n=Jt(n,Jn)))}(this._delegate)}disableNetwork(){return function s8(n){return function $$(n){return n.asyncQueue.enqueue((0,U.Z)(function*(){const e=yield p3(n),t=yield g3(n);return e.setNetworkEnabled(!1),(r=(0,U.Z)(function*(i){const o=We(i);o.vu.add(0),yield Hy(o),o.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Fr(n=Jt(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,w3("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function r8(n){return function(e){const t=new Nr;return e.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function E$(n,e){return F2.apply(this,arguments)}(yield sN(e),t)})),t.promise}(Fr(n=Jt(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function F8(n,e){return function G$(n,e){const t=new eS(e);return n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return r=yield Qy(n),i=t,We(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return r=yield Qy(n),i=t,void We(r).ku.delete(i);var r,i}))}}(Fr(n=Jt(n,Jn)),lN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ev(this,D3(this._delegate,e))}catch(t){throw gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ta(this,sS(this._delegate,e))}catch(t){throw gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ms(this,function K$(n,e){if(n=Jt(n,fb),aN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ji(n,null,(t=e,new Na(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function W8(n,e,t){n=Jt(n,Jn);const r=Object.assign(Object.assign({},G8),t);return function(i){if(i.maxAttempts<1)throw new ye(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,u){const f=new Nr;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){const g=yield function m3(n){return nS(n).then(e=>e.datastore)}(i);new B$(i.asyncQueue,g,u,o,f).run()})),f.promise}(Fr(n),i=>e(new q8(n,i)),r)}(this._delegate,t=>e(new t6(this,t)))}batch(){return Fr(this._delegate),new n6(new Y3(this._delegate,e=>Xy(this._delegate,e)))}loadBundle(e){return function o8(n,e){const t=Fr(n=Jt(n,Jn)),r=new Q$;return function q$(n,e,t,r){const i=function(o,u){let f;return f="string"==typeof o?V4().encode(o):o,g=function(g,v){if(g instanceof Uint8Array)return h3(g,v);if(g instanceof ArrayBuffer)return h3(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new L$(g,u);var g}(t,lb(e));n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){!function R$(n,e,t){const r=We(n);var i;(i=(0,U.Z)(function*(o,u,f){try{const g=yield u.getMetadata();if(yield function(S,N){const q=We(S),Q=Rr(N.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",J=>q.qs.getBundleMetadata(J,N.id)).then(J=>!!J&&J.createTime.compareTo(Q)>=0)}(o.localStore,g))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(S=g).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);f._updateProgress(n3(g));const v=new p$(g,o.localStore,u.serializer);let b=yield u.bc();for(;b;){const S=yield v.zu(b);S&&f._updateProgress(S),b=yield u.bc()}const T=yield v.complete();return yield nu(o,T.Ju,void 0),yield function(S,N){const q=We(S);return q.persistence.runTransaction("Save bundle","readwrite",Q=>q.qs.saveBundleMetadata(Q,N))}(o.localStore,g),f._completeWith(T.progress),Promise.resolve(T.Hu)}catch(g){return _o("SyncEngine",`Loading bundle failed with ${g}`),f._failWith(g),Promise.resolve(new Set)}var S}),function(o,u,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield sN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function a8(n,e){return function W$(n,e){return n.asyncQueue.enqueue((0,U.Z)(function*(){return function(t,r){const i=We(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.qs.getNamedQuery(o,r))}(yield rS(n),e)}))}(Fr(n=Jt(n,Jn)),e).then(t=>t?new ji(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ms(this,t):null)}}class mS extends mN{constructor(e){super(),this.firestore=e}convertBytes(e){return new wb(new Mc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ta.forKey(t,this.firestore,null)}}class t6{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mS(e)}get(e){const t=ug(e);return this._delegate.get(t).then(r=>new Ib(this._firestore,new iu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=ug(e);return r?(yN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=ug(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=ug(e);return this._delegate.delete(t),this}}class n6{constructor(e){this._delegate=e}set(e,t,r){const i=ug(e);return r?(yN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=ug(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=ug(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class lg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Cb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bb(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=lg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new lg(e,new mS(e),t),i.set(t,o)),o}}lg.INSTANCES=new WeakMap;class ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ta(t,new Qn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new ta(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ev(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ev(this.firestore,D3(this._delegate,e))}catch(t){throw gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,z.m9)(e))instanceof Qn&&S3(this._delegate,e)}set(e,t){t=yN("DocumentReference.set",t);try{return t?W3(this._delegate,e,t):W3(this._delegate,e)}catch(r){throw gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Z3(this._delegate,e):Z3(this._delegate,e,t,...r)}catch(i){throw gs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function N8(n){return Xy(Jt(n.firestore,Jn),[new Fy(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=r6(e),r=i6(e,i=>new Ib(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return K3(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function A8(n){n=Jt(n,Qn);const e=Jt(n.firestore,Jn),t=Fr(e),r=new Xd(e);return function H$(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return(r=(0,U.Z)(function*(i,o,u){try{const f=yield function(g,v){const b=We(g);return b.persistence.runTransaction("read document","readonly",T=>b.localDocuments.getDocument(T,v))}(i,o);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new ye(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const g=qy(f,`Failed to get document '${o} from cache`);u.reject(g)}}),function(i,o,u){return r.apply(this,arguments)})(yield rS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new iu(e,r,n._key,i,new cg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function x8(n){n=Jt(n,Qn);const e=Jt(n.firestore,Jn);return _3(Fr(e),n._key,{source:"server"}).then(t=>_N(e,n,t))}(this._delegate):function S8(n){n=Jt(n,Qn);const e=Jt(n.firestore,Jn);return _3(Fr(e),n._key).then(t=>_N(e,n,t))}(this._delegate),t.then(r=>new Ib(this.firestore,new iu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ta(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}function gs(n,e,t){return n.message=n.message.replace(e,t),n}function r6(n){for(const e of n)if("object"==typeof e&&!vN(e))return e;return{}}function i6(n,e){var t,r;let i;return i=vN(n[0])?n[0]:vN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Ib{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return q3(this._delegate,e._delegate)}}class bb extends Ib{data(e){const t=this._delegate.data(e);return function bI(n,e){n||et()}(void 0!==t),t}}class ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mS(e)}where(e,t,r){try{return new ms(this.firestore,Qd(this._delegate,function _8(n,e,t){const r=e,i=dS("where",n);return vb._create(i,r,t)}(e,t,r)))}catch(i){throw gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ms(this.firestore,Qd(this._delegate,function y8(n,e="asc"){const t=e,r=dS("orderBy",n);return gN._create(r,t)}(e,t)))}catch(r){throw gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ms(this.firestore,Qd(this._delegate,function v8(n){return E3("limit",n),hS._create("limit",n,"F")}(e)))}catch(t){throw gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ms(this.firestore,Qd(this._delegate,function C8(n){return E3("limitToLast",n),hS._create("limitToLast",n,"L")}(e)))}catch(t){throw gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ms(this.firestore,Qd(this._delegate,function w8(...n){return fS._create("startAt",n,!0)}(...e)))}catch(t){throw gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ms(this.firestore,Qd(this._delegate,function I8(...n){return fS._create("startAfter",n,!1)}(...e)))}catch(t){throw gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ms(this.firestore,Qd(this._delegate,function b8(...n){return pS._create("endBefore",n,!1)}(...e)))}catch(t){throw gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ms(this.firestore,Qd(this._delegate,function E8(...n){return pS._create("endAt",n,!0)}(...e)))}catch(t){throw gs(t,"endAt()","Query.endAt()")}}isEqual(e){return cN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function O8(n){n=Jt(n,ji);const e=Jt(n.firestore,Jn),t=Fr(e),r=new Xd(e);return function z$(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return(r=(0,U.Z)(function*(i,o,u){try{const f=yield WD(i,o,!0),g=new s3(o,f.ir),v=g.sc(f.documents),b=g.applyChanges(v,!1);u.resolve(b.snapshot)}catch(f){const g=qy(f,`Failed to execute query '${o} against cache`);u.reject(g)}}),function(i,o,u){return r.apply(this,arguments)})(yield rS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Jd(e,r,n,i))}(this._delegate):"server"===e?.source?function k8(n){n=Jt(n,ji);const e=Jt(n.firestore,Jn),t=Fr(e),r=new Xd(e);return y3(t,n._query,{source:"server"}).then(i=>new Jd(e,r,n,i))}(this._delegate):function P8(n){n=Jt(n,ji);const e=Jt(n.firestore,Jn),t=Fr(e),r=new Xd(e);return B3(n._query),y3(t,n._query).then(i=>new Jd(e,r,n,i))}(this._delegate),t.then(r=>new CN(this.firestore,new Jd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=r6(e),r=i6(e,i=>new CN(this.firestore,new Jd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return K3(this._delegate,t,r)}withConverter(e){return new ms(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}class iH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class CN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new iH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new bb(this._firestore,r))})}isEqual(e){return q3(this._delegate,e._delegate)}}class ev extends ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ta(this.firestore,e):null}doc(e){try{return new ta(this.firestore,void 0===e?sS(this._delegate):sS(this._delegate,e))}catch(t){throw gs(t,"doc()","CollectionReference.doc()")}}add(e){return function R8(n,e){const t=Jt(n.firestore,Jn),r=sS(n),i=gS(n.converter,e);return Xy(t,[cS(og(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ta(this.firestore,t))}isEqual(e){return S3(this._delegate,e._delegate)}withConverter(e){return new ev(this.firestore,this._delegate.withConverter(e?lg.getInstance(this.firestore,e):null))}}function ug(n){return Jt(n,Qn)}class wN{constructor(...e){this._delegate=new ru(...e)}static documentId(){return new wN(rr.keyField().canonicalString())}isEqual(e){return(e=(0,z.m9)(e))instanceof ru&&this._delegate._internalPath.isEqual(e._internalPath)}}class dg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function K8(){return new uN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new dg(e)}static delete(){const e=function Z8(){return new gb("deleteField")}();return e._methodName="FieldValue.delete",new dg(e)}static arrayUnion(...e){const t=function Y8(...n){return new h8("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new dg(t)}static arrayRemove(...e){const t=function Q8(...n){return new f8("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new dg(t)}static increment(e){const t=function J8(n){return new p8("increment",n)}(e);return t._methodName="FieldValue.increment",new dg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const sH={Firestore:e6,GeoPoint:oS,Timestamp:Bn,Blob:wb,Transaction:t6,WriteBatch:n6,DocumentReference:ta,DocumentSnapshot:Ib,Query:ms,QueryDocumentSnapshot:bb,QuerySnapshot:CN,CollectionReference:ev,FieldPath:wN,FieldValue:dg,setLogLevel:function rH(n){!function d4(n){Zl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function aH(n){(function oH(n,e){n.INTERNAL.registerComponent(new wr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},sH)))})(n,(e,t)=>new e6(e,t,new nH)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(es.Z);var cH=F(3019);class lH extends ki.x{constructor(e=1/0,t=1/0,r=Pf){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:u}=this;t||(r.push(e),!i&&r.push(o.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let u=0;u<o.length&&!e.closed;u+=r?1:2)e.next(o[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const u=t.now();let f=0;for(let g=1;g<r.length&&r[g]<=u;g+=2)f=g;f&&r.splice(0,f+1)}}}var uH=F(3020);function s6(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,uH.B)({connector:()=>new lH(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function o6(n,e){return(0,to.m)(e)?(0,En.w)(()=>n,e):(0,En.w)(()=>n)}class su{constructor(e){return e}}class tv{constructor(){return(0,Sn.getApps)()}}const IN=new c.OlP("angularfire2._apps"),hH={provide:su,useFactory:function dH(n){return n&&1===n.length?n[0]:new su((0,Sn.getApp)())},deps:[[new c.FiY,IN]]},fH={provide:tv,deps:[[new c.FiY,IN]]};function pH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new su(r)}}let gH=(()=>{class n{constructor(t){(0,Sn.registerVersion)("angularfire",Nl.full,"core"),(0,Sn.registerVersion)("angularfire",Nl.full,"app"),(0,Sn.registerVersion)("angular",c.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[hH,fH]}),n})();function mH(n,...e){return{ngModule:gH,providers:[{provide:IN,useFactory:pH(n),multi:!0,deps:[c.R0b,c.zs3,Fl,...e]}]}}const _H=Dd(Sn.initializeApp,!0),bN=new Map,a6={activated:!1,tokenObservers:[]},yH={initialized:!1,enabled:!1};function Tr(n){return bN.get(n)||Object.assign({},a6)}function _S(){return yH}const EN="https://content-firebaseappcheck.googleapis.com/v1",IH="exchangeDebugToken",c6={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class EH{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,U.Z)(function*(){t.stop();try{t.pending=new z.BH,yield function TH(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $i=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function TN(n){if(!Tr(n).activated)throw $i.create("use-before-activation",{appName:n.name})}function CS(n,e){return DN.apply(this,arguments)}function DN(){return DN=(0,U.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const o={method:"POST",body:JSON.stringify(e),headers:r};let u,f;try{u=yield fetch(n,o)}catch(T){throw $i.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==u.status)throw $i.create("fetch-status-error",{httpStatus:u.status});try{f=yield u.json()}catch(T){throw $i.create("fetch-parse-error",{originalErrorMessage:T?.message})}const g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw $i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(g[1]),b=Date.now();return{token:f.token,expireTimeMillis:b+v,issuedAtTimeMillis:b}}),DN.apply(this,arguments)}function l6(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${EN}/projects/${t}/apps/${r}:${IH}?key=${i}`,body:{debug_token:e}}}const AH="firebase-app-check-database",xH=1,Eb="firebase-app-check-store";let wS=null;function SN(){return SN=(0,U.Z)(function*(n,e){const r=(yield function d6(){return wS||(wS=new Promise((n,e)=>{try{const t=indexedDB.open(AH,xH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e($i.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Eb,{keyPath:"compositeKey"})}}catch(t){e($i.create("storage-open",{originalErrorMessage:t?.message}))}}),wS)}()).transaction(Eb,"readwrite"),o=r.objectStore(Eb).put({compositeKey:n,value:e});return new Promise((u,f)=>{o.onsuccess=g=>{u()},r.onerror=g=>{var v;f($i.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})}),SN.apply(this,arguments)}const Tb=new Ri.Yd("@firebase/app-check");function PN(n,e){return(0,z.hl)()?function OH(n,e){return function h6(n,e){return SN.apply(this,arguments)}(function p6(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Tb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kN(){return _S().enabled}function NN(){return RN.apply(this,arguments)}function RN(){return RN=(0,U.Z)(function*(){const n=_S();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),RN.apply(this,arguments)}const UH={error:"UNKNOWN_ERROR"};function BH(n){return z.US.encodeString(JSON.stringify(n),!1)}function IS(n){return FN.apply(this,arguments)}function FN(){return FN=(0,U.Z)(function*(n,e=!1){const t=n.app;TN(t);const r=Tr(t);let o,i=r.token;if(i&&!nv(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(nv(g)?i=g:yield PN(t,void 0))}if(!e&&i&&nv(i))return{token:i.token};let f,u=!1;if(kN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=CS(l6(t,yield NN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const g=yield r.exchangeTokenPromise;return yield PN(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield Tr(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?Tb.warn(g.message):Tb.error(g),o=g}return i?o?f=nv(i)?{token:i.token,internalError:o}:y6(o):(f={token:i.token},r.token=i,yield PN(t,i)):f=y6(o),u&&function _6(n,e){const t=Tr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),FN.apply(this,arguments)}function LN(){return LN=(0,U.Z)(function*(n){const e=n.app;TN(e);const{provider:t}=Tr(e);if(kN()){const r=yield NN(),{token:i}=yield CS(l6(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),LN.apply(this,arguments)}function BN(n,e){const t=Tr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function m6(n){const{app:e}=n,t=Tr(e);let r=t.tokenRefresher;r||(r=function VH(n){const{app:e}=n;return new EH((0,U.Z)(function*(){let r;if(r=Tr(e).token?yield IS(n,!0):yield IS(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},c6.RETRIAL_MIN_WAIT,c6.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function nv(n){return n.expireTimeMillis-Date.now()>0}function y6(n){return{token:BH(UH),error:n}}class jH{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Tr(this.app);for(const t of e)BN(this.app,t.next);return Promise.resolve()}}const M6="app-check-internal";!function tz(){Ji(new wr.wA("app-check",n=>function $H(n,e){return new jH(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(M6).initialize()})),Ji(new wr.wA(M6,n=>function HH(n){return{getToken:e=>IS(n,e),getLimitedUseToken:()=>function g6(n){return LN.apply(this,arguments)}(n),addTokenListener:e=>function UN(n,e,t,r){const{app:i}=n,o=Tr(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&nv(o.token)){const f=o.token;Promise.resolve().then(()=>{t({token:f.token}),m6(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>m6(n))}(n,"INTERNAL",e),removeTokenListener:e=>BN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Fi("@firebase/app-check","0.8.0")}();class hg{constructor(){return Rs("app-check")}}typeof window<"u"&&window,F(120);const S6=new c.OlP("angularfire2.auth.use-emulator"),A6=new c.OlP("angularfire2.auth.settings"),x6=new c.OlP("angularfire2.auth.tenant-id"),P6=new c.OlP("angularfire2.auth.langugage-code"),O6=new c.OlP("angularfire2.auth.use-device-language"),k6=new c.OlP("angularfire.auth.persistence"),N6=(n,e,t,r,i,o,u,f)=>(0,Xi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,o&&g.useDeviceLanguage(),u)for(const[v,b]of Object.entries(u))g.settings[v]=b;return f&&g.setPersistence(f),g},[t,r,i,o,u,f]);let zN=(()=>{class n{constructor(t,r,i,o,u,f,g,v,b,T,S,N){const q=new ki.x,Q=(0,ut.of)(void 0).pipe((0,Ed.Q)(u.outsideAngular),(0,En.w)(()=>o.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8661)))),(0,yt.U)(()=>(0,Xi.on)(t,o,r)),(0,yt.U)(J=>N6(J,o,f,v,b,T,g,S)),s6({bufferSize:1,refCount:!1}));if(Pi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ut.of)(null);else{Q.pipe(ur()).subscribe();const Ee=Q.pipe((0,En.w)(Ye=>Ye.getRedirectResult().then(gt=>gt,()=>null)),Hr,s6({bufferSize:1,refCount:!1})),ze=Q.pipe((0,En.w)(Ye=>new gi.y(gt=>({unsubscribe:o.runOutsideAngular(()=>Ye.onAuthStateChanged(At=>gt.next(At),At=>gt.error(At),()=>gt.complete()))})))),Ne=Q.pipe((0,En.w)(Ye=>new gi.y(gt=>({unsubscribe:o.runOutsideAngular(()=>Ye.onIdTokenChanged(At=>gt.next(At),At=>gt.error(At),()=>gt.complete()))}))));this.authState=Ee.pipe(o6(ze),(0,hp.R)(u.outsideAngular),(0,Ed.Q)(u.insideAngular)),this.user=Ee.pipe(o6(Ne),(0,hp.R)(u.outsideAngular),(0,Ed.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,En.w)(Ye=>Ye?(0,pn.D)(Ye.getIdToken()):(0,ut.of)(null))),this.idTokenResult=this.user.pipe((0,En.w)(Ye=>Ye?(0,pn.D)(Ye.getIdTokenResult()):(0,ut.of)(null))),this.credential=(0,cH.T)(Ee,q,this.authState.pipe(Cr(Ye=>!Ye))).pipe((0,yt.U)(Ye=>Ye?.user?Ye:null),(0,hp.R)(u.outsideAngular),(0,Ed.Q)(u.insideAngular))}return(0,Xi.pX)(this,Q,o,{spy:{apply:(J,Ee,ze)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&ze.then(Ne=>q.next(Ne))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xi.Dh),c.LFG(Xi.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Fl),c.LFG(S6,8),c.LFG(A6,8),c.LFG(x6,8),c.LFG(P6,8),c.LFG(O6,8),c.LFG(k6,8),c.LFG(hg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function R6(n,e){return function az(n,e=H0){return new gi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function GN(n,e){return R6(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function ES(n,e){return GN(n,e).pipe(tc(void 0),yc(),(0,yt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const g=i.find(b=>b.doc.ref.isEqual(u.ref)),v=t?.payload.docs.find(b=>b.ref.isEqual(u.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(u.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(u.metadata)||o.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),o}))}function F6(n,e,t){return ES(n,t).pipe(la((r,i)=>function lz(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function uz(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return qN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return qN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),(0,fO.x)(),(0,yt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function qN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function L6(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class U6{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ES(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(tc(void 0),yc(),Cr(([r,i])=>i.length>0||!r),(0,yt.U)(([r,i])=>i),Hr)}auditTrail(e){return this.stateChanges(e).pipe(la((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=L6(e);return F6(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return GN(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Hr)}get(e){return(0,pn.D)(this.query.get(e)).pipe(Hr)}add(e){return this.ref.add(e)}doc(e){return new B6(this.ref.doc(e),this.afs)}}class B6{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=V6(r,t);return new U6(i,o,this.afs)}snapshotChanges(){return function cz(n,e){return R6(n,e).pipe(tc(void 0),yc(),(0,yt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(Hr)}}class dz{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ES(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Cr(t=>t.length>0),Hr):ES(this.query,this.afs.schedulers.outsideAngular).pipe(Hr)}auditTrail(e){return this.stateChanges(e).pipe(la((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=L6(e);return F6(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return GN(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Hr)}get(e){return(0,pn.D)(this.query.get(e)).pipe(Hr)}}const hz=new c.OlP("angularfire2.enableFirestorePersistence"),fz=new c.OlP("angularfire2.firestore.persistenceSettings"),pz=new c.OlP("angularfire2.firestore.settings"),gz=new c.OlP("angularfire2.firestore.use-emulator");function V6(n,e=(t=>t)){return{query:e(n),ref:n}}let Mb=(()=>{class n{constructor(t,r,i,o,u,f,g,v,b,T,S,N,q,Q,J,Ee,ze){this.schedulers=g;const Ne=(0,Xi.on)(t,f,r),Ye=b;T&&N6(Ne,f,S,q,Q,J,N,Ee),[this.firestore,this.persistenceEnabled$]=(0,Xi.cc)(`${Ne.name}.firestore`,"AngularFirestore",Ne.name,()=>{const gt=f.runOutsideAngular(()=>Ne.firestore());if(o&&gt.settings(o),Ye&&gt.useEmulator(...Ye),i&&!Pi(u)){const At=()=>{try{return(0,pn.D)(gt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Lr){return typeof console<"u"&&console.warn(Lr),(0,ut.of)(!1)}};return[gt,f.runOutsideAngular(At)]}return[gt,(0,ut.of)(!1)]},[o,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:u}=V6(i,r),f=this.schedulers.ngZone.run(()=>o);return new U6(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),o=this.firestore.collectionGroup(t);return new dz(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new B6(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xi.Dh),c.LFG(Xi.xv,8),c.LFG(hz,8),c.LFG(pz,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Fl),c.LFG(fz,8),c.LFG(gz,8),c.LFG(zN,8),c.LFG(S6,8),c.LFG(A6,8),c.LFG(x6,8),c.LFG(P6,8),c.LFG(O6,8),c.LFG(k6,8),c.LFG(hg,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var j6=F(6710);let Xn=(()=>{class n{constructor(t,r){this.afAuth=t,this.db=r,this._loggedInUser$=new lr.X(document.cookie.match(/loggedInUser=(.*)/)?JSON.parse(document.cookie.match(/loggedInUser=(.*)/)[1]):null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,U.Z)(function*(){try{const r=yield t.afAuth.signInWithPopup(new j6.V);yield t._createOrUpdateUserOnDB(r);const i=yield t.afAuth.currentUser;i&&(document.cookie=`loggedInUser=${JSON.stringify(i)}; max-age=999999999999; path=/`,t._loggedInUser$.next(i))}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,U.Z)(function*(){try{const i=yield r.afAuth.signInWithEmailAndPassword(t.email,t.password);yield r._createOrUpdateUserOnDB(i,t);const o=yield r.afAuth.currentUser;o&&(document.cookie=`loggedInUser=${JSON.stringify(o)}; max-age=999999999999; path=/`,r._loggedInUser$.next(o))}catch(i){throw console.error(i.message),i.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,U.Z)(function*(){try{const i=yield r.afAuth.createUserWithEmailAndPassword(t.email,t.password);yield r._createOrUpdateUserOnDB(i,t);const o=yield r.afAuth.currentUser;o&&(document.cookie=`loggedInUser=${JSON.stringify(o)}; max-age=999999999999; path=/`,r._loggedInUser$.next(o))}catch(i){throw console.error(i.message),i.message}})()}logOut(){var t=this;return(0,U.Z)(function*(){try{yield t.afAuth.signOut(),document.cookie=`loggedInUser=${JSON.stringify(null)}; max-age=0; path=/`,t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}getLoggedInUser(){return this._loggedInUser$.value}_createOrUpdateUserOnDB(t,r=null){var i=this;return(0,U.Z)(function*(){var o;i.db.collection("users").doc(t.user.uid).get().pipe(kt(1)).subscribe({next:(o=(0,U.Z)(function*(u){if(u.exists){const f=u.data();f._id||(yield i.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),f.fullName||(yield i.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.user?.displayName})),f.imgUrl||(yield i.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),f.followedByUsers||(yield i.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),f.followingUsers||(yield i.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield i.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.user?.displayName,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[]})}),function(f){return o.apply(this,arguments)}),error:o=>{console.error(o)}})})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(zN),c.LFG(Mb))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vo=function(n){return n[n.Up=1]="Up",n[n.Down=3]="Down",n[n.Right=6]="Right",n[n.Left=8]="Left",n[n.UpMirrored=2]="UpMirrored",n[n.DownMirrored=4]="DownMirrored",n[n.LeftMirrored=5]="LeftMirrored",n[n.RightMirrored=7]="RightMirrored",n[n.Default=0]="Default",n[n.NotJpeg=-1]="NotJpeg",n[n.NotDefined=-2]="NotDefined",n}(vo||{});class jn{}jn.getOrientation=n=>new Promise((e,t)=>{try{const r=new FileReader;r.onload=()=>{const i=new DataView(r.result);if(!i.byteLength||65496!==i.getUint16(0,!1))return e(vo.NotDefined);const o=i.byteLength;let u=2;for(;u<o;){const f=i.getUint16(u,!1);if(u+=2,65505===f){if(1165519206!==i.getUint32(u+=2,!1))return e(vo.NotJpeg);const g=18761===i.getUint16(u+=6,!1);u+=i.getUint32(u+4,g);const v=i.getUint16(u,g);u+=2;for(let b=0;b<v;b++)if(274===i.getUint16(u+12*b,g))return e(i.getUint16(u+12*b+8,g))}else{if(65280!=(65280&f))break;u+=i.getUint16(u,!1)}}return e(vo.NotJpeg)},r.readAsArrayBuffer(n)}catch{return t(vo.Default)}}),jn.uploadFile=(n,e=!0,t=!1)=>new Promise(function(r,i){const o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),u=/iPad|iPhone|iPod/i.test(navigator.userAgent);Promise.resolve(o||u).then(f=>f?jn.generateUploadInputNative(window.document,e,t):jn.generateUploadInputRenderer(n,e,t)).then(f=>{const g=f?Array.from(f):[],v=g.map(S=>jn.getOrientation(S)),b=g.map(S=>jn.fileToDataURL(S));let T=[];Promise.all(v).then(S=>(T=S,Promise.all(b))).then(S=>{const N=S.map((q,Q)=>({image:q.dataUrl,orientation:T[Q],fileName:q.fileName}));r(e?N:N[0])})}).catch(f=>i(f))}),jn.fileToDataURL=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=i=>{e({dataUrl:i.target.result,fileName:n.name})};try{r.readAsDataURL(n)}catch(i){t(`ngx-image-compress - probably no file have been selected: ${i}`)}}),jn.generateUploadInputRenderer=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,o)=>{const u=n.createElement("input");n.setStyle(u,"display","none"),n.setProperty(u,"type","file"),n.setProperty(u,"accept","image/*"),e&&n.setProperty(u,"multiple","true"),n.listen(u,"click",f=>{f.target.value=""}),n.listen(u,"change",f=>{r=!0,i(f.target.files)}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{r||o(new Error("file upload on blur - no file selected"))},300)},{once:!0}),u.click()})},jn.generateUploadInputNative=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,o)=>{const u=n.createElement("input");u.id="upload-input"+new Date,u.style.display="none",u.setAttribute("type","file"),u.setAttribute("accept","image/*"),e&&u.setAttribute("multiple","true"),n.body.appendChild(u),u.addEventListener("change",()=>{r=!0,i(u.files),n.body.removeChild(n.getElementById(u.id))},{once:!0}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{!r&&n.getElementById(u.id)&&(o(new Error("file upload on blur - no file selected")),n.body.removeChild(n.getElementById(u.id)))},300)},{once:!0}),u.click()})},jn.compress=(n,e,t,r=50,i=50,o=0,u=0)=>new Promise(function(f,g){i/=100,r/=100;const v=new Image;v.onload=()=>{const b=t.createElement("canvas"),T=b.getContext("2d");if(!T)return g("No canvas context available");let S=v.naturalWidth,N=v.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(e===vo.Right||e===vo.Left)){const Ne=S;S=N,N=Ne}r=Math.min(r,o?o/S:1,u?u/N:1),b.width=S*r,b.height=N*r;const J=Math.PI/180;CSS.supports("image-orientation","from-image")||e===vo.Up?T.drawImage(v,0,0,b.width,b.height):e===vo.Right?(T.save(),T.rotate(90*J),T.translate(0,-b.width),T.drawImage(v,0,0,b.height,b.width),T.restore()):e===vo.Left?(T.save(),T.rotate(-90*J),T.translate(-b.width,0),T.drawImage(v,0,0,b.height,b.width),T.restore()):e===vo.Down?(T.save(),T.rotate(180*J),T.translate(-b.width,-b.height),T.drawImage(v,0,0,b.width,b.height),T.restore()):T.drawImage(v,0,0,b.width,b.height);const Ee=n.substr(5,n.split(";")[0].length-5),ze=b.toDataURL(Ee,i);f(ze)},v.onerror=b=>g(b),v.src=n}),jn.byteCount=n=>encodeURI(n).split(/%..|./).length-1,jn.getImageMaxSize=function(){var n=(0,U.Z)(function*(e,t,r,i=!1){const u=v=>(v/1024/1024).toFixed(2);t&&console.debug("NgxImageCompress - Opening upload window");const f=yield jn.uploadFile(r,!1,i);let g;for(let v=0;v<10;v++){const b=jn.byteCount(f.image);g=yield jn.compress(f.image,f.orientation,r,50,100);const T=jn.byteCount(g);if(console.debug("NgxImageCompress -","Compression from",u(b),"MB to",u(T),"MB"),T>=b)throw 0===v?(t&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",u(b),"MB large"),{...f,image:g}):(t&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",u(b),"MB large"),{...f,image:g});if(T<1024*e*1024)return t&&console.debug("NgxImageCompress -","Here your file",u(T),"MB large"),{...f,image:g};if(9===v)throw t&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",u(b),"MB large"),{...f,image:g};t&&console.debug("NgxImageCompress -","Reached",u(T),"MB large. Trying another time after",v+1,"times"),f.image=g}throw t&&console.debug("NgxImageCompress - Unexpected error"),{}});return function(e,t,r){return n.apply(this,arguments)}}();let $6=(()=>{class n{constructor(t){this.DOC_ORIENTATION=vo,this.render=t.createRenderer(null,null)}byteCount(t){return jn.byteCount(t)}getOrientation(t){return jn.getOrientation(t)}uploadFile(){return jn.uploadFile(this.render,!1)}uploadMultipleFiles(){return jn.uploadFile(this.render,!0)}uploadFileOrReject(){return jn.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return jn.uploadFile(this.render,!0,!0)}compressFile(t,r,i=50,o=50,u=0,f=0){return jn.compress(t,r,this.render,i,o,u,f)}uploadAndGetImageWithMaxSize(t=1,r=!1,i=!1){return jn.getImageMaxSize(t,r,this.render,i).then(o=>o.image).catch(o=>{throw o.image})}uploadAndGetImageWithMaxSizeAndMetas(t=1,r=!1,i=!1){return jn.getImageMaxSize(t,r,this.render,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),th=(()=>{class n{constructor(t,r,i){this.db=t,this.authService=r,this.imageCompress=i,this._posts$=new lr.X([]),this.posts$=this._posts$.asObservable()}getPosts(){var t=this;return(0,U.Z)(function*(){const r=t.authService.getLoggedInUser();if(!r)return;const i=t.db.collection("users").doc(r.uid).valueChanges().pipe(kt(1)),o=yield Dn(i);return t.db.collection("posts",f=>f.where("creatorId","in",[r.uid,...o.followingUsers]).orderBy("createdAt","desc")).valueChanges().pipe(Tn(function(){var f=(0,U.Z)(function*(g){t._posts$.next([...g])});return function(g){return f.apply(this,arguments)}}()))})()}toggleLike(t,r){var i=this;return(0,U.Z)(function*(){return t?yield i.addLike(r):yield i.removeLike(r)})()}addLike(t){var r=this;return(0,U.Z)(function*(){return new Promise(function(){var i=(0,U.Z)(function*(o,u){try{const f=r.authService.getLoggedInUser();t.likedByUsers=t.likedByUsers.map(g=>g._id),t.likedByUsers.push(f.uid),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...t.likedByUsers]}),o("Add like done")}catch(f){throw u("Add like failed:"),f}});return function(o,u){return i.apply(this,arguments)}}())})()}getPostsForUser(t){return this.db.collection("posts",i=>i.where("creatorId","==",t).orderBy("createdAt","desc")).valueChanges()}removeLike(t){var r=this;return(0,U.Z)(function*(){return new Promise(function(){var i=(0,U.Z)(function*(o,u){try{const g=r.authService.getLoggedInUser().uid;t.likedByUsers=t.likedByUsers.map(b=>b._id);const v=t.likedByUsers.findIndex(b=>b===g);t.likedByUsers.splice(v,1),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...t.likedByUsers]}),o("Remove like done")}catch(f){throw o("Remove like failed!"),f}});return function(o,u){return i.apply(this,arguments)}}())})()}uploadMedia(){var t=this;return(0,U.Z)(function*(){try{const{image:r,orientation:i}=yield t.imageCompress.uploadFile();return yield t.imageCompress.compressFile(r,i,50,50)}catch(r){return console.error(r),null}})()}createPost(t){var r=this;return(0,U.Z)(function*(){const i=r.authService.getLoggedInUser();t.creatorId=i.uid;const o=r.db.collection("users").doc(i.uid).valueChanges().pipe(kt(1)),u=yield Dn(o);t.creatorFullName=i.displayName||u.fullName,t.createdAt=Date.now();const f=yield r.db.collection("posts").add(t);yield r.db.collection("posts").doc(f.id).update({_id:f.id})})()}getCommentsByPostId(t){return this.db.collection("comments",i=>i.where("postId","==",t).where("isTopLevel","==",!0).orderBy("createdAt","desc")).valueChanges()}getRepliesForComment(t){return t.replies?.length||(t.replies=[""]),this.db.collection("comments",i=>i.where("isTopLevel","==",!1).where("_id","in",t.replies).orderBy("createdAt","desc")).valueChanges()}addComment(t,r){var i=this;return(0,U.Z)(function*(){t.createdAt=Date.now(),t.isTopLevel=!0;const o=yield i.db.collection("comments").add(t);yield i.db.collection("comments").doc(o.id).update({_id:o.id,parentId:o.id})})()}addReply(t){var r=this;return(0,U.Z)(function*(){t.createdAt=Date.now(),t.createdByUserId=t.createdByUserId._id,t.isTopLevel=!1;const i=r.db.collection("comments").doc(t.parentId).valueChanges().pipe(kt(1)),o=yield Dn(i);o.replies||(o.replies=[]);const u=yield r.db.collection("comments").add(t);yield r.db.collection("comments").doc(u.id).update({_id:u.id}),yield r.db.collection("comments").doc(t.parentId).update({replies:[...o.replies,u.id]})})()}getCommentById(t){return this.db.collection("comments").doc(t).valueChanges()}_makeId(t=5){let r="";for(let o=0;o<t;o++)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return r}_handleError(t){return console.log("err:",t),ca(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Mb),c.LFG(Xn),c.LFG($6))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TS(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let u,o=!1;n.subscribe({next:f=>{u=f,o=!0},error:i,complete:()=>{o?r(u):t?r(e.defaultValue):i(new so)}})})}const H6=function vz(n,e){return n===e||n!=n&&e!=e},MS=function Cz(n,e){for(var t=n.length;t--;)if(H6(n[t][0],e))return t;return-1};var Iz=Array.prototype.splice;function rv(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}rv.prototype.clear=function _z(){this.__data__=[],this.size=0},rv.prototype.delete=function bz(n){var e=this.__data__,t=MS(e,n);return!(t<0||(t==e.length-1?e.pop():Iz.call(e,t,1),--this.size,0))},rv.prototype.get=function Tz(n){var e=this.__data__,t=MS(e,n);return t<0?void 0:e[t][1]},rv.prototype.has=function Dz(n){return MS(this.__data__,n)>-1},rv.prototype.set=function Az(n,e){var t=this.__data__,r=MS(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const DS=rv,z6="object"==typeof global&&global&&global.Object===Object&&global;var Vz="object"==typeof self&&self&&self.Object===Object&&self;const Dc=z6||Vz||Function("return this")(),iv=Dc.Symbol;var G6=Object.prototype,Hz=G6.hasOwnProperty,zz=G6.toString,Db=iv?iv.toStringTag:void 0;var Zz=Object.prototype.toString;var q6=iv?iv.toStringTag:void 0;const Sb=function Xz(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":q6&&q6 in Object(n)?function Gz(n){var e=Hz.call(n,Db),t=n[Db];try{n[Db]=void 0;var r=!0}catch{}var i=zz.call(n);return r&&(e?n[Db]=t:delete n[Db]),i}(n):function Kz(n){return Zz.call(n)}(n)},Ab=function eG(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},W6=function sG(n){if(!Ab(n))return!1;var e=Sb(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},WN=Dc["__core-js_shared__"];var Z6=function(){var n=/[^.]+$/.exec(WN&&WN.keys&&WN.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();var uG=Function.prototype.toString;const fg=function dG(n){if(null!=n){try{return uG.call(n)}catch{}try{return n+""}catch{}}return""};var fG=/^\[object .+?Constructor\]$/,yG=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const CG=function vG(n){return!(!Ab(n)||function aG(n){return!!Z6&&Z6 in n}(n))&&(W6(n)?yG:fG).test(fg(n))},pg=function bG(n,e){var t=function wG(n,e){return n?.[e]}(n,e);return CG(t)?t:void 0},xb=pg(Dc,"Map"),Pb=pg(Object,"create");var OG=Object.prototype.hasOwnProperty;var FG=Object.prototype.hasOwnProperty;function sv(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}sv.prototype.clear=function MG(){this.__data__=Pb?Pb(null):{},this.size=0},sv.prototype.delete=function SG(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},sv.prototype.get=function kG(n){var e=this.__data__;if(Pb){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return OG.call(e,n)?e[n]:void 0},sv.prototype.has=function LG(n){var e=this.__data__;return Pb?void 0!==e[n]:FG.call(e,n)},sv.prototype.set=function VG(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Pb&&void 0===e?"__lodash_hash_undefined__":e,this};const K6=sv,SS=function qG(n,e){var t=n.__data__;return function zG(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function ov(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ov.prototype.clear=function $G(){this.size=0,this.__data__={hash:new K6,map:new(xb||DS),string:new K6}},ov.prototype.delete=function WG(n){var e=SS(this,n).delete(n);return this.size-=e?1:0,e},ov.prototype.get=function KG(n){return SS(this,n).get(n)},ov.prototype.has=function QG(n){return SS(this,n).has(n)},ov.prototype.set=function XG(n,e){var t=SS(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const tq=ov;function av(n){var e=this.__data__=new DS(n);this.size=e.size}av.prototype.clear=function Pz(){this.__data__=new DS,this.size=0},av.prototype.delete=function kz(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},av.prototype.get=function Rz(n){return this.__data__.get(n)},av.prototype.has=function Lz(n){return this.__data__.has(n)},av.prototype.set=function rq(n,e){var t=this.__data__;if(t instanceof DS){var r=t.__data__;if(!xb||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new tq(r)}return t.set(n,e),this.size=t.size,this};const sq=av;var cq=function(){try{var n=pg(Object,"defineProperty");return n({},"",{}),n}catch{}}();const Y6=cq,Q6=function lq(n,e,t){"__proto__"==e&&Y6?Y6(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var dq=Object.prototype.hasOwnProperty;const J6=function hq(n,e,t){var r=n[e];(!dq.call(n,e)||!H6(r,t)||void 0===t&&!(e in n))&&Q6(n,e,t)},AS=function fq(n,e,t,r){var i=!t;t||(t={});for(var o=-1,u=e.length;++o<u;){var f=e[o],g=r?r(t[f],n[f],f,t,n):void 0;void 0===g&&(g=n[f]),i?Q6(t,f,g):J6(t,f,g)}return t},Ob=function mq(n){return null!=n&&"object"==typeof n},X6=function yq(n){return Ob(n)&&"[object Arguments]"==Sb(n)};var e5=Object.prototype,vq=e5.hasOwnProperty,Cq=e5.propertyIsEnumerable,wq=X6(function(){return arguments}())?X6:function(n){return Ob(n)&&vq.call(n,"callee")&&!Cq.call(n,"callee")};const Iq=wq,ZN=Array.isArray;var t5="object"==typeof exports&&exports&&!exports.nodeType&&exports,n5=t5&&"object"==typeof module&&module&&!module.nodeType&&module,r5=n5&&n5.exports===t5?Dc.Buffer:void 0;const i5=(r5?r5.isBuffer:void 0)||function Eq(){return!1};var xq=/^(?:0|[1-9]\d*)$/;const Oq=function Pq(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&xq.test(n))&&n>-1&&n%1==0&&n<e},s5=function Nq(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991};var er={};er["[object Float32Array]"]=er["[object Float64Array]"]=er["[object Int8Array]"]=er["[object Int16Array]"]=er["[object Int32Array]"]=er["[object Uint8Array]"]=er["[object Uint8ClampedArray]"]=er["[object Uint16Array]"]=er["[object Uint32Array]"]=!0,er["[object Arguments]"]=er["[object Array]"]=er["[object ArrayBuffer]"]=er["[object Boolean]"]=er["[object DataView]"]=er["[object Date]"]=er["[object Error]"]=er["[object Function]"]=er["[object Map]"]=er["[object Number]"]=er["[object Object]"]=er["[object RegExp]"]=er["[object Set]"]=er["[object String]"]=er["[object WeakMap]"]=!1;const KN=function aW(n){return function(e){return n(e)}};var o5="object"==typeof exports&&exports&&!exports.nodeType&&exports,kb=o5&&"object"==typeof module&&module&&!module.nodeType&&module,YN=kb&&kb.exports===o5&&z6.process;const cv=function(){try{return kb&&kb.require&&kb.require("util").types||YN&&YN.binding&&YN.binding("util")}catch{}}();var a5=cv&&cv.isTypedArray;const dW=a5?KN(a5):function sW(n){return Ob(n)&&s5(n.length)&&!!er[Sb(n)]};var fW=Object.prototype.hasOwnProperty;const c5=function pW(n,e){var t=ZN(n),r=!t&&Iq(n),i=!t&&!r&&i5(n),o=!t&&!r&&!i&&dW(n),u=t||r||i||o,f=u?function pq(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],g=f.length;for(var v in n)(e||fW.call(n,v))&&(!u||!("length"==v||i&&("offset"==v||"parent"==v)||o&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||Oq(v,g)))&&f.push(v);return f};var gW=Object.prototype;const QN=function mW(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||gW)},l5=function _W(n,e){return function(t){return n(e(t))}},vW=l5(Object.keys,Object);var wW=Object.prototype.hasOwnProperty;const u5=function EW(n){return null!=n&&s5(n.length)&&!W6(n)},JN=function TW(n){return u5(n)?c5(n):function IW(n){if(!QN(n))return vW(n);var e=[];for(var t in Object(n))wW.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n)};var PW=Object.prototype.hasOwnProperty;const kW=function OW(n){if(!Ab(n))return function SW(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=QN(n),t=[];for(var r in n)"constructor"==r&&(e||!PW.call(n,r))||t.push(r);return t},XN=function NW(n){return u5(n)?c5(n,!0):kW(n)};var d5="object"==typeof exports&&exports&&!exports.nodeType&&exports,h5=d5&&"object"==typeof module&&module&&!module.nodeType&&module,f5=h5&&h5.exports===d5?Dc.Buffer:void 0,p5=f5?f5.allocUnsafe:void 0;const g5=function zW(){return[]};var qW=Object.prototype.propertyIsEnumerable,m5=Object.getOwnPropertySymbols,WW=m5?function(n){return null==n?[]:(n=Object(n),function $W(n,e){for(var t=-1,r=null==n?0:n.length,i=0,o=[];++t<r;){var u=n[t];e(u,t,n)&&(o[i++]=u)}return o}(m5(n),function(e){return qW.call(n,e)}))}:g5;const eR=WW,_5=function YW(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n},y5=l5(Object.getPrototypeOf,Object);var XW=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)_5(e,eR(n)),n=y5(n);return e}:g5;const v5=XW,C5=function nZ(n,e,t){var r=e(n);return ZN(n)?r:_5(r,t(n))},iZ=function rZ(n){return C5(n,JN,eR)},oZ=function sZ(n){return C5(n,XN,v5)},tR=pg(Dc,"DataView"),nR=pg(Dc,"Promise"),rR=pg(Dc,"Set"),iR=pg(Dc,"WeakMap");var w5="[object Map]",I5="[object Promise]",b5="[object Set]",E5="[object WeakMap]",T5="[object DataView]",hZ=fg(tR),fZ=fg(xb),pZ=fg(nR),gZ=fg(rR),mZ=fg(iR),gg=Sb;(tR&&gg(new tR(new ArrayBuffer(1)))!=T5||xb&&gg(new xb)!=w5||nR&&gg(nR.resolve())!=I5||rR&&gg(new rR)!=b5||iR&&gg(new iR)!=E5)&&(gg=function(n){var e=Sb(n),t="[object Object]"==e?n.constructor:void 0,r=t?fg(t):"";if(r)switch(r){case hZ:return T5;case fZ:return w5;case pZ:return I5;case gZ:return b5;case mZ:return E5}return e});const sR=gg;var yZ=Object.prototype.hasOwnProperty;const M5=Dc.Uint8Array,oR=function IZ(n){var e=new n.constructor(n.byteLength);return new M5(e).set(new M5(n)),e};var TZ=/\w*$/;var D5=iv?iv.prototype:void 0,S5=D5?D5.valueOf:void 0;const JZ=function QZ(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return oR(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function bZ(n,e){var t=e?oR(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function xZ(n,e){var t=e?oR(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function MZ(n){var e=new n.constructor(n.source,TZ.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function SZ(n){return S5?Object(S5.call(n)):{}}(n)}};var A5=Object.create,XZ=function(){function n(){}return function(e){if(!Ab(e))return{};if(A5)return A5(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const eK=XZ;var x5=cv&&cv.isMap;const aK=x5?KN(x5):function iK(n){return Ob(n)&&"[object Map]"==sR(n)};var P5=cv&&cv.isSet;const hK=P5?KN(P5):function lK(n){return Ob(n)&&"[object Set]"==sR(n)};var O5="[object Arguments]",k5="[object Function]",N5="[object Object]",$n={};$n[O5]=$n["[object Array]"]=$n["[object ArrayBuffer]"]=$n["[object DataView]"]=$n["[object Boolean]"]=$n["[object Date]"]=$n["[object Float32Array]"]=$n["[object Float64Array]"]=$n["[object Int8Array]"]=$n["[object Int16Array]"]=$n["[object Int32Array]"]=$n["[object Map]"]=$n["[object Number]"]=$n[N5]=$n["[object RegExp]"]=$n["[object Set]"]=$n["[object String]"]=$n["[object Symbol]"]=$n["[object Uint8Array]"]=$n["[object Uint8ClampedArray]"]=$n["[object Uint16Array]"]=$n["[object Uint32Array]"]=!0,$n["[object Error]"]=$n[k5]=$n["[object WeakMap]"]=!1;const BK=function xS(n,e,t,r,i,o){var u,f=1&e,g=2&e,v=4&e;if(t&&(u=i?t(n,r,i,o):t(n)),void 0!==u)return u;if(!Ab(n))return n;var b=ZN(n);if(b){if(u=function vZ(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&yZ.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!f)return function VW(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(n,u)}else{var T=sR(n),S=T==k5||"[object GeneratorFunction]"==T;if(i5(n))return function UW(n,e){if(e)return n.slice();var t=n.length,r=p5?p5(t):new n.constructor(t);return n.copy(r),r}(n,f);if(T==N5||T==O5||S&&!i){if(u=g||S?{}:function tK(n){return"function"!=typeof n.constructor||QN(n)?{}:eK(y5(n))}(n),!f)return g?function eZ(n,e){return AS(n,v5(n),e)}(n,function RW(n,e){return n&&AS(e,XN(e),n)}(u,n)):function ZW(n,e){return AS(n,eR(n),e)}(n,function MW(n,e){return n&&AS(e,JN(e),n)}(u,n))}else{if(!$n[T])return i?n:{};u=JZ(n,T,f)}}o||(o=new sq);var N=o.get(n);if(N)return N;o.set(n,u),hK(n)?n.forEach(function(J){u.add(xS(J,e,t,J,n,o))}):aK(n)&&n.forEach(function(J,Ee){u.set(Ee,xS(J,e,t,Ee,n,o))});var Q=b?void 0:(v?g?oZ:iZ:g?XN:JN)(n);return function oq(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(Q||n,function(J,Ee){Q&&(J=n[Ee=J]),J6(u,Ee,xS(J,e,t,Ee,n,o))}),u},Nb=function $K(n){return BK(n,5)};let Sc=(()=>{class n{constructor(t,r,i){this.authService=t,this.db=r,this.imageCompress=i,this._isSearchModalShown$=new lr.X(!1),this.isSearchModalShown$=this._isSearchModalShown$.asObservable()}toggleFollow(t,r){var i=this;return(0,U.Z)(function*(){return new Promise(t?function(){var o=(0,U.Z)(function*(u){yield i.addFollow(r),u("Add follow completed successfully!")});return function(u){return o.apply(this,arguments)}}():function(){var o=(0,U.Z)(function*(u){yield i.removeFollow(r),u("Remove follow completed successfully!")});return function(u){return o.apply(this,arguments)}}())})()}addFollow(t){var r=this;return(0,U.Z)(function*(){var g;r.authService.loggedInUser$.pipe(kt(1)).subscribe({next:(g=(0,U.Z)(function*(v){yield r.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,v?.uid]})}),function(b){return g.apply(this,arguments)})});const i=r.authService.loggedInUser$.pipe(kt(1)),o=yield TS(i),u=r.db.collection("users").doc(o.uid).valueChanges().pipe(kt(1)),f=yield TS(u);yield r.db.collection("users").doc(f._id).update({followingUsers:[...f.followingUsers,t._id]})})()}removeFollow(t){var r=this;return(0,U.Z)(function*(){const i=r.authService.loggedInUser$.pipe(kt(1)),o=yield TS(i),u=r.db.collection("users").doc(o.uid).valueChanges().pipe(kt(1)),f=yield TS(u),g=Nb(t.followedByUsers),v=g.findIndex(T=>T===o.uid);if(-1===v)return;g.splice(v,1),yield r.db.collection("users").doc(t._id).update({followedByUsers:g});const b=f.followingUsers.findIndex(T=>T===t._id);f.followingUsers.splice(b,1),yield r.db.collection("users").doc(f._id).update({followingUsers:f.followingUsers})})()}getUsers(t){return this.db.collection("users").valueChanges().pipe((0,yt.U)(r=>{const i=new RegExp(t.account,"i");return r.filter(o=>i.test(o.fullName))}))}uploadMedia(){var t=this;return(0,U.Z)(function*(){try{const{image:r,orientation:i}=yield t.imageCompress.uploadFile();return yield t.imageCompress.compressFile(r,i,50,50)}catch(r){return console.error(r),null}})()}updateUserProfile(t){this.db.collection("users").doc(t._id).set(t)}setIsSearchModalShown(t){this._isSearchModalShown$.next(t)}getLikedByUsers(t){return t=t.map(i=>i._id),this.db.collection("users",i=>i.where("_id","in",t)).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Xn),c.LFG(Mb),c.LFG($6))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aR=(()=>{class n{constructor(t){this.db=t}addNotification(t,r){var i=this;return(0,U.Z)(function*(){"likeAction"===r&&(t.message="liked your post"),t.createdAt=Date.now();const o=yield i.db.collection("notifications").add(t);yield i.db.collection("notifications").doc(o.id).update({_id:o.id})})()}getNotificationsForUser(t){return this.db.collection("notifications",r=>r.where("recipient","==",t).orderBy("createdAt","desc")).valueChanges()}markAsRead(t){var r=this;return(0,U.Z)(function*(){yield r.db.doc(`notifications/${t}`).update({read:!0})})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Mb))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function R5(...n){const e=(0,ro.jO)(n),{args:t,keys:r}=Cn(n),i=new gi.y(o=>{const{length:u}=t;if(!u)return void o.complete();const f=new Array(u);let g=u,v=u;for(let b=0;b<u;b++){let T=!1;(0,Lu.Xf)(t[b]).subscribe((0,mi.x)(o,S=>{T||(T=!0,v--),f[b]=S},()=>g--,void 0,()=>{(!g||!T)&&(v||o.next(r?io(r,f):f),o.complete())}))}});return e?i.pipe(el(e)):i}function HK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",3),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleFollow())}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw(2);c.xp6(1),c.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function zK(n,e){if(1&n&&(c.TgZ(0,"div",1)(1,"ul"),c.YNc(2,HK,2,1,"li",2),c.qZA()()),2&n){const t=c.oxw();c.xp6(2),c.Q6J("ngIf",t.creator._id!==t.loggedInUser.uid)}}let GK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new c.vpe,this.isFollowClicked=!1,this.isMoreOptionsModalInited=!1}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=t.authService.getUserById(t.creator._id),i=yield Dn(r),o=t.authService.getLoggedInUser();t.loggedInUser=o,t.isFollowClicked=!!i.followedByUsers.find(u=>u===o.uid),t.isMoreOptionsModalInited=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.creator,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Xn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["more-options-modal"]],inputs:{post:"post",creator:"creator"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","more-options-modal",4,"ngIf"],[1,"more-options-modal"],[3,"click",4,"ngIf"],[3,"click"]],template:function(r,i){1&r&&c.YNc(0,zK,3,1,"div",0),2&r&&c.Q6J("ngIf",i.loggedInUser)},dependencies:[vn],styles:["[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;right:0;top:30px;z-index:20;background-color:#262626;width:-moz-fit-content;width:fit-content;min-height:50px;padding-inline:1.5em;padding-block:1em;color:#f5f5f5;font-size:17px;border-radius:.4em}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})(),PS=(()=>{class n{transform(t){const i=Math.floor(Date.now()/1e3)-t/1e3;return i<60?"just now":i<3600?`${Math.floor(i/60)}m`:i<86400?`${Math.floor(i/3600)}h`:`${Math.floor(i/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=c.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function qK(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"more-options-modal",10),c.NdJ("onToggleFollow",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleFollow.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("post",t.post)("creator",t.creator)}}function WK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",1)(1,"div",2),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickUserImg.emit(i.creator._id))}),c._UZ(2,"img",3),c.TgZ(3,"h5"),c._uU(4),c.TgZ(5,"span"),c._uU(6),c.ALo(7,"timeAgo"),c.qZA()()(),c.TgZ(8,"button",4),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isMoreOptionsModalShown=!i.isMoreOptionsModalShown)}),c.O4$(),c.TgZ(9,"svg",5),c._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),c.qZA(),c.YNc(13,qK,1,2,"more-options-modal",9),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(2),c.Q6J("src",t.creator.imgUrl,c.LSH),c.xp6(2),c.hij(" ",t.creator.fullName," "),c.xp6(2),c.hij("\u2022 ",c.lcZ(7,4,t.post.createdAt),""),c.xp6(7),c.Q6J("ngIf",t.isMoreOptionsModalShown)}}let ZK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new c.vpe,this.onClickUserImg=new c.vpe,this.isMoreOptionsModalShown=!1}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Xn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post",isComponentInitialized:"isComponentInitialized"},outputs:{onToggleFollow:"onToggleFollow",onClickUserImg:"onClickUserImg"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator",3,"click"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options",3,"click"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"],[3,"post","creator","onToggleFollow",4,"ngIf"],[3,"post","creator","onToggleFollow"]],template:function(r,i){1&r&&c.YNc(0,WK,14,6,"div",0),2&r&&c.Q6J("ngIf",i.creator&&i.isComponentInitialized)},dependencies:[vn,GK,PS],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none;cursor:pointer}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em;cursor:pointer}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center;position:relative;cursor:pointer}"]})}return n})();const KK=function(n,e){return{"btn-toggle-follow":!0,following:n,disabled:e}};function YK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",4),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleFollow())}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("ngClass",c.WLB(3,KK,t.isFollowClicked,t.isToggleFollowProcessing))("disabled",t.isToggleFollowProcessing),c.xp6(1),c.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function QK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"img",1),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickUserImg.emit(i.user._id))}),c.qZA(),c.TgZ(2,"h4",2),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickUserImg.emit(i.user._id))}),c._uU(3),c.qZA(),c.YNc(4,YK,2,6,"button",3),c.qZA()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("src",t.user.imgUrl,c.LSH),c.xp6(2),c.Oqu(t.user.fullName),c.xp6(1),c.Q6J("ngIf",t.user._id!==t.loggedInUser.uid)}}let JK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new c.vpe,this.onClickUserImg=new c.vpe,this.isFollowClicked=!1,this.isComponentInitialized=!1,this.isToggleFollowProcessing=!1}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=t.authService.getUserById(t.user._id),i=yield Dn(r),o=t.authService.getLoggedInUser();t.loggedInUser=o,t.isFollowClicked=!!i.followedByUsers.find(u=>u===o.uid),t.isComponentInitialized=!0})()}ngOnChanges(t){t.user.firstChange||(this.isFollowClicked=!!this.user.followedByUsers.find(r=>r===this.loggedInUser?.uid))}toggleFollow(){this.isToggleFollowProcessing||(this.isToggleFollowProcessing=!0,this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({user:this.user,isFollowClicked:this.isFollowClicked}),this.isToggleFollowProcessing=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Xn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow",onClickUserImg:"onClickUserImg"},features:[c.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["alt","loggedInUser",3,"src","click"],[3,"click"],[3,"ngClass","disabled","click",4,"ngIf"],[3,"ngClass","disabled","click"]],template:function(r,i){1&r&&c.YNc(0,QK,5,3,"li",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Di,vn],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:45px;border-radius:50%;flex:1;cursor:pointer}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;flex:2;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function XK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"liked-by-user-row",7),c.NdJ("onToggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleFollow.emit(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onClickUserImg.emit(i))}),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw();c.Q6J("post",r.post)("user",t)}}let eY=(()=>{class n{constructor(t,r){this.renderer=t,this.userService=r,this.onToggleLikedByUsersModal=new c.vpe,this.onToggleFollow=new c.vpe,this.onCloseLikedByUsers=new c.vpe,this.onClickUserImg=new c.vpe}ngOnInit(){this.renderer.addClass(document.body,"body-unscrollable"),this.usersSubscription=this.userService.getLikedByUsers(this.post.likedByUsers).subscribe({next:t=>{this.post.likedByUsers=t}})}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}trackByUserId(t,r){return r._id}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable"),this.usersSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj),c.Y36(Sc))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow",onCloseLikedByUsers:"onCloseLikedByUsers",onClickUserImg:"onClickUserImg"},decls:12,vars:2,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow","onClickUserImg",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","user","onToggleFollow","onClickUserImg"]],template:function(r,i){1&r&&(c.TgZ(0,"article",0)(1,"div",1)(2,"h3"),c._uU(3,"Likes"),c.qZA(),c.TgZ(4,"button",2),c.NdJ("click",function(){return i.toggleLikedByUsersModal(),i.onCloseLikedByUsers.emit(!1)}),c.O4$(),c.TgZ(5,"svg",3)(6,"title"),c._uU(7,"Close"),c.qZA(),c._UZ(8,"polyline",4)(9,"line",5),c.qZA()()(),c.kcU(),c.TgZ(10,"ul"),c.YNc(11,XK,1,2,"liked-by-user-row",6),c.qZA()()),2&r&&(c.xp6(11),c.Q6J("ngForOf",i.post.likedByUsers)("ngForTrackBy",i.trackByUserId))},dependencies:[Si,JK],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:calc(100vw - 70px);max-width:27em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3.5em;position:relative}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1.2em;top:50%;transform:translateY(-50%);cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em;max-height:16.8em;overflow:auto}"]})}return n})(),F5=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj),c.Y36(c.SBq))};static#t=this.\u0275dir=c.lG2({type:n})}return n})(),mg=(()=>{class n extends F5{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=c.n5z(n)))(i||n)}}();static#t=this.\u0275dir=c.lG2({type:n,features:[c.qOj]})}return n})();const Ac=new c.OlP("NgValueAccessor"),nY={provide:Ac,useExisting:(0,c.Gpc)(()=>Ra),multi:!0},iY=new c.OlP("CompositionEventMode");let Ra=(()=>{class n extends F5{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function rY(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(iY,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&c.NdJ("input",function(u){return i._handleInput(u.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(u){return i._compositionEnd(u.target.value)})},features:[c._Bn([nY]),c.qOj]})}return n})();const is=new c.OlP("NgValidators"),rh=new c.OlP("NgAsyncValidators");function W5(n){return null!=n}function Z5(n){return(0,c.QGY)(n)?(0,pn.D)(n):n}function K5(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Y5(n,e){return e.map(t=>t(n))}function Q5(n){return n.map(e=>function oY(n){return!n.validate}(e)?e:t=>e.validate(t))}function cR(n){return null!=n?function J5(n){if(!n)return null;const e=n.filter(W5);return 0==e.length?null:function(t){return K5(Y5(t,e))}}(Q5(n)):null}function lR(n){return null!=n?function X5(n){if(!n)return null;const e=n.filter(W5);return 0==e.length?null:function(t){return R5(Y5(t,e).map(Z5)).pipe((0,yt.U)(K5))}}(Q5(n)):null}function eB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function uR(n){return n?Array.isArray(n)?n:[n]:[]}function kS(n,e){return Array.isArray(n)?n.includes(e):n===e}function rB(n,e){const t=uR(e);return uR(n).forEach(i=>{kS(t,i)||t.push(i)}),t}function iB(n,e){return uR(e).filter(t=>!kS(n,t))}class sB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _s extends sB{get formDirective(){return null}get path(){return null}}class ih extends sB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class oB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ou=(()=>{class n extends oB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ih,2))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&c.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[c.qOj]})}return n})(),_g=(()=>{class n extends oB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(_s,10))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&c.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[c.qOj]})}return n})();const Rb="VALID",RS="INVALID",lv="PENDING",Fb="DISABLED";function fR(n){return(FS(n)?n.validators:n)||null}function pR(n,e){return(FS(e)?e.asyncValidators:n)||null}function FS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class uB{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Rb}get invalid(){return this.status===RS}get pending(){return this.status==lv}get disabled(){return this.status===Fb}get enabled(){return this.status!==Fb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(rB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iB(e,this._rawAsyncValidators))}hasValidator(e){return kS(this._rawValidators,e)}hasAsyncValidator(e){return kS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=lv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Fb,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Rb,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rb||this.status===lv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fb:Rb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=lv,this._hasOwnPendingAsyncValidator=!0;const t=Z5(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Fb:this.errors?RS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lv)?lv:this._anyControlsHaveStatus(RS)?RS:Rb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){FS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function uY(n){return Array.isArray(n)?cR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function dY(n){return Array.isArray(n)?lR(n):n||null}(this._rawAsyncValidators)}}class gR extends uB{constructor(e,t,r){super(fR(t),pR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function lB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new c.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function cB(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[t])throw new c.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const yg=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Lb}),Lb="always";function Ub(n,e,t=Lb){mR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function pY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&dB(n,e)})}(n,e),function mY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function gY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&dB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function fY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function BS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mR(n,e){const t=function tB(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(eB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function nB(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(eB(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();BS(e._rawValidators,i),BS(e._rawAsyncValidators,i)}function dB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const wY={provide:_s,useExisting:(0,c.Gpc)(()=>au)},Bb=(()=>Promise.resolve())();let au=(()=>{class n extends _s{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new gR({},cR(t),lR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Bb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ub(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Bb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Bb.then(()=>{const r=this._findContainer(t.path),i=new gR({});(function hB(n,e){mR(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Bb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Bb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function fB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(is,10),c.Y36(rh,10),c.Y36(yg,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&c.NdJ("submit",function(u){return i.onSubmit(u)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([wY]),c.qOj]})}return n})();function pB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function gB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const mB=class extends uB{constructor(e=null,t,r){super(fR(t),pR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),FS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=gB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){gB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},EY={provide:ih,useExisting:(0,c.Gpc)(()=>xc)},vB=(()=>Promise.resolve())();let xc=(()=>{class n extends ih{constructor(t,r,i,o,u,f){super(),this._changeDetectorRef=u,this.callSetDisabledState=f,this.control=new mB,this._registered=!1,this.name="",this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function vR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Ra?t=o:function vY(n){return Object.getPrototypeOf(n.constructor)===mg}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function yR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ub(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){vB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,c.VuI)(r);vB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function LS(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(_s,9),c.Y36(is,10),c.Y36(rh,10),c.Y36(Ac,10),c.Y36(c.sBO,8),c.Y36(yg,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([EY]),c.qOj,c.TTD]})}return n})(),vg=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),wB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();const CR=new c.OlP("NgModelWithFormControlWarning");let UB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[wB]})}return n})(),KY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yg,useValue:t.callSetDisabledState??Lb}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[UB]})}return n})(),YY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:CR,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:yg,useValue:t.callSetDisabledState??Lb}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[UB]})}return n})();function QY(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"form",1),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.addReply())}),c._UZ(1,"img",2),c.TgZ(2,"input",3),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.reply.message=i)}),c.qZA(),c.TgZ(3,"button",4),c._uU(4,"Post"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("src",t.reply.createdByUserId.imgUrl,c.LSH),c.xp6(1),c.MGl("placeholder","Add a reply to ",t.comment.createdByUserId.fullName,"..."),c.Q6J("ngModel",t.reply.message)}}let JY=(()=>{class n{constructor(t,r){this.postService=t,this.authService=r,this.onAddReply=new c.vpe,this.onReplyFormInitialized=new c.vpe,this.reply={_id:"",parentId:"",isTopLevel:!1,postId:"",createdByUserId:this.authService.getLoggedInUser().uid,message:"",createdAt:0},this.isReplyFormInitialized=!1}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=t.postService.getCommentById(t.comment._id).pipe(kt(1));t.comment=yield Dn(r);const i=t.authService.getUserById(t.comment.createdByUserId);t.comment.createdByUserId=yield Dn(i),t.reply.postId=t.comment.postId,t.reply.parentId=t.comment.parentId;const o=t.authService.getUserById(t.reply.createdByUserId);t.reply.createdByUserId=yield Dn(o),t.isReplyFormInitialized=!0,t.onReplyFormInitialized.emit(!0)})()}addReply(){this.reply.message&&(this.onAddReply.emit({...this.reply}),this.reply.message="")}ngOnDestroy(){this.onReplyFormInitialized.emit(!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(th),c.Y36(Xn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["reply-form"]],inputs:{comment:"comment"},outputs:{onAddReply:"onAddReply",onReplyFormInitialized:"onReplyFormInitialized"},decls:1,vars:1,consts:[[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["alt","user",3,"src"],["type","text","name","reply-message",3,"ngModel","placeholder","ngModelChange"],["type","submit"]],template:function(r,i){1&r&&c.YNc(0,QY,5,3,"form",0),2&r&&c.Q6J("ngIf",i.isReplyFormInitialized)},dependencies:[vn,vg,Ra,ou,_g,xc,au],styles:["[_nghost-%COMP%]{position:fixed;bottom:61.5px;left:0;z-index:100;background-color:#000;height:3.5em;width:100%;padding-inline:25px}.reply-form-initialized[_nghost-%COMP%]{z-index:130}@media (min-width: 600px){[_nghost-%COMP%]{width:500px;left:unset;bottom:27px}}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;height:100%}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;color:#f5f5f5;height:100%;background-color:#000;border:none;flex:3}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f5f5f5}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:100%;border:none;cursor:pointer;background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;text-align:right;flex:1}"]})}return n})(),XY=(()=>{class n{constructor(t){this.router=t,this.onNavigateUserProfileFromReply=new c.vpe}navigateToUserProfile(){this.router.navigateByUrl(`profile/${this.reply.createdByUserId._id}`),this.onNavigateUserProfileFromReply.emit()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Mn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["reply-preview"]],inputs:{reply:"reply"},outputs:{onNavigateUserProfileFromReply:"onNavigateUserProfileFromReply"},decls:11,vars:6,consts:[["alt","user",3,"src","click"],[1,"content"],[1,"inner-container"],[1,"fullname",3,"click"],[1,"created-at"]],template:function(r,i){1&r&&(c.TgZ(0,"li")(1,"img",0),c.NdJ("click",function(){return i.navigateToUserProfile()}),c.qZA(),c.TgZ(2,"div",1)(3,"div",2)(4,"span",3),c.NdJ("click",function(){return i.navigateToUserProfile()}),c._uU(5),c.qZA(),c.TgZ(6,"span",4),c._uU(7),c.ALo(8,"timeAgo"),c.qZA()(),c.TgZ(9,"p"),c._uU(10),c.qZA()()()),2&r&&(c.xp6(1),c.Q6J("src",i.reply.createdByUserId.imgUrl,c.LSH),c.xp6(4),c.Oqu(i.reply.createdByUserId.fullName),c.xp6(2),c.Oqu(c.lcZ(8,4,i.reply.createdAt)),c.xp6(3),c.hij(" ",i.reply.message," "))},dependencies:[PS],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.6em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;border-radius:50%}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#919191;font-size:13px}"]})}return n})();function eQ(n,e){1&n&&c._UZ(0,"reply-preview",3),2&n&&c.Q6J("reply",e.$implicit)}function tQ(n,e){if(1&n&&(c.TgZ(0,"ul",1),c.YNc(1,eQ,1,1,"reply-preview",2),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.replies)("ngForTrackBy",t.trackByReplyId)}}let nQ=(()=>{class n{trackByReplyId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["reply-list"]],inputs:{replies:"replies"},decls:1,vars:1,consts:[["class","replies",4,"ngIf"],[1,"replies"],[3,"reply",4,"ngFor","ngForOf","ngForTrackBy"],[3,"reply"]],template:function(r,i){1&r&&c.YNc(0,tQ,2,2,"ul",0),2&r&&c.Q6J("ngIf",null==i.replies?null:i.replies.length)},dependencies:[Si,vn,XY],styles:["[_nghost-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.3em;padding-inline-start:2.7em}"]})}return n})();function rQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",12),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onClickReply())}),c._uU(1," Reply "),c.qZA()}}function iQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"p",13),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isReplyListShown=!i.isReplyListShown)}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw();c.xp6(1),c.lnq(" ",t.isReplyListShown?"Hide":"Show"," ",t.replies.length," ",1===t.replies.length?"reply":"replies"," ")}}function sQ(n,e){if(1&n&&c._UZ(0,"reply-list",14),2&n){const t=c.oxw();c.Q6J("replies",t.replies)}}const oQ=function(n){return{"reply-form-initialized":n}};function aQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"reply-form",15),c.NdJ("onAddReply",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.addReply(i))})("onReplyFormInitialized",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.isReplyFormInitialized=i)}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("ngClass",c.VKq(2,oQ,t.isReplyFormInitialized))("comment",t.comment)}}let cQ=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.router=i,this.onAddReply=new c.vpe,this.isReplyFormShown=!1,this.replies=[],this.isReplyListShown=!1,this.isReplyFormInitialized=!1}ngOnInit(){var t=this;document.body.addEventListener("click",this.handleOutsideClick.bind(this)),this.comment.replies?.length&&this.postService.getRepliesForComment(this.comment).pipe(kt(1),(0,En.w)(function(){var r=(0,U.Z)(function*(i){const o=i.map(function(){var u=(0,U.Z)(function*(f){const g=t.authService.getUserById(f.createdByUserId),v=yield Dn(g);return{...f,createdByUserId:v}});return function(f){return u.apply(this,arguments)}}());return yield Promise.all(o)});return function(i){return r.apply(this,arguments)}}())).subscribe({next:r=>{this.replies=r}})}ngOnChanges(t){var r=this;t.comment.firstChange||t.comment.currentValue.replies.length&&this.postService.getRepliesForComment(this.comment).pipe(kt(1),(0,En.w)(function(){var i=(0,U.Z)(function*(o){const u=o.map(function(){var f=(0,U.Z)(function*(g){const v=r.authService.getUserById(g.createdByUserId),b=yield Dn(v);return{...g,createdByUserId:b}});return function(g){return f.apply(this,arguments)}}());return yield Promise.all(u)});return function(o){return i.apply(this,arguments)}}())).subscribe({next:i=>{this.replies=i}})}addReply(t){this.onAddReply.emit(t),this.isReplyFormShown=!1}onClickReply(){this.isReplyFormShown=!0}handleOutsideClick(t){const r=t.target;!r.closest(".reply-form")&&!r.classList.contains("btn-reply")&&(this.isReplyFormShown=!1)}navigateToUserProfile(){this.router.navigateByUrl(`/profile/${this.comment.createdByUserId._id}`)}ngOnDestroy(){document.body.removeEventListener("click",this.handleOutsideClick)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(th),c.Y36(Xn),c.Y36(Mn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["comment-cmp"]],inputs:{comment:"comment"},outputs:{onAddReply:"onAddReply"},features:[c.TTD],decls:17,vars:10,consts:[[1,"comment"],[1,"meter"],[1,"comment-top-level"],["alt","user",3,"src","click"],[1,"content"],[1,"inner-container"],[1,"fullname",3,"click"],[1,"created-at"],["class","btn-reply",3,"click",4,"ngIf"],["class","btn-toggle-replies",3,"click",4,"ngIf"],[3,"replies",4,"ngIf"],["class","reply-form",3,"ngClass","comment","onAddReply","onReplyFormInitialized",4,"ngIf"],[1,"btn-reply",3,"click"],[1,"btn-toggle-replies",3,"click"],[3,"replies"],[1,"reply-form",3,"ngClass","comment","onAddReply","onReplyFormInitialized"]],template:function(r,i){1&r&&(c.TgZ(0,"li",0),c._UZ(1,"div",1),c.TgZ(2,"div",2)(3,"img",3),c.NdJ("click",function(){return i.navigateToUserProfile()}),c.qZA(),c.TgZ(4,"div",4)(5,"div",5)(6,"span",6),c.NdJ("click",function(){return i.navigateToUserProfile()}),c._uU(7),c.qZA(),c.TgZ(8,"span",7),c._uU(9),c.ALo(10,"timeAgo"),c.qZA()(),c.TgZ(11,"p"),c._uU(12),c.qZA(),c.YNc(13,rQ,2,0,"button",8),c.qZA()(),c.YNc(14,iQ,2,3,"p",9),c.YNc(15,sQ,1,1,"reply-list",10),c.YNc(16,aQ,1,4,"reply-form",11),c.qZA()),2&r&&(c.xp6(3),c.Q6J("src",i.comment.createdByUserId.imgUrl,c.LSH),c.xp6(4),c.Oqu(i.comment.createdByUserId.fullName),c.xp6(2),c.Oqu(c.lcZ(10,8,i.comment.createdAt)),c.xp6(3),c.hij(" ",i.comment.message," "),c.xp6(1),c.Q6J("ngIf",i.comment.isTopLevel),c.xp6(1),c.Q6J("ngIf",i.replies.length),c.xp6(1),c.Q6J("ngIf",i.isReplyListShown&&i.replies.length),c.xp6(1),c.Q6J("ngIf",i.isReplyFormShown))},dependencies:[Di,vn,JY,nQ,PS],styles:["[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em;position:relative}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .meter[_ngcontent-%COMP%]{position:absolute;z-index:-10;width:1px;height:100%;background-color:#ffffff82;left:17px;top:1px}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .btn-toggle-replies[_ngcontent-%COMP%]{font-size:13px;padding-inline-start:2.7em;cursor:pointer}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.8em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;border-radius:50%;cursor:pointer}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#919191;font-size:13px}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .btn-reply[_ngcontent-%COMP%]{background-color:#000;border:none;color:#f5f5f5;width:-moz-fit-content;width:fit-content;padding-inline-end:.8em;font-size:12px;cursor:pointer}"]})}return n})();function lQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"comment-cmp",9),c.NdJ("onAddReply",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddReply.emit(i))}),c.qZA()}2&n&&c.Q6J("comment",e.$implicit)}function uQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"form",10),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.addComment())}),c._UZ(1,"img",11),c.TgZ(2,"input",12),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.comment.message=i)}),c.qZA(),c.TgZ(3,"button",13),c._uU(4,"Post"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("src",t.loggedInUserFromDB.imgUrl,c.LSH),c.xp6(1),c.Q6J("ngModel",t.comment.message)}}let dQ=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.renderer=i,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onToggleCommentsModal=new c.vpe,this.onGetCommentsLength=new c.vpe,this.comment={_id:"",parentId:"",isTopLevel:!0,postId:"",createdByUserId:"",message:"",createdAt:0,replies:[]}}ngOnInit(){var t=this;return(0,U.Z)(function*(){t.renderer.addClass(document.body,"body-unscrollable");const r=t.authService.getUserById(t.loggedInUser.uid),i=yield Dn(r);t.loggedInUserFromDB=i,t.comment.postId=t.post._id,t.comment.createdByUserId=i._id,t.commentsSubscription=t.postService.getCommentsByPostId(t.post._id).pipe((0,En.w)(function(){var o=(0,U.Z)(function*(u){const f=u.map(function(){var g=(0,U.Z)(function*(v){const b=t.authService.getUserById(v.createdByUserId),T=yield Dn(b);return{...v,createdByUserId:T}});return function(v){return g.apply(this,arguments)}}());return yield Promise.all(f)});return function(u){return o.apply(this,arguments)}}())).subscribe({next:o=>{t.comments=o,t.onGetCommentsLength.emit(t.comments.length)}})})()}addComment(){this.onAddComment.emit({comment:this.comment,post:this.post}),this.comment.message=""}trackByCommentId(t,r){return r._id}ngOnDestroy(){this.commentsSubscription?.unsubscribe(),this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(th),c.Y36(Xn),c.Y36(c.Qsj))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["comments-modal"]],inputs:{post:"post",loggedInUser:"loggedInUser"},outputs:{onAddComment:"onAddComment",onAddReply:"onAddReply",onToggleCommentsModal:"onToggleCommentsModal",onGetCommentsLength:"onGetCommentsLength"},decls:10,vars:3,consts:[[1,"comment-modal"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[1,"comments"],[1,"comment-list"],[3,"comment","onAddReply",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngSubmit",4,"ngIf"],[1,"hiding-flach"],[3,"comment","onAddReply"],[3,"ngSubmit"],["alt","",3,"src"],["type","text","name","message","id","comment","placeholder","Add a comment...",3,"ngModel","ngModelChange"],["type","submit",1,"btn-add-comment"]],template:function(r,i){1&r&&(c.TgZ(0,"div",0)(1,"button",1),c.NdJ("click",function(){return i.onToggleCommentsModal.emit()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"div",4)(5,"div",5)(6,"ul"),c.YNc(7,lQ,1,1,"comment-cmp",6),c.qZA()()(),c.YNc(8,uQ,5,2,"form",7),c._UZ(9,"div",8),c.qZA()),2&r&&(c.xp6(7),c.Q6J("ngForOf",i.comments)("ngForTrackBy",i.trackByCommentId),c.xp6(1),c.Q6J("ngIf",i.loggedInUserFromDB))},dependencies:[Si,vn,vg,Ra,ou,_g,xc,au,cQ],styles:["[_nghost-%COMP%]{position:fixed;top:0;z-index:150;width:100%;height:100%;background-color:#000;padding-block-start:3.8em;overflow:auto}@media (min-width: 600px){[_nghost-%COMP%]{padding-block-start:unset;display:grid;left:75px;width:calc(100% - 75px);grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);grid-template-rows:30px 1fr 30px}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]{position:relative;padding-block-start:1.5em;height:100%;display:grid;grid-template-columns:25px 1fr 25px;grid-template-rows:1fr auto}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]{width:100%;grid-template-rows:auto 1fr auto;grid-template-columns:auto;padding-block-start:unset;display:grid;grid-row:2;grid-column:2}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:fixed;background-color:#000;cursor:pointer;border:none;padding-inline:.5em;padding-block-end:.5em;right:20px;top:85px;z-index:40;width:-moz-fit-content;width:fit-content}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:sticky;right:0;top:32px;grid-column:unset;padding-inline:unset;padding-block-end:unset;grid-row:unset;justify-self:end}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{height:100%}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{grid-column:unset;margin-block-start:-17px}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.5em;padding-block-end:5.5em;height:100%}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-block-end:2em}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;height:60px;position:sticky;bottom:60px;background-color:#000;border-block-start:1px solid rgba(255,255,255,.24);grid-column:1/-1;padding-inline:25px;z-index:120}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{bottom:30px;border-block-end:1px solid rgba(255,255,255,.24);grid-column:unset}}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:3;height:100%;border:none;color:#f5f5f5;background-color:#000;font-size:16px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f5f5f5;font-family:Arial,sans-serif;background-color:#000}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:100%;border:none;cursor:pointer;background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;text-align:right}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .hiding-flach[_ngcontent-%COMP%]{display:none;background-color:#000;grid-column:1/-1;position:fixed;bottom:0;left:75px;height:30px;width:calc(100% - 92px);grid-row:4;z-index:120}@media (min-width: 600px){[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .hiding-flach[_ngcontent-%COMP%]{display:block}}"]})}return n})();function hQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",22),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleLike())}),c.O4$(),c.TgZ(1,"svg",23)(2,"title"),c._uU(3,"Like"),c.qZA(),c._UZ(4,"path",24),c.qZA()()}}function fQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",22),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.toggleLike())}),c.O4$(),c.TgZ(1,"svg",25)(2,"title"),c._uU(3,"Unlike"),c.qZA(),c._UZ(4,"path",26),c.qZA()()}}function pQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"span"),c._uU(1," and "),c.TgZ(2,"span",32),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(3);return i.isLikedByUsersModalShown=!0,c.KtG(i.onClickLikedByUsers.emit(!0))}),c._uU(3),c.ALo(4,"number"),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(3),c.AsE("",c.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function gQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"liked-by-users-list",33),c.NdJ("onToggleLikedByUsersModal",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.onToggleFollow.emit(i))})("onCloseLikedByUsers",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.onCloseLikedByUsers.emit(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.onClickUserImg.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(3);c.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function mQ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",27)(1,"img",28),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onClickUserImg.emit(i.post.likedByUsers[0]._id))}),c.qZA(),c.TgZ(2,"p"),c._uU(3," Liked by "),c.TgZ(4,"span",29),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onClickUserImg.emit(i.post.likedByUsers[0]._id))}),c._uU(5),c.qZA(),c.YNc(6,pQ,5,4,"span",30),c.qZA(),c.YNc(7,gQ,1,2,"liked-by-users-list",31),c.qZA()}if(2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("src",t.post.likedByUsers[0].imgUrl,c.LSH),c.xp6(4),c.Oqu(t.post.likedByUsers[0].fullName),c.xp6(1),c.Q6J("ngIf",t.post.likedByUsers.length>1),c.xp6(1),c.Q6J("ngIf",t.isLikedByUsersModalShown)}}function _Q(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"span"),c._uU(1," and "),c.TgZ(2,"span",32),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(3);return c.KtG(i.isLikedByUsersModalShown=!i.isLikedByUsersModalShown)}),c._uU(3),c.ALo(4,"number"),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(3),c.AsE("",c.lcZ(4,2,t.likedByUsersCloneDeep.length-1)," ",t.likedByUsersCloneDeep.length>2?"others":"other","")}}function yQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"liked-by-users-list",38),c.NdJ("onToggleLikedByUsersModal",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw(3);return c.KtG(o.onToggleFollow.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(3);c.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function vQ(n,e){if(1&n&&(c.O4$(),c.kcU(),c.TgZ(0,"div",34),c._UZ(1,"img",35),c.TgZ(2,"p"),c._uU(3," Liked by "),c.TgZ(4,"span",36),c._uU(5),c.qZA(),c.YNc(6,_Q,5,4,"span",30),c.qZA(),c.YNc(7,yQ,1,2,"liked-by-users-list",37),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("src",t.likedByUsersCloneDeep[0].imgUrl,c.LSH),c.xp6(4),c.Oqu(t.likedByUsersCloneDeep[0].fullName),c.xp6(1),c.Q6J("ngIf",t.likedByUsersCloneDeep.length>1),c.xp6(1),c.Q6J("ngIf",t.isLikedByUsersModalShown)}}function CQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",43),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(4);return c.KtG(i.isMoreClicked=!i.isMoreClicked)}),c._uU(1," more "),c.qZA()}}function wQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"p")(1,"span",41),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(3);return c.KtG(i.onClickUserImg.emit(i.creator._id))}),c._uU(2),c.qZA(),c._uU(3),c.ALo(4,"slice"),c.YNc(5,CQ,2,0,"button",42),c.qZA()}if(2&n){const t=c.oxw(3);c.xp6(2),c.Oqu(t.creator.fullName),c.xp6(1),c.AsE(" ",c.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120?"...":""," "),c.xp6(2),c.Q6J("ngIf",t.post.content.length>=120)}}function IQ(n,e){if(1&n&&(c.TgZ(0,"p")(1,"span",44),c._uU(2),c.qZA(),c._uU(3),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Oqu(t.creator.fullName),c.xp6(1),c.hij(" ",t.post.content," ")}}function bQ(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw(3);c.xp6(1),c.hij("View ",t.commentsLength," comment")}}function EQ(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw(3);c.xp6(1),c.hij("View all ",t.commentsLength," comments")}}function TQ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",39),c.YNc(1,wQ,6,8,"p",30),c.YNc(2,IQ,4,2,"p",30),c.TgZ(3,"p",40),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleCommentModal())}),c.YNc(4,bQ,2,1,"span",30),c.YNc(5,EQ,2,1,"span",30),c.qZA()()}if(2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngIf",!t.isMoreClicked),c.xp6(1),c.Q6J("ngIf",t.isMoreClicked),c.xp6(2),c.Q6J("ngIf",1===t.commentsLength),c.xp6(1),c.Q6J("ngIf",t.commentsLength>=2)}}function MQ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"comments-modal",45),c.NdJ("onAddComment",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddComment.emit(i))})("onToggleCommentsModal",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleCommentModal())})("onGetCommentsLength",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.commentsLength=i)})("onAddReply",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddReply.emit(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("post",t.post)("loggedInUser",t.loggedInUser)}}function DQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",1)(1,"post-header",2),c.NdJ("onToggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleFollow.emit(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onClickUserImg.emit(i))}),c.qZA(),c._UZ(2,"img",3),c.TgZ(3,"div",4)(4,"div",5)(5,"div",6),c.YNc(6,hQ,5,0,"button",7),c.YNc(7,fQ,5,0,"button",7),c.TgZ(8,"button",8),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onToggleCommentModal())}),c.O4$(),c.TgZ(9,"svg",9)(10,"title"),c._uU(11,"CommentModel"),c.qZA(),c._UZ(12,"path",10),c.qZA()(),c.kcU(),c.TgZ(13,"button",11),c.O4$(),c.TgZ(14,"svg",12)(15,"title"),c._uU(16,"Share PostModel"),c.qZA(),c._UZ(17,"line",13)(18,"polygon",14),c.qZA()()(),c.kcU(),c.TgZ(19,"button",15),c.O4$(),c.TgZ(20,"svg",16)(21,"title"),c._uU(22,"Save"),c.qZA(),c._UZ(23,"polygon",17),c.qZA()()(),c.YNc(24,mQ,8,4,"div",18),c.YNc(25,vQ,8,4,"div",19),c.YNc(26,TQ,6,4,"div",20),c.qZA(),c.YNc(27,MQ,1,2,"comments-modal",21),c.qZA()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("post",t.post)("creator",t.creator)("isComponentInitialized",t.isComponentInitialized),c.xp6(1),c.Tol(t.post.filterSelected),c.Q6J("src",t.post.imgUrl,c.LSH),c.xp6(4),c.Q6J("ngIf",!t.isLikeClicked),c.xp6(1),c.Q6J("ngIf",t.isLikeClicked),c.xp6(17),c.Q6J("ngIf",t.post.likedByUsers.length&&"object"===t.getTypeOfLikedByUsers()),c.xp6(1),c.Q6J("ngIf",t.likedByUsersCloneDeep[0]&&"string"===t.getTypeOfLikedByUsers()),c.xp6(1),c.Q6J("ngIf",t.creator),c.xp6(1),c.Q6J("ngIf",t.isCommentModalShown)}}let BB=(()=>{class n{constructor(t,r){this.authService=t,this.postService=r,this.onToggleLike=new c.vpe,this.onToggleFollow=new c.vpe,this.onAddNotification=new c.vpe,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onClickUserImg=new c.vpe,this.onClickLikedByUsers=new c.vpe,this.onCloseLikedByUsers=new c.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.loggedInUser=this.authService.getLoggedInUser(),this.isLikeClicked=!1,this.isComponentInitialized=!1,this.isCommentModalShown=!1,this.commentsLength=0}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=t.post.likedByUsers?.map(function(){var i=(0,U.Z)(function*(o){"string"!=typeof o&&(o=o._id);const u=t.authService.getUserById(o).pipe(kt(1));return yield Dn(u)});return function(o){return i.apply(this,arguments)}}());if(t.post.likedByUsers=yield Promise.all(r),"object"!=typeof t.post.likedByUsers?.[0]){const i=t.post.likedByUsers?.map(function(){var o=(0,U.Z)(function*(u){"string"!=typeof u&&(u=u._id);const f=t.authService.getUserById(u).pipe(kt(1));return yield Dn(f)});return function(u){return o.apply(this,arguments)}}());t.post.likedByUsers=yield Promise.all(i)}t.likedByUsersCloneDeep=Nb(t.post.likedByUsers),t.postService.getCommentsByPostId(t.post._id).pipe(kt(1)).subscribe({next:i=>{t.commentsLength=i.length}}),t.authService.getUserById(t.post.creatorId).pipe(kt(1)).subscribe({next:i=>{t.creator=i,t.post.likedByUsers.find(u=>u._id===t.loggedInUser.uid||u===t.loggedInUser.uid)&&(t.isLikeClicked=!0),t.isComponentInitialized=!0}})})()}ngOnChanges(t){var r=this;return(0,U.Z)(function*(){if(!t.post.firstChange&&t.post)try{const o=t.post.currentValue.likedByUsers.length?R5(r.post.likedByUsers.map(function(){var f=(0,U.Z)(function*(g){const v=r.authService.getUserById(g);try{return yield Dn(v)}catch(b){return console.error(`Error fetching user ${g}`,b),null}});return function(g){return f.apply(this,arguments)}}())):(0,ut.of)([]),u=yield Dn(o);r.post.likedByUsers=u,r.likedByUsersCloneDeep=Nb(r.post.likedByUsers)}catch(i){console.error("Error in ngOnChanges:",i)}})()}toggleLike(){this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:this.post,isLikeClicked:this.isLikeClicked}),this.loggedInUser.uid!==this.creator._id&&this.isLikeClicked&&this.onAddNotification.emit(this.post)}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}onToggleCommentModal(){this.isCommentModalShown=!this.isCommentModalShown}getTypeOfLikedByUsers(){return typeof this.post.likedByUsers[0]}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Xn),c.Y36(th))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment",onAddReply:"onAddReply",onClickUserImg:"onClickUserImg",onClickLikedByUsers:"onClickLikedByUsers",onCloseLikedByUsers:"onCloseLikedByUsers"},features:[c.TTD],decls:1,vars:1,consts:[["class","post-card",4,"ngIf"],[1,"post-card"],[3,"post","creator","isComponentInitialized","onToggleFollow","onClickUserImg"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment",3,"click"],["aria-label","CommentModel","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],["class","likedByUsersCloneDeep",4,"ngIf"],["class","content",4,"ngIf"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength","onAddReply",4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24",1,"x1lliihq","x1n2onr6"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src","click"],[1,"username",3,"click"],[4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow","onCloseLikedByUsers","onClickUserImg",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow","onCloseLikedByUsers","onClickUserImg"],[1,"likedByUsersCloneDeep"],["alt","user",3,"src"],[1,"username"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"content"],[1,"comments-length",3,"click"],[1,"creatorFullName",3,"click"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"],[1,"creatorFullName"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength","onAddReply"]],template:function(r,i){1&r&&c.YNc(0,DQ,28,12,"li",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[vn,ZK,eY,dQ,Sr,je],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em;position:relative}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none;cursor:pointer}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .comments-length[_ngcontent-%COMP%]{font-size:14px;color:#919191;cursor:pointer}"]})}return n})();function SQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"post-card",2),c.NdJ("onToggleLike",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleLike.emit(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleFollow.emit(i))})("onAddNotification",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddNotification.emit(i))})("onAddComment",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddComment.emit(i))})("onAddReply",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddReply.emit(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onClickUserImg.emit(i))}),c.qZA()}2&n&&c.Q6J("post",e.$implicit)}let AQ=(()=>{class n{constructor(){this.onToggleLike=new c.vpe,this.onToggleFollow=new c.vpe,this.onAddNotification=new c.vpe,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onClickUserImg=new c.vpe}trackByPostId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment",onAddReply:"onAddReply",onClickUserImg:"onClickUserImg"},decls:3,vars:2,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"ul"),c.YNc(2,SQ,1,1,"post-card",1),c.qZA()()),2&r&&(c.xp6(2),c.Q6J("ngForOf",i.posts)("ngForTrackBy",i.trackByPostId))},dependencies:[Si,BB],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function xQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"post-list",4),c.NdJ("onToggleLike",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleLike(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleFollow(i))})("onAddNotification",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddNotification(i))})("onAddComment",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddComment(i))})("onAddReply",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddReply(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.navigateToUserProfile(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("posts",t.posts)}}function PQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",5)(1,"p"),c._uU(2," No posts to show! "),c._UZ(3,"br"),c.TgZ(4,"span",6),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.navigateToCreatePost())}),c._uU(5,"Let's upload your first post."),c.qZA()()()}}function OQ(n,e){if(1&n&&(c.TgZ(0,"section",1),c.YNc(1,xQ,1,1,"post-list",2),c.YNc(2,PQ,6,0,"ng-template",null,3,c.W1O),c.qZA()),2&n){const t=c.MAs(3),r=c.oxw();c.xp6(1),c.Q6J("ngIf",r.posts.length)("ngIfElse",t)}}let kQ=(()=>{class n{constructor(t,r,i,o,u){this.postService=t,this.authService=r,this.userService=i,this.notificationService=o,this.router=u,this.isToggleLikeProcessing=!1,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=yield t.postService.getPosts();r&&(t.postsSubscription=r.subscribe({next:i=>{t.posts=i},error:i=>{console.error(i)}}))})()}onToggleLike(t){var r=this;return(0,U.Z)(function*(){r.isToggleLikeProcessing||(r.isToggleLikeProcessing=!0,yield r.postService.toggleLike(t.isLikeClicked,t.post),r.isToggleLikeProcessing=!1)})()}onToggleFollow({isFollowClicked:t,user:r}){var i=this;this.authService.getUserById(r._id).pipe(kt(1)).subscribe(function(){var o=(0,U.Z)(function*(u){r=u,yield i.userService.toggleFollow(t,r)});return function(u){return o.apply(this,arguments)}}())}onAddNotification(t){var r=this;return(0,U.Z)(function*(){const i={sender:r.authService.getLoggedInUser().uid,recipient:t.creatorId,message:"",createdAt:0,madeAt:t,read:!1};yield r.notificationService.addNotification(i,"likeAction")})()}onAddComment({comment:t,post:r}){var i=this;return(0,U.Z)(function*(){yield i.postService.addComment(t,r)})()}onAddReply(t){var r=this;return(0,U.Z)(function*(){yield r.postService.addReply(t)})()}navigateToUserProfile(t){console.log("creatorId",t),this.router.navigateByUrl(`profile/${t}`)}navigateToCreatePost(){this.router.navigateByUrl("/create-post")}ngOnDestroy(){this.postsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(th),c.Y36(Xn),c.Y36(Sc),c.Y36(aR),c.Y36(Mn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["home-page"]],decls:1,vars:1,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngIf","ngIfElse"],["noPostsTemplate",""],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"],[1,"page-cmp-layout"],[3,"click"]],template:function(r,i){1&r&&c.YNc(0,OQ,4,2,"section",0),2&r&&c.Q6J("ngIf",i.posts)},dependencies:[vn,AQ],styles:["[_nghost-%COMP%]{display:block;padding-block:1em}"]})}return n})();function NQ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"form",12),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onLogInWithEmailAndPassword())}),c.TgZ(1,"input",13),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.userCred.email=i)}),c.qZA(),c.TgZ(2,"input",14),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.userCred.password=i)}),c.qZA(),c.TgZ(3,"button",15),c._uU(4,"Log in"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngModel",t.userCred.email),c.xp6(1),c.Q6J("ngModel",t.userCred.password)}}function RQ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"form",12),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onRegisterWithEmailAndPassword())}),c.TgZ(1,"input",16),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.userCred.fullName=i)}),c.qZA(),c.TgZ(2,"input",13),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.userCred.email=i)}),c.qZA(),c.TgZ(3,"input",14),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.userCred.password=i)}),c.qZA(),c.TgZ(4,"button",17),c._uU(5,"Register"),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngModel",t.userCred.fullName),c.xp6(1),c.Q6J("ngModel",t.userCred.email),c.xp6(1),c.Q6J("ngModel",t.userCred.password)}}let FQ=(()=>{class n{constructor(t,r,i,o){this.authService=t,this.postService=r,this.router=i,this.userService=o,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0,this.userService.setIsSearchModalShown(!1)}onLogInWithGoogle(){var t=this;return(0,U.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(kt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,U.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(kt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,U.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(kt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Xn),c.Y36(th),c.Y36(Mn),c.Y36(Sc))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"div",1),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.YNc(4,NQ,5,2,"form",4),c.YNc(5,RQ,6,3,"form",4),c.kcU(),c.TgZ(6,"p",5),c.NdJ("click",function(){return i.isLogInFormShown=!i.isLogInFormShown}),c._uU(7," Don't you have a user? Register here "),c.qZA(),c.TgZ(8,"button",6),c.NdJ("click",function(){return i.onLogInWithGoogle()}),c.O4$(),c.TgZ(9,"svg",7),c._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),c.qZA(),c.kcU(),c.TgZ(14,"span"),c._uU(15,"Log in with Google"),c.qZA()()()),2&r&&(c.xp6(4),c.Q6J("ngIf",i.isLogInFormShown),c.xp6(1),c.Q6J("ngIf",!i.isLogInFormShown))},dependencies:[vn,vg,Ra,ou,_g,xc,au],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})(),Vb=(()=>{class n{constructor(t){this.db=t}getChatsForUser(t){return this.db.collection("chats",i=>i.where("users","array-contains",t).orderBy("lastModified","desc")).valueChanges()}getChatById(t){return this.db.collection("chats").doc(t).valueChanges()}addMessageToChat(t,r){var i=this;return(0,U.Z)(function*(){r.sentAt=Date.now();const o=yield i.db.collection("messages").add(r);yield i.db.collection("messages").doc(o.id).update({_id:o.id});const u=i.db.collection("chats").doc(t).valueChanges().pipe(kt(1)),g=[...(yield Dn(u)).messages,o.id];yield i.db.collection("chats").doc(t).update({messages:g})})()}getMessageById(t){return this.db.collection("messages").doc(t).valueChanges()}getMessagesByChatId(t){return this.db.collection("messages",r=>r.where("chatId","==",t).orderBy("sentAt","asc")).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Mb))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LQ(n,e){if(1&n&&(c.TgZ(0,"li",1),c._UZ(1,"img",2),c.TgZ(2,"div",3)(3,"span"),c._uU(4),c.qZA()()()),2&n){const t=c.oxw();c.MGl("routerLink","/chat/",t.chat._id,""),c.xp6(1),c.Q6J("src",t.participantUser.imgUrl,c.LSH),c.xp6(3),c.Oqu(t.lastMessage.txt.length>20?t.lastMessage.txt.substring(0,20)+" ...":t.lastMessage.txt)}}let UQ=(()=>{class n{constructor(t,r){this.authService=t,this.chatService=r,this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,U.Z)(function*(){yield t.getLoggedInUserFromDB(),yield t.getParticipantUser(),yield t.getLastMessage(),t.isComponentInitialized=!0})()}getLoggedInUserFromDB(){var t=this;return(0,U.Z)(function*(){const r=t.authService.getUserById(t.authService.getLoggedInUser().uid);t.loggedInUserFromDB=yield Dn(r)})()}getParticipantUser(){var t=this;return(0,U.Z)(function*(){let r=t.chat.users.filter(o=>o!==t.loggedInUserFromDB._id)[0];const i=t.authService.getUserById(r);t.participantUser=yield Dn(i)})()}getLastMessage(){var t=this;return(0,U.Z)(function*(){var r;t.chatSubscription=t.chatService.getChatById(t.chat._id).subscribe({next:(r=(0,U.Z)(function*(i){t.chat=i;const o=t.chatService.getMessageById(t.chat.messages[t.chat.messages.length-1]);t.lastMessage=yield Dn(o)}),function(o){return r.apply(this,arguments)})})})()}ngOnDestroy(){this.chatSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Xn),c.Y36(Vb))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-preview"]],inputs:{chat:"chat"},decls:1,vars:1,consts:[["class","chat-preview",3,"routerLink",4,"ngIf"],[1,"chat-preview",3,"routerLink"],["alt","Participant",3,"src"],[1,"chat-content"]],template:function(r,i){1&r&&c.YNc(0,LQ,5,3,"li",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized&&i.lastMessage)},dependencies:[vn,Tf],styles:["[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7em}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3.5em;border-radius:50%;object-fit:cover;aspect-ratio:1/1;cursor:pointer}[_nghost-%COMP%]   .chat-preview[_ngcontent-%COMP%]   .chat-content[_ngcontent-%COMP%]{font-size:16px;cursor:pointer}"]})}return n})();function BQ(n,e){1&n&&c._UZ(0,"chat-preview",2),2&n&&c.Q6J("chat",e.$implicit)}let VQ=(()=>{class n{trackByChatId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-list"]],inputs:{chats:"chats"},decls:2,vars:2,consts:[[1,"chat-list"],[3,"chat",4,"ngFor","ngForOf","ngForTrackBy"],[3,"chat"]],template:function(r,i){1&r&&(c.TgZ(0,"ul",0),c.YNc(1,BQ,1,1,"chat-preview",1),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngForOf",i.chats)("ngForTrackBy",i.trackByChatId))},dependencies:[Si,UQ]})}return n})(),jQ=(()=>{class n{constructor(t,r,i){this.userService=t,this.chatService=r,this.authService=i,this.chats=[],this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,U.Z)(function*(){t.chatService.getChatsForUser(t.authService.getLoggedInUser().uid).subscribe({next:r=>{t.chats=r},error:r=>{console.error(r)}})})()}ngOnDestroy(){this.chatsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Sc),c.Y36(Vb),c.Y36(Xn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:1,consts:[[1,"message-page"],[3,"chats"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0),c._UZ(1,"chat-list",1),c.qZA()),2&r&&(c.xp6(1),c.Q6J("chats",i.chats))},dependencies:[VQ],styles:["[_nghost-%COMP%]   .message-page[_ngcontent-%COMP%]{padding-block:1em}"]})}return n})();function $Q(n,e){if(1&n&&(c.TgZ(0,"li",1)(1,"div",2),c._UZ(2,"img",3),c.TgZ(3,"p")(4,"span",4),c._uU(5),c.qZA(),c._uU(6),c.qZA(),c.TgZ(7,"span",5),c._uU(8),c.ALo(9,"timeAgo"),c.qZA()(),c._UZ(10,"img",6),c.qZA()),2&n){const t=c.oxw();c.xp6(2),c.s9C("src",t.sender.imgUrl,c.LSH),c.xp6(3),c.Oqu(t.sender.fullName),c.xp6(1),c.hij(" ",t.notification.message," "),c.xp6(2),c.hij(" ",c.lcZ(9,5,t.notification.createdAt),""),c.xp6(2),c.s9C("src",t.notification.madeAt.imgUrl,c.LSH)}}let HQ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.getUserById(this.notification.sender).pipe(kt(1)).subscribe({next:t=>{this.sender=t}})}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Xn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["notification-preview"]],inputs:{notification:"notification"},decls:1,vars:1,consts:[["class","notification-preview",4,"ngIf"],[1,"notification-preview"],[1,"inner-container"],["alt","sender",1,"img-sender",3,"src"],[1,"full-name"],[1,"created-at"],["alt","content",1,"img-made-at",3,"src"]],template:function(r,i){1&r&&c.YNc(0,$Q,11,7,"li",0),2&r&&c.Q6J("ngIf",i.sender)},dependencies:[vn,PS],styles:["[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:3em;gap:1em;font-size:15px}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .img-sender[_ngcontent-%COMP%]{width:40px;border-radius:50%;cursor:pointer}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .full-name[_ngcontent-%COMP%]{font-size:13px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{font-size:13.5px;color:#a8a8a8}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .img-made-at[_ngcontent-%COMP%]{aspect-ratio:1/1;object-fit:cover;width:3em}"]})}return n})();function zQ(n,e){1&n&&c._UZ(0,"notification-preview",2),2&n&&c.Q6J("notification",e.$implicit)}let GQ=(()=>{class n{trackByNotificationId(t,r){return r.id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["notification-list"]],inputs:{notifications:"notifications"},decls:3,vars:2,consts:[[1,"notification-list"],[3,"notification",4,"ngFor","ngForOf","ngForTrackBy"],[3,"notification"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"ul"),c.YNc(2,zQ,1,1,"notification-preview",1),c.qZA()()),2&r&&(c.xp6(2),c.Q6J("ngForOf",i.notifications)("ngForTrackBy",i.trackByNotificationId))},dependencies:[Si,HQ],styles:["[_nghost-%COMP%]   .notification-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}"]})}return n})();function qQ(n,e){1&n&&(c.TgZ(0,"p"),c._uU(1,"You dont have notifications yet!"),c.qZA())}function WQ(n,e){if(1&n&&(c.TgZ(0,"section",1),c._UZ(1,"notification-list",2),c.YNc(2,qQ,2,0,"p",3),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("notifications",t.notifications),c.xp6(1),c.Q6J("ngIf",!t.notifications.length)}}let ZQ=(()=>{class n{constructor(t,r,i){this.notificationService=t,this.authService=r,this.userService=i,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=t.authService.getLoggedInUser();r&&t.notificationService.getNotificationsForUser(r.uid).pipe(kt(1)).subscribe({next:i=>{t.notifications=i}})})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(aR),c.Y36(Xn),c.Y36(Sc))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","notifications-page",4,"ngIf"],[1,"notifications-page"],[3,"notifications"],[4,"ngIf"]],template:function(r,i){1&r&&c.YNc(0,WQ,3,2,"section",0),2&r&&c.Q6J("ngIf",i.notifications)},dependencies:[vn,GQ],styles:["[_nghost-%COMP%]{padding-block:1em}"]})}return n})();function KQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",4)(1,"button",5),c.NdJ("click",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onMediaSelected(i))}),c.TgZ(2,"span"),c._uU(3," Upload photos here "),c.qZA(),c.TgZ(4,"div"),c.O4$(),c.TgZ(5,"svg",6),c._UZ(6,"path",7)(7,"path",8)(8,"path",9),c.qZA()()()()}}const YQ=function(n){return{active:n}};function QQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"article",21),c.NdJ("click",function(){const o=c.CHM(t).$implicit,u=c.oxw(2);return c.KtG(u.onSelectFilterPreview(o.value))}),c.TgZ(1,"span"),c._uU(2),c.qZA(),c._UZ(3,"img",22),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw(2);c.Q6J("ngClass",c.VKq(6,YQ,t.value===r.post.filterSelected)),c.xp6(2),c.Oqu(t.name),c.xp6(1),c.Tol(t.value),c.MGl("alt","",t," - filter preview"),c.Q6J("src",r.post.imgUrl,c.LSH)}}function JQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",10)(1,"div",11)(2,"button",12),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return i.isFilterMediaShown=!1,c.KtG(i.isSelectMediaShown=!0)}),c.O4$(),c.TgZ(3,"svg",13),c._UZ(4,"line",14)(5,"polyline",15),c.qZA()(),c.kcU(),c.TgZ(6,"button",16),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return i.isFilterMediaShown=!1,c.KtG(i.isFormMediaShown=!0)}),c._uU(7," Next "),c.qZA()(),c.TgZ(8,"article",17),c._UZ(9,"img",18),c.qZA(),c.TgZ(10,"div",19),c.YNc(11,QQ,4,8,"article",20),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(9),c.Tol(t.post.filterSelected),c.s9C("src",t.post.imgUrl,c.LSH),c.xp6(2),c.Q6J("ngForOf",t.filterPreviews)("ngForTrackBy",t.trackByFilterName)}}function XQ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",23)(1,"div",11)(2,"button",12),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return i.isFormMediaShown=!1,c.KtG(i.isFilterMediaShown=!0)}),c.O4$(),c.TgZ(3,"svg",13),c._UZ(4,"line",14)(5,"polyline",15),c.qZA()(),c.kcU(),c.TgZ(6,"button",24),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onCreatePost())}),c._uU(7," Share "),c.qZA()(),c.TgZ(8,"form")(9,"div",25),c._UZ(10,"img",26),c.TgZ(11,"textarea",27),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.post.content=i)}),c.qZA()()()()}if(2&n){const t=c.oxw();c.xp6(10),c.Tol(t.post.filterSelected),c.Q6J("src",t.post.imgUrl,c.LSH),c.xp6(1),c.Q6J("ngModel",t.post.content)}}let eJ=(()=>{class n{constructor(t,r,i){this.postService=t,this.router=r,this.userService=i,this.isSelectMediaShown=!0,this.isFilterMediaShown=!1,this.isFormMediaShown=!1,this.filterPreviews=[{name:"Normal",value:"normal"},{name:"Paris",value:"paris"},{name:"Los Angeles",value:"los-angeles"},{name:"Oslo",value:"oslo"},{name:"Abu Dhabi",value:"abu-dhabi"},{name:"Tokyo",value:"tokyo"}],this.post={_id:"",creatorFullName:"",creatorId:"",createdAt:0,imgUrl:"",content:"",likedByUsers:[],filterSelected:"normal"},this.userService.setIsSearchModalShown(!1)}onMediaSelected(t){var r=this;return(0,U.Z)(function*(){try{const i=yield r.postService.uploadMedia();i?r.post.imgUrl=i:console.error(null),r.isSelectMediaShown=!1,r.isFilterMediaShown=!0}catch(i){console.error("Error:",i)}})()}onSelectFilterPreview(t){this.post.filterSelected=t}onCreatePost(){var t=this;return(0,U.Z)(function*(){yield t.postService.createPost(t.post),yield t.router.navigateByUrl("/")})()}trackByFilterName(t,r){return r.name}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(th),c.Y36(Mn),c.Y36(Sc))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["create-post-page"]],decls:4,vars:3,consts:[[1,"create-post-page"],["class","select-media",4,"ngIf"],["class","filter-media",4,"ngIf"],["class","form-media",4,"ngIf"],[1,"select-media"],[3,"click"],["aria-label","Icon to represent media such as images or videos","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","77","role","img","viewBox","0 0 97.6 77.3","width","96",1,"x1lliihq","x1n2onr6"],["d","M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z","fill","currentColor"],["d","M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z","fill","currentColor"],["d","M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z","fill","currentColor"],[1,"filter-media"],[1,"actions"],["title","Back",1,"btn-back",3,"click"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["title","Next",1,"btn-next",3,"click"],[1,"media-preview"],["alt","media preview",3,"src"],[1,"filter-list"],["class","filter-preview",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-preview",3,"ngClass","click"],[3,"src","alt"],[1,"form-media"],["title","Share",1,"btn-share",3,"click"],[1,"content"],["alt","post image",3,"src"],["name","content","placeholder","Write your caption...",3,"ngModel","ngModelChange"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0),c.YNc(1,KQ,9,0,"div",1),c.YNc(2,JQ,12,5,"div",2),c.YNc(3,XQ,12,4,"div",3),c.qZA()),2&r&&(c.xp6(1),c.Q6J("ngIf",i.isSelectMediaShown),c.xp6(1),c.Q6J("ngIf",i.isFilterMediaShown),c.xp6(1),c.Q6J("ngIf",i.isFormMediaShown))},dependencies:[Di,Si,vn,vg,Ra,ou,_g,xc,au],styles:["[_nghost-%COMP%]{height:100%;width:100%;grid-column:2;display:grid;grid-template-columns:25px 1fr 25px}@media (min-width: 600px){[_nghost-%COMP%]{grid-template-columns:unset}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{height:100%;width:100%;position:relative;grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{grid-column:auto}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f5f5f5;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1em;width:100%;font-size:17px;cursor:pointer;padding-block:1.5em}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;position:relative;padding-block-end:1em}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]{padding-block-end:37px}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:56px;z-index:10;background-color:#000}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{top:0;height:71px;align-items:flex-end;padding-block-end:10px}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;display:flex}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 50px);display:flex;align-items:center;gap:1em;overflow-x:auto;white-space:nowrap}@media (min-width: 524px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 67px)}}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 125px)}}@media (min-width: 625px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{min-width:auto;max-width:500px;width:unset}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.4em;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d3d3d369;font-size:12px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:5em;height:5em;aspect-ratio:1/1}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em;height:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:66px;z-index:10;background-color:#000}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{align-items:flex-end;top:0;height:81.5px;padding-block-end:10px}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;display:flex}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;padding-block-end:20px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1em;height:100%}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:120px;flex-direction:row}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex:2;object-fit:contain}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100%;resize:none;background-color:transparent;border:none;color:#f5f5f5;font-size:16px;font-family:Arial,sans-serif}@media (min-width: 600px){[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:3}}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#f5f5f5d9;font-style:italic;font-size:14px;font-family:Arial,sans-serif;font-weight:400}"]})}return n})();const uv=()=>!!(0,c.f3M)(Xn).getLoggedInUser()||(console.error("LoggedInUser doesnt exists - no access to that page!"),(0,c.f3M)(Mn).navigateByUrl("/login"),!1);function tJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"post-card",5),c.NdJ("onClickLikedByUsers",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.isLikedByUsersClicked=i)})("onCloseLikedByUsers",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.isLikedByUsersClicked=i)})("onToggleLike",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleLike.emit(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleFollow.emit(i))})("onAddNotification",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddNotification.emit(i))})("onAddComment",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddComment.emit(i))})("onAddReply",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onAddReply.emit(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onClickUserImg.emit(i))}),c.qZA()}2&n&&c.Q6J("post",e.$implicit)}const nJ=function(n){return{unscrollable:n}};let rJ=(()=>{class n{constructor(){this.onClosePostsModal=new c.vpe,this.onToggleLike=new c.vpe,this.onToggleFollow=new c.vpe,this.onAddNotification=new c.vpe,this.onAddComment=new c.vpe,this.onAddReply=new c.vpe,this.onClickUserImg=new c.vpe,this.isLikedByUsersClicked=!1}ngOnInit(){}trackByPostId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["posts-modal"]],inputs:{userPosts:"userPosts"},outputs:{onClosePostsModal:"onClosePostsModal",onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment",onAddReply:"onAddReply",onClickUserImg:"onClickUserImg"},decls:6,vars:5,consts:[[1,"posts-modal",3,"ngClass"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[3,"post","onClickLikedByUsers","onCloseLikedByUsers","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","onClickLikedByUsers","onCloseLikedByUsers","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"button",1),c.NdJ("click",function(){return i.onClosePostsModal.emit(!1)}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"ul"),c.YNc(5,tJ,1,1,"post-card",4),c.qZA()()),2&r&&(c.Q6J("ngClass",c.VKq(3,nJ,i.isLikedByUsersClicked)),c.xp6(5),c.Q6J("ngForOf",i.userPosts)("ngForTrackBy",i.trackByPostId))},dependencies:[Di,Si,BB],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;background-color:#000;height:100%;width:100%;overflow:auto}@media (min-width: 600px){[_nghost-%COMP%]{width:calc(100% - 75px);left:75px;display:grid;justify-content:center}}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]{height:calc(100% + 1px);display:grid;grid-template-rows:auto 1fr;position:relative}@media (min-width: 600px){[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]{width:500px;padding-block-start:15px;padding-block-end:25px}}[_nghost-%COMP%]   .posts-modal.unscrollable[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{border:none;background-color:transparent;position:fixed;z-index:130;top:85px;right:27px;cursor:pointer}@media (min-width: 600px){[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:sticky;grid-row:1;top:40px;right:10px;justify-self:end}}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto;gap:3em;position:relative;padding-block:4.7em}@media (min-width: 600px){[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-block:unset;width:100%}}"]})}return n})();const iJ=function(n){return{disabled:n}};let sJ=(()=>{class n{constructor(t){this.userService=t,this.onBack=new c.vpe,this.onSubmitUserEdit=new c.vpe,this.isImgUrlChanged=!1}ngOnInit(){this.userFromDBToEdit=Nb(this.userFromDB)}submitUserEdit(){this.onSubmitUserEdit.emit(this.userFromDBToEdit)}onUploadUserPicture(){var t=this;return(0,U.Z)(function*(){try{const r=yield t.userService.uploadMedia();r&&(t.userFromDBToEdit.imgUrl=r),t.isImgUrlChanged=!0}catch(r){console.error(r)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Sc))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["edit-profile-modal"]],hostAttrs:[1,"page-cmp-layout"],inputs:{userFromDB:"userFromDB"},outputs:{onBack:"onBack",onSubmitUserEdit:"onSubmitUserEdit"},decls:19,vars:6,consts:[[1,"edit-profile-modal"],["_ngcontent-ng-c994055254","","title","Back",1,"btn-back",3,"click"],["_ngcontent-ng-c994055254","","aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["_ngcontent-ng-c994055254","","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["_ngcontent-ng-c994055254","","fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"user-image"],[1,"content"],["alt","user-image",3,"src","click"],[3,"click"],[1,"edit-user-form"],[3,"ngSubmit"],[1,"user-full-name"],["for","full-name"],["type","text","name","full-name","id","full-name",3,"ngModel","ngModelChange"],["fullName",""],["type","submit",1,"btn-submit",3,"disabled","ngClass"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0)(1,"button",1),c.NdJ("click",function(){return i.onBack.emit()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"line",3)(4,"polyline",4),c.qZA()(),c.kcU(),c.TgZ(5,"div",5)(6,"div",6)(7,"img",7),c.NdJ("click",function(){return i.onUploadUserPicture()}),c.qZA(),c.TgZ(8,"span",8),c.NdJ("click",function(){return i.onUploadUserPicture()}),c._uU(9,"Edit picture"),c.qZA()()(),c.TgZ(10,"div",9)(11,"form",10),c.NdJ("ngSubmit",function(){return i.submitUserEdit()}),c.TgZ(12,"div",11)(13,"label",12),c._uU(14,"Name"),c.qZA(),c.TgZ(15,"input",13,14),c.NdJ("ngModelChange",function(u){return i.userFromDBToEdit.fullName=u}),c.qZA()(),c.TgZ(17,"button",15),c._uU(18," Save "),c.qZA()()()()),2&r&&(c.xp6(7),c.Q6J("src",i.userFromDBToEdit.imgUrl,c.LSH),c.xp6(8),c.Q6J("ngModel",i.userFromDBToEdit.fullName),c.xp6(2),c.Q6J("disabled",!i.isImgUrlChanged&&i.userFromDB.fullName===i.userFromDBToEdit.fullName)("ngClass",c.VKq(4,iJ,!i.isImgUrlChanged&&i.userFromDB.fullName===i.userFromDBToEdit.fullName)))},dependencies:[Di,vg,Ra,ou,_g,xc,au],styles:["[_nghost-%COMP%]{height:calc(100vh - 121px);width:100%;background-color:#000;position:fixed;left:0;top:61px}@media (min-width: 600px){[_nghost-%COMP%]{height:100%;top:0;left:75px;width:calc(100% - 75px);display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr)}}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]{padding-block:1em;display:flex;flex-direction:column;gap:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]{height:100%;padding-block:2.3em}}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:unset;border:none;cursor:pointer;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center;gap:.5em}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:80px;cursor:pointer;object-fit:cover;aspect-ratio:1/1}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#0095f6;font-size:14px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .user-full-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;justify-content:space-between;height:45px;border-block:1px solid rgba(245,245,245,.151)}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .user-full-name[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;font-size:16px;flex:1;height:100%;display:flex;align-items:center}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .user-full-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background-color:transparent;flex:3;height:100%;font-size:16px;border-radius:unset;color:#f5f5f5;font-style:italic}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{cursor:pointer;border:none;color:#f5f5f5;background-color:#0095f6;font-size:18px;margin-block-start:2em;height:40px;width:-moz-fit-content;width:fit-content;padding-inline:1.5em;border-radius:.5em}[_nghost-%COMP%]   .edit-profile-modal[_ngcontent-%COMP%]   .edit-user-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-submit.disabled[_ngcontent-%COMP%]{background-color:#8f8f8f;cursor:not-allowed}"]})}return n})();function oJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",15)(1,"button",16),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isEditProfileModalShown=!0)}),c._uU(2," Edit profile "),c.qZA()()}}function aJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"article",17),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isPostsModalShown=!0)}),c._UZ(1,"img",18),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(1),c.Tol(t.filterSelected),c.Q6J("src",t.imgUrl,c.LSH)}}function cJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"posts-modal",19),c.NdJ("onClosePostsModal",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isPostsModalShown=!1)})("onToggleLike",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleLike(i))})("onToggleFollow",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleFollow(i))})("onAddNotification",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddNotification(i))})("onAddComment",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddComment(i))})("onAddReply",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onAddReply(i))})("onClickUserImg",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.navigateToUserProfile(i))})("onNavigateUserProfileFromComment",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.navigateUserProfileFromComment())})("onNavigateUserProfileFromLikedByUsers",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.navigateUserProfileFromLikedByUsers())}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("userPosts",t.userPosts)}}function lJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"edit-profile-modal",20),c.NdJ("onBack",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isEditProfileModalShown=!1)})("onSubmitUserEdit",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onUpdateUserProfile(i))}),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("userFromDB",t.userFromDB)}}const uJ=function(n){return{"no-edit-profile":n}};function dJ(n,e){if(1&n&&(c.TgZ(0,"section",1)(1,"div",2)(2,"div",3),c._UZ(3,"img",4),c.TgZ(4,"span"),c._uU(5),c.qZA()(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"span"),c._uU(10),c.qZA(),c.TgZ(11,"span"),c._uU(12,"Posts"),c.qZA()(),c.TgZ(13,"div",8)(14,"span"),c._uU(15),c.qZA(),c.TgZ(16,"span"),c._uU(17,"Followers"),c.qZA()(),c.TgZ(18,"div",9)(19,"span"),c._uU(20),c.qZA(),c.TgZ(21,"span"),c._uU(22,"Following"),c.qZA()()(),c.YNc(23,oJ,3,0,"div",10),c.qZA()(),c.TgZ(24,"div",11),c.YNc(25,aJ,2,3,"article",12),c.qZA(),c.YNc(26,cJ,1,1,"posts-modal",13),c.YNc(27,lJ,1,1,"edit-profile-modal",14),c.qZA()),2&n){const t=c.oxw();c.xp6(3),c.Q6J("src",t.userFromDB.imgUrl,c.LSH),c.xp6(2),c.Oqu(t.userFromDB.fullName),c.xp6(2),c.Q6J("ngClass",c.VKq(11,uJ,t.userFromDB._id!==t.loggedInUser.uid)),c.xp6(3),c.Oqu(t.userPosts.length),c.xp6(5),c.Oqu(t.userFromDB.followedByUsers.length),c.xp6(5),c.Oqu(t.userFromDB.followingUsers.length),c.xp6(3),c.Q6J("ngIf",t.userFromDB._id===t.loggedInUser.uid),c.xp6(2),c.Q6J("ngForOf",t.userPosts)("ngForTrackBy",t.trackByPostId),c.xp6(1),c.Q6J("ngIf",t.isPostsModalShown),c.xp6(1),c.Q6J("ngIf",t.isEditProfileModalShown)}}let hJ=(()=>{class n{constructor(t,r,i,o,u,f,g){this.userService=t,this.authService=r,this.postService=i,this.router=o,this.route=u,this.location=f,this.notificationService=g,this.isPostsModalShown=!1,this.isProfilePageInitialized=!1,this.isToggleLikeProcessing=!1,this.isEditProfileModalShown=!1,this.loggedInUser=this.authService.getLoggedInUser(),this.userService.setIsSearchModalShown(!1)}ngOnInit(){this.dataSubscription=this.route.data.pipe((0,yt.U)(t=>t.user)).subscribe({next:t=>{this.isProfilePageInitialized=!1,t?this.userFromDB=t:this.location.back(),this.getPostsForUser()}}),this.routerChangesSubscription=this.router.events.pipe(Cr(t=>t instanceof As)).subscribe(t=>{console.log("Navigation ended:",t.url),this.isPostsModalShown=!1})}getPostsForUser(){const t=this.postService.getPostsForUser(this.userFromDB._id);this.userPostsSubscription=t.subscribe({next:r=>{this.userPosts=r,this.isProfilePageInitialized=!0},error:r=>{console.error(r)}})}trackByPostId(t,r){return r._id}onToggleLike(t){var r=this;return(0,U.Z)(function*(){r.isToggleLikeProcessing||(r.isToggleLikeProcessing=!0,yield r.postService.toggleLike(t.isLikeClicked,t.post),r.isToggleLikeProcessing=!1)})()}onToggleFollow({isFollowClicked:t,user:r}){var i=this;this.authService.getUserById(r._id).pipe(kt(1)).subscribe(function(){var o=(0,U.Z)(function*(u){r=u,yield i.userService.toggleFollow(t,r)});return function(u){return o.apply(this,arguments)}}())}onAddNotification(t){var r=this;return(0,U.Z)(function*(){const i={sender:r.authService.getLoggedInUser().uid,recipient:t.creatorId,message:"",createdAt:0,madeAt:t,read:!1};yield r.notificationService.addNotification(i,"likeAction")})()}onAddComment({comment:t,post:r}){var i=this;return(0,U.Z)(function*(){yield i.postService.addComment(t,r)})()}onAddReply(t){var r=this;return(0,U.Z)(function*(){yield r.postService.addReply(t)})()}onUpdateUserProfile(t){this.userService.updateUserProfile(t),this.userFromDB=t,this.isEditProfileModalShown=!1}navigateToUserProfile(t){this.router.navigateByUrl(`profile/${t}`)}navigateUserProfileFromComment(){this.isPostsModalShown=!1}navigateUserProfileFromLikedByUsers(){console.log("hi"),this.isPostsModalShown=!1}ngOnDestroy(){this.userPostsSubscription?.unsubscribe(),this.dataSubscription?.unsubscribe(),this.routerChangesSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Sc),c.Y36(Xn),c.Y36(th),c.Y36(Mn),c.Y36(ma),c.Y36(De),c.Y36(aR))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["profile"]],decls:1,vars:1,consts:[["class","user-profile",4,"ngIf"],[1,"user-profile"],[1,"user-info"],[1,"user-image-profile"],["alt","loggedin user",3,"src"],[1,"user-data"],[1,"user-data-inner-container",3,"ngClass"],[1,"posts-count"],[1,"followers-count"],[1,"following-count"],["class","actions-profile",4,"ngIf"],[1,"user-posts"],["class","post-preview",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"userPosts","onClosePostsModal","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg","onNavigateUserProfileFromComment","onNavigateUserProfileFromLikedByUsers",4,"ngIf"],[3,"userFromDB","onBack","onSubmitUserEdit",4,"ngIf"],[1,"actions-profile"],[1,"btn-edit-profile",3,"click"],[1,"post-preview",3,"click"],["alt","post-preview",3,"src"],[3,"userPosts","onClosePostsModal","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg","onNavigateUserProfileFromComment","onNavigateUserProfileFromLikedByUsers"],[3,"userFromDB","onBack","onSubmitUserEdit"]],template:function(r,i){1&r&&c.YNc(0,dJ,28,13,"section",0),2&r&&c.Q6J("ngIf",i.isProfilePageInitialized&&i.userFromDB&&i.userPosts)},dependencies:[Di,Si,vn,rJ,sJ],styles:["[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]{padding-block:2em;display:flex;flex-direction:column;gap:2em;height:100%;position:relative}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding-inline:25px;gap:2em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5em;border-radius:50%}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]{display:flex;gap:1.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container.no-edit-profile[_ngcontent-%COMP%]{margin-block-start:1em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .actions-profile[_ngcontent-%COMP%]   .btn-edit-profile[_ngcontent-%COMP%]{border:none;height:2.1em;padding-inline:2em;border-radius:.4em;color:#f5f5f5;background-color:#363636;font-size:15px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:1px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]   .post-preview[_ngcontent-%COMP%]{display:flex;cursor:pointer}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]   .post-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:1/1;object-fit:cover}"]})}return n})(),VB=(()=>{class n{constructor(){this._isChatDetailsShown$=new lr.X(!1),this.isChatDetailsShown$=this._isChatDetailsShown$.asObservable()}setChatDetailsShown(t){this._isChatDetailsShown$.next(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gJ=(()=>{class n{transform(t){const r=new Date(t);return`${r.getHours().toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")} ${r.getDay()+1}/${r.getMonth()+1}/${r.getFullYear().toString().substring(2)}`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=c.Yjl({name:"formatTime",type:n,pure:!0})}return n})();function mJ(n,e){if(1&n&&c._UZ(0,"img",4),2&n){const t=c.oxw();c.Q6J("src",t.message.sentBy===t.loggedInUserFromDB._id?t.loggedInUserFromDB.imgUrl:t.participantUser.imgUrl,c.LSH)}}let _J=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}ngOnDestroy(){}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Xn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["message"]],inputs:{message:"message",participantUser:"participantUser",loggedInUserFromDB:"loggedInUserFromDB"},decls:9,vars:6,consts:[[1,"message",3,"ngClass"],["alt","user",3,"src",4,"ngIf"],[1,"txt"],[1,"time"],["alt","user",3,"src"]],template:function(r,i){1&r&&(c.TgZ(0,"li",0),c.YNc(1,mJ,1,1,"img",1),c.TgZ(2,"div",2)(3,"p"),c._uU(4),c.qZA()(),c.TgZ(5,"div",3)(6,"p"),c._uU(7),c.ALo(8,"formatTime"),c.qZA()()()),2&r&&(c.Q6J("ngClass",i.message.sentBy===i.loggedInUserFromDB._id?"loggedInUser":"participant"),c.xp6(1),c.Q6J("ngIf",i.message.sentBy!==i.loggedInUserFromDB._id),c.xp6(3),c.Oqu(i.message.txt),c.xp6(3),c.Oqu(c.lcZ(8,4,i.message.sentAt)))},dependencies:[Di,vn,gJ],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:.6em;width:100%}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5em;border-radius:50%;margin-block-end:.2em;cursor:pointer}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{border-radius:1.4em;padding-inline:1em;padding-block:.5em;font-size:17px;overflow-wrap:break-word;max-width:200px}@media (min-width: 600px){[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{max-width:300px}}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:11px;margin-block-end:.2em}[_nghost-%COMP%]   .message.loggedInUser[_ngcontent-%COMP%]{flex-direction:row-reverse}[_nghost-%COMP%]   .message.loggedInUser[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{background:linear-gradient(to left,rgb(38,38,38),rgb(49,49,49))}[_nghost-%COMP%]   .message.participant[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{background:linear-gradient(to right,rgb(55,151,240),rgb(100,180,255))}"]})}return n})();const yJ=["messageList"];function vJ(n,e){if(1&n&&c._UZ(0,"message",3),2&n){const t=e.$implicit,r=c.oxw();c.Q6J("message",t)("loggedInUserFromDB",r.loggedInUserFromDB)("participantUser",r.participantUser)}}let CJ=(()=>{class n{constructor(t){this.chatService=t}ngOnInit(){this.getChatMessages()}getChatMessages(){this.chatService.getMessagesByChatId(this.chat._id).subscribe({next:t=>{this.messages=t,this.scrollToBottom()}})}scrollToBottom(){console.log(this.elMessageList),this.elMessageList&&(this.elMessageList.nativeElement.scrollTop=this.elMessageList.nativeElement.scrollHeight)}trackByMessageId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Vb))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["message-list"]],viewQuery:function(r,i){if(1&r&&c.Gf(yJ,5),2&r){let o;c.iGM(o=c.CRH())&&(i.elMessageList=o.first)}},inputs:{chat:"chat",participantUser:"participantUser",loggedInUserFromDB:"loggedInUserFromDB"},decls:3,vars:2,consts:[[1,"message-list"],["messageList",""],[3,"message","loggedInUserFromDB","participantUser",4,"ngFor","ngForOf","ngForTrackBy"],[3,"message","loggedInUserFromDB","participantUser"]],template:function(r,i){1&r&&(c.TgZ(0,"ul",0,1),c.YNc(2,vJ,1,3,"message",2),c.qZA()),2&r&&(c.xp6(2),c.Q6J("ngForOf",i.messages)("ngForTrackBy",i.trackByMessageId))},dependencies:[Si,_J],styles:["[_nghost-%COMP%]{width:100%;display:block}[_nghost-%COMP%]   .message-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.4em;width:100%;padding-block:4em}"]})}return n})();function wJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",1)(1,"div",2)(2,"button",3),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.goBack())}),c.O4$(),c.TgZ(3,"svg",4),c._UZ(4,"line",5)(5,"polyline",6),c.qZA()(),c.kcU(),c.TgZ(6,"div",7),c._UZ(7,"img",8),c.TgZ(8,"span"),c._uU(9),c.qZA()()(),c._UZ(10,"message-list",9),c.TgZ(11,"form",10),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.onAddMessage())}),c._UZ(12,"img",11),c.TgZ(13,"input",12),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.message.txt=i)}),c.qZA(),c.TgZ(14,"button",13),c._uU(15,"Send"),c.qZA()()()}if(2&n){const t=c.oxw();c.xp6(7),c.Q6J("src",t.participantUser.imgUrl,c.LSH),c.xp6(2),c.Oqu(t.participantUser.fullName),c.xp6(1),c.Q6J("chat",t.chat)("loggedInUserFromDB",t.loggedInUserFromDB)("participantUser",t.participantUser),c.xp6(2),c.Q6J("src",t.loggedInUserFromDB.imgUrl,c.LSH),c.xp6(1),c.Q6J("ngModel",t.message.txt)}}let IJ=(()=>{class n{constructor(t,r,i,o,u){this.route=t,this.location=r,this.authService=i,this.chatService=o,this.sharedState=u,this.isComponentInitialized=!1,this.message={_id:"",chatId:"",sentAt:0,sentBy:this.authService.getLoggedInUser().uid,txt:""}}ngOnInit(){var t=this;return(0,U.Z)(function*(){var r;t.sharedState.setChatDetailsShown(!0),t.dataSubscription=t.route.data.pipe((0,yt.U)(r=>r.chat)).subscribe({next:r=>{r?t.chat=r:t.location.back(),r&&(t.message.chatId=r._id)}}),t.paramsSubscription=t.route.params.subscribe({next:(r=(0,U.Z)(function*(i){i.chatId?t.chatId=i.chatId:t.location.back()}),function(o){return r.apply(this,arguments)})}),yield t.getLoggedInUserFromDB(),yield t.getParticipantUser(),t.isComponentInitialized=!0})()}onAddMessage(){var t=this;return(0,U.Z)(function*(){const r=Nb(t.message);yield t.chatService.addMessageToChat(t.chat._id,r),t.message.txt=""})()}getLoggedInUserFromDB(){var t=this;return(0,U.Z)(function*(){const r=t.authService.getUserById(t.authService.getLoggedInUser().uid);t.loggedInUserFromDB=yield Dn(r)})()}getParticipantUser(){var t=this;return(0,U.Z)(function*(){let r=t.chat.users.filter(o=>o!==t.loggedInUserFromDB._id)[0];const i=t.authService.getUserById(r);t.participantUser=yield Dn(i)})()}goBack(){this.location.back()}ngOnDestroy(){this.paramsSubscription?.unsubscribe(),this.dataSubscription?.unsubscribe(),this.sharedState.setChatDetailsShown(!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(ma),c.Y36(De),c.Y36(Xn),c.Y36(Vb),c.Y36(VB))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["chat-details"]],hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","chat-details",4,"ngIf"],[1,"chat-details"],[1,"header"],["title","Back",1,"btn-back",3,"click"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"participant-user"],["alt","Participant",3,"src"],[3,"chat","loggedInUserFromDB","participantUser"],[1,"add-message",3,"ngSubmit"],["alt","loggedInUser",3,"src"],["type","text","name","message","id","message","placeholder","Message...",3,"ngModel","ngModelChange"],[1,"btn-send"]],template:function(r,i){1&r&&c.YNc(0,wJ,16,7,"section",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[vn,vg,Ra,ou,_g,xc,au,CJ],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]{padding-block:1.4em;width:100%}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;border-block-end:1px solid rgba(245,245,245,.29);width:100%;position:fixed;left:0;top:0;z-index:999;background-color:#000;height:61px;padding-inline:25px}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:unset;border:none;display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#fff}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .participant-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .participant-user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;aspect-ratio:1/1;object-fit:cover;border-radius:50%;cursor:pointer}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .participant-user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;position:fixed;left:0;bottom:0;background-color:#000;height:61px;width:100%;padding-inline:25px;border-block-start:1px solid rgba(245,245,245,.24);z-index:999}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%;object-fit:cover;aspect-ratio:1/1;cursor:pointer}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   #message[_ngcontent-%COMP%]{width:100%;height:100%;background-color:unset;border:none;font-size:16px;color:#f5f5f5}[_nghost-%COMP%]   .chat-details[_ngcontent-%COMP%]   .add-message[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder;background-color:unset;border:none;height:100%;color:#0095f6;cursor:pointer}"]})}return n})();const EJ=[{path:"chat/:chatId",component:IJ,canActivate:[uv],resolve:{chat:function bJ(n){const e=n.params.chatId;return(0,c.f3M)(Vb).getChatById(e).pipe(kt(1))}}},{path:"chat",component:jQ,canActivate:[uv]},{path:"notification",component:ZQ,canActivate:[uv]},{path:"create-post",component:eJ,canActivate:[uv]},{path:"profile/:userId",component:hJ,canActivate:[uv],resolve:{user:function pJ(n){const e=n.params.userId;return(0,c.f3M)(Xn).getUserById(e)}}},{path:"login",component:FQ,canActivate:[()=>!(0,c.f3M)(Xn).getLoggedInUser()||(console.error("LoggedInUser exists - no access to login page!"),(0,c.f3M)(Mn).navigateByUrl("/"),!1)]},{path:"",component:kQ,canActivate:[uv]}];let TJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Fm.forRoot(EJ,{useHash:!0}),Fm]})}return n})();const MJ=function(n,e){return{"btn-toggle-follow-following":n,disabled:e}};function DJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleFollow())}),c._uU(1),c.qZA()}if(2&n){const t=c.oxw(2);c.Q6J("ngClass",c.WLB(3,MJ,t.isFollowClicked,t.isToggleFollowProcessing))("disabled",t.isToggleFollowProcessing),c.xp6(1),c.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function SJ(n,e){if(1&n&&(c.TgZ(0,"li")(1,"div",1),c._UZ(2,"img",2),c.TgZ(3,"div",3)(4,"span"),c._uU(5),c.qZA()()(),c.YNc(6,DJ,2,6,"button",4),c.qZA()),2&n){const t=c.oxw();c.xp6(2),c.Q6J("src",t.user.imgUrl,c.LSH),c.xp6(3),c.Oqu(t.user.fullName),c.xp6(1),c.Q6J("ngIf",t.loggedInUser._id!==t.user._id)}}let AJ=(()=>{class n{constructor(t){this.authService=t,this.toggleFollow=new c.vpe,this.isComponentInitialized=!1,this.isToggleFollowProcessing=!1}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=t.authService.getLoggedInUser(),i=t.authService.getUserById(r.uid).pipe(kt(1));t.loggedInUser=yield Dn(i),t.isFollowClicked=!!t.loggedInUser.followingUsers.find(o=>o===t.user._id),t.isComponentInitialized=!0})()}ngOnChanges(t){t.user.firstChange||t.user&&(this.isFollowClicked=this.user.followedByUsers.includes(this.loggedInUser._id))}onToggleFollow(){this.isToggleFollowProcessing||(this.isToggleFollowProcessing=!0,this.isFollowClicked=!this.isFollowClicked,this.toggleFollow.emit({isFollowClicked:this.isFollowClicked,user:this.user}),this.isToggleFollowProcessing=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Xn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["user-row-search-modal"]],inputs:{user:"user"},outputs:{toggleFollow:"toggleFollow"},features:[c.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"user-content"],["alt","loggedInUser",3,"src"],[1,"content"],["class","btn-toggle-follow",3,"ngClass","disabled","click",4,"ngIf"],[1,"btn-toggle-follow",3,"ngClass","disabled","click"]],template:function(r,i){1&r&&c.YNc(0,SJ,7,3,"li",0),2&r&&c.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Di,vn],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5em;border-radius:50%}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{border:none;font-size:16px;height:2em;padding-inline:1em;border-radius:.3em;background-color:#0095f6;color:#f5f5f5;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow-following[_ngcontent-%COMP%]{background-color:#919191}"]})}return n})();function xJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"user-row-search-modal",5),c.NdJ("toggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.toggleFollow.emit(i))}),c.qZA()}2&n&&c.Q6J("user",e.$implicit)}let jB=(()=>{class n{constructor(t){this.renderer=t,this.closeModal=new c.vpe,this.getUsers=new c.vpe,this.toggleFollow=new c.vpe}ngOnInit(){this.renderer.addClass(document.body,"body-unscrollable"),this.getUsers.emit()}onCloseModal(){this.closeModal.emit(!1)}trackByUserId(t,r){return r._id}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(c.Qsj))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["search-modal"]],inputs:{users:"users"},outputs:{closeModal:"closeModal",getUsers:"getUsers",toggleFollow:"toggleFollow"},decls:6,vars:2,consts:[[1,"search-modal"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[3,"user","toggleFollow",4,"ngFor","ngForOf","ngForTrackBy"],[3,"user","toggleFollow"]],template:function(r,i){1&r&&(c.TgZ(0,"div",0)(1,"button",1),c.NdJ("click",function(){return i.onCloseModal()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"ul"),c.YNc(5,xJ,1,1,"user-row-search-modal",4),c.qZA()()),2&r&&(c.xp6(5),c.Q6J("ngForOf",i.users)("ngForTrackBy",i.trackByUserId))},dependencies:[Si,AJ],styles:["[_nghost-%COMP%]{position:fixed;top:61px;left:0;width:100%;height:100%;background-color:#000;overflow:auto;display:grid;grid-template-columns:25px 1fr 25px}@media (min-width: 600px){[_nghost-%COMP%]{grid-template-columns:unset;display:block;position:unset;left:75px;grid-column:2;grid-row:3;overflow:unset}}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]{grid-column:2;padding-block:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-block:unset}}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:fixed;top:88px;right:29px;border:none;width:-moz-fit-content;width:fit-content;background-color:transparent;display:flex;align-items:center;padding-inline-start:.8em;padding-block-end:.8em;align-self:end;cursor:pointer;z-index:200}@media (min-width: 600px){[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:sticky;top:115px}}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.3em;position:relative;padding-block-end:8em;padding-block-start:2em}@media (min-width: 600px){[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-block-start:unset;padding-block-end:unset}}"]})}return n})();function PJ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",40),c._UZ(1,"path",41),c.qZA())}function OJ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",40),c._UZ(1,"path",42),c.qZA())}function kJ(n,e){if(1&n&&c._UZ(0,"img",43),2&n){const t=c.oxw(2);c.Q6J("src",t.user.providerData[0].photoURL,c.LSH)}}function NJ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",44),c._UZ(1,"path",45)(2,"circle",46),c.qZA())}function RJ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",47)(1,"ul")(2,"li",48),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onLogOut())}),c._uU(3,"Log out"),c.qZA()()()}}function FJ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",49)(1,"div",50),c.O4$(),c.TgZ(2,"svg",51)(3,"title"),c._uU(4,"Search"),c.qZA(),c._UZ(5,"path",13)(6,"line",14),c.qZA(),c.kcU(),c.TgZ(7,"input",52),c.NdJ("ngModelChange",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.filterBy.account=i)})("input",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.getUsers())})("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onToggleSearchModal(!0))}),c.qZA()(),c.TgZ(8,"search-modal",53),c.NdJ("closeModal",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleSearchModal(i))})("getUsers",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.getUsers())})("toggleFollow",function(i){c.CHM(t);const o=c.oxw(2);return c.KtG(o.onToggleFollow(i))}),c.qZA()()}if(2&n){const t=c.oxw(2);c.xp6(7),c.Q6J("ngModel",t.filterBy.account),c.xp6(1),c.Q6J("users",t.users)}}const LJ=function(){return{exact:!0}},UJ=function(n){return{"search-active":n}};function BJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",1)(1,"div",2)(2,"div",3),c.O4$(),c.TgZ(3,"svg",4),c._UZ(4,"path",5),c.qZA()(),c.kcU(),c.TgZ(5,"nav")(6,"ul")(7,"li",6,7),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(8);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.O4$(),c.TgZ(9,"svg",8),c._UZ(10,"path",9),c.qZA()(),c.kcU(),c.TgZ(11,"li",10,11),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(8),o=c.MAs(19),u=c.MAs(24),f=c.MAs(28),g=c.MAs(34),v=c.oxw();return v.onToggleSearchModal(!0),c.KtG(v.onClickSearchModal([i,o,u,f,g]))}),c.O4$(),c.TgZ(13,"svg",12)(14,"title"),c._uU(15,"\u05d7\u05d9\u05e4\u05d5\u05e9"),c.qZA(),c._UZ(16,"path",13)(17,"line",14),c.qZA()(),c.kcU(),c.TgZ(18,"li",15,16),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(19);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.O4$(),c.TgZ(20,"svg",17),c._UZ(21,"path",18)(22,"path",19),c.qZA()(),c.kcU(),c.TgZ(23,"li",20,21),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(24);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.YNc(25,PJ,2,0,"svg",22),c.YNc(26,OJ,2,0,"svg",22),c.qZA(),c.TgZ(27,"li",23,24),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(28);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.O4$(),c.TgZ(29,"svg",25),c._UZ(30,"path",26)(31,"line",27)(32,"line",28),c.qZA()(),c.kcU(),c.TgZ(33,"li",29,30),c.NdJ("click",function(){c.CHM(t);const i=c.MAs(34);return c.oxw().onToggleSearchModal(!1),c.KtG(!i.classList.contains("active")&&i.classList.add("active"))}),c.YNc(35,kJ,1,1,"img",31),c.YNc(36,NJ,3,0,"ng-template",null,32,c.W1O),c.qZA()()()(),c.TgZ(38,"div",33),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),c.O4$(),c.TgZ(39,"svg",34),c._UZ(40,"line",35)(41,"line",36)(42,"line",37),c.qZA(),c.YNc(43,RJ,4,0,"div",38),c.qZA(),c.YNc(44,FJ,9,2,"div",39),c.qZA()}if(2&n){const t=c.MAs(24),r=c.MAs(37),i=c.oxw();c.xp6(7),c.Q6J("routerLinkActiveOptions",c.DdM(9,LJ)),c.xp6(4),c.Q6J("ngClass",c.VKq(10,UJ,i.isSearchModalShown)),c.xp6(14),c.Q6J("ngIf",!t.classList.contains("active")),c.xp6(1),c.Q6J("ngIf",t.classList.contains("active")),c.xp6(7),c.MGl("routerLink","/profile/",i.user.uid,""),c.xp6(2),c.Q6J("ngIf",i.user.providerData[0].photoURL)("ngIfElse",r),c.xp6(8),c.Q6J("ngIf",i.isExtraMenuOpen),c.xp6(1),c.Q6J("ngIf",i.isSearchModalShown)}}let VJ=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.userService=i,this.isExtraMenuOpen=!1,this.isSearchModalShown=!1,this.filterBy={account:""}}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}}),this.userService.isSearchModalShown$.subscribe({next:t=>{this.isSearchModalShown=t}})}getUsers(){this.usersSubscription?.unsubscribe(),this.usersSubscription=this.userService.getUsers(this.filterBy).subscribe({next:t=>{this.users=t}})}onToggleSearchModal(t){this.userService.setIsSearchModalShown(t)}onToggleFollow({isFollowClicked:t,user:r}){var i=this;return(0,U.Z)(function*(){const o=i.authService.getUserById(r._id).pipe(kt(1));r=yield Dn(o),yield i.userService.toggleFollow(t,r)})()}onClickSearchModal(t){t.forEach(r=>{r.classList.remove("active")})}onLogOut(){var t=this;return(0,U.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription?.unsubscribe(),this.usersSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Xn),c.Y36(Mn),c.Y36(Sc))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions","click"],["elHome",""],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["title","Search",1,"search",3,"ngClass","click"],["elSearch",""],["aria-label","\u05d7\u05d9\u05e4\u05d5\u05e9","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["d","M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","16.511","x2","22","y1","16.511","y2","22"],["routerLink","/chat","routerLinkActive","active","title","Messages",1,"messages",3,"click"],["elMessages",""],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications",3,"click"],["elNotifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post",3,"click"],["elCreatePost",""],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLinkActive","active","title","Profile",1,"profile",3,"routerLink","click"],["elProfile",""],["alt","loggedInUser",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["class","search-container",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","loggedInUser",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"],[1,"search-container"],[1,"header"],["aria-label","Search","fill","currentColor","height","16","role","img","viewBox","0 0 24 24","width","16",1,"x1lliihq","x1n2onr6","x1cp0k07"],["type","search","name","search","id","search","placeholder","Search",3,"ngModel","ngModelChange","input","click"],[3,"users","closeModal","getUsers","toggleFollow"]],template:function(r,i){1&r&&c.YNc(0,BJ,45,12,"section",0),2&r&&c.Q6J("ngIf",i.user)},dependencies:[Di,vn,Tf,Mf,Ra,ou,xc,jB],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;z-index:99;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.19);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:fixed;top:0;left:75px;width:calc(100% - 75px);height:100%;display:grid;grid-template-columns:minmax(25px,1fr) minmax(auto,500px) minmax(25px,1fr);grid-template-rows:50px 65px 1fr 50px;overflow:auto;background-color:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{grid-column:2;grid-row:2;display:flex;align-items:center;background-color:#262626;border-radius:.5em;gap:.5em;height:40px;padding-inline:1em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.2)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]{background-color:transparent;border:none;height:100%;color:#f5f5f5;font-size:16px;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]::placeholder{font-size:16px;font-style:italic;color:#919191}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.search-active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:60px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function jJ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",27),c._UZ(1,"path",28),c.qZA())}function $J(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",27),c._UZ(1,"path",29),c.qZA())}function HJ(n,e){if(1&n&&c._UZ(0,"img",30),2&n){const t=c.oxw(2);c.Q6J("src",t.loggedInUser.photoURL,c.LSH)}}function zJ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",31),c._UZ(1,"path",32)(2,"circle",33),c.qZA())}function GJ(n,e){if(1&n){const t=c.EpF();c.O4$(),c.kcU(),c.TgZ(0,"div",34)(1,"ul")(2,"li",35),c.NdJ("click",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.onLogOut())}),c._uU(3," Log out "),c.qZA()()()}}const qJ=function(){return{exact:!0}};function WJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),c.O4$(),c.TgZ(5,"svg",4),c._UZ(6,"path",5),c.qZA()(),c.kcU(),c.TgZ(7,"li",6),c.O4$(),c.TgZ(8,"svg",7),c._UZ(9,"path",8)(10,"path",9),c.qZA()(),c.kcU(),c.TgZ(11,"li",10,11),c.YNc(13,jJ,2,0,"svg",12),c.YNc(14,$J,2,0,"svg",12),c.qZA(),c.TgZ(15,"li",13),c.O4$(),c.TgZ(16,"svg",14),c._UZ(17,"path",15)(18,"line",16)(19,"line",17),c.qZA()(),c.kcU(),c.TgZ(20,"li",18),c.YNc(21,HJ,1,1,"img",19),c.YNc(22,zJ,3,0,"ng-template",null,20,c.W1O),c.qZA(),c.TgZ(24,"li",21),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),c.O4$(),c.TgZ(25,"svg",22),c._UZ(26,"line",23)(27,"line",24)(28,"line",25),c.qZA(),c.YNc(29,GJ,4,0,"div",26),c.qZA()()()()()}if(2&n){const t=c.MAs(12),r=c.MAs(23),i=c.oxw();c.xp6(4),c.Q6J("routerLinkActiveOptions",c.DdM(7,qJ)),c.xp6(9),c.Q6J("ngIf",!t.classList.contains("active")),c.xp6(1),c.Q6J("ngIf",t.classList.contains("active")),c.xp6(6),c.MGl("routerLink","/profile/",i.loggedInUser.uid,""),c.xp6(1),c.Q6J("ngIf",i.loggedInUser.photoURL)("ngIfElse",r),c.xp6(8),c.Q6J("ngIf",i.isExtraMenuOpen)}}let ZJ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.loggedInUser=t:(this.loggedInUser=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,U.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Xn),c.Y36(Mn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/chat","routerLinkActive","active","title","Chats",1,"chats"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLinkActive","active","title","Profile",1,"profile",3,"routerLink"],["alt","loggedInUser",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","loggedInUser",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&c.YNc(0,WJ,30,8,"section",0),2&r&&c.Q6J("ngIf",i.loggedInUser)},dependencies:[vn,Tf,Mf],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;left:0;z-index:199;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#262626;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})();function KJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"search-modal",10),c.NdJ("closeModal",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleSearchModal(i))})("getUsers",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.getUsers())})("toggleFollow",function(i){c.CHM(t);const o=c.oxw();return c.KtG(o.onToggleFollow(i))}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("users",t.users)}}let YJ=(()=>{class n{constructor(t,r,i){this.router=t,this.userService=r,this.authService=i,this.filterBy={account:""}}ngOnInit(){this.searchModalSubscription=this.userService.isSearchModalShown$.subscribe({next:t=>{this.isSearchModalShown=t,this.filterBy.account=""}})}onClickLogo(){this.router.navigateByUrl("/")}getUsers(){this.usersSubscription?.unsubscribe(),this.usersSubscription=this.userService.getUsers(this.filterBy).subscribe({next:t=>{this.users=t}})}onToggleSearchModal(t){this.userService.setIsSearchModalShown(t)}onToggleFollow({isFollowClicked:t,user:r}){var i=this;return(0,U.Z)(function*(){const o=i.authService.getUserById(r._id).pipe(kt(1));r=yield Dn(o),yield i.userService.toggleFollow(t,r)})()}ngOnDestroy(){this.searchModalSubscription?.unsubscribe(),this.usersSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Mn),c.Y36(Sc),c.Y36(Xn))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-header-mobile"]],decls:12,vars:2,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[1,"search-container"],["aria-label","Search","fill","currentColor","height","16","role","img","viewBox","0 0 24 24","width","16",1,"x1lliihq","x1n2onr6","x1cp0k07"],["d","M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","16.511","x2","22","y1","16.511","y2","22"],["type","search","name","search","id","search","placeholder","Search",3,"ngModel","ngModelChange","input","click"],[3,"users","closeModal","getUsers","toggleFollow",4,"ngIf"],[3,"users","closeModal","getUsers","toggleFollow"]],template:function(r,i){1&r&&(c.TgZ(0,"header",0)(1,"div",1),c.NdJ("click",function(){return i.onClickLogo()}),c.O4$(),c.TgZ(2,"svg",2),c._UZ(3,"path",3),c.qZA()(),c.kcU(),c.TgZ(4,"div",4),c.O4$(),c.TgZ(5,"svg",5)(6,"title"),c._uU(7,"Search"),c.qZA(),c._UZ(8,"path",6)(9,"line",7),c.qZA(),c.kcU(),c.TgZ(10,"input",8),c.NdJ("ngModelChange",function(u){return i.filterBy.account=u})("input",function(){return i.getUsers()})("click",function(){return i.onToggleSearchModal(!0)}),c.qZA(),c.YNc(11,KJ,1,1,"search-modal",9),c.qZA()()),2&r&&(c.xp6(10),c.Q6J("ngModel",i.filterBy.account),c.xp6(1),c.Q6J("ngIf",i.isSearchModalShown))},dependencies:[vn,Ra,ou,xc,jB],styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:199;top:0;left:0;border-block-end:1px solid rgba(255,255,255,.27);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px;gap:1em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em;background-color:#262626;height:2.5em;padding-inline:1em;border-radius:.5em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.2)}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]{background-color:transparent;border:none;height:100%;color:#f5f5f5;font-size:16px;width:100%}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]::placeholder{font-size:16px;font-style:italic;color:#919191}"]})}return n})();function QJ(n,e){1&n&&c._UZ(0,"router-outlet")}function JJ(n,e){1&n&&c._UZ(0,"app-header-mobile")}function XJ(n,e){1&n&&c._UZ(0,"aside-menu")}function eX(n,e){1&n&&(c.TgZ(0,"main",3),c._UZ(1,"router-outlet"),c.qZA())}function tX(n,e){1&n&&c._UZ(0,"menu-mobile")}let nX=(()=>{class n{constructor(t,r){this.router=t,this.sharedState=r,this.routerUrl=this.router.url,this.isChatDetailsShown=!1}ngOnInit(){var t=this;return(0,U.Z)(function*(){t.getIsChatDetailsShown(),t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof As&&(t.routerUrl=t.router.url)})})()}getIsChatDetailsShown(){this.chatDetailsSubscription=this.sharedState.isChatDetailsShown$.subscribe({next:t=>{this.isChatDetailsShown=t}})}ngOnDestroy(){this.routerUrlSubscription?.unsubscribe(),this.chatDetailsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(c.Y36(Mn),c.Y36(VB))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:7,consts:[[1,"app"],[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,i){1&r&&(c.TgZ(0,"section",0),c.YNc(1,QJ,1,0,"router-outlet",1),c.YNc(2,JJ,1,0,"app-header-mobile",1),c.YNc(3,XJ,1,0,"aside-menu",1),c.YNc(4,eX,2,0,"main",2),c.YNc(5,tX,1,0,"menu-mobile",1),c.qZA()),2&r&&(c.Tol("/login"===i.routerUrl?"main-app login-layout":"main-app app-layout"),c.xp6(1),c.Q6J("ngIf","/login"===i.routerUrl),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl&&!i.isChatDetailsShown),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl&&!i.isChatDetailsShown),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl),c.xp6(1),c.Q6J("ngIf","/login"!==i.routerUrl&&!i.isChatDetailsShown))},dependencies:[vn,df,VJ,ZJ,YJ],styles:["[_nghost-%COMP%]   .app[_ngcontent-%COMP%]{position:relative}"]})}return n})();class jS{}class $S{}class Pc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(u):this.headers.set(o,[u])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Pc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Pc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Pc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let u=this.headers.get(t);if(!u)return;u=u.filter(f=>-1===o.indexOf(f)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class rX{encodeKey(e){return $B(e)}encodeValue(e){return $B(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const sX=/%(\d[a-f0-9])/gi,oX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $B(n){return encodeURIComponent(n).replace(sX,(e,t)=>oX[t]??e)}function HS(n){return`${n}`}class sh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new rX,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function iX(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[u,f]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],g=t.get(u)||[];g.push(f),t.set(u,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(HS):[HS(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new sh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(HS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(HS(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class aX{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function HB(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function zB(n){return typeof Blob<"u"&&n instanceof Blob}function GB(n){return typeof FormData<"u"&&n instanceof FormData}class jb{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function cX(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Pc),this.context||(this.context=new aX),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+u}}else this.params=new sh,this.urlWithParams=t}serializeBody(){return null===this.body?null:HB(this.body)||zB(this.body)||GB(this.body)||function lX(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof sh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||GB(this.body)?null:zB(this.body)?this.body.type||null:HB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof sh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,v=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((T,S)=>T.set(S,e.setHeaders[S]),g)),e.setParams&&(v=Object.keys(e.setParams).reduce((T,S)=>T.set(S,e.setParams[S]),v)),new jb(t,r,o,{params:v,headers:g,context:b,reportProgress:f,responseType:i,withCredentials:u})}}var dv=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(dv||{});class DR{constructor(e,t=200,r="OK"){this.headers=e.headers||new Pc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class SR extends DR{constructor(e={}){super(e),this.type=dv.ResponseHeader}clone(e={}){return new SR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class hv extends DR{constructor(e={}){super(e),this.type=dv.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new hv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class qB extends DR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function AR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let uX=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof jb)o=t;else{let g,v;g=i.headers instanceof Pc?i.headers:new Pc(i.headers),i.params&&(v=i.params instanceof sh?i.params:new sh({fromObject:i.params})),o=new jb(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=(0,ut.of)(o).pipe(ko(g=>this.handler.handle(g)));if(t instanceof jb||"events"===i.observe)return u;const f=u.pipe(Cr(g=>g instanceof hv));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return f.pipe((0,yt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,yt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,yt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe((0,yt.U)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new sh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,AR(i,r))}post(t,r,i={}){return this.request("POST",t,AR(i,r))}put(t,r,i={}){return this.request("PUT",t,AR(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(jS))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function KB(n,e){return e(n)}function hX(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const pX=new c.OlP(""),$b=new c.OlP(""),YB=new c.OlP("");function gX(){let n=null;return(e,t)=>{null===n&&(n=((0,c.f3M)(pX,{optional:!0})??[]).reduceRight(hX,KB));const r=(0,c.f3M)(c.HDt),i=r.add();return n(e,t).pipe(rc(()=>r.remove(i)))}}let QB=(()=>{class n extends jS{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,c.f3M)(c.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get($b),...this.injector.get(YB,[])]));this.chain=i.reduceRight((o,u)=>function fX(n,e,t){return(r,i)=>t.runInContext(()=>e(r,o=>n(o,i)))}(o,u,this.injector),KB)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(rc(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG($S),c.LFG(c.lqb))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const vX=/^\)\]\}',?\n/;let XB=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new c.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,pn.D)(r.\u0275loadImpl()):(0,ut.of)(null)).pipe((0,En.w)(()=>new gi.y(o=>{const u=r.build();if(u.open(t.method,t.urlWithParams),t.withCredentials&&(u.withCredentials=!0),t.headers.forEach((Q,J)=>u.setRequestHeader(Q,J.join(","))),t.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Q=t.detectContentTypeHeader();null!==Q&&u.setRequestHeader("Content-Type",Q)}if(t.responseType){const Q=t.responseType.toLowerCase();u.responseType="json"!==Q?Q:"text"}const f=t.serializeBody();let g=null;const v=()=>{if(null!==g)return g;const Q=u.statusText||"OK",J=new Pc(u.getAllResponseHeaders()),Ee=function CX(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(u)||t.url;return g=new SR({headers:J,status:u.status,statusText:Q,url:Ee}),g},b=()=>{let{headers:Q,status:J,statusText:Ee,url:ze}=v(),Ne=null;204!==J&&(Ne=typeof u.response>"u"?u.responseText:u.response),0===J&&(J=Ne?200:0);let Ye=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof Ne){const gt=Ne;Ne=Ne.replace(vX,"");try{Ne=""!==Ne?JSON.parse(Ne):null}catch(At){Ne=gt,Ye&&(Ye=!1,Ne={error:At,text:Ne})}}Ye?(o.next(new hv({body:Ne,headers:Q,status:J,statusText:Ee,url:ze||void 0})),o.complete()):o.error(new qB({error:Ne,headers:Q,status:J,statusText:Ee,url:ze||void 0}))},T=Q=>{const{url:J}=v(),Ee=new qB({error:Q,status:u.status||0,statusText:u.statusText||"Unknown Error",url:J||void 0});o.error(Ee)};let S=!1;const N=Q=>{S||(o.next(v()),S=!0);let J={type:dv.DownloadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),"text"===t.responseType&&u.responseText&&(J.partialText=u.responseText),o.next(J)},q=Q=>{let J={type:dv.UploadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),o.next(J)};return u.addEventListener("load",b),u.addEventListener("error",T),u.addEventListener("timeout",T),u.addEventListener("abort",T),t.reportProgress&&(u.addEventListener("progress",N),null!==f&&u.upload&&u.upload.addEventListener("progress",q)),u.send(f),o.next({type:dv.Sent}),()=>{u.removeEventListener("error",T),u.removeEventListener("abort",T),u.removeEventListener("load",b),u.removeEventListener("timeout",T),t.reportProgress&&(u.removeEventListener("progress",N),null!==f&&u.upload&&u.upload.removeEventListener("progress",q)),u.readyState!==u.DONE&&u.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(bs))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const xR=new c.OlP("XSRF_ENABLED"),eV=new c.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),tV=new c.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class nV{}let bX=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=$a(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(c.LFG(Ie),c.LFG(c.Lbi),c.LFG(eV))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function EX(n,e){const t=n.url.toLowerCase();if(!(0,c.f3M)(xR)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,c.f3M)(nV).getToken(),i=(0,c.f3M)(tV);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var oh=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(oh||{});function TX(...n){const e=[uX,XB,QB,{provide:jS,useExisting:QB},{provide:$S,useExisting:XB},{provide:$b,useValue:EX,multi:!0},{provide:xR,useValue:!0},{provide:nV,useClass:bX}];for(const t of n)e.push(...t.\u0275providers);return(0,c.MR2)(e)}const rV=new c.OlP("LEGACY_INTERCEPTOR_FN");function MX(){return function wg(n,e){return{\u0275kind:n,\u0275providers:e}}(oh.LegacyInterceptors,[{provide:rV,useFactory:gX},{provide:$b,useExisting:rV,multi:!0}])}let DX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({providers:[TX(MX())]})}return n})();class PR{constructor(e){return e}}class GS{constructor(){return Rs("auth")}}const OR=new c.OlP("angularfire2.auth-instances");function NX(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new PR(r)}}const RX={provide:GS,deps:[[new c.FiY,OR]]},FX={provide:PR,useFactory:function kX(n,e){const t=Rl("auth",n,e);return t&&new PR(t)},deps:[[new c.FiY,OR],su]};let LX=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Nl.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[FX,RX]}),n})();function UX(n,...e){return{ngModule:LX,providers:[{provide:OR,useFactory:NX(n),multi:!0,deps:[c.R0b,c.zs3,Fl,tv,[new c.FiY,hg],...e]}]}}const BX=Dd(j6.o,!0);class kR{constructor(e){return e}}const sV="firestore",NR=new c.OlP("angularfire2.firestore-instances");function $X(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new kR(r)}}const HX={provide:class VX{constructor(){return Rs(sV)}},deps:[[new c.FiY,NR]]},zX={provide:kR,useFactory:function jX(n,e){const t=Rl(sV,n,e);return t&&new kR(t)},deps:[[new c.FiY,NR],su]};let GX=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Nl.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[zX,HX]}),n})();function qX(n,...e){return{ngModule:GX,providers:[{provide:NR,useFactory:$X(n),multi:!0,deps:[c.R0b,c.zs3,Fl,tv,[new c.FiY,GS],[new c.FiY,hg],...e]}]}}const WX=Dd(X$,!0),oV="@firebase/database";let RR="";class KX{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,z.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class YX{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const cV=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KX(e)}}catch{}return new YX},Ig=cV("localStorage"),FR=cV("sessionStorage"),fv=new Ri.Yd("@firebase/database"),lV=function(){let n=1;return function(){return n++}}(),uV=function(n){const e=(0,z.dS)(n),t=new z.gQ;t.update(e);const r=t.digest();return z.US.encodeByteArray(r)},Hb=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Hb.apply(null,r):e+="object"==typeof r?(0,z.Wl)(r):r,e+=" "}return e};let bg=null,dV=!0;const Ei=function(...n){if(!0===dV&&(dV=!1,null===bg&&!0===FR.get("logging_enabled")&&function(n,e){(0,z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(fv.logLevel=Ri.in.VERBOSE,bg=fv.log.bind(fv),e&&FR.set("logging_enabled",!0)):"function"==typeof n?bg=n:(bg=null,FR.remove("logging_enabled"))}(!0)),bg){const e=Hb.apply(null,n);bg(e)}},zb=function(n){return function(...e){Ei(n,...e)}},LR=function(...n){const e="FIREBASE INTERNAL ERROR: "+Hb(...n);fv.error(e)},Oc=function(...n){const e=`FIREBASE FATAL ERROR: ${Hb(...n)}`;throw fv.error(e),new Error(e)},ss=function(...n){const e="FIREBASE WARNING: "+Hb(...n);fv.warn(e)},qS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ah="[MIN_NAME]",cu="[MAX_NAME]",Eg=function(n,e){if(n===e)return 0;if(n===ah||e===cu)return-1;if(e===ah||n===cu)return 1;{const t=gV(n),r=gV(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},XX=function(n,e){return n===e?0:n<e?-1:1},Gb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,z.Wl)(e))},UR=function(n){if("object"!=typeof n||null===n)return(0,z.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,z.Wl)(e[r]),t+=":",t+=UR(n[e[r]]);return t+="}",t},fV=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const pV=function(n){(0,z.hu)(!qS(n),"Invalid JSON number");const r=1023;let i,o,u,f,g;0===n?(o=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=f+r,u=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(o=0,u=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(u%2?1:0),u=Math.floor(u/2);for(g=11;g;g-=1)v.push(o%2?1:0),o=Math.floor(o/2);v.push(i?1:0),v.reverse();const b=v.join("");let T="";for(g=0;g<64;g+=8){let S=parseInt(b.substr(g,8),2).toString(16);1===S.length&&(S="0"+S),T+=S}return T.toLowerCase()},ree=new RegExp("^-?(0*)\\d{1,10}$"),gV=function(n){if(ree.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},pv=function(n){try{n()}catch(e){setTimeout(()=>{throw ss("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},qb=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class aee{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ss(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class cee{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ei("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ss(e)}}let Wb=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const CV=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bV="websocket",EV="long_polling";class VR{constructor(e,t,r,i,o=!1,u="",f=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ig.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ig.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function TV(n,e,t){let r;if((0,z.hu)("string"==typeof e,"typeof type must == string"),(0,z.hu)("object"==typeof t,"typeof params must == object"),e===bV)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==EV)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function lee(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ti(t,(o,u)=>{i.push(o+"="+u)}),r+i.join("&")}class uee{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,z.p$)(this.counters_)}}const jR={},$R={};function HR(n){const e=n.toString();return jR[e]||(jR[e]=new uee),jR[e]}class hee{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&pv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ch{constructor(e,t,r,i,o,u,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zb(e),this.stats_=HR(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),TV(t,EV,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new hee(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zR((...o)=>{const[u,f,g,v,b]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=f,this.password=g;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[u,f]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&CV.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ch.forceAllow_=!0}static forceDisallow(){ch.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!ch.forceAllow_&&(ch.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,z.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,z.h$)(t),i=fV(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,z.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class zR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=lV(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=zR.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){Ei("frame writing exception"),f.stack&&Ei(f.stack),Ei(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ei("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ei("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let ZS=null;typeof MozWebSocket<"u"?ZS=MozWebSocket:typeof WebSocket<"u"&&(ZS=WebSocket);let gv=(()=>{class n{constructor(t,r,i,o,u,f,g){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zb(this.connId),this.stats_=HR(r),this.connURL=n.connectionURL_(r,f,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,u){const f={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&CV.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),o&&(f.ac=o),u&&(f.p=u),TV(t,bV,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ig.set("previous_websocket_failure",!0);try{let i;if((0,z.Yr)()){i={headers:{"User-Agent":`Firebase/5/${RR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,f=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new ZS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==ZS&&!n.forceDisallow_}static previouslyFailed(){return Ig.isInMemoryStorage||!0===Ig.get("previous_websocket_failure")}markConnectionHealthy(){Ig.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,z.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=fV(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),OV=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ch,gv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=gv&&gv.isAvailable();let i=r&&!gv.previouslyFailed();if(t.webSocketOnly&&(r||ss("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[gv];else{const o=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class BV{constructor(e,t,r,i,o,u,f,g,v,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zb("c:"+this.id+":"),this.transportManager_=new OV(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Gb("t",e),r=Gb("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Gb("t",e),r=Gb("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Gb("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?LR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):LR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ss("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),qb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ig.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class VV{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class jV{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class KS extends jV{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new KS}getInitialEvent(e){return(0,z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class _n{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ln(){return new _n("")}function Ht(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function lh(n){return n.pieces_.length-n.pieceNum_}function On(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new _n(n.pieces_,e)}function qR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Zb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function zV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new _n(e,0)}function sr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof _n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new _n(t,0)}function zt(n){return n.pieceNum_>=n.pieces_.length}function ys(n,e){const t=Ht(n),r=Ht(e);if(null===t)return e;if(t===r)return ys(On(n),On(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function WR(n,e){if(lh(n)!==lh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function na(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(lh(n)>lh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Ree{constructor(e,t){this.errorPrefix_=t,this.parts_=Zb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,z.ug)(this.parts_[r]);GV(this)}}function GV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Tg(n))}function Tg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ZR extends jV{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ZR}getInitialEvent(e){return(0,z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Kb=1e3;let QS,Mg=(()=>{class n extends VV{constructor(t,r,i,o,u,f,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=zb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Kb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ZR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&KS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,u={r:o,a:t,b:r};this.log_((0,z.Wl)(u)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new z.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const g=f.d;"ok"===f.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const g={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(f).set(u,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,g=>{const v=g.d,b=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",g),"ok"!==b&&this.removeListen_(i,o),t.onComplete&&t.onComplete(b,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,z.r3)(t,"w")){const i=(0,z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();ss(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const u=o.s,f=o.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const u={p:t};o&&(u.q=i,u.t=o),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,u){this.initConnection_();const f={p:r,d:i};void 0!==u&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,z.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):LR("Unrecognized action received from server: "+(0,z.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Kb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Kb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Kb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,U.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let g=!1,v=null;const b=function(){v?v.close():(g=!0,o())};t.realtime_={close:b,sendRequest:function(N){(0,z.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(N)}};const S=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[N,q]=yield Promise.all([t.authTokenProvider_.getToken(S),t.appCheckTokenProvider_.getToken(S)]);g?Ei("getToken() completed but was canceled"):(Ei("getToken() completed. Creating connection."),t.authToken_=N&&N.accessToken,t.appCheckToken_=q&&q.token,v=new BV(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,Q=>{ss(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(N){t.log_("Failed to get token: "+N),g||(t.repoInfo_.nodeAdmin&&ss(N),b())}}})()}interrupt(t){Ei("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ei("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Kb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>UR(u)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new _n(t).toString();let o;if(this.listens.has(i)){const u=this.listens.get(i);o=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Ei("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ei("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+RR.replace(/\./g,"-")]=1,(0,z.uI)()?t["framework.cordova"]=1:(0,z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=KS.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Wt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Wt(e,t)}}class YS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Wt(ah,e),i=new Wt(ah,t);return 0!==this.compare(r,i)}minPost(){return Wt.MIN}}class ZV extends YS{static get __EMPTY_NODE(){return QS}static set __EMPTY_NODE(e){QS=e}compare(e,t){return Eg(e.name,t.name)}isDefinedOn(e){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Wt.MIN}maxPost(){return new Wt(cu,QS)}makePost(e,t){return(0,z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Wt(e,QS)}toString(){return".key"}}const kc=new ZV;class JS{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let YR,Fa=(()=>{class n{constructor(t,r,i,o,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Vs.EMPTY_NODE,this.right=u??Vs.EMPTY_NODE}copy(t,r,i,o,u){return new n(t??this.key,r??this.value,i??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const u=i(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===u?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Vs.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Vs{constructor(e,t=Vs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Vs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fa.BLACK,null,null))}remove(e){return new Vs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fa.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new JS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new JS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new JS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new JS(this.root_,null,this.comparator_,!0,e)}}function Hee(n,e){return Eg(n.name,e.name)}function KR(n,e){return Eg(n,e)}Vs.EMPTY_NODE=new class $ee{copy(e,t,r,i,o){return this}insert(e,t,r){return new Fa(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const KV=function(n){return"number"==typeof n?"number:"+pV(n):"string:"+n},YV=function(n){if(n.isLeafNode()){const e=n.val();(0,z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,z.hu)(n===YR||n.isEmpty(),"priority of unexpected type.");(0,z.hu)(n===YR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let QV,JV,XV,mv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),YV(this.priorityNode_)}static set __childrenNodeConstructor(t){QV=t}static get __childrenNodeConstructor(){return QV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return zt(t)?this:".priority"===Ht(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ht(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,z.hu)(".priority"!==i||1===lh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(On(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+KV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?pV(this.value_):this.value_,this.lazyHash_=uV(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,z.hu)(o>=0,"Unknown leaf type: "+r),(0,z.hu)(u>=0,"Unknown leaf type: "+i),o===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Hn=new class Wee extends YS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Eg(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Wt.MIN}maxPost(){return new Wt(cu,new mv("[PRIORITY-POST]",XV))}makePost(e,t){const r=JV(e);return new Wt(t,new mv("[PRIORITY-POST]",r))}toString(){return".priority"}},Zee=Math.log(2);class Kee{constructor(e){this.count=parseInt(Math.log(e+1)/Zee,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const XS=function(n,e,t,r){n.sort(e);const i=function(g,v){const b=v-g;let T,S;if(0===b)return null;if(1===b)return T=n[g],S=t?t(T):T,new Fa(S,T.node,Fa.BLACK,null,null);{const N=parseInt(b/2,10)+g,q=i(g,N),Q=i(N+1,v);return T=n[N],S=t?t(T):T,new Fa(S,T.node,Fa.BLACK,q,Q)}},f=function(g){let v=null,b=null,T=n.length;const S=function(q,Q){const J=T-q,Ee=T;T-=q;const ze=i(J+1,Ee),Ne=n[J],Ye=t?t(Ne):Ne;N(new Fa(Ye,Ne.node,Q,null,ze))},N=function(q){v?(v.left=q,v=q):(b=q,v=q)};for(let q=0;q<g.count;++q){const Q=g.nextBitIsOne(),J=Math.pow(2,g.count-(q+1));Q?S(J,Fa.BLACK):(S(J,Fa.BLACK),S(J,Fa.RED))}return b}(new Kee(n.length));return new Vs(r||e,f)};let QR;const _v={};class lu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,z.hu)(_v&&Hn,"ChildrenNode.ts has not been loaded"),QR=QR||new lu({".priority":_v},{".priority":Hn}),QR}get(e){const t=(0,z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Vs?t:null}hasIndex(e){return(0,z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,z.hu)(e!==kc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Wt.Wrap);let f,u=o.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=o.getNext();f=i?XS(r,e.getCompare()):_v;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const b=Object.assign({},this.indexes_);return b[g]=f,new lu(b,v)}addToIndexes(e,t){const r=(0,z.UI)(this.indexes_,(i,o)=>{const u=(0,z.DV)(this.indexSet_,o);if((0,z.hu)(u,"Missing index implementation for "+o),i===_v){if(u.isDefinedOn(e.node)){const f=[],g=t.getIterator(Wt.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&f.push(v),v=g.getNext();return f.push(e),XS(f,u.getCompare())}return _v}{const f=t.get(e.name);let g=i;return f&&(g=g.remove(new Wt(e.name,f))),g.insert(e,e.node)}});return new lu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,z.UI)(this.indexes_,i=>{if(i===_v)return i;{const o=t.get(e.name);return o?i.remove(new Wt(e.name,o)):i}});return new lu(r,this.indexSet_)}}let Yb,Ot=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&YV(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Yb||(Yb=new n(new Vs(KR),null,lu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Yb:r}}getChild(t){const r=Ht(t);return null===r?this:this.getImmediateChild(r).getChild(On(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Wt(t,r);let o,u;r.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const f=o.isEmpty()?Yb:this.priorityNode_;return new n(o,f,u)}}updateChild(t,r){const i=Ht(t);if(null===i)return r;{(0,z.hu)(".priority"!==Ht(t)||1===lh(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(On(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,u=!0;if(this.forEachChild(Hn,(f,g)=>{r[f]=g.val(t),i++,u&&n.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):u=!1}),!t&&u&&o<2*i){const f=[];for(const g in r)f[g]=r[g];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+KV(this.getPriority().val())+":"),this.forEachChild(Hn,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":uV(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const u=o.getPredecessorKey(new Wt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Wt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Wt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Wt.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Wt.Wrap);let u=o.peek();for(;null!=u&&r.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Qb?-1:0}withIndex(t){if(t===kc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===kc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Hn),o=r.getIterator(Hn);let u=i.getNext(),f=o.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=i.getNext(),f=o.getNext()}return null===u&&null===f}return!1}return!1}}resolveIndex_(t){return t===kc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Qb=new class Yee extends Ot{constructor(){super(new Vs(KR),Ot.EMPTY_NODE,lu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ot.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Wt,{MIN:{value:new Wt(ah,Ot.EMPTY_NODE)},MAX:{value:new Wt(cu,Qb)}}),ZV.__EMPTY_NODE=Ot.EMPTY_NODE,mv.__childrenNodeConstructor=Ot,function zee(n){YR=n}(Qb),function qee(n){XV=n}(Qb);const Qee=!0;function gr(n,e=null){if(null===n)return Ot.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new mv(n,gr(e));if(n instanceof Array||!Qee){let t=Ot.EMPTY_NODE;return Ti(n,(r,i)=>{if((0,z.r3)(n,r)&&"."!==r.substring(0,1)){const o=gr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(gr(e))}{const t=[];let r=!1;if(Ti(n,(u,f)=>{if("."!==u.substring(0,1)){const g=gr(f);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new Wt(u,g)))}}),0===t.length)return Ot.EMPTY_NODE;const o=XS(t,Hee,u=>u.name,KR);if(r){const u=XS(t,Hn.getCompare());return new Ot(o,gr(e),new lu({".priority":u},{".priority":Hn}))}return new Ot(o,gr(e),lu.Default)}}!function Gee(n){JV=n}(gr);class JR extends YS{constructor(e){super(),this.indexPath_=e,(0,z.hu)(!zt(e)&&".priority"!==Ht(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Eg(e.name,t.name):o}makePost(e,t){const r=gr(e),i=Ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new Wt(t,i)}maxPost(){const e=Ot.EMPTY_NODE.updateChild(this.indexPath_,Qb);return new Wt(cu,e)}toString(){return Zb(this.indexPath_,0).join("/")}}const XR=new class Jee extends YS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Eg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Wt.MIN}maxPost(){return Wt.MAX}makePost(e,t){const r=gr(e);return new Wt(t,r)}toString(){return".value"}};function Xb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class tF{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Hn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ah}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Hn}copy(){const e=new tF;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function t9(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Hn?t="$priority":n.index_===XR?t="$value":n.index_===kc?t="$key":((0,z.hu)(n.index_ instanceof JR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,z.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,z.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,z.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function n9(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Hn&&(e.i=n.index_.toString()),e}class tA extends VV{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=tA.getListenId_(e,r),f={};this.listens_[u]=f;const g=t9(e._queryParams);this.restRequest_(o+".json",g,(v,b)=>{let T=b;if(404===v&&(T=null,v=null),null===v&&this.onDataUpdate_(o,T,!1,r),(0,z.DV)(this.listens_,u)===f){let S;S=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(S,null)}})}unlisten(e,t){const r=tA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=t9(e._queryParams),r=e._path.toString(),i=new z.BH;return this.restRequest_(r+".json",t,(o,u)=>{let f=u;404===o&&(f=null,o=null),null===o?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,z.xO)(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let g=null;if(f.status>=200&&f.status<300){try{g=(0,z.cI)(f.responseText)}catch{ss("Failed to parse JSON response for "+u+": "+f.responseText)}r(null,g)}else 401!==f.status&&404!==f.status&&ss("Got unsuccessful REST response for "+u+" Status: "+f.status),r(f.status);r=null}},f.open("GET",u,!0),f.send()})}}class ote{constructor(){this.rootNode_=Ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function nA(){return{value:null,children:new Map}}function vv(n,e,t){if(zt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ht(e);n.children.has(r)||n.children.set(r,nA()),vv(n.children.get(r),e=On(e),t)}}function sF(n,e,t){null!==n.value?t(e,n.value):function ate(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{sF(i,new _n(e.toString()+"/"+r),t)})}class cte{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ti(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class dte{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new cte(e);const r=1e4+2e4*Math.random();qb(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ti(e,(i,o)=>{o>0&&(0,z.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),qb(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Nc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Nc||{});function cF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class rA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Nc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(zt(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new _n(e));return new rA(ln(),t,this.revert)}}return(0,z.hu)(Ht(this.path)===e,"operationForChild called for unrelated child."),new rA(On(this.path),this.affectedTree,this.revert)}}class Dg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Nc.OVERWRITE}operationForChild(e){return zt(this.path)?new Dg(this.source,ln(),this.snap.getImmediateChild(e)):new Dg(this.source,On(this.path),this.snap)}}class Cv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Nc.MERGE}operationForChild(e){if(zt(this.path)){const t=this.children.subtree(new _n(e));return t.isEmpty()?null:t.value?new Dg(this.source,ln(),t.value):new Cv(this.source,ln(),t)}return(0,z.hu)(Ht(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Cv(this.source,On(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class uh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(zt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ht(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function nE(n,e,t,r,i,o){const u=r.filter(f=>f.type===t);u.sort((f,g)=>function gte(n,e,t){if(null==e.childName||null==t.childName)throw(0,z.g5)("Should only compare child_ events.");const r=new Wt(e.childName,e.snapshotNode),i=new Wt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,g)),u.forEach(f=>{const g=function pte(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,o);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(g,n.query_))})})}function iA(n,e){return{eventCache:n,serverCache:e}}function rE(n,e,t,r){return iA(new uh(e,t,r),n.serverCache)}function i9(n,e,t,r){return iA(n.eventCache,new uh(e,t,r))}function sA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Sg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let lF;class zn{constructor(e,t=(()=>(lF||(lF=new Vs(XX)),lF))()){this.value=e,this.children=t}static fromObject(e){let t=new zn(null);return Ti(e,(r,i)=>{t=t.set(new _n(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ln(),value:this.value};if(zt(e))return null;{const r=Ht(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(On(e),t);return null!=o?{path:sr(new _n(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(zt(e))return this;{const t=Ht(e),r=this.children.get(t);return null!==r?r.subtree(On(e)):new zn(null)}}set(e,t){if(zt(e))return new zn(t,this.children);{const r=Ht(e),o=(this.children.get(r)||new zn(null)).set(On(e),t),u=this.children.insert(r,o);return new zn(this.value,u)}}remove(e){if(zt(e))return this.children.isEmpty()?new zn(null):new zn(null,this.children);{const t=Ht(e),r=this.children.get(t);if(r){const i=r.remove(On(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new zn(null):new zn(this.value,o)}return this}}get(e){if(zt(e))return this.value;{const t=Ht(e),r=this.children.get(t);return r?r.get(On(e)):null}}setTree(e,t){if(zt(e))return t;{const r=Ht(e),o=(this.children.get(r)||new zn(null)).setTree(On(e),t);let u;return u=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new zn(this.value,u)}}fold(e){return this.fold_(ln(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(sr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ln(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(zt(e))return null;{const o=Ht(e),u=this.children.get(o);return u?u.findOnPath_(On(e),sr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ln(),t)}foreachOnPath_(e,t,r){if(zt(e))return this;{this.value&&r(t,this.value);const i=Ht(e),o=this.children.get(i);return o?o.foreachOnPath_(On(e),sr(t,i),r):new zn(null)}}foreach(e){this.foreach_(ln(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(sr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class La{constructor(e){this.writeTree_=e}static empty(){return new La(new zn(null))}}function iE(n,e,t){if(zt(e))return new La(new zn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const u=ys(i,e);return o=o.updateChild(u,t),new La(n.writeTree_.set(i,o))}{const i=new zn(t),o=n.writeTree_.setTree(e,i);return new La(o)}}}function uF(n,e,t){let r=n;return Ti(t,(i,o)=>{r=iE(r,sr(e,i),o)}),r}function s9(n,e){if(zt(e))return La.empty();{const t=n.writeTree_.setTree(e,new zn(null));return new La(t)}}function dF(n,e){return null!=Ag(n,e)}function Ag(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ys(t.path,e)):null}function o9(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Hn,(r,i)=>{e.push(new Wt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Wt(r,i.value))}),e}function dh(n,e){if(zt(e))return n;{const t=Ag(n,e);return new La(null!=t?new zn(t):n.writeTree_.subtree(e))}}function hF(n){return n.writeTree_.isEmpty()}function wv(n,e){return a9(ln(),n.writeTree_,e)}function a9(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,z.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=a9(sr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(sr(n,".priority"),r)),t}}function oA(n,e){return h9(e,n)}function wte(n,e){if(n.snap)return na(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&na(sr(n.path,t),e))return!0;return!1}function bte(n){return n.visible}function c9(n,e,t){let r=La.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const u=o.path;let f;if(o.snap)na(t,u)?(f=ys(t,u),r=iE(r,f,o.snap)):na(u,t)&&(f=ys(u,t),r=iE(r,ln(),o.snap.getChild(f)));else{if(!o.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(na(t,u))f=ys(t,u),r=uF(r,f,o.children);else if(na(u,t))if(f=ys(u,t),zt(f))r=uF(r,ln(),o.children);else{const g=(0,z.DV)(o.children,Ht(f));if(g){const v=g.getChild(On(f));r=iE(r,ln(),v)}}}}}return r}function l9(n,e,t,r,i){if(r||i){const o=dh(n.visibleWrites,e);return!i&&hF(o)?t:i||null!=t||dF(o,ln())?wv(c9(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(na(v.path,e)||na(e,v.path))},e),t||Ot.EMPTY_NODE):null}{const o=Ag(n.visibleWrites,e);if(null!=o)return o;{const u=dh(n.visibleWrites,e);return hF(u)?t:null!=t||dF(u,ln())?wv(u,t||Ot.EMPTY_NODE):null}}}function aA(n,e,t,r){return l9(n.writeTree,n.treePath,e,t,r)}function fF(n,e){return function Ete(n,e,t){let r=Ot.EMPTY_NODE;const i=Ag(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Hn,(o,u)=>{r=r.updateImmediateChild(o,u)}),r;if(t){const o=dh(n.visibleWrites,e);return t.forEachChild(Hn,(u,f)=>{const g=wv(dh(o,new _n(u)),f);r=r.updateImmediateChild(u,g)}),o9(o).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return o9(dh(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function u9(n,e,t,r){return function Tte(n,e,t,r,i){(0,z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=sr(e,t);if(dF(n.visibleWrites,o))return null;{const u=dh(n.visibleWrites,o);return hF(u)?i.getChild(t):wv(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function cA(n,e){return function Dte(n,e){return Ag(n.visibleWrites,e)}(n.writeTree,sr(n.treePath,e))}function pF(n,e,t){return function Mte(n,e,t,r){const i=sr(e,t),o=Ag(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?wv(dh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function d9(n,e){return h9(sr(n.treePath,e),n.writeTree)}function h9(n,e){return{treePath:n,writeTree:e}}class Pte{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,Xb(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,function Jb(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,function yv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Xb(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const f9=new class Ote{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class gF{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new uh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pF(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Sg(this.viewCache_),o=function xte(n,e,t,r,i,o){return function Ste(n,e,t,r,i,o,u){let f;const g=dh(n.visibleWrites,e),v=Ag(g,ln());if(null!=v)f=v;else{if(null==t)return[];f=wv(g,t)}if(f=f.withIndex(u),f.isEmpty()||f.isLeafNode())return[];{const b=[],T=u.getCompare(),S=o?f.getReverseIteratorFrom(r,u):f.getIteratorFrom(r,u);let N=S.getNext();for(;N&&b.length<i;)0!==T(N,r)&&b.push(N),N=S.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function p9(n,e,t,r,i,o){const u=e.eventCache;if(null!=cA(r,t))return e;{let f,g;if(zt(t))if((0,z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Sg(e),T=fF(r,v instanceof Ot?v:Ot.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),T,o)}else{const v=aA(r,Sg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const v=Ht(t);if(".priority"===v){(0,z.hu)(1===lh(t),"Can't have a priority with additional path components");const b=u.getNode();g=e.serverCache.getNode();const T=u9(r,t,b,g);f=null!=T?n.filter.updatePriority(b,T):u.getNode()}else{const b=On(t);let T;if(u.isCompleteForChild(v)){g=e.serverCache.getNode();const S=u9(r,t,u.getNode(),g);T=null!=S?u.getNode().getImmediateChild(v).updateChild(b,S):u.getNode().getImmediateChild(v)}else T=pF(r,v,e.serverCache);f=null!=T?n.filter.updateChild(u.getNode(),v,T,b,i,o):u.getNode()}}return rE(e,f,u.isFullyInitialized()||zt(t),n.filter.filtersNodes())}}function lA(n,e,t,r,i,o,u,f){const g=e.serverCache;let v;const b=u?n.filter:n.filter.getIndexedFilter();if(zt(t))v=b.updateFullNode(g.getNode(),r,null);else if(b.filtersNodes()&&!g.isFiltered()){const N=g.getNode().updateChild(t,r);v=b.updateFullNode(g.getNode(),N,null)}else{const N=Ht(t);if(!g.isCompleteForPath(t)&&lh(t)>1)return e;const q=On(t),J=g.getNode().getImmediateChild(N).updateChild(q,r);v=".priority"===N?b.updatePriority(g.getNode(),J):b.updateChild(g.getNode(),N,J,q,f9,null)}const T=i9(e,v,g.isFullyInitialized()||zt(t),b.filtersNodes());return p9(n,T,t,i,new gF(i,T,o),f)}function mF(n,e,t,r,i,o,u){const f=e.eventCache;let g,v;const b=new gF(i,e,o);if(zt(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,u),g=rE(e,v,!0,n.filter.filtersNodes());else{const T=Ht(t);if(".priority"===T)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=rE(e,v,f.isFullyInitialized(),f.isFiltered());else{const S=On(t),N=f.getNode().getImmediateChild(T);let q;if(zt(S))q=r;else{const Q=b.getCompleteChild(T);q=null!=Q?".priority"===qR(S)&&Q.getChild(zV(S)).isEmpty()?Q:Q.updateChild(S,r):Ot.EMPTY_NODE}g=N.equals(q)?e:rE(e,n.filter.updateChild(f.getNode(),T,q,S,b,u),f.isFullyInitialized(),n.filter.filtersNodes())}}return g}function g9(n,e){return n.eventCache.isCompleteForChild(e)}function m9(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function _F(n,e,t,r,i,o,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=zt(t)?r:new zn(null).setTree(t,r);const b=e.serverCache.getNode();return v.children.inorderTraversal((T,S)=>{if(b.hasChild(T)){const q=m9(0,e.serverCache.getNode().getImmediateChild(T),S);g=lA(n,g,new _n(T),q,i,o,u,f)}}),v.children.inorderTraversal((T,S)=>{const N=!e.serverCache.isCompleteForChild(T)&&null===S.value;if(!b.hasChild(T)&&!N){const Q=m9(0,e.serverCache.getNode().getImmediateChild(T),S);g=lA(n,g,new _n(T),Q,i,o,u,f)}}),g}function zte(n,e){const t=Sg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!zt(e)&&!t.getImmediateChild(Ht(e)).isEmpty())?t.getChild(e):null}function v9(n,e,t,r){e.type===Nc.MERGE&&null!==e.source.queryId&&((0,z.hu)(Sg(n.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(sA(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function Rte(n,e,t,r,i){const o=new Pte;let u,f;if(t.type===Nc.OVERWRITE){const v=t;v.source.fromUser?u=mF(n,e,v.path,v.snap,r,i,o):((0,z.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!zt(v.path),u=lA(n,e,v.path,v.snap,r,i,f,o))}else if(t.type===Nc.MERGE){const v=t;v.source.fromUser?u=function Lte(n,e,t,r,i,o,u){let f=e;return r.foreach((g,v)=>{const b=sr(t,g);g9(e,Ht(b))&&(f=mF(n,f,b,v,i,o,u))}),r.foreach((g,v)=>{const b=sr(t,g);g9(e,Ht(b))||(f=mF(n,f,b,v,i,o,u))}),f}(n,e,v.path,v.children,r,i,o):((0,z.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),u=_F(n,e,v.path,v.children,r,i,f,o))}else if(t.type===Nc.ACK_USER_WRITE){const v=t;u=v.revert?function Vte(n,e,t,r,i,o){let u;if(null!=cA(r,t))return e;{const f=new gF(r,e,i),g=e.eventCache.getNode();let v;if(zt(t)||".priority"===Ht(t)){let b;if(e.serverCache.isFullyInitialized())b=aA(r,Sg(e));else{const T=e.serverCache.getNode();(0,z.hu)(T instanceof Ot,"serverChildren would be complete if leaf node"),b=fF(r,T)}v=n.filter.updateFullNode(g,b,o)}else{const b=Ht(t);let T=pF(r,b,e.serverCache);null==T&&e.serverCache.isCompleteForChild(b)&&(T=g.getImmediateChild(b)),v=null!=T?n.filter.updateChild(g,b,T,On(t),f,o):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(g,b,Ot.EMPTY_NODE,On(t),f,o):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=aA(r,Sg(e)),u.isLeafNode()&&(v=n.filter.updateFullNode(v,u,o)))}return u=e.serverCache.isFullyInitialized()||null!=cA(r,ln()),rE(e,v,u,n.filter.filtersNodes())}}(n,e,v.path,r,i,o):function Ute(n,e,t,r,i,o,u){if(null!=cA(i,t))return e;const f=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(zt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return lA(n,e,t,g.getNode().getChild(t),i,o,f,u);if(zt(t)){let v=new zn(null);return g.getNode().forEachChild(kc,(b,T)=>{v=v.set(new _n(b),T)}),_F(n,e,t,v,i,o,f,u)}return e}{let v=new zn(null);return r.foreach((b,T)=>{const S=sr(t,b);g.isCompleteForPath(S)&&(v=v.set(b,g.getNode().getChild(S)))}),_F(n,e,t,v,i,o,f,u)}}(n,e,v.path,v.affectedTree,r,i,o)}else{if(t.type!==Nc.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+t.type);u=function Bte(n,e,t,r,i){const o=e.serverCache;return p9(n,i9(e,o.getNode(),o.isFullyInitialized()||zt(t),o.isFiltered()),t,r,f9,i)}(n,e,t.path,r,o)}const g=o.getChanges();return function Fte(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=sA(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(function e9(n){return{type:"value",snapshotNode:n}}(sA(e)))}}(e,u,g),{viewCache:u,changes:g}}(n.processor_,i,e,t,r);return function Nte(n,e){(0,z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,z.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,function C9(n,e,t,r){return function fte(n,e,t,r){const i=[],o=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function Xee(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),nE(n,i,"child_removed",e,r,t),nE(n,i,"child_added",e,r,t),nE(n,i,"child_moved",o,r,t),nE(n,i,"child_changed",e,r,t),nE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,o.changes,o.viewCache.eventCache.getNode(),null)}let uA,hA;function yF(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,z.hu)(null!=o,"SyncTree gave us an op for an invalid query."),v9(o,e,t,r)}{let o=[];for(const u of n.views.values())o=o.concat(v9(u,e,t,r));return o}}function hh(n,e){let t=null;for(const r of n.views.values())t=t||zte(r,e);return t}class M9{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zn(null),this.pendingWriteTree_=function Ate(){return{visibleWrites:La.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function vF(n,e,t,r,i){return function _te(n,e,t,r,i){(0,z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=iE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Iv(n,new Dg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ph(n,e,t=!1){const r=function vte(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Cte(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&wte(f,r.path)?i=!1:na(r.path,f.path)&&(o=!0)),u--}return!!i&&(o?(function Ite(n){n.visibleWrites=c9(n.allWrites,bte,ln()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=s9(n.visibleWrites,r.path):Ti(r.children,g=>{n.visibleWrites=s9(n.visibleWrites,sr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let o=new zn(null);return null!=r.snap?o=o.set(ln(),!0):Ti(r.children,u=>{o=o.set(new _n(u),!0)}),Iv(n,new rA(r.path,o,t))}return[]}function sE(n,e,t){return Iv(n,new Dg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function pA(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,f)=>{const v=hh(f,ys(u,e));if(v)return v});return l9(i,e,o,t,!0)}function Iv(n,e){return S9(e,n.syncPointTree_,null,oA(n.pendingWriteTree_,ln()))}function S9(n,e,t,r){if(zt(n.path))return A9(n,e,t,r);{const i=e.get(ln());null==t&&null!=i&&(t=hh(i,ln()));let o=[];const u=Ht(n.path),f=n.operationForChild(u),g=e.children.get(u);if(g&&f){const v=t?t.getImmediateChild(u):null,b=d9(r,u);o=o.concat(S9(f,g,v,b))}return i&&(o=o.concat(yF(i,n,r,t))),o}}function A9(n,e,t,r){const i=e.get(ln());null==t&&null!=i&&(t=hh(i,ln()));let o=[];return e.children.inorderTraversal((u,f)=>{const g=t?t.getImmediateChild(u):null,v=d9(r,u),b=n.operationForChild(u);b&&(o=o.concat(A9(b,f,g,v)))}),i&&(o=o.concat(yF(i,n,r,t))),o}function wF(n,e){return n.tagToQueryMap.get(e)}function IF(n){const e=n.indexOf("$");return(0,z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new _n(n.substr(0,e))}}function bF(n,e,t){const r=n.syncPointTree_.get(e);return(0,z.hu)(r,"Missing sync point for query tag that we're tracking"),yF(r,t,oA(n.pendingWriteTree_,e),null)}class EF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new EF(t)}node(){return this.node_}}class TF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=sr(this.path_,e);return new TF(this.syncTree_,t)}node(){return pA(this.syncTree_,this.path_)}}const dne=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},P9=function(n,e,t){return n&&"object"==typeof n?((0,z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?hne(n[".sv"],e,t):"object"==typeof n[".sv"]?fne(n[".sv"],e):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},hne=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,z.hu)(!1,"Unexpected server value: "+n)},fne=function(n,e,t){n.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,z.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},O9=function(n,e,t,r){return DF(e,new TF(t,n),r)},MF=function(n,e,t){return DF(n,new EF(e),t)};function DF(n,e,t){const r=n.getPriority().val(),i=P9(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,f=P9(u.getValue(),e,t);return f!==u.getValue()||i!==u.getPriority().val()?new mv(f,gr(i)):n}{const u=n;return o=u,i!==u.getPriority().val()&&(o=o.updatePriority(new mv(i))),u.forEachChild(Hn,(f,g)=>{const v=DF(g,e.getImmediateChild(f),t);v!==g&&(o=o.updateImmediateChild(f,v))}),o}}class SF{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function mA(n,e){let t=e instanceof _n?e:new _n(e),r=n,i=Ht(t);for(;null!==i;){const o=(0,z.DV)(r.node.children,i)||{children:{},childCount:0};r=new SF(i,r,o),t=On(t),i=Ht(t)}return r}function xg(n){return n.node.value}function AF(n,e){n.node.value=e,xF(n)}function k9(n){return n.node.childCount>0}function _A(n,e){Ti(n.node.children,(t,r)=>{e(new SF(t,n,r))})}function N9(n,e,t,r){t&&!r&&e(n),_A(n,i=>{N9(i,e,!0,r)}),t&&r&&e(n)}function cE(n){return new _n(null===n.parent?n.name:cE(n.parent)+"/"+n.name)}function xF(n){null!==n.parent&&function mne(n,e,t){const r=function pne(n){return void 0===xg(n)&&!k9(n)}(t),i=(0,z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,xF(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,xF(n))}(n.parent,n.name,n)}const _ne=/[\[\].#$\/\u0000-\u001F\u007F]/,yne=/[\[\].#$\u0000-\u001F\u007F]/,PF=10485760,yA=function(n){return"string"==typeof n&&0!==n.length&&!_ne.test(n)},uE=function(n,e,t){const r=t instanceof _n?new Ree(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Tg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Tg(r)+" with contents = "+e.toString());if(qS(e))throw new Error(n+"contains "+e.toString()+" "+Tg(r));if("string"==typeof e&&e.length>PF/3&&(0,z.ug)(e)>PF)throw new Error(n+"contains a string greater than "+PF+" utf8 bytes "+Tg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Ti(e,(u,f)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(o=!0,!yA(u)))throw new Error(n+" contains an invalid key ("+u+") "+Tg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Fee(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,z.ug)(e),GV(n)})(r,u),uE(n,f,r),function Lee(n){const e=n.parts_.pop();n.byteLength_-=(0,z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Tg(r)+" in addition to actual children.")}},L9=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!yA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!yne.test(n)}(n)}(t))throw new Error((0,z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ine{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Co(n,e,t){(function vA(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!WR(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function B9(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(bne(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>na(r,e)||na(e,r))}function bne(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();bg&&Ei("event: "+t.toString()),pv(r)}}}const Ene=25;class Tne{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ine,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nA(),this.transactionQueueTree_=new SF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function j9(n){const t=n.infoData_.getNode(new _n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function hE(n){return dne({timestamp:j9(n)})}function $9(n,e,t,r,i){n.dataUpdateCount++;const o=new _n(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const g=(0,z.UI)(t,v=>gr(v));u=function sne(n,e,t,r){const i=wF(n,r);if(i){const o=IF(i),u=o.path,f=o.queryId,g=ys(u,e),v=zn.fromObject(t);return bF(n,u,new Cv(cF(f),g,v))}return[]}(n.serverSyncTree_,o,g,i)}else{const g=gr(t);u=function D9(n,e,t,r){const i=wF(n,r);if(null!=i){const o=IF(i),u=o.path,f=o.queryId,g=ys(u,e);return bF(n,u,new Dg(cF(f),g,t))}return[]}(n.serverSyncTree_,o,g,i)}else if(r){const g=(0,z.UI)(t,v=>gr(v));u=function nne(n,e,t){const r=zn.fromObject(t);return Iv(n,new Cv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,g)}else{const g=gr(t);u=sE(n.serverSyncTree_,o,g)}let f=o;u.length>0&&(f=Ev(n,o)),Co(n.eventQueue_,f,u)}function H9(n,e){NF(n,"connected",e),!1===e&&function xne(n){bv(n,"onDisconnectEvents");const e=hE(n),t=nA();sF(n.onDisconnect_,ln(),(i,o)=>{const u=O9(i,o,n.serverSyncTree_,e);vv(t,i,u)});let r=[];sF(t,ln(),(i,o)=>{r=r.concat(sE(n.serverSyncTree_,i,o));const u=function UF(n,e){const t=cE(q9(n,e)),r=mA(n.transactionQueueTree_,e);return function gne(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{BF(n,i)}),BF(n,r),N9(r,i=>{BF(n,i)}),t}(n,i);Ev(n,u)}),n.onDisconnect_=nA(),Co(n.eventQueue_,ln(),r)}(n)}function NF(n,e,t){const r=new _n("/.info/"+e),i=gr(t);n.infoData_.updateSnapshot(r,i);const o=sE(n.infoSyncTree_,r,i);Co(n.eventQueue_,r,o)}function CA(n){return n.nextWriteId_++}function bv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ei(t,...e)}function LF(n,e,t){return pA(n.serverSyncTree_,e,t)||Ot.EMPTY_NODE}function wA(n,e=n.transactionQueueTree_){if(e||IA(n,e),xg(e)){const t=W9(n,e);(0,z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Lne(n,e,t){const r=t.map(v=>v.currentWriteId),i=LF(n,e,r);let o=i;const u=i.hash();for(let v=0;v<t.length;v++){const b=t[v];(0,z.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const T=ys(e,b.path);o=o.updateChild(T,b.currentOutputSnapshotRaw)}const f=o.val(!0),g=e;n.server_.put(g.toString(),f,v=>{bv(n,"transaction put response",{path:g.toString(),status:v});let b=[];if("ok"===v){const T=[];for(let S=0;S<t.length;S++)t[S].status=2,b=b.concat(ph(n.serverSyncTree_,t[S].currentWriteId)),t[S].onComplete&&T.push(()=>t[S].onComplete(null,!0,t[S].currentOutputSnapshotResolved)),t[S].unwatcher();IA(n,mA(n.transactionQueueTree_,e)),wA(n,n.transactionQueueTree_),Co(n.eventQueue_,e,b);for(let S=0;S<T.length;S++)pv(T[S])}else{if("datastale"===v)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{ss("transaction at "+g.toString()+" failed: "+v);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=v}Ev(n,e)}},u)}(n,cE(e),t)}else k9(e)&&_A(e,t=>{wA(n,t)})}function Ev(n,e){const t=q9(n,e),r=cE(t);return function Une(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const g=e[f],v=ys(t,g.path);let T,b=!1;if((0,z.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)b=!0,T=g.abortReason,i=i.concat(ph(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=Ene)b=!0,T="maxretry",i=i.concat(ph(n.serverSyncTree_,g.currentWriteId,!0));else{const S=LF(n,g.path,u);g.currentInputSnapshot=S;const N=e[f].update(S.val());if(void 0!==N){uE("transaction failed: Data returned ",N,g.path);let q=gr(N);"object"==typeof N&&null!=N&&(0,z.r3)(N,".priority")||(q=q.updatePriority(S.getPriority()));const J=g.currentWriteId,Ee=hE(n),ze=MF(q,S,Ee);g.currentOutputSnapshotRaw=q,g.currentOutputSnapshotResolved=ze,g.currentWriteId=CA(n),u.splice(u.indexOf(J),1),i=i.concat(vF(n.serverSyncTree_,g.path,ze,g.currentWriteId,g.applyLocally)),i=i.concat(ph(n.serverSyncTree_,J,!0))}else b=!0,T="nodata",i=i.concat(ph(n.serverSyncTree_,g.currentWriteId,!0))}Co(n.eventQueue_,t,i),i=[],b&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===T?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(T),!1,null)))}IA(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)pv(r[f]);wA(n,n.transactionQueueTree_)}(n,W9(n,t),r),r}function q9(n,e){let t,r=n.transactionQueueTree_;for(t=Ht(e);null!==t&&void 0===xg(r);)r=mA(r,t),t=Ht(e=On(e));return r}function W9(n,e){const t=[];return Z9(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Z9(n,e,t){const r=xg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);_A(e,i=>{Z9(n,i,t)})}function IA(n,e){const t=xg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,AF(e,t.length>0?t:void 0)}_A(e,r=>{IA(n,r)})}function BF(n,e){const t=xg(e);if(t){const r=[];let i=[],o=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,z.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):((0,z.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(ph(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?AF(e,void 0):t.length=o+1,Co(n.eventQueue_,cE(e),i);for(let u=0;u<r.length;u++)pv(r[u])}}const VF=function(n,e){const t=jne(n),r=t.namespace;return"firebase.com"===t.domain&&Oc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Oc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ss("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new VR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new _n(t.pathString)}},jne=function(n){let e="",t="",r="",i="",o="",u=!0,f="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let b=n.indexOf("/");-1===b&&(b=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(b,T)),b<T&&(i=function Bne(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,T)));const S=function Vne(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ss(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));v=e.indexOf(":"),v>=0?(u="https"===f||"wss"===f,g=parseInt(e.substring(v+1),10)):v=e.length;const N=e.slice(0,v);if("localhost"===N.toLowerCase())t="localhost";else if(N.split(".").length<=2)t=N;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),o=r}"ns"in S&&(o=S.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:u,scheme:f,pathString:i,namespace:o}};class wo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return zt(this._path)?null:qR(this._path)}get ref(){return new Ua(this._repo,this._path)}get _queryIdentifier(){const e=n9(this._queryParams),t=UR(e);return"{}"===t?"default":t}get _queryObject(){return n9(this._queryParams)}isEqual(e){if(!((e=(0,z.m9)(e))instanceof wo))return!1;const t=this._repo===e._repo,r=WR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function kee(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Ua extends wo{constructor(e,t){super(e,t,new tF,!1)}get parent(){const e=zV(this._path);return null===e?null:new Ua(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function Wte(n){(0,z.hu)(!uA,"__referenceConstructor has already been defined"),uA=n})(Ua),function Jte(n){(0,z.hu)(!hA,"__referenceConstructor has already been defined"),hA=n}(Ua);const $F={};class are{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Mne(n,e,t){if(n.stats_=HR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new tA(n.repoInfo_,(r,i,o,u)=>{$9(n,r,i,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>H9(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Mg(n.repoInfo_,e,(r,i,o,u)=>{$9(n,r,i,o,u)},r=>{H9(n,r)},r=>{!function Dne(n,e){Ti(e,(t,r)=>{NF(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function dee(n,e){const t=n.toString();return $R[t]||($R[t]=e()),$R[t]}(n.repoInfo_,()=>new dte(n.stats_,n.server_)),n.infoData_=new ote,n.infoSyncTree_=new M9({startListening:(r,i,o,u)=>{let f=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(f=sE(n.infoSyncTree_,r._path,g),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),NF(n,"connected",!1),n.serverSyncTree_=new M9({startListening:(r,i,o,u)=>(n.server_.listen(r,o,i,(f,g)=>{const v=u(f,g);Co(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ua(this._repo,ln())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ire(n,e){const t=$F[e];(!t||t[n.key]!==n)&&Oc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function G9(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Oc("Cannot call "+e+" on a deleted database.")}}function cre(n=(0,Sn.getApp)(),e){const t=(0,Sn._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,z.P0)("database");r&&function lre(n,e,t,r={}){(n=(0,z.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Oc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Oc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Wb(Wb.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,z.Sg)(r.mockUserToken,n.app.options.projectId);o=new Wb(u)}!function nre(n,e,t,r){n.repoInfo_=new VR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(t,...r)}return t}Mg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Mg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function ure(n){(function ZX(n){RR=n})(Sn.SDK_VERSION),(0,Sn._registerComponent)(new wr.wA("database",(e,{instanceIdentifier:t})=>function rre(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Oc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ei("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,u=VF(o,i),f=u.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,o=`http://${v}?ns=${f.namespace}`,u=VF(o,i),f=u.repoInfo):g=!u.repoInfo.secure;const b=i&&g?new Wb(Wb.OWNER):new cee(n.name,n.options,e);L9("Invalid Firebase Database URL",u),zt(u.path)||Oc("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function sre(n,e,t,r){let i=$F[e.name];i||(i={},$F[e.name]=i);let o=i[n.toURLString()];return o&&Oc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Tne(n,!1,t,r),i[n.toURLString()]=o,o}(f,n,b,new aee(n.name,t));return new are(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Sn.registerVersion)(oV,"0.14.4",n),(0,Sn.registerVersion)(oV,"0.14.4","esm2017")}();class HF{constructor(e){return e}}const r7="database",zF=new c.OlP("angularfire2.database-instances");function gre(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new HF(r)}}const mre={provide:class fre{constructor(){return Rs(r7)}},deps:[[new c.FiY,zF]]},_re={provide:HF,useFactory:function pre(n,e){const t=Rl(r7,n,e);return t&&new HF(t)},deps:[[new c.FiY,zF],su]};let yre=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Nl.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[_re,mre]}),n})();function vre(n,...e){return{ngModule:yre,providers:[{provide:zF,useFactory:gre(n),multi:!0,deps:[c.R0b,c.zs3,Fl,tv,[new c.FiY,GS],[new c.FiY,hg],...e]}]}}const Cre=Dd(cre,!0);class GF{constructor(e){return e}}const i7="messaging",qF=new c.OlP("angularfire2.messaging-instances");function bre(n){return(e,t)=>{if(!fp.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new GF(r)}}const Ere={provide:class wre{constructor(){return Rs(i7)}},deps:[[new c.FiY,qF]]},Tre={provide:GF,useFactory:function Ire(n,e){if(!fp.sync())return null;const t=Rl(i7,n,e);return t&&new GF(t)},deps:[[new c.FiY,qF],su]};let Mre=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Nl.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Tre,Ere,{provide:c.ip1,useValue:fp.async,multi:!0}]}),n})();function Dre(n,...e){return{ngModule:Mre,providers:[{provide:qF,useFactory:bre(n),multi:!0,deps:[c.R0b,c.zs3,Fl,tv,...e]}]}}const Sre=Dd(kT,!0),s7="firebasestorage.googleapis.com";class mr extends z.ZR{constructor(e,t,r=0){super(WF(e),`Firebase Storage: ${t} (${WF(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return WF(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var or=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(or||{});function WF(n){return"storage/"+n}function KF(n){return new mr(or.INVALID_ARGUMENT,n)}function u7(){return new mr(or.APP_DELETED,"The Firebase app was deleted.")}class vs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=vs.makeFromUrl(e,t)}catch{return new vs(e,"")}if(""===r.path)return r;throw function Ure(n){return new mr(or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Ye){Ye.path_=decodeURIComponent(Ye.path)}const T=t.replace(/[.]/g,"\\."),Ne=[{regex:f,indices:{bucket:1,path:3},postModify:function o(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===s7?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Ye=0;Ye<Ne.length;Ye++){const gt=Ne[Ye],At=gt.regex.exec(e);if(At){let $s=At[gt.indices.path];$s||($s=""),r=new vs(At[gt.indices.bucket],$s),gt.postModify(r);break}}if(null==r)throw function Lre(n){return new mr(or.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class zre{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function QF(n,e,t,r){if(r<e)throw KF(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw KF(`Invalid value for '${n}'. Expected ${t} or less.`)}var Mv=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Mv||{});class Yre{constructor(e,t,r,i,o,u,f,g,v,b,T,S=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=b,this.connectionFactory_=T,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,q)=>{this.resolve_=N,this.reject_=q,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,u=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());!function Wre(n){return void 0!==n}(g)?o():o(g)}catch(g){u(g)}else if(null!==f){const g=function ZF(){return new mr(or.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();g.serverResponse=f.getErrorText(),u(this.errorCallback_?this.errorCallback_(f,g):g)}else u(i.canceled?this.appDelete_?u7():function c7(){return new mr(or.CANCELED,"User canceled the upload/download.")}():function a7(){return new mr(or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new DA(!1,null,!0)):this.backoffId_=function Gre(n,e,t){let r=1,i=null,o=null,u=!1,f=0;function g(){return 2===f}let v=!1;function b(...J){v||(v=!0,e.apply(null,J))}function T(J){i=setTimeout(()=>{i=null,n(N,g())},J)}function S(){o&&clearTimeout(o)}function N(J,...Ee){if(v)return void S();if(J)return S(),void b.call(null,J,...Ee);if(g()||u)return S(),void b.call(null,J,...Ee);let Ne;r<64&&(r*=2),1===f?(f=2,Ne=0):Ne=1e3*(r+Math.random()),T(Ne)}let q=!1;function Q(J){q||(q=!0,S(),!v&&(null!==i?(J||(f=2),clearTimeout(i),T(0)):J||(f=1)))}return T(0),o=setTimeout(()=>{u=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new DA(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const u=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const f=o.getErrorCode()===Mv.NO_ERROR,g=o.getStatus();if(!f||function f7(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}(g,this.additionalRetryCodes_)&&this.retry){const b=o.getErrorCode()===Mv.ABORT;return void r(!1,new DA(!1,null,b))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new DA(v,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function qre(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class DA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Og{constructor(e,t){this._service=e,this._location=t instanceof vs?t:vs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Og(e,t)}get root(){const e=new vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function y7(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function uie(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new vs(this._location.bucket,e);return new Og(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function Hre(n){return new mr(or.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function k7(n,e){const t=e?.storageBucket;return null==t?null:vs.makeFromBucketSpec(t,n)}class iL{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=s7,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?vs.makeFromBucketSpec(i,this._host):k7(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?vs.makeFromBucketSpec(this._url,e):k7(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){QF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){QF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,U.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,U.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Og(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new zre(u7());{const u=function tie(n,e,t,r,i,o,u=!0){const f=function h7(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),g=n.url+f,v=Object.assign({},n.headers);return function Xre(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function Qre(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function Jre(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,o),function eie(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new Yre(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,U.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const N7="@firebase/storage",F7="storage";function Kie(n=Ff(),e){const r=wl(n=(0,z.m9)(n),F7).getImmediate({identifier:e}),i=(0,z.P0)("storage");return i&&function Yie(n,e,t,r={}){!function Zie(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,z.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function Qie(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new iL(t,r,i,e,"10.5.0")}!function Jie(){Ji(new wr.wA(F7,Qie,"PUBLIC").setMultipleInstances(!0)),Fi(N7,"0.11.2",""),Fi(N7,"0.11.2","esm2017")}();class sL{constructor(e){return e}}const L7="storage",oL=new c.OlP("angularfire2.storage-instances");function tse(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new sL(r)}}const nse={provide:class Xie{constructor(){return Rs(L7)}},deps:[[new c.FiY,oL]]},rse={provide:sL,useFactory:function ese(n,e){const t=Rl(L7,n,e);return t&&new sL(t)},deps:[[new c.FiY,oL],su]};let ise=(()=>{class n{constructor(){(0,Sn.registerVersion)("angularfire",Nl.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[rse,nse]}),n})();function sse(n,...e){return{ngModule:ise,providers:[{provide:oL,useFactory:tse(n),multi:!0,deps:[c.R0b,c.zs3,Fl,tv,[new c.FiY,GS],[new c.FiY,hg],...e]}]}}const ose=Dd(Kie,!0),aL={firebase:{projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",databaseURL:"https://instagram-clone-gilshaashua-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"instagram-clone-gilshaashua.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"}};Fi("firebase","10.5.0","app"),P1(aL.firebase);let lse=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=c.oAB({type:n,bootstrap:[nX]});static#n=this.\u0275inj=c.cJS({providers:[{provide:Xi.Dh,useValue:aL.firebase}],imports:[Qc,TJ,DX,KY,YY,mH(()=>_H(aL.firebase)),UX(()=>BX()),qX(()=>WX()),sse(()=>ose()),vre(()=>Cre()),Dre(()=>Sre())]})}return n})();Xg().bootstrapModule(lse).catch(n=>console.error(n))},5619:(st,be,F)=>{F.d(be,{X:()=>V});var c=F(8645);class V extends c.x{constructor(ne){super(),this._value=ne}get value(){return this.getValue()}_subscribe(ne){const ge=super._subscribe(ne);return!ge.closed&&ne.next(this._value),ge}getValue(){const{hasError:ne,thrownError:ge,_value:Ie}=this;if(ne)throw ge;return this._throwIfClosed(),Ie}next(ne){super.next(this._value=ne)}}},5592:(st,be,F)=>{F.d(be,{y:()=>Fe});var c=F(305),V=F(7394),L=F(4850),ne=F(8407),ge=F(2653),Ie=F(4674),Pe=F(1441);let Fe=(()=>{class X{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const Je=new X;return Je.source=this,Je.operator=xe,Je}subscribe(xe,Je,Ce){const De=function G(X){return X&&X instanceof c.Lv||function B(X){return X&&(0,Ie.m)(X.next)&&(0,Ie.m)(X.error)&&(0,Ie.m)(X.complete)}(X)&&(0,V.Nn)(X)}(xe)?xe:new c.Hp(xe,Je,Ce);return(0,Pe.x)(()=>{const{operator:Te,source:tt}=this;De.add(Te?Te.call(De,tt):tt?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(xe){try{return this._subscribe(xe)}catch(Je){xe.error(Je)}}forEach(xe,Je){return new(Je=Me(Je))((Ce,De)=>{const Te=new c.Hp({next:tt=>{try{xe(tt)}catch(ot){De(ot),Te.unsubscribe()}},error:De,complete:Ce});this.subscribe(Te)})}_subscribe(xe){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(xe)}[L.L](){return this}pipe(...xe){return(0,ne.U)(xe)(this)}toPromise(xe){return new(xe=Me(xe))((Je,Ce)=>{let De;this.subscribe(Te=>De=Te,Te=>Ce(Te),()=>Je(De))})}}return X.create=Oe=>new X(Oe),X})();function Me(X){var Oe;return null!==(Oe=X??ge.config.Promise)&&void 0!==Oe?Oe:Promise}},8645:(st,be,F)=>{F.d(be,{x:()=>Pe});var c=F(5592),V=F(7394);const ne=(0,F(2306).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=F(9039),Ie=F(1441);let Pe=(()=>{class Me extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new Fe(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new ne}next(G){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(G)}})}error(G){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:Oe,observers:xe}=this;return X||Oe?V.Lc:(this.currentObservers=null,xe.push(G),new V.w0(()=>{this.currentObservers=null,(0,ge.P)(xe,G)}))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:Oe,isStopped:xe}=this;X?G.error(Oe):xe&&G.complete()}asObservable(){const G=new c.y;return G.source=this,G}}return Me.create=(B,G)=>new Fe(B,G),Me})();class Fe extends Pe{constructor(B,G){super(),this.destination=B,this.source=G}next(B){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,B)}error(B){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,B)}complete(){var B,G;null===(G=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===G||G.call(B)}_subscribe(B){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(B))&&void 0!==X?X:V.Lc}}},305:(st,be,F)=>{F.d(be,{Hp:()=>Ce,Lv:()=>X});var c=F(4674),V=F(7394),L=F(2653),ne=F(3894),ge=F(2420);const Ie=Me("C",void 0,void 0);function Me(ee,de,re){return{kind:ee,value:de,error:re}}var B=F(7599),G=F(1441);class X extends V.w0{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,V.Nn)(de)&&de.add(this)):this.destination=ot}static create(de,re,he){return new Ce(de,re,he)}next(de){this.isStopped?tt(function Fe(ee){return Me("N",ee,void 0)}(de),this):this._next(de)}error(de){this.isStopped?tt(function Pe(ee){return Me("E",void 0,ee)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?tt(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function xe(ee,de){return Oe.call(ee,de)}class Je{constructor(de){this.partialObserver=de}next(de){const{partialObserver:re}=this;if(re.next)try{re.next(de)}catch(he){De(he)}}error(de){const{partialObserver:re}=this;if(re.error)try{re.error(de)}catch(he){De(he)}else De(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(re){De(re)}}}class Ce extends X{constructor(de,re,he){let Re;if(super(),(0,c.m)(de)||!de)Re={next:de??void 0,error:re??void 0,complete:he??void 0};else{let j;this&&L.config.useDeprecatedNextContext?(j=Object.create(de),j.unsubscribe=()=>this.unsubscribe(),Re={next:de.next&&xe(de.next,j),error:de.error&&xe(de.error,j),complete:de.complete&&xe(de.complete,j)}):Re=de}this.destination=new Je(Re)}}function De(ee){L.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(ee):(0,ne.h)(ee)}function tt(ee,de){const{onStoppedNotification:re}=L.config;re&&B.z.setTimeout(()=>re(ee,de))}const ot={closed:!0,next:ge.Z,error:function Te(ee){throw ee},complete:ge.Z}},7394:(st,be,F)=>{F.d(be,{Lc:()=>Ie,w0:()=>ge,Nn:()=>Pe});var c=F(4674);const L=(0,F(2306).d)(Me=>function(G){Me(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,Oe)=>`${Oe+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ne=F(9039);class ge{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const xe of G)xe.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,c.m)(X))try{X()}catch(xe){B=xe instanceof L?xe.errors:[xe]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const xe of Oe)try{Fe(xe)}catch(Je){B=B??[],Je instanceof L?B=[...B,...Je.errors]:B.push(Je)}}if(B)throw new L(B)}}add(B){var G;if(B&&B!==this)if(this.closed)Fe(B);else{if(B instanceof ge){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(B)}}_hasParent(B){const{_parentage:G}=this;return G===B||Array.isArray(G)&&G.includes(B)}_addParent(B){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(B),G):G?[G,B]:B}_removeParent(B){const{_parentage:G}=this;G===B?this._parentage=null:Array.isArray(G)&&(0,ne.P)(G,B)}remove(B){const{_finalizers:G}=this;G&&(0,ne.P)(G,B),B instanceof ge&&B._removeParent(this)}}ge.EMPTY=(()=>{const Me=new ge;return Me.closed=!0,Me})();const Ie=ge.EMPTY;function Pe(Me){return Me instanceof ge||Me&&"closed"in Me&&(0,c.m)(Me.remove)&&(0,c.m)(Me.add)&&(0,c.m)(Me.unsubscribe)}function Fe(Me){(0,c.m)(Me)?Me():Me.unsubscribe()}},2653:(st,be,F)=>{F.d(be,{config:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(st,be,F)=>{F.d(be,{E:()=>V});const V=new(F(5592).y)(ge=>ge.complete())},2459:(st,be,F)=>{F.d(be,{D:()=>de});var c=F(4829),V=F(3093),L=F(5137),Ie=F(5592),Fe=F(4971),Me=F(4674),B=F(7103);function X(re,he){if(!re)throw new Error("Iterable cannot be null");return new Ie.y(Re=>{(0,B.f)(Re,he,()=>{const j=re[Symbol.asyncIterator]();(0,B.f)(Re,he,()=>{j.next().then(we=>{we.done?Re.complete():Re.next(we.value)})},0,!0)})})}var Oe=F(8382),xe=F(4026),Je=F(4266),Ce=F(3664),De=F(5726),Te=F(9853),tt=F(541);function de(re,he){return he?function ee(re,he){if(null!=re){if((0,Oe.c)(re))return function ne(re,he){return(0,c.Xf)(re).pipe((0,L.R)(he),(0,V.Q)(he))}(re,he);if((0,Je.z)(re))return function Pe(re,he){return new Ie.y(Re=>{let j=0;return he.schedule(function(){j===re.length?Re.complete():(Re.next(re[j++]),Re.closed||this.schedule())})})}(re,he);if((0,xe.t)(re))return function ge(re,he){return(0,c.Xf)(re).pipe((0,L.R)(he),(0,V.Q)(he))}(re,he);if((0,De.D)(re))return X(re,he);if((0,Ce.T)(re))return function G(re,he){return new Ie.y(Re=>{let j;return(0,B.f)(Re,he,()=>{j=re[Fe.h](),(0,B.f)(Re,he,()=>{let we,Ue;try{({value:we,done:Ue}=j.next())}catch(lt){return void Re.error(lt)}Ue?Re.complete():Re.next(we)},0,!0)}),()=>(0,Me.m)(j?.return)&&j.return()})}(re,he);if((0,tt.L)(re))return function ot(re,he){return X((0,tt.Q)(re),he)}(re,he)}throw(0,Te.z)(re)}(re,he):(0,c.Xf)(re)}},4829:(st,be,F)=>{F.d(be,{Xf:()=>Oe});var c=F(7582),V=F(4266),L=F(4026),ne=F(5592),ge=F(8382),Ie=F(5726),Pe=F(9853),Fe=F(3664),Me=F(541),B=F(4674),G=F(3894),X=F(4850);function Oe(ee){if(ee instanceof ne.y)return ee;if(null!=ee){if((0,ge.c)(ee))return function xe(ee){return new ne.y(de=>{const re=ee[X.L]();if((0,B.m)(re.subscribe))return re.subscribe(de);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,V.z)(ee))return function Je(ee){return new ne.y(de=>{for(let re=0;re<ee.length&&!de.closed;re++)de.next(ee[re]);de.complete()})}(ee);if((0,L.t)(ee))return function Ce(ee){return new ne.y(de=>{ee.then(re=>{de.closed||(de.next(re),de.complete())},re=>de.error(re)).then(null,G.h)})}(ee);if((0,Ie.D)(ee))return Te(ee);if((0,Fe.T)(ee))return function De(ee){return new ne.y(de=>{for(const re of ee)if(de.next(re),de.closed)return;de.complete()})}(ee);if((0,Me.L)(ee))return function tt(ee){return Te((0,Me.Q)(ee))}(ee)}throw(0,Pe.z)(ee)}function Te(ee){return new ne.y(de=>{(function ot(ee,de){var re,he,Re,j;return(0,c.mG)(this,void 0,void 0,function*(){try{for(re=(0,c.KL)(ee);!(he=yield re.next()).done;)if(de.next(he.value),de.closed)return}catch(we){Re={error:we}}finally{try{he&&!he.done&&(j=re.return)&&(yield j.call(re))}finally{if(Re)throw Re.error}}de.complete()})})(ee,de).catch(re=>de.error(re))})}},3019:(st,be,F)=>{F.d(be,{T:()=>Ie});var c=F(7537),V=F(4829),L=F(6232),ne=F(4564),ge=F(2459);function Ie(...Pe){const Fe=(0,ne.yG)(Pe),Me=(0,ne._6)(Pe,1/0),B=Pe;return B.length?1===B.length?(0,V.Xf)(B[0]):(0,c.J)(Me)((0,ge.D)(B,Fe)):L.E}},2096:(st,be,F)=>{F.d(be,{of:()=>L});var c=F(4564),V=F(2459);function L(...ne){const ge=(0,c.yG)(ne);return(0,V.D)(ne,ge)}},8251:(st,be,F)=>{F.d(be,{x:()=>V});var c=F(305);function V(ne,ge,Ie,Pe,Fe){return new L(ne,ge,Ie,Pe,Fe)}class L extends c.Lv{constructor(ge,Ie,Pe,Fe,Me,B){super(ge),this.onFinalize=Me,this.shouldUnsubscribe=B,this._next=Ie?function(G){try{Ie(G)}catch(X){ge.error(X)}}:super._next,this._error=Fe?function(G){try{Fe(G)}catch(X){ge.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(G){ge.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},3997:(st,be,F)=>{F.d(be,{x:()=>ne});var c=F(2737),V=F(9360),L=F(8251);function ne(Ie,Pe=c.y){return Ie=Ie??ge,(0,V.e)((Fe,Me)=>{let B,G=!0;Fe.subscribe((0,L.x)(Me,X=>{const Oe=Pe(X);(G||!Ie(B,Oe))&&(G=!1,B=Oe,Me.next(X))}))})}function ge(Ie,Pe){return Ie===Pe}},7398:(st,be,F)=>{F.d(be,{U:()=>L});var c=F(9360),V=F(8251);function L(ne,ge){return(0,c.e)((Ie,Pe)=>{let Fe=0;Ie.subscribe((0,V.x)(Pe,Me=>{Pe.next(ne.call(ge,Me,Fe++))}))})}},7537:(st,be,F)=>{F.d(be,{J:()=>L});var c=F(1631),V=F(2737);function L(ne=1/0){return(0,c.z)(V.y,ne)}},1631:(st,be,F)=>{F.d(be,{z:()=>Fe});var c=F(7398),V=F(4829),L=F(9360),ne=F(7103),ge=F(8251),Pe=F(4674);function Fe(Me,B,G=1/0){return(0,Pe.m)(B)?Fe((X,Oe)=>(0,c.U)((xe,Je)=>B(X,xe,Oe,Je))((0,V.Xf)(Me(X,Oe))),G):("number"==typeof B&&(G=B),(0,L.e)((X,Oe)=>function Ie(Me,B,G,X,Oe,xe,Je,Ce){const De=[];let Te=0,tt=0,ot=!1;const ee=()=>{ot&&!De.length&&!Te&&B.complete()},de=he=>Te<X?re(he):De.push(he),re=he=>{xe&&B.next(he),Te++;let Re=!1;(0,V.Xf)(G(he,tt++)).subscribe((0,ge.x)(B,j=>{Oe?.(j),xe?de(j):B.next(j)},()=>{Re=!0},void 0,()=>{if(Re)try{for(Te--;De.length&&Te<X;){const j=De.shift();Je?(0,ne.f)(B,Je,()=>re(j)):re(j)}ee()}catch(j){B.error(j)}}))};return Me.subscribe((0,ge.x)(B,de,()=>{ot=!0,ee()})),()=>{Ce?.()}}(X,Oe,Me,G)))}},3093:(st,be,F)=>{F.d(be,{Q:()=>ne});var c=F(7103),V=F(9360),L=F(8251);function ne(ge,Ie=0){return(0,V.e)((Pe,Fe)=>{Pe.subscribe((0,L.x)(Fe,Me=>(0,c.f)(Fe,ge,()=>Fe.next(Me),Ie),()=>(0,c.f)(Fe,ge,()=>Fe.complete(),Ie),Me=>(0,c.f)(Fe,ge,()=>Fe.error(Me),Ie)))})}},3020:(st,be,F)=>{F.d(be,{B:()=>ge});var c=F(4829),V=F(8645),L=F(305),ne=F(9360);function ge(Pe={}){const{connector:Fe=(()=>new V.x),resetOnError:Me=!0,resetOnComplete:B=!0,resetOnRefCountZero:G=!0}=Pe;return X=>{let Oe,xe,Je,Ce=0,De=!1,Te=!1;const tt=()=>{xe?.unsubscribe(),xe=void 0},ot=()=>{tt(),Oe=Je=void 0,De=Te=!1},ee=()=>{const de=Oe;ot(),de?.unsubscribe()};return(0,ne.e)((de,re)=>{Ce++,!Te&&!De&&tt();const he=Je=Je??Fe();re.add(()=>{Ce--,0===Ce&&!Te&&!De&&(xe=Ie(ee,G))}),he.subscribe(re),!Oe&&Ce>0&&(Oe=new L.Hp({next:Re=>he.next(Re),error:Re=>{Te=!0,tt(),xe=Ie(ot,Me,Re),he.error(Re)},complete:()=>{De=!0,tt(),xe=Ie(ot,B),he.complete()}}),(0,c.Xf)(de).subscribe(Oe))})(X)}}function Ie(Pe,Fe,...Me){if(!0===Fe)return void Pe();if(!1===Fe)return;const B=new L.Hp({next:()=>{B.unsubscribe(),Pe()}});return(0,c.Xf)(Fe(...Me)).subscribe(B)}},5137:(st,be,F)=>{F.d(be,{R:()=>V});var c=F(9360);function V(L,ne=0){return(0,c.e)((ge,Ie)=>{Ie.add(L.schedule(()=>ge.subscribe(Ie),ne))})}},4664:(st,be,F)=>{F.d(be,{w:()=>ne});var c=F(4829),V=F(9360),L=F(8251);function ne(ge,Ie){return(0,V.e)((Pe,Fe)=>{let Me=null,B=0,G=!1;const X=()=>G&&!Me&&Fe.complete();Pe.subscribe((0,L.x)(Fe,Oe=>{Me?.unsubscribe();let xe=0;const Je=B++;(0,c.Xf)(ge(Oe,Je)).subscribe(Me=(0,L.x)(Fe,Ce=>Fe.next(Ie?Ie(Oe,Ce,Je,xe++):Ce),()=>{Me=null,X()}))},()=>{G=!0,X()}))})}},7599:(st,be,F)=>{F.d(be,{z:()=>c});const c={setTimeout(V,L,...ne){const{delegate:ge}=c;return ge?.setTimeout?ge.setTimeout(V,L,...ne):setTimeout(V,L,...ne)},clearTimeout(V){const{delegate:L}=c;return(L?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4971:(st,be,F)=>{F.d(be,{h:()=>V});const V=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(st,be,F)=>{F.d(be,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(st,be,F)=>{F.d(be,{_6:()=>Ie,jO:()=>ne,yG:()=>ge});var c=F(4674);function L(Pe){return Pe[Pe.length-1]}function ne(Pe){return(0,c.m)(L(Pe))?Pe.pop():void 0}function ge(Pe){return function V(Pe){return Pe&&(0,c.m)(Pe.schedule)}(L(Pe))?Pe.pop():void 0}function Ie(Pe,Fe){return"number"==typeof L(Pe)?Pe.pop():Fe}},9039:(st,be,F)=>{function c(V,L){if(V){const ne=V.indexOf(L);0<=ne&&V.splice(ne,1)}}F.d(be,{P:()=>c})},2306:(st,be,F)=>{function c(V){const ne=V(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}F.d(be,{d:()=>c})},1441:(st,be,F)=>{F.d(be,{O:()=>ne,x:()=>L});var c=F(2653);let V=null;function L(ge){if(c.config.useDeprecatedSynchronousErrorHandling){const Ie=!V;if(Ie&&(V={errorThrown:!1,error:null}),ge(),Ie){const{errorThrown:Pe,error:Fe}=V;if(V=null,Pe)throw Fe}}else ge()}function ne(ge){c.config.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ge)}},7103:(st,be,F)=>{function c(V,L,ne,ge=0,Ie=!1){const Pe=L.schedule(function(){ne(),Ie?V.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(V.add(Pe),!Ie)return Pe}F.d(be,{f:()=>c})},2737:(st,be,F)=>{function c(V){return V}F.d(be,{y:()=>c})},4266:(st,be,F)=>{F.d(be,{z:()=>c});const c=V=>V&&"number"==typeof V.length&&"function"!=typeof V},5726:(st,be,F)=>{F.d(be,{D:()=>V});var c=F(4674);function V(L){return Symbol.asyncIterator&&(0,c.m)(L?.[Symbol.asyncIterator])}},4674:(st,be,F)=>{function c(V){return"function"==typeof V}F.d(be,{m:()=>c})},8382:(st,be,F)=>{F.d(be,{c:()=>L});var c=F(4850),V=F(4674);function L(ne){return(0,V.m)(ne[c.L])}},3664:(st,be,F)=>{F.d(be,{T:()=>L});var c=F(4971),V=F(4674);function L(ne){return(0,V.m)(ne?.[c.h])}},4026:(st,be,F)=>{F.d(be,{t:()=>V});var c=F(4674);function V(L){return(0,c.m)(L?.then)}},541:(st,be,F)=>{F.d(be,{L:()=>ne,Q:()=>L});var c=F(7582),V=F(4674);function L(ge){return(0,c.FC)(this,arguments,function*(){const Pe=ge.getReader();try{for(;;){const{value:Fe,done:Me}=yield(0,c.qq)(Pe.read());if(Me)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(Fe)}}finally{Pe.releaseLock()}})}function ne(ge){return(0,V.m)(ge?.getReader)}},9360:(st,be,F)=>{F.d(be,{A:()=>V,e:()=>L});var c=F(4674);function V(ne){return(0,c.m)(ne?.lift)}function L(ne){return ge=>{if(V(ge))return ge.lift(function(Ie){try{return ne(Ie,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(st,be,F)=>{function c(){}F.d(be,{Z:()=>c})},8407:(st,be,F)=>{F.d(be,{U:()=>L,z:()=>V});var c=F(2737);function V(...ne){return L(ne)}function L(ne){return 0===ne.length?c.y:1===ne.length?ne[0]:function(Ie){return ne.reduce((Pe,Fe)=>Fe(Pe),Ie)}}},3894:(st,be,F)=>{F.d(be,{h:()=>L});var c=F(2653),V=F(7599);function L(ne){V.z.setTimeout(()=>{const{onUnhandledError:ge}=c.config;if(!ge)throw ne;ge(ne)})}},9853:(st,be,F)=>{function c(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(be,{z:()=>c})},5879:(st,be,F)=>{F.d(be,{$8M:()=>$u,$WT:()=>Ha,$Z:()=>W1,AFp:()=>Ri,ALo:()=>vc,AaK:()=>X,AsE:()=>ZT,CHM:()=>cs,CRH:()=>ay,DdM:()=>X_,Dn7:()=>Ap,EJc:()=>Nr,EpF:()=>MT,F4k:()=>DT,FYo:()=>Nx,FiY:()=>oe,Gf:()=>ZM,GfV:()=>ld,Gpc:()=>Je,HDt:()=>cD,JOm:()=>uf,KtG:()=>Kh,LFG:()=>Ve,LSH:()=>Sf,Lbi:()=>z0,Lck:()=>MO,MAs:()=>nw,MGl:()=>g_,MMx:()=>Od,MR2:()=>V0,NdJ:()=>lw,O4$:()=>Po,Ojb:()=>M1,OlP:()=>an,Oqu:()=>Ns,P3R:()=>wx,PXZ:()=>Wp,Q6J:()=>rw,QGY:()=>ap,Qsj:()=>NL,R0b:()=>jr,RDi:()=>n1,Rgc:()=>Ls,SBq:()=>Il,Sil:()=>qO,Suo:()=>pI,TTD:()=>jh,TgZ:()=>d_,Tol:()=>C_,VKq:()=>Qw,VuI:()=>gk,W1O:()=>Lp,WLB:()=>Jw,X6Q:()=>nk,XFs:()=>dt,Xpm:()=>gu,Xq5:()=>uT,Xts:()=>sd,Y36:()=>El,YKP:()=>Bl,YNc:()=>l_,Yjl:()=>vu,Yz7:()=>ft,Z0I:()=>rn,ZZ4:()=>Pa,_Bn:()=>EM,_UZ:()=>sw,_c5:()=>lk,_uU:()=>Mw,aQg:()=>Sy,c2e:()=>We,cJS:()=>kn,cg1:()=>Ia,dDg:()=>Iy,dqk:()=>Rt,eFA:()=>DI,eJc:()=>dy,ekj:()=>Cw,eoX:()=>Bs,f3M:()=>Ke,g9A:()=>E1,h0i:()=>Ul,hGG:()=>uk,hij:()=>bd,iGM:()=>fI,ifc:()=>zs,ip1:()=>rt,jDz:()=>Ii,kL8:()=>_c,kcU:()=>yt,lG2:()=>yu,lcZ:()=>rI,lnq:()=>Dw,lqb:()=>jo,lri:()=>wy,n5z:()=>pm,oAB:()=>Eh,oxw:()=>PT,q4F:()=>Hm,qFp:()=>Na,qLn:()=>uc,qOj:()=>wa,qZA:()=>sp,rWj:()=>te,rg0:()=>Vh,s9C:()=>cp,sBO:()=>sk,s_b:()=>iy,soG:()=>ye,tb:()=>by,tp0:()=>He,uIk:()=>Jf,vHH:()=>ee,vpe:()=>$o,wAp:()=>Hr,xp6:()=>dc,z2F:()=>Bd,zSh:()=>U,zs3:()=>lo});var c=F(8645),V=F(7394),L=F(5592),ne=F(3019),ge=F(5619),Ie=F(2096),Pe=F(3020),Fe=F(4664),Me=F(3997);function B(s){for(let a in s)if(s[a]===B)return a;throw Error("Could not find renamed property on target object.")}function G(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function X(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(X).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function Oe(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const xe=B({__forward_ref__:B});function Je(s){return s.__forward_ref__=Je,s.toString=function(){return X(this())},s}function Ce(s){return De(s)?s():s}function De(s){return"function"==typeof s&&s.hasOwnProperty(xe)&&s.__forward_ref__===Je}function Te(s){return s&&!!s.\u0275providers}const ot="https://g.co/ng/security#xss";class ee extends Error{constructor(a,l){super(function de(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,l)),this.code=a}}function re(s){return"string"==typeof s?s:null==s?"":String(s)}function Ue(s,a){throw new ee(-201,!1)}function Qe(s,a){null==s&&function Be(s,a,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function ft(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function kn(s){return{providers:s.providers||[],imports:s.imports||[]}}function In(s){return qn(s,_r)||qn(s,Kr)}function rn(s){return null!==In(s)}function qn(s,a){return s.hasOwnProperty(a)?s[a]:null}function Ur(s){return s&&(s.hasOwnProperty(Wn)||s.hasOwnProperty(ws))?s[Wn]:null}const _r=B({\u0275prov:B}),Wn=B({\u0275inj:B}),Kr=B({ngInjectableDef:B}),ws=B({ngInjectorDef:B});var dt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(dt||{});let mt;function sn(s){const a=mt;return mt=s,a}function di(s,a,l){const d=In(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&dt.Optional?null:void 0!==a?a:void Ue(X(s))}const Rt=globalThis,it={},Ft="__NG_DI_FLAG__",Vt="ngTempTokenPath",H=/\n/gm,O="__source";let k;function K(s){const a=k;return k=s,a}function me(s,a=dt.Default){if(void 0===k)throw new ee(-203,!1);return null===k?di(s,void 0,a):k.get(s,a&dt.Optional?null:void 0,a)}function Ve(s,a=dt.Default){return(function Tt(){return mt}()||me)(Ce(s),a)}function Ke(s,a=dt.Default){return Ve(s,Qt(a))}function Qt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function wt(s){const a=[];for(let l=0;l<s.length;l++){const d=Ce(s[l]);if(Array.isArray(d)){if(0===d.length)throw new ee(900,!1);let h,p=dt.Default;for(let y=0;y<d.length;y++){const C=d[y],E=xt(C);"number"==typeof E?-1===E?h=C.token:p|=E:h=C}a.push(Ve(h,p))}else a.push(Ve(d))}return a}function hn(s,a){return s[Ft]=a,s.prototype[Ft]=a,s}function xt(s){return s[Ft]}function Hs(s){return{toString:s}.toString()}var bo=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(bo||{}),zs=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(zs||{});const Gi={},Kt=[],ra=B({\u0275cmp:B}),ja=B({\u0275dir:B}),hu=B({\u0275pipe:B}),fu=B({\u0275mod:B}),Gs=B({\u0275fac:B}),$a=B({__NG_ELEMENT_ID__:B}),pu=B({__NG_ENV_ID__:B});function _h(s,a,l){let d=s.length;for(;;){const h=s.indexOf(a,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=a.length;if(h+p===d||s.charCodeAt(h+p)<=32)return h}l=h+1}}function Di(s,a,l){let d=0;for(;d<l.length;){const h=l[d];if("number"==typeof h){if(0!==h)break;d++;const p=l[d++],y=l[d++],C=l[d++];s.setAttribute(a,y,C,p)}else{const p=h,y=l[++d];Vc(p)?s.setProperty(a,p,y):s.setAttribute(a,p,y),d++}}return d}function qs(s){return 3===s||4===s||6===s}function Vc(s){return 64===s.charCodeAt(0)}function jc(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const h=a[d];"number"==typeof h?l=h:0===l||Si(s,l,h,null,-1===l||2===l?a[++d]:null)}}return s}function Si(s,a,l,d,h){let p=0,y=s.length;if(-1===a)y=-1;else for(;p<s.length;){const C=s[p++];if("number"==typeof C){if(C===a){y=-1;break}if(C>a){y=p-1;break}}}for(;p<s.length;){const C=s[p];if("number"==typeof C)break;if(C===l){if(null===d)return void(null!==h&&(s[p+1]=h));if(d===s[p+1])return void(s[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,a),p=y+1),s.splice(p++,0,l),null!==d&&s.splice(p++,0,d),null!==h&&s.splice(p++,0,h)}const Fn="ng-template";function xv(s,a,l){let d=0,h=!0;for(;d<s.length;){let p=s[d++];if("string"==typeof p&&h){const y=s[d++];if(l&&"class"===p&&-1!==_h(y.toLowerCase(),a,0))return!0}else{if(1===p){for(;d<s.length&&"string"==typeof(p=s[d++]);)if(p.toLowerCase()===a)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function vn(s){return 4===s.type&&s.value!==Fn}function Pv(s,a,l){return a===(4!==s.type||l?s.value:Fn)}function yh(s,a,l){let d=4;const h=s.attrs||[],p=function $c(s){for(let a=0;a<s.length;a++)if(qs(s[a]))return a;return s.length}(h);let y=!1;for(let C=0;C<a.length;C++){const E=a[C];if("number"!=typeof E){if(!y)if(4&d){if(d=2|1&d,""!==E&&!Pv(s,E,l)||""===E&&1===a.length){if(hi(d))return!1;y=!0}}else{const M=8&d?E:a[++C];if(8&d&&null!==s.attrs){if(!xv(s.attrs,M,l)){if(hi(d))return!1;y=!0}continue}const R=vh(8&d?"class":E,h,vn(s),l);if(-1===R){if(hi(d))return!1;y=!0;continue}if(""!==M){let W;W=R>p?"":h[R+1].toLowerCase();const Y=8&d?W:null;if(Y&&-1!==_h(Y,M,0)||2&d&&M!==W){if(hi(d))return!1;y=!0}}}}else{if(!y&&!hi(d)&&!hi(E))return!1;if(y&&hi(E))continue;y=!1,d=E|1&d}}return hi(d)||y}function hi(s){return 0==(1&s)}function vh(s,a,l,d){if(null===a)return-1;let h=0;if(d||!l){let p=!1;for(;h<a.length;){const y=a[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let C=a[++h];for(;"string"==typeof C;)C=a[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function wh(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,s)}function Ch(s,a,l=!1){for(let d=0;d<a.length;d++)if(yh(s,a[d],l))return!0;return!1}function Ng(s,a){return s?":not("+a.trim()+")":a}function Rg(s){let a=s[0],l=1,d=2,h="",p=!1;for(;l<s.length;){let y=s[l];if("string"==typeof y)if(2&d){const C=s[++l];h+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!hi(y)&&(a+=Ng(p,h),h=""),d=y,p=p||!hi(d);l++}return""!==h&&(a+=Ng(p,h)),a}function gu(s){return Hs(()=>{const a=Fg(s),l={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===bo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||zs.Emulated,styles:s.styles||Kt,_:null,schemas:s.schemas||null,tView:null,id:""};Cu(l);const d=s.dependencies;return l.directiveDefs=Eo(d,!1),l.pipeDefs=Eo(d,!0),l.id=function Mh(s){let a=0;const l=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of l)a=Math.imul(31,a)+h.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(l),l})}function mu(s){return Lt(s)||Mr(s)}function bh(s){return null!==s}function Eh(s){return Hs(()=>({type:s.type,bootstrap:s.bootstrap||Kt,declarations:s.declarations||Kt,imports:s.imports||Kt,exports:s.exports||Kt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function _u(s,a){if(null==s)return Gi;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=d,a&&(a[h]=p)}return l}function yu(s){return Hs(()=>{const a=Fg(s);return Cu(a),a})}function vu(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Lt(s){return s[ra]||null}function Mr(s){return s[ja]||null}function Dr(s){return s[hu]||null}function Ha(s){const a=Lt(s)||Mr(s)||Dr(s);return null!==a&&a.standalone}function Qr(s,a){const l=s[fu]||null;if(!l&&!0===a)throw new Error(`Type ${X(s)} does not have '\u0275mod' property.`);return l}function Fg(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:s.inputs||Gi,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Kt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_u(s.inputs,a),outputs:_u(s.outputs)}}function Cu(s){s.features?.forEach(a=>a(s))}function Eo(s,a){if(!s)return null;const l=a?Dr:mu;return()=>("function"==typeof s?s():s).map(d=>l(d)).filter(bh)}const bn=0,je=1,Et=2,fn=3,xi=4,Zs=5,Sr=6,ia=7,Zn=8,Ks=9,To=10,pt=11,Hc=12,kv=13,Pi=14,ar=15,za=16,Oi=17,Jr=18,Ys=19,Lg=20,sa=21,bs=22,wu=23,qi=24,Ut=25,Sh=1,zc=2,Xr=7,Ga=9,cr=11;function fi(s){return Array.isArray(s)&&"object"==typeof s[Sh]}function Br(s){return Array.isArray(s)&&!0===s[Sh]}function Ah(s){return 0!=(4&s.flags)}function Qs(s){return s.componentOffset>-1}function qc(s){return 1==(1&s.flags)}function Wi(s){return!!s.template}function qa(s){return 0!=(512&s[Et])}function Js(s,a){return s.hasOwnProperty(Gs)?s[Gs]:null}let vr=null,Nh=!1;function ti(s){const a=vr;return vr=s,a}const Rh={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Hv(s){if(!Tu(s)||s.dirty){if(!s.producerMustRecompute(s)&&!Gv(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function zv(s){s.dirty=!0,function jg(s){if(void 0===s.liveConsumerNode)return;const a=Nh;Nh=!0;try{for(const l of s.liveConsumerNode)l.dirty||zv(l)}finally{Nh=a}}(s),s.consumerMarkedDirty?.(s)}function $g(s){return s&&(s.nextProducerIndex=0),ti(s)}function Eu(s,a){if(ti(a),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(Tu(s))for(let l=s.nextProducerIndex;l<s.producerNode.length;l++)Zc(s.producerNode[l],s.producerIndexOfThis[l]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function Gv(s){Do(s);for(let a=0;a<s.producerNode.length;a++){const l=s.producerNode[a],d=s.producerLastReadVersion[a];if(d!==l.version||(Hv(l),d!==l.version))return!0}return!1}function Lh(s){if(Do(s),Tu(s))for(let a=0;a<s.producerNode.length;a++)Zc(s.producerNode[a],s.producerIndexOfThis[a]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function Zc(s,a){if(function Wv(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),Do(s),1===s.liveConsumerNode.length)for(let d=0;d<s.producerNode.length;d++)Zc(s.producerNode[d],s.producerIndexOfThis[d]);const l=s.liveConsumerNode.length-1;if(s.liveConsumerNode[a]=s.liveConsumerNode[l],s.liveConsumerIndexOfThis[a]=s.liveConsumerIndexOfThis[l],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,a<s.liveConsumerNode.length){const d=s.liveConsumerIndexOfThis[a],h=s.liveConsumerNode[a];Do(h),h.producerIndexOfThis[d]=a}}function Tu(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function Do(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let Kv=null;function Vh(s){const a=ti(null);try{return s()}finally{ti(a)}}const Zg=()=>{},TE=(()=>({...Rh,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:Zg}))();class Xv{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function jh(){return $h}function $h(s){return s.type.prototype.ngOnChanges&&(s.setInput=Xs),Su}function Su(){const s=Hh(this),a=s?.current;if(a){const l=s.previous;if(l===Gi)s.previous=a;else for(let d in a)l[d]=a[d];s.current=null,this.ngOnChanges(a)}}function Xs(s,a,l,d){const h=this.declaredInputs[l],p=Hh(s)||function e0(s,a){return s[Ka]=a}(s,{previous:Gi,current:null}),y=p.current||(p.current={}),C=p.previous,E=C[h];y[h]=new Xv(E&&E.currentValue,a,C===Gi),s[d]=a}jh.ngInherit=!0;const Ka="__ngSimpleChanges__";function Hh(s){return s[Ka]||null}const Es=function(s,a,l){},Kg="svg";function on(s){for(;Array.isArray(s);)s=s[bn];return s}function eo(s,a){return on(a[s])}function ni(s,a){return on(a[s.index])}function Gh(s,a){return s.data[a]}function Ya(s,a){return s[a]}function pi(s,a){const l=a[s];return fi(l)?l:l[bn]}function So(s,a){return null==a?null:s[a]}function Yg(s){s[Oi]=0}function Yc(s){1024&s[Et]||(s[Et]|=1024,nr(s,1))}function t0(s){1024&s[Et]&&(s[Et]&=-1025,nr(s,-1))}function nr(s,a){let l=s[fn];if(null===l)return;l[Zs]+=a;let d=l;for(l=l[fn];null!==l&&(1===a&&1===d[Zs]||-1===a&&0===d[Zs]);)l[Zs]+=a,d=l,l=l[fn]}const _t={lFrame:cm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Qa(){return _t.bindingsEnabled}function ve(){return _t.lFrame.lView}function jt(){return _t.lFrame.tView}function cs(s){return _t.lFrame.contextLView=s,s[Zn]}function Kh(s){return _t.lFrame.contextLView=null,s}function Ar(){let s=ku();for(;null!==s&&64===s.type;)s=s.parent;return s}function ku(){return _t.lFrame.currentTNode}function Ts(s,a){const l=_t.lFrame;l.currentTNode=s,l.isParent=a}function nm(){return _t.lFrame.isParent}function xr(){const s=_t.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function xo(){return _t.lFrame.bindingIndex}function Xc(){return _t.lFrame.bindingIndex++}function Ms(s){const a=_t.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}function sm(s,a){const l=_t.lFrame;l.bindingIndex=l.bindingRootIndex=s,om(a)}function om(s){_t.lFrame.currentDirectiveIndex=s}function c0(){return _t.lFrame.currentQueryIndex}function am(s){_t.lFrame.currentQueryIndex=s}function OE(s){const a=s[je];return 2===a.type?a.declTNode:1===a.type?s[Sr]:null}function Qh(s,a,l){if(l&dt.SkipSelf){let h=a,p=s;for(;!(h=h.parent,null!==h||l&dt.Host||(h=OE(p),null===h||(p=p[Pi],10&h.type))););if(null===h)return!1;a=h,s=p}const d=_t.lFrame=to();return d.currentTNode=a,d.lView=s,!0}function gi(s){const a=to(),l=s[je];_t.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function to(){const s=_t.lFrame,a=null===s?null:s.child;return null===a?cm(s):a}function cm(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function pn(){const s=_t.lFrame;return _t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ut=pn;function lr(){const s=pn();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ri(){return _t.lFrame.selectedIndex}function no(s){_t.lFrame.selectedIndex=s}function Cn(){const s=_t.lFrame;return Gh(s.tView,s.selectedIndex)}function Po(){_t.lFrame.currentNamespace=Kg}function yt(){!function l0(){_t.lFrame.currentNamespace=null}()}let el=!0;function ro(){return el}function io(s){el=s}function Ja(s,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:E,ngAfterViewChecked:M,ngOnDestroy:A}=p;y&&(s.contentHooks??=[]).push(-l,y),C&&((s.contentHooks??=[]).push(l,C),(s.contentCheckHooks??=[]).push(l,C)),E&&(s.viewHooks??=[]).push(-l,E),M&&((s.viewHooks??=[]).push(l,M),(s.viewCheckHooks??=[]).push(l,M)),null!=A&&(s.destroyHooks??=[]).push(l,A)}}function Xa(s,a,l){Fu(s,a,3,l)}function ec(s,a,l,d){(3&s[Et])===l&&Fu(s,a,l,d)}function Ru(s,a){let l=s[Et];(3&l)===a&&(l&=8191,l+=1,s[Et]=l)}function Fu(s,a,l,d){const p=d??-1,y=a.length-1;let C=0;for(let E=void 0!==d?65535&s[Oi]:0;E<y;E++)if("number"==typeof a[E+1]){if(C=a[E],null!=d&&C>=d)break}else a[E]<0&&(s[Oi]+=65536),(C<p||-1==p)&&(tl(s,l,a,E),s[Oi]=(4294901760&s[Oi])+E+2),E++}function so(s,a){Es(4,s,a);const l=ti(null);try{a.call(s)}finally{ti(l),Es(5,s,a)}}function tl(s,a,l,d){const h=l[d]<0,p=l[d+1],C=s[h?-l[d]:l[d]];h?s[Et]>>13<s[Oi]>>16&&(3&s[Et])===a&&(s[Et]+=8192,so(C,p)):so(C,p)}const Ds=-1;class aa{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Uu(s){return s!==Ds}function ki(s){return 32767&s}function kt(s,a){let l=function En(s){return s>>16}(s),d=a;for(;l>0;)d=d[Pi],l--;return d}let tc=!0;function Cr(s){const a=tc;return tc=s,a}const il=255,sl=5;let u0=0;const ur={};function Tn(s,a){const l=Bu(s,a);if(-1!==l)return l;const d=a[je];d.firstCreatePass&&(s.injectorIndex=a.length,Ss(d.data,s),Ss(a,null),Ss(d.blueprint,null));const h=la(s,a),p=s.injectorIndex;if(Uu(h)){const y=ki(h),C=kt(h,a),E=C[je].data;for(let M=0;M<8;M++)a[p+M]=C[y+M]|E[y+M]}return a[p+8]=h,p}function Ss(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Bu(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function la(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=a;for(;null!==h;){if(d=mm(h),null===d)return Ds;if(l++,h=h[Pi],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return Ds}function nc(s,a,l){!function ko(s,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty($a)&&(d=l[$a]),null==d&&(d=l[$a]=u0++);const h=d&il;a.data[s+(h>>sl)]|=1<<h}(s,a,l)}function tf(s,a,l){if(l&dt.Optional||void 0!==s)return s;Ue()}function rc(s,a,l,d){if(l&dt.Optional&&void 0===d&&(d=null),!(l&(dt.Self|dt.Host))){const h=s[Ks],p=sn(void 0);try{return h?h.get(a,d,l&dt.Optional):di(a,d,l&dt.Optional)}finally{sn(p)}}return tf(d,0,l)}function nf(s,a,l,d=dt.Default,h){if(null!==s){if(2048&a[Et]&&!(d&dt.Self)){const y=function gm(s,a,l,d,h){let p=s,y=a;for(;null!==p&&null!==y&&2048&y[Et]&&!(512&y[Et]);){const C=Vu(p,y,l,d|dt.Self,ur);if(C!==ur)return C;let E=p.parent;if(!E){const M=y[Lg];if(M){const A=M.get(l,ur,d);if(A!==ur)return A}E=mm(y),y=y[Pi]}p=E}return h}(s,a,l,d,ur);if(y!==ur)return y}const p=Vu(s,a,l,d,ur);if(p!==ur)return p}return rc(a,l,d,h)}function Vu(s,a,l,d,h){const p=function Ro(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty($a)?s[$a]:void 0;return"number"==typeof a?a>=0?a&il:Fo:a}(l);if("function"==typeof p){if(!Qh(a,s,d))return d&dt.Host?tf(h,0,d):rc(a,l,d,h);try{let y;if(y=p(d),null!=y||d&dt.Optional)return y;Ue()}finally{ut()}}else if("number"==typeof p){let y=null,C=Bu(s,a),E=Ds,M=d&dt.Host?a[ar][Sr]:null;for((-1===C||d&dt.SkipSelf)&&(E=-1===C?la(s,a):a[C+8],E!==Ds&&hm(d,!1)?(y=a[je],C=ki(E),a=kt(E,a)):C=-1);-1!==C;){const A=a[je];if(dm(p,C,A.data)){const R=Mt(C,a,l,y,d,M);if(R!==ur)return R}E=a[C+8],E!==Ds&&hm(d,a[je].data[C+8]===M)&&dm(p,C,a)?(y=A,C=ki(E),a=kt(E,a)):C=-1}}return h}function Mt(s,a,l,d,h,p){const y=a[je],C=y.data[s+8],A=No(C,y,l,null==d?Qs(C)&&tc:d!=y&&0!=(3&C.type),h&dt.Host&&p===C);return null!==A?ua(a,y,A,C):ur}function No(s,a,l,d,h){const p=s.providerIndexes,y=a.data,C=1048575&p,E=s.directiveStart,A=p>>20,W=h?C+A:s.directiveEnd;for(let Y=d?C:C+A;Y<W;Y++){const ue=y[Y];if(Y<E&&l===ue||Y>=E&&ue.type===l)return Y}if(h){const Y=y[E];if(Y&&Wi(Y)&&Y.type===l)return E}return null}function ua(s,a,l,d){let h=s[l];const p=a.data;if(function Lu(s){return s instanceof aa}(h)){const y=h;y.resolving&&function Re(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new ee(-200,`Circular dependency in DI detected for ${s}${l}`)}(function he(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():re(s)}(p[l]));const C=Cr(y.canSeeViewProviders);y.resolving=!0;const M=y.injectImpl?sn(y.injectImpl):null;Qh(s,d,dt.Default);try{h=s[l]=y.factory(void 0,p,s,d),a.firstCreatePass&&l>=d.directiveStart&&function mi(s,a,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=a.type.prototype;if(d){const y=$h(a);(l.preOrderHooks??=[]).push(s,y),(l.preOrderCheckHooks??=[]).push(s,y)}h&&(l.preOrderHooks??=[]).push(0-s,h),p&&((l.preOrderHooks??=[]).push(s,p),(l.preOrderCheckHooks??=[]).push(s,p))}(l,p[l],a)}finally{null!==M&&sn(M),Cr(C),y.resolving=!1,ut()}}return h}function dm(s,a,l){return!!(l[a+(s>>sl)]&1<<s)}function hm(s,a){return!(s&dt.Self||s&dt.Host&&a)}class dr{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return nf(this._tNode,this._lView,a,Qt(d),l)}}function Fo(){return new dr(Ar(),ve())}function pm(s){return Hs(()=>{const a=s.prototype.constructor,l=a[Gs]||ju(a),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const p=h[Gs]||ju(h);if(p&&p!==l)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function ju(s){return De(s)?()=>{const a=ju(Ce(s));return a&&a()}:Js(s)}function mm(s){const a=s[je],l=a.type;return 2===l?a.declTNode:1===l?s[Sr]:null}function $u(s){return function um(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const p=l[h];if(qs(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(p===a)return l[h+1];h+=2}}}return null}(Ar(),s)}const da="__parameters__";function Gt(s,a,l){return Hs(()=>{const d=function Lo(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(a);function h(...p){if(this instanceof h)return d.apply(this,p),this;const y=new h(...p);return C.annotation=y,C;function C(E,M,A){const R=E.hasOwnProperty(da)?E[da]:Object.defineProperty(E,da,{value:[]})[da];for(;R.length<=A;)R.push(null);return(R[A]=R[A]||[]).push(y),E}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function sc(s,a){s.forEach(l=>Array.isArray(l)?sc(l,a):a(l))}function h0(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function oc(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Ni(s,a,l){let d=ac(s,a);return d>=0?s[1|d]=l:(d=~d,function vm(s,a,l,d){let h=s.length;if(h==a)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>a;)s[h]=s[h-2],h--;s[a]=l,s[a+1]=d}}(s,d,a,l)),d}function af(s,a){const l=ac(s,a);if(l>=0)return s[1|l]}function ac(s,a){return function Zu(s,a,l){let d=0,h=s.length>>l;for(;h!==d;){const p=d+(h-d>>1),y=s[p<<l];if(a===y)return p<<l;y>a?h=p:d=p+1}return~(h<<l)}(s,a,1)}const oe=hn(Gt("Optional"),8),He=hn(Gt("SkipSelf"),4);function Im(s){return 128==(128&s.flags)}var uf=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(uf||{});const df=new Map;let jA=0;const Tm="__ngContext__";function vi(s,a){fi(a)?(s[Tm]=a[Ys],function jE(s){df.set(s[Ys],s)}(a)):s[Tm]=a}let pf;function ls(s,a){return pf(s,a)}function _a(s){const a=s[fn];return Br(a)?a[fn]:a}function zE(s){return gf(s[Hc])}function T0(s){return gf(s[xi])}function gf(s){for(;null!==s&&!Br(s);)s=s[xi];return s}function ed(s,a,l,d,h){if(null!=d){let p,y=!1;Br(d)?p=d:fi(d)&&(y=!0,d=d[bn]);const C=on(d);0===s&&null!==l?null==h?ZE(a,l,C):gl(a,l,C,h||null,!0):1===s&&null!==l?gl(a,l,C,h||null,!0):2===s?function xm(s,a,l){const d=Am(s,a);d&&function nx(s,a,l,d){s.removeChild(a,l,d)}(s,d,a,l)}(a,C,y):3===s&&a.destroyNode(C),null!=p&&function ix(s,a,l,d,h){const p=l[Xr];p!==on(l)&&ed(a,s,d,p,h);for(let C=cr;C<l.length;C++){const E=l[C];wf(E[je],E,s,a,d,p)}}(a,s,p,l,h)}}function Dm(s,a,l){return s.createElement(a,l)}function GE(s,a){const l=s[Ga],d=l.indexOf(a);t0(a),l.splice(d,1)}function Sm(s,a){if(s.length<=cr)return;const l=cr+a,d=s[l];if(d){const h=d[za];null!==h&&h!==s&&GE(h,d),a>0&&(s[l-1][xi]=d[xi]);const p=oc(s,cr+a);!function QA(s,a){wf(s,a,a[pt],2,null,null),a[bn]=null,a[Sr]=null}(d[je],d);const y=p[Jr];null!==y&&y.detachView(p[je]),d[fn]=null,d[xi]=null,d[Et]&=-129}return d}function M0(s,a){if(!(256&a[Et])){const l=a[pt];a[wu]&&Lh(a[wu]),a[qi]&&Lh(a[qi]),l.destroyNode&&wf(s,a,l,3,null,null),function JA(s){let a=s[Hc];if(!a)return qE(s[je],s);for(;a;){let l=null;if(fi(a))l=a[Hc];else{const d=a[cr];d&&(l=d)}if(!l){for(;a&&!a[xi]&&a!==s;)fi(a)&&qE(a[je],a),a=a[fn];null===a&&(a=s),fi(a)&&qE(a[je],a),l=a&&a[xi]}a=l}}(a)}}function qE(s,a){if(!(256&a[Et])){a[Et]&=-129,a[Et]|=256,function WE(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=a[l[d]];if(!(h instanceof aa)){const p=l[d+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const C=h[p[y]],E=p[y+1];Es(4,C,E);try{E.call(C)}finally{Es(5,C,E)}}else{Es(4,h,p);try{p.call(h)}finally{Es(5,h,p)}}}}}(s,a),function tx(s,a){const l=s.cleanup,d=a[ia];if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const y=l[p+3];y>=0?d[y]():d[-y].unsubscribe(),p+=2}else l[p].call(d[l[p+1]]);null!==d&&(a[ia]=null);const h=a[sa];if(null!==h){a[sa]=null;for(let p=0;p<h.length;p++)(0,h[p])()}}(s,a),1===a[je].type&&a[pt].destroy();const l=a[za];if(null!==l&&Br(a[fn])){l!==a[fn]&&GE(l,a);const d=a[Jr];null!==d&&d.detachView(s)}!function hf(s){df.delete(s[Ys])}(a)}}function td(s,a,l){return function pl(s,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[bn];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:p}=s.data[d.directiveStart+h];if(p===zs.None||p===zs.Emulated)return null}return ni(d,l)}}(s,a.parent,l)}function gl(s,a,l,d,h){s.insertBefore(a,l,d,h)}function ZE(s,a,l){s.appendChild(a,l)}function KE(s,a,l,d,h){null!==d?gl(s,a,l,d,h):ZE(s,a,l)}function Am(s,a){return s.parentNode(a)}let S0,t1,Om,D0=function QE(s,a,l){return 40&s.type?ni(s,l):null};function vf(s,a,l,d){const h=td(s,d,a),p=a[pt],C=function YE(s,a,l){return D0(s,a,l)}(d.parent||a[Sr],d,a);if(null!=h)if(Array.isArray(l))for(let E=0;E<l.length;E++)KE(p,h,l[E],C,!1);else KE(p,h,l,C,!1);void 0!==S0&&S0(p,d,a,l,h)}function Vo(s,a){if(null!==a){const l=a.type;if(3&l)return ni(a,s);if(4&l)return x0(-1,s[a.index]);if(8&l){const d=a.child;if(null!==d)return Vo(s,d);{const h=s[a.index];return Br(h)?x0(-1,h):on(h)}}if(32&l)return ls(a,s)()||on(s[a.index]);{const d=A0(s,a);return null!==d?Array.isArray(d)?d[0]:Vo(_a(s[ar]),d):Vo(s,a.next)}}return null}function A0(s,a){return null!==a?s[ar][Sr].projection[a.projection]:null}function x0(s,a){const l=cr+s+1;if(l<a.length){const d=a[l],h=d[je].firstChild;if(null!==h)return Vo(d,h)}return a[Xr]}function Cf(s,a,l,d,h,p,y){for(;null!=l;){const C=d[l.index],E=l.type;if(y&&0===a&&(C&&vi(on(C),d),l.flags|=2),32!=(32&l.flags))if(8&E)Cf(s,a,l.child,d,h,p,!1),ed(a,s,h,C,p);else if(32&E){const M=ls(l,d);let A;for(;A=M();)ed(a,s,h,A,p);ed(a,s,h,C,p)}else 16&E?O0(s,a,d,l,h,p):ed(a,s,h,C,p);l=y?l.projectionNext:l.next}}function wf(s,a,l,d,h,p){Cf(l,d,s.firstChild,a,h,p,!1)}function O0(s,a,l,d,h,p){const y=l[ar],E=y[Sr].projection[d.projection];if(Array.isArray(E))for(let M=0;M<E.length;M++)ed(a,s,h,E[M],p);else{let M=E;const A=y[fn];Im(d)&&(M.flags|=128),Cf(s,a,M,A,h,p,!0)}}function XE(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function If(s,a,l){const{mergedAttrs:d,classes:h,styles:p}=l;null!==d&&Di(s,a,d),null!==h&&XE(s,a,h),null!==p&&function ox(s,a,l){s.setAttribute(a,"style",l)}(s,a,p)}function n1(s){t1=s}function o1(s){return function N0(){if(void 0===Om&&(Om=null,Rt.trustedTypes))try{Om=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Om}()?.createScriptURL(s)||s}class a1{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function lc(s){return s instanceof a1?s.changingThisBreaksApplicationSecurity:s}function id(s,a){const l=function km(s){return s instanceof a1&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see ${ot})`)}return l===a}const bf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Df=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(Df||{});function Sf(s){const a=Af();return a?a.sanitize(Df.URL,s)||"":id(s,"URL")?lc(s):function Rm(s){return(s=String(s)).match(bf)?s:"unsafe:"+s}(re(s))}function m1(s){const a=Af();if(a)return o1(a.sanitize(Df.RESOURCE_URL,s)||"");if(id(s,"ResourceURL"))return o1(lc(s));throw new ee(904,!1)}function wx(s,a,l){return function Cx(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?m1:Sf}(a,l)(s)}function Af(){const s=ve();return s&&s[To].sanitizer}class an{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=ft({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const sd=new an("ENVIRONMENT_INITIALIZER"),y1=new an("INJECTOR",-1),v1=new an("INJECTOR_DEF_TYPES");class Fm{get(a,l=it){if(l===it){const d=new Error(`NullInjectorError: No provider for ${X(a)}!`);throw d.name="NullInjectorError",d}return l}}function V0(s){return{\u0275providers:s}}function Ix(...s){return{\u0275providers:C1(0,s),\u0275fromNgModule:!0}}function C1(s,...a){const l=[],d=new Set;let h;const p=y=>{l.push(y)};return sc(a,y=>{const C=y;Lm(C,p,[],d)&&(h||=[],h.push(C))}),void 0!==h&&w1(h,p),l}function w1(s,a){for(let l=0;l<s.length;l++){const{ngModule:d,providers:h}=s[l];j0(h,p=>{a(p,d)})}}function Lm(s,a,l,d){if(!(s=Ce(s)))return!1;let h=null,p=Ur(s);const y=!p&&Lt(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const E=s.ngModule;if(p=Ur(E),!p)return!1;h=E}const C=d.has(h);if(y){if(C)return!1;if(d.add(h),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const M of E)Lm(M,a,l,d)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let M;d.add(h);try{sc(p.imports,A=>{Lm(A,a,l,d)&&(M||=[],M.push(A))})}finally{}void 0!==M&&w1(M,a)}if(!C){const M=Js(h)||(()=>new h);a({provide:h,useFactory:M,deps:Kt},h),a({provide:v1,useValue:h,multi:!0},h),a({provide:sd,useValue:()=>Ve(h),multi:!0},h)}const E=p.providers;if(null!=E&&!C){const M=s;j0(E,A=>{a(A,M)})}}}return h!==s&&void 0!==s.providers}function j0(s,a){for(let l of s)Te(l)&&(l=l.\u0275providers),Array.isArray(l)?j0(l,a):a(l)}const EL=B({provide:String,useValue:B});function I1(s){return null!==s&&"object"==typeof s&&EL in s}function od(s){return"function"==typeof s}const U=new an("Set Injector scope."),Um={},Dn={};let $0;function _l(){return void 0===$0&&($0=new Fm),$0}class jo{}class xf extends jo{get destroyed(){return this._destroyed}constructor(a,l,d,h){super(),this.parent=l,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wr(a,y=>this.processProvider(y)),this.records.set(y1,kf(void 0,this)),h.has("environment")&&this.records.set(jo,kf(void 0,this));const p=this.records.get(U);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(v1.multi,Kt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const l of a)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const l=K(this),d=sn(void 0);try{return a()}finally{K(l),sn(d)}}get(a,l=it,d=dt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(pu))return a[pu](this);d=Qt(d);const p=K(this),y=sn(void 0);try{if(!(d&dt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const M=function Dx(s){return"function"==typeof s||"object"==typeof s&&s instanceof an}(a)&&In(a);E=M&&this.injectableDefInScope(M)?kf(Pf(a),Um):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&dt.Self?_l():this.parent).get(a,l=d&dt.Optional&&l===it?null:l)}catch(C){if("NullInjectorError"===C.name){if((C[Vt]=C[Vt]||[]).unshift(X(a)),p)throw C;return function zi(s,a,l,d){const h=s[Vt];throw a[O]&&h.unshift(a[O]),s.message=function Bc(s,a,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=X(a);if(Array.isArray(a))h=a.map(X).join(" -> ");else if("object"==typeof a){let p=[];for(let y in a)if(a.hasOwnProperty(y)){let C=a[y];p.push(y+":"+("string"==typeof C?JSON.stringify(C):X(C)))}h=`{${p.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(H,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[Vt]=null,s}(C,a,"R3InjectorError",this.source)}throw C}finally{sn(y),K(p)}}resolveInjectorInitializers(){const a=K(this),l=sn(void 0);try{const h=this.get(sd.multi,Kt,dt.Self);for(const p of h)p()}finally{K(a),sn(l)}}toString(){const a=[],l=this.records;for(const d of l.keys())a.push(X(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(a){let l=od(a=Ce(a))?a:Ce(a&&a.provide);const d=function b1(s){return I1(s)?kf(void 0,s.useValue):kf(H0(s),Um)}(a);if(od(a)||!0!==a.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=kf(void 0,Um,!0),h.factory=()=>wt(h.multi),this.records.set(l,h)),l=a,h.multi.push(a)}this.records.set(l,d)}hydrate(a,l){return l.value===Um&&(l.value=Dn,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Mx(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=Ce(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}removeOnDestroy(a){const l=this._onDestroyHooks.indexOf(a);-1!==l&&this._onDestroyHooks.splice(l,1)}}function Pf(s){const a=In(s),l=null!==a?a.factory:Js(s);if(null!==l)return l;if(s instanceof an)throw new ee(204,!1);if(s instanceof Function)return function Of(s){const a=s.length;if(a>0)throw function Uo(s,a){const l=[];for(let d=0;d<s;d++)l.push(a);return l}(a,"?"),new ee(204,!1);const l=function Mi(s){return s&&(s[_r]||s[Kr])||null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new ee(204,!1)}function H0(s,a,l){let d;if(od(s)){const h=Ce(s);return Js(h)||Pf(h)}if(I1(s))d=()=>Ce(s.useValue);else if(function Tx(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...wt(s.deps||[]));else if(function Ex(s){return!(!s||!s.useExisting)}(s))d=()=>Ve(Ce(s.useExisting));else{const h=Ce(s&&(s.useClass||s.provide));if(!function Sn(s){return!!s.deps}(s))return Js(h)||Pf(h);d=()=>new h(...wt(s.deps))}return d}function kf(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function wr(s,a){for(const l of s)Array.isArray(l)?wr(l,a):l&&Te(l)?wr(l.\u0275providers,a):a(l)}const Ri=new an("AppId",{providedIn:"root",factory:()=>z}),z="ng",E1=new an("Platform Initializer"),z0=new an("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),M1=new an("CSP nonce",{providedIn:"root",factory:()=>function ml(){if(void 0!==t1)return t1;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let D1=(s,a,l)=>null;function J0(s,a,l=!1){return D1(s,a,l)}class OL{}class A1{}class P1{resolveComponentFactory(a){throw function va(s){const a=Error(`No component factory found for ${X(s)}.`);return a.ngComponent=s,a}(a)}}let Ff=(()=>{class s{static#e=this.NULL=new P1}return s})();function kL(){return Lf(Ar(),ve())}function Lf(s,a){return new Il(ni(s,a))}let Il=(()=>{class s{constructor(l){this.nativeElement=l}static#e=this.__NG_ELEMENT_ID__=kL}return s})();function Fi(s){return s instanceof Il?s.nativeElement:s}class Nx{}let NL=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Rx(){const s=ve(),l=pi(Ar().index,s);return(fi(l)?l:s)[pt]}()}return s})(),Fx=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>null})}return s})();class ld{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Hm=new ld("16.2.9"),zm={};function rC(s,a=null,l=null,d){const h=F1(s,a,l,d);return h.resolveInjectorInitializers(),h}function F1(s,a=null,l=null,d,h=new Set){const p=[l||Kt,Ix(s)];return d=d||("object"==typeof s?void 0:X(s)),new xf(p,a||_l(),d||null,h)}let lo=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=it;static#t=this.NULL=new Fm;static create(l,d){if(Array.isArray(l))return rC({name:""},d,l,"");{const h=l.name??"";return rC({name:h},l.parent,l.providers,h)}}static#n=this.\u0275prov=ft({token:s,providedIn:"any",factory:()=>Ve(y1)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function sC(s){return s.ngOriginalError}class uc{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&sC(a);for(;l&&sC(l);)l=sC(l);return l||null}}function Bf(s){return a=>{setTimeout(s,void 0,a)}}const $o=class aC extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){let h=a,p=l||(()=>null),y=d;if(a&&"object"==typeof a){const E=a;h=E.next?.bind(E),p=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(p=Bf(p),h&&(h=Bf(h)),y&&(y=Bf(y)));const C=super.subscribe({next:h,error:p,complete:y});return a instanceof V.w0&&a.add(C),C}};function L1(...s){}class jr{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $o(!1),this.onMicrotaskEmpty=new $o(!1),this.onStable=new $o(!1),this.onError=new $o(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function cC(){const s="function"==typeof Rt.requestAnimationFrame;let a=Rt[s?"requestAnimationFrame":"setTimeout"],l=Rt[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&l){const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function $x(s){const a=()=>{!function lC(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Rt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,U1(s),s.isCheckStableRunning=!0,Ho(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),U1(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,p,y,C)=>{if(function fC(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(C))return l.invokeTask(h,p,y,C);try{return B1(s),l.invokeTask(h,p,y,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&a(),V1(s)}},onInvoke:(l,d,h,p,y,C,E)=>{try{return B1(s),l.invoke(h,p,y,C,E)}finally{s.shouldCoalesceRunChangeDetection&&a(),V1(s)}},onHasTask:(l,d,h,p)=>{l.hasTask(h,p),d===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,U1(s),Ho(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,d,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!jr.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(jr.isInAngularZone())throw new ee(909,!1)}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,a,jx,L1,L1);try{return p.runTask(y,l,d)}finally{p.cancelTask(y)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const jx={};function Ho(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function U1(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function B1(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function V1(s){s._nesting--,Ho(s)}class uC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $o,this.onMicrotaskEmpty=new $o,this.onStable=new $o,this.onError=new $o}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,h){return a.apply(l,d)}}const dC=new an("",{providedIn:"root",factory:hC});function hC(){const s=Ke(jr);let a=!0;const l=new L.y(h=>{a=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(a),h.complete()})}),d=new L.y(h=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{jr.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(a=!0,h.next(!0))})})});const y=s.onUnstable.subscribe(()=>{jr.assertInAngularZone(),a&&(a=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,ne.T)(l,d.pipe((0,Pe.B)()))}function Ca(s){return s instanceof Function?s():s}let Vf=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function hd(s){for(;s;){s[Et]|=64;const a=_a(s);if(qa(s)&&!a)return s;s=a}return null}const mC=new an("",{providedIn:"root",factory:()=>!1});let Zm=null;function bl(s,a){return s[a]??wC()}function CC(s,a){const l=wC();l.producerNode?.length&&(s[a]=Zm,l.lView=s,Zm=q1())}const Wx={...Rh,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{hd(s.lView)},lView:null};function q1(){return Object.create(Wx)}function wC(){return Zm??=q1(),Zm}const Dt={};function dc(s){IC(jt(),ve(),ri()+s,!1)}function IC(s,a,l,d){if(!d)if(3==(3&a[Et])){const p=s.preOrderCheckHooks;null!==p&&Xa(a,p,l)}else{const p=s.preOrderHooks;null!==p&&ec(a,p,0,l)}no(l)}function El(s,a=dt.Default){const l=ve();return null===l?Ve(s,a):nf(Ar(),l,Ce(s),a)}function W1(){throw new Error("invalid")}function Go(s,a,l,d,h,p,y,C,E,M,A){const R=a.blueprint.slice();return R[bn]=h,R[Et]=140|d,(null!==M||s&&2048&s[Et])&&(R[Et]|=2048),Yg(R),R[fn]=R[Pi]=s,R[Zn]=l,R[To]=y||s&&s[To],R[pt]=C||s&&s[pt],R[Ks]=E||s&&s[Ks]||null,R[Sr]=p,R[Ys]=function Em(){return jA++}(),R[bs]=A,R[Lg]=M,R[ar]=2==a.type?s[ar]:R,R}function hc(s,a,l,d,h){let p=s.data[a];if(null===p)p=function $f(s,a,l,d,h){const p=ku(),y=nm(),E=s.data[a]=function K1(s,a,l,d,h,p){let y=a?a.injectorIndex:-1,C=0;return function Ao(){return null!==_t.skipHydrationRootTNode}()&&(C|=128),{type:l,index:d,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,l,a,d,h);return null===s.firstChild&&(s.firstChild=E),null!==p&&(y?null==p.child&&null!==E.parent&&(p.child=E):null===p.next&&(p.next=E,E.prev=p)),E}(s,a,l,d,h),function xE(){return _t.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=l,p.value=d,p.attrs=h;const y=function Jc(){const s=_t.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return Ts(p,!0),p}function fc(s,a,l,d){if(0===l)return-1;const h=a.length;for(let p=0;p<l;p++)a.push(d),s.blueprint.push(d),s.data.push(null);return h}function Km(s,a,l,d,h){const p=bl(a,wu),y=ri(),C=2&d;try{no(-1),C&&a.length>Ut&&IC(s,a,Ut,!1),Es(C?2:0,h);const M=C?p:null,A=$g(M);try{null!==M&&(M.dirty=!1),l(d,h)}finally{Eu(M,A)}}finally{C&&null===a[wu]&&CC(a,wu),no(y),Es(C?3:1,h)}}function Hf(s,a,l){if(Ah(a)){const d=ti(null);try{const p=a.directiveEnd;for(let y=a.directiveStart;y<p;y++){const C=s.data[y];C.contentQueries&&C.contentQueries(1,l[y],y)}}finally{ti(d)}}}function zf(s,a,l){Qa()&&(function Q1(s,a,l,d){const h=l.directiveStart,p=l.directiveEnd;Qs(l)&&function iP(s,a,l){const d=ni(a,s),h=Ym(l);let y=16;l.signals?y=4096:l.onPush&&(y=64);const C=LC(s,Go(s,h,null,y,d,a,null,s[To].rendererFactory.createRenderer(d,l),null,null,null));s[a.index]=C}(a,l,s.data[h+l.componentOffset]),s.firstCreatePass||Tn(l,a),vi(d,a);const y=l.initialInputs;for(let C=h;C<p;C++){const E=s.data[C],M=ua(a,s,C,l);vi(M,a),null!==y&&FC(0,C-h,M,E,0,y),Wi(E)&&(pi(l.index,a)[Zn]=ua(a,s,C,l))}}(s,a,l,ni(l,a)),64==(64&l.flags)&&J1(s,a,l))}function Tl(s,a,l=ni){const d=a.localNames;if(null!==d){let h=a.index+1;for(let p=0;p<d.length;p+=2){const y=d[p+1],C=-1===y?l(a,s):s[y];s[h++]=C}}}function Ym(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Gf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):a}function Gf(s,a,l,d,h,p,y,C,E,M,A){const R=Ut+d,W=R+h,Y=function bC(s,a){const l=[];for(let d=0;d<a;d++)l.push(d<s?null:Dt);return l}(R,W),ue="function"==typeof M?M():M;return Y[je]={type:s,blueprint:Y,template:l,queries:null,viewQuery:C,declTNode:a,data:Y.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:ue,incompleteFirstPass:!1,ssrId:A}}let Z1=s=>null;function MC(s,a,l,d){for(let h in s)if(s.hasOwnProperty(h)){l=null===l?{}:l;const p=s[h];null===d?Y1(l,a,h,p):d.hasOwnProperty(h)&&Y1(l,a,d[h],p)}return l}function Y1(s,a,l,d){s.hasOwnProperty(l)?s[l].push(a,d):s[l]=[a,d]}function us(s,a,l,d,h,p,y,C){const E=ni(a,l);let A,M=a.inputs;!C&&null!=M&&(A=M[d])?(VC(s,l,A,d,h),Qs(a)&&function SC(s,a){const l=pi(a,s);16&l[Et]||(l[Et]|=64)}(l,a.index)):3&a.type&&(d=function DC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,a.value||"",d):h,p.setProperty(E,d,h))}function qf(s,a,l,d){if(Qa()){const h=null===d?null:{"":-1},p=function tP(s,a){const l=s.directiveRegistry;let d=null,h=null;if(l)for(let p=0;p<l.length;p++){const y=l[p];if(Ch(a,y.selectors,!1))if(d||(d=[]),Wi(y))if(null!==y.findHostDirectiveDefs){const C=[];h=h||new Map,y.findHostDirectiveDefs(y,C,h),d.unshift(...C,y),OC(s,a,C.length)}else d.unshift(y),OC(s,a,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,d,h),d.push(y)}return null===d?null:[d,h]}(s,l);let y,C;null===p?y=C=null:[y,C]=p,null!==y&&xC(s,a,l,y,h,C),h&&function nP(s,a,l){if(a){const d=s.localNames=[];for(let h=0;h<a.length;h+=2){const p=l[a[h+1]];if(null==p)throw new ee(-301,!1);d.push(a[h],p)}}}(l,d,h)}l.mergedAttrs=jc(l.mergedAttrs,l.attrs)}function xC(s,a,l,d,h,p){for(let M=0;M<d.length;M++)nc(Tn(l,a),s,d[M].type);!function rP(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}(l,s.data.length,d.length);for(let M=0;M<d.length;M++){const A=d[M];A.providersResolver&&A.providersResolver(A)}let y=!1,C=!1,E=fc(s,a,d.length,null);for(let M=0;M<d.length;M++){const A=d[M];l.mergedAttrs=jc(l.mergedAttrs,A.hostAttrs),NC(s,l,a,E,A),kC(E,A,h),null!==A.contentQueries&&(l.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(l.flags|=64);const R=A.type.prototype;!y&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((s.preOrderHooks??=[]).push(l.index),y=!0),!C&&(R.ngOnChanges||R.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(l.index),C=!0),E++}!function Jx(s,a,l){const h=a.directiveEnd,p=s.data,y=a.attrs,C=[];let E=null,M=null;for(let A=a.directiveStart;A<h;A++){const R=p[A],W=l?l.get(R):null,ue=W?W.outputs:null;E=MC(R.inputs,A,E,W?W.inputs:null),M=MC(R.outputs,A,M,ue);const Se=null===E||null===y||vn(a)?null:$L(E,A,y);C.push(Se)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=8),E.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=E,a.outputs=M}(s,l,p)}function J1(s,a,l){const d=l.directiveStart,h=l.directiveEnd,p=l.index,y=function PE(){return _t.lFrame.currentDirectiveIndex}();try{no(p);for(let C=d;C<h;C++){const E=s.data[C],M=a[C];om(C),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&eP(E,M)}}finally{no(-1),om(y)}}function eP(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function OC(s,a,l){a.componentOffset=l,(s.components??=[]).push(a.index)}function kC(s,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=s;Wi(a)&&(l[""]=s)}}function NC(s,a,l,d,h){s.data[d]=h;const p=h.factory||(h.factory=Js(h.type)),y=new aa(p,Wi(h),El);s.blueprint[d]=y,l[d]=y,function Xx(s,a,l,d,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const C=~a.index;(function PC(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(y)!=C&&y.push(C),y.push(l,d,p)}}(s,a,d,fc(s,l,h.hostVars,Dt),h)}function Os(s,a,l,d,h,p){const y=ni(s,a);!function RC(s,a,l,d,h,p,y){if(null==p)s.removeAttribute(a,h,l);else{const C=null==y?re(p):y(p,d||"",h);s.setAttribute(a,h,C,l)}}(a[pt],y,p,s.value,l,d,h)}function FC(s,a,l,d,h,p){const y=p[a];if(null!==y)for(let C=0;C<y.length;)X1(d,l,y[C++],y[C++],y[C++])}function X1(s,a,l,d,h){const p=ti(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(d)&&(h=y[d].call(a,h)),null!==s.setInput?s.setInput(a,h,l,d):a[d]=h}finally{ti(p)}}function $L(s,a,l){let d=null,h=0;for(;h<l.length;){const p=l[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===d&&(d=[]);const y=s[p];for(let C=0;C<y.length;C+=2)if(y[C]===a){d.push(p,y[C+1],l[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function Qm(s,a,l,d){return[s,!0,!1,a,null,0,d,l,null,null,null]}function sP(s,a){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const p=l[d+1];if(-1!==p){const y=s.data[p];am(l[d]),y.contentQueries(2,a[p],p)}}}function LC(s,a){return s[Hc]?s[kv][xi]=a:s[Hc]=a,s[kv]=a,a}function UC(s,a,l){am(0);const d=ti(null);try{a(s,l)}finally{ti(d)}}function BC(s){return s[ia]||(s[ia]=[])}function tT(s){return s.cleanup||(s.cleanup=[])}function rT(s,a){const l=s[Ks],d=l?l.get(uc,null):null;d&&d.handleError(a)}function VC(s,a,l,d,h){for(let p=0;p<l.length;){const y=l[p++],C=l[p++];X1(s.data[y],a[y],d,C,h)}}function uo(s,a,l){const d=eo(a,s);!function hl(s,a,l){s.setValue(a,l)}(s[pt],d,l)}function iT(s,a){const l=pi(a,s),d=l[je];!function oP(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])}(d,l);const h=l[bn];null!==h&&null===l[bs]&&(l[bs]=J0(h,l[Ks])),Jm(d,l,l[Zn])}function Jm(s,a,l){gi(a);try{const d=s.viewQuery;null!==d&&UC(1,d,l);const h=s.template;null!==h&&Km(s,a,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&sP(s,a),s.staticViewQueries&&UC(2,s.viewQuery,l);const p=s.components;null!==p&&function aP(s,a){for(let l=0;l<a.length;l++)iT(s,a[l])}(a,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[Et]&=-5,lr()}}let Li=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(l,d,h){const p=typeof Zone>"u"?null:Zone.current,y=function Qv(s,a,l){const d=Object.create(TE);l&&(d.consumerAllowSignalWrites=!0),d.fn=s,d.schedule=a;const h=y=>{d.cleanupFn=y};return d.ref={notify:()=>zv(d),run:()=>{if(d.dirty=!1,d.hasRun&&!Gv(d))return;d.hasRun=!0;const y=$g(d);try{d.cleanupFn(),d.cleanupFn=Zg,d.fn(h)}finally{Eu(d,y)}},cleanup:()=>d.cleanupFn()},d.ref}(l,M=>{this.all.has(M)&&this.queue.set(M,p)},h);let C;this.all.add(y),y.notify();const E=()=>{y.cleanup(),C?.(),this.all.delete(y),this.queue.delete(y)};return C=d?.onDestroy(E),{destroy:E}}flush(){if(0!==this.queue.size)for(const[l,d]of this.queue)this.queue.delete(l),d?d.run(()=>l.run()):l.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function Xm(s,a,l){let d=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==a)for(let y=0;y<a.length;y++){const C=a[y];"number"==typeof C?p=C:1==p?h=Oe(h,C):2==p&&(d=Oe(d,C+": "+a[++y]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}function Wf(s,a,l,d,h=!1){for(;null!==l;){const p=a[l.index];null!==p&&d.push(on(p)),Br(p)&&jC(p,d);const y=l.type;if(8&y)Wf(s,a,l.child,d);else if(32&y){const C=ls(l,a);let E;for(;E=C();)d.push(E)}else if(16&y){const C=A0(a,l);if(Array.isArray(C))d.push(...C);else{const E=_a(a[ar]);Wf(E[je],E,C,d,!0)}}l=h?l.projectionNext:l.next}return d}function jC(s,a){for(let l=cr;l<s.length;l++){const d=s[l],h=d[je].firstChild;null!==h&&Wf(d[je],d,h,a)}s[Xr]!==s[bn]&&a.push(s[Xr])}function e_(s,a,l,d=!0){const h=a[To],p=h.rendererFactory,y=h.afterRenderEventManager;p.begin?.(),y?.begin();try{oT(s,a,s.template,l)}catch(E){throw d&&rT(a,E),E}finally{p.end?.(),h.effectManager?.flush(),y?.end()}}function oT(s,a,l,d){const h=a[Et];if(256!=(256&h)){a[To].effectManager?.flush(),gi(a);try{Yg(a),function a0(s){return _t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Km(s,a,l,2,d);const y=3==(3&h);if(y){const M=s.preOrderCheckHooks;null!==M&&Xa(a,M,null)}else{const M=s.preOrderHooks;null!==M&&ec(a,M,0,null),Ru(a,0)}if(function lP(s){for(let a=zE(s);null!==a;a=T0(a)){if(!a[zc])continue;const l=a[Ga];for(let d=0;d<l.length;d++){Yc(l[d])}}}(a),t_(a,2),null!==s.contentQueries&&sP(s,a),y){const M=s.contentCheckHooks;null!==M&&Xa(a,M)}else{const M=s.contentHooks;null!==M&&ec(a,M,1),Ru(a,1)}!function Zx(s,a){const l=s.hostBindingOpCodes;if(null===l)return;const d=bl(a,qi);try{for(let h=0;h<l.length;h++){const p=l[h];if(p<0)no(~p);else{const y=p,C=l[++h],E=l[++h];sm(C,y),d.dirty=!1;const M=$g(d);try{E(2,a[y])}finally{Eu(d,M)}}}}finally{null===a[qi]&&CC(a,qi),no(-1)}}(s,a);const C=s.components;null!==C&&dP(a,C,0);const E=s.viewQuery;if(null!==E&&UC(2,E,d),y){const M=s.viewCheckHooks;null!==M&&Xa(a,M)}else{const M=s.viewHooks;null!==M&&ec(a,M,2),Ru(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Et]&=-73,t0(a)}finally{lr()}}}function t_(s,a){for(let l=zE(s);null!==l;l=T0(l))for(let d=cr;d<l.length;d++)n_(l[d],a)}function uP(s,a,l){n_(pi(a,s),l)}function n_(s,a){if(!function SE(s){return 128==(128&s[Et])}(s))return;const l=s[je],d=s[Et];if(80&d&&0===a||1024&d||2===a)oT(l,s,l.template,s[Zn]);else if(s[Zs]>0){t_(s,1);const h=l.components;null!==h&&dP(s,h,1)}}function dP(s,a,l){for(let d=0;d<a.length;d++)uP(s,a[d],l)}class r_{get rootNodes(){const a=this._lView,l=a[je];return Wf(l,a,l.firstChild,[])}constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zn]}set context(a){this._lView[Zn]=a}get destroyed(){return 256==(256&this._lView[Et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[fn];if(Br(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(Sm(a,d),oc(l,d))}this._attachedToViewContainer=!1}M0(this._lView[je],this._lView)}onDestroy(a){!function Wh(s,a){if(256==(256&s[Et]))throw new ee(911,!1);null===s[sa]&&(s[sa]=[]),s[sa].push(a)}(this._lView,a)}markForCheck(){hd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Et]&=-129}reattach(){this._lView[Et]|=128}detectChanges(){e_(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _f(s,a){wf(s,a,a[pt],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=a}}class zL extends r_{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;e_(a[je],a,a[Zn],!1)}checkNoChanges(){}get context(){return null}}class hP extends Ff{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=Lt(a);return new Kf(l,this.ngModule)}}function Zf(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class fP{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,d){d=Qt(d);const h=this.injector.get(a,zm,d);return h!==zm||l===zm?h:this.parentInjector.get(a,l,d)}}class Kf extends A1{get inputs(){const a=this.componentDef,l=a.inputTransforms,d=Zf(a.inputs);if(null!==l)for(const h of d)l.hasOwnProperty(h.propName)&&(h.transform=l[h.propName]);return d}get outputs(){return Zf(this.componentDef.outputs)}constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function vE(s){return s.map(Rg).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}create(a,l,d,h){let p=(h=h||this.ngModule)instanceof jo?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new fP(a,p):a,C=y.get(Nx,null);if(null===C)throw new ee(407,!1);const R={rendererFactory:C,sanitizer:y.get(Fx,null),effectManager:y.get(Li,null),afterRenderEventManager:y.get(Vf,null)},W=C.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ue=d?function Kx(s,a,l,d){const p=d.get(mC,!1)||l===zs.ShadowDom,y=s.selectRootElement(a,p);return function Yx(s){Z1(s)}(y),y}(W,d,this.componentDef.encapsulation,y):Dm(W,Y,function GL(s){const a=s.toLowerCase();return"svg"===a?Kg:"math"===a?"math":null}(Y)),ct=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let fe=null;null!==ue&&(fe=J0(ue,y,!0));const Ct=Gf(0,null,null,1,0,null,null,null,null,null,null),St=Go(null,Ct,null,ct,null,null,R,W,y,null,fe);let cn,Yn;gi(St);try{const Xo=this.componentDef;let ea,qI=null;Xo.findHostDirectiveDefs?(ea=[],qI=new Map,Xo.findHostDirectiveDefs(Xo,ea,qI),ea.push(Xo)):ea=[Xo];const Ck=function gP(s,a){const l=s[je],d=Ut;return s[d]=a,hc(l,d,2,"#host",null)}(St,ue),Pt=function mP(s,a,l,d,h,p,y){const C=h[je];!function _P(s,a,l,d){for(const h of s)a.mergedAttrs=jc(a.mergedAttrs,h.hostAttrs);null!==a.mergedAttrs&&(Xm(a,a.mergedAttrs,!0),null!==l&&If(d,l,a))}(d,s,a,y);let E=null;null!==a&&(E=J0(a,h[Ks]));const M=p.rendererFactory.createRenderer(a,l);let A=16;l.signals?A=4096:l.onPush&&(A=64);const R=Go(h,Ym(l),null,A,h[s.index],s,p,M,null,null,E);return C.firstCreatePass&&OC(C,s,d.length-1),LC(h,R),h[s.index]=R}(Ck,ue,Xo,ea,St,R,W);Yn=Gh(Ct,Ut),ue&&function vP(s,a,l,d){if(d)Di(s,l,["ng-version",Hm.full]);else{const{attrs:h,classes:p}=function Ai(s){const a=[],l=[];let d=1,h=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===h?""!==p&&a.push(p,s[++d]):8===h&&l.push(p);else{if(!hi(h))break;h=p}d++}return{attrs:a,classes:l}}(a.selectors[0]);h&&Di(s,l,h),p&&p.length>0&&XE(s,l,p.join(" "))}}(W,Xo,ue,d),void 0!==l&&function CP(s,a,l){const d=s.projection=[];for(let h=0;h<a.length;h++){const p=l[h];d.push(null!=p?Array.from(p):null)}}(Yn,this.ngContentSelectors,l),cn=function yP(s,a,l,d,h,p){const y=Ar(),C=h[je],E=ni(y,h);xC(C,h,y,l,null,d);for(let A=0;A<l.length;A++)vi(ua(h,C,y.directiveStart+A,y),h);J1(C,h,y),E&&vi(E,h);const M=ua(h,C,y.directiveStart+y.componentOffset,y);if(s[Zn]=h[Zn]=M,null!==p)for(const A of p)A(M,a);return Hf(C,y,s),M}(Pt,Xo,ea,qI,St,[wP]),Jm(Ct,St,null)}finally{lr()}return new pP(this.componentType,cn,Lf(Yn,St),St,Yn)}}class pP extends OL{constructor(a,l,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.previousInputValues=null,this.instance=l,this.hostView=this.changeDetectorRef=new zL(h),this.componentType=a}setInput(a,l){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),l))return;const p=this._rootLView;VC(p[je],p,h,a,l),this.previousInputValues.set(a,l),hd(pi(this._tNode.index,p))}}get injector(){return new dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function wP(){const s=Ar();Ja(ve()[je],s)}function wa(s){let a=function Yf(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;a;){let h;if(Wi(s))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ee(903,!1);h=a.\u0275dir}if(h){if(l){d.push(h);const y=s;y.inputs=i_(s.inputs),y.inputTransforms=i_(s.inputTransforms),y.declaredInputs=i_(s.declaredInputs),y.outputs=i_(s.outputs);const C=h.hostBindings;C&&TP(s,C);const E=h.viewQuery,M=h.contentQueries;if(E&&bP(s,E),M&&EP(s,M),G(s.inputs,h.inputs),G(s.declaredInputs,h.declaredInputs),G(s.outputs,h.outputs),null!==h.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),G(y.inputTransforms,h.inputTransforms)),Wi(h)&&h.data.animation){const A=s.data;A.animation=(A.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const C=p[y];C&&C.ngInherit&&C(s),C===wa&&(l=!1)}}a=Object.getPrototypeOf(a)}!function IP(s){let a=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=a+=h.hostVars,h.hostAttrs=jc(h.hostAttrs,l=jc(l,h.hostAttrs))}}(d)}function i_(s){return s===Gi?{}:s===Kt?[]:s}function bP(s,a){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{a(d,h),l(d,h)}:a}function EP(s,a){const l=s.contentQueries;s.contentQueries=l?(d,h,p)=>{a(d,h,p),l(d,h,p)}:a}function TP(s,a){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{a(d,h),l(d,h)}:a}function uT(s){const a=s.inputConfig,l={};for(const d in a)if(a.hasOwnProperty(d)){const h=a[d];Array.isArray(h)&&h[2]&&(l[d]=h[2])}s.inputTransforms=l}function pd(s){return!!Qf(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Qf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function qo(s,a,l){return s[a]=l}function Ci(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function Dl(s,a,l,d){const h=Ci(s,a,l);return Ci(s,a+1,d)||h}function o_(s,a,l,d,h){const p=Dl(s,a,l,d);return Ci(s,a+2,h)||p}function Jf(s,a,l,d){const h=ve();return Ci(h,Xc(),a)&&(jt(),Os(Cn(),h,s,a,l,d)),Jf}function pc(s,a,l,d){return Ci(s,Xc(),l)?a+re(l)+d:Dt}function l_(s,a,l,d,h,p,y,C){const E=ve(),M=jt(),A=s+Ut,R=M.firstCreatePass?function LP(s,a,l,d,h,p,y,C,E){const M=a.consts,A=hc(a,s,4,y||null,So(M,C));qf(a,l,A,So(M,E)),Ja(a,A);const R=A.tView=Gf(2,A,d,h,p,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M,null);return null!==a.queries&&(a.queries.template(a,A),R.queries=a.queries.embeddedTView(A)),A}(A,M,E,a,l,d,h,p,y):M.data[A];Ts(R,!1);const W=ew(M,E,R,s);ro()&&vf(M,E,W,R),vi(W,E),LC(E,E[A]=Qm(W,E,W,R)),qc(R)&&zf(M,E,R),null!=y&&Tl(E,R,C)}let ew=function u_(s,a,l,d){return io(!0),a[pt].createComment("")};function nw(s){return Ya(function s0(){return _t.lFrame.contextLView}(),Ut+s)}function rw(s,a,l){const d=ve();return Ci(d,Xc(),a)&&us(jt(),Cn(),d,s,a,d[pt],l,!1),rw}function iw(s,a,l,d,h){const y=h?"class":"style";VC(s,l,a.inputs[y],y,d)}function d_(s,a,l,d){const h=ve(),p=jt(),y=Ut+s,C=h[pt],E=p.firstCreatePass?function VP(s,a,l,d,h,p){const y=a.consts,E=hc(a,s,2,d,So(y,h));return qf(a,l,E,So(y,p)),null!==E.attrs&&Xm(E,E.attrs,!1),null!==E.mergedAttrs&&Xm(E,E.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,E),E}(y,p,h,a,l,d):p.data[y],M=h_(p,h,E,C,a,s);h[y]=M;const A=qc(E);return Ts(E,!0),If(C,M,E),32!=(32&E.flags)&&ro()&&vf(p,h,M,E),0===function Jg(){return _t.lFrame.elementDepthCount}()&&vi(M,h),function Xg(){_t.lFrame.elementDepthCount++}(),A&&(zf(p,h,E),Hf(p,E,h)),null!==d&&Tl(h,E),d_}function sp(){let s=Ar();nm()?function rm(){_t.lFrame.isParent=!1}():(s=s.parent,Ts(s,!1));const a=s;(function Qc(s){return _t.skipHydrationRootTNode===s})(a)&&function tm(){_t.skipHydrationRootTNode=null}(),function n0(){_t.lFrame.elementDepthCount--}();const l=jt();return l.firstCreatePass&&(Ja(l,s),Ah(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Oo(s){return 0!=(8&s.flags)}(a)&&iw(l,a,ve(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function rl(s){return 0!=(16&s.flags)}(a)&&iw(l,a,ve(),a.stylesWithoutHost,!1),sp}function sw(s,a,l,d){return d_(s,a,l,d),sp(),sw}let h_=(s,a,l,d,h,p)=>(io(!0),Dm(d,h,function lm(){return _t.lFrame.currentNamespace}()));function MT(){return ve()}function ap(s){return!!s&&"function"==typeof s.then}function DT(s){return!!s&&"function"==typeof s.subscribe}function lw(s,a,l,d){const h=ve(),p=jt(),y=Ar();return function uw(s,a,l,d,h,p,y){const C=qc(d),M=s.firstCreatePass&&tT(s),A=a[Zn],R=BC(a);let W=!0;if(3&d.type||y){const Se=ni(d,a),$e=y?y(Se):Se,ct=R.length,fe=y?St=>y(on(St[d.index])):d.index;let Ct=null;if(!y&&C&&(Ct=function ST(s,a,l,d){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===l&&h[p+1]===d){const C=a[ia],E=h[p+2];return C.length>E?C[E]:null}"string"==typeof y&&(p+=2)}return null}(s,a,h,d.index)),null!==Ct)(Ct.__ngLastListenerFn__||Ct).__ngNextListenerFn__=p,Ct.__ngLastListenerFn__=p,W=!1;else{p=xT(d,a,A,p,!1);const St=l.listen($e,h,p);R.push(p,St),M&&M.push(h,fe,ct,ct+1)}}else p=xT(d,a,A,p,!1);const Y=d.outputs;let ue;if(W&&null!==Y&&(ue=Y[h])){const Se=ue.length;if(Se)for(let $e=0;$e<Se;$e+=2){const cn=a[ue[$e]][ue[$e+1]].subscribe(p),Yn=R.length;R.push(p,cn),M&&M.push(h,d.index,Yn,-(Yn+1))}}}(p,h,h[pt],y,s,a,d),lw}function AT(s,a,l,d){try{return Es(6,a,l),!1!==l(d)}catch(h){return rT(s,h),!1}finally{Es(7,a,l)}}function xT(s,a,l,d,h){return function p(y){if(y===Function)return d;hd(s.componentOffset>-1?pi(s.index,a):a);let E=AT(a,l,d,y),M=p.__ngNextListenerFn__;for(;M;)E=AT(a,l,M,y)&&E,M=M.__ngNextListenerFn__;return h&&!1===E&&y.preventDefault(),E}}function PT(s=1){return function Nu(s){return(_t.lFrame.contextLView=function Jh(s,a){for(;s>0;)a=a[Pi],s--;return a}(s,_t.lFrame.contextLView))[Zn]}(s)}function cp(s,a,l){return g_(s,"",a,"",l),cp}function g_(s,a,l,d,h){const p=ve(),y=pc(p,a,l,d);return y!==Dt&&us(jt(),Cn(),p,s,y,p[pt],h,!1),g_}function __(s,a){return s<<17|a<<2}function mc(s){return s>>17&32767}function fw(s){return 2|s}function hr(s){return(131068&s)>>2}function pw(s,a){return-131069&s|a<<2}function gw(s){return 1|s}function LT(s,a,l,d,h){const p=s[l+1],y=null===a;let C=d?mc(p):hr(p),E=!1;for(;0!==C&&(!1===E||y);){const A=s[C+1];_w(s[C],a)&&(E=!0,s[C+1]=d?gw(A):fw(A)),C=d?mc(A):hr(A)}E&&(s[l+1]=d?fw(p):gw(p))}function _w(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&ac(s,a)>=0}const Pr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function UT(s){return s.substring(Pr.key,Pr.keyEnd)}function BT(s,a){const l=Pr.textEnd;return l===a?-1:(a=Pr.keyEnd=function vw(s,a,l){for(;a<l&&s.charCodeAt(a)>32;)a++;return a}(s,Pr.key=a,l),Id(s,a,l))}function Id(s,a,l){for(;a<l&&s.charCodeAt(a)<=32;)a++;return a}function Cw(s,a){return function ds(s,a,l,d){const h=ve(),p=jt(),y=Ms(2);p.firstUpdatePass&&HT(p,s,y,d),a!==Dt&&Ci(h,y,a)&&GT(p,p.data[ri()],h,h[pt],s,h[y+1]=function Ko(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=X(lc(s)))),s}(a,l),d,y)}(s,a,null,!0),Cw}function C_(s){!function ho(s,a,l,d){const h=jt(),p=Ms(2);h.firstUpdatePass&&HT(h,null,p,d);const y=ve();if(l!==Dt&&Ci(y,p,l)){const C=h.data[ri()];if(Tw(C,d)&&!w_(h,p)){let E=d?C.classesWithoutHost:C.stylesWithoutHost;null!==E&&(l=Oe(E,l||"")),iw(h,C,y,l,d)}else!function Ew(s,a,l,d,h,p,y,C){h===Dt&&(h=Kt);let E=0,M=0,A=0<h.length?h[0]:null,R=0<p.length?p[0]:null;for(;null!==A||null!==R;){const W=E<h.length?h[E+1]:void 0,Y=M<p.length?p[M+1]:void 0;let Se,ue=null;A===R?(E+=2,M+=2,W!==Y&&(ue=R,Se=Y)):null===R||null!==A&&A<R?(E+=2,ue=A):(M+=2,ue=R,Se=Y),null!==ue&&GT(s,a,l,d,ue,Se,y,C),A=E<h.length?h[E]:null,R=M<p.length?p[M]:null}}(h,C,y,y[pt],y[p+1],y[p+1]=function zT(s,a,l){if(null==l||""===l)return Kt;const d=[],h=lc(l);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(d,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(d,p,h[p]);else"string"==typeof h&&a(d,h);return d}(s,a,l),d,p)}}(eO,Zo,s,!0)}function Zo(s,a){for(let l=function ZP(s){return function VT(s){Pr.key=0,Pr.keyEnd=0,Pr.value=0,Pr.valueEnd=0,Pr.textEnd=s.length}(s),BT(s,Id(s,0,Pr.textEnd))}(a);l>=0;l=BT(a,l))Ni(s,UT(a),!0)}function w_(s,a){return a>=s.expandoStartIndex}function HT(s,a,l,d){const h=s.data;if(null===h[l+1]){const p=h[ri()],y=w_(s,l);Tw(p,d)&&null===a&&!y&&(a=!1),a=function ww(s,a,l,d){const h=function Yh(s){const a=_t.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let p=d?a.residualClasses:a.residualStyles;if(null===h)0===(d?a.classBindings:a.styleBindings)&&(l=kl(l=up(null,s,a,l,d),a.attrs,d),p=null);else{const y=a.directiveStylingLast;if(-1===y||s[y]!==h)if(l=up(h,s,a,l,d),null===p){let E=function JP(s,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==hr(d))return s[mc(d)]}(s,a,d);void 0!==E&&Array.isArray(E)&&(E=up(null,s,a,E[1],d),E=kl(E,a.attrs,d),function Iw(s,a,l,d){s[mc(l?a.classBindings:a.styleBindings)]=d}(s,a,d,E))}else p=function XP(s,a,l){let d;const h=a.directiveEnd;for(let p=1+a.directiveStylingLast;p<h;p++)d=kl(d,s[p].hostAttrs,l);return kl(d,a.attrs,l)}(s,a,d)}return void 0!==p&&(d?a.residualClasses=p:a.residualStyles=p),l}(h,p,a,d),function qP(s,a,l,d,h,p){let y=p?a.classBindings:a.styleBindings,C=mc(y),E=hr(y);s[d]=l;let A,M=!1;if(Array.isArray(l)?(A=l[1],(null===A||ac(l,A)>0)&&(M=!0)):A=l,h)if(0!==E){const W=mc(s[C+1]);s[d+1]=__(W,C),0!==W&&(s[W+1]=pw(s[W+1],d)),s[C+1]=function $r(s,a){return 131071&s|a<<17}(s[C+1],d)}else s[d+1]=__(C,0),0!==C&&(s[C+1]=pw(s[C+1],d)),C=d;else s[d+1]=__(E,0),0===C?C=d:s[E+1]=pw(s[E+1],d),E=d;M&&(s[d+1]=fw(s[d+1])),LT(s,A,d,!0),LT(s,A,d,!1),function mw(s,a,l,d,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof a&&ac(p,a)>=0&&(l[d+1]=gw(l[d+1]))}(a,A,s,d,p),y=__(C,E),p?a.classBindings=y:a.styleBindings=y}(h,p,a,l,y,d)}}function up(s,a,l,d,h){let p=null;const y=l.directiveEnd;let C=l.directiveStylingLast;for(-1===C?C=l.directiveStart:C++;C<y&&(p=a[C],d=kl(d,p.hostAttrs,h),p!==s);)C++;return null!==s&&(l.directiveStylingLast=C),d}function kl(s,a,l){const d=l?1:2;let h=-1;if(null!==a)for(let p=0;p<a.length;p++){const y=a[p];"number"==typeof y?h=y:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ni(s,y,!!l||a[++p]))}return void 0===s?null:s}function eO(s,a,l){const d=String(a);""!==d&&!d.includes(" ")&&Ni(s,d,l)}function GT(s,a,l,d,h,p,y,C){if(!(3&a.type))return;const E=s.data,M=E[C+1],A=function FT(s){return 1==(1&s)}(M)?I_(E,a,l,h,hr(M),y):void 0;b_(A)||(b_(p)||function hw(s){return 2==(2&s)}(M)&&(p=I_(E,null,l,h,C,y)),function sx(s,a,l,d,h){if(a)h?s.addClass(l,d):s.removeClass(l,d);else{let p=-1===d.indexOf("-")?void 0:uf.DashCase;null==h?s.removeStyle(l,d,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=uf.Important),s.setStyle(l,d,h,p))}}(d,y,eo(ri(),l),h,p))}function I_(s,a,l,d,h,p){const y=null===a;let C;for(;h>0;){const E=s[h],M=Array.isArray(E),A=M?E[1]:E,R=null===A;let W=l[h+1];W===Dt&&(W=R?Kt:void 0);let Y=R?af(W,d):A===d?W:void 0;if(M&&!b_(Y)&&(Y=af(E,d)),b_(Y)&&(C=Y,y))return C;const ue=s[h+1];h=y?mc(ue):hr(ue)}if(null!==a){let E=p?a.residualClasses:a.residualStyles;null!=E&&(C=af(E,d))}return C}function b_(s){return void 0!==s}function Tw(s,a){return 0!=(s.flags&(a?8:16))}function Mw(s,a=""){const l=ve(),d=jt(),h=s+Ut,p=d.firstCreatePass?hc(d,h,1,a,null):d.data[h],y=dp(d,l,p,a,s);l[h]=y,ro()&&vf(d,l,y,p),Ts(p,!1)}let dp=(s,a,l,d,h)=>(io(!0),function Mm(s,a){return s.createText(a)}(a[pt],d));function Ns(s){return bd("",s,""),Ns}function bd(s,a,l){const d=ve(),h=pc(d,s,a,l);return h!==Dt&&uo(d,ri(),h),bd}function ZT(s,a,l,d,h){const p=ve(),y=function gd(s,a,l,d,h,p){const C=Dl(s,xo(),l,h);return Ms(2),C?a+re(l)+d+re(h)+p:Dt}(p,s,a,l,d,h);return y!==Dt&&uo(p,ri(),y),ZT}function Dw(s,a,l,d,h,p,y){const C=ve(),E=function md(s,a,l,d,h,p,y,C){const M=o_(s,xo(),l,h,y);return Ms(3),M?a+re(l)+d+re(h)+p+re(y)+C:Dt}(C,s,a,l,d,h,p,y);return E!==Dt&&uo(C,ri(),E),Dw}const Rs=void 0;var eM=["en",[["a","p"],["AM","PM"],Rs],[["AM","PM"],Rs,Rs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rs,"{1} 'at' {0}",Rs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Td(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Md={};function Ia(s){const a=function dO(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=uO(a);if(l)return l;const d=a.split("-")[0];if(l=uO(d),l)return l;if("en"===d)return eM;throw new ee(701,!1)}function _c(s){return Ia(s)[Hr.PluralCase]}function uO(s){return s in Md||(Md[s]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[s]),Md[s]}var Hr=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Hr||{});const yc="en-US";let Fs=yc;function Ip(s,a,l,d,h){if(s=Ce(s),Array.isArray(s))for(let p=0;p<s.length;p++)Ip(s[p],a,l,d,h);else{const p=jt(),y=ve(),C=Ar();let E=od(s)?s:Ce(s.provide);const M=H0(s),A=1048575&C.providerIndexes,R=C.directiveStart,W=C.providerIndexes>>20;if(od(s)||!s.multi){const Y=new aa(M,h,El),ue=Ll(E,a,h?A:A+W,R);-1===ue?(nc(Tn(C,y),p,E),z_(p,s,a.length),a.push(E),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),l.push(Y),y.push(Y)):(l[ue]=Y,y[ue]=Y)}else{const Y=Ll(E,a,A+W,R),ue=Ll(E,a,A,A+W),$e=ue>=0&&l[ue];if(h&&!$e||!h&&!(Y>=0&&l[Y])){nc(Tn(C,y),p,E);const ct=function q_(s,a,l,d,h){const p=new aa(s,l,El);return p.multi=[],p.index=a,p.componentProviders=0,wM(p,h,d&&!l),p}(h?bM:IM,l.length,h,d,M);!h&&$e&&(l[ue].providerFactory=ct),z_(p,s,a.length,0),a.push(E),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),l.push(ct),y.push(ct)}else z_(p,s,Y>-1?Y:ue,wM(l[h?ue:Y],M,!h&&d));!h&&d&&$e&&l[ue].componentProviders++}}}function z_(s,a,l,d){const h=od(a),p=function TL(s){return!!s.useClass}(a);if(h||p){const E=(p?Ce(a.useClass):a).prototype.ngOnDestroy;if(E){const M=s.destroyHooks||(s.destroyHooks=[]);if(!h&&a.multi){const A=M.indexOf(l);-1===A?M.push(l,[d,E]):M[A+1].push(d,E)}else M.push(l,E)}}}function wM(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function Ll(s,a,l,d){for(let h=l;h<d;h++)if(a[h]===s)return h;return-1}function IM(s,a,l,d){return G_(this.multi,[])}function bM(s,a,l,d){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=ua(l,l[je],this.providerFactory.index,d);p=C.slice(0,y),G_(h,p);for(let E=y;E<C.length;E++)p.push(C[E])}else p=[],G_(h,p);return p}function G_(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function EM(s,a=[]){return l=>{l.providersResolver=(d,h)=>function qw(s,a,l){const d=jt();if(d.firstCreatePass){const h=Wi(s);Ip(l,d.data,d.blueprint,h,!0),Ip(a,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,a)}}class Ul{}class Bl{}function MO(s,a){return new Ea(s,a??null,[])}class Ea extends Ul{constructor(a,l,d){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hP(this);const h=Qr(a);this._bootstrapComponents=Ca(h.bootstrap),this._r3Injector=F1(a,l,[{provide:Ul,useValue:this},{provide:Ff,useValue:this.componentFactoryResolver},...d],X(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class W_ extends Bl{constructor(a){super(),this.moduleType=a}create(a){return new Ea(this.moduleType,a,[])}}class Ww extends Ul{constructor(a){super(),this.componentFactoryResolver=new hP(this),this.instance=null;const l=new xf([...a.providers,{provide:Ul,useValue:this},{provide:Ff,useValue:this.componentFactoryResolver}],a.parent||_l(),a.debugName,new Set(["environment"]));this.injector=l,a.runEnvironmentInitializers&&l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Od(s,a,l=null){return new Ww({providers:s,parent:a,debugName:l,runEnvironmentInitializers:!0}).injector}let TM=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l)){const d=C1(0,l.type),h=d.length>0?Od([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l,h)}return this.cachedInjectors.get(l)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ft({token:s,providedIn:"environment",factory:()=>new s(Ve(jo))})}return s})();function Ii(s){s.getStandaloneInjector=a=>a.get(TM).getOrCreateStandaloneInjector(s)}function X_(s,a,l){const d=xr()+s,h=ve();return h[d]===Dt?qo(h,d,l?a.call(l):a()):function Ml(s,a){return s[a]}(h,d)}function Qw(s,a,l,d){return OM(ve(),xr(),s,a,l,d)}function Jw(s,a,l,d,h){return function kM(s,a,l,d,h,p,y){const C=a+l;return Dl(s,C,h,p)?qo(s,C+2,y?d.call(y,h,p):d(h,p)):jl(s,C+2)}(ve(),xr(),s,a,l,d,h)}function jl(s,a){const l=s[a];return l===Dt?void 0:l}function OM(s,a,l,d,h,p){const y=a+l;return Ci(s,y,h)?qo(s,y+1,p?d.call(p,h):d(h)):jl(s,y+1)}function vc(s,a){const l=jt();let d;const h=s+Ut;l.firstCreatePass?(d=function Ta(s,a){if(a)for(let l=a.length-1;l>=0;l--){const d=a[l];if(s===d.name)return d}}(a,l.pipeRegistry),l.data[h]=d,d.onDestroy&&(l.destroyHooks??=[]).push(h,d.onDestroy)):d=l.data[h];const p=d.factory||(d.factory=Js(d.type)),C=sn(El);try{const E=Cr(!1),M=p();return Cr(E),function BP(s,a,l,d){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),a[l]=d}(l,ve(),h,M),M}finally{sn(C)}}function rI(s,a,l){const d=s+Ut,h=ve(),p=Ya(h,d);return Op(h,d)?OM(h,xr(),a,p.transform,l,p):p.transform(l)}function Ap(s,a,l,d,h){const p=s+Ut,y=ve(),C=Ya(y,p);return Op(y,p)?function Xw(s,a,l,d,h,p,y,C){const E=a+l;return o_(s,E,h,p,y)?qo(s,E+3,C?d.call(C,h,p,y):d(h,p,y)):jl(s,E+3)}(y,xr(),a,C.transform,l,d,h,C):C.transform(l,d,h)}function Op(s,a){return s[je].data[a].pure}function RM(){return this._results[Symbol.iterator]()}class iI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new $o)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=iI.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=RM)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const h=function si(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function ym(s,a,l){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],p=a[d];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function AO(s,a,l,d=!0){const h=a[je];if(function XA(s,a,l,d){const h=cr+d,p=l.length;d>0&&(l[h-1][xi]=a),d<p-cr?(a[xi]=l[h],h0(l,cr+d,a)):(l.push(a),a[xi]=null),a[fn]=l;const y=a[za];null!==y&&l!==y&&function ex(s,a){const l=s[Ga];a[ar]!==a[fn][fn][ar]&&(s[zc]=!0),null===l?s[Ga]=[a]:l.push(a)}(y,a);const C=a[Jr];null!==C&&C.insertView(s),a[Et]|=128}(h,a,s,l),d){const p=x0(l,s),y=a[pt],C=Am(y,s[Xr]);null!==C&&function mf(s,a,l,d,h,p){d[bn]=h,d[Sr]=a,wf(s,d,l,1,h,p)}(h,s[Sr],y,a,C,p)}}let Ls=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=UM}return s})();const FM=Ls,LM=class extends FM{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,l){return this.createEmbeddedViewImpl(a,l)}createEmbeddedViewImpl(a,l,d){const h=function SO(s,a,l,d){const h=a.tView,C=Go(s,h,l,4096&s[Et]?4096:16,null,a,null,null,null,d?.injector??null,d?.hydrationInfo??null);C[za]=s[a.index];const M=s[Jr];return null!==M&&(C[Jr]=M.createEmbeddedView(h)),Jm(h,C,l),C}(this._declarationLView,this._declarationTContainer,a,{injector:l,hydrationInfo:d});return new r_(h)}};function UM(){return Ma(Ar(),ve())}function Ma(s,a){return 4&s.type?new LM(a,s,Lf(s,a)):null}let iy=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=PO}return s})();function PO(){return Np(Ar(),ve())}const OO=iy,HM=class extends OO{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return Lf(this._hostTNode,this._hostLView)}get injector(){return new dr(this._hostTNode,this._hostLView)}get parentInjector(){const a=la(this._hostTNode,this._hostLView);if(Uu(a)){const l=kt(a,this._hostLView),d=ki(a);return new dr(l[je].data[d+8],l)}return new dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=kp(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-cr}createEmbeddedView(a,l,d){let h,p;"number"==typeof d?h=d:null!=d&&(h=d.index,p=d.injector);const C=a.createEmbeddedViewImpl(l||{},p,null);return this.insertImpl(C,h,false),C}createComponent(a,l,d,h,p){const y=a&&!function ao(s){return"function"==typeof s}(a);let C;if(y)C=l;else{const Se=l||{};C=Se.index,d=Se.injector,h=Se.projectableNodes,p=Se.environmentInjector||Se.ngModuleRef}const E=y?a:new Kf(Lt(a)),M=d||this.parentInjector;if(!p&&null==E.ngModule){const $e=(y?M:this.parentInjector).get(jo,null);$e&&(p=$e)}Lt(E.componentType??{});const Y=E.create(M,h,null,p);return this.insertImpl(Y.hostView,C,false),Y}insert(a,l){return this.insertImpl(a,l,!1)}insertImpl(a,l,d){const h=a._lView;if(function Pu(s){return Br(s[fn])}(h)){const E=this.indexOf(a);if(-1!==E)this.detach(E);else{const M=h[fn],A=new HM(M,M[Sr],M[fn]);A.detach(A.indexOf(a))}}const y=this._adjustIndex(l),C=this._lContainer;return AO(C,h,y,!d),a.attachToViewContainerRef(),h0($l(C),y,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=kp(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=Sm(this._lContainer,l);d&&(oc($l(this._lContainer),l),M0(d[je],d))}detach(a){const l=this._adjustIndex(a,-1),d=Sm(this._lContainer,l);return d&&null!=oc($l(this._lContainer),l)?new r_(d):null}_adjustIndex(a,l=0){return a??this.length+l}};function kp(s){return s[8]}function $l(s){return s[8]||(s[8]=[])}function Np(s,a){let l;const d=a[s.index];return Br(d)?l=d:(l=Qm(d,a,null,s),a[s.index]=l,LC(a,l)),lI(l,a,s,d),new HM(l,s,a)}let lI=function Nd(s,a,l,d){if(s[Xr])return;let h;h=8&l.type?on(d):function cI(s,a){const l=s[pt],d=l.createComment(""),h=ni(a,s);return gl(l,Am(l,h),d,function rx(s,a){return s.nextSibling(a)}(l,h),!1),d}(a,l),s[Xr]=h};class Un{constructor(a){this.queryList=a,this.matches=null}clone(){return new Un(this.queryList)}setDirty(){this.queryList.setDirty()}}class sy{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,h=[];for(let p=0;p<d;p++){const y=l.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new sy(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==mI(a,l).matches&&this.queries[l].setDirty()}}class zM{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class uI{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,p=this.getByIndex(d).embeddedTView(a,h);p&&(p.indexInDeclarationView=d,null!==l?l.push(p):l=[p])}return null!==l?new uI(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class dI{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new dI(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(a,l,GM(l,p)),this.matchTNodeWithReadOption(a,l,No(l,a,p,!1,!1))}else d===Ls?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,No(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Il||h===iy||h===Ls&&4&l.type)this.addMatch(l.index,-2);else{const p=No(l,a,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function GM(s,a){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function WM(s,a,l,d){return-1===l?function qM(s,a){return 11&s.type?Lf(s,a):4&s.type?Ma(s,a):null}(a,s):-2===l?function oy(s,a,l){return l===Il?Lf(a,s):l===Ls?Ma(a,s):l===iy?Np(a,s):void 0}(s,a,d):ua(s,s[je],l,a)}function hI(s,a,l,d){const h=a[Jr].queries[d];if(null===h.matches){const p=s.data,y=l.matches,C=[];for(let E=0;E<y.length;E+=2){const M=y[E];C.push(M<0?null:WM(a,p[M],y[E+1],l.metadata.read))}h.matches=C}return h.matches}function Us(s,a,l,d){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const y=hI(s,a,h,l);for(let C=0;C<p.length;C+=2){const E=p[C];if(E>0)d.push(y[C/2]);else{const M=p[C+1],A=a[-E];for(let R=cr;R<A.length;R++){const W=A[R];W[za]===W[fn]&&Us(W[je],W,M,d)}if(null!==A[Ga]){const R=A[Ga];for(let W=0;W<R.length;W++){const Y=R[W];Us(Y[je],Y,M,d)}}}}}return d}function fI(s){const a=ve(),l=jt(),d=c0();am(d+1);const h=mI(l,d);if(s.dirty&&function qh(s){return 4==(4&s[Et])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Us(l,a,d,[]):hI(l,a,h,d);s.reset(p,Fi),s.notifyOnChanges()}return!0}return!1}function ZM(s,a,l){const d=jt();d.firstCreatePass&&(cy(d,new zM(s,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),gI(d,ve(),a)}function pI(s,a,l,d){const h=jt();if(h.firstCreatePass){const p=Ar();cy(h,new zM(a,l,d),p.index),function ly(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}gI(h,ve(),l)}function ay(){return function Fp(s,a){return s[Jr].queries[a].queryList}(ve(),c0())}function gI(s,a,l){const d=new iI(4==(4&l));(function TC(s,a,l,d){const h=BC(a);h.push(l),s.firstCreatePass&&tT(s).push(d,h.length-1)})(s,a,d,d.destroy),null===a[Jr]&&(a[Jr]=new sy),a[Jr].queries.push(new Un(d))}function cy(s,a,l){null===s.queries&&(s.queries=new uI),s.queries.track(new dI(a,l))}function mI(s,a){return s.queries.getByIndex(a)}function Lp(s,a){return Ma(s,a)}function dy(s){return!!Qr(s)}const rt=new an("Application Initializer");let bI=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d}),this.appInits=Ke(rt,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const l=[];for(const h of this.appInits){const p=h();if(ap(p))l.push(p);else if(DT(p)){const y=new Promise((C,E)=>{p.subscribe({complete:C,error:E})});l.push(y)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),We=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const ye=new an("LocaleId",{providedIn:"root",factory:()=>Ke(ye,dt.Optional|dt.SkipSelf)||function ae(){return typeof $localize<"u"&&$localize.locale||yc}()}),Nr=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let cD=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge.X(!1)}add(){this.hasPendingTasks.next(!0);const l=this.taskId++;return this.pendingTasks.add(l),l}remove(l){this.pendingTasks.delete(l),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class GO{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let qO=(()=>{class s{compileModuleSync(l){return new W_(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),p=Ca(Qr(l).declarations).reduce((y,C)=>{const E=Lt(C);return E&&y.push(new Kf(E)),y},[]);return new GO(d,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const wy=new an(""),te=new an("");let Yl,Iy=(()=>{class s{constructor(l,d,h){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Yl||(function QO(s){Yl=s}(h),h.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{jr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,h){return[]}static#e=this.\u0275fac=function(d){return new(d||s)(Ve(jr),Ve(Bs),Ve(te))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac})}return s})(),Bs=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Yl?.findTestabilityInTree(this,l,d)??null}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),Bi=null;const hD=new an("AllowMultipleToken"),Sa=new an("PlatformDestroyListeners"),by=new an("appBootstrapListener");class Wp{constructor(a,l){this.name=a,this.token=l}}function DI(s,a,l=[]){const d=`Platform: ${a}`,h=new an(d);return(p=[])=>{let y=Ey();if(!y||y.injector.get(hD,!1)){const C=[...l,...p,{provide:h,useValue:!0}];s?s(C):function Zp(s){if(Bi&&!Bi.get(hD,!1))throw new ee(400,!1);(function fD(){!function Gg(s){Kv=s}(()=>{throw new ee(600,!1)})})(),Bi=s;const a=s.get(gD);(function li(s){s.get(E1,null)?.forEach(l=>l())})(s)}(function SI(s=[],a){return lo.create({name:a,providers:[{provide:U,useValue:"platform"},{provide:Sa,useValue:new Set([()=>Bi=null])},...s]})}(C,d))}return function Qo(s){const a=Ey();if(!a)throw new ee(401,!1);return a}()}}function Ey(){return Bi?.get(gD)??null}let gD=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const h=function JO(s="zone.js",a){return"noop"===s?new uC:"zone.js"===s?new jr(a):s}(d?.ngZone,function mD(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return h.run(()=>{const p=function Z_(s,a,l){return new Ea(s,a,l)}(l.moduleType,this.injector,function wD(s){return[{provide:jr,useFactory:s},{provide:sd,multi:!0,useFactory:()=>{const a=Ke(ek,{optional:!0});return()=>a.initialize()}},{provide:CD,useFactory:XO},{provide:dC,useFactory:hC}]}(()=>h)),y=p.injector.get(uc,null);return h.runOutsideAngular(()=>{const C=h.onError.subscribe({next:E=>{y.handleError(E)}});p.onDestroy(()=>{Ty(this._modules,p),C.unsubscribe()})}),function _D(s,a,l){try{const d=l();return ap(d)?d.catch(h=>{throw a.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(y,h,()=>{const C=p.injector.get(bI);return C.runInitializers(),C.donePromise.then(()=>(function Ze(s){Qe(s,"Expected localeId to be defined"),"string"==typeof s&&(Fs=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(ye,yc)||yc),this._moduleDoBootstrap(p),p))})})}bootstrapModule(l,d=[]){const h=yD({},d);return function MI(s,a,l){const d=new W_(l);return Promise.resolve(d)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const d=l.injector.get(Bd);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new ee(-403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(Sa,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(d){return new(d||s)(Ve(lo))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function yD(s,a){return Array.isArray(a)?a.reduce(yD,s):{...s,...a}}let Bd=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ke(CD),this.zoneIsStable=Ke(dC),this.componentTypes=[],this.components=[],this.isStable=Ke(cD).hasPendingTasks.pipe((0,Fe.w)(l=>l?(0,Ie.of)(!1):this.zoneIsStable),(0,Me.x)(),(0,Pe.B)()),this._injector=Ke(jo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const h=l instanceof A1;if(!this._injector.get(bI).done)throw!h&&Ha(l),new ee(405,!1);let y;y=h?l:this._injector.get(Ff).resolveComponentFactory(l),this.componentTypes.push(y.componentType);const C=function ps(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Ul),M=y.create(lo.NULL,[],d||y.selector,C),A=M.location.nativeElement,R=M.injector.get(wy,null);return R?.registerApplication(A),M.onDestroy(()=>{this.detachView(M.hostView),Ty(this.components,M),R?.unregisterApplication(A)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;Ty(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const d=this._injector.get(by,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Ty(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new ee(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Ty(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}const CD=new an("",{providedIn:"root",factory:()=>Ke(uc).handleError.bind(void 0)});function XO(){const s=Ke(jr),a=Ke(uc);return l=>s.runOutsideAngular(()=>a.handleError(l))}let ek=(()=>{class s{constructor(){this.zone=Ke(jr),this.applicationRef=Ke(Bd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function nk(){return!1}let sk=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=PI}return s})();function PI(s){return function Gr(s,a,l){if(Qs(s)&&!l){const d=pi(s.index,a);return new r_(d,d)}return 47&s.type?new r_(a[ar],a):null}(Ar(),ve(),16==(16&s))}class Aa{constructor(){}supports(a){return pd(a)}create(a){return new Dy(a)}}const Ic=(s,a)=>a;class Dy{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Ic}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,h=0,p=null;for(;l||d;){const y=!d||l&&l.currentIndex<xa(d,h,p)?l:d,C=xa(y,h,p),E=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(l=l._next,null==y.previousIndex)h++;else{p||(p=[]);const M=C-h,A=E-h;if(M!=A){for(let W=0;W<M;W++){const Y=W<p.length?p[W]:p[W]=0,ue=Y+W;A<=ue&&ue<M&&(p[W]=Y+1)}p[y.previousIndex]=A-M}}C!==E&&a(y,C,E)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!pd(a))throw new ee(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,p,y,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)p=a[C],y=this._trackByFn(C,p),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,p,y,C)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,y,C),d=!0),l=l._next}else h=0,function HC(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[Symbol.iterator]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,C=>{y=this._trackByFn(h,C),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,C,y,h)),Object.is(l.item,C)||this._addIdentityChange(l,C)):(l=this._mismatch(l,C,y,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,h){let p;return null===a?p=this._itTail:(p=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,p,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,p,h)):a=this._addAfter(new bc(l,d),p,h),a}_verifyReinsertion(a,l,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?a=this._reinsertAfter(p,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,p=a._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const h=null===l?this._itHead:l._next;return a._next=h,a._prev=l,null===h?this._itTail=a:h._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new jd),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jd),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class bc{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Jo{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class jd{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new Jo,this.map.set(l,d)),d.add(a)}get(a,l){const h=this.map.get(a);return h?h.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xa(s,a,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+a+h}class RI{constructor(){}supports(a){return a instanceof Map||Qf(a)}create(){return new $d}}class $d{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Qf(a)))throw new ee(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,l);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const d=new FI(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class FI{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kp(){return new Pa([new Aa])}let Pa=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:Kp});constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||Kp()),deps:[[s,new He,new oe]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new ee(901,!1)}}return s})();function Hd(){return new Sy([new RI])}let Sy=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:Hd});constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||Hd()),deps:[[s,new He,new oe]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(d)return d;throw new ee(901,!1)}}return s})();const lk=DI(null,"core",[]);let uk=(()=>{class s{constructor(l){}static#e=this.\u0275fac=function(d){return new(d||s)(Ve(Bd))};static#t=this.\u0275mod=Eh({type:s});static#n=this.\u0275inj=kn({})}return s})();function gk(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function Na(s){const a=Lt(s);if(!a)return null;const l=new Kf(a);return{get selector(){return l.selector},get type(){return l.componentType},get inputs(){return l.inputs},get outputs(){return l.outputs},get ngContentSelectors(){return l.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},3399:(st,be,F)=>{F.d(be,{Z:()=>Je});var c=F(9058),V=F(4537),L=F(7592),ne=F(7879);class ge{constructor(De,Te){this._delegate=De,this.firebase=Te,(0,L._addComponent)(De,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=De.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this._delegate.automaticDataCollectionEnabled=De}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(De=>{this._delegate.checkDestroyed(),De()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(De,Te=L._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(De);return!ot.isInitialized()&&"EXPLICIT"===(null===(tt=ot.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:Te})}_removeServiceInstance(De,Te=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(De).clearInstance(Te)}_addComponent(De){(0,L._addComponent)(this._delegate,De)}_addOrOverwriteComponent(De){(0,L._addOrOverwriteComponent)(this._delegate,De)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function Me(){const Ce=function Fe(Ce){const De={},Te={__esModule:!0,initializeApp:function ee(Re,j={}){const we=L.initializeApp(Re,j);if((0,c.r3)(De,we.name))return De[we.name];const Ue=new Ce(we,Te);return De[we.name]=Ue,Ue},app:ot,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function re(Re){const j=Re.name,we=j.replace("-compat","");if(L._registerComponent(Re)&&"PUBLIC"===Re.type){const Ue=(lt=ot())=>{if("function"!=typeof lt[we])throw Pe.create("invalid-app-argument",{appName:j});return lt[we]()};void 0!==Re.serviceProps&&(0,c.ZB)(Ue,Re.serviceProps),Te[we]=Ue,Ce.prototype[we]=function(...lt){return this._getService.bind(this,j).apply(this,Re.multipleInstances?lt:[])}}return"PUBLIC"===Re.type?Te[we]:null},removeApp:function tt(Re){delete De[Re]},useAsService:function he(Re,j){return"serverAuth"===j?null:j},modularAPIs:L}};function ot(Re){if(!(0,c.r3)(De,Re=Re||L._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:Re});return De[Re]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function de(){return Object.keys(De).map(Re=>De[Re])}}),ot.App=Ce,Te}(ge);return Ce.INTERNAL=Object.assign(Object.assign({},Ce.INTERNAL),{createFirebaseNamespace:Me,extendNamespace:function De(Te){(0,c.ZB)(Ce,Te)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Ce}(),G=new ne.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ce=self.firebase.SDK_VERSION;Ce&&Ce.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=B;!function xe(Ce){(0,L.registerVersion)("@firebase/app-compat","0.2.13",Ce)}()},7592:(st,be,F)=>{F.r(be),F.d(be,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>kn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>pe,_addOrOverwriteComponent:()=>ke,_apps:()=>le,_clearComponents:()=>ht,_components:()=>se,_getProvider:()=>Be,_registerComponent:()=>Qe,_removeServiceInstance:()=>tn,deleteApp:()=>Mi,getApp:()=>rn,getApps:()=>qn,initializeApp:()=>In,onLog:()=>Wn,registerVersion:()=>_r,setLogLevel:()=>Kr});var c=F(5861),V=F(4537),L=F(7879),ne=F(9058),ge=F(1878);class Ie{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function Pe(Ge){const _e=Ge.getComponent();return"VERSION"===_e?.type}(Xe)){const it=Xe.getImmediate();return`${it.library}/${it.version}`}return null}).filter(Xe=>Xe).join(" ")}}const Fe="@firebase/app",B=new L.Yd("@firebase/app"),ie="[DEFAULT]",ce={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},le=new Map,se=new Map;function pe(Ge,_e){try{Ge.container.addComponent(_e)}catch(Xe){B.debug(`Component ${_e.name} failed to register with FirebaseApp ${Ge.name}`,Xe)}}function ke(Ge,_e){Ge.container.addOrOverwriteComponent(_e)}function Qe(Ge){const _e=Ge.name;if(se.has(_e))return B.debug(`There were multiple attempts to register component ${_e}.`),!1;se.set(_e,Ge);for(const Xe of le.values())pe(Xe,Ge);return!0}function Be(Ge,_e){const Xe=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Ge.container.getProvider(_e)}function tn(Ge,_e,Xe=ie){Be(Ge,_e).clearInstance(Xe)}function ht(){se.clear()}const ft=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nn{constructor(_e,Xe,it){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=it,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}const kn="9.23.0";function In(Ge,_e={}){let Xe=Ge;"object"!=typeof _e&&(_e={name:_e});const it=Object.assign({name:ie,automaticDataCollectionEnabled:!1},_e),Ft=it.name;if("string"!=typeof Ft||!Ft)throw ft.create("bad-app-name",{appName:String(Ft)});if(Xe||(Xe=(0,ne.aH)()),!Xe)throw ft.create("no-options");const Vt=le.get(Ft);if(Vt){if((0,ne.vZ)(Xe,Vt.options)&&(0,ne.vZ)(it,Vt.config))return Vt;throw ft.create("duplicate-app",{appName:Ft})}const tr=new V.H0(Ft);for(const $ of se.values())tr.addComponent($);const H=new nn(Xe,it,tr);return le.set(Ft,H),H}function rn(Ge=ie){const _e=le.get(Ge);if(!_e&&Ge===ie&&(0,ne.aH)())return In();if(!_e)throw ft.create("no-app",{appName:Ge});return _e}function qn(){return Array.from(le.values())}function Mi(Ge){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,c.Z)(function*(Ge){const _e=Ge.name;le.has(_e)&&(le.delete(_e),yield Promise.all(Ge.container.getProviders().map(Xe=>Xe.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function _r(Ge,_e,Xe){var it;let Ft=null!==(it=ce[Ge])&&void 0!==it?it:Ge;Xe&&(Ft+=`-${Xe}`);const Vt=Ft.match(/\s|\//),tr=_e.match(/\s|\//);if(Vt||tr){const H=[`Unable to register library "${Ft}" with version "${_e}":`];return Vt&&H.push(`library name "${Ft}" contains illegal characters (whitespace or "/")`),Vt&&tr&&H.push("and"),tr&&H.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void B.warn(H.join(" "))}Qe(new V.wA(`${Ft}-version`,()=>({library:Ft,version:_e}),"VERSION"))}function Wn(Ge,_e){if(null!==Ge&&"function"!=typeof Ge)throw ft.create("invalid-log-argument");(0,L.Am)(Ge,_e)}function Kr(Ge){(0,L.Ub)(Ge)}const ws="firebase-heartbeat-database",dt=1,mt="firebase-heartbeat-store";let Tt=null;function sn(){return Tt||(Tt=(0,ge.X3)(ws,dt,{upgrade:(Ge,_e)=>{0===_e&&Ge.createObjectStore(mt)}}).catch(Ge=>{throw ft.create("idb-open",{originalErrorMessage:Ge.message})})),Tt}function Yr(){return(Yr=(0,c.Z)(function*(Ge){try{return yield(yield sn()).transaction(mt).objectStore(mt).get(Is(Ge))}catch(_e){if(_e instanceof ne.ZR)B.warn(_e.message);else{const Xe=ft.create("idb-get",{originalErrorMessage:_e?.message});B.warn(Xe.message)}}})).apply(this,arguments)}function Rt(Ge,_e){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,c.Z)(function*(Ge,_e){try{const it=(yield sn()).transaction(mt,"readwrite");yield it.objectStore(mt).put(_e,Is(Ge)),yield it.done}catch(Xe){if(Xe instanceof ne.ZR)B.warn(Xe.message);else{const it=ft.create("idb-set",{originalErrorMessage:Xe?.message});B.warn(it.message)}}})).apply(this,arguments)}function Is(Ge){return`${Ge.name}!${Ge.options.appId}`}class Bt{constructor(_e){this.container=_e,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new os(Xe),this._heartbeatsCachePromise=this._storage.read().then(it=>(this._heartbeatsCache=it,it))}triggerHeartbeat(){var _e=this;return(0,c.Z)(function*(){const it=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ft=Rn();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),_e._heartbeatsCache.lastSentHeartbeatDate!==Ft&&!_e._heartbeatsCache.heartbeats.some(Vt=>Vt.date===Ft))return _e._heartbeatsCache.heartbeats.push({date:Ft,agent:it}),_e._heartbeatsCache.heartbeats=_e._heartbeatsCache.heartbeats.filter(Vt=>{const tr=new Date(Vt.date).valueOf();return Date.now()-tr<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,c.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache||0===_e._heartbeatsCache.heartbeats.length)return"";const Xe=Rn(),{heartbeatsToSend:it,unsentEntries:Ft}=function Hi(Ge,_e=1024){const Xe=[];let it=Ge.slice();for(const Ft of Ge){const Vt=Xe.find(tr=>tr.agent===Ft.agent);if(Vt){if(Vt.dates.push(Ft.date),as(Xe)>_e){Vt.dates.pop();break}}else if(Xe.push({agent:Ft.agent,dates:[Ft.date]}),as(Xe)>_e){Xe.pop();break}it=it.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:it}}(_e._heartbeatsCache.heartbeats),Vt=(0,ne.L)(JSON.stringify({version:2,heartbeats:it}));return _e._heartbeatsCache.lastSentHeartbeatDate=Xe,Ft.length>0?(_e._heartbeatsCache.heartbeats=Ft,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache.heartbeats=[],_e._storage.overwrite(_e._heartbeatsCache)),Vt})()}}function Rn(){return(new Date).toISOString().substring(0,10)}class os{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,c.Z)(function*(){return(yield _e._canUseIndexedDBPromise)&&(yield function di(Ge){return Yr.apply(this,arguments)}(_e.app))||{heartbeats:[]}})()}overwrite(_e){var Xe=this;return(0,c.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(it=_e.lastSentHeartbeatDate)&&void 0!==it?it:Vt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}})()}add(_e){var Xe=this;return(0,c.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(it=_e.lastSentHeartbeatDate)&&void 0!==it?it:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,..._e.heartbeats]})}})()}}function as(Ge){return(0,ne.L)(JSON.stringify({version:2,heartbeats:Ge})).length}!function yr(Ge){Qe(new V.wA("platform-logger",_e=>new Ie(_e),"PRIVATE")),Qe(new V.wA("heartbeat",_e=>new Bt(_e),"PRIVATE")),_r(Fe,"0.9.13",Ge),_r(Fe,"0.9.13","esm2017"),_r("fire-js","")}("")},120:(st,be,F)=>{F.d(be,{Z:()=>c.Z});var c=F(3399);c.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(st,be,F)=>{F.r(be);var c=F(5861),V=F(3399),L=F(6710),ne=F(9058),Pe=(F(7592),F(7879),F(4537));function Fe(){return window}function G(){return G=(0,c.Z)(function*(O,k,x){var K;const{BuildInfo:me}=Fe();(0,L.as)(k.sessionId,"AuthEvent did not contain a session ID");const Ve=yield function Te(O){return tt.apply(this,arguments)}(k.sessionId),vt={};return(0,L.at)()?vt.ibi=me.packageName:(0,L.au)()?vt.apn=me.packageName:(0,L.av)(O,"operation-not-supported-in-this-environment"),me.displayName&&(vt.appDisplayName=me.displayName),vt.sessionId=Ve,(0,L.aw)(O,x,k.type,void 0,null!==(K=k.eventId)&&void 0!==K?K:void 0,vt)}),G.apply(this,arguments)}function Oe(){return(Oe=(0,c.Z)(function*(O){const{BuildInfo:k}=Fe(),x={};(0,L.at)()?x.iosBundleId=k.packageName:(0,L.au)()?x.androidPackageName=k.packageName:(0,L.av)(O,"operation-not-supported-in-this-environment"),yield(0,L.ax)(O,x)})).apply(this,arguments)}function Ce(){return(Ce=(0,c.Z)(function*(O,k,x){const{cordova:K}=Fe();let me=()=>{};try{yield new Promise((Ve,vt)=>{let Ke=null;function Qt(){var xt;Ve();const zi=null===(xt=K.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof zi&&zi(),"function"==typeof x?.close&&x.close()}function wt(){Ke||(Ke=window.setTimeout(()=>{vt((0,L.az)(O,"redirect-cancelled-by-user"))},2e3))}function hn(){"visible"===document?.visibilityState&&wt()}k.addPassiveListener(Qt),document.addEventListener("resume",wt,!1),(0,L.au)()&&document.addEventListener("visibilitychange",hn,!1),me=()=>{k.removePassiveListener(Qt),document.removeEventListener("resume",wt,!1),document.removeEventListener("visibilitychange",hn,!1),Ke&&window.clearTimeout(Ke)}})}finally{me()}})).apply(this,arguments)}function tt(){return(tt=(0,c.Z)(function*(O){const k=function ot(O){if((0,L.as)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const k=new ArrayBuffer(O.length),x=new Uint8Array(k);for(let K=0;K<O.length;K++)x[K]=O.charCodeAt(K);return x}(O),x=yield crypto.subtle.digest("SHA-256",k);return Array.from(new Uint8Array(x)).map(me=>me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class de extends L.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(k=>{this.resolveInialized=k})}addPassiveListener(k){this.passiveListeners.add(k)}removePassiveListener(k){this.passiveListeners.delete(k)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(k){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(k)),super.onEvent(k)}initialized(){var k=this;return(0,c.Z)(function*(){yield k.initPromise})()}}function Re(O){return j.apply(this,arguments)}function j(){return(j=(0,c.Z)(function*(O){const k=yield lt()._get(en(O));return k&&(yield lt()._remove(en(O))),k})).apply(this,arguments)}function Ue(){const O=[];for(let x=0;x<20;x++){const K=Math.floor(62*Math.random());O.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(K))}return O.join("")}function lt(){return(0,L.aC)(L.b)}function en(O){return(0,L.aD)("authEvent",O.config.apiKey,O.name)}function wn(O){if(!O?.includes("?"))return{};const[k,...x]=O.split("?");return(0,ne.zd)(x.join("?"))}const ie=class Zr{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aE,this._overrideRedirectResult=L.aF}_initialize(k){var x=this;return(0,c.Z)(function*(){const K=k._key();let me=x.eventManagers.get(K);return me||(me=new de(k),x.eventManagers.set(K,me),x.attachCallbackListeners(k,me)),me})()}_openPopup(k){(0,L.av)(k,"operation-not-supported-in-this-environment")}_openRedirect(k,x,K,me){var Ve=this;return(0,c.Z)(function*(){!function De(O){var k,x,K,me,Ve,vt,Ke,Qt,wt,hn;const xt=Fe();(0,L.aA)("function"==typeof(null===(k=xt?.universalLinks)||void 0===k?void 0:k.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aA)(typeof(null===(x=xt?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aA)("function"==typeof(null===(Ve=null===(me=null===(K=xt?.cordova)||void 0===K?void 0:K.plugins)||void 0===me?void 0:me.browsertab)||void 0===Ve?void 0:Ve.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aA)("function"==typeof(null===(Qt=null===(Ke=null===(vt=xt?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===Qt?void 0:Qt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aA)("function"==typeof(null===(hn=null===(wt=xt?.cordova)||void 0===wt?void 0:wt.InAppBrowser)||void 0===hn?void 0:hn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(k);const vt=yield Ve._initialize(k);yield vt.initialized(),vt.resetRedirect(),(0,L.aG)(),yield Ve._originValidation(k);const Ke=function re(O,k,x=null){return{type:k,eventId:x,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:O.tenantId,error:(0,L.az)(O,"no-auth-event")}}(k,K,me);yield function he(O,k){return lt()._set(en(O),k)}(k,Ke);const Qt=yield function B(O,k,x){return G.apply(this,arguments)}(k,Ke,x),wt=yield function xe(O){const{cordova:k}=Fe();return new Promise(x=>{k.plugins.browsertab.isAvailable(K=>{let me=null;K?k.plugins.browsertab.openUrl(O):me=k.InAppBrowser.open(O,(0,L.ay)()?"_blank":"_system","location=yes"),x(me)})})}(Qt);return function Je(O,k,x){return Ce.apply(this,arguments)}(k,vt,wt)})()}_isIframeWebStorageSupported(k,x){throw new Error("Method not implemented.")}_originValidation(k){const x=k._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function X(O){return Oe.apply(this,arguments)}(k)),this.originValidationPromises[x]}attachCallbackListeners(k,x){const{universalLinks:K,handleOpenURL:me,BuildInfo:Ve}=Fe(),vt=setTimeout((0,c.Z)(function*(){yield Re(k),x.onEvent(ce())}),500),Ke=function(){var hn=(0,c.Z)(function*(xt){clearTimeout(vt);const zi=yield Re(k);let Bc=null;zi&&xt?.url&&(Bc=function we(O,k){var x,K;const me=function yn(O){const k=wn(O),x=k.link?decodeURIComponent(k.link):void 0,K=wn(x).link,me=k.deep_link_id?decodeURIComponent(k.deep_link_id):void 0;return wn(me).link||me||K||x||O}(k);if(me.includes("/__/auth/callback")){const Ve=wn(me),vt=Ve.firebaseError?function Gn(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(Ve.firebaseError)):null,Ke=null===(K=null===(x=vt?.code)||void 0===x?void 0:x.split("auth/"))||void 0===K?void 0:K[1],Qt=Ke?(0,L.az)(Ke):null;return Qt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Qt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:me,postBody:null}}return null}(zi,xt.url)),x.onEvent(Bc||ce())});return function(zi){return hn.apply(this,arguments)}}();typeof K<"u"&&"function"==typeof K.subscribe&&K.subscribe(null,Ke);const Qt=me,wt=`${Ve.packageName.toLowerCase()}://`;Fe().handleOpenURL=function(){var hn=(0,c.Z)(function*(xt){if(xt.toLowerCase().startsWith(wt)&&Ke({url:xt}),"function"==typeof Qt)try{Qt(xt)}catch(zi){console.error(zi)}});return function(xt){return hn.apply(this,arguments)}}()}};function ce(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.az)("no-auth-event")}}function Qe(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function tn(O=(0,ne.z$)()){return!("file:"!==Qe()&&"ionic:"!==Qe()&&"capacitor:"!==Qe()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function kn(){try{const O=self.localStorage,k=L.aL();if(O)return O.setItem(k,"1"),O.removeItem(k),!function nn(O=(0,ne.z$)()){return function Yt(){return(0,ne.w1)()&&11===document?.documentMode}()||function ft(O=(0,ne.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,ne.hl)()}catch{return In()&&(0,ne.hl)()}return!1}function In(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function rn(){return(function Be(){return"http:"===Qe()||"https:"===Qe()}()||(0,ne.ru)()||tn())&&!function ht(){return(0,ne.b$)()||(0,ne.UG)()}()&&kn()&&!In()}function qn(){return tn()&&typeof document<"u"}function Ur(){return(Ur=(0,c.Z)(function*(){return!!qn()&&new Promise(O=>{const k=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(k),O(!0)})})})).apply(this,arguments)}const Wn={LOCAL:"local",NONE:"none",SESSION:"session"},Kr=L.aA,ws="persistence";function mt(O){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,c.Z)(function*(O){yield O._initializationPromise;const k=di(),x=L.aD(ws,O.config.apiKey,O.name);k&&k.setItem(x,O._getPersistence())})).apply(this,arguments)}function di(){var O;try{return(null===(O=function _r(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Yr=L.aA;class Rt{constructor(){this.browserResolver=L.aC(L.k),this.cordovaResolver=L.aC(ie),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aE,this._overrideRedirectResult=L.aF}_initialize(k){var x=this;return(0,c.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(k)})()}_openPopup(k,x,K,me){var Ve=this;return(0,c.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openPopup(k,x,K,me)})()}_openRedirect(k,x,K,me){var Ve=this;return(0,c.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openRedirect(k,x,K,me)})()}_isIframeWebStorageSupported(k,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(k,x)}_originValidation(k){return this.assertedUnderlyingResolver._originValidation(k)}get _shouldInitProactively(){return qn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var k=this;return(0,c.Z)(function*(){if(k.underlyingResolver)return;const x=yield function Mi(){return Ur.apply(this,arguments)}();k.underlyingResolver=x?k.cordovaResolver:k.browserResolver})()}}function Nn(O){return O.unwrap()}function Zt(O){return Bt(O)}function Bt(O){const{_tokenResponse:k}=O instanceof ne.ZR?O.customData:O;if(!k)return null;if(!(O instanceof ne.ZR)&&"temporaryProof"in k&&"phoneNumber"in k)return L.P.credentialFromResult(O);const x=k.providerId;if(!x||x===L.p.PASSWORD)return null;let K;switch(x){case L.p.GOOGLE:K=L.V;break;case L.p.FACEBOOK:K=L.U;break;case L.p.GITHUB:K=L.W;break;case L.p.TWITTER:K=L.Z;break;default:const{oauthIdToken:me,oauthAccessToken:Ve,oauthTokenSecret:vt,pendingToken:Ke,nonce:Qt}=k;return Ve||vt||me||Ke?Ke?x.startsWith("saml.")?L.aO._create(x,Ke):L.L._fromParams({providerId:x,signInMethod:x,pendingToken:Ke,idToken:me,accessToken:Ve}):new L.X(x).credential({idToken:me,accessToken:Ve,rawNonce:Qt}):null}return O instanceof ne.ZR?K.credentialFromError(O):K.credentialFromResult(O)}function Rn(O,k){return k.catch(x=>{throw x instanceof ne.ZR&&function Io(O,k){var x;const K=null===(x=k.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===k?.code)k.resolver=new as(O,L.aq(O,k));else if(K){const me=Bt(k),Ve=k;me&&(Ve.credential=me,Ve.tenantId=K.tenantId||void 0,Ve.email=K.email||void 0,Ve.phoneNumber=K.phoneNumber||void 0)}}(O,x),x}).then(x=>{const me=x.user;return{operationType:x.operationType,credential:Zt(x),additionalUserInfo:L.ao(x),user:yr.getOrCreate(me)}})}function Hi(O,k){return os.apply(this,arguments)}function os(){return(os=(0,c.Z)(function*(O,k){const x=yield k;return{verificationId:x.verificationId,confirm:K=>Rn(O,x.confirm(K))}})).apply(this,arguments)}class as{constructor(k,x){this.resolver=x,this.auth=function Is(O){return O.wrapped()}(k)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(k){return Rn(Nn(this.auth),this.resolver.resolveSignIn(k))}}class yr{constructor(k){this._delegate=k,this.multiFactor=L.ar(k)}static getOrCreate(k){return yr.USER_MAP.has(k)||yr.USER_MAP.set(k,new yr(k)),yr.USER_MAP.get(k)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(k){return this._delegate.getIdTokenResult(k)}getIdToken(k){return this._delegate.getIdToken(k)}linkAndRetrieveDataWithCredential(k){return this.linkWithCredential(k)}linkWithCredential(k){var x=this;return(0,c.Z)(function*(){return Rn(x.auth,L.a0(x._delegate,k))})()}linkWithPhoneNumber(k,x){var K=this;return(0,c.Z)(function*(){return Hi(K.auth,L.l(K._delegate,k,x))})()}linkWithPopup(k){var x=this;return(0,c.Z)(function*(){return Rn(x.auth,L.d(x._delegate,k,Rt))})()}linkWithRedirect(k){var x=this;return(0,c.Z)(function*(){return yield mt(L.aH(x.auth)),L.g(x._delegate,k,Rt)})()}reauthenticateAndRetrieveDataWithCredential(k){return this.reauthenticateWithCredential(k)}reauthenticateWithCredential(k){var x=this;return(0,c.Z)(function*(){return Rn(x.auth,L.a1(x._delegate,k))})()}reauthenticateWithPhoneNumber(k,x){return Hi(this.auth,L.r(this._delegate,k,x))}reauthenticateWithPopup(k){return Rn(this.auth,L.e(this._delegate,k,Rt))}reauthenticateWithRedirect(k){var x=this;return(0,c.Z)(function*(){return yield mt(L.aH(x.auth)),L.h(x._delegate,k,Rt)})()}sendEmailVerification(k){return L.ae(this._delegate,k)}unlink(k){var x=this;return(0,c.Z)(function*(){return yield L.an(x._delegate,k),x})()}updateEmail(k){return L.aj(this._delegate,k)}updatePassword(k){return L.ak(this._delegate,k)}updatePhoneNumber(k){return L.u(this._delegate,k)}updateProfile(k){return L.ai(this._delegate,k)}verifyBeforeUpdateEmail(k,x){return L.af(this._delegate,k,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}yr.USER_MAP=new WeakMap;const Ge=L.aA;let _e=(()=>{class O{constructor(x,K){if(this.app=x,K.isInitialized())return this._delegate=K.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:me}=x.options;Ge(me,"invalid-api-key",{appName:x.name}),Ge(me,"invalid-api-key",{appName:x.name});const Ve=typeof window<"u"?Rt:void 0;this._delegate=K.initialize({options:{persistence:it(me,x.name),popupRedirectResolver:Ve}}),this._delegate._updateErrorMap(L.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?yr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,K){L.I(this._delegate,x,K)}applyActionCode(x){return L.a5(this._delegate,x)}checkActionCode(x){return L.a6(this._delegate,x)}confirmPasswordReset(x,K){return L.a4(this._delegate,x,K)}createUserWithEmailAndPassword(x,K){var me=this;return(0,c.Z)(function*(){return Rn(me._delegate,L.a8(me._delegate,x,K))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return L.ad(this._delegate,x)}isSignInWithEmailLink(x){return L.ab(this._delegate,x)}getRedirectResult(){var x=this;return(0,c.Z)(function*(){Ge(rn(),x._delegate,"operation-not-supported-in-this-environment");const K=yield L.j(x._delegate,Rt);return K?Rn(x._delegate,Promise.resolve(K)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function le(O,k){(0,L.aH)(O)._logFramework(k)}(this._delegate,x)}onAuthStateChanged(x,K,me){const{next:Ve,error:vt,complete:Ke}=Xe(x,K,me);return this._delegate.onAuthStateChanged(Ve,vt,Ke)}onIdTokenChanged(x,K,me){const{next:Ve,error:vt,complete:Ke}=Xe(x,K,me);return this._delegate.onIdTokenChanged(Ve,vt,Ke)}sendSignInLinkToEmail(x,K){return L.aa(this._delegate,x,K)}sendPasswordResetEmail(x,K){return L.a3(this._delegate,x,K||void 0)}setPersistence(x){var K=this;return(0,c.Z)(function*(){let me;switch(function dt(O,k){Kr(Object.values(Wn).includes(k),O,"invalid-persistence-type"),(0,ne.b$)()?Kr(k!==Wn.SESSION,O,"unsupported-persistence-type"):(0,ne.UG)()?Kr(k===Wn.NONE,O,"unsupported-persistence-type"):In()?Kr(k===Wn.NONE||k===Wn.LOCAL&&(0,ne.hl)(),O,"unsupported-persistence-type"):Kr(k===Wn.NONE||kn(),O,"unsupported-persistence-type")}(K._delegate,x),x){case Wn.SESSION:me=L.a;break;case Wn.LOCAL:me=(yield L.aC(L.i)._isAvailable())?L.i:L.b;break;case Wn.NONE:me=L.N;break;default:return L.av("argument-error",{appName:K._delegate.name})}return K._delegate.setPersistence(me)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return Rn(this._delegate,L._(this._delegate))}signInWithCredential(x){return Rn(this._delegate,L.$(this._delegate,x))}signInWithCustomToken(x){return Rn(this._delegate,L.a2(this._delegate,x))}signInWithEmailAndPassword(x,K){return Rn(this._delegate,L.a9(this._delegate,x,K))}signInWithEmailLink(x,K){return Rn(this._delegate,L.ac(this._delegate,x,K))}signInWithPhoneNumber(x,K){return Hi(this._delegate,L.s(this._delegate,x,K))}signInWithPopup(x){var K=this;return(0,c.Z)(function*(){return Ge(rn(),K._delegate,"operation-not-supported-in-this-environment"),Rn(K._delegate,L.c(K._delegate,x,Rt))})()}signInWithRedirect(x){var K=this;return(0,c.Z)(function*(){return Ge(rn(),K._delegate,"operation-not-supported-in-this-environment"),yield mt(K._delegate),L.f(K._delegate,x,Rt)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return L.a7(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=Wn,O})();function Xe(O,k,x){let K=O;"function"!=typeof O&&({next:K,error:k,complete:x}=O);const me=K;return{next:vt=>me(vt&&yr.getOrCreate(vt)),error:k,complete:x}}function it(O,k){const x=function sn(O,k){const x=di();if(!x)return[];const K=L.aD(ws,O,k);switch(x.getItem(K)){case Wn.NONE:return[L.N];case Wn.LOCAL:return[L.i,L.a];case Wn.SESSION:return[L.a];default:return[]}}(O,k);if(typeof self<"u"&&!x.includes(L.i)&&x.push(L.i),typeof window<"u")for(const K of[L.b,L.a])x.includes(K)||x.push(K);return x.includes(L.N)||x.push(L.N),x}class Ft{constructor(){this.providerId="phone",this._delegate=new L.P(Nn(V.Z.auth()))}static credential(k,x){return L.P.credential(k,x)}verifyPhoneNumber(k,x){return this._delegate.verifyPhoneNumber(k,x)}unwrap(){return this._delegate}}Ft.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,Ft.PROVIDER_ID=L.P.PROVIDER_ID;const Vt=L.aA;class tr{constructor(k,x,K=V.Z.app()){var me;Vt(null===(me=K.options)||void 0===me?void 0:me.apiKey,"invalid-api-key",{appName:K.name}),this._delegate=new L.R(k,x,K.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $(O){O.INTERNAL.registerComponent(new Pe.wA("auth-compat",k=>{const x=k.getProvider("app-compat").getImmediate(),K=k.getProvider("auth");return new _e(x,K)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.Q,FacebookAuthProvider:L.U,GithubAuthProvider:L.W,GoogleAuthProvider:L.V,OAuthProvider:L.X,SAMLAuthProvider:L.Y,PhoneAuthProvider:Ft,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:tr,TwitterAuthProvider:L.Z,Auth:_e,AuthCredential:L.J,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},4537:(st,be,F)=>{F.d(be,{H0:()=>Fe,wA:()=>L});var c=F(5861),V=F(9058);class L{constructor(B,G,X){this.name=B,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ne="[DEFAULT]";class ge{constructor(B,G){this.name=B,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const G=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(G)){const X=new V.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:G});Oe&&X.resolve(Oe)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(B){var G;const X=this.normalizeInstanceIdentifier(B?.identifier),Oe=null!==(G=B?.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(xe){if(Oe)return null;throw xe}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function Pe(Me){return"EAGER"===Me.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[G,X]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(G);try{const xe=this.getOrInitializeService({instanceIdentifier:Oe});X.resolve(xe)}catch{}}}}clearInstance(B=ne){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,c.Z)(function*(){const G=Array.from(B.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ne){return this.instances.has(B)}getOptions(B=ne){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:G={}}=B,X=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[xe,Je]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(xe)&&Je.resolve(Oe);return Oe}onInit(B,G){var X;const Oe=this.normalizeInstanceIdentifier(G),xe=null!==(X=this.onInitCallbacks.get(Oe))&&void 0!==X?X:new Set;xe.add(B),this.onInitCallbacks.set(Oe,xe);const Je=this.instances.get(Oe);return Je&&B(Je,Oe),()=>{xe.delete(B)}}invokeOnInitCallbacks(B,G){const X=this.onInitCallbacks.get(G);if(X)for(const Oe of X)try{Oe(B,G)}catch{}}getOrInitializeService({instanceIdentifier:B,options:G={}}){let X=this.instances.get(B);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(Me=B,Me===ne?void 0:Me),options:G}),this.instances.set(B,X),this.instancesOptions.set(B,G),this.invokeOnInitCallbacks(X,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,X)}catch{}var Me;return X||null}normalizeInstanceIdentifier(B=ne){return this.component?this.component.multipleInstances?B:ne:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const G=this.getProvider(B.name);if(G.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);G.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const G=new ge(B,this);return this.providers.set(B,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(st,be,F)=>{F.d(be,{Am:()=>Me,Ub:()=>Fe,Yd:()=>Pe,in:()=>V});const c=[];var V=function(B){return B[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",B}(V||{});const L={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ne=V.INFO,ge={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},Ie=(B,G,...X)=>{if(G<B.logLevel)return;const Oe=(new Date).toISOString(),xe=ge[G];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[xe](`[${Oe}]  ${B.name}:`,...X)};class Pe{constructor(G){this.name=G,this._logLevel=ne,this._logHandler=Ie,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in V))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...G),this._logHandler(this,V.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...G),this._logHandler(this,V.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,V.INFO,...G),this._logHandler(this,V.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,V.WARN,...G),this._logHandler(this,V.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...G),this._logHandler(this,V.ERROR,...G)}}function Fe(B){c.forEach(G=>{G.setLogLevel(B)})}function Me(B,G){for(const X of c){let Oe=null;G&&G.level&&(Oe=L[G.level]),X.userLogHandler=null===B?null:(xe,Je,...Ce)=>{const De=Ce.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch{return null}}).filter(Te=>Te).join(" ");Je>=(Oe??xe.logLevel)&&B({level:V[Je].toLowerCase(),message:De,args:Ce,type:xe.name})}}}},1878:(st,be,F)=>{F.d(be,{X3:()=>ot});var c=F(5861);const V=(j,we)=>we.some(Ue=>j instanceof Ue);let L,ne;const Pe=new WeakMap,Fe=new WeakMap,Me=new WeakMap,B=new WeakMap,G=new WeakMap;let xe={get(j,we,Ue){if(j instanceof IDBTransaction){if("done"===we)return Fe.get(j);if("objectStoreNames"===we)return j.objectStoreNames||Me.get(j);if("store"===we)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return Te(j[we])},set:(j,we,Ue)=>(j[we]=Ue,!0),has:(j,we)=>j instanceof IDBTransaction&&("done"===we||"store"===we)||we in j};function De(j){return"function"==typeof j?function Ce(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ie(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...we){return j.apply(tt(this),we),Te(Pe.get(this))}:function(...we){return Te(j.apply(tt(this),we))}:function(we,...Ue){const lt=j.call(tt(this),we,...Ue);return Me.set(lt,we.sort?we.sort():[we]),Te(lt)}}(j):(j instanceof IDBTransaction&&function Oe(j){if(Fe.has(j))return;const we=new Promise((Ue,lt)=>{const en=()=>{j.removeEventListener("complete",Gn),j.removeEventListener("error",yn),j.removeEventListener("abort",yn)},Gn=()=>{Ue(),en()},yn=()=>{lt(j.error||new DOMException("AbortError","AbortError")),en()};j.addEventListener("complete",Gn),j.addEventListener("error",yn),j.addEventListener("abort",yn)});Fe.set(j,we)}(j),V(j,function ge(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,xe):j)}function Te(j){if(j instanceof IDBRequest)return function X(j){const we=new Promise((Ue,lt)=>{const en=()=>{j.removeEventListener("success",Gn),j.removeEventListener("error",yn)},Gn=()=>{Ue(Te(j.result)),en()},yn=()=>{lt(j.error),en()};j.addEventListener("success",Gn),j.addEventListener("error",yn)});return we.then(Ue=>{Ue instanceof IDBCursor&&Pe.set(Ue,j)}).catch(()=>{}),G.set(we,j),we}(j);if(B.has(j))return B.get(j);const we=De(j);return we!==j&&(B.set(j,we),G.set(we,j)),we}const tt=j=>G.get(j);function ot(j,we,{blocked:Ue,upgrade:lt,blocking:en,terminated:Gn}={}){const yn=indexedDB.open(j,we),wn=Te(yn);return lt&&yn.addEventListener("upgradeneeded",un=>{lt(Te(yn.result),un.oldVersion,un.newVersion,Te(yn.transaction),un)}),Ue&&yn.addEventListener("blocked",un=>Ue(un.oldVersion,un.newVersion,un)),wn.then(un=>{Gn&&un.addEventListener("close",()=>Gn()),en&&un.addEventListener("versionchange",Zr=>en(Zr.oldVersion,Zr.newVersion,Zr))}).catch(()=>{}),wn}const de=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],he=new Map;function Re(j,we){if(!(j instanceof IDBDatabase)||we in j||"string"!=typeof we)return;if(he.get(we))return he.get(we);const Ue=we.replace(/FromIndex$/,""),lt=we!==Ue,en=re.includes(Ue);if(!(Ue in(lt?IDBIndex:IDBObjectStore).prototype)||!en&&!de.includes(Ue))return;const Gn=function(){var yn=(0,c.Z)(function*(wn,...un){const Zr=this.transaction(wn,en?"readwrite":"readonly");let ie=Zr.store;return lt&&(ie=ie.index(un.shift())),(yield Promise.all([ie[Ue](...un),en&&Zr.done]))[0]});return function(un){return yn.apply(this,arguments)}}();return he.set(we,Gn),Gn}!function Je(j){xe=j(xe)}(j=>({...j,get:(we,Ue,lt)=>Re(we,Ue)||j.get(we,Ue,lt),has:(we,Ue)=>!!Re(we,Ue)||j.has(we,Ue)}))},5861:(st,be,F)=>{function c(L,ne,ge,Ie,Pe,Fe,Me){try{var B=L[Fe](Me),G=B.value}catch(X){return void ge(X)}B.done?ne(G):Promise.resolve(G).then(Ie,Pe)}function V(L){return function(){var ne=this,ge=arguments;return new Promise(function(Ie,Pe){var Fe=L.apply(ne,ge);function Me(G){c(Fe,Ie,Pe,Me,B,"next",G)}function B(G){c(Fe,Ie,Pe,Me,B,"throw",G)}Me(void 0)})}}F.d(be,{Z:()=>V})},7582:(st,be,F)=>{function ne(ie,ce){var le={};for(var se in ie)Object.prototype.hasOwnProperty.call(ie,se)&&ce.indexOf(se)<0&&(le[se]=ie[se]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(se=Object.getOwnPropertySymbols(ie);pe<se.length;pe++)ce.indexOf(se[pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,se[pe])&&(le[se[pe]]=ie[se[pe]])}return le}function X(ie,ce,le,se){return new(le||(le=Promise))(function(ke,Qe){function Be(Yt){try{ht(se.next(Yt))}catch(ft){Qe(ft)}}function tn(Yt){try{ht(se.throw(Yt))}catch(ft){Qe(ft)}}function ht(Yt){Yt.done?ke(Yt.value):function pe(ke){return ke instanceof le?ke:new le(function(Qe){Qe(ke)})}(Yt.value).then(Be,tn)}ht((se=se.apply(ie,ce||[])).next())})}function ee(ie){return this instanceof ee?(this.v=ie,this):new ee(ie)}function de(ie,ce,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,se=le.apply(ie,ce||[]),ke=[];return pe={},Qe("next"),Qe("throw"),Qe("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function Qe(nn){se[nn]&&(pe[nn]=function(kn){return new Promise(function(In,rn){ke.push([nn,kn,In,rn])>1||Be(nn,kn)})})}function Be(nn,kn){try{!function tn(nn){nn.value instanceof ee?Promise.resolve(nn.value.v).then(ht,Yt):ft(ke[0][2],nn)}(se[nn](kn))}catch(In){ft(ke[0][3],In)}}function ht(nn){Be("next",nn)}function Yt(nn){Be("throw",nn)}function ft(nn,kn){nn(kn),ke.shift(),ke.length&&Be(ke[0][0],ke[0][1])}}function he(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ce=ie[Symbol.asyncIterator];return ce?ce.call(ie):(ie=function Ce(ie){var ce="function"==typeof Symbol&&Symbol.iterator,le=ce&&ie[ce],se=0;if(le)return le.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&se>=ie.length&&(ie=void 0),{value:ie&&ie[se++],done:!ie}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),le={},se("next"),se("throw"),se("return"),le[Symbol.asyncIterator]=function(){return this},le);function se(ke){le[ke]=ie[ke]&&function(Qe){return new Promise(function(Be,tn){!function pe(ke,Qe,Be,tn){Promise.resolve(tn).then(function(ht){ke({value:ht,done:Be})},Qe)}(Be,tn,(Qe=ie[ke](Qe)).done,Qe.value)})}}}F.d(be,{FC:()=>de,KL:()=>he,_T:()=>ne,mG:()=>X,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},st=>{st(st.s=5711)}]);