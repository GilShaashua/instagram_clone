"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(st,Ee,F)=>{F.d(Ee,{Dh:()=>Pe,GT:()=>ge,cc:()=>Oe,on:()=>De,pX:()=>ne,xv:()=>Fe});var u=F(5879),B=F(120);st=F.hmd(st);const L=["ngOnDestroy"],ne=(Ae,Te,tt,ot={})=>new Proxy(Ae,{get:(ee,de)=>tt.runOutsideAngular(()=>{var re;if(Ae[de])return!(null===(re=ot?.spy)||void 0===re)&&re.get&&ot.spy.get(de,Ae[de]),Ae[de];if(L.indexOf(de)>-1)return()=>{};const he=Te.toPromise().then(ke=>{const j=ke&&ke[de];return"function"==typeof j?j.bind(ke):j&&j.then?j.then(we=>tt.run(()=>we)):tt.run(()=>j)});return new Proxy(()=>{},{get:(ke,j)=>he[j],apply:(ke,j,we)=>he.then(Ue=>{var lt;const en=Ue&&Ue(...we);return!(null===(lt=ot?.spy)||void 0===lt)&&lt.apply&&ot.spy.apply(de,we,en),en})})})}),ge=(Ae,Te)=>{Te.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(ot=>{Object.defineProperty(Ae.prototype,ot,Object.getOwnPropertyDescriptor(tt.prototype||tt,ot))})})};class Ie{constructor(Te){return Te}}const Pe=new u.OlP("angularfire2.app.options"),Fe=new u.OlP("angularfire2.app.name");function De(Ae,Te,tt){const ee="object"==typeof tt&&tt||{};ee.name=ee.name||"string"==typeof tt&&tt||"[DEFAULT]";const re=B.Z.apps.filter(he=>he&&he.name===ee.name)[0]||Te.runOutsideAngular(()=>B.Z.initializeApp(Ae,ee));try{JSON.stringify(Ae)!==JSON.stringify(re.options)&&U("error",`${re.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ie(re)}const U=(Ae,...Te)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Ae](...Te)};function Oe(Ae,Te,tt,ot,ee){const[,de,re]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===Ae)||[];if(de)return function xe(Ae,Te){try{return Ae.toString()===Te.toString()}catch{return Ae===Te}}(ee,re)||(Ce("error",`${Te} was already initialized on the ${tt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:ee,was:re})),de;{const he=ot();return globalThis.\u0275AngularfireInstanceCache.push([Ae,he,ee]),he}}const Je=!!st.hot,Ce=(Ae,...Te)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Ae](...Te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6710:(st,Ee,F)=>{F.d(Ee,{$:()=>Dh,A:()=>G,D:()=>xe,I:()=>fh,J:()=>Uc,L:()=>je,N:()=>Vt,P:()=>vn,Q:()=>$a,R:()=>em,U:()=>xg,V:()=>sa,W:()=>Cs,X:()=>Ws,Y:()=>wh,Z:()=>Ih,_:()=>jc,a:()=>Su,a0:()=>pb,a1:()=>Nn,a2:()=>AM,a3:()=>MM,a4:()=>Lv,a5:()=>To,a6:()=>Hc,a7:()=>Ah,a8:()=>Mh,a9:()=>Uv,aA:()=>j,aB:()=>ec,aC:()=>it,aD:()=>Qn,aE:()=>Oo,aF:()=>Xc,aG:()=>Po,aH:()=>On,aL:()=>Wc,aO:()=>Hi,aa:()=>Rg,ab:()=>Vv,ac:()=>kg,ad:()=>jv,ae:()=>wu,af:()=>$v,ai:()=>mb,aj:()=>xM,ak:()=>zv,an:()=>Eh,ao:()=>Gc,aq:()=>Lh,ar:()=>Du,as:()=>Ue,at:()=>Ke,au:()=>me,av:()=>ee,aw:()=>Gi,ax:()=>Yh,ay:()=>Yt,az:()=>de,b:()=>Bh,c:()=>pi,d:()=>Pu,e:()=>Qa,f:()=>Ru,g:()=>mi,h:()=>Jt,i:()=>Is,j:()=>s0,k:()=>ro,l:()=>tm,m:()=>rc,o:()=>fa,p:()=>Fe,r:()=>ut,s:()=>fi,u:()=>ti});var u=F(5861),B=F(9058),L=F(7592),ne=F(7582),ge=F(7879),Ie=F(4537);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Je=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ce=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Te=new ge.Yd("@firebase/auth");function ot(w,...m){Te.logLevel<=ge.in.ERROR&&Te.error(`Auth (${L.SDK_VERSION}): ${w}`,...m)}function ee(w,...m){throw ke(w,...m)}function de(w,...m){return ke(w,...m)}function re(w,m,_){const I=Object.assign(Object.assign({},Je()),{[m]:_});return new B.LL("auth","Firebase",I).create(m,{appName:w.name})}function he(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&ee(w,"argument-error"),re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ke(w,...m){if("string"!=typeof w){const _=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return Ce.create(w,...m)}function j(w,m,..._){if(!w)throw ke(m,..._)}function we(w){const m="INTERNAL ASSERTION FAILED: "+w;throw ot(m),new Error(m)}function Ue(w,m){w||we(m)}function lt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function en(){return"http:"===jn()||"https:"===jn()}function jn(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class un{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ue(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function yn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(en()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wr(w,m){Ue(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class ie{static initialize(m,_,I){this.fetchImpl=m,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},le=new un(3e4,6e4);function se(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function pe(w,m,_,I){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,u.Z)(function*(w,m,_,I,S={}){return Qe(w,S,(0,u.Z)(function*(){let P={},Z={};I&&("GET"===m?Z=I:P={body:JSON.stringify(I)});const oe=(0,B.xO)(Object.assign({key:w.config.apiKey},Z)).slice(1),Le=yield w._getAdditionalHeaders();return Le["Content-Type"]="application/json",w.languageCode&&(Le["X-Firebase-Locale"]=w.languageCode),ie.fetch()(Kt(w,w.config.apiHost,_,oe),Object.assign({method:m,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Qe(w,m,_){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,u.Z)(function*(w,m,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},ce),m);try{const S=new ft(w),P=yield Promise.race([_(),S.promise]);S.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw nn(w,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const oe=P.ok?Z.errorMessage:Z.error.message,[Le,He]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw nn(w,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Le)throw nn(w,"email-already-in-use",Z);if("USER_DISABLED"===Le)throw nn(w,"user-disabled",Z);const nt=I[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw re(w,nt,He);ee(w,nt)}}catch(S){if(S instanceof B.ZR)throw S;ee(w,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function tn(w,m,_,I){return ht.apply(this,arguments)}function ht(){return(ht=(0,u.Z)(function*(w,m,_,I,S={}){const P=yield pe(w,m,_,I,S);return"mfaPendingCredential"in P&&ee(w,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Kt(w,m,_,I){const S=`${m}${_}?${I}`;return w.config.emulator?Wr(w.config,S):`${w.config.apiScheme}://${S}`}class ft{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(de(this.auth,"network-request-failed")),le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nn(w,m,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const S=de(w,m,I);return S.customData._tokenResponse=_,S}function wn(){return(wn=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function $n(){return($n=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Fr(){return(Fr=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function fr(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function ys(){return(ys=(0,u.Z)(function*(w,m=!1){const _=(0,B.m9)(w),I=yield _.getIdToken(m),S=mt(I);j(S&&S.exp&&S.auth_time&&S.iat,_.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,Z=P?.sign_in_provider;return{claims:S,token:I,authTime:fr(dt(S.auth_time)),issuedAtTime:fr(dt(S.iat)),expirationTime:fr(dt(S.exp)),signInProvider:Z||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(w){return 1e3*Number(w)}function mt(w){const[m,_,I]=w.split(".");if(void 0===m||void 0===_||void 0===I)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,B.tV)(_);return S?JSON.parse(S):(ot("Failed to decode base64 JWT payload"),null)}catch(S){return ot("Caught error parsing JWT payload as JSON",S?.toString()),null}}function sn(w,m){return li.apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(I){throw I instanceof B.ZR&&function Zr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}class Rt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const S=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),I)}iteration(){var m=this;return(0,u.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class xn{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=fr(this.lastLoginAt),this.creationTime=fr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vs(w){return qt.apply(this,arguments)}function qt(){return qt=(0,u.Z)(function*(w){var m;const _=w.auth,I=yield w.getIdToken(),S=yield sn(w,function bi(w,m){return Fr.apply(this,arguments)}(_,{idToken:I}));j(S?.users.length,_,"internal-error");const P=S.users[0];w._notifyReloadListener(P);const Z=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?function Bi(w){return w.map(m=>{var{providerId:_}=m,I=(0,ne._T)(m,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(P.providerUserInfo):[],oe=function Pn(w,m){return[...w.filter(I=>!m.some(S=>S.providerId===I.providerId)),...m]}(w.providerData,Z),nt=!!w.isAnonymous&&!(w.email&&P.passwordHash||oe?.length),Nt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:oe,metadata:new xn(P.createdAt,P.lastLoginAt),isAnonymous:nt};Object.assign(w,Nt)}),qt.apply(this,arguments)}function Ut(){return(Ut=(0,u.Z)(function*(w){const m=(0,B.m9)(w);yield vs(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function is(){return(is=(0,u.Z)(function*(w,m){const _=yield Qe(w,{},(0,u.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:S,apiKey:P}=w.config,Z=Kt(w,S,"/v1/token",`key=${P}`),oe=yield w._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(Z,{method:"POST",headers:oe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class pr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){j(m.idToken,"internal-error"),j(typeof m.idToken<"u","internal-error"),j(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Tt(w){const m=mt(w);return j(m,"internal-error"),j(typeof m.exp<"u","internal-error"),j(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var I=this;return(0,u.Z)(function*(){return j(!I.accessToken||I.refreshToken,m,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var I=this;return(0,u.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:Z}=yield function rs(w,m){return is.apply(this,arguments)}(m,_);I.updateTokensAndExpiration(S,P,Number(Z))})()}updateTokensAndExpiration(m,_,I){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,_){const{refreshToken:I,accessToken:S,expirationTime:P}=_,Z=new pr;return I&&(j("string"==typeof I,"internal-error",{appName:m}),Z.refreshToken=I),S&&(j("string"==typeof S,"internal-error",{appName:m}),Z.accessToken=S),P&&(j("number"==typeof P,"internal-error",{appName:m}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new pr,this.toJSON())}_performRefresh(){return we("not implemented")}}function Ge(w,m){j("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class _e{constructor(m){var{uid:_,auth:I,stsTokenManager:S}=m,P=(0,ne._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new xn(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,u.Z)(function*(){const I=yield sn(_,_.stsTokenManager.getToken(_.auth,m));return j(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(m){return function qr(w){return ys.apply(this,arguments)}(this,m)}reload(){return function Co(w){return Ut.apply(this,arguments)}(this)}_assign(m){this!==m&&(j(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new _e(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var I=this;return(0,u.Z)(function*(){let S=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),S=!0),_&&(yield vs(I)),yield I.auth._persistUserIfCurrent(I),S&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,u.Z)(function*(){const _=yield m.getIdToken();return yield sn(m,function Mn(w,m){return wn.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var I,S,P,Z,oe,Le,He,nt;const Nt=null!==(I=_.displayName)&&void 0!==I?I:void 0,Ur=null!==(S=_.email)&&void 0!==S?S:void 0,Wi=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,io=null!==(Z=_.photoURL)&&void 0!==Z?Z:void 0,fm=null!==(oe=_.tenantId)&&void 0!==oe?oe:void 0,rl=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,pa=null!==(He=_.createdAt)&&void 0!==He?He:void 0,ga=null!==(nt=_.lastLoginAt)&&void 0!==nt?nt:void 0,{uid:Gu,emailVerified:il,isAnonymous:qi,providerData:oc,stsTokenManager:so}=_;j(Gu&&so,m,"internal-error");const sl=pr.fromJSON(this.name,so);j("string"==typeof Gu,m,"internal-error"),Ge(Nt,m.name),Ge(Ur,m.name),j("boolean"==typeof il,m,"internal-error"),j("boolean"==typeof qi,m,"internal-error"),Ge(Wi,m.name),Ge(io,m.name),Ge(fm,m.name),Ge(rl,m.name),Ge(pa,m.name),Ge(ga,m.name);const Uo=new _e({uid:Gu,auth:m,email:Ur,emailVerified:il,displayName:Nt,isAnonymous:qi,photoURL:io,phoneNumber:Wi,tenantId:fm,stsTokenManager:sl,createdAt:pa,lastLoginAt:ga});return oc&&Array.isArray(oc)&&(Uo.providerData=oc.map(Wu=>Object.assign({},Wu))),rl&&(Uo._redirectEventId=rl),Uo}static _fromIdTokenResponse(m,_,I=!1){return(0,u.Z)(function*(){const S=new pr;S.updateFromServerResponse(_);const P=new _e({uid:_.localId,auth:m,stsTokenManager:S,isAnonymous:I});return yield vs(P),P})()}}const Xe=new Map;function it(w){Ue(w instanceof Function,"Expected a class definition");let m=Xe.get(w);return m?(Ue(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Xe.set(w,m),m)}const Vt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,I){var S=this;return(0,u.Z)(function*(){S.storage[_]=I})()}_get(_){var I=this;return(0,u.Z)(function*(){const S=I.storage[_];return void 0===S?null:S})()}_remove(_){var I=this;return(0,u.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function Qn(w,m,_){return`firebase:${w}:${m}:${_}`}class H{constructor(m,_,I){this.persistence=m,this.auth=_,this.userKey=I;const{config:S,name:P}=this.auth;this.fullUserKey=Qn(this.userKey,S.apiKey,P),this.fullPersistenceKey=Qn("persistence",S.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,u.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?_e._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,u.Z)(function*(){if(_.persistence===m)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,I="authUser"){return(0,u.Z)(function*(){if(!_.length)return new H(it(Vt),m,I);const S=(yield Promise.all(_.map(function(){var He=(0,u.Z)(function*(nt){if(yield nt._isAvailable())return nt});return function(nt){return He.apply(this,arguments)}}()))).filter(He=>He);let P=S[0]||it(Vt);const Z=Qn(I,m.config.apiKey,m.name);let oe=null;for(const He of _)try{const nt=yield He._get(Z);if(nt){const Nt=_e._fromJSON(m,nt);He!==P&&(oe=Nt),P=He;break}}catch{}const Le=S.filter(He=>He._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],oe&&(yield P._set(Z,oe.toJSON())),yield Promise.all(_.map(function(){var He=(0,u.Z)(function*(nt){if(nt!==P)try{yield nt._remove(Z)}catch{}});return function(nt){return He.apply(this,arguments)}}())),new H(P,m,I)):new H(P,m,I)})()}}function $(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(K(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Be(m))return"Blackberry";if(yt(m))return"Webos";if(N(m))return"Safari";if((m.includes("chrome/")||x(m))&&!m.includes("edge/"))return"Chrome";if(me(m))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function O(w=(0,B.z$)()){return/firefox\//i.test(w)}function N(w=(0,B.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function x(w=(0,B.z$)()){return/crios\//i.test(w)}function K(w=(0,B.z$)()){return/iemobile/i.test(w)}function me(w=(0,B.z$)()){return/android/i.test(w)}function Be(w=(0,B.z$)()){return/blackberry/i.test(w)}function yt(w=(0,B.z$)()){return/webos/i.test(w)}function Ke(w=(0,B.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Yt(w=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function xt(w=(0,B.z$)()){return Ke(w)||me(w)||yt(w)||Be(w)||/windows phone/i.test(w)||K(w)}function kc(w,m=[]){let _;switch(w){case"Browser":_=$((0,B.z$)());break;case"Worker":_=`${$((0,B.z$)())}-${w}`;break;default:_=w}const I=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${L.SDK_VERSION}/${I}`}function wo(){return(wo=(0,u.Z)(function*(w){return(yield pe(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Bs(w,m){return $i.apply(this,arguments)}function $i(){return($i=(0,u.Z)(function*(w,m){return pe(w,"GET","/v2/recaptchaConfig",se(w,m))})).apply(this,arguments)}function Zt(w){return void 0!==w&&void 0!==w.getResponse}function na(w){return void 0!==w&&void 0!==w.enterprise}class Va{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function cu(w){return new Promise((m,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=m,I.onerror=S=>{const P=de("internal-error");P.customData=S,_(P)},I.type="text/javascript",I.charset="UTF-8",function au(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(I)})}function js(w){return`__${w}${Math.floor(1e6*Math.random())}`}class ra{constructor(m){this.type="recaptcha-enterprise",this.auth=On(m)}verify(m="verify",_=!1){var I=this;return(0,u.Z)(function*(){function P(){return P=(0,u.Z)(function*(oe){if(!_){if(null==oe.tenantId&&null!=oe._agentRecaptchaConfig)return oe._agentRecaptchaConfig.siteKey;if(null!=oe.tenantId&&void 0!==oe._tenantRecaptchaConfigs[oe.tenantId])return oe._tenantRecaptchaConfigs[oe.tenantId].siteKey}return new Promise(function(){var Le=(0,u.Z)(function*(He,nt){Bs(oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Nt=>{if(void 0!==Nt.recaptchaKey){const Ur=new Va(Nt);return null==oe.tenantId?oe._agentRecaptchaConfig=Ur:oe._tenantRecaptchaConfigs[oe.tenantId]=Ur,He(Ur.siteKey)}nt(new Error("recaptcha Enterprise site key undefined"))}).catch(Nt=>{nt(Nt)})});return function(He,nt){return Le.apply(this,arguments)}}())}),P.apply(this,arguments)}function Z(oe,Le,He){const nt=window.grecaptcha;na(nt)?nt.enterprise.ready(()=>{nt.enterprise.execute(oe,{action:m}).then(Nt=>{Le(Nt)}).catch(()=>{Le("NO_RECAPTCHA")})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((oe,Le)=>{(function S(oe){return P.apply(this,arguments)})(I.auth).then(He=>{if(!_&&na(window.grecaptcha))Z(He,oe,Le);else{if(typeof window>"u")return void Le(new Error("RecaptchaVerifier is only supported in browser"));cu("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{Z(He,oe,Le)}).catch(nt=>{Le(nt)})}}).catch(He=>{Le(He)})})})()}}function $s(w,m,_){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,u.Z)(function*(w,m,_,I=!1){const S=new ra(w);let P;try{P=yield S.verify(_)}catch{P=yield S.verify(_,!0)}const Z=Object.assign({},m);return Object.assign(Z,I?{captchaResp:P}:{captchaResponse:P}),Object.assign(Z,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Z,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Z})).apply(this,arguments)}class Lc{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const I=P=>new Promise((Z,oe)=>{try{Z(m(P))}catch(Le){oe(Le)}});I.onAbort=_,this.queue.push(I);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,u.Z)(function*(){if(_.auth.currentUser===m)return;const I=[];try{for(const S of _.queue)yield S(m),S.onAbort&&I.push(S.onAbort)}catch(S){I.reverse();for(const P of I)try{P()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Io{constructor(m,_,I,S){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=I,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tv(this),this.idTokenSubscription=new Tv(this),this.beforeStateQueue=new Lc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ce,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(m,_){var I=this;return _&&(this._popupRedirectResolver=it(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var S,P;if(!I._deleted&&(I.persistenceManager=yield H.create(I,m),!I._deleted)){if(null!==(S=I._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(P=I.currentUser)||void 0===P?void 0:P.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,u.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,u.Z)(function*(){var I;const S=yield _.assertedPersistence.getCurrentUser();let P=S,Z=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const oe=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,Le=P?._redirectEventId,He=yield _.tryRedirectSignIn(m);(!oe||oe===Le)&&He?.user&&(P=He.user,Z=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield _.beforeStateQueue.runMiddleware(P)}catch(oe){P=S,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(oe))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return j(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,u.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,u.Z)(function*(){try{yield vs(m)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Cn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,u.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,u.Z)(function*(){const I=m?(0,B.m9)(m):null;return I&&j(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(m,_=!1){var I=this;return(0,u.Z)(function*(){if(!I._deleted)return m&&j(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,u.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,u.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(it(m))}))}initializeRecaptchaConfig(){var m=this;return(0,u.Z)(function*(){const _=yield Bs(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Va(_);null==m.tenantId?m._agentRecaptchaConfig=I:m._tenantRecaptchaConfigs[m.tenantId]=I,I.emailPasswordEnabled&&new ra(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new B.LL("auth","Firebase",m())}onAuthStateChanged(m,_,I){return this.registerStateListener(this.authStateSubscription,m,_,I)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,I){return this.registerStateListener(this.idTokenSubscription,m,_,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var I=this;return(0,u.Z)(function*(){const S=yield I.getOrInitRedirectPersistenceManager(_);return null===m?S.removeCurrentUser():S.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const I=m&&it(m)||_._popupRedirectResolver;j(I,_,"argument-error"),_.redirectPersistenceManager=yield H.create(_,[it(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,u.Z)(function*(){var I,S;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===m?_._currentUser:(null===(S=_.redirectUser)||void 0===S?void 0:S._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,u.Z)(function*(){if(m===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,I,S){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,I,S):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=kc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,u.Z)(function*(){var _;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const S=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();S&&(I["X-Firebase-Client"]=S);const P=yield m._getAppCheckToken();return P&&(I["X-Firebase-AppCheck"]=P),I})()}_getAppCheckToken(){var m=this;return(0,u.Z)(function*(){var _;const I=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return I?.error&&function tt(w,...m){Te.logLevel<=ge.in.WARN&&Te.warn(`Auth (${L.SDK_VERSION}): ${w}`,...m)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function On(w){return(0,B.m9)(w)}class Tv{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,B.ne)(_=>this.observer=_)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function fh(w,m,_){const I=On(w);j(I._canInitEmulator,I,"emulator-config-failed"),j(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const S=!!_?.disableWarnings,P=ui(m),{host:Z,port:oe}=function ph(w){const m=ui(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(I);if(S){const P=S[1];return{host:P,port:gh(I.substr(P.length+1))}}{const[P,Z]=I.split(":");return{host:P,port:gh(Z)}}}(m);I.config.emulator={url:`${P}//${Z}${null===oe?"":`:${oe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Z,port:oe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Sv(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function ui(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function gh(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class Uc{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return we("not implemented")}_getIdTokenResponse(m){return we("not implemented")}_linkToIdToken(m,_){return we("not implemented")}_getReauthenticationResolver(m){return we("not implemented")}}function mh(w,m){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:resetPassword",se(w,m))})).apply(this,arguments)}function Sg(w,m){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ti(){return(Ti=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",se(w,m))})).apply(this,arguments)}function uu(w,m){return _h.apply(this,arguments)}function _h(){return(_h=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithPassword",se(w,m))})).apply(this,arguments)}function du(w,m){return yh.apply(this,arguments)}function yh(){return(yh=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendOobCode",se(w,m))})).apply(this,arguments)}function vh(){return(vh=(0,u.Z)(function*(w,m){return du(w,m)})).apply(this,arguments)}function fu(w,m){return pu.apply(this,arguments)}function pu(){return(pu=(0,u.Z)(function*(w,m){return du(w,m)})).apply(this,arguments)}function gu(w,m){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,u.Z)(function*(w,m){return du(w,m)})).apply(this,arguments)}function br(){return(br=(0,u.Z)(function*(w,m){return du(w,m)})).apply(this,arguments)}function Kr(){return(Kr=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}function mu(){return(mu=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}class Eo extends Uc{constructor(m,_,I,S=null){super("password",I),this._email=m,this._password=_,this._tenantId=S}static _fromEmailAndPassword(m,_){return new Eo(m,_,"password")}static _fromEmailAndCode(m,_,I=null){return new Eo(m,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,u.Z)(function*(){var I;switch(_.signInMethod){case"password":const S={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=m._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const P=yield $s(m,S,"signInWithPassword");return uu(m,P)}return uu(m,S).catch(function(){var P=(0,u.Z)(function*(Z){if("auth/missing-recaptcha-token"===Z.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const oe=yield $s(m,S,"signInWithPassword");return uu(m,oe)}return Promise.reject(Z)});return function(Z){return P.apply(this,arguments)}}());case"emailLink":return function ja(w,m){return Kr.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:ee(m,"internal-error")}})()}_linkToIdToken(m,_){var I=this;return(0,u.Z)(function*(){switch(I.signInMethod){case"password":return Sg(m,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Mg(w,m){return mu.apply(this,arguments)}(m,{idToken:_,email:I._email,oobCode:I._password});default:ee(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Hs(w,m){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithIdp",se(w,m))})).apply(this,arguments)}class je extends Uc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new je(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):ee("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:S}=_,P=(0,ne._T)(_,["providerId","signInMethod"]);if(!I||!S)return null;const Z=new je(I,S);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(m){return Hs(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,Hs(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Hs(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,B.xO)(_)}return m}}function fn(){return(fn=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendVerificationCode",se(w,m))})).apply(this,arguments)}function zs(){return(zs=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m))})).apply(this,arguments)}function ia(){return(ia=(0,u.Z)(function*(w,m){const _=yield tn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m));if(_.temporaryProof)throw nn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const zn={USER_NOT_FOUND:"user-not-found"};function bo(){return(bo=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),zn)})).apply(this,arguments)}class pt extends Uc{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new pt({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new pt({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Di(w,m){return zs.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Tr(w,m){return ia.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Gs(w,m){return bo.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:I,verificationCode:S}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:I,code:S}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:I,phoneNumber:S,temporaryProof:P}=m;return I||_||S||P?new pt({verificationId:_,verificationCode:I,phoneNumber:S,temporaryProof:P}):null}}class Si{constructor(m){var _,I,S,P,Z,oe;const Le=(0,B.zd)((0,B.pd)(m)),He=null!==(_=Le.apiKey)&&void 0!==_?_:null,nt=null!==(I=Le.oobCode)&&void 0!==I?I:null,Nt=function Vc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Le.mode)&&void 0!==S?S:null);j(He&&nt&&Nt,"argument-error"),this.apiKey=He,this.operation=Nt,this.code=nt,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Le.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(m){const _=function Av(w){const m=(0,B.zd)((0,B.pd)(w)).link,_=m?(0,B.zd)((0,B.pd)(m)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(w)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||_||m||w}(m);try{return new Si(_)}catch{return null}}}let $a=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return Eo._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const S=Si.parseLink(I);return j(S,"argument-error"),Eo._fromEmailAndCode(_,S.code,S.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Ai{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Yr extends Ai{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Ws extends Yr{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return j("providerId"in _&&"signInMethod"in _,"argument-error"),je._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return j(m.idToken||m.accessToken,"argument-error"),je._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Ws.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Ws.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:S,pendingToken:P,nonce:Z,providerId:oe}=m;if(!I&&!S&&!_&&!P||!oe)return null;try{return new Ws(oe)._credential({idToken:_,accessToken:I,nonce:Z,pendingToken:P})}catch{return null}}}let xg=(()=>{class w extends Yr{constructor(){super("facebook.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),sa=(()=>{class w extends Yr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:S}=_;if(!I&&!S)return null;try{return w.credential(I,S)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Cs=(()=>{class w extends Yr{constructor(){super("github.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Hi extends Uc{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Hs(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,Hs(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Hs(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:S,pendingToken:P}=_;return I&&S&&P&&I===S?new Hi(I,P):null}static _create(m,_){return new Hi(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wh extends Ai{constructor(m){j(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return wh.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return wh.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Hi.fromJSON(m);return j(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:I}=m;if(!_||!I)return null;try{return Hi._create(I,_)}catch{return null}}}let Ih=(()=>{class w extends Yr{constructor(){super("twitter.com")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:S}=_;if(!I||!S)return null;try{return w.credential(I,S)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Bc(w,m){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signUp",se(w,m))})).apply(this,arguments)}class Jr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,I,S=!1){return(0,u.Z)(function*(){const P=yield _e._fromIdTokenResponse(m,I,S),Z=Ha(I);return new Jr({user:P,providerId:Z,_tokenResponse:I,operationType:_})})()}static _forOperation(m,_,I){return(0,u.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const S=Ha(I);return new Jr({user:m,providerId:S,_tokenResponse:I,operationType:_})})()}}function Ha(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function jc(w){return sr.apply(this,arguments)}function sr(){return(sr=(0,u.Z)(function*(w){var m;const _=On(w);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new Jr({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield Bc(_,{returnSecureToken:!0}),S=yield Jr._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class Pg extends B.ZR{constructor(m,_,I,S){var P;super(_.code,_.message),this.operationType=I,this.user=S,Object.setPrototypeOf(this,Pg.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,_,I,S){return new Pg(m,_,I,S)}}function di(w,m,_,I){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Pg._fromErrorAndOperation(w,P,m,I):P})}function Lr(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Eh(w,m){return qs.apply(this,arguments)}function qs(){return qs=(0,u.Z)(function*(w,m){const _=(0,B.m9)(w);yield za(!0,_,m);const{providerUserInfo:I}=yield function rn(w,m){return $n.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),S=Lr(I||[]);return _.providerData=_.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),qs.apply(this,arguments)}function $c(w,m){return zi.apply(this,arguments)}function zi(){return(zi=(0,u.Z)(function*(w,m,_=!1){const I=yield sn(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return Jr._forOperation(w,"link",I)})).apply(this,arguments)}function za(w,m,_){return bh.apply(this,arguments)}function bh(){return(bh=(0,u.Z)(function*(w,m,_){yield vs(m);const S=!1===w?"provider-already-linked":"no-such-provider";j(Lr(m.providerData).has(_)===w,m.auth,S)})).apply(this,arguments)}function Og(w,m){return Mv.apply(this,arguments)}function Mv(){return(Mv=(0,u.Z)(function*(w,m,_=!1){const{auth:I}=w,S="reauthenticate";try{const P=yield sn(w,di(I,S,m,w),_);j(P.idToken,I,"internal-error");const Z=mt(P.idToken);j(Z,I,"internal-error");const{sub:oe}=Z;return j(w.uid===oe,I,"user-mismatch"),Jr._forOperation(w,S,P)}catch(P){throw"auth/user-not-found"===P?.code&&ee(I,"user-mismatch"),P}})).apply(this,arguments)}function xv(w,m){return Th.apply(this,arguments)}function Th(){return(Th=(0,u.Z)(function*(w,m,_=!1){const I="signIn",S=yield di(w,I,m),P=yield Jr._fromIdTokenResponse(w,I,S);return _||(yield w._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Dh(w,m){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,u.Z)(function*(w,m){return xv(On(w),m)})).apply(this,arguments)}function pb(w,m){return Pv.apply(this,arguments)}function Pv(){return(Pv=(0,u.Z)(function*(w,m){const _=(0,B.m9)(w);return yield za(!1,_,m.providerId),$c(_,m)})).apply(this,arguments)}function Nn(w,m){return Ov.apply(this,arguments)}function Ov(){return(Ov=(0,u.Z)(function*(w,m){return Og((0,B.m9)(w),m)})).apply(this,arguments)}function Nv(){return(Nv=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithCustomToken",se(w,m))})).apply(this,arguments)}function AM(w,m){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,u.Z)(function*(w,m){const _=On(w),I=yield function SM(w,m){return Nv.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),S=yield Jr._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(S.user),S}),Rv.apply(this,arguments)}class Sh{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?kv._fromServerResponse(m,_):"totpInfo"in _?yu._fromServerResponse(m,_):ee(m,"internal-error")}}class kv extends Sh{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new kv(_)}}class yu extends Sh{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new yu(_)}}function Ga(w,m,_){var I;j((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),j(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(j(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(j(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function MM(w,m,_){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,u.Z)(function*(w,m,_){var I;const S=On(w),P={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Z=yield $s(S,P,"getOobCode",!0);_&&Ga(S,Z,_),yield fu(S,Z)}else _&&Ga(S,P,_),yield fu(S,P).catch(function(){var Z=(0,u.Z)(function*(oe){if("auth/missing-recaptcha-token"!==oe.code)return Promise.reject(oe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Le=yield $s(S,P,"getOobCode",!0);_&&Ga(S,Le,_),yield fu(S,Le)}});return function(oe){return Z.apply(this,arguments)}}())}),Fv.apply(this,arguments)}function Lv(w,m,_){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,u.Z)(function*(w,m,_){yield mh((0,B.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function To(w,m){return vu.apply(this,arguments)}function vu(){return vu=(0,u.Z)(function*(w,m){yield function fb(w,m){return Ti.apply(this,arguments)}((0,B.m9)(w),{oobCode:m})}),vu.apply(this,arguments)}function Hc(w,m){return gr.apply(this,arguments)}function gr(){return(gr=(0,u.Z)(function*(w,m){const _=(0,B.m9)(w),I=yield mh(_,{oobCode:m}),S=I.requestType;switch(j(S,_,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(I.mfaInfo,_,"internal-error");default:j(I.email,_,"internal-error")}let P=null;return I.mfaInfo&&(P=Sh._fromServerResponse(On(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function Ah(w,m){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,u.Z)(function*(w,m){const{data:_}=yield Hc((0,B.m9)(w),m);return _.email})).apply(this,arguments)}function Mh(w,m,_){return xh.apply(this,arguments)}function xh(){return xh=(0,u.Z)(function*(w,m,_){var I;const S=On(w),P={returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"};let Z;if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const He=yield $s(S,P,"signUpPassword");Z=Bc(S,He)}else Z=Bc(S,P).catch(function(){var He=(0,u.Z)(function*(nt){if("auth/missing-recaptcha-token"===nt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Nt=yield $s(S,P,"signUpPassword");return Bc(S,Nt)}return Promise.reject(nt)});return function(nt){return He.apply(this,arguments)}}());const oe=yield Z.catch(He=>Promise.reject(He)),Le=yield Jr._fromIdTokenResponse(S,"signIn",oe);return yield S._updateCurrentUser(Le.user),Le}),xh.apply(this,arguments)}function Uv(w,m,_){return Dh((0,B.m9)(w),$a.credential(m,_))}function Rg(w,m,_){return Wa.apply(this,arguments)}function Wa(){return Wa=(0,u.Z)(function*(w,m,_){var I;const S=On(w),P={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function Z(oe,Le){j(Le.handleCodeInApp,S,"argument-error"),Le&&Ga(S,oe,Le)}if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const oe=yield $s(S,P,"getOobCode",!0);Z(oe,_),yield gu(S,oe)}else Z(P,_),yield gu(S,P).catch(function(){var oe=(0,u.Z)(function*(Le){if("auth/missing-recaptcha-token"!==Le.code)return Promise.reject(Le);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield $s(S,P,"getOobCode",!0);Z(He,_),yield gu(S,He)}});return function(Le){return oe.apply(this,arguments)}}())}),Wa.apply(this,arguments)}function Vv(w,m){const _=Si.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}function kg(w,m,_){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w),S=$a.credentialWithLink(m,_||lt());return j(S._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Dh(I,S)})).apply(this,arguments)}function Ph(){return(Ph=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:createAuthUri",se(w,m))})).apply(this,arguments)}function jv(w,m){return zc.apply(this,arguments)}function zc(){return zc=(0,u.Z)(function*(w,m){const I={identifier:m,continueUri:en()?lt():"http://localhost"},{signinMethods:S}=yield function Bv(w,m){return Ph.apply(this,arguments)}((0,B.m9)(w),I);return S||[]}),zc.apply(this,arguments)}function wu(w,m){return Do.apply(this,arguments)}function Do(){return Do=(0,u.Z)(function*(w,m){const _=(0,B.m9)(w),S={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Ga(_.auth,S,m);const{email:P}=yield function hu(w,m){return vh.apply(this,arguments)}(_.auth,S);P!==w.email&&(yield w.reload())}),Do.apply(this,arguments)}function $v(w,m,_){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&Ga(I.auth,P,_);const{email:Z}=yield function Er(w,m){return br.apply(this,arguments)}(I.auth,P);Z!==w.email&&(yield w.reload())}),Fg.apply(this,arguments)}function Hv(){return(Hv=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function mb(w,m){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,u.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const I=(0,B.m9)(w),P={idToken:yield I.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},Z=yield sn(I,function gb(w,m){return Hv.apply(this,arguments)}(I.auth,P));I.displayName=Z.displayName||null,I.photoURL=Z.photoUrl||null;const oe=I.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=I.displayName,oe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Z)}),Lg.apply(this,arguments)}function xM(w,m){return Oh((0,B.m9)(w),m,null)}function zv(w,m){return Oh((0,B.m9)(w),null,m)}function Oh(w,m,_){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,u.Z)(function*(w,m,_){const{auth:I}=w,P={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const Z=yield sn(w,Sg(I,P));yield w._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Iu{constructor(m,_,I={}){this.isNewUser=m,this.providerId=_,this.profile=I}}class _b extends Iu{constructor(m,_,I,S){super(m,_,I),this.username=S}}class Eu extends Iu{constructor(m,_){super(m,"facebook.com",_)}}class Gv extends _b{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Bg extends Iu{constructor(m,_){super(m,"google.com",_)}}class Nh extends _b{constructor(m,_,I){super(m,"twitter.com",_,I)}}function Gc(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Vg(w){var m,_;if(!w)return null;const{providerId:I}=w,S=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},P=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const Z=null===(_=null===(m=mt(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(Z)return new Iu(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!I)return null;switch(I){case"facebook.com":return new Eu(P,S);case"github.com":return new Gv(P,S);case"google.com":return new Bg(P,S);case"twitter.com":return new Nh(P,S,w.screenName||null);case"custom":case"anonymous":return new Iu(P,null);default:return new Iu(P,I,S)}}(_)}class Ks{constructor(m,_,I){this.type=m,this.credential=_,this.auth=I}static _fromIdtoken(m,_){return new Ks("enroll",m,_)}static _fromMfaPendingCredential(m){return new Ks("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,I;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ks._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return Ks._fromIdtoken(m.multiFactorSession.idToken)}return null}}class qa{constructor(m,_,I){this.session=m,this.hints=_,this.signInResolver=I}static _fromError(m,_){const I=On(m),S=_.customData._serverResponse,P=(S.mfaInfo||[]).map(oe=>Sh._fromServerResponse(I,oe));j(S.mfaPendingCredential,I,"internal-error");const Z=Ks._fromMfaPendingCredential(S.mfaPendingCredential);return new qa(Z,P,function(){var oe=(0,u.Z)(function*(Le){const He=yield Le._process(I,Z);delete S.mfaInfo,delete S.mfaPendingCredential;const nt=Object.assign(Object.assign({},S),{idToken:He.idToken,refreshToken:He.refreshToken});switch(_.operationType){case"signIn":const Nt=yield Jr._fromIdTokenResponse(I,_.operationType,nt);return yield I._updateCurrentUser(Nt.user),Nt;case"reauthenticate":return j(_.user,I,"internal-error"),Jr._forOperation(_.user,_.operationType,nt);default:ee(I,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,u.Z)(function*(){return _.signInResolver(m)})()}}function Lh(w,m){var _;const I=(0,B.m9)(w),S=m;return j(m.customData.operationType,I,"argument-error"),j(null===(_=S.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),qa._fromError(I,S)}class Tu{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>Sh._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new Tu(m)}getSession(){var m=this;return(0,u.Z)(function*(){return Ks._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var I=this;return(0,u.Z)(function*(){const S=m,P=yield I.getSession(),Z=yield sn(I.user,S._process(I.user.auth,P,_));return yield I.user._updateTokensIfNecessary(Z),I.user.reload()})()}unenroll(m){var _=this;return(0,u.Z)(function*(){const I="string"==typeof m?m:m.uid,S=yield _.user.getIdToken();try{const P=yield sn(_.user,function $g(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:withdraw",se(w,m))}(_.user.auth,{idToken:S,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Z})=>Z!==I),yield _.user._updateTokensIfNecessary(P),yield _.user.reload()}catch(P){throw P}})()}}const on=new WeakMap;function Du(w){const m=(0,B.m9)(w);return on.has(m)||on.set(m,Tu._fromUser(m)),on.get(m)}const Ys="__sak";class ei{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ys,"1"),this.storage.removeItem(Ys),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Bh=(()=>{class w extends ei{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wb(){const w=(0,B.z$)();return N(w)||Ke(w)}()&&function ji(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const S=this.storage.getItem(I),P=this.localCache[I];S!==P&&_(I,P,S)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((oe,Le,He)=>{this.notifyListeners(oe,He)});const S=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(S);if(_.newValue!==oe)null!==_.newValue?this.storage.setItem(S,_.newValue):this.storage.removeItem(S);else if(this.localCache[S]===_.newValue&&!I)return}const P=()=>{const oe=this.storage.getItem(S);!I&&this.localCache[S]===oe||this.notifyListeners(S,oe)},Z=this.storage.getItem(S);!function hn(){return(0,B.w1)()&&10===document.documentMode}()||Z===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,I){this.localCache[_]=I;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var S=()=>super._set,P=this;return(0,u.Z)(function*(){yield S().call(P,_,I),P.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,S=this;return(0,u.Z)(function*(){const P=yield I().call(S,_);return S.localCache[_]=JSON.stringify(P),P})()}_remove(_){var I=()=>super._remove,S=this;return(0,u.Z)(function*(){yield I().call(S,_),delete S.localCache[_]})()}}return w.type="LOCAL",w})(),Su=(()=>{class w extends ei{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let Hg=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(P=>P.isListeningto(_));if(I)return I;const S=new w(_);return this.receivers.push(S),S}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,u.Z)(function*(){const S=_,{eventId:P,eventType:Z,data:oe}=S.data,Le=I.handlersMap[Z];if(!Le?.size)return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const He=Array.from(Le).map(function(){var Nt=(0,u.Z)(function*(Ur){return Ur(S.origin,oe)});return function(Ur){return Nt.apply(this,arguments)}}()),nt=yield function So(w){return Promise.all(w.map(function(){var m=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return m.apply(this,arguments)}}()))}(He);S.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:nt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Wc(w="",m=10){let _="";for(let I=0;I<m;I++)_+=Math.floor(10*Math.random());return w+_}class Yv{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,I=50){var S=this;return(0,u.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,oe;return new Promise((Le,He)=>{const nt=Wc("",20);P.port1.start();const Nt=setTimeout(()=>{He(new Error("unsupported_event"))},I);oe={messageChannel:P,onMessage(Ur){const Wi=Ur;if(Wi.data.eventId===nt)switch(Wi.data.status){case"ack":clearTimeout(Nt),Z=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Le(Wi.data.response);break;default:clearTimeout(Nt),clearTimeout(Z),He(new Error("invalid_response"))}}},S.handlers.add(oe),P.port1.addEventListener("message",oe.onMessage),S.target.postMessage({eventType:m,eventId:nt,data:_},[P.port2])}).finally(()=>{oe&&S.removeMessageHandler(oe)})})()}}function Jn(){return window}function zg(){return typeof Jn().WorkerGlobalScope<"u"&&"function"==typeof Jn().importScripts}function Au(){return(Au=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Wg="firebaseLocalStorageDb",Ka="firebaseLocalStorage",Ao="fbase_key";class qc{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function $h(w,m){return w.transaction([Ka],m?"readwrite":"readonly").objectStore(Ka)}function qg(){const w=indexedDB.open(Wg,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(Ka,{keyPath:Ao})}catch(S){_(S)}}),w.addEventListener("success",(0,u.Z)(function*(){const I=w.result;I.objectStoreNames.contains(Ka)?m(I):(I.close(),yield function Jv(){const w=indexedDB.deleteDatabase(Wg);return new qc(w).toPromise()}(),m(yield qg()))}))})}function Zg(w,m,_){return ve.apply(this,arguments)}function ve(){return(ve=(0,u.Z)(function*(w,m,_){const I=$h(w,!0).put({[Ao]:m,value:_});return new qc(I).toPromise()})).apply(this,arguments)}function ss(){return(ss=(0,u.Z)(function*(w,m){const _=$h(w,!1).get(m),I=yield new qc(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Hh(w,m){const _=$h(w,!0).delete(m);return new qc(_).toPromise()}const Is=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield qg()),_.db})()}_withRetries(_){var I=this;return(0,u.Z)(function*(){let S=0;for(;;)try{const P=yield I._openDb();return yield _(P)}catch(P){if(S++>3)throw P;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return zg()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=Hg._getInstance(function Gg(){return zg()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,u.Z)(function*(S,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(S,P){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,u.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var I,S;if(_.activeServiceWorker=yield function _t(){return Au.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Yv(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(I=P[0])&&void 0!==I&&I.fulfilled&&null!==(S=P[0])&&void 0!==S&&S.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,u.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Eb(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield qg();return yield Zg(_,Ys,"1"),yield Hh(_,Ys),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,u.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var S=this;return(0,u.Z)(function*(){return S._withPendingWrite((0,u.Z)(function*(){return yield S._withRetries(P=>Zg(P,_,I)),S.localCache[_]=I,S.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,u.Z)(function*(){const S=yield I._withRetries(P=>function Bt(w,m){return ss.apply(this,arguments)}(P,_));return I.localCache[_]=S,S})()}_remove(_){var I=this;return(0,u.Z)(function*(){return I._withPendingWrite((0,u.Z)(function*(){return yield I._withRetries(S=>Hh(S,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const I=yield _._withRetries(Z=>{const oe=$h(Z,!1).getAll();return new qc(oe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:Z,value:oe}of I)P.add(Z),JSON.stringify(_.localCache[Z])!==JSON.stringify(oe)&&(_.notifyListeners(Z,oe),S.push(Z));for(const Z of Object.keys(_.localCache))_.localCache[Z]&&!P.has(Z)&&(_.notifyListeners(Z,null),S.push(Z));return S})()}notifyListeners(_,I){this.localCache[_]=I;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),Sr=1e12;class Mo{constructor(m){this.auth=m,this.counter=Sr,this._widgets=new Map}render(m,_){const I=this.counter;return this._widgets.set(I,new t0(m,this.auth.name,_||{})),this.counter++,I}reset(m){var _;const I=m||Sr;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Sr))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,u.Z)(function*(){var I;return null===(I=_._widgets.get(m||Sr))||void 0===I||I.execute(),""})()}}class t0{constructor(m,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof m?document.getElementById(m):m;j(S,"argument-error",{appName:_}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Kc(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Es=js("rcb"),bb=new un(3e4,6e4);class Jg{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Jn().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return j(function Tb(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Zt(Jn().grecaptcha)?Promise.resolve(Jn().grecaptcha):new Promise((I,S)=>{const P=Jn().setTimeout(()=>{S(de(m,"network-request-failed"))},bb.get());Jn()[Es]=()=>{Jn().clearTimeout(P),delete Jn()[Es];const oe=Jn().grecaptcha;if(!oe||!Zt(oe))return void S(de(m,"internal-error"));const Le=oe.render;oe.render=(He,nt)=>{const Nt=Le(He,nt);return this.counter++,Nt},this.hostLanguage=_,I(oe)},cu(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Es,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),S(de(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Jn().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xg{load(m){return(0,u.Z)(function*(){return new Mo(m)})()}clearedOneInstance(){}}const zh="recaptcha",n0={theme:"light",type:"image"};class em{constructor(m,_=Object.assign({},n0),I){this.parameters=_,this.type=zh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=On(I),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof m?document.getElementById(m):m;j(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xg:new Jg,this.validateStartingState()}verify(){var m=this;return(0,u.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(_)||new Promise(P=>{const Z=oe=>{oe&&(m.tokenChangeListeners.delete(Z),P(oe))};m.tokenChangeListeners.add(Z),m.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof m)m(_);else if("string"==typeof m){const I=Jn()[m];"function"==typeof I&&I(_)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,u.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,u.Z)(function*(){j(en()&&!zg(),m.auth,"internal-error"),yield function Db(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Vs(w){return wo.apply(this,arguments)}(m.auth);j(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gh{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=pt._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function fi(w,m,_){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,u.Z)(function*(w,m,_){const I=On(w),S=yield xu(I,m,(0,B.m9)(_));return new Gh(S,P=>Dh(I,P))})).apply(this,arguments)}function tm(w,m,_){return pn.apply(this,arguments)}function pn(){return(pn=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w);yield za(!1,I,"phone");const S=yield xu(I.auth,m,(0,B.m9)(_));return new Gh(S,P=>pb(I,P))})).apply(this,arguments)}function ut(w,m,_){return mr.apply(this,arguments)}function mr(){return(mr=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w),S=yield xu(I.auth,m,(0,B.m9)(_));return new Gh(S,P=>Nn(I,P))})).apply(this,arguments)}function xu(w,m,_){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,u.Z)(function*(w,m,_){var I;const S=yield _.verify();try{let P;if(j("string"==typeof S,w,"argument-error"),j(_.type===zh,w,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const Z=P.session;if("phoneNumber"in P)return j("enroll"===Z.type,w,"internal-error"),(yield function Kv(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:start",se(w,m))}(w,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{j("signin"===Z.type,w,"internal-error");const oe=(null===(I=P.multiFactorHint)||void 0===I?void 0:I.uid)||P.multiFactorUid;return j(oe,w,"missing-multi-factor-info"),(yield function Kg(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:start",se(w,m))}(w,{mfaPendingCredential:Z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield function bt(w,m){return fn.apply(this,arguments)}(w,{phoneNumber:P.phoneNumber,recaptchaToken:S});return Z}}finally{_._reset()}}),Wh.apply(this,arguments)}function ti(w,m){return Js.apply(this,arguments)}function Js(){return(Js=(0,u.Z)(function*(w,m){yield $c((0,B.m9)(w),m)})).apply(this,arguments)}let vn=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=On(_)}verifyPhoneNumber(_,I){return xu(this.auth,_,(0,B.m9)(I))}static credential(_,I){return pt._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:S}=_;return I&&S?pt._fromTokenResponse(I,S):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function xo(w,m){return m?it(m):(j(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class oa extends Uc{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Hs(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Hs(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Hs(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function wt(w){return xv(w.auth,new oa(w),w.bypassAuthState)}function r0(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),Og(_,new oa(w),w.bypassAuthState)}function nm(w){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,u.Z)(function*(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),$c(_,new oa(w),w.bypassAuthState)})).apply(this,arguments)}class Xs{constructor(m,_,I,S,P=!1){this.auth=m,this.resolver=I,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,u.Z)(function*(I,S){m.pendingPromise={resolve:I,reject:S};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(I,S){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,u.Z)(function*(){const{urlResponse:I,sessionId:S,postBody:P,tenantId:Z,error:oe,type:Le}=m;if(oe)return void _.reject(oe);const He={auth:_.auth,requestUri:I,sessionId:S,tenantId:Z||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)(He))}catch(nt){_.reject(nt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return wt;case"linkViaPopup":case"linkViaRedirect":return nm;case"reauthViaPopup":case"reauthViaRedirect":return r0;default:ee(this.auth,"internal-error")}}resolve(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const eo=new un(2e3,1e4);function pi(w,m,_){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,u.Z)(function*(w,m,_){const I=On(w);he(w,m,Ai);const S=xo(I,_);return new to(I,"signInViaPopup",m,S).executeNotNull()})).apply(this,arguments)}function Qa(w,m,_){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w);he(I.auth,m,Ai);const S=xo(I.auth,_);return new to(I.auth,"reauthViaPopup",m,S,I).executeNotNull()})).apply(this,arguments)}function Pu(w,m,_){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w);he(I.auth,m,Ai);const S=xo(I.auth,_);return new to(I.auth,"linkViaPopup",m,S,I).executeNotNull()})).apply(this,arguments)}let to=(()=>{class w extends Xs{constructor(_,I,S,P,Z){super(_,I,P,Z),this.provider=S,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const I=yield _.execute();return j(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,u.Z)(function*(){Ue(1===_.filter.length,"Popup operations only handle one event");const I=Wc();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(S=>{_.reject(S)}),_.resolver._isIframeWebStorageSupported(_.auth,S=>{S||_.reject(de(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(de(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,S;this.pollId=null!==(S=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(de(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,eo.get())};_()}}return w.currentPopupAction=null,w})();const Qc="pendingRedirect",bs=new Map;class aa extends Xs{constructor(m,_,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,u.Z)(function*(){let I=bs.get(_.auth._key());if(!I){try{const P=(yield function Nu(w,m){return qh.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;I=()=>Promise.resolve(P)}catch(S){I=()=>Promise.reject(S)}bs.set(_.auth._key(),I)}return _.bypassAuthState||bs.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,I=this;return(0,u.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(I,m);if("unknown"!==m.type){if(m.eventId){const S=yield I.auth._redirectUserForId(m.eventId);if(S)return I.user=S,_().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function qh(){return(qh=(0,u.Z)(function*(w,m){const _=Zh(m),I=gi(w);if(!(yield I._isAvailable()))return!1;const S="true"===(yield I._get(_));return yield I._remove(_),S})).apply(this,arguments)}function Jc(w,m){return ca.apply(this,arguments)}function ca(){return(ca=(0,u.Z)(function*(w,m){return gi(w)._set(Zh(m),"true")})).apply(this,arguments)}function Po(){bs.clear()}function Xc(w,m){bs.set(w._key(),m)}function gi(w){return it(w._redirectPersistence)}function Zh(w){return Qn(Qc,w.config.apiKey,w.name)}function Ru(w,m,_){return function Mi(w,m,_){return Gn.apply(this,arguments)}(w,m,_)}function Gn(){return(Gn=(0,u.Z)(function*(w,m,_){const I=On(w);he(w,m,Ai),yield I._initializationPromise;const S=xo(I,_);return yield Jc(S,I),S._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function Jt(w,m,_){return function Xa(w,m,_){return Ar.apply(this,arguments)}(w,m,_)}function Ar(){return(Ar=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w);he(I.auth,m,Ai),yield I.auth._initializationPromise;const S=xo(I.auth,_);yield Jc(S,I.auth);const P=yield Ts(I);return S._openRedirect(I.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function mi(w,m,_){return function el(w,m,_){return tl.apply(this,arguments)}(w,m,_)}function tl(){return(tl=(0,u.Z)(function*(w,m,_){const I=(0,B.m9)(w);he(I.auth,m,Ai),yield I.auth._initializationPromise;const S=xo(I.auth,_);yield za(!1,I,m.providerId),yield Jc(S,I.auth);const P=yield Ts(I);return S._openRedirect(I.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function s0(w,m){return or.apply(this,arguments)}function or(){return(or=(0,u.Z)(function*(w,m){return yield On(w)._initializationPromise,Oo(w,m,!1)})).apply(this,arguments)}function Oo(w,m){return En.apply(this,arguments)}function En(){return(En=(0,u.Z)(function*(w,m,_=!1){const I=On(w),S=xo(I,m),Z=yield new aa(I,S,_).execute();return Z&&!_&&(delete Z.user._redirectEventId,yield I._persistUserIfCurrent(Z.user),yield I._setRedirectUser(null,m)),Z})).apply(this,arguments)}function Ts(w){return ku.apply(this,arguments)}function ku(){return(ku=(0,u.Z)(function*(w){const m=Wc(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class ec{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(_=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function tc(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kh(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var I;if(m.error&&!Kh(m)){const S=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(de(this.auth,S))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const I=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rm(m))}saveEventToCache(m){this.cachedEventUids.add(rm(m)),this.lastProcessedEventTime=Date.now()}}function rm(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Kh({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Yh(w){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,u.Z)(function*(w,m={}){return pe(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Dt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,No=/^https?/;function Ro(){return(Ro=(0,u.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Yh(w);for(const _ of m)try{if(im(_))return}catch{}ee(w,"unauthorized-domain")})).apply(this,arguments)}function im(w){const m=lt(),{protocol:_,hostname:I}=new URL(m);if(w.startsWith("chrome-extension://")){const Z=new URL(w);return""===Z.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&Z.hostname===I}if(!No.test(_))return!1;if(Dt.test(w))return I===w;const S=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(I)}const sm=new un(3e4,6e4);function ni(){const w=Jn().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let ar=null;const am=new un(5e3,15e3),Lu="__/auth/iframe",cm="emulator/auth/iframe",lm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nc(w){const m=w.config;j(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?Wr(m,cm):`https://${w.config.authDomain}/${Lu}`,I={apiKey:m.apiKey,appName:w.name,v:L.SDK_VERSION},S=Uu.get(w.config.apiHost);S&&(I.eid=S);const P=w._getFrameworks();return P.length&&(I.fw=P.join(",")),`${_}?${(0,B.xO)(I).slice(1)}`}function no(){return no=(0,u.Z)(function*(w){const m=yield function ko(w){return ar=ar||function om(w){return new Promise((m,_)=>{var I,S,P;function Z(){ni(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ni(),_(de(w,"network-request-failed"))},timeout:sm.get()})}if(null!==(S=null===(I=Jn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==S&&S.Iframe)m(gapi.iframes.getContext());else{if(null===(P=Jn().gapi)||void 0===P||!P.load){const oe=js("iframefcb");return Jn()[oe]=()=>{gapi.load?Z():_(de(w,"network-request-failed"))},cu(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>_(Le))}Z()}}).catch(m=>{throw ar=null,m})}(w),ar}(w),_=Jn().gapi;return j(_,w,"internal-error"),m.open({where:document.body,url:nc(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lm,dontclear:!0},I=>new Promise(function(){var S=(0,u.Z)(function*(P,Z){yield I.restyle({setHideOnLeave:!1});const oe=de(w,"network-request-failed"),Le=Jn().setTimeout(()=>{Z(oe)},am.get());function He(){Jn().clearTimeout(Le),P(I)}I.ping(He).then(He,()=>{Z(oe)})});return function(P,Z){return S.apply(this,arguments)}}()))}),no.apply(this,arguments)}const nl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ha{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const um="__/auth/handler",Ab="emulator/auth/handler",Qh=encodeURIComponent("fac");function Gi(w,m,_,I,S,P){return ju.apply(this,arguments)}function ju(){return(ju=(0,u.Z)(function*(w,m,_,I,S,P){j(w.config.authDomain,w,"auth-domain-config-required"),j(w.config.apiKey,w,"invalid-api-key");const Z={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:L.SDK_VERSION,eventId:S};if(m instanceof Ai){m.setDefaultLanguage(w.languageCode),Z.providerId=m.providerId||"",(0,B.xb)(m.getCustomParameters())||(Z.customParameters=JSON.stringify(m.getCustomParameters()));for(const[nt,Nt]of Object.entries(P||{}))Z[nt]=Nt}if(m instanceof Yr){const nt=m.getScopes().filter(Nt=>""!==Nt);nt.length>0&&(Z.scopes=nt.join(","))}w.tenantId&&(Z.tid=w.tenantId);const oe=Z;for(const nt of Object.keys(oe))void 0===oe[nt]&&delete oe[nt];const Le=yield w._getAppCheckToken(),He=Le?`#${Qh}=${encodeURIComponent(Le)}`:"";return`${function $u({config:w}){return w.emulator?Wr(w,Ab):`https://${w.authDomain}/${um}`}(w)}?${(0,B.xO)(oe).slice(1)}${He}`})).apply(this,arguments)}const Wn="webStorageSupport",ro=class Jh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Su,this._completeRedirectFn=Oo,this._overrideRedirectResult=Xc}_openPopup(m,_,I,S){var P=this;return(0,u.Z)(function*(){var Z;Ue(null===(Z=P.eventManagers[m._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const oe=yield Gi(m,_,I,lt(),S);return function Sb(w,m,_,I=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),Z=Math.max((window.screen.availWidth-I)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},nl),{width:I.toString(),height:S.toString(),top:P,left:Z}),He=(0,B.z$)().toLowerCase();_&&(oe=x(He)?"_blank":_),O(He)&&(m=m||"http://localhost",Le.scrollbars="yes");const nt=Object.entries(Le).reduce((Ur,[Wi,io])=>`${Ur}${Wi}=${io},`,"");if(function Ct(w=(0,B.z$)()){var m;return Ke(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(He)&&"_self"!==oe)return function Bu(w,m){const _=document.createElement("a");_.href=w,_.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(m||"",oe),new ha(null);const Nt=window.open(m||"",oe,nt);j(Nt,w,"popup-blocked");try{Nt.focus()}catch{}return new ha(Nt)}(m,oe,Wc())})()}_openRedirect(m,_,I,S){var P=this;return(0,u.Z)(function*(){return yield P._originValidation(m),function jh(w){Jn().location.href=w}(yield Gi(m,_,I,lt(),S)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:S,promise:P}=this.eventManagers[_];return S?Promise.resolve(S):(Ue(P,"If manager is not set, promise should be"),P)}const I=this.initAndGetManager(m);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(m){var _=this;return(0,u.Z)(function*(){const I=yield function da(w){return no.apply(this,arguments)}(m),S=new ec(m);return I.register("authEvent",P=>(j(P?.authEvent,m,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:S},_.iframes[m._key()]=I,S})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Wn,{type:Wn},S=>{var P;const Z=null===(P=S?.[0])||void 0===P?void 0:P[Wn];void 0!==Z&&_(!!Z),ee(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ua(w){return Ro.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return xt()||N()||Ke()}};class dm{constructor(m){this.factorId=m}_process(m,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,I);case"signin":return this._finalizeSignIn(m,_.credential);default:return we("unexpected MultiFactorSessionType")}}}class ri extends dm{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new ri(m)}_finalizeEnroll(m,_,I){return function Uh(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:finalize",se(w,m))}(m,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function Yg(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:finalize",se(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rc=(()=>{class w{constructor(){}static assertion(_){return ri._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var c0="@firebase/auth";class Mb{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(I=>{m(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const l0=(0,B.Pz)("authIdTokenMaxAge")||300;let zu=null;const u0=w=>function(){var m=(0,u.Z)(function*(_){const I=_&&(yield _.getIdTokenResult()),S=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(S&&S>l0)return;const P=I?.token;zu!==P&&(zu=P,yield fetch(w,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function fa(w=(0,L.getApp)()){const m=(0,L._getProvider)(w,"auth");if(m.isInitialized())return m.getImmediate();const _=function Ir(w,m){const _=(0,L._getProvider)(w,"auth");if(_.isInitialized()){const S=_.getImmediate(),P=_.getOptions();if((0,B.vZ)(P,m??{}))return S;ee(S,"already-initialized")}return _.initialize({options:m})}(w,{popupRedirectResolver:ro,persistence:[Is,Bh,Su]}),I=(0,B.Pz)("authTokenSyncURL");if(I){const P=u0(I);(function jg(w,m,_){(0,B.m9)(w).beforeAuthStateChanged(m,_)})(_,P,()=>P(_.currentUser)),function Wv(w,m,_,I){(0,B.m9)(w).onIdTokenChanged(m,_,I)}(_,Z=>P(Z))}const S=(0,B.q4)("auth");return S&&fh(_,`http://${S}`),_}!function Xh(w){(0,L._registerComponent)(new Ie.wA("auth",(m,{options:_})=>{const I=m.getProvider("app").getImmediate(),S=m.getProvider("heartbeat"),P=m.getProvider("app-check-internal"),{apiKey:Z,authDomain:oe}=I.options;j(Z&&!Z.includes(":"),"invalid-api-key",{appName:I.name});const Le={apiKey:Z,authDomain:oe,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kc(w)},He=new Io(I,S,P,Le);return function Dv(w,m){const _=m?.persistence||[],I=(Array.isArray(_)?_:[_]).map(it);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(I,m?.popupRedirectResolver)}(He,_),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,I)=>{m.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new Ie.wA("auth-internal",m=>{const _=On(m.getProvider("auth").getImmediate());return new Mb(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(c0,"0.23.2",function xi(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,L.registerVersion)(c0,"0.23.2","esm2017")}("Browser")},9058:(st,Ee,F)=>{F.d(Ee,{$s:()=>it,BH:()=>re,DV:()=>$n,G6:()=>Wr,GJ:()=>wn,L:()=>De,LL:()=>Ne,P0:()=>ot,Pz:()=>de,Sg:()=>he,UG:()=>we,UI:()=>Fr,US:()=>Ie,Wl:()=>ht,Yr:()=>un,ZB:()=>X,ZR:()=>pe,aH:()=>ee,b$:()=>en,cI:()=>tn,dS:()=>Bi,eu:()=>ce,g5:()=>L,gK:()=>qt,gQ:()=>Tt,h$:()=>Fe,hl:()=>ie,hu:()=>B,jU:()=>Ue,m9:()=>Qn,ne:()=>sn,p$:()=>G,pd:()=>mt,q4:()=>tt,r3:()=>rn,ru:()=>lt,tV:()=>U,uI:()=>j,ug:()=>rs,vZ:()=>fr,w1:()=>yn,w9:()=>Mn,xO:()=>ys,xb:()=>bi,z$:()=>ke,zI:()=>le,zd:()=>dt});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},B=function(H,$){if(!H)throw L($)},L=function(H){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},ne=function(H){const $=[];let O=0;for(let N=0;N<H.length;N++){let x=H.charCodeAt(N);x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):55296==(64512&x)&&N+1<H.length&&56320==(64512&H.charCodeAt(N+1))?(x=65536+((1023&x)<<10)+(1023&H.charCodeAt(++N)),$[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,$){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,N=[];for(let x=0;x<H.length;x+=3){const K=H[x],me=x+1<H.length,Be=me?H[x+1]:0,yt=x+2<H.length,Ke=yt?H[x+2]:0;let hn=(15&Be)<<2|Ke>>6,xt=63&Ke;yt||(xt=64,me||(hn=64)),N.push(O[K>>2],O[(3&K)<<4|Be>>4],O[hn],O[xt])}return N.join("")},encodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(H):this.encodeByteArray(ne(H),$)},decodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(H):function(H){const $=[];let O=0,N=0;for(;O<H.length;){const x=H[O++];if(x<128)$[N++]=String.fromCharCode(x);else if(x>191&&x<224){const K=H[O++];$[N++]=String.fromCharCode((31&x)<<6|63&K)}else if(x>239&&x<365){const yt=((7&x)<<18|(63&H[O++])<<12|(63&H[O++])<<6|63&H[O++])-65536;$[N++]=String.fromCharCode(55296+(yt>>10)),$[N++]=String.fromCharCode(56320+(1023&yt))}else{const K=H[O++],me=H[O++];$[N++]=String.fromCharCode((15&x)<<12|(63&K)<<6|63&me)}}return $.join("")}(this.decodeStringToByteArray(H,$))},decodeStringToByteArray(H,$){this.init_();const O=$?this.charToByteMapWebSafe_:this.charToByteMap_,N=[];for(let x=0;x<H.length;){const K=O[H.charAt(x++)],Be=x<H.length?O[H.charAt(x)]:0;++x;const Ke=x<H.length?O[H.charAt(x)]:64;++x;const Ct=x<H.length?O[H.charAt(x)]:64;if(++x,null==K||null==Be||null==Ke||null==Ct)throw new Pe;N.push(K<<2|Be>>4),64!==Ke&&(N.push(Be<<4&240|Ke>>2),64!==Ct&&N.push(Ke<<6&192|Ct))}return N},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class Pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(H){const $=ne(H);return Ie.encodeByteArray($,!0)},De=function(H){return Fe(H).replace(/\./g,"")},U=function(H){try{return Ie.decodeString(H,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function G(H){return X(void 0,H)}function X(H,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return $}for(const O in $)!$.hasOwnProperty(O)||!Oe(O)||(H[O]=X(H[O],$[O]));return H}function Oe(H){return"__proto__"!==H}const Te=()=>{try{return function xe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=H&&U(H[1]);return $&&JSON.parse($)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},tt=H=>{var $,O;return null===(O=null===($=Te())||void 0===$?void 0:$.emulatorHosts)||void 0===O?void 0:O[H]},ot=H=>{const $=tt(H);if(!$)return;const O=$.lastIndexOf(":");if(O<=0||O+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const N=parseInt($.substring(O+1),10);return"["===$[0]?[$.substring(1,O-1),N]:[$.substring(0,O),N]},ee=()=>{var H;return null===(H=Te())||void 0===H?void 0:H.config},de=H=>{var $;return null===($=Te())||void 0===$?void 0:$[`_${H}`]};class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,O)=>{this.resolve=$,this.reject=O})}wrapCallback($){return(O,N)=>{O?this.reject(O):this.resolve(N),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(O):$(O,N))}}}function he(H,$){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const N=$||"demo-project",x=H.iat||0,K=H.sub||H.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${N}`,aud:N,iat:x,exp:x+3600,auth_time:x,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},H);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(me)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function j(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function we(){var H;const $=null===(H=Te())||void 0===H?void 0:H.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function lt(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function en(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function yn(){const H=ke();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function un(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function Wr(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ce(){return new Promise((H,$)=>{try{let O=!0;const N="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(N);x.onsuccess=()=>{x.result.close(),O||self.indexedDB.deleteDatabase(N),H(!0)},x.onupgradeneeded=()=>{O=!1},x.onerror=()=>{var K;$((null===(K=x.error)||void 0===K?void 0:K.message)||"")}}catch(O){$(O)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class pe extends Error{constructor($,O,N){super(O),this.code=$,this.customData=N,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ne.prototype.create)}}class Ne{constructor($,O,N){this.service=$,this.serviceName=O,this.errors=N}create($,...O){const N=O[0]||{},x=`${this.service}/${$}`,K=this.errors[$],me=K?function Qe(H,$){return H.replace(Ve,(O,N)=>{const x=$[N];return null!=x?String(x):`<${N}?>`})}(K,N):"Error";return new pe(x,`${this.serviceName}: ${me} (${x}).`,N)}}const Ve=/\{\$([^}]+)}/g;function tn(H){return JSON.parse(H)}function ht(H){return JSON.stringify(H)}const Kt=function(H){let $={},O={},N={},x="";try{const K=H.split(".");$=tn(U(K[0])||""),O=tn(U(K[1])||""),x=K[2],N=O.d||{},delete O.d}catch{}return{header:$,claims:O,data:N,signature:x}},Mn=function(H){const O=Kt(H).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},wn=function(H){const $=Kt(H).claims;return"object"==typeof $&&!0===$.admin};function rn(H,$){return Object.prototype.hasOwnProperty.call(H,$)}function $n(H,$){if(Object.prototype.hasOwnProperty.call(H,$))return H[$]}function bi(H){for(const $ in H)if(Object.prototype.hasOwnProperty.call(H,$))return!1;return!0}function Fr(H,$,O){const N={};for(const x in H)Object.prototype.hasOwnProperty.call(H,x)&&(N[x]=$.call(O,H[x],x,H));return N}function fr(H,$){if(H===$)return!0;const O=Object.keys(H),N=Object.keys($);for(const x of O){if(!N.includes(x))return!1;const K=H[x],me=$[x];if(Hn(K)&&Hn(me)){if(!fr(K,me))return!1}else if(K!==me)return!1}for(const x of N)if(!O.includes(x))return!1;return!0}function Hn(H){return null!==H&&"object"==typeof H}function ys(H){const $=[];for(const[O,N]of Object.entries(H))Array.isArray(N)?N.forEach(x=>{$.push(encodeURIComponent(O)+"="+encodeURIComponent(x))}):$.push(encodeURIComponent(O)+"="+encodeURIComponent(N));return $.length?"&"+$.join("&"):""}function dt(H){const $={};return H.replace(/^\?/,"").split("&").forEach(N=>{if(N){const[x,K]=N.split("=");$[decodeURIComponent(x)]=decodeURIComponent(K)}}),$}function mt(H){const $=H.indexOf("?");if(!$)return"";const O=H.indexOf("#",$);return H.substring($,O>0?O:void 0)}class Tt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,O){O||(O=0);const N=this.W_;if("string"==typeof $)for(let Ct=0;Ct<16;Ct++)N[Ct]=$.charCodeAt(O)<<24|$.charCodeAt(O+1)<<16|$.charCodeAt(O+2)<<8|$.charCodeAt(O+3),O+=4;else for(let Ct=0;Ct<16;Ct++)N[Ct]=$[O]<<24|$[O+1]<<16|$[O+2]<<8|$[O+3],O+=4;for(let Ct=16;Ct<80;Ct++){const hn=N[Ct-3]^N[Ct-8]^N[Ct-14]^N[Ct-16];N[Ct]=4294967295&(hn<<1|hn>>>31)}let Ke,Yt,x=this.chain_[0],K=this.chain_[1],me=this.chain_[2],Be=this.chain_[3],yt=this.chain_[4];for(let Ct=0;Ct<80;Ct++){Ct<40?Ct<20?(Ke=Be^K&(me^Be),Yt=1518500249):(Ke=K^me^Be,Yt=1859775393):Ct<60?(Ke=K&me|Be&(K|me),Yt=2400959708):(Ke=K^me^Be,Yt=3395469782);const hn=(x<<5|x>>>27)+Ke+yt+Yt+N[Ct]&4294967295;yt=Be,Be=me,me=4294967295&(K<<30|K>>>2),K=x,x=hn}this.chain_[0]=this.chain_[0]+x&4294967295,this.chain_[1]=this.chain_[1]+K&4294967295,this.chain_[2]=this.chain_[2]+me&4294967295,this.chain_[3]=this.chain_[3]+Be&4294967295,this.chain_[4]=this.chain_[4]+yt&4294967295}update($,O){if(null==$)return;void 0===O&&(O=$.length);const N=O-this.blockSize;let x=0;const K=this.buf_;let me=this.inbuf_;for(;x<O;){if(0===me)for(;x<=N;)this.compress_($,x),x+=this.blockSize;if("string"==typeof $){for(;x<O;)if(K[me]=$.charCodeAt(x),++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}else for(;x<O;)if(K[me]=$[x],++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}this.inbuf_=me,this.total_+=O}digest(){const $=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let x=this.blockSize-1;x>=56;x--)this.buf_[x]=255&O,O/=256;this.compress_(this.buf_);let N=0;for(let x=0;x<5;x++)for(let K=24;K>=0;K-=8)$[N]=this.chain_[x]>>K&255,++N;return $}}function sn(H,$){const O=new li(H,$);return O.subscribe.bind(O)}class li{constructor($,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{$(this)}).catch(N=>{this.error(N)})}next($){this.forEachObserver(O=>{O.next($)})}error($){this.forEachObserver(O=>{O.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,O,N){let x;if(void 0===$&&void 0===O&&void 0===N)throw new Error("Missing Observer.");x=function Rt(H,$){if("object"!=typeof H||null===H)return!1;for(const O of $)if(O in H&&"function"==typeof H[O])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:O,complete:N},void 0===x.next&&(x.next=xn),void 0===x.error&&(x.error=xn),void 0===x.complete&&(x.complete=xn);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),K}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,$)}sendOne($,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{O(this.observers[$])}catch(N){typeof console<"u"&&console.error&&console.error(N)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xn(){}function qt(H,$){return`${H} failed: ${$} argument `}const Bi=function(H){const $=[];let O=0;for(let N=0;N<H.length;N++){let x=H.charCodeAt(N);if(x>=55296&&x<=56319){const K=x-55296;N++,B(N<H.length,"Surrogate pair missing trail surrogate."),x=65536+(K<<10)+(H.charCodeAt(N)-56320)}x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):x<65536?($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},rs=function(H){let $=0;for(let O=0;O<H.length;O++){const N=H.charCodeAt(O);N<128?$++:N<2048?$+=2:N>=55296&&N<=56319?($+=4,O++):$+=3}return $},pr=1e3,Ge=2,_e=144e5,Xe=.5;function it(H,$=pr,O=Ge){const N=$*Math.pow(O,H),x=Math.round(Xe*N*(Math.random()-.5)*2);return Math.min(_e,N+x)}function Qn(H){return H&&H._delegate?H._delegate:H}},5555:(st,Ee,F)=>{var u=F(5879);let B=null;function L(){return B}class ge{}const Ie=new u.OlP("DocumentToken");let Pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(De)},providedIn:"platform"})}return n})();const Fe=new u.OlP("Location Initialized");let De=(()=>{class n extends Pe{constructor(){super(),this._doc=(0,u.f3M)(Ie),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Je)},providedIn:"root"})}return n})();const xe=new u.OlP("appBaseHref");let Je=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+X(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+X(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Pe),u.LFG(xe,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ce=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=U(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+X(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+X(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Pe),u.LFG(xe,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})(),Ae=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(ot(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function tt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ot(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=X;static#t=this.joinWithSlash=U;static#n=this.stripTrailingSlash=G;static#r=this.\u0275fac=function(r){return new(r||n)(u.LFG(Oe))};static#i=this.\u0275prov=u.Yz7({token:n,factory:function(){return function Te(){return new Ae((0,u.LFG)(Oe))}()},providedIn:"root"})}return n})();function ot(n){return n.replace(/\/index.html$/,"")}var re=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(re||{}),Ue=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Ue||{});function pe(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Ue.CurrencyDecimal)return t[u.wAp.NumberSymbols][Ue.Decimal];if(e===Ue.CurrencyGroup)return t[u.wAp.NumberSymbols][Ue.Group]}return r}const x=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function na(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Ba(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}const lu=/\s+/,hh=[];let ra=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=hh,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(lu):hh}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(lu):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(lu).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Lc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Io=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Lc(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),On(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{On(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function On(n,e){n.context.$implicit=e.item}let Ir=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Dv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.s_b),u.Y36(u.Rgc))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Dv{constructor(){this.$implicit=null,this.ngIf=null}}function fh(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}function Ti(n,e){return new u.vHH(2100,!1)}class uu{createSubscription(e,t){return(0,u.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,u.rg0)(()=>e.unsubscribe())}}class _h{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const du=new _h,yh=new uu;let hu=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return du;if((0,u.F4k)(t))return yh;throw Ti()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.sBO,16))};static#t=this.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),je=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Di(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Vs(n,e,t){return function xt(n,e,t,r,i,a,l=!1){let f="",g=!1;if(isFinite(n)){let v=function $i(n){let r,i,a,l,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(i<0&&(i=a),i+=+e.slice(a+1),e=e.substring(0,a)):i<0&&(i=e.length),a=0;"0"===e.charAt(a);a++);if(a===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=a,r=[],l=0;a<=f;a++,l++)r[l]=Number(e.charAt(a))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(v=function Bs(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(v));let E=e.minInt,T=e.minFrac,A=e.maxFrac;if(a){const ze=a.match(x);if(null===ze)throw new Error(`${a} is not a valid digit info`);const Re=ze[1],Ye=ze[3],gt=ze[5];null!=Re&&(E=na(Re)),null!=Ye&&(T=na(Ye)),null!=gt?A=na(gt):null!=Ye&&T>A&&(A=T)}!function Zt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const a=Math.min(Math.max(e,i),t);let l=a+n.integerLen,f=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let T=l;T<r.length;T++)r[T]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=a+1),r[0]=0;for(let T=1;T<l;T++)r[T]=0}if(f>=5)if(l-1<0){for(let T=0;T>l;T--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,a);i++)r.push(0);let g=0!==a;const v=e+n.integerLen,E=r.reduceRight(function(T,A,R,W){return W[R]=(A+=T)<10?A:A-10,g&&(0===W[R]&&R>=v?W.pop():g=!1),A>=10?1:0},0);E&&(r.unshift(E),n.integerLen++)}(v,T,A);let R=v.digits,W=v.integerLen;const Q=v.exponent;let J=[];for(g=R.every(ze=>!ze);W<E;W++)R.unshift(0);for(;W<0;W++)R.unshift(0);W>0?J=R.splice(W,R.length):(J=R,R=[0]);const be=[];for(R.length>=e.lgSize&&be.unshift(R.splice(-e.lgSize,R.length).join(""));R.length>e.gSize;)be.unshift(R.splice(-e.gSize,R.length).join(""));R.length&&be.unshift(R.join("")),f=be.join(pe(t,r)),J.length&&(f+=pe(t,i)+J.join("")),Q&&(f+=pe(t,Ue.Exponential)+"+"+Q)}else f=pe(t,Ue.Infinity);return f=n<0&&!g?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function wo(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],a=r[1],l=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=l[0],g=l[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let E=0;E<g.length;E++){const T=g.charAt(E);"0"===T?t.minFrac=t.maxFrac=E+1:"#"===T?t.maxFrac=E+1:t.posSuf+=T}const v=f.split(",");if(t.gSize=v[1]?v[1].length:0,t.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,a){const E=i.length-t.posPre.length-t.posSuf.length,T=a.indexOf("#");t.negPre=a.substring(0,T).replace(/'/g,""),t.negSuf=a.slice(T+E).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Ne(n,e){return(0,u.cg1)(n)[u.wAp.NumberFormats][e]}(e,re.Decimal),pe(e,Ue.MinusSign)),e,Ue.Group,Ue.Decimal,t)}(function zs(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(a){throw Ti()}}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.soG,16))};static#t=this.\u0275pipe=u.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let Tr=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw Ti();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=u.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),zn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();function Si(n){return"server"===n}let Yr=(()=>{class n{static#e=this.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Ws((0,u.LFG)(Ie),window)})}return n})();class Ws{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function xg(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Cs{}class Bg extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Nh extends Bg{static makeCurrent(){!function ne(n){B||(B=n)}(new Nh)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function yb(){return Gc=Gc||document.querySelector("base"),Gc?Gc.getAttribute("href"):null}();return null==t?null:function Wv(n){Rh=Rh||document.createElement("a"),Rh.setAttribute("href",n);const e=Rh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Gc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ba(document.cookie,e)}}let Rh,Gc=null,vb=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const qv=new u.OlP("EventManagerPlugins");let Zv=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new u.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(qv),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class kh{constructor(e){this._doc=e}}const Fh="ng-app-id";let bu=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Si(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Fh}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(Fh),a;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Fh,this.appId),l}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,l=a.get(r)?.elements;l?l.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ie),u.LFG(u.AFp),u.LFG(u.Ojb,8),u.LFG(u.Lbi))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Ks={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qa=/%COMP%/g,ws=new u.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function on(n,e){return e.map(t=>t.replace(qa,n))}let Du=(()=>{class n{constructor(t,r,i,a,l,f,g,v=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=l,this.platformId=f,this.ngZone=g,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=Si(f),this.defaultRenderer=new Ys(t,l,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===u.ifc.ShadowDom&&(r={...r,encapsulation:u.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Bh?i.applyToHost(t):i instanceof hi&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const l=this.doc,f=this.ngZone,g=this.eventManager,v=this.sharedStylesHost,E=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(r.encapsulation){case u.ifc.Emulated:a=new Bh(g,v,r,this.appId,E,l,f,T);break;case u.ifc.ShadowDom:return new Za(g,v,t,r,l,f,this.nonce,T);default:a=new hi(g,v,r,E,l,f,T)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Zv),u.LFG(bu),u.LFG(u.AFp),u.LFG(ws),u.LFG(Ie),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(u.Ojb))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class Ys{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ks[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Vh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Vh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new u.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Ks[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ks[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=L().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Vh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Za extends Ys{constructor(e,t,r,i,a,l,f,g){super(e,a,l,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=on(i.id,i.styles);for(const E of v){const T=document.createElement("style");f&&T.setAttribute("nonce",f),T.textContent=E,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hi extends Ys{constructor(e,t,r,i,a,l,f,g){super(e,a,l,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?on(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Bh extends hi{constructor(e,t,r,i,a,l,f,g){const v=i+"-"+r.id;super(e,t,r,a,l,f,g,v),this.contentAttr=function $g(n){return"_ngcontent-%COMP%".replace(qa,n)}(v),this.hostAttr=function Tu(n){return"_nghost-%COMP%".replace(qa,n)}(v)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ib=(()=>{class n extends kh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ie))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Su=["alt","control","meta","shift"],So={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wc=(()=>{class n extends kh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),Su.forEach(v=>{const E=r.indexOf(v);E>-1&&(r.splice(E,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const g={};return g.domEventName=i,g.fullKey=l,g}static matchEventFullKeyCode(t,r){let i=So[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Su.forEach(l=>{l!==i&&(0,Hg[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ie))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Wg=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function _t(){Nh.makeCurrent()},multi:!0},{provide:Ie,useFactory:function Eb(){return(0,u.RDi)(document),document},deps:[]}]),Qv=new u.OlP(""),Ka=[{provide:u.rWj,useClass:class jg{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new u.vHH(5103,!1);return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(g){l=l||g,a--,0==a&&r(l)};i.forEach(g=>{g.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Ao=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Au(){return new u.qLn},deps:[]},{provide:qv,useClass:Ib,multi:!0,deps:[Ie,u.R0b,u.Lbi]},{provide:qv,useClass:Wc,multi:!0,deps:[Ie]},Du,bu,Zv,{provide:u.FYo,useExisting:Du},{provide:Cs,useClass:vb,deps:[]},[]];let qc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Qv,12))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[...Ao,...Ka],imports:[zn,u.hGG]})}return n})(),ve=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ie))};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function Zg(){return new ve((0,u.LFG)(Ie))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var fi=F(5592),Qs=F(4674),pn=F(2459),ut=F(2096),mr=F(5619);const{isArray:xu}=Array,{getPrototypeOf:Wh,prototype:ti,keys:Js}=Object;function vn(n){if(1===n.length){const e=n[0];if(xu(e))return{args:e,keys:null};if(function xo(n){return n&&"object"==typeof n&&Wh(n)===ti}(e)){const t=Js(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var oa=F(2737),wt=F(7398);const{isArray:r0}=Array;function Yc(n){return(0,wt.U)(e=>function nm(n,e){return r0(e)?n(...e):n(e)}(n,e))}var Xs=F(4564);function eo(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var pi=F(8251),Ya=F(7103);function Qa(...n){const e=(0,Xs.yG)(n),t=(0,Xs.jO)(n),{args:r,keys:i}=vn(n);if(0===r.length)return(0,pn.D)([],e);const a=new fi.y(function Ja(n,e,t=oa.y){return r=>{Pu(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let g=0;g<i;g++)Pu(e,()=>{const v=(0,pn.D)(n[g],e);let E=!1;v.subscribe((0,pi.x)(r,T=>{a[g]=T,E||(E=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>eo(i,l):oa.y));return t?a.pipe(Yc(t)):a}function Pu(n,e,t){n?(0,Ya.f)(t,n,e):e()}const to=(0,F(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Qc=F(7537);function aa(...n){return function bs(){return(0,Qc.J)(1)}()((0,pn.D)(n,(0,Xs.yG)(n)))}var Nu=F(4829);function qh(n){return new fi.y(e=>{(0,Nu.Xf)(n()).subscribe(e)})}var Jc=F(8407);function ca(n,e){const t=(0,Qs.m)(n)?n:()=>n,r=i=>i.error(t());return new fi.y(e?i=>e.schedule(r,0,i):r)}var Po=F(6232),Xc=F(7394),gi=F(9360);function Zh(){return(0,gi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,pi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ru extends fi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,gi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Xc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Xc.w0.EMPTY)}return e}refCount(){return Zh()(this)}}var Mi=F(8645),Gn=F(4664);function Jt(n){return n<=0?()=>Po.E:(0,gi.e)((e,t)=>{let r=0;e.subscribe((0,pi.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Xa(...n){const e=(0,Xs.yG)(n);return(0,gi.e)((t,r)=>{(e?aa(n,t,e):aa(n,t)).subscribe(r)})}function Ar(n,e){return(0,gi.e)((t,r)=>{let i=0;t.subscribe((0,pi.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var mi=F(1631);function el(n){return(0,gi.e)((e,t)=>{let r=!1;e.subscribe((0,pi.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function tl(n=s0){return(0,gi.e)((e,t)=>{let r=!1;e.subscribe((0,pi.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function s0(){return new to}function or(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((i,a)=>n(i,a,r)):oa.y,Jt(1),t?el(e):tl(()=>new to))}function Oo(n,e){return(0,Qs.m)(e)?(0,mi.z)(n,e,1):(0,mi.z)(n,1)}function En(n,e,t){const r=(0,Qs.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,gi.e)((i,a)=>{var l;null===(l=r.subscribe)||void 0===l||l.call(r);let f=!0;i.subscribe((0,pi.x)(a,g=>{var v;null===(v=r.next)||void 0===v||v.call(r,g),a.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),a.complete()},g=>{var v;f=!1,null===(v=r.error)||void 0===v||v.call(r,g),a.error(g)},()=>{var g,v;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(v=r.finalize)||void 0===v||v.call(r)}))}):oa.y}function Ts(n){return(0,gi.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,pi.x)(t,void 0,void 0,l=>{a=(0,Nu.Xf)(n(l,Ts(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function la(n,e){return(0,gi.e)(function ku(n,e,t,r,i){return(a,l)=>{let f=t,g=e,v=0;a.subscribe((0,pi.x)(l,E=>{const T=v++;g=f?n(g,E,T):(f=!0,E),r&&l.next(g)},i&&(()=>{f&&l.next(g),l.complete()})))}}(n,e,arguments.length>=2,!0))}function ec(n){return n<=0?()=>Po.E:(0,gi.e)((e,t)=>{let r=[];e.subscribe((0,pi.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function tc(n){return(0,gi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Yh=F(2420);const Dt="primary",No=Symbol("RouteTitle");class ua{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ro(n){return new ua(n)}function im(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ni(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!om(n[i],e[i]))return!1;return!0}function om(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function ar(n){return n.length>0?n[n.length-1]:null}function ko(n){return function tm(n){return!!n&&(n instanceof fi.y||(0,Qs.m)(n.lift)&&(0,Qs.m)(n.subscribe))}(n)?n:(0,u.QGY)(n)?(0,pn.D)(Promise.resolve(n)):(0,ut.of)(n)}const am={exact:function Uu(n,e,t){if(!ha(n.segments,e.segments)||!nl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Uu(n.children[r],e.children[r],t))return!1;return!0},subset:da},Lu={exact:function lm(n,e){return ni(n,e)},subset:function nc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>om(n[t],e[t]))},ignored:()=>!0};function cm(n,e,t){return am[t.paths](n.root,e.root,t.matrixParams)&&Lu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function da(n,e,t){return no(n,e,e.segments,t)}function no(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ha(i,t)||e.hasChildren()||!nl(i,t,r))}if(n.segments.length===t.length){if(!ha(n.segments,t)||!nl(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!da(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ha(n.segments,i)&&nl(n.segments,i,r)&&n.children[Dt])&&no(n.children[Dt],e,a,r)}}function nl(n,e,t){return e.every((r,i)=>Lu[t](n[i].parameters,r.parameters))}class Fo{constructor(e=new zt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return Ab.serialize(this)}}class zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qh(this)}}class Vu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ro(this.parameters)),this._parameterMap}toString(){return ri(this)}}function ha(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Bu=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new um},providedIn:"root"})}return n})();class um{parse(e){const t=new sc(e);return new Fo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gi(e.root,!0)}`,r=function a0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${$u(t)}=${$u(i)}`).join("&"):`${$u(t)}=${$u(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Wn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ab=new um;function Qh(n){return n.segments.map(e=>ri(e)).join("/")}function Gi(n,e){if(!n.hasChildren())return Qh(n);if(e){const t=n.children[Dt]?Gi(n.children[Dt],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==Dt&&r.push(`${i}:${Gi(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Sb(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Dt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Dt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Dt?[Gi(n.children[Dt],!1)]:[`${i}:${Gi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Dt]?`${Qh(n)}/${t[0]}`:`${Qh(n)}/(${t.join("//")})`}}function ju(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $u(n){return ju(n).replace(/%3B/gi,";")}function Jh(n){return ju(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ro(n){return decodeURIComponent(n)}function dm(n){return ro(n.replace(/\+/g,"%20"))}function ri(n){return`${Jh(n.path)}${function rc(n){return Object.keys(n).map(e=>`;${Jh(e)}=${Jh(n[e])}`).join("")}(n.parameters)}`}const ic=/^[^\/()?;#]+/;function Lo(n){const e=n.match(ic);return e?e[0]:""}const Hu=/^[^\/()?;=#]+/,hm=/^[^=?&#]+/,xi=/^[^&#]+/;class sc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Dt]=new zt(e,t)),r}parseSegment(){const e=Lo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(e),new Vu(ro(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function c0(n){const e=n.match(Hu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Lo(this.remaining);i&&(r=i,this.capture(r))}e[ro(t)]=ro(r)}parseQueryParam(e){const t=function Mb(n){const e=n.match(hm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Xh(n){const e=n.match(xi);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=dm(t),a=dm(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lo(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new u.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Dt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Dt]:new zt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,!1)}}function l0(n){return n.segments.length>0?new zt([],{[Dt]:n}):n}function zu(n){const e={};for(const r of Object.keys(n.children)){const a=zu(n.children[r]);if(r===Dt&&0===a.segments.length&&a.hasChildren())for(const[l,f]of Object.entries(a.children))e[l]=f;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function u0(n){if(1===n.numberOfChildren&&n.children[Dt]){const e=n.children[Dt];return new zt(n.segments.concat(e.segments),e.children)}return n}(new zt(n.segments,e))}function fa(n){return n instanceof Fo}function m(n){let e;const i=l0(function t(a){const l={};for(const g of a.children){const v=t(g);l[g.outlet]=v}const f=new zt(a.url,l);return a===n&&(e=f),f}(n.root));return e??i}function _(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return P(i,i,i,t,r);const a=function Le(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oe(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([g,v])=>{f[g]="string"==typeof v?v.split("/"):v}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new oe(t,e,r)}(e);if(a.toRoot())return P(i,i,new zt([],{}),t,r);const l=function nt(n,e,t){if(n.isAbsolute)return new He(e,!0,0);if(!t)return new He(e,!1,NaN);if(null===t.parent)return new He(t,!0,0);const r=I(n.commands[0])?0:1;return function Nt(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new u.vHH(4005,!1);i=r.segments.length}return new He(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),f=l.processChildren?io(l.segmentGroup,l.index,a.commands):Wi(l.segmentGroup,l.index,a.commands);return P(i,l.segmentGroup,f,t,r)}function I(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function S(n){return"object"==typeof n&&null!=n&&n.outlets}function P(n,e,t,r,i){let l,a={};r&&Object.entries(r).forEach(([g,v])=>{a[g]=Array.isArray(v)?v.map(E=>`${E}`):`${v}`}),l=n===e?t:Z(n,e,t);const f=l0(zu(l));return new Fo(f,a,i)}function Z(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:Z(a,e,t)}),new zt(n.segments,r)}class oe{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&I(r[0]))throw new u.vHH(4003,!1);const i=r.find(S);if(i&&i!==ar(r))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class He{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Wi(n,e,t){if(n||(n=new zt([],{})),0===n.segments.length&&n.hasChildren())return io(n,e,t);const r=function fm(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(S(f))break;const g=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!Gu(g,v,l))return a;r+=2}else{if(!Gu(g,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new zt(n.segments.slice(0,r.pathIndex),{});return a.children[Dt]=new zt(n.segments.slice(r.pathIndex),n.children),io(a,0,i)}return r.match&&0===i.length?new zt(n.segments,{}):r.match&&!n.hasChildren()?rl(n,e,t):r.match?io(n,0,i):rl(n,e,t)}function io(n,e,t){if(0===t.length)return new zt(n.segments,{});{const r=function Ur(n){return S(n[0])?n[0].outlets:{[Dt]:n}}(t),i={};if(Object.keys(r).some(a=>a!==Dt)&&n.children[Dt]&&1===n.numberOfChildren&&0===n.children[Dt].segments.length){const a=io(n.children[Dt],e,t);return new zt(n.segments,a.children)}return Object.entries(r).forEach(([a,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[a]=Wi(n.children[a],e,l))}),Object.entries(n.children).forEach(([a,l])=>{void 0===r[a]&&(i[a]=l)}),new zt(n.segments,i)}}function rl(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(S(a)){const g=pa(a.outlets);return new zt(r,g)}if(0===i&&I(t[0])){r.push(new Vu(n.segments[e].path,ga(t[0]))),i++;continue}const l=S(a)?a.outlets[Dt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&I(f)?(r.push(new Vu(l,ga(f))),i+=2):(r.push(new Vu(l,{})),i++)}return new zt(r,{})}function pa(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=rl(new zt([],{}),0,r))}),e}function ga(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Gu(n,e,t){return n==t.path&&ni(e,t.parameters)}const il="imperative";class qi{constructor(e,t){this.id=e,this.url=t}}class oc extends qi{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class so extends qi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sl extends qi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Uo extends qi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Wu extends qi{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ef extends qi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xb extends qi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OM extends qi{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pb extends qi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oL extends qi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ob{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class aL{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class NM{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RM{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class d0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cL{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class tf{}class Nb{constructor(e){this.url=e}}class lL{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new pm,this.attachRef=null}}let pm=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new lL,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class FM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=h0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=h0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qu(e,this._root).map(t=>t.value)}}function h0(n,e){if(n===e.value)return e;for(const t of e.children){const r=h0(n,t);if(r)return r}return null}function qu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=qu(n,t);if(r.length)return r.unshift(e),r}return[]}class Ds{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ol(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class f0 extends FM{constructor(e,t){super(e),this.snapshot=t,m0(this,e)}toString(){return this.snapshot.toString()}}function p0(n,e){const t=function Zu(n,e){const l=new cl([],{},{},"",{},Dt,e,null,{});return new nf("",new Ds(l,[]))}(0,e),r=new mr.X([new Vu("",{})]),i=new mr.X({}),a=new mr.X({}),l=new mr.X({}),f=new mr.X(""),g=new al(r,i,l,f,a,Dt,e,t.root);return g.snapshot=t.root,new f0(new Ds(g,[]),t)}class al{constructor(e,t,r,i,a,l,f,g){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=l,this.component=f,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,wt.U)(v=>v[No]))??(0,ut.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>Ro(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>Ro(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function g0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function gm(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cl{get title(){return this.data?.[No]}constructor(e,t,r,i,a,l,f,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=g,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ro(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class nf extends FM{constructor(e,t){super(t),this.url=e,m0(this,t)}toString(){return Rb(this._root)}}function m0(n,e){e.value._routerState=n,e.children.forEach(t=>m0(n,t))}function Rb(n){const e=n.children.length>0?` { ${n.children.map(Rb).join(", ")} } `:"";return`${n.value}${e}`}function _0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ni(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ni(e.params,t.params)||n.paramsSubject.next(t.params),function sm(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ni(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ni(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function mm(n,e){const t=ni(n.params,e.params)&&function o0(n,e){return ha(n,e)&&n.every((t,r)=>ni(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||mm(n.parent,e.parent))}let rf=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dt,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(pm),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb),this.inputBinder=(0,u.f3M)(_m,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new u.vHH(4013,!1);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new LM(t,f,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]})}return n})();class LM{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===al?this.route:e===pm?this.childContexts:this.parent.get(e,t)}}const _m=new u.OlP("");let kb=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Qa([r.queryParams,r.params,r.data]).pipe((0,Gn.w)(([a,l,f],g)=>(f={...a,...l,...f},0===g?(0,ut.of)(f):Promise.resolve(f)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,u.qFp)(r.component);if(l)for(const{templateName:f}of l.inputs)t.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function sf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function UM(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return sf(n,r,i);return sf(n,r)})}(n,e,t);return new Ds(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>sf(n,f)),l}}const r=function Zi(n){return new al(new mr.X(n.url),new mr.X(n.params),new mr.X(n.queryParams),new mr.X(n.fragment),new mr.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>sf(n,a));return new Ds(r,i)}}const af="ngNavigationCancelingError";function y0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=fa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ym(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function ym(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[af]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ku(n){return n&&n[af]}let v0=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(r,i){1&r&&u._UZ(0,"router-outlet")},dependencies:[rf],encapsulation:2})}return n})();function cf(n){const e=n.children&&n.children.map(cf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Dt&&(t.component=v0),t}function os(n){return n.outlet||Dt}function ma(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Ub{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),_0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ol(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ol(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ol(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=ol(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new cL(a.value.snapshot))}),e.children.length&&this.forwardEvent(new RM(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(_0(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),_0(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=ma(i.snapshot);l.attachRef=null,l.route=i,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class C0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class lf{constructor(e,t){this.component=e,this.route=t}}function Yu(n,e,t){const r=n._root;return ul(r,e?e._root:null,t,[r.value])}function ll(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:r}function ul(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ol(e);return n.children.forEach(l=>{(function Cm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const g=function qM(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ha(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ha(n.url,e.url)||!ni(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mm(n,e)||!ni(n.queryParams,e.queryParams);default:return!mm(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new C0(r)):(a.data=l.data,a._resolvedData=l._resolvedData),ul(n,e,a.component?f?f.children:null:t,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new lf(f.outlet.component,l))}else l&&uf(e,f,i),i.canActivateChecks.push(new C0(r)),ul(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Object.entries(a).forEach(([l,f])=>uf(f,t.getContext(l),i)),i}function uf(n,e,t){const r=ol(n),i=n.value;Object.entries(r).forEach(([a,l])=>{uf(l,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new lf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function df(n){return"function"==typeof n}function jb(n){return n instanceof to||"EmptyError"===n?.name}const Qu=Symbol("INITIAL_VALUE");function dl(){return(0,Gn.w)(n=>Qa(n.map(e=>e.pipe(Jt(1),Xa(Qu)))).pipe((0,wt.U)(e=>{for(const t of e)if(!0!==t){if(t===Qu)return Qu;if(!1===t||t instanceof Fo)return t}return!0}),Ar(e=>e!==Qu),Jt(1)))}function I0(n){return(0,Jc.z)(En(e=>{if(fa(e))throw y0(0,e)}),(0,wt.U)(e=>!0===e))}class hf{constructor(e){this.segmentGroup=e||null}}class ff{constructor(e){this.urlTree=e}}function Vo(n){return ca(new hf(n))}function b0(n){return ca(new ff(n))}class Wb{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new u.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,ut.of)(r);if(i.numberOfChildren>1||!i.children[Dt])return ca(new u.vHH(4e3,!1));i=i.children[Dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Fo(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const f=a.substring(1);r[i]=t[f]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Object.entries(t.children).forEach(([f,g])=>{l[f]=this.createSegmentGroup(e,g,r,i)}),new zt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new u.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const pf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gf(n,e,t,r,i){const a=D0(n,e,t);return a.matched?(r=function Lb(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function E0(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,ut.of)(!0);const a=i.map(l=>{const f=ll(l,n);return ko(function w0(n){return n&&df(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,ut.of)(a).pipe(dl(),I0())}(r,e,t).pipe((0,wt.U)(l=>!0===l?a:{...pf}))):(0,ut.of)(a)}function D0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...pf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||im)(t,n,e);if(!i)return{...pf};const a={};Object.entries(i.posParams??{}).forEach(([f,g])=>{a[f]=g.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function S0(n,e,t,r){return t.length>0&&function nx(n,e,t){return t.some(r=>mf(n,e,r)&&os(r)!==Dt)}(n,t,r)?{segmentGroup:new zt(e,tx(r,new zt(t,n.children))),slicedSegments:[]}:0===t.length&&function qb(n,e,t){return t.some(r=>mf(n,e,r))}(n,t,r)?{segmentGroup:new zt(n.segments,ex(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new zt(n.segments,n.children),slicedSegments:t}}function ex(n,e,t,r,i){const a={};for(const l of r)if(mf(n,t,l)&&!i[os(l)]){const f=new zt([],{});a[os(l)]=f}return{...i,...a}}function tx(n,e){const t={};t[Dt]=e;for(const r of n)if(""===r.path&&os(r)!==Dt){const i=new zt([],{});t[os(r)]=i}return t}function mf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class rx{constructor(e,t,r,i,a,l,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new Wb(this.urlSerializer,this.urlTree)}noMatchError(e){return new u.vHH(4002,!1)}recognize(){const e=S0(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Dt).pipe(Ts(t=>{if(t instanceof ff)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof hf?this.noMatchError(t):t}),(0,wt.U)(t=>{const r=new cl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dt,this.rootComponentType,null,{}),i=new Ds(r,t),a=new nf("",i),l=function w(n,e,t=null,r=null){return _(m(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(a._root),{state:a,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Dt).pipe(Ts(r=>{throw r instanceof hf?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=g0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,pn.D)(i).pipe(Oo(a=>{const l=r.children[a],f=function GM(n,e){const t=n.filter(r=>os(r)===e);return t.push(...n.filter(r=>os(r)!==e)),t}(t,a);return this.processSegmentGroup(e,f,l,a)}),la((a,l)=>(a.push(...l),a)),el(null),function rm(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((i,a)=>n(i,a,r)):oa.y,ec(1),t?el(e):tl(()=>new to))}(),(0,mi.z)(a=>{if(null===a)return Vo(r);const l=Zb(a);return function ix(n){n.sort((e,t)=>e.value.outlet===Dt?-1:t.value.outlet===Dt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,ut.of)(l)}))}processSegment(e,t,r,i,a,l){return(0,pn.D)(t).pipe(Oo(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,a,l).pipe(Ts(g=>{if(g instanceof hf)return(0,ut.of)(null);throw g}))),or(f=>!!f),Ts(f=>{if(jb(f))return function A0(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,ut.of)([]):Vo(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,a,l,f){return function bm(n,e,t,r){return!!(os(n)===r||r!==Dt&&mf(e,t,n))&&("**"===n.path||D0(e,n,t).matched)}(r,i,a,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,l,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,l):Vo(i):Vo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?b0(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,mi.z)(l=>{const f=new zt(l,{});return this.processSegment(e,t,f,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:g,remainingSegments:v,positionalParamSegments:E}=D0(t,i,a);if(!f)return Vo(t);const T=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,E);return i.redirectTo.startsWith("/")?b0(T):this.applyRedirects.lineralizeSegments(i,T).pipe((0,mi.z)(A=>this.processSegment(e,r,t,A.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,l){let f;if("**"===r.path){const g=i.length>0?ar(i).parameters:{},v=new cl(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yb(r),os(r),r.component??r._loadedComponent??null,r,fl(r));f=(0,ut.of)({snapshot:v,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=gf(t,r,i,e).pipe((0,wt.U)(({matched:g,consumedSegments:v,remainingSegments:E,parameters:T})=>g?{snapshot:new cl(v,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yb(r),os(r),r.component??r._loadedComponent??null,r,fl(r)),consumedSegments:v,remainingSegments:E}:null));return f.pipe((0,Gn.w)(g=>null===g?Vo(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Gn.w)(({routes:v})=>{const E=r._loadedInjector??e,{snapshot:T,consumedSegments:A,remainingSegments:R}=g,{segmentGroup:W,slicedSegments:Q}=S0(t,A,R,v);if(0===Q.length&&W.hasChildren())return this.processChildren(E,v,W).pipe((0,wt.U)(be=>null===be?null:[new Ds(T,be)]));if(0===v.length&&0===Q.length)return(0,ut.of)([new Ds(T,[])]);const J=os(r)===a;return this.processSegment(E,v,W,Q,J?Dt:a,!0).pipe((0,wt.U)(be=>[new Ds(T,be)]))}))))}getChildConfig(e,t,r){return t.children?(0,ut.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,ut.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function Gb(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,ut.of)(!0);const a=i.map(l=>{const f=ll(l,n);return ko(function KM(n){return n&&df(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,ut.of)(a).pipe(dl(),I0())}(e,t,r).pipe((0,mi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(En(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Em(n){return ca(ym(!1,3))}())):(0,ut.of)({routes:[],injector:e})}}function pL(n){const e=n.value.routeConfig;return e&&""===e.path}function Zb(n){const e=[],t=new Set;for(const r of n){if(!pL(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Zb(r.children);e.push(new Ds(r.value,i))}return e.filter(r=>!t.has(r))}function Yb(n){return n.data||{}}function fl(n){return n.resolve||{}}function tT(n){return"string"==typeof n.title||null===n.title}function x0(n){return(0,Gn.w)(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,wt.U)(()=>e)):(0,ut.of)(e)})}const Xu=new u.OlP("ROUTES");let P0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,ut.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ko(t.loadComponent()).pipe((0,wt.U)(ed),En(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),tc(()=>{this.componentLoaders.delete(t)})),i=new Ru(r,()=>new Mi.x).pipe(Zh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,ut.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function sx(n,e,t,r){return ko(n.loadChildren()).pipe((0,wt.U)(ed),(0,mi.z)(i=>i instanceof u.YKP||Array.isArray(i)?(0,ut.of)(i):(0,pn.D)(e.compileModuleAsync(i))),(0,wt.U)(i=>{r&&r(n);let a,l,f=!1;return Array.isArray(i)?(l=i,!0):(a=i.create(t).injector,l=a.get(Xu,[],{optional:!0,self:!0}).flat()),{routes:l.map(cf),injector:a}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(tc(()=>{this.childrenLoaders.delete(r)})),l=new Ru(a,()=>new Mi.x).pipe(Zh());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ed(n){return function ac(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Dm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Mi.x,this.transitionAbortSubject=new Mi.x,this.configLoader=(0,u.f3M)(P0),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(Bu),this.rootContexts=(0,u.f3M)(pm),this.inputBindingEnabled=null!==(0,u.f3M)(_m,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ut.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new aL(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Ob(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new mr.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:il,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ar(a=>0!==a.id),(0,wt.U)(a=>({...a,extractedUrl:t.urlHandlingStrategy.extract(a.rawUrl)})),(0,Gn.w)(a=>{this.currentTransition=a;let l=!1,f=!1;return(0,ut.of)(a).pipe(En(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Gn.w)(g=>{const v=g.currentBrowserUrl.toString(),E=!t.navigated||g.extractedUrl.toString()!==v||v!==g.currentUrlTree.toString();if(!E&&"reload"!==(g.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new Uo(g.id,this.urlSerializer.serialize(g.rawUrl),A,0)),g.resolve(null),Po.E}if(t.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return(0,ut.of)(g).pipe((0,Gn.w)(A=>{const R=this.transitions?.getValue();return this.events.next(new oc(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),R!==this.transitions?.getValue()?Po.E:Promise.resolve(A)}),function Tm(n,e,t,r,i,a){return(0,mi.z)(l=>function Ju(n,e,t,r,i,a,l="emptyOnly"){return new rx(n,e,t,r,i,l,a).recognize()}(n,e,t,r,l.extractedUrl,i,a).pipe((0,wt.U)(({state:f,tree:g})=>({...l,targetSnapshot:f,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),En(A=>{a.targetSnapshot=A.targetSnapshot,a.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects};const R=new ef(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(R)}));if(E&&t.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:A,extractedUrl:R,source:W,restoredState:Q,extras:J}=g,be=new oc(A,this.urlSerializer.serialize(R),W,Q);this.events.next(be);const ze=p0(0,this.rootComponentType).snapshot;return this.currentTransition=a={...g,targetSnapshot:ze,urlAfterRedirects:R,extras:{...J,skipLocationChange:!1,replaceUrl:!1}},(0,ut.of)(a)}{const A="";return this.events.next(new Uo(g.id,this.urlSerializer.serialize(g.extractedUrl),A,1)),g.resolve(null),Po.E}}),En(g=>{const v=new xb(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}),(0,wt.U)(g=>(this.currentTransition=a={...g,guards:Yu(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},a)),function hl(n,e){return(0,mi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?(0,ut.of)({...t,guardsResult:!0}):function $b(n,e,t,r){return(0,pn.D)(n).pipe((0,mi.z)(i=>function zb(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,ut.of)(!0);const l=a.map(f=>{const g=ma(e)??i,v=ll(f,g);return ko(function wm(n){return n&&df(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):g.runInContext(()=>v(n,e,t,r))).pipe(or())});return(0,ut.of)(l).pipe(dl())}(i.component,i.route,t,e,r)),or(i=>!0!==i,!0))}(l,r,i,n).pipe((0,mi.z)(f=>f&&function ZM(n){return"boolean"==typeof n}(f)?function Hb(n,e,t,r){return(0,pn.D)(e).pipe(Oo(i=>aa(function fL(n,e){return null!==n&&e&&e(new NM(n)),(0,ut.of)(!0)}(i.route.parent,r),function JM(n,e){return null!==n&&e&&e(new d0(n)),(0,ut.of)(!0)}(i.route,r),function XM(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function vm(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>qh(()=>{const f=l.guards.map(g=>{const v=ma(l.node)??t,E=ll(g,v);return ko(function Vb(n){return n&&df(n.canActivateChild)}(E)?E.canActivateChild(r,n):v.runInContext(()=>E(r,n))).pipe(or())});return(0,ut.of)(f).pipe(dl())}));return(0,ut.of)(a).pipe(dl())}(n,i.path,t),function Im(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ut.of)(!0);const i=r.map(a=>qh(()=>{const l=ma(e)??t,f=ll(a,l);return ko(function YM(n){return n&&df(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(or())}));return(0,ut.of)(i).pipe(dl())}(n,i.route,t))),or(i=>!0!==i,!0))}(r,a,n,e):(0,ut.of)(f)),(0,wt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,g=>this.events.next(g)),En(g=>{if(a.guardsResult=g.guardsResult,fa(g.guardsResult))throw y0(0,g.guardsResult);const v=new OM(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(v)}),Ar(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",3),!1)),x0(g=>{if(g.guards.canActivateChecks.length)return(0,ut.of)(g).pipe(En(v=>{const E=new Pb(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(E)}),(0,Gn.w)(v=>{let E=!1;return(0,ut.of)(v).pipe(function M0(n,e){return(0,mi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,ut.of)(t);let a=0;return(0,pn.D)(i).pipe(Oo(l=>function Qb(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!tT(i)&&(a[No]=i.title),function Jb(n,e,t,r){const i=function Xb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,ut.of)({});const a={};return(0,pn.D)(i).pipe((0,mi.z)(l=>function eT(n,e,t,r){const i=ma(e)??r,a=ll(n,i);return ko(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(or(),En(f=>{a[l]=f}))),ec(1),function Kh(n){return(0,wt.U)(()=>n)}(a),Ts(l=>jb(l)?Po.E:ca(l)))}(a,n,e,r).pipe((0,wt.U)(l=>(n._resolvedData=l,n.data=g0(n,t).resolve,i&&tT(i)&&(n.data[No]=i.title),null)))}(l.route,r,n,e)),En(()=>a++),ec(1),(0,mi.z)(l=>a===i.length?(0,ut.of)(t):Po.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),En({next:()=>E=!0,complete:()=>{E||this.cancelNavigationTransition(v,"",2)}}))}),En(v=>{const E=new oL(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(E)}))}),x0(g=>{const v=E=>{const T=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(E.routeConfig).pipe(En(A=>{E.component=A}),(0,wt.U)(()=>{})));for(const A of E.children)T.push(...v(A));return T};return Qa(v(g.targetSnapshot.root)).pipe(el(),Jt(1))}),x0(()=>this.afterPreactivation()),(0,wt.U)(g=>{const v=function Fb(n,e,t){const r=sf(n,e._root,t?t._root:void 0);return new f0(r,e)}(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=a={...g,targetRouterState:v},a}),En(()=>{this.events.next(new tf)}),((n,e,t,r)=>(0,wt.U)(i=>(new Ub(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),Jt(1),En({next:g=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new so(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),t.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{l=!0}}),function Fu(n){return(0,gi.e)((e,t)=>{(0,Nu.Xf)(n).subscribe((0,pi.x)(t,()=>t.complete(),Yh.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(En(g=>{throw g}))),tc(()=>{l||f||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),Ts(g=>{if(f=!0,Ku(g))this.events.next(new sl(a.id,this.urlSerializer.serialize(a.extractedUrl),g.message,g.cancellationCode)),function _i(n){return Ku(n)&&fa(n.url)}(g)?this.events.next(new Nb(g.url)):a.resolve(!1);else{this.events.next(new Wu(a.id,this.urlSerializer.serialize(a.extractedUrl),g,a.targetSnapshot??void 0));try{a.resolve(t.errorHandler(g))}catch(v){a.reject(v)}}return Po.E}))}))}cancelNavigationTransition(t,r,i){const a=new sl(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ox(n){return n!==il}let ax=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Dt);return r}getResolvedTitleForRoute(t){return t.data[No]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(gL)},providedIn:"root"})}return n})(),gL=(()=>{class n extends ax{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(ve))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(nT)},providedIn:"root"})}return n})();class _L{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let nT=(()=>{class n extends _L{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Sm=new u.OlP("",{providedIn:"root",factory:()=>({})});let cx=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(lx)},providedIn:"root"})}return n})(),lx=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _f=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(_f||{});function Am(n,e){n.events.pipe(Ar(t=>t instanceof so||t instanceof sl||t instanceof Wu||t instanceof Uo),(0,wt.U)(t=>t instanceof so||t instanceof Uo?_f.COMPLETE:t instanceof sl&&(0===t.code||1===t.code)?_f.REDIRECTING:_f.FAILED),Ar(t=>t!==_f.REDIRECTING),Jt(1)).subscribe(()=>{e()})}function _a(n){throw n}function yf(n,e,t){return e.parse("/")}const rT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xn=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this._events=new Mi.x,this.options=(0,u.f3M)(Sm,{optional:!0})||{},this.pendingTasks=(0,u.f3M)(u.HDt),this.errorHandler=this.options.errorHandler||_a,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||yf,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(cx),this.routeReuseStrategy=(0,u.f3M)(mL),this.titleStrategy=(0,u.f3M)(ax),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,u.f3M)(Xu,{optional:!0})?.flat()??[],this.navigationTransitions=(0,u.f3M)(Dm),this.urlSerializer=(0,u.f3M)(Bu),this.location=(0,u.f3M)(Ae),this.componentInputBindingEnabled=!!(0,u.f3M)(_m,{optional:!0}),this.eventsSubscription=new Xc.w0,this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Fo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=p0(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(ux(r)&&this._events.next(r));if(r instanceof oc)ox(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Uo)this.rawUrlTree=i.rawUrl;else if(r instanceof ef){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(a,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof tf)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof sl)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof Nb){const a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ox(i.source)};this.scheduleNavigation(a,il,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Wu&&this.restoreHistory(i,!0),r instanceof so&&(this.navigated=!0),ux(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),il,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(cf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:g}=r,v=g?this.currentUrlTree.fragment:l;let T,E=null;switch(f){case"merge":E={...this.currentUrlTree.queryParams,...a};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=a||null}null!==E&&(E=this.removeEmptyProps(E));try{T=m(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),T=this.currentUrlTree.root}return _(T,t,E,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=fa(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,il,null,r)}navigate(t,r={skipLocationChange:!1}){return function yL(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new u.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...rT}:!1===r?{...iT}:r,fa(t))return cm(this.currentUrlTree,t,i);const a=this.parseUrl(t);return cm(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,g,v;l?(f=l.resolve,g=l.reject,v=l.promise):v=new Promise((T,A)=>{f=T,g=A});const E=this.pendingTasks.add();return Am(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(E))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:a,resolve:f,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ux(n){return!(n instanceof tf||n instanceof Nb)}let Mm=(()=>{class n{constructor(t,r,i,a,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new Mi.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const g=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof so&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Xn),u.Y36(al),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Oe))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&u.NdJ("click",function(l){return i.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&r&&u.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",u.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",u.VuI],replaceUrl:["replaceUrl","replaceUrl",u.VuI],routerLink:"routerLink"},standalone:!0,features:[u.Xq5,u.TTD]})}return n})(),vf=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,a,l){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof so&&this.update()})}ngAfterContentInit(){(0,ut.of)(this.links.changes,(0,ut.of)(null)).pipe((0,Qc.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,pn.D)(t).pipe((0,Qc.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function O0(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Xn),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(Mm,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,a){if(1&r&&u.Suo(a,Mm,5),2&r){let l;u.iGM(l=u.CRH())&&(i.links=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[u.TTD]})}return n})();class dx{}let fx=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ar(t=>t instanceof so),Oo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,u.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,pn.D)(i).pipe((0,Qc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,ut.of)(null);const a=i.pipe((0,mi.z)(l=>null===l?(0,ut.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,pn.D)([a,l]).pipe((0,Qc.J)())}return a})}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Xn),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(dx),u.LFG(P0))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const N0=new u.OlP("");let sT=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof oc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof so?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Uo&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof kM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new kM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){u.$Z()};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function Ss(n,e){return{\u0275kind:n,\u0275providers:e}}function aT(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const r=n.get(Xn),i=n.get(cT);1===n.get(wf)&&r.initialNavigation(),n.get(uT,null,u.XFs.Optional)?.setUpPreloading(),n.get(N0,null,u.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const cT=new u.OlP("",{factory:()=>new Mi.x}),wf=new u.OlP("",{providedIn:"root",factory:()=>1}),uT=new u.OlP("");function mx(n){return Ss(0,[{provide:uT,useExisting:fx},{provide:dx,useExisting:n}])}const td=new u.OlP("ROUTER_FORROOT_GUARD"),dT=[Ae,{provide:Bu,useClass:um},Xn,pm,{provide:al,useFactory:function R0(n){return n.routerState.root},deps:[Xn]},P0,[]];function hT(){return new u.PXZ("Router",Xn)}let xm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[dT,[],{provide:Xu,multi:!0,useValue:t},{provide:td,useFactory:pT,deps:[[Xn,new u.FiY,new u.tp0]]},{provide:Sm,useValue:r||{}},r?.useHash?{provide:Oe,useClass:Ce}:{provide:Oe,useClass:Je},{provide:N0,useFactory:()=>{const n=(0,u.f3M)(Yr),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(Sm),r=(0,u.f3M)(Dm),i=(0,u.f3M)(Bu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new sT(i,r,n,e,t)}},r?.preloadingStrategy?mx(r.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:hT},r?.initialNavigation?Pm(r):[],r?.bindToComponentInputs?Ss(8,[kb,{provide:_m,useExisting:kb}]).\u0275providers:[],[{provide:vx,useFactory:aT},{provide:u.tb,multi:!0,useExisting:vx}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Xu,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(td,8))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();function pT(n){return"guarded"}function Pm(n){return["disabled"===n.initialNavigation?Ss(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(Xn);return()=>{e.setUpLocationChangeListener()}}},{provide:wf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ss(2,[{provide:wf,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(Fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Xn),a=e.get(cT);Am(i,()=>{r(!0)}),e.get(Dm).afterPreactivation=()=>(r(!0),a.closed?(0,ut.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const vx=new u.OlP("");var V=F(5861),Om=F(305);function oo(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const a=new Om.Hp({next:l=>{r(l),a.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new to)}});n.subscribe(a)})}class L0 extends Xc.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const pl={setInterval(n,e,...t){const{delegate:r}=pl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=pl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Bo=F(9039);class Ef extends L0{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(a,this.id,t),this}requestAsyncId(e,t,r=0){return pl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&pl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(a){r=!0,i=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Bo.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const bf={now:()=>(bf.delegate||Date).now(),delegate:void 0};class Tf{constructor(e,t=Tf.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Tf.now=bf.now;class mT extends Tf{constructor(e,t=Tf.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const U0=new mT(Ef);var bn=F(7592);(0,bn.registerVersion)("firebase","9.23.0","app");var _r=F(4537),Pi=F(7879),z=F(9058),_T=F(1878);class V0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function bL(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const yT="@firebase/app",gl=new Pi.Yd("@firebase/app"),Fm="[DEFAULT]",AL={[yT]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ml=new Map,_l=new Map;function Z0(n,e){try{n.container.addComponent(e)}catch(t){gl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ki(n){const e=n.name;if(_l.has(e))return gl.debug(`There were multiple attempts to register component ${e}.`),!1;_l.set(e,n);for(const t of ml.values())Z0(t,n);return!0}function yl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const ya=new z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ET{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _r.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}function bT(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Fm,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw ya.create("bad-app-name",{appName:String(i)});if(t||(t=(0,z.aH)()),!t)throw ya.create("no-options");const a=ml.get(i);if(a){if((0,z.vZ)(t,a.options)&&(0,z.vZ)(r,a.config))return a;throw ya.create("duplicate-app",{appName:i})}const l=new _r.H0(i);for(const g of _l.values())l.addComponent(g);const f=new ET(t,r,l);return ml.set(i,f),f}function Mf(n=Fm){const e=ml.get(n);if(!e&&n===Fm&&(0,z.aH)())return bT();if(!e)throw ya.create("no-app",{appName:n});return e}function Oi(n,e,t){var r;let i=null!==(r=AL[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const f=[`Unable to register library "${i}" with version "${e}":`];return a&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&f.push("and"),l&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void gl.warn(f.join(" "))}Ki(new _r.wA(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Px="firebase-heartbeat-database",Ox=1,sd="firebase-heartbeat-store";let Lm=null;function Um(){return Lm||(Lm=(0,_T.X3)(Px,Ox,{upgrade:(n,e)=>{0===e&&n.createObjectStore(sd)}}).catch(n=>{throw ya.create("idb-open",{originalErrorMessage:n.message})})),Lm}function Pf(){return(Pf=(0,V.Z)(function*(n){try{return yield(yield Um()).transaction(sd).objectStore(sd).get(TT(n))}catch(e){if(e instanceof z.ZR)gl.warn(e.message);else{const t=ya.create("idb-get",{originalErrorMessage:e?.message});gl.warn(t.message)}}})).apply(this,arguments)}function Y0(n,e){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,V.Z)(function*(n,e){try{const r=(yield Um()).transaction(sd,"readwrite");yield r.objectStore(sd).put(e,TT(n)),yield r.done}catch(t){if(t instanceof z.ZR)gl.warn(t.message);else{const r=ya.create("idb-set",{originalErrorMessage:t?.message});gl.warn(r.message)}}})).apply(this,arguments)}function TT(n){return`${n.name}!${n.options.appId}`}class ST{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new RL(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,V.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=AT();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(a=>a.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,V.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=AT(),{heartbeatsToSend:r,unsentEntries:i}=function Rx(n,e=1024){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),J0(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),J0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),a=(0,z.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),a})()}}function AT(){return(new Date).toISOString().substring(0,10)}class RL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,V.Z)(function*(){return!!(0,z.hl)()&&(0,z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,V.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function NL(n){return Pf.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,V.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return Y0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,V.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return Y0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}})()}}function J0(n){return(0,z.L)(JSON.stringify({version:2,heartbeats:n})).length}!function MT(n){Ki(new _r.wA("platform-logger",e=>new V0(e),"PRIVATE")),Ki(new _r.wA("heartbeat",e=>new ST(e),"PRIVATE")),Oi(yT,"0.9.20",n),Oi(yT,"0.9.20","esm2017"),Oi("fire-js","")}("");const ao=(n,e)=>e.some(t=>n instanceof t);let X0,kx;const Vm=new WeakMap,tC=new WeakMap,Fx=new WeakMap,nC=new WeakMap,Of=new WeakMap;let rC={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return tC.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Fx.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $o(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Lx(n){return"function"==typeof n?function Vr(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function cc(){return kx||(kx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(iC(this),e),$o(Vm.get(this))}:function(...e){return $o(n.apply(iC(this),e))}:function(e,...t){const r=n.call(iC(this),e,...t);return Fx.set(r,e.sort?e.sort():[e]),$o(r)}}(n):(n instanceof IDBTransaction&&function xT(n){if(tC.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});tC.set(n,e)}(n),ao(n,function eC(){return X0||(X0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,rC):n)}function $o(n){if(n instanceof IDBRequest)return function jo(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t($o(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Vm.set(t,n)}).catch(()=>{}),Of.set(e,n),e}(n);if(nC.has(n))return nC.get(n);const e=Lx(n);return e!==n&&(nC.set(n,e),Of.set(e,n)),e}const iC=n=>Of.get(n),OT=["get","getKey","getAll","getAllKeys","count"],NT=["put","add","delete","clear"],sC=new Map;function oC(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(sC.get(e))return sC.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=NT.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!OT.includes(t))return;const a=function(){var l=(0,V.Z)(function*(f,...g){const v=this.transaction(f,i?"readwrite":"readonly");let E=v.store;return r&&(E=E.index(g.shift())),(yield Promise.all([E[t](...g),i&&v.done]))[0]});return function(g){return l.apply(this,arguments)}}();return sC.set(e,a),a}!function kL(n){rC=n(rC)}(n=>({...n,get:(e,t,r)=>oC(e,t)||n.get(e,t,r),has:(e,t)=>!!oC(e,t)||n.has(e,t)}));const aC="@firebase/installations",cC="0.6.4",RT=1e4,kT=`w:${cC}`,lC="FIS_v2",od="https://firebaseinstallations.googleapis.com/v1",va=36e5,Ho=new z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function uC(n){return n instanceof z.ZR&&n.code.includes("request-failed")}function Nf({projectId:n}){return`${od}/projects/${n}/installations`}function cd(n){return{token:n.token,requestStatus:2,expiresIn:jx(n.expiresIn),creationTime:Date.now()}}function ld(n,e){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,V.Z)(function*(n,e){const r=(yield e.json()).error;return Ho.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function dC({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function hC(n){return fC.apply(this,arguments)}function fC(){return(fC=(0,V.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function jx(n){return Number(n.replace("s","000"))}function pC(){return(pC=(0,V.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Nf(n),i=dC(n),a=e.getImmediate({optional:!0});if(a){const v=yield a.getHeartbeatsHeader();v&&i.append("x-firebase-client",v)}const f={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:lC,appId:n.appId,sdkVersion:kT})},g=yield hC(()=>fetch(r,f));if(g.ok){const v=yield g.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:cd(v.authToken)}}throw yield ld("Create Installation",g)})).apply(this,arguments)}function $x(n){return new Promise(e=>{setTimeout(e,n)})}const UT=/^[cdef][\w-]{21}$/,jm="";function UL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function $m(n){return function LL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return UT.test(t)?t:jm}catch{return jm}}function Rf(n){return`${n.appName}!${n.appId}`}const Cl=new Map;function gC(n,e){const t=Rf(n);mC(t,e),function St(n,e){const t=function _C(){return!lc&&"BroadcastChannel"in self&&(lc=new BroadcastChannel("[Firebase] FID Change"),lc.onmessage=n=>{mC(n.data.key,n.data.fid)}),lc}();t&&t.postMessage({key:n,fid:e}),function wl(){0===Cl.size&&lc&&(lc.close(),lc=null)}()}(t,e)}function mC(n,e){const t=Cl.get(n);if(t)for(const r of t)r(e)}let lc=null;const BT="firebase-installations-database",zx=1,zo="firebase-installations-store";let uc=null;function kf(){return uc||(uc=function Ux(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),f=$o(l);return r&&l.addEventListener("upgradeneeded",g=>{r($o(l.result),g.oldVersion,g.newVersion,$o(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),f.then(g=>{a&&g.addEventListener("close",()=>a()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}(BT,zx,{upgrade:(n,e)=>{0===e&&n.createObjectStore(zo)}})),uc}function dc(n,e){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,V.Z)(function*(n,e){const t=Rf(n),i=(yield kf()).transaction(zo,"readwrite"),a=i.objectStore(zo),l=yield a.get(t);return yield a.put(e,t),yield i.done,(!l||l.fid!==e.fid)&&gC(n,e.fid),e})).apply(this,arguments)}function Ff(n){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,V.Z)(function*(n){const e=Rf(n),r=(yield kf()).transaction(zo,"readwrite");yield r.objectStore(zo).delete(e),yield r.done})).apply(this,arguments)}function Il(n,e){return zm.apply(this,arguments)}function zm(){return(zm=(0,V.Z)(function*(n,e){const t=Rf(n),i=(yield kf()).transaction(zo,"readwrite"),a=i.objectStore(zo),l=yield a.get(t),f=e(l);return void 0===f?yield a.delete(t):yield a.put(f,t),yield i.done,f&&(!l||l.fid!==f.fid)&&gC(n,f.fid),f})).apply(this,arguments)}function Uf(n){return yC.apply(this,arguments)}function yC(){return yC=(0,V.Z)(function*(n){let e;const t=yield Il(n.appConfig,r=>{const i=function Gx(n){return wC(n||{fid:UL(),registrationStatus:0})}(r),a=function Wx(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ho.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function jT(n,e){return vC.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:qx(n)}:{installationEntry:e}}(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===jm?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),yC.apply(this,arguments)}function vC(){return vC=(0,V.Z)(function*(n,e){try{const t=yield function FL(n,e){return pC.apply(this,arguments)}(n,e);return dc(n.appConfig,t)}catch(t){throw uC(t)&&409===t.customData.serverCode?yield Ff(n.appConfig):yield dc(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),vC.apply(this,arguments)}function qx(n){return CC.apply(this,arguments)}function CC(){return(CC=(0,V.Z)(function*(n){let e=yield $T(n.appConfig);for(;1===e.registrationStatus;)yield $x(100),e=yield $T(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Uf(n);return r||t}return e})).apply(this,arguments)}function $T(n){return Il(n,e=>{if(!e)throw Ho.create("installation-not-found");return wC(e)})}function wC(n){return function HT(n){return 1===n.registrationStatus&&n.registrationTime+RT<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function IC(){return(IC=(0,V.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function as(n,{fid:e}){return`${Nf(n)}/${e}/authTokens:generate`}(n,t),i=function FT(n,{refreshToken:e}){const t=dC(n);return t.append("Authorization",function LT(n){return`${lC} ${n}`}(e)),t}(n,t),a=e.getImmediate({optional:!0});if(a){const v=yield a.getHeartbeatsHeader();v&&i.append("x-firebase-client",v)}const f={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:kT,appId:n.appId}})},g=yield hC(()=>fetch(r,f));if(g.ok)return cd(yield g.json());throw yield ld("Generate Auth Token",g)})).apply(this,arguments)}function EC(n){return bC.apply(this,arguments)}function bC(){return bC=(0,V.Z)(function*(n,e=!1){let t;const r=yield Il(n.appConfig,a=>{if(!zT(a))throw Ho.create("not-registered");const l=a.authToken;if(!e&&function GT(n){return 2===n.requestStatus&&!function Yx(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+va}(n)}(l))return a;if(1===l.requestStatus)return t=function VL(n,e){return Vf.apply(this,arguments)}(n,e),a;{if(!navigator.onLine)throw Ho.create("app-offline");const f=function Qx(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(a);return t=function Kx(n,e){return DC.apply(this,arguments)}(n,f),f}});return t?yield t:r.authToken}),bC.apply(this,arguments)}function Vf(){return(Vf=(0,V.Z)(function*(n,e){let t=yield TC(n.appConfig);for(;1===t.authToken.requestStatus;)yield $x(100),t=yield TC(n.appConfig);const r=t.authToken;return 0===r.requestStatus?EC(n,e):r})).apply(this,arguments)}function TC(n){return Il(n,e=>{if(!zT(e))throw Ho.create("not-registered");return function SC(n){return 1===n.requestStatus&&n.requestTime+RT<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function DC(){return DC=(0,V.Z)(function*(n,e){try{const t=yield function Zx(n,e){return IC.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield dc(n.appConfig,r),t}catch(t){if(!uC(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield dc(n.appConfig,r)}else yield Ff(n.appConfig);throw t}}),DC.apply(this,arguments)}function zT(n){return void 0!==n&&2===n.registrationStatus}function AC(){return(AC=(0,V.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Uf(e);return r?r.catch(console.error):EC(e).catch(console.error),t.fid})).apply(this,arguments)}function MC(){return MC=(0,V.Z)(function*(n,e=!1){const t=n;return yield function eP(n){return As.apply(this,arguments)}(t),(yield EC(t,e)).token}),MC.apply(this,arguments)}function As(){return(As=(0,V.Z)(function*(n){const{registrationPromise:e}=yield Uf(n);e&&(yield e)})).apply(this,arguments)}function qT(n){return Ho.create("missing-app-config-values",{valueName:n})}const RC="installations",KT=n=>{const e=n.getProvider("app").getImmediate(),t=function NC(n){if(!n||!n.options)throw qT("App Configuration");if(!n.name)throw qT("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw qT(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:yl(e,"heartbeat"),_delete:()=>Promise.resolve()}},YT=n=>{const t=yl(n.getProvider("app").getImmediate(),RC).getImmediate();return{getId:()=>function Jx(n){return AC.apply(this,arguments)}(t),getToken:i=>function Xx(n){return MC.apply(this,arguments)}(t,i)}};(function kC(){Ki(new _r.wA(RC,KT,"PUBLIC")),Ki(new _r.wA("installations-internal",YT,"PRIVATE"))})(),Oi(aC,cC),Oi(aC,cC,"esm2017");const co="@firebase/remote-config",Ni=new z.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $f{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,V.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const a=yield t.client.fetch(e),l=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===a.status&&l.push(t.storage.setLastSuccessfulFetchResponse(a)),yield Promise.all(l),a})()}}function uP(n=navigator){return n.languages&&n.languages[0]||n.language}class dP{constructor(e,t,r,i,a,l){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=l}fetch(e){var t=this;return(0,V.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,f={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},g={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:uP()},v={method:"POST",headers:f,body:JSON.stringify(g)},E=fetch(l,v),T=new Promise((be,ze)=>{e.signal.addEventListener(()=>{const Re=new Error("The operation was aborted.");Re.name="AbortError",ze(Re)})});let A;try{yield Promise.race([E,T]),A=yield E}catch(be){let ze="fetch-client-network";throw"AbortError"===be?.name&&(ze="fetch-timeout"),Ni.create(ze,{originalErrorMessage:be?.message})}let R=A.status;const W=A.headers.get("ETag")||void 0;let Q,J;if(200===A.status){let be;try{be=yield A.json()}catch(ze){throw Ni.create("fetch-client-parse",{originalErrorMessage:ze?.message})}Q=be.entries,J=be.state}if("INSTANCE_STATE_UNSPECIFIED"===J?R=500:"NO_CHANGE"===J?R=304:("NO_TEMPLATE"===J||"EMPTY_CONFIG"===J)&&(Q={}),304!==R&&200!==R)throw Ni.create("fetch-status",{httpStatus:R});return{status:R,eTag:W,config:Q}})()}}class pP{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,V.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,V.Z)(function*(){yield function hP(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Ni.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const a=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),a}catch(a){if(!function fP(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(a))throw a;const l={throttleEndTimeMillis:Date.now()+(0,z.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(l),i.attemptFetch(e,l)}})()}}class _P{constructor(e,t,r,i,a){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Hf(n,e){const t=n.target.error||void 0;return Ni.create(e,{originalErrorMessage:t&&t?.message})}const Ca="app_namespace_store";class CP{constructor(e,t,r,i=function vP(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Hf(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ca,{keyPath:"compositeKey"})}}catch(t){e(Ni.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,V.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const f=r.transaction([Ca],"readonly").objectStore(Ca),g=t.createCompositeKey(e);try{const v=f.get(g);v.onerror=E=>{a(Hf(E,"storage-get"))},v.onsuccess=E=>{const T=E.target.result;i(T?T.value:void 0)}}catch(v){a(Ni.create("storage-get",{originalErrorMessage:v?.message}))}})})()}set(e,t){var r=this;return(0,V.Z)(function*(){const i=yield r.openDbPromise;return new Promise((a,l)=>{const g=i.transaction([Ca],"readwrite").objectStore(Ca),v=r.createCompositeKey(e);try{const E=g.put({compositeKey:v,value:t});E.onerror=T=>{l(Hf(T,"storage-set"))},E.onsuccess=()=>{a()}}catch(E){l(Ni.create("storage-set",{originalErrorMessage:E?.message}))}})})()}delete(e){var t=this;return(0,V.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const f=r.transaction([Ca],"readwrite").objectStore(Ca),g=t.createCompositeKey(e);try{const v=f.delete(g);v.onerror=E=>{a(Hf(E,"storage-delete"))},v.onsuccess=()=>{i()}}catch(v){a(Ni.create("storage-delete",{originalErrorMessage:v?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class wP{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,V.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),a=yield t;a&&(e.lastFetchStatus=a);const l=yield r;l&&(e.lastSuccessfulFetchTimestampMillis=l);const f=yield i;f&&(e.activeConfig=f)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function EP(){return Xm.apply(this,arguments)}function Xm(){return(Xm=(0,V.Z)(function*(){if(!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}!function IP(){Ki(new _r.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ni.create("registration-window");if(!(0,z.hl)())throw Ni.create("indexed-db-unavailable");const{projectId:a,apiKey:l,appId:f}=r.options;if(!a)throw Ni.create("registration-project-id");if(!l)throw Ni.create("registration-api-key");if(!f)throw Ni.create("registration-app-id");const g=new CP(f,r.name,t=t||"firebase"),v=new wP(g),E=new Pi.Yd(co);E.logLevel=Pi.in.ERROR;const T=new dP(i,"10.5.0",t,a,l,f),A=new pP(T,g),R=new $f(A,g,v,E),W=new _P(r,R,v,g,E);return function sP(n){const e=(0,z.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(W),W},"PUBLIC").setMultipleInstances(!0)),Oi(co,"0.4.4"),Oi(co,"0.4.4","esm2017")}();const e1=(n,e)=>e.some(t=>n instanceof t);let t1,bP;const TP=new WeakMap,ud=new WeakMap,s1=new WeakMap,UC=new WeakMap,zf=new WeakMap;let El={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return ud.get(n);if("objectStoreNames"===e)return n.objectStoreNames||s1.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yr(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function e_(n){return"function"==typeof n?function bl(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function r1(){return bP||(bP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Gf(this),e),yr(TP.get(this))}:function(...e){return yr(n.apply(Gf(this),e))}:function(e,...t){const r=n.call(Gf(this),e,...t);return s1.set(r,e.sort?e.sort():[e]),yr(r)}}(n):(n instanceof IDBTransaction&&function Go(n){if(ud.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});ud.set(n,e)}(n),e1(n,function n1(){return t1||(t1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,El):n)}function yr(n){if(n instanceof IDBRequest)return function DP(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(yr(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&TP.set(t,n)}).catch(()=>{}),zf.set(e,n),e}(n);if(UC.has(n))return UC.get(n);const e=e_(n);return e!==n&&(UC.set(n,e),zf.set(e,n)),e}const Gf=n=>zf.get(n);function Tl(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),f=yr(l);return r&&l.addEventListener("upgradeneeded",g=>{r(yr(l.result),g.oldVersion,g.newVersion,yr(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),f.then(g=>{a&&g.addEventListener("close",()=>a()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}function hc(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),yr(t).then(()=>{})}const dd=["get","getKey","getAll","getAllKeys","count"],hd=["put","add","delete","clear"],fc=new Map;function Dl(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(fc.get(e))return fc.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=hd.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!dd.includes(t))return;const a=function(){var l=(0,V.Z)(function*(f,...g){const v=this.transaction(f,i?"readwrite":"readonly");let E=v.store;return r&&(E=E.index(g.shift())),(yield Promise.all([E[t](...g),i&&v.done]))[0]});return function(g){return l.apply(this,arguments)}}();return fc.set(e,a),a}!function yi(n){El=n(El)}(n=>({...n,get:(e,t,r)=>Dl(e,t)||n.get(e,t,r),has:(e,t)=>!!Dl(e,t)||n.has(e,t)}));const fd="/firebase-messaging-sw.js",pd="/firebase-cloud-messaging-push-scope",Sl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",o1="https://fcmregistrations.googleapis.com/v1",VC="google.c.a.c_id",a1="google.c.a.c_l",c1="google.c.a.ts";var Wf=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Wf||{});function Wo(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function d1(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}const qf="fcm_token_details_db",SP=5,AP="fcm_token_object_Store";function BC(){return BC=(0,V.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(a=>a.name).includes(qf))return null;let e=null;return(yield Tl(qf,SP,{upgrade:(r=(0,V.Z)(function*(i,a,l,f){var g;if(a<2||!i.objectStoreNames.contains(AP))return;const v=f.objectStore(AP),E=yield v.index("fcmSenderId").get(n);if(yield v.clear(),E)if(2===a){const T=E;if(!T.auth||!T.p256dh||!T.endpoint)return;e={token:T.fcmToken,createTime:null!==(g=T.createTime)&&void 0!==g?g:Date.now(),subscriptionOptions:{auth:T.auth,p256dh:T.p256dh,endpoint:T.endpoint,swScope:T.swScope,vapidKey:"string"==typeof T.vapidKey?T.vapidKey:Wo(T.vapidKey)}}}else if(3===a){const T=E;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Wo(T.auth),p256dh:Wo(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Wo(T.vapidKey)}}}else if(4===a){const T=E;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:Wo(T.auth),p256dh:Wo(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:Wo(T.vapidKey)}}}}),function(a,l,f,g){return r.apply(this,arguments)})})).close(),yield hc(qf),yield hc("fcm_vapid_details_db"),yield hc("undefined"),function MP(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),BC.apply(this,arguments)}const WL="firebase-messaging-database",xP=1,gd="firebase-messaging-store";let jC=null;function $C(){return jC||(jC=Tl(WL,xP,{upgrade:(n,e)=>{0===e&&n.createObjectStore(gd)}})),jC}function h1(n){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,V.Z)(function*(n){const e=Ml(n),r=yield(yield $C()).transaction(gd).objectStore(gd).get(e);if(r)return r;{const i=yield function GL(n){return BC.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield Al(n,i),i}}),Zf.apply(this,arguments)}function Al(n,e){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,V.Z)(function*(n,e){const t=Ml(n),i=(yield $C()).transaction(gd,"readwrite");return yield i.objectStore(gd).put(e,t),yield i.done,e})).apply(this,arguments)}function n_(){return(n_=(0,V.Z)(function*(n){const e=Ml(n),r=(yield $C()).transaction(gd,"readwrite");yield r.objectStore(gd).delete(e),yield r.done})).apply(this,arguments)}function Ml({appConfig:n}){return n.appId}const ii=new z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Yf(n,e){return HC.apply(this,arguments)}function HC(){return(HC=(0,V.Z)(function*(n,e){const t=yield _d(n),r=m1(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(md(n.appConfig),i)).json()}catch(l){throw ii.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(a.error)throw ii.create("token-subscribe-failed",{errorInfo:a.error.message});if(!a.token)throw ii.create("token-subscribe-no-token");return a.token})).apply(this,arguments)}function zC(){return(zC=(0,V.Z)(function*(n,e){const t=yield _d(n),r=m1(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(`${md(n.appConfig)}/${e.token}`,i)).json()}catch(l){throw ii.create("token-update-failed",{errorInfo:l?.toString()})}if(a.error)throw ii.create("token-update-failed",{errorInfo:a.error.message});if(!a.token)throw ii.create("token-update-no-token");return a.token})).apply(this,arguments)}function p1(n,e){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,V.Z)(function*(n,e){const r={method:"DELETE",headers:yield _d(n)};try{const a=yield(yield fetch(`${md(n.appConfig)}/${e}`,r)).json();if(a.error)throw ii.create("token-unsubscribe-failed",{errorInfo:a.error.message})}catch(i){throw ii.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function md({projectId:n}){return`${o1}/projects/${n}/registrations`}function _d(n){return g1.apply(this,arguments)}function g1(){return(g1=(0,V.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function m1({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==Sl&&(i.web.applicationPubKey=r),i}const OP=6048e5;function WC(){return WC=(0,V.Z)(function*(n){const e=yield function RP(n,e){return YC.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Wo(e.getKey("auth")),p256dh:Wo(e.getKey("p256dh"))},r=yield h1(n.firebaseDependencies);if(r){if(function kP(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+OP?function NP(n,e){return r_.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield p1(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return KC(n.firebaseDependencies,t)}return KC(n.firebaseDependencies,t)}),WC.apply(this,arguments)}function ZC(){return ZC=(0,V.Z)(function*(n){const e=yield h1(n.firebaseDependencies);e&&(yield p1(n.firebaseDependencies,e.token),yield function t_(n){return n_.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),ZC.apply(this,arguments)}function r_(){return r_=(0,V.Z)(function*(n,e){try{const t=yield function PP(n,e){return zC.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Al(n.firebaseDependencies,r),t}catch(t){throw yield function qC(n){return ZC.apply(this,arguments)}(n),t}}),r_.apply(this,arguments)}function KC(n,e){return i_.apply(this,arguments)}function i_(){return(i_=(0,V.Z)(function*(n,e){const r={token:yield Yf(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Al(n,r),r.token})).apply(this,arguments)}function YC(){return(YC=(0,V.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:d1(e)})})).apply(this,arguments)}function QC(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function JC(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const a=e.notification.icon;a&&(n.notification.icon=a)}(e,n),function XC(n,e){e.data&&(n.data=e.data)}(e,n),function FP(n,e){var t,r,i,a,l;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const f=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(a=e.notification)||void 0===a?void 0:a.click_action;f&&(n.fcmOptions.link=f);const g=null===(l=e.fcmOptions)||void 0===l?void 0:l.analytics_label;g&&(n.fcmOptions.analyticsLabel=g)}(e,n),e}function Jf(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function o_(n){return ii.create("missing-app-config-values",{valueName:n})}Jf("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Jf("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class LP{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function ew(n){if(!n||!n.options)throw o_("App Configuration Object");if(!n.name)throw o_("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw o_(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function tw(){return(tw=(0,V.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(fd,{scope:pd}),n.swRegistration.update().catch(()=>{})}catch(e){throw ii.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function Xf(){return(Xf=(0,V.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function _1(n){return tw.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw ii.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function a_(){return(a_=(0,V.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=Sl)})).apply(this,arguments)}function rw(){return rw=(0,V.Z)(function*(n,e){if(!navigator)throw ii.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ii.create("permission-blocked");return yield function y1(n,e){return a_.apply(this,arguments)}(n,e?.vapidKey),yield function nw(n,e){return Xf.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function GC(n){return WC.apply(this,arguments)}(n)}),rw.apply(this,arguments)}function ep(){return(ep=(0,V.Z)(function*(n,e,t){const r=function w1(n){switch(n){case Wf.NOTIFICATION_CLICKED:return"notification_open";case Wf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[VC],message_name:t[a1],message_time:t[c1],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function c_(){return c_=(0,V.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Wf.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(QC(t)):n.onMessageHandler.next(QC(t)));const r=t.data;(function s_(n){return"object"==typeof n&&!!n&&VC in n})(r)&&"1"===r["google.c.a.e"]&&(yield function C1(n,e,t){return ep.apply(this,arguments)}(n,t.messageType,r))}),c_.apply(this,arguments)}const I1="@firebase/messaging",E1=n=>{const e=new LP(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function iw(n,e){return c_.apply(this,arguments)}(e,t)),e},b1=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function v1(n,e){return rw.apply(this,arguments)}(e,r)}};function D1(){return ow.apply(this,arguments)}function ow(){return(ow=(0,V.Z)(function*(){try{yield(0,z.eu)()}catch{return!1}return typeof window<"u"&&(0,z.hl)()&&(0,z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function S1(n=Mf()){return D1().then(e=>{if(!e)throw ii.create("unsupported-browser")},e=>{throw ii.create("indexed-db-unsupported")}),yl((0,z.m9)(n),"messaging").getImmediate()}!function T1(){Ki(new _r.wA("messaging",E1,"PUBLIC")),Ki(new _r.wA("messaging-internal",b1,"PRIVATE")),Oi(I1,"0.12.4"),Oi(I1,"0.12.4","esm2017")}();const np="analytics",A1="firebase_id",M1="origin",d_=6e4,pc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",aw="https://www.googletagmanager.com/gtag/js",Br=new Pi.Yd("@firebase/analytics"),cr=new z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function lw(n){if(!n.startsWith(aw)){const e=cr.create("invalid-gtag-resource",{gtagURL:n});return Br.warn(e.message),""}return n}function x1(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function dw(){return(dw=(0,V.Z)(function*(n,e,t,r,i,a){const l=r[i];try{if(l)yield e[l];else{const g=(yield x1(t)).find(v=>v.measurementId===i);g&&(yield e[g.appId])}}catch(f){Br.error(f)}n("config",i,a)})).apply(this,arguments)}function hw(){return(hw=(0,V.Z)(function*(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const f=yield x1(t);for(const g of l){const v=f.find(T=>T.measurementId===g),E=v&&e[v.appId];if(!E){a=[];break}a.push(E)}}0===a.length&&(a=Object.values(e)),yield Promise.all(a),n("event",r,i||{})}catch(a){Br.error(a)}})).apply(this,arguments)}const zP=30,fw=new class GP{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function R1(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function pw(){return(pw=(0,V.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:R1(r)},a=pc.replace("{app-id}",t),l=yield fetch(a,i);if(200!==l.status&&304!==l.status){let f="";try{const g=yield l.json();null!==(e=g.error)&&void 0!==e&&e.message&&(f=g.error.message)}catch{}throw cr.create("config-fetch-failed",{httpStatus:l.status,responseMessage:f})}return l.json()})).apply(this,arguments)}function h_(){return(h_=(0,V.Z)(function*(n,e=fw,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw cr.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw cr.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new gw;return setTimeout((0,V.Z)(function*(){f.abort()}),void 0!==t?t:d_),k1({appId:r,apiKey:i,measurementId:a},l,f,e)})).apply(this,arguments)}function k1(n,e,t){return f_.apply(this,arguments)}function f_(){return f_=(0,V.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=fw){var a;const{appId:l,measurementId:f}=n;try{yield function KL(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(cr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(g){if(f)return Br.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:f};throw g}try{const g=yield function yd(n){return pw.apply(this,arguments)}(n);return i.deleteThrottleMetadata(l),g}catch(g){const v=g;if(!function F1(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(v)){if(i.deleteThrottleMetadata(l),f)return Br.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:l,measurementId:f};throw g}const E=503===Number(null===(a=v?.customData)||void 0===a?void 0:a.httpStatus)?(0,z.$s)(t,i.intervalMillis,zP):(0,z.$s)(t,i.intervalMillis),T={throttleEndTimeMillis:Date.now()+E,backoffCount:t+1};return i.setThrottleMetadata(l,T),Br.debug(`Calling attemptFetch again in ${E} millis`),k1(n,T,r,i)}}),f_.apply(this,arguments)}class gw{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Ms,xl;function p_(){return(p_=(0,V.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const a=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:a}))}})).apply(this,arguments)}function vw(){return(vw=(0,V.Z)(function*(){if(!(0,z.hl)())return Br.warn(cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,z.eu)()}catch(n){return Br.warn(cr.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function m_(){return m_=(0,V.Z)(function*(n,e,t,r,i,a,l){var f;const g=function WP(n){return h_.apply(this,arguments)}(n);g.then(R=>{t[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&Br.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>Br.error(R)),e.push(g);const v=function YP(){return vw.apply(this,arguments)}().then(R=>{if(R)return r.getId()}),[E,T]=yield Promise.all([g,v]);(function HP(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(aw)&&t.src.includes(n))return t;return null})(a)||function qL(n,e){const t=function uw(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:lw}),r=document.createElement("script"),i=`${aw}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(a,E.measurementId),xl&&(i("consent","default",xl),function U1(n){xl=n}(void 0)),i("js",new Date);const A=null!==(f=l?.config)&&void 0!==f?f:{};return A[M1]="firebase",A.update=!0,null!=T&&(A[A1]=T),i("config",E.measurementId,A),Ms&&(i("set",Ms),function yw(n){Ms=n}(void 0)),E.measurementId}),m_.apply(this,arguments)}class __{constructor(e){this.app=e}_delete(){return delete Zo[this.app.options.appId],Promise.resolve()}}let Zo={},Cw=[];const ww={};let j1,xs,ip="dataLayer",vd=!1;function z1(n,e,t){!function H1(){const n=[];if((0,z.ru)()&&n.push("This is a browser extension environment."),(0,z.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=cr.create("invalid-analytics-context",{errorInfo:e});Br.warn(t.message)}}();const r=n.options.appId;if(!r)throw cr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw cr.create("no-api-key");Br.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zo[r])throw cr.create("already-exists",{id:r});if(!vd){!function ZL(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(ip);const{wrappedGtag:a,gtagCore:l}=function O1(n,e,t,r,i){let a=function(...l){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function Mr(n,e,t,r){function a(){return a=(0,V.Z)(function*(l,...f){try{if("event"===l){const[g,v]=f;yield function P1(n,e,t,r,i){return hw.apply(this,arguments)}(n,e,t,g,v)}else if("config"===l){const[g,v]=f;yield function $P(n,e,t,r,i,a){return dw.apply(this,arguments)}(n,e,t,r,g,v)}else if("consent"===l){const[g]=f;n("consent","update",g)}else if("get"===l){const[g,v,E]=f;n("get",g,v,E)}else if("set"===l){const[g]=f;n("set",g)}else n(l,...f)}catch(g){Br.error(g)}}),a.apply(this,arguments)}return function i(l){return a.apply(this,arguments)}}(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}(Zo,Cw,ww,ip,"gtag");xs=a,j1=l,vd=!0}return Zo[r]=function V1(n,e,t,r,i,a,l){return m_.apply(this,arguments)}(n,Cw,ww,e,j1,ip,t),new __(n)}function W1(){return y_.apply(this,arguments)}function y_(){return(y_=(0,V.Z)(function*(){if((0,z.ru)()||!(0,z.zI)()||!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}const q1="@firebase/analytics";!function eO(){Ki(new _r.wA(np,(e,{options:t})=>z1(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Ki(new _r.wA("analytics-internal",function n(e){try{const t=e.getProvider(np).getImmediate();return{logEvent:(r,i,a)=>function XP(n,e,t,r){n=(0,z.m9)(n),function qP(n,e,t,r,i){return p_.apply(this,arguments)}(xs,Zo[n.app.options.appId],e,t,r).catch(i=>Br.error(i))}(t,r,i,a)}}catch(t){throw cr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Oi(q1,"0.10.0"),Oi(q1,"0.10.0","esm2017")}();const rO=new class nO extends mT{}(class tO extends Ef{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var sp=F(5137),Cd=F(3093);const Pl=new u.GfV("7.6.1"),v_="__angularfire_symbol__analyticsIsSupportedValue",C_="__angularfire_symbol__analyticsIsSupported",w_="__angularfire_symbol__remoteConfigIsSupportedValue",I_="__angularfire_symbol__remoteConfigIsSupported",E_="__angularfire_symbol__messagingIsSupportedValue",b_="__angularfire_symbol__messagingIsSupported";globalThis[C_]||(globalThis[C_]=W1().then(n=>globalThis[v_]=n).catch(()=>globalThis[v_]=!1)),globalThis[b_]||(globalThis[b_]=D1().then(n=>globalThis[E_]=n).catch(()=>globalThis[E_]=!1)),globalThis[I_]||(globalThis[I_]=EP().then(n=>globalThis[w_]=n).catch(()=>globalThis[w_]=!1));const op={async:()=>globalThis[b_],sync:()=>{const n=globalThis[E_];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function Ol(n,e,t){if(e){if(1===e.length)return e[0];const a=e.filter(l=>l.app===t);if(1===a.length)return a[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Ps=(n,e)=>{const t=e?[e]:(0,bn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(l=>{r.includes(l)||r.push(l)})}),r};function wd(){}class K1{constructor(e,t=rO){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(l){i.runGuarded(()=>{e.apply(this,[l])})},t,r)}}class Id{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wd,{},wd,wd)),t.pipe(En({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Nl=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new K1(Zone.current)),this.insideAngular=t.run(()=>new K1(Zone.current,U0)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wa(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function gc(n){return wa().ngZone.run(()=>n())}function jr(n){return wa(),function aO(n){return function(t){return(t=t.lift(new Id(n.ngZone))).pipe((0,sp.R)(n.outsideAngular),(0,Cd.Q)(n.insideAngular))}}(wa())(n)}const cO=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),gc(()=>n.apply(void 0,r))},Ed=(n,e)=>function(){let t;const r=arguments;for(let a=0;a<arguments.length;a++)"function"==typeof r[a]&&(e&&(t||(t=gc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wd,{},wd,wd)))),r[a]=cO(r[a],t));const i=function r4(n){return wa().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof fi.y){const a=wa();return i.pipe((0,sp.R)(a.outsideAngular),(0,Cd.Q)(a.insideAngular))}return gc(()=>i)}return i instanceof fi.y?i.pipe(jr):i instanceof Promise?gc(()=>new Promise((a,l)=>i.then(f=>gc(()=>a(f)),f=>gc(()=>l(f))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:gc(()=>i)};function mc(){return(0,gi.e)((n,e)=>{let t,r=!1;n.subscribe((0,pi.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Ze,lO=F(3997),Yi=F(6304),Qi=(F(8661),F(3399)),i4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Os={},bw=bw||{},It=i4||self;function ap(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function bd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Tw="closure_uid_"+(1e9*Math.random()>>>0),uO=0;function dO(n,e,t){return n.call.apply(n.bind,arguments)}function cp(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function vi(n,e,t){return(vi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dO:cp).apply(null,arguments)}function D_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function $r(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function uo(){this.s=this.s,this.o=this.o}uo.prototype.s=!1,uo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Y1(n){Object.prototype.hasOwnProperty.call(n,Tw)&&n[Tw]||(n[Tw]=++uO)}(this)},uo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Dw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function S_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function J1(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ap(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function vr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}vr.prototype.h=function(){this.defaultPrevented=!0};var lp=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",()=>{},e),It.removeEventListener("test",()=>{},e)}catch{}return n}();function up(n){return/^[\s\xa0]*$/.test(n)}function A_(){var n=It.navigator;return n&&(n=n.userAgent)?n:""}function Ko(n){return-1!=A_().indexOf(n)}function M_(n){return M_[" "](n),n}M_[" "]=function(){};var nD,n,eD=Ko("Opera"),Td=Ko("Trident")||Ko("MSIE"),Sw=Ko("Edge"),Aw=Sw||Td,tD=Ko("Gecko")&&!(-1!=A_().toLowerCase().indexOf("webkit")&&!Ko("Edge"))&&!(Ko("Trident")||Ko("MSIE"))&&!Ko("Edge"),s4=-1!=A_().toLowerCase().indexOf("webkit")&&!Ko("Edge");function hO(){var n=It.document;return n?n.documentMode:void 0}e:{var rD="",x_=(n=A_(),tD?/rv:([^\);]+)(\)|;)/.exec(n):Sw?/Edge\/([\d\.]+)/.exec(n):Td?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):s4?/WebKit\/(\S+)/.exec(n):eD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(x_&&(rD=x_?x_[1]:""),Td){var Dd=hO();if(null!=Dd&&Dd>parseFloat(rD)){nD=String(Dd);break e}}nD=rD}var sD=It.document&&Td&&(hO()||parseInt(nD,10))||void 0;function Ia(n,e){if(vr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(tD){e:{try{M_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:fO[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ia.$.h.call(this)}}$r(Ia,vr);var fO={2:"touch",3:"pen",4:"mouse"};Ia.prototype.h=function(){Ia.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var dp="closure_listenable_"+(1e6*Math.random()|0),pO=0;function gO(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++pO,this.fa=this.ia=!1}function xw(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Pw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function aD(n){const e={};for(const t in n)e[t]=n[t];return e}const cD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sd(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<cD.length;a++)t=cD[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function P_(n){this.src=n,this.g={},this.h=0}function O_(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Dw(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(xw(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ow(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}P_.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Ow(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new gO(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var N_="closure_lm_"+(1e6*Math.random()|0),Nw={};function Rw(n,e,t,r,i){if(r&&r.once)return uD(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Rw(n,e[a],t,r,i);return null}return t=Uw(t),n&&n[dp]?n.O(e,t,bd(r)?!!r.capture:!!r,i):lD(n,e,t,!1,r,i)}function lD(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=bd(i)?!!i.capture:!!i,f=Lw(n);if(f||(n[N_]=f=new P_(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function kw(){const e=mO;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)lp||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(dD(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function uD(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)uD(n,e[a],t,r,i);return null}return t=Uw(t),n&&n[dp]?n.P(e,t,bd(r)?!!r.capture:!!r,i):lD(n,e,t,!0,r,i)}function Fw(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Fw(n,e[a],t,r,i);else r=bd(r)?!!r.capture:!!r,t=Uw(t),n&&n[dp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ow(a=n.g[e],t,r,i))&&(xw(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Lw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ow(e,t,r,i)),(t=-1<n?e[n]:null)&&R_(t))}function R_(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[dp])O_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(dD(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Lw(e))?(O_(t,n),0==t.h&&(t.src=null,e[N_]=null)):xw(n)}}}function dD(n){return n in Nw?Nw[n]:Nw[n]="on"+n}function mO(n,e){if(n.fa)n=!0;else{e=new Ia(e,this);var t=n.listener,r=n.la||n.src;n.ia&&R_(n),n=t.call(r,e)}return n}function Lw(n){return(n=n[N_])instanceof P_?n:null}var hp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uw(n){return"function"==typeof n?n:(n[hp]||(n[hp]=function(e){return n.handleEvent(e)}),n[hp])}function xr(){uo.call(this),this.i=new P_(this),this.S=this,this.J=null}function si(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new vr(e,n);else if(e instanceof vr)e.target=e.target||n;else{var i=e;Sd(e=new vr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=k_(l,r,!0,e)&&i}if(i=k_(l=e.g=n,r,!0,e)&&i,i=k_(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=k_(l=e.g=t[a],r,!1,e)&&i}function k_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==t){var f=l.listener,g=l.la||l.src;l.ia&&O_(n.i,l),i=!1!==f.call(g,r)&&i}}return i&&!r.defaultPrevented}$r(xr,uo),xr.prototype[dp]=!0,xr.prototype.removeEventListener=function(n,e,t,r){Fw(this,n,e,t,r)},xr.prototype.N=function(){if(xr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)xw(t[r]);delete n.g[e],n.h--}}this.J=null},xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Vw=It.JSON.stringify;function yO(){var n=F_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var hD=new class _O{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new CO,n=>n.reset());class CO{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function fD(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function pD(n){It.setTimeout(()=>{throw n},0)}let fp,pp=!1,F_=new class vO{constructor(){this.h=this.g=null}add(e,t){const r=hD.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},gD=()=>{const n=It.Promise.resolve(void 0);fp=()=>{n.then(wO)}};var wO=()=>{for(var n;n=yO();){try{n.h.call(n.g)}catch(t){pD(t)}var e=hD;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}pp=!1};function L_(n,e){xr.call(this),this.h=n||1,this.g=e||It,this.j=vi(this.qb,this),this.l=Date.now()}function Bw(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function gp(n,e,t){if("function"==typeof n)t&&(n=vi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=vi(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function U_(n){n.g=gp(()=>{n.g=null,n.i&&(n.i=!1,U_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}$r(L_,xr),(Ze=L_.prototype).ga=!1,Ze.T=null,Ze.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),si(this,"tick"),this.ga&&(Bw(this),this.start()))}},Ze.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.N=function(){L_.$.N.call(this),Bw(this),delete this.g};class mD extends uo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:U_(this)}N(){super.N(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rl(n){uo.call(this),this.h=n,this.g={}}$r(Rl,uo);var _D=[];function yD(n,e,t,r){Array.isArray(t)||(t&&(_D[0]=t.toString()),t=_D);for(var i=0;i<t.length;i++){var a=Rw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function V_(n){Pw(n.g,function(e,t){this.g.hasOwnProperty(t)&&R_(e)},n),n.g={}}function B_(){this.g=!0}function Fl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function o4(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Vw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Rl.prototype.N=function(){Rl.$.N.call(this),V_(this)},Rl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},B_.prototype.Ea=function(){this.g=!1},B_.prototype.info=function(){};var Ea={},j_=null;function $_(){return j_=j_||new xr}function jw(n){vr.call(this,Ea.Ta,n)}function Ad(n){const e=$_();si(e,new jw(e))}function CD(n,e){vr.call(this,Ea.STAT_EVENT,n),this.stat=e}function Ci(n){const e=$_();si(e,new CD(e,n))}function H_(n,e){vr.call(this,Ea.Ua,n),this.size=e}function Md(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Ea.Ta="serverreachability",$r(jw,vr),Ea.STAT_EVENT="statevent",$r(CD,vr),Ea.Ua="timingevent",$r(H_,vr);var mp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$w={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function z_(){}function ID(){}z_.prototype.h=null;var ED,_p={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Hw(){vr.call(this,"d")}function G_(){vr.call(this,"c")}function yp(){}function vp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Rl(this),this.P=a4,this.V=new L_(n=Aw?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bD}function bD(){this.i=null,this.g="",this.h=!1}$r(Hw,vr),$r(G_,vr),$r(yp,z_),yp.prototype.g=function(){return new XMLHttpRequest},yp.prototype.i=function(){return{}},ED=new yp;var a4=45e3,zw={},W_={};function q_(n,e,t){n.L=1,n.v=Ip(ba(e)),n.s=t,n.S=!0,Gw(n,null)}function Gw(n,e){n.G=Date.now(),Cp(n),n.A=ba(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),ND(t.i,"t",r),n.C=0,t=n.l.J,n.h=new bD,n.g=WD(n.l,t?e:null,!n.s),0<n.O&&(n.M=new mD(vi(n.Pa,n,n.g),n.O)),yD(n.U,n.g,"readystatechange",n.nb),e=n.I?aD(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ad(),function vD(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),g=0;g<f.length;g++){var v=f[g].split("=");if(1<v.length){var E=v[0];v=v[1];var T=E.split("_");l=2<=T.length&&"type"==T[1]?l+(E+"=")+v+"&":l+(E+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Ww(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function TD(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=EO(n,t),i==W_){4==e&&(n.o=4,Ci(14),r=!1),Fl(n.j,n.m,null,"[Incomplete Response]");break}if(i==zw){n.o=4,Ci(15),Fl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Fl(n.j,n.m,i,null),Ul(n,i)}Ww(n)&&i!=W_&&i!=zw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ci(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),iy(e),e.M=!0,Ci(11))):(Fl(n.j,n.m,t,"[Invalid Chunked Response]"),Ll(n),wp(n))}function EO(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?W_:(t=Number(e.substring(t,r)),isNaN(t)?zw:(r+=1)+t>e.length?W_:(e=e.slice(r,r+t),n.C=r+t,e))}function Cp(n){n.Y=Date.now()+n.P,DD(n,n.P)}function DD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Md(vi(n.lb,n),e)}function Z_(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function wp(n){0==n.l.H||n.J||OO(n.l,n)}function Ll(n){Z_(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Bw(n.V),V_(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Ul(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Q_(t.i,n)))if(!n.K&&Q_(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;dI(t),ry(t)}zD(t),Ci(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Md(vi(t.ib,t),6e3));if(1>=FD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ho(t,11)}else if((n.K||t.g==n)&&dI(t),!up(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const E=v[3];null!=E&&(t.ra=E,t.l.info("VER="+t.ra));const T=v[4];null!=T&&(t.Ga=T,t.l.info("SVER="+t.Ga));const A=v[5];null!=A&&"number"==typeof A&&0<A&&(t.L=r=1.5*A,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const R=n.g;if(R){const W=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.i;a.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(eI(a,a.h),a.h=null))}if(r.F){const Q=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,Tn(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=oy(r,r.J?r.pa:null,r.Y),l.K){LD(r.i,l);var f=l,g=r.L;g&&f.setTimeout(g),f.B&&(Z_(f),Cp(f)),r.g=l}else PO(r);0<t.j.length&&xp(t)}else"stop"!=v[0]&&"close"!=v[0]||ho(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?ho(t,7):ny(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}Ad()}catch{}}function qw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ap(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function AD(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ap(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function SD(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ap(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Ze=vp.prototype).setTimeout=function(n){this.P=n},Ze.nb=function(n){n=n.target;const e=this.M;e&&3==Rs(n)?e.l():this.Pa(n)},Ze.Pa=function(n){try{if(n==this.g)e:{const E=Rs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>E)&&(3!=E||Aw||this.g&&(this.h.h||this.g.ja()||aI(this.g)))){this.J||4!=E||7==e||Ad(),Z_(this);var t=this.g.da();this.ca=t;t:if(Ww(this)){var r=aI(this.g);n="";var i=r.length,a=4==Rs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ll(this),wp(this);var l="";break t}this.h.i=new It.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function kl(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.W,E,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,g=this.g;if((f=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!up(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Ci(12),Ll(this),wp(this);break e}Fl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ul(this,t)}this.S?(TD(this,E,l),Aw&&this.i&&3==E&&(yD(this.U,this.V,"tick",this.mb),this.V.start())):(Fl(this.j,this.m,l,null),Ul(this,l)),4==E&&Ll(this),this.i&&!this.J&&(4==E?OO(this.l,this):(this.i=!1,Cp(this)))}else(function xO(n){const e={};n=(n.g&&2<=Rs(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(up(n[r]))continue;var t=fD(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function oD(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ci(12)):(this.o=0,Ci(13)),Ll(this),wp(this)}}}catch{}},Ze.mb=function(){if(this.g){var n=Rs(this.g),e=this.g.ja();this.C<e.length&&(Z_(this),TD(this,n,e),this.i&&4!=n&&Cp(this))}},Ze.cancel=function(){this.J=!0,Ll(this)},Ze.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function IO(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ad(),Ci(17)),Ll(this),this.o=2,wp(this)):DD(this,this.Y-n)};var Zw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _c(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof _c){this.h=n.h,Kw(this,n.j),this.s=n.s,this.g=n.g,Yw(this,n.m),this.l=n.l;var e=n.i,t=new K_;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Qw(this,t),this.o=n.o}else n&&(e=String(n).match(Zw))?(this.h=!1,Kw(this,e[1]||"",!0),this.s=Ep(e[2]||""),this.g=Ep(e[3]||"",!0),Yw(this,e[4]),this.l=Ep(e[5]||"",!0),Qw(this,e[6]||"",!0),this.o=Ep(e[7]||"")):(this.h=!1,this.i=new K_(null,this.h))}function ba(n){return new _c(n)}function Kw(n,e,t){n.j=t?Ep(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Yw(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Qw(n,e,t){e instanceof K_?(n.i=e,function RD(n,e){e&&!n.j&&(Ns(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(PD(this,r),ND(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=bp(e,c4)),n.i=new K_(e,n.h))}function Tn(n,e,t){n.i.set(e,t)}function Ip(n){return Tn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ep(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Tp),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Tp(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}_c.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bp(e,xD,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bp(e,xD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(bp(t,"/"==t.charAt(0)?bO:Jw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bp(t,TO)),n.join("")};var xD=/[#\/\?@]/g,Jw=/[#\?:]/g,bO=/[#\?]/g,c4=/[#\?@]/g,TO=/#/g;function K_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ns(n){n.g||(n.g=new Map,n.h=0,n.i&&function MD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function PD(n,e){Ns(n),e=Ta(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function OD(n,e){return Ns(n),e=Ta(n,e),n.g.has(e)}function ND(n,e,t){PD(n,e),0<t.length&&(n.i=null,n.g.set(Ta(n,e),S_(t)),n.h+=t.length)}function Ta(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Xw(n){this.l=n||Y_,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ka&&It.g.Ka()&&It.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=K_.prototype).add=function(n,e){Ns(this),this.i=null,n=Ta(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){Ns(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ze.ta=function(){Ns(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Ze.Z=function(n){Ns(this);let e=[];if("string"==typeof n)OD(this,n)&&(e=e.concat(this.g.get(Ta(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ze.set=function(n,e){return Ns(this),this.i=null,OD(this,n=Ta(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var Y_=10;function kD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function FD(n){return n.h?1:n.g?n.g.size:0}function Q_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function eI(n,e){n.g?n.g.add(e):n.h=e}function LD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function tI(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return S_(n.i)}Xw.prototype.cancel=function(){if(this.i=tI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var J_=class{stringify(n){return It.JSON.stringify(n,void 0)}parse(n){return It.JSON.parse(n,void 0)}};function SO(){this.g=new J_}function AO(n,e,t){const r=t||"";try{qw(n,function(i,a){let l=i;bd(i)&&(l=Vw(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Dp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Vl(n){this.l=n.fc||null,this.j=n.ob||!1}function Sp(n,e){xr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=nI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$r(Vl,z_),Vl.prototype.g=function(){return new Sp(this.l,this.j)},Vl.prototype.i=function(n){return function(){return n}}({}),$r(Sp,xr);var nI=0;function rI(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function xd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ap(n)}function Ap(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=Sp.prototype).open=function(n,e){if(this.readyState!=nI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ap(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||It).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xd(this)),this.readyState=nI},Ze.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ap(this)),this.g&&(this.readyState=3,Ap(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof It.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rI(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ze.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xd(this):Ap(this),3==this.readyState&&rI(this)}},Ze.Za=function(n){this.g&&(this.response=this.responseText=n,xd(this))},Ze.Ya=function(n){this.g&&(this.response=n,xd(this))},Ze.ka=function(){this.g&&xd(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Sp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var MO=It.JSON.parse;function Rn(n){xr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=X_,this.L=this.M=!1}$r(Rn,xr);var X_="",VD=/^https?$/i,iI=["POST","PUT"];function BD(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,jD(n),ey(n)}function jD(n){n.F||(n.F=!0,si(n,"complete"),si(n,"error"))}function $D(n){if(n.h&&typeof bw<"u"&&(!n.C[1]||4!=Rs(n)||2!=n.da()))if(n.v&&4==Rs(n))gp(n.La,0,n);else if(si(n,"readystatechange"),4==Rs(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(Zw)[1]||null;!i&&It.self&&It.self.location&&(i=It.self.location.protocol.slice(0,-1)),r=!VD.test(i?i.toLowerCase():"")}t=r}if(t)si(n,"complete"),si(n,"success");else{n.m=6;try{var a=2<Rs(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",jD(n)}}finally{ey(n)}}}function ey(n,e){if(n.g){oI(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||si(n,"ready");try{t.onreadystatechange=r}catch{}}}function oI(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function Rs(n){return n.g?n.g.readyState:0}function aI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case X_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function cI(n){let e="";return Pw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ty(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=cI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Tn(n,e,t))}function Mp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function lI(n){this.Ga=0,this.j=[],this.l=new B_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Mp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Mp("baseRetryDelayMs",5e3,n),this.hb=Mp("retryDelaySeedMs",1e4,n),this.eb=Mp("forwardChannelMaxRetries",2,n),this.xa=Mp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Xw(n&&n.concurrentRequestLimit),this.Ja=new SO,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ny(n){if(uI(n),3==n.H){var e=n.W++,t=ba(n.I);if(Tn(t,"SID",n.K),Tn(t,"RID",e),Tn(t,"TYPE","terminate"),Pp(n,t),(e=new vp(n,n.l,e)).L=2,e.v=Ip(ba(t)),t=!1,It.navigator&&It.navigator.sendBeacon)try{t=It.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=WD(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Cp(e)}GD(n)}function ry(n){n.g&&(iy(n),n.g.cancel(),n.g=null)}function uI(n){ry(n),n.u&&(It.clearTimeout(n.u),n.u=null),dI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function xp(n){if(!kD(n.i)&&!n.m){n.m=!0;var e=n.Na;fp||gD(),pp||(fp(),pp=!0),F_.add(e,n),n.C=0}}function Bl(n,e){var t;t=e?e.m:n.W++;const r=ba(n.I);Tn(r,"SID",n.K),Tn(r,"RID",t),Tn(r,"AID",n.V),Pp(n,r),n.o&&n.s&&ty(r,n.o,n.s),t=new vp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=HD(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),eI(n.i,t),q_(t,r,e)}function Pp(n,e){n.na&&Pw(n.na,function(t,r){Tn(e,r,t)}),n.h&&qw({},function(t,r){Tn(e,r,t)})}function HD(n,e,t){t=Math.min(n.j.length,t);var r=n.h?vi(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let g=0;g<t;g++){let v=i[g].g;const E=i[g].map;if(v-=a,0>v)a=Math.max(0,i[g].g-100),f=!1;else try{AO(E,l,"req"+v+"_")}catch{r&&r(E)}}if(f){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function PO(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;fp||gD(),pp||(fp(),pp=!0),F_.add(e,n),n.A=0}}function zD(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Md(vi(n.Ma,n),NO(n,n.A)),n.A++,0))}function iy(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function sy(n){n.g=new vp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ba(n.wa);Tn(e,"RID","rpc"),Tn(e,"SID",n.K),Tn(e,"AID",n.V),Tn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Tn(e,"TO",n.qa),Tn(e,"TYPE","xmlhttp"),Pp(n,e),n.o&&n.s&&ty(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Ip(ba(e)),t.s=null,t.S=!0,Gw(t,n)}function dI(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function OO(n,e){var t=null;if(n.g==e){dI(n),iy(n),n.g=null;var r=2}else{if(!Q_(n.i,e))return;t=e.F,LD(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;si(r=$_(),new H_(r,t)),xp(n)}else PO(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Ri(n,e){return!(FD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Md(vi(n.Na,n,e),NO(n,n.C)),n.C++,0)))}(n,e)||2==r&&zD(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ho(n,5);break;case 4:ho(n,10);break;case 3:ho(n,6);break;default:ho(n,2)}}function NO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ho(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=vi(n.pb,n);t||(t=new _c("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Kw(t,"https"),Ip(t)),function UD(n,e){const t=new B_;if(It.Image){const r=new Image;r.onload=D_(Dp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=D_(Dp,t,r,"TestLoadImage: error",!1,e),r.onabort=D_(Dp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=D_(Dp,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ci(2);n.H=0,n.h&&n.h.za(e),GD(n),uI(n)}function GD(n){if(n.H=0,n.ma=[],n.h){const e=tI(n.i);(0!=e.length||0!=n.j.length)&&(J1(n.ma,e),J1(n.ma,n.j),n.i.i.length=0,S_(n.j),n.j.length=0),n.h.ya()}}function oy(n,e,t){var r=t instanceof _c?ba(t):new _c(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Yw(r,r.m);else{var i=It.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new _c(null);r&&Kw(a,r),e&&(a.g=e),i&&Yw(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Tn(r,t,e),Tn(r,"VER",n.ra),Pp(n,r),r}function WD(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rn(t&&n.Ha&&!n.va?new Vl({ob:!0}):n.va)).Oa(n.J),e}function hI(){}function ay(){if(Td&&!(10<=Number(sD)))throw Error("Environmental error: no available transport.")}function ls(n,e){xr.call(this),this.g=new lI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!up(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!up(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new jl(this)}function qD(n){Hw.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function cy(){G_.call(this),this.status=1}function jl(n){this.g=n}function Ji(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Op(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],l=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;l=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(l<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((a=(e=t+((l=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=a+((l=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function gn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(Ze=Rn.prototype).Oa=function(n){this.M=n},Ze.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ED.g(),this.C=function wD(n){return n.h||(n.h=n.i())}(this.u?this.u:ED),this.g.onreadystatechange=vi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void BD(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=It.FormData&&n instanceof It.FormData,!(0<=Dw(iI,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{oI(this),0<this.B&&((this.L=function sI(n){return Td&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vi(this.ua,this)):this.A=gp(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){BD(this,a)}},Ze.ua=function(){typeof bw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,si(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,si(this,"complete"),si(this,"abort"),ey(this))},Ze.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ey(this,!0)),Rn.$.N.call(this)},Ze.La=function(){this.s||(this.G||this.v||this.l?$D(this):this.kb())},Ze.kb=function(){$D(this)},Ze.isActive=function(){return!!this.g},Ze.da=function(){try{return 2<Rs(this)?this.g.status:-1}catch{return-1}},Ze.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ze.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),MO(e)}},Ze.Ia=function(){return this.m},Ze.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=lI.prototype).ra=8,Ze.H=1,Ze.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new vp(this,this.l,n);let a=this.s;if(this.U&&(a?(a=aD(a),Sd(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=HD(this,i,e),Tn(t=ba(this.I),"RID",n),Tn(t,"CVER",22),this.F&&Tn(t,"X-HTTP-Session-Id",this.F),Pp(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(cI(a)))+"&"+e:this.o&&ty(t,this.o,a)),eI(this.i,i),this.bb&&Tn(t,"TYPE","init"),this.P?(Tn(t,"$req",e),Tn(t,"SID","null"),i.aa=!0,q_(i,t,null)):q_(i,t,e),this.H=2}}else 3==this.H&&(n?Bl(this,n):0==this.j.length||kD(this.i)||Bl(this))},Ze.Ma=function(){if(this.u=null,sy(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Md(vi(this.jb,this),n)}},Ze.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ci(10),ry(this),sy(this))},Ze.ib=function(){null!=this.v&&(this.v=null,ry(this),zD(this),Ci(19))},Ze.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ci(2)):(this.l.info("Failed to ping google.com"),Ci(1))},Ze.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ze=hI.prototype).Ba=function(){},Ze.Aa=function(){},Ze.za=function(){},Ze.ya=function(){},Ze.isActive=function(){return!0},Ze.Va=function(){},ay.prototype.g=function(n,e){return new ls(n,e)},$r(ls,xr),ls.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ci(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=oy(n,null,n.Y),xp(n)},ls.prototype.close=function(){ny(this.g)},ls.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Vw(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&xp(e)},ls.prototype.N=function(){this.g.h=null,delete this.j,ny(this.g),delete this.g,ls.$.N.call(this)},$r(qD,Hw),$r(cy,G_),$r(jl,hI),jl.prototype.Ba=function(){si(this.g,"a")},jl.prototype.Aa=function(n){si(this.g,new qD(n))},jl.prototype.za=function(n){si(this.g,new cy)},jl.prototype.ya=function(){si(this.g,"b")},$r(Ji,function RO(){this.blockSize=-1}),Ji.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ji.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)Op(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){Op(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){Op(this,r),i=0;break}}this.h=i,this.i+=e},Ji.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var ZD={};function fI(n){return-128<=n&&128>n?function X1(n,e){var t=ZD;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new gn([0|e],0>e?-1:0)}):new gn([0|n],0>n?-1:0)}function fo(n){if(isNaN(n)||!isFinite(n))return Hl;if(0>n)return oi(fo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=pI;return new gn(e,0)}var pI=4294967296,Hl=fI(0),Np=fI(1),kO=fI(16777216);function Da(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function po(n){return-1==n.h}function oi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new gn(t,~n.h).add(Np)}function ly(n,e){return n.add(oi(e))}function uy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Pd(n,e){this.g=n,this.h=e}function Rp(n,e){if(Da(e))throw Error("division by zero");if(Da(n))return new Pd(Hl,Hl);if(po(n))return e=Rp(oi(n),e),new Pd(oi(e.g),oi(e.h));if(po(e))return e=Rp(n,oi(e)),new Pd(oi(e.g),e.h);if(30<n.g.length){if(po(n)||po(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Np,r=e;0>=r.X(n);)t=KD(t),r=KD(r);var i=zl(t,1),a=zl(r,1);for(r=zl(r,2),t=zl(t,2);!Da(r);){var l=a.add(r);0>=l.X(n)&&(i=i.add(t),a=l),r=zl(r,1),t=zl(t,1)}return e=ly(n,i.R(e)),new Pd(i,e)}for(i=Hl;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(a=fo(t)).R(e);po(l)||0<l.X(n);)l=(a=fo(t-=r)).R(e);Da(a)&&(a=Np),i=i.add(a),n=ly(n,l)}return new Pd(i,n)}function KD(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new gn(t,n.h)}function zl(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new gn(i,n.h)}(Ze=gn.prototype).ea=function(){if(po(this))return-oi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:pI+r)*e,e*=pI}return n},Ze.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Da(this))return"0";if(po(this))return"-"+oi(this).toString(n);for(var e=fo(Math.pow(n,6)),t=this,r="";;){var i=Rp(t,e).g,a=((0<(t=ly(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Da(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ze.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ze.X=function(n){return po(n=ly(this,n))?-1:Da(n)?0:1},Ze.abs=function(){return po(this)?oi(this):this},Ze.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),l=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(a&=65535)}return new gn(t,-2147483648&t[t.length-1]?-1:0)},Ze.R=function(n){if(Da(this)||Da(n))return Hl;if(po(this))return po(n)?oi(this).R(oi(n)):oi(oi(this).R(n));if(po(n))return oi(this.R(oi(n)));if(0>this.X(kO)&&0>n.X(kO))return fo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,l=65535&this.D(r),f=n.D(i)>>>16,g=65535&n.D(i);t[2*r+2*i]+=l*g,uy(t,2*r+2*i),t[2*r+2*i+1]+=a*g,uy(t,2*r+2*i+1),t[2*r+2*i+1]+=l*f,uy(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,uy(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new gn(t,0)},Ze.gb=function(n){return Rp(this,n).h},Ze.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new gn(t,this.h&n.h)},Ze.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new gn(t,this.h|n.h)},Ze.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new gn(t,this.h^n.h)},ay.prototype.createWebChannel=ay.prototype.g,ls.prototype.send=ls.prototype.u,ls.prototype.open=ls.prototype.m,ls.prototype.close=ls.prototype.close,mp.NO_ERROR=0,mp.TIMEOUT=8,mp.HTTP_ERROR=6,$w.COMPLETE="complete",ID.EventType=_p,_p.OPEN="a",_p.CLOSE="b",_p.ERROR="c",_p.MESSAGE="d",xr.prototype.listen=xr.prototype.O,Rn.prototype.listenOnce=Rn.prototype.P,Rn.prototype.getLastError=Rn.prototype.Sa,Rn.prototype.getLastErrorCode=Rn.prototype.Ia,Rn.prototype.getStatus=Rn.prototype.da,Rn.prototype.getResponseJson=Rn.prototype.Wa,Rn.prototype.getResponseText=Rn.prototype.ja,Rn.prototype.send=Rn.prototype.ha,Rn.prototype.setWithCredentials=Rn.prototype.Oa,Ji.prototype.digest=Ji.prototype.l,Ji.prototype.reset=Ji.prototype.reset,Ji.prototype.update=Ji.prototype.j,gn.prototype.add=gn.prototype.add,gn.prototype.multiply=gn.prototype.R,gn.prototype.modulo=gn.prototype.gb,gn.prototype.compare=gn.prototype.X,gn.prototype.toNumber=gn.prototype.ea,gn.prototype.toString=gn.prototype.toString,gn.prototype.getBits=gn.prototype.D,gn.fromNumber=fo,gn.fromString=function $l(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return oi($l(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=fo(Math.pow(e,8)),r=Hl,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);8>a?(a=fo(Math.pow(e,a)),r=r.R(a).add(fo(l))):r=(r=r.R(t)).add(fo(l))}return r};var YD=Os.createWebChannelTransport=function(){return new ay},FO=Os.getStatEventTarget=function(){return $_()},gI=Os.ErrorCode=mp,QD=Os.EventType=$w,LO=Os.Event=Ea,mI=Os.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},JD=Os.FetchXmlHttpFactory=Vl,kp=Os.WebChannel=ID,XD=Os.XhrIo=Rn,UO=Os.Md5=Ji,Od=Os.Integer=gn;const VO="@firebase/firestore";class Pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let Fp="9.23.0";const Gl=new Pi.Yd("@firebase/firestore");function eS(){return Gl.logLevel}function Me(n,...e){if(Gl.logLevel<=Pi.in.DEBUG){const t=e.map(tS);Gl.debug(`Firestore (${Fp}): ${n}`,...t)}}function Cr(n,...e){if(Gl.logLevel<=Pi.in.ERROR){const t=e.map(tS);Gl.error(`Firestore (${Fp}): ${n}`,...t)}}function go(n,...e){if(Gl.logLevel<=Pi.in.WARN){const t=e.map(tS);Gl.warn(`Firestore (${Fp}): ${n}`,...t)}}function tS(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${Fp}) INTERNAL ASSERTION FAILED: `+n;throw Cr(e),new Error(e)}function rt(n,e){n||et()}function qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class BO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class u4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pr.UNAUTHENTICATED))}shutdown(){}}class jO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nS{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Or,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=l;e.enqueueRetryable((0,V.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Or)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt("string"==typeof r.accessToken),new BO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new Pr(e)}}class $O{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class HO{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new $O(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d4{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,Me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt("string"==typeof t.token),this.T=t.token,new rS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Lp(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Up{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Lp(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function Et(n,e){return n<e?-1:n>e?1:0}function Nd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function iS(n){return n+"\0"}class kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kn.fromMillis(Date.now())}static fromDate(e){return kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class at{constructor(e){this.timestamp=e}static fromTimestamp(e){return new at(e)}static min(){return new at(new kn(0,0))}static max(){return new at(new kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Vp{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gt extends Vp{construct(e,t,r){return new Gt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Gt(t)}static emptyPath(){return new Gt([])}}const zO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Vp{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return zO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new ye(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new ye(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new ye(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new ye(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(Gt.fromString(e))}static fromName(e){return new We(Gt.fromString(e).popFirst(5))}static empty(){return new We(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Gt(e.slice()))}}class dy{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function yI(n){return n.fields.find(e=>2===e.kind)}function Wl(n){return n.fields.filter(e=>2!==e.kind)}dy.UNKNOWN_ID=-1;class hy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Rd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Rd(0,us.min())}}function fy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=at.fromTimestamp(1e9===r?new kn(t+1,0):new kn(t,r));return new us(i,We.empty(),e)}function sS(n){return new us(n.readTime,n.key,-1)}class us{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new us(at.min(),We.empty(),-1)}static max(){return new us(at.max(),We.empty(),-1)}}function py(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Et(n.largestBatchId,e.largestBatchId))}const vI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function lr(n){return gy.apply(this,arguments)}function gy(){return gy=(0,V.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==vI)throw n;Me("LocalStore","Unexpectedly lost primary lease")}),gy.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},g=>r(g))}),l=!0,a===i&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(i=>i?te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new te((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let g=0;g<a;g++){const v=g;t(e[v]).next(E=>{l[v]=E,++f,f===a&&r(l)},E=>i(E))}})}static doWhile(e,t){return new te((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class my{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Or,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new ql(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=CI(r.target.error);this.v.reject(new ql(e,i))}}static open(e,t,r,i){try{return new my(t,e.transaction(i,r))}catch(a){throw new ql(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new oS(t)}}class ks{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===ks.S((0,z.z$)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Me("SimpleDb","Removing database:",e),Sa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,z.hl)())return!1;if(ks.C())return!0;const e=(0,z.z$)(),t=ks.S(e),r=0<t&&t<10,i=ks.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,V.Z)(function*(){return t.db||(Me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new ql(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new ye(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new ye(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new ql(e,f))},a.onupgradeneeded=l=>{Me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,V.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const g=my.open(a.db,e,l?"readonly":"readwrite",r),v=i(g).next(E=>(g.P(),E)).catch(E=>(g.abort(E),te.reject(E))).toPromise();return v.catch(()=>{}),yield g.R,v}catch(g){const v=g,E="FirebaseError"!==v.name&&f<3;if(Me("SimpleDb","Transaction failed with error:",v.message,"Retrying:",E),a.close(),!E)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ZO{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Sa(this.L.delete())}}class ql extends ye{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ki(n){return"IndexedDbTransactionError"===n.name}class oS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Me("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Sa(r)}add(e){return Me("SimpleDb","ADD",this.store.name,e,e),Sa(this.store.add(e))}get(e){return Sa(this.store.get(e)).next(t=>(void 0===t&&(t=null),Me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Me("SimpleDb","DELETE",this.store.name,e),Sa(this.store.delete(e))}count(){return Me("SimpleDb","COUNT",this.store.name),Sa(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new te((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Me("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new te((r,i)=>{t.onerror=a=>{const l=CI(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}W(e,t){const r=[];return new te((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const g=new ZO(f),v=t(f.primaryKey,f.value,g);if(v instanceof te){const E=v.catch(T=>(g.done(),te.reject(T)));r.push(E)}g.isDone?i():null===g.K?f.continue():f.continue(g.K)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Sa(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=CI(r.target.error);t(i)}})}let _y=!1;function CI(n){const e=ks.S((0,z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _y||(_y=!0,setTimeout(()=>{throw r},0)),r}}return n}class f4{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Me("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,V.Z)(function*(){t.task=null;try{Me("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){ki(r)?Me("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield lr(r)}yield t.et(6e4)}))}}class aS{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,V.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return te.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Me("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(f=>(Me("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=sS(a);py(l,r)>0&&(r=l)}),new us(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ds=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Bp(n){return null==n}function jp(n){return 0===n&&1/n==-1/0}function cS(n){return"number"==typeof n&&Number.isInteger(n)&&!jp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ai(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wI(e)),e=p4(n.get(t),e);return wI(e)}function p4(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function wI(n){return n+"\x01\x01"}function Yo(n){const e=n.length;if(rt(e>=2),2===e)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Gt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&et(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let g;0===i.length?g=f:(i+=f,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:et()}a=l+2}return new Gt(r)}const II=["userId","batchId"];function EI(n,e){return[n,ai(e)]}function yy(n,e,t){return[n,ai(e),t]}const lS={},uS=["prefixPath","collectionGroup","readTime","documentId"],KO=["prefixPath","collectionGroup","documentId"],dS=["collectionGroup","readTime","prefixPath","documentId"],hS=["canonicalId","targetId"],kd=["targetId","path"],vy=["path","targetId"],fS=["collectionId","parent"],pS=["indexId","uid"],YO=["uid","sequenceNumber"],QO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],g4=["indexId","uid","orderedDocumentKey"],gS=["userId","collectionPath","documentId"],JO=["userId","collectionPath","largestBatchId"],XO=["userId","collectionGroup","largestBatchId"],eN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],m4=[...eN,"documentOverlays"],tN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bI=tN,nN=[...bI,"indexConfiguration","indexState","indexEntries"];class TI extends qO{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Hr(n,e){const t=qe(n);return ks.M(t.ht,e)}function rN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Dn{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new Dn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new Dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new DI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new DI(this.root,e,this.comparator,!1)}getReverseIterator(){return new DI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new DI(this.root,e,this.comparator,!0)}}class DI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ci.RED,this.left=i??ci.EMPTY,this.right=a??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ci(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1,ci.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mS(this.data.getIterator())}getIteratorFrom(e){return new mS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class mS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fd(n){return n.hasNext()?n.getNext():void 0}class Fi{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new Fi([])}unionWith(e){let t=new mn(er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class yc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yc("Invalid base64 string: "+i):i}}(e);return new ur(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const SI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vc(n){if(rt(!!n),"string"==typeof n){let e=0;const t=SI.exec(n);if(rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fn(n.seconds),nanos:Fn(n.nanos)}}function Fn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function mo(n){return"string"==typeof n?ur.fromBase64String(n):ur.fromUint8Array(n)}function Kl(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function AI(n){const e=n.mapValue.fields.__previous_value__;return Kl(e)?AI(e):e}function Cy(n){const e=vc(n.mapValue.fields.__local_write_time__.timestampValue);return new kn(e.seconds,e.nanos)}class _4{constructor(e,t,r,i,a,l,f,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v}}class Aa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Aa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}const Cc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wy={nullValue:"NULL_VALUE"};function wc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kl(n)?4:sN(n)?9007199254740991:10:et()}function Qo(n,e){if(n===e)return!0;const t=wc(n);if(t!==wc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cy(n).isEqual(Cy(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=vc(r.timestampValue),l=vc(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,mo(n.bytesValue).isEqual(mo(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Fn(r.geoPointValue.latitude)===Fn(i.geoPointValue.latitude)&&Fn(r.geoPointValue.longitude)===Fn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Fn(r.integerValue)===Fn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Fn(r.doubleValue),l=Fn(i.doubleValue);return a===l?jp(a)===jp(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Nd(n.arrayValue.values||[],e.arrayValue.values||[],Qo);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(rN(a)!==rN(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!Qo(a[f],l[f])))return!1;return!0}(n,e);default:return et()}var i}function Ld(n,e){return void 0!==(n.values||[]).find(t=>Qo(t,e))}function Ma(n,e){if(n===e)return 0;const t=wc(n),r=wc(e);if(t!==r)return Et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Et(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Fn(i.integerValue||i.doubleValue),f=Fn(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return MI(n.timestampValue,e.timestampValue);case 4:return MI(Cy(n),Cy(e));case 5:return Et(n.stringValue,e.stringValue);case 6:return function(i,a){const l=mo(i),f=mo(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let g=0;g<l.length&&g<f.length;g++){const v=Et(l[g],f[g]);if(0!==v)return v}return Et(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Et(Fn(i.latitude),Fn(a.latitude));return 0!==l?l:Et(Fn(i.longitude),Fn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let g=0;g<l.length&&g<f.length;++g){const v=Ma(l[g],f[g]);if(v)return v}return Et(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Cc.mapValue&&a===Cc.mapValue)return 0;if(i===Cc.mapValue)return 1;if(a===Cc.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),g=a.fields||{},v=Object.keys(g);f.sort(),v.sort();for(let E=0;E<f.length&&E<v.length;++E){const T=Et(f[E],v[E]);if(0!==T)return T;const A=Ma(l[f[E]],g[v[E]]);if(0!==A)return A}return Et(f.length,v.length)}(n.mapValue,e.mapValue);default:throw et()}}function MI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Et(n,e);const t=vc(n),r=vc(e),i=Et(t.seconds,r.seconds);return 0!==i?i:Et(t.nanos,r.nanos)}function Ud(n){return xI(n)}function xI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=vc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?mo(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=xI(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${xI(r.fields[f])}`;return a+"}"}(n.mapValue):et();var e}function xa(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yS(n){return!!n&&"integerValue"in n}function Vd(n){return!!n&&"arrayValue"in n}function Iy(n){return!!n&&"nullValue"in n}function vS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ey(n){return!!n&&"mapValue"in n}function by(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=by(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=by(n.arrayValue.values[t]);return e}return Object.assign({},n)}function sN(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function oN(n){return"nullValue"in n?wy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xa(Aa.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function aN(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xa(Aa.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Cc:et()}function CS(n,e){const t=Ma(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function wS(n,e){const t=Ma(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ey(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=by(t)}setAll(e){let t=er.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=by(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Ey(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ey(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new zr(by(this.value))}}function PI(n){const e=[];return Zl(n.fields,(t,r)=>{const i=new er([t]);if(Ey(r)){const a=PI(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Fi(e)}class Sn{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Sn(e,0,at.min(),at.min(),at.min(),zr.empty(),0)}static newFoundDocument(e,t,r,i){return new Sn(e,1,t,at.min(),r,i,0)}static newNoDocument(e,t){return new Sn(e,2,t,at.min(),at.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new Sn(e,3,t,at.min(),at.min(),zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(at.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pa{constructor(e,t){this.position=e,this.inclusive=t}}function OI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(l.referenceValue),t.key):Ma(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function cN(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qo(n.position[t],e.position[t]))return!1;return!0}class Bd{constructor(e,t="asc"){this.field=e,this.dir=t}}function NI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class RI{}class jt extends RI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new dN(e,t,r):"array-contains"===t?new hN(e,r):"in"===t?new fN(e,r):"not-in"===t?new C4(e,r):"array-contains-any"===t?new w4(e,r):new jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new y4(e,r):new v4(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ma(t,this.value)):null!==t&&wc(this.value)===wc(t)&&this.matchesComparison(Ma(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class dn extends RI{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new dn(e,t)}matches(e){return Oa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Oa(n){return"and"===n.op}function kI(n){return"or"===n.op}function FI(n){return LI(n)&&Oa(n)}function LI(n){for(const e of n.filters)if(e instanceof dn)return!1;return!0}function Ty(n){if(n instanceof jt)return n.field.canonicalString()+n.op.toString()+Ud(n.value);if(FI(n))return n.filters.map(e=>Ty(e)).join(",");{const e=n.filters.map(t=>Ty(t)).join(",");return`${n.op}(${e})`}}function lN(n,e){return n instanceof jt?(t=n,(r=e)instanceof jt&&t.op===r.op&&t.field.isEqual(r.field)&&Qo(t.value,r.value)):n instanceof dn?function(t,r){return r instanceof dn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&lN(a,r.filters[l]),!0)}(n,e):void et();var t,r}function IS(n,e){const t=n.filters.concat(e);return dn.create(t,n.op)}function uN(n){return n instanceof jt?`${(e=n).field.canonicalString()} ${e.op} ${Ud(e.value)}`:n instanceof dn?function(e){return e.op.toString()+" {"+e.getFilters().map(uN).join(" ,")+"}"}(n):"Filter";var e}class dN extends jt{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class y4 extends jt{constructor(e,t){super(e,"in",t),this.keys=ES(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class v4 extends jt{constructor(e,t){super(e,"not-in",t),this.keys=ES(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ES(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class hN extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vd(t)&&Ld(t.arrayValue,this.value)}}class fN extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ld(this.value.arrayValue,t)}}class C4 extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ld(this.value.arrayValue,t)}}class w4 extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ld(this.value.arrayValue,r))}}class I4{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.dt=null}}function bS(n,e=null,t=[],r=[],i=null,a=null,l=null){return new I4(n,e,t,r,i,a,l)}function Yl(n){const e=qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ty(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Bp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ud(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ud(r)).join(",")),e.dt=t}return e.dt}function Dy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cN(n.startAt,e.startAt)&&cN(n.endAt,e.endAt)}function UI(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function VI(n,e){return n.filters.filter(t=>t instanceof jt&&t.field.isEqual(e))}function pN(n,e,t){let r=wy,i=!0;for(const a of VI(n,e)){let l=wy,f=!0;switch(a.op){case"<":case"<=":l=oN(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=wy}CS({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];CS({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function gN(n,e,t){let r=Cc,i=!0;for(const a of VI(n,e)){let l=Cc,f=!0;switch(a.op){case">=":case">":l=aN(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=Cc}wS({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];wS({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Na{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=g,this.wt=null,this._t=null}}function mN(n,e,t,r,i,a,l,f){return new Na(n,e,t,r,i,a,l,f)}function s(n){return new Na(n)}function o(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function c(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function d(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function h(n){return null!==n.collectionGroup}function p(n){const e=qe(n);if(null===e.wt){e.wt=[];const t=d(e),r=c(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Bd(t)),e.wt.push(new Bd(er.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Bd(er.keyField(),a))}}}return e.wt}function y(n){const e=qe(n);if(!e._t)if("F"===e.limitType)e._t=bS(e.path,e.collectionGroup,p(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of p(e))t.push(new Bd(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Pa(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Pa(e.startAt.position,e.startAt.inclusive):null;e._t=bS(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function C(n,e){e.getFirstInequalityField(),d(n);const t=n.filters.concat([e]);return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function b(n,e,t){return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function D(n,e){return Dy(y(n),y(e))&&n.limitType===e.limitType}function M(n){return`${Yl(y(n))}|lt:${n.limitType}`}function k(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>uN(r)).join(", ")}]`),Bp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ud(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ud(r)).join(",")),`Target(${t})`}(y(n))}; limitType=${n.limitType})`}function q(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of p(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=OI(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,p(t),r)||t.endAt&&!function(i,a,l){const f=OI(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,p(t),r)));var t,r}function Y(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ue(n){return(e,t)=>{let r=!1;for(const i of p(n)){const a=Se(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Se(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),g=l.data.field(i);return null!==f&&null!==g?Ma(f,g):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}class $e{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return iN(this.inner)}size(){return this.innerSize}}const ct=new Dn(We.comparator);function fe(){return ct}const vt=new Dn(We.comparator);function At(...n){let e=vt;for(const t of n)e=e.insert(t.key,t);return e}function cn(n){let e=vt;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qn(){return Xo()}function Jo(){return Xo()}function Xo(){return new $e(n=>n.toString(),(n,e)=>n.isEqual(e))}const BI=new Dn(We.comparator),_N=new mn(We.comparator);function Pt(...n){let e=_N;for(const t of n)e=e.add(t);return e}const L9=new mn(Et);function yN(){return L9}function E4(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jp(e)?"-0":e}}function b4(n){return{integerValue:""+n}}function T4(n,e){return cS(e)?b4(e):E4(n,e)}class TS{constructor(){this._=void 0}}function U9(n,e,t){return n instanceof Sy?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Kl(i)&&(i=AI(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Hp?S4(n,e):n instanceof zp?A4(n,e):function(r,i){const a=D4(r,i),l=M4(a)+M4(r.gt);return yS(a)&&yS(r.gt)?b4(l):E4(r.serializer,l)}(n,e)}function V9(n,e,t){return n instanceof Hp?S4(n,e):n instanceof zp?A4(n,e):t}function D4(n,e){return n instanceof Ay?yS(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Sy extends TS{}class Hp extends TS{constructor(e){super(),this.elements=e}}function S4(n,e){const t=x4(e);for(const r of n.elements)t.some(i=>Qo(i,r))||t.push(r);return{arrayValue:{values:t}}}class zp extends TS{constructor(e){super(),this.elements=e}}function A4(n,e){let t=x4(e);for(const r of n.elements)t=t.filter(i=>!Qo(i,r));return{arrayValue:{values:t}}}class Ay extends TS{constructor(e,t){super(),this.serializer=e,this.gt=t}}function M4(n){return Fn(n.integerValue||n.doubleValue)}function x4(n){return Vd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class jI{constructor(e,t){this.field=e,this.transform=t}}class j9{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function DS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class SS{}function P4(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new xy(n.key,tr.none()):new My(n.key,n.data,tr.none());{const t=n.data,r=zr.empty();let i=new mn(er.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Ql(n.key,r,new Fi(i.toArray()),tr.none())}}function $9(n,e,t){n instanceof My?function(r,i,a){const l=r.value.clone(),f=R4(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ql?function(r,i,a){if(!DS(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=R4(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(N4(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function $I(n,e,t,r){return n instanceof My?function(i,a,l,f){if(!DS(i.precondition,a))return l;const g=i.value.clone(),v=k4(i.fieldTransforms,f,a);return g.setAll(v),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ql?function(i,a,l,f){if(!DS(i.precondition,a))return l;const g=k4(i.fieldTransforms,f,a),v=a.data;return v.setAll(N4(i)),v.setAll(g),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(l=t,DS(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function H9(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=D4(r.transform,i||null);null!=a&&(null===t&&(t=zr.empty()),t.set(r.field,a))}return t||null}function O4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Nd(t,r,(i,a)=>function B9(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Hp&&r instanceof Hp||t instanceof zp&&r instanceof zp?Nd(t.elements,r.elements,Qo):t instanceof Ay&&r instanceof Ay?Qo(t.gt,r.gt):t instanceof Sy&&r instanceof Sy);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class My extends SS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ql extends SS{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function N4(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function R4(n,e,t){const r=new Map;rt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,V9(l,f,t[i]))}return r}function k4(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,U9(a,l,e))}return r}class xy extends SS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vN extends SS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class CN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&$9(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$I(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$I(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Jo();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const g=P4(l,f);null!==g&&r.set(i.key,g),l.isValidDocument()||l.convertToNoDocument(at.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pt())}isEqual(e){return this.batchId===e.batchId&&Nd(this.mutations,e.mutations,(t,r)=>O4(t,r))&&Nd(this.baseMutations,e.baseMutations,(t,r)=>O4(t,r))}}class wN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length);let i=BI;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new wN(e,t,r,i)}}class IN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class G9{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gr,Xt;function F4(n){switch(n){default:return et();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function L4(n){if(void 0===n)return Cr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Gr.OK:return ae.OK;case Gr.CANCELLED:return ae.CANCELLED;case Gr.UNKNOWN:return ae.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return ae.INTERNAL;case Gr.UNAVAILABLE:return ae.UNAVAILABLE;case Gr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Gr.NOT_FOUND:return ae.NOT_FOUND;case Gr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Gr.ABORTED:return ae.ABORTED;case Gr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Gr.DATA_LOSS:return ae.DATA_LOSS;default:return et()}}(Xt=Gr||(Gr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class EN{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return AS}static getOrCreateInstance(){return null===AS&&(AS=new EN),AS}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let AS=null;function U4(){return new TextEncoder}const W9=new Od([4294967295,4294967295],0);function V4(n){const e=U4().encode(n),t=new UO;return t.update(e),new Uint8Array(t.digest())}function B4(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Od([t,r],0),new Od([i,a],0)]}class bN{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new HI(`Invalid padding: ${t}`);if(r<0)throw new HI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new HI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new HI(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Od.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Od.fromNumber(r)));return 1===i.compare(W9)&&(i=new Od([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=V4(e),[r,i]=B4(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new bN(a,i,t);return r.forEach(f=>l.insert(f)),l}insert(e){if(0===this.It)return;const t=V4(e),[r,i]=B4(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class HI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zI{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,GI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new zI(at.min(),i,new Dn(Et),fe(),Pt())}}class GI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new GI(r,t,Pt(),Pt(),Pt())}}class MS{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class j4{constructor(e,t){this.targetId=e,this.Vt=t}}class $4{constructor(e,t,r=ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class H4{constructor(){this.St=0,this.Dt=G4(),this.Ct=ur.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Pt(),t=Pt(),r=Pt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new GI(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=G4()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class q9{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=fe(),this.zt=z4(),this.Wt=new Dn(Et)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const l=a.target;if(UI(l))if(0===i){const f=new We(l.path);this.Yt(r,f,Sn.newNoDocument(f,at.min()))}else rt(1===i);else{const f=this.ie(r);if(f!==i){const g=this.re(e,f);0!==g&&(this.ee(r),this.Wt=this.Wt.insert(r,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=EN.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,E,T){var A,R,W,Q,J,be;const ze={localCacheCount:E,existenceFilterCount:T.count},Re=T.unchangedNames;return Re&&(ze.bloomFilter={applied:0===v,hashCount:null!==(A=Re?.hashCount)&&void 0!==A?A:0,bitmapLength:null!==(Q=null===(W=null===(R=Re?.bits)||void 0===R?void 0:R.bitmap)||void 0===W?void 0:W.length)&&void 0!==Q?Q:0,padding:null!==(be=null===(J=Re?.bits)||void 0===J?void 0:J.padding)&&void 0!==be?be:0}),ze}(g,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:f=0}=r;let g,v;try{g=mo(a).toUint8Array()}catch(E){if(E instanceof yc)return go("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw E}try{v=new bN(g,l,f)}catch(E){return go(E instanceof HI?"BloomFilter error: ":"Applying bloom filter failed: ",E),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const l=this.Gt.ue(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,l)=>{const f=this.se(l);if(f){if(a.current&&UI(f.target)){const g=new We(f.target.path);null!==this.jt.get(g)||this.ae(l,g)||this.Yt(l,g,Sn.newNoDocument(g,e))}a.Mt&&(t.set(l,a.Ot()),a.Ft())}});let r=Pt();this.zt.forEach((a,l)=>{let f=!0;l.forEachWhile(g=>{const v=this.se(g);return!v||"TargetPurposeLimboResolution"===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const i=new zI(e,t,this.Wt,this.jt,r);return this.jt=fe(),this.zt=z4(),this.Wt=new Dn(Et),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new H4,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new mn(Et),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Me("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new H4),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function z4(){return new Dn(We.comparator)}function G4(){return new Dn(We.comparator)}const Z9={asc:"ASCENDING",desc:"DESCENDING"},K9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y9={and:"AND",or:"OR"};class Q9{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function TN(n,e){return n.useProto3Json||Bp(e)?e:{value:e}}function Py(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function J9(n,e){return Py(n,e.toTimestamp())}function Nr(n){return rt(!!n),at.fromTimestamp(function(e){const t=vc(e);return new kn(t.seconds,t.nanos)}(n))}function DN(n,e){return(t=n,new Gt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function q4(n){const e=Gt.fromString(n);return rt(nU(e)),e}function WI(n,e){return DN(n.databaseId,e.path)}function Ic(n,e){const t=q4(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(K4(t))}function SN(n,e){return DN(n.databaseId,e)}function Z4(n){const e=q4(n);return 4===e.length?Gt.emptyPath():K4(e)}function qI(n){return new Gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function K4(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Y4(n,e,t){return{name:WI(n,e),fields:t.value.mapValue.fields}}function Q4(n,e,t){const r=Ic(n,e.name),i=Nr(e.updateTime),a=e.createTime?Nr(e.createTime):at.min(),l=new zr({mapValue:{fields:e.fields}}),f=Sn.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function ZI(n,e){let t;if(e instanceof My)t={update:Y4(n,e.key,e.value)};else if(e instanceof xy)t={delete:WI(n,e.key)};else if(e instanceof Ql)t={update:Y4(n,e.key,e.data),updateMask:o7(e.fieldMask)};else{if(!(e instanceof vN))return et();t={verify:WI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Sy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Hp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ay)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:J9(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function AN(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?tr.updateTime(Nr(i.updateTime)):void 0!==i.exists?tr.exists(i.exists):tr.none():tr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(rt("REQUEST_TIME"===l.setToServerValue),f=new Sy):"appendMissingElements"in l?f=new Hp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new zp(l.removeAllFromArray.values||[]):"increment"in l?f=new Ay(a,l.increment):et();const g=er.fromServerFormat(l.fieldPath);return new jI(g,f)}(n,i)):[];var i;if(e.update){const i=Ic(n,e.update.name),a=new zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Fi((e.updateMask.fieldPaths||[]).map(v=>er.fromServerFormat(v)));return new Ql(i,a,l,t,r)}return new My(i,a,t,r)}if(e.delete){const i=Ic(n,e.delete);return new xy(i,t)}if(e.verify){const i=Ic(n,e.verify);return new vN(i,t)}return et()}function J4(n,e){return{documents:[SN(n,e.path)]}}function MN(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=SN(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=SN(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return tU(dn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(v=>{return{field:jd((E=v).field),direction:r7(E.dir)};var E})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=TN(n,e.limit);var f,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function X4(n){let e=Z4(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rt(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let a=[];t.where&&(a=function(E){const T=eU(E);return T instanceof dn&&FI(T)?T.getFilters():[T]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(E=>{return new Bd(Oy((T=E).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let f=null;t.limit&&(f=function(E){let T;return T="object"==typeof E?E.value:E,Bp(T)?null:T}(t.limit));let g=null;var E;t.startAt&&(g=new Pa((E=t.startAt).values||[],!!E.before));let v=null;return t.endAt&&(v=function(E){return new Pa(E.values||[],!E.before)}(t.endAt)),mN(e,i,l,a,f,"F",g,v)}function eU(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Oy(e.unaryFilter.field);return jt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Oy(e.unaryFilter.field);return jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Oy(e.unaryFilter.field);return jt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Oy(e.unaryFilter.field);return jt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?jt.create(Oy((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return dn.create(e.compositeFilter.filters.map(t=>eU(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function r7(n){return Z9[n]}function i7(n){return K9[n]}function s7(n){return Y9[n]}function jd(n){return{fieldPath:n.canonicalString()}}function Oy(n){return er.fromServerFormat(n.fieldPath)}function tU(n){return n instanceof jt?function(e){if("=="===e.op){if(vS(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NAN"}};if(Iy(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vS(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NOT_NAN"}};if(Iy(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jd(e.field),op:i7(e.op),value:e.value}}}(n):n instanceof dn?function(e){const t=e.getFilters().map(r=>tU(r));return 1===t.length?t[0]:{compositeFilter:{op:s7(e.op),filters:t}}}(n):et()}function o7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Jl{constructor(e,t,r,i,a=at.min(),l=at.min(),f=ur.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class rU{constructor(e){this.fe=e}}function iU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:WI(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Py(i,a.version.toTimestamp()),createTime:Py(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gp(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Gp(e.version)}}var i,a;return r}function xS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wp(n){const e=new kn(n.seconds,n.nanoseconds);return at.fromTimestamp(e)}function qp(n,e){const t=(e.baseMutations||[]).map(a=>AN(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>AN(n.fe,a)),i=kn.fromMillis(e.localWriteTimeMs);return new CN(e.batchId,i,t,r)}function KI(n){const e=Wp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Wp(n.lastLimboFreeSnapshotVersion):at.min();let r;var i;return void 0!==n.query.documents?(rt(1===(i=n.query).documents.length),r=y(s(Z4(i.documents[0])))):r=y(X4(n.query)),new Jl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ur.fromBase64String(n.resumeToken))}function sU(n,e){const t=Gp(e.snapshotVersion),r=Gp(e.lastLimboFreeSnapshotVersion);let i;i=UI(e.target)?J4(n.fe,e.target):MN(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yl(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function xN(n){const e=X4({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?b(e,e.limit,"L"):e}function PN(n,e){return new IN(e.largestBatchId,AN(n.fe,e.overlayMutation))}function oU(n,e){const t=e.path.lastSegment();return[n,ai(e.path.popLast()),t]}function aU(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Gp(r.readTime),documentKey:ai(r.documentKey.path),largestBatchId:r.largestBatchId}}class c7{getBundleMetadata(e,t){return cU(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Wp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return cU(e).put({bundleId:(r=t).id,createTime:Gp(Nr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return lU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:xN(i.bundledQuery),readTime:Wp(i.readTime)};var i})}saveNamedQuery(e,t){return lU(e).put({name:(r=t).name,readTime:Gp(Nr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function cU(n){return Hr(n,"bundles")}function lU(n){return Hr(n,"namedQueries")}class PS{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new PS(e,t.uid||"")}getOverlay(e,t){return YI(e).get(oU(this.userId,t)).next(r=>r?PN(this.serializer,r):null)}getOverlays(e,t){const r=qn();return te.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new IN(t,l);i.push(this.we(e,f))}),te.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(ai(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(YI(e).J("collectionPathOverlayIndex",f))}),te.waitFor(a)}getOverlaysForCollection(e,t,r){const i=qn(),a=ai(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return YI(e).j("collectionPathOverlayIndex",l).next(f=>{for(const g of f){const v=PN(this.serializer,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=qn();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return YI(e).X({index:"collectionGroupOverlayIndex",range:f},(g,v,E)=>{const T=PN(this.serializer,v);a.size()<i||T.largestBatchId===l?(a.set(T.getKey(),T),l=T.largestBatchId):E.done()}).next(()=>a)}we(e,t){return YI(e).put(function(r,i,a){const[l,f,g]=oU(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:ZI(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function YI(n){return Hr(n,"documentOverlays")}class Zp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Fn(e.integerValue));else if("doubleValue"in e){const r=Fn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),jp(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(mo(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?sN(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),We.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function l7(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function uU(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=l7(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Zp.Ve=new Zp;class u7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=uU(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=uU(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class d7{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class h7{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class QI{constructor(){this.je=new u7,this.ze=new d7(this.je),this.We=new h7(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Kp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Kp(this.indexId,this.documentKey,this.arrayValue,r)}}function $d(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=dU(n.arrayValue,e.arrayValue),0!==t?t:(t=dU(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function dU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class f7{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){rt(e.collectionGroup===this.collectionId);const t=yI(e);if(void 0!==t&&!this.en(t))return!1;const r=Wl(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[l++],f))return!1}++a}for(;a<r.length;++a)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function hU(n){var e,t;if(rt(n instanceof jt||n instanceof dn),n instanceof jt){if(n instanceof fN){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>jt.create(n.field,"==",a)))||[];return dn.create(i,"or")}return n}const r=n.filters.map(i=>hU(i));return dn.create(r,n.op)}function p7(n){if(0===n.getFilters().length)return[];const e=RN(hU(n));return rt(fU(e)),ON(e)||NN(e)?[e]:e.getFilters()}function ON(n){return n instanceof jt}function NN(n){return n instanceof dn&&FI(n)}function fU(n){return ON(n)||NN(n)||function(e){if(e instanceof dn&&kI(e)){for(const t of e.getFilters())if(!ON(t)&&!NN(t))return!1;return!0}return!1}(n)}function RN(n){if(rt(n instanceof jt||n instanceof dn),n instanceof jt)return n;if(1===n.filters.length)return RN(n.filters[0]);const e=n.filters.map(r=>RN(r));let t=dn.create(e,n.op);return t=OS(t),fU(t)?t:(rt(t instanceof dn),rt(Oa(t)),rt(t.filters.length>1),t.filters.reduce((r,i)=>kN(r,i)))}function kN(n,e){let t;return rt(n instanceof jt||n instanceof dn),rt(e instanceof jt||e instanceof dn),t=n instanceof jt?e instanceof jt?dn.create([n,e],"and"):pU(n,e):e instanceof jt?pU(e,n):function(r,i){if(rt(r.filters.length>0&&i.filters.length>0),Oa(r)&&Oa(i))return IS(r,i.getFilters());const a=kI(r)?r:i,l=kI(r)?i:r,f=a.filters.map(g=>kN(g,l));return dn.create(f,"or")}(n,e),OS(t)}function pU(n,e){if(Oa(e))return IS(e,n.getFilters());{const t=e.filters.map(r=>kN(n,r));return dn.create(t,"or")}}function OS(n){if(rt(n instanceof jt||n instanceof dn),n instanceof jt)return n;const e=n.getFilters();if(1===e.length)return OS(e[0]);if(LI(n))return n;const t=e.map(i=>OS(i)),r=[];return t.forEach(i=>{i instanceof jt?r.push(i):i instanceof dn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:dn.create(r,n.op)}class g7{constructor(){this.rn=new FN}addToCollectionParentIndex(e,t){return this.rn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(us.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(us.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class FN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mn(Gt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mn(Gt.comparator)).toArray()}}const NS=new Uint8Array(0);class m7{constructor(e,t){this.user=e,this.databaseId=t,this.on=new FN,this.un=new $e(r=>Yl(r),(r,i)=>Dy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:ai(i)};return gU(e).put(a)}return te.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[iS(t),""],!1,!0);return gU(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Yo(l.parent))}return r})}addFieldIndex(e,t){const r=RS(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=XI(e);return a.next(f=>{l.put(aU(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=RS(e),i=XI(e),a=JI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=JI(e);let i=!0;const a=new Map;return te.forEach(this.cn(t),l=>this.an(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=Pt();const f=[];return te.forEach(a,(g,v)=>{var E;Me("IndexedDbIndexManager",`Using index ${E=g,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Re=>`${Re.fieldPath}:${Re.kind}`).join(",")}`} to execute ${Yl(t)}`);const T=function(Re,Ye){const gt=yI(Ye);if(void 0===gt)return null;for(const Mt of VI(Re,gt.fieldPath))switch(Mt.op){case"array-contains-any":return Mt.value.arrayValue.values||[];case"array-contains":return[Mt.value]}return null}(v,g),A=function(Re,Ye){const gt=new Map;for(const Mt of Wl(Ye))for(const kr of VI(Re,Mt.fieldPath))switch(kr.op){case"==":case"in":gt.set(Mt.fieldPath.canonicalString(),kr.value);break;case"not-in":case"!=":return gt.set(Mt.fieldPath.canonicalString(),kr.value),Array.from(gt.values())}return null}(v,g),R=function(Re,Ye){const gt=[];let Mt=!0;for(const kr of Wl(Ye)){const Us=0===kr.kind?pN(Re,kr.fieldPath,Re.startAt):gN(Re,kr.fieldPath,Re.startAt);gt.push(Us.value),Mt&&(Mt=Us.inclusive)}return new Pa(gt,Mt)}(v,g),W=function(Re,Ye){const gt=[];let Mt=!0;for(const kr of Wl(Ye)){const Us=0===kr.kind?gN(Re,kr.fieldPath,Re.endAt):pN(Re,kr.fieldPath,Re.endAt);gt.push(Us.value),Mt&&(Mt=Us.inclusive)}return new Pa(gt,Mt)}(v,g),Q=this.hn(g,v,R),J=this.hn(g,v,W),be=this.ln(g,v,A),ze=this.fn(g.indexId,T,Q,R.inclusive,J,W.inclusive,be);return te.forEach(ze,Re=>r.H(Re,t.limit).next(Ye=>{Ye.forEach(gt=>{const Mt=We.fromSegments(gt.documentKey);l.has(Mt)||(l=l.add(Mt),f.push(Mt))})}))}).next(()=>f)}return te.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:p7(dn.create(e.filters,"and")).map(r=>bS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,l,f){const g=(null!=t?t.length:1)*Math.max(r.length,a.length),v=g/(null!=t?t.length:1),E=[];for(let T=0;T<g;++T){const A=t?this.dn(t[T/v]):NS,R=this.wn(e,A,r[T%v],i),W=this._n(e,A,a[T%v],l),Q=f.map(J=>this.wn(e,A,J,!0));E.push(...this.createRange(R,W,Q))}return E}wn(e,t,r,i){const a=new Kp(e,We.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new Kp(e,We.empty(),t,r);return i?a.Je():a}an(e,t){const r=new f7(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.tn(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return te.forEach(i,a=>this.an(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let g=new mn(er.comparator),v=!1;for(const E of f.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?v=!0:g=g.add(T.field));for(const E of f.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new QI;for(const i of Wl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.He(i.kind);Zp.Ve._e(a,l)}return r.Qe()}dn(e){const t=new QI;return Zp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new QI;return Zp.Ve._e(xa(this.databaseId,t),r.He(function(i){const a=Wl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new QI);let a=0;for(const l of Wl(e)){const f=r[a++];for(const g of i)if(this.yn(t,l.fieldPath)&&Vd(f))i=this.pn(i,l,f);else{const v=g.He(l.kind);Zp.Ve._e(f,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const g=new QI;g.seed(f.Qe()),Zp.Ve._e(l,g.He(t.kind)),a.push(g)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof jt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=RS(e),i=XI(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return te.forEach(a,f=>i.get([f.indexId,this.uid]).next(g=>{l.push(function(v,E){const T=E?new Rd(E.sequenceNumber,new us(Wp(E.readTime),new We(Yo(E.documentKey)),E.largestBatchId)):Rd.empty(),A=v.fields.map(([R,W])=>new hy(er.fromServerFormat(R),W));return new dy(v.indexId,v.collectionGroup,A,T)}(f,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Et(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=RS(e),a=XI(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>te.forEach(f,g=>a.put(aU(g.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?te.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),te.forEach(f,g=>this.En(e,i,g).next(v=>{const E=this.An(a,g);return v.isEqual(E)?te.resolve():this.vn(e,a,g,v,E)}))))})}Rn(e,t,r,i){return JI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return JI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=JI(e);let a=new mn($d);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,f)=>{a=a.add(new Kp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new mn($d);const i=this.mn(t,e);if(null==i)return r;const a=yI(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Vd(l))for(const f of l.arrayValue.values||[])r=r.add(new Kp(t.indexId,e.key,this.dn(f),i))}else r=r.add(new Kp(t.indexId,e.key,NS,i));return r}vn(e,t,r,i,a){Me("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,g,v,E,T){const A=f.getIterator(),R=g.getIterator();let W=Fd(A),Q=Fd(R);for(;W||Q;){let J=!1,be=!1;if(W&&Q){const ze=v(W,Q);ze<0?be=!0:ze>0&&(J=!0)}else null!=W?be=!0:J=!0;J?(E(Q),Q=Fd(R)):be?(T(W),W=Fd(A)):(W=Fd(A),Q=Fd(R))}}(i,a,$d,f=>{l.push(this.Rn(e,t,r,f))},f=>{l.push(this.Pn(e,t,r,f))}),te.waitFor(l)}Tn(e){let t=1;return XI(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>$d(l,f)).filter((l,f,g)=>!f||0!==$d(l,g[f-1]));const i=[];i.push(e);for(const l of r){const f=$d(l,e),g=$d(l,t);if(0===f)i[0]=e.Je();else if(f>0&&g<0)i.push(l),i.push(l.Je());else if(g>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,NS,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,NS,[]]))}return a}bn(e,t){return $d(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mU)}getMinOffset(e,t){return te.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||et())).next(mU)}}function gU(n){return Hr(n,"collectionParents")}function JI(n){return Hr(n,"indexEntries")}function RS(n){return Hr(n,"indexConfiguration")}function XI(n){return Hr(n,"indexState")}function mU(n){rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;py(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new us(e.readTime,e.documentKey,t)}const _U={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yU(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const g=r.X({range:l},(E,T,A)=>(f++,A.delete()));a.push(g.next(()=>{rt(1===f)}));const v=[];for(const E of t.mutations){const T=yy(e,E.key.path,t.batchId);a.push(i.delete(T)),v.push(E.key)}return te.waitFor(a).next(()=>v)}function kS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class FS{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){rt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new FS(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hd(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Ny(e),l=Hd(e);return l.add({}).next(f=>{rt("number"==typeof f);const g=new CN(f,t,r,i),v=function(A,R,W){const Q=W.baseMutations.map(be=>ZI(A.fe,be)),J=W.mutations.map(be=>ZI(A.fe,be));return{userId:R,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:Q,mutations:J}}(this.serializer,this.userId,g),E=[];let T=new mn((A,R)=>Et(A.canonicalString(),R.canonicalString()));for(const A of i){const R=yy(this.userId,A.key.path,f);T=T.add(A.key.path.popLast()),E.push(l.put(v)),E.push(a.put(R,lS))}return T.forEach(A=>{E.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Vn[f]=g.keys()}),te.waitFor(E).next(()=>g)})}lookupMutationBatch(e,t){return Hd(e).get(t).next(r=>r?(rt(r.userId===this.userId),qp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?te.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Hd(e).X({index:"userMutationsIndex",range:i},(l,f,g)=>{f.userId===this.userId&&(rt(f.batchId>=r),a=qp(this.serializer,f)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Hd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hd(e).j("userMutationsIndex",t).next(r=>r.map(i=>qp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=EI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Ny(e).X({range:i},(l,f,g)=>{const[v,E,T]=l,A=Yo(E);if(v===this.userId&&t.path.isEqual(A))return Hd(e).get(T).next(R=>{if(!R)throw et();rt(R.userId===this.userId),a.push(qp(this.serializer,R))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Et);const i=[];return t.forEach(a=>{const l=EI(this.userId,a.path),f=IDBKeyRange.lowerBound(l),g=Ny(e).X({range:f},(v,E,T)=>{const[A,R,W]=v,Q=Yo(R);A===this.userId&&a.path.isEqual(Q)?r=r.add(W):T.done()});i.push(g)}),te.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=EI(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new mn(Et);return Ny(e).X({range:l},(g,v,E)=>{const[T,A,R]=g,W=Yo(A);T===this.userId&&r.isPrefixOf(W)?W.length===i&&(f=f.add(R)):E.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Hd(e).get(a).next(l=>{if(null===l)throw et();rt(l.userId===this.userId),r.push(qp(this.serializer,l))}))}),te.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return yU(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),te.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ny(e).X({range:r},(a,l,f)=>{if(a[0]===this.userId){const g=Yo(a[1]);i.push(g)}else f.done()}).next(()=>{rt(0===i.length)})})}containsKey(e,t){return vU(e,this.userId,t)}xn(e){return CU(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vU(n,e,t){const r=EI(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Ny(n).X({range:a,Y:!0},(f,g,v)=>{const[E,T,A]=f;E===e&&T===i&&(l=!0),v.done()}).next(()=>l)}function Hd(n){return Hr(n,"mutations")}function Ny(n){return Hr(n,"documentMutations")}function CU(n){return Hr(n,"mutationQueues")}class Yp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Yp(0)}static Mn(){return new Yp(-1)}}class _7{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Yp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>at.fromTimestamp(new kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ry(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Ry(e).X((l,f)=>{const g=KI(f);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>te.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Ry(e).X((r,i)=>{const a=KI(i);t(a)})}$n(e){return wU(e).get("targetGlobalKey").next(t=>(rt(null!==t),t))}On(e,t){return wU(e).put("targetGlobalKey",t)}Fn(e,t){return Ry(e).put(sU(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Yl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Ry(e).X({range:i,index:"queryTargetsIndex"},(l,f,g)=>{const v=KI(f);Dy(t,v.target)&&(a=v,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=zd(e);return t.forEach(l=>{const f=ai(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),te.waitFor(i)}removeMatchingKeys(e,t,r){const i=zd(e);return te.forEach(t,a=>{const l=ai(a.path);return te.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=zd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=zd(e);let a=Pt();return i.X({range:r,Y:!0},(l,f,g)=>{const v=Yo(l[1]),E=new We(v);a=a.add(E)}).next(()=>a)}containsKey(e,t){const r=ai(t.path),i=IDBKeyRange.bound([r],[iS(r)],!1,!0);let a=0;return zd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,f],g,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}le(e,t){return Ry(e).get(t).next(r=>r?KI(r):null)}}function Ry(n){return Hr(n,"targets")}function wU(n){return Hr(n,"targetGlobal")}function zd(n){return Hr(n,"targetDocuments")}function IU([n,e],[t,r]){const i=Et(n,t);return 0===i?Et(e,r):i}class y7{constructor(e){this.Ln=e,this.buffer=new mn(IU),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();IU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Me("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,V.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ki(r)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield lr(r)}yield t.Qn(3e5)}))}}class v7{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(ds.ct);const r=new y7(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(_U)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_U):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,l,f,g,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,l=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,f=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(v=Date.now(),eS()<=Pi.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-E}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(g-f)+`ms\n\tRemoved ${T} documents in `+(v-g)+`ms\nTotal Duration: ${v-E}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class C7{constructor(e,t){this.db=e,this.garbageCollector=function bU(n,e){return new v7(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return LS(e,r)}removeReference(e,t,r){return LS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return LS(e,t)}Xn(e,t){return function(r,i){let a=!1;return CU(r).Z(l=>vU(r,l,i).next(f=>(f&&(a=!0),te.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(l,f)=>{if(f<=t){const g=this.Xn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,at.min()),zd(e).delete([0,ai(l.path)])))});i.push(g)}}).next(()=>te.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return LS(e,t)}Yn(e,t){const r=zd(e);let i,a=ds.ct;return r.X({index:"documentTargetsIndex"},([l,f],{path:g,sequenceNumber:v})=>{0===l?(a!==ds.ct&&t(new We(Yo(i)),a),a=v,i=g):a=ds.ct}).next(()=>{a!==ds.ct&&t(new We(Yo(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function LS(n,e){return zd(n).put((r=n.currentSequenceNumber,{targetId:0,path:ai(e.path),sequenceNumber:r}));var r}class TU{constructor(){this.changes=new $e(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class w7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Qp(e).put(r)}removeEntry(e,t,r){return Qp(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],xS(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Sn.newInvalidDocument(t);return Qp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(eE(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:Sn.newInvalidDocument(t)};return Qp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(eE(t))},(i,a)=>{r={document:this.ts(t,a),size:kS(a)}}).next(()=>r)}getEntries(e,t){let r=fe();return this.ns(e,t,(i,a)=>{const l=this.ts(i,a);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=fe(),i=new Dn(We.comparator);return this.ns(e,t,(a,l)=>{const f=this.ts(a,l);r=r.insert(a,f),i=i.insert(a,kS(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return te.resolve();let i=new mn(MU);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(eE(i.first()),eE(i.last())),l=i.getIterator();let f=l.getNext();return Qp(e).X({index:"documentKeyIndex",range:a},(g,v,E)=>{const T=We.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&MU(f,T)<0;)r(f,null),f=l.getNext();f&&f.isEqual(T)&&(r(f,v),f=l.hasNext()?l.getNext():null),f?E.G(eE(f)):E.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),xS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qp(e).j(IDBKeyRange.bound(l,f,!0)).next(g=>{let v=fe();for(const E of g){const T=this.ts(We.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(q(t,T)||i.has(T.key))&&(v=v.insert(T.key,T))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=fe();const l=AU(t,r),f=AU(t,us.max());return Qp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(g,v,E)=>{const T=this.ts(We.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(T.key,T),a.size===i&&E.done()}).next(()=>a)}newChangeBuffer(e){return new I7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return SU(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}Zn(e,t){return SU(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function a7(n,e){let t;if(e.document)t=Q4(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=Wp(e.noDocument.readTime);t=Sn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=We.fromSegments(e.unknownDocument.path),i=Wp(e.unknownDocument.version);t=Sn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new kn(r[0],r[1]);return at.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(at.min()))return r}return Sn.newInvalidDocument(e)}}function DU(n){return new w7(n)}class I7 extends TU{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new $e(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new mn((a,l)=>Et(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),l.isValidDocument()){const g=iU(this.os.serializer,l);i=i.add(a.path.popLast());const v=kS(g);r+=v-f.size,t.push(this.os.addEntry(e,a,g))}else if(r-=f.size,this.trackRemovals){const g=iU(this.os.serializer,l.convertToNoDocument(at.min()));t.push(this.os.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,l)=>{this.us.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function SU(n){return Hr(n,"remoteDocumentGlobal")}function Qp(n){return Hr(n,"remoteDocumentsV14")}function eE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AU(n,e){const t=e.documentKey.path.toArray();return[n,xS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function MU(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Et(t[a],r[a]),i)return i;return i=Et(t.length,r.length),i||(i=Et(t[t.length-2],r[r.length-2]),i||Et(t[t.length-1],r[r.length-1]))}class E7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&$I(r.mutation,i,Fi.empty(),kn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pt()){const i=qn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=At();return a.forEach((f,g)=>{l=l.insert(f,g.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=qn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=fe();const l=Xo(),f=Xo();return t.forEach((g,v)=>{const E=r.get(v.key);i.has(v.key)&&(void 0===E||E.mutation instanceof Ql)?a=a.insert(v.key,v):void 0!==E?(l.set(v.key,E.mutation.getFieldMask()),$I(E.mutation,v,E.mutation.getFieldMask(),kn.now())):l.set(v.key,Fi.empty())}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((v,E)=>l.set(v,E)),t.forEach((v,E)=>{var T;return f.set(v,new E7(E,null!==(T=l.get(v))&&void 0!==T?T:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Xo();let i=new Dn((l,f)=>l-f),a=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let E=r.get(g)||Fi.empty();E=f.applyToLocalView(v,E),r.set(g,E);const T=(i.get(f.batchId)||Pt()).add(g);i=i.insert(f.batchId,T)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,E=g.value,T=Jo();E.forEach(A=>{if(!a.has(A)){const R=P4(t.get(A),r.get(A));null!==R&&T.set(A,R),a=a.add(A)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,T))}return te.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):h(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):te.resolve(qn());let f=-1,g=a;return l.next(v=>te.forEach(v,(E,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(E)?te.resolve():this.remoteDocumentCache.getEntry(e,E).next(A=>{g=g.insert(E,A)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,g,v,Pt())).next(E=>({batchId:f,changes:cn(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let i=At();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=At();return this.indexManager.getCollectionParents(e,i).next(l=>te.forEach(l,f=>{const g=(v=t,E=f.child(i),new Na(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,E;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(v=>{v.forEach((E,T)=>{a=a.insert(E,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,g)=>{const v=g.getKey();null===a.get(v)&&(a=a.insert(v,Sn.newInvalidDocument(v)))});let l=At();return a.forEach((f,g)=>{const v=i.get(f);void 0!==v&&$I(v.mutation,g,Fi.empty(),kn.now()),q(t,g)&&(l=l.insert(f,g))}),l})}}class b7{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return te.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Nr(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:xN(r.bundledQuery),readTime:Nr(r.readTime)}),te.resolve();var r}}class T7{constructor(){this.overlays=new Dn(We.comparator),this.ls=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qn();return te.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const i=qn(),a=t.length+1,l=new We(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Dn((v,E)=>v-E);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let E=a.get(v.largestBatchId);null===E&&(E=qn(),a=a.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const f=qn(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,E)=>f.set(v,E)),!(f.size()>=i)););return te.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new IN(t,r));let a=this.ls.get(t);void 0===a&&(a=Pt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class LN{constructor(){this.fs=new mn(wi.ds),this.ws=new mn(wi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new wi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new wi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new We(new Gt([])),r=new wi(t,e),i=new wi(t,e+1),a=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new We(new Gt([])),r=new wi(t,e),i=new wi(t,e+1);let a=Pt();return this.ws.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new wi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class wi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return We.comparator(e.key,t.key)||Et(e.As,t.As)}static _s(e,t){return Et(e.As,t.As)||We.comparator(e.key,t.key)}}class D7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new mn(wi.ds)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const l=new CN(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.Rs=this.Rs.add(new wi(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,t){return te.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new wi(t,0),i=new wi(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],l=>{const f=this.Ps(l.As);a.push(f)}),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Et);return t.forEach(i=>{const a=new wi(i,0),l=new wi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],f=>{r=r.add(f.As)})}),te.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const l=new wi(new We(a),0);let f=new mn(Et);return this.Rs.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(g.As)),!0)},l),te.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){rt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return te.forEach(t.mutations,i=>{const a=new wi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new wi(t,0),i=this.Rs.firstAfterOrEqual(r);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return te.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class S7{constructor(e){this.Ds=e,this.docs=new Dn(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=fe();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Sn.newInvalidDocument(i))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=fe();const l=t.path,f=new We(l.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:E}}=g.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||py(sS(E),r)<=0||(i.has(E.key)||q(t,E))&&(a=a.insert(E.key,E.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,t,r,i){et()}Cs(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new A7(this)}getSize(e){return te.resolve(this.size)}}class A7 extends TU{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class M7{constructor(e){this.persistence=e,this.xs=new $e(t=>Yl(t),Dy),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.Ns=0,this.ks=new LN,this.targetCount=0,this.Ms=Yp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),te.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Yp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Fn(t),te.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),te.waitFor(a).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.ks.containsKey(t))}}class UN{constructor(e,t){this.$s={},this.overlays={},this.Os=new ds(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new M7(this),this.indexManager=new g7,this.remoteDocumentCache=new S7(r=>this.referenceDelegate.Ls(r)),this.serializer=new rU(t),this.qs=new b7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new D7(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Me("MemoryPersistence","Starting transaction:",e);const i=new x7(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return te.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class x7 extends qO{constructor(e){super(),this.currentSequenceNumber=e}}class US{constructor(e){this.persistence=e,this.Qs=new LN,this.js=null}static zs(e){return new US(e)}get Ws(){if(this.js)return this.js;throw et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),te.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Ws,r=>{const i=We.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,at.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return te.or([()=>te.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class P7{constructor(e){this.serializer=e}O(e,t,r,i){const a=new my("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",II,{unique:!0}),f.createObjectStore("documentMutations"),PU(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=te.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),PU(e)),l=l.next(()=>function(f){const g=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:at.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,g){return g.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",II,{unique:!0});const E=g.store("mutations"),T=v.map(A=>E.put(A));return te.waitFor(T)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(a))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const g=f.createObjectStore("documentOverlays",{keyPath:gS});g.createIndex("collectionPathOverlayIndex",JO,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",XO,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const g=f.createObjectStore("remoteDocumentsV14",{keyPath:uS});g.createIndex("documentKeyIndex",KO),g.createIndex("collectionGroupIndex",dS)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:pS}).createIndex("sequenceNumberIndex",YO,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:QO}).createIndex("documentKeyIndex",g4,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=kS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>te.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(f=>te.forEach(f,g=>{rt(g.userId===a.userId);const v=qp(this.serializer,g);return yU(e,a.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,f)=>{const g=new Gt(l),v=[0,ai(g)];a.push(t.get(v).next(E=>E?te.resolve():t.put({targetId:0,path:ai(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>te.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:fS});const r=t.store("collectionParents"),i=new FN,a=l=>{if(i.add(l)){const f=l.lastSegment(),g=l.popLast();return r.put({collectionId:f,parent:ai(g)})}};return t.store("remoteDocuments").X({Y:!0},(l,f)=>{const g=new Gt(l);return a(g.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,f,g],v)=>{const E=Yo(f);return a(E.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=KI(i),l=sU(this.serializer,a);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const f=t.store("remoteDocumentsV14"),g=(v=l,v.document?new We(Gt.fromString(v.document.name).popFirst(5)):v.noDocument?We.fromSegments(v.noDocument.path):v.unknownDocument?We.fromSegments(v.unknownDocument.path):et()).path.toArray();var v;const E={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(E))}).next(()=>te.waitFor(i))}si(e,t){const r=t.store("mutations"),i=DU(this.serializer),a=new UN(US.zs,this.serializer.fe);return r.j().next(l=>{const f=new Map;return l.forEach(g=>{var v;let E=null!==(v=f.get(g.userId))&&void 0!==v?v:Pt();qp(this.serializer,g).keys().forEach(T=>E=E.add(T)),f.set(g.userId,E)}),te.forEach(f,(g,v)=>{const E=new Pr(v),T=PS.de(this.serializer,E),A=a.getIndexManager(E),R=FS.de(E,this.serializer,A,a.referenceDelegate);return new xU(i,R,T,A).recalculateAndSaveOverlaysForDocumentKeys(new TI(t,ds.ct),g).next()})})}}function PU(n){n.createObjectStore("targetDocuments",{keyPath:kd}).createIndex("documentTargetsIndex",vy,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hS,{unique:!0}),n.createObjectStore("targetGlobal")}const VN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class BN{constructor(e,t,r,i,a,l,f,g,v,E,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=l,this.document=f,this.ri=v,this.oi=E,this.ui=T,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=A=>Promise.resolve(),!BN.D())throw new ye(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new C7(this,i),this.di=t+"main",this.serializer=new rU(g),this.wi=new ks(this.di,this.ui,new P7(this.serializer)),this.Bs=new _7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DU(this.serializer),this.qs=new c7,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===E&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ye(ae.FAILED_PRECONDITION,VN);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ds(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,V.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,V.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,V.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>BS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(ki(e))return Me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return tE(e).get("owner").next(t=>te.resolve(this.Ri(t)))}Pi(e){return BS(e).delete(this.clientId)}bi(){var e=this;return(0,V.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Hr(r,"clientMetadata");return i.j().next(a=>{const l=e.Si(a,18e5),f=a.filter(g=>-1===l.indexOf(g));return te.forEach(f,g=>i.delete(g.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?te.resolve(!0):tE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new ye(ae.FAILED_PRECONDITION,VN);return!1}}return!(!this.networkEnabled||!this.inForeground)||BS(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,V.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new TI(t,ds.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>BS(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return FS.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new m7(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return PS.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Me("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ui)?nN:14===l?bI:13===l?tN:12===l?m4:11===l?eN:void et();var l;let f;return this.wi.runTransaction(e,i,a,g=>(f=new TI(g,this.Os?this.Os.next():ds.ct),"readwrite-primary"===t?this.Ti(f).next(v=>!!v||this.Ei(f)).next(v=>{if(!v)throw Cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new ye(ae.FAILED_PRECONDITION,vI);return r(f)}).next(v=>this.vi(f).next(()=>v)):this.Oi(f).next(()=>r(f)))).then(g=>(f.raiseOnCommittedEvent(),g))}Oi(e){return tE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ye(ae.FAILED_PRECONDITION,VN)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tE(e).put("owner",t)}static D(){return ks.D()}Ai(e){const t=tE(e);return t.get("owner").next(r=>this.Ri(r)?(Me("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,z.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Me("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Cr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tE(n){return Hr(n,"owner")}function BS(n){return Hr(n,"clientMetadata")}function jN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $N{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Pt(),i=Pt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new $N(e,t.fromCache,r,i)}}class OU{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(o(t))return te.resolve(null);let r=y(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=b(t,null,"F"),r=y(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Pt(...a);return this.Ui.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.ji(t,f);return this.zi(t,v,l,g.readTime)?this.Ki(e,b(t,null,"F")):this.Wi(e,v,t,g)}))})))}Gi(e,t,r,i){return o(t)||i.isEqual(at.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const l=this.ji(t,a);return this.zi(t,l,r,i)?this.Qi(e,t):(eS()<=Pi.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),k(t)),this.Wi(e,l,t,fy(i,-1)))})}ji(e,t){let r=new mn(ue(e));return t.forEach((i,a)=>{q(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return eS()<=Pi.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",k(t)),this.Ui.getDocumentsMatchingQuery(e,t,us.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class O7{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Dn(Et),this.Yi=new $e(a=>Yl(a),Dy),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xU(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function NU(n,e,t,r){return new O7(n,e,t,r)}function RU(n,e){return HN.apply(this,arguments)}function HN(){return HN=(0,V.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let g=Pt();for(const v of i){l.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of a){f.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(r,g).next(v=>({er:v,removedBatchIds:l,addedBatchIds:f}))})})}),HN.apply(this,arguments)}function kU(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function FU(n,e,t){let r=Pt(),i=Pt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=fe();return t.forEach((f,g)=>{const v=a.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),g.isNoDocument()&&g.version.isEqual(at.min())?(e.removeEntry(f,g.readTime),l=l.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),l=l.insert(f,g)):Me("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)}),{nr:l,sr:i}})}function k7(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ky(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,te.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Jl(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Fy(n,e,t){return zN.apply(this,arguments)}function zN(){return zN=(0,V.Z)(function*(n,e,t){const r=qe(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!ki(l))throw l;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),zN.apply(this,arguments)}function jS(n,e,t){const r=qe(n);let i=at.min(),a=Pt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,g,v){const E=qe(f),T=E.Yi.get(v);return void 0!==T?te.resolve(E.Ji.get(T)):E.Bs.getTargetData(g,v)}(r,l,y(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,f.targetId).next(g=>{a=g})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:at.min(),t?a:Pt())).next(f=>(VU(r,Y(e),f),{documents:f,ir:a})))}function LU(n,e){const t=qe(n),r=qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(l=>l?l.target:null))}function UU(n,e){const t=qe(n),r=t.Xi.get(e)||at.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,fy(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(VU(t,e,i),i))}function VU(n,e,t){let r=n.Xi.get(e)||at.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function GN(){return GN=(0,V.Z)(function*(n,e,t,r){const i=qe(n);let a=Pt(),l=fe();for(const v of t){const E=e.rr(v.metadata.name);v.document&&(a=a.add(E));const T=e.ur(v);T.setReadTime(e.cr(v.metadata.readTime)),l=l.insert(E,T)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),g=yield ky(i,(v=r,y(s(Gt.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>FU(v,f,l).next(E=>(f.apply(v),E)).next(E=>i.Bs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.Bs.addMatchingKeys(v,a,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,E.nr,E.sr)).next(()=>E.nr)))}),GN.apply(this,arguments)}function L7(n,e){return WN.apply(this,arguments)}function WN(){return WN=(0,V.Z)(function*(n,e,t=Pt()){const r=yield ky(n,y(xN(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Nr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(ur.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),WN.apply(this,arguments)}function BU(n,e){return`firestore_clients_${n}_${e}`}function jU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function qN(n,e){return`firestore_targets_${n}_${e}`}class $S{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new ye(i.error.code,i.error.message))),l?new $S(e,t,i.state,a):(Cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new ye(r.error.code,r.error.message))),a?new nE(e,r.state,i):(Cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class HS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=yN();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=cS(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new HS(e,a):(Cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ZN{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ZN(t.clientId,t.onlineState):(Cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class KN{constructor(){this.activeTargetIds=yN()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YN{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Dn(Et),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=BU(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new KN),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,V.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(BU(e.persistenceKey,i));if(a){const l=HS.ar(i,a);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(qN(this.persistenceKey,e));if(r){const i=nE.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qN(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Me("SharedClientState","READ",e,t),t}setItem(e,t){Me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,V.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let l=ds.ct;if(null!=a)try{const f=JSON.parse(a);rt("number"==typeof f),l=f}catch(f){Cr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==ds.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new $S(this.currentUser,e,t,r),a=jU(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=jU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=qN(this.persistenceKey,e),a=new nE(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return HS.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return $S.ar(new Pr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return nE.ar(i,t)}br(e){return ZN.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,V.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),l=[],f=[];return a.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{a.has(g)||f.push(g)}),this.syncEngine.Wr(l,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=yN();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class $U{constructor(){this.Hr=new KN,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new KN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class U7{Yr(e){}shutdown(){}}class HU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let zS=null;function QN(){return null===zS?zS=268435456+Math.round(2147483648*Math.random()):zS++,"0x"+zS.toString(16)}const V7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class B7{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const es="WebChannelConnection";class j7 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const l=QN(),f=this.To(e,t);Me("RestConnection",`Sending RPC '${e}' ${l}:`,f,r);const g={};return this.Eo(g,i,a),this.Ao(e,f,g,r).then(v=>(Me("RestConnection",`Received RPC '${e}' ${l}: `,v),v),v=>{throw go("RestConnection",`RPC '${e}' ${l} failed with error: `,v,"url: ",f,"request:",r),v})}vo(e,t,r,i,a,l){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${V7[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=QN();return new Promise((l,f)=>{const g=new XD;g.setWithCredentials(!0),g.listenOnce(QD.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case gI.NO_ERROR:const E=g.getResponseJson();Me(es,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(E)),l(E);break;case gI.TIMEOUT:Me(es,`RPC '${e}' ${a} timed out`),f(new ye(ae.DEADLINE_EXCEEDED,"Request time out"));break;case gI.HTTP_ERROR:const T=g.getStatus();if(Me(es,`RPC '${e}' ${a} failed with status:`,T,"response text:",g.getResponseText()),T>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A?.error;if(R&&R.status&&R.message){const W=function(Q){const J=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(J)>=0?J:ae.UNKNOWN}(R.status);f(new ye(W,R.message))}else f(new ye(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ye(ae.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Me(es,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(i);Me(es,`RPC '${e}' ${a} sending request:`,i),g.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=QN(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=YD(),f=FO(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.xmlHttpFactory=new JD({})),this.Eo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const E=a.join("");Me(es,`Creating RPC '${e}' stream ${i}: ${E}`,g);const T=l.createWebChannel(E,g);let A=!1,R=!1;const W=new B7({ro:J=>{R?Me(es,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(A||(Me(es,`Opening RPC '${e}' stream ${i} transport.`),T.open(),A=!0),Me(es,`RPC '${e}' stream ${i} sending:`,J),T.send(J))},oo:()=>T.close()}),Q=(J,be,ze)=>{J.listen(be,Re=>{try{ze(Re)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return Q(T,kp.EventType.OPEN,()=>{R||Me(es,`RPC '${e}' stream ${i} transport opened.`)}),Q(T,kp.EventType.CLOSE,()=>{R||(R=!0,Me(es,`RPC '${e}' stream ${i} transport closed`),W.wo())}),Q(T,kp.EventType.ERROR,J=>{R||(R=!0,go(es,`RPC '${e}' stream ${i} transport errored:`,J),W.wo(new ye(ae.UNAVAILABLE,"The operation could not be completed")))}),Q(T,kp.EventType.MESSAGE,J=>{var be;if(!R){const ze=J.data[0];rt(!!ze);const Ye=ze.error||(null===(be=ze[0])||void 0===be?void 0:be.error);if(Ye){Me(es,`RPC '${e}' stream ${i} received error:`,Ye);const gt=Ye.status;let Mt=function(Us){const bv=Gr[Us];if(void 0!==bv)return L4(bv)}(gt),kr=Ye.message;void 0===Mt&&(Mt=ae.INTERNAL,kr="Unknown error status: "+gt+" with message "+Ye.message),R=!0,W.wo(new ye(Mt,kr)),T.close()}else Me(es,`RPC '${e}' stream ${i} received:`,ze),W._o(ze)}}),Q(f,LO.STAT_EVENT,J=>{J.stat===mI.PROXY?Me(es,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===mI.NOPROXY&&Me(es,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{W.fo()},0),W}}function zU(){return typeof window<"u"?window:null}function GS(){return typeof document<"u"?document:null}function rE(n){return new Q9(n,!0)}class JN{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class GU{constructor(e,t,r,i,a,l,f,g){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new JN(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,V.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,V.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,V.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new ye(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,V.Z)(function*(){e.state=0,e.start()}))}tu(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $7 extends GU{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function e7(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:et(),i=e.targetChange.targetIds||[],a=function(g,v){return g.useProto3Json?(rt(void 0===v||"string"==typeof v),ur.fromBase64String(v||"")):(rt(void 0===v||v instanceof Uint8Array),ur.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(g){const v=void 0===g.code?ae.UNKNOWN:L4(g.code);return new ye(v,g.message||"")}(l);t=new $4(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ic(n,r.document.name),a=Nr(r.document.updateTime),l=r.document.createTime?Nr(r.document.createTime):at.min(),f=new zr({mapValue:{fields:r.document.fields}}),g=Sn.newFoundDocument(i,a,l,f);t=new MS(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=Ic(n,r.document),a=r.readTime?Nr(r.readTime):at.min(),l=Sn.newNoDocument(i,a);t=new MS([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ic(n,r.document);t=new MS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,{count:i=0,unchangedNames:a}=r,l=new G9(i,a);t=new j4(r.targetId,l)}}var g;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return at.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?at.min():a.readTime?Nr(a.readTime):at.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=qI(this.serializer),t.addTarget=function(i,a){let l;const f=a.target;if(l=UI(f)?{documents:J4(i,f)}:{query:MN(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=W4(i,a.resumeToken);const g=TN(i,a.expectedCount);null!==g&&(l.expectedCount=g)}else if(a.snapshotVersion.compareTo(at.min())>0){l.readTime=Py(i,a.snapshotVersion.toTimestamp());const g=TN(i,a.expectedCount);null!==g&&(l.expectedCount=g)}return l}(this.serializer,e);const r=function n7(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=qI(this.serializer),t.removeTarget=e,this.Wo(t)}}class H7 extends GU{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function t7(n,e){return n&&n.length>0?(rt(void 0!==e),n.map(t=>function(r,i){let a=Nr(r.updateTime?r.updateTime:i);return a.isEqual(at.min())&&(a=Nr(i)),new j9(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Nr(e.commitTime);return this.listener.cu(r,t)}return rt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=qI(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ZI(this.serializer,r))};this.Wo(t)}}class z7 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ye(ae.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(ae.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class W7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Cr(t),this.mu=!1):Me("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class q7{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,V.Z)(function*(){var g;Gd(l)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,V.Z)(function*(v){const E=qe(v);E.vu.add(4),yield Ly(E),E.bu.set("Unknown"),E.vu.delete(4),yield iE(E)}),function(v){return g.apply(this,arguments)})(l))}))}),this.bu=new W7(r,i)}}function iE(n){return eR.apply(this,arguments)}function eR(){return eR=(0,V.Z)(function*(n){if(Gd(n))for(const e of n.Ru)yield e(!0)}),eR.apply(this,arguments)}function Ly(n){return tR.apply(this,arguments)}function tR(){return tR=(0,V.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),tR.apply(this,arguments)}function WS(n,e){const t=qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),iR(t)?rR(t):Vy(t).Ko()&&nR(t,e))}function sE(n,e){const t=qe(n),r=Vy(t);t.Au.delete(e),r.Ko()&&WU(t,e),0===t.Au.size&&(r.Ko()?r.jo():Gd(t)&&t.bu.set("Unknown"))}function nR(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vy(n).su(e)}function WU(n,e){n.Vu.qt(e),Vy(n).iu(e)}function rR(n){n.Vu=new q9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Vy(n).start(),n.bu.gu()}function iR(n){return Gd(n)&&!Vy(n).Uo()&&n.Au.size>0}function Gd(n){return 0===qe(n).vu.size}function qU(n){n.Vu=void 0}function Z7(n){return sR.apply(this,arguments)}function sR(){return sR=(0,V.Z)(function*(n){n.Au.forEach((e,t)=>{nR(n,e)})}),sR.apply(this,arguments)}function K7(n,e){return oR.apply(this,arguments)}function oR(){return oR=(0,V.Z)(function*(n,e){qU(n),iR(n)?(n.bu.Iu(e),rR(n)):n.bu.set("Unknown")}),oR.apply(this,arguments)}function Y7(n,e,t){return aR.apply(this,arguments)}function aR(){return aR=(0,V.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof $4&&2===e.state&&e.cause)try{yield(r=(0,V.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qS(n,r)}else if(e instanceof MS?n.Vu.Ht(e):e instanceof j4?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(at.min()))try{const r=yield kU(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Vu.ce(a);return l.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.Au.get(g);v&&i.Au.set(g,v.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach((f,g)=>{const v=i.Au.get(f);if(!v)return;i.Au.set(f,v.withResumeToken(ur.EMPTY_BYTE_STRING,v.snapshotVersion)),WU(i,f);const E=new Jl(v.target,f,g,v.sequenceNumber);nR(i,E)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Me("RemoteStore","Failed to raise snapshot:",r),yield qS(n,r)}var r}),aR.apply(this,arguments)}function qS(n,e,t){return cR.apply(this,arguments)}function cR(){return cR=(0,V.Z)(function*(n,e,t){if(!ki(e))throw e;n.vu.add(1),yield Ly(n),n.bu.set("Offline"),t||(t=()=>kU(n.localStore)),n.asyncQueue.enqueueRetryable((0,V.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield iE(n)}))}),cR.apply(this,arguments)}function ZU(n,e){return e().catch(t=>qS(n,t,e))}function Uy(n){return lR.apply(this,arguments)}function lR(){return lR=(0,V.Z)(function*(n){const e=qe(n),t=Wd(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Q7(e);)try{const i=yield k7(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,J7(e,i)}catch(i){yield qS(e,i)}KU(e)&&YU(e)}),lR.apply(this,arguments)}function Q7(n){return Gd(n)&&n.Eu.length<10}function J7(n,e){n.Eu.push(e);const t=Wd(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function KU(n){return Gd(n)&&!Wd(n).Uo()&&n.Eu.length>0}function YU(n){Wd(n).start()}function X7(n){return uR.apply(this,arguments)}function uR(){return uR=(0,V.Z)(function*(n){Wd(n).hu()}),uR.apply(this,arguments)}function e$(n){return dR.apply(this,arguments)}function dR(){return dR=(0,V.Z)(function*(n){const e=Wd(n);for(const t of n.Eu)e.uu(t.mutations)}),dR.apply(this,arguments)}function t$(n,e,t){return hR.apply(this,arguments)}function hR(){return hR=(0,V.Z)(function*(n,e,t){const r=n.Eu.shift(),i=wN.from(r,e,t);yield ZU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Uy(n)}),hR.apply(this,arguments)}function n$(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,V.Z)(function*(n,e){var t;e&&Wd(n).ou&&(yield(t=(0,V.Z)(function*(r,i){if(F4(a=i.code)&&a!==ae.ABORTED){const l=r.Eu.shift();Wd(r).Qo(),yield ZU(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Uy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),KU(n)&&YU(n)}),fR.apply(this,arguments)}function QU(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,V.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const r=Gd(t);t.vu.add(3),yield Ly(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield iE(t)}),pR.apply(this,arguments)}function gR(n,e){return mR.apply(this,arguments)}function mR(){return mR=(0,V.Z)(function*(n,e){const t=qe(n);e?(t.vu.delete(2),yield iE(t)):e||(t.vu.add(2),yield Ly(t),t.bu.set("Unknown"))}),mR.apply(this,arguments)}function Vy(n){return n.Su||(n.Su=function(e,t,r){const i=qe(e);return i.fu(),new $7(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Z7.bind(null,n),ao:K7.bind(null,n),nu:Y7.bind(null,n)}),n.Ru.push(function(){var e=(0,V.Z)(function*(t){t?(n.Su.Qo(),iR(n)?rR(n):n.bu.set("Unknown")):(yield n.Su.stop(),qU(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Wd(n){return n.Du||(n.Du=function(e,t,r){const i=qe(e);return i.fu(),new H7(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:X7.bind(null,n),ao:n$.bind(null,n),au:e$.bind(null,n),cu:t$.bind(null,n)}),n.Ru.push(function(){var e=(0,V.Z)(function*(t){t?(n.Du.Qo(),yield Uy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class _R{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new _R(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ye(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function By(n,e){if(Cr("AsyncQueue",`${e}: ${n}`),ki(n))return new ye(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class jy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=At(),this.sortedSet=new Dn(this.comparator)}static emptySet(e){return new jy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new jy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class JU{constructor(){this.Cu=new Dn(We.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class $y{constructor(e,t,r,i,a,l,f,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new $y(e,t,jy.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&D(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class r${constructor(){this.Nu=void 0,this.listeners=[]}}class i${constructor(){this.queries=new $e(e=>M(e),D),this.onlineState="Unknown",this.ku=new Set}}function yR(n,e){return vR.apply(this,arguments)}function vR(){return vR=(0,V.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new r$),i)try{a.Nu=yield t.onListen(r)}catch(l){const f=By(l,`Initialization of query '${k(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&IR(t)}),vR.apply(this,arguments)}function CR(n,e){return wR.apply(this,arguments)}function wR(){return wR=(0,V.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),wR.apply(this,arguments)}function s$(n,e){const t=qe(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.$u(i)&&(r=!0);l.Nu=i}}r&&IR(t)}function o$(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function IR(n){n.ku.forEach(e=>{e.next()})}class ER{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new $y(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=$y.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class a${constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class XU{constructor(e){this.serializer=e}rr(e){return Ic(this.serializer,e)}ur(e){return e.metadata.exists?Q4(this.serializer,e.document,!1):Sn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Nr(e)}}class c${constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=e3(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Gt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new XU(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Pt()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,V.Z)(function*(){const t=yield function F7(n,e,t,r){return GN.apply(this,arguments)}(e.localStore,new XU(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield L7(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function e3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class t3{constructor(e){this.key=e}}class n3{constructor(e){this.key=e}}class r3{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Pt(),this.mutatedKeys=Pt(),this.tc=ue(e),this.ec=new jy(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new JU,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,T)=>{const A=i.get(E),R=q(this.query,T)?T:null,W=!!A&&this.mutatedKeys.has(A.key),Q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let J=!1;A&&R?A.data.isEqual(R.data)?W!==Q&&(r.track({type:3,doc:R}),J=!0):this.rc(A,R)||(r.track({type:2,doc:R}),J=!0,(g&&this.tc(R,g)>0||v&&this.tc(R,v)<0)&&(f=!0)):!A&&R?(r.track({type:0,doc:R}),J=!0):A&&!R&&(r.track({type:1,doc:A}),J=!0,(g||v)&&(f=!0)),J&&(R?(l=l.add(R),a=Q?a.add(E):a.delete(E)):(l=l.delete(E),a=a.delete(E)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const E="F"===this.query.limitType?l.last():l.first();l=l.delete(E.key),a=a.delete(E.key),r.track({type:1,doc:E})}return{ec:l,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((v,E)=>function(T,A){const R=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return R(T)-R(A)}(v.type,E.type)||this.tc(v.doc,E.doc)),this.oc(r);const l=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,g=f!==this.Xu;return this.Xu=f,0!==a.length||g?{snapshot:new $y(this.query,e.ec,i,a,e.mutatedKeys,0===f,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new JU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Pt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new n3(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new t3(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Pt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return $y.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class l${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class u${constructor(e){this.key=e,this.fc=!1}}class d${constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new $e(f=>M(f),D),this._c=new Map,this.mc=new Set,this.gc=new Dn(We.comparator),this.yc=new Map,this.Ic=new LN,this.Tc={},this.Ec=new Map,this.Ac=Yp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function h$(n,e){return bR.apply(this,arguments)}function bR(){return bR=(0,V.Z)(function*(n,e){const t=qR(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const l=yield ky(t.localStore,y(e)),f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield TR(t,e,r,"current"===f,l.resumeToken),t.isPrimaryClient&&WS(t.remoteStore,l)}return i}),bR.apply(this,arguments)}function TR(n,e,t,r,i){return DR.apply(this,arguments)}function DR(){return DR=(0,V.Z)(function*(n,e,t,r,i){n.Rc=(T,A,R)=>{return(W=(0,V.Z)(function*(Q,J,be,ze){let Re=J.view.sc(be);Re.zi&&(Re=yield jS(Q.localStore,J.query,!1).then(({documents:Mt})=>J.view.sc(Mt,Re)));const Ye=ze&&ze.targetChanges.get(J.targetId),gt=J.view.applyChanges(Re,Q.isPrimaryClient,Ye);return FR(Q,J.targetId,gt.cc),gt.snapshot}),function(Q,J,be,ze){return W.apply(this,arguments)})(n,T,A,R);var W};const a=yield jS(n.localStore,e,!0),l=new r3(e,a.ir),f=l.sc(a.documents),g=GI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(f,n.isPrimaryClient,g);FR(n,t,v.cc);const E=new l$(e,t,l);return n.wc.set(e,E),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),DR.apply(this,arguments)}function f$(n,e){return SR.apply(this,arguments)}function SR(){return SR=(0,V.Z)(function*(n,e){const t=qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!D(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Fy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),sE(t.remoteStore,r.targetId),Hy(t,r.targetId)}).catch(lr))):(Hy(t,r.targetId),yield Fy(t.localStore,r.targetId,!0))}),SR.apply(this,arguments)}function AR(){return AR=(0,V.Z)(function*(n,e,t){const r=ZR(n);try{const i=yield function(a,l){const f=qe(a),g=kn.now(),v=l.reduce((A,R)=>A.add(R.key),Pt());let E,T;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=fe(),W=Pt();return f.Zi.getEntries(A,v).next(Q=>{R=Q,R.forEach((J,be)=>{be.isValidDocument()||(W=W.add(J))})}).next(()=>f.localDocuments.getOverlayedDocuments(A,R)).next(Q=>{E=Q;const J=[];for(const be of l){const ze=H9(be,E.get(be.key).overlayedDocument);null!=ze&&J.push(new Ql(be.key,ze,PI(ze.value.mapValue),tr.exists(!0)))}return f.mutationQueue.addMutationBatch(A,g,J,l)}).next(Q=>{T=Q;const J=Q.applyToLocalDocumentSet(E,W);return f.documentOverlayCache.saveOverlays(A,Q.batchId,J)})}).then(()=>({batchId:T.batchId,changes:cn(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let g=a.Tc[a.currentUser.toKey()];g||(g=new Dn(Et)),g=g.insert(l,f),a.Tc[a.currentUser.toKey()]=g}(r,i.batchId,t),yield Xl(r,i.changes),yield Uy(r.remoteStore)}catch(i){const a=By(i,"Failed to persist write");t.reject(a)}}),AR.apply(this,arguments)}function i3(n,e){return MR.apply(this,arguments)}function MR(){return MR=(0,V.Z)(function*(n,e){const t=qe(n);try{const r=yield function R7(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((E,T)=>{const A=i.get(T);if(!A)return;f.push(t.Bs.removeMatchingKeys(a,E.removedDocuments,T).next(()=>t.Bs.addMatchingKeys(a,E.addedDocuments,T)));let R=A.withSequenceNumber(a.currentSequenceNumber);var W,Q,J;null!==e.targetMismatches.get(T)?R=R.withResumeToken(ur.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):E.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(E.resumeToken,r)),i=i.insert(T,R),Q=R,J=E,(0===(W=A).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,R))});let g=fe(),v=Pt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),f.push(FU(a,l,e.documentUpdates).next(E=>{g=E.nr,v=E.sr})),!r.isEqual(at.min())){const E=t.Bs.getLastRemoteSnapshotVersion(a).next(T=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(E)}return te.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,v)).next(()=>g)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.yc.get(a);l&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?rt(l.fc):i.removedDocuments.size>0&&(rt(l.fc),l.fc=!1))}),yield Xl(t,r,e)}catch(r){yield lr(r)}}),MR.apply(this,arguments)}function s3(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,l)=>{const f=l.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=qe(a);f.onlineState=l;let g=!1;f.queries.forEach((v,E)=>{for(const T of E.listeners)T.Mu(l)&&(g=!0)}),g&&IR(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function g$(n,e,t){return xR.apply(this,arguments)}function xR(){return xR=(0,V.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let l=new Dn(We.comparator);l=l.insert(a,Sn.newNoDocument(a,at.min()));const f=Pt().add(a),g=new zI(at.min(),new Map,new Dn(Et),l,f);yield i3(r,g),r.gc=r.gc.remove(a),r.yc.delete(e),LR(r)}else yield Fy(r.localStore,e,!1).then(()=>Hy(r,e,t)).catch(lr)}),xR.apply(this,arguments)}function m$(n,e){return PR.apply(this,arguments)}function PR(){return PR=(0,V.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield function N7(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,f,g,v){const E=g.batch,T=E.keys();let A=te.resolve();return T.forEach(R=>{A=A.next(()=>v.getEntry(f,R)).next(W=>{const Q=g.docVersions.get(R);rt(null!==Q),W.version.compareTo(Q)<0&&(E.applyToRemoteDocument(W,g),W.isValidDocument()&&(W.setReadTime(g.commitVersion),v.addEntry(W)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(f,E))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Pt();for(let g=0;g<l.mutationResults.length;++g)l.mutationResults[g].transformResults.length>0&&(f=f.add(l.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);kR(t,r,null),RR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xl(t,i)}catch(i){yield lr(i)}}),PR.apply(this,arguments)}function _$(n,e,t){return OR.apply(this,arguments)}function OR(){return OR=(0,V.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(a,l){const f=qe(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return f.mutationQueue.lookupMutationBatch(g,l).next(E=>(rt(null!==E),v=E.keys(),f.mutationQueue.removeMutationBatch(g,E))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,v,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>f.localDocuments.getDocuments(g,v))})}(r.localStore,e);kR(r,e,t),RR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xl(r,i)}catch(i){yield lr(i)}}),OR.apply(this,arguments)}function NR(){return NR=(0,V.Z)(function*(n,e){const t=qe(n);Gd(t.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=qe(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=By(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),NR.apply(this,arguments)}function RR(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function kR(n,e,t){const r=qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Hy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||o3(n,r)})}function o3(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(sE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),LR(n))}function FR(n,e,t){for(const r of t)r instanceof t3?(n.Ic.addReference(r.key,e),v$(n,r)):r instanceof n3?(Me("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||o3(n,r.key)):et()}function v$(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Me("SyncEngine","New document in limbo: "+t),n.mc.add(r),LR(n))}function LR(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new We(Gt.fromString(e)),r=n.Ac.next();n.yc.set(r,new u$(t)),n.gc=n.gc.insert(t,r),WS(n.remoteStore,new Jl(y(s(t.path)),r,"TargetPurposeLimboResolution",ds.ct))}}function Xl(n,e,t){return UR.apply(this,arguments)}function UR(){return UR=(0,V.Z)(function*(n,e,t){const r=qe(n),i=[],a=[],l=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,g)=>{l.push(r.Rc(g,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const E=$N.Li(g.targetId,v);a.push(E)}}))}),yield Promise.all(l),r.dc.nu(i),yield(f=(0,V.Z)(function*(g,v){const E=qe(g);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>te.forEach(v,A=>te.forEach(A.Fi,R=>E.persistence.referenceDelegate.addReference(T,A.targetId,R)).next(()=>te.forEach(A.Bi,R=>E.persistence.referenceDelegate.removeReference(T,A.targetId,R)))))}catch(T){if(!ki(T))throw T;Me("LocalStore","Failed to update sequence numbers: "+T)}for(const T of v){const A=T.targetId;if(!T.fromCache){const R=E.Ji.get(A),Q=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);E.Ji=E.Ji.insert(A,Q)}}}),function(g,v){return f.apply(this,arguments)})(r.localStore,a))}),UR.apply(this,arguments)}function C$(n,e){return VR.apply(this,arguments)}function VR(){return VR=(0,V.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const r=yield RU(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(f=>{f.reject(new ye(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xl(t,r.er)}var i}),VR.apply(this,arguments)}function w$(n,e){const t=qe(n),r=t.yc.get(e);if(r&&r.fc)return Pt().add(r.key);{let i=Pt();const a=t._c.get(e);if(!a)return i;for(const l of a){const f=t.wc.get(l);i=i.unionWith(f.view.nc)}return i}}function I$(n,e){return BR.apply(this,arguments)}function BR(){return BR=(0,V.Z)(function*(n,e){const t=qe(n),r=yield jS(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&FR(t,e.targetId,i.cc),i}),BR.apply(this,arguments)}function E$(n,e){return jR.apply(this,arguments)}function jR(){return jR=(0,V.Z)(function*(n,e){const t=qe(n);return UU(t.localStore,e).then(r=>Xl(t,r))}),jR.apply(this,arguments)}function b$(n,e,t,r){return $R.apply(this,arguments)}function $R(){return $R=(0,V.Z)(function*(n,e,t,r){const i=qe(n),a=yield function(l,f){const g=qe(l),v=qe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",E=>v.Sn(E,f).next(T=>T?g.localDocuments.getDocuments(E,T):te.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Uy(i.remoteStore):"acknowledged"===t||"rejected"===t?(kR(i,e,r||null),RR(i,e),f=e,qe(qe(i.localStore).mutationQueue).Cn(f)):et(),yield Xl(i,a)):Me("SyncEngine","Cannot apply mutation batch with id: "+e)}),$R.apply(this,arguments)}function HR(){return HR=(0,V.Z)(function*(n,e){const t=qe(n);if(qR(t),ZR(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield a3(t,r.toArray());t.vc=!0,yield gR(t.remoteStore,!0);for(const a of i)WS(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Hy(t,l),Fy(t.localStore,l,!0))),sE(t.remoteStore,l)}),yield i,yield a3(t,r),function(a){const l=qe(a);l.yc.forEach((f,g)=>{sE(l.remoteStore,g)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Dn(We.comparator)}(t),t.vc=!1,yield gR(t.remoteStore,!1)}}),HR.apply(this,arguments)}function a3(n,e,t){return zR.apply(this,arguments)}function zR(){return zR=(0,V.Z)(function*(n,e,t){const r=qe(n),i=[],a=[];for(const l of e){let f;const g=r._c.get(l);if(g&&0!==g.length){f=yield ky(r.localStore,y(g[0]));for(const v of g){const E=r.wc.get(v),T=yield I$(r,E);T.snapshot&&a.push(T.snapshot)}}else{const v=yield LU(r.localStore,l);f=yield ky(r.localStore,v),yield TR(r,c3(v),l,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),zR.apply(this,arguments)}function c3(n){return mN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function D$(n){const e=qe(n);return qe(qe(e.localStore).persistence).$i()}function S$(n,e,t,r){return GR.apply(this,arguments)}function GR(){return GR=(0,V.Z)(function*(n,e,t,r){const i=qe(n);if(i.vc)return void Me("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield UU(i.localStore,Y(a[0])),f=zI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ur.EMPTY_BYTE_STRING);yield Xl(i,l,f);break}case"rejected":yield Fy(i.localStore,e,!0),Hy(i,e,r);break;default:et()}}),GR.apply(this,arguments)}function A$(n,e,t){return WR.apply(this,arguments)}function WR(){return WR=(0,V.Z)(function*(n,e,t){const r=qR(n);if(r.vc){for(const i of e){if(r._c.has(i)){Me("SyncEngine","Adding an already active target "+i);continue}const a=yield LU(r.localStore,i),l=yield ky(r.localStore,a);yield TR(r,c3(a),l.targetId,!1,l.resumeToken),WS(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield Fy(r.localStore,i,!1).then(()=>{sE(r.remoteStore,i),Hy(r,i)}).catch(lr))}}),WR.apply(this,arguments)}function qR(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=i3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g$.bind(null,e),e.dc.nu=s$.bind(null,e.eventManager),e.dc.Pc=o$.bind(null,e.eventManager),e}function ZR(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_$.bind(null,e),e}class oE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,V.Z)(function*(){t.serializer=rE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return NU(this.persistence,new OU,e.initialUser,this.serializer)}createPersistence(e){return new UN(US.zs,this.serializer)}createSharedClientState(e){return new $U}terminate(){var e=this;return(0,V.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KR extends oE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,V.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield ZR(r.Vc.syncEngine),yield Uy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return NU(this.persistence,new OU,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new EU(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new aS(t,this.persistence);return new f4(e.asyncQueue,r)}createPersistence(e){const t=jN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new BN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,zU(),GS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $U}}class l3 extends KR{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,V.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof YN&&(r.sharedClientState.syncEngine={jr:b$.bind(null,i),zr:S$.bind(null,i),Wr:A$.bind(null,i),$i:D$.bind(null,i),Qr:E$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,V.Z)(function*(l){yield function T$(n,e){return HR.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=zU();if(!YN.D(t))throw new ye(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new YN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class zy{initialize(e,t){var r=this;return(0,V.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>s3(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=C$.bind(null,r.syncEngine),yield gR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new i$}createDatastore(e){const t=rE(e.databaseInfo.databaseId),r=new j7(e.databaseInfo);return new z7(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>s3(this.syncEngine,f,0),l=HU.D()?new HU:new U7,new q7(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,g,v){const E=new d$(r,i,a,l,f,g);return v&&(E.vc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,V.Z)(function*(t){const r=qe(t);Me("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Ly(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function u3(n,e=10240){let t=0;return{read:()=>(0,V.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,V.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ZS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class P${constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Or,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,V.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,V.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,V.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new a$(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,V.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,V.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,V.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class O${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,V.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ye(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,V.Z)(function*(a,l){const f=qe(a),g=qI(f.serializer)+"/documents",v={documents:l.map(R=>WI(f.serializer,R))},E=yield f.vo("BatchGetDocuments",g,v,l.length),T=new Map;E.forEach(R=>{const W=function X9(n,e){return"found"in e?function(t,r){rt(!!r.found);const i=Ic(t,r.found.name),a=Nr(r.found.updateTime),l=r.found.createTime?Nr(r.found.createTime):at.min(),f=new zr({mapValue:{fields:r.found.fields}});return Sn.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){rt(!!r.missing),rt(!!r.readTime);const i=Ic(t,r.missing),a=Nr(r.readTime);return Sn.newNoDocument(i,a)}(n,e):et()}(f.serializer,R);T.set(W.key.toString(),W)});const A=[];return l.forEach(R=>{const W=T.get(R.toString());rt(!!W),A.push(W)}),A}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,V.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=We.fromPath(i);e.mutations.push(new vN(a,e.precondition(a)))}),yield(r=(0,V.Z)(function*(i,a){const l=qe(i),f=qI(l.serializer)+"/documents",g={writes:a.map(v=>ZI(l.serializer,v))};yield l.Io("Commit",f,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=at.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ye(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(at.min())?tr.exists(!1):tr.updateTime(t):tr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(at.min()))throw new ye(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tr.updateTime(t)}return tr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class N${constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new JN(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,V.Z)(function*(){const t=new O$(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Bp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!F4(t)}return!1}}class R${constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pr.UNAUTHENTICATED,this.clientId=Up.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,V.Z)(function*(f){Me("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Me("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,V.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,V.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=By(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function KS(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,V.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,V.Z)(function*(a){r.isEqual(a)||(yield RU(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),YR.apply(this,arguments)}function QR(n,e){return JR.apply(this,arguments)}function JR(){return JR=(0,V.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield XR(n);Me("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>QU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>QU(e.remoteStore,a)),n._onlineComponents=e}),JR.apply(this,arguments)}function d3(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function XR(n){return ek.apply(this,arguments)}function ek(){return ek=(0,V.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Me("FirestoreClient","Using user provided OfflineComponentProvider");try{yield KS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!d3(t))throw t;go("Error using user provided cache. Falling back to memory cache: "+t),yield KS(n,new oE)}}else Me("FirestoreClient","Using default OfflineComponentProvider"),yield KS(n,new oE);return n._offlineComponents}),ek.apply(this,arguments)}function YS(n){return tk.apply(this,arguments)}function tk(){return tk=(0,V.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Me("FirestoreClient","Using user provided OnlineComponentProvider"),yield QR(n,n._uninitializedComponentsProvider._online)):(Me("FirestoreClient","Using default OnlineComponentProvider"),yield QR(n,new zy))),n._onlineComponents}),tk.apply(this,arguments)}function h3(n){return XR(n).then(e=>e.persistence)}function QS(n){return XR(n).then(e=>e.localStore)}function f3(n){return YS(n).then(e=>e.remoteStore)}function nk(n){return YS(n).then(e=>e.syncEngine)}function Gy(n){return rk.apply(this,arguments)}function rk(){return rk=(0,V.Z)(function*(n){const e=yield YS(n),t=e.eventManager;return t.onListen=h$.bind(null,e.syncEngine),t.onUnlisten=f$.bind(null,e.syncEngine),t}),rk.apply(this,arguments)}function g3(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function(i,a,l,f,g){const v=new ZS({next:T=>{a.enqueueAndForget(()=>CR(i,E));const A=T.docs.has(l);!A&&T.fromCache?g.reject(new ye(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&f&&"server"===f.source?g.reject(new ye(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new ER(s(l.path),v,{includeMetadataChanges:!0,Ku:!0});return yR(i,E)}(yield Gy(n),n.asyncQueue,e,t,r)})),r.promise}function m3(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function(i,a,l,f,g){const v=new ZS({next:T=>{a.enqueueAndForget(()=>CR(i,E)),T.fromCache&&"server"===f.source?g.reject(new ye(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new ER(l,v,{includeMetadataChanges:!0,Ku:!0});return yR(i,E)}(yield Gy(n),n.asyncQueue,e,t,r)})),r.promise}function _3(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const y3=new Map;function ik(n,e,t){if(!t)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function v3(n,e,t,r){if(!0===e&&!0===r)throw new ye(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function C3(n){if(!We.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function w3(n){if(We.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=JS(n);throw new ye(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function I3(n,e){if(e<=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class E3{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ye(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ye(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=_3(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class aE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new E3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ye(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new E3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new u4;switch(t.type){case"firstParty":return new HO(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ye(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=y3.get(e);t&&(Me("ComponentProvider","Removing Datastore"),y3.delete(e),t.terminate())}(this),Promise.resolve()}}function b3(n,e,t,r={}){var i;const a=(n=Qt(n,aE))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==l&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let f,g;if("string"==typeof r.mockUserToken)f=r.mockUserToken,g=Pr.MOCK_USER;else{f=(0,z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ye(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Pr(v)}n._authCredentials=new jO(new BO(f,g))}}class Zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}}class Li{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Li(this.firestore,e,this._query)}}class Ec extends Li{constructor(e,t,r){super(e,t,s(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new We(e))}withConverter(e){return new Ec(this.firestore,e,this._path)}}function T3(n,e,...t){if(n=(0,z.m9)(n),ik("collection","path",e),n instanceof aE){const r=Gt.fromString(e,...t);return w3(r),new Ec(n,null,r)}{if(!(n instanceof Zn||n instanceof Ec))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return w3(r),new Ec(n.firestore,null,r)}}function XS(n,e,...t){if(n=(0,z.m9)(n),1===arguments.length&&(e=Up.A()),ik("doc","path",e),n instanceof aE){const r=Gt.fromString(e,...t);return C3(r),new Zn(n,null,new We(r))}{if(!(n instanceof Zn||n instanceof Ec))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Gt.fromString(e,...t));return C3(r),new Zn(n.firestore,n instanceof Ec?n.converter:null,new We(r))}}function D3(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),(n instanceof Zn||n instanceof Ec)&&(e instanceof Zn||e instanceof Ec)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sk(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),n instanceof Li&&e instanceof Li&&n.firestore===e.firestore&&D(n._query,e._query)&&n.converter===e.converter}class z${constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new JN(this,"async_queue_retry"),this.Xc=()=>{const t=GS();t&&Me("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=GS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=GS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Or;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,V.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!ki(t))throw t;Me("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Cr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=_R.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&et()}verifyOperationInProgress(){}sa(){var e=this;return(0,V.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function ok(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class G${constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends aE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new z$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||S3(this),this._firestoreClient.terminate()}}function q$(n,e){const t="object"==typeof n?n:(0,bn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,bn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,z.P0)("firestore");a&&b3(i,...a)}return i}function Rr(n){return n._firestoreClient||S3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function S3(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _4(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,_3(v.experimentalLongPollingOptions),v.useFetchStreams));var f,v;n._firestoreClient=new R$(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function A3(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,V.Z)(function*(){try{yield KS(n,t),yield QR(n,e),r.resolve()}catch(i){const a=i;if(!d3(a))throw a;go("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function M3(n){if(n._initialized||n._terminated)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bc(ur.fromBase64String(e))}catch(t){throw new ye(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bc(ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class eu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ye(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jp{constructor(e){this._methodName=e}}class eA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}}const r8=/^__.*__$/;class i8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ql(e,this.data,this.fieldMask,t,this.fieldTransforms):new My(e,this.data,t,this.fieldTransforms)}}class x3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ql(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function P3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class tA{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new tA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return iA(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(P3(this.ca)&&r8.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class s8{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rE(e)}ya(e,t,r,i=!1){return new tA({ca:e,methodName:t,ga:r,path:er.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xp(n){const e=n._freezeSettings(),t=rE(n._databaseId);return new s8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nA(n,e,t,r,i,a={}){const l=n.ya(a.merge||a.mergeFields?2:0,e,t,i);uk("Data must be an object, but it was:",l,r);const f=R3(r,l);let g,v;if(a.merge)g=new Fi(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const E=[];for(const T of a.mergeFields){const A=uE(e,T,t);if(!l.contains(A))throw new ye(ae.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);F3(E,A)||E.push(A)}g=new Fi(E),v=l.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,v=l.fieldTransforms;return new i8(new zr(f),g,v)}class lE extends Jp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lE}}function O3(n,e,t){return new tA({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ak extends Jp{_toFieldTransform(e){return new jI(e.path,new Sy)}isEqual(e){return e instanceof ak}}class o8 extends Jp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=O3(this,e,!0),r=this.pa.map(a=>eg(a,t)),i=new Hp(r);return new jI(e.path,i)}isEqual(e){return this===e}}class a8 extends Jp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=O3(this,e,!0),r=this.pa.map(a=>eg(a,t)),i=new zp(r);return new jI(e.path,i)}isEqual(e){return this===e}}class c8 extends Jp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Ay(e.serializer,T4(e.serializer,this.Ia));return new jI(e.path,t)}isEqual(e){return this===e}}function ck(n,e,t,r){const i=n.ya(1,e,t);uk("Data must be an object, but it was:",i,r);const a=[],l=zr.empty();Zl(r,(g,v)=>{const E=rA(e,g,t);v=(0,z.m9)(v);const T=i.da(E);if(v instanceof lE)a.push(E);else{const A=eg(v,T);null!=A&&(a.push(E),l.set(E,A))}});const f=new Fi(a);return new x3(l,f,i.fieldTransforms)}function lk(n,e,t,r,i,a){const l=n.ya(1,e,t),f=[uE(e,r,t)],g=[i];if(a.length%2!=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)f.push(uE(e,a[A])),g.push(a[A+1]);const v=[],E=zr.empty();for(let A=f.length-1;A>=0;--A)if(!F3(v,f[A])){const R=f[A];let W=g[A];W=(0,z.m9)(W);const Q=l.da(R);if(W instanceof lE)v.push(R);else{const J=eg(W,Q);null!=J&&(v.push(R),E.set(R,J))}}const T=new Fi(v);return new x3(E,T,l.fieldTransforms)}function N3(n,e,t,r=!1){return eg(t,n.ya(r?4:3,e))}function eg(n,e){if(k3(n=(0,z.m9)(n)))return uk("Unsupported field value:",e,n),R3(n,e);if(n instanceof Jp)return function(t,r){if(!P3(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=eg(l,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return T4(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=kn.fromDate(t);return{timestampValue:Py(r.serializer,i)}}if(t instanceof kn){const i=new kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Py(r.serializer,i)}}if(t instanceof eA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bc)return{bytesValue:W4(r.serializer,t._byteString)};if(t instanceof Zn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:DN(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${JS(t)}`)}(n,e)}function R3(n,e){const t={};return iN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zl(n,(r,i)=>{const a=eg(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function k3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof kn||n instanceof eA||n instanceof bc||n instanceof Zn||n instanceof Jp)}function uk(n,e,t){if(!k3(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=JS(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function uE(n,e,t){if((e=(0,z.m9)(e))instanceof eu)return e._internalPath;if("string"==typeof e)return rA(n,e);throw iA("Field path arguments must be of type string or ",n,!1,void 0,t)}const l8=new RegExp("[~\\*/\\[\\]]");function rA(n,e,t){if(e.search(l8)>=0)throw iA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new eu(...e.split("."))._internalPath}catch{throw iA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iA(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(a||l)&&(g+=" (found",a&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new ye(ae.INVALID_ARGUMENT,f+n+g)}function F3(n,e){return n.some(t=>t.isEqual(e))}class dE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new u8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class u8 extends dE{data(){return super.data()}}function sA(n,e){return"string"==typeof e?rA(n,e):e instanceof eu?e._internalPath:e._delegate._internalPath}function L3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ye(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dk{}class hE extends dk{}function qd(n,e,...t){let r=[];e instanceof dk&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof Wy).length,l=i.filter(f=>f instanceof fE).length;if(a>1||a>0&&l>0)throw new ye(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class fE extends hE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fE(e,t,r)}_apply(e){const t=this._parse(e);return j3(e._query,t),new Li(e.firestore,e.converter,C(e._query,t))}_parse(e){const t=Xp(e.firestore);return function(i,a,l,f,g,v,E){let T;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){B3(E,v);const A=[];for(const R of E)A.push(V3(f,i,R));T={arrayValue:{values:A}}}else T=V3(f,i,E)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||B3(E,v),T=N3(l,"where",E,"in"===v||"not-in"===v);return jt.create(g,v,T)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Wy extends dk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:dn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)j3(a,f),a=C(a,f)}(e._query,t),new Li(e.firestore,e.converter,C(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class hk extends hE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hk(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Bd(i,a);return function(f,g){if(null===c(f)){const v=d(f);null!==v&&$3(0,v,g.field)}}(r,l),l}(e._query,this._field,this._direction);return new Li(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Na(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class oA extends hE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new oA(e,t,r)}_apply(e){return new Li(e.firestore,e.converter,b(e._query,this._limit,this._limitType))}}class aA extends hE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new aA(e,t,r)}_apply(e){const t=U3(e,this.type,this._docOrFields,this._inclusive);return new Li(e.firestore,e.converter,(i=t,new Na((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class cA extends hE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new cA(e,t,r)}_apply(e){const t=U3(e,this.type,this._docOrFields,this._inclusive);return new Li(e.firestore,e.converter,(i=t,new Na((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function U3(n,e,t,r){if(t[0]=(0,z.m9)(t[0]),t[0]instanceof dE)return function(i,a,l,f,g){if(!f)throw new ye(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const E of p(i))if(E.field.isKeyField())v.push(xa(a,f.key));else{const T=f.data.field(E.field);if(Kl(T))throw new ye(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const A=E.field.canonicalString();throw new ye(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}v.push(T)}return new Pa(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Xp(n.firestore);return function(a,l,f,g,v,E){const T=a.explicitOrderBy;if(v.length>T.length)throw new ye(ae.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let R=0;R<v.length;R++){const W=v[R];if(T[R].field.isKeyField()){if("string"!=typeof W)throw new ye(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof W}`);if(!h(a)&&-1!==W.indexOf("/"))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${W}' contains a slash.`);const Q=a.path.child(Gt.fromString(W));if(!We.isDocumentKey(Q))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const J=new We(Q);A.push(xa(l,J))}else{const Q=N3(f,g,W);A.push(Q)}}return new Pa(A,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function V3(n,e,t){if("string"==typeof(t=(0,z.m9)(t))){if(""===t)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h(e)&&-1!==t.indexOf("/"))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Gt.fromString(t));if(!We.isDocumentKey(r))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xa(n,new We(r))}if(t instanceof Zn)return xa(n,t._key);throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${JS(t)}.`)}function B3(n,e){if(!Array.isArray(n)||0===n.length)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j3(n,e){if(e.isInequality()){const r=d(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=c(n);null!==a&&$3(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ye(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function $3(n,e,t){if(!t.isEqual(e))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class fk{convertValue(e,t="none"){switch(wc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Zl(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new eA(Fn(e.latitude),Fn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=AI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cy(e));default:return null}}convertTimestamp(e){const t=vc(e);return new kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Gt.fromString(e);rt(nU(r));const i=new Aa(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(t)||Cr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function lA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class v8 extends fk{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}class tg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tu extends dE{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pE extends tu{data(e={}){return super.data(e)}}class Zd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pE(this._firestore,this._userDataWriter,r.key,r,new tg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new pE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new pE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==l.type&&(g=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:w8(l.type),doc:f,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function w8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function z3(n,e){return n instanceof tu&&e instanceof tu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Zd&&e instanceof Zd&&n._firestore===e._firestore&&sk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Kd extends fk{constructor(e){super(),this.firestore=e}convertBytes(e){return new bc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function G3(n,e,t){n=Qt(n,Zn);const r=Qt(n.firestore,Kn),i=lA(n.converter,e,t);return qy(r,[nA(Xp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,tr.none())])}function W3(n,e,t,...r){n=Qt(n,Zn);const i=Qt(n.firestore,Kn),a=Xp(i);let l;return l="string"==typeof(e=(0,z.m9)(e))||e instanceof eu?lk(a,"updateDoc",n._key,e,t,r):ck(a,"updateDoc",n._key,e),qy(i,[l.toMutation(n._key,tr.exists(!0))])}function q3(n,...e){var t,r,i;n=(0,z.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||ok(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(ok(e[l])){const T=e[l];e[l]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[l+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[l+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let g,v,E;if(n instanceof Zn)v=Qt(n.firestore,Kn),E=s(n._key.path),g={next:T=>{e[l]&&e[l](pk(v,n,T))},error:e[l+1],complete:e[l+2]};else{const T=Qt(n,Li);v=Qt(T.firestore,Kn),E=T._query;const A=new Kd(v);g={next:R=>{e[l]&&e[l](new Zd(v,A,T,R))},error:e[l+1],complete:e[l+2]},L3(n._query)}return function(T,A,R,W){const Q=new ZS(W),J=new ER(A,Q,R);return T.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return yR(yield Gy(T),J)})),()=>{Q.Dc(),T.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return CR(yield Gy(T),J)}))}}(Rr(v),E,f,g)}function qy(n,e){return function(t,r){const i=new Or;return t.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function p$(n,e,t){return AR.apply(this,arguments)}(yield nk(t),r,i)})),i.promise}(Rr(n),e)}function pk(n,e,t){const r=t.docs.get(e._key),i=new Kd(n);return new tu(n,i,e._key,r,new tg(t.hasPendingWrites,t.fromCache),e.converter)}const V8={maxAttempts:5};class Z3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xp(e)}set(e,t,r){this._verifyNotCommitted();const i=Yd(e,this._firestore),a=lA(i.converter,t,r),l=nA(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,tr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Yd(e,this._firestore);let l;return l="string"==typeof(t=(0,z.m9)(t))||t instanceof eu?lk(this._dataReader,"WriteBatch.update",a._key,t,r,i):ck(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yd(e,this._firestore);return this._mutations=this._mutations.concat(new xy(t._key,tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yd(n,e){if((n=(0,z.m9)(n)).firestore!==e)throw new ye(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class B8 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xp(e)}get(e){const t=Yd(e,this._firestore),r=new v8(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const a=i[0];if(a.isFoundDocument())return new dE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new dE(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=Yd(e,this._firestore),a=lA(i.converter,t,r),l=nA(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Yd(e,this._firestore);let l;return l="string"==typeof(t=(0,z.m9)(t))||t instanceof eu?lk(this._dataReader,"Transaction.update",a._key,t,r,i):ck(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Yd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yd(e,this._firestore),r=new Kd(this._firestore);return super.get(e).then(i=>new tu(this._firestore,r,t._key,i._document,new tg(!1,!1),t.converter))}}function gk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ye("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Y3(){if(typeof Uint8Array>"u")throw new ye("unimplemented","Uint8Arrays are not available in this environment.")}function Q3(){if(!function _S(){return typeof atob<"u"}())throw new ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Fp=bn.SDK_VERSION,(0,bn._registerComponent)(new _r.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new Kn(new nS(t.getProvider("auth-internal")),new d4(t.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ye(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(f.options.projectId,g)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,bn.registerVersion)(VO,"3.13.0",n),(0,bn.registerVersion)(VO,"3.13.0","esm2017")}();class gE{constructor(e){this._delegate=e}static fromBase64String(e){return Q3(),new gE(bc.fromBase64String(e))}static fromUint8Array(e){return Y3(),new gE(bc.fromUint8Array(e))}toBase64(){return Q3(),this._delegate.toBase64()}toUint8Array(){return Y3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mk(n){return function K8(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Y8{enableIndexedDbPersistence(e,t){return function Z$(n,e){M3(n=Qt(n,Kn));const t=Rr(n);if(t._uninitializedComponentsProvider)throw new ye(ae.FAILED_PRECONDITION,"SDK cache is already specified.");go("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new zy;return A3(t,i,new KR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function K$(n){M3(n=Qt(n,Kn));const e=Rr(n);if(e._uninitializedComponentsProvider)throw new ye(ae.FAILED_PRECONDITION,"SDK cache is already specified.");go("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new zy;return A3(e,r,new l3(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Y$(n){if(n._initialized&&!n._terminated)throw new ye(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,V.Z)(function*(){try{yield(t=(0,V.Z)(function*(r){if(!ks.D())return Promise.resolve();const i=r+"main";yield ks.delete(i)}),function(r){return t.apply(this,arguments)})(jN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class J3{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Aa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&go("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){b3(this._delegate,e,t,r)}enableNetwork(){return function J$(n){return function k$(n){return n.asyncQueue.enqueue((0,V.Z)(function*(){const e=yield h3(n),t=yield f3(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.vu.delete(0),iE(i)}(t)}))}(Rr(n=Qt(n,Kn)))}(this._delegate)}disableNetwork(){return function X$(n){return function F$(n){return n.asyncQueue.enqueue((0,V.Z)(function*(){const e=yield h3(n),t=yield f3(n);return e.setNetworkEnabled(!1),(r=(0,V.Z)(function*(i){const a=qe(i);a.vu.add(0),yield Ly(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Rr(n=Qt(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,v3("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Q$(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return function y$(n,e){return NR.apply(this,arguments)}(yield nk(e),t)})),t.promise}(Rr(n=Qt(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function x8(n,e){return function V$(n,e){const t=new ZS(e);return n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return r=yield Gy(n),i=t,qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return r=yield Gy(n),i=t,void qe(r).ku.delete(i);var r,i}))}}(Rr(n=Qt(n,Kn)),ok(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zy(this,T3(this._delegate,e))}catch(t){throw hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ea(this,XS(this._delegate,e))}catch(t){throw hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fs(this,function H$(n,e){if(n=Qt(n,aE),ik("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Li(n,null,(t=e,new Na(Gt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function j8(n,e,t){n=Qt(n,Kn);const r=Object.assign(Object.assign({},V8),t);return function(i){if(i.maxAttempts<1)throw new ye(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new Or;return i.asyncQueue.enqueueAndForget((0,V.Z)(function*(){const g=yield function p3(n){return YS(n).then(e=>e.datastore)}(i);new N$(i.asyncQueue,g,l,a,f).run()})),f.promise}(Rr(n),i=>e(new B8(n,i)),r)}(this._delegate,t=>e(new X3(this,t)))}batch(){return Rr(this._delegate),new e5(new Z3(this._delegate,e=>qy(this._delegate,e)))}loadBundle(e){return function e8(n,e){const t=Rr(n=Qt(n,Kn)),r=new G$;return function B$(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?U4().encode(a):a,g=function(g,v){if(g instanceof Uint8Array)return u3(g,v);if(g instanceof ArrayBuffer)return u3(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new P$(g,l);var g}(t,rE(e));n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){!function M$(n,e,t){const r=qe(n);var i;(i=(0,V.Z)(function*(a,l,f){try{const g=yield l.getMetadata();if(yield function(A,R){const W=qe(A),Q=Nr(R.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",J=>W.qs.getBundleMetadata(J,R.id)).then(J=>!!J&&J.createTime.compareTo(Q)>=0)}(a.localStore,g))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(A=g).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);f._updateProgress(e3(g));const v=new c$(g,a.localStore,l.serializer);let E=yield l.bc();for(;E;){const A=yield v.zu(E);A&&f._updateProgress(A),E=yield l.bc()}const T=yield v.complete();return yield Xl(a,T.Ju,void 0),yield function(A,R){const W=qe(A);return W.persistence.runTransaction("Save bundle","readwrite",Q=>W.qs.saveBundleMetadata(Q,R))}(a.localStore,g),f._completeWith(T.progress),Promise.resolve(T.Hu)}catch(g){return go("SyncEngine",`Loading bundle failed with ${g}`),f._failWith(g),Promise.resolve(new Set)}var A}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield nk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function t8(n,e){return function j$(n,e){return n.asyncQueue.enqueue((0,V.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield QS(n),e)}))}(Rr(n=Qt(n,Kn)),e).then(t=>t?new Li(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fs(this,t):null)}}class uA extends fk{constructor(e){super(),this.firestore=e}convertBytes(e){return new gE(new bc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ea.forKey(t,this.firestore,null)}}class X3{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uA(e)}get(e){const t=rg(e);return this._delegate.get(t).then(r=>new mE(this._firestore,new tu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=rg(e);return r?(gk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=rg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=rg(e);return this._delegate.delete(t),this}}class e5{constructor(e){this._delegate=e}set(e,t,r){const i=rg(e);return r?(gk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=rg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=rg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ng{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _E(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ng.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new ng(e,new uA(e),t),i.set(t,a)),a}}ng.INSTANCES=new WeakMap;class ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ea(t,new Zn(t._delegate,r,new We(e)))}static forKey(e,t,r){return new ea(t,new Zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zy(this.firestore,T3(this._delegate,e))}catch(t){throw hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,z.m9)(e))instanceof Zn&&D3(this._delegate,e)}set(e,t){t=gk("DocumentReference.set",t);try{return t?G3(this._delegate,e,t):G3(this._delegate,e)}catch(r){throw hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?W3(this._delegate,e):W3(this._delegate,e,t,...r)}catch(i){throw hs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function A8(n){return qy(Qt(n.firestore,Kn),[new xy(n._key,tr.none())])}(this._delegate)}onSnapshot(...e){const t=t5(e),r=n5(e,i=>new mE(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return q3(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function E8(n){n=Qt(n,Zn);const e=Qt(n.firestore,Kn),t=Rr(e),r=new Kd(e);return function L$(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return(r=(0,V.Z)(function*(i,a,l){try{const f=yield function(g,v){const E=qe(g);return E.persistence.runTransaction("read document","readonly",T=>E.localDocuments.getDocument(T,v))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new ye(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const g=By(f,`Failed to get document '${a} from cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield QS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new tu(e,r,n._key,i,new tg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function b8(n){n=Qt(n,Zn);const e=Qt(n.firestore,Kn);return g3(Rr(e),n._key,{source:"server"}).then(t=>pk(e,n,t))}(this._delegate):function I8(n){n=Qt(n,Zn);const e=Qt(n.firestore,Kn);return g3(Rr(e),n._key).then(t=>pk(e,n,t))}(this._delegate),t.then(r=>new mE(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ea(this.firestore,this._delegate.withConverter(e?ng.getInstance(this.firestore,e):null))}}function hs(n,e,t){return n.message=n.message.replace(e,t),n}function t5(n){for(const e of n)if("object"==typeof e&&!mk(e))return e;return{}}function n5(n,e){var t,r;let i;return i=mk(n[0])?n[0]:mk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return z3(this._delegate,e._delegate)}}class _E extends mE{data(e){const t=this._delegate.data(e);return function _I(n,e){n||et()}(void 0!==t),t}}class fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uA(e)}where(e,t,r){try{return new fs(this.firestore,qd(this._delegate,function d8(n,e,t){const r=e,i=sA("where",n);return fE._create(i,r,t)}(e,t,r)))}catch(i){throw hs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fs(this.firestore,qd(this._delegate,function h8(n,e="asc"){const t=e,r=sA("orderBy",n);return hk._create(r,t)}(e,t)))}catch(r){throw hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fs(this.firestore,qd(this._delegate,function f8(n){return I3("limit",n),oA._create("limit",n,"F")}(e)))}catch(t){throw hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fs(this.firestore,qd(this._delegate,function p8(n){return I3("limitToLast",n),oA._create("limitToLast",n,"L")}(e)))}catch(t){throw hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fs(this.firestore,qd(this._delegate,function g8(...n){return aA._create("startAt",n,!0)}(...e)))}catch(t){throw hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fs(this.firestore,qd(this._delegate,function m8(...n){return aA._create("startAfter",n,!1)}(...e)))}catch(t){throw hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fs(this.firestore,qd(this._delegate,function _8(...n){return cA._create("endBefore",n,!1)}(...e)))}catch(t){throw hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fs(this.firestore,qd(this._delegate,function y8(...n){return cA._create("endAt",n,!0)}(...e)))}catch(t){throw hs(t,"endAt()","Query.endAt()")}}isEqual(e){return sk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function D8(n){n=Qt(n,Li);const e=Qt(n.firestore,Kn),t=Rr(e),r=new Kd(e);return function U$(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,V.Z)(function*(){return(r=(0,V.Z)(function*(i,a,l){try{const f=yield jS(i,a,!0),g=new r3(a,f.ir),v=g.sc(f.documents),E=g.applyChanges(v,!1);l.resolve(E.snapshot)}catch(f){const g=By(f,`Failed to execute query '${a} against cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield QS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Zd(e,r,n,i))}(this._delegate):"server"===e?.source?function S8(n){n=Qt(n,Li);const e=Qt(n.firestore,Kn),t=Rr(e),r=new Kd(e);return m3(t,n._query,{source:"server"}).then(i=>new Zd(e,r,n,i))}(this._delegate):function T8(n){n=Qt(n,Li);const e=Qt(n.firestore,Kn),t=Rr(e),r=new Kd(e);return L3(n._query),m3(t,n._query).then(i=>new Zd(e,r,n,i))}(this._delegate),t.then(r=>new _k(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=t5(e),r=n5(e,i=>new _k(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return q3(this._delegate,t,r)}withConverter(e){return new fs(this.firestore,this._delegate.withConverter(e?ng.getInstance(this.firestore,e):null))}}class J8{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _E(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _k{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _E(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new J8(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _E(this._firestore,r))})}isEqual(e){return z3(this._delegate,e._delegate)}}class Zy extends fs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ea(this.firestore,e):null}doc(e){try{return new ea(this.firestore,void 0===e?XS(this._delegate):XS(this._delegate,e))}catch(t){throw hs(t,"doc()","CollectionReference.doc()")}}add(e){return function M8(n,e){const t=Qt(n.firestore,Kn),r=XS(n),i=lA(n.converter,e);return qy(t,[nA(Xp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,tr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ea(this.firestore,t))}isEqual(e){return D3(this._delegate,e._delegate)}withConverter(e){return new Zy(this.firestore,this._delegate.withConverter(e?ng.getInstance(this.firestore,e):null))}}function rg(n){return Qt(n,Zn)}class yk{constructor(...e){this._delegate=new eu(...e)}static documentId(){return new yk(er.keyField().canonicalString())}isEqual(e){return(e=(0,z.m9)(e))instanceof eu&&this._delegate._internalPath.isEqual(e._internalPath)}}class ig{constructor(e){this._delegate=e}static serverTimestamp(){const e=function H8(){return new ak("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ig(e)}static delete(){const e=function $8(){return new lE("deleteField")}();return e._methodName="FieldValue.delete",new ig(e)}static arrayUnion(...e){const t=function z8(...n){return new o8("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ig(t)}static arrayRemove(...e){const t=function G8(...n){return new a8("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ig(t)}static increment(e){const t=function W8(n){return new c8("increment",n)}(e);return t._methodName="FieldValue.increment",new ig(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const X8={Firestore:J3,GeoPoint:eA,Timestamp:kn,Blob:gE,Transaction:X3,WriteBatch:e5,DocumentReference:ea,DocumentSnapshot:mE,Query:fs,QueryDocumentSnapshot:_E,QuerySnapshot:_k,CollectionReference:Zy,FieldPath:yk,FieldValue:ig,setLogLevel:function Q8(n){!function l4(n){Gl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function tH(n){(function eH(n,e){n.INTERNAL.registerComponent(new _r.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},X8)))})(n,(e,t)=>new J3(e,t,new Y8)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Qi.Z);var nH=F(3019);class rH extends Mi.x{constructor(e=1/0,t=1/0,r=bf){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)f=g;f&&r.splice(0,f+1)}}}var iH=F(3020);function r5(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,iH.B)({connector:()=>new rH(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function i5(n,e){return(0,Qs.m)(e)?(0,Gn.w)(()=>n,e):(0,Gn.w)(()=>n)}class nu{constructor(e){return e}}class Ky{constructor(){return(0,bn.getApps)()}}const vk=new u.OlP("angularfire2._apps"),oH={provide:nu,useFactory:function sH(n){return n&&1===n.length?n[0]:new nu((0,bn.getApp)())},deps:[[new u.FiY,vk]]},aH={provide:Ky,deps:[[new u.FiY,vk]]};function cH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new nu(r)}}let lH=(()=>{class n{constructor(t){(0,bn.registerVersion)("angularfire",Pl.full,"core"),(0,bn.registerVersion)("angularfire",Pl.full,"app"),(0,bn.registerVersion)("angular",u.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[oH,aH]}),n})();function uH(n,...e){return{ngModule:lH,providers:[{provide:vk,useFactory:cH(n),multi:!0,deps:[u.R0b,u.zs3,Nl,...e]}]}}const dH=Ed(bn.initializeApp,!0),Ck=new Map,s5={activated:!1,tokenObservers:[]},hH={initialized:!1,enabled:!1};function wr(n){return Ck.get(n)||Object.assign({},s5)}function dA(){return hH}const wk="https://content-firebaseappcheck.googleapis.com/v1",mH="exchangeDebugToken",o5={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class yH{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,V.Z)(function*(){t.stop();try{t.pending=new z.BH,yield function vH(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ui=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ik(n){if(!wr(n).activated)throw Ui.create("use-before-activation",{appName:n.name})}function pA(n,e){return bk.apply(this,arguments)}function bk(){return bk=(0,V.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(T){throw Ui.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==l.status)throw Ui.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(T){throw Ui.create("fetch-parse-error",{originalErrorMessage:T?.message})}const g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Ui.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(g[1]),E=Date.now();return{token:f.token,expireTimeMillis:E+v,issuedAtTimeMillis:E}}),bk.apply(this,arguments)}function a5(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${wk}/projects/${t}/apps/${r}:${mH}?key=${i}`,body:{debug_token:e}}}const EH="firebase-app-check-database",bH=1,yE="firebase-app-check-store";let gA=null;function Tk(){return Tk=(0,V.Z)(function*(n,e){const r=(yield function l5(){return gA||(gA=new Promise((n,e)=>{try{const t=indexedDB.open(EH,bH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ui.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(yE,{keyPath:"compositeKey"})}}catch(t){e(Ui.create("storage-open",{originalErrorMessage:t?.message}))}}),gA)}()).transaction(yE,"readwrite"),a=r.objectStore(yE).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=g=>{l()},r.onerror=g=>{var v;f(Ui.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})}),Tk.apply(this,arguments)}const vE=new Pi.Yd("@firebase/app-check");function Ak(n,e){return(0,z.hl)()?function DH(n,e){return function u5(n,e){return Tk.apply(this,arguments)}(function h5(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{vE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xk(){return dA().enabled}function Pk(){return Ok.apply(this,arguments)}function Ok(){return Ok=(0,V.Z)(function*(){const n=dA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Ok.apply(this,arguments)}const OH={error:"UNKNOWN_ERROR"};function NH(n){return z.US.encodeString(JSON.stringify(n),!1)}function mA(n){return Nk.apply(this,arguments)}function Nk(){return Nk=(0,V.Z)(function*(n,e=!1){const t=n.app;Ik(t);const r=wr(t);let a,i=r.token;if(i&&!Yy(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(Yy(g)?i=g:yield Ak(t,void 0))}if(!e&&i&&Yy(i))return{token:i.token};let f,l=!1;if(xk()){r.exchangeTokenPromise||(r.exchangeTokenPromise=pA(a5(t,yield Pk()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const g=yield r.exchangeTokenPromise;return yield Ak(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield wr(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?vE.warn(g.message):vE.error(g),a=g}return i?a?f=Yy(i)?{token:i.token,internalError:a}:m5(a):(f={token:i.token},r.token=i,yield Ak(t,i)):f=m5(a),l&&function g5(n,e){const t=wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),Nk.apply(this,arguments)}function Rk(){return Rk=(0,V.Z)(function*(n){const e=n.app;Ik(e);const{provider:t}=wr(e);if(xk()){const r=yield Pk(),{token:i}=yield pA(a5(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),Rk.apply(this,arguments)}function Fk(n,e){const t=wr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function p5(n){const{app:e}=n,t=wr(e);let r=t.tokenRefresher;r||(r=function RH(n){const{app:e}=n;return new yH((0,V.Z)(function*(){let r;if(r=wr(e).token?yield mA(n,!0):yield mA(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},o5.RETRIAL_MIN_WAIT,o5.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Yy(n){return n.expireTimeMillis-Date.now()>0}function m5(n){return{token:NH(OH),error:n}}class kH{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=wr(this.app);for(const t of e)Fk(this.app,t.next);return Promise.resolve()}}const b5="app-check-internal";!function KH(){Ki(new _r.wA("app-check",n=>function FH(n,e){return new kH(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(b5).initialize()})),Ki(new _r.wA(b5,n=>function LH(n){return{getToken:e=>mA(n,e),getLimitedUseToken:()=>function f5(n){return Rk.apply(this,arguments)}(n),addTokenListener:e=>function kk(n,e,t,r){const{app:i}=n,a=wr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Yy(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),p5(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>p5(n))}(n,"INTERNAL",e),removeTokenListener:e=>Fk(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Oi("@firebase/app-check","0.8.0")}();class sg{constructor(){return Ps("app-check")}}typeof window<"u"&&window,F(120);const D5=new u.OlP("angularfire2.auth.use-emulator"),S5=new u.OlP("angularfire2.auth.settings"),A5=new u.OlP("angularfire2.auth.tenant-id"),M5=new u.OlP("angularfire2.auth.langugage-code"),x5=new u.OlP("angularfire2.auth.use-device-language"),P5=new u.OlP("angularfire.auth.persistence"),O5=(n,e,t,r,i,a,l,f)=>(0,Yi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),l)for(const[v,E]of Object.entries(l))g.settings[v]=E;return f&&g.setPersistence(f),g},[t,r,i,a,l,f]);let jk=(()=>{class n{constructor(t,r,i,a,l,f,g,v,E,T,A,R){const W=new Mi.x,Q=(0,ut.of)(void 0).pipe((0,Cd.Q)(l.outsideAngular),(0,Gn.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8661)))),(0,wt.U)(()=>(0,Yi.on)(t,a,r)),(0,wt.U)(J=>O5(J,a,f,v,E,T,g,A)),r5({bufferSize:1,refCount:!1}));if(Si(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ut.of)(null);else{Q.pipe(or()).subscribe();const be=Q.pipe((0,Gn.w)(Ye=>Ye.getRedirectResult().then(gt=>gt,()=>null)),jr,r5({bufferSize:1,refCount:!1})),ze=Q.pipe((0,Gn.w)(Ye=>new fi.y(gt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onAuthStateChanged(Mt=>gt.next(Mt),Mt=>gt.error(Mt),()=>gt.complete()))})))),Re=Q.pipe((0,Gn.w)(Ye=>new fi.y(gt=>({unsubscribe:a.runOutsideAngular(()=>Ye.onIdTokenChanged(Mt=>gt.next(Mt),Mt=>gt.error(Mt),()=>gt.complete()))}))));this.authState=be.pipe(i5(ze),(0,sp.R)(l.outsideAngular),(0,Cd.Q)(l.insideAngular)),this.user=be.pipe(i5(Re),(0,sp.R)(l.outsideAngular),(0,Cd.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Gn.w)(Ye=>Ye?(0,pn.D)(Ye.getIdToken()):(0,ut.of)(null))),this.idTokenResult=this.user.pipe((0,Gn.w)(Ye=>Ye?(0,pn.D)(Ye.getIdTokenResult()):(0,ut.of)(null))),this.credential=(0,nH.T)(be,W,this.authState.pipe(Ar(Ye=>!Ye))).pipe((0,wt.U)(Ye=>Ye?.user?Ye:null),(0,sp.R)(l.outsideAngular),(0,Cd.Q)(l.insideAngular))}return(0,Yi.pX)(this,Q,a,{spy:{apply:(J,be,ze)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&ze.then(Re=>W.next(Re))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Yi.Dh),u.LFG(Yi.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Nl),u.LFG(D5,8),u.LFG(S5,8),u.LFG(A5,8),u.LFG(M5,8),u.LFG(x5,8),u.LFG(P5,8),u.LFG(sg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function N5(n,e){return function tz(n,e=U0){return new fi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function $k(n,e){return N5(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function yA(n,e){return $k(n,e).pipe(Xa(void 0),mc(),(0,wt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const g=i.find(E=>E.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(E=>E.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function R5(n,e,t){return yA(n,t).pipe(la((r,i)=>function rz(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function iz(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Hk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Hk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Hk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,lO.x)(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Hk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function k5(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class F5{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=yA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Xa(void 0),mc(),Ar(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),jr)}auditTrail(e){return this.stateChanges(e).pipe(la((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=k5(e);return R5(this.query,t,this.afs.schedulers.outsideAngular).pipe(jr)}valueChanges(e={}){return $k(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),jr)}get(e){return(0,pn.D)(this.query.get(e)).pipe(jr)}add(e){return this.ref.add(e)}doc(e){return new L5(this.ref.doc(e),this.afs)}}class L5{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=U5(r,t);return new F5(i,a,this.afs)}snapshotChanges(){return function nz(n,e){return N5(n,e).pipe(Xa(void 0),mc(),(0,wt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(jr)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(jr)}}class sz{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?yA(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ar(t=>t.length>0),jr):yA(this.query,this.afs.schedulers.outsideAngular).pipe(jr)}auditTrail(e){return this.stateChanges(e).pipe(la((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=k5(e);return R5(this.query,t,this.afs.schedulers.outsideAngular).pipe(jr)}valueChanges(e={}){return $k(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),jr)}get(e){return(0,pn.D)(this.query.get(e)).pipe(jr)}}const oz=new u.OlP("angularfire2.enableFirestorePersistence"),az=new u.OlP("angularfire2.firestore.persistenceSettings"),cz=new u.OlP("angularfire2.firestore.settings"),lz=new u.OlP("angularfire2.firestore.use-emulator");function U5(n,e=(t=>t)){return{query:e(n),ref:n}}let vA=(()=>{class n{constructor(t,r,i,a,l,f,g,v,E,T,A,R,W,Q,J,be,ze){this.schedulers=g;const Re=(0,Yi.on)(t,f,r),Ye=E;T&&O5(Re,f,A,W,Q,J,R,be),[this.firestore,this.persistenceEnabled$]=(0,Yi.cc)(`${Re.name}.firestore`,"AngularFirestore",Re.name,()=>{const gt=f.runOutsideAngular(()=>Re.firestore());if(a&&gt.settings(a),Ye&&gt.useEmulator(...Ye),i&&!Si(l)){const Mt=()=>{try{return(0,pn.D)(gt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(kr){return typeof console<"u"&&console.warn(kr),(0,ut.of)(!1)}};return[gt,f.runOutsideAngular(Mt)]}return[gt,(0,ut.of)(!1)]},[a,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=U5(i,r),f=this.schedulers.ngZone.run(()=>a);return new F5(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new sz(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new L5(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Yi.Dh),u.LFG(Yi.xv,8),u.LFG(oz,8),u.LFG(cz,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Nl),u.LFG(az,8),u.LFG(lz,8),u.LFG(jk,8),u.LFG(D5,8),u.LFG(S5,8),u.LFG(A5,8),u.LFG(M5,8),u.LFG(x5,8),u.LFG(P5,8),u.LFG(sg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var V5=F(6710);let Vi=(()=>{class n{constructor(t,r){this.afAuth=t,this.db=r,this._loggedInUser$=new mr.X(document.cookie.match(/loggedInUser=(.*)/)?JSON.parse(document.cookie.match(/loggedInUser=(.*)/)[1]):null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,V.Z)(function*(){try{const r=yield t.afAuth.signInWithPopup(new V5.V);yield t.createOrUpdateUserOnDB(r);const i=yield t.afAuth.currentUser;i&&(document.cookie=`loggedInUser=${JSON.stringify(i)}; max-age=999999999999; path=/`,t._loggedInUser$.next(i))}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,V.Z)(function*(){try{const i=yield r.afAuth.signInWithEmailAndPassword(t.email,t.password);yield r.createOrUpdateUserOnDB(i,t);const a=yield r.afAuth.currentUser;a&&(document.cookie=`loggedInUser=${JSON.stringify(a)}; max-age=999999999999; path=/`,r._loggedInUser$.next(a))}catch(i){throw console.error(i.message),i.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,V.Z)(function*(){try{const i=yield r.afAuth.createUserWithEmailAndPassword(t.email,t.password);yield r.createOrUpdateUserOnDB(i,t);const a=yield r.afAuth.currentUser;a&&(document.cookie=`loggedInUser=${JSON.stringify(a)}; max-age=999999999999; path=/`,r._loggedInUser$.next(a))}catch(i){throw console.error(i.message),i.message}})()}logOut(){var t=this;return(0,V.Z)(function*(){try{yield t.afAuth.signOut(),document.cookie=`loggedInUser=${JSON.stringify(null)}; max-age=0; path=/`,t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}createOrUpdateUserOnDB(t,r=null){var i=this;return(0,V.Z)(function*(){var a;i.db.collection("users").doc(t.user.uid).get().pipe(Jt(1)).subscribe({next:(a=(0,V.Z)(function*(l){if(l.exists){const f=l.data();f._id||(yield i.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),f.fullName||(yield i.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.user?.displayName})),f.imgUrl||(yield i.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),f.followedByUsers||(yield i.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),f.followingUsers||(yield i.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield i.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.user?.displayName,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[]})}),function(f){return a.apply(this,arguments)}),error:a=>{console.error(a)}})})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}getLoggedInUser(){return this._loggedInUser$.value}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(jk),u.LFG(vA))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _o=function(n){return n[n.Up=1]="Up",n[n.Down=3]="Down",n[n.Right=6]="Right",n[n.Left=8]="Left",n[n.UpMirrored=2]="UpMirrored",n[n.DownMirrored=4]="DownMirrored",n[n.LeftMirrored=5]="LeftMirrored",n[n.RightMirrored=7]="RightMirrored",n[n.Default=0]="Default",n[n.NotJpeg=-1]="NotJpeg",n[n.NotDefined=-2]="NotDefined",n}(_o||{});class Ln{}Ln.getOrientation=n=>new Promise((e,t)=>{try{const r=new FileReader;r.onload=()=>{const i=new DataView(r.result);if(!i.byteLength||65496!==i.getUint16(0,!1))return e(_o.NotDefined);const a=i.byteLength;let l=2;for(;l<a;){const f=i.getUint16(l,!1);if(l+=2,65505===f){if(1165519206!==i.getUint32(l+=2,!1))return e(_o.NotJpeg);const g=18761===i.getUint16(l+=6,!1);l+=i.getUint32(l+4,g);const v=i.getUint16(l,g);l+=2;for(let E=0;E<v;E++)if(274===i.getUint16(l+12*E,g))return e(i.getUint16(l+12*E+8,g))}else{if(65280!=(65280&f))break;l+=i.getUint16(l,!1)}}return e(_o.NotJpeg)},r.readAsArrayBuffer(n)}catch{return t(_o.Default)}}),Ln.uploadFile=(n,e=!0,t=!1)=>new Promise(function(r,i){const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),l=/iPad|iPhone|iPod/i.test(navigator.userAgent);Promise.resolve(a||l).then(f=>f?Ln.generateUploadInputNative(window.document,e,t):Ln.generateUploadInputRenderer(n,e,t)).then(f=>{const g=f?Array.from(f):[],v=g.map(A=>Ln.getOrientation(A)),E=g.map(A=>Ln.fileToDataURL(A));let T=[];Promise.all(v).then(A=>(T=A,Promise.all(E))).then(A=>{const R=A.map((W,Q)=>({image:W.dataUrl,orientation:T[Q],fileName:W.fileName}));r(e?R:R[0])})}).catch(f=>i(f))}),Ln.fileToDataURL=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=i=>{e({dataUrl:i.target.result,fileName:n.name})};try{r.readAsDataURL(n)}catch(i){t(`ngx-image-compress - probably no file have been selected: ${i}`)}}),Ln.generateUploadInputRenderer=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,a)=>{const l=n.createElement("input");n.setStyle(l,"display","none"),n.setProperty(l,"type","file"),n.setProperty(l,"accept","image/*"),e&&n.setProperty(l,"multiple","true"),n.listen(l,"click",f=>{f.target.value=""}),n.listen(l,"change",f=>{r=!0,i(f.target.files)}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{r||a(new Error("file upload on blur - no file selected"))},300)},{once:!0}),l.click()})},Ln.generateUploadInputNative=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,a)=>{const l=n.createElement("input");l.id="upload-input"+new Date,l.style.display="none",l.setAttribute("type","file"),l.setAttribute("accept","image/*"),e&&l.setAttribute("multiple","true"),n.body.appendChild(l),l.addEventListener("change",()=>{r=!0,i(l.files),n.body.removeChild(n.getElementById(l.id))},{once:!0}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{!r&&n.getElementById(l.id)&&(a(new Error("file upload on blur - no file selected")),n.body.removeChild(n.getElementById(l.id)))},300)},{once:!0}),l.click()})},Ln.compress=(n,e,t,r=50,i=50,a=0,l=0)=>new Promise(function(f,g){i/=100,r/=100;const v=new Image;v.onload=()=>{const E=t.createElement("canvas"),T=E.getContext("2d");if(!T)return g("No canvas context available");let A=v.naturalWidth,R=v.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(e===_o.Right||e===_o.Left)){const Re=A;A=R,R=Re}r=Math.min(r,a?a/A:1,l?l/R:1),E.width=A*r,E.height=R*r;const J=Math.PI/180;CSS.supports("image-orientation","from-image")||e===_o.Up?T.drawImage(v,0,0,E.width,E.height):e===_o.Right?(T.save(),T.rotate(90*J),T.translate(0,-E.width),T.drawImage(v,0,0,E.height,E.width),T.restore()):e===_o.Left?(T.save(),T.rotate(-90*J),T.translate(-E.width,0),T.drawImage(v,0,0,E.height,E.width),T.restore()):e===_o.Down?(T.save(),T.rotate(180*J),T.translate(-E.width,-E.height),T.drawImage(v,0,0,E.width,E.height),T.restore()):T.drawImage(v,0,0,E.width,E.height);const be=n.substr(5,n.split(";")[0].length-5),ze=E.toDataURL(be,i);f(ze)},v.onerror=E=>g(E),v.src=n}),Ln.byteCount=n=>encodeURI(n).split(/%..|./).length-1,Ln.getImageMaxSize=function(){var n=(0,V.Z)(function*(e,t,r,i=!1){const l=v=>(v/1024/1024).toFixed(2);t&&console.debug("NgxImageCompress - Opening upload window");const f=yield Ln.uploadFile(r,!1,i);let g;for(let v=0;v<10;v++){const E=Ln.byteCount(f.image);g=yield Ln.compress(f.image,f.orientation,r,50,100);const T=Ln.byteCount(g);if(console.debug("NgxImageCompress -","Compression from",l(E),"MB to",l(T),"MB"),T>=E)throw 0===v?(t&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",l(E),"MB large"),{...f,image:g}):(t&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",l(E),"MB large"),{...f,image:g});if(T<1024*e*1024)return t&&console.debug("NgxImageCompress -","Here your file",l(T),"MB large"),{...f,image:g};if(9===v)throw t&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",l(E),"MB large"),{...f,image:g};t&&console.debug("NgxImageCompress -","Reached",l(T),"MB large. Trying another time after",v+1,"times"),f.image=g}throw t&&console.debug("NgxImageCompress - Unexpected error"),{}});return function(e,t,r){return n.apply(this,arguments)}}();let dz=(()=>{class n{constructor(t){this.DOC_ORIENTATION=_o,this.render=t.createRenderer(null,null)}byteCount(t){return Ln.byteCount(t)}getOrientation(t){return Ln.getOrientation(t)}uploadFile(){return Ln.uploadFile(this.render,!1)}uploadMultipleFiles(){return Ln.uploadFile(this.render,!0)}uploadFileOrReject(){return Ln.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return Ln.uploadFile(this.render,!0,!0)}compressFile(t,r,i=50,a=50,l=0,f=0){return Ln.compress(t,r,this.render,i,a,l,f)}uploadAndGetImageWithMaxSize(t=1,r=!1,i=!1){return Ln.getImageMaxSize(t,r,this.render,i).then(a=>a.image).catch(a=>{throw a.image})}uploadAndGetImageWithMaxSizeAndMetas(t=1,r=!1,i=!1){return Ln.getImageMaxSize(t,r,this.render,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CE=(()=>{class n{constructor(t,r,i){this.db=t,this.authService=r,this.imageCompress=i,this._posts$=new mr.X([]),this.posts$=this._posts$.asObservable()}getPosts(){var t=this;return(0,V.Z)(function*(){const r=t.authService.getLoggedInUser();if(!r)return;const i=t.db.collection("users").doc(r.uid).valueChanges().pipe(Jt(1)),a=yield oo(i);return t.db.collection("posts",f=>f.where("creatorId","in",[r.uid,...a.followingUsers]).orderBy("createdAt","desc")).valueChanges().pipe(En(function(){var f=(0,V.Z)(function*(g){t._posts$.next([...g])});return function(g){return f.apply(this,arguments)}}()))})()}toggleLike(t,r){var i=this;return(0,V.Z)(function*(){return t?yield i.addLike(r):yield i.removeLike(r)})()}addLike(t){var r=this;return(0,V.Z)(function*(){return new Promise(function(){var i=(0,V.Z)(function*(a,l){try{const f=r.authService.getLoggedInUser();t.likedByUsers=t.likedByUsers.map(g=>g._id),t.likedByUsers.push(f.uid),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...t.likedByUsers]}),a("Add like done")}catch(f){throw l("Add like failed:"),f}});return function(a,l){return i.apply(this,arguments)}}())})()}removeLike(t){var r=this;return(0,V.Z)(function*(){return new Promise(function(){var i=(0,V.Z)(function*(a,l){try{const g=r.authService.getLoggedInUser().uid;t.likedByUsers=t.likedByUsers.map(E=>E._id);const v=t.likedByUsers.findIndex(E=>E===g);t.likedByUsers.splice(v,1),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...t.likedByUsers]}),a("Remove like done")}catch(f){throw a("Remove like failed!"),f}});return function(a,l){return i.apply(this,arguments)}}())})()}uploadMedia(){var t=this;return(0,V.Z)(function*(){try{const{image:r,orientation:i}=yield t.imageCompress.uploadFile();return yield t.imageCompress.compressFile(r,i,50,50)}catch(r){return console.error(r),null}})()}createPost(t){var r=this;return(0,V.Z)(function*(){const i=r.authService.getLoggedInUser();t.creatorId=i.uid;const a=r.db.collection("users").doc(i.uid).valueChanges().pipe(Jt(1)),l=yield oo(a);t.creatorFullName=i.displayName||l.fullName,t.createdAt=Date.now();const f=yield r.db.collection("posts").add(t);yield r.db.collection("posts").doc(f.id).update({_id:f.id})})()}getCommentsByPostId(t){return this.db.collection("comments",i=>i.where("postId","==",t).orderBy("createdAt","desc")).valueChanges()}addComment(t,r){var i=this;return(0,V.Z)(function*(){t.createdAt=Date.now();const a=yield i.db.collection("comments").add(t);yield i.db.collection("comments").doc(a.id).update({_id:a.id,parentId:a.id})})()}_makeId(t=5){let r="";for(let a=0;a<t;a++)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return r}_handleError(t){return console.log("err:",t),ca(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(vA),u.LFG(Vi),u.LFG(dz))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CA(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let l,a=!1;n.subscribe({next:f=>{l=f,a=!0},error:i,complete:()=>{a?r(l):t?r(e.defaultValue):i(new to)}})})}const B5=function pz(n,e){return n===e||n!=n&&e!=e},wA=function gz(n,e){for(var t=n.length;t--;)if(B5(n[t][0],e))return t;return-1};var _z=Array.prototype.splice;function Qy(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Qy.prototype.clear=function hz(){this.__data__=[],this.size=0},Qy.prototype.delete=function yz(n){var e=this.__data__,t=wA(e,n);return!(t<0||(t==e.length-1?e.pop():_z.call(e,t,1),--this.size,0))},Qy.prototype.get=function Cz(n){var e=this.__data__,t=wA(e,n);return t<0?void 0:e[t][1]},Qy.prototype.has=function Iz(n){return wA(this.__data__,n)>-1},Qy.prototype.set=function bz(n,e){var t=this.__data__,r=wA(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const IA=Qy,j5="object"==typeof global&&global&&global.Object===Object&&global;var kz="object"==typeof self&&self&&self.Object===Object&&self;const Tc=j5||kz||Function("return this")(),Jy=Tc.Symbol;var $5=Object.prototype,Uz=$5.hasOwnProperty,Vz=$5.toString,wE=Jy?Jy.toStringTag:void 0;var Hz=Object.prototype.toString;var H5=Jy?Jy.toStringTag:void 0;const IE=function Zz(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":H5&&H5 in Object(n)?function Bz(n){var e=Uz.call(n,wE),t=n[wE];try{n[wE]=void 0;var r=!0}catch{}var i=Vz.call(n);return r&&(e?n[wE]=t:delete n[wE]),i}(n):function zz(n){return Hz.call(n)}(n)},EE=function Kz(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},z5=function eG(n){if(!EE(n))return!1;var e=IE(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},zk=Tc["__core-js_shared__"];var G5=function(){var n=/[^.]+$/.exec(zk&&zk.keys&&zk.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();var sG=Function.prototype.toString;const og=function oG(n){if(null!=n){try{return sG.call(n)}catch{}try{return n+""}catch{}}return""};var cG=/^\[object .+?Constructor\]$/,fG=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const gG=function pG(n){return!(!EE(n)||function nG(n){return!!G5&&G5 in n}(n))&&(z5(n)?fG:cG).test(og(n))},ag=function yG(n,e){var t=function mG(n,e){return n?.[e]}(n,e);return gG(t)?t:void 0},bE=ag(Tc,"Map"),TE=ag(Object,"create");var SG=Object.prototype.hasOwnProperty;var PG=Object.prototype.hasOwnProperty;function Xy(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Xy.prototype.clear=function wG(){this.__data__=TE?TE(null):{},this.size=0},Xy.prototype.delete=function EG(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},Xy.prototype.get=function AG(n){var e=this.__data__;if(TE){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return SG.call(e,n)?e[n]:void 0},Xy.prototype.has=function OG(n){var e=this.__data__;return TE?void 0!==e[n]:PG.call(e,n)},Xy.prototype.set=function kG(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=TE&&void 0===e?"__lodash_hash_undefined__":e,this};const W5=Xy,EA=function jG(n,e){var t=n.__data__;return function VG(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function ev(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ev.prototype.clear=function LG(){this.size=0,this.__data__={hash:new W5,map:new(bE||IA),string:new W5}},ev.prototype.delete=function $G(n){var e=EA(this,n).delete(n);return this.size-=e?1:0,e},ev.prototype.get=function zG(n){return EA(this,n).get(n)},ev.prototype.has=function WG(n){return EA(this,n).has(n)},ev.prototype.set=function ZG(n,e){var t=EA(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const YG=ev;function tv(n){var e=this.__data__=new IA(n);this.size=e.size}tv.prototype.clear=function Dz(){this.__data__=new IA,this.size=0},tv.prototype.delete=function Az(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},tv.prototype.get=function xz(n){return this.__data__.get(n)},tv.prototype.has=function Oz(n){return this.__data__.has(n)},tv.prototype.set=function JG(n,e){var t=this.__data__;if(t instanceof IA){var r=t.__data__;if(!bE||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new YG(r)}return t.set(n,e),this.size=t.size,this};const eW=tv;var rW=function(){try{var n=ag(Object,"defineProperty");return n({},"",{}),n}catch{}}();const q5=rW,Z5=function iW(n,e,t){"__proto__"==e&&q5?q5(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var oW=Object.prototype.hasOwnProperty;const K5=function aW(n,e,t){var r=n[e];(!oW.call(n,e)||!B5(r,t)||void 0===t&&!(e in n))&&Z5(n,e,t)},bA=function cW(n,e,t,r){var i=!t;t||(t={});for(var a=-1,l=e.length;++a<l;){var f=e[a],g=r?r(t[f],n[f],f,t,n):void 0;void 0===g&&(g=n[f]),i?Z5(t,f,g):K5(t,f,g)}return t},DE=function dW(n){return null!=n&&"object"==typeof n},Y5=function fW(n){return DE(n)&&"[object Arguments]"==IE(n)};var Q5=Object.prototype,pW=Q5.hasOwnProperty,gW=Q5.propertyIsEnumerable,mW=Y5(function(){return arguments}())?Y5:function(n){return DE(n)&&pW.call(n,"callee")&&!gW.call(n,"callee")};const _W=mW,Gk=Array.isArray;var J5="object"==typeof exports&&exports&&!exports.nodeType&&exports,X5=J5&&"object"==typeof module&&module&&!module.nodeType&&module,e6=X5&&X5.exports===J5?Tc.Buffer:void 0;const t6=(e6?e6.isBuffer:void 0)||function vW(){return!1};var TW=/^(?:0|[1-9]\d*)$/;const SW=function DW(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&TW.test(n))&&n>-1&&n%1==0&&n<e},n6=function MW(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991};var Yn={};Yn["[object Float32Array]"]=Yn["[object Float64Array]"]=Yn["[object Int8Array]"]=Yn["[object Int16Array]"]=Yn["[object Int32Array]"]=Yn["[object Uint8Array]"]=Yn["[object Uint8ClampedArray]"]=Yn["[object Uint16Array]"]=Yn["[object Uint32Array]"]=!0,Yn["[object Arguments]"]=Yn["[object Array]"]=Yn["[object ArrayBuffer]"]=Yn["[object Boolean]"]=Yn["[object DataView]"]=Yn["[object Date]"]=Yn["[object Error]"]=Yn["[object Function]"]=Yn["[object Map]"]=Yn["[object Number]"]=Yn["[object Object]"]=Yn["[object RegExp]"]=Yn["[object Set]"]=Yn["[object String]"]=Yn["[object WeakMap]"]=!1;const Wk=function nq(n){return function(e){return n(e)}};var r6="object"==typeof exports&&exports&&!exports.nodeType&&exports,SE=r6&&"object"==typeof module&&module&&!module.nodeType&&module,qk=SE&&SE.exports===r6&&j5.process;const nv=function(){try{return SE&&SE.require&&SE.require("util").types||qk&&qk.binding&&qk.binding("util")}catch{}}();var i6=nv&&nv.isTypedArray;const oq=i6?Wk(i6):function eq(n){return DE(n)&&n6(n.length)&&!!Yn[IE(n)]};var cq=Object.prototype.hasOwnProperty;const s6=function lq(n,e){var t=Gk(n),r=!t&&_W(n),i=!t&&!r&&t6(n),a=!t&&!r&&!i&&oq(n),l=t||r||i||a,f=l?function lW(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],g=f.length;for(var v in n)(e||cq.call(n,v))&&(!l||!("length"==v||i&&("offset"==v||"parent"==v)||a&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||SW(v,g)))&&f.push(v);return f};var uq=Object.prototype;const Zk=function dq(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||uq)},o6=function hq(n,e){return function(t){return n(e(t))}},pq=o6(Object.keys,Object);var mq=Object.prototype.hasOwnProperty;const a6=function vq(n){return null!=n&&n6(n.length)&&!z5(n)},Kk=function Cq(n){return a6(n)?s6(n):function _q(n){if(!Zk(n))return pq(n);var e=[];for(var t in Object(n))mq.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n)};var Dq=Object.prototype.hasOwnProperty;const Aq=function Sq(n){if(!EE(n))return function Eq(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=Zk(n),t=[];for(var r in n)"constructor"==r&&(e||!Dq.call(n,r))||t.push(r);return t},Yk=function Mq(n){return a6(n)?s6(n,!0):Aq(n)};var c6="object"==typeof exports&&exports&&!exports.nodeType&&exports,l6=c6&&"object"==typeof module&&module&&!module.nodeType&&module,u6=l6&&l6.exports===c6?Tc.Buffer:void 0,d6=u6?u6.allocUnsafe:void 0;const h6=function Vq(){return[]};var jq=Object.prototype.propertyIsEnumerable,f6=Object.getOwnPropertySymbols,$q=f6?function(n){return null==n?[]:(n=Object(n),function Lq(n,e){for(var t=-1,r=null==n?0:n.length,i=0,a=[];++t<r;){var l=n[t];e(l,t,n)&&(a[i++]=l)}return a}(f6(n),function(e){return jq.call(n,e)}))}:h6;const Qk=$q,p6=function Gq(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n},g6=o6(Object.getPrototypeOf,Object);var Zq=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)p6(e,Qk(n)),n=g6(n);return e}:h6;const m6=Zq,_6=function Qq(n,e,t){var r=e(n);return Gk(n)?r:p6(r,t(n))},Xq=function Jq(n){return _6(n,Kk,Qk)},tZ=function eZ(n){return _6(n,Yk,m6)},Jk=ag(Tc,"DataView"),Xk=ag(Tc,"Promise"),e2=ag(Tc,"Set"),t2=ag(Tc,"WeakMap");var y6="[object Map]",v6="[object Promise]",C6="[object Set]",w6="[object WeakMap]",I6="[object DataView]",aZ=og(Jk),cZ=og(bE),lZ=og(Xk),uZ=og(e2),dZ=og(t2),cg=IE;(Jk&&cg(new Jk(new ArrayBuffer(1)))!=I6||bE&&cg(new bE)!=y6||Xk&&cg(Xk.resolve())!=v6||e2&&cg(new e2)!=C6||t2&&cg(new t2)!=w6)&&(cg=function(n){var e=IE(n),t="[object Object]"==e?n.constructor:void 0,r=t?og(t):"";if(r)switch(r){case aZ:return I6;case cZ:return y6;case lZ:return v6;case uZ:return C6;case dZ:return w6}return e});const n2=cg;var fZ=Object.prototype.hasOwnProperty;const E6=Tc.Uint8Array,r2=function _Z(n){var e=new n.constructor(n.byteLength);return new E6(e).set(new E6(n)),e};var CZ=/\w*$/;var b6=Jy?Jy.prototype:void 0,T6=b6?b6.valueOf:void 0;const qZ=function WZ(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return r2(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function yZ(n,e){var t=e?r2(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function TZ(n,e){var t=e?r2(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function wZ(n){var e=new n.constructor(n.source,CZ.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function EZ(n){return T6?Object(T6.call(n)):{}}(n)}};var D6=Object.create,ZZ=function(){function n(){}return function(e){if(!EE(e))return{};if(D6)return D6(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const KZ=ZZ;var S6=nv&&nv.isMap;const nK=S6?Wk(S6):function XZ(n){return DE(n)&&"[object Map]"==n2(n)};var A6=nv&&nv.isSet;const aK=A6?Wk(A6):function iK(n){return DE(n)&&"[object Set]"==n2(n)};var M6="[object Arguments]",x6="[object Function]",P6="[object Object]",Un={};Un[M6]=Un["[object Array]"]=Un["[object ArrayBuffer]"]=Un["[object DataView]"]=Un["[object Boolean]"]=Un["[object Date]"]=Un["[object Float32Array]"]=Un["[object Float64Array]"]=Un["[object Int8Array]"]=Un["[object Int16Array]"]=Un["[object Int32Array]"]=Un["[object Map]"]=Un["[object Number]"]=Un[P6]=Un["[object RegExp]"]=Un["[object Set]"]=Un["[object String]"]=Un["[object Symbol]"]=Un["[object Uint8Array]"]=Un["[object Uint8ClampedArray]"]=Un["[object Uint16Array]"]=Un["[object Uint32Array]"]=!0,Un["[object Error]"]=Un[x6]=Un["[object WeakMap]"]=!1;const RK=function TA(n,e,t,r,i,a){var l,f=1&e,g=2&e,v=4&e;if(t&&(l=i?t(n,r,i,a):t(n)),void 0!==l)return l;if(!EE(n))return n;var E=Gk(n);if(E){if(l=function pZ(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&fZ.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!f)return function kq(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(n,l)}else{var T=n2(n),A=T==x6||"[object GeneratorFunction]"==T;if(t6(n))return function Nq(n,e){if(e)return n.slice();var t=n.length,r=d6?d6(t):new n.constructor(t);return n.copy(r),r}(n,f);if(T==P6||T==M6||A&&!i){if(l=g||A?{}:function YZ(n){return"function"!=typeof n.constructor||Zk(n)?{}:KZ(g6(n))}(n),!f)return g?function Kq(n,e){return bA(n,m6(n),e)}(n,function xq(n,e){return n&&bA(e,Yk(e),n)}(l,n)):function Hq(n,e){return bA(n,Qk(n),e)}(n,function wq(n,e){return n&&bA(e,Kk(e),n)}(l,n))}else{if(!Un[T])return i?n:{};l=qZ(n,T,f)}}a||(a=new eW);var R=a.get(n);if(R)return R;a.set(n,l),aK(n)?n.forEach(function(J){l.add(TA(J,e,t,J,n,a))}):nK(n)&&n.forEach(function(J,be){l.set(be,TA(J,e,t,be,n,a))});var Q=E?void 0:(v?g?tZ:Xq:g?Yk:Kk)(n);return function tW(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(Q||n,function(J,be){Q&&(J=n[be=J]),K5(l,be,TA(J,e,t,be,n,a))}),l},i2=function LK(n){return RK(n,5)};let lg=(()=>{class n{constructor(t,r){this.authService=t,this.db=r,this._isSearchModalShown$=new mr.X(!1),this.isSearchModalShown$=this._isSearchModalShown$.asObservable()}toggleFollow(t,r){var i=this;return(0,V.Z)(function*(){return new Promise(t?function(){var a=(0,V.Z)(function*(l){yield i.addFollow(r),l("Add follow completed successfully!")});return function(l){return a.apply(this,arguments)}}():function(){var a=(0,V.Z)(function*(l){yield i.removeFollow(r),l("Remove follow completed successfully!")});return function(l){return a.apply(this,arguments)}}())})()}addFollow(t){var r=this;return(0,V.Z)(function*(){var g;r.authService.loggedInUser$.pipe(Jt(1)).subscribe({next:(g=(0,V.Z)(function*(v){yield r.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,v?.uid]})}),function(E){return g.apply(this,arguments)})});const i=r.authService.loggedInUser$.pipe(Jt(1)),a=yield CA(i),l=r.db.collection("users").doc(a.uid).valueChanges().pipe(Jt(1)),f=yield CA(l);yield r.db.collection("users").doc(f._id).update({followingUsers:[...f.followingUsers,t._id]})})()}removeFollow(t){var r=this;return(0,V.Z)(function*(){const i=r.authService.loggedInUser$.pipe(Jt(1)),a=yield CA(i),l=r.db.collection("users").doc(a.uid).valueChanges().pipe(Jt(1)),f=yield CA(l),g=i2(t.followedByUsers),v=g.findIndex(T=>T===a.uid);if(-1===v)return;g.splice(v,1),yield r.db.collection("users").doc(t._id).update({followedByUsers:g});const E=f.followingUsers.findIndex(T=>T===t._id);f.followingUsers.splice(E,1),yield r.db.collection("users").doc(f._id).update({followingUsers:f.followingUsers})})()}getUsers(t){var r=this;return(0,V.Z)(function*(){if(t.account){const i=r.db.collection("users").valueChanges();let a=yield oo(i);const l=new RegExp(t.account,"i");return a=a.filter(f=>l.test(f.fullName)),(0,ut.of)(a)}return r.db.collection("users").valueChanges()})()}setIsSearchModalShown(t){this._isSearchModalShown$.next(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Vi),u.LFG(vA))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),O6=(()=>{class n{constructor(t){this.db=t}addNotification(t,r){var i=this;return(0,V.Z)(function*(){"likeAction"===r&&(t.message="liked your post"),t.createdAt=Date.now();const a=yield i.db.collection("notifications").add(t);yield i.db.collection("notifications").doc(a.id).update({_id:a.id})})()}getNotificationsForUser(t){return this.db.collection("notifications",r=>r.where("recipient","==",t).orderBy("createdAt","desc")).valueChanges()}markAsRead(t){var r=this;return(0,V.Z)(function*(){yield r.db.doc(`notifications/${t}`).update({read:!0})})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(vA))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",3),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleFollow())}),u._uU(1),u.qZA()}if(2&n){const t=u.oxw(2);u.xp6(1),u.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function VK(n,e){if(1&n&&(u.TgZ(0,"div",1)(1,"ul"),u.YNc(2,UK,2,1,"li",2),u.qZA()()),2&n){const t=u.oxw();u.xp6(2),u.Q6J("ngIf",t.creator._id!==t.loggedInUser.uid)}}let BK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new u.vpe,this.isFollowClicked=!1,this.isMoreOptionsModalInited=!1}ngOnInit(){var t=this;return(0,V.Z)(function*(){const r=t.authService.getUserById(t.creator._id),i=yield oo(r),a=t.authService.getLoggedInUser();t.loggedInUser=a,t.isFollowClicked=!!i.followedByUsers.find(l=>l===a.uid),t.isMoreOptionsModalInited=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.creator,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Vi))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["more-options-modal"]],inputs:{post:"post",creator:"creator"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","more-options-modal",4,"ngIf"],[1,"more-options-modal"],[3,"click",4,"ngIf"],[3,"click"]],template:function(r,i){1&r&&u.YNc(0,VK,3,1,"div",0),2&r&&u.Q6J("ngIf",i.loggedInUser)},dependencies:[Ir],styles:["[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;right:0;top:30px;z-index:20;background-color:#262626;width:-moz-fit-content;width:fit-content;min-height:50px;padding-inline:1.5em;padding-block:1em;color:#f5f5f5;font-size:17px;border-radius:.4em}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})(),s2=(()=>{class n{transform(t){const i=Math.floor(Date.now()/1e3)-t/1e3;return i<60?"just now":i<3600?`${Math.floor(i/60)}m`:i<86400?`${Math.floor(i/3600)}h`:`${Math.floor(i/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=u.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function jK(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"more-options-modal",10),u.NdJ("onToggleFollow",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onToggleFollow.emit(i))}),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("post",t.post)("creator",t.creator)}}function $K(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",1)(1,"div",2),u._UZ(2,"img",3),u.TgZ(3,"h5"),u._uU(4),u.TgZ(5,"span"),u._uU(6),u.ALo(7,"timeAgo"),u.qZA()()(),u.TgZ(8,"button",4),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.isMoreOptionsModalShown=!i.isMoreOptionsModalShown)}),u.O4$(),u.TgZ(9,"svg",5),u._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),u.qZA(),u.YNc(13,jK,1,2,"more-options-modal",9),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(2),u.Q6J("src",t.creator.imgUrl,u.LSH),u.xp6(2),u.hij(" ",t.creator.fullName," "),u.xp6(2),u.hij("\u2022 ",u.lcZ(7,4,t.post.createdAt),""),u.xp6(7),u.Q6J("ngIf",t.isMoreOptionsModalShown)}}let HK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new u.vpe,this.isMoreOptionsModalShown=!1}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Vi))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post",isComponentInitialized:"isComponentInitialized"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options",3,"click"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"],[3,"post","creator","onToggleFollow",4,"ngIf"],[3,"post","creator","onToggleFollow"]],template:function(r,i){1&r&&u.YNc(0,$K,14,6,"div",0),2&r&&u.Q6J("ngIf",i.creator&&i.isComponentInitialized)},dependencies:[Ir,BK,s2],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center;position:relative}"]})}return n})();const zK=function(n,e){return{"btn-toggle-follow":!0,following:n,disabled:e}};function GK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",3),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleFollow())}),u._uU(1),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("ngClass",u.WLB(3,zK,t.isFollowClicked,t.isToggleFollowProcessing))("disabled",t.isToggleFollowProcessing),u.xp6(1),u.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function WK(n,e){if(1&n&&(u.TgZ(0,"li"),u._UZ(1,"img",1),u.TgZ(2,"h4"),u._uU(3),u.qZA(),u.YNc(4,GK,2,6,"button",2),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("src",t.user.imgUrl,u.LSH),u.xp6(2),u.Oqu(t.user.fullName),u.xp6(1),u.Q6J("ngIf",t.user._id!==t.loggedInUser.uid)}}let qK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new u.vpe,this.isFollowClicked=!1,this.isComponentInitialized=!1,this.isToggleFollowProcessing=!1}ngOnInit(){var t=this;return(0,V.Z)(function*(){const r=t.authService.getUserById(t.user._id),i=yield oo(r),a=t.authService.getLoggedInUser();t.loggedInUser=a,t.isFollowClicked=!!i.followedByUsers.find(l=>l===a.uid),t.isComponentInitialized=!0})()}toggleFollow(){this.isToggleFollowProcessing||(this.isToggleFollowProcessing=!0,this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({user:this.user,isFollowClicked:this.isFollowClicked}),this.isToggleFollowProcessing=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Vi))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[[4,"ngIf"],["alt","loggedInUser",3,"src"],[3,"ngClass","disabled","click",4,"ngIf"],[3,"ngClass","disabled","click"]],template:function(r,i){1&r&&u.YNc(0,WK,5,3,"li",0),2&r&&u.Q6J("ngIf",i.isComponentInitialized)},dependencies:[ra,Ir],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:45px;border-radius:50%;flex:1}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function ZK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"liked-by-user-row",7),u.NdJ("onToggleFollow",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onToggleFollow.emit(i))}),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw();u.Q6J("post",r.post)("user",t)}}let KK=(()=>{class n{constructor(t){this.renderer=t,this.onToggleLikedByUsersModal=new u.vpe,this.onToggleFollow=new u.vpe}ngOnInit(){this.renderer.addClass(document.body,"body-unscrollable")}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}trackByUserId(t,r){return r._id}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow"},decls:12,vars:2,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","user","onToggleFollow"]],template:function(r,i){1&r&&(u.TgZ(0,"article",0)(1,"div",1)(2,"h3"),u._uU(3,"Likes"),u.qZA(),u.TgZ(4,"button",2),u.NdJ("click",function(){return i.toggleLikedByUsersModal()}),u.O4$(),u.TgZ(5,"svg",3)(6,"title"),u._uU(7,"Close"),u.qZA(),u._UZ(8,"polyline",4)(9,"line",5),u.qZA()()(),u.kcU(),u.TgZ(10,"ul"),u.YNc(11,ZK,1,2,"liked-by-user-row",6),u.qZA()()),2&r&&(u.xp6(11),u.Q6J("ngForOf",i.post.likedByUsers)("ngForTrackBy",i.trackByUserId))},dependencies:[Io,qK],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:calc(100vw - 70px);max-width:27em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3.5em;position:relative}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1.2em;top:50%;transform:translateY(-50%);cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em;max-height:16.8em;overflow:auto}"]})}return n})(),N6=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj),u.Y36(u.SBq))};static#t=this.\u0275dir=u.lG2({type:n})}return n})(),ug=(()=>{class n extends N6{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275dir=u.lG2({type:n,features:[u.qOj]})}return n})();const Dc=new u.OlP("NgValueAccessor"),JK={provide:Dc,useExisting:(0,u.Gpc)(()=>dg),multi:!0},eY=new u.OlP("CompositionEventMode");let dg=(()=>{class n extends N6{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function XK(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(eY,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&u.NdJ("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[u._Bn([JK]),u.qOj]})}return n})();const ts=new u.OlP("NgValidators"),Jd=new u.OlP("NgAsyncValidators");function z6(n){return null!=n}function G6(n){return(0,u.QGY)(n)?(0,pn.D)(n):n}function W6(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function q6(n,e){return e.map(t=>t(n))}function Z6(n){return n.map(e=>function nY(n){return!n.validate}(e)?e:t=>e.validate(t))}function o2(n){return null!=n?function K6(n){if(!n)return null;const e=n.filter(z6);return 0==e.length?null:function(t){return W6(q6(t,e))}}(Z6(n)):null}function a2(n){return null!=n?function Y6(n){if(!n)return null;const e=n.filter(z6);return 0==e.length?null:function(t){return function YK(...n){const e=(0,Xs.jO)(n),{args:t,keys:r}=vn(n),i=new fi.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let g=l,v=l;for(let E=0;E<l;E++){let T=!1;(0,Nu.Xf)(t[E]).subscribe((0,pi.x)(a,A=>{T||(T=!0,v--),f[E]=A},()=>g--,void 0,()=>{(!g||!T)&&(v||a.next(r?eo(r,f):f),a.complete())}))}});return e?i.pipe(Yc(e)):i}(q6(t,e).map(G6)).pipe((0,wt.U)(W6))}}(Z6(n)):null}function Q6(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function c2(n){return n?Array.isArray(n)?n:[n]:[]}function SA(n,e){return Array.isArray(n)?n.includes(e):n===e}function eV(n,e){const t=c2(e);return c2(n).forEach(i=>{SA(t,i)||t.push(i)}),t}function tV(n,e){return c2(e).filter(t=>!SA(n,t))}class nV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=o2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=a2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ps extends nV{get formDirective(){return null}get path(){return null}}class Xd extends nV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rV{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let AE=(()=>{class n extends rV{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Xd,2))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[u.qOj]})}return n})(),AA=(()=>{class n extends rV{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ps,10))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[u.qOj]})}return n})();const ME="VALID",xA="INVALID",rv="PENDING",xE="DISABLED";function d2(n){return(PA(n)?n.validators:n)||null}function h2(n,e){return(PA(e)?e.asyncValidators:n)||null}function PA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class aV{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ME}get invalid(){return this.status===xA}get pending(){return this.status==rv}get disabled(){return this.status===xE}get enabled(){return this.status!==xE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(eV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tV(e,this._rawAsyncValidators))}hasValidator(e){return SA(this._rawValidators,e)}hasAsyncValidator(e){return SA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=rv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ME,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ME||this.status===rv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xE:ME}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=rv,this._hasOwnPendingAsyncValidator=!0;const t=G6(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?xE:this.errors?xA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(rv)?rv:this._anyControlsHaveStatus(xA)?xA:ME}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){PA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function oY(n){return Array.isArray(n)?o2(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function aY(n){return Array.isArray(n)?a2(n):n||null}(this._rawAsyncValidators)}}class f2 extends aV{constructor(e,t,r){super(d2(t),h2(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function oV(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function sV(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[t])throw new u.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const hg=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>PE}),PE="always";function OE(n,e,t=PE){p2(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function uY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&cV(n,e)})}(n,e),function hY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function dY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&cV(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function lY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function RA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function p2(n,e){const t=function J6(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Q6(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function X6(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Q6(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();RA(e._rawValidators,i),RA(e._rawAsyncValidators,i)}function cV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const _Y={provide:ps,useExisting:(0,u.Gpc)(()=>iv)},NE=(()=>Promise.resolve())();let iv=(()=>{class n extends ps{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new f2({},o2(t),a2(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){NE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),OE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){NE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){NE.then(()=>{const r=this._findContainer(t.path),i=new f2({});(function lV(n,e){p2(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){NE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){NE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function uV(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ts,10),u.Y36(Jd,10),u.Y36(hg,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&u.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([_Y]),u.qOj]})}return n})();function dV(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function hV(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const fV=class extends aV{constructor(e=null,t,r){super(d2(t),h2(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),PA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=hV(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){hV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},CY={provide:Xd,useExisting:(0,u.Gpc)(()=>sv)},mV=(()=>Promise.resolve())();let sv=(()=>{class n extends Xd{constructor(t,r,i,a,l,f){super(),this._changeDetectorRef=l,this.callSetDisabledState=f,this.control=new fV,this._registered=!1,this.name="",this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function _2(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===dg?t=a:function gY(n){return Object.getPrototypeOf(n.constructor)===ug}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function m2(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){OE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){mV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,u.VuI)(r);mV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function OA(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ps,9),u.Y36(ts,10),u.Y36(Jd,10),u.Y36(Dc,10),u.Y36(u.sBO,8),u.Y36(hg,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([CY]),u.qOj,u.TTD]})}return n})(),FA=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),yV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const y2=new u.OlP("NgModelWithFormControlWarning");let kV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[yV]})}return n})(),GY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hg,useValue:t.callSetDisabledState??PE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[kV]})}return n})(),WY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:y2,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:hg,useValue:t.callSetDisabledState??PE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[kV]})}return n})();function qY(n,e){if(1&n&&(u.TgZ(0,"li",8),u._UZ(1,"img",9),u.TgZ(2,"div",10)(3,"div",11)(4,"span",12),u._uU(5),u.qZA(),u.TgZ(6,"span",13),u._uU(7),u.ALo(8,"timeAgo"),u.qZA()(),u.TgZ(9,"p"),u._uU(10),u.qZA(),u.TgZ(11,"button",14),u._uU(12,"Reply"),u.qZA()()()),2&n){const t=e.$implicit;u.xp6(1),u.Q6J("src",t.createdByUserId.imgUrl,u.LSH),u.xp6(4),u.Oqu(t.createdByUserId.fullName),u.xp6(2),u.Oqu(u.lcZ(8,4,t.createdAt)),u.xp6(3),u.hij(" ",t.message," ")}}function ZY(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"form"),u._UZ(1,"img",15),u.TgZ(2,"input",16),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.comment.message=i)}),u.qZA(),u.TgZ(3,"button",17),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.addComment())}),u._uU(4,"Post"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("src",t.loggedInUserFromDB.imgUrl,u.LSH),u.xp6(1),u.Q6J("ngModel",t.comment.message)}}let KY=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.renderer=i,this.onAddComment=new u.vpe,this.onToggleCommentsModal=new u.vpe,this.onGetCommentsLength=new u.vpe,this.comment={_id:"",parentId:"",postId:"",createdByUserId:"",message:"",createdAt:0}}ngOnInit(){var t=this;return(0,V.Z)(function*(){const r=t.authService.getUserById(t.loggedInUser.uid),i=yield oo(r);t.loggedInUserFromDB=i,t.renderer.addClass(document.body,"body-unscrollable"),t.comment.postId=t.post._id,t.comment.createdByUserId=i._id,t.commentsSubscription=t.postService.getCommentsByPostId(t.post._id).pipe((0,Gn.w)(function(){var a=(0,V.Z)(function*(l){const f=l.map(function(){var g=(0,V.Z)(function*(v){const E=t.authService.getUserById(v.createdByUserId),T=yield oo(E);return v.createdByUserId=T,v});return function(v){return g.apply(this,arguments)}}());return yield Promise.all(f)});return function(l){return a.apply(this,arguments)}}())).subscribe({next:a=>{t.comments=a,t.onGetCommentsLength.emit(t.comments.length)}})})()}addComment(){this.onAddComment.emit({comment:this.comment,post:this.post}),this.comment.message=""}ngOnDestroy(){this.commentsSubscription?.unsubscribe(),this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(CE),u.Y36(Vi),u.Y36(u.Qsj))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["comments-modal"]],inputs:{post:"post",loggedInUser:"loggedInUser"},outputs:{onAddComment:"onAddComment",onToggleCommentsModal:"onToggleCommentsModal",onGetCommentsLength:"onGetCommentsLength"},decls:9,vars:2,consts:[[1,"comment-modal"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[1,"comments"],[1,"comment-list"],["class","comment",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"comment"],["alt","loggedInUser",3,"src"],[1,"content"],[1,"inner-container"],[1,"fullname"],[1,"created-at"],[1,"btn-reply"],["alt","",3,"src"],["type","text","name","message","id","comment","placeholder","Add a comment...",3,"ngModel","ngModelChange"],[1,"btn-add-comment",3,"click"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0)(1,"button",1),u.NdJ("click",function(){return i.onToggleCommentsModal.emit()}),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"path",3),u.qZA()(),u.kcU(),u.TgZ(4,"div",4)(5,"div",5)(6,"ul"),u.YNc(7,qY,13,6,"li",6),u.qZA()()(),u.YNc(8,ZY,5,2,"form",7),u.qZA()),2&r&&(u.xp6(7),u.Q6J("ngForOf",i.comments),u.xp6(1),u.Q6J("ngIf",i.loggedInUserFromDB))},dependencies:[Io,Ir,FA,dg,AE,AA,sv,iv,s2],styles:["[_nghost-%COMP%]{position:fixed;top:0;z-index:30;width:100%;height:100%;background-color:#000;padding-block-start:3.8em;overflow:auto}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]{position:relative;padding-block-start:1.5em;height:100%;display:grid;grid-template-columns:25px 1fr 25px;grid-template-rows:1fr auto}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:fixed;background-color:#000;cursor:pointer;border:none;padding-inline:.5em;padding-block-end:.5em;right:20px;top:85px;z-index:40}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2em;padding-block-end:5.5em;height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.6em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;border-radius:50%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#919191;font-size:13px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000;border:none;color:#f5f5f5;width:-moz-fit-content;width:fit-content;padding-inline-end:.8em;font-size:12px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;height:3.5em;position:sticky;bottom:60px;background-color:#000;border-block-start:1px solid rgba(255,255,255,.24);grid-column:1/-1;padding-inline:25px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:3;height:100%;border:none;color:#f5f5f5;background-color:#000;font-size:16px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f5f5f5;font-family:Arial,sans-serif;background-color:#000}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:100%;border:none;cursor:pointer;background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;text-align:right}"]})}return n})();function YY(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",22),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleLike())}),u.O4$(),u.TgZ(1,"svg",23)(2,"title"),u._uU(3,"Like"),u.qZA(),u._UZ(4,"path",24),u.qZA()()}}function QY(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",22),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleLike())}),u.O4$(),u.TgZ(1,"svg",25)(2,"title"),u._uU(3,"Unlike"),u.qZA(),u._UZ(4,"path",26),u.qZA()()}}function JY(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"span"),u._uU(1," and "),u.TgZ(2,"span",32),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(3);return u.KtG(i.isLikedByUsersModalShown=!i.isLikedByUsersModalShown)}),u._uU(3),u.ALo(4,"number"),u.qZA()()}if(2&n){const t=u.oxw(3);u.xp6(3),u.AsE("",u.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function XY(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"liked-by-users-list",33),u.NdJ("onToggleLikedByUsersModal",function(i){u.CHM(t);const a=u.oxw(3);return u.KtG(a.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){u.CHM(t);const a=u.oxw(3);return u.KtG(a.onToggleFollow.emit(i))}),u.qZA()}if(2&n){const t=u.oxw(3);u.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function eQ(n,e){if(1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div",27),u._UZ(1,"img",28),u.TgZ(2,"p"),u._uU(3," Liked by "),u.TgZ(4,"span",29),u._uU(5),u.qZA(),u.YNc(6,JY,5,4,"span",30),u.qZA(),u.YNc(7,XY,1,2,"liked-by-users-list",31),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("src",t.post.likedByUsers[0].imgUrl,u.LSH),u.xp6(4),u.Oqu(t.post.likedByUsers[0].fullName),u.xp6(1),u.Q6J("ngIf",t.post.likedByUsers.length>1),u.xp6(1),u.Q6J("ngIf",t.isLikedByUsersModalShown)}}function tQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"span"),u._uU(1," and "),u.TgZ(2,"span",32),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(3);return u.KtG(i.isLikedByUsersModalShown=!i.isLikedByUsersModalShown)}),u._uU(3),u.ALo(4,"number"),u.qZA()()}if(2&n){const t=u.oxw(3);u.xp6(3),u.AsE("",u.lcZ(4,2,t.likedByUsersCloneDeep.length-1)," ",t.likedByUsersCloneDeep.length>2?"others":"other","")}}function nQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"liked-by-users-list",33),u.NdJ("onToggleLikedByUsersModal",function(i){u.CHM(t);const a=u.oxw(3);return u.KtG(a.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){u.CHM(t);const a=u.oxw(3);return u.KtG(a.onToggleFollow.emit(i))}),u.qZA()}if(2&n){const t=u.oxw(3);u.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function rQ(n,e){if(1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div",34),u._UZ(1,"img",28),u.TgZ(2,"p"),u._uU(3," Liked by "),u.TgZ(4,"span",29),u._uU(5),u.qZA(),u.YNc(6,tQ,5,4,"span",30),u.qZA(),u.YNc(7,nQ,1,2,"liked-by-users-list",31),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("src",t.likedByUsersCloneDeep[0].imgUrl,u.LSH),u.xp6(4),u.Oqu(t.likedByUsersCloneDeep[0].fullName),u.xp6(1),u.Q6J("ngIf",t.likedByUsersCloneDeep.length>1),u.xp6(1),u.Q6J("ngIf",t.isLikedByUsersModalShown)}}function iQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",39),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(4);return u.KtG(i.isMoreClicked=!i.isMoreClicked)}),u._uU(1," more "),u.qZA()}}function sQ(n,e){if(1&n&&(u.TgZ(0,"p")(1,"span",37),u._uU(2),u.qZA(),u._uU(3),u.ALo(4,"slice"),u.YNc(5,iQ,2,0,"button",38),u.qZA()),2&n){const t=u.oxw(3);u.xp6(2),u.Oqu(t.creator.fullName),u.xp6(1),u.AsE(" ",u.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120?"...":""," "),u.xp6(2),u.Q6J("ngIf",t.post.content.length>=120)}}function oQ(n,e){if(1&n&&(u.TgZ(0,"p")(1,"span",37),u._uU(2),u.qZA(),u._uU(3),u.qZA()),2&n){const t=u.oxw(3);u.xp6(2),u.Oqu(t.creator.fullName),u.xp6(1),u.hij(" ",t.post.content," ")}}function aQ(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw(3);u.xp6(1),u.hij("View ",t.commentsLength," comment")}}function cQ(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw(3);u.xp6(1),u.hij("View all ",t.commentsLength," comments")}}function lQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"div",35),u.YNc(1,sQ,6,8,"p",30),u.YNc(2,oQ,4,2,"p",30),u.TgZ(3,"p",36),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onToggleCommentModal())}),u.YNc(4,aQ,2,1,"span",30),u.YNc(5,cQ,2,1,"span",30),u.qZA()()}if(2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("ngIf",!t.isMoreClicked),u.xp6(1),u.Q6J("ngIf",t.isMoreClicked),u.xp6(2),u.Q6J("ngIf",1===t.commentsLength),u.xp6(1),u.Q6J("ngIf",t.commentsLength>=2)}}function uQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"comments-modal",40),u.NdJ("onAddComment",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onAddComment.emit(i))})("onToggleCommentsModal",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onToggleCommentModal())})("onGetCommentsLength",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.commentsLength=i)}),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("post",t.post)("loggedInUser",t.loggedInUser)}}function dQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",1)(1,"post-header",2),u.NdJ("onToggleFollow",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onToggleFollow.emit(i))}),u.qZA(),u._UZ(2,"img",3),u.TgZ(3,"div",4)(4,"div",5)(5,"div",6),u.YNc(6,YY,5,0,"button",7),u.YNc(7,QY,5,0,"button",7),u.TgZ(8,"button",8),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onToggleCommentModal())}),u.O4$(),u.TgZ(9,"svg",9)(10,"title"),u._uU(11,"CommentModel"),u.qZA(),u._UZ(12,"path",10),u.qZA()(),u.kcU(),u.TgZ(13,"button",11),u.O4$(),u.TgZ(14,"svg",12)(15,"title"),u._uU(16,"Share PostModel"),u.qZA(),u._UZ(17,"line",13)(18,"polygon",14),u.qZA()()(),u.kcU(),u.TgZ(19,"button",15),u.O4$(),u.TgZ(20,"svg",16)(21,"title"),u._uU(22,"Save"),u.qZA(),u._UZ(23,"polygon",17),u.qZA()()(),u.YNc(24,eQ,8,4,"div",18),u.YNc(25,rQ,8,4,"div",19),u.YNc(26,lQ,6,4,"div",20),u.qZA(),u.YNc(27,uQ,1,2,"comments-modal",21),u.qZA()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("post",t.post)("creator",t.creator)("isComponentInitialized",t.isComponentInitialized),u.xp6(1),u.Tol(t.post.filterSelected),u.Q6J("src",t.post.imgUrl,u.LSH),u.xp6(4),u.Q6J("ngIf",!t.isLikeClicked),u.xp6(1),u.Q6J("ngIf",t.isLikeClicked),u.xp6(17),u.Q6J("ngIf",t.post.likedByUsers.length&&"object"===t.getTypeOfLikedByUsers()),u.xp6(1),u.Q6J("ngIf",t.likedByUsersCloneDeep[0]&&"string"===t.getTypeOfLikedByUsers()),u.xp6(1),u.Q6J("ngIf",t.creator),u.xp6(1),u.Q6J("ngIf",t.isCommentModalShown)}}let hQ=(()=>{class n{constructor(t,r){this.authService=t,this.postService=r,this.onToggleLike=new u.vpe,this.onToggleFollow=new u.vpe,this.onAddNotification=new u.vpe,this.onAddComment=new u.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.loggedInUser=this.authService.getLoggedInUser(),this.isLikeClicked=!1,this.isComponentInitialized=!1,this.isCommentModalShown=!1,this.commentsLength=0}ngOnInit(){var t=this;return(0,V.Z)(function*(){const r=t.post.likedByUsers.map(function(){var i=(0,V.Z)(function*(a){const l=t.authService.getUserById(a).pipe(Jt(1));return yield oo(l)});return function(a){return i.apply(this,arguments)}}());t.post.likedByUsers=yield Promise.all(r),t.likedByUsersCloneDeep=i2(t.post.likedByUsers),t.postService.getCommentsByPostId(t.post._id).pipe(Jt(1)).subscribe({next:i=>{t.commentsLength=i.length}}),t.authService.getUserById(t.post.creatorId).pipe(Jt(1)).subscribe({next:i=>{t.creator=i,t.post.likedByUsers.find(l=>l._id===t.loggedInUser.uid||l===t.loggedInUser.uid)&&(t.isLikeClicked=!0),t.isComponentInitialized=!0}})})()}ngOnChanges(t){var r=this;return(0,V.Z)(function*(){if(r.isComponentInitialized&&t.post)try{const i=r.post.likedByUsers.map(function(){var l=(0,V.Z)(function*(f){const g=r.authService.getUserById(f).pipe(Jt(1));return yield oo(g)});return function(f){return l.apply(this,arguments)}}());r.post.likedByUsers=yield Promise.all(i);let a=0;r.post.likedByUsers.forEach(l=>{"object"==typeof l&&a++}),a===r.post.likedByUsers.length&&(r.likedByUsersCloneDeep=i2(r.post.likedByUsers))}catch(i){console.error(i)}})()}toggleLike(){this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:this.post,isLikeClicked:this.isLikeClicked}),this.loggedInUser.uid!==this.creator._id&&this.isLikeClicked&&this.onAddNotification.emit(this.post)}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}onToggleCommentModal(){this.isCommentModalShown=!this.isCommentModalShown}getTypeOfLikedByUsers(){return typeof this.post.likedByUsers[0]}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Vi),u.Y36(CE))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment"},features:[u.TTD],decls:1,vars:1,consts:[["class","post-card",4,"ngIf"],[1,"post-card"],[3,"post","creator","isComponentInitialized","onToggleFollow"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment",3,"click"],["aria-label","CommentModel","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],["class","likedByUsersCloneDeep",4,"ngIf"],["class","content",4,"ngIf"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength",4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24",1,"x1lliihq","x1n2onr6"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src"],[1,"username"],[4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"likedByUsersCloneDeep"],[1,"content"],[1,"comments-length",3,"click"],[1,"creatorFullName"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength"]],template:function(r,i){1&r&&u.YNc(0,dQ,28,12,"li",0),2&r&&u.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Ir,HK,KK,KY,Tr,je],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em;position:relative}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .comments-length[_ngcontent-%COMP%]{font-size:14px;color:#919191;cursor:pointer}"]})}return n})();function fQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"post-card",2),u.NdJ("onToggleLike",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onToggleLike.emit(i))})("onToggleFollow",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onToggleFollow.emit(i))})("onAddNotification",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onAddNotification.emit(i))})("onAddComment",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onAddComment.emit(i))}),u.qZA()}2&n&&u.Q6J("post",e.$implicit)}let pQ=(()=>{class n{constructor(){this.onToggleLike=new u.vpe,this.onToggleFollow=new u.vpe,this.onAddNotification=new u.vpe,this.onAddComment=new u.vpe}trackByPostId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment"},decls:3,vars:2,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0)(1,"ul"),u.YNc(2,fQ,1,1,"post-card",1),u.qZA()()),2&r&&(u.xp6(2),u.Q6J("ngForOf",i.posts)("ngForTrackBy",i.trackByPostId))},dependencies:[Io,hQ],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function gQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"post-list",4),u.NdJ("onToggleLike",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onToggleLike(i))})("onToggleFollow",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onToggleFollow(i))})("onAddNotification",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onAddNotification(i))})("onAddComment",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.onAddComment(i))}),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("posts",t.posts)}}function mQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5)(1,"p"),u._uU(2," No posts to show! "),u._UZ(3,"br"),u.TgZ(4,"span",6),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.navigateToCreatePost())}),u._uU(5,"Let's upload your first post."),u.qZA()()()}}function _Q(n,e){if(1&n&&(u.TgZ(0,"section",1),u.YNc(1,gQ,1,1,"post-list",2),u.YNc(2,mQ,6,0,"ng-template",null,3,u.W1O),u.qZA()),2&n){const t=u.MAs(3),r=u.oxw();u.xp6(1),u.Q6J("ngIf",r.posts.length)("ngIfElse",t)}}let yQ=(()=>{class n{constructor(t,r,i,a,l){this.postService=t,this.authService=r,this.userService=i,this.notificationService=a,this.router=l,this.isToggleLikeProcessing=!1,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,V.Z)(function*(){const r=yield t.postService.getPosts();r&&(t.postsSubscription=r.subscribe({next:i=>{t.posts=i},error:i=>{console.error(i)}}))})()}onToggleLike(t){var r=this;return(0,V.Z)(function*(){r.isToggleLikeProcessing||(r.isToggleLikeProcessing=!0,yield r.postService.toggleLike(t.isLikeClicked,t.post),r.isToggleLikeProcessing=!1)})()}onToggleFollow({isFollowClicked:t,user:r}){var i=this;this.authService.getUserById(r._id).pipe(Jt(1)).subscribe(function(){var a=(0,V.Z)(function*(l){r=l,yield i.userService.toggleFollow(t,r)});return function(l){return a.apply(this,arguments)}}())}onAddNotification(t){var r=this;return(0,V.Z)(function*(){const i={sender:r.authService.getLoggedInUser().uid,recipient:t.creatorId,message:"",createdAt:0,madeAt:t,read:!1};yield r.notificationService.addNotification(i,"likeAction")})()}onAddComment({comment:t,post:r}){this.postService.addComment(t,r)}navigateToCreatePost(){this.router.navigateByUrl("/create-post")}ngOnDestroy(){this.postsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(CE),u.Y36(Vi),u.Y36(lg),u.Y36(O6),u.Y36(Xn))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["home-page"]],decls:1,vars:1,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment",4,"ngIf","ngIfElse"],["noPostsTemplate",""],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment"],[1,"page-cmp-layout"],[3,"click"]],template:function(r,i){1&r&&u.YNc(0,_Q,4,2,"section",0),2&r&&u.Q6J("ngIf",i.posts)},dependencies:[Ir,pQ],styles:["[_nghost-%COMP%]{display:block;padding-block:2em}"]})}return n})();function vQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"form",12),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onLogInWithEmailAndPassword())}),u.TgZ(1,"input",13),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.userCred.email=i)}),u.qZA(),u.TgZ(2,"input",14),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.userCred.password=i)}),u.qZA(),u.TgZ(3,"button",15),u._uU(4,"Log in"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngModel",t.userCred.email),u.xp6(1),u.Q6J("ngModel",t.userCred.password)}}function CQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"form",12),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onRegisterWithEmailAndPassword())}),u.TgZ(1,"input",16),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.userCred.fullName=i)}),u.qZA(),u.TgZ(2,"input",13),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.userCred.email=i)}),u.qZA(),u.TgZ(3,"input",14),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.userCred.password=i)}),u.qZA(),u.TgZ(4,"button",17),u._uU(5,"Register"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngModel",t.userCred.fullName),u.xp6(1),u.Q6J("ngModel",t.userCred.email),u.xp6(1),u.Q6J("ngModel",t.userCred.password)}}let wQ=(()=>{class n{constructor(t,r,i,a){this.authService=t,this.postService=r,this.router=i,this.userService=a,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0,this.userService.setIsSearchModalShown(!1)}onLogInWithGoogle(){var t=this;return(0,V.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(Jt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,V.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(Jt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,V.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(Jt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Vi),u.Y36(CE),u.Y36(Xn),u.Y36(lg))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0)(1,"div",1),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"path",3),u.qZA()(),u.YNc(4,vQ,5,2,"form",4),u.YNc(5,CQ,6,3,"form",4),u.kcU(),u.TgZ(6,"p",5),u.NdJ("click",function(){return i.isLogInFormShown=!i.isLogInFormShown}),u._uU(7," Don't you have a loggedInUser? Register here "),u.qZA(),u.TgZ(8,"button",6),u.NdJ("click",function(){return i.onLogInWithGoogle()}),u.O4$(),u.TgZ(9,"svg",7),u._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),u.qZA(),u.kcU(),u.TgZ(14,"span"),u._uU(15,"Log in with Google"),u.qZA()()()),2&r&&(u.xp6(4),u.Q6J("ngIf",i.isLogInFormShown),u.xp6(1),u.Q6J("ngIf",!i.isLogInFormShown))},dependencies:[Ir,FA,dg,AE,AA,sv,iv],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})(),IQ=(()=>{class n{constructor(t){this.userService=t,this.userService.setIsSearchModalShown(!1)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(lg))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["message-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(u.TgZ(0,"p"),u._uU(1,"message-page works!"),u.qZA())}})}return n})();function EQ(n,e){if(1&n&&(u.TgZ(0,"li",1)(1,"div",2),u._UZ(2,"img",3),u.TgZ(3,"p")(4,"span",4),u._uU(5),u.qZA(),u._uU(6),u.qZA(),u.TgZ(7,"span",5),u._uU(8),u.ALo(9,"timeAgo"),u.qZA()(),u._UZ(10,"img",6),u.qZA()),2&n){const t=u.oxw();u.xp6(2),u.s9C("src",t.sender.imgUrl,u.LSH),u.xp6(3),u.Oqu(t.sender.fullName),u.xp6(1),u.hij(" ",t.notification.message," "),u.xp6(2),u.hij(" ",u.lcZ(9,5,t.notification.createdAt),""),u.xp6(2),u.s9C("src",t.notification.madeAt.imgUrl,u.LSH)}}let bQ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.getUserById(this.notification.sender).pipe(Jt(1)).subscribe({next:t=>{this.sender=t}})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Vi))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["notification-preview"]],inputs:{notification:"notification"},decls:1,vars:1,consts:[["class","notification-preview",4,"ngIf"],[1,"notification-preview"],[1,"inner-container"],["alt","sender",1,"img-sender",3,"src"],[1,"full-name"],[1,"created-at"],["alt","content",1,"img-made-at",3,"src"]],template:function(r,i){1&r&&u.YNc(0,EQ,11,7,"li",0),2&r&&u.Q6J("ngIf",i.sender)},dependencies:[Ir,s2],styles:["[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:3em;gap:1em;font-size:15px}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .img-sender[_ngcontent-%COMP%]{width:40px;border-radius:50%}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .full-name[_ngcontent-%COMP%]{font-size:13px;font-weight:bolder}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{font-size:13.5px;color:#a8a8a8}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .img-made-at[_ngcontent-%COMP%]{aspect-ratio:1/1;object-fit:cover;width:3em}"]})}return n})();function TQ(n,e){1&n&&u._UZ(0,"notification-preview",2),2&n&&u.Q6J("notification",e.$implicit)}let DQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["notification-list"]],inputs:{notifications:"notifications"},decls:3,vars:1,consts:[[1,"notification-list"],[3,"notification",4,"ngFor","ngForOf"],[3,"notification"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0)(1,"ul"),u.YNc(2,TQ,1,1,"notification-preview",1),u.qZA()()),2&r&&(u.xp6(2),u.Q6J("ngForOf",i.notifications))},dependencies:[Io,bQ],styles:["[_nghost-%COMP%]   .notification-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}"]})}return n})();function SQ(n,e){1&n&&(u.TgZ(0,"p"),u._uU(1,"You dont have notifications yet!"),u.qZA())}function AQ(n,e){if(1&n&&(u.TgZ(0,"section",1),u._UZ(1,"notification-list",2),u.YNc(2,SQ,2,0,"p",3),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("notifications",t.notifications),u.xp6(1),u.Q6J("ngIf",!t.notifications.length)}}let MQ=(()=>{class n{constructor(t,r,i){this.notificationService=t,this.authService=r,this.userService=i,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,V.Z)(function*(){const r=t.authService.getLoggedInUser();r&&t.notificationService.getNotificationsForUser(r.uid).pipe(Jt(1)).subscribe({next:i=>{t.notifications=i}})})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(O6),u.Y36(Vi),u.Y36(lg))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","notifications-page",4,"ngIf"],[1,"notifications-page"],[3,"notifications"],[4,"ngIf"]],template:function(r,i){1&r&&u.YNc(0,AQ,3,2,"section",0),2&r&&u.Q6J("ngIf",i.notifications)},dependencies:[Ir,DQ],styles:["[_nghost-%COMP%]{padding-block:2em}"]})}return n})();function xQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",4)(1,"button",5),u.NdJ("click",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onMediaSelected(i))}),u.TgZ(2,"span"),u._uU(3," Upload photos and videos here "),u.qZA(),u.TgZ(4,"div"),u.O4$(),u.TgZ(5,"svg",6),u._UZ(6,"path",7)(7,"path",8)(8,"path",9),u.qZA()()()()}}const PQ=function(n){return{active:n}};function OQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"article",21),u.NdJ("click",function(){const a=u.CHM(t).$implicit,l=u.oxw(2);return u.KtG(l.onSelectFilterPreview(a.value))}),u.TgZ(1,"span"),u._uU(2),u.qZA(),u._UZ(3,"img",22),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw(2);u.Q6J("ngClass",u.VKq(6,PQ,t.value===r.post.filterSelected)),u.xp6(2),u.Oqu(t.name),u.xp6(1),u.Tol(t.value),u.MGl("alt","",t," - filter preview"),u.Q6J("src",r.post.imgUrl,u.LSH)}}function NQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",10)(1,"div",11)(2,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.isFilterMediaShown=!1,u.KtG(i.isSelectMediaShown=!0)}),u.O4$(),u.TgZ(3,"svg",13),u._UZ(4,"line",14)(5,"polyline",15),u.qZA()(),u.kcU(),u.TgZ(6,"button",16),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.isFilterMediaShown=!1,u.KtG(i.isFormMediaShown=!0)}),u._uU(7," Next "),u.qZA()(),u.TgZ(8,"article",17),u._UZ(9,"img",18),u.qZA(),u.TgZ(10,"div",19),u.YNc(11,OQ,4,8,"article",20),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(9),u.Tol(t.post.filterSelected),u.s9C("src",t.post.imgUrl,u.LSH),u.xp6(2),u.Q6J("ngForOf",t.filterPreviews)}}function RQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",23)(1,"div",11)(2,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.isFormMediaShown=!1,u.KtG(i.isFilterMediaShown=!0)}),u.O4$(),u.TgZ(3,"svg",13),u._UZ(4,"line",14)(5,"polyline",15),u.qZA()(),u.kcU(),u.TgZ(6,"button",24),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onCreatePost())}),u._uU(7," Share "),u.qZA()(),u.TgZ(8,"form")(9,"div",25),u._UZ(10,"img",26),u.TgZ(11,"textarea",27),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.post.content=i)}),u.qZA()()()()}if(2&n){const t=u.oxw();u.xp6(10),u.Tol(t.post.filterSelected),u.Q6J("src",t.post.imgUrl,u.LSH),u.xp6(1),u.Q6J("ngModel",t.post.content)}}let kQ=(()=>{class n{constructor(t,r,i){this.postService=t,this.router=r,this.userService=i,this.isSelectMediaShown=!0,this.isFilterMediaShown=!1,this.isFormMediaShown=!1,this.filterPreviews=[{name:"Normal",value:"normal"},{name:"Paris",value:"paris"},{name:"Los Angeles",value:"los-angeles"},{name:"Oslo",value:"oslo"},{name:"Abu Dhabi",value:"abu-dhabi"},{name:"Tokyo",value:"tokyo"}],this.post={_id:"",creatorFullName:"",creatorId:"",createdAt:0,imgUrl:"",content:"",likedByUsers:[],filterSelected:"normal"},this.userService.setIsSearchModalShown(!1)}onMediaSelected(t){var r=this;return(0,V.Z)(function*(){try{const i=yield r.postService.uploadMedia();i?r.post.imgUrl=i:console.error(null),r.isSelectMediaShown=!1,r.isFilterMediaShown=!0}catch(i){console.error("Error:",i)}})()}onSelectFilterPreview(t){this.post.filterSelected=t}onCreatePost(){var t=this;return(0,V.Z)(function*(){yield t.postService.createPost(t.post),yield t.router.navigateByUrl("/")})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(CE),u.Y36(Xn),u.Y36(lg))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["create-post-page"]],hostAttrs:[1,"page-cmp-layout"],decls:4,vars:3,consts:[[1,"create-post-page"],["class","select-media",4,"ngIf"],["class","filter-media",4,"ngIf"],["class","form-media",4,"ngIf"],[1,"select-media"],[3,"click"],["aria-label","Icon to represent media such as images or videos","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","77","role","img","viewBox","0 0 97.6 77.3","width","96",1,"x1lliihq","x1n2onr6"],["d","M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z","fill","currentColor"],["d","M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z","fill","currentColor"],["d","M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z","fill","currentColor"],[1,"filter-media"],[1,"actions"],["title","Back",1,"btn-back",3,"click"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["title","Next",1,"btn-next",3,"click"],[1,"media-preview"],["alt","media preview",3,"src"],[1,"filter-list"],["class","filter-preview",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"filter-preview",3,"ngClass","click"],[3,"src","alt"],[1,"form-media"],["title","Share",1,"btn-share",3,"click"],[1,"content"],["alt","post image",3,"src"],["name","content","placeholder","Write your caption...",3,"ngModel","ngModelChange"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0),u.YNc(1,xQ,9,0,"div",1),u.YNc(2,NQ,12,4,"div",2),u.YNc(3,RQ,12,4,"div",3),u.qZA()),2&r&&(u.xp6(1),u.Q6J("ngIf",i.isSelectMediaShown),u.xp6(1),u.Q6J("ngIf",i.isFilterMediaShown),u.xp6(1),u.Q6J("ngIf",i.isFormMediaShown))},dependencies:[ra,Io,Ir,FA,dg,AE,AA,sv,iv],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{height:100%;width:100%;position:relative}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f5f5f5;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1em;width:100%;height:100%;font-size:17px;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;gap:2em;position:relative;padding-block-end:1em}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:3.5em;z-index:10;background-color:#000}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 50px);display:flex;align-items:center;gap:1em;overflow-x:auto;white-space:nowrap}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.4em;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d3d3d369;font-size:12px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:5em;height:5em;aspect-ratio:1/1}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:3.5em;z-index:10;background-color:#000}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7em;height:70px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:unset;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100%;resize:none;background-color:transparent;border:none;color:#f5f5f5;font-size:16px;font-family:Arial,sans-serif}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#f5f5f5d9;font-style:italic;font-size:14px;font-family:Arial,sans-serif;font-weight:400}"]})}return n})();const RE=()=>!!(0,u.f3M)(Vi).getLoggedInUser()||(console.error("LoggedInUser doesnt exists - no access to that page!"),(0,u.f3M)(Xn).navigateByUrl("/login"),!1),FQ=[{path:"message",component:IQ,canActivate:[RE]},{path:"notification",component:MQ,canActivate:[RE]},{path:"create-post",component:kQ,canActivate:[RE]},{path:"profile",component:(()=>{class n{constructor(t){this.userService=t,this.userService.setIsSearchModalShown(!1)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(lg))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["profile"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(u.TgZ(0,"p"),u._uU(1,"profile works!"),u.qZA())}})}return n})(),canActivate:[RE]},{path:"login",component:wQ,canActivate:[()=>!(0,u.f3M)(Vi).getLoggedInUser()||(console.error("LoggedInUser exists - no access to login page!"),(0,u.f3M)(Xn).navigateByUrl("/"),!1)]},{path:"",component:yQ,canActivate:[RE]}];let LQ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[xm.forRoot(FQ,{useHash:!0}),xm]})}return n})();function UQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",30),u._UZ(1,"path",31),u.qZA())}function VQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",30),u._UZ(1,"path",32),u.qZA())}function BQ(n,e){if(1&n&&u._UZ(0,"img",33),2&n){const t=u.oxw(2);u.Q6J("src",t.user.user.photoURL,u.LSH)}}function jQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",34),u._UZ(1,"path",35)(2,"circle",36),u.qZA())}function $Q(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"div",37)(1,"ul")(2,"li",38),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onLogOut())}),u._uU(3,"Log out"),u.qZA()()()}}const HQ=function(){return{exact:!0}};function zQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"section",1)(1,"div",2)(2,"div",3),u.O4$(),u.TgZ(3,"svg",4),u._UZ(4,"path",5),u.qZA()(),u.kcU(),u.TgZ(5,"nav")(6,"ul")(7,"li",6),u.O4$(),u.TgZ(8,"svg",7),u._UZ(9,"path",8),u.qZA()(),u.kcU(),u.TgZ(10,"li",9),u.O4$(),u.TgZ(11,"svg",10),u._UZ(12,"path",11)(13,"path",12),u.qZA()(),u.kcU(),u.TgZ(14,"li",13,14),u.YNc(16,UQ,2,0,"svg",15),u.YNc(17,VQ,2,0,"svg",15),u.qZA(),u.TgZ(18,"li",16),u.O4$(),u.TgZ(19,"svg",17),u._UZ(20,"path",18)(21,"line",19)(22,"line",20),u.qZA()(),u.kcU(),u.TgZ(23,"li",21),u.YNc(24,BQ,1,1,"img",22),u.YNc(25,jQ,3,0,"ng-template",null,23,u.W1O),u.qZA()()()(),u.TgZ(27,"div",24),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),u.O4$(),u.TgZ(28,"svg",25),u._UZ(29,"line",26)(30,"line",27)(31,"line",28),u.qZA(),u.YNc(32,$Q,4,0,"div",29),u.qZA()()}if(2&n){const t=u.MAs(15),r=u.MAs(26),i=u.oxw();u.xp6(7),u.Q6J("routerLinkActiveOptions",u.DdM(6,HQ)),u.xp6(9),u.Q6J("ngIf",!t.classList.contains("active")),u.xp6(1),u.Q6J("ngIf",t.classList.contains("active")),u.xp6(7),u.Q6J("ngIf",i.user.user.photoURL)("ngIfElse",r),u.xp6(8),u.Q6J("ngIf",i.isExtraMenuOpen)}}let GQ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,V.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Vi),u.Y36(Xn))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","loggedInUser",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","loggedInUser",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&u.YNc(0,zQ,33,7,"section",0),2&r&&u.Q6J("ngIf",i.user&&i.user.user)},dependencies:[Ir,Mm,vf],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;z-index:99;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.19);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:55px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function WQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",27),u._UZ(1,"path",28),u.qZA())}function qQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",27),u._UZ(1,"path",29),u.qZA())}function ZQ(n,e){if(1&n&&u._UZ(0,"img",30),2&n){const t=u.oxw(2);u.Q6J("src",t.loggedInUser.photoURL,u.LSH)}}function KQ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",31),u._UZ(1,"path",32)(2,"circle",33),u.qZA())}function YQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"div",34)(1,"ul")(2,"li",35),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onLogOut())}),u._uU(3," Log out "),u.qZA()()()}}const QQ=function(){return{exact:!0}};function JQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),u.O4$(),u.TgZ(5,"svg",4),u._UZ(6,"path",5),u.qZA()(),u.kcU(),u.TgZ(7,"li",6),u.O4$(),u.TgZ(8,"svg",7),u._UZ(9,"path",8)(10,"path",9),u.qZA()(),u.kcU(),u.TgZ(11,"li",10,11),u.YNc(13,WQ,2,0,"svg",12),u.YNc(14,qQ,2,0,"svg",12),u.qZA(),u.TgZ(15,"li",13),u.O4$(),u.TgZ(16,"svg",14),u._UZ(17,"path",15)(18,"line",16)(19,"line",17),u.qZA()(),u.kcU(),u.TgZ(20,"li",18),u.YNc(21,ZQ,1,1,"img",19),u.YNc(22,KQ,3,0,"ng-template",null,20,u.W1O),u.qZA(),u.TgZ(24,"li",21),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),u.O4$(),u.TgZ(25,"svg",22),u._UZ(26,"line",23)(27,"line",24)(28,"line",25),u.qZA(),u.YNc(29,YQ,4,0,"div",26),u.qZA()()()()()}if(2&n){const t=u.MAs(12),r=u.MAs(23),i=u.oxw();u.xp6(4),u.Q6J("routerLinkActiveOptions",u.DdM(6,QQ)),u.xp6(9),u.Q6J("ngIf",!t.classList.contains("active")),u.xp6(1),u.Q6J("ngIf",t.classList.contains("active")),u.xp6(7),u.Q6J("ngIf",i.loggedInUser.photoURL)("ngIfElse",r),u.xp6(8),u.Q6J("ngIf",i.isExtraMenuOpen)}}let XQ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.loggedInUser=t:(this.loggedInUser=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,V.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Vi),u.Y36(Xn))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLink","/profile","routerLinkActive","active","title","Profile",1,"profile"],["alt","loggedInUser",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","loggedInUser",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&u.YNc(0,JQ,30,7,"section",0),2&r&&u.Q6J("ngIf",i.loggedInUser)},dependencies:[Ir,Mm,vf],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;z-index:99;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#262626;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})();const eJ=function(n,e){return{"btn-toggle-follow-following":n,disabled:e}};function tJ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onToggleFollow())}),u._uU(1),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("ngClass",u.WLB(3,eJ,t.isFollowClicked,t.isToggleFollowProcessing))("disabled",t.isToggleFollowProcessing),u.xp6(1),u.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function nJ(n,e){if(1&n&&(u.TgZ(0,"li")(1,"div",1),u._UZ(2,"img",2),u.TgZ(3,"div",3)(4,"span"),u._uU(5),u.qZA()()(),u.YNc(6,tJ,2,6,"button",4),u.qZA()),2&n){const t=u.oxw();u.xp6(2),u.Q6J("src",t.user.imgUrl,u.LSH),u.xp6(3),u.Oqu(t.user.fullName),u.xp6(1),u.Q6J("ngIf",t.loggedInUser._id!==t.user._id)}}let rJ=(()=>{class n{constructor(t){this.authService=t,this.toggleFollow=new u.vpe,this.isComponentInitialized=!1,this.isToggleFollowProcessing=!1}ngOnInit(){var t=this;return(0,V.Z)(function*(){const r=t.authService.getLoggedInUser(),i=t.authService.getUserById(r.uid).pipe(Jt(1));t.loggedInUser=yield oo(i),t.isFollowClicked=!!t.loggedInUser.followingUsers.find(a=>a===t.user._id),t.isComponentInitialized=!0})()}onToggleFollow(){this.isToggleFollowProcessing||(this.isToggleFollowProcessing=!0,this.isFollowClicked=!this.isFollowClicked,this.toggleFollow.emit({isFollowClicked:this.isFollowClicked,user:this.user}),this.isToggleFollowProcessing=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Vi))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["user-row-search-modal"]],inputs:{user:"user"},outputs:{toggleFollow:"toggleFollow"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"user-content"],["alt","loggedInUser",3,"src"],[1,"content"],["class","btn-toggle-follow",3,"ngClass","disabled","click",4,"ngIf"],[1,"btn-toggle-follow",3,"ngClass","disabled","click"]],template:function(r,i){1&r&&u.YNc(0,nJ,7,3,"li",0),2&r&&u.Q6J("ngIf",i.isComponentInitialized)},dependencies:[ra,Ir],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5em;border-radius:50%}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{border:none;font-size:16px;height:2em;padding-inline:1em;border-radius:.3em;background-color:#0095f6;color:#f5f5f5;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow-following[_ngcontent-%COMP%]{background-color:#919191}"]})}return n})();function iJ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"user-row-search-modal",5),u.NdJ("toggleFollow",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.toggleFollow.emit(i))}),u.qZA()}2&n&&u.Q6J("user",e.$implicit)}let sJ=(()=>{class n{constructor(t){this.renderer=t,this.closeModal=new u.vpe,this.getUsers=new u.vpe,this.toggleFollow=new u.vpe}ngOnInit(){this.renderer.addClass(document.body,"body-unscrollable"),this.getUsers.emit()}onCloseModal(){this.closeModal.emit(!1)}trackByUserId(t,r){return r._id}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["search-modal"]],inputs:{users:"users"},outputs:{closeModal:"closeModal",getUsers:"getUsers",toggleFollow:"toggleFollow"},decls:6,vars:2,consts:[[1,"search-modal"],[3,"user","toggleFollow",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[3,"user","toggleFollow"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0)(1,"ul"),u.YNc(2,iJ,1,1,"user-row-search-modal",1),u.qZA(),u.TgZ(3,"button",2),u.NdJ("click",function(){return i.onCloseModal()}),u.O4$(),u.TgZ(4,"svg",3),u._UZ(5,"path",4),u.qZA()()()),2&r&&(u.xp6(2),u.Q6J("ngForOf",i.users)("ngForTrackBy",i.trackByUserId))},dependencies:[Io,rJ],styles:["[_nghost-%COMP%]{position:fixed;top:61px;left:0;width:100%;height:100%;background-color:#000;overflow:auto;display:grid;grid-template-columns:25px 1fr 25px}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]{grid-column:2;padding-block:1.5em}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.3em;position:relative;padding-block-end:8em;padding-block-start:2em}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:fixed;top:88px;right:29px;border:none;width:-moz-fit-content;width:fit-content;background-color:transparent;display:flex;align-items:center;padding-inline-start:.8em;padding-block-end:.8em;align-self:end}"]})}return n})();function oJ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"search-modal",10),u.NdJ("closeModal",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onToggleSearchModal(i))})("getUsers",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.getUsers())})("toggleFollow",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.onToggleFollow(i))}),u.ALo(1,"async"),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("users",u.lcZ(1,1,t.users$))}}let aJ=(()=>{class n{constructor(t,r,i){this.router=t,this.userService=r,this.authService=i,this.filterBy={account:""}}ngOnInit(){this.searchModalSubscription=this.userService.isSearchModalShown$.subscribe({next:t=>{this.isSearchModalShown=t,this.filterBy.account=""}})}onClickLogo(){this.router.navigateByUrl("/")}getUsers(){var t=this;return(0,V.Z)(function*(){t.users$=yield t.userService.getUsers(t.filterBy)})()}onToggleSearchModal(t){this.userService.setIsSearchModalShown(t)}onToggleFollow({isFollowClicked:t,user:r}){var i=this;return(0,V.Z)(function*(){const a=i.authService.getUserById(r._id).pipe(Jt(1));r=yield oo(a),yield i.userService.toggleFollow(t,r)})()}ngOnDestroy(){this.searchModalSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Xn),u.Y36(lg),u.Y36(Vi))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-header-mobile"]],decls:12,vars:2,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[1,"search-container"],["aria-label","Search","fill","currentColor","height","16","role","img","viewBox","0 0 24 24","width","16",1,"x1lliihq","x1n2onr6","x1cp0k07"],["d","M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","16.511","x2","22","y1","16.511","y2","22"],["type","search","name","search","id","search","placeholder","Search",3,"ngModel","ngModelChange","input","click"],[3,"users","closeModal","getUsers","toggleFollow",4,"ngIf"],[3,"users","closeModal","getUsers","toggleFollow"]],template:function(r,i){1&r&&(u.TgZ(0,"header",0)(1,"div",1),u.NdJ("click",function(){return i.onClickLogo()}),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"path",3),u.qZA()(),u.kcU(),u.TgZ(4,"div",4),u.O4$(),u.TgZ(5,"svg",5)(6,"title"),u._uU(7,"Search"),u.qZA(),u._UZ(8,"path",6)(9,"line",7),u.qZA(),u.kcU(),u.TgZ(10,"input",8),u.NdJ("ngModelChange",function(l){return i.filterBy.account=l})("input",function(){return i.getUsers()})("click",function(){return i.onToggleSearchModal(!0)}),u.qZA(),u.YNc(11,oJ,2,3,"search-modal",9),u.qZA()()),2&r&&(u.xp6(10),u.Q6J("ngModel",i.filterBy.account),u.xp6(1),u.Q6J("ngIf",i.isSearchModalShown))},dependencies:[Ir,dg,AE,sv,sJ,hu],styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:99;top:0;border-block-end:1px solid rgba(255,255,255,.27);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px;gap:1em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em;background-color:#262626;height:2.5em;padding-inline:1em;border-radius:.5em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.2)}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]{background-color:transparent;border:none;height:100%;color:#f5f5f5;font-size:16px;width:100%}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]::placeholder{font-size:16px;font-style:italic;color:#919191}"]})}return n})();function cJ(n,e){1&n&&u._UZ(0,"router-outlet")}function lJ(n,e){1&n&&u._UZ(0,"app-header-mobile")}function uJ(n,e){1&n&&u._UZ(0,"aside-menu")}function dJ(n,e){1&n&&(u.TgZ(0,"main",2),u._UZ(1,"router-outlet"),u.qZA())}function hJ(n,e){1&n&&u._UZ(0,"menu-mobile")}let fJ=(()=>{class n{constructor(t){this.router=t,this.routerUrl=this.router.url}ngOnInit(){var t=this;return(0,V.Z)(function*(){t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof so&&(t.routerUrl=t.router.url)})})()}ngOnDestroy(){this.routerUrlSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Xn))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:7,consts:[[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,i){1&r&&(u.TgZ(0,"section"),u.YNc(1,cJ,1,0,"router-outlet",0),u.YNc(2,lJ,1,0,"app-header-mobile",0),u.YNc(3,uJ,1,0,"aside-menu",0),u.YNc(4,dJ,2,0,"main",1),u.YNc(5,hJ,1,0,"menu-mobile",0),u.qZA()),2&r&&(u.Tol("/login"===i.routerUrl?"main-app login-layout":"main-app app-layout"),u.xp6(1),u.Q6J("ngIf","/login"===i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl))},dependencies:[Ir,rf,GQ,XQ,aJ]})}return n})();class LA{}class UA{}class Sc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Sc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Sc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Sc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(f=>-1===a.indexOf(f)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class pJ{encodeKey(e){return FV(e)}encodeValue(e){return FV(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const mJ=/%(\d[a-f0-9])/gi,_J={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function FV(n){return encodeURIComponent(n).replace(mJ,(e,t)=>_J[t]??e)}function VA(n){return`${n}`}class eh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new pJ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function gJ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],g=t.get(l)||[];g.push(f),t.set(l,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(VA):[VA(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new eh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(VA(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(VA(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class yJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function LV(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function UV(n){return typeof Blob<"u"&&n instanceof Blob}function VV(n){return typeof FormData<"u"&&n instanceof FormData}class kE{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function vJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Sc),this.context||(this.context=new yJ),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+l}}else this.params=new eh,this.urlWithParams=t}serializeBody(){return null===this.body?null:LV(this.body)||UV(this.body)||VV(this.body)||function CJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof eh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||VV(this.body)?null:UV(this.body)?this.body.type||null:LV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof eh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,v=e.params||this.params;const E=e.context??this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((T,A)=>T.set(A,e.setHeaders[A]),g)),e.setParams&&(v=Object.keys(e.setParams).reduce((T,A)=>T.set(A,e.setParams[A]),v)),new kE(t,r,a,{params:v,headers:g,context:E,reportProgress:f,responseType:i,withCredentials:l})}}var ov=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ov||{});class T2{constructor(e,t=200,r="OK"){this.headers=e.headers||new Sc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class D2 extends T2{constructor(e={}){super(e),this.type=ov.ResponseHeader}clone(e={}){return new D2({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class av extends T2{constructor(e={}){super(e),this.type=ov.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new av({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class BV extends T2{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function S2(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let wJ=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof kE)a=t;else{let g,v;g=i.headers instanceof Sc?i.headers:new Sc(i.headers),i.params&&(v=i.params instanceof eh?i.params:new eh({fromObject:i.params})),a=new kE(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=(0,ut.of)(a).pipe(Oo(g=>this.handler.handle(g)));if(t instanceof kE||"events"===i.observe)return l;const f=l.pipe(Ar(g=>g instanceof av));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe((0,wt.U)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new eh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,S2(i,r))}post(t,r,i={}){return this.request("POST",t,S2(i,r))}put(t,r,i={}){return this.request("PUT",t,S2(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(LA))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function HV(n,e){return e(n)}function EJ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const TJ=new u.OlP(""),FE=new u.OlP(""),zV=new u.OlP("");function DJ(){let n=null;return(e,t)=>{null===n&&(n=((0,u.f3M)(TJ,{optional:!0})??[]).reduceRight(EJ,HV));const r=(0,u.f3M)(u.HDt),i=r.add();return n(e,t).pipe(tc(()=>r.remove(i)))}}let GV=(()=>{class n extends LA{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,u.f3M)(u.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(FE),...this.injector.get(zV,[])]));this.chain=i.reduceRight((a,l)=>function bJ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(a,l,this.injector),HV)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(tc(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(UA),u.LFG(u.lqb))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const xJ=/^\)\]\}',?\n/;let qV=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new u.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,pn.D)(r.\u0275loadImpl()):(0,ut.of)(null)).pipe((0,Gn.w)(()=>new fi.y(a=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((Q,J)=>l.setRequestHeader(Q,J.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Q=t.detectContentTypeHeader();null!==Q&&l.setRequestHeader("Content-Type",Q)}if(t.responseType){const Q=t.responseType.toLowerCase();l.responseType="json"!==Q?Q:"text"}const f=t.serializeBody();let g=null;const v=()=>{if(null!==g)return g;const Q=l.statusText||"OK",J=new Sc(l.getAllResponseHeaders()),be=function PJ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return g=new D2({headers:J,status:l.status,statusText:Q,url:be}),g},E=()=>{let{headers:Q,status:J,statusText:be,url:ze}=v(),Re=null;204!==J&&(Re=typeof l.response>"u"?l.responseText:l.response),0===J&&(J=Re?200:0);let Ye=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof Re){const gt=Re;Re=Re.replace(xJ,"");try{Re=""!==Re?JSON.parse(Re):null}catch(Mt){Re=gt,Ye&&(Ye=!1,Re={error:Mt,text:Re})}}Ye?(a.next(new av({body:Re,headers:Q,status:J,statusText:be,url:ze||void 0})),a.complete()):a.error(new BV({error:Re,headers:Q,status:J,statusText:be,url:ze||void 0}))},T=Q=>{const{url:J}=v(),be=new BV({error:Q,status:l.status||0,statusText:l.statusText||"Unknown Error",url:J||void 0});a.error(be)};let A=!1;const R=Q=>{A||(a.next(v()),A=!0);let J={type:ov.DownloadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),"text"===t.responseType&&l.responseText&&(J.partialText=l.responseText),a.next(J)},W=Q=>{let J={type:ov.UploadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),a.next(J)};return l.addEventListener("load",E),l.addEventListener("error",T),l.addEventListener("timeout",T),l.addEventListener("abort",T),t.reportProgress&&(l.addEventListener("progress",R),null!==f&&l.upload&&l.upload.addEventListener("progress",W)),l.send(f),a.next({type:ov.Sent}),()=>{l.removeEventListener("error",T),l.removeEventListener("abort",T),l.removeEventListener("load",E),l.removeEventListener("timeout",T),t.reportProgress&&(l.removeEventListener("progress",R),null!==f&&l.upload&&l.upload.removeEventListener("progress",W)),l.readyState!==l.DONE&&l.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Cs))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const A2=new u.OlP("XSRF_ENABLED"),ZV=new u.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),KV=new u.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class YV{}let RJ=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ba(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ie),u.LFG(u.Lbi),u.LFG(ZV))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function kJ(n,e){const t=n.url.toLowerCase();if(!(0,u.f3M)(A2)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,u.f3M)(YV).getToken(),i=(0,u.f3M)(KV);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var th=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(th||{});function FJ(...n){const e=[wJ,qV,GV,{provide:LA,useExisting:GV},{provide:UA,useExisting:qV},{provide:FE,useValue:kJ,multi:!0},{provide:A2,useValue:!0},{provide:YV,useClass:RJ}];for(const t of n)e.push(...t.\u0275providers);return(0,u.MR2)(e)}const QV=new u.OlP("LEGACY_INTERCEPTOR_FN");function LJ(){return function pg(n,e){return{\u0275kind:n,\u0275providers:e}}(th.LegacyInterceptors,[{provide:QV,useFactory:DJ},{provide:FE,useExisting:QV,multi:!0}])}let UJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[FJ(LJ())]})}return n})();class M2{constructor(e){return e}}class jA{constructor(){return Ps("auth")}}const x2=new u.OlP("angularfire2.auth-instances");function GJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new M2(r)}}const WJ={provide:jA,deps:[[new u.FiY,x2]]},qJ={provide:M2,useFactory:function zJ(n,e){const t=Ol("auth",n,e);return t&&new M2(t)},deps:[[new u.FiY,x2],nu]};let ZJ=(()=>{class n{constructor(){(0,bn.registerVersion)("angularfire",Pl.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[qJ,WJ]}),n})();function KJ(n,...e){return{ngModule:ZJ,providers:[{provide:x2,useFactory:GJ(n),multi:!0,deps:[u.R0b,u.zs3,Nl,Ky,[new u.FiY,sg],...e]}]}}const YJ=Ed(V5.o,!0);class P2{constructor(e){return e}}const XV="firestore",O2=new u.OlP("angularfire2.firestore-instances");function XJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new P2(r)}}const eX={provide:class QJ{constructor(){return Ps(XV)}},deps:[[new u.FiY,O2]]},tX={provide:P2,useFactory:function JJ(n,e){const t=Ol(XV,n,e);return t&&new P2(t)},deps:[[new u.FiY,O2],nu]};let nX=(()=>{class n{constructor(){(0,bn.registerVersion)("angularfire",Pl.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[tX,eX]}),n})();function rX(n,...e){return{ngModule:nX,providers:[{provide:O2,useFactory:XJ(n),multi:!0,deps:[u.R0b,u.zs3,Nl,Ky,[new u.FiY,jA],[new u.FiY,sg],...e]}]}}const iX=Ed(q$,!0),eB="@firebase/database";let N2="";class oX{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,z.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class aX{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const nB=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new oX(e)}}catch{}return new aX},gg=nB("localStorage"),R2=nB("sessionStorage"),cv=new Pi.Yd("@firebase/database"),rB=function(){let n=1;return function(){return n++}}(),iB=function(n){const e=(0,z.dS)(n),t=new z.gQ;t.update(e);const r=t.digest();return z.US.encodeByteArray(r)},LE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=LE.apply(null,r):e+="object"==typeof r?(0,z.Wl)(r):r,e+=" "}return e};let mg=null,sB=!0;const Ii=function(...n){if(!0===sB&&(sB=!1,null===mg&&!0===R2.get("logging_enabled")&&function(n,e){(0,z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(cv.logLevel=Pi.in.VERBOSE,mg=cv.log.bind(cv),e&&R2.set("logging_enabled",!0)):"function"==typeof n?mg=n:(mg=null,R2.remove("logging_enabled"))}(!0)),mg){const e=LE.apply(null,n);mg(e)}},UE=function(n){return function(...e){Ii(n,...e)}},k2=function(...n){const e="FIREBASE INTERNAL ERROR: "+LE(...n);cv.error(e)},Ac=function(...n){const e=`FIREBASE FATAL ERROR: ${LE(...n)}`;throw cv.error(e),new Error(e)},ns=function(...n){const e="FIREBASE WARNING: "+LE(...n);cv.warn(e)},$A=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},nh="[MIN_NAME]",ru="[MAX_NAME]",_g=function(n,e){if(n===e)return 0;if(n===nh||e===ru)return-1;if(e===nh||n===ru)return 1;{const t=lB(n),r=lB(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},uX=function(n,e){return n===e?0:n<e?-1:1},VE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,z.Wl)(e))},F2=function(n){if("object"!=typeof n||null===n)return(0,z.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,z.Wl)(e[r]),t+=":",t+=F2(n[e[r]]);return t+="}",t},aB=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ei(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const cB=function(n){(0,z.hu)(!$A(n),"Invalid JSON number");const r=1023;let i,a,l,f,g;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const E=v.join("");let T="";for(g=0;g<64;g+=8){let A=parseInt(E.substr(g,8),2).toString(16);1===A.length&&(A="0"+A),T+=A}return T.toLowerCase()},pX=new RegExp("^-?(0*)\\d{1,10}$"),lB=function(n){if(pX.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},lv=function(n){try{n()}catch(e){setTimeout(()=>{throw ns("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},BE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class yX{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ns(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class vX{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ii("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ns(e)}}let jE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const pB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_B="websocket",yB="long_polling";class U2{constructor(e,t,r,i,a=!1,l="",f=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function vB(n,e,t){let r;if((0,z.hu)("string"==typeof e,"typeof type must == string"),(0,z.hu)("object"==typeof t,"typeof params must == object"),e===_B)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==yB)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function CX(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ei(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class wX{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,z.p$)(this.counters_)}}const V2={},B2={};function j2(n){const e=n.toString();return V2[e]||(V2[e]=new wX),V2[e]}class EX{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&lv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class rh{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=UE(e),this.stats_=j2(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),vB(t,yB,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new EX(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $2((...a)=>{const[l,f,g,v,E]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&pB.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){rh.forceAllow_=!0}static forceDisallow(){rh.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!rh.forceAllow_&&(rh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,z.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,z.h$)(t),i=aB(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,z.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class $2{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=rB(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=$2.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Ii("frame writing exception"),f.stack&&Ii(f.stack),Ii(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ii("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ii("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let zA=null;typeof MozWebSocket<"u"?zA=MozWebSocket:typeof WebSocket<"u"&&(zA=WebSocket);let uv=(()=>{class n{constructor(t,r,i,a,l,f,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=UE(this.connId),this.stats_=j2(r),this.connURL=n.connectionURL_(r,f,g,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&pB.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),vB(t,_B,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gg.set("previous_websocket_failure",!0);try{let i;if((0,z.Yr)()){i={headers:{"User-Agent":`Firebase/5/${N2}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new zA(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==zA&&!n.forceDisallow_}static previouslyFailed(){return gg.isInMemoryStorage||!0===gg.get("previous_websocket_failure")}markConnectionHealthy(){gg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,z.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=aB(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),DB=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[rh,uv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=uv&&uv.isAvailable();let i=r&&!uv.previouslyFailed();if(t.webSocketOnly&&(r||ns("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[uv];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class NB{constructor(e,t,r,i,a,l,f,g,v,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=UE("c:"+this.id+":"),this.transportManager_=new DB(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=BE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=VE("t",e),r=VE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=VE("t",e),r=VE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=VE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?k2("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):k2("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ns("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),BE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):BE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class RB{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class kB{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class GA extends kB{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new GA}getInitialEvent(e){return(0,z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class _n{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ln(){return new _n("")}function $t(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ih(n){return n.pieces_.length-n.pieceNum_}function An(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new _n(n.pieces_,e)}function z2(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function $E(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function UB(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new _n(e,0)}function nr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof _n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new _n(t,0)}function Ht(n){return n.pieceNum_>=n.pieces_.length}function gs(n,e){const t=$t(n),r=$t(e);if(null===t)return e;if(t===r)return gs(An(n),An(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function G2(n,e){if(ih(n)!==ih(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ta(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ih(n)>ih(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class WX{constructor(e,t){this.errorPrefix_=t,this.parts_=$E(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,z.ug)(this.parts_[r]);VB(this)}}function VB(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yg(n))}function yg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class W2 extends kB{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new W2}getInitialEvent(e){return(0,z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const HE=1e3;let qA,vg=(()=>{class n extends RB{constructor(t,r,i,a,l,f,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=UE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=HE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");W2.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&GA.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,z.Wl)(l)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new z.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const g=f.d;"ok"===f.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const v=g.d,E=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==E&&this.removeListen_(i,a),t.onComplete&&t.onComplete(E,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,z.r3)(t,"w")){const i=(0,z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ns(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,z.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):k2("Unrecognized action received from server: "+(0,z.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=HE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=HE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=HE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,V.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let g=!1,v=null;const E=function(){v?v.close():(g=!0,a())};t.realtime_={close:E,sendRequest:function(R){(0,z.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(R)}};const A=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[R,W]=yield Promise.all([t.authTokenProvider_.getToken(A),t.appCheckTokenProvider_.getToken(A)]);g?Ii("getToken() completed but was canceled"):(Ii("getToken() completed. Creating connection."),t.authToken_=R&&R.accessToken,t.appCheckToken_=W&&W.token,v=new NB(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Q=>{ns(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(R){t.log_("Failed to get token: "+R),g||(t.repoInfo_.nodeAdmin&&ns(R),E())}}})()}interrupt(t){Ii("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ii("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=HE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>F2(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new _n(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ii("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ii("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+N2.replace(/\./g,"-")]=1,(0,z.uI)()?t["framework.cordova"]=1:(0,z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=GA.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Wt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Wt(e,t)}}class WA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Wt(nh,e),i=new Wt(nh,t);return 0!==this.compare(r,i)}minPost(){return Wt.MIN}}class $B extends WA{static get __EMPTY_NODE(){return qA}static set __EMPTY_NODE(e){qA=e}compare(e,t){return _g(e.name,t.name)}isDefinedOn(e){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Wt.MIN}maxPost(){return new Wt(ru,qA)}makePost(e,t){return(0,z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Wt(e,qA)}toString(){return".key"}}const Mc=new $B;class ZA{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Z2,Ra=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Fs.EMPTY_NODE,this.right=l??Fs.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Fs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Fs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Fs{constructor(e,t=Fs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Fs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ra.BLACK,null,null))}remove(e){return new Fs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ra.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ZA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ZA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ZA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ZA(this.root_,null,this.comparator_,!0,e)}}function eee(n,e){return _g(n.name,e.name)}function q2(n,e){return _g(n,e)}Fs.EMPTY_NODE=new class XX{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ra(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const HB=function(n){return"number"==typeof n?"number:"+cB(n):"string:"+n},zB=function(n){if(n.isLeafNode()){const e=n.val();(0,z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,z.hu)(n===Z2||n.isEmpty(),"priority of unexpected type.");(0,z.hu)(n===Z2||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let GB,WB,qB,dv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),zB(this.priorityNode_)}static set __childrenNodeConstructor(t){GB=t}static get __childrenNodeConstructor(){return GB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ht(t)?this:".priority"===$t(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=$t(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,z.hu)(".priority"!==i||1===ih(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(An(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+HB(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?cB(this.value_):this.value_,this.lazyHash_=iB(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,z.hu)(a>=0,"Unknown leaf type: "+r),(0,z.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Vn=new class iee extends WA{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?_g(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Wt.MIN}maxPost(){return new Wt(ru,new dv("[PRIORITY-POST]",qB))}makePost(e,t){const r=WB(e);return new Wt(t,new dv("[PRIORITY-POST]",r))}toString(){return".priority"}},see=Math.log(2);class oee{constructor(e){this.count=parseInt(Math.log(e+1)/see,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const KA=function(n,e,t,r){n.sort(e);const i=function(g,v){const E=v-g;let T,A;if(0===E)return null;if(1===E)return T=n[g],A=t?t(T):T,new Ra(A,T.node,Ra.BLACK,null,null);{const R=parseInt(E/2,10)+g,W=i(g,R),Q=i(R+1,v);return T=n[R],A=t?t(T):T,new Ra(A,T.node,Ra.BLACK,W,Q)}},f=function(g){let v=null,E=null,T=n.length;const A=function(W,Q){const J=T-W,be=T;T-=W;const ze=i(J+1,be),Re=n[J],Ye=t?t(Re):Re;R(new Ra(Ye,Re.node,Q,null,ze))},R=function(W){v?(v.left=W,v=W):(E=W,v=W)};for(let W=0;W<g.count;++W){const Q=g.nextBitIsOne(),J=Math.pow(2,g.count-(W+1));Q?A(J,Ra.BLACK):(A(J,Ra.BLACK),A(J,Ra.RED))}return E}(new oee(n.length));return new Fs(r||e,f)};let K2;const hv={};class iu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,z.hu)(hv&&Vn,"ChildrenNode.ts has not been loaded"),K2=K2||new iu({".priority":hv},{".priority":Vn}),K2}get(e){const t=(0,z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Fs?t:null}hasIndex(e){return(0,z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,z.hu)(e!==Mc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Wt.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?KA(r,e.getCompare()):hv;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const E=Object.assign({},this.indexes_);return E[g]=f,new iu(E,v)}addToIndexes(e,t){const r=(0,z.UI)(this.indexes_,(i,a)=>{const l=(0,z.DV)(this.indexSet_,a);if((0,z.hu)(l,"Missing index implementation for "+a),i===hv){if(l.isDefinedOn(e.node)){const f=[],g=t.getIterator(Wt.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&f.push(v),v=g.getNext();return f.push(e),KA(f,l.getCompare())}return hv}{const f=t.get(e.name);let g=i;return f&&(g=g.remove(new Wt(e.name,f))),g.insert(e,e.node)}});return new iu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,z.UI)(this.indexes_,i=>{if(i===hv)return i;{const a=t.get(e.name);return a?i.remove(new Wt(e.name,a)):i}});return new iu(r,this.indexSet_)}}let zE,Ot=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&zB(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return zE||(zE=new n(new Fs(q2),null,iu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?zE:r}}getChild(t){const r=$t(t);return null===r?this:this.getImmediateChild(r).getChild(An(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Wt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?zE:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=$t(t);if(null===i)return r;{(0,z.hu)(".priority"!==$t(t)||1===ih(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(An(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Vn,(f,g)=>{r[f]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const g in r)f[g]=r[g];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+HB(this.getPriority().val())+":"),this.forEachChild(Vn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":iB(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Wt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Wt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Wt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Wt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Wt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===GE?-1:0}withIndex(t){if(t===Mc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Mc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Vn),a=r.getIterator(Vn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Mc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const GE=new class aee extends Ot{constructor(){super(new Fs(q2),Ot.EMPTY_NODE,iu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ot.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Wt,{MIN:{value:new Wt(nh,Ot.EMPTY_NODE)},MAX:{value:new Wt(ru,GE)}}),$B.__EMPTY_NODE=Ot.EMPTY_NODE,dv.__childrenNodeConstructor=Ot,function tee(n){Z2=n}(GE),function ree(n){qB=n}(GE);const cee=!0;function dr(n,e=null){if(null===n)return Ot.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new dv(n,dr(e));if(n instanceof Array||!cee){let t=Ot.EMPTY_NODE;return Ei(n,(r,i)=>{if((0,z.r3)(n,r)&&"."!==r.substring(0,1)){const a=dr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(dr(e))}{const t=[];let r=!1;if(Ei(n,(l,f)=>{if("."!==l.substring(0,1)){const g=dr(f);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new Wt(l,g)))}}),0===t.length)return Ot.EMPTY_NODE;const a=KA(t,eee,l=>l.name,q2);if(r){const l=KA(t,Vn.getCompare());return new Ot(a,dr(e),new iu({".priority":l},{".priority":Vn}))}return new Ot(a,dr(e),iu.Default)}}!function nee(n){WB=n}(dr);class Y2 extends WA{constructor(e){super(),this.indexPath_=e,(0,z.hu)(!Ht(e)&&".priority"!==$t(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?_g(e.name,t.name):a}makePost(e,t){const r=dr(e),i=Ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new Wt(t,i)}maxPost(){const e=Ot.EMPTY_NODE.updateChild(this.indexPath_,GE);return new Wt(ru,e)}toString(){return $E(this.indexPath_,0).join("/")}}const Q2=new class lee extends WA{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?_g(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Wt.MIN}maxPost(){return Wt.MAX}makePost(e,t){const r=dr(e);return new Wt(t,r)}toString(){return".value"}};function qE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class X2{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ru}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vn}copy(){const e=new X2;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function KB(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Vn?t="$priority":n.index_===Q2?t="$value":n.index_===Mc?t="$key":((0,z.hu)(n.index_ instanceof Y2,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,z.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,z.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,z.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function YB(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Vn&&(e.i=n.index_.toString()),e}class QA extends RB{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=UE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=QA.getListenId_(e,r),f={};this.listens_[l]=f;const g=KB(e._queryParams);this.restRequest_(a+".json",g,(v,E)=>{let T=E;if(404===v&&(T=null,v=null),null===v&&this.onDataUpdate_(a,T,!1,r),(0,z.DV)(this.listens_,l)===f){let A;A=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(A,null)}})}unlisten(e,t){const r=QA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=KB(e._queryParams),r=e._path.toString(),i=new z.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,z.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let g=null;if(f.status>=200&&f.status<300){try{g=(0,z.cI)(f.responseText)}catch{ns("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,g)}else 401!==f.status&&404!==f.status&&ns("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class _ee{constructor(){this.rootNode_=Ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function JA(){return{value:null,children:new Map}}function pv(n,e,t){if(Ht(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=$t(e);n.children.has(r)||n.children.set(r,JA()),pv(n.children.get(r),e=An(e),t)}}function rF(n,e,t){null!==n.value?t(e,n.value):function yee(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{rF(i,new _n(e.toString()+"/"+r),t)})}class vee{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ei(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Iee{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new vee(e);const r=1e4+2e4*Math.random();BE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ei(e,(i,a)=>{a>0&&(0,z.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),BE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var xc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(xc||{});function oF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class XA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=xc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ht(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new _n(e));return new XA(ln(),t,this.revert)}}return(0,z.hu)($t(this.path)===e,"operationForChild called for unrelated child."),new XA(An(this.path),this.affectedTree,this.revert)}}class Cg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=xc.OVERWRITE}operationForChild(e){return Ht(this.path)?new Cg(this.source,ln(),this.snap.getImmediateChild(e)):new Cg(this.source,An(this.path),this.snap)}}class gv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=xc.MERGE}operationForChild(e){if(Ht(this.path)){const t=this.children.subtree(new _n(e));return t.isEmpty()?null:t.value?new Cg(this.source,ln(),t.value):new gv(this.source,ln(),t)}return(0,z.hu)($t(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new gv(this.source,An(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class sh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ht(e))return this.isFullyInitialized()&&!this.filtered_;const t=$t(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function YE(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,g)=>function Dee(n,e,t){if(null==e.childName||null==t.childName)throw(0,z.g5)("Should only compare child_ events.");const r=new Wt(e.childName,e.snapshotNode),i=new Wt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,g)),l.forEach(f=>{const g=function Tee(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(g,n.query_))})})}function eM(n,e){return{eventCache:n,serverCache:e}}function QE(n,e,t,r){return eM(new sh(e,t,r),n.serverCache)}function JB(n,e,t,r){return eM(n.eventCache,new sh(e,t,r))}function tM(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let aF;class Bn{constructor(e,t=(()=>(aF||(aF=new Fs(uX)),aF))()){this.value=e,this.children=t}static fromObject(e){let t=new Bn(null);return Ei(e,(r,i)=>{t=t.set(new _n(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ln(),value:this.value};if(Ht(e))return null;{const r=$t(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(An(e),t);return null!=a?{path:nr(new _n(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ht(e))return this;{const t=$t(e),r=this.children.get(t);return null!==r?r.subtree(An(e)):new Bn(null)}}set(e,t){if(Ht(e))return new Bn(t,this.children);{const r=$t(e),a=(this.children.get(r)||new Bn(null)).set(An(e),t),l=this.children.insert(r,a);return new Bn(this.value,l)}}remove(e){if(Ht(e))return this.children.isEmpty()?new Bn(null):new Bn(null,this.children);{const t=$t(e),r=this.children.get(t);if(r){const i=r.remove(An(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Bn(null):new Bn(this.value,a)}return this}}get(e){if(Ht(e))return this.value;{const t=$t(e),r=this.children.get(t);return r?r.get(An(e)):null}}setTree(e,t){if(Ht(e))return t;{const r=$t(e),a=(this.children.get(r)||new Bn(null)).setTree(An(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Bn(this.value,l)}}fold(e){return this.fold_(ln(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(nr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ln(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Ht(e))return null;{const a=$t(e),l=this.children.get(a);return l?l.findOnPath_(An(e),nr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ln(),t)}foreachOnPath_(e,t,r){if(Ht(e))return this;{this.value&&r(t,this.value);const i=$t(e),a=this.children.get(i);return a?a.foreachOnPath_(An(e),nr(t,i),r):new Bn(null)}}foreach(e){this.foreach_(ln(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(nr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ka{constructor(e){this.writeTree_=e}static empty(){return new ka(new Bn(null))}}function JE(n,e,t){if(Ht(e))return new ka(new Bn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=gs(i,e);return a=a.updateChild(l,t),new ka(n.writeTree_.set(i,a))}{const i=new Bn(t),a=n.writeTree_.setTree(e,i);return new ka(a)}}}function cF(n,e,t){let r=n;return Ei(t,(i,a)=>{r=JE(r,nr(e,i),a)}),r}function XB(n,e){if(Ht(e))return ka.empty();{const t=n.writeTree_.setTree(e,new Bn(null));return new ka(t)}}function lF(n,e){return null!=Ig(n,e)}function Ig(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(gs(t.path,e)):null}function ej(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Vn,(r,i)=>{e.push(new Wt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Wt(r,i.value))}),e}function oh(n,e){if(Ht(e))return n;{const t=Ig(n,e);return new ka(null!=t?new Bn(t):n.writeTree_.subtree(e))}}function uF(n){return n.writeTree_.isEmpty()}function mv(n,e){return tj(ln(),n.writeTree_,e)}function tj(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,z.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=tj(nr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(nr(n,".priority"),r)),t}}function nM(n,e){return oj(e,n)}function Oee(n,e){if(n.snap)return ta(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ta(nr(n.path,t),e))return!0;return!1}function Ree(n){return n.visible}function nj(n,e,t){let r=ka.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)ta(t,l)?(f=gs(t,l),r=JE(r,f,a.snap)):ta(l,t)&&(f=gs(l,t),r=JE(r,ln(),a.snap.getChild(f)));else{if(!a.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(ta(t,l))f=gs(t,l),r=cF(r,f,a.children);else if(ta(l,t))if(f=gs(l,t),Ht(f))r=cF(r,ln(),a.children);else{const g=(0,z.DV)(a.children,$t(f));if(g){const v=g.getChild(An(f));r=JE(r,ln(),v)}}}}}return r}function rj(n,e,t,r,i){if(r||i){const a=oh(n.visibleWrites,e);return!i&&uF(a)?t:i||null!=t||lF(a,ln())?mv(nj(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(ta(v.path,e)||ta(e,v.path))},e),t||Ot.EMPTY_NODE):null}{const a=Ig(n.visibleWrites,e);if(null!=a)return a;{const l=oh(n.visibleWrites,e);return uF(l)?t:null!=t||lF(l,ln())?mv(l,t||Ot.EMPTY_NODE):null}}}function rM(n,e,t,r){return rj(n.writeTree,n.treePath,e,t,r)}function dF(n,e){return function kee(n,e,t){let r=Ot.EMPTY_NODE;const i=Ig(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Vn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=oh(n.visibleWrites,e);return t.forEachChild(Vn,(l,f)=>{const g=mv(oh(a,new _n(l)),f);r=r.updateImmediateChild(l,g)}),ej(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return ej(oh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function ij(n,e,t,r){return function Fee(n,e,t,r,i){(0,z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=nr(e,t);if(lF(n.visibleWrites,a))return null;{const l=oh(n.visibleWrites,a);return uF(l)?i.getChild(t):mv(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function iM(n,e){return function Uee(n,e){return Ig(n.visibleWrites,e)}(n.writeTree,nr(n.treePath,e))}function hF(n,e,t){return function Lee(n,e,t,r){const i=nr(e,t),a=Ig(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?mv(oh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function sj(n,e){return oj(nr(n.treePath,e),n.writeTree)}function oj(n,e){return{treePath:n,writeTree:e}}class $ee{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,qE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function WE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function fv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,qE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const aj=new class Hee{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class fF{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new sh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hF(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wg(this.viewCache_),a=function jee(n,e,t,r,i,a){return function Vee(n,e,t,r,i,a,l){let f;const g=oh(n.visibleWrites,e),v=Ig(g,ln());if(null!=v)f=v;else{if(null==t)return[];f=mv(g,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const E=[],T=l.getCompare(),A=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let R=A.getNext();for(;R&&E.length<i;)0!==T(R,r)&&E.push(R),R=A.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function cj(n,e,t,r,i,a){const l=e.eventCache;if(null!=iM(r,t))return e;{let f,g;if(Ht(t))if((0,z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=wg(e),T=dF(r,v instanceof Ot?v:Ot.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const v=rM(r,wg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=$t(t);if(".priority"===v){(0,z.hu)(1===ih(t),"Can't have a priority with additional path components");const E=l.getNode();g=e.serverCache.getNode();const T=ij(r,t,E,g);f=null!=T?n.filter.updatePriority(E,T):l.getNode()}else{const E=An(t);let T;if(l.isCompleteForChild(v)){g=e.serverCache.getNode();const A=ij(r,t,l.getNode(),g);T=null!=A?l.getNode().getImmediateChild(v).updateChild(E,A):l.getNode().getImmediateChild(v)}else T=hF(r,v,e.serverCache);f=null!=T?n.filter.updateChild(l.getNode(),v,T,E,i,a):l.getNode()}}return QE(e,f,l.isFullyInitialized()||Ht(t),n.filter.filtersNodes())}}function sM(n,e,t,r,i,a,l,f){const g=e.serverCache;let v;const E=l?n.filter:n.filter.getIndexedFilter();if(Ht(t))v=E.updateFullNode(g.getNode(),r,null);else if(E.filtersNodes()&&!g.isFiltered()){const R=g.getNode().updateChild(t,r);v=E.updateFullNode(g.getNode(),R,null)}else{const R=$t(t);if(!g.isCompleteForPath(t)&&ih(t)>1)return e;const W=An(t),J=g.getNode().getImmediateChild(R).updateChild(W,r);v=".priority"===R?E.updatePriority(g.getNode(),J):E.updateChild(g.getNode(),R,J,W,aj,null)}const T=JB(e,v,g.isFullyInitialized()||Ht(t),E.filtersNodes());return cj(n,T,t,i,new fF(i,T,a),f)}function pF(n,e,t,r,i,a,l){const f=e.eventCache;let g,v;const E=new fF(i,e,a);if(Ht(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=QE(e,v,!0,n.filter.filtersNodes());else{const T=$t(t);if(".priority"===T)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=QE(e,v,f.isFullyInitialized(),f.isFiltered());else{const A=An(t),R=f.getNode().getImmediateChild(T);let W;if(Ht(A))W=r;else{const Q=E.getCompleteChild(T);W=null!=Q?".priority"===z2(A)&&Q.getChild(UB(A)).isEmpty()?Q:Q.updateChild(A,r):Ot.EMPTY_NODE}g=R.equals(W)?e:QE(e,n.filter.updateChild(f.getNode(),T,W,A,E,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return g}function lj(n,e){return n.eventCache.isCompleteForChild(e)}function uj(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function gF(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=Ht(t)?r:new Bn(null).setTree(t,r);const E=e.serverCache.getNode();return v.children.inorderTraversal((T,A)=>{if(E.hasChild(T)){const W=uj(0,e.serverCache.getNode().getImmediateChild(T),A);g=sM(n,g,new _n(T),W,i,a,l,f)}}),v.children.inorderTraversal((T,A)=>{const R=!e.serverCache.isCompleteForChild(T)&&null===A.value;if(!E.hasChild(T)&&!R){const Q=uj(0,e.serverCache.getNode().getImmediateChild(T),A);g=sM(n,g,new _n(T),Q,i,a,l,f)}}),g}function tte(n,e){const t=wg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ht(e)&&!t.getImmediateChild($t(e)).isEmpty())?t.getChild(e):null}function fj(n,e,t,r){e.type===xc.MERGE&&null!==e.source.queryId&&((0,z.hu)(wg(n.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(tM(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Wee(n,e,t,r,i){const a=new $ee;let l,f;if(t.type===xc.OVERWRITE){const v=t;v.source.fromUser?l=pF(n,e,v.path,v.snap,r,i,a):((0,z.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!Ht(v.path),l=sM(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===xc.MERGE){const v=t;v.source.fromUser?l=function Zee(n,e,t,r,i,a,l){let f=e;return r.foreach((g,v)=>{const E=nr(t,g);lj(e,$t(E))&&(f=pF(n,f,E,v,i,a,l))}),r.foreach((g,v)=>{const E=nr(t,g);lj(e,$t(E))||(f=pF(n,f,E,v,i,a,l))}),f}(n,e,v.path,v.children,r,i,a):((0,z.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),l=gF(n,e,v.path,v.children,r,i,f,a))}else if(t.type===xc.ACK_USER_WRITE){const v=t;l=v.revert?function Qee(n,e,t,r,i,a){let l;if(null!=iM(r,t))return e;{const f=new fF(r,e,i),g=e.eventCache.getNode();let v;if(Ht(t)||".priority"===$t(t)){let E;if(e.serverCache.isFullyInitialized())E=rM(r,wg(e));else{const T=e.serverCache.getNode();(0,z.hu)(T instanceof Ot,"serverChildren would be complete if leaf node"),E=dF(r,T)}v=n.filter.updateFullNode(g,E,a)}else{const E=$t(t);let T=hF(r,E,e.serverCache);null==T&&e.serverCache.isCompleteForChild(E)&&(T=g.getImmediateChild(E)),v=null!=T?n.filter.updateChild(g,E,T,An(t),f,a):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(g,E,Ot.EMPTY_NODE,An(t),f,a):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=rM(r,wg(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=iM(r,ln()),QE(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function Kee(n,e,t,r,i,a,l){if(null!=iM(i,t))return e;const f=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(Ht(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return sM(n,e,t,g.getNode().getChild(t),i,a,f,l);if(Ht(t)){let v=new Bn(null);return g.getNode().forEachChild(Mc,(E,T)=>{v=v.set(new _n(E),T)}),gF(n,e,t,v,i,a,f,l)}return e}{let v=new Bn(null);return r.foreach((E,T)=>{const A=nr(t,E);g.isCompleteForPath(A)&&(v=v.set(E,g.getNode().getChild(A)))}),gF(n,e,t,v,i,a,f,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==xc.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+t.type);l=function Yee(n,e,t,r,i){const a=e.serverCache;return cj(n,JB(e,a.getNode(),a.isFullyInitialized()||Ht(t),a.isFiltered()),t,r,aj,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function qee(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=tM(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function ZB(n){return{type:"value",snapshotNode:n}}(tM(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function Gee(n,e){(0,z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,z.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function pj(n,e,t,r){return function bee(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function uee(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),YE(n,i,"child_removed",e,r,t),YE(n,i,"child_added",e,r,t),YE(n,i,"child_moved",a,r,t),YE(n,i,"child_changed",e,r,t),YE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let oM,cM;function mF(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,z.hu)(null!=a,"SyncTree gave us an op for an invalid query."),fj(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(fj(l,e,t,r));return a}}function ah(n,e){let t=null;for(const r of n.views.values())t=t||tte(r,e);return t}class Cj{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Bn(null),this.pendingWriteTree_=function Bee(){return{visibleWrites:ka.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function _F(n,e,t,r,i){return function Aee(n,e,t,r,i){(0,z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=JE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?_v(n,new Cg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function lh(n,e,t=!1){const r=function xee(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Pee(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&Oee(f,r.path)?i=!1:ta(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function Nee(n){n.visibleWrites=nj(n.allWrites,Ree,ln()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=XB(n.visibleWrites,r.path):Ei(r.children,g=>{n.visibleWrites=XB(n.visibleWrites,nr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new Bn(null);return null!=r.snap?a=a.set(ln(),!0):Ei(r.children,l=>{a=a.set(new _n(l),!0)}),_v(n,new XA(r.path,a,t))}return[]}function XE(n,e,t){return _v(n,new Cg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function uM(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const v=ah(f,gs(l,e));if(v)return v});return rj(i,e,a,t,!0)}function _v(n,e){return Ij(e,n.syncPointTree_,null,nM(n.pendingWriteTree_,ln()))}function Ij(n,e,t,r){if(Ht(n.path))return Ej(n,e,t,r);{const i=e.get(ln());null==t&&null!=i&&(t=ah(i,ln()));let a=[];const l=$t(n.path),f=n.operationForChild(l),g=e.children.get(l);if(g&&f){const v=t?t.getImmediateChild(l):null,E=sj(r,l);a=a.concat(Ij(f,g,v,E))}return i&&(a=a.concat(mF(i,n,r,t))),a}}function Ej(n,e,t,r){const i=e.get(ln());null==t&&null!=i&&(t=ah(i,ln()));let a=[];return e.children.inorderTraversal((l,f)=>{const g=t?t.getImmediateChild(l):null,v=sj(r,l),E=n.operationForChild(l);E&&(a=a.concat(Ej(E,f,g,v)))}),i&&(a=a.concat(mF(i,n,r,t))),a}function vF(n,e){return n.tagToQueryMap.get(e)}function CF(n){const e=n.indexOf("$");return(0,z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new _n(n.substr(0,e))}}function wF(n,e,t){const r=n.syncPointTree_.get(e);return(0,z.hu)(r,"Missing sync point for query tag that we're tracking"),mF(r,t,nM(n.pendingWriteTree_,e),null)}class IF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new IF(t)}node(){return this.node_}}class EF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=nr(this.path_,e);return new EF(this.syncTree_,t)}node(){return uM(this.syncTree_,this.path_)}}const Ite=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Tj=function(n,e,t){return n&&"object"==typeof n?((0,z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ete(n[".sv"],e,t):"object"==typeof n[".sv"]?bte(n[".sv"],e):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ete=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,z.hu)(!1,"Unexpected server value: "+n)},bte=function(n,e,t){n.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,z.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},Dj=function(n,e,t,r){return TF(e,new EF(t,n),r)},bF=function(n,e,t){return TF(n,new IF(e),t)};function TF(n,e,t){const r=n.getPriority().val(),i=Tj(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=Tj(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new dv(f,dr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new dv(i))),l.forEachChild(Vn,(f,g)=>{const v=TF(g,e.getImmediateChild(f),t);v!==g&&(a=a.updateImmediateChild(f,v))}),a}}class DF{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function hM(n,e){let t=e instanceof _n?e:new _n(e),r=n,i=$t(t);for(;null!==i;){const a=(0,z.DV)(r.node.children,i)||{children:{},childCount:0};r=new DF(i,r,a),t=An(t),i=$t(t)}return r}function Eg(n){return n.node.value}function SF(n,e){n.node.value=e,AF(n)}function Sj(n){return n.node.childCount>0}function fM(n,e){Ei(n.node.children,(t,r)=>{e(new DF(t,n,r))})}function Aj(n,e,t,r){t&&!r&&e(n),fM(n,i=>{Aj(i,e,!0,r)}),t&&r&&e(n)}function nb(n){return new _n(null===n.parent?n.name:nb(n.parent)+"/"+n.name)}function AF(n){null!==n.parent&&function Ste(n,e,t){const r=function Tte(n){return void 0===Eg(n)&&!Sj(n)}(t),i=(0,z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,AF(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,AF(n))}(n.parent,n.name,n)}const Ate=/[\[\].#$\/\u0000-\u001F\u007F]/,Mte=/[\[\].#$\u0000-\u001F\u007F]/,MF=10485760,pM=function(n){return"string"==typeof n&&0!==n.length&&!Ate.test(n)},ib=function(n,e,t){const r=t instanceof _n?new WX(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+yg(r));if("function"==typeof e)throw new Error(n+"contains a function "+yg(r)+" with contents = "+e.toString());if($A(e))throw new Error(n+"contains "+e.toString()+" "+yg(r));if("string"==typeof e&&e.length>MF/3&&(0,z.ug)(e)>MF)throw new Error(n+"contains a string greater than "+MF+" utf8 bytes "+yg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ei(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!pM(l)))throw new Error(n+" contains an invalid key ("+l+") "+yg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function qX(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,z.ug)(e),VB(n)})(r,l),ib(n,f,r),function ZX(n){const e=n.parts_.pop();n.byteLength_-=(0,z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+yg(r)+" in addition to actual children.")}},Pj=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!pM(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!Mte.test(n)}(n)}(t))throw new Error((0,z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Nte{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yo(n,e,t){(function gM(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!G2(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function Nj(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Rte(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>ta(r,e)||ta(e,r))}function Rte(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();mg&&Ii("event: "+t.toString()),lv(r)}}}const kte=25;class Fte{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nte,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=JA(),this.transactionQueueTree_=new DF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kj(n){const t=n.infoData_.getNode(new _n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ob(n){return Ite({timestamp:kj(n)})}function Fj(n,e,t,r,i){n.dataUpdateCount++;const a=new _n(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,z.UI)(t,v=>dr(v));l=function mte(n,e,t,r){const i=vF(n,r);if(i){const a=CF(i),l=a.path,f=a.queryId,g=gs(l,e),v=Bn.fromObject(t);return wF(n,l,new gv(oF(f),g,v))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=dr(t);l=function wj(n,e,t,r){const i=vF(n,r);if(null!=i){const a=CF(i),l=a.path,f=a.queryId,g=gs(l,e);return wF(n,l,new Cg(oF(f),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,z.UI)(t,v=>dr(v));l=function fte(n,e,t){const r=Bn.fromObject(t);return _v(n,new gv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=dr(t);l=XE(n.serverSyncTree_,a,g)}let f=a;l.length>0&&(f=vv(n,a)),yo(n.eventQueue_,f,l)}function Lj(n,e){OF(n,"connected",e),!1===e&&function jte(n){yv(n,"onDisconnectEvents");const e=ob(n),t=JA();rF(n.onDisconnect_,ln(),(i,a)=>{const l=Dj(i,a,n.serverSyncTree_,e);pv(t,i,l)});let r=[];rF(t,ln(),(i,a)=>{r=r.concat(XE(n.serverSyncTree_,i,a));const l=function FF(n,e){const t=nb(Bj(n,e)),r=hM(n.transactionQueueTree_,e);return function Dte(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{LF(n,i)}),LF(n,r),Aj(r,i=>{LF(n,i)}),t}(n,i);vv(n,l)}),n.onDisconnect_=JA(),yo(n.eventQueue_,ln(),r)}(n)}function OF(n,e,t){const r=new _n("/.info/"+e),i=dr(t);n.infoData_.updateSnapshot(r,i);const a=XE(n.infoSyncTree_,r,i);yo(n.eventQueue_,r,a)}function mM(n){return n.nextWriteId_++}function yv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ii(t,...e)}function kF(n,e,t){return uM(n.serverSyncTree_,e,t)||Ot.EMPTY_NODE}function _M(n,e=n.transactionQueueTree_){if(e||yM(n,e),Eg(e)){const t=jj(n,e);(0,z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Zte(n,e,t){const r=t.map(v=>v.currentWriteId),i=kF(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const E=t[v];(0,z.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=gs(e,E.path);a=a.updateChild(T,E.currentOutputSnapshotRaw)}const f=a.val(!0),g=e;n.server_.put(g.toString(),f,v=>{yv(n,"transaction put response",{path:g.toString(),status:v});let E=[];if("ok"===v){const T=[];for(let A=0;A<t.length;A++)t[A].status=2,E=E.concat(lh(n.serverSyncTree_,t[A].currentWriteId)),t[A].onComplete&&T.push(()=>t[A].onComplete(null,!0,t[A].currentOutputSnapshotResolved)),t[A].unwatcher();yM(n,hM(n.transactionQueueTree_,e)),_M(n,n.transactionQueueTree_),yo(n.eventQueue_,e,E);for(let A=0;A<T.length;A++)lv(T[A])}else{if("datastale"===v)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{ns("transaction at "+g.toString()+" failed: "+v);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=v}vv(n,e)}},l)}(n,nb(e),t)}else Sj(e)&&fM(e,t=>{_M(n,t)})}function vv(n,e){const t=Bj(n,e),r=nb(t);return function Kte(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const g=e[f],v=gs(t,g.path);let T,E=!1;if((0,z.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)E=!0,T=g.abortReason,i=i.concat(lh(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=kte)E=!0,T="maxretry",i=i.concat(lh(n.serverSyncTree_,g.currentWriteId,!0));else{const A=kF(n,g.path,l);g.currentInputSnapshot=A;const R=e[f].update(A.val());if(void 0!==R){ib("transaction failed: Data returned ",R,g.path);let W=dr(R);"object"==typeof R&&null!=R&&(0,z.r3)(R,".priority")||(W=W.updatePriority(A.getPriority()));const J=g.currentWriteId,be=ob(n),ze=bF(W,A,be);g.currentOutputSnapshotRaw=W,g.currentOutputSnapshotResolved=ze,g.currentWriteId=mM(n),l.splice(l.indexOf(J),1),i=i.concat(_F(n.serverSyncTree_,g.path,ze,g.currentWriteId,g.applyLocally)),i=i.concat(lh(n.serverSyncTree_,J,!0))}else E=!0,T="nodata",i=i.concat(lh(n.serverSyncTree_,g.currentWriteId,!0))}yo(n.eventQueue_,t,i),i=[],E&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===T?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(T),!1,null)))}yM(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)lv(r[f]);_M(n,n.transactionQueueTree_)}(n,jj(n,t),r),r}function Bj(n,e){let t,r=n.transactionQueueTree_;for(t=$t(e);null!==t&&void 0===Eg(r);)r=hM(r,t),t=$t(e=An(e));return r}function jj(n,e){const t=[];return $j(n,e,t),t.sort((r,i)=>r.order-i.order),t}function $j(n,e,t){const r=Eg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);fM(e,i=>{$j(n,i,t)})}function yM(n,e){const t=Eg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,SF(e,t.length>0?t:void 0)}fM(e,r=>{yM(n,r)})}function LF(n,e){const t=Eg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,z.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,z.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(lh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?SF(e,void 0):t.length=a+1,yo(n.eventQueue_,nb(e),i);for(let l=0;l<r.length;l++)lv(r[l])}}const UF=function(n,e){const t=Jte(n),r=t.namespace;return"firebase.com"===t.domain&&Ac(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ac("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ns("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new U2(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new _n(t.pathString)}},Jte=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let E=n.indexOf("/");-1===E&&(E=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(E,T)),E<T&&(i=function Yte(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(E,T)));const A=function Qte(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ns(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));v=e.indexOf(":"),v>=0?(l="https"===f||"wss"===f,g=parseInt(e.substring(v+1),10)):v=e.length;const R=e.slice(0,v);if("localhost"===R.toLowerCase())t="localhost";else if(R.split(".").length<=2)t=R;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),a=r}"ns"in A&&(a=A.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}};class vo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ht(this._path)?null:z2(this._path)}get ref(){return new Fa(this._repo,this._path)}get _queryIdentifier(){const e=YB(this._queryParams),t=F2(e);return"{}"===t?"default":t}get _queryObject(){return YB(this._queryParams)}isEqual(e){if(!((e=(0,z.m9)(e))instanceof vo))return!1;const t=this._repo===e._repo,r=G2(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function zX(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Fa extends vo{constructor(e,t){super(e,t,new X2,!1)}get parent(){const e=UB(this._path);return null===e?null:new Fa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function ite(n){(0,z.hu)(!oM,"__referenceConstructor has already been defined"),oM=n})(Fa),function lte(n){(0,z.hu)(!cM,"__referenceConstructor has already been defined"),cM=n}(Fa);const BF={};class yne{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Lte(n,e,t){if(n.stats_=j2(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new QA(n.repoInfo_,(r,i,a,l)=>{Fj(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Lj(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new vg(n.repoInfo_,e,(r,i,a,l)=>{Fj(n,r,i,a,l)},r=>{Lj(n,r)},r=>{!function Ute(n,e){Ei(e,(t,r)=>{OF(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function IX(n,e){const t=n.toString();return B2[t]||(B2[t]=e()),B2[t]}(n.repoInfo_,()=>new Iee(n.stats_,n.server_)),n.infoData_=new _ee,n.infoSyncTree_=new Cj({startListening:(r,i,a,l)=>{let f=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(f=XE(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),OF(n,"connected",!1),n.serverSyncTree_=new Cj({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,g)=>{const v=l(f,g);yo(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fa(this._repo,ln())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function gne(n,e){const t=BF[e];(!t||t[n.key]!==n)&&Ac(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Vj(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ac("Cannot call "+e+" on a deleted database.")}}function vne(n=(0,bn.getApp)(),e){const t=(0,bn._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,z.P0)("database");r&&function Cne(n,e,t,r={}){(n=(0,z.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ac("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ac('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new jE(jE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,z.Sg)(r.mockUserToken,n.app.options.projectId);a=new jE(l)}!function fne(n,e,t,r){n.repoInfo_=new U2(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r)}return t}vg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},vg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function wne(n){(function sX(n){N2=n})(bn.SDK_VERSION),(0,bn._registerComponent)(new _r.wA("database",(e,{instanceIdentifier:t})=>function pne(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ac("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ii("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,l=UF(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,a=`http://${v}?ns=${f.namespace}`,l=UF(a,i),f=l.repoInfo):g=!l.repoInfo.secure;const E=i&&g?new jE(jE.OWNER):new vX(n.name,n.options,e);Pj("Invalid Firebase Database URL",l),Ht(l.path)||Ac("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function mne(n,e,t,r){let i=BF[e.name];i||(i={},BF[e.name]=i);let a=i[n.toURLString()];return a&&Ac("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Fte(n,!1,t,r),i[n.toURLString()]=a,a}(f,n,E,new yX(n.name,t));return new yne(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,bn.registerVersion)(eB,"0.14.4",n),(0,bn.registerVersion)(eB,"0.14.4","esm2017")}();class jF{constructor(e){return e}}const Qj="database",$F=new u.OlP("angularfire2.database-instances");function Dne(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new jF(r)}}const Sne={provide:class bne{constructor(){return Ps(Qj)}},deps:[[new u.FiY,$F]]},Ane={provide:jF,useFactory:function Tne(n,e){const t=Ol(Qj,n,e);return t&&new jF(t)},deps:[[new u.FiY,$F],nu]};let Mne=(()=>{class n{constructor(){(0,bn.registerVersion)("angularfire",Pl.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Ane,Sne]}),n})();function xne(n,...e){return{ngModule:Mne,providers:[{provide:$F,useFactory:Dne(n),multi:!0,deps:[u.R0b,u.zs3,Nl,Ky,[new u.FiY,jA],[new u.FiY,sg],...e]}]}}const Pne=Ed(vne,!0);class HF{constructor(e){return e}}const Jj="messaging",zF=new u.OlP("angularfire2.messaging-instances");function Rne(n){return(e,t)=>{if(!op.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new HF(r)}}const kne={provide:class One{constructor(){return Ps(Jj)}},deps:[[new u.FiY,zF]]},Fne={provide:HF,useFactory:function Nne(n,e){if(!op.sync())return null;const t=Ol(Jj,n,e);return t&&new HF(t)},deps:[[new u.FiY,zF],nu]};let Lne=(()=>{class n{constructor(){(0,bn.registerVersion)("angularfire",Pl.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Fne,kne,{provide:u.ip1,useValue:op.async,multi:!0}]}),n})();function Une(n,...e){return{ngModule:Lne,providers:[{provide:zF,useFactory:Rne(n),multi:!0,deps:[u.R0b,u.zs3,Nl,Ky,...e]}]}}const Vne=Ed(S1,!0),Xj="firebasestorage.googleapis.com";class hr extends z.ZR{constructor(e,t,r=0){super(GF(e),`Firebase Storage: ${t} (${GF(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return GF(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var rr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(rr||{});function GF(n){return"storage/"+n}function qF(n){return new hr(rr.INVALID_ARGUMENT,n)}function i9(){return new hr(rr.APP_DELETED,"The Firebase app was deleted.")}class ms{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ms.makeFromUrl(e,t)}catch{return new ms(e,"")}if(""===r.path)return r;throw function Kne(n){return new hr(rr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Ye){Ye.path_=decodeURIComponent(Ye.path)}const T=t.replace(/[.]/g,"\\."),Re=[{regex:f,indices:{bucket:1,path:3},postModify:function a(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===Xj?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Ye=0;Ye<Re.length;Ye++){const gt=Re[Ye],Mt=gt.regex.exec(e);if(Mt){let Us=Mt[gt.indices.path];Us||(Us=""),r=new ms(Mt[gt.indices.bucket],Us),gt.postModify(r);break}}if(null==r)throw function Zne(n){return new hr(rr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class tre{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function KF(n,e,t,r){if(r<e)throw qF(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw qF(`Invalid value for '${n}'. Expected ${t} or less.`)}var wv=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(wv||{});class are{constructor(e,t,r,i,a,l,f,g,v,E,T,A=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=E,this.connectionFactory_=T,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,W)=>{this.resolve_=R,this.reject_=W,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());!function ire(n){return void 0!==n}(g)?a():a(g)}catch(g){l(g)}else if(null!==f){const g=function WF(){return new hr(rr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();g.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,g):g)}else l(i.canceled?this.appDelete_?i9():function n9(){return new hr(rr.CANCELED,"User canceled the upload/download.")}():function t9(){return new hr(rr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new EM(!1,null,!0)):this.backoffId_=function nre(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function g(){return 2===f}let v=!1;function E(...J){v||(v=!0,e.apply(null,J))}function T(J){i=setTimeout(()=>{i=null,n(R,g())},J)}function A(){a&&clearTimeout(a)}function R(J,...be){if(v)return void A();if(J)return A(),void E.call(null,J,...be);if(g()||l)return A(),void E.call(null,J,...be);let Re;r<64&&(r*=2),1===f?(f=2,Re=0):Re=1e3*(r+Math.random()),T(Re)}let W=!1;function Q(J){W||(W=!0,A(),!v&&(null!==i?(J||(f=2),clearTimeout(i),T(0)):J||(f=1)))}return T(0),a=setTimeout(()=>{l=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new EM(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===wv.NO_ERROR,g=a.getStatus();if(!f||function a9(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}(g,this.additionalRetryCodes_)&&this.retry){const E=a.getErrorCode()===wv.ABORT;return void r(!1,new EM(!1,null,E))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new EM(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function rre(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class EM{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Tg{constructor(e,t){this._service=e,this._location=t instanceof ms?t:ms.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Tg(e,t)}get root(){const e=new ms(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function h9(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function wre(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ms(this._location.bucket,e);return new Tg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function ere(n){return new hr(rr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function S9(n,e){const t=e?.storageBucket;return null==t?null:ms.makeFromBucketSpec(t,n)}class nL{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Xj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ms.makeFromBucketSpec(i,this._host):S9(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ms.makeFromBucketSpec(this._url,e):S9(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,V.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,V.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new tre(i9());{const l=function hre(n,e,t,r,i,a,l=!0){const f=function o9(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),g=n.url+f,v=Object.assign({},n.headers);return function ure(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function cre(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function lre(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function dre(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new are(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,V.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const A9="@firebase/storage",x9="storage";function oie(n=Mf(),e){const r=yl(n=(0,z.m9)(n),x9).getImmediate({identifier:e}),i=(0,z.P0)("storage");return i&&function aie(n,e,t,r={}){!function sie(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,z.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function cie(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new nL(t,r,i,e,"10.5.0")}!function lie(){Ki(new _r.wA(x9,cie,"PUBLIC").setMultipleInstances(!0)),Oi(A9,"0.11.2",""),Oi(A9,"0.11.2","esm2017")}();class rL{constructor(e){return e}}const P9="storage",iL=new u.OlP("angularfire2.storage-instances");function hie(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new rL(r)}}const fie={provide:class uie{constructor(){return Ps(P9)}},deps:[[new u.FiY,iL]]},pie={provide:rL,useFactory:function die(n,e){const t=Ol(P9,n,e);return t&&new rL(t)},deps:[[new u.FiY,iL],nu]};let gie=(()=>{class n{constructor(){(0,bn.registerVersion)("angularfire",Pl.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[pie,fie]}),n})();function mie(n,...e){return{ngModule:gie,providers:[{provide:iL,useFactory:hie(n),multi:!0,deps:[u.R0b,u.zs3,Nl,Ky,[new u.FiY,jA],[new u.FiY,sg],...e]}]}}const _ie=Ed(oie,!0),sL={firebase:{projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",databaseURL:"https://instagram-clone-gilshaashua-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"instagram-clone-gilshaashua.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"}};Oi("firebase","10.5.0","app"),bT(sL.firebase);let Cie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n,bootstrap:[fJ]});static#n=this.\u0275inj=u.cJS({providers:[{provide:Yi.Dh,useValue:sL.firebase}],imports:[qc,LQ,UJ,GY,WY,uH(()=>dH(sL.firebase)),KJ(()=>YJ()),rX(()=>iX()),mie(()=>_ie()),xne(()=>Pne()),Une(()=>Vne())]})}return n})();Wg().bootstrapModule(Cie).catch(n=>console.error(n))},5619:(st,Ee,F)=>{F.d(Ee,{X:()=>B});var u=F(8645);class B extends u.x{constructor(ne){super(),this._value=ne}get value(){return this.getValue()}_subscribe(ne){const ge=super._subscribe(ne);return!ge.closed&&ne.next(this._value),ge}getValue(){const{hasError:ne,thrownError:ge,_value:Ie}=this;if(ne)throw ge;return this._throwIfClosed(),Ie}next(ne){super.next(this._value=ne)}}},5592:(st,Ee,F)=>{F.d(Ee,{y:()=>Fe});var u=F(305),B=F(7394),L=F(4850),ne=F(8407),ge=F(2653),Ie=F(4674),Pe=F(1441);let Fe=(()=>{class X{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const Je=new X;return Je.source=this,Je.operator=xe,Je}subscribe(xe,Je,Ce){const Ae=function G(X){return X&&X instanceof u.Lv||function U(X){return X&&(0,Ie.m)(X.next)&&(0,Ie.m)(X.error)&&(0,Ie.m)(X.complete)}(X)&&(0,B.Nn)(X)}(xe)?xe:new u.Hp(xe,Je,Ce);return(0,Pe.x)(()=>{const{operator:Te,source:tt}=this;Ae.add(Te?Te.call(Ae,tt):tt?this._subscribe(Ae):this._trySubscribe(Ae))}),Ae}_trySubscribe(xe){try{return this._subscribe(xe)}catch(Je){xe.error(Je)}}forEach(xe,Je){return new(Je=De(Je))((Ce,Ae)=>{const Te=new u.Hp({next:tt=>{try{xe(tt)}catch(ot){Ae(ot),Te.unsubscribe()}},error:Ae,complete:Ce});this.subscribe(Te)})}_subscribe(xe){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(xe)}[L.L](){return this}pipe(...xe){return(0,ne.U)(xe)(this)}toPromise(xe){return new(xe=De(xe))((Je,Ce)=>{let Ae;this.subscribe(Te=>Ae=Te,Te=>Ce(Te),()=>Je(Ae))})}}return X.create=Oe=>new X(Oe),X})();function De(X){var Oe;return null!==(Oe=X??ge.config.Promise)&&void 0!==Oe?Oe:Promise}},8645:(st,Ee,F)=>{F.d(Ee,{x:()=>Pe});var u=F(5592),B=F(7394);const ne=(0,F(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=F(9039),Ie=F(1441);let Pe=(()=>{class De extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new Fe(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new ne}next(G){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(G)}})}error(G){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:Oe,observers:xe}=this;return X||Oe?B.Lc:(this.currentObservers=null,xe.push(G),new B.w0(()=>{this.currentObservers=null,(0,ge.P)(xe,G)}))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:Oe,isStopped:xe}=this;X?G.error(Oe):xe&&G.complete()}asObservable(){const G=new u.y;return G.source=this,G}}return De.create=(U,G)=>new Fe(U,G),De})();class Fe extends Pe{constructor(U,G){super(),this.destination=U,this.source=G}next(U){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,U)}error(U){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,U)}complete(){var U,G;null===(G=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===G||G.call(U)}_subscribe(U){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(U))&&void 0!==X?X:B.Lc}}},305:(st,Ee,F)=>{F.d(Ee,{Hp:()=>Ce,Lv:()=>X});var u=F(4674),B=F(7394),L=F(2653),ne=F(3894),ge=F(2420);const Ie=De("C",void 0,void 0);function De(ee,de,re){return{kind:ee,value:de,error:re}}var U=F(7599),G=F(1441);class X extends B.w0{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,B.Nn)(de)&&de.add(this)):this.destination=ot}static create(de,re,he){return new Ce(de,re,he)}next(de){this.isStopped?tt(function Fe(ee){return De("N",ee,void 0)}(de),this):this._next(de)}error(de){this.isStopped?tt(function Pe(ee){return De("E",void 0,ee)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?tt(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function xe(ee,de){return Oe.call(ee,de)}class Je{constructor(de){this.partialObserver=de}next(de){const{partialObserver:re}=this;if(re.next)try{re.next(de)}catch(he){Ae(he)}}error(de){const{partialObserver:re}=this;if(re.error)try{re.error(de)}catch(he){Ae(he)}else Ae(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(re){Ae(re)}}}class Ce extends X{constructor(de,re,he){let ke;if(super(),(0,u.m)(de)||!de)ke={next:de??void 0,error:re??void 0,complete:he??void 0};else{let j;this&&L.config.useDeprecatedNextContext?(j=Object.create(de),j.unsubscribe=()=>this.unsubscribe(),ke={next:de.next&&xe(de.next,j),error:de.error&&xe(de.error,j),complete:de.complete&&xe(de.complete,j)}):ke=de}this.destination=new Je(ke)}}function Ae(ee){L.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(ee):(0,ne.h)(ee)}function tt(ee,de){const{onStoppedNotification:re}=L.config;re&&U.z.setTimeout(()=>re(ee,de))}const ot={closed:!0,next:ge.Z,error:function Te(ee){throw ee},complete:ge.Z}},7394:(st,Ee,F)=>{F.d(Ee,{Lc:()=>Ie,w0:()=>ge,Nn:()=>Pe});var u=F(4674);const L=(0,F(2306).d)(De=>function(G){De(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,Oe)=>`${Oe+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ne=F(9039);class ge{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const xe of G)xe.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,u.m)(X))try{X()}catch(xe){U=xe instanceof L?xe.errors:[xe]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const xe of Oe)try{Fe(xe)}catch(Je){U=U??[],Je instanceof L?U=[...U,...Je.errors]:U.push(Je)}}if(U)throw new L(U)}}add(U){var G;if(U&&U!==this)if(this.closed)Fe(U);else{if(U instanceof ge){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(U)}}_hasParent(U){const{_parentage:G}=this;return G===U||Array.isArray(G)&&G.includes(U)}_addParent(U){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(U),G):G?[G,U]:U}_removeParent(U){const{_parentage:G}=this;G===U?this._parentage=null:Array.isArray(G)&&(0,ne.P)(G,U)}remove(U){const{_finalizers:G}=this;G&&(0,ne.P)(G,U),U instanceof ge&&U._removeParent(this)}}ge.EMPTY=(()=>{const De=new ge;return De.closed=!0,De})();const Ie=ge.EMPTY;function Pe(De){return De instanceof ge||De&&"closed"in De&&(0,u.m)(De.remove)&&(0,u.m)(De.add)&&(0,u.m)(De.unsubscribe)}function Fe(De){(0,u.m)(De)?De():De.unsubscribe()}},2653:(st,Ee,F)=>{F.d(Ee,{config:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(st,Ee,F)=>{F.d(Ee,{E:()=>B});const B=new(F(5592).y)(ge=>ge.complete())},2459:(st,Ee,F)=>{F.d(Ee,{D:()=>de});var u=F(4829),B=F(3093),L=F(5137),Ie=F(5592),Fe=F(4971),De=F(4674),U=F(7103);function X(re,he){if(!re)throw new Error("Iterable cannot be null");return new Ie.y(ke=>{(0,U.f)(ke,he,()=>{const j=re[Symbol.asyncIterator]();(0,U.f)(ke,he,()=>{j.next().then(we=>{we.done?ke.complete():ke.next(we.value)})},0,!0)})})}var Oe=F(8382),xe=F(4026),Je=F(4266),Ce=F(3664),Ae=F(5726),Te=F(9853),tt=F(541);function de(re,he){return he?function ee(re,he){if(null!=re){if((0,Oe.c)(re))return function ne(re,he){return(0,u.Xf)(re).pipe((0,L.R)(he),(0,B.Q)(he))}(re,he);if((0,Je.z)(re))return function Pe(re,he){return new Ie.y(ke=>{let j=0;return he.schedule(function(){j===re.length?ke.complete():(ke.next(re[j++]),ke.closed||this.schedule())})})}(re,he);if((0,xe.t)(re))return function ge(re,he){return(0,u.Xf)(re).pipe((0,L.R)(he),(0,B.Q)(he))}(re,he);if((0,Ae.D)(re))return X(re,he);if((0,Ce.T)(re))return function G(re,he){return new Ie.y(ke=>{let j;return(0,U.f)(ke,he,()=>{j=re[Fe.h](),(0,U.f)(ke,he,()=>{let we,Ue;try{({value:we,done:Ue}=j.next())}catch(lt){return void ke.error(lt)}Ue?ke.complete():ke.next(we)},0,!0)}),()=>(0,De.m)(j?.return)&&j.return()})}(re,he);if((0,tt.L)(re))return function ot(re,he){return X((0,tt.Q)(re),he)}(re,he)}throw(0,Te.z)(re)}(re,he):(0,u.Xf)(re)}},4829:(st,Ee,F)=>{F.d(Ee,{Xf:()=>Oe});var u=F(7582),B=F(4266),L=F(4026),ne=F(5592),ge=F(8382),Ie=F(5726),Pe=F(9853),Fe=F(3664),De=F(541),U=F(4674),G=F(3894),X=F(4850);function Oe(ee){if(ee instanceof ne.y)return ee;if(null!=ee){if((0,ge.c)(ee))return function xe(ee){return new ne.y(de=>{const re=ee[X.L]();if((0,U.m)(re.subscribe))return re.subscribe(de);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,B.z)(ee))return function Je(ee){return new ne.y(de=>{for(let re=0;re<ee.length&&!de.closed;re++)de.next(ee[re]);de.complete()})}(ee);if((0,L.t)(ee))return function Ce(ee){return new ne.y(de=>{ee.then(re=>{de.closed||(de.next(re),de.complete())},re=>de.error(re)).then(null,G.h)})}(ee);if((0,Ie.D)(ee))return Te(ee);if((0,Fe.T)(ee))return function Ae(ee){return new ne.y(de=>{for(const re of ee)if(de.next(re),de.closed)return;de.complete()})}(ee);if((0,De.L)(ee))return function tt(ee){return Te((0,De.Q)(ee))}(ee)}throw(0,Pe.z)(ee)}function Te(ee){return new ne.y(de=>{(function ot(ee,de){var re,he,ke,j;return(0,u.mG)(this,void 0,void 0,function*(){try{for(re=(0,u.KL)(ee);!(he=yield re.next()).done;)if(de.next(he.value),de.closed)return}catch(we){ke={error:we}}finally{try{he&&!he.done&&(j=re.return)&&(yield j.call(re))}finally{if(ke)throw ke.error}}de.complete()})})(ee,de).catch(re=>de.error(re))})}},3019:(st,Ee,F)=>{F.d(Ee,{T:()=>Ie});var u=F(7537),B=F(4829),L=F(6232),ne=F(4564),ge=F(2459);function Ie(...Pe){const Fe=(0,ne.yG)(Pe),De=(0,ne._6)(Pe,1/0),U=Pe;return U.length?1===U.length?(0,B.Xf)(U[0]):(0,u.J)(De)((0,ge.D)(U,Fe)):L.E}},2096:(st,Ee,F)=>{F.d(Ee,{of:()=>L});var u=F(4564),B=F(2459);function L(...ne){const ge=(0,u.yG)(ne);return(0,B.D)(ne,ge)}},8251:(st,Ee,F)=>{F.d(Ee,{x:()=>B});var u=F(305);function B(ne,ge,Ie,Pe,Fe){return new L(ne,ge,Ie,Pe,Fe)}class L extends u.Lv{constructor(ge,Ie,Pe,Fe,De,U){super(ge),this.onFinalize=De,this.shouldUnsubscribe=U,this._next=Ie?function(G){try{Ie(G)}catch(X){ge.error(X)}}:super._next,this._error=Fe?function(G){try{Fe(G)}catch(X){ge.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(G){ge.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},3997:(st,Ee,F)=>{F.d(Ee,{x:()=>ne});var u=F(2737),B=F(9360),L=F(8251);function ne(Ie,Pe=u.y){return Ie=Ie??ge,(0,B.e)((Fe,De)=>{let U,G=!0;Fe.subscribe((0,L.x)(De,X=>{const Oe=Pe(X);(G||!Ie(U,Oe))&&(G=!1,U=Oe,De.next(X))}))})}function ge(Ie,Pe){return Ie===Pe}},7398:(st,Ee,F)=>{F.d(Ee,{U:()=>L});var u=F(9360),B=F(8251);function L(ne,ge){return(0,u.e)((Ie,Pe)=>{let Fe=0;Ie.subscribe((0,B.x)(Pe,De=>{Pe.next(ne.call(ge,De,Fe++))}))})}},7537:(st,Ee,F)=>{F.d(Ee,{J:()=>L});var u=F(1631),B=F(2737);function L(ne=1/0){return(0,u.z)(B.y,ne)}},1631:(st,Ee,F)=>{F.d(Ee,{z:()=>Fe});var u=F(7398),B=F(4829),L=F(9360),ne=F(7103),ge=F(8251),Pe=F(4674);function Fe(De,U,G=1/0){return(0,Pe.m)(U)?Fe((X,Oe)=>(0,u.U)((xe,Je)=>U(X,xe,Oe,Je))((0,B.Xf)(De(X,Oe))),G):("number"==typeof U&&(G=U),(0,L.e)((X,Oe)=>function Ie(De,U,G,X,Oe,xe,Je,Ce){const Ae=[];let Te=0,tt=0,ot=!1;const ee=()=>{ot&&!Ae.length&&!Te&&U.complete()},de=he=>Te<X?re(he):Ae.push(he),re=he=>{xe&&U.next(he),Te++;let ke=!1;(0,B.Xf)(G(he,tt++)).subscribe((0,ge.x)(U,j=>{Oe?.(j),xe?de(j):U.next(j)},()=>{ke=!0},void 0,()=>{if(ke)try{for(Te--;Ae.length&&Te<X;){const j=Ae.shift();Je?(0,ne.f)(U,Je,()=>re(j)):re(j)}ee()}catch(j){U.error(j)}}))};return De.subscribe((0,ge.x)(U,de,()=>{ot=!0,ee()})),()=>{Ce?.()}}(X,Oe,De,G)))}},3093:(st,Ee,F)=>{F.d(Ee,{Q:()=>ne});var u=F(7103),B=F(9360),L=F(8251);function ne(ge,Ie=0){return(0,B.e)((Pe,Fe)=>{Pe.subscribe((0,L.x)(Fe,De=>(0,u.f)(Fe,ge,()=>Fe.next(De),Ie),()=>(0,u.f)(Fe,ge,()=>Fe.complete(),Ie),De=>(0,u.f)(Fe,ge,()=>Fe.error(De),Ie)))})}},3020:(st,Ee,F)=>{F.d(Ee,{B:()=>ge});var u=F(4829),B=F(8645),L=F(305),ne=F(9360);function ge(Pe={}){const{connector:Fe=(()=>new B.x),resetOnError:De=!0,resetOnComplete:U=!0,resetOnRefCountZero:G=!0}=Pe;return X=>{let Oe,xe,Je,Ce=0,Ae=!1,Te=!1;const tt=()=>{xe?.unsubscribe(),xe=void 0},ot=()=>{tt(),Oe=Je=void 0,Ae=Te=!1},ee=()=>{const de=Oe;ot(),de?.unsubscribe()};return(0,ne.e)((de,re)=>{Ce++,!Te&&!Ae&&tt();const he=Je=Je??Fe();re.add(()=>{Ce--,0===Ce&&!Te&&!Ae&&(xe=Ie(ee,G))}),he.subscribe(re),!Oe&&Ce>0&&(Oe=new L.Hp({next:ke=>he.next(ke),error:ke=>{Te=!0,tt(),xe=Ie(ot,De,ke),he.error(ke)},complete:()=>{Ae=!0,tt(),xe=Ie(ot,U),he.complete()}}),(0,u.Xf)(de).subscribe(Oe))})(X)}}function Ie(Pe,Fe,...De){if(!0===Fe)return void Pe();if(!1===Fe)return;const U=new L.Hp({next:()=>{U.unsubscribe(),Pe()}});return(0,u.Xf)(Fe(...De)).subscribe(U)}},5137:(st,Ee,F)=>{F.d(Ee,{R:()=>B});var u=F(9360);function B(L,ne=0){return(0,u.e)((ge,Ie)=>{Ie.add(L.schedule(()=>ge.subscribe(Ie),ne))})}},4664:(st,Ee,F)=>{F.d(Ee,{w:()=>ne});var u=F(4829),B=F(9360),L=F(8251);function ne(ge,Ie){return(0,B.e)((Pe,Fe)=>{let De=null,U=0,G=!1;const X=()=>G&&!De&&Fe.complete();Pe.subscribe((0,L.x)(Fe,Oe=>{De?.unsubscribe();let xe=0;const Je=U++;(0,u.Xf)(ge(Oe,Je)).subscribe(De=(0,L.x)(Fe,Ce=>Fe.next(Ie?Ie(Oe,Ce,Je,xe++):Ce),()=>{De=null,X()}))},()=>{G=!0,X()}))})}},7599:(st,Ee,F)=>{F.d(Ee,{z:()=>u});const u={setTimeout(B,L,...ne){const{delegate:ge}=u;return ge?.setTimeout?ge.setTimeout(B,L,...ne):setTimeout(B,L,...ne)},clearTimeout(B){const{delegate:L}=u;return(L?.clearTimeout||clearTimeout)(B)},delegate:void 0}},4971:(st,Ee,F)=>{F.d(Ee,{h:()=>B});const B=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(st,Ee,F)=>{F.d(Ee,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(st,Ee,F)=>{F.d(Ee,{_6:()=>Ie,jO:()=>ne,yG:()=>ge});var u=F(4674);function L(Pe){return Pe[Pe.length-1]}function ne(Pe){return(0,u.m)(L(Pe))?Pe.pop():void 0}function ge(Pe){return function B(Pe){return Pe&&(0,u.m)(Pe.schedule)}(L(Pe))?Pe.pop():void 0}function Ie(Pe,Fe){return"number"==typeof L(Pe)?Pe.pop():Fe}},9039:(st,Ee,F)=>{function u(B,L){if(B){const ne=B.indexOf(L);0<=ne&&B.splice(ne,1)}}F.d(Ee,{P:()=>u})},2306:(st,Ee,F)=>{function u(B){const ne=B(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}F.d(Ee,{d:()=>u})},1441:(st,Ee,F)=>{F.d(Ee,{O:()=>ne,x:()=>L});var u=F(2653);let B=null;function L(ge){if(u.config.useDeprecatedSynchronousErrorHandling){const Ie=!B;if(Ie&&(B={errorThrown:!1,error:null}),ge(),Ie){const{errorThrown:Pe,error:Fe}=B;if(B=null,Pe)throw Fe}}else ge()}function ne(ge){u.config.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=ge)}},7103:(st,Ee,F)=>{function u(B,L,ne,ge=0,Ie=!1){const Pe=L.schedule(function(){ne(),Ie?B.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(B.add(Pe),!Ie)return Pe}F.d(Ee,{f:()=>u})},2737:(st,Ee,F)=>{function u(B){return B}F.d(Ee,{y:()=>u})},4266:(st,Ee,F)=>{F.d(Ee,{z:()=>u});const u=B=>B&&"number"==typeof B.length&&"function"!=typeof B},5726:(st,Ee,F)=>{F.d(Ee,{D:()=>B});var u=F(4674);function B(L){return Symbol.asyncIterator&&(0,u.m)(L?.[Symbol.asyncIterator])}},4674:(st,Ee,F)=>{function u(B){return"function"==typeof B}F.d(Ee,{m:()=>u})},8382:(st,Ee,F)=>{F.d(Ee,{c:()=>L});var u=F(4850),B=F(4674);function L(ne){return(0,B.m)(ne[u.L])}},3664:(st,Ee,F)=>{F.d(Ee,{T:()=>L});var u=F(4971),B=F(4674);function L(ne){return(0,B.m)(ne?.[u.h])}},4026:(st,Ee,F)=>{F.d(Ee,{t:()=>B});var u=F(4674);function B(L){return(0,u.m)(L?.then)}},541:(st,Ee,F)=>{F.d(Ee,{L:()=>ne,Q:()=>L});var u=F(7582),B=F(4674);function L(ge){return(0,u.FC)(this,arguments,function*(){const Pe=ge.getReader();try{for(;;){const{value:Fe,done:De}=yield(0,u.qq)(Pe.read());if(De)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(Fe)}}finally{Pe.releaseLock()}})}function ne(ge){return(0,B.m)(ge?.getReader)}},9360:(st,Ee,F)=>{F.d(Ee,{A:()=>B,e:()=>L});var u=F(4674);function B(ne){return(0,u.m)(ne?.lift)}function L(ne){return ge=>{if(B(ge))return ge.lift(function(Ie){try{return ne(Ie,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(st,Ee,F)=>{function u(){}F.d(Ee,{Z:()=>u})},8407:(st,Ee,F)=>{F.d(Ee,{U:()=>L,z:()=>B});var u=F(2737);function B(...ne){return L(ne)}function L(ne){return 0===ne.length?u.y:1===ne.length?ne[0]:function(Ie){return ne.reduce((Pe,Fe)=>Fe(Pe),Ie)}}},3894:(st,Ee,F)=>{F.d(Ee,{h:()=>L});var u=F(2653),B=F(7599);function L(ne){B.z.setTimeout(()=>{const{onUnhandledError:ge}=u.config;if(!ge)throw ne;ge(ne)})}},9853:(st,Ee,F)=>{function u(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ee,{z:()=>u})},5879:(st,Ee,F)=>{F.d(Ee,{$8M:()=>Uu,$WT:()=>ja,$Z:()=>BT,AFp:()=>Pi,ALo:()=>_c,AaK:()=>X,AsE:()=>$1,CHM:()=>ss,CRH:()=>ty,DdM:()=>q_,Dn7:()=>Ip,EJc:()=>Or,EpF:()=>C1,F4k:()=>w1,FYo:()=>xx,FiY:()=>oe,GfV:()=>sd,Gpc:()=>Je,HDt:()=>nS,JOm:()=>nf,KtG:()=>Hh,LFG:()=>Be,LSH:()=>wf,Lbi:()=>V0,Lck:()=>IO,MAs:()=>QC,MGl:()=>l_,MMx:()=>Ad,MR2:()=>k0,NdJ:()=>iw,O4$:()=>xo,Ojb:()=>vT,OlP:()=>an,Oqu:()=>xs,P3R:()=>_x,PXZ:()=>Bp,Q6J:()=>JC,QGY:()=>ep,Qsj:()=>OL,R0b:()=>Vr,RDi:()=>Yb,Rgc:()=>Ns,SBq:()=>vl,Sil:()=>HO,Suo:()=>cI,TTD:()=>kh,TgZ:()=>s_,Tol:()=>p_,VKq:()=>Gw,VuI:()=>hN,W1O:()=>xp,WLB:()=>Ww,X6Q:()=>XO,XFs:()=>dt,Xpm:()=>uu,Xq5:()=>r1,Xts:()=>td,Y36:()=>wl,YKP:()=>Fl,YNc:()=>r_,Yjl:()=>gu,Yz7:()=>ft,Z0I:()=>rn,ZZ4:()=>xa,_Bn:()=>vD,_UZ:()=>ew,_c5:()=>oN,_uU:()=>ww,aQg:()=>Iy,c2e:()=>qe,cJS:()=>Mn,cg1:()=>wa,dDg:()=>my,dqk:()=>Rt,eFA:()=>wI,eJc:()=>sy,ekj:()=>gw,eoX:()=>ks,f3M:()=>Ke,g9A:()=>_T,h0i:()=>kl,hGG:()=>aN,hij:()=>vd,iGM:()=>aI,ifc:()=>Bs,ip1:()=>rt,jDz:()=>Ci,kL8:()=>gc,kcU:()=>wt,lG2:()=>pu,lcZ:()=>Qw,lqb:()=>Bo,lri:()=>gy,n5z:()=>am,oAB:()=>hu,oxw:()=>T1,q4F:()=>Lm,qFp:()=>Na,qLn:()=>cc,qOj:()=>Ca,qZA:()=>Jf,rWj:()=>te,rg0:()=>Rh,s9C:()=>tp,sBO:()=>nN,s_b:()=>J_,soG:()=>ye,tb:()=>_y,tp0:()=>He,uIk:()=>Gf,vHH:()=>ee,vpe:()=>jo,wAp:()=>jr,xp6:()=>lc,z2F:()=>kd,zSh:()=>V,zs3:()=>ao});var u=F(8645),B=F(7394),L=F(5592),ne=F(3019),ge=F(5619),Ie=F(2096),Pe=F(3020),Fe=F(4664),De=F(3997);function U(s){for(let o in s)if(s[o]===U)return o;throw Error("Could not find renamed property on target object.")}function G(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function X(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(X).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function Oe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const xe=U({__forward_ref__:U});function Je(s){return s.__forward_ref__=Je,s.toString=function(){return X(this())},s}function Ce(s){return Ae(s)?s():s}function Ae(s){return"function"==typeof s&&s.hasOwnProperty(xe)&&s.__forward_ref__===Je}function Te(s){return s&&!!s.\u0275providers}const ot="https://g.co/ng/security#xss";class ee extends Error{constructor(o,c){super(function de(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,c)),this.code=o}}function re(s){return"string"==typeof s?s:null==s?"":String(s)}function Ue(s,o){throw new ee(-201,!1)}function Qe(s,o){null==s&&function Ve(s,o,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function ft(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Mn(s){return{providers:s.providers||[],imports:s.imports||[]}}function wn(s){return $n(s,fr)||$n(s,qr)}function rn(s){return null!==wn(s)}function $n(s,o){return s.hasOwnProperty(o)?s[o]:null}function Fr(s){return s&&(s.hasOwnProperty(Hn)||s.hasOwnProperty(ys))?s[Hn]:null}const fr=U({\u0275prov:U}),Hn=U({\u0275inj:U}),qr=U({ngInjectableDef:U}),ys=U({ngInjectorDef:U});var dt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(dt||{});let mt;function sn(s){const o=mt;return mt=s,o}function li(s,o,c){const d=wn(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&dt.Optional?null:void 0!==o?o:void Ue(X(s))}const Rt=globalThis,it={},kt="__NG_DI_FLAG__",Vt="ngTempTokenPath",H=/\n/gm,O="__source";let N;function K(s){const o=N;return N=s,o}function me(s,o=dt.Default){if(void 0===N)throw new ee(-203,!1);return null===N?li(s,void 0,o):N.get(s,o&dt.Optional?null:void 0,o)}function Be(s,o=dt.Default){return(function Tt(){return mt}()||me)(Ce(s),o)}function Ke(s,o=dt.Default){return Be(s,Yt(o))}function Yt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Ct(s){const o=[];for(let c=0;c<s.length;c++){const d=Ce(s[c]);if(Array.isArray(d)){if(0===d.length)throw new ee(900,!1);let h,p=dt.Default;for(let y=0;y<d.length;y++){const C=d[y],b=xt(C);"number"==typeof b?-1===b?h=C.token:p|=b:h=C}o.push(Be(h,p))}else o.push(Be(d))}return o}function hn(s,o){return s[kt]=o,s.prototype[kt]=o,s}function xt(s){return s[kt]}function Vs(s){return{toString:s}.toString()}var wo=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(wo||{}),Bs=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(Bs||{});const $i={},Zt=[],na=U({\u0275cmp:U}),Va=U({\u0275dir:U}),au=U({\u0275pipe:U}),cu=U({\u0275mod:U}),js=U({\u0275fac:U}),Ba=U({__NG_ELEMENT_ID__:U}),lu=U({__NG_ENV_ID__:U});function hh(s,o,c){let d=s.length;for(;;){const h=s.indexOf(o,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===d||s.charCodeAt(h+p)<=32)return h}c=h+1}}function ra(s,o,c){let d=0;for(;d<c.length;){const h=c[d];if("number"==typeof h){if(0!==h)break;d++;const p=c[d++],y=c[d++],C=c[d++];s.setAttribute(o,y,C,p)}else{const p=h,y=c[++d];Fc(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),d++}}return d}function $s(s){return 3===s||4===s||6===s}function Fc(s){return 64===s.charCodeAt(0)}function Lc(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?c=h:0===c||Io(s,c,h,null,-1===c||2===c?o[++d]:null)}}return s}function Io(s,o,c,d,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const C=s[p++];if("number"==typeof C){if(C===o){y=-1;break}if(C>o){y=p-1;break}}}for(;p<s.length;){const C=s[p];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==h&&(s[p+1]=h));if(d===s[p+1])return void(s[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,c),null!==d&&s.splice(p++,0,d),null!==h&&s.splice(p++,0,h)}const On="ng-template";function Tv(s,o,c){let d=0,h=!0;for(;d<s.length;){let p=s[d++];if("string"==typeof p&&h){const y=s[d++];if(c&&"class"===p&&-1!==hh(y.toLowerCase(),o,0))return!0}else{if(1===p){for(;d<s.length&&"string"==typeof(p=s[d++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function Ir(s){return 4===s.type&&s.value!==On}function Dv(s,o,c){return o===(4!==s.type||c?s.value:On)}function fh(s,o,c){let d=4;const h=s.attrs||[],p=function Uc(s){for(let o=0;o<s.length;o++)if($s(s[o]))return o;return s.length}(h);let y=!1;for(let C=0;C<o.length;C++){const b=o[C];if("number"!=typeof b){if(!y)if(4&d){if(d=2|1&d,""!==b&&!Dv(s,b,c)||""===b&&1===o.length){if(ui(d))return!1;y=!0}}else{const D=8&d?b:o[++C];if(8&d&&null!==s.attrs){if(!Tv(s.attrs,D,c)){if(ui(d))return!1;y=!0}continue}const k=ph(8&d?"class":b,h,Ir(s),c);if(-1===k){if(ui(d))return!1;y=!0;continue}if(""!==D){let q;q=k>p?"":h[k+1].toLowerCase();const Y=8&d?q:null;if(Y&&-1!==hh(Y,D,0)||2&d&&D!==q){if(ui(d))return!1;y=!0}}}}else{if(!y&&!ui(d)&&!ui(b))return!1;if(y&&ui(b))continue;y=!1,d=b|1&d}}return ui(d)||y}function ui(s){return 0==(1&s)}function ph(s,o,c,d){if(null===o)return-1;let h=0;if(d||!c){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function mh(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===o)return c;c++}return-1}(o,s)}function gh(s,o,c=!1){for(let d=0;d<o.length;d++)if(fh(s,o[d],c))return!0;return!1}function Sg(s,o){return s?":not("+o.trim()+")":o}function Ag(s){let o=s[0],c=1,d=2,h="",p=!1;for(;c<s.length;){let y=s[c];if("string"==typeof y)if(2&d){const C=s[++c];h+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!ui(y)&&(o+=Sg(p,h),h=""),d=y,p=p||!ui(d);c++}return""!==h&&(o+=Sg(p,h)),o}function uu(s){return Vs(()=>{const o=Mg(s),c={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===wo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Bs.Emulated,styles:s.styles||Zt,_:null,schemas:s.schemas||null,tView:null,id:""};mu(c);const d=s.dependencies;return c.directiveDefs=Eo(d,!1),c.pipeDefs=Eo(d,!0),c.id=function Ch(s){let o=0;const c=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of c)o=Math.imul(31,o)+h.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(c),c})}function du(s){return Ft(s)||Er(s)}function yh(s){return null!==s}function hu(s){return Vs(()=>({type:s.type,bootstrap:s.bootstrap||Zt,declarations:s.declarations||Zt,imports:s.imports||Zt,exports:s.exports||Zt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function fu(s,o){if(null==s)return $i;const c={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),c[h]=d,o&&(o[h]=p)}return c}function pu(s){return Vs(()=>{const o=Mg(s);return mu(o),o})}function gu(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ft(s){return s[na]||null}function Er(s){return s[Va]||null}function br(s){return s[au]||null}function ja(s){const o=Ft(s)||Er(s)||br(s);return null!==o&&o.standalone}function Kr(s,o){const c=s[cu]||null;if(!c&&!0===o)throw new Error(`Type ${X(s)} does not have '\u0275mod' property.`);return c}function Mg(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||$i,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Zt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fu(s.inputs,o),outputs:fu(s.outputs)}}function mu(s){s.features?.forEach(o=>o(s))}function Eo(s,o){if(!s)return null;const c=o?br:du;return()=>("function"==typeof s?s():s).map(d=>c(d)).filter(yh)}const In=0,je=1,bt=2,fn=3,Di=4,zs=5,Tr=6,ia=7,zn=8,Gs=9,bo=10,pt=11,Vc=12,Av=13,Si=14,ir=15,$a=16,Ai=17,Yr=18,Ws=19,xg=20,sa=21,Cs=22,_u=23,Hi=24,Lt=25,Ih=1,Bc=2,Qr=7,Ha=9,sr=11;function di(s){return Array.isArray(s)&&"object"==typeof s[Ih]}function Lr(s){return Array.isArray(s)&&!0===s[Ih]}function Eh(s){return 0!=(4&s.flags)}function qs(s){return s.componentOffset>-1}function $c(s){return 1==(1&s.flags)}function zi(s){return!!s.template}function za(s){return 0!=(512&s[bt])}function Zs(s,o){return s.hasOwnProperty(js)?s[js]:null}let gr=null,Ah=!1;function Xr(s){const o=gr;return gr=s,o}const Mh={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Uv(s){if(!wu(s)||s.dirty){if(!s.producerMustRecompute(s)&&!Bv(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function Vv(s){s.dirty=!0,function Rg(s){if(void 0===s.liveConsumerNode)return;const o=Ah;Ah=!0;try{for(const c of s.liveConsumerNode)c.dirty||Vv(c)}finally{Ah=o}}(s),s.consumerMarkedDirty?.(s)}function kg(s){return s&&(s.nextProducerIndex=0),Xr(s)}function Cu(s,o){if(Xr(o),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(wu(s))for(let c=s.nextProducerIndex;c<s.producerNode.length;c++)zc(s.producerNode[c],s.producerIndexOfThis[c]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function Bv(s){Do(s);for(let o=0;o<s.producerNode.length;o++){const c=s.producerNode[o],d=s.producerLastReadVersion[o];if(d!==c.version||(Uv(c),d!==c.version))return!0}return!1}function Ph(s){if(Do(s),wu(s))for(let o=0;o<s.producerNode.length;o++)zc(s.producerNode[o],s.producerIndexOfThis[o]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function zc(s,o){if(function $v(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),Do(s),1===s.liveConsumerNode.length)for(let d=0;d<s.producerNode.length;d++)zc(s.producerNode[d],s.producerIndexOfThis[d]);const c=s.liveConsumerNode.length-1;if(s.liveConsumerNode[o]=s.liveConsumerNode[c],s.liveConsumerIndexOfThis[o]=s.liveConsumerIndexOfThis[c],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,o<s.liveConsumerNode.length){const d=s.liveConsumerIndexOfThis[o],h=s.liveConsumerNode[o];Do(h),h.producerIndexOfThis[d]=o}}function wu(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function Do(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let zv=null;function Rh(s){const o=Xr(null);try{return s()}finally{Xr(o)}}const jg=()=>{},vb=(()=>({...Mh,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:jg}))();class Zv{constructor(o,c,d){this.previousValue=o,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function kh(){return Fh}function Fh(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ks),bu}function bu(){const s=Lh(this),o=s?.current;if(o){const c=s.previous;if(c===$i)s.previous=o;else for(let d in o)c[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Ks(s,o,c,d){const h=this.declaredInputs[c],p=Lh(s)||function Kv(s,o){return s[qa]=o}(s,{previous:$i,current:null}),y=p.current||(p.current={}),C=p.previous,b=C[h];y[h]=new Zv(b&&b.currentValue,o,C===$i),s[d]=o}kh.ngInherit=!0;const qa="__ngSimpleChanges__";function Lh(s){return s[qa]||null}const ws=function(s,o,c){},$g="svg";function on(s){for(;Array.isArray(s);)s=s[In];return s}function Ys(s,o){return on(o[s])}function ei(s,o){return on(o[s.index])}function Vh(s,o){return s.data[o]}function Za(s,o){return s[o]}function hi(s,o){const c=o[s];return di(c)?c:c[In]}function So(s,o){return null==o?null:s[o]}function Hg(s){s[Ai]=0}function Wc(s){1024&s[bt]||(s[bt]|=1024,Jn(s,1))}function Yv(s){1024&s[bt]&&(s[bt]&=-1025,Jn(s,-1))}function Jn(s,o){let c=s[fn];if(null===c)return;c[zs]+=o;let d=c;for(c=c[fn];null!==c&&(1===o&&1===d[zs]||-1===o&&0===d[zs]);)c[zs]+=o,d=c,c=c[fn]}const _t={lFrame:tm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ka(){return _t.bindingsEnabled}function ve(){return _t.lFrame.lView}function Bt(){return _t.lFrame.tView}function ss(s){return _t.lFrame.contextLView=s,s[zn]}function Hh(s){return _t.lFrame.contextLView=null,s}function Dr(){let s=Mu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Mu(){return _t.lFrame.currentTNode}function Is(s,o){const c=_t.lFrame;c.currentTNode=s,c.isParent=o}function Kg(){return _t.lFrame.isParent}function Sr(){const s=_t.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Kc(){return _t.lFrame.bindingIndex++}function Es(s){const o=_t.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function Jg(s,o){const c=_t.lFrame;c.bindingIndex=c.bindingRootIndex=s,Xg(o)}function Xg(s){_t.lFrame.currentDirectiveIndex=s}function n0(){return _t.lFrame.currentQueryIndex}function em(s){_t.lFrame.currentQueryIndex=s}function Db(s){const o=s[je];return 2===o.type?o.declTNode:1===o.type?s[Tr]:null}function Gh(s,o,c){if(c&dt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||c&dt.Host||(h=Db(p),null===h||(p=p[Si],10&h.type))););if(null===h)return!1;o=h,s=p}const d=_t.lFrame=Qs();return d.currentTNode=o,d.lView=s,!0}function fi(s){const o=Qs(),c=s[je];_t.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function Qs(){const s=_t.lFrame,o=null===s?null:s.child;return null===o?tm(s):o}function tm(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function pn(){const s=_t.lFrame;return _t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ut=pn;function mr(){const s=pn();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ti(){return _t.lFrame.selectedIndex}function Js(s){_t.lFrame.selectedIndex=s}function vn(){const s=_t.lFrame;return Vh(s.tView,s.selectedIndex)}function xo(){_t.lFrame.currentNamespace=$g}function wt(){!function r0(){_t.lFrame.currentNamespace=null}()}let Yc=!0;function Xs(){return Yc}function eo(s){Yc=s}function Ya(s,o){for(let c=o.directiveStart,d=o.directiveEnd;c<d;c++){const p=s.data[c].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:D,ngOnDestroy:M}=p;y&&(s.contentHooks??=[]).push(-c,y),C&&((s.contentHooks??=[]).push(c,C),(s.contentCheckHooks??=[]).push(c,C)),b&&(s.viewHooks??=[]).push(-c,b),D&&((s.viewHooks??=[]).push(c,D),(s.viewCheckHooks??=[]).push(c,D)),null!=M&&(s.destroyHooks??=[]).push(c,M)}}function Qa(s,o,c){Ou(s,o,3,c)}function Ja(s,o,c,d){(3&s[bt])===c&&Ou(s,o,c,d)}function Pu(s,o){let c=s[bt];(3&c)===o&&(c&=8191,c+=1,s[bt]=c)}function Ou(s,o,c,d){const p=d??-1,y=o.length-1;let C=0;for(let b=void 0!==d?65535&s[Ai]:0;b<y;b++)if("number"==typeof o[b+1]){if(C=o[b],null!=d&&C>=d)break}else o[b]<0&&(s[Ai]+=65536),(C<p||-1==p)&&(Qc(s,c,o,b),s[Ai]=(4294901760&s[Ai])+b+2),b++}function to(s,o){ws(4,s,o);const c=Xr(null);try{o.call(s)}finally{Xr(c),ws(5,s,o)}}function Qc(s,o,c,d){const h=c[d]<0,p=c[d+1],C=s[h?-c[d]:c[d]];h?s[bt]>>13<s[Ai]>>16&&(3&s[bt])===o&&(s[bt]+=8192,to(C,p)):to(C,p)}const bs=-1;class aa{constructor(o,c,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Ru(s){return s!==bs}function Mi(s){return 32767&s}function Jt(s,o){let c=function Gn(s){return s>>16}(s),d=o;for(;c>0;)d=d[Si],c--;return d}let Xa=!0;function Ar(s){const o=Xa;return Xa=s,o}const el=255,tl=5;let s0=0;const or={};function En(s,o){const c=ku(s,o);if(-1!==c)return c;const d=o[je];d.firstCreatePass&&(s.injectorIndex=o.length,Ts(d.data,s),Ts(o,null),Ts(d.blueprint,null));const h=la(s,o),p=s.injectorIndex;if(Ru(h)){const y=Mi(h),C=Jt(h,o),b=C[je].data;for(let D=0;D<8;D++)o[p+D]=C[y+D]|b[y+D]}return o[p+8]=h,p}function Ts(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ku(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function la(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,h=o;for(;null!==h;){if(d=lm(h),null===d)return bs;if(c++,h=h[Si],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return bs}function ec(s,o,c){!function Oo(s,o,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Ba)&&(d=c[Ba]),null==d&&(d=c[Ba]=s0++);const h=d&el;o.data[s+(h>>tl)]|=1<<h}(s,o,c)}function Kh(s,o,c){if(c&dt.Optional||void 0!==s)return s;Ue()}function tc(s,o,c,d){if(c&dt.Optional&&void 0===d&&(d=null),!(c&(dt.Self|dt.Host))){const h=s[Gs],p=sn(void 0);try{return h?h.get(o,d,c&dt.Optional):li(o,d,c&dt.Optional)}finally{sn(p)}}return Kh(d,0,c)}function Yh(s,o,c,d=dt.Default,h){if(null!==s){if(2048&o[bt]&&!(d&dt.Self)){const y=function cm(s,o,c,d,h){let p=s,y=o;for(;null!==p&&null!==y&&2048&y[bt]&&!(512&y[bt]);){const C=Fu(p,y,c,d|dt.Self,or);if(C!==or)return C;let b=p.parent;if(!b){const D=y[xg];if(D){const M=D.get(c,or,d);if(M!==or)return M}b=lm(y),y=y[Si]}p=b}return h}(s,o,c,d,or);if(y!==or)return y}const p=Fu(s,o,c,d,or);if(p!==or)return p}return tc(o,c,d,h)}function Fu(s,o,c,d,h){const p=function Ro(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ba)?s[Ba]:void 0;return"number"==typeof o?o>=0?o&el:ko:o}(c);if("function"==typeof p){if(!Gh(o,s,d))return d&dt.Host?Kh(h,0,d):tc(o,c,d,h);try{let y;if(y=p(d),null!=y||d&dt.Optional)return y;Ue()}finally{ut()}}else if("number"==typeof p){let y=null,C=ku(s,o),b=bs,D=d&dt.Host?o[ir][Tr]:null;for((-1===C||d&dt.SkipSelf)&&(b=-1===C?la(s,o):o[C+8],b!==bs&&sm(d,!1)?(y=o[je],C=Mi(b),o=Jt(b,o)):C=-1);-1!==C;){const M=o[je];if(im(p,C,M.data)){const k=Dt(C,o,c,y,d,D);if(k!==or)return k}b=o[C+8],b!==bs&&sm(d,o[je].data[C+8]===D)&&im(p,C,o)?(y=M,C=Mi(b),o=Jt(b,o)):C=-1}}return h}function Dt(s,o,c,d,h,p){const y=o[je],C=y.data[s+8],M=No(C,y,c,null==d?qs(C)&&Xa:d!=y&&0!=(3&C.type),h&dt.Host&&p===C);return null!==M?ua(o,y,M,C):or}function No(s,o,c,d,h){const p=s.providerIndexes,y=o.data,C=1048575&p,b=s.directiveStart,M=p>>20,q=h?C+M:s.directiveEnd;for(let Y=d?C:C+M;Y<q;Y++){const ue=y[Y];if(Y<b&&c===ue||Y>=b&&ue.type===c)return Y}if(h){const Y=y[b];if(Y&&zi(Y)&&Y.type===c)return b}return null}function ua(s,o,c,d){let h=s[c];const p=o.data;if(function Nu(s){return s instanceof aa}(h)){const y=h;y.resolving&&function ke(s,o){const c=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ee(-200,`Circular dependency in DI detected for ${s}${c}`)}(function he(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():re(s)}(p[c]));const C=Ar(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?sn(y.injectImpl):null;Gh(s,d,dt.Default);try{h=s[c]=y.factory(void 0,p,s,d),o.firstCreatePass&&c>=d.directiveStart&&function pi(s,o,c){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(d){const y=Fh(o);(c.preOrderHooks??=[]).push(s,y),(c.preOrderCheckHooks??=[]).push(s,y)}h&&(c.preOrderHooks??=[]).push(0-s,h),p&&((c.preOrderHooks??=[]).push(s,p),(c.preOrderCheckHooks??=[]).push(s,p))}(c,p[c],o)}finally{null!==D&&sn(D),Ar(C),y.resolving=!1,ut()}}return h}function im(s,o,c){return!!(c[o+(s>>tl)]&1<<s)}function sm(s,o){return!(s&dt.Self||s&dt.Host&&o)}class ar{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,d){return Yh(this._tNode,this._lView,o,Yt(d),c)}}function ko(){return new ar(Dr(),ve())}function am(s){return Vs(()=>{const o=s.prototype.constructor,c=o[js]||Lu(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const p=h[js]||Lu(h);if(p&&p!==c)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Lu(s){return Ae(s)?()=>{const o=Lu(Ce(s));return o&&o()}:Zs(s)}function lm(s){const o=s[je],c=o.type;return 2===c?o.declTNode:1===c?s[Tr]:null}function Uu(s){return function rm(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const d=c.length;let h=0;for(;h<d;){const p=c[h];if($s(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof c[h];)h++;else{if(p===o)return c[h+1];h+=2}}}return null}(Dr(),s)}const da="__parameters__";function zt(s,o,c){return Vs(()=>{const d=function Fo(s){return function(...c){if(s){const d=s(...c);for(const h in d)this[h]=d[h]}}}(o);function h(...p){if(this instanceof h)return d.apply(this,p),this;const y=new h(...p);return C.annotation=y,C;function C(b,D,M){const k=b.hasOwnProperty(da)?b[da]:Object.defineProperty(b,da,{value:[]})[da];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(y),b}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function rc(s,o){s.forEach(c=>Array.isArray(c)?rc(c,o):o(c))}function a0(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function ic(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function xi(s,o,c){let d=sc(s,o);return d>=0?s[1|d]=c:(d=~d,function hm(s,o,c,d){let h=s.length;if(h==o)s.push(c,d);else if(1===h)s.push(d,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=c,s[o+1]=d}}(s,d,o,c)),d}function Xh(s,o){const c=sc(s,o);if(c>=0)return s[1|c]}function sc(s,o){return function zu(s,o,c){let d=0,h=s.length>>c;for(;h!==d;){const p=d+(h-d>>1),y=s[p<<c];if(o===y)return p<<c;y>o?h=p:d=p+1}return~(h<<c)}(s,o,1)}const oe=hn(zt("Optional"),8),He=hn(zt("SkipSelf"),4);function gm(s){return 128==(128&s.flags)}var nf=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(nf||{});const rf=new Map;let LM=0;const ym="__ngContext__";function _i(s,o){di(o)?(s[ym]=o[Ws],function kb(s){rf.set(s[Ws],s)}(o)):s[ym]=o}let cf;function os(s,o){return cf(s,o)}function ma(s){const o=s[fn];return Lr(o)?o[fn]:o}function Ub(s){return lf(s[Vc])}function C0(s){return lf(s[Di])}function lf(s){for(;null!==s&&!Lr(s);)s=s[Di];return s}function Yu(s,o,c,d,h){if(null!=d){let p,y=!1;Lr(d)?p=d:di(d)&&(y=!0,d=d[In]);const C=on(d);0===s&&null!==c?null==h?$b(o,c,C):hl(o,c,C,h||null,!0):1===s&&null!==c?hl(o,c,C,h||null,!0):2===s?function Em(s,o,c){const d=Im(s,o);d&&function JM(s,o,c,d){s.removeChild(o,c,d)}(s,d,o,c)}(o,C,y):3===s&&o.destroyNode(C),null!=p&&function ex(s,o,c,d,h){const p=c[Qr];p!==on(c)&&Yu(o,s,d,p,h);for(let C=sr;C<c.length;C++){const b=c[C];gf(b[je],b,s,o,d,p)}}(o,s,p,c,h)}}function Cm(s,o,c){return s.createElement(o,c)}function Vb(s,o){const c=s[Ha],d=c.indexOf(o);Yv(o),c.splice(d,1)}function wm(s,o){if(s.length<=sr)return;const c=sr+o,d=s[c];if(d){const h=d[$a];null!==h&&h!==s&&Vb(h,d),o>0&&(s[c-1][Di]=d[Di]);const p=ic(s,sr+o);!function qM(s,o){gf(s,o,o[pt],2,null,null),o[In]=null,o[Tr]=null}(d[je],d);const y=p[Yr];null!==y&&y.detachView(p[je]),d[fn]=null,d[Di]=null,d[bt]&=-129}return d}function w0(s,o){if(!(256&o[bt])){const c=o[pt];o[_u]&&Ph(o[_u]),o[Hi]&&Ph(o[Hi]),c.destroyNode&&gf(s,o,c,3,null,null),function ZM(s){let o=s[Vc];if(!o)return Bb(s[je],s);for(;o;){let c=null;if(di(o))c=o[Vc];else{const d=o[sr];d&&(c=d)}if(!c){for(;o&&!o[Di]&&o!==s;)di(o)&&Bb(o[je],o),o=o[fn];null===o&&(o=s),di(o)&&Bb(o[je],o),c=o&&o[Di]}o=c}}(o)}}function Bb(s,o){if(!(256&o[bt])){o[bt]&=-129,o[bt]|=256,function jb(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const h=o[c[d]];if(!(h instanceof aa)){const p=c[d+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const C=h[p[y]],b=p[y+1];ws(4,C,b);try{b.call(C)}finally{ws(5,C,b)}}else{ws(4,h,p);try{p.call(h)}finally{ws(5,h,p)}}}}}(s,o),function QM(s,o){const c=s.cleanup,d=o[ia];if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const y=c[p+3];y>=0?d[y]():d[-y].unsubscribe(),p+=2}else c[p].call(d[c[p+1]]);null!==d&&(o[ia]=null);const h=o[sa];if(null!==h){o[sa]=null;for(let p=0;p<h.length;p++)(0,h[p])()}}(s,o),1===o[je].type&&o[pt].destroy();const c=o[$a];if(null!==c&&Lr(o[fn])){c!==o[fn]&&Vb(c,o);const d=o[Yr];null!==d&&d.detachView(s)}!function sf(s){rf.delete(s[Ws])}(o)}}function Qu(s,o,c){return function dl(s,o,c){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return c[In];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:p}=s.data[d.directiveStart+h];if(p===Bs.None||p===Bs.Emulated)return null}return ei(d,c)}}(s,o.parent,c)}function hl(s,o,c,d,h){s.insertBefore(o,c,d,h)}function $b(s,o,c){s.appendChild(o,c)}function Hb(s,o,c,d,h){null!==d?hl(s,o,c,d,h):$b(s,o,c)}function Im(s,o){return s.parentNode(o)}let E0,Kb,Tm,I0=function Gb(s,o,c){return 40&s.type?ei(s,c):null};function ff(s,o,c,d){const h=Qu(s,d,o),p=o[pt],C=function zb(s,o,c){return I0(s,o,c)}(d.parent||o[Tr],d,o);if(null!=h)if(Array.isArray(c))for(let b=0;b<c.length;b++)Hb(p,h,c[b],C,!1);else Hb(p,h,c,C,!1);void 0!==E0&&E0(p,d,o,c,h)}function Vo(s,o){if(null!==o){const c=o.type;if(3&c)return ei(o,s);if(4&c)return T0(-1,s[o.index]);if(8&c){const d=o.child;if(null!==d)return Vo(s,d);{const h=s[o.index];return Lr(h)?T0(-1,h):on(h)}}if(32&c)return os(o,s)()||on(s[o.index]);{const d=b0(s,o);return null!==d?Array.isArray(d)?d[0]:Vo(ma(s[ir]),d):Vo(s,o.next)}}return null}function b0(s,o){return null!==o?s[ir][Tr].projection[o.projection]:null}function T0(s,o){const c=sr+s+1;if(c<o.length){const d=o[c],h=d[je].firstChild;if(null!==h)return Vo(d,h)}return o[Qr]}function pf(s,o,c,d,h,p,y){for(;null!=c;){const C=d[c.index],b=c.type;if(y&&0===o&&(C&&_i(on(C),d),c.flags|=2),32!=(32&c.flags))if(8&b)pf(s,o,c.child,d,h,p,!1),Yu(o,s,h,C,p);else if(32&b){const D=os(c,d);let M;for(;M=D();)Yu(o,s,h,M,p);Yu(o,s,h,C,p)}else 16&b?S0(s,o,d,c,h,p):Yu(o,s,h,C,p);c=y?c.projectionNext:c.next}}function gf(s,o,c,d,h,p){pf(c,d,s.firstChild,o,h,p,!1)}function S0(s,o,c,d,h,p){const y=c[ir],b=y[Tr].projection[d.projection];if(Array.isArray(b))for(let D=0;D<b.length;D++)Yu(o,s,h,b[D],p);else{let D=b;const M=y[fn];gm(d)&&(D.flags|=128),pf(s,o,D,M,h,p,!0)}}function qb(s,o,c){""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c)}function mf(s,o,c){const{mergedAttrs:d,classes:h,styles:p}=c;null!==d&&ra(s,o,d),null!==h&&qb(s,o,h),null!==p&&function nx(s,o,c){s.setAttribute(o,"style",c)}(s,o,p)}function Yb(s){Kb=s}function Xb(s){return function M0(){if(void 0===Tm&&(Tm=null,Rt.trustedTypes))try{Tm=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Tm}()?.createScriptURL(s)||s}class eT{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function ac(s){return s instanceof eT?s.changingThisBreaksApplicationSecurity:s}function ed(s,o){const c=function Dm(s){return s instanceof eT&&s.getTypeName()||null}(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see ${ot})`)}return c===o}const _f=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Cf=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(Cf||{});function wf(s){const o=If();return o?o.sanitize(Cf.URL,s)||"":ed(s,"URL")?ac(s):function Am(s){return(s=String(s)).match(_f)?s:"unsafe:"+s}(re(s))}function lT(s){const o=If();if(o)return Xb(o.sanitize(Cf.RESOURCE_URL,s)||"");if(ed(s,"ResourceURL"))return Xb(ac(s));throw new ee(904,!1)}function _x(s,o,c){return function mx(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?lT:wf}(o,c)(s)}function If(){const s=ve();return s&&s[bo].sanitizer}class an{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=ft({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const td=new an("ENVIRONMENT_INITIALIZER"),dT=new an("INJECTOR",-1),hT=new an("INJECTOR_DEF_TYPES");class xm{get(o,c=it){if(c===it){const d=new Error(`NullInjectorError: No provider for ${X(o)}!`);throw d.name="NullInjectorError",d}return c}}function k0(s){return{\u0275providers:s}}function yx(...s){return{\u0275providers:fT(0,s),\u0275fromNgModule:!0}}function fT(s,...o){const c=[],d=new Set;let h;const p=y=>{c.push(y)};return rc(o,y=>{const C=y;Pm(C,p,[],d)&&(h||=[],h.push(C))}),void 0!==h&&pT(h,p),c}function pT(s,o){for(let c=0;c<s.length;c++){const{ngModule:d,providers:h}=s[c];F0(h,p=>{o(p,d)})}}function Pm(s,o,c,d){if(!(s=Ce(s)))return!1;let h=null,p=Fr(s);const y=!p&&Ft(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const b=s.ngModule;if(p=Fr(b),!p)return!1;h=b}const C=d.has(h);if(y){if(C)return!1;if(d.add(h),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const D of b)Pm(D,o,c,d)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let D;d.add(h);try{rc(p.imports,M=>{Pm(M,o,c,d)&&(D||=[],D.push(M))})}finally{}void 0!==D&&pT(D,o)}if(!C){const D=Zs(h)||(()=>new h);o({provide:h,useFactory:D,deps:Zt},h),o({provide:hT,useValue:h,multi:!0},h),o({provide:td,useValue:()=>Be(h),multi:!0},h)}const b=p.providers;if(null!=b&&!C){const D=s;F0(b,M=>{o(M,D)})}}}return h!==s&&void 0!==s.providers}function F0(s,o){for(let c of s)Te(c)&&(c=c.\u0275providers),Array.isArray(c)?F0(c,o):o(c)}const IL=U({provide:String,useValue:U});function gT(s){return null!==s&&"object"==typeof s&&IL in s}function nd(s){return"function"==typeof s}const V=new an("Set Injector scope."),Om={},oo={};let L0;function pl(){return void 0===L0&&(L0=new xm),L0}class Bo{}class Ef extends Bo{get destroyed(){return this._destroyed}constructor(o,c,d,h){super(),this.parent=c,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_r(o,y=>this.processProvider(y)),this.records.set(dT,Df(void 0,this)),h.has("environment")&&this.records.set(Bo,Df(void 0,this));const p=this.records.get(V);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(hT.multi,Zt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of o)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const c=K(this),d=sn(void 0);try{return o()}finally{K(c),sn(d)}}get(o,c=it,d=dt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(lu))return o[lu](this);d=Yt(d);const p=K(this),y=sn(void 0);try{if(!(d&dt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const D=function Ex(s){return"function"==typeof s||"object"==typeof s&&s instanceof an}(o)&&wn(o);b=D&&this.injectableDefInScope(D)?Df(bf(o),Om):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(d&dt.Self?pl():this.parent).get(o,c=d&dt.Optional&&c===it?null:c)}catch(C){if("NullInjectorError"===C.name){if((C[Vt]=C[Vt]||[]).unshift(X(o)),p)throw C;return function ji(s,o,c,d){const h=s[Vt];throw o[O]&&h.unshift(o[O]),s.message=function kc(s,o,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=X(o);if(Array.isArray(o))h=o.map(X).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let C=o[y];p.push(y+":"+("string"==typeof C?JSON.stringify(C):X(C)))}h=`{${p.join(", ")}}`}return`${c}${d?"("+d+")":""}[${h}]: ${s.replace(H,"\n  ")}`}("\n"+s.message,h,c,d),s.ngTokenPath=h,s[Vt]=null,s}(C,o,"R3InjectorError",this.source)}throw C}finally{sn(y),K(p)}}resolveInjectorInitializers(){const o=K(this),c=sn(void 0);try{const h=this.get(td.multi,Zt,dt.Self);for(const p of h)p()}finally{K(o),sn(c)}}toString(){const o=[],c=this.records;for(const d of c.keys())o.push(X(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(o){let c=nd(o=Ce(o))?o:Ce(o&&o.provide);const d=function mT(s){return gT(s)?Df(void 0,s.useValue):Df(U0(s),Om)}(o);if(nd(o)||!0!==o.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=Df(void 0,Om,!0),h.factory=()=>Ct(h.multi),this.records.set(c,h)),c=o,h.multi.push(o)}this.records.set(c,d)}hydrate(o,c){return c.value===Om&&(c.value=oo,c.value=c.factory()),"object"==typeof c.value&&c.value&&function Ix(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(o){if(!o.providedIn)return!1;const c=Ce(o.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(o){const c=this._onDestroyHooks.indexOf(o);-1!==c&&this._onDestroyHooks.splice(c,1)}}function bf(s){const o=wn(s),c=null!==o?o.factory:Zs(s);if(null!==c)return c;if(s instanceof an)throw new ee(204,!1);if(s instanceof Function)return function Tf(s){const o=s.length;if(o>0)throw function Lo(s,o){const c=[];for(let d=0;d<s;d++)c.push(o);return c}(o,"?"),new ee(204,!1);const c=function bi(s){return s&&(s[fr]||s[qr])||null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new ee(204,!1)}function U0(s,o,c){let d;if(nd(s)){const h=Ce(s);return Zs(h)||bf(h)}if(gT(s))d=()=>Ce(s.useValue);else if(function wx(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Ct(s.deps||[]));else if(function Cx(s){return!(!s||!s.useExisting)}(s))d=()=>Be(Ce(s.useExisting));else{const h=Ce(s&&(s.useClass||s.provide));if(!function bn(s){return!!s.deps}(s))return Zs(h)||bf(h);d=()=>new h(...Ct(s.deps))}return d}function Df(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function _r(s,o){for(const c of s)Array.isArray(c)?_r(c,o):c&&Te(c)?_r(c.\u0275providers,o):o(c)}const Pi=new an("AppId",{providedIn:"root",factory:()=>z}),z="ng",_T=new an("Platform Initializer"),V0=new an("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vT=new an("CSP nonce",{providedIn:"root",factory:()=>function fl(){if(void 0!==Kb)return Kb;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let CT=(s,o,c)=>null;function q0(s,o,c=!1){return CT(s,o,c)}class xL{}class IT{}class bT{resolveComponentFactory(o){throw function ya(s){const o=Error(`No component factory found for ${X(s)}.`);return o.ngComponent=s,o}(o)}}let Mf=(()=>{class s{static#e=this.NULL=new bT}return s})();function PL(){return xf(Dr(),ve())}function xf(s,o){return new vl(ei(s,o))}let vl=(()=>{class s{constructor(c){this.nativeElement=c}static#e=this.__NG_ELEMENT_ID__=PL}return s})();function Oi(s){return s instanceof vl?s.nativeElement:s}class xx{}let OL=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Px(){const s=ve(),c=hi(Dr().index,s);return(di(c)?c:s)[pt]}()}return s})(),Ox=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>null})}return s})();class sd{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Lm=new sd("16.2.9"),Um={};function J0(s,o=null,c=null,d){const h=MT(s,o,c,d);return h.resolveInjectorInitializers(),h}function MT(s,o=null,c=null,d,h=new Set){const p=[c||Zt,yx(s)];return d=d||("object"==typeof s?void 0:X(s)),new Ef(p,o||pl(),d||null,h)}let ao=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=it;static#t=this.NULL=new xm;static create(c,d){if(Array.isArray(c))return J0({name:""},d,c,"");{const h=c.name??"";return J0({name:h},c.parent,c.providers,h)}}static#n=this.\u0275prov=ft({token:s,providedIn:"any",factory:()=>Be(dT)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function eC(s){return s.ngOriginalError}class cc{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o);this._console.error("ERROR",o),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&eC(o);for(;c&&eC(c);)c=eC(c);return c||null}}function Of(s){return o=>{setTimeout(s,void 0,o)}}const jo=class nC extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,d){let h=o,p=c||(()=>null),y=d;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),p=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(p=Of(p),h&&(h=Of(h)),y&&(y=Of(y)));const C=super.subscribe({next:h,error:p,complete:y});return o instanceof B.w0&&o.add(C),C}};function xT(...s){}class Vr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jo(!1),this.onMicrotaskEmpty=new jo(!1),this.onStable=new jo(!1),this.onError=new jo(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&c,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function rC(){const s="function"==typeof Rt.requestAnimationFrame;let o=Rt[s?"requestAnimationFrame":"setTimeout"],c=Rt[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&c){const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d);const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function Ux(s){const o=()=>{!function iC(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Rt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,PT(s),s.isCheckStableRunning=!0,$o(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),PT(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,h,p,y,C)=>{if(function cC(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(C))return c.invokeTask(h,p,y,C);try{return OT(s),c.invokeTask(h,p,y,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),NT(s)}},onInvoke:(c,d,h,p,y,C,b)=>{try{return OT(s),c.invoke(h,p,y,C,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),NT(s)}},onHasTask:(c,d,h,p)=>{c.hasTask(h,p),d===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,PT(s),$o(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,d,h,p)=>(c.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vr.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(Vr.isInAngularZone())throw new ee(909,!1)}run(o,c,d){return this._inner.run(o,c,d)}runTask(o,c,d,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,Lx,xT,xT);try{return p.runTask(y,c,d)}finally{p.cancelTask(y)}}runGuarded(o,c,d){return this._inner.runGuarded(o,c,d)}runOutsideAngular(o){return this._outer.run(o)}}const Lx={};function $o(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function PT(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function OT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function NT(s){s._nesting--,$o(s)}class sC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jo,this.onMicrotaskEmpty=new jo,this.onStable=new jo,this.onError=new jo}run(o,c,d){return o.apply(c,d)}runGuarded(o,c,d){return o.apply(c,d)}runOutsideAngular(o){return o()}runTask(o,c,d,h){return o.apply(c,d)}}const oC=new an("",{providedIn:"root",factory:aC});function aC(){const s=Ke(Vr);let o=!0;const c=new L.y(h=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(o),h.complete()})}),d=new L.y(h=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{Vr.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,h.next(!0))})})});const y=s.onUnstable.subscribe(()=>{Vr.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,ne.T)(c,d.pipe((0,Pe.B)()))}function va(s){return s instanceof Function?s():s}let Nf=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function cd(s){for(;s;){s[bt]|=64;const o=ma(s);if(za(s)&&!o)return s;s=o}return null}const dC=new an("",{providedIn:"root",factory:()=>!1});let $m=null;function Cl(s,o){return s[o]??mC()}function gC(s,o){const c=mC();c.producerNode?.length&&(s[o]=$m,c.lView=s,$m=VT())}const Hx={...Mh,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{cd(s.lView)},lView:null};function VT(){return Object.create(Hx)}function mC(){return $m??=VT(),$m}const St={};function lc(s){_C(Bt(),ve(),ti()+s,!1)}function _C(s,o,c,d){if(!d)if(3==(3&o[bt])){const p=s.preOrderCheckHooks;null!==p&&Qa(o,p,c)}else{const p=s.preOrderHooks;null!==p&&Ja(o,p,0,c)}Js(c)}function wl(s,o=dt.Default){const c=ve();return null===c?Be(s,o):Yh(Dr(),c,Ce(s),o)}function BT(){throw new Error("invalid")}function zo(s,o,c,d,h,p,y,C,b,D,M){const k=o.blueprint.slice();return k[In]=h,k[bt]=140|d,(null!==D||s&&2048&s[bt])&&(k[bt]|=2048),Hg(k),k[fn]=k[Si]=s,k[zn]=c,k[bo]=y||s&&s[bo],k[pt]=C||s&&s[pt],k[Gs]=b||s&&s[Gs]||null,k[Tr]=p,k[Ws]=function _m(){return LM++}(),k[Cs]=M,k[xg]=D,k[ir]=2==o.type?s[ir]:k,k}function uc(s,o,c,d,h){let p=s.data[o];if(null===p)p=function kf(s,o,c,d,h){const p=Mu(),y=Kg(),b=s.data[o]=function $T(s,o,c,d,h,p){let y=o?o.injectorIndex:-1,C=0;return function Ao(){return null!==_t.skipHydrationRootTNode}()&&(C|=128),{type:c,index:d,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,c,o,d,h);return null===s.firstChild&&(s.firstChild=b),null!==p&&(y?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(s,o,c,d,h),function bb(){return _t.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=c,p.value=d,p.attrs=h;const y=function Zc(){const s=_t.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return Is(p,!0),p}function dc(s,o,c,d){if(0===c)return-1;const h=o.length;for(let p=0;p<c;p++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function Hm(s,o,c,d,h){const p=Cl(o,_u),y=ti(),C=2&d;try{Js(-1),C&&o.length>Lt&&_C(s,o,Lt,!1),ws(C?2:0,h);const D=C?p:null,M=kg(D);try{null!==D&&(D.dirty=!1),c(d,h)}finally{Cu(D,M)}}finally{C&&null===o[_u]&&gC(o,_u),Js(y),ws(C?3:1,h)}}function Ff(s,o,c){if(Eh(o)){const d=Xr(null);try{const p=o.directiveEnd;for(let y=o.directiveStart;y<p;y++){const C=s.data[y];C.contentQueries&&C.contentQueries(1,c[y],y)}}finally{Xr(d)}}}function Lf(s,o,c){Ka()&&(function zT(s,o,c,d){const h=c.directiveStart,p=c.directiveEnd;qs(c)&&function eP(s,o,c){const d=ei(o,s),h=zm(c);let y=16;c.signals?y=4096:c.onPush&&(y=64);const C=OC(s,zo(s,h,null,y,d,o,null,s[bo].rendererFactory.createRenderer(d,c),null,null,null));s[o.index]=C}(o,c,s.data[h+c.componentOffset]),s.firstCreatePass||En(c,o),_i(d,o);const y=c.initialInputs;for(let C=h;C<p;C++){const b=s.data[C],D=ua(o,s,C,c);_i(D,o),null!==y&&PC(0,C-h,D,b,0,y),zi(b)&&(hi(c.index,o)[zn]=ua(o,s,C,c))}}(s,o,c,ei(c,o)),64==(64&c.flags)&&GT(s,o,c))}function Il(s,o,c=ei){const d=o.localNames;if(null!==d){let h=o.index+1;for(let p=0;p<d.length;p+=2){const y=d[p+1],C=-1===y?c(o,s):s[y];s[h++]=C}}}function zm(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Uf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function Uf(s,o,c,d,h,p,y,C,b,D,M){const k=Lt+d,q=k+h,Y=function yC(s,o){const c=[];for(let d=0;d<o;d++)c.push(d<s?null:St);return c}(k,q),ue="function"==typeof D?D():D;return Y[je]={type:s,blueprint:Y,template:c,queries:null,viewQuery:C,declTNode:o,data:Y.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:ue,incompleteFirstPass:!1,ssrId:M}}let jT=s=>null;function wC(s,o,c,d){for(let h in s)if(s.hasOwnProperty(h)){c=null===c?{}:c;const p=s[h];null===d?HT(c,o,h,p):d.hasOwnProperty(h)&&HT(c,o,d[h],p)}return c}function HT(s,o,c,d){s.hasOwnProperty(c)?s[c].push(o,d):s[c]=[o,d]}function as(s,o,c,d,h,p,y,C){const b=ei(o,c);let M,D=o.inputs;!C&&null!=D&&(M=D[d])?(kC(s,c,M,d,h),qs(o)&&function EC(s,o){const c=hi(o,s);16&c[bt]||(c[bt]|=64)}(c,o.index)):3&o.type&&(d=function IC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,o.value||"",d):h,p.setProperty(b,d,h))}function Vf(s,o,c,d){if(Ka()){const h=null===d?null:{"":-1},p=function Qx(s,o){const c=s.directiveRegistry;let d=null,h=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];if(gh(o,y.selectors,!1))if(d||(d=[]),zi(y))if(null!==y.findHostDirectiveDefs){const C=[];h=h||new Map,y.findHostDirectiveDefs(y,C,h),d.unshift(...C,y),SC(s,o,C.length)}else d.unshift(y),SC(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,d,h),d.push(y)}return null===d?null:[d,h]}(s,c);let y,C;null===p?y=C=null:[y,C]=p,null!==y&&TC(s,o,c,y,h,C),h&&function Jx(s,o,c){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=c[o[h+1]];if(null==p)throw new ee(-301,!1);d.push(o[h],p)}}}(c,d,h)}c.mergedAttrs=Lc(c.mergedAttrs,c.attrs)}function TC(s,o,c,d,h,p){for(let D=0;D<d.length;D++)ec(En(c,o),s,d[D].type);!function Xx(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}(c,s.data.length,d.length);for(let D=0;D<d.length;D++){const M=d[D];M.providersResolver&&M.providersResolver(M)}let y=!1,C=!1,b=dc(s,o,d.length,null);for(let D=0;D<d.length;D++){const M=d[D];c.mergedAttrs=Lc(c.mergedAttrs,M.hostAttrs),MC(s,c,o,b,M),AC(b,M,h),null!==M.contentQueries&&(c.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(c.flags|=64);const k=M.type.prototype;!y&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((s.preOrderHooks??=[]).push(c.index),y=!0),!C&&(k.ngOnChanges||k.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(c.index),C=!0),b++}!function Zx(s,o,c){const h=o.directiveEnd,p=s.data,y=o.attrs,C=[];let b=null,D=null;for(let M=o.directiveStart;M<h;M++){const k=p[M],q=c?c.get(k):null,ue=q?q.outputs:null;b=wC(k.inputs,M,b,q?q.inputs:null),D=wC(k.outputs,M,D,ue);const Se=null===b||null===y||Ir(o)?null:BL(b,M,y);C.push(Se)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=C,o.inputs=b,o.outputs=D}(s,c,p)}function GT(s,o,c){const d=c.directiveStart,h=c.directiveEnd,p=c.index,y=function Tb(){return _t.lFrame.currentDirectiveIndex}();try{Js(p);for(let C=d;C<h;C++){const b=s.data[C],D=o[C];Xg(C),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Yx(b,D)}}finally{Js(-1),Xg(y)}}function Yx(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function SC(s,o,c){o.componentOffset=c,(s.components??=[]).push(o.index)}function AC(s,o,c){if(c){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)c[o.exportAs[d]]=s;zi(o)&&(c[""]=s)}}function MC(s,o,c,d,h){s.data[d]=h;const p=h.factory||(h.factory=Zs(h.type)),y=new aa(p,zi(h),wl);s.blueprint[d]=y,c[d]=y,function Kx(s,o,c,d,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const C=~o.index;(function DC(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(y)!=C&&y.push(C),y.push(c,d,p)}}(s,o,d,dc(s,c,h.hostVars,St),h)}function As(s,o,c,d,h,p){const y=ei(s,o);!function xC(s,o,c,d,h,p,y){if(null==p)s.removeAttribute(o,h,c);else{const C=null==y?re(p):y(p,d||"",h);s.setAttribute(o,h,C,c)}}(o[pt],y,p,s.value,c,d,h)}function PC(s,o,c,d,h,p){const y=p[o];if(null!==y)for(let C=0;C<y.length;)WT(d,c,y[C++],y[C++],y[C++])}function WT(s,o,c,d,h){const p=Xr(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(d)&&(h=y[d].call(o,h)),null!==s.setInput?s.setInput(o,h,c,d):o[d]=h}finally{Xr(p)}}function BL(s,o,c){let d=null,h=0;for(;h<c.length;){const p=c[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===d&&(d=[]);const y=s[p];for(let C=0;C<y.length;C+=2)if(y[C]===o){d.push(p,y[C+1],c[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function Gm(s,o,c,d){return[s,!0,!1,o,null,0,d,c,null,null,null]}function tP(s,o){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const p=c[d+1];if(-1!==p){const y=s.data[p];em(c[d]),y.contentQueries(2,o[p],p)}}}function OC(s,o){return s[Vc]?s[Av][Di]=o:s[Vc]=o,s[Av]=o,o}function NC(s,o,c){em(0);const d=Xr(null);try{o(s,c)}finally{Xr(d)}}function RC(s){return s[ia]||(s[ia]=[])}function ZT(s){return s.cleanup||(s.cleanup=[])}function YT(s,o){const c=s[Gs],d=c?c.get(cc,null):null;d&&d.handleError(o)}function kC(s,o,c,d,h){for(let p=0;p<c.length;){const y=c[p++],C=c[p++];WT(s.data[y],o[y],d,C,h)}}function co(s,o,c){const d=Ys(o,s);!function ll(s,o,c){s.setValue(o,c)}(s[pt],d,c)}function QT(s,o){const c=hi(o,s),d=c[je];!function nP(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])}(d,c);const h=c[In];null!==h&&null===c[Cs]&&(c[Cs]=q0(h,c[Gs])),Wm(d,c,c[zn])}function Wm(s,o,c){fi(o);try{const d=s.viewQuery;null!==d&&NC(1,d,c);const h=s.template;null!==h&&Hm(s,o,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&tP(s,o),s.staticViewQueries&&NC(2,s.viewQuery,c);const p=s.components;null!==p&&function rP(s,o){for(let c=0;c<o.length;c++)QT(s,o[c])}(o,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[bt]&=-5,mr()}}let Ni=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(c,d,h){const p=typeof Zone>"u"?null:Zone.current,y=function Wv(s,o,c){const d=Object.create(vb);c&&(d.consumerAllowSignalWrites=!0),d.fn=s,d.schedule=o;const h=y=>{d.cleanupFn=y};return d.ref={notify:()=>Vv(d),run:()=>{if(d.dirty=!1,d.hasRun&&!Bv(d))return;d.hasRun=!0;const y=kg(d);try{d.cleanupFn(),d.cleanupFn=jg,d.fn(h)}finally{Cu(d,y)}},cleanup:()=>d.cleanupFn()},d.ref}(c,D=>{this.all.has(D)&&this.queue.set(D,p)},h);let C;this.all.add(y),y.notify();const b=()=>{y.cleanup(),C?.(),this.all.delete(y),this.queue.delete(y)};return C=d?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[c,d]of this.queue)this.queue.delete(c),d?d.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function qm(s,o,c){let d=c?s.styles:null,h=c?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const C=o[y];"number"==typeof C?p=C:1==p?h=Oe(h,C):2==p&&(d=Oe(d,C+": "+o[++y]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=h:s.classesWithoutHost=h}function Bf(s,o,c,d,h=!1){for(;null!==c;){const p=o[c.index];null!==p&&d.push(on(p)),Lr(p)&&FC(p,d);const y=c.type;if(8&y)Bf(s,o,c.child,d);else if(32&y){const C=os(c,o);let b;for(;b=C();)d.push(b)}else if(16&y){const C=b0(o,c);if(Array.isArray(C))d.push(...C);else{const b=ma(o[ir]);Bf(b[je],b,C,d,!0)}}c=h?c.projectionNext:c.next}return d}function FC(s,o){for(let c=sr;c<s.length;c++){const d=s[c],h=d[je].firstChild;null!==h&&Bf(d[je],d,h,o)}s[Qr]!==s[In]&&o.push(s[Qr])}function Zm(s,o,c,d=!0){const h=o[bo],p=h.rendererFactory,y=h.afterRenderEventManager;p.begin?.(),y?.begin();try{XT(s,o,s.template,c)}catch(b){throw d&&YT(o,b),b}finally{p.end?.(),h.effectManager?.flush(),y?.end()}}function XT(s,o,c,d){const h=o[bt];if(256!=(256&h)){o[bo].effectManager?.flush(),fi(o);try{Hg(o),function t0(s){return _t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&Hm(s,o,c,2,d);const y=3==(3&h);if(y){const D=s.preOrderCheckHooks;null!==D&&Qa(o,D,null)}else{const D=s.preOrderHooks;null!==D&&Ja(o,D,0,null),Pu(o,0)}if(function sP(s){for(let o=Ub(s);null!==o;o=C0(o)){if(!o[Bc])continue;const c=o[Ha];for(let d=0;d<c.length;d++){Wc(c[d])}}}(o),Km(o,2),null!==s.contentQueries&&tP(s,o),y){const D=s.contentCheckHooks;null!==D&&Qa(o,D)}else{const D=s.contentHooks;null!==D&&Ja(o,D,1),Pu(o,1)}!function zx(s,o){const c=s.hostBindingOpCodes;if(null===c)return;const d=Cl(o,Hi);try{for(let h=0;h<c.length;h++){const p=c[h];if(p<0)Js(~p);else{const y=p,C=c[++h],b=c[++h];Jg(C,y),d.dirty=!1;const D=kg(d);try{b(2,o[y])}finally{Cu(d,D)}}}}finally{null===o[Hi]&&gC(o,Hi),Js(-1)}}(s,o);const C=s.components;null!==C&&aP(o,C,0);const b=s.viewQuery;if(null!==b&&NC(2,b,d),y){const D=s.viewCheckHooks;null!==D&&Qa(o,D)}else{const D=s.viewHooks;null!==D&&Ja(o,D,2),Pu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[bt]&=-73,Yv(o)}finally{mr()}}}function Km(s,o){for(let c=Ub(s);null!==c;c=C0(c))for(let d=sr;d<c.length;d++)Ym(c[d],o)}function oP(s,o,c){Ym(hi(o,s),c)}function Ym(s,o){if(!function Ib(s){return 128==(128&s[bt])}(s))return;const c=s[je],d=s[bt];if(80&d&&0===o||1024&d||2===o)XT(c,s,c.template,s[zn]);else if(s[zs]>0){Km(s,1);const h=c.components;null!==h&&aP(s,h,1)}}function aP(s,o,c){for(let d=0;d<o.length;d++)oP(s,o[d],c)}class Qm{get rootNodes(){const o=this._lView,c=o[je];return Bf(c,o,c.firstChild,[])}constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zn]}set context(o){this._lView[zn]=o}get destroyed(){return 256==(256&this._lView[bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[fn];if(Lr(o)){const c=o[8],d=c?c.indexOf(this):-1;d>-1&&(wm(o,d),ic(c,d))}this._attachedToViewContainer=!1}w0(this._lView[je],this._lView)}onDestroy(o){!function jh(s,o){if(256==(256&s[bt]))throw new ee(911,!1);null===s[sa]&&(s[sa]=[]),s[sa].push(o)}(this._lView,o)}markForCheck(){cd(this._cdRefInjectingView||this._lView)}detach(){this._lView[bt]&=-129}reattach(){this._lView[bt]|=128}detectChanges(){Zm(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function df(s,o){gf(s,o,o[pt],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=o}}class $L extends Qm{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Zm(o[je],o,o[zn],!1)}checkNoChanges(){}get context(){return null}}class cP extends Mf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=Ft(o);return new $f(c,this.ngModule)}}function jf(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}class lP{constructor(o,c){this.injector=o,this.parentInjector=c}get(o,c,d){d=Yt(d);const h=this.injector.get(o,Um,d);return h!==Um||c===Um?h:this.parentInjector.get(o,c,d)}}class $f extends IT{get inputs(){const o=this.componentDef,c=o.inputTransforms,d=jf(o.inputs);if(null!==c)for(const h of d)c.hasOwnProperty(h.propName)&&(h.transform=c[h.propName]);return d}get outputs(){return jf(this.componentDef.outputs)}constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function fb(s){return s.map(Ag).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}create(o,c,d,h){let p=(h=h||this.ngModule)instanceof Bo?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new lP(o,p):o,C=y.get(xx,null);if(null===C)throw new ee(407,!1);const k={rendererFactory:C,sanitizer:y.get(Ox,null),effectManager:y.get(Ni,null),afterRenderEventManager:y.get(Nf,null)},q=C.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ue=d?function Gx(s,o,c,d){const p=d.get(dC,!1)||c===Bs.ShadowDom,y=s.selectRootElement(o,p);return function Wx(s){jT(s)}(y),y}(q,d,this.componentDef.encapsulation,y):Cm(q,Y,function HL(s){const o=s.toLowerCase();return"svg"===o?$g:"math"===o?"math":null}(Y)),ct=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let fe=null;null!==ue&&(fe=q0(ue,y,!0));const vt=Uf(0,null,null,1,0,null,null,null,null,null,null),At=zo(null,vt,null,ct,null,null,k,q,y,null,fe);let cn,qn;fi(At);try{const Jo=this.componentDef;let Xo,BI=null;Jo.findHostDirectiveDefs?(Xo=[],BI=new Map,Jo.findHostDirectiveDefs(Jo,Xo,BI),Xo.push(Jo)):Xo=[Jo];const _N=function dP(s,o){const c=s[je],d=Lt;return s[d]=o,uc(c,d,2,"#host",null)}(At,ue),Pt=function hP(s,o,c,d,h,p,y){const C=h[je];!function fP(s,o,c,d){for(const h of s)o.mergedAttrs=Lc(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(qm(o,o.mergedAttrs,!0),null!==c&&mf(d,c,o))}(d,s,o,y);let b=null;null!==o&&(b=q0(o,h[Gs]));const D=p.rendererFactory.createRenderer(o,c);let M=16;c.signals?M=4096:c.onPush&&(M=64);const k=zo(h,zm(c),null,M,h[s.index],s,p,D,null,null,b);return C.firstCreatePass&&SC(C,s,d.length-1),OC(h,k),h[s.index]=k}(_N,ue,Jo,Xo,At,k,q);qn=Vh(vt,Lt),ue&&function gP(s,o,c,d){if(d)ra(s,c,["ng-version",Lm.full]);else{const{attrs:h,classes:p}=function Ti(s){const o=[],c=[];let d=1,h=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++d]):8===h&&c.push(p);else{if(!ui(h))break;h=p}d++}return{attrs:o,classes:c}}(o.selectors[0]);h&&ra(s,c,h),p&&p.length>0&&qb(s,c,p.join(" "))}}(q,Jo,ue,d),void 0!==c&&function mP(s,o,c){const d=s.projection=[];for(let h=0;h<o.length;h++){const p=c[h];d.push(null!=p?Array.from(p):null)}}(qn,this.ngContentSelectors,c),cn=function pP(s,o,c,d,h,p){const y=Dr(),C=h[je],b=ei(y,h);TC(C,h,y,c,null,d);for(let M=0;M<c.length;M++)_i(ua(h,C,y.directiveStart+M,y),h);GT(C,h,y),b&&_i(b,h);const D=ua(h,C,y.directiveStart+y.componentOffset,y);if(s[zn]=h[zn]=D,null!==p)for(const M of p)M(D,o);return Ff(C,y,s),D}(Pt,Jo,Xo,BI,At,[_P]),Wm(vt,At,null)}finally{mr()}return new uP(this.componentType,cn,xf(qn,At),At,qn)}}class uP extends xL{constructor(o,c,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new $L(h),this.componentType=o}setInput(o,c){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),c))return;const p=this._rootLView;kC(p[je],p,h,o,c),this.previousInputValues.set(o,c),cd(hi(this._tNode.index,p))}}get injector(){return new ar(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function _P(){const s=Dr();Ya(ve()[je],s)}function Ca(s){let o=function Hf(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const d=[s];for(;o;){let h;if(zi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ee(903,!1);h=o.\u0275dir}if(h){if(c){d.push(h);const y=s;y.inputs=Jm(s.inputs),y.inputTransforms=Jm(s.inputTransforms),y.declaredInputs=Jm(s.declaredInputs),y.outputs=Jm(s.outputs);const C=h.hostBindings;C&&wP(s,C);const b=h.viewQuery,D=h.contentQueries;if(b&&vP(s,b),D&&CP(s,D),G(s.inputs,h.inputs),G(s.declaredInputs,h.declaredInputs),G(s.outputs,h.outputs),null!==h.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),G(y.inputTransforms,h.inputTransforms)),zi(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const C=p[y];C&&C.ngInherit&&C(s),C===Ca&&(c=!1)}}o=Object.getPrototypeOf(o)}!function yP(s){let o=0,c=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=Lc(h.hostAttrs,c=Lc(c,h.hostAttrs))}}(d)}function Jm(s){return s===$i?{}:s===Zt?[]:s}function vP(s,o){const c=s.viewQuery;s.viewQuery=c?(d,h)=>{o(d,h),c(d,h)}:o}function CP(s,o){const c=s.contentQueries;s.contentQueries=c?(d,h,p)=>{o(d,h,p),c(d,h,p)}:o}function wP(s,o){const c=s.hostBindings;s.hostBindings=c?(d,h)=>{o(d,h),c(d,h)}:o}function r1(s){const o=s.inputConfig,c={};for(const d in o)if(o.hasOwnProperty(d)){const h=o[d];Array.isArray(h)&&h[2]&&(c[d]=h[2])}s.inputTransforms=c}function ud(s){return!!zf(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function zf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Go(s,o,c){return s[o]=c}function yi(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function bl(s,o,c,d){const h=yi(s,o,c);return yi(s,o+1,d)||h}function Gf(s,o,c,d){const h=ve();return yi(h,Kc(),o)&&(Bt(),As(vn(),h,s,o,c,d)),Gf}function hc(s,o,c,d){return yi(s,Kc(),c)?o+re(c)+d:St}function dd(s,o,c,d,h,p){const C=bl(s,function Mo(){return _t.lFrame.bindingIndex}(),c,h);return Es(2),C?o+re(c)+d+re(h)+p:St}function r_(s,o,c,d,h,p,y,C){const b=ve(),D=Bt(),M=s+Lt,k=D.firstCreatePass?function NP(s,o,c,d,h,p,y,C,b){const D=o.consts,M=uc(o,s,4,y||null,So(D,C));Vf(o,c,M,So(D,b)),Ya(o,M);const k=M.tView=Uf(2,M,d,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D,null);return null!==o.queries&&(o.queries.template(o,M),k.queries=o.queries.embeddedTView(M)),M}(M,D,b,o,c,d,h,p,y):D.data[M];Is(k,!1);const q=KC(D,b,k,s);Xs()&&ff(D,b,q,k),_i(q,b),OC(b,b[M]=Gm(q,b,q,k)),$c(k)&&Lf(D,b,k),null!=y&&Il(b,k,C)}let KC=function i_(s,o,c,d){return eo(!0),o[pt].createComment("")};function QC(s){return Za(function Xv(){return _t.lFrame.contextLView}(),Lt+s)}function JC(s,o,c){const d=ve();return yi(d,Kc(),o)&&as(Bt(),vn(),d,s,o,d[pt],c,!1),JC}function XC(s,o,c,d,h){const y=h?"class":"style";kC(s,c,o.inputs[y],y,d)}function s_(s,o,c,d){const h=ve(),p=Bt(),y=Lt+s,C=h[pt],b=p.firstCreatePass?function FP(s,o,c,d,h,p){const y=o.consts,b=uc(o,s,2,d,So(y,h));return Vf(o,c,b,So(y,p)),null!==b.attrs&&qm(b,b.attrs,!1),null!==b.mergedAttrs&&qm(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(y,p,h,o,c,d):p.data[y],D=o_(p,h,b,C,o,s);h[y]=D;const M=$c(b);return Is(b,!0),mf(C,D,b),32!=(32&b.flags)&&Xs()&&ff(p,h,D,b),0===function Gg(){return _t.lFrame.elementDepthCount}()&&_i(D,h),function Wg(){_t.lFrame.elementDepthCount++}(),M&&(Lf(p,h,b),Ff(p,b,h)),null!==d&&Il(h,b),s_}function Jf(){let s=Dr();Kg()?function Yg(){_t.lFrame.isParent=!1}():(s=s.parent,Is(s,!1));const o=s;(function qc(s){return _t.skipHydrationRootTNode===s})(o)&&function Zg(){_t.skipHydrationRootTNode=null}(),function Qv(){_t.lFrame.elementDepthCount--}();const c=Bt();return c.firstCreatePass&&(Ya(c,s),Eh(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Po(s){return 0!=(8&s.flags)}(o)&&XC(c,o,ve(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Xc(s){return 0!=(16&s.flags)}(o)&&XC(c,o,ve(),o.stylesWithoutHost,!1),Jf}function ew(s,o,c,d){return s_(s,o,c,d),Jf(),ew}let o_=(s,o,c,d,h,p)=>(eo(!0),Cm(d,h,function nm(){return _t.lFrame.currentNamespace}()));function C1(){return ve()}function ep(s){return!!s&&"function"==typeof s.then}function w1(s){return!!s&&"function"==typeof s.subscribe}function iw(s,o,c,d){const h=ve(),p=Bt(),y=Dr();return function sw(s,o,c,d,h,p,y){const C=$c(d),D=s.firstCreatePass&&ZT(s),M=o[zn],k=RC(o);let q=!0;if(3&d.type||y){const Se=ei(d,o),$e=y?y(Se):Se,ct=k.length,fe=y?At=>y(on(At[d.index])):d.index;let vt=null;if(!y&&C&&(vt=function I1(s,o,c,d){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===c&&h[p+1]===d){const C=o[ia],b=h[p+2];return C.length>b?C[b]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,d.index)),null!==vt)(vt.__ngLastListenerFn__||vt).__ngNextListenerFn__=p,vt.__ngLastListenerFn__=p,q=!1;else{p=b1(d,o,M,p,!1);const At=c.listen($e,h,p);k.push(p,At),D&&D.push(h,fe,ct,ct+1)}}else p=b1(d,o,M,p,!1);const Y=d.outputs;let ue;if(q&&null!==Y&&(ue=Y[h])){const Se=ue.length;if(Se)for(let $e=0;$e<Se;$e+=2){const cn=o[ue[$e]][ue[$e+1]].subscribe(p),qn=k.length;k.push(p,cn),D&&D.push(h,d.index,qn,-(qn+1))}}}(p,h,h[pt],y,s,o,d),iw}function E1(s,o,c,d){try{return ws(6,o,c),!1!==c(d)}catch(h){return YT(s,h),!1}finally{ws(7,o,c)}}function b1(s,o,c,d,h){return function p(y){if(y===Function)return d;cd(s.componentOffset>-1?hi(s.index,o):o);let b=E1(o,c,d,y),D=p.__ngNextListenerFn__;for(;D;)b=E1(o,c,D,y)&&b,D=D.__ngNextListenerFn__;return h&&!1===b&&y.preventDefault(),b}}function T1(s=1){return function xu(s){return(_t.lFrame.contextLView=function Wh(s,o){for(;s>0;)o=o[Si],s--;return o}(s,_t.lFrame.contextLView))[zn]}(s)}function tp(s,o,c){return l_(s,"",o,"",c),tp}function l_(s,o,c,d,h){const p=ve(),y=hc(p,o,c,d);return y!==St&&as(Bt(),vn(),p,s,y,p[pt],h,!1),l_}function d_(s,o){return s<<17|o<<2}function pc(s){return s>>17&32767}function cw(s){return 2|s}function cr(s){return(131068&s)>>2}function lw(s,o){return-131069&s|o<<2}function uw(s){return 1|s}function P1(s,o,c,d,h){const p=s[c+1],y=null===o;let C=d?pc(p):cr(p),b=!1;for(;0!==C&&(!1===b||y);){const M=s[C+1];hw(s[C],o)&&(b=!0,s[C+1]=d?uw(M):cw(M)),C=d?pc(M):cr(M)}b&&(s[c+1]=d?cw(p):uw(p))}function hw(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&sc(s,o)>=0}const Mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function O1(s){return s.substring(Mr.key,Mr.keyEnd)}function N1(s,o){const c=Mr.textEnd;return c===o?-1:(o=Mr.keyEnd=function pw(s,o,c){for(;o<c&&s.charCodeAt(o)>32;)o++;return o}(s,Mr.key=o,c),yd(s,o,c))}function yd(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function gw(s,o){return function cs(s,o,c,d){const h=ve(),p=Bt(),y=Es(2);p.firstUpdatePass&&L1(p,s,y,d),o!==St&&yi(h,y,o)&&V1(p,p.data[ti()],h,h[pt],s,h[y+1]=function Zo(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=X(ac(s)))),s}(o,c),d,y)}(s,o,null,!0),gw}function p_(s){!function lo(s,o,c,d){const h=Bt(),p=Es(2);h.firstUpdatePass&&L1(h,null,p,d);const y=ve();if(c!==St&&yi(y,p,c)){const C=h.data[ti()];if(Cw(C,d)&&!g_(h,p)){let b=d?C.classesWithoutHost:C.stylesWithoutHost;null!==b&&(c=Oe(b,c||"")),XC(h,C,y,c,d)}else!function vw(s,o,c,d,h,p,y,C){h===St&&(h=Zt);let b=0,D=0,M=0<h.length?h[0]:null,k=0<p.length?p[0]:null;for(;null!==M||null!==k;){const q=b<h.length?h[b+1]:void 0,Y=D<p.length?p[D+1]:void 0;let Se,ue=null;M===k?(b+=2,D+=2,q!==Y&&(ue=k,Se=Y)):null===k||null!==M&&M<k?(b+=2,ue=M):(D+=2,ue=k,Se=Y),null!==ue&&V1(s,o,c,d,ue,Se,y,C),M=b<h.length?h[b]:null,k=D<p.length?p[D]:null}}(h,C,y,y[pt],y[p+1],y[p+1]=function U1(s,o,c){if(null==c||""===c)return Zt;const d=[],h=ac(c);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(d,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(d,p,h[p]);else"string"==typeof h&&o(d,h);return d}(s,o,c),d,p)}}(YP,qo,s,!0)}function qo(s,o){for(let c=function zP(s){return function R1(s){Mr.key=0,Mr.keyEnd=0,Mr.value=0,Mr.valueEnd=0,Mr.textEnd=s.length}(s),N1(s,yd(s,0,Mr.textEnd))}(o);c>=0;c=N1(o,c))xi(s,O1(o),!0)}function g_(s,o){return o>=s.expandoStartIndex}function L1(s,o,c,d){const h=s.data;if(null===h[c+1]){const p=h[ti()],y=g_(s,c);Cw(p,d)&&null===o&&!y&&(o=!1),o=function mw(s,o,c,d){const h=function zh(s){const o=_t.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(c=xl(c=rp(null,s,o,c,d),o.attrs,d),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(c=rp(h,s,o,c,d),null===p){let b=function ZP(s,o,c){const d=c?o.classBindings:o.styleBindings;if(0!==cr(d))return s[pc(d)]}(s,o,d);void 0!==b&&Array.isArray(b)&&(b=rp(null,s,o,b[1],d),b=xl(b,o.attrs,d),function _w(s,o,c,d){s[pc(c?o.classBindings:o.styleBindings)]=d}(s,o,d,b))}else p=function KP(s,o,c){let d;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)d=xl(d,s[p].hostAttrs,c);return xl(d,o.attrs,c)}(s,o,d)}return void 0!==p&&(d?o.residualClasses=p:o.residualStyles=p),c}(h,p,o,d),function $P(s,o,c,d,h,p){let y=p?o.classBindings:o.styleBindings,C=pc(y),b=cr(y);s[d]=c;let M,D=!1;if(Array.isArray(c)?(M=c[1],(null===M||sc(c,M)>0)&&(D=!0)):M=c,h)if(0!==b){const q=pc(s[C+1]);s[d+1]=d_(q,C),0!==q&&(s[q+1]=lw(s[q+1],d)),s[C+1]=function Br(s,o){return 131071&s|o<<17}(s[C+1],d)}else s[d+1]=d_(C,0),0!==C&&(s[C+1]=lw(s[C+1],d)),C=d;else s[d+1]=d_(b,0),0===C?C=d:s[b+1]=lw(s[b+1],d),b=d;D&&(s[d+1]=cw(s[d+1])),P1(s,M,d,!0),P1(s,M,d,!1),function dw(s,o,c,d,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&sc(p,o)>=0&&(c[d+1]=uw(c[d+1]))}(o,M,s,d,p),y=d_(C,b),p?o.classBindings=y:o.styleBindings=y}(h,p,o,c,y,d)}}function rp(s,o,c,d,h){let p=null;const y=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<y&&(p=o[C],d=xl(d,p.hostAttrs,h),p!==s);)C++;return null!==s&&(c.directiveStylingLast=C),d}function xl(s,o,c){const d=c?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),xi(s,y,!!c||o[++p]))}return void 0===s?null:s}function YP(s,o,c){const d=String(o);""!==d&&!d.includes(" ")&&xi(s,d,c)}function V1(s,o,c,d,h,p,y,C){if(!(3&o.type))return;const b=s.data,D=b[C+1],M=function x1(s){return 1==(1&s)}(D)?m_(b,o,c,h,cr(D),y):void 0;__(M)||(__(p)||function aw(s){return 2==(2&s)}(D)&&(p=m_(b,null,c,h,C,y)),function tx(s,o,c,d,h){if(o)h?s.addClass(c,d):s.removeClass(c,d);else{let p=-1===d.indexOf("-")?void 0:nf.DashCase;null==h?s.removeStyle(c,d,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=nf.Important),s.setStyle(c,d,h,p))}}(d,y,Ys(ti(),c),h,p))}function m_(s,o,c,d,h,p){const y=null===o;let C;for(;h>0;){const b=s[h],D=Array.isArray(b),M=D?b[1]:b,k=null===M;let q=c[h+1];q===St&&(q=k?Zt:void 0);let Y=k?Xh(q,d):M===d?q:void 0;if(D&&!__(Y)&&(Y=Xh(b,d)),__(Y)&&(C=Y,y))return C;const ue=s[h+1];h=y?pc(ue):cr(ue)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(C=Xh(b,d))}return C}function __(s){return void 0!==s}function Cw(s,o){return 0!=(s.flags&(o?8:16))}function ww(s,o=""){const c=ve(),d=Bt(),h=s+Lt,p=d.firstCreatePass?uc(d,h,1,o,null):d.data[h],y=ip(d,c,p,o,s);c[h]=y,Xs()&&ff(d,c,y,p),Is(p,!1)}let ip=(s,o,c,d,h)=>(eo(!0),function vm(s,o){return s.createText(o)}(o[pt],d));function xs(s){return vd("",s,""),xs}function vd(s,o,c){const d=ve(),h=hc(d,s,o,c);return h!==St&&co(d,ti(),h),vd}function $1(s,o,c,d,h){const p=ve(),y=dd(p,s,o,c,d,h);return y!==St&&co(p,ti(),y),$1}const Ps=void 0;var K1=["en",[["a","p"],["AM","PM"],Ps],[["AM","PM"],Ps,Ps],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ps,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ps,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ps,"{1} 'at' {0}",Ps],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wd(s){const c=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Id={};function wa(s){const o=function aO(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=oO(o);if(c)return c;const d=o.split("-")[0];if(c=oO(d),c)return c;if("en"===d)return K1;throw new ee(701,!1)}function gc(s){return wa(s)[jr.PluralCase]}function oO(s){return s in Id||(Id[s]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[s]),Id[s]}var jr=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(jr||{});const mc="en-US";let Os=mc;function gp(s,o,c,d,h){if(s=Ce(s),Array.isArray(s))for(let p=0;p<s.length;p++)gp(s[p],o,c,d,h);else{const p=Bt(),y=ve(),C=Dr();let b=nd(s)?s:Ce(s.provide);const D=U0(s),M=1048575&C.providerIndexes,k=C.directiveStart,q=C.providerIndexes>>20;if(nd(s)||!s.multi){const Y=new aa(D,h,wl),ue=Rl(b,o,h?M:M+q,k);-1===ue?(ec(En(C,y),p,b),U_(p,s,o.length),o.push(b),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),c.push(Y),y.push(Y)):(c[ue]=Y,y[ue]=Y)}else{const Y=Rl(b,o,M+q,k),ue=Rl(b,o,M,M+q),$e=ue>=0&&c[ue];if(h&&!$e||!h&&!(Y>=0&&c[Y])){ec(En(C,y),p,b);const ct=function B_(s,o,c,d,h){const p=new aa(s,c,wl);return p.multi=[],p.index=o,p.componentProviders=0,mD(p,h,d&&!c),p}(h?yD:_D,c.length,h,d,D);!h&&$e&&(c[ue].providerFactory=ct),U_(p,s,o.length,0),o.push(b),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),c.push(ct),y.push(ct)}else U_(p,s,Y>-1?Y:ue,mD(c[h?ue:Y],D,!h&&d));!h&&d&&$e&&c[ue].componentProviders++}}}function U_(s,o,c,d){const h=nd(o),p=function EL(s){return!!s.useClass}(o);if(h||p){const b=(p?Ce(o.useClass):o).prototype.ngOnDestroy;if(b){const D=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=D.indexOf(c);-1===M?D.push(c,[d,b]):D[M+1].push(d,b)}else D.push(c,b)}}}function mD(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function Rl(s,o,c,d){for(let h=c;h<d;h++)if(o[h]===s)return h;return-1}function _D(s,o,c,d){return V_(this.multi,[])}function yD(s,o,c,d){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=ua(c,c[je],this.providerFactory.index,d);p=C.slice(0,y),V_(h,p);for(let b=y;b<C.length;b++)p.push(C[b])}else p=[],V_(h,p);return p}function V_(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function vD(s,o=[]){return c=>{c.providersResolver=(d,h)=>function Bw(s,o,c){const d=Bt();if(d.firstCreatePass){const h=zi(s);gp(c,d.data,d.blueprint,h,!0),gp(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class kl{}class Fl{}function IO(s,o){return new Ea(s,o??null,[])}class Ea extends kl{constructor(o,c,d){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cP(this);const h=Kr(o);this._bootstrapComponents=va(h.bootstrap),this._r3Injector=MT(o,c,[{provide:kl,useValue:this},{provide:Mf,useValue:this.componentFactoryResolver},...d],X(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class j_ extends Fl{constructor(o){super(),this.moduleType=o}create(o){return new Ea(this.moduleType,o,[])}}class jw extends kl{constructor(o){super(),this.componentFactoryResolver=new cP(this),this.instance=null;const c=new Ef([...o.providers,{provide:kl,useValue:this},{provide:Mf,useValue:this.componentFactoryResolver}],o.parent||pl(),o.debugName,new Set(["environment"]));this.injector=c,o.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Ad(s,o,c=null){return new jw({providers:s,parent:o,debugName:c,runEnvironmentInitializers:!0}).injector}let CD=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const d=fT(0,c.type),h=d.length>0?Ad([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,h)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ft({token:s,providedIn:"environment",factory:()=>new s(Be(Bo))})}return s})();function Ci(s){s.getStandaloneInjector=o=>o.get(CD).getOrCreateStandaloneInjector(s)}function q_(s,o,c){const d=Sr()+s,h=ve();return h[d]===St?Go(h,d,c?o.call(c):o()):function El(s,o){return s[o]}(h,d)}function Gw(s,o,c,d){return SD(ve(),Sr(),s,o,c,d)}function Ww(s,o,c,d,h){return function AD(s,o,c,d,h,p,y){const C=o+c;return bl(s,C,h,p)?Go(s,C+2,y?d.call(y,h,p):d(h,p)):Ul(s,C+2)}(ve(),Sr(),s,o,c,d,h)}function Ul(s,o){const c=s[o];return c===St?void 0:c}function SD(s,o,c,d,h,p){const y=o+c;return yi(s,y,h)?Go(s,y+1,p?d.call(p,h):d(h)):Ul(s,y+1)}function qw(s,o,c,d,h,p,y,C){const b=o+c;return function e_(s,o,c,d,h){const p=bl(s,o,c,d);return yi(s,o+2,h)||p}(s,b,h,p,y)?Go(s,b+3,C?d.call(C,h,p,y):d(h,p,y)):Ul(s,b+3)}function _c(s,o){const c=Bt();let d;const h=s+Lt;c.firstCreatePass?(d=function ba(s,o){if(o)for(let c=o.length-1;c>=0;c--){const d=o[c];if(s===d.name)return d}}(o,c.pipeRegistry),c.data[h]=d,d.onDestroy&&(c.destroyHooks??=[]).push(h,d.onDestroy)):d=c.data[h];const p=d.factory||(d.factory=Zs(d.type)),C=sn(wl);try{const b=Ar(!1),D=p();return Ar(b),function kP(s,o,c,d){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),o[c]=d}(c,ve(),h,D),D}finally{sn(C)}}function Qw(s,o,c){const d=s+Lt,h=ve(),p=Za(h,d);return Tp(h,d)?SD(h,Sr(),o,p.transform,c,p):p.transform(c)}function Ip(s,o,c,d,h){const p=s+Lt,y=ve(),C=Za(y,p);return Tp(y,p)?qw(y,Sr(),o,C.transform,c,d,h,C):C.transform(c,d,h)}function Tp(s,o){return s[je].data[o].pure}function xD(){return this._results[Symbol.iterator]()}class Jw{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new jo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Jw.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=xD)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const d=this;d.dirty=!1;const h=function ri(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function dm(s,o,c){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],p=o[d];if(c&&(h=c(h),p=c(p)),p!==h)return!1}return!0}(d._results,h,c))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function TO(s,o,c,d=!0){const h=o[je];if(function KM(s,o,c,d){const h=sr+d,p=c.length;d>0&&(c[h-1][Di]=o),d<p-sr?(o[Di]=c[h],a0(c,sr+d,o)):(c.push(o),o[Di]=null),o[fn]=c;const y=o[$a];null!==y&&c!==y&&function YM(s,o){const c=s[Ha];o[ir]!==o[fn][fn][ir]&&(s[Bc]=!0),null===c?s[Ha]=[o]:c.push(o)}(y,o);const C=o[Yr];null!==C&&C.insertView(s),o[bt]|=128}(h,o,s,c),d){const p=T0(c,s),y=o[pt],C=Im(y,s[Qr]);null!==C&&function uf(s,o,c,d,h,p){d[In]=h,d[Tr]=o,gf(s,d,c,1,h,p)}(h,s[Tr],y,o,C,p)}}let Ns=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=ND}return s})();const PD=Ns,OD=class extends PD{constructor(o,c,d){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,c){return this.createEmbeddedViewImpl(o,c)}createEmbeddedViewImpl(o,c,d){const h=function bO(s,o,c,d){const h=o.tView,C=zo(s,h,c,4096&s[bt]?4096:16,null,o,null,null,null,d?.injector??null,d?.hydrationInfo??null);C[$a]=s[o.index];const D=s[Yr];return null!==D&&(C[Yr]=D.createEmbeddedView(h)),Wm(h,C,c),C}(this._declarationLView,this._declarationTContainer,o,{injector:c,hydrationInfo:d});return new Qm(h)}};function ND(){return Ta(Dr(),ve())}function Ta(s,o){return 4&s.type?new OD(o,s,xf(s,o)):null}let J_=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=SO}return s})();function SO(){return Sp(Dr(),ve())}const AO=J_,UD=class extends AO{constructor(o,c,d){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=d}get element(){return xf(this._hostTNode,this._hostLView)}get injector(){return new ar(this._hostTNode,this._hostLView)}get parentInjector(){const o=la(this._hostTNode,this._hostLView);if(Ru(o)){const c=Jt(o,this._hostLView),d=Mi(o);return new ar(c[je].data[d+8],c)}return new ar(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=Dp(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-sr}createEmbeddedView(o,c,d){let h,p;"number"==typeof d?h=d:null!=d&&(h=d.index,p=d.injector);const C=o.createEmbeddedViewImpl(c||{},p,null);return this.insertImpl(C,h,false),C}createComponent(o,c,d,h,p){const y=o&&!function ro(s){return"function"==typeof s}(o);let C;if(y)C=c;else{const Se=c||{};C=Se.index,d=Se.injector,h=Se.projectableNodes,p=Se.environmentInjector||Se.ngModuleRef}const b=y?o:new $f(Ft(o)),D=d||this.parentInjector;if(!p&&null==b.ngModule){const $e=(y?D:this.parentInjector).get(Bo,null);$e&&(p=$e)}Ft(b.componentType??{});const Y=b.create(D,h,null,p);return this.insertImpl(Y.hostView,C,false),Y}insert(o,c){return this.insertImpl(o,c,!1)}insertImpl(o,c,d){const h=o._lView;if(function Su(s){return Lr(s[fn])}(h)){const b=this.indexOf(o);if(-1!==b)this.detach(b);else{const D=h[fn],M=new UD(D,D[Tr],D[fn]);M.detach(M.indexOf(o))}}const y=this._adjustIndex(c),C=this._lContainer;return TO(C,h,y,!d),o.attachToViewContainerRef(),a0(Vl(C),y,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=Dp(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),d=wm(this._lContainer,c);d&&(ic(Vl(this._lContainer),c),w0(d[je],d))}detach(o){const c=this._adjustIndex(o,-1),d=wm(this._lContainer,c);return d&&null!=ic(Vl(this._lContainer),c)?new Qm(d):null}_adjustIndex(o,c=0){return o??this.length+c}};function Dp(s){return s[8]}function Vl(s){return s[8]||(s[8]=[])}function Sp(s,o){let c;const d=o[s.index];return Lr(d)?c=d:(c=Gm(d,o,null,s),o[s.index]=c,OC(o,c)),rI(c,o,s,d),new UD(c,s,o)}let rI=function xd(s,o,c,d){if(s[Qr])return;let h;h=8&c.type?on(d):function nI(s,o){const c=s[pt],d=c.createComment(""),h=ei(o,s);return hl(c,Im(c,h),d,function XM(s,o){return s.nextSibling(o)}(c,h),!1),d}(o,c),s[Qr]=h};class Rn{constructor(o){this.queryList=o,this.matches=null}clone(){return new Rn(this.queryList)}setDirty(){this.queryList.setDirty()}}class X_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const d=null!==o.contentQueries?o.contentQueries[0]:c.length,h=[];for(let p=0;p<d;p++){const y=c.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new X_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==uI(o,c).matches&&this.queries[c].setDirty()}}class VD{constructor(o,c,d=null){this.predicate=o,this.flags=c,this.read=d}}class iI{constructor(o=[]){this.queries=o}elementStart(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let d=0;d<this.length;d++){const h=null!==c?c.length:0,p=this.getByIndex(d).embeddedTView(o,h);p&&(p.indexInDeclarationView=d,null!==c?c.push(p):c=[p])}return null!==c?new iI(c):null}template(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class sI{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new sI(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(o,c,BD(c,p)),this.matchTNodeWithReadOption(o,c,No(c,o,p,!1,!1))}else d===Ns?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,No(c,o,d,!1,!1))}matchTNodeWithReadOption(o,c,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===vl||h===J_||h===Ns&&4&c.type)this.addMatch(c.index,-2);else{const p=No(c,o,h,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,d)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function BD(s,o){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===o)return c[d+1];return null}function $D(s,o,c,d){return-1===c?function jD(s,o){return 11&s.type?xf(s,o):4&s.type?Ta(s,o):null}(o,s):-2===c?function ey(s,o,c){return c===vl?xf(o,s):c===Ns?Ta(o,s):c===J_?Sp(o,s):void 0}(s,o,d):ua(s,s[je],c,o)}function oI(s,o,c,d){const h=o[Yr].queries[d];if(null===h.matches){const p=s.data,y=c.matches,C=[];for(let b=0;b<y.length;b+=2){const D=y[b];C.push(D<0?null:$D(o,p[D],y[b+1],c.metadata.read))}h.matches=C}return h.matches}function Rs(s,o,c,d){const h=s.queries.getByIndex(c),p=h.matches;if(null!==p){const y=oI(s,o,h,c);for(let C=0;C<p.length;C+=2){const b=p[C];if(b>0)d.push(y[C/2]);else{const D=p[C+1],M=o[-b];for(let k=sr;k<M.length;k++){const q=M[k];q[$a]===q[fn]&&Rs(q[je],q,D,d)}if(null!==M[Ha]){const k=M[Ha];for(let q=0;q<k.length;q++){const Y=k[q];Rs(Y[je],Y,D,d)}}}}}return d}function aI(s){const o=ve(),c=Bt(),d=n0();em(d+1);const h=uI(c,d);if(s.dirty&&function Bh(s){return 4==(4&s[bt])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Rs(c,o,d,[]):oI(c,o,h,d);s.reset(p,Oi),s.notifyOnChanges()}return!0}return!1}function cI(s,o,c,d){const h=Bt();if(h.firstCreatePass){const p=Dr();(function ny(s,o,c){null===s.queries&&(s.queries=new iI),s.queries.track(new sI(o,c))})(h,new VD(o,c,d),p.index),function ry(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}!function lI(s,o,c){const d=new Jw(4==(4&c));(function CC(s,o,c,d){const h=RC(o);h.push(c),s.firstCreatePass&&ZT(s).push(d,h.length-1)})(s,o,d,d.destroy),null===o[Yr]&&(o[Yr]=new X_),o[Yr].queries.push(new Rn(d))}(h,ve(),c)}function ty(){return function Mp(s,o){return s[Yr].queries[o].queryList}(ve(),n0())}function uI(s,o){return s.queries.getByIndex(o)}function xp(s,o){return Ta(s,o)}function sy(s){return!!Kr(s)}const rt=new an("Application Initializer");let _I=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d}),this.appInits=Ke(rt,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const h of this.appInits){const p=h();if(ep(p))c.push(p);else if(w1(p)){const y=new Promise((C,b)=>{p.subscribe({complete:C,error:b})});c.push(y)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{d()}).catch(h=>{this.reject(h)}),0===c.length&&d(),this.initialized=!0}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),qe=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const ye=new an("LocaleId",{providedIn:"root",factory:()=>Ke(ye,dt.Optional|dt.SkipSelf)||function ae(){return typeof $localize<"u"&&$localize.locale||mc}()}),Or=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let nS=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class $O{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let HO=(()=>{class s{compileModuleSync(c){return new j_(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),p=va(Kr(c).declarations).reduce((y,C)=>{const b=Ft(C);return b&&y.push(new $f(b)),y},[]);return new $O(d,p)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const gy=new an(""),te=new an("");let ql,my=(()=>{class s{constructor(c,d,h){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ql||(function ZO(s){ql=s}(h),h.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:h})}whenStable(c,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,h){return[]}static#e=this.\u0275fac=function(d){return new(d||s)(Be(Vr),Be(ks),Be(te))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac})}return s})(),ks=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return ql?.findTestabilityInTree(this,c,d)??null}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),ki=null;const oS=new an("AllowMultipleToken"),Sa=new an("PlatformDestroyListeners"),_y=new an("appBootstrapListener");class Bp{constructor(o,c){this.name=o,this.token=c}}function wI(s,o,c=[]){const d=`Platform: ${o}`,h=new an(d);return(p=[])=>{let y=yy();if(!y||y.injector.get(oS,!1)){const C=[...c,...p,{provide:h,useValue:!0}];s?s(C):function jp(s){if(ki&&!ki.get(oS,!1))throw new ee(400,!1);(function aS(){!function Ug(s){zv=s}(()=>{throw new ee(600,!1)})})(),ki=s;const o=s.get(lS);(function ai(s){s.get(_T,null)?.forEach(c=>c())})(s)}(function II(s=[],o){return ao.create({name:o,providers:[{provide:V,useValue:"platform"},{provide:Sa,useValue:new Set([()=>ki=null])},...s]})}(C,d))}return function Yo(s){const o=yy();if(!o)throw new ee(401,!1);return o}()}}function yy(){return ki?.get(lS)??null}let lS=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const h=function KO(s="zone.js",o){return"noop"===s?new sC:"zone.js"===s?new Vr(o):s}(d?.ngZone,function uS(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return h.run(()=>{const p=function $_(s,o,c){return new Ea(s,o,c)}(c.moduleType,this.injector,function gS(s){return[{provide:Vr,useFactory:s},{provide:td,multi:!0,useFactory:()=>{const o=Ke(QO,{optional:!0});return()=>o.initialize()}},{provide:pS,useFactory:YO},{provide:oC,useFactory:aC}]}(()=>h)),y=p.injector.get(cc,null);return h.runOutsideAngular(()=>{const C=h.onError.subscribe({next:b=>{y.handleError(b)}});p.onDestroy(()=>{vy(this._modules,p),C.unsubscribe()})}),function dS(s,o,c){try{const d=c();return ep(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(y,h,()=>{const C=p.injector.get(_I);return C.runInitializers(),C.donePromise.then(()=>(function Ze(s){Qe(s,"Expected localeId to be defined"),"string"==typeof s&&(Os=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(ye,mc)||mc),this._moduleDoBootstrap(p),p))})})}bootstrapModule(c,d=[]){const h=hS({},d);return function CI(s,o,c){const d=new j_(c);return Promise.resolve(d)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(c){const d=c.injector.get(kd);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new ee(-403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Sa,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(d){return new(d||s)(Be(ao))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function hS(s,o){return Array.isArray(o)?o.reduce(hS,s):{...s,...o}}let kd=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ke(pS),this.zoneIsStable=Ke(oC),this.componentTypes=[],this.components=[],this.isStable=Ke(nS).hasPendingTasks.pipe((0,Fe.w)(c=>c?(0,Ie.of)(!1):this.zoneIsStable),(0,De.x)(),(0,Pe.B)()),this._injector=Ke(Bo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const h=c instanceof IT;if(!this._injector.get(_I).done)throw!h&&ja(c),new ee(405,!1);let y;y=h?c:this._injector.get(Mf).resolveComponentFactory(c),this.componentTypes.push(y.componentType);const C=function ds(s){return s.isBoundToModule}(y)?void 0:this._injector.get(kl),D=y.create(ao.NULL,[],d||y.selector,C),M=D.location.nativeElement,k=D.injector.get(gy,null);return k?.registerApplication(M),D.onDestroy(()=>{this.detachView(D.hostView),vy(this.components,D),k?.unregisterApplication(M)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;vy(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const d=this._injector.get(_y,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>vy(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ee(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function vy(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}const pS=new an("",{providedIn:"root",factory:()=>Ke(cc).handleError.bind(void 0)});function YO(){const s=Ke(Vr),o=Ke(cc);return c=>s.runOutsideAngular(()=>o.handleError(c))}let QO=(()=>{class s{constructor(){this.zone=Ke(Vr),this.applicationRef=Ke(kd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function XO(){return!1}let nN=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=TI}return s})();function TI(s){return function Hr(s,o,c){if(qs(s)&&!c){const d=hi(s.index,o);return new Qm(d,d)}return 47&s.type?new Qm(o[ir],o):null}(Dr(),ve(),16==(16&s))}class Aa{constructor(){}supports(o){return ud(o)}create(o){return new wy(o)}}const Cc=(s,o)=>o;class wy{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Cc}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,d=this._removalsHead,h=0,p=null;for(;c||d;){const y=!d||c&&c.currentIndex<Ma(d,h,p)?c:d,C=Ma(y,h,p),b=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(c=c._next,null==y.previousIndex)h++;else{p||(p=[]);const D=C-h,M=b-h;if(D!=M){for(let q=0;q<D;q++){const Y=q<p.length?p[q]:p[q]=0,ue=Y+q;M<=ue&&ue<D&&(p[q]=Y+1)}p[y.previousIndex]=M-D}}C!==b&&o(y,C,b)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!ud(o))throw new ee(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,c=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)p=o[C],y=this._trackByFn(C,p),null!==c&&Object.is(c.trackById,y)?(d&&(c=this._verifyReinsertion(c,p,y,C)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,y,C),d=!0),c=c._next}else h=0,function UC(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[Symbol.iterator]();let d;for(;!(d=c.next()).done;)o(d.value)}}(o,C=>{y=this._trackByFn(h,C),null!==c&&Object.is(c.trackById,y)?(d&&(c=this._verifyReinsertion(c,C,y,h)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,y,h),d=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,d,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,p,h)):o=this._addAfter(new wc(c,d),p,h),o}_verifyReinsertion(o,c,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,c,d),this._addToMoves(o,d),o}_moveAfter(o,c,d){return this._unlink(o),this._insertAfter(o,c,d),this._addToMoves(o,d),o}_addAfter(o,c,d){return this._insertAfter(o,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,d){const h=null===c?this._itHead:c._next;return o._next=h,o._prev=c,null===h?this._itTail=o:h._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ld),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,d=o._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ld),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class wc{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Qo{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const c=o._prevDup,d=o._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class Ld{constructor(){this.map=new Map}put(o){const c=o.trackById;let d=this.map.get(c);d||(d=new Qo,this.map.set(c,d)),d.add(o)}get(o,c){const h=this.map.get(o);return h?h.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ma(s,o,c){const d=s.previousIndex;if(null===d)return d;let h=0;return c&&d<c.length&&(h=c[d]),d+o+h}class MI{constructor(){}supports(o){return o instanceof Map||zf(o)}create(){return new Ud}}class Ud{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||zf(o)))throw new ee(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(h,d);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const d=o._prev;return c._next=o,c._prev=d,o._prev=c,d&&(d._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,c);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const d=new xI(o);return this._records.set(o,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(d=>c(o[d],d))}}class xI{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $p(){return new xa([new Aa])}let xa=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:$p});constructor(c){this.factories=c}static create(c,d){if(null!=d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||$p()),deps:[[s,new He,new oe]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(null!=d)return d;throw new ee(901,!1)}}return s})();function Vd(){return new Iy([new MI])}let Iy=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:Vd});constructor(c){this.factories=c}static create(c,d){if(d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||Vd()),deps:[[s,new He,new oe]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(d)return d;throw new ee(901,!1)}}return s})();const oN=wI(null,"core",[]);let aN=(()=>{class s{constructor(c){}static#e=this.\u0275fac=function(d){return new(d||s)(Be(kd))};static#t=this.\u0275mod=hu({type:s});static#n=this.\u0275inj=Mn({})}return s})();function hN(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function Na(s){const o=Ft(s);if(!o)return null;const c=new $f(o);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3399:(st,Ee,F)=>{F.d(Ee,{Z:()=>Je});var u=F(9058),B=F(4537),L=F(7592),ne=F(7879);class ge{constructor(Ae,Te){this._delegate=Ae,this.firebase=Te,(0,L._addComponent)(Ae,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this._delegate.automaticDataCollectionEnabled=Ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ae=>{this._delegate.checkDestroyed(),Ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Ae,Te=L._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(Ae);return!ot.isInitialized()&&"EXPLICIT"===(null===(tt=ot.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:Te})}_removeServiceInstance(Ae,Te=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ae).clearInstance(Te)}_addComponent(Ae){(0,L._addComponent)(this._delegate,Ae)}_addOrOverwriteComponent(Ae){(0,L._addOrOverwriteComponent)(this._delegate,Ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function De(){const Ce=function Fe(Ce){const Ae={},Te={__esModule:!0,initializeApp:function ee(ke,j={}){const we=L.initializeApp(ke,j);if((0,u.r3)(Ae,we.name))return Ae[we.name];const Ue=new Ce(we,Te);return Ae[we.name]=Ue,Ue},app:ot,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function re(ke){const j=ke.name,we=j.replace("-compat","");if(L._registerComponent(ke)&&"PUBLIC"===ke.type){const Ue=(lt=ot())=>{if("function"!=typeof lt[we])throw Pe.create("invalid-app-argument",{appName:j});return lt[we]()};void 0!==ke.serviceProps&&(0,u.ZB)(Ue,ke.serviceProps),Te[we]=Ue,Ce.prototype[we]=function(...lt){return this._getService.bind(this,j).apply(this,ke.multipleInstances?lt:[])}}return"PUBLIC"===ke.type?Te[we]:null},removeApp:function tt(ke){delete Ae[ke]},useAsService:function he(ke,j){return"serverAuth"===j?null:j},modularAPIs:L}};function ot(ke){if(!(0,u.r3)(Ae,ke=ke||L._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:ke});return Ae[ke]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function de(){return Object.keys(Ae).map(ke=>Ae[ke])}}),ot.App=Ce,Te}(ge);return Ce.INTERNAL=Object.assign(Object.assign({},Ce.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function Ae(Te){(0,u.ZB)(Ce,Te)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Ce}(),G=new ne.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ce=self.firebase.SDK_VERSION;Ce&&Ce.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=U;!function xe(Ce){(0,L.registerVersion)("@firebase/app-compat","0.2.13",Ce)}()},7592:(st,Ee,F)=>{F.r(Ee),F.d(Ee,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Mn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>pe,_addOrOverwriteComponent:()=>Ne,_apps:()=>le,_clearComponents:()=>ht,_components:()=>se,_getProvider:()=>Ve,_registerComponent:()=>Qe,_removeServiceInstance:()=>tn,deleteApp:()=>bi,getApp:()=>rn,getApps:()=>$n,initializeApp:()=>wn,onLog:()=>Hn,registerVersion:()=>fr,setLogLevel:()=>qr});var u=F(5861),B=F(4537),L=F(7879),ne=F(9058),ge=F(1878);class Ie{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function Pe(Ge){const _e=Ge.getComponent();return"VERSION"===_e?.type}(Xe)){const it=Xe.getImmediate();return`${it.library}/${it.version}`}return null}).filter(Xe=>Xe).join(" ")}}const Fe="@firebase/app",U=new L.Yd("@firebase/app"),ie="[DEFAULT]",ce={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},le=new Map,se=new Map;function pe(Ge,_e){try{Ge.container.addComponent(_e)}catch(Xe){U.debug(`Component ${_e.name} failed to register with FirebaseApp ${Ge.name}`,Xe)}}function Ne(Ge,_e){Ge.container.addOrOverwriteComponent(_e)}function Qe(Ge){const _e=Ge.name;if(se.has(_e))return U.debug(`There were multiple attempts to register component ${_e}.`),!1;se.set(_e,Ge);for(const Xe of le.values())pe(Xe,Ge);return!0}function Ve(Ge,_e){const Xe=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Ge.container.getProvider(_e)}function tn(Ge,_e,Xe=ie){Ve(Ge,_e).clearInstance(Xe)}function ht(){se.clear()}const ft=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nn{constructor(_e,Xe,it){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=it,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}const Mn="9.23.0";function wn(Ge,_e={}){let Xe=Ge;"object"!=typeof _e&&(_e={name:_e});const it=Object.assign({name:ie,automaticDataCollectionEnabled:!1},_e),kt=it.name;if("string"!=typeof kt||!kt)throw ft.create("bad-app-name",{appName:String(kt)});if(Xe||(Xe=(0,ne.aH)()),!Xe)throw ft.create("no-options");const Vt=le.get(kt);if(Vt){if((0,ne.vZ)(Xe,Vt.options)&&(0,ne.vZ)(it,Vt.config))return Vt;throw ft.create("duplicate-app",{appName:kt})}const Qn=new B.H0(kt);for(const $ of se.values())Qn.addComponent($);const H=new nn(Xe,it,Qn);return le.set(kt,H),H}function rn(Ge=ie){const _e=le.get(Ge);if(!_e&&Ge===ie&&(0,ne.aH)())return wn();if(!_e)throw ft.create("no-app",{appName:Ge});return _e}function $n(){return Array.from(le.values())}function bi(Ge){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,u.Z)(function*(Ge){const _e=Ge.name;le.has(_e)&&(le.delete(_e),yield Promise.all(Ge.container.getProviders().map(Xe=>Xe.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function fr(Ge,_e,Xe){var it;let kt=null!==(it=ce[Ge])&&void 0!==it?it:Ge;Xe&&(kt+=`-${Xe}`);const Vt=kt.match(/\s|\//),Qn=_e.match(/\s|\//);if(Vt||Qn){const H=[`Unable to register library "${kt}" with version "${_e}":`];return Vt&&H.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),Vt&&Qn&&H.push("and"),Qn&&H.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void U.warn(H.join(" "))}Qe(new B.wA(`${kt}-version`,()=>({library:kt,version:_e}),"VERSION"))}function Hn(Ge,_e){if(null!==Ge&&"function"!=typeof Ge)throw ft.create("invalid-log-argument");(0,L.Am)(Ge,_e)}function qr(Ge){(0,L.Ub)(Ge)}const ys="firebase-heartbeat-database",dt=1,mt="firebase-heartbeat-store";let Tt=null;function sn(){return Tt||(Tt=(0,ge.X3)(ys,dt,{upgrade:(Ge,_e)=>{0===_e&&Ge.createObjectStore(mt)}}).catch(Ge=>{throw ft.create("idb-open",{originalErrorMessage:Ge.message})})),Tt}function Zr(){return(Zr=(0,u.Z)(function*(Ge){try{return yield(yield sn()).transaction(mt).objectStore(mt).get(vs(Ge))}catch(_e){if(_e instanceof ne.ZR)U.warn(_e.message);else{const Xe=ft.create("idb-get",{originalErrorMessage:_e?.message});U.warn(Xe.message)}}})).apply(this,arguments)}function Rt(Ge,_e){return xn.apply(this,arguments)}function xn(){return(xn=(0,u.Z)(function*(Ge,_e){try{const it=(yield sn()).transaction(mt,"readwrite");yield it.objectStore(mt).put(_e,vs(Ge)),yield it.done}catch(Xe){if(Xe instanceof ne.ZR)U.warn(Xe.message);else{const it=ft.create("idb-set",{originalErrorMessage:Xe?.message});U.warn(it.message)}}})).apply(this,arguments)}function vs(Ge){return`${Ge.name}!${Ge.options.appId}`}class Ut{constructor(_e){this.container=_e,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new rs(Xe),this._heartbeatsCachePromise=this._storage.read().then(it=>(this._heartbeatsCache=it,it))}triggerHeartbeat(){var _e=this;return(0,u.Z)(function*(){const it=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=Pn();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),_e._heartbeatsCache.lastSentHeartbeatDate!==kt&&!_e._heartbeatsCache.heartbeats.some(Vt=>Vt.date===kt))return _e._heartbeatsCache.heartbeats.push({date:kt,agent:it}),_e._heartbeatsCache.heartbeats=_e._heartbeatsCache.heartbeats.filter(Vt=>{const Qn=new Date(Vt.date).valueOf();return Date.now()-Qn<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,u.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache||0===_e._heartbeatsCache.heartbeats.length)return"";const Xe=Pn(),{heartbeatsToSend:it,unsentEntries:kt}=function Bi(Ge,_e=1024){const Xe=[];let it=Ge.slice();for(const kt of Ge){const Vt=Xe.find(Qn=>Qn.agent===kt.agent);if(Vt){if(Vt.dates.push(kt.date),is(Xe)>_e){Vt.dates.pop();break}}else if(Xe.push({agent:kt.agent,dates:[kt.date]}),is(Xe)>_e){Xe.pop();break}it=it.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:it}}(_e._heartbeatsCache.heartbeats),Vt=(0,ne.L)(JSON.stringify({version:2,heartbeats:it}));return _e._heartbeatsCache.lastSentHeartbeatDate=Xe,kt.length>0?(_e._heartbeatsCache.heartbeats=kt,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache.heartbeats=[],_e._storage.overwrite(_e._heartbeatsCache)),Vt})()}}function Pn(){return(new Date).toISOString().substring(0,10)}class rs{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,u.Z)(function*(){return(yield _e._canUseIndexedDBPromise)&&(yield function li(Ge){return Zr.apply(this,arguments)}(_e.app))||{heartbeats:[]}})()}overwrite(_e){var Xe=this;return(0,u.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(it=_e.lastSentHeartbeatDate)&&void 0!==it?it:Vt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}})()}add(_e){var Xe=this;return(0,u.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Vt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(it=_e.lastSentHeartbeatDate)&&void 0!==it?it:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,..._e.heartbeats]})}})()}}function is(Ge){return(0,ne.L)(JSON.stringify({version:2,heartbeats:Ge})).length}!function pr(Ge){Qe(new B.wA("platform-logger",_e=>new Ie(_e),"PRIVATE")),Qe(new B.wA("heartbeat",_e=>new Ut(_e),"PRIVATE")),fr(Fe,"0.9.13",Ge),fr(Fe,"0.9.13","esm2017"),fr("fire-js","")}("")},120:(st,Ee,F)=>{F.d(Ee,{Z:()=>u.Z});var u=F(3399);u.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(st,Ee,F)=>{F.r(Ee);var u=F(5861),B=F(3399),L=F(6710),ne=F(9058),Pe=(F(7592),F(7879),F(4537));function Fe(){return window}function G(){return G=(0,u.Z)(function*(O,N,x){var K;const{BuildInfo:me}=Fe();(0,L.as)(N.sessionId,"AuthEvent did not contain a session ID");const Be=yield function Te(O){return tt.apply(this,arguments)}(N.sessionId),yt={};return(0,L.at)()?yt.ibi=me.packageName:(0,L.au)()?yt.apn=me.packageName:(0,L.av)(O,"operation-not-supported-in-this-environment"),me.displayName&&(yt.appDisplayName=me.displayName),yt.sessionId=Be,(0,L.aw)(O,x,N.type,void 0,null!==(K=N.eventId)&&void 0!==K?K:void 0,yt)}),G.apply(this,arguments)}function Oe(){return(Oe=(0,u.Z)(function*(O){const{BuildInfo:N}=Fe(),x={};(0,L.at)()?x.iosBundleId=N.packageName:(0,L.au)()?x.androidPackageName=N.packageName:(0,L.av)(O,"operation-not-supported-in-this-environment"),yield(0,L.ax)(O,x)})).apply(this,arguments)}function Ce(){return(Ce=(0,u.Z)(function*(O,N,x){const{cordova:K}=Fe();let me=()=>{};try{yield new Promise((Be,yt)=>{let Ke=null;function Yt(){var xt;Be();const ji=null===(xt=K.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof ji&&ji(),"function"==typeof x?.close&&x.close()}function Ct(){Ke||(Ke=window.setTimeout(()=>{yt((0,L.az)(O,"redirect-cancelled-by-user"))},2e3))}function hn(){"visible"===document?.visibilityState&&Ct()}N.addPassiveListener(Yt),document.addEventListener("resume",Ct,!1),(0,L.au)()&&document.addEventListener("visibilitychange",hn,!1),me=()=>{N.removePassiveListener(Yt),document.removeEventListener("resume",Ct,!1),document.removeEventListener("visibilitychange",hn,!1),Ke&&window.clearTimeout(Ke)}})}finally{me()}})).apply(this,arguments)}function tt(){return(tt=(0,u.Z)(function*(O){const N=function ot(O){if((0,L.as)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const N=new ArrayBuffer(O.length),x=new Uint8Array(N);for(let K=0;K<O.length;K++)x[K]=O.charCodeAt(K);return x}(O),x=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(x)).map(me=>me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class de extends L.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(N)),super.onEvent(N)}initialized(){var N=this;return(0,u.Z)(function*(){yield N.initPromise})()}}function ke(O){return j.apply(this,arguments)}function j(){return(j=(0,u.Z)(function*(O){const N=yield lt()._get(en(O));return N&&(yield lt()._remove(en(O))),N})).apply(this,arguments)}function Ue(){const O=[];for(let x=0;x<20;x++){const K=Math.floor(62*Math.random());O.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(K))}return O.join("")}function lt(){return(0,L.aC)(L.b)}function en(O){return(0,L.aD)("authEvent",O.config.apiKey,O.name)}function Cn(O){if(!O?.includes("?"))return{};const[N,...x]=O.split("?");return(0,ne.zd)(x.join("?"))}const ie=class Wr{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aE,this._overrideRedirectResult=L.aF}_initialize(N){var x=this;return(0,u.Z)(function*(){const K=N._key();let me=x.eventManagers.get(K);return me||(me=new de(N),x.eventManagers.set(K,me),x.attachCallbackListeners(N,me)),me})()}_openPopup(N){(0,L.av)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,x,K,me){var Be=this;return(0,u.Z)(function*(){!function Ae(O){var N,x,K,me,Be,yt,Ke,Yt,Ct,hn;const xt=Fe();(0,L.aA)("function"==typeof(null===(N=xt?.universalLinks)||void 0===N?void 0:N.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aA)(typeof(null===(x=xt?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aA)("function"==typeof(null===(Be=null===(me=null===(K=xt?.cordova)||void 0===K?void 0:K.plugins)||void 0===me?void 0:me.browsertab)||void 0===Be?void 0:Be.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aA)("function"==typeof(null===(Yt=null===(Ke=null===(yt=xt?.cordova)||void 0===yt?void 0:yt.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===Yt?void 0:Yt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aA)("function"==typeof(null===(hn=null===(Ct=xt?.cordova)||void 0===Ct?void 0:Ct.InAppBrowser)||void 0===hn?void 0:hn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const yt=yield Be._initialize(N);yield yt.initialized(),yt.resetRedirect(),(0,L.aG)(),yield Be._originValidation(N);const Ke=function re(O,N,x=null){return{type:N,eventId:x,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:O.tenantId,error:(0,L.az)(O,"no-auth-event")}}(N,K,me);yield function he(O,N){return lt()._set(en(O),N)}(N,Ke);const Yt=yield function U(O,N,x){return G.apply(this,arguments)}(N,Ke,x),Ct=yield function xe(O){const{cordova:N}=Fe();return new Promise(x=>{N.plugins.browsertab.isAvailable(K=>{let me=null;K?N.plugins.browsertab.openUrl(O):me=N.InAppBrowser.open(O,(0,L.ay)()?"_blank":"_system","location=yes"),x(me)})})}(Yt);return function Je(O,N,x){return Ce.apply(this,arguments)}(N,yt,Ct)})()}_isIframeWebStorageSupported(N,x){throw new Error("Method not implemented.")}_originValidation(N){const x=N._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function X(O){return Oe.apply(this,arguments)}(N)),this.originValidationPromises[x]}attachCallbackListeners(N,x){const{universalLinks:K,handleOpenURL:me,BuildInfo:Be}=Fe(),yt=setTimeout((0,u.Z)(function*(){yield ke(N),x.onEvent(ce())}),500),Ke=function(){var hn=(0,u.Z)(function*(xt){clearTimeout(yt);const ji=yield ke(N);let kc=null;ji&&xt?.url&&(kc=function we(O,N){var x,K;const me=function yn(O){const N=Cn(O),x=N.link?decodeURIComponent(N.link):void 0,K=Cn(x).link,me=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return Cn(me).link||me||K||x||O}(N);if(me.includes("/__/auth/callback")){const Be=Cn(me),yt=Be.firebaseError?function jn(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(Be.firebaseError)):null,Ke=null===(K=null===(x=yt?.code)||void 0===x?void 0:x.split("auth/"))||void 0===K?void 0:K[1],Yt=Ke?(0,L.az)(Ke):null;return Yt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Yt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:me,postBody:null}}return null}(ji,xt.url)),x.onEvent(kc||ce())});return function(ji){return hn.apply(this,arguments)}}();typeof K<"u"&&"function"==typeof K.subscribe&&K.subscribe(null,Ke);const Yt=me,Ct=`${Be.packageName.toLowerCase()}://`;Fe().handleOpenURL=function(){var hn=(0,u.Z)(function*(xt){if(xt.toLowerCase().startsWith(Ct)&&Ke({url:xt}),"function"==typeof Yt)try{Yt(xt)}catch(ji){console.error(ji)}});return function(xt){return hn.apply(this,arguments)}}()}};function ce(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.az)("no-auth-event")}}function Qe(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function tn(O=(0,ne.z$)()){return!("file:"!==Qe()&&"ionic:"!==Qe()&&"capacitor:"!==Qe()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mn(){try{const O=self.localStorage,N=L.aL();if(O)return O.setItem(N,"1"),O.removeItem(N),!function nn(O=(0,ne.z$)()){return function Kt(){return(0,ne.w1)()&&11===document?.documentMode}()||function ft(O=(0,ne.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,ne.hl)()}catch{return wn()&&(0,ne.hl)()}return!1}function wn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function rn(){return(function Ve(){return"http:"===Qe()||"https:"===Qe()}()||(0,ne.ru)()||tn())&&!function ht(){return(0,ne.b$)()||(0,ne.UG)()}()&&Mn()&&!wn()}function $n(){return tn()&&typeof document<"u"}function Fr(){return(Fr=(0,u.Z)(function*(){return!!$n()&&new Promise(O=>{const N=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),O(!0)})})})).apply(this,arguments)}const Hn={LOCAL:"local",NONE:"none",SESSION:"session"},qr=L.aA,ys="persistence";function mt(O){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,u.Z)(function*(O){yield O._initializationPromise;const N=li(),x=L.aD(ys,O.config.apiKey,O.name);N&&N.setItem(x,O._getPersistence())})).apply(this,arguments)}function li(){var O;try{return(null===(O=function fr(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Zr=L.aA;class Rt{constructor(){this.browserResolver=L.aC(L.k),this.cordovaResolver=L.aC(ie),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aE,this._overrideRedirectResult=L.aF}_initialize(N){var x=this;return(0,u.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,x,K,me){var Be=this;return(0,u.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openPopup(N,x,K,me)})()}_openRedirect(N,x,K,me){var Be=this;return(0,u.Z)(function*(){return yield Be.selectUnderlyingResolver(),Be.assertedUnderlyingResolver._openRedirect(N,x,K,me)})()}_isIframeWebStorageSupported(N,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,x)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return $n()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,u.Z)(function*(){if(N.underlyingResolver)return;const x=yield function bi(){return Fr.apply(this,arguments)}();N.underlyingResolver=x?N.cordovaResolver:N.browserResolver})()}}function xn(O){return O.unwrap()}function qt(O){return Ut(O)}function Ut(O){const{_tokenResponse:N}=O instanceof ne.ZR?O.customData:O;if(!N)return null;if(!(O instanceof ne.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return L.P.credentialFromResult(O);const x=N.providerId;if(!x||x===L.p.PASSWORD)return null;let K;switch(x){case L.p.GOOGLE:K=L.V;break;case L.p.FACEBOOK:K=L.U;break;case L.p.GITHUB:K=L.W;break;case L.p.TWITTER:K=L.Z;break;default:const{oauthIdToken:me,oauthAccessToken:Be,oauthTokenSecret:yt,pendingToken:Ke,nonce:Yt}=N;return Be||yt||me||Ke?Ke?x.startsWith("saml.")?L.aO._create(x,Ke):L.L._fromParams({providerId:x,signInMethod:x,pendingToken:Ke,idToken:me,accessToken:Be}):new L.X(x).credential({idToken:me,accessToken:Be,rawNonce:Yt}):null}return O instanceof ne.ZR?K.credentialFromError(O):K.credentialFromResult(O)}function Pn(O,N){return N.catch(x=>{throw x instanceof ne.ZR&&function Co(O,N){var x;const K=null===(x=N.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===N?.code)N.resolver=new is(O,L.aq(O,N));else if(K){const me=Ut(N),Be=N;me&&(Be.credential=me,Be.tenantId=K.tenantId||void 0,Be.email=K.email||void 0,Be.phoneNumber=K.phoneNumber||void 0)}}(O,x),x}).then(x=>{const me=x.user;return{operationType:x.operationType,credential:qt(x),additionalUserInfo:L.ao(x),user:pr.getOrCreate(me)}})}function Bi(O,N){return rs.apply(this,arguments)}function rs(){return(rs=(0,u.Z)(function*(O,N){const x=yield N;return{verificationId:x.verificationId,confirm:K=>Pn(O,x.confirm(K))}})).apply(this,arguments)}class is{constructor(N,x){this.resolver=x,this.auth=function vs(O){return O.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return Pn(xn(this.auth),this.resolver.resolveSignIn(N))}}class pr{constructor(N){this._delegate=N,this.multiFactor=L.ar(N)}static getOrCreate(N){return pr.USER_MAP.has(N)||pr.USER_MAP.set(N,new pr(N)),pr.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var x=this;return(0,u.Z)(function*(){return Pn(x.auth,L.a0(x._delegate,N))})()}linkWithPhoneNumber(N,x){var K=this;return(0,u.Z)(function*(){return Bi(K.auth,L.l(K._delegate,N,x))})()}linkWithPopup(N){var x=this;return(0,u.Z)(function*(){return Pn(x.auth,L.d(x._delegate,N,Rt))})()}linkWithRedirect(N){var x=this;return(0,u.Z)(function*(){return yield mt(L.aH(x.auth)),L.g(x._delegate,N,Rt)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var x=this;return(0,u.Z)(function*(){return Pn(x.auth,L.a1(x._delegate,N))})()}reauthenticateWithPhoneNumber(N,x){return Bi(this.auth,L.r(this._delegate,N,x))}reauthenticateWithPopup(N){return Pn(this.auth,L.e(this._delegate,N,Rt))}reauthenticateWithRedirect(N){var x=this;return(0,u.Z)(function*(){return yield mt(L.aH(x.auth)),L.h(x._delegate,N,Rt)})()}sendEmailVerification(N){return L.ae(this._delegate,N)}unlink(N){var x=this;return(0,u.Z)(function*(){return yield L.an(x._delegate,N),x})()}updateEmail(N){return L.aj(this._delegate,N)}updatePassword(N){return L.ak(this._delegate,N)}updatePhoneNumber(N){return L.u(this._delegate,N)}updateProfile(N){return L.ai(this._delegate,N)}verifyBeforeUpdateEmail(N,x){return L.af(this._delegate,N,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}pr.USER_MAP=new WeakMap;const Ge=L.aA;let _e=(()=>{class O{constructor(x,K){if(this.app=x,K.isInitialized())return this._delegate=K.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:me}=x.options;Ge(me,"invalid-api-key",{appName:x.name}),Ge(me,"invalid-api-key",{appName:x.name});const Be=typeof window<"u"?Rt:void 0;this._delegate=K.initialize({options:{persistence:it(me,x.name),popupRedirectResolver:Be}}),this._delegate._updateErrorMap(L.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?pr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,K){L.I(this._delegate,x,K)}applyActionCode(x){return L.a5(this._delegate,x)}checkActionCode(x){return L.a6(this._delegate,x)}confirmPasswordReset(x,K){return L.a4(this._delegate,x,K)}createUserWithEmailAndPassword(x,K){var me=this;return(0,u.Z)(function*(){return Pn(me._delegate,L.a8(me._delegate,x,K))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return L.ad(this._delegate,x)}isSignInWithEmailLink(x){return L.ab(this._delegate,x)}getRedirectResult(){var x=this;return(0,u.Z)(function*(){Ge(rn(),x._delegate,"operation-not-supported-in-this-environment");const K=yield L.j(x._delegate,Rt);return K?Pn(x._delegate,Promise.resolve(K)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function le(O,N){(0,L.aH)(O)._logFramework(N)}(this._delegate,x)}onAuthStateChanged(x,K,me){const{next:Be,error:yt,complete:Ke}=Xe(x,K,me);return this._delegate.onAuthStateChanged(Be,yt,Ke)}onIdTokenChanged(x,K,me){const{next:Be,error:yt,complete:Ke}=Xe(x,K,me);return this._delegate.onIdTokenChanged(Be,yt,Ke)}sendSignInLinkToEmail(x,K){return L.aa(this._delegate,x,K)}sendPasswordResetEmail(x,K){return L.a3(this._delegate,x,K||void 0)}setPersistence(x){var K=this;return(0,u.Z)(function*(){let me;switch(function dt(O,N){qr(Object.values(Hn).includes(N),O,"invalid-persistence-type"),(0,ne.b$)()?qr(N!==Hn.SESSION,O,"unsupported-persistence-type"):(0,ne.UG)()?qr(N===Hn.NONE,O,"unsupported-persistence-type"):wn()?qr(N===Hn.NONE||N===Hn.LOCAL&&(0,ne.hl)(),O,"unsupported-persistence-type"):qr(N===Hn.NONE||Mn(),O,"unsupported-persistence-type")}(K._delegate,x),x){case Hn.SESSION:me=L.a;break;case Hn.LOCAL:me=(yield L.aC(L.i)._isAvailable())?L.i:L.b;break;case Hn.NONE:me=L.N;break;default:return L.av("argument-error",{appName:K._delegate.name})}return K._delegate.setPersistence(me)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return Pn(this._delegate,L._(this._delegate))}signInWithCredential(x){return Pn(this._delegate,L.$(this._delegate,x))}signInWithCustomToken(x){return Pn(this._delegate,L.a2(this._delegate,x))}signInWithEmailAndPassword(x,K){return Pn(this._delegate,L.a9(this._delegate,x,K))}signInWithEmailLink(x,K){return Pn(this._delegate,L.ac(this._delegate,x,K))}signInWithPhoneNumber(x,K){return Bi(this._delegate,L.s(this._delegate,x,K))}signInWithPopup(x){var K=this;return(0,u.Z)(function*(){return Ge(rn(),K._delegate,"operation-not-supported-in-this-environment"),Pn(K._delegate,L.c(K._delegate,x,Rt))})()}signInWithRedirect(x){var K=this;return(0,u.Z)(function*(){return Ge(rn(),K._delegate,"operation-not-supported-in-this-environment"),yield mt(K._delegate),L.f(K._delegate,x,Rt)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return L.a7(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=Hn,O})();function Xe(O,N,x){let K=O;"function"!=typeof O&&({next:K,error:N,complete:x}=O);const me=K;return{next:yt=>me(yt&&pr.getOrCreate(yt)),error:N,complete:x}}function it(O,N){const x=function sn(O,N){const x=li();if(!x)return[];const K=L.aD(ys,O,N);switch(x.getItem(K)){case Hn.NONE:return[L.N];case Hn.LOCAL:return[L.i,L.a];case Hn.SESSION:return[L.a];default:return[]}}(O,N);if(typeof self<"u"&&!x.includes(L.i)&&x.push(L.i),typeof window<"u")for(const K of[L.b,L.a])x.includes(K)||x.push(K);return x.includes(L.N)||x.push(L.N),x}class kt{constructor(){this.providerId="phone",this._delegate=new L.P(xn(B.Z.auth()))}static credential(N,x){return L.P.credential(N,x)}verifyPhoneNumber(N,x){return this._delegate.verifyPhoneNumber(N,x)}unwrap(){return this._delegate}}kt.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,kt.PROVIDER_ID=L.P.PROVIDER_ID;const Vt=L.aA;class Qn{constructor(N,x,K=B.Z.app()){var me;Vt(null===(me=K.options)||void 0===me?void 0:me.apiKey,"invalid-api-key",{appName:K.name}),this._delegate=new L.R(N,x,K.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $(O){O.INTERNAL.registerComponent(new Pe.wA("auth-compat",N=>{const x=N.getProvider("app-compat").getImmediate(),K=N.getProvider("auth");return new _e(x,K)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.Q,FacebookAuthProvider:L.U,GithubAuthProvider:L.W,GoogleAuthProvider:L.V,OAuthProvider:L.X,SAMLAuthProvider:L.Y,PhoneAuthProvider:kt,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:Qn,TwitterAuthProvider:L.Z,Auth:_e,AuthCredential:L.J,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.2")}(B.Z)},4537:(st,Ee,F)=>{F.d(Ee,{H0:()=>Fe,wA:()=>L});var u=F(5861),B=F(9058);class L{constructor(U,G,X){this.name=U,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ne="[DEFAULT]";class ge{constructor(U,G){this.name=U,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const G=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(G)){const X=new B.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:G});Oe&&X.resolve(Oe)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(U){var G;const X=this.normalizeInstanceIdentifier(U?.identifier),Oe=null!==(G=U?.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(xe){if(Oe)return null;throw xe}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function Pe(De){return"EAGER"===De.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[G,X]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(G);try{const xe=this.getOrInitializeService({instanceIdentifier:Oe});X.resolve(xe)}catch{}}}}clearInstance(U=ne){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,u.Z)(function*(){const G=Array.from(U.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ne){return this.instances.has(U)}getOptions(U=ne){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:G={}}=U,X=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[xe,Je]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(xe)&&Je.resolve(Oe);return Oe}onInit(U,G){var X;const Oe=this.normalizeInstanceIdentifier(G),xe=null!==(X=this.onInitCallbacks.get(Oe))&&void 0!==X?X:new Set;xe.add(U),this.onInitCallbacks.set(Oe,xe);const Je=this.instances.get(Oe);return Je&&U(Je,Oe),()=>{xe.delete(U)}}invokeOnInitCallbacks(U,G){const X=this.onInitCallbacks.get(G);if(X)for(const Oe of X)try{Oe(U,G)}catch{}}getOrInitializeService({instanceIdentifier:U,options:G={}}){let X=this.instances.get(U);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(De=U,De===ne?void 0:De),options:G}),this.instances.set(U,X),this.instancesOptions.set(U,G),this.invokeOnInitCallbacks(X,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,X)}catch{}var De;return X||null}normalizeInstanceIdentifier(U=ne){return this.component?this.component.multipleInstances?U:ne:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const G=this.getProvider(U.name);if(G.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);G.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const G=new ge(U,this);return this.providers.set(U,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(st,Ee,F)=>{F.d(Ee,{Am:()=>De,Ub:()=>Fe,Yd:()=>Pe,in:()=>B});const u=[];var B=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(B||{});const L={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ne=B.INFO,ge={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},Ie=(U,G,...X)=>{if(G<U.logLevel)return;const Oe=(new Date).toISOString(),xe=ge[G];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[xe](`[${Oe}]  ${U.name}:`,...X)};class Pe{constructor(G){this.name=G,this._logLevel=ne,this._logHandler=Ie,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in B))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...G),this._logHandler(this,B.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...G),this._logHandler(this,B.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,B.INFO,...G),this._logHandler(this,B.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,B.WARN,...G),this._logHandler(this,B.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...G),this._logHandler(this,B.ERROR,...G)}}function Fe(U){u.forEach(G=>{G.setLogLevel(U)})}function De(U,G){for(const X of u){let Oe=null;G&&G.level&&(Oe=L[G.level]),X.userLogHandler=null===U?null:(xe,Je,...Ce)=>{const Ae=Ce.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch{return null}}).filter(Te=>Te).join(" ");Je>=(Oe??xe.logLevel)&&U({level:B[Je].toLowerCase(),message:Ae,args:Ce,type:xe.name})}}}},1878:(st,Ee,F)=>{F.d(Ee,{X3:()=>ot});var u=F(5861);const B=(j,we)=>we.some(Ue=>j instanceof Ue);let L,ne;const Pe=new WeakMap,Fe=new WeakMap,De=new WeakMap,U=new WeakMap,G=new WeakMap;let xe={get(j,we,Ue){if(j instanceof IDBTransaction){if("done"===we)return Fe.get(j);if("objectStoreNames"===we)return j.objectStoreNames||De.get(j);if("store"===we)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return Te(j[we])},set:(j,we,Ue)=>(j[we]=Ue,!0),has:(j,we)=>j instanceof IDBTransaction&&("done"===we||"store"===we)||we in j};function Ae(j){return"function"==typeof j?function Ce(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ie(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...we){return j.apply(tt(this),we),Te(Pe.get(this))}:function(...we){return Te(j.apply(tt(this),we))}:function(we,...Ue){const lt=j.call(tt(this),we,...Ue);return De.set(lt,we.sort?we.sort():[we]),Te(lt)}}(j):(j instanceof IDBTransaction&&function Oe(j){if(Fe.has(j))return;const we=new Promise((Ue,lt)=>{const en=()=>{j.removeEventListener("complete",jn),j.removeEventListener("error",yn),j.removeEventListener("abort",yn)},jn=()=>{Ue(),en()},yn=()=>{lt(j.error||new DOMException("AbortError","AbortError")),en()};j.addEventListener("complete",jn),j.addEventListener("error",yn),j.addEventListener("abort",yn)});Fe.set(j,we)}(j),B(j,function ge(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,xe):j)}function Te(j){if(j instanceof IDBRequest)return function X(j){const we=new Promise((Ue,lt)=>{const en=()=>{j.removeEventListener("success",jn),j.removeEventListener("error",yn)},jn=()=>{Ue(Te(j.result)),en()},yn=()=>{lt(j.error),en()};j.addEventListener("success",jn),j.addEventListener("error",yn)});return we.then(Ue=>{Ue instanceof IDBCursor&&Pe.set(Ue,j)}).catch(()=>{}),G.set(we,j),we}(j);if(U.has(j))return U.get(j);const we=Ae(j);return we!==j&&(U.set(j,we),G.set(we,j)),we}const tt=j=>G.get(j);function ot(j,we,{blocked:Ue,upgrade:lt,blocking:en,terminated:jn}={}){const yn=indexedDB.open(j,we),Cn=Te(yn);return lt&&yn.addEventListener("upgradeneeded",un=>{lt(Te(yn.result),un.oldVersion,un.newVersion,Te(yn.transaction),un)}),Ue&&yn.addEventListener("blocked",un=>Ue(un.oldVersion,un.newVersion,un)),Cn.then(un=>{jn&&un.addEventListener("close",()=>jn()),en&&un.addEventListener("versionchange",Wr=>en(Wr.oldVersion,Wr.newVersion,Wr))}).catch(()=>{}),Cn}const de=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],he=new Map;function ke(j,we){if(!(j instanceof IDBDatabase)||we in j||"string"!=typeof we)return;if(he.get(we))return he.get(we);const Ue=we.replace(/FromIndex$/,""),lt=we!==Ue,en=re.includes(Ue);if(!(Ue in(lt?IDBIndex:IDBObjectStore).prototype)||!en&&!de.includes(Ue))return;const jn=function(){var yn=(0,u.Z)(function*(Cn,...un){const Wr=this.transaction(Cn,en?"readwrite":"readonly");let ie=Wr.store;return lt&&(ie=ie.index(un.shift())),(yield Promise.all([ie[Ue](...un),en&&Wr.done]))[0]});return function(un){return yn.apply(this,arguments)}}();return he.set(we,jn),jn}!function Je(j){xe=j(xe)}(j=>({...j,get:(we,Ue,lt)=>ke(we,Ue)||j.get(we,Ue,lt),has:(we,Ue)=>!!ke(we,Ue)||j.has(we,Ue)}))},5861:(st,Ee,F)=>{function u(L,ne,ge,Ie,Pe,Fe,De){try{var U=L[Fe](De),G=U.value}catch(X){return void ge(X)}U.done?ne(G):Promise.resolve(G).then(Ie,Pe)}function B(L){return function(){var ne=this,ge=arguments;return new Promise(function(Ie,Pe){var Fe=L.apply(ne,ge);function De(G){u(Fe,Ie,Pe,De,U,"next",G)}function U(G){u(Fe,Ie,Pe,De,U,"throw",G)}De(void 0)})}}F.d(Ee,{Z:()=>B})},7582:(st,Ee,F)=>{function ne(ie,ce){var le={};for(var se in ie)Object.prototype.hasOwnProperty.call(ie,se)&&ce.indexOf(se)<0&&(le[se]=ie[se]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(se=Object.getOwnPropertySymbols(ie);pe<se.length;pe++)ce.indexOf(se[pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,se[pe])&&(le[se[pe]]=ie[se[pe]])}return le}function X(ie,ce,le,se){return new(le||(le=Promise))(function(Ne,Qe){function Ve(Kt){try{ht(se.next(Kt))}catch(ft){Qe(ft)}}function tn(Kt){try{ht(se.throw(Kt))}catch(ft){Qe(ft)}}function ht(Kt){Kt.done?Ne(Kt.value):function pe(Ne){return Ne instanceof le?Ne:new le(function(Qe){Qe(Ne)})}(Kt.value).then(Ve,tn)}ht((se=se.apply(ie,ce||[])).next())})}function ee(ie){return this instanceof ee?(this.v=ie,this):new ee(ie)}function de(ie,ce,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,se=le.apply(ie,ce||[]),Ne=[];return pe={},Qe("next"),Qe("throw"),Qe("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function Qe(nn){se[nn]&&(pe[nn]=function(Mn){return new Promise(function(wn,rn){Ne.push([nn,Mn,wn,rn])>1||Ve(nn,Mn)})})}function Ve(nn,Mn){try{!function tn(nn){nn.value instanceof ee?Promise.resolve(nn.value.v).then(ht,Kt):ft(Ne[0][2],nn)}(se[nn](Mn))}catch(wn){ft(Ne[0][3],wn)}}function ht(nn){Ve("next",nn)}function Kt(nn){Ve("throw",nn)}function ft(nn,Mn){nn(Mn),Ne.shift(),Ne.length&&Ve(Ne[0][0],Ne[0][1])}}function he(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ce=ie[Symbol.asyncIterator];return ce?ce.call(ie):(ie=function Ce(ie){var ce="function"==typeof Symbol&&Symbol.iterator,le=ce&&ie[ce],se=0;if(le)return le.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&se>=ie.length&&(ie=void 0),{value:ie&&ie[se++],done:!ie}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),le={},se("next"),se("throw"),se("return"),le[Symbol.asyncIterator]=function(){return this},le);function se(Ne){le[Ne]=ie[Ne]&&function(Qe){return new Promise(function(Ve,tn){!function pe(Ne,Qe,Ve,tn){Promise.resolve(tn).then(function(ht){Ne({value:ht,done:Ve})},Qe)}(Ve,tn,(Qe=ie[Ne](Qe)).done,Qe.value)})}}}F.d(Ee,{FC:()=>de,KL:()=>he,_T:()=>ne,mG:()=>X,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},st=>{st(st.s=5555)}]);