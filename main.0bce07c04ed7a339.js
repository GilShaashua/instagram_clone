"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[179],{6304:(st,Ee,F)=>{F.d(Ee,{Dh:()=>Pe,GT:()=>ge,cc:()=>Oe,on:()=>De,pX:()=>ne,xv:()=>Fe});var u=F(5879),V=F(120);st=F.hmd(st);const L=["ngOnDestroy"],ne=(Se,Te,tt,ot={})=>new Proxy(Se,{get:(ee,de)=>tt.runOutsideAngular(()=>{var re;if(Se[de])return!(null===(re=ot?.spy)||void 0===re)&&re.get&&ot.spy.get(de,Se[de]),Se[de];if(L.indexOf(de)>-1)return()=>{};const he=Te.toPromise().then(Ne=>{const j=Ne&&Ne[de];return"function"==typeof j?j.bind(Ne):j&&j.then?j.then(we=>tt.run(()=>we)):tt.run(()=>j)});return new Proxy(()=>{},{get:(Ne,j)=>he[j],apply:(Ne,j,we)=>he.then(Ue=>{var lt;const en=Ue&&Ue(...we);return!(null===(lt=ot?.spy)||void 0===lt)&&lt.apply&&ot.spy.apply(de,we,en),en})})})}),ge=(Se,Te)=>{Te.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(ot=>{Object.defineProperty(Se.prototype,ot,Object.getOwnPropertyDescriptor(tt.prototype||tt,ot))})})};class Ie{constructor(Te){return Te}}const Pe=new u.OlP("angularfire2.app.options"),Fe=new u.OlP("angularfire2.app.name");function De(Se,Te,tt){const ee="object"==typeof tt&&tt||{};ee.name=ee.name||"string"==typeof tt&&tt||"[DEFAULT]";const re=V.Z.apps.filter(he=>he&&he.name===ee.name)[0]||Te.runOutsideAngular(()=>V.Z.initializeApp(Se,ee));try{JSON.stringify(Se)!==JSON.stringify(re.options)&&B("error",`${re.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ie(re)}const B=(Se,...Te)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Se](...Te)};function Oe(Se,Te,tt,ot,ee){const[,de,re]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===Se)||[];if(de)return function xe(Se,Te){try{return Se.toString()===Te.toString()}catch{return Se===Te}}(ee,re)||(Ce("error",`${Te} was already initialized on the ${tt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:ee,was:re})),de;{const he=ot();return globalThis.\u0275AngularfireInstanceCache.push([Se,he,ee]),he}}const Je=!!st.hot,Ce=(Se,...Te)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Se](...Te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6710:(st,Ee,F)=>{F.d(Ee,{$:()=>Mh,A:()=>G,D:()=>xe,I:()=>gh,J:()=>Bc,L:()=>je,N:()=>Bt,P:()=>vn,Q:()=>$a,R:()=>rm,U:()=>kg,V:()=>sa,W:()=>Is,X:()=>Zs,Y:()=>Eh,Z:()=>bh,_:()=>$c,a:()=>Su,a0:()=>_b,a1:()=>Nn,a2:()=>AA,a3:()=>xA,a4:()=>Bv,a5:()=>Do,a6:()=>zc,a7:()=>xh,a8:()=>Ph,a9:()=>Vv,aA:()=>j,aB:()=>ec,aC:()=>it,aD:()=>Xn,aE:()=>ko,aF:()=>el,aG:()=>Oo,aH:()=>Rn,aL:()=>qc,aO:()=>zi,aa:()=>Lg,ab:()=>jv,ac:()=>Ug,ad:()=>Hv,ae:()=>wu,af:()=>zv,ai:()=>vb,aj:()=>PA,ak:()=>Wv,an:()=>Th,ao:()=>Wc,aq:()=>Bh,ar:()=>Du,as:()=>Ue,at:()=>Ke,au:()=>me,av:()=>ee,aw:()=>Wi,ax:()=>Jh,ay:()=>Qt,az:()=>de,b:()=>$h,c:()=>mi,d:()=>Pu,e:()=>Qa,f:()=>Ru,g:()=>yi,h:()=>jt,i:()=>bs,j:()=>a0,k:()=>so,l:()=>im,m:()=>rc,o:()=>fa,p:()=>Fe,r:()=>ut,s:()=>gi,u:()=>ri});var u=F(5861),V=F(9058),L=F(7592),ne=F(7582),ge=F(7879),Ie=F(4537);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Je=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ce=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Te=new ge.Yd("@firebase/auth");function ot(w,...m){Te.logLevel<=ge.in.ERROR&&Te.error(`Auth (${L.SDK_VERSION}): ${w}`,...m)}function ee(w,...m){throw Ne(w,...m)}function de(w,...m){return Ne(w,...m)}function re(w,m,_){const I=Object.assign(Object.assign({},Je()),{[m]:_});return new V.LL("auth","Firebase",I).create(m,{appName:w.name})}function he(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&ee(w,"argument-error"),re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ne(w,...m){if("string"!=typeof w){const _=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return Ce.create(w,...m)}function j(w,m,..._){if(!w)throw Ne(m,..._)}function we(w){const m="INTERNAL ASSERTION FAILED: "+w;throw ot(m),new Error(m)}function Ue(w,m){w||we(m)}function lt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function en(){return"http:"===Hn()||"https:"===Hn()}function Hn(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class un{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ue(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function yn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(en()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zr(w,m){Ue(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class ie{static initialize(m,_,I){this.fetchImpl=m,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},le=new un(3e4,6e4);function se(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function pe(w,m,_,I){return ke.apply(this,arguments)}function ke(){return(ke=(0,u.Z)(function*(w,m,_,I,S={}){return Qe(w,S,(0,u.Z)(function*(){let P={},Z={};I&&("GET"===m?Z=I:P={body:JSON.stringify(I)});const oe=(0,V.xO)(Object.assign({key:w.config.apiKey},Z)).slice(1),Le=yield w._getAdditionalHeaders();return Le["Content-Type"]="application/json",w.languageCode&&(Le["X-Firebase-Locale"]=w.languageCode),ie.fetch()(Yt(w,w.config.apiHost,_,oe),Object.assign({method:m,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Qe(w,m,_){return Be.apply(this,arguments)}function Be(){return(Be=(0,u.Z)(function*(w,m,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},ce),m);try{const S=new ft(w),P=yield Promise.race([_(),S.promise]);S.clearNetworkTimeout();const Z=yield P.json();if("needConfirmation"in Z)throw nn(w,"account-exists-with-different-credential",Z);if(P.ok&&!("errorMessage"in Z))return Z;{const oe=P.ok?Z.errorMessage:Z.error.message,[Le,He]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw nn(w,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Le)throw nn(w,"email-already-in-use",Z);if("USER_DISABLED"===Le)throw nn(w,"user-disabled",Z);const nt=I[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw re(w,nt,He);ee(w,nt)}}catch(S){if(S instanceof V.ZR)throw S;ee(w,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function tn(w,m,_,I){return ht.apply(this,arguments)}function ht(){return(ht=(0,u.Z)(function*(w,m,_,I,S={}){const P=yield pe(w,m,_,I,S);return"mfaPendingCredential"in P&&ee(w,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Yt(w,m,_,I){const S=`${m}${_}?${I}`;return w.config.emulator?Zr(w.config,S):`${w.config.apiScheme}://${S}`}class ft{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(de(this.auth,"network-request-failed")),le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nn(w,m,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const S=de(w,m,I);return S.customData._tokenResponse=_,S}function wn(){return(wn=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function zn(){return(zn=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Lr(){return(Lr=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function pr(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Cs(){return(Cs=(0,u.Z)(function*(w,m=!1){const _=(0,V.m9)(w),I=yield _.getIdToken(m),S=mt(I);j(S&&S.exp&&S.auth_time&&S.iat,_.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,Z=P?.sign_in_provider;return{claims:S,token:I,authTime:pr(dt(S.auth_time)),issuedAtTime:pr(dt(S.iat)),expirationTime:pr(dt(S.exp)),signInProvider:Z||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function dt(w){return 1e3*Number(w)}function mt(w){const[m,_,I]=w.split(".");if(void 0===m||void 0===_||void 0===I)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,V.tV)(_);return S?JSON.parse(S):(ot("Failed to decode base64 JWT payload"),null)}catch(S){return ot("Caught error parsing JWT payload as JSON",S?.toString()),null}}function sn(w,m){return di.apply(this,arguments)}function di(){return(di=(0,u.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(I){throw I instanceof V.ZR&&function Yr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}class Rt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const S=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),I)}iteration(){var m=this;return(0,u.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&m.schedule(!0))}m.schedule()})()}}class On{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=pr(this.lastLoginAt),this.creationTime=pr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ws(w){return Zt.apply(this,arguments)}function Zt(){return Zt=(0,u.Z)(function*(w){var m;const _=w.auth,I=yield w.getIdToken(),S=yield sn(w,function Di(w,m){return Lr.apply(this,arguments)}(_,{idToken:I}));j(S?.users.length,_,"internal-error");const P=S.users[0];w._notifyReloadListener(P);const Z=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?function ji(w){return w.map(m=>{var{providerId:_}=m,I=(0,ne._T)(m,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(P.providerUserInfo):[],oe=function kn(w,m){return[...w.filter(I=>!m.some(S=>S.providerId===I.providerId)),...m]}(w.providerData,Z),nt=!!w.isAnonymous&&!(w.email&&P.passwordHash||oe?.length),kt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:oe,metadata:new On(P.createdAt,P.lastLoginAt),isAnonymous:nt};Object.assign(w,kt)}),Zt.apply(this,arguments)}function Ut(){return(Ut=(0,u.Z)(function*(w){const m=(0,V.m9)(w);yield ws(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function ss(){return(ss=(0,u.Z)(function*(w,m){const _=yield Qe(w,{},(0,u.Z)(function*(){const I=(0,V.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:S,apiKey:P}=w.config,Z=Yt(w,S,"/v1/token",`key=${P}`),oe=yield w._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(Z,{method:"POST",headers:oe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class gr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){j(m.idToken,"internal-error"),j(typeof m.idToken<"u","internal-error"),j(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Tt(w){const m=mt(w);return j(m,"internal-error"),j(typeof m.exp<"u","internal-error"),j(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var I=this;return(0,u.Z)(function*(){return j(!I.accessToken||I.refreshToken,m,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var I=this;return(0,u.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:Z}=yield function is(w,m){return ss.apply(this,arguments)}(m,_);I.updateTokensAndExpiration(S,P,Number(Z))})()}updateTokensAndExpiration(m,_,I){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,_){const{refreshToken:I,accessToken:S,expirationTime:P}=_,Z=new gr;return I&&(j("string"==typeof I,"internal-error",{appName:m}),Z.refreshToken=I),S&&(j("string"==typeof S,"internal-error",{appName:m}),Z.accessToken=S),P&&(j("number"==typeof P,"internal-error",{appName:m}),Z.expirationTime=P),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new gr,this.toJSON())}_performRefresh(){return we("not implemented")}}function Ge(w,m){j("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class _e{constructor(m){var{uid:_,auth:I,stsTokenManager:S}=m,P=(0,ne._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new On(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,u.Z)(function*(){const I=yield sn(_,_.stsTokenManager.getToken(_.auth,m));return j(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(m){return function Kr(w){return Cs.apply(this,arguments)}(this,m)}reload(){return function wo(w){return Ut.apply(this,arguments)}(this)}_assign(m){this!==m&&(j(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const _=new _e(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(m){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var I=this;return(0,u.Z)(function*(){let S=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),S=!0),_&&(yield ws(I)),yield I.auth._persistUserIfCurrent(I),S&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,u.Z)(function*(){const _=yield m.getIdToken();return yield sn(m,function Pn(w,m){return wn.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var I,S,P,Z,oe,Le,He,nt;const kt=null!==(I=_.displayName)&&void 0!==I?I:void 0,Br=null!==(S=_.email)&&void 0!==S?S:void 0,qi=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,oo=null!==(Z=_.photoURL)&&void 0!==Z?Z:void 0,mm=null!==(oe=_.tenantId)&&void 0!==oe?oe:void 0,il=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,pa=null!==(He=_.createdAt)&&void 0!==He?He:void 0,ga=null!==(nt=_.lastLoginAt)&&void 0!==nt?nt:void 0,{uid:Gu,emailVerified:sl,isAnonymous:Zi,providerData:oc,stsTokenManager:ao}=_;j(Gu&&ao,m,"internal-error");const ol=gr.fromJSON(this.name,ao);j("string"==typeof Gu,m,"internal-error"),Ge(kt,m.name),Ge(Br,m.name),j("boolean"==typeof sl,m,"internal-error"),j("boolean"==typeof Zi,m,"internal-error"),Ge(qi,m.name),Ge(oo,m.name),Ge(mm,m.name),Ge(il,m.name),Ge(pa,m.name),Ge(ga,m.name);const Bo=new _e({uid:Gu,auth:m,email:Br,emailVerified:sl,displayName:kt,isAnonymous:Zi,photoURL:oo,phoneNumber:qi,tenantId:mm,stsTokenManager:ol,createdAt:pa,lastLoginAt:ga});return oc&&Array.isArray(oc)&&(Bo.providerData=oc.map(Wu=>Object.assign({},Wu))),il&&(Bo._redirectEventId=il),Bo}static _fromIdTokenResponse(m,_,I=!1){return(0,u.Z)(function*(){const S=new gr;S.updateFromServerResponse(_);const P=new _e({uid:_.localId,auth:m,stsTokenManager:S,isAnonymous:I});return yield ws(P),P})()}}const Xe=new Map;function it(w){Ue(w instanceof Function,"Expected a class definition");let m=Xe.get(w);return m?(Ue(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Xe.set(w,m),m)}const Bt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,I){var S=this;return(0,u.Z)(function*(){S.storage[_]=I})()}_get(_){var I=this;return(0,u.Z)(function*(){const S=I.storage[_];return void 0===S?null:S})()}_remove(_){var I=this;return(0,u.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function Xn(w,m,_){return`firebase:${w}:${m}:${_}`}class H{constructor(m,_,I){this.persistence=m,this.auth=_,this.userKey=I;const{config:S,name:P}=this.auth;this.fullUserKey=Xn(this.userKey,S.apiKey,P),this.fullPersistenceKey=Xn("persistence",S.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,u.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?_e._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,u.Z)(function*(){if(_.persistence===m)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,I="authUser"){return(0,u.Z)(function*(){if(!_.length)return new H(it(Bt),m,I);const S=(yield Promise.all(_.map(function(){var He=(0,u.Z)(function*(nt){if(yield nt._isAvailable())return nt});return function(nt){return He.apply(this,arguments)}}()))).filter(He=>He);let P=S[0]||it(Bt);const Z=Xn(I,m.config.apiKey,m.name);let oe=null;for(const He of _)try{const nt=yield He._get(Z);if(nt){const kt=_e._fromJSON(m,nt);He!==P&&(oe=kt),P=He;break}}catch{}const Le=S.filter(He=>He._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],oe&&(yield P._set(Z,oe.toJSON())),yield Promise.all(_.map(function(){var He=(0,u.Z)(function*(nt){if(nt!==P)try{yield nt._remove(Z)}catch{}});return function(nt){return He.apply(this,arguments)}}())),new H(P,m,I)):new H(P,m,I)})()}}function $(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(K(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(O(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Ve(m))return"Blackberry";if(yt(m))return"Webos";if(k(m))return"Safari";if((m.includes("chrome/")||x(m))&&!m.includes("edge/"))return"Chrome";if(me(m))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function O(w=(0,V.z$)()){return/firefox\//i.test(w)}function k(w=(0,V.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function x(w=(0,V.z$)()){return/crios\//i.test(w)}function K(w=(0,V.z$)()){return/iemobile/i.test(w)}function me(w=(0,V.z$)()){return/android/i.test(w)}function Ve(w=(0,V.z$)()){return/blackberry/i.test(w)}function yt(w=(0,V.z$)()){return/webos/i.test(w)}function Ke(w=(0,V.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Qt(w=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function xt(w=(0,V.z$)()){return Ke(w)||me(w)||yt(w)||Ve(w)||/windows phone/i.test(w)||K(w)}function Fc(w,m=[]){let _;switch(w){case"Browser":_=$((0,V.z$)());break;case"Worker":_=`${$((0,V.z$)())}-${w}`;break;default:_=w}const I=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${L.SDK_VERSION}/${I}`}function Io(){return(Io=(0,u.Z)(function*(w){return(yield pe(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $s(w,m){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,u.Z)(function*(w,m){return pe(w,"GET","/v2/recaptchaConfig",se(w,m))})).apply(this,arguments)}function Kt(w){return void 0!==w&&void 0!==w.getResponse}function ra(w){return void 0!==w&&void 0!==w.enterprise}class Ba{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function cu(w){return new Promise((m,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=m,I.onerror=S=>{const P=de("internal-error");P.customData=S,_(P)},I.type="text/javascript",I.charset="UTF-8",function au(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(I)})}function Hs(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Eo{constructor(m){this.type="recaptcha-enterprise",this.auth=Rn(m)}verify(m="verify",_=!1){var I=this;return(0,u.Z)(function*(){function P(){return P=(0,u.Z)(function*(oe){if(!_){if(null==oe.tenantId&&null!=oe._agentRecaptchaConfig)return oe._agentRecaptchaConfig.siteKey;if(null!=oe.tenantId&&void 0!==oe._tenantRecaptchaConfigs[oe.tenantId])return oe._tenantRecaptchaConfigs[oe.tenantId].siteKey}return new Promise(function(){var Le=(0,u.Z)(function*(He,nt){$s(oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(kt=>{if(void 0!==kt.recaptchaKey){const Br=new Ba(kt);return null==oe.tenantId?oe._agentRecaptchaConfig=Br:oe._tenantRecaptchaConfigs[oe.tenantId]=Br,He(Br.siteKey)}nt(new Error("recaptcha Enterprise site key undefined"))}).catch(kt=>{nt(kt)})});return function(He,nt){return Le.apply(this,arguments)}}())}),P.apply(this,arguments)}function Z(oe,Le,He){const nt=window.grecaptcha;ra(nt)?nt.enterprise.ready(()=>{nt.enterprise.execute(oe,{action:m}).then(kt=>{Le(kt)}).catch(()=>{Le("NO_RECAPTCHA")})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((oe,Le)=>{(function S(oe){return P.apply(this,arguments)})(I.auth).then(He=>{if(!_&&ra(window.grecaptcha))Z(He,oe,Le);else{if(typeof window>"u")return void Le(new Error("RecaptchaVerifier is only supported in browser"));cu("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{Z(He,oe,Le)}).catch(nt=>{Le(nt)})}}).catch(He=>{Le(He)})})})()}}function zs(w,m,_){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,u.Z)(function*(w,m,_,I=!1){const S=new Eo(w);let P;try{P=yield S.verify(_)}catch{P=yield S.verify(_,!0)}const Z=Object.assign({},m);return Object.assign(Z,I?{captchaResp:P}:{captchaResponse:P}),Object.assign(Z,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Z,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Z})).apply(this,arguments)}class Uc{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const I=P=>new Promise((Z,oe)=>{try{Z(m(P))}catch(Le){oe(Le)}});I.onAbort=_,this.queue.push(I);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,u.Z)(function*(){if(_.auth.currentUser===m)return;const I=[];try{for(const S of _.queue)yield S(m),S.onAbort&&I.push(S.onAbort)}catch(S){I.reverse();for(const P of I)try{P()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class os{constructor(m,_,I,S){this.app=m,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=I,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sv(this),this.idTokenSubscription=new Sv(this),this.beforeStateQueue=new Uc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ce,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(m,_){var I=this;return _&&(this._popupRedirectResolver=it(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var S,P;if(!I._deleted&&(I.persistenceManager=yield H.create(I,m),!I._deleted)){if(null!==(S=I._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(P=I.currentUser)||void 0===P?void 0:P.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,u.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,u.Z)(function*(){var I;const S=yield _.assertedPersistence.getCurrentUser();let P=S,Z=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const oe=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,Le=P?._redirectEventId,He=yield _.tryRedirectSignIn(m);(!oe||oe===Le)&&He?.user&&(P=He.user,Z=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Z)try{yield _.beforeStateQueue.runMiddleware(P)}catch(oe){P=S,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(oe))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return j(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,u.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,u.Z)(function*(){try{yield ws(m)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Cn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,u.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,u.Z)(function*(){const I=m?(0,V.m9)(m):null;return I&&j(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(m,_=!1){var I=this;return(0,u.Z)(function*(){if(!I._deleted)return m&&j(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,u.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,u.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(it(m))}))}initializeRecaptchaConfig(){var m=this;return(0,u.Z)(function*(){const _=yield $s(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new Ba(_);null==m.tenantId?m._agentRecaptchaConfig=I:m._tenantRecaptchaConfigs[m.tenantId]=I,I.emailPasswordEnabled&&new Eo(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new V.LL("auth","Firebase",m())}onAuthStateChanged(m,_,I){return this.registerStateListener(this.authStateSubscription,m,_,I)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,I){return this.registerStateListener(this.idTokenSubscription,m,_,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var I=this;return(0,u.Z)(function*(){const S=yield I.getOrInitRedirectPersistenceManager(_);return null===m?S.removeCurrentUser():S.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const I=m&&it(m)||_._popupRedirectResolver;j(I,_,"argument-error"),_.redirectPersistenceManager=yield H.create(_,[it(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,u.Z)(function*(){var I,S;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===m?_._currentUser:(null===(S=_.redirectUser)||void 0===S?void 0:S._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,u.Z)(function*(){if(m===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,I,S){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(Z,this,"internal-error"),Z.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,I,S):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Fc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,u.Z)(function*(){var _;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const S=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();S&&(I["X-Firebase-Client"]=S);const P=yield m._getAppCheckToken();return P&&(I["X-Firebase-AppCheck"]=P),I})()}_getAppCheckToken(){var m=this;return(0,u.Z)(function*(){var _;const I=yield null===(_=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return I?.error&&function tt(w,...m){Te.logLevel<=ge.in.WARN&&Te.warn(`Auth (${L.SDK_VERSION}): ${w}`,...m)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function Rn(w){return(0,V.m9)(w)}class Sv{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function gh(w,m,_){const I=Rn(w);j(I._canInitEmulator,I,"emulator-config-failed"),j(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const S=!!_?.disableWarnings,P=hi(m),{host:Z,port:oe}=function mh(w){const m=hi(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(I);if(S){const P=S[1];return{host:P,port:_h(I.substr(P.length+1))}}{const[P,Z]=I.split(":");return{host:P,port:_h(Z)}}}(m);I.config.emulator={url:`${P}//${Z}${null===oe?"":`:${oe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Z,port:oe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Av(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function hi(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function _h(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class Bc{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return we("not implemented")}_getIdTokenResponse(m){return we("not implemented")}_linkToIdToken(m,_){return we("not implemented")}_getReauthenticationResolver(m){return we("not implemented")}}function yh(w,m){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:resetPassword",se(w,m))})).apply(this,arguments)}function xg(w,m){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Si(){return(Si=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",se(w,m))})).apply(this,arguments)}function uu(w,m){return vh.apply(this,arguments)}function vh(){return(vh=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithPassword",se(w,m))})).apply(this,arguments)}function du(w,m){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendOobCode",se(w,m))})).apply(this,arguments)}function wh(){return(wh=(0,u.Z)(function*(w,m){return du(w,m)})).apply(this,arguments)}function fu(w,m){return pu.apply(this,arguments)}function pu(){return(pu=(0,u.Z)(function*(w,m){return du(w,m)})).apply(this,arguments)}function gu(w,m){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,u.Z)(function*(w,m){return du(w,m)})).apply(this,arguments)}function br(){return(br=(0,u.Z)(function*(w,m){return du(w,m)})).apply(this,arguments)}function Qr(){return(Qr=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}function mu(){return(mu=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithEmailLink",se(w,m))})).apply(this,arguments)}class bo extends Bc{constructor(m,_,I,S=null){super("password",I),this._email=m,this._password=_,this._tenantId=S}static _fromEmailAndPassword(m,_){return new bo(m,_,"password")}static _fromEmailAndCode(m,_,I=null){return new bo(m,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,u.Z)(function*(){var I;switch(_.signInMethod){case"password":const S={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=m._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const P=yield zs(m,S,"signInWithPassword");return uu(m,P)}return uu(m,S).catch(function(){var P=(0,u.Z)(function*(Z){if("auth/missing-recaptcha-token"===Z.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const oe=yield zs(m,S,"signInWithPassword");return uu(m,oe)}return Promise.reject(Z)});return function(Z){return P.apply(this,arguments)}}());case"emailLink":return function ja(w,m){return Qr.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:ee(m,"internal-error")}})()}_linkToIdToken(m,_){var I=this;return(0,u.Z)(function*(){switch(I.signInMethod){case"password":return xg(m,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Og(w,m){return mu.apply(this,arguments)}(m,{idToken:_,email:I._email,oobCode:I._password});default:ee(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Gs(w,m){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithIdp",se(w,m))})).apply(this,arguments)}class je extends Bc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new je(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):ee("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:S}=_,P=(0,ne._T)(_,["providerId","signInMethod"]);if(!I||!S)return null;const Z=new je(I,S);return Z.idToken=P.idToken||void 0,Z.accessToken=P.accessToken||void 0,Z.secret=P.secret,Z.nonce=P.nonce,Z.pendingToken=P.pendingToken||null,Z}_getIdTokenResponse(m){return Gs(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,Gs(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Gs(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,V.xO)(_)}return m}}function fn(){return(fn=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:sendVerificationCode",se(w,m))})).apply(this,arguments)}function Ws(){return(Ws=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m))})).apply(this,arguments)}function ia(){return(ia=(0,u.Z)(function*(w,m){const _=yield tn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,m));if(_.temporaryProof)throw nn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const qn={USER_NOT_FOUND:"user-not-found"};function To(){return(To=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithPhoneNumber",se(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),qn)})).apply(this,arguments)}class pt extends Bc{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new pt({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new pt({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Mi(w,m){return Ws.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Tr(w,m){return ia.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function qs(w,m){return To.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:I,verificationCode:S}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:I,code:S}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:I,phoneNumber:S,temporaryProof:P}=m;return I||_||S||P?new pt({verificationId:_,verificationCode:I,phoneNumber:S,temporaryProof:P}):null}}class Ai{constructor(m){var _,I,S,P,Z,oe;const Le=(0,V.zd)((0,V.pd)(m)),He=null!==(_=Le.apiKey)&&void 0!==_?_:null,nt=null!==(I=Le.oobCode)&&void 0!==I?I:null,kt=function Vc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Le.mode)&&void 0!==S?S:null);j(He&&nt&&kt,"argument-error"),this.apiKey=He,this.operation=kt,this.code=nt,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Z=Le.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(m){const _=function xv(w){const m=(0,V.zd)((0,V.pd)(w)).link,_=m?(0,V.zd)((0,V.pd)(m)).deep_link_id:null,I=(0,V.zd)((0,V.pd)(w)).deep_link_id;return(I?(0,V.zd)((0,V.pd)(I)).link:null)||I||_||m||w}(m);try{return new Ai(_)}catch{return null}}}let $a=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return bo._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const S=Ai.parseLink(I);return j(S,"argument-error"),bo._fromEmailAndCode(_,S.code,S.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class xi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Jr extends xi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Zs extends Jr{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return j("providerId"in _&&"signInMethod"in _,"argument-error"),je._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return j(m.idToken||m.accessToken,"argument-error"),je._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Zs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Zs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:S,pendingToken:P,nonce:Z,providerId:oe}=m;if(!I&&!S&&!_&&!P||!oe)return null;try{return new Zs(oe)._credential({idToken:_,accessToken:I,nonce:Z,pendingToken:P})}catch{return null}}}let kg=(()=>{class w extends Jr{constructor(){super("facebook.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),sa=(()=>{class w extends Jr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:S}=_;if(!I&&!S)return null;try{return w.credential(I,S)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Is=(()=>{class w extends Jr{constructor(){super("github.com")}static credential(_){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class zi extends Bc{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Gs(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,Gs(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Gs(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:S,pendingToken:P}=_;return I&&S&&P&&I===S?new zi(I,P):null}static _create(m,_){return new zi(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Eh extends xi{constructor(m){j(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Eh.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Eh.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=zi.fromJSON(m);return j(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:I}=m;if(!_||!I)return null;try{return zi._create(I,_)}catch{return null}}}let bh=(()=>{class w extends Jr{constructor(){super("twitter.com")}static credential(_,I){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:S}=_;if(!I||!S)return null;try{return w.credential(I,S)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function jc(w,m){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signUp",se(w,m))})).apply(this,arguments)}class ei{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,I,S=!1){return(0,u.Z)(function*(){const P=yield _e._fromIdTokenResponse(m,I,S),Z=Ha(I);return new ei({user:P,providerId:Z,_tokenResponse:I,operationType:_})})()}static _forOperation(m,_,I){return(0,u.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const S=Ha(I);return new ei({user:m,providerId:S,_tokenResponse:I,operationType:_})})()}}function Ha(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function $c(w){return or.apply(this,arguments)}function or(){return(or=(0,u.Z)(function*(w){var m;const _=Rn(w);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new ei({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield jc(_,{returnSecureToken:!0}),S=yield ei._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(S.user),S})).apply(this,arguments)}class Rg extends V.ZR{constructor(m,_,I,S){var P;super(_.code,_.message),this.operationType=I,this.user=S,Object.setPrototypeOf(this,Rg.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,_,I,S){return new Rg(m,_,I,S)}}function fi(w,m,_,I){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Rg._fromErrorAndOperation(w,P,m,I):P})}function Ur(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Th(w,m){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,u.Z)(function*(w,m){const _=(0,V.m9)(w);yield za(!0,_,m);const{providerUserInfo:I}=yield function rn(w,m){return zn.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),S=Ur(I||[]);return _.providerData=_.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Ks.apply(this,arguments)}function Hc(w,m){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,u.Z)(function*(w,m,_=!1){const I=yield sn(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return ei._forOperation(w,"link",I)})).apply(this,arguments)}function za(w,m,_){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,u.Z)(function*(w,m,_){yield ws(m);const S=!1===w?"provider-already-linked":"no-such-provider";j(Ur(m.providerData).has(_)===w,m.auth,S)})).apply(this,arguments)}function Ng(w,m){return Pv.apply(this,arguments)}function Pv(){return(Pv=(0,u.Z)(function*(w,m,_=!1){const{auth:I}=w,S="reauthenticate";try{const P=yield sn(w,fi(I,S,m,w),_);j(P.idToken,I,"internal-error");const Z=mt(P.idToken);j(Z,I,"internal-error");const{sub:oe}=Z;return j(w.uid===oe,I,"user-mismatch"),ei._forOperation(w,S,P)}catch(P){throw"auth/user-not-found"===P?.code&&ee(I,"user-mismatch"),P}})).apply(this,arguments)}function Ov(w,m){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,u.Z)(function*(w,m,_=!1){const I="signIn",S=yield fi(w,I,m),P=yield ei._fromIdTokenResponse(w,I,S);return _||(yield w._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Mh(w,m){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,u.Z)(function*(w,m){return Ov(Rn(w),m)})).apply(this,arguments)}function _b(w,m){return kv.apply(this,arguments)}function kv(){return(kv=(0,u.Z)(function*(w,m){const _=(0,V.m9)(w);return yield za(!1,_,m.providerId),Hc(_,m)})).apply(this,arguments)}function Nn(w,m){return Rv.apply(this,arguments)}function Rv(){return(Rv=(0,u.Z)(function*(w,m){return Ng((0,V.m9)(w),m)})).apply(this,arguments)}function Nv(){return(Nv=(0,u.Z)(function*(w,m){return tn(w,"POST","/v1/accounts:signInWithCustomToken",se(w,m))})).apply(this,arguments)}function AA(w,m){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,u.Z)(function*(w,m){const _=Rn(w),I=yield function MA(w,m){return Nv.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),S=yield ei._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(S.user),S}),Fv.apply(this,arguments)}class Ah{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Lv._fromServerResponse(m,_):"totpInfo"in _?yu._fromServerResponse(m,_):ee(m,"internal-error")}}class Lv extends Ah{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Lv(_)}}class yu extends Ah{constructor(m){super("totp",m)}static _fromServerResponse(m,_){return new yu(_)}}function Ga(w,m,_){var I;j((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),j(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(j(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(j(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function xA(w,m,_){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,u.Z)(function*(w,m,_){var I;const S=Rn(w),P={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Z=yield zs(S,P,"getOobCode",!0);_&&Ga(S,Z,_),yield fu(S,Z)}else _&&Ga(S,P,_),yield fu(S,P).catch(function(){var Z=(0,u.Z)(function*(oe){if("auth/missing-recaptcha-token"!==oe.code)return Promise.reject(oe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Le=yield zs(S,P,"getOobCode",!0);_&&Ga(S,Le,_),yield fu(S,Le)}});return function(oe){return Z.apply(this,arguments)}}())}),Uv.apply(this,arguments)}function Bv(w,m,_){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,u.Z)(function*(w,m,_){yield yh((0,V.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Do(w,m){return vu.apply(this,arguments)}function vu(){return vu=(0,u.Z)(function*(w,m){yield function mb(w,m){return Si.apply(this,arguments)}((0,V.m9)(w),{oobCode:m})}),vu.apply(this,arguments)}function zc(w,m){return mr.apply(this,arguments)}function mr(){return(mr=(0,u.Z)(function*(w,m){const _=(0,V.m9)(w),I=yield yh(_,{oobCode:m}),S=I.requestType;switch(j(S,_,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(I.mfaInfo,_,"internal-error");default:j(I.email,_,"internal-error")}let P=null;return I.mfaInfo&&(P=Ah._fromServerResponse(Rn(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function xh(w,m){return ti.apply(this,arguments)}function ti(){return(ti=(0,u.Z)(function*(w,m){const{data:_}=yield zc((0,V.m9)(w),m);return _.email})).apply(this,arguments)}function Ph(w,m,_){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,u.Z)(function*(w,m,_){var I;const S=Rn(w),P={returnSecureToken:!0,email:m,password:_,clientType:"CLIENT_TYPE_WEB"};let Z;if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const He=yield zs(S,P,"signUpPassword");Z=jc(S,He)}else Z=jc(S,P).catch(function(){var He=(0,u.Z)(function*(nt){if("auth/missing-recaptcha-token"===nt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const kt=yield zs(S,P,"signUpPassword");return jc(S,kt)}return Promise.reject(nt)});return function(nt){return He.apply(this,arguments)}}());const oe=yield Z.catch(He=>Promise.reject(He)),Le=yield ei._fromIdTokenResponse(S,"signIn",oe);return yield S._updateCurrentUser(Le.user),Le}),Oh.apply(this,arguments)}function Vv(w,m,_){return Mh((0,V.m9)(w),$a.credential(m,_))}function Lg(w,m,_){return Wa.apply(this,arguments)}function Wa(){return Wa=(0,u.Z)(function*(w,m,_){var I;const S=Rn(w),P={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function Z(oe,Le){j(Le.handleCodeInApp,S,"argument-error"),Le&&Ga(S,oe,Le)}if(null!==(I=S._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const oe=yield zs(S,P,"getOobCode",!0);Z(oe,_),yield gu(S,oe)}else Z(P,_),yield gu(S,P).catch(function(){var oe=(0,u.Z)(function*(Le){if("auth/missing-recaptcha-token"!==Le.code)return Promise.reject(Le);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield zs(S,P,"getOobCode",!0);Z(He,_),yield gu(S,He)}});return function(Le){return oe.apply(this,arguments)}}())}),Wa.apply(this,arguments)}function jv(w,m){const _=Ai.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}function Ug(w,m,_){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,u.Z)(function*(w,m,_){const I=(0,V.m9)(w),S=$a.credentialWithLink(m,_||lt());return j(S._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Mh(I,S)})).apply(this,arguments)}function kh(){return(kh=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:createAuthUri",se(w,m))})).apply(this,arguments)}function Hv(w,m){return Gc.apply(this,arguments)}function Gc(){return Gc=(0,u.Z)(function*(w,m){const I={identifier:m,continueUri:en()?lt():"http://localhost"},{signinMethods:S}=yield function $v(w,m){return kh.apply(this,arguments)}((0,V.m9)(w),I);return S||[]}),Gc.apply(this,arguments)}function wu(w,m){return So.apply(this,arguments)}function So(){return So=(0,u.Z)(function*(w,m){const _=(0,V.m9)(w),S={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Ga(_.auth,S,m);const{email:P}=yield function hu(w,m){return wh.apply(this,arguments)}(_.auth,S);P!==w.email&&(yield w.reload())}),So.apply(this,arguments)}function zv(w,m,_){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,u.Z)(function*(w,m,_){const I=(0,V.m9)(w),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&Ga(I.auth,P,_);const{email:Z}=yield function Er(w,m){return br.apply(this,arguments)}(I.auth,P);Z!==w.email&&(yield w.reload())}),Bg.apply(this,arguments)}function Gv(){return(Gv=(0,u.Z)(function*(w,m){return pe(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function vb(w,m){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,u.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const I=(0,V.m9)(w),P={idToken:yield I.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},Z=yield sn(I,function yb(w,m){return Gv.apply(this,arguments)}(I.auth,P));I.displayName=Z.displayName||null,I.photoURL=Z.photoUrl||null;const oe=I.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=I.displayName,oe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Z)}),Vg.apply(this,arguments)}function PA(w,m){return Rh((0,V.m9)(w),m,null)}function Wv(w,m){return Rh((0,V.m9)(w),null,m)}function Rh(w,m,_){return jg.apply(this,arguments)}function jg(){return(jg=(0,u.Z)(function*(w,m,_){const{auth:I}=w,P={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const Z=yield sn(w,xg(I,P));yield w._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Iu{constructor(m,_,I={}){this.isNewUser=m,this.providerId=_,this.profile=I}}class Cb extends Iu{constructor(m,_,I,S){super(m,_,I),this.username=S}}class Eu extends Iu{constructor(m,_){super(m,"facebook.com",_)}}class qv extends Cb{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Hg extends Iu{constructor(m,_){super(m,"google.com",_)}}class Nh extends Cb{constructor(m,_,I){super(m,"twitter.com",_,I)}}function Wc(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function $g(w){var m,_;if(!w)return null;const{providerId:I}=w,S=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},P=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const Z=null===(_=null===(m=mt(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(Z)return new Iu(P,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!I)return null;switch(I){case"facebook.com":return new Eu(P,S);case"github.com":return new qv(P,S);case"google.com":return new Hg(P,S);case"twitter.com":return new Nh(P,S,w.screenName||null);case"custom":case"anonymous":return new Iu(P,null);default:return new Iu(P,I,S)}}(_)}class Qs{constructor(m,_,I){this.type=m,this.credential=_,this.auth=I}static _fromIdtoken(m,_){return new Qs("enroll",m,_)}static _fromMfaPendingCredential(m){return new Qs("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,I;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Qs._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return Qs._fromIdtoken(m.multiFactorSession.idToken)}return null}}class qa{constructor(m,_,I){this.session=m,this.hints=_,this.signInResolver=I}static _fromError(m,_){const I=Rn(m),S=_.customData._serverResponse,P=(S.mfaInfo||[]).map(oe=>Ah._fromServerResponse(I,oe));j(S.mfaPendingCredential,I,"internal-error");const Z=Qs._fromMfaPendingCredential(S.mfaPendingCredential);return new qa(Z,P,function(){var oe=(0,u.Z)(function*(Le){const He=yield Le._process(I,Z);delete S.mfaInfo,delete S.mfaPendingCredential;const nt=Object.assign(Object.assign({},S),{idToken:He.idToken,refreshToken:He.refreshToken});switch(_.operationType){case"signIn":const kt=yield ei._fromIdTokenResponse(I,_.operationType,nt);return yield I._updateCurrentUser(kt.user),kt;case"reauthenticate":return j(_.user,I,"internal-error"),ei._forOperation(_.user,_.operationType,nt);default:ee(I,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,u.Z)(function*(){return _.signInResolver(m)})()}}function Bh(w,m){var _;const I=(0,V.m9)(w),S=m;return j(m.customData.operationType,I,"argument-error"),j(null===(_=S.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),qa._fromError(I,S)}class Tu{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>Ah._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new Tu(m)}getSession(){var m=this;return(0,u.Z)(function*(){return Qs._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var I=this;return(0,u.Z)(function*(){const S=m,P=yield I.getSession(),Z=yield sn(I.user,S._process(I.user.auth,P,_));return yield I.user._updateTokensIfNecessary(Z),I.user.reload()})()}unenroll(m){var _=this;return(0,u.Z)(function*(){const I="string"==typeof m?m:m.uid,S=yield _.user.getIdToken();try{const P=yield sn(_.user,function Gg(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:withdraw",se(w,m))}(_.user.auth,{idToken:S,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Z})=>Z!==I),yield _.user._updateTokensIfNecessary(P),yield _.user.reload()}catch(P){throw P}})()}}const on=new WeakMap;function Du(w){const m=(0,V.m9)(w);return on.has(m)||on.set(m,Tu._fromUser(m)),on.get(m)}const Js="__sak";class ni{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Js,"1"),this.storage.removeItem(Js),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const $h=(()=>{class w extends ni{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bb(){const w=(0,V.z$)();return k(w)||Ke(w)}()&&function $i(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const S=this.storage.getItem(I),P=this.localCache[I];S!==P&&_(I,P,S)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((oe,Le,He)=>{this.notifyListeners(oe,He)});const S=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(S);if(_.newValue!==oe)null!==_.newValue?this.storage.setItem(S,_.newValue):this.storage.removeItem(S);else if(this.localCache[S]===_.newValue&&!I)return}const P=()=>{const oe=this.storage.getItem(S);!I&&this.localCache[S]===oe||this.notifyListeners(S,oe)},Z=this.storage.getItem(S);!function hn(){return(0,V.w1)()&&10===document.documentMode}()||Z===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,I){this.localCache[_]=I;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var S=()=>super._set,P=this;return(0,u.Z)(function*(){yield S().call(P,_,I),P.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,S=this;return(0,u.Z)(function*(){const P=yield I().call(S,_);return S.localCache[_]=JSON.stringify(P),P})()}_remove(_){var I=()=>super._remove,S=this;return(0,u.Z)(function*(){yield I().call(S,_),delete S.localCache[_]})()}}return w.type="LOCAL",w})(),Su=(()=>{class w extends ni{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let Wg=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(P=>P.isListeningto(_));if(I)return I;const S=new w(_);return this.receivers.push(S),S}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,u.Z)(function*(){const S=_,{eventId:P,eventType:Z,data:oe}=S.data,Le=I.handlersMap[Z];if(!Le?.size)return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:Z});const He=Array.from(Le).map(function(){var kt=(0,u.Z)(function*(Br){return Br(S.origin,oe)});return function(Br){return kt.apply(this,arguments)}}()),nt=yield function Mo(w){return Promise.all(w.map(function(){var m=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return m.apply(this,arguments)}}()))}(He);S.ports[0].postMessage({status:"done",eventId:P,eventType:Z,response:nt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function qc(w="",m=10){let _="";for(let I=0;I<m;I++)_+=Math.floor(10*Math.random());return w+_}class Jv{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,I=50){var S=this;return(0,u.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Z,oe;return new Promise((Le,He)=>{const nt=qc("",20);P.port1.start();const kt=setTimeout(()=>{He(new Error("unsupported_event"))},I);oe={messageChannel:P,onMessage(Br){const qi=Br;if(qi.data.eventId===nt)switch(qi.data.status){case"ack":clearTimeout(kt),Z=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Le(qi.data.response);break;default:clearTimeout(kt),clearTimeout(Z),He(new Error("invalid_response"))}}},S.handlers.add(oe),P.port1.addEventListener("message",oe.onMessage),S.target.postMessage({eventType:m,eventId:nt,data:_},[P.port2])}).finally(()=>{oe&&S.removeMessageHandler(oe)})})()}}function er(){return window}function qg(){return typeof er().WorkerGlobalScope<"u"&&"function"==typeof er().importScripts}function Mu(){return(Mu=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Kg="firebaseLocalStorageDb",Ka="firebaseLocalStorage",Ao="fbase_key";class Zc{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function zh(w,m){return w.transaction([Ka],m?"readwrite":"readonly").objectStore(Ka)}function Yg(){const w=indexedDB.open(Kg,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(Ka,{keyPath:Ao})}catch(S){_(S)}}),w.addEventListener("success",(0,u.Z)(function*(){const I=w.result;I.objectStoreNames.contains(Ka)?m(I):(I.close(),yield function e0(){const w=indexedDB.deleteDatabase(Kg);return new Zc(w).toPromise()}(),m(yield Yg()))}))})}function Qg(w,m,_){return ve.apply(this,arguments)}function ve(){return(ve=(0,u.Z)(function*(w,m,_){const I=zh(w,!0).put({[Ao]:m,value:_});return new Zc(I).toPromise()})).apply(this,arguments)}function as(){return(as=(0,u.Z)(function*(w,m){const _=zh(w,!1).get(m),I=yield new Zc(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Gh(w,m){const _=zh(w,!0).delete(m);return new Zc(_).toPromise()}const bs=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield Yg()),_.db})()}_withRetries(_){var I=this;return(0,u.Z)(function*(){let S=0;for(;;)try{const P=yield I._openDb();return yield _(P)}catch(P){if(S++>3)throw P;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return qg()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=Wg._getInstance(function Zg(){return qg()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,u.Z)(function*(S,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(S,P){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,u.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var I,S;if(_.activeServiceWorker=yield function _t(){return Mu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Jv(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(I=P[0])&&void 0!==I&&I.fulfilled&&null!==(S=P[0])&&void 0!==S&&S.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,u.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Db(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Yg();return yield Qg(_,Js,"1"),yield Gh(_,Js),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,u.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var S=this;return(0,u.Z)(function*(){return S._withPendingWrite((0,u.Z)(function*(){return yield S._withRetries(P=>Qg(P,_,I)),S.localCache[_]=I,S.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,u.Z)(function*(){const S=yield I._withRetries(P=>function Vt(w,m){return as.apply(this,arguments)}(P,_));return I.localCache[_]=S,S})()}_remove(_){var I=this;return(0,u.Z)(function*(){return I._withPendingWrite((0,u.Z)(function*(){return yield I._withRetries(S=>Gh(S,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const I=yield _._withRetries(Z=>{const oe=zh(Z,!1).getAll();return new Zc(oe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:Z,value:oe}of I)P.add(Z),JSON.stringify(_.localCache[Z])!==JSON.stringify(oe)&&(_.notifyListeners(Z,oe),S.push(Z));for(const Z of Object.keys(_.localCache))_.localCache[Z]&&!P.has(Z)&&(_.notifyListeners(Z,null),S.push(Z));return S})()}notifyListeners(_,I){this.localCache[_]=I;const S=this.listeners[_];if(S)for(const P of Array.from(S))P(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),Sr=1e12;class xo{constructor(m){this.auth=m,this.counter=Sr,this._widgets=new Map}render(m,_){const I=this.counter;return this._widgets.set(I,new r0(m,this.auth.name,_||{})),this.counter++,I}reset(m){var _;const I=m||Sr;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Sr))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,u.Z)(function*(){var I;return null===(I=_._widgets.get(m||Sr))||void 0===I||I.execute(),""})()}}class r0{constructor(m,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof m?document.getElementById(m):m;j(S,"argument-error",{appName:_}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Yc(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ts=Hs("rcb"),Sb=new un(3e4,6e4);class tm{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=er().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return j(function Mb(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)&&Kt(er().grecaptcha)?Promise.resolve(er().grecaptcha):new Promise((I,S)=>{const P=er().setTimeout(()=>{S(de(m,"network-request-failed"))},Sb.get());er()[Ts]=()=>{er().clearTimeout(P),delete er()[Ts];const oe=er().grecaptcha;if(!oe||!Kt(oe))return void S(de(m,"internal-error"));const Le=oe.render;oe.render=(He,nt)=>{const kt=Le(He,nt);return this.counter++,kt},this.hostLanguage=_,I(oe)},cu(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Ts,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),S(de(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=er().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nm{load(m){return(0,u.Z)(function*(){return new xo(m)})()}clearedOneInstance(){}}const Wh="recaptcha",s0={theme:"light",type:"image"};class rm{constructor(m,_=Object.assign({},s0),I){this.parameters=_,this.type=Wh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rn(I),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof m?document.getElementById(m):m;j(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nm:new tm,this.validateStartingState()}verify(){var m=this;return(0,u.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(_)||new Promise(P=>{const Z=oe=>{oe&&(m.tokenChangeListeners.delete(Z),P(oe))};m.tokenChangeListeners.add(Z),m.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof m)m(_);else if("string"==typeof m){const I=er()[m];"function"==typeof I&&I(_)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,u.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,u.Z)(function*(){j(en()&&!qg(),m.auth,"internal-error"),yield function Ab(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function js(w){return Io.apply(this,arguments)}(m.auth);j(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qh{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=pt._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function gi(w,m,_){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,u.Z)(function*(w,m,_){const I=Rn(w),S=yield xu(I,m,(0,V.m9)(_));return new qh(S,P=>Mh(I,P))})).apply(this,arguments)}function im(w,m,_){return pn.apply(this,arguments)}function pn(){return(pn=(0,u.Z)(function*(w,m,_){const I=(0,V.m9)(w);yield za(!1,I,"phone");const S=yield xu(I.auth,m,(0,V.m9)(_));return new qh(S,P=>_b(I,P))})).apply(this,arguments)}function ut(w,m,_){return _r.apply(this,arguments)}function _r(){return(_r=(0,u.Z)(function*(w,m,_){const I=(0,V.m9)(w),S=yield xu(I.auth,m,(0,V.m9)(_));return new qh(S,P=>Nn(I,P))})).apply(this,arguments)}function xu(w,m,_){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,u.Z)(function*(w,m,_){var I;const S=yield _.verify();try{let P;if(j("string"==typeof S,w,"argument-error"),j(_.type===Wh,w,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const Z=P.session;if("phoneNumber"in P)return j("enroll"===Z.type,w,"internal-error"),(yield function Qv(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:start",se(w,m))}(w,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{j("signin"===Z.type,w,"internal-error");const oe=(null===(I=P.multiFactorHint)||void 0===I?void 0:I.uid)||P.multiFactorUid;return j(oe,w,"missing-multi-factor-info"),(yield function Jg(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:start",se(w,m))}(w,{mfaPendingCredential:Z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield function bt(w,m){return fn.apply(this,arguments)}(w,{phoneNumber:P.phoneNumber,recaptchaToken:S});return Z}}finally{_._reset()}}),Zh.apply(this,arguments)}function ri(w,m){return eo.apply(this,arguments)}function eo(){return(eo=(0,u.Z)(function*(w,m){yield Hc((0,V.m9)(w),m)})).apply(this,arguments)}let vn=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Rn(_)}verifyPhoneNumber(_,I){return xu(this.auth,_,(0,V.m9)(I))}static credential(_,I){return pt._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:S}=_;return I&&S?pt._fromTokenResponse(I,S):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Po(w,m){return m?it(m):(j(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class oa extends Bc{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Gs(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Gs(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Gs(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function wt(w){return Ov(w.auth,new oa(w),w.bypassAuthState)}function o0(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),Ng(_,new oa(w),w.bypassAuthState)}function sm(w){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,u.Z)(function*(w){const{auth:m,user:_}=w;return j(_,m,"internal-error"),Hc(_,new oa(w),w.bypassAuthState)})).apply(this,arguments)}class to{constructor(m,_,I,S,P=!1){this.auth=m,this.resolver=I,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,u.Z)(function*(I,S){m.pendingPromise={resolve:I,reject:S};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(I,S){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,u.Z)(function*(){const{urlResponse:I,sessionId:S,postBody:P,tenantId:Z,error:oe,type:Le}=m;if(oe)return void _.reject(oe);const He={auth:_.auth,requestUri:I,sessionId:S,tenantId:Z||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)(He))}catch(nt){_.reject(nt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return wt;case"linkViaPopup":case"linkViaRedirect":return sm;case"reauthViaPopup":case"reauthViaRedirect":return o0;default:ee(this.auth,"internal-error")}}resolve(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const no=new un(2e3,1e4);function mi(w,m,_){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,u.Z)(function*(w,m,_){const I=Rn(w);he(w,m,xi);const S=Po(I,_);return new ro(I,"signInViaPopup",m,S).executeNotNull()})).apply(this,arguments)}function Qa(w,m,_){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,u.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,xi);const S=Po(I.auth,_);return new ro(I.auth,"reauthViaPopup",m,S,I).executeNotNull()})).apply(this,arguments)}function Pu(w,m,_){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,u.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,xi);const S=Po(I.auth,_);return new ro(I.auth,"linkViaPopup",m,S,I).executeNotNull()})).apply(this,arguments)}let ro=(()=>{class w extends to{constructor(_,I,S,P,Z){super(_,I,P,Z),this.provider=S,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const I=yield _.execute();return j(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,u.Z)(function*(){Ue(1===_.filter.length,"Popup operations only handle one event");const I=qc();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(S=>{_.reject(S)}),_.resolver._isIframeWebStorageSupported(_.auth,S=>{S||_.reject(de(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(de(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,S;this.pollId=null!==(S=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(de(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,no.get())};_()}}return w.currentPopupAction=null,w})();const Jc="pendingRedirect",Ds=new Map;class aa extends to{constructor(m,_,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,u.Z)(function*(){let I=Ds.get(_.auth._key());if(!I){try{const P=(yield function ku(w,m){return Kh.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;I=()=>Promise.resolve(P)}catch(S){I=()=>Promise.reject(S)}Ds.set(_.auth._key(),I)}return _.bypassAuthState||Ds.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,I=this;return(0,u.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(I,m);if("unknown"!==m.type){if(m.eventId){const S=yield I.auth._redirectUserForId(m.eventId);if(S)return I.user=S,_().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Kh(){return(Kh=(0,u.Z)(function*(w,m){const _=Yh(m),I=_i(w);if(!(yield I._isAvailable()))return!1;const S="true"===(yield I._get(_));return yield I._remove(_),S})).apply(this,arguments)}function Xc(w,m){return ca.apply(this,arguments)}function ca(){return(ca=(0,u.Z)(function*(w,m){return _i(w)._set(Yh(m),"true")})).apply(this,arguments)}function Oo(){Ds.clear()}function el(w,m){Ds.set(w._key(),m)}function _i(w){return it(w._redirectPersistence)}function Yh(w){return Xn(Jc,w.config.apiKey,w.name)}function Ru(w,m,_){return function Pi(w,m,_){return En.apply(this,arguments)}(w,m,_)}function En(){return(En=(0,u.Z)(function*(w,m,_){const I=Rn(w);he(w,m,xi),yield I._initializationPromise;const S=Po(I,_);return yield Xc(S,I),S._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function jt(w,m,_){return function Xa(w,m,_){return Mr.apply(this,arguments)}(w,m,_)}function Mr(){return(Mr=(0,u.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,xi),yield I.auth._initializationPromise;const S=Po(I.auth,_);yield Xc(S,I.auth);const P=yield Ss(I);return S._openRedirect(I.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function yi(w,m,_){return function tl(w,m,_){return nl.apply(this,arguments)}(w,m,_)}function nl(){return(nl=(0,u.Z)(function*(w,m,_){const I=(0,V.m9)(w);he(I.auth,m,xi),yield I.auth._initializationPromise;const S=Po(I.auth,_);yield za(!1,I,m.providerId),yield Xc(S,I.auth);const P=yield Ss(I);return S._openRedirect(I.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function a0(w,m){return ar.apply(this,arguments)}function ar(){return(ar=(0,u.Z)(function*(w,m){return yield Rn(w)._initializationPromise,ko(w,m,!1)})).apply(this,arguments)}function ko(w,m){return bn.apply(this,arguments)}function bn(){return(bn=(0,u.Z)(function*(w,m,_=!1){const I=Rn(w),S=Po(I,m),Z=yield new aa(I,S,_).execute();return Z&&!_&&(delete Z.user._redirectEventId,yield I._persistUserIfCurrent(Z.user),yield I._setRedirectUser(null,m)),Z})).apply(this,arguments)}function Ss(w){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,u.Z)(function*(w){const m=qc(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class ec{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(_=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function tc(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qh(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var I;if(m.error&&!Qh(m)){const S=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(de(this.auth,S))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const I=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(om(m))}saveEventToCache(m){this.cachedEventUids.add(om(m)),this.lastProcessedEventTime=Date.now()}}function om(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Qh({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Jh(w){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,u.Z)(function*(w,m={}){return pe(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Dt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ro=/^https?/;function No(){return(No=(0,u.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Jh(w);for(const _ of m)try{if(am(_))return}catch{}ee(w,"unauthorized-domain")})).apply(this,arguments)}function am(w){const m=lt(),{protocol:_,hostname:I}=new URL(m);if(w.startsWith("chrome-extension://")){const Z=new URL(w);return""===Z.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&Z.hostname===I}if(!Ro.test(_))return!1;if(Dt.test(w))return I===w;const S=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(I)}const cm=new un(3e4,6e4);function ii(){const w=er().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let cr=null;const um=new un(5e3,15e3),Lu="__/auth/iframe",dm="emulator/auth/iframe",hm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nc(w){const m=w.config;j(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?Zr(m,dm):`https://${w.config.authDomain}/${Lu}`,I={apiKey:m.apiKey,appName:w.name,v:L.SDK_VERSION},S=Uu.get(w.config.apiHost);S&&(I.eid=S);const P=w._getFrameworks();return P.length&&(I.fw=P.join(",")),`${_}?${(0,V.xO)(I).slice(1)}`}function io(){return io=(0,u.Z)(function*(w){const m=yield function Fo(w){return cr=cr||function lm(w){return new Promise((m,_)=>{var I,S,P;function Z(){ii(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ii(),_(de(w,"network-request-failed"))},timeout:cm.get()})}if(null!==(S=null===(I=er().gapi)||void 0===I?void 0:I.iframes)&&void 0!==S&&S.Iframe)m(gapi.iframes.getContext());else{if(null===(P=er().gapi)||void 0===P||!P.load){const oe=Hs("iframefcb");return er()[oe]=()=>{gapi.load?Z():_(de(w,"network-request-failed"))},cu(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>_(Le))}Z()}}).catch(m=>{throw cr=null,m})}(w),cr}(w),_=er().gapi;return j(_,w,"internal-error"),m.open({where:document.body,url:nc(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hm,dontclear:!0},I=>new Promise(function(){var S=(0,u.Z)(function*(P,Z){yield I.restyle({setHideOnLeave:!1});const oe=de(w,"network-request-failed"),Le=er().setTimeout(()=>{Z(oe)},um.get());function He(){er().clearTimeout(Le),P(I)}I.ping(He).then(He,()=>{Z(oe)})});return function(P,Z){return S.apply(this,arguments)}}()))}),io.apply(this,arguments)}const rl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ha{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const fm="__/auth/handler",Pb="emulator/auth/handler",Xh=encodeURIComponent("fac");function Wi(w,m,_,I,S,P){return ju.apply(this,arguments)}function ju(){return(ju=(0,u.Z)(function*(w,m,_,I,S,P){j(w.config.authDomain,w,"auth-domain-config-required"),j(w.config.apiKey,w,"invalid-api-key");const Z={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:L.SDK_VERSION,eventId:S};if(m instanceof xi){m.setDefaultLanguage(w.languageCode),Z.providerId=m.providerId||"",(0,V.xb)(m.getCustomParameters())||(Z.customParameters=JSON.stringify(m.getCustomParameters()));for(const[nt,kt]of Object.entries(P||{}))Z[nt]=kt}if(m instanceof Jr){const nt=m.getScopes().filter(kt=>""!==kt);nt.length>0&&(Z.scopes=nt.join(","))}w.tenantId&&(Z.tid=w.tenantId);const oe=Z;for(const nt of Object.keys(oe))void 0===oe[nt]&&delete oe[nt];const Le=yield w._getAppCheckToken(),He=Le?`#${Xh}=${encodeURIComponent(Le)}`:"";return`${function $u({config:w}){return w.emulator?Zr(w,Pb):`https://${w.authDomain}/${fm}`}(w)}?${(0,V.xO)(oe).slice(1)}${He}`})).apply(this,arguments)}const Zn="webStorageSupport",so=class ef{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Su,this._completeRedirectFn=ko,this._overrideRedirectResult=el}_openPopup(m,_,I,S){var P=this;return(0,u.Z)(function*(){var Z;Ue(null===(Z=P.eventManagers[m._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const oe=yield Wi(m,_,I,lt(),S);return function xb(w,m,_,I=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),Z=Math.max((window.screen.availWidth-I)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},rl),{width:I.toString(),height:S.toString(),top:P,left:Z}),He=(0,V.z$)().toLowerCase();_&&(oe=x(He)?"_blank":_),O(He)&&(m=m||"http://localhost",Le.scrollbars="yes");const nt=Object.entries(Le).reduce((Br,[qi,oo])=>`${Br}${qi}=${oo},`,"");if(function Ct(w=(0,V.z$)()){var m;return Ke(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(He)&&"_self"!==oe)return function Vu(w,m){const _=document.createElement("a");_.href=w,_.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(m||"",oe),new ha(null);const kt=window.open(m||"",oe,nt);j(kt,w,"popup-blocked");try{kt.focus()}catch{}return new ha(kt)}(m,oe,qc())})()}_openRedirect(m,_,I,S){var P=this;return(0,u.Z)(function*(){return yield P._originValidation(m),function Hh(w){er().location.href=w}(yield Wi(m,_,I,lt(),S)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:S,promise:P}=this.eventManagers[_];return S?Promise.resolve(S):(Ue(P,"If manager is not set, promise should be"),P)}const I=this.initAndGetManager(m);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(m){var _=this;return(0,u.Z)(function*(){const I=yield function da(w){return io.apply(this,arguments)}(m),S=new ec(m);return I.register("authEvent",P=>(j(P?.authEvent,m,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:S},_.iframes[m._key()]=I,S})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Zn,{type:Zn},S=>{var P;const Z=null===(P=S?.[0])||void 0===P?void 0:P[Zn];void 0!==Z&&_(!!Z),ee(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ua(w){return No.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return xt()||k()||Ke()}};class pm{constructor(m){this.factorId=m}_process(m,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,I);case"signin":return this._finalizeSignIn(m,_.credential);default:return we("unexpected MultiFactorSessionType")}}}class si extends pm{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new si(m)}_finalizeEnroll(m,_,I){return function Vh(w,m){return pe(w,"POST","/v2/accounts/mfaEnrollment:finalize",se(w,m))}(m,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function Xg(w,m){return pe(w,"POST","/v2/accounts/mfaSignIn:finalize",se(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rc=(()=>{class w{constructor(){}static assertion(_){return si._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var u0="@firebase/auth";class Ob{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(I=>{m(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const d0=(0,V.Pz)("authIdTokenMaxAge")||300;let zu=null;const h0=w=>function(){var m=(0,u.Z)(function*(_){const I=_&&(yield _.getIdTokenResult()),S=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(S&&S>d0)return;const P=I?.token;zu!==P&&(zu=P,yield fetch(w,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function fa(w=(0,L.getApp)()){const m=(0,L._getProvider)(w,"auth");if(m.isInitialized())return m.getImmediate();const _=function Wn(w,m){const _=(0,L._getProvider)(w,"auth");if(_.isInitialized()){const S=_.getImmediate(),P=_.getOptions();if((0,V.vZ)(P,m??{}))return S;ee(S,"already-initialized")}return _.initialize({options:m})}(w,{popupRedirectResolver:so,persistence:[bs,$h,Su]}),I=(0,V.Pz)("authTokenSyncURL");if(I){const P=h0(I);(function zg(w,m,_){(0,V.m9)(w).beforeAuthStateChanged(m,_)})(_,P,()=>P(_.currentUser)),function Zv(w,m,_,I){(0,V.m9)(w).onIdTokenChanged(m,_,I)}(_,Z=>P(Z))}const S=(0,V.q4)("auth");return S&&gh(_,`http://${S}`),_}!function tf(w){(0,L._registerComponent)(new Ie.wA("auth",(m,{options:_})=>{const I=m.getProvider("app").getImmediate(),S=m.getProvider("heartbeat"),P=m.getProvider("app-check-internal"),{apiKey:Z,authDomain:oe}=I.options;j(Z&&!Z.includes(":"),"invalid-api-key",{appName:I.name});const Le={apiKey:Z,authDomain:oe,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fc(w)},He=new os(I,S,P,Le);return function Mv(w,m){const _=m?.persistence||[],I=(Array.isArray(_)?_:[_]).map(it);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(I,m?.popupRedirectResolver)}(He,_),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,I)=>{m.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new Ie.wA("auth-internal",m=>{const _=Rn(m.getProvider("auth").getImmediate());return new Ob(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(u0,"0.23.2",function Oi(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,L.registerVersion)(u0,"0.23.2","esm2017")}("Browser")},9058:(st,Ee,F)=>{F.d(Ee,{$s:()=>it,BH:()=>re,DV:()=>zn,G6:()=>Zr,GJ:()=>wn,L:()=>De,LL:()=>ke,P0:()=>ot,Pz:()=>de,Sg:()=>he,UG:()=>we,UI:()=>Lr,US:()=>Ie,Wl:()=>ht,Yr:()=>un,ZB:()=>X,ZR:()=>pe,aH:()=>ee,b$:()=>en,cI:()=>tn,dS:()=>ji,eu:()=>ce,g5:()=>L,gK:()=>Zt,gQ:()=>Tt,h$:()=>Fe,hl:()=>ie,hu:()=>V,jU:()=>Ue,m9:()=>Xn,ne:()=>sn,p$:()=>G,pd:()=>mt,q4:()=>tt,r3:()=>rn,ru:()=>lt,tV:()=>B,uI:()=>j,ug:()=>is,vZ:()=>pr,w1:()=>yn,w9:()=>Pn,xO:()=>Cs,xb:()=>Di,z$:()=>Ne,zI:()=>le,zd:()=>dt});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},V=function(H,$){if(!H)throw L($)},L=function(H){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},ne=function(H){const $=[];let O=0;for(let k=0;k<H.length;k++){let x=H.charCodeAt(k);x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):55296==(64512&x)&&k+1<H.length&&56320==(64512&H.charCodeAt(k+1))?(x=65536+((1023&x)<<10)+(1023&H.charCodeAt(++k)),$[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,$){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let x=0;x<H.length;x+=3){const K=H[x],me=x+1<H.length,Ve=me?H[x+1]:0,yt=x+2<H.length,Ke=yt?H[x+2]:0;let hn=(15&Ve)<<2|Ke>>6,xt=63&Ke;yt||(xt=64,me||(hn=64)),k.push(O[K>>2],O[(3&K)<<4|Ve>>4],O[hn],O[xt])}return k.join("")},encodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(H):this.encodeByteArray(ne(H),$)},decodeString(H,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(H):function(H){const $=[];let O=0,k=0;for(;O<H.length;){const x=H[O++];if(x<128)$[k++]=String.fromCharCode(x);else if(x>191&&x<224){const K=H[O++];$[k++]=String.fromCharCode((31&x)<<6|63&K)}else if(x>239&&x<365){const yt=((7&x)<<18|(63&H[O++])<<12|(63&H[O++])<<6|63&H[O++])-65536;$[k++]=String.fromCharCode(55296+(yt>>10)),$[k++]=String.fromCharCode(56320+(1023&yt))}else{const K=H[O++],me=H[O++];$[k++]=String.fromCharCode((15&x)<<12|(63&K)<<6|63&me)}}return $.join("")}(this.decodeStringToByteArray(H,$))},decodeStringToByteArray(H,$){this.init_();const O=$?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let x=0;x<H.length;){const K=O[H.charAt(x++)],Ve=x<H.length?O[H.charAt(x)]:0;++x;const Ke=x<H.length?O[H.charAt(x)]:64;++x;const Ct=x<H.length?O[H.charAt(x)]:64;if(++x,null==K||null==Ve||null==Ke||null==Ct)throw new Pe;k.push(K<<2|Ve>>4),64!==Ke&&(k.push(Ve<<4&240|Ke>>2),64!==Ct&&k.push(Ke<<6&192|Ct))}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class Pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(H){const $=ne(H);return Ie.encodeByteArray($,!0)},De=function(H){return Fe(H).replace(/\./g,"")},B=function(H){try{return Ie.decodeString(H,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function G(H){return X(void 0,H)}function X(H,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return $}for(const O in $)!$.hasOwnProperty(O)||!Oe(O)||(H[O]=X(H[O],$[O]));return H}function Oe(H){return"__proto__"!==H}const Te=()=>{try{return function xe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=H&&B(H[1]);return $&&JSON.parse($)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},tt=H=>{var $,O;return null===(O=null===($=Te())||void 0===$?void 0:$.emulatorHosts)||void 0===O?void 0:O[H]},ot=H=>{const $=tt(H);if(!$)return;const O=$.lastIndexOf(":");if(O<=0||O+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const k=parseInt($.substring(O+1),10);return"["===$[0]?[$.substring(1,O-1),k]:[$.substring(0,O),k]},ee=()=>{var H;return null===(H=Te())||void 0===H?void 0:H.config},de=H=>{var $;return null===($=Te())||void 0===$?void 0:$[`_${H}`]};class re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,O)=>{this.resolve=$,this.reject=O})}wrapCallback($){return(O,k)=>{O?this.reject(O):this.resolve(k),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(O):$(O,k))}}}function he(H,$){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const k=$||"demo-project",x=H.iat||0,K=H.sub||H.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${k}`,aud:k,iat:x,exp:x+3600,auth_time:x,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},H);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(me)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function j(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function we(){var H;const $=null===(H=Te())||void 0===H?void 0:H.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function lt(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function en(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function yn(){const H=Ne();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function un(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function Zr(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ce(){return new Promise((H,$)=>{try{let O=!0;const k="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(k);x.onsuccess=()=>{x.result.close(),O||self.indexedDB.deleteDatabase(k),H(!0)},x.onupgradeneeded=()=>{O=!1},x.onerror=()=>{var K;$((null===(K=x.error)||void 0===K?void 0:K.message)||"")}}catch(O){$(O)}})}function le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class pe extends Error{constructor($,O,k){super(O),this.code=$,this.customData=k,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ke.prototype.create)}}class ke{constructor($,O,k){this.service=$,this.serviceName=O,this.errors=k}create($,...O){const k=O[0]||{},x=`${this.service}/${$}`,K=this.errors[$],me=K?function Qe(H,$){return H.replace(Be,(O,k)=>{const x=$[k];return null!=x?String(x):`<${k}?>`})}(K,k):"Error";return new pe(x,`${this.serviceName}: ${me} (${x}).`,k)}}const Be=/\{\$([^}]+)}/g;function tn(H){return JSON.parse(H)}function ht(H){return JSON.stringify(H)}const Yt=function(H){let $={},O={},k={},x="";try{const K=H.split(".");$=tn(B(K[0])||""),O=tn(B(K[1])||""),x=K[2],k=O.d||{},delete O.d}catch{}return{header:$,claims:O,data:k,signature:x}},Pn=function(H){const O=Yt(H).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},wn=function(H){const $=Yt(H).claims;return"object"==typeof $&&!0===$.admin};function rn(H,$){return Object.prototype.hasOwnProperty.call(H,$)}function zn(H,$){if(Object.prototype.hasOwnProperty.call(H,$))return H[$]}function Di(H){for(const $ in H)if(Object.prototype.hasOwnProperty.call(H,$))return!1;return!0}function Lr(H,$,O){const k={};for(const x in H)Object.prototype.hasOwnProperty.call(H,x)&&(k[x]=$.call(O,H[x],x,H));return k}function pr(H,$){if(H===$)return!0;const O=Object.keys(H),k=Object.keys($);for(const x of O){if(!k.includes(x))return!1;const K=H[x],me=$[x];if(Gn(K)&&Gn(me)){if(!pr(K,me))return!1}else if(K!==me)return!1}for(const x of k)if(!O.includes(x))return!1;return!0}function Gn(H){return null!==H&&"object"==typeof H}function Cs(H){const $=[];for(const[O,k]of Object.entries(H))Array.isArray(k)?k.forEach(x=>{$.push(encodeURIComponent(O)+"="+encodeURIComponent(x))}):$.push(encodeURIComponent(O)+"="+encodeURIComponent(k));return $.length?"&"+$.join("&"):""}function dt(H){const $={};return H.replace(/^\?/,"").split("&").forEach(k=>{if(k){const[x,K]=k.split("=");$[decodeURIComponent(x)]=decodeURIComponent(K)}}),$}function mt(H){const $=H.indexOf("?");if(!$)return"";const O=H.indexOf("#",$);return H.substring($,O>0?O:void 0)}class Tt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,O){O||(O=0);const k=this.W_;if("string"==typeof $)for(let Ct=0;Ct<16;Ct++)k[Ct]=$.charCodeAt(O)<<24|$.charCodeAt(O+1)<<16|$.charCodeAt(O+2)<<8|$.charCodeAt(O+3),O+=4;else for(let Ct=0;Ct<16;Ct++)k[Ct]=$[O]<<24|$[O+1]<<16|$[O+2]<<8|$[O+3],O+=4;for(let Ct=16;Ct<80;Ct++){const hn=k[Ct-3]^k[Ct-8]^k[Ct-14]^k[Ct-16];k[Ct]=4294967295&(hn<<1|hn>>>31)}let Ke,Qt,x=this.chain_[0],K=this.chain_[1],me=this.chain_[2],Ve=this.chain_[3],yt=this.chain_[4];for(let Ct=0;Ct<80;Ct++){Ct<40?Ct<20?(Ke=Ve^K&(me^Ve),Qt=1518500249):(Ke=K^me^Ve,Qt=1859775393):Ct<60?(Ke=K&me|Ve&(K|me),Qt=2400959708):(Ke=K^me^Ve,Qt=3395469782);const hn=(x<<5|x>>>27)+Ke+yt+Qt+k[Ct]&4294967295;yt=Ve,Ve=me,me=4294967295&(K<<30|K>>>2),K=x,x=hn}this.chain_[0]=this.chain_[0]+x&4294967295,this.chain_[1]=this.chain_[1]+K&4294967295,this.chain_[2]=this.chain_[2]+me&4294967295,this.chain_[3]=this.chain_[3]+Ve&4294967295,this.chain_[4]=this.chain_[4]+yt&4294967295}update($,O){if(null==$)return;void 0===O&&(O=$.length);const k=O-this.blockSize;let x=0;const K=this.buf_;let me=this.inbuf_;for(;x<O;){if(0===me)for(;x<=k;)this.compress_($,x),x+=this.blockSize;if("string"==typeof $){for(;x<O;)if(K[me]=$.charCodeAt(x),++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}else for(;x<O;)if(K[me]=$[x],++me,++x,me===this.blockSize){this.compress_(K),me=0;break}}this.inbuf_=me,this.total_+=O}digest(){const $=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let x=this.blockSize-1;x>=56;x--)this.buf_[x]=255&O,O/=256;this.compress_(this.buf_);let k=0;for(let x=0;x<5;x++)for(let K=24;K>=0;K-=8)$[k]=this.chain_[x]>>K&255,++k;return $}}function sn(H,$){const O=new di(H,$);return O.subscribe.bind(O)}class di{constructor($,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{$(this)}).catch(k=>{this.error(k)})}next($){this.forEachObserver(O=>{O.next($)})}error($){this.forEachObserver(O=>{O.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,O,k){let x;if(void 0===$&&void 0===O&&void 0===k)throw new Error("Missing Observer.");x=function Rt(H,$){if("object"!=typeof H||null===H)return!1;for(const O of $)if(O in H&&"function"==typeof H[O])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:O,complete:k},void 0===x.next&&(x.next=On),void 0===x.error&&(x.error=On),void 0===x.complete&&(x.complete=On);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),K}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,$)}sendOne($,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{O(this.observers[$])}catch(k){typeof console<"u"&&console.error&&console.error(k)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function On(){}function Zt(H,$){return`${H} failed: ${$} argument `}const ji=function(H){const $=[];let O=0;for(let k=0;k<H.length;k++){let x=H.charCodeAt(k);if(x>=55296&&x<=56319){const K=x-55296;k++,V(k<H.length,"Surrogate pair missing trail surrogate."),x=65536+(K<<10)+(H.charCodeAt(k)-56320)}x<128?$[O++]=x:x<2048?($[O++]=x>>6|192,$[O++]=63&x|128):x<65536?($[O++]=x>>12|224,$[O++]=x>>6&63|128,$[O++]=63&x|128):($[O++]=x>>18|240,$[O++]=x>>12&63|128,$[O++]=x>>6&63|128,$[O++]=63&x|128)}return $},is=function(H){let $=0;for(let O=0;O<H.length;O++){const k=H.charCodeAt(O);k<128?$++:k<2048?$+=2:k>=55296&&k<=56319?($+=4,O++):$+=3}return $},gr=1e3,Ge=2,_e=144e5,Xe=.5;function it(H,$=gr,O=Ge){const k=$*Math.pow(O,H),x=Math.round(Xe*k*(Math.random()-.5)*2);return Math.min(_e,k+x)}function Xn(H){return H&&H._delegate?H._delegate:H}},4433:(st,Ee,F)=>{var u=F(5879);let V=null;function L(){return V}class ge{}const Ie=new u.OlP("DocumentToken");let Pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(De)},providedIn:"platform"})}return n})();const Fe=new u.OlP("Location Initialized");let De=(()=>{class n extends Pe{constructor(){super(),this._doc=(0,u.f3M)(Ie),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function B(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Je)},providedIn:"root"})}return n})();const xe=new u.OlP("appBaseHref");let Je=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return B(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const l=this.prepareExternalUrl(i+X(o));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){const l=this.prepareExternalUrl(i+X(o));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Pe),u.LFG(xe,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ce=(()=>{class n extends Oe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=B(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let l=this.prepareExternalUrl(i+X(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){let l=this.prepareExternalUrl(i+X(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Pe),u.LFG(xe,8))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})(),Se=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ee(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(ot(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function tt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ot(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=X;static#t=this.joinWithSlash=B;static#n=this.stripTrailingSlash=G;static#r=this.\u0275fac=function(r){return new(r||n)(u.LFG(Oe))};static#i=this.\u0275prov=u.Yz7({token:n,factory:function(){return function Te(){return new Se((0,u.LFG)(Oe))}()},providedIn:"root"})}return n})();function ot(n){return n.replace(/\/index.html$/,"")}var re=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(re||{}),Ue=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Ue||{});function pe(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===Ue.CurrencyDecimal)return t[u.wAp.NumberSymbols][Ue.Decimal];if(e===Ue.CurrencyGroup)return t[u.wAp.NumberSymbols][Ue.Group]}return r}const x=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ra(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Va(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}const lu=/\s+/,ph=[];let Eo=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=ph,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(lu):ph}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(lu):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(lu).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Uc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let os=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Uc(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===o?void 0:o);else if(null!==o){const f=r.get(o);r.move(f,l),Rn(f,i)}});for(let i=0,o=r.length;i<o;i++){const f=r.get(i).context;f.index=i,f.count=o,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Rn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Rn(n,e){n.context.$implicit=e.item}let Wn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Mv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.s_b),u.Y36(u.Rgc))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Mv{constructor(){this.$implicit=null,this.ngIf=null}}function gh(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}function Si(n,e){return new u.vHH(2100,!1)}class uu{createSubscription(e,t){return(0,u.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,u.rg0)(()=>e.unsubscribe())}}class vh{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const du=new vh,Ch=new uu;let hu=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return du;if((0,u.F4k)(t))return Ch;throw Si()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.sBO,16))};static#t=this.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})(),je=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Mi(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function js(n,e,t){return function xt(n,e,t,r,i,o,l=!1){let f="",g=!1;if(isFinite(n)){let v=function Hi(n){let r,i,o,l,f,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;"0"===e.charAt(o);o++);if(o===(f=e.length))r=[0],i=1;else{for(f--;"0"===e.charAt(f);)f--;for(i-=o,r=[],l=0;o<=f;o++,l++)r[l]=Number(e.charAt(o))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(v=function $s(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(v));let E=e.minInt,T=e.minFrac,M=e.maxFrac;if(o){const ze=o.match(x);if(null===ze)throw new Error(`${o} is not a valid digit info`);const Re=ze[1],Ye=ze[3],gt=ze[5];null!=Re&&(E=ra(Re)),null!=Ye&&(T=ra(Ye)),null!=gt?M=ra(gt):null!=Ye&&T>M&&(M=T)}!function Kt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const o=Math.min(Math.max(e,i),t);let l=o+n.integerLen,f=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let T=l;T<r.length;T++)r[T]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=o+1),r[0]=0;for(let T=1;T<l;T++)r[T]=0}if(f>=5)if(l-1<0){for(let T=0;T>l;T--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,o);i++)r.push(0);let g=0!==o;const v=e+n.integerLen,E=r.reduceRight(function(T,M,R,W){return W[R]=(M+=T)<10?M:M-10,g&&(0===W[R]&&R>=v?W.pop():g=!1),M>=10?1:0},0);E&&(r.unshift(E),n.integerLen++)}(v,T,M);let R=v.digits,W=v.integerLen;const Q=v.exponent;let J=[];for(g=R.every(ze=>!ze);W<E;W++)R.unshift(0);for(;W<0;W++)R.unshift(0);W>0?J=R.splice(W,R.length):(J=R,R=[0]);const be=[];for(R.length>=e.lgSize&&be.unshift(R.splice(-e.lgSize,R.length).join(""));R.length>e.gSize;)be.unshift(R.splice(-e.gSize,R.length).join(""));R.length&&be.unshift(R.join("")),f=be.join(pe(t,r)),J.length&&(f+=pe(t,i)+J.join("")),Q&&(f+=pe(t,Ue.Exponential)+"+"+Q)}else f=pe(t,Ue.Infinity);return f=n<0&&!g?e.negPre+f+e.negSuf:e.posPre+f+e.posSuf,f}(n,function Io(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],o=r[1],l=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],f=l[0],g=l[1]||"";t.posPre=f.substring(0,f.indexOf("#"));for(let E=0;E<g.length;E++){const T=g.charAt(E);"0"===T?t.minFrac=t.maxFrac=E+1:"#"===T?t.maxFrac=E+1:t.posSuf+=T}const v=f.split(",");if(t.gSize=v[1]?v[1].length:0,t.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,o){const E=i.length-t.posPre.length-t.posSuf.length,T=o.indexOf("#");t.negPre=o.substring(0,T).replace(/'/g,""),t.negSuf=o.slice(T+E).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function ke(n,e){return(0,u.cg1)(n)[u.wAp.NumberFormats][e]}(e,re.Decimal),pe(e,Ue.MinusSign)),e,Ue.Group,Ue.Decimal,t)}(function Ws(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(o){throw Si()}}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.soG,16))};static#t=this.\u0275pipe=u.Yjl({name:"number",type:n,pure:!0,standalone:!0})}return n})();let Tr=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw Si();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=u.Yjl({name:"slice",type:n,pure:!1,standalone:!0})}return n})(),qn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();function Ai(n){return"server"===n}let Jr=(()=>{class n{static#e=this.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Zs((0,u.LFG)(Ie),window)})}return n})();class Zs{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function kg(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Is{}class Hg extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Nh extends Hg{static makeCurrent(){!function ne(n){V||(V=n)}(new Nh)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function wb(){return Wc=Wc||document.querySelector("base"),Wc?Wc.getAttribute("href"):null}();return null==t?null:function Zv(n){Fh=Fh||document.createElement("a"),Fh.setAttribute("href",n);const e=Fh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Va(document.cookie,e)}}let Fh,Wc=null,Ib=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Kv=new u.OlP("EventManagerPlugins");let Yv=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new u.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Kv),u.LFG(u.R0b))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class Lh{constructor(e){this._doc=e}}const Uh="ng-app-id";let bu=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ai(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Uh}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Uh),o;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Uh,this.appId),l}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const o=this.styleRef,l=o.get(r)?.elements;l?l.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ie),u.LFG(u.AFp),u.LFG(u.Ojb,8),u.LFG(u.Lbi))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Qs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qa=/%COMP%/g,Es=new u.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function on(n,e){return e.map(t=>t.replace(qa,n))}let Du=(()=>{class n{constructor(t,r,i,o,l,f,g,v=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=l,this.platformId=f,this.ngZone=g,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=Ai(f),this.defaultRenderer=new Js(t,l,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===u.ifc.ShadowDom&&(r={...r,encapsulation:u.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof $h?i.applyToHost(t):i instanceof pi&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const l=this.doc,f=this.ngZone,g=this.eventManager,v=this.sharedStylesHost,E=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(r.encapsulation){case u.ifc.Emulated:o=new $h(g,v,r,this.appId,E,l,f,T);break;case u.ifc.ShadowDom:return new Za(g,v,t,r,l,f,this.nonce,T);default:o=new pi(g,v,r,E,l,f,T)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Yv),u.LFG(bu),u.LFG(u.AFp),u.LFG(Es),u.LFG(Ie),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(u.Ojb))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();class Js{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Qs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(jh(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(jh(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new u.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Qs[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Qs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=L().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function jh(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Za extends Js{constructor(e,t,r,i,o,l,f,g){super(e,o,l,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=on(i.id,i.styles);for(const E of v){const T=document.createElement("style");f&&T.setAttribute("nonce",f),T.textContent=E,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class pi extends Js{constructor(e,t,r,i,o,l,f,g){super(e,o,l,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=g?on(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class $h extends pi{constructor(e,t,r,i,o,l,f,g){const v=i+"-"+r.id;super(e,t,r,o,l,f,g,v),this.contentAttr=function Gg(n){return"_ngcontent-%COMP%".replace(qa,n)}(v),this.hostAttr=function Tu(n){return"_nghost-%COMP%".replace(qa,n)}(v)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Tb=(()=>{class n extends Lh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ie))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Su=["alt","control","meta","shift"],Mo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wg={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qc=(()=>{class n extends Lh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),l=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,o.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),Su.forEach(v=>{const E=r.indexOf(v);E>-1&&(r.splice(E,1),l+=v+".")}),l+=o,0!=r.length||0===o.length)return null;const g={};return g.domEventName=i,g.fullKey=l,g}static matchEventFullKeyCode(t,r){let i=Mo[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Su.forEach(l=>{l!==i&&(0,Wg[l])(t)&&(o+=l+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ie))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const Kg=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function _t(){Nh.makeCurrent()},multi:!0},{provide:Ie,useFactory:function Db(){return(0,u.RDi)(document),document},deps:[]}]),Xv=new u.OlP(""),Ka=[{provide:u.rWj,useClass:class zg{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new u.vHH(5103,!1);return o},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let o=i.length,l=!1;const f=function(g){l=l||g,o--,0==o&&r(l)};i.forEach(g=>{g.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Ao=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Mu(){return new u.qLn},deps:[]},{provide:Kv,useClass:Tb,multi:!0,deps:[Ie,u.R0b,u.Lbi]},{provide:Kv,useClass:qc,multi:!0,deps:[Ie]},Du,bu,Yv,{provide:u.FYo,useExisting:Du},{provide:Is,useClass:Ib,deps:[]},[]];let Zc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Xv,12))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[...Ao,...Ka],imports:[qn,u.hGG]})}return n})(),ve=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ie))};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function Qg(){return new ve((0,u.LFG)(Ie))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;var gi=F(5592),Xs=F(4674),pn=F(2459),ut=F(2096),_r=F(5619);const{isArray:xu}=Array,{getPrototypeOf:Zh,prototype:ri,keys:eo}=Object;function vn(n){if(1===n.length){const e=n[0];if(xu(e))return{args:e,keys:null};if(function Po(n){return n&&"object"==typeof n&&Zh(n)===ri}(e)){const t=eo(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var oa=F(2737),wt=F(7398);const{isArray:o0}=Array;function Qc(n){return(0,wt.U)(e=>function sm(n,e){return o0(e)?n(...e):n(e)}(n,e))}var to=F(4564);function no(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var mi=F(8251),Ya=F(7103);function Qa(...n){const e=(0,to.yG)(n),t=(0,to.jO)(n),{args:r,keys:i}=vn(n);if(0===r.length)return(0,pn.D)([],e);const o=new gi.y(function Ja(n,e,t=oa.y){return r=>{Pu(e,()=>{const{length:i}=n,o=new Array(i);let l=i,f=i;for(let g=0;g<i;g++)Pu(e,()=>{const v=(0,pn.D)(n[g],e);let E=!1;v.subscribe((0,mi.x)(r,T=>{o[g]=T,E||(E=!0,f--),f||r.next(t(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>no(i,l):oa.y));return t?o.pipe(Qc(t)):o}function Pu(n,e,t){n?(0,Ya.f)(t,n,e):e()}const ro=(0,F(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Jc=F(7537);function aa(...n){return function Ds(){return(0,Jc.J)(1)}()((0,pn.D)(n,(0,to.yG)(n)))}var ku=F(4829);function Kh(n){return new gi.y(e=>{(0,ku.Xf)(n()).subscribe(e)})}var Xc=F(8407);function ca(n,e){const t=(0,Xs.m)(n)?n:()=>n,r=i=>i.error(t());return new gi.y(e?i=>e.schedule(r,0,i):r)}var Oo=F(6232),el=F(7394),_i=F(9360);function Yh(){return(0,_i.e)((n,e)=>{let t=null;n._refCount++;const r=(0,mi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ru extends gi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_i.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new el.w0;const t=this.getSubject();e.add(this.source.subscribe((0,mi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=el.w0.EMPTY)}return e}refCount(){return Yh()(this)}}var Pi=F(8645),En=F(4664);function jt(n){return n<=0?()=>Oo.E:(0,_i.e)((e,t)=>{let r=0;e.subscribe((0,mi.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Xa(...n){const e=(0,to.yG)(n);return(0,_i.e)((t,r)=>{(e?aa(n,t,e):aa(n,t)).subscribe(r)})}function Mr(n,e){return(0,_i.e)((t,r)=>{let i=0;t.subscribe((0,mi.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var yi=F(1631);function tl(n){return(0,_i.e)((e,t)=>{let r=!1;e.subscribe((0,mi.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function nl(n=a0){return(0,_i.e)((e,t)=>{let r=!1;e.subscribe((0,mi.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function a0(){return new ro}function ar(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mr((i,o)=>n(i,o,r)):oa.y,jt(1),t?tl(e):nl(()=>new ro))}function ko(n,e){return(0,Xs.m)(e)?(0,yi.z)(n,e,1):(0,yi.z)(n,1)}function bn(n,e,t){const r=(0,Xs.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,_i.e)((i,o)=>{var l;null===(l=r.subscribe)||void 0===l||l.call(r);let f=!0;i.subscribe((0,mi.x)(o,g=>{var v;null===(v=r.next)||void 0===v||v.call(r,g),o.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),o.complete()},g=>{var v;f=!1,null===(v=r.error)||void 0===v||v.call(r,g),o.error(g)},()=>{var g,v;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(v=r.finalize)||void 0===v||v.call(r)}))}):oa.y}function Ss(n){return(0,_i.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,mi.x)(t,void 0,void 0,l=>{o=(0,ku.Xf)(n(l,Ss(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function la(n,e){return(0,_i.e)(function Nu(n,e,t,r,i){return(o,l)=>{let f=t,g=e,v=0;o.subscribe((0,mi.x)(l,E=>{const T=v++;g=f?n(g,E,T):(f=!0,E),r&&l.next(g)},i&&(()=>{f&&l.next(g),l.complete()})))}}(n,e,arguments.length>=2,!0))}function ec(n){return n<=0?()=>Oo.E:(0,_i.e)((e,t)=>{let r=[];e.subscribe((0,mi.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function tc(n){return(0,_i.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Jh=F(2420);const Dt="primary",Ro=Symbol("RouteTitle");class ua{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function No(n){return new ua(n)}function am(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const l=r[o],f=n[o];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ii(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!lm(n[i],e[i]))return!1;return!0}function lm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function cr(n){return n.length>0?n[n.length-1]:null}function Fo(n){return function im(n){return!!n&&(n instanceof gi.y||(0,Xs.m)(n.lift)&&(0,Xs.m)(n.subscribe))}(n)?n:(0,u.QGY)(n)?(0,pn.D)(Promise.resolve(n)):(0,ut.of)(n)}const um={exact:function Uu(n,e,t){if(!ha(n.segments,e.segments)||!rl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Uu(n.children[r],e.children[r],t))return!1;return!0},subset:da},Lu={exact:function hm(n,e){return ii(n,e)},subset:function nc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lm(n[t],e[t]))},ignored:()=>!0};function dm(n,e,t){return um[t.paths](n.root,e.root,t.matrixParams)&&Lu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function da(n,e,t){return io(n,e,e.segments,t)}function io(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ha(i,t)||e.hasChildren()||!rl(i,t,r))}if(n.segments.length===t.length){if(!ha(n.segments,t)||!rl(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!da(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(ha(n.segments,i)&&rl(n.segments,i,r)&&n.children[Dt])&&io(n.children[Dt],e,o,r)}}function rl(n,e,t){return e.every((r,i)=>Lu[t](n[i].parameters,r.parameters))}class Lo{constructor(e=new Gt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=No(this.queryParams)),this._queryParamMap}toString(){return Pb.serialize(this)}}class Gt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xh(this)}}class Bu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=No(this.parameters)),this._parameterMap}toString(){return si(this)}}function ha(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Vu=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return new fm},providedIn:"root"})}return n})();class fm{parse(e){const t=new sc(e);return new Lo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Wi(e.root,!0)}`,r=function l0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${$u(t)}=${$u(i)}`).join("&"):`${$u(t)}=${$u(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Zn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Pb=new fm;function Xh(n){return n.segments.map(e=>si(e)).join("/")}function Wi(n,e){if(!n.hasChildren())return Xh(n);if(e){const t=n.children[Dt]?Wi(n.children[Dt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Dt&&r.push(`${i}:${Wi(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function xb(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Dt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Dt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Dt?[Wi(n.children[Dt],!1)]:[`${i}:${Wi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Dt]?`${Xh(n)}/${t[0]}`:`${Xh(n)}/(${t.join("//")})`}}function ju(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $u(n){return ju(n).replace(/%3B/gi,";")}function ef(n){return ju(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function so(n){return decodeURIComponent(n)}function pm(n){return so(n.replace(/\+/g,"%20"))}function si(n){return`${ef(n.path)}${function rc(n){return Object.keys(n).map(e=>`;${ef(e)}=${ef(n[e])}`).join("")}(n.parameters)}`}const ic=/^[^\/()?;#]+/;function Uo(n){const e=n.match(ic);return e?e[0]:""}const Hu=/^[^\/()?;=#]+/,gm=/^[^=?&#]+/,Oi=/^[^&#]+/;class sc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Dt]=new Gt(e,t)),r}parseSegment(){const e=Uo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(e),new Bu(so(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function u0(n){const e=n.match(Hu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Uo(this.remaining);i&&(r=i,this.capture(r))}e[so(t)]=so(r)}parseQueryParam(e){const t=function Ob(n){const e=n.match(gm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function tf(n){const e=n.match(Oi);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=pm(t),o=pm(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Uo(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new u.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Dt);const l=this.parseChildren();t[o]=1===Object.keys(l).length?l[Dt]:new Gt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,!1)}}function d0(n){return n.segments.length>0?new Gt([],{[Dt]:n}):n}function zu(n){const e={};for(const r of Object.keys(n.children)){const o=zu(n.children[r]);if(r===Dt&&0===o.segments.length&&o.hasChildren())for(const[l,f]of Object.entries(o.children))e[l]=f;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function h0(n){if(1===n.numberOfChildren&&n.children[Dt]){const e=n.children[Dt];return new Gt(n.segments.concat(e.segments),e.children)}return n}(new Gt(n.segments,e))}function fa(n){return n instanceof Lo}function m(n){let e;const i=d0(function t(o){const l={};for(const g of o.children){const v=t(g);l[g.outlet]=v}const f=new Gt(o.url,l);return o===n&&(e=f),f}(n.root));return e??i}function _(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return P(i,i,i,t,r);const o=function Le(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oe(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const f={};return Object.entries(o.outlets).forEach(([g,v])=>{f[g]="string"==typeof v?v.split("/"):v}),[...i,{outlets:f}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===l?(o.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,o]},[]);return new oe(t,e,r)}(e);if(o.toRoot())return P(i,i,new Gt([],{}),t,r);const l=function nt(n,e,t){if(n.isAbsolute)return new He(e,!0,0);if(!t)return new He(e,!1,NaN);if(null===t.parent)return new He(t,!0,0);const r=I(n.commands[0])?0:1;return function kt(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new u.vHH(4005,!1);i=r.segments.length}return new He(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),f=l.processChildren?oo(l.segmentGroup,l.index,o.commands):qi(l.segmentGroup,l.index,o.commands);return P(i,l.segmentGroup,f,t,r)}function I(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function S(n){return"object"==typeof n&&null!=n&&n.outlets}function P(n,e,t,r,i){let l,o={};r&&Object.entries(r).forEach(([g,v])=>{o[g]=Array.isArray(v)?v.map(E=>`${E}`):`${v}`}),l=n===e?t:Z(n,e,t);const f=d0(zu(l));return new Lo(f,o,i)}function Z(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:Z(o,e,t)}),new Gt(n.segments,r)}class oe{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&I(r[0]))throw new u.vHH(4003,!1);const i=r.find(S);if(i&&i!==cr(r))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class He{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function qi(n,e,t){if(n||(n=new Gt([],{})),0===n.segments.length&&n.hasChildren())return oo(n,e,t);const r=function mm(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const l=n.segments[i],f=t[r];if(S(f))break;const g=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!Gu(g,v,l))return o;r+=2}else{if(!Gu(g,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Gt(n.segments.slice(0,r.pathIndex),{});return o.children[Dt]=new Gt(n.segments.slice(r.pathIndex),n.children),oo(o,0,i)}return r.match&&0===i.length?new Gt(n.segments,{}):r.match&&!n.hasChildren()?il(n,e,t):r.match?oo(n,0,i):il(n,e,t)}function oo(n,e,t){if(0===t.length)return new Gt(n.segments,{});{const r=function Br(n){return S(n[0])?n[0].outlets:{[Dt]:n}}(t),i={};if(Object.keys(r).some(o=>o!==Dt)&&n.children[Dt]&&1===n.numberOfChildren&&0===n.children[Dt].segments.length){const o=oo(n.children[Dt],e,t);return new Gt(n.segments,o.children)}return Object.entries(r).forEach(([o,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[o]=qi(n.children[o],e,l))}),Object.entries(n.children).forEach(([o,l])=>{void 0===r[o]&&(i[o]=l)}),new Gt(n.segments,i)}}function il(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(S(o)){const g=pa(o.outlets);return new Gt(r,g)}if(0===i&&I(t[0])){r.push(new Bu(n.segments[e].path,ga(t[0]))),i++;continue}const l=S(o)?o.outlets[Dt]:`${o}`,f=i<t.length-1?t[i+1]:null;l&&f&&I(f)?(r.push(new Bu(l,ga(f))),i+=2):(r.push(new Bu(l,{})),i++)}return new Gt(r,{})}function pa(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=il(new Gt([],{}),0,r))}),e}function ga(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Gu(n,e,t){return n==t.path&&ii(e,t.parameters)}const sl="imperative";class Zi{constructor(e,t){this.id=e,this.url=t}}class oc extends Zi{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ao extends Zi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ol extends Zi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bo extends Zi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Wu extends Zi{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nf extends Zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kb extends Zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kA extends Zi{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Rb extends Zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oL extends Zi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nb{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class aL{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class RA{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class NA{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class f0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cL{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FA{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rf{}class Fb{constructor(e){this.url=e}}class lL{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new _m,this.attachRef=null}}let _m=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new lL,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class LA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=p0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=p0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qu(e,this._root).map(t=>t.value)}}function p0(n,e){if(n===e.value)return e;for(const t of e.children){const r=p0(n,t);if(r)return r}return null}function qu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=qu(n,t);if(r.length)return r.unshift(e),r}return[]}class Ms{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function al(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class g0 extends LA{constructor(e,t){super(e),this.snapshot=t,y0(this,e)}toString(){return this.snapshot.toString()}}function m0(n,e){const t=function Zu(n,e){const l=new cl([],{},{},"",{},Dt,e,null,{});return new sf("",new Ms(l,[]))}(0,e),r=new _r.X([new Bu("",{})]),i=new _r.X({}),o=new _r.X({}),l=new _r.X({}),f=new _r.X(""),g=new ac(r,i,l,f,o,Dt,e,t.root);return g.snapshot=t.root,new g0(new Ms(g,[]),t)}class ac{constructor(e,t,r,i,o,l,f,g){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=l,this.component=f,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,wt.U)(v=>v[Ro]))??(0,ut.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>No(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>No(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function ym(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cl{get title(){return this.data?.[Ro]}constructor(e,t,r,i,o,l,f,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=f,this.routeConfig=g,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=No(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=No(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sf extends LA{constructor(e,t){super(t),this.url=e,y0(this,t)}toString(){return Lb(this._root)}}function y0(n,e){e.value._routerState=n,e.children.forEach(t=>y0(n,t))}function Lb(n){const e=n.children.length>0?` { ${n.children.map(Lb).join(", ")} } `:"";return`${n.value}${e}`}function v0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ii(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ii(e.params,t.params)||n.paramsSubject.next(t.params),function cm(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ii(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ii(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function vm(n,e){const t=ii(n.params,e.params)&&function c0(n,e){return ha(n,e)&&n.every((t,r)=>ii(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||vm(n.parent,e.parent))}let af=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dt,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(_m),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb),this.inputBinder=(0,u.f3M)(Cm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new u.vHH(4013,!1);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new UA(t,f,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]})}return n})();class UA{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ac?this.route:e===_m?this.childContexts:this.parent.get(e,t)}}const Cm=new u.OlP("");let Ub=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Qa([r.queryParams,r.params,r.data]).pipe((0,En.w)(([o,l,f],g)=>(f={...o,...l,...f},0===g?(0,ut.of)(f):Promise.resolve(f)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,u.qFp)(r.component);if(l)for(const{templateName:f}of l.inputs)t.activatedComponentRef.setInput(f,o[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function cf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function BA(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cf(n,r,i);return cf(n,r)})}(n,e,t);return new Ms(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>cf(n,f)),l}}const r=function Ki(n){return new ac(new _r.X(n.url),new _r.X(n.params),new _r.X(n.queryParams),new _r.X(n.fragment),new _r.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>cf(n,o));return new Ms(r,i)}}const lf="ngNavigationCancelingError";function C0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=fa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wm(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function wm(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[lf]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ku(n){return n&&n[lf]}let w0=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(r,i){1&r&&u._UZ(0,"router-outlet")},dependencies:[af],encapsulation:2})}return n})();function uf(n){const e=n.children&&n.children.map(uf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Dt&&(t.component=w0),t}function cs(n){return n.outlet||Dt}function ma(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class jb{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),v0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=al(t);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=al(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=al(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=al(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new cL(o.value.snapshot))}),e.children.length&&this.forwardEvent(new NA(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(v0(i),i===o)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),v0(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=ma(i.snapshot);l.attachRef=null,l.route=i,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class I0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class df{constructor(e,t){this.component=e,this.route=t}}function Yu(n,e,t){const r=n._root;return ul(r,e?e._root:null,t,[r.value])}function ll(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:r}function ul(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=al(e);return n.children.forEach(l=>{(function Em(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const g=function ZA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ha(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ha(n.url,e.url)||!ii(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vm(n,e)||!ii(n.queryParams,e.queryParams);default:return!vm(n,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new I0(r)):(o.data=l.data,o._resolvedData=l._resolvedData),ul(n,e,o.component?f?f.children:null:t,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new df(f.outlet.component,l))}else l&&hf(e,f,i),i.canActivateChecks.push(new I0(r)),ul(n,null,o.component?f?f.children:null:t,r,i)})(l,o[l.value.outlet],t,r.concat([l.value]),i),delete o[l.value.outlet]}),Object.entries(o).forEach(([l,f])=>hf(f,t.getContext(l),i)),i}function hf(n,e,t){const r=al(n),i=n.value;Object.entries(r).forEach(([o,l])=>{hf(l,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new df(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ff(n){return"function"==typeof n}function zb(n){return n instanceof ro||"EmptyError"===n?.name}const Qu=Symbol("INITIAL_VALUE");function dl(){return(0,En.w)(n=>Qa(n.map(e=>e.pipe(jt(1),Xa(Qu)))).pipe((0,wt.U)(e=>{for(const t of e)if(!0!==t){if(t===Qu)return Qu;if(!1===t||t instanceof Lo)return t}return!0}),Mr(e=>e!==Qu),jt(1)))}function b0(n){return(0,Xc.z)(bn(e=>{if(fa(e))throw C0(0,e)}),(0,wt.U)(e=>!0===e))}class pf{constructor(e){this.segmentGroup=e||null}}class gf{constructor(e){this.urlTree=e}}function Vo(n){return ca(new pf(n))}function D0(n){return ca(new gf(n))}class Kb{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new u.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,ut.of)(r);if(i.numberOfChildren>1||!i.children[Dt])return ca(new u.vHH(4e3,!1));i=i.children[Dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Lo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const f=o.substring(1);r[i]=t[f]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let l={};return Object.entries(t.children).forEach(([f,g])=>{l[f]=this.createSegmentGroup(e,g,r,i)}),new Gt(o,l)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new u.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const mf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _f(n,e,t,r,i){const o=M0(n,e,t);return o.matched?(r=function Vb(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function T0(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,ut.of)(!0);const o=i.map(l=>{const f=ll(l,n);return Fo(function E0(n){return n&&ff(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,ut.of)(o).pipe(dl(),b0())}(r,e,t).pipe((0,wt.U)(l=>!0===l?o:{...mf}))):(0,ut.of)(o)}function M0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...mf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||am)(t,n,e);if(!i)return{...mf};const o={};Object.entries(i.posParams??{}).forEach(([f,g])=>{o[f]=g.path});const l=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function A0(n,e,t,r){return t.length>0&&function rx(n,e,t){return t.some(r=>yf(n,e,r)&&cs(r)!==Dt)}(n,t,r)?{segmentGroup:new Gt(e,nx(r,new Gt(t,n.children))),slicedSegments:[]}:0===t.length&&function Yb(n,e,t){return t.some(r=>yf(n,e,r))}(n,t,r)?{segmentGroup:new Gt(n.segments,tx(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Gt(n.segments,n.children),slicedSegments:t}}function tx(n,e,t,r,i){const o={};for(const l of r)if(yf(n,t,l)&&!i[cs(l)]){const f=new Gt([],{});o[cs(l)]=f}return{...i,...o}}function nx(n,e){const t={};t[Dt]=e;for(const r of n)if(""===r.path&&cs(r)!==Dt){const i=new Gt([],{});t[cs(r)]=i}return t}function yf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class ix{constructor(e,t,r,i,o,l,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=l,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new Kb(this.urlSerializer,this.urlTree)}noMatchError(e){return new u.vHH(4002,!1)}recognize(){const e=A0(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Dt).pipe(Ss(t=>{if(t instanceof gf)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof pf?this.noMatchError(t):t}),(0,wt.U)(t=>{const r=new cl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dt,this.rootComponentType,null,{}),i=new Ms(r,t),o=new sf("",i),l=function w(n,e,t=null,r=null){return _(m(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(o._root),{state:o,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Dt).pipe(Ss(r=>{throw r instanceof pf?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=_0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,pn.D)(i).pipe(ko(o=>{const l=r.children[o],f=function WA(n,e){const t=n.filter(r=>cs(r)===e);return t.push(...n.filter(r=>cs(r)!==e)),t}(t,o);return this.processSegmentGroup(e,f,l,o)}),la((o,l)=>(o.push(...l),o)),tl(null),function om(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mr((i,o)=>n(i,o,r)):oa.y,ec(1),t?tl(e):nl(()=>new ro))}(),(0,yi.z)(o=>{if(null===o)return Vo(r);const l=Qb(o);return function sx(n){n.sort((e,t)=>e.value.outlet===Dt?-1:t.value.outlet===Dt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,ut.of)(l)}))}processSegment(e,t,r,i,o,l){return(0,pn.D)(t).pipe(ko(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,o,l).pipe(Ss(g=>{if(g instanceof pf)return(0,ut.of)(null);throw g}))),ar(f=>!!f),Ss(f=>{if(zb(f))return function x0(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?(0,ut.of)([]):Vo(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,o,l,f){return function Sm(n,e,t,r){return!!(cs(n)===r||r!==Dt&&yf(e,t,n))&&("**"===n.path||M0(e,n,t).matched)}(r,i,o,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,l,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,l):Vo(i):Vo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?D0(o):this.applyRedirects.lineralizeSegments(r,o).pipe((0,yi.z)(l=>{const f=new Gt(l,{});return this.processSegment(e,t,f,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){const{matched:f,consumedSegments:g,remainingSegments:v,positionalParamSegments:E}=M0(t,i,o);if(!f)return Vo(t);const T=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,E);return i.redirectTo.startsWith("/")?D0(T):this.applyRedirects.lineralizeSegments(i,T).pipe((0,yi.z)(M=>this.processSegment(e,r,t,M.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,l){let f;if("**"===r.path){const g=i.length>0?cr(i).parameters:{},v=new cl(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Xb(r),cs(r),r.component??r._loadedComponent??null,r,fl(r));f=(0,ut.of)({snapshot:v,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=_f(t,r,i,e).pipe((0,wt.U)(({matched:g,consumedSegments:v,remainingSegments:E,parameters:T})=>g?{snapshot:new cl(v,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Xb(r),cs(r),r.component??r._loadedComponent??null,r,fl(r)),consumedSegments:v,remainingSegments:E}:null));return f.pipe((0,En.w)(g=>null===g?Vo(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,En.w)(({routes:v})=>{const E=r._loadedInjector??e,{snapshot:T,consumedSegments:M,remainingSegments:R}=g,{segmentGroup:W,slicedSegments:Q}=A0(t,M,R,v);if(0===Q.length&&W.hasChildren())return this.processChildren(E,v,W).pipe((0,wt.U)(be=>null===be?null:[new Ms(T,be)]));if(0===v.length&&0===Q.length)return(0,ut.of)([new Ms(T,[])]);const J=cs(r)===o;return this.processSegment(E,v,W,Q,J?Dt:o,!0).pipe((0,wt.U)(be=>[new Ms(T,be)]))}))))}getChildConfig(e,t,r){return t.children?(0,ut.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,ut.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function Zb(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,ut.of)(!0);const o=i.map(l=>{const f=ll(l,n);return Fo(function YA(n){return n&&ff(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,ut.of)(o).pipe(dl(),b0())}(e,t,r).pipe((0,yi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(bn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function Dm(n){return ca(wm(!1,3))}())):(0,ut.of)({routes:[],injector:e})}}function pL(n){const e=n.value.routeConfig;return e&&""===e.path}function Qb(n){const e=[],t=new Set;for(const r of n){if(!pL(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Qb(r.children);e.push(new Ms(r.value,i))}return e.filter(r=>!t.has(r))}function Xb(n){return n.data||{}}function fl(n){return n.resolve||{}}function s1(n){return"string"==typeof n.title||null===n.title}function O0(n){return(0,En.w)(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,wt.U)(()=>e)):(0,ut.of)(e)})}const Xu=new u.OlP("ROUTES");let k0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,ut.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Fo(t.loadComponent()).pipe((0,wt.U)(ed),bn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),tc(()=>{this.componentLoaders.delete(t)})),i=new Ru(r,()=>new Pi.x).pipe(Yh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,ut.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function ox(n,e,t,r){return Fo(n.loadChildren()).pipe((0,wt.U)(ed),(0,yi.z)(i=>i instanceof u.YKP||Array.isArray(i)?(0,ut.of)(i):(0,pn.D)(e.compileModuleAsync(i))),(0,wt.U)(i=>{r&&r(n);let o,l,f=!1;return Array.isArray(i)?(l=i,!0):(o=i.create(t).injector,l=o.get(Xu,[],{optional:!0,self:!0}).flat()),{routes:l.map(uf),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(tc(()=>{this.childrenLoaders.delete(r)})),l=new Ru(o,()=>new Pi.x).pipe(Yh());return this.childrenLoaders.set(r,l),l}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ed(n){return function cc(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Am=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Pi.x,this.transitionAbortSubject=new Pi.x,this.configLoader=(0,u.f3M)(k0),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(Vu),this.rootContexts=(0,u.f3M)(_m),this.inputBindingEnabled=null!==(0,u.f3M)(Cm,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ut.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new aL(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Nb(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new _r.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Mr(o=>0!==o.id),(0,wt.U)(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),(0,En.w)(o=>{this.currentTransition=o;let l=!1,f=!1;return(0,ut.of)(o).pipe(bn(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,En.w)(g=>{const v=g.currentBrowserUrl.toString(),E=!t.navigated||g.extractedUrl.toString()!==v||v!==g.currentUrlTree.toString();if(!E&&"reload"!==(g.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const M="";return this.events.next(new Bo(g.id,this.urlSerializer.serialize(g.rawUrl),M,0)),g.resolve(null),Oo.E}if(t.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return(0,ut.of)(g).pipe((0,En.w)(M=>{const R=this.transitions?.getValue();return this.events.next(new oc(M.id,this.urlSerializer.serialize(M.extractedUrl),M.source,M.restoredState)),R!==this.transitions?.getValue()?Oo.E:Promise.resolve(M)}),function Mm(n,e,t,r,i,o){return(0,yi.z)(l=>function Ju(n,e,t,r,i,o,l="emptyOnly"){return new ix(n,e,t,r,i,l,o).recognize()}(n,e,t,r,l.extractedUrl,i,o).pipe((0,wt.U)(({state:f,tree:g})=>({...l,targetSnapshot:f,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),bn(M=>{o.targetSnapshot=M.targetSnapshot,o.urlAfterRedirects=M.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects};const R=new nf(M.id,this.urlSerializer.serialize(M.extractedUrl),this.urlSerializer.serialize(M.urlAfterRedirects),M.targetSnapshot);this.events.next(R)}));if(E&&t.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:M,extractedUrl:R,source:W,restoredState:Q,extras:J}=g,be=new oc(M,this.urlSerializer.serialize(R),W,Q);this.events.next(be);const ze=m0(0,this.rootComponentType).snapshot;return this.currentTransition=o={...g,targetSnapshot:ze,urlAfterRedirects:R,extras:{...J,skipLocationChange:!1,replaceUrl:!1}},(0,ut.of)(o)}{const M="";return this.events.next(new Bo(g.id,this.urlSerializer.serialize(g.extractedUrl),M,1)),g.resolve(null),Oo.E}}),bn(g=>{const v=new kb(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}),(0,wt.U)(g=>(this.currentTransition=o={...g,guards:Yu(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},o)),function hl(n,e){return(0,yi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return 0===l.length&&0===o.length?(0,ut.of)({...t,guardsResult:!0}):function Gb(n,e,t,r){return(0,pn.D)(n).pipe((0,yi.z)(i=>function qb(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,ut.of)(!0);const l=o.map(f=>{const g=ma(e)??i,v=ll(f,g);return Fo(function bm(n){return n&&ff(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):g.runInContext(()=>v(n,e,t,r))).pipe(ar())});return(0,ut.of)(l).pipe(dl())}(i.component,i.route,t,e,r)),ar(i=>!0!==i,!0))}(l,r,i,n).pipe((0,yi.z)(f=>f&&function KA(n){return"boolean"==typeof n}(f)?function Wb(n,e,t,r){return(0,pn.D)(e).pipe(ko(i=>aa(function fL(n,e){return null!==n&&e&&e(new RA(n)),(0,ut.of)(!0)}(i.route.parent,r),function XA(n,e){return null!==n&&e&&e(new f0(n)),(0,ut.of)(!0)}(i.route,r),function ex(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function Im(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Kh(()=>{const f=l.guards.map(g=>{const v=ma(l.node)??t,E=ll(g,v);return Fo(function $b(n){return n&&ff(n.canActivateChild)}(E)?E.canActivateChild(r,n):v.runInContext(()=>E(r,n))).pipe(ar())});return(0,ut.of)(f).pipe(dl())}));return(0,ut.of)(o).pipe(dl())}(n,i.path,t),function Tm(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ut.of)(!0);const i=r.map(o=>Kh(()=>{const l=ma(e)??t,f=ll(o,l);return Fo(function QA(n){return n&&ff(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(ar())}));return(0,ut.of)(i).pipe(dl())}(n,i.route,t))),ar(i=>!0!==i,!0))}(r,o,n,e):(0,ut.of)(f)),(0,wt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,g=>this.events.next(g)),bn(g=>{if(o.guardsResult=g.guardsResult,fa(g.guardsResult))throw C0(0,g.guardsResult);const v=new kA(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(v)}),Mr(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",3),!1)),O0(g=>{if(g.guards.canActivateChecks.length)return(0,ut.of)(g).pipe(bn(v=>{const E=new Rb(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(E)}),(0,En.w)(v=>{let E=!1;return(0,ut.of)(v).pipe(function P0(n,e){return(0,yi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,ut.of)(t);let o=0;return(0,pn.D)(i).pipe(ko(l=>function e1(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!s1(i)&&(o[Ro]=i.title),function t1(n,e,t,r){const i=function n1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,ut.of)({});const o={};return(0,pn.D)(i).pipe((0,yi.z)(l=>function r1(n,e,t,r){const i=ma(e)??r,o=ll(n,i);return Fo(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[l],e,t,r).pipe(ar(),bn(f=>{o[l]=f}))),ec(1),function Qh(n){return(0,wt.U)(()=>n)}(o),Ss(l=>zb(l)?Oo.E:ca(l)))}(o,n,e,r).pipe((0,wt.U)(l=>(n._resolvedData=l,n.data=_0(n,t).resolve,i&&s1(i)&&(n.data[Ro]=i.title),null)))}(l.route,r,n,e)),bn(()=>o++),ec(1),(0,yi.z)(l=>o===i.length?(0,ut.of)(t):Oo.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),bn({next:()=>E=!0,complete:()=>{E||this.cancelNavigationTransition(v,"",2)}}))}),bn(v=>{const E=new oL(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(E)}))}),O0(g=>{const v=E=>{const T=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(E.routeConfig).pipe(bn(M=>{E.component=M}),(0,wt.U)(()=>{})));for(const M of E.children)T.push(...v(M));return T};return Qa(v(g.targetSnapshot.root)).pipe(tl(),jt(1))}),O0(()=>this.afterPreactivation()),(0,wt.U)(g=>{const v=function Bb(n,e,t){const r=cf(n,e._root,t?t._root:void 0);return new g0(r,e)}(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=o={...g,targetRouterState:v},o}),bn(()=>{this.events.next(new rf)}),((n,e,t,r)=>(0,wt.U)(i=>(new jb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),jt(1),bn({next:g=>{l=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ao(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),t.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{l=!0}}),function Fu(n){return(0,_i.e)((e,t)=>{(0,ku.Xf)(n).subscribe((0,mi.x)(t,()=>t.complete(),Jh.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(bn(g=>{throw g}))),tc(()=>{l||f||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Ss(g=>{if(f=!0,Ku(g))this.events.next(new ol(o.id,this.urlSerializer.serialize(o.extractedUrl),g.message,g.cancellationCode)),function vi(n){return Ku(n)&&fa(n.url)}(g)?this.events.next(new Fb(g.url)):o.resolve(!1);else{this.events.next(new Wu(o.id,this.urlSerializer.serialize(o.extractedUrl),g,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(g))}catch(v){o.reject(v)}}return Oo.E}))}))}cancelNavigationTransition(t,r,i){const o=new ol(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ax(n){return n!==sl}let cx=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Dt);return r}getResolvedTitleForRoute(t){return t.data[Ro]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(gL)},providedIn:"root"})}return n})(),gL=(()=>{class n extends cx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(ve))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(o1)},providedIn:"root"})}return n})();class _L{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let o1=(()=>{class n extends _L{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xm=new u.OlP("",{providedIn:"root",factory:()=>({})});let lx=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(ux)},providedIn:"root"})}return n})(),ux=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vf=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(vf||{});function Pm(n,e){n.events.pipe(Mr(t=>t instanceof ao||t instanceof ol||t instanceof Wu||t instanceof Bo),(0,wt.U)(t=>t instanceof ao||t instanceof Bo?vf.COMPLETE:t instanceof ol&&(0===t.code||1===t.code)?vf.REDIRECTING:vf.FAILED),Mr(t=>t!==vf.REDIRECTING),jt(1)).subscribe(()=>{e()})}function _a(n){throw n}function Cf(n,e,t){return e.parse("/")}const a1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},c1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Tn=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this._events=new Pi.x,this.options=(0,u.f3M)(xm,{optional:!0})||{},this.pendingTasks=(0,u.f3M)(u.HDt),this.errorHandler=this.options.errorHandler||_a,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Cf,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(lx),this.routeReuseStrategy=(0,u.f3M)(mL),this.titleStrategy=(0,u.f3M)(cx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,u.f3M)(Xu,{optional:!0})?.flat()??[],this.navigationTransitions=(0,u.f3M)(Am),this.urlSerializer=(0,u.f3M)(Vu),this.location=(0,u.f3M)(Se),this.componentInputBindingEnabled=!!(0,u.f3M)(Cm,{optional:!0}),this.eventsSubscription=new el.w0,this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Lo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=m0(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(dx(r)&&this._events.next(r));if(r instanceof oc)ax(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Bo)this.rawUrlTree=i.rawUrl;else if(r instanceof nf){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof rf)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof ol)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof Fb){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ax(i.source)};this.scheduleNavigation(o,sl,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Wu&&this.restoreHistory(i,!0),r instanceof ao&&(this.navigated=!0),dx(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),sl,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const g={...i};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(uf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:f,preserveFragment:g}=r,v=g?this.currentUrlTree.fragment:l;let T,E=null;switch(f){case"merge":E={...this.currentUrlTree.queryParams,...o};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=o||null}null!==E&&(E=this.removeEmptyProps(E));try{T=m(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),T=this.currentUrlTree.root}return _(T,t,E,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=fa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,sl,null,r)}navigate(t,r={skipLocationChange:!1}){return function yL(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new u.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...a1}:!1===r?{...c1}:r,fa(t))return dm(this.currentUrlTree,t,i);const o=this.parseUrl(t);return dm(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,l){if(this.disposed)return Promise.resolve(!1);let f,g,v;l?(f=l.resolve,g=l.reject,v=l.promise):v=new Promise((T,M)=>{f=T,g=M});const E=this.pendingTasks.add();return Pm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(E))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:f,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dx(n){return!(n instanceof rf||n instanceof Fb)}let Om=(()=>{class n{constructor(t,r,i,o,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=l,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new Pi.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const g=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof ao&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Tn),u.Y36(ac),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Oe))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&u.NdJ("click",function(l){return i.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&r&&u.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",u.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",u.VuI],replaceUrl:["replaceUrl","replaceUrl",u.VuI],routerLink:"routerLink"},standalone:!0,features:[u.Xq5,u.TTD]})}return n})(),wf=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,l){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof ao&&this.update()})}ngAfterContentInit(){(0,ut.of)(this.links.changes,(0,ut.of)(null)).pipe((0,Jc.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,pn.D)(t).pipe((0,Jc.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function R0(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Tn),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(Om,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&u.Suo(o,Om,5),2&r){let l;u.iGM(l=u.CRH())&&(i.links=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[u.TTD]})}return n})();class hx{}let px=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Mr(t=>t instanceof ao),ko(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,u.MMx)(o.providers,t,`Route: ${o.path}`));const l=o._injector??t,f=o._loadedInjector??l;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(l,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(f,o.children??o._loadedRoutes))}return(0,pn.D)(i).pipe((0,Jc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,ut.of)(null);const o=i.pipe((0,yi.z)(l=>null===l?(0,ut.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,pn.D)([o,l]).pipe((0,Jc.J)())}return o})}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Tn),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(hx),u.LFG(k0))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const N0=new u.OlP("");let l1=(()=>{class n{constructor(t,r,i,o,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof oc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ao?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Bo&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof FA&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new FA(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){u.$Z()};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function As(n,e){return{\u0275kind:n,\u0275providers:e}}function d1(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const r=n.get(Tn),i=n.get(h1);1===n.get(Ef)&&r.initialNavigation(),n.get(p1,null,u.XFs.Optional)?.setUpPreloading(),n.get(N0,null,u.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const h1=new u.OlP("",{factory:()=>new Pi.x}),Ef=new u.OlP("",{providedIn:"root",factory:()=>1}),p1=new u.OlP("");function _x(n){return As(0,[{provide:p1,useExisting:px},{provide:hx,useExisting:n}])}const td=new u.OlP("ROUTER_FORROOT_GUARD"),g1=[Se,{provide:Vu,useClass:fm},Tn,_m,{provide:ac,useFactory:function F0(n){return n.routerState.root},deps:[Tn]},k0,[]];function m1(){return new u.PXZ("Router",Tn)}let km=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[g1,[],{provide:Xu,multi:!0,useValue:t},{provide:td,useFactory:y1,deps:[[Tn,new u.FiY,new u.tp0]]},{provide:xm,useValue:r||{}},r?.useHash?{provide:Oe,useClass:Ce}:{provide:Oe,useClass:Je},{provide:N0,useFactory:()=>{const n=(0,u.f3M)(Jr),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(xm),r=(0,u.f3M)(Am),i=(0,u.f3M)(Vu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new l1(i,r,n,e,t)}},r?.preloadingStrategy?_x(r.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:m1},r?.initialNavigation?Rm(r):[],r?.bindToComponentInputs?As(8,[Ub,{provide:Cm,useExisting:Ub}]).\u0275providers:[],[{provide:Cx,useFactory:d1},{provide:u.tb,multi:!0,useExisting:Cx}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Xu,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(td,8))};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();function y1(n){return"guarded"}function Rm(n){return["disabled"===n.initialNavigation?As(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(Tn);return()=>{e.setUpLocationChangeListener()}}},{provide:Ef,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?As(2,[{provide:Ef,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(Fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Tn),o=e.get(h1);Pm(i,()=>{r(!0)}),e.get(Am).afterPreactivation=()=>(r(!0),o.closed?(0,ut.of)(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const Cx=new u.OlP("");var U=F(5861),Nm=F(305);function Vr(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const o=new Nm.Hp({next:l=>{r(l),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new ro)}});n.subscribe(o)})}class B0 extends el.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const pl={setInterval(n,e,...t){const{delegate:r}=pl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=pl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var jo=F(9039);class Tf extends B0{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return pl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&pl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,jo.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Df={now:()=>(Df.delegate||Date).now(),delegate:void 0};class Sf{constructor(e,t=Sf.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Sf.now=Df.now;class C1 extends Sf{constructor(e,t=Sf.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const V0=new C1(Tf);var Dn=F(7592);(0,Dn.registerVersion)("firebase","9.23.0","app");var yr=F(4537),ki=F(7879),z=F(9058),w1=F(1878);class j0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function bL(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const I1="@firebase/app",gl=new ki.Yd("@firebase/app"),Bm="[DEFAULT]",ML={[I1]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ml=new Map,_l=new Map;function Y0(n,e){try{n.container.addComponent(e)}catch(t){gl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Yi(n){const e=n.name;if(_l.has(e))return gl.debug(`There were multiple attempts to register component ${e}.`),!1;_l.set(e,n);for(const t of ml.values())Y0(t,n);return!0}function yl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const ya=new z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class S1{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yr.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}function M1(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Bm,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw ya.create("bad-app-name",{appName:String(i)});if(t||(t=(0,z.aH)()),!t)throw ya.create("no-options");const o=ml.get(i);if(o){if((0,z.vZ)(t,o.options)&&(0,z.vZ)(r,o.config))return o;throw ya.create("duplicate-app",{appName:i})}const l=new yr.H0(i);for(const g of _l.values())l.addComponent(g);const f=new S1(t,r,l);return ml.set(i,f),f}function Pf(n=Bm){const e=ml.get(n);if(!e&&n===Bm&&(0,z.aH)())return M1();if(!e)throw ya.create("no-app",{appName:n});return e}function Ri(n,e,t){var r;let i=null!==(r=ML[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const f=[`Unable to register library "${i}" with version "${e}":`];return o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&f.push("and"),l&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void gl.warn(f.join(" "))}Yi(new yr.wA(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Ox="firebase-heartbeat-database",kx=1,sd="firebase-heartbeat-store";let Vm=null;function jm(){return Vm||(Vm=(0,w1.X3)(Ox,kx,{upgrade:(n,e)=>{0===e&&n.createObjectStore(sd)}}).catch(n=>{throw ya.create("idb-open",{originalErrorMessage:n.message})})),Vm}function kf(){return(kf=(0,U.Z)(function*(n){try{return yield(yield jm()).transaction(sd).objectStore(sd).get(A1(n))}catch(e){if(e instanceof z.ZR)gl.warn(e.message);else{const t=ya.create("idb-get",{originalErrorMessage:e?.message});gl.warn(t.message)}}})).apply(this,arguments)}function J0(n,e){return X0.apply(this,arguments)}function X0(){return(X0=(0,U.Z)(function*(n,e){try{const r=(yield jm()).transaction(sd,"readwrite");yield r.objectStore(sd).put(e,A1(n)),yield r.done}catch(t){if(t instanceof z.ZR)gl.warn(t.message);else{const r=ya.create("idb-set",{originalErrorMessage:t?.message});gl.warn(r.message)}}})).apply(this,arguments)}function A1(n){return`${n.name}!${n.options.appId}`}class P1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new RL(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,U.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=O1();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(o=>o.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,U.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=O1(),{heartbeatsToSend:r,unsentEntries:i}=function Nx(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),eC(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),eC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=(0,z.L)(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o})()}}function O1(){return(new Date).toISOString().substring(0,10)}class RL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,U.Z)(function*(){return!!(0,z.hl)()&&(0,z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,U.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function kL(n){return kf.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,U.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return J0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,U.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return J0(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function eC(n){return(0,z.L)(JSON.stringify({version:2,heartbeats:n})).length}!function k1(n){Yi(new yr.wA("platform-logger",e=>new j0(e),"PRIVATE")),Yi(new yr.wA("heartbeat",e=>new P1(e),"PRIVATE")),Ri(I1,"0.9.20",n),Ri(I1,"0.9.20","esm2017"),Ri("fire-js","")}("");const co=(n,e)=>e.some(t=>n instanceof t);let tC,Fx;const $m=new WeakMap,rC=new WeakMap,Lx=new WeakMap,iC=new WeakMap,Rf=new WeakMap;let sC={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return rC.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Lx.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ho(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Ux(n){return"function"==typeof n?function jr(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function lc(){return Fx||(Fx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(oC(this),e),Ho($m.get(this))}:function(...e){return Ho(n.apply(oC(this),e))}:function(e,...t){const r=n.call(oC(this),e,...t);return Lx.set(r,e.sort?e.sort():[e]),Ho(r)}}(n):(n instanceof IDBTransaction&&function R1(n){if(rC.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});rC.set(n,e)}(n),co(n,function nC(){return tC||(tC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,sC):n)}function Ho(n){if(n instanceof IDBRequest)return function $o(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Ho(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&$m.set(t,n)}).catch(()=>{}),Rf.set(e,n),e}(n);if(iC.has(n))return iC.get(n);const e=Ux(n);return e!==n&&(iC.set(n,e),Rf.set(e,n)),e}const oC=n=>Rf.get(n),F1=["get","getKey","getAll","getAllKeys","count"],L1=["put","add","delete","clear"],aC=new Map;function cC(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(aC.get(e))return aC.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=L1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!F1.includes(t))return;const o=function(){var l=(0,U.Z)(function*(f,...g){const v=this.transaction(f,i?"readwrite":"readonly");let E=v.store;return r&&(E=E.index(g.shift())),(yield Promise.all([E[t](...g),i&&v.done]))[0]});return function(g){return l.apply(this,arguments)}}();return aC.set(e,o),o}!function NL(n){sC=n(sC)}(n=>({...n,get:(e,t,r)=>cC(e,t)||n.get(e,t,r),has:(e,t)=>!!cC(e,t)||n.has(e,t)}));const lC="@firebase/installations",uC="0.6.4",U1=1e4,B1=`w:${uC}`,dC="FIS_v2",od="https://firebaseinstallations.googleapis.com/v1",va=36e5,zo=new z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function hC(n){return n instanceof z.ZR&&n.code.includes("request-failed")}function Nf({projectId:n}){return`${od}/projects/${n}/installations`}function cd(n){return{token:n.token,requestStatus:2,expiresIn:$x(n.expiresIn),creationTime:Date.now()}}function ld(n,e){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,U.Z)(function*(n,e){const r=(yield e.json()).error;return zo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function fC({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function pC(n){return gC.apply(this,arguments)}function gC(){return(gC=(0,U.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function $x(n){return Number(n.replace("s","000"))}function mC(){return(mC=(0,U.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Nf(n),i=fC(n),o=e.getImmediate({optional:!0});if(o){const v=yield o.getHeartbeatsHeader();v&&i.append("x-firebase-client",v)}const f={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:dC,appId:n.appId,sdkVersion:B1})},g=yield pC(()=>fetch(r,f));if(g.ok){const v=yield g.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:cd(v.authToken)}}throw yield ld("Create Installation",g)})).apply(this,arguments)}function Hx(n){return new Promise(e=>{setTimeout(e,n)})}const $1=/^[cdef][\w-]{21}$/,zm="";function UL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Gm(n){return function LL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return $1.test(t)?t:zm}catch{return zm}}function Ff(n){return`${n.appName}!${n.appId}`}const Cl=new Map;function _C(n,e){const t=Ff(n);yC(t,e),function St(n,e){const t=function vC(){return!uc&&"BroadcastChannel"in self&&(uc=new BroadcastChannel("[Firebase] FID Change"),uc.onmessage=n=>{yC(n.data.key,n.data.fid)}),uc}();t&&t.postMessage({key:n,fid:e}),function wl(){0===Cl.size&&uc&&(uc.close(),uc=null)}()}(t,e)}function yC(n,e){const t=Cl.get(n);if(t)for(const r of t)r(e)}let uc=null;const z1="firebase-installations-database",Gx=1,Go="firebase-installations-store";let dc=null;function Lf(){return dc||(dc=function Bx(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),f=Ho(l);return r&&l.addEventListener("upgradeneeded",g=>{r(Ho(l.result),g.oldVersion,g.newVersion,Ho(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),f.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}(z1,Gx,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Go)}})),dc}function hc(n,e){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,U.Z)(function*(n,e){const t=Ff(n),i=(yield Lf()).transaction(Go,"readwrite"),o=i.objectStore(Go),l=yield o.get(t);return yield o.put(e,t),yield i.done,(!l||l.fid!==e.fid)&&_C(n,e.fid),e})).apply(this,arguments)}function Uf(n){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,U.Z)(function*(n){const e=Ff(n),r=(yield Lf()).transaction(Go,"readwrite");yield r.objectStore(Go).delete(e),yield r.done})).apply(this,arguments)}function Il(n,e){return qm.apply(this,arguments)}function qm(){return(qm=(0,U.Z)(function*(n,e){const t=Ff(n),i=(yield Lf()).transaction(Go,"readwrite"),o=i.objectStore(Go),l=yield o.get(t),f=e(l);return void 0===f?yield o.delete(t):yield o.put(f,t),yield i.done,f&&(!l||l.fid!==f.fid)&&_C(n,f.fid),f})).apply(this,arguments)}function Vf(n){return CC.apply(this,arguments)}function CC(){return CC=(0,U.Z)(function*(n){let e;const t=yield Il(n.appConfig,r=>{const i=function Wx(n){return EC(n||{fid:UL(),registrationStatus:0})}(r),o=function qx(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(zo.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function G1(n,e){return wC.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Zx(n)}:{installationEntry:e}}(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===zm?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),CC.apply(this,arguments)}function wC(){return wC=(0,U.Z)(function*(n,e){try{const t=yield function FL(n,e){return mC.apply(this,arguments)}(n,e);return hc(n.appConfig,t)}catch(t){throw hC(t)&&409===t.customData.serverCode?yield Uf(n.appConfig):yield hc(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),wC.apply(this,arguments)}function Zx(n){return IC.apply(this,arguments)}function IC(){return(IC=(0,U.Z)(function*(n){let e=yield W1(n.appConfig);for(;1===e.registrationStatus;)yield Hx(100),e=yield W1(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Vf(n);return r||t}return e})).apply(this,arguments)}function W1(n){return Il(n,e=>{if(!e)throw zo.create("installation-not-found");return EC(e)})}function EC(n){return function q1(n){return 1===n.registrationStatus&&n.registrationTime+U1<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function bC(){return(bC=(0,U.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function ls(n,{fid:e}){return`${Nf(n)}/${e}/authTokens:generate`}(n,t),i=function V1(n,{refreshToken:e}){const t=fC(n);return t.append("Authorization",function j1(n){return`${dC} ${n}`}(e)),t}(n,t),o=e.getImmediate({optional:!0});if(o){const v=yield o.getHeartbeatsHeader();v&&i.append("x-firebase-client",v)}const f={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:B1,appId:n.appId}})},g=yield pC(()=>fetch(r,f));if(g.ok)return cd(yield g.json());throw yield ld("Generate Auth Token",g)})).apply(this,arguments)}function TC(n){return DC.apply(this,arguments)}function DC(){return DC=(0,U.Z)(function*(n,e=!1){let t;const r=yield Il(n.appConfig,o=>{if(!Z1(o))throw zo.create("not-registered");const l=o.authToken;if(!e&&function K1(n){return 2===n.requestStatus&&!function Qx(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+va}(n)}(l))return o;if(1===l.requestStatus)return t=function BL(n,e){return jf.apply(this,arguments)}(n,e),o;{if(!navigator.onLine)throw zo.create("app-offline");const f=function Jx(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(o);return t=function Yx(n,e){return MC.apply(this,arguments)}(n,f),f}});return t?yield t:r.authToken}),DC.apply(this,arguments)}function jf(){return(jf=(0,U.Z)(function*(n,e){let t=yield SC(n.appConfig);for(;1===t.authToken.requestStatus;)yield Hx(100),t=yield SC(n.appConfig);const r=t.authToken;return 0===r.requestStatus?TC(n,e):r})).apply(this,arguments)}function SC(n){return Il(n,e=>{if(!Z1(e))throw zo.create("not-registered");return function AC(n){return 1===n.requestStatus&&n.requestTime+U1<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function MC(){return MC=(0,U.Z)(function*(n,e){try{const t=yield function Kx(n,e){return bC.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield hc(n.appConfig,r),t}catch(t){if(!hC(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield hc(n.appConfig,r)}else yield Uf(n.appConfig);throw t}}),MC.apply(this,arguments)}function Z1(n){return void 0!==n&&2===n.registrationStatus}function xC(){return(xC=(0,U.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Vf(e);return r?r.catch(console.error):TC(e).catch(console.error),t.fid})).apply(this,arguments)}function PC(){return PC=(0,U.Z)(function*(n,e=!1){const t=n;return yield function tP(n){return xs.apply(this,arguments)}(t),(yield TC(t,e)).token}),PC.apply(this,arguments)}function xs(){return(xs=(0,U.Z)(function*(n){const{registrationPromise:e}=yield Vf(n);e&&(yield e)})).apply(this,arguments)}function Q1(n){return zo.create("missing-app-config-values",{valueName:n})}const FC="installations",X1=n=>{const e=n.getProvider("app").getImmediate(),t=function NC(n){if(!n||!n.options)throw Q1("App Configuration");if(!n.name)throw Q1("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Q1(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:yl(e,"heartbeat"),_delete:()=>Promise.resolve()}},eT=n=>{const t=yl(n.getProvider("app").getImmediate(),FC).getImmediate();return{getId:()=>function Xx(n){return xC.apply(this,arguments)}(t),getToken:i=>function eP(n){return PC.apply(this,arguments)}(t,i)}};(function LC(){Yi(new yr.wA(FC,X1,"PUBLIC")),Yi(new yr.wA("installations-internal",eT,"PRIVATE"))})(),Ri(lC,uC),Ri(lC,uC,"esm2017");const lo="@firebase/remote-config",Ni=new z.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zf{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,U.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const o=yield t.client.fetch(e),l=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===o.status&&l.push(t.storage.setLastSuccessfulFetchResponse(o)),yield Promise.all(l),o})()}}function dP(n=navigator){return n.languages&&n.languages[0]||n.language}class hP{constructor(e,t,r,i,o,l){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=l}fetch(e){var t=this;return(0,U.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,f={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},g={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:dP()},v={method:"POST",headers:f,body:JSON.stringify(g)},E=fetch(l,v),T=new Promise((be,ze)=>{e.signal.addEventListener(()=>{const Re=new Error("The operation was aborted.");Re.name="AbortError",ze(Re)})});let M;try{yield Promise.race([E,T]),M=yield E}catch(be){let ze="fetch-client-network";throw"AbortError"===be?.name&&(ze="fetch-timeout"),Ni.create(ze,{originalErrorMessage:be?.message})}let R=M.status;const W=M.headers.get("ETag")||void 0;let Q,J;if(200===M.status){let be;try{be=yield M.json()}catch(ze){throw Ni.create("fetch-client-parse",{originalErrorMessage:ze?.message})}Q=be.entries,J=be.state}if("INSTANCE_STATE_UNSPECIFIED"===J?R=500:"NO_CHANGE"===J?R=304:("NO_TEMPLATE"===J||"EMPTY_CONFIG"===J)&&(Q={}),304!==R&&200!==R)throw Ni.create("fetch-status",{httpStatus:R});return{status:R,eTag:W,config:Q}})()}}class gP{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,U.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,U.Z)(function*(){yield function fP(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Ni.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const o=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),o}catch(o){if(!function pP(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o))throw o;const l={throttleEndTimeMillis:Date.now()+(0,z.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(l),i.attemptFetch(e,l)}})()}}class yP{constructor(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Gf(n,e){const t=n.target.error||void 0;return Ni.create(e,{originalErrorMessage:t&&t?.message})}const Ca="app_namespace_store";class wP{constructor(e,t,r,i=function CP(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(Gf(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ca,{keyPath:"compositeKey"})}}catch(t){e(Ni.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,U.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const f=r.transaction([Ca],"readonly").objectStore(Ca),g=t.createCompositeKey(e);try{const v=f.get(g);v.onerror=E=>{o(Gf(E,"storage-get"))},v.onsuccess=E=>{const T=E.target.result;i(T?T.value:void 0)}}catch(v){o(Ni.create("storage-get",{originalErrorMessage:v?.message}))}})})()}set(e,t){var r=this;return(0,U.Z)(function*(){const i=yield r.openDbPromise;return new Promise((o,l)=>{const g=i.transaction([Ca],"readwrite").objectStore(Ca),v=r.createCompositeKey(e);try{const E=g.put({compositeKey:v,value:t});E.onerror=T=>{l(Gf(T,"storage-set"))},E.onsuccess=()=>{o()}}catch(E){l(Ni.create("storage-set",{originalErrorMessage:E?.message}))}})})()}delete(e){var t=this;return(0,U.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,o)=>{const f=r.transaction([Ca],"readwrite").objectStore(Ca),g=t.createCompositeKey(e);try{const v=f.delete(g);v.onerror=E=>{o(Gf(E,"storage-delete"))},v.onsuccess=()=>{i()}}catch(v){o(Ni.create("storage-delete",{originalErrorMessage:v?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class IP{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,U.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),o=yield t;o&&(e.lastFetchStatus=o);const l=yield r;l&&(e.lastSuccessfulFetchTimestampMillis=l);const f=yield i;f&&(e.activeConfig=f)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function bP(){return n_.apply(this,arguments)}function n_(){return(n_=(0,U.Z)(function*(){if(!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}!function EP(){Yi(new yr.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ni.create("registration-window");if(!(0,z.hl)())throw Ni.create("indexed-db-unavailable");const{projectId:o,apiKey:l,appId:f}=r.options;if(!o)throw Ni.create("registration-project-id");if(!l)throw Ni.create("registration-api-key");if(!f)throw Ni.create("registration-app-id");const g=new wP(f,r.name,t=t||"firebase"),v=new IP(g),E=new ki.Yd(lo);E.logLevel=ki.in.ERROR;const T=new hP(i,"10.5.0",t,o,l,f),M=new gP(T,g),R=new zf(M,g,v,E),W=new yP(r,R,v,g,E);return function oP(n){const e=(0,z.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(W),W},"PUBLIC").setMultipleInstances(!0)),Ri(lo,"0.4.4"),Ri(lo,"0.4.4","esm2017")}();const iT=(n,e)=>e.some(t=>n instanceof t);let sT,TP;const DP=new WeakMap,ud=new WeakMap,cT=new WeakMap,VC=new WeakMap,Wf=new WeakMap;let El={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return ud.get(n);if("objectStoreNames"===e)return n.objectStoreNames||cT.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vr(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function r_(n){return"function"==typeof n?function bl(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function aT(){return TP||(TP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(qf(this),e),vr(DP.get(this))}:function(...e){return vr(n.apply(qf(this),e))}:function(e,...t){const r=n.call(qf(this),e,...t);return cT.set(r,e.sort?e.sort():[e]),vr(r)}}(n):(n instanceof IDBTransaction&&function Wo(n){if(ud.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});ud.set(n,e)}(n),iT(n,function oT(){return sT||(sT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,El):n)}function vr(n){if(n instanceof IDBRequest)return function SP(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(vr(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&DP.set(t,n)}).catch(()=>{}),Wf.set(e,n),e}(n);if(VC.has(n))return VC.get(n);const e=r_(n);return e!==n&&(VC.set(n,e),Wf.set(e,n)),e}const qf=n=>Wf.get(n);function Tl(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),f=vr(l);return r&&l.addEventListener("upgradeneeded",g=>{r(vr(l.result),g.oldVersion,g.newVersion,vr(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),f.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",()=>i())}).catch(()=>{}),f}function fc(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),vr(t).then(()=>{})}const dd=["get","getKey","getAll","getAllKeys","count"],hd=["put","add","delete","clear"],pc=new Map;function Dl(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(pc.get(e))return pc.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=hd.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!dd.includes(t))return;const o=function(){var l=(0,U.Z)(function*(f,...g){const v=this.transaction(f,i?"readwrite":"readonly");let E=v.store;return r&&(E=E.index(g.shift())),(yield Promise.all([E[t](...g),i&&v.done]))[0]});return function(g){return l.apply(this,arguments)}}();return pc.set(e,o),o}!function Ci(n){El=n(El)}(n=>({...n,get:(e,t,r)=>Dl(e,t)||n.get(e,t,r),has:(e,t)=>!!Dl(e,t)||n.has(e,t)}));const fd="/firebase-messaging-sw.js",pd="/firebase-cloud-messaging-push-scope",Sl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",lT="https://fcmregistrations.googleapis.com/v1",jC="google.c.a.c_id",uT="google.c.a.c_l",dT="google.c.a.ts";var Zf=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Zf||{});function qo(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pT(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}const Kf="fcm_token_details_db",MP=5,AP="fcm_token_object_Store";function $C(){return $C=(0,U.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(Kf))return null;let e=null;return(yield Tl(Kf,MP,{upgrade:(r=(0,U.Z)(function*(i,o,l,f){var g;if(o<2||!i.objectStoreNames.contains(AP))return;const v=f.objectStore(AP),E=yield v.index("fcmSenderId").get(n);if(yield v.clear(),E)if(2===o){const T=E;if(!T.auth||!T.p256dh||!T.endpoint)return;e={token:T.fcmToken,createTime:null!==(g=T.createTime)&&void 0!==g?g:Date.now(),subscriptionOptions:{auth:T.auth,p256dh:T.p256dh,endpoint:T.endpoint,swScope:T.swScope,vapidKey:"string"==typeof T.vapidKey?T.vapidKey:qo(T.vapidKey)}}}else if(3===o){const T=E;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:qo(T.auth),p256dh:qo(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:qo(T.vapidKey)}}}else if(4===o){const T=E;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:qo(T.auth),p256dh:qo(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:qo(T.vapidKey)}}}}),function(o,l,f,g){return r.apply(this,arguments)})})).close(),yield fc(Kf),yield fc("fcm_vapid_details_db"),yield fc("undefined"),function xP(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),$C.apply(this,arguments)}const WL="firebase-messaging-database",PP=1,gd="firebase-messaging-store";let HC=null;function zC(){return HC||(HC=Tl(WL,PP,{upgrade:(n,e)=>{0===e&&n.createObjectStore(gd)}})),HC}function gT(n){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,U.Z)(function*(n){const e=Al(n),r=yield(yield zC()).transaction(gd).objectStore(gd).get(e);if(r)return r;{const i=yield function GL(n){return $C.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield Ml(n,i),i}}),Yf.apply(this,arguments)}function Ml(n,e){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,U.Z)(function*(n,e){const t=Al(n),i=(yield zC()).transaction(gd,"readwrite");return yield i.objectStore(gd).put(e,t),yield i.done,e})).apply(this,arguments)}function s_(){return(s_=(0,U.Z)(function*(n){const e=Al(n),r=(yield zC()).transaction(gd,"readwrite");yield r.objectStore(gd).delete(e),yield r.done})).apply(this,arguments)}function Al({appConfig:n}){return n.appId}const oi=new z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Jf(n,e){return GC.apply(this,arguments)}function GC(){return(GC=(0,U.Z)(function*(n,e){const t=yield _d(n),r=vT(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(md(n.appConfig),i)).json()}catch(l){throw oi.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(o.error)throw oi.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw oi.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function WC(){return(WC=(0,U.Z)(function*(n,e){const t=yield _d(n),r=vT(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${md(n.appConfig)}/${e.token}`,i)).json()}catch(l){throw oi.create("token-update-failed",{errorInfo:l?.toString()})}if(o.error)throw oi.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw oi.create("token-update-no-token");return o.token})).apply(this,arguments)}function _T(n,e){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,U.Z)(function*(n,e){const r={method:"DELETE",headers:yield _d(n)};try{const o=yield(yield fetch(`${md(n.appConfig)}/${e}`,r)).json();if(o.error)throw oi.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(i){throw oi.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function md({projectId:n}){return`${lT}/projects/${n}/registrations`}function _d(n){return yT.apply(this,arguments)}function yT(){return(yT=(0,U.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function vT({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==Sl&&(i.web.applicationPubKey=r),i}const kP=6048e5;function ZC(){return ZC=(0,U.Z)(function*(n){const e=yield function NP(n,e){return JC.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:qo(e.getKey("auth")),p256dh:qo(e.getKey("p256dh"))},r=yield gT(n.firebaseDependencies);if(r){if(function FP(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+kP?function RP(n,e){return o_.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield _T(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return QC(n.firebaseDependencies,t)}return QC(n.firebaseDependencies,t)}),ZC.apply(this,arguments)}function YC(){return YC=(0,U.Z)(function*(n){const e=yield gT(n.firebaseDependencies);e&&(yield _T(n.firebaseDependencies,e.token),yield function i_(n){return s_.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),YC.apply(this,arguments)}function o_(){return o_=(0,U.Z)(function*(n,e){try{const t=yield function OP(n,e){return WC.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Ml(n.firebaseDependencies,r),t}catch(t){throw yield function KC(n){return YC.apply(this,arguments)}(n),t}}),o_.apply(this,arguments)}function QC(n,e){return a_.apply(this,arguments)}function a_(){return(a_=(0,U.Z)(function*(n,e){const r={token:yield Jf(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Ml(n,r),r.token})).apply(this,arguments)}function JC(){return(JC=(0,U.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pT(e)})})).apply(this,arguments)}function XC(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function ew(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const o=e.notification.icon;o&&(n.notification.icon=o)}(e,n),function tw(n,e){e.data&&(n.data=e.data)}(e,n),function LP(n,e){var t,r,i,o,l;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const f=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(o=e.notification)||void 0===o?void 0:o.click_action;f&&(n.fcmOptions.link=f);const g=null===(l=e.fcmOptions)||void 0===l?void 0:l.analytics_label;g&&(n.fcmOptions.analyticsLabel=g)}(e,n),e}function ep(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function l_(n){return oi.create("missing-app-config-values",{valueName:n})}ep("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ep("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class UP{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function nw(n){if(!n||!n.options)throw l_("App Configuration Object");if(!n.name)throw l_("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw l_(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function rw(){return(rw=(0,U.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(fd,{scope:pd}),n.swRegistration.update().catch(()=>{})}catch(e){throw oi.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function tp(){return(tp=(0,U.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield function CT(n){return rw.apply(this,arguments)}(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw oi.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function u_(){return(u_=(0,U.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=Sl)})).apply(this,arguments)}function sw(){return sw=(0,U.Z)(function*(n,e){if(!navigator)throw oi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw oi.create("permission-blocked");return yield function wT(n,e){return u_.apply(this,arguments)}(n,e?.vapidKey),yield function iw(n,e){return tp.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function qC(n){return ZC.apply(this,arguments)}(n)}),sw.apply(this,arguments)}function np(){return(np=(0,U.Z)(function*(n,e,t){const r=function bT(n){switch(n){case Zf.NOTIFICATION_CLICKED:return"notification_open";case Zf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[jC],message_name:t[uT],message_time:t[dT],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function d_(){return d_=(0,U.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Zf.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(XC(t)):n.onMessageHandler.next(XC(t)));const r=t.data;(function c_(n){return"object"==typeof n&&!!n&&jC in n})(r)&&"1"===r["google.c.a.e"]&&(yield function ET(n,e,t){return np.apply(this,arguments)}(n,t.messageType,r))}),d_.apply(this,arguments)}const TT="@firebase/messaging",DT=n=>{const e=new UP(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function ow(n,e){return d_.apply(this,arguments)}(e,t)),e},ST=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function IT(n,e){return sw.apply(this,arguments)}(e,r)}};function AT(){return cw.apply(this,arguments)}function cw(){return(cw=(0,U.Z)(function*(){try{yield(0,z.eu)()}catch{return!1}return typeof window<"u"&&(0,z.hl)()&&(0,z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function xT(n=Pf()){return AT().then(e=>{if(!e)throw oi.create("unsupported-browser")},e=>{throw oi.create("indexed-db-unsupported")}),yl((0,z.m9)(n),"messaging").getImmediate()}!function MT(){Yi(new yr.wA("messaging",DT,"PUBLIC")),Yi(new yr.wA("messaging-internal",ST,"PRIVATE")),Ri(TT,"0.12.4"),Ri(TT,"0.12.4","esm2017")}();const ip="analytics",PT="firebase_id",OT="origin",p_=6e4,gc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lw="https://www.googletagmanager.com/gtag/js",$r=new ki.Yd("@firebase/analytics"),lr=new z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function dw(n){if(!n.startsWith(lw)){const e=lr.create("invalid-gtag-resource",{gtagURL:n});return $r.warn(e.message),""}return n}function kT(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function fw(){return(fw=(0,U.Z)(function*(n,e,t,r,i,o){const l=r[i];try{if(l)yield e[l];else{const g=(yield kT(t)).find(v=>v.measurementId===i);g&&(yield e[g.appId])}}catch(f){$r.error(f)}n("config",i,o)})).apply(this,arguments)}function pw(){return(pw=(0,U.Z)(function*(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const f=yield kT(t);for(const g of l){const v=f.find(T=>T.measurementId===g),E=v&&e[v.appId];if(!E){o=[];break}o.push(E)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){$r.error(o)}})).apply(this,arguments)}const GP=30,gw=new class WP{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function LT(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function mw(){return(mw=(0,U.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:LT(r)},o=gc.replace("{app-id}",t),l=yield fetch(o,i);if(200!==l.status&&304!==l.status){let f="";try{const g=yield l.json();null!==(e=g.error)&&void 0!==e&&e.message&&(f=g.error.message)}catch{}throw lr.create("config-fetch-failed",{httpStatus:l.status,responseMessage:f})}return l.json()})).apply(this,arguments)}function g_(){return(g_=(0,U.Z)(function*(n,e=gw,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw lr.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw lr.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new _w;return setTimeout((0,U.Z)(function*(){f.abort()}),void 0!==t?t:p_),UT({appId:r,apiKey:i,measurementId:o},l,f,e)})).apply(this,arguments)}function UT(n,e,t){return m_.apply(this,arguments)}function m_(){return m_=(0,U.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=gw){var o;const{appId:l,measurementId:f}=n;try{yield function KL(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(lr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(g){if(f)return $r.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:f};throw g}try{const g=yield function yd(n){return mw.apply(this,arguments)}(n);return i.deleteThrottleMetadata(l),g}catch(g){const v=g;if(!function BT(n){if(!(n instanceof z.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(v)){if(i.deleteThrottleMetadata(l),f)return $r.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:l,measurementId:f};throw g}const E=503===Number(null===(o=v?.customData)||void 0===o?void 0:o.httpStatus)?(0,z.$s)(t,i.intervalMillis,GP):(0,z.$s)(t,i.intervalMillis),T={throttleEndTimeMillis:Date.now()+E,backoffCount:t+1};return i.setThrottleMetadata(l,T),$r.debug(`Calling attemptFetch again in ${E} millis`),UT(n,T,r,i)}}),m_.apply(this,arguments)}class _w{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Ps,xl;function __(){return(__=(0,U.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const o=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function ww(){return(ww=(0,U.Z)(function*(){if(!(0,z.hl)())return $r.warn(lr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,z.eu)()}catch(n){return $r.warn(lr.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function v_(){return v_=(0,U.Z)(function*(n,e,t,r,i,o,l){var f;const g=function qP(n){return g_.apply(this,arguments)}(n);g.then(R=>{t[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&$r.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>$r.error(R)),e.push(g);const v=function QP(){return ww.apply(this,arguments)}().then(R=>{if(R)return r.getId()}),[E,T]=yield Promise.all([g,v]);(function zP(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(lw)&&t.src.includes(n))return t;return null})(o)||function qL(n,e){const t=function hw(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:dw}),r=document.createElement("script"),i=`${lw}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(o,E.measurementId),xl&&(i("consent","default",xl),function jT(n){xl=n}(void 0)),i("js",new Date);const M=null!==(f=l?.config)&&void 0!==f?f:{};return M[OT]="firebase",M.update=!0,null!=T&&(M[PT]=T),i("config",E.measurementId,M),Ps&&(i("set",Ps),function Cw(n){Ps=n}(void 0)),E.measurementId}),v_.apply(this,arguments)}class C_{constructor(e){this.app=e}_delete(){return delete Ko[this.app.options.appId],Promise.resolve()}}let Ko={},Iw=[];const Ew={};let zT,Os,op="dataLayer",vd=!1;function WT(n,e,t){!function bw(){const n=[];if((0,z.ru)()&&n.push("This is a browser extension environment."),(0,z.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=lr.create("invalid-analytics-context",{errorInfo:e});$r.warn(t.message)}}();const r=n.options.appId;if(!r)throw lr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw lr.create("no-api-key");$r.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ko[r])throw lr.create("already-exists",{id:r});if(!vd){!function ZL(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(op);const{wrappedGtag:o,gtagCore:l}=function NT(n,e,t,r,i){let o=function(...l){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function Ar(n,e,t,r){function o(){return o=(0,U.Z)(function*(l,...f){try{if("event"===l){const[g,v]=f;yield function RT(n,e,t,r,i){return pw.apply(this,arguments)}(n,e,t,g,v)}else if("config"===l){const[g,v]=f;yield function HP(n,e,t,r,i,o){return fw.apply(this,arguments)}(n,e,t,r,g,v)}else if("consent"===l){const[g]=f;n("consent","update",g)}else if("get"===l){const[g,v,E]=f;n("get",g,v,E)}else if("set"===l){const[g]=f;n("set",g)}else n(l,...f)}catch(g){$r.error(g)}}),o.apply(this,arguments)}return function i(l){return o.apply(this,arguments)}}(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}(Ko,Iw,Ew,op,"gtag");Os=o,zT=l,vd=!0}return Ko[r]=function $T(n,e,t,r,i,o,l){return v_.apply(this,arguments)}(n,Iw,Ew,e,zT,op,t),new C_(n)}function ZT(){return w_.apply(this,arguments)}function w_(){return(w_=(0,U.Z)(function*(){if((0,z.ru)()||!(0,z.zI)()||!(0,z.hl)())return!1;try{return yield(0,z.eu)()}catch{return!1}})).apply(this,arguments)}const KT="@firebase/analytics";!function tO(){Yi(new yr.wA(ip,(e,{options:t})=>WT(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Yi(new yr.wA("analytics-internal",function n(e){try{const t=e.getProvider(ip).getImmediate();return{logEvent:(r,i,o)=>function eO(n,e,t,r){n=(0,z.m9)(n),function ZP(n,e,t,r,i){return __.apply(this,arguments)}(Os,Ko[n.app.options.appId],e,t,r).catch(i=>$r.error(i))}(t,r,i,o)}}catch(t){throw lr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Ri(KT,"0.10.0"),Ri(KT,"0.10.0","esm2017")}();const iO=new class rO extends C1{}(class nO extends Tf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var ap=F(5137),Cd=F(3093);const Pl=new u.GfV("7.6.1"),I_="__angularfire_symbol__analyticsIsSupportedValue",E_="__angularfire_symbol__analyticsIsSupported",b_="__angularfire_symbol__remoteConfigIsSupportedValue",T_="__angularfire_symbol__remoteConfigIsSupported",D_="__angularfire_symbol__messagingIsSupportedValue",S_="__angularfire_symbol__messagingIsSupported";globalThis[E_]||(globalThis[E_]=ZT().then(n=>globalThis[I_]=n).catch(()=>globalThis[I_]=!1)),globalThis[S_]||(globalThis[S_]=AT().then(n=>globalThis[D_]=n).catch(()=>globalThis[D_]=!1)),globalThis[T_]||(globalThis[T_]=bP().then(n=>globalThis[b_]=n).catch(()=>globalThis[b_]=!1));const cp={async:()=>globalThis[S_],sync:()=>{const n=globalThis[D_];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function Ol(n,e,t){if(e){if(1===e.length)return e[0];const o=e.filter(l=>l.app===t);if(1===o.length)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const ks=(n,e)=>{const t=e?[e]:(0,Dn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(l=>{r.includes(l)||r.push(l)})}),r};function wd(){}class QT{constructor(e,t=iO){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(l){i.runGuarded(()=>{e.apply(this,[l])})},t,r)}}class Id{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wd,{},wd,wd)),t.pipe(bn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let kl=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new QT(Zone.current)),this.insideAngular=t.run(()=>new QT(Zone.current,V0)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wa(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function mc(n){return wa().ngZone.run(()=>n())}function Hr(n){return wa(),function cO(n){return function(t){return(t=t.lift(new Id(n.ngZone))).pipe((0,ap.R)(n.outsideAngular),(0,Cd.Q)(n.insideAngular))}}(wa())(n)}const lO=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),mc(()=>n.apply(void 0,r))},Ed=(n,e)=>function(){let t;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(t||(t=mc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wd,{},wd,wd)))),r[o]=lO(r[o],t));const i=function r4(n){return wa().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof gi.y){const o=wa();return i.pipe((0,ap.R)(o.outsideAngular),(0,Cd.Q)(o.insideAngular))}return mc(()=>i)}return i instanceof gi.y?i.pipe(Hr):i instanceof Promise?mc(()=>new Promise((o,l)=>i.then(f=>mc(()=>o(f)),f=>mc(()=>l(f))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:mc(()=>i)};function _c(){return(0,_i.e)((n,e)=>{let t,r=!1;n.subscribe((0,mi.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var Ze,uO=F(3997),Qi=F(6304),Ji=(F(8661),F(3399)),i4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rs={},Sw=Sw||{},It=i4||self;function lp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function bd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Mw="closure_uid_"+(1e9*Math.random()>>>0),dO=0;function hO(n,e,t){return n.call.apply(n.bind,arguments)}function up(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function wi(n,e,t){return(wi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hO:up).apply(null,arguments)}function A_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function zr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function ho(){this.s=this.s,this.o=this.o}ho.prototype.s=!1,ho.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function JT(n){Object.prototype.hasOwnProperty.call(n,Mw)&&n[Mw]||(n[Mw]=++dO)}(this)},ho.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Aw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function x_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function eD(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(lp(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let l=0;l<o;l++)n[i+l]=r[l]}else n.push(r)}}function Cr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Cr.prototype.h=function(){this.defaultPrevented=!0};var dp=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",()=>{},e),It.removeEventListener("test",()=>{},e)}catch{}return n}();function hp(n){return/^[\s\xa0]*$/.test(n)}function P_(){var n=It.navigator;return n&&(n=n.userAgent)?n:""}function Yo(n){return-1!=P_().indexOf(n)}function O_(n){return O_[" "](n),n}O_[" "]=function(){};var iD,n,nD=Yo("Opera"),Td=Yo("Trident")||Yo("MSIE"),xw=Yo("Edge"),Pw=xw||Td,rD=Yo("Gecko")&&!(-1!=P_().toLowerCase().indexOf("webkit")&&!Yo("Edge"))&&!(Yo("Trident")||Yo("MSIE"))&&!Yo("Edge"),s4=-1!=P_().toLowerCase().indexOf("webkit")&&!Yo("Edge");function fO(){var n=It.document;return n?n.documentMode:void 0}e:{var sD="",k_=(n=P_(),rD?/rv:([^\);]+)(\)|;)/.exec(n):xw?/Edge\/([\d\.]+)/.exec(n):Td?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):s4?/WebKit\/(\S+)/.exec(n):nD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(k_&&(sD=k_?k_[1]:""),Td){var Dd=fO();if(null!=Dd&&Dd>parseFloat(sD)){iD=String(Dd);break e}}iD=sD}var aD=It.document&&Td&&(fO()||parseInt(iD,10))||void 0;function Ia(n,e){if(Cr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(rD){e:{try{O_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:pO[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ia.$.h.call(this)}}zr(Ia,Cr);var pO={2:"touch",3:"pen",4:"mouse"};Ia.prototype.h=function(){Ia.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var fp="closure_listenable_"+(1e6*Math.random()|0),gO=0;function mO(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++gO,this.fa=this.ia=!1}function kw(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Rw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function lD(n){const e={};for(const t in n)e[t]=n[t];return e}const uD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sd(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<uD.length;o++)t=uD[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function R_(n){this.src=n,this.g={},this.h=0}function N_(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=Aw(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(kw(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Nw(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}R_.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var l=Nw(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new mO(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var F_="closure_lm_"+(1e6*Math.random()|0),Fw={};function Lw(n,e,t,r,i){if(r&&r.once)return hD(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Lw(n,e[o],t,r,i);return null}return t=jw(t),n&&n[fp]?n.O(e,t,bd(r)?!!r.capture:!!r,i):dD(n,e,t,!1,r,i)}function dD(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var l=bd(i)?!!i.capture:!!i,f=Vw(n);if(f||(n[F_]=f=new R_(n)),(t=f.add(e,t,r,l,o)).proxy)return t;if(r=function Uw(){const e=_O;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)dp||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(fD(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function hD(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)hD(n,e[o],t,r,i);return null}return t=jw(t),n&&n[fp]?n.P(e,t,bd(r)?!!r.capture:!!r,i):dD(n,e,t,!0,r,i)}function Bw(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Bw(n,e[o],t,r,i);else r=bd(r)?!!r.capture:!!r,t=jw(t),n&&n[fp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Nw(o=n.g[e],t,r,i))&&(kw(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Vw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Nw(e,t,r,i)),(t=-1<n?e[n]:null)&&L_(t))}function L_(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[fp])N_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(fD(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Vw(e))?(N_(t,n),0==t.h&&(t.src=null,e[F_]=null)):kw(n)}}}function fD(n){return n in Fw?Fw[n]:Fw[n]="on"+n}function _O(n,e){if(n.fa)n=!0;else{e=new Ia(e,this);var t=n.listener,r=n.la||n.src;n.ia&&L_(n),n=t.call(r,e)}return n}function Vw(n){return(n=n[F_])instanceof R_?n:null}var pp="__closure_events_fn_"+(1e9*Math.random()>>>0);function jw(n){return"function"==typeof n?n:(n[pp]||(n[pp]=function(e){return n.handleEvent(e)}),n[pp])}function xr(){ho.call(this),this.i=new R_(this),this.S=this,this.J=null}function ai(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Cr(e,n);else if(e instanceof Cr)e.target=e.target||n;else{var i=e;Sd(e=new Cr(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var l=e.g=t[o];i=U_(l,r,!0,e)&&i}if(i=U_(l=e.g=n,r,!0,e)&&i,i=U_(l,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=U_(l=e.g=t[o],r,!1,e)&&i}function U_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.fa&&l.capture==t){var f=l.listener,g=l.la||l.src;l.ia&&N_(n.i,l),i=!1!==f.call(g,r)&&i}}return i&&!r.defaultPrevented}zr(xr,ho),xr.prototype[fp]=!0,xr.prototype.removeEventListener=function(n,e,t,r){Bw(this,n,e,t,r)},xr.prototype.N=function(){if(xr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)kw(t[r]);delete n.g[e],n.h--}}this.J=null},xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var $w=It.JSON.stringify;function vO(){var n=B_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var pD=new class yO{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new wO,n=>n.reset());class wO{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gD(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function mD(n){It.setTimeout(()=>{throw n},0)}let gp,mp=!1,B_=new class CO{constructor(){this.h=this.g=null}add(e,t){const r=pD.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},_D=()=>{const n=It.Promise.resolve(void 0);gp=()=>{n.then(IO)}};var IO=()=>{for(var n;n=vO();){try{n.h.call(n.g)}catch(t){mD(t)}var e=pD;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}mp=!1};function V_(n,e){xr.call(this),this.h=n||1,this.g=e||It,this.j=wi(this.qb,this),this.l=Date.now()}function Hw(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function _p(n,e,t){if("function"==typeof n)t&&(n=wi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wi(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function j_(n){n.g=_p(()=>{n.g=null,n.i&&(n.i=!1,j_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}zr(V_,xr),(Ze=V_.prototype).ga=!1,Ze.T=null,Ze.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ai(this,"tick"),this.ga&&(Hw(this),this.start()))}},Ze.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.N=function(){V_.$.N.call(this),Hw(this),delete this.g};class yD extends ho{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:j_(this)}N(){super.N(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rl(n){ho.call(this),this.h=n,this.g={}}zr(Rl,ho);var vD=[];function CD(n,e,t,r){Array.isArray(t)||(t&&(vD[0]=t.toString()),t=vD);for(var i=0;i<t.length;i++){var o=Lw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function $_(n){Rw(n.g,function(e,t){this.g.hasOwnProperty(t)&&L_(e)},n),n.g={}}function H_(){this.g=!0}function Fl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function o4(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<i.length;l++)i[l]=""}}}return $w(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Rl.prototype.N=function(){Rl.$.N.call(this),$_(this)},Rl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},H_.prototype.Ea=function(){this.g=!1},H_.prototype.info=function(){};var Ea={},z_=null;function G_(){return z_=z_||new xr}function zw(n){Cr.call(this,Ea.Ta,n)}function Md(n){const e=G_();ai(e,new zw(e))}function ID(n,e){Cr.call(this,Ea.STAT_EVENT,n),this.stat=e}function Ii(n){const e=G_();ai(e,new ID(e,n))}function W_(n,e){Cr.call(this,Ea.Ua,n),this.size=e}function Ad(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Ea.Ta="serverreachability",zr(zw,Cr),Ea.STAT_EVENT="statevent",zr(ID,Cr),Ea.Ua="timingevent",zr(W_,Cr);var yp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Gw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function q_(){}function bD(){}q_.prototype.h=null;var TD,vp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ww(){Cr.call(this,"d")}function Z_(){Cr.call(this,"c")}function Cp(){}function wp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Rl(this),this.P=a4,this.V=new V_(n=Pw?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new DD}function DD(){this.i=null,this.g="",this.h=!1}zr(Ww,Cr),zr(Z_,Cr),zr(Cp,q_),Cp.prototype.g=function(){return new XMLHttpRequest},Cp.prototype.i=function(){return{}},TD=new Cp;var a4=45e3,qw={},K_={};function Y_(n,e,t){n.L=1,n.v=bp(ba(e)),n.s=t,n.S=!0,Zw(n,null)}function Zw(n,e){n.G=Date.now(),Ip(n),n.A=ba(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),ND(t.i,"t",r),n.C=0,t=n.l.J,n.h=new DD,n.g=ZD(n.l,t?e:null,!n.s),0<n.O&&(n.M=new yD(wi(n.Pa,n,n.g),n.O)),CD(n.U,n.g,"readystatechange",n.nb),e=n.I?lD(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Md(),function wD(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var l="",f=o.split("&"),g=0;g<f.length;g++){var v=f[g].split("=");if(1<v.length){var E=v[0];v=v[1];var T=E.split("_");l=2<=T.length&&"type"==T[1]?l+(E+"=")+v+"&":l+(E+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Kw(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function SD(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=bO(n,t),i==K_){4==e&&(n.o=4,Ii(14),r=!1),Fl(n.j,n.m,null,"[Incomplete Response]");break}if(i==qw){n.o=4,Ii(15),Fl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Fl(n.j,n.m,i,null),Ul(n,i)}Kw(n)&&i!=K_&&i!=qw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),ay(e),e.M=!0,Ii(11))):(Fl(n.j,n.m,t,"[Invalid Chunked Response]"),Ll(n),Ep(n))}function bO(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?K_:(t=Number(e.substring(t,r)),isNaN(t)?qw:(r+=1)+t>e.length?K_:(e=e.slice(r,r+t),n.C=r+t,e))}function Ip(n){n.Y=Date.now()+n.P,MD(n,n.P)}function MD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ad(wi(n.lb,n),e)}function Q_(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function Ep(n){0==n.l.H||n.J||kO(n.l,n)}function Ll(n){Q_(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Hw(n.V),$_(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Ul(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||ey(t.i,n)))if(!n.K&&ey(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;pI(t),oy(t)}WD(t),Ii(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Ad(wi(t.ib,t),6e3));if(1>=UD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else fo(t,11)}else if((n.K||t.g==n)&&pI(t),!hp(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const E=v[3];null!=E&&(t.ra=E,t.l.info("VER="+t.ra));const T=v[4];null!=T&&(t.Ga=T,t.l.info("SVER="+t.Ga));const M=v[5];null!=M&&"number"==typeof M&&0<M&&(t.L=r=1.5*M,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const R=n.g;if(R){const W=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var o=r.i;o.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(rI(o,o.h),o.h=null))}if(r.F){const Q=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,Sn(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=ly(r,r.J?r.pa:null,r.Y),l.K){BD(r.i,l);var f=l,g=r.L;g&&f.setTimeout(g),f.B&&(Q_(f),Ip(f)),r.g=l}else OO(r);0<t.j.length&&Op(t)}else"stop"!=v[0]&&"close"!=v[0]||fo(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?fo(t,7):sy(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}Md()}catch{}}function Yw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(lp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function xD(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(lp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function AD(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(lp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(Ze=wp.prototype).setTimeout=function(n){this.P=n},Ze.nb=function(n){n=n.target;const e=this.M;e&&3==Fs(n)?e.l():this.Pa(n)},Ze.Pa=function(n){try{if(n==this.g)e:{const E=Fs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>E)&&(3!=E||Pw||this.g&&(this.h.h||this.g.ja()||uI(this.g)))){this.J||4!=E||7==e||Md(),Q_(this);var t=this.g.da();this.ca=t;t:if(Kw(this)){var r=uI(this.g);n="";var i=r.length,o=4==Fs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ll(this),Ep(this);var l="";break t}this.h.i=new It.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function Nl(n,e,t,r,i,o,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.W,E,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,g=this.g;if((f=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hp(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Ii(12),Ll(this),Ep(this);break e}Fl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ul(this,t)}this.S?(SD(this,E,l),Pw&&this.i&&3==E&&(CD(this.U,this.V,"tick",this.mb),this.V.start())):(Fl(this.j,this.m,l,null),Ul(this,l)),4==E&&Ll(this),this.i&&!this.J&&(4==E?kO(this.l,this):(this.i=!1,Ip(this)))}else(function PO(n){const e={};n=(n.g&&2<=Fs(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(hp(n[r]))continue;var t=gD(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function cD(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Ll(this),Ep(this)}}}catch{}},Ze.mb=function(){if(this.g){var n=Fs(this.g),e=this.g.ja();this.C<e.length&&(Q_(this),SD(this,n,e),this.i&&4!=n&&Ip(this))}},Ze.cancel=function(){this.J=!0,Ll(this)},Ze.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function EO(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Md(),Ii(17)),Ll(this),this.o=2,Ep(this)):MD(this,this.Y-n)};var Qw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof yc){this.h=n.h,Jw(this,n.j),this.s=n.s,this.g=n.g,Xw(this,n.m),this.l=n.l;var e=n.i,t=new J_;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),eI(this,t),this.o=n.o}else n&&(e=String(n).match(Qw))?(this.h=!1,Jw(this,e[1]||"",!0),this.s=Tp(e[2]||""),this.g=Tp(e[3]||"",!0),Xw(this,e[4]),this.l=Tp(e[5]||"",!0),eI(this,e[6]||"",!0),this.o=Tp(e[7]||"")):(this.h=!1,this.i=new J_(null,this.h))}function ba(n){return new yc(n)}function Jw(n,e,t){n.j=t?Tp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Xw(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function eI(n,e,t){e instanceof J_?(n.i=e,function FD(n,e){e&&!n.j&&(Ns(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(kD(this,r),ND(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Dp(e,c4)),n.i=new J_(e,n.h))}function Sn(n,e,t){n.i.set(e,t)}function bp(n){return Sn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Tp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Dp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Sp),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Sp(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}yc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Dp(e,OD,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Dp(e,OD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Dp(t,"/"==t.charAt(0)?TO:tI,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Dp(t,DO)),n.join("")};var OD=/[#\/\?@]/g,tI=/[#\?:]/g,TO=/[#\?]/g,c4=/[#\?@]/g,DO=/#/g;function J_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ns(n){n.g||(n.g=new Map,n.h=0,n.i&&function PD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function kD(n,e){Ns(n),e=Ta(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function RD(n,e){return Ns(n),e=Ta(n,e),n.g.has(e)}function ND(n,e,t){kD(n,e),0<t.length&&(n.i=null,n.g.set(Ta(n,e),x_(t)),n.h+=t.length)}function Ta(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function nI(n){this.l=n||X_,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ka&&It.g.Ka()&&It.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=J_.prototype).add=function(n,e){Ns(this),this.i=null,n=Ta(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){Ns(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ze.ta=function(){Ns(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},Ze.Z=function(n){Ns(this);let e=[];if("string"==typeof n)RD(this,n)&&(e=e.concat(this.g.get(Ta(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ze.set=function(n,e){return Ns(this),this.i=null,RD(this,n=Ta(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=o;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var X_=10;function LD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function UD(n){return n.h?1:n.g?n.g.size:0}function ey(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function rI(n,e){n.g?n.g.add(e):n.h=e}function BD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function iI(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return x_(n.i)}nI.prototype.cancel=function(){if(this.i=iI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var ty=class{stringify(n){return It.JSON.stringify(n,void 0)}parse(n){return It.JSON.parse(n,void 0)}};function MO(){this.g=new ty}function AO(n,e,t){const r=t||"";try{Yw(n,function(i,o){let l=i;bd(i)&&(l=$w(i)),e.push(r+o+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Mp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Bl(n){this.l=n.fc||null,this.j=n.ob||!1}function Ap(n,e){xr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=sI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zr(Bl,q_),Bl.prototype.g=function(){return new Ap(this.l,this.j)},Bl.prototype.i=function(n){return function(){return n}}({}),zr(Ap,xr);var sI=0;function oI(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function xd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,xp(n)}function xp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=Ap.prototype).open=function(n,e){if(this.readyState!=sI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,xp(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||It).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xd(this)),this.readyState=sI},Ze.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,xp(this)),this.g&&(this.readyState=3,xp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof It.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oI(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ze.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xd(this):xp(this),3==this.readyState&&oI(this)}},Ze.Za=function(n){this.g&&(this.response=this.responseText=n,xd(this))},Ze.Ya=function(n){this.g&&(this.response=n,xd(this))},Ze.ka=function(){this.g&&xd(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ap.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xO=It.JSON.parse;function Fn(n){xr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ny,this.L=this.M=!1}zr(Fn,xr);var ny="",jD=/^https?$/i,aI=["POST","PUT"];function $D(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,HD(n),ry(n)}function HD(n){n.F||(n.F=!0,ai(n,"complete"),ai(n,"error"))}function zD(n){if(n.h&&typeof Sw<"u"&&(!n.C[1]||4!=Fs(n)||2!=n.da()))if(n.v&&4==Fs(n))_p(n.La,0,n);else if(ai(n,"readystatechange"),4==Fs(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(Qw)[1]||null;!i&&It.self&&It.self.location&&(i=It.self.location.protocol.slice(0,-1)),r=!jD.test(i?i.toLowerCase():"")}t=r}if(t)ai(n,"complete"),ai(n,"success");else{n.m=6;try{var o=2<Fs(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",HD(n)}}finally{ry(n)}}}function ry(n,e){if(n.g){lI(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ai(n,"ready");try{t.onreadystatechange=r}catch{}}}function lI(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function Fs(n){return n.g?n.g.readyState:0}function uI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case ny:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function dI(n){let e="";return Rw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function iy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=dI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Sn(n,e,t))}function Pp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hI(n){this.Ga=0,this.j=[],this.l=new H_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pp("baseRetryDelayMs",5e3,n),this.hb=Pp("retryDelaySeedMs",1e4,n),this.eb=Pp("forwardChannelMaxRetries",2,n),this.xa=Pp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new nI(n&&n.concurrentRequestLimit),this.Ja=new MO,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function sy(n){if(fI(n),3==n.H){var e=n.W++,t=ba(n.I);if(Sn(t,"SID",n.K),Sn(t,"RID",e),Sn(t,"TYPE","terminate"),kp(n,t),(e=new wp(n,n.l,e)).L=2,e.v=bp(ba(t)),t=!1,It.navigator&&It.navigator.sendBeacon)try{t=It.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=ZD(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ip(e)}qD(n)}function oy(n){n.g&&(ay(n),n.g.cancel(),n.g=null)}function fI(n){oy(n),n.u&&(It.clearTimeout(n.u),n.u=null),pI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function Op(n){if(!LD(n.i)&&!n.m){n.m=!0;var e=n.Na;gp||_D(),mp||(gp(),mp=!0),B_.add(e,n),n.C=0}}function Vl(n,e){var t;t=e?e.m:n.W++;const r=ba(n.I);Sn(r,"SID",n.K),Sn(r,"RID",t),Sn(r,"AID",n.V),kp(n,r),n.o&&n.s&&iy(r,n.o,n.s),t=new wp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=GD(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),rI(n.i,t),Y_(t,r,e)}function kp(n,e){n.na&&Rw(n.na,function(t,r){Sn(e,r,t)}),n.h&&Yw({},function(t,r){Sn(e,r,t)})}function GD(n,e,t){t=Math.min(n.j.length,t);var r=n.h?wi(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const l=["count="+t];-1==o?0<t?(o=i[0].g,l.push("ofs="+o)):o=0:l.push("ofs="+o);let f=!0;for(let g=0;g<t;g++){let v=i[g].g;const E=i[g].map;if(v-=o,0>v)o=Math.max(0,i[g].g-100),f=!1;else try{AO(E,l,"req"+v+"_")}catch{r&&r(E)}}if(f){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function OO(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;gp||_D(),mp||(gp(),mp=!0),B_.add(e,n),n.A=0}}function WD(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Ad(wi(n.Ma,n),RO(n,n.A)),n.A++,0))}function ay(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function cy(n){n.g=new wp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ba(n.wa);Sn(e,"RID","rpc"),Sn(e,"SID",n.K),Sn(e,"AID",n.V),Sn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Sn(e,"TO",n.qa),Sn(e,"TYPE","xmlhttp"),kp(n,e),n.o&&n.s&&iy(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=bp(ba(e)),t.s=null,t.S=!0,Zw(t,n)}function pI(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function kO(n,e){var t=null;if(n.g==e){pI(n),ay(n),n.g=null;var r=2}else{if(!ey(n.i,e))return;t=e.F,BD(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;ai(r=G_(),new W_(r,t)),Op(n)}else OO(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Fi(n,e){return!(UD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Ad(wi(n.Na,n,e),RO(n,n.C)),n.C++,0)))}(n,e)||2==r&&WD(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:fo(n,5);break;case 4:fo(n,10);break;case 3:fo(n,6);break;default:fo(n,2)}}function RO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function fo(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=wi(n.pb,n);t||(t=new yc("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Jw(t,"https"),bp(t)),function VD(n,e){const t=new H_;if(It.Image){const r=new Image;r.onload=A_(Mp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=A_(Mp,t,r,"TestLoadImage: error",!1,e),r.onabort=A_(Mp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=A_(Mp,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.H=0,n.h&&n.h.za(e),qD(n),fI(n)}function qD(n){if(n.H=0,n.ma=[],n.h){const e=iI(n.i);(0!=e.length||0!=n.j.length)&&(eD(n.ma,e),eD(n.ma,n.j),n.i.i.length=0,x_(n.j),n.j.length=0),n.h.ya()}}function ly(n,e,t){var r=t instanceof yc?ba(t):new yc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Xw(r,r.m);else{var i=It.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new yc(null);r&&Jw(o,r),e&&(o.g=e),i&&Xw(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&Sn(r,t,e),Sn(r,"VER",n.ra),kp(n,r),r}function ZD(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Fn(t&&n.Ha&&!n.va?new Bl({ob:!0}):n.va)).Oa(n.J),e}function gI(){}function uy(){if(Td&&!(10<=Number(aD)))throw Error("Environmental error: no available transport.")}function ds(n,e){xr.call(this),this.g=new hI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!hp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hp(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new jl(this)}function KD(n){Ww.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function dy(){Z_.call(this),this.status=1}function jl(n){this.g=n}function Xi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Rp(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],l=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;l=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(l<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((o=(e=t+((l=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=o+((l=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function gn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(Ze=Fn.prototype).Oa=function(n){this.M=n},Ze.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():TD.g(),this.C=function ED(n){return n.h||(n.h=n.i())}(this.u?this.u:TD),this.g.onreadystatechange=wi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void $D(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=It.FormData&&n instanceof It.FormData,!(0<=Aw(aI,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of t)this.g.setRequestHeader(o,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{lI(this),0<this.B&&((this.L=function cI(n){return Td&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wi(this.ua,this)):this.A=_p(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){$D(this,o)}},Ze.ua=function(){typeof Sw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ai(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ai(this,"complete"),ai(this,"abort"),ry(this))},Ze.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ry(this,!0)),Fn.$.N.call(this)},Ze.La=function(){this.s||(this.G||this.v||this.l?zD(this):this.kb())},Ze.kb=function(){zD(this)},Ze.isActive=function(){return!!this.g},Ze.da=function(){try{return 2<Fs(this)?this.g.status:-1}catch{return-1}},Ze.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ze.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),xO(e)}},Ze.Ia=function(){return this.m},Ze.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=hI.prototype).ra=8,Ze.H=1,Ze.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new wp(this,this.l,n);let o=this.s;if(this.U&&(o?(o=lD(o),Sd(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=GD(this,i,e),Sn(t=ba(this.I),"RID",n),Sn(t,"CVER",22),this.F&&Sn(t,"X-HTTP-Session-Id",this.F),kp(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(dI(o)))+"&"+e:this.o&&iy(t,this.o,o)),rI(this.i,i),this.bb&&Sn(t,"TYPE","init"),this.P?(Sn(t,"$req",e),Sn(t,"SID","null"),i.aa=!0,Y_(i,t,null)):Y_(i,t,e),this.H=2}}else 3==this.H&&(n?Vl(this,n):0==this.j.length||LD(this.i)||Vl(this))},Ze.Ma=function(){if(this.u=null,cy(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Ad(wi(this.jb,this),n)}},Ze.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ii(10),oy(this),cy(this))},Ze.ib=function(){null!=this.v&&(this.v=null,oy(this),WD(this),Ii(19))},Ze.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ii(2)):(this.l.info("Failed to ping google.com"),Ii(1))},Ze.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ze=gI.prototype).Ba=function(){},Ze.Aa=function(){},Ze.za=function(){},Ze.ya=function(){},Ze.isActive=function(){return!0},Ze.Va=function(){},uy.prototype.g=function(n,e){return new ds(n,e)},zr(ds,xr),ds.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ii(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=ly(n,null,n.Y),Op(n)},ds.prototype.close=function(){sy(this.g)},ds.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=$w(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Op(e)},ds.prototype.N=function(){this.g.h=null,delete this.j,sy(this.g),delete this.g,ds.$.N.call(this)},zr(KD,Ww),zr(dy,Z_),zr(jl,gI),jl.prototype.Ba=function(){ai(this.g,"a")},jl.prototype.Aa=function(n){ai(this.g,new KD(n))},jl.prototype.za=function(n){ai(this.g,new dy)},jl.prototype.ya=function(){ai(this.g,"b")},zr(Xi,function NO(){this.blockSize=-1}),Xi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Xi.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)Rp(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){Rp(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){Rp(this,r),i=0;break}}this.h=i,this.i+=e},Xi.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var YD={};function mI(n){return-128<=n&&128>n?function tD(n,e){var t=YD;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new gn([0|e],0>e?-1:0)}):new gn([0|n],0>n?-1:0)}function po(n){if(isNaN(n)||!isFinite(n))return Hl;if(0>n)return ci(po(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=_I;return new gn(e,0)}var _I=4294967296,Hl=mI(0),Np=mI(1),FO=mI(16777216);function Da(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function go(n){return-1==n.h}function ci(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new gn(t,~n.h).add(Np)}function hy(n,e){return n.add(ci(e))}function fy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Pd(n,e){this.g=n,this.h=e}function Fp(n,e){if(Da(e))throw Error("division by zero");if(Da(n))return new Pd(Hl,Hl);if(go(n))return e=Fp(ci(n),e),new Pd(ci(e.g),ci(e.h));if(go(e))return e=Fp(n,ci(e)),new Pd(ci(e.g),e.h);if(30<n.g.length){if(go(n)||go(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Np,r=e;0>=r.X(n);)t=QD(t),r=QD(r);var i=zl(t,1),o=zl(r,1);for(r=zl(r,2),t=zl(t,2);!Da(r);){var l=o.add(r);0>=l.X(n)&&(i=i.add(t),o=l),r=zl(r,1),t=zl(t,1)}return e=hy(n,i.R(e)),new Pd(i,e)}for(i=Hl;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(o=po(t)).R(e);go(l)||0<l.X(n);)l=(o=po(t-=r)).R(e);Da(o)&&(o=Np),i=i.add(o),n=hy(n,l)}return new Pd(i,n)}function QD(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new gn(t,n.h)}function zl(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new gn(i,n.h)}(Ze=gn.prototype).ea=function(){if(go(this))return-ci(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:_I+r)*e,e*=_I}return n},Ze.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Da(this))return"0";if(go(this))return"-"+ci(this).toString(n);for(var e=po(Math.pow(n,6)),t=this,r="";;){var i=Fp(t,e).g,o=((0<(t=hy(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Da(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Ze.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ze.X=function(n){return go(n=hy(this,n))?-1:Da(n)?0:1},Ze.abs=function(){return go(this)?ci(this):this},Ze.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),l=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(o&=65535)}return new gn(t,-2147483648&t[t.length-1]?-1:0)},Ze.R=function(n){if(Da(this)||Da(n))return Hl;if(go(this))return go(n)?ci(this).R(ci(n)):ci(ci(this).R(n));if(go(n))return ci(this.R(ci(n)));if(0>this.X(FO)&&0>n.X(FO))return po(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,l=65535&this.D(r),f=n.D(i)>>>16,g=65535&n.D(i);t[2*r+2*i]+=l*g,fy(t,2*r+2*i),t[2*r+2*i+1]+=o*g,fy(t,2*r+2*i+1),t[2*r+2*i+1]+=l*f,fy(t,2*r+2*i+1),t[2*r+2*i+2]+=o*f,fy(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new gn(t,0)},Ze.gb=function(n){return Fp(this,n).h},Ze.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new gn(t,this.h&n.h)},Ze.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new gn(t,this.h|n.h)},Ze.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new gn(t,this.h^n.h)},uy.prototype.createWebChannel=uy.prototype.g,ds.prototype.send=ds.prototype.u,ds.prototype.open=ds.prototype.m,ds.prototype.close=ds.prototype.close,yp.NO_ERROR=0,yp.TIMEOUT=8,yp.HTTP_ERROR=6,Gw.COMPLETE="complete",bD.EventType=vp,vp.OPEN="a",vp.CLOSE="b",vp.ERROR="c",vp.MESSAGE="d",xr.prototype.listen=xr.prototype.O,Fn.prototype.listenOnce=Fn.prototype.P,Fn.prototype.getLastError=Fn.prototype.Sa,Fn.prototype.getLastErrorCode=Fn.prototype.Ia,Fn.prototype.getStatus=Fn.prototype.da,Fn.prototype.getResponseJson=Fn.prototype.Wa,Fn.prototype.getResponseText=Fn.prototype.ja,Fn.prototype.send=Fn.prototype.ha,Fn.prototype.setWithCredentials=Fn.prototype.Oa,Xi.prototype.digest=Xi.prototype.l,Xi.prototype.reset=Xi.prototype.reset,Xi.prototype.update=Xi.prototype.j,gn.prototype.add=gn.prototype.add,gn.prototype.multiply=gn.prototype.R,gn.prototype.modulo=gn.prototype.gb,gn.prototype.compare=gn.prototype.X,gn.prototype.toNumber=gn.prototype.ea,gn.prototype.toString=gn.prototype.toString,gn.prototype.getBits=gn.prototype.D,gn.fromNumber=po,gn.fromString=function $l(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ci($l(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=po(Math.pow(e,8)),r=Hl,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+o),e);8>o?(o=po(Math.pow(e,o)),r=r.R(o).add(po(l))):r=(r=r.R(t)).add(po(l))}return r};var JD=Rs.createWebChannelTransport=function(){return new uy},LO=Rs.getStatEventTarget=function(){return G_()},yI=Rs.ErrorCode=yp,XD=Rs.EventType=Gw,UO=Rs.Event=Ea,vI=Rs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},eS=Rs.FetchXmlHttpFactory=Bl,Lp=Rs.WebChannel=bD,tS=Rs.XhrIo=Fn,BO=Rs.Md5=Xi,Od=Rs.Integer=gn;const VO="@firebase/firestore";class Pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let Up="9.23.0";const Gl=new ki.Yd("@firebase/firestore");function nS(){return Gl.logLevel}function Ae(n,...e){if(Gl.logLevel<=ki.in.DEBUG){const t=e.map(rS);Gl.debug(`Firestore (${Up}): ${n}`,...t)}}function wr(n,...e){if(Gl.logLevel<=ki.in.ERROR){const t=e.map(rS);Gl.error(`Firestore (${Up}): ${n}`,...t)}}function mo(n,...e){if(Gl.logLevel<=ki.in.WARN){const t=e.map(rS);Gl.warn(`Firestore (${Up}): ${n}`,...t)}}function rS(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${Up}) INTERNAL ASSERTION FAILED: `+n;throw wr(e),new Error(e)}function rt(n,e){n||et()}function qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class jO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class u4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pr.UNAUTHENTICATED))}shutdown(){}}class $O{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iS{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Or,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const v=l;e.enqueueRetryable((0,U.Z)(function*(){yield v.promise,yield o(r.currentUser)}))},g=v=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Or)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt("string"==typeof r.accessToken),new jO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(null===e||"string"==typeof e),new Pr(e)}}class HO{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class zO{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new HO(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d4{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.T;return this.T=o.token,Ae("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rt("string"==typeof t.token),this.T=t.token,new sS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Bp(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Vp{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Bp(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function Et(n,e){return n<e?-1:n>e?1:0}function kd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function oS(n){return n+"\0"}class Ln{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ln(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class at{constructor(e){this.timestamp=e}static fromTimestamp(e){return new at(e)}static min(){return new at(new Ln(0,0))}static max(){return new at(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class jp{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===jp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),l=t.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wt extends jp{construct(e,t,r){return new Wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Wt(t)}static emptyPath(){return new Wt([])}}const GO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tr extends jp{construct(e,t,r){return new tr(e,t,r)}static isValidIdentifier(e){return GO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new ye(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new ye(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new ye(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(o(),i++)}if(o(),l)throw new ye(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tr(t)}static emptyPath(){return new tr([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(Wt.fromString(e))}static fromName(e){return new We(Wt.fromString(e).popFirst(5))}static empty(){return new We(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Wt(e.slice()))}}class py{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function wI(n){return n.fields.find(e=>2===e.kind)}function Wl(n){return n.fields.filter(e=>2!==e.kind)}py.UNKNOWN_ID=-1;class gy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Rd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Rd(0,hs.min())}}function my(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=at.fromTimestamp(1e9===r?new Ln(t+1,0):new Ln(t,r));return new hs(i,We.empty(),e)}function aS(n){return new hs(n.readTime,n.key,-1)}class hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hs(at.min(),We.empty(),-1)}static max(){return new hs(at.max(),We.empty(),-1)}}function _y(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Et(n.largestBatchId,e.largestBatchId))}const II="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ur(n){return yy.apply(this,arguments)}function yy(){return yy=(0,U.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==II)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}),yy.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let i=0,o=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++o,l&&o===i&&t()},g=>r(g))}),l=!0,o===i&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(i=>i?te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new te((r,i)=>{const o=e.length,l=new Array(o);let f=0;for(let g=0;g<o;g++){const v=g;t(e[v]).next(E=>{l[v]=E,++f,f===o&&r(l)},E=>i(E))}})}static doWhile(e,t){return new te((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class vy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Or,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new ql(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=EI(r.target.error);this.v.reject(new ql(e,i))}}static open(e,t,r,i){try{return new vy(t,e.transaction(i,r))}catch(o){throw new ql(t,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cS(t)}}class Ls{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Ls.S((0,z.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ae("SimpleDb","Removing database:",e),Sa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,z.hl)())return!1;if(Ls.C())return!0;const e=(0,z.z$)(),t=Ls.S(e),r=0<t&&t<10,i=Ls.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,U.Z)(function*(){return t.db||(Ae("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=l=>{r(l.target.result)},o.onblocked=()=>{i(new ql(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new ye(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new ye(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new ql(e,f))},o.onupgradeneeded=l=>{Ae("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,o.transaction,l.oldVersion,t.version).next(()=>{Ae("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,U.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{o.db=yield o.$(e);const g=vy.open(o.db,e,l?"readonly":"readwrite",r),v=i(g).next(E=>(g.P(),E)).catch(E=>(g.abort(E),te.reject(E))).toPromise();return v.catch(()=>{}),yield g.R,v}catch(g){const v=g,E="FirebaseError"!==v.name&&f<3;if(Ae("SimpleDb","Transaction failed with error:",v.message,"Retrying:",E),o.close(),!E)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class KO{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Sa(this.L.delete())}}class ql extends ye{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Li(n){return"IndexedDbTransactionError"===n.name}class cS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ae("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Sa(r)}add(e){return Ae("SimpleDb","ADD",this.store.name,e,e),Sa(this.store.add(e))}get(e){return Sa(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ae("SimpleDb","DELETE",this.store.name,e),Sa(this.store.delete(e))}count(){return Ae("SimpleDb","COUNT",this.store.name),Sa(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(l,f)=>{o.push(f)}).next(()=>o)}{const i=this.store.getAll(r.range);return new te((o,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{o(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Ae("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,l,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new te((r,i)=>{t.onerror=o=>{const l=EI(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}W(e,t){const r=[];return new te((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const g=new KO(f),v=t(f.primaryKey,f.value,g);if(v instanceof te){const E=v.catch(T=>(g.done(),te.reject(T)));r.push(E)}g.isDone?i():null===g.K?f.continue():f.continue(g.K)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Sa(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=EI(r.target.error);t(i)}})}let Cy=!1;function EI(n){const e=Ls.S((0,z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Cy||(Cy=!0,setTimeout(()=>{throw r},0)),r}}return n}class f4{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ae("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,U.Z)(function*(){t.task=null;try{Ae("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Li(r)?Ae("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ur(r)}yield t.et(6e4)}))}}class lS{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,U.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return te.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ae("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(f=>{i-=f,r.add(l)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,o)).next(f=>(Ae("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const l=aS(o);_y(l,r)>0&&(r=l)}),new hs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let fs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function $p(n){return null==n}function Hp(n){return 0===n&&1/n==-1/0}function uS(n){return"number"==typeof n&&Number.isInteger(n)&&!Hp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bI(e)),e=p4(n.get(t),e);return bI(e)}function p4(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function bI(n){return n+"\x01\x01"}function Qo(n){const e=n.length;if(rt(e>=2),2===e)return rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Wt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf("\x01",o);switch((l<0||l>t)&&et(),n.charAt(l+1)){case"\x01":const f=n.substring(o,l);let g;0===i.length?g=f:(i+=f,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(o,l),i+="\0";break;case"\x11":i+=n.substring(o,l+1);break;default:et()}o=l+2}return new Wt(r)}const TI=["userId","batchId"];function DI(n,e){return[n,li(e)]}function wy(n,e,t){return[n,li(e),t]}const dS={},hS=["prefixPath","collectionGroup","readTime","documentId"],YO=["prefixPath","collectionGroup","documentId"],fS=["collectionGroup","readTime","prefixPath","documentId"],pS=["canonicalId","targetId"],Nd=["targetId","path"],Iy=["path","targetId"],gS=["collectionId","parent"],mS=["indexId","uid"],QO=["uid","sequenceNumber"],JO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],g4=["indexId","uid","orderedDocumentKey"],_S=["userId","collectionPath","documentId"],XO=["userId","collectionPath","largestBatchId"],ek=["userId","collectionGroup","largestBatchId"],tk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],m4=[...tk,"documentOverlays"],nk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SI=nk,rk=[...SI,"indexConfiguration","indexState","indexEntries"];class MI extends ZO{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Gr(n,e){const t=qe(n);return Ls.M(t.ht,e)}function ik(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Mn{constructor(e,t){this.comparator=e,this.root=t||ui.EMPTY}insert(e,t){return new Mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new AI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new AI(this.root,e,this.comparator,!1)}getReverseIterator(){return new AI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new AI(this.root,e,this.comparator,!0)}}class AI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??ui.RED,this.left=i??ui.EMPTY,this.right=o??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ui(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ui.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1,ui.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ui(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yS(this.data.getIterator())}getIteratorFrom(e){return new yS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class yS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fd(n){return n.hasNext()?n.getNext():void 0}class Ui{constructor(e){this.fields=e,e.sort(tr.comparator)}static empty(){return new Ui([])}unionWith(e){let t=new mn(tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ui(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class vc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vc("Invalid base64 string: "+i):i}}(e);return new dr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const xI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cc(n){if(rt(!!n),"string"==typeof n){let e=0;const t=xI.exec(n);if(rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Un(n.seconds),nanos:Un(n.nanos)}}function Un(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function _o(n){return"string"==typeof n?dr.fromBase64String(n):dr.fromUint8Array(n)}function Kl(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function PI(n){const e=n.mapValue.fields.__previous_value__;return Kl(e)?PI(e):e}function Ey(n){const e=Cc(n.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}class _4{constructor(e,t,r,i,o,l,f,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v}}class Ma{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ma("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ma&&e.projectId===this.projectId&&e.database===this.database}}const wc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},by={nullValue:"NULL_VALUE"};function Ic(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kl(n)?4:ok(n)?9007199254740991:10:et()}function Jo(n,e){if(n===e)return!0;const t=Ic(n);if(t!==Ic(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ey(n).isEqual(Ey(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Cc(r.timestampValue),l=Cc(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,_o(n.bytesValue).isEqual(_o(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Un(r.geoPointValue.latitude)===Un(i.geoPointValue.latitude)&&Un(r.geoPointValue.longitude)===Un(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Un(r.integerValue)===Un(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Un(r.doubleValue),l=Un(i.doubleValue);return o===l?Hp(o)===Hp(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return kd(n.arrayValue.values||[],e.arrayValue.values||[],Jo);case 10:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(ik(o)!==ik(l))return!1;for(const f in o)if(o.hasOwnProperty(f)&&(void 0===l[f]||!Jo(o[f],l[f])))return!1;return!0}(n,e);default:return et()}var i}function Ld(n,e){return void 0!==(n.values||[]).find(t=>Jo(t,e))}function Aa(n,e){if(n===e)return 0;const t=Ic(n),r=Ic(e);if(t!==r)return Et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Et(n.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Un(i.integerValue||i.doubleValue),f=Un(o.integerValue||o.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return OI(n.timestampValue,e.timestampValue);case 4:return OI(Ey(n),Ey(e));case 5:return Et(n.stringValue,e.stringValue);case 6:return function(i,o){const l=_o(i),f=_o(o);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),f=o.split("/");for(let g=0;g<l.length&&g<f.length;g++){const v=Et(l[g],f[g]);if(0!==v)return v}return Et(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Et(Un(i.latitude),Un(o.latitude));return 0!==l?l:Et(Un(i.longitude),Un(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const l=i.values||[],f=o.values||[];for(let g=0;g<l.length&&g<f.length;++g){const v=Aa(l[g],f[g]);if(v)return v}return Et(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===wc.mapValue&&o===wc.mapValue)return 0;if(i===wc.mapValue)return 1;if(o===wc.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),g=o.fields||{},v=Object.keys(g);f.sort(),v.sort();for(let E=0;E<f.length&&E<v.length;++E){const T=Et(f[E],v[E]);if(0!==T)return T;const M=Aa(l[f[E]],g[v[E]]);if(0!==M)return M}return Et(f.length,v.length)}(n.mapValue,e.mapValue);default:throw et()}}function OI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Et(n,e);const t=Cc(n),r=Cc(e),i=Et(t.seconds,r.seconds);return 0!==i?i:Et(t.nanos,r.nanos)}function Ud(n){return kI(n)}function kI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Cc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?_o(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const l of r.values||[])o?o=!1:i+=",",i+=kI(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",l=!0;for(const f of i)l?l=!1:o+=",",o+=`${f}:${kI(r.fields[f])}`;return o+"}"}(n.mapValue):et();var e}function xa(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function CS(n){return!!n&&"integerValue"in n}function Bd(n){return!!n&&"arrayValue"in n}function Ty(n){return!!n&&"nullValue"in n}function wS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dy(n){return!!n&&"mapValue"in n}function Sy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Sy(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sy(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ok(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ak(n){return"nullValue"in n?by:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xa(Ma.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function ck(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xa(Ma.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?wc:et()}function IS(n,e){const t=Aa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ES(n,e){const t=Aa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Wr{constructor(e){this.value=e}static empty(){return new Wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Dy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sy(t)}setAll(e){let t=tr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=Sy(l):i.push(f.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Dy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Dy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zl(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Wr(Sy(this.value))}}function RI(n){const e=[];return Zl(n.fields,(t,r)=>{const i=new tr([t]);if(Dy(r)){const o=RI(r.mapValue).fields;if(0===o.length)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new Ui(e)}class An{constructor(e,t,r,i,o,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=f}static newInvalidDocument(e){return new An(e,0,at.min(),at.min(),at.min(),Wr.empty(),0)}static newFoundDocument(e,t,r,i){return new An(e,1,t,at.min(),r,i,0)}static newNoDocument(e,t){return new An(e,2,t,at.min(),at.min(),Wr.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,at.min(),at.min(),Wr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(at.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pa{constructor(e,t){this.position=e,this.inclusive=t}}function NI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(r=o.field.isKeyField()?We.comparator(We.fromName(l.referenceValue),t.key):Aa(l,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function lk(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jo(n.position[t],e.position[t]))return!1;return!0}class Vd{constructor(e,t="asc"){this.field=e,this.dir=t}}function FI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class LI{}class $t extends LI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new hk(e,t,r):"array-contains"===t?new fk(e,r):"in"===t?new pk(e,r):"not-in"===t?new C4(e,r):"array-contains-any"===t?new w4(e,r):new $t(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new y4(e,r):new v4(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Aa(t,this.value)):null!==t&&Ic(this.value)===Ic(t)&&this.matchesComparison(Aa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class dn extends LI{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new dn(e,t)}matches(e){return Oa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Oa(n){return"and"===n.op}function UI(n){return"or"===n.op}function BI(n){return VI(n)&&Oa(n)}function VI(n){for(const e of n.filters)if(e instanceof dn)return!1;return!0}function My(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+Ud(n.value);if(BI(n))return n.filters.map(e=>My(e)).join(",");{const e=n.filters.map(t=>My(t)).join(",");return`${n.op}(${e})`}}function uk(n,e){return n instanceof $t?(t=n,(r=e)instanceof $t&&t.op===r.op&&t.field.isEqual(r.field)&&Jo(t.value,r.value)):n instanceof dn?function(t,r){return r instanceof dn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,l)=>i&&uk(o,r.filters[l]),!0)}(n,e):void et();var t,r}function bS(n,e){const t=n.filters.concat(e);return dn.create(t,n.op)}function dk(n){return n instanceof $t?`${(e=n).field.canonicalString()} ${e.op} ${Ud(e.value)}`:n instanceof dn?function(e){return e.op.toString()+" {"+e.getFilters().map(dk).join(" ,")+"}"}(n):"Filter";var e}class hk extends $t{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class y4 extends $t{constructor(e,t){super(e,"in",t),this.keys=TS(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class v4 extends $t{constructor(e,t){super(e,"not-in",t),this.keys=TS(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function TS(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class fk extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bd(t)&&Ld(t.arrayValue,this.value)}}class pk extends $t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ld(this.value.arrayValue,t)}}class C4 extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ld(this.value.arrayValue,t)}}class w4 extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ld(this.value.arrayValue,r))}}class I4{constructor(e,t=null,r=[],i=[],o=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=f,this.dt=null}}function DS(n,e=null,t=[],r=[],i=null,o=null,l=null){return new I4(n,e,t,r,i,o,l)}function Yl(n){const e=qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>My(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),$p(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ud(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ud(r)).join(",")),e.dt=t}return e.dt}function Ay(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!uk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lk(n.startAt,e.startAt)&&lk(n.endAt,e.endAt)}function jI(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $I(n,e){return n.filters.filter(t=>t instanceof $t&&t.field.isEqual(e))}function gk(n,e,t){let r=by,i=!0;for(const o of $I(n,e)){let l=by,f=!0;switch(o.op){case"<":case"<=":l=ak(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,f=!1;break;case"!=":case"not-in":l=by}IS({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];IS({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function mk(n,e,t){let r=wc,i=!0;for(const o of $I(n,e)){let l=wc,f=!0;switch(o.op){case">=":case">":l=ck(o.value),f=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,f=!1;break;case"!=":case"not-in":l=wc}ES({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];ES({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class ka{constructor(e,t=null,r=[],i=[],o=null,l="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=f,this.endAt=g,this.wt=null,this._t=null}}function _k(n,e,t,r,i,o,l,f){return new ka(n,e,t,r,i,o,l,f)}function s(n){return new ka(n)}function a(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function c(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function d(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function h(n){return null!==n.collectionGroup}function p(n){const e=qe(n);if(null===e.wt){e.wt=[];const t=d(e),r=c(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Vd(t)),e.wt.push(new Vd(tr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Vd(tr.keyField(),o))}}}return e.wt}function y(n){const e=qe(n);if(!e._t)if("F"===e.limitType)e._t=DS(e.path,e.collectionGroup,p(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of p(e))t.push(new Vd(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new Pa(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Pa(e.startAt.position,e.startAt.inclusive):null;e._t=DS(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function C(n,e){e.getFirstInequalityField(),d(n);const t=n.filters.concat([e]);return new ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function b(n,e,t){return new ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function D(n,e){return Ay(y(n),y(e))&&n.limitType===e.limitType}function A(n){return`${Yl(y(n))}|lt:${n.limitType}`}function N(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>dk(r)).join(", ")}]`),$p(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ud(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ud(r)).join(",")),`Target(${t})`}(y(n))}; limitType=${n.limitType})`}function q(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of p(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,l){const f=NI(i,o,l);return i.inclusive?f<=0:f<0}(t.startAt,p(t),r)||t.endAt&&!function(i,o,l){const f=NI(i,o,l);return i.inclusive?f>=0:f>0}(t.endAt,p(t),r)));var t,r}function Y(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ue(n){return(e,t)=>{let r=!1;for(const i of p(n)){const o=Me(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Me(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,o,l){const f=o.data.field(i),g=l.data.field(i);return null!==f&&null!==g?Aa(f,g):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}class $e{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zl(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return sk(this.inner)}size(){return this.innerSize}}const ct=new Mn(We.comparator);function fe(){return ct}const vt=new Mn(We.comparator);function Mt(...n){let e=vt;for(const t of n)e=e.insert(t.key,t);return e}function cn(n){let e=vt;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Kn(){return ea()}function Xo(){return ea()}function ea(){return new $e(n=>n.toString(),(n,e)=>n.isEqual(e))}const HI=new Mn(We.comparator),yk=new mn(We.comparator);function Pt(...n){let e=yk;for(const t of n)e=e.add(t);return e}const Uj=new mn(Et);function vk(){return Uj}function E4(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hp(e)?"-0":e}}function b4(n){return{integerValue:""+n}}function T4(n,e){return uS(e)?b4(e):E4(n,e)}class SS{constructor(){this._=void 0}}function Bj(n,e,t){return n instanceof xy?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Kl(i)&&(i=PI(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Gp?S4(n,e):n instanceof Wp?M4(n,e):function(r,i){const o=D4(r,i),l=A4(o)+A4(r.gt);return CS(o)&&CS(r.gt)?b4(l):E4(r.serializer,l)}(n,e)}function Vj(n,e,t){return n instanceof Gp?S4(n,e):n instanceof Wp?M4(n,e):t}function D4(n,e){return n instanceof Py?CS(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class xy extends SS{}class Gp extends SS{constructor(e){super(),this.elements=e}}function S4(n,e){const t=x4(e);for(const r of n.elements)t.some(i=>Jo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Wp extends SS{constructor(e){super(),this.elements=e}}function M4(n,e){let t=x4(e);for(const r of n.elements)t=t.filter(i=>!Jo(i,r));return{arrayValue:{values:t}}}class Py extends SS{constructor(e,t){super(),this.serializer=e,this.gt=t}}function A4(n){return Un(n.integerValue||n.doubleValue)}function x4(n){return Bd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zI{constructor(e,t){this.field=e,this.transform=t}}class $j{constructor(e,t){this.version=e,this.transformResults=t}}class nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function MS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class AS{}function P4(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ky(n.key,nr.none()):new Oy(n.key,n.data,nr.none());{const t=n.data,r=Wr.empty();let i=new mn(tr.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);null===l&&o.length>1&&(o=o.popLast(),l=t.field(o)),null===l?r.delete(o):r.set(o,l),i=i.add(o)}return new Ql(n.key,r,new Ui(i.toArray()),nr.none())}}function Hj(n,e,t){n instanceof Oy?function(r,i,o){const l=r.value.clone(),f=R4(r.fieldTransforms,i,o.transformResults);l.setAll(f),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ql?function(r,i,o){if(!MS(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=R4(r.fieldTransforms,i,o.transformResults),f=i.data;f.setAll(k4(r)),f.setAll(l),i.convertToFoundDocument(o.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function GI(n,e,t,r){return n instanceof Oy?function(i,o,l,f){if(!MS(i.precondition,o))return l;const g=i.value.clone(),v=N4(i.fieldTransforms,f,o);return g.setAll(v),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ql?function(i,o,l,f){if(!MS(i.precondition,o))return l;const g=N4(i.fieldTransforms,f,o),v=o.data;return v.setAll(k4(i)),v.setAll(g),o.convertToFoundDocument(o.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(l=t,MS(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l);var o,l}function zj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=D4(r.transform,i||null);null!=o&&(null===t&&(t=Wr.empty()),t.set(r.field,o))}return t||null}function O4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&kd(t,r,(i,o)=>function jj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Gp&&r instanceof Gp||t instanceof Wp&&r instanceof Wp?kd(t.elements,r.elements,Jo):t instanceof Py&&r instanceof Py?Jo(t.gt,r.gt):t instanceof xy&&r instanceof xy);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Oy extends AS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ql extends AS{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function k4(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function R4(n,e,t){const r=new Map;rt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,f=e.data.field(o.field);r.set(o.field,Vj(l,f,t[i]))}return r}function N4(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,Bj(o,l,e))}return r}class ky extends AS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ck extends AS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wk{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Hj(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=GI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=GI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Xo();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let f=this.applyToLocalView(l,o.mutatedFields);f=t.has(i.key)?null:f;const g=P4(l,f);null!==g&&r.set(i.key,g),l.isValidDocument()||l.convertToNoDocument(at.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pt())}isEqual(e){return this.batchId===e.batchId&&kd(this.mutations,e.mutations,(t,r)=>O4(t,r))&&kd(this.baseMutations,e.baseMutations,(t,r)=>O4(t,r))}}class Ik{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){rt(e.mutations.length===r.length);let i=HI;const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Ik(e,t,r,i)}}class Ek{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Wj{constructor(e,t){this.count=e,this.unchangedNames=t}}var qr,Xt;function F4(n){switch(n){default:return et();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function L4(n){if(void 0===n)return wr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case qr.OK:return ae.OK;case qr.CANCELLED:return ae.CANCELLED;case qr.UNKNOWN:return ae.UNKNOWN;case qr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case qr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case qr.INTERNAL:return ae.INTERNAL;case qr.UNAVAILABLE:return ae.UNAVAILABLE;case qr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case qr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case qr.NOT_FOUND:return ae.NOT_FOUND;case qr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case qr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case qr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case qr.ABORTED:return ae.ABORTED;case qr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case qr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case qr.DATA_LOSS:return ae.DATA_LOSS;default:return et()}}(Xt=qr||(qr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class bk{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return xS}static getOrCreateInstance(){return null===xS&&(xS=new bk),xS}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let xS=null;function U4(){return new TextEncoder}const qj=new Od([4294967295,4294967295],0);function B4(n){const e=U4().encode(n),t=new BO;return t.update(e),new Uint8Array(t.digest())}function V4(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Od([t,r],0),new Od([i,o],0)]}class Tk{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new WI(`Invalid padding: ${t}`);if(r<0)throw new WI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new WI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new WI(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Od.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Od.fromNumber(r)));return 1===i.compare(qj)&&(i=new Od([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=B4(e),[r,i]=V4(t);for(let o=0;o<this.hashCount;o++){const l=this.Et(r,i,o);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Tk(o,i,t);return r.forEach(f=>l.insert(f)),l}insert(e){if(0===this.It)return;const t=B4(e),[r,i]=V4(t);for(let o=0;o<this.hashCount;o++){const l=this.Et(r,i,o);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class WI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qI{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ZI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qI(at.min(),i,new Mn(Et),fe(),Pt())}}class ZI{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ZI(r,t,Pt(),Pt(),Pt())}}class PS{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class j4{constructor(e,t){this.targetId=e,this.Vt=t}}class $4{constructor(e,t,r=dr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class H4{constructor(){this.St=0,this.Dt=G4(),this.Ct=dr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Pt(),t=Pt(),r=Pt();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new ZI(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=G4()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Zj{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=fe(),this.zt=z4(),this.Wt=new Mn(Et)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const l=o.target;if(jI(l))if(0===i){const f=new We(l.path);this.Yt(r,f,An.newNoDocument(f,at.min()))}else rt(1===i);else{const f=this.ie(r);if(f!==i){const g=this.re(e,f);0!==g&&(this.ee(r),this.Wt=this.Wt.insert(r,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=bk.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,E,T){var M,R,W,Q,J,be;const ze={localCacheCount:E,existenceFilterCount:T.count},Re=T.unchangedNames;return Re&&(ze.bloomFilter={applied:0===v,hashCount:null!==(M=Re?.hashCount)&&void 0!==M?M:0,bitmapLength:null!==(Q=null===(W=null===(R=Re?.bits)||void 0===R?void 0:R.bitmap)||void 0===W?void 0:W.length)&&void 0!==Q?Q:0,padding:null!==(be=null===(J=Re?.bits)||void 0===J?void 0:J.padding)&&void 0!==be?be:0}),ze}(g,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:l=0},hashCount:f=0}=r;let g,v;try{g=_o(o).toUint8Array()}catch(E){if(E instanceof vc)return mo("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw E}try{v=new Tk(g,l,f)}catch(E){return mo(E instanceof WI?"BloomFilter error: ":"Applying bloom filter failed: ",E),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const l=this.Gt.ue(),f=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;t.vt(f)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,l)=>{const f=this.se(l);if(f){if(o.current&&jI(f.target)){const g=new We(f.target.path);null!==this.jt.get(g)||this.ae(l,g)||this.Yt(l,g,An.newNoDocument(g,e))}o.Mt&&(t.set(l,o.Ot()),o.Ft())}});let r=Pt();this.zt.forEach((o,l)=>{let f=!0;l.forEachWhile(g=>{const v=this.se(g);return!v||"TargetPurposeLimboResolution"===v.purpose||(f=!1,!1)}),f&&(r=r.add(o))}),this.jt.forEach((o,l)=>l.setReadTime(e));const i=new qI(e,t,this.Wt,this.jt,r);return this.jt=fe(),this.zt=z4(),this.Wt=new Mn(Et),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new H4,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new mn(Et),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new H4),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function z4(){return new Mn(We.comparator)}function G4(){return new Mn(We.comparator)}const Kj={asc:"ASCENDING",desc:"DESCENDING"},Yj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qj={and:"AND",or:"OR"};class Jj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dk(n,e){return n.useProto3Json||$p(e)?e:{value:e}}function Ry(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Xj(n,e){return Ry(n,e.toTimestamp())}function kr(n){return rt(!!n),at.fromTimestamp(function(e){const t=Cc(e);return new Ln(t.seconds,t.nanos)}(n))}function Sk(n,e){return(t=n,new Wt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function q4(n){const e=Wt.fromString(n);return rt(nU(e)),e}function KI(n,e){return Sk(n.databaseId,e.path)}function Ec(n,e){const t=q4(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(K4(t))}function Mk(n,e){return Sk(n.databaseId,e)}function Z4(n){const e=q4(n);return 4===e.length?Wt.emptyPath():K4(e)}function YI(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function K4(n){return rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Y4(n,e,t){return{name:KI(n,e),fields:t.value.mapValue.fields}}function Q4(n,e,t){const r=Ec(n,e.name),i=kr(e.updateTime),o=e.createTime?kr(e.createTime):at.min(),l=new Wr({mapValue:{fields:e.fields}}),f=An.newFoundDocument(r,i,o,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function QI(n,e){let t;if(e instanceof Oy)t={update:Y4(n,e.key,e.value)};else if(e instanceof ky)t={delete:KI(n,e.key)};else if(e instanceof Ql)t={update:Y4(n,e.key,e.data),updateMask:a7(e.fieldMask)};else{if(!(e instanceof Ck))return et();t={verify:KI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof xy)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Gp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Wp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Py)return{fieldPath:o.field.canonicalString(),increment:l.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Xj(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function Ak(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?nr.updateTime(kr(i.updateTime)):void 0!==i.exists?nr.exists(i.exists):nr.none():nr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let f=null;"setToServerValue"in l?(rt("REQUEST_TIME"===l.setToServerValue),f=new xy):"appendMissingElements"in l?f=new Gp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new Wp(l.removeAllFromArray.values||[]):"increment"in l?f=new Py(o,l.increment):et();const g=tr.fromServerFormat(l.fieldPath);return new zI(g,f)}(n,i)):[];var i;if(e.update){const i=Ec(n,e.update.name),o=new Wr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ui((e.updateMask.fieldPaths||[]).map(v=>tr.fromServerFormat(v)));return new Ql(i,o,l,t,r)}return new Oy(i,o,t,r)}if(e.delete){const i=Ec(n,e.delete);return new ky(i,t)}if(e.verify){const i=Ec(n,e.verify);return new Ck(i,t)}return et()}function J4(n,e){return{documents:[Mk(n,e.path)]}}function xk(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Mk(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Mk(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0!==g.length)return tU(dn.create(g,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(g){if(0!==g.length)return g.map(v=>{return{field:jd((E=v).field),direction:i7(E.dir)};var E})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=Dk(n,e.limit);var f,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function X4(n){let e=Z4(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rt(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let o=[];t.where&&(o=function(E){const T=eU(E);return T instanceof dn&&BI(T)?T.getFilters():[T]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(E=>{return new Vd(Ny((T=E).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let f=null;t.limit&&(f=function(E){let T;return T="object"==typeof E?E.value:E,$p(T)?null:T}(t.limit));let g=null;var E;t.startAt&&(g=new Pa((E=t.startAt).values||[],!!E.before));let v=null;return t.endAt&&(v=function(E){return new Pa(E.values||[],!E.before)}(t.endAt)),_k(e,i,l,o,f,"F",g,v)}function eU(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ny(e.unaryFilter.field);return $t.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Ny(e.unaryFilter.field);return $t.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ny(e.unaryFilter.field);return $t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ny(e.unaryFilter.field);return $t.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?$t.create(Ny((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return dn.create(e.compositeFilter.filters.map(t=>eU(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function i7(n){return Kj[n]}function s7(n){return Yj[n]}function o7(n){return Qj[n]}function jd(n){return{fieldPath:n.canonicalString()}}function Ny(n){return tr.fromServerFormat(n.fieldPath)}function tU(n){return n instanceof $t?function(e){if("=="===e.op){if(wS(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NAN"}};if(Ty(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wS(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NOT_NAN"}};if(Ty(e.value))return{unaryFilter:{field:jd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jd(e.field),op:s7(e.op),value:e.value}}}(n):n instanceof dn?function(e){const t=e.getFilters().map(r=>tU(r));return 1===t.length?t[0]:{compositeFilter:{op:o7(e.op),filters:t}}}(n):et()}function a7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Jl{constructor(e,t,r,i,o=at.min(),l=at.min(),f=dr.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class rU{constructor(e){this.fe=e}}function iU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:OS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:KI(i=n.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Ry(i,o.version.toTimestamp()),createTime:Ry(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:qp(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:qp(e.version)}}var i,o;return r}function OS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function qp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zp(n){const e=new Ln(n.seconds,n.nanoseconds);return at.fromTimestamp(e)}function Kp(n,e){const t=(e.baseMutations||[]).map(o=>Ak(n.fe,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>Ak(n.fe,o)),i=Ln.fromMillis(e.localWriteTimeMs);return new wk(e.batchId,i,t,r)}function JI(n){const e=Zp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Zp(n.lastLimboFreeSnapshotVersion):at.min();let r;var i;return void 0!==n.query.documents?(rt(1===(i=n.query).documents.length),r=y(s(Z4(i.documents[0])))):r=y(X4(n.query)),new Jl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,dr.fromBase64String(n.resumeToken))}function sU(n,e){const t=qp(e.snapshotVersion),r=qp(e.lastLimboFreeSnapshotVersion);let i;i=jI(e.target)?J4(n.fe,e.target):xk(n.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yl(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Pk(n){const e=X4({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?b(e,e.limit,"L"):e}function Ok(n,e){return new Ek(e.largestBatchId,Ak(n.fe,e.overlayMutation))}function oU(n,e){const t=e.path.lastSegment();return[n,li(e.path.popLast()),t]}function aU(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:qp(r.readTime),documentKey:li(r.documentKey.path),largestBatchId:r.largestBatchId}}class l7{getBundleMetadata(e,t){return cU(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Zp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return cU(e).put({bundleId:(r=t).id,createTime:qp(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return lU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Pk(i.bundledQuery),readTime:Zp(i.readTime)};var i})}saveNamedQuery(e,t){return lU(e).put({name:(r=t).name,readTime:qp(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function cU(n){return Gr(n,"bundles")}function lU(n){return Gr(n,"namedQueries")}class kS{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new kS(e,t.uid||"")}getOverlay(e,t){return XI(e).get(oU(this.userId,t)).next(r=>r?Ok(this.serializer,r):null)}getOverlays(e,t){const r=Kn();return te.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,l)=>{const f=new Ek(t,l);i.push(this.we(e,f))}),te.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(li(l.getCollectionPath())));const o=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(XI(e).J("collectionPathOverlayIndex",f))}),te.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Kn(),o=li(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return XI(e).j("collectionPathOverlayIndex",l).next(f=>{for(const g of f){const v=Ok(this.serializer,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Kn();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return XI(e).X({index:"collectionGroupOverlayIndex",range:f},(g,v,E)=>{const T=Ok(this.serializer,v);o.size()<i||T.largestBatchId===l?(o.set(T.getKey(),T),l=T.largestBatchId):E.done()}).next(()=>o)}we(e,t){return XI(e).put(function(r,i,o){const[l,f,g]=oU(i,o.mutation.key);return{userId:i,collectionPath:f,documentId:g,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:QI(r.fe,o.mutation)}}(this.serializer,this.userId,t))}}function XI(n){return Gr(n,"documentOverlays")}class Yp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Un(e.integerValue));else if("doubleValue"in e){const r=Un(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Hp(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(_o(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?ok(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),We.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function u7(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function uU(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=u7(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Yp.Ve=new Yp;class d7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=uU(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=uU(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class h7{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class f7{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class eE{constructor(){this.je=new d7,this.ze=new h7(this.je),this.We=new f7(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Qp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Qp(this.indexId,this.documentKey,this.arrayValue,r)}}function $d(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=dU(n.arrayValue,e.arrayValue),0!==t?t:(t=dU(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function dU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class p7{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){rt(e.collectionGroup===this.collectionId);const t=wI(e);if(void 0!==t&&!this.en(t))return!1;const r=Wl(e);let i=new Set,o=0,l=0;for(;o<r.length&&this.en(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[o];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[l++],f))return!1}++o}for(;o<r.length;++o)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[o]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function hU(n){var e,t;if(rt(n instanceof $t||n instanceof dn),n instanceof $t){if(n instanceof pk){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>$t.create(n.field,"==",o)))||[];return dn.create(i,"or")}return n}const r=n.filters.map(i=>hU(i));return dn.create(r,n.op)}function g7(n){if(0===n.getFilters().length)return[];const e=Nk(hU(n));return rt(fU(e)),kk(e)||Rk(e)?[e]:e.getFilters()}function kk(n){return n instanceof $t}function Rk(n){return n instanceof dn&&BI(n)}function fU(n){return kk(n)||Rk(n)||function(e){if(e instanceof dn&&UI(e)){for(const t of e.getFilters())if(!kk(t)&&!Rk(t))return!1;return!0}return!1}(n)}function Nk(n){if(rt(n instanceof $t||n instanceof dn),n instanceof $t)return n;if(1===n.filters.length)return Nk(n.filters[0]);const e=n.filters.map(r=>Nk(r));let t=dn.create(e,n.op);return t=RS(t),fU(t)?t:(rt(t instanceof dn),rt(Oa(t)),rt(t.filters.length>1),t.filters.reduce((r,i)=>Fk(r,i)))}function Fk(n,e){let t;return rt(n instanceof $t||n instanceof dn),rt(e instanceof $t||e instanceof dn),t=n instanceof $t?e instanceof $t?dn.create([n,e],"and"):pU(n,e):e instanceof $t?pU(e,n):function(r,i){if(rt(r.filters.length>0&&i.filters.length>0),Oa(r)&&Oa(i))return bS(r,i.getFilters());const o=UI(r)?r:i,l=UI(r)?i:r,f=o.filters.map(g=>Fk(g,l));return dn.create(f,"or")}(n,e),RS(t)}function pU(n,e){if(Oa(e))return bS(e,n.getFilters());{const t=e.filters.map(r=>Fk(n,r));return dn.create(t,"or")}}function RS(n){if(rt(n instanceof $t||n instanceof dn),n instanceof $t)return n;const e=n.getFilters();if(1===e.length)return RS(e[0]);if(VI(n))return n;const t=e.map(i=>RS(i)),r=[];return t.forEach(i=>{i instanceof $t?r.push(i):i instanceof dn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:dn.create(r,n.op)}class m7{constructor(){this.rn=new Lk}addToCollectionParentIndex(e,t){return this.rn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(hs.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class Lk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mn(Wt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mn(Wt.comparator)).toArray()}}const NS=new Uint8Array(0);class _7{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Lk,this.un=new $e(r=>Yl(r),(r,i)=>Ay(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const o={collectionId:r,parent:li(i)};return gU(e).put(o)}return te.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[oS(t),""],!1,!0);return gU(e).j(i).next(o=>{for(const l of o){if(l.collectionId!==t)break;r.push(Qo(l.parent))}return r})}addFieldIndex(e,t){const r=FS(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const o=r.add(i);if(t.indexState){const l=nE(e);return o.next(f=>{l.put(aU(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=FS(e),i=nE(e),o=tE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=tE(e);let i=!0;const o=new Map;return te.forEach(this.cn(t),l=>this.an(e,l).next(f=>{i&&(i=!!f),o.set(l,f)})).next(()=>{if(i){let l=Pt();const f=[];return te.forEach(o,(g,v)=>{var E;Ae("IndexedDbIndexManager",`Using index ${E=g,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Re=>`${Re.fieldPath}:${Re.kind}`).join(",")}`} to execute ${Yl(t)}`);const T=function(Re,Ye){const gt=wI(Ye);if(void 0===gt)return null;for(const At of $I(Re,gt.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(v,g),M=function(Re,Ye){const gt=new Map;for(const At of Wl(Ye))for(const Fr of $I(Re,At.fieldPath))switch(Fr.op){case"==":case"in":gt.set(At.fieldPath.canonicalString(),Fr.value);break;case"not-in":case"!=":return gt.set(At.fieldPath.canonicalString(),Fr.value),Array.from(gt.values())}return null}(v,g),R=function(Re,Ye){const gt=[];let At=!0;for(const Fr of Wl(Ye)){const Vs=0===Fr.kind?gk(Re,Fr.fieldPath,Re.startAt):mk(Re,Fr.fieldPath,Re.startAt);gt.push(Vs.value),At&&(At=Vs.inclusive)}return new Pa(gt,At)}(v,g),W=function(Re,Ye){const gt=[];let At=!0;for(const Fr of Wl(Ye)){const Vs=0===Fr.kind?mk(Re,Fr.fieldPath,Re.endAt):gk(Re,Fr.fieldPath,Re.endAt);gt.push(Vs.value),At&&(At=Vs.inclusive)}return new Pa(gt,At)}(v,g),Q=this.hn(g,v,R),J=this.hn(g,v,W),be=this.ln(g,v,M),ze=this.fn(g.indexId,T,Q,R.inclusive,J,W.inclusive,be);return te.forEach(ze,Re=>r.H(Re,t.limit).next(Ye=>{Ye.forEach(gt=>{const At=We.fromSegments(gt.documentKey);l.has(At)||(l=l.add(At),f.push(At))})}))}).next(()=>f)}return te.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:g7(dn.create(e.filters,"and")).map(r=>DS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,o,l,f){const g=(null!=t?t.length:1)*Math.max(r.length,o.length),v=g/(null!=t?t.length:1),E=[];for(let T=0;T<g;++T){const M=t?this.dn(t[T/v]):NS,R=this.wn(e,M,r[T%v],i),W=this._n(e,M,o[T%v],l),Q=f.map(J=>this.wn(e,M,J,!0));E.push(...this.createRange(R,W,Q))}return E}wn(e,t,r,i){const o=new Qp(e,We.empty(),t,r);return i?o:o.Je()}_n(e,t,r,i){const o=new Qp(e,We.empty(),t,r);return i?o.Je():o}an(e,t){const r=new p7(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let l=null;for(const f of o)r.tn(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return te.forEach(i,o=>this.an(e,o).next(l=>{l?0!==r&&l.fields.length<function(f){let g=new mn(tr.comparator),v=!1;for(const E of f.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?v=!0:g=g.add(T.field));for(const E of f.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new eE;for(const i of Wl(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const l=r.He(i.kind);Yp.Ve._e(o,l)}return r.Qe()}dn(e){const t=new eE;return Yp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new eE;return Yp.Ve._e(xa(this.databaseId,t),r.He(function(i){const o=Wl(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new eE);let o=0;for(const l of Wl(e)){const f=r[o++];for(const g of i)if(this.yn(t,l.fieldPath)&&Bd(f))i=this.pn(i,l,f);else{const v=g.He(l.kind);Yp.Ve._e(f,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const f of i){const g=new eE;g.seed(f.Qe()),Yp.Ve._e(l,g.He(t.kind)),o.push(g)}return o}yn(e,t){return!!e.filters.find(r=>r instanceof $t&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=FS(e),i=nE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const l=[];return te.forEach(o,f=>i.get([f.indexId,this.uid]).next(g=>{l.push(function(v,E){const T=E?new Rd(E.sequenceNumber,new hs(Zp(E.readTime),new We(Qo(E.documentKey)),E.largestBatchId)):Rd.empty(),M=v.fields.map(([R,W])=>new gy(tr.fromServerFormat(R),W));return new py(v.indexId,v.collectionGroup,M,T)}(f,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Et(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=FS(e),o=nE(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>te.forEach(f,g=>o.put(aU(g.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(i,o)=>{const l=r.get(i.collectionGroup);return(l?te.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),te.forEach(f,g=>this.En(e,i,g).next(v=>{const E=this.An(o,g);return v.isEqual(E)?te.resolve():this.vn(e,o,g,v,E)}))))})}Rn(e,t,r,i){return tE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return tE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=tE(e);let o=new mn($d);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,f)=>{o=o.add(new Qp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>o)}An(e,t){let r=new mn($d);const i=this.mn(t,e);if(null==i)return r;const o=wI(t);if(null!=o){const l=e.data.field(o.fieldPath);if(Bd(l))for(const f of l.arrayValue.values||[])r=r.add(new Qp(t.indexId,e.key,this.dn(f),i))}else r=r.add(new Qp(t.indexId,e.key,NS,i));return r}vn(e,t,r,i,o){Ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,g,v,E,T){const M=f.getIterator(),R=g.getIterator();let W=Fd(M),Q=Fd(R);for(;W||Q;){let J=!1,be=!1;if(W&&Q){const ze=v(W,Q);ze<0?be=!0:ze>0&&(J=!0)}else null!=W?be=!0:J=!0;J?(E(Q),Q=Fd(R)):be?(T(W),W=Fd(M)):(W=Fd(M),Q=Fd(R))}}(i,o,$d,f=>{l.push(this.Rn(e,t,r,f))},f=>{l.push(this.Pn(e,t,r,f))}),te.waitFor(l)}Tn(e){let t=1;return nE(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>$d(l,f)).filter((l,f,g)=>!f||0!==$d(l,g[f-1]));const i=[];i.push(e);for(const l of r){const f=$d(l,e),g=$d(l,t);if(0===f)i[0]=e.Je();else if(f>0&&g<0)i.push(l),i.push(l.Je());else if(g>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];o.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,NS,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,NS,[]]))}return o}bn(e,t){return $d(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mU)}getMinOffset(e,t){return te.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||et())).next(mU)}}function gU(n){return Gr(n,"collectionParents")}function tE(n){return Gr(n,"indexEntries")}function FS(n){return Gr(n,"indexConfiguration")}function nE(n){return Gr(n,"indexState")}function mU(n){rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;_y(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new hs(e.readTime,e.documentKey,t)}const _U={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class es{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new es(e,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yU(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let f=0;const g=r.X({range:l},(E,T,M)=>(f++,M.delete()));o.push(g.next(()=>{rt(1===f)}));const v=[];for(const E of t.mutations){const T=wy(e,E.key.path,t.batchId);o.push(i.delete(T)),v.push(E.key)}return te.waitFor(o).next(()=>v)}function LS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}es.DEFAULT_COLLECTION_PERCENTILE=10,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,es.DEFAULT=new es(41943040,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),es.DISABLED=new es(-1,0,0);class US{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){rt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new US(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hd(e).X({index:"userMutationsIndex",range:r},(i,o,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Fy(e),l=Hd(e);return l.add({}).next(f=>{rt("number"==typeof f);const g=new wk(f,t,r,i),v=function(M,R,W){const Q=W.baseMutations.map(be=>QI(M.fe,be)),J=W.mutations.map(be=>QI(M.fe,be));return{userId:R,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:Q,mutations:J}}(this.serializer,this.userId,g),E=[];let T=new mn((M,R)=>Et(M.canonicalString(),R.canonicalString()));for(const M of i){const R=wy(this.userId,M.key.path,f);T=T.add(M.key.path.popLast()),E.push(l.put(v)),E.push(o.put(R,dS))}return T.forEach(M=>{E.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.Vn[f]=g.keys()}),te.waitFor(E).next(()=>g)})}lookupMutationBatch(e,t){return Hd(e).get(t).next(r=>r?(rt(r.userId===this.userId),Kp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?te.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Hd(e).X({index:"userMutationsIndex",range:i},(l,f,g)=>{f.userId===this.userId&&(rt(f.batchId>=r),o=Kp(this.serializer,f)),g.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Hd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,l)=>{r=o.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hd(e).j("userMutationsIndex",t).next(r=>r.map(i=>Kp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=DI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Fy(e).X({range:i},(l,f,g)=>{const[v,E,T]=l,M=Qo(E);if(v===this.userId&&t.path.isEqual(M))return Hd(e).get(T).next(R=>{if(!R)throw et();rt(R.userId===this.userId),o.push(Kp(this.serializer,R))});g.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Et);const i=[];return t.forEach(o=>{const l=DI(this.userId,o.path),f=IDBKeyRange.lowerBound(l),g=Fy(e).X({range:f},(v,E,T)=>{const[M,R,W]=v,Q=Qo(R);M===this.userId&&o.path.isEqual(Q)?r=r.add(W):T.done()});i.push(g)}),te.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=DI(this.userId,r),l=IDBKeyRange.lowerBound(o);let f=new mn(Et);return Fy(e).X({range:l},(g,v,E)=>{const[T,M,R]=g,W=Qo(M);T===this.userId&&r.isPrefixOf(W)?W.length===i&&(f=f.add(R)):E.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Hd(e).get(o).next(l=>{if(null===l)throw et();rt(l.userId===this.userId),r.push(Kp(this.serializer,l))}))}),te.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return yU(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),te.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Fy(e).X({range:r},(o,l,f)=>{if(o[0]===this.userId){const g=Qo(o[1]);i.push(g)}else f.done()}).next(()=>{rt(0===i.length)})})}containsKey(e,t){return vU(e,this.userId,t)}xn(e){return CU(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vU(n,e,t){const r=DI(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return Fy(n).X({range:o,Y:!0},(f,g,v)=>{const[E,T,M]=f;E===e&&T===i&&(l=!0),v.done()}).next(()=>l)}function Hd(n){return Gr(n,"mutations")}function Fy(n){return Gr(n,"documentMutations")}function CU(n){return Gr(n,"mutationQueues")}class Jp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Jp(0)}static Mn(){return new Jp(-1)}}class y7{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Jp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>at.fromTimestamp(new Ln(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ly(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(rt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Ly(e).X((l,f)=>{const g=JI(f);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,o.push(this.removeTargetData(e,g)))}).next(()=>te.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ly(e).X((r,i)=>{const o=JI(i);t(o)})}$n(e){return wU(e).get("targetGlobalKey").next(t=>(rt(null!==t),t))}On(e,t){return wU(e).put("targetGlobalKey",t)}Fn(e,t){return Ly(e).put(sU(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Yl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ly(e).X({range:i,index:"queryTargetsIndex"},(l,f,g)=>{const v=JI(f);Ay(t,v.target)&&(o=v,g.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=zd(e);return t.forEach(l=>{const f=li(l.path);i.push(o.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),te.waitFor(i)}removeMatchingKeys(e,t,r){const i=zd(e);return te.forEach(t,o=>{const l=li(o.path);return te.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=zd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=zd(e);let o=Pt();return i.X({range:r,Y:!0},(l,f,g)=>{const v=Qo(l[1]),E=new We(v);o=o.add(E)}).next(()=>o)}containsKey(e,t){const r=li(t.path),i=IDBKeyRange.bound([r],[oS(r)],!1,!0);let o=0;return zd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,f],g,v)=>{0!==l&&(o++,v.done())}).next(()=>o>0)}le(e,t){return Ly(e).get(t).next(r=>r?JI(r):null)}}function Ly(n){return Gr(n,"targets")}function wU(n){return Gr(n,"targetGlobal")}function zd(n){return Gr(n,"targetDocuments")}function IU([n,e],[t,r]){const i=Et(n,t);return 0===i?Et(e,r):i}class v7{constructor(e){this.Ln=e,this.buffer=new mn(IU),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();IU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,U.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Li(r)?Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ur(r)}yield t.Qn(3e5)}))}}class C7{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(fs.ct);const r=new v7(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(_U)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_U):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,o,l,f,g,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,l=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,f=Date.now(),this.removeTargets(e,r,t))).next(T=>(o=T,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(v=Date.now(),nS()<=ki.in.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-E}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${o} targets in `+(g-f)+`ms\n\tRemoved ${T} documents in `+(v-g)+`ms\nTotal Duration: ${v-E}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:T})))}}class w7{constructor(e,t){this.db=e,this.garbageCollector=function bU(n,e){return new C7(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return BS(e,r)}removeReference(e,t,r){return BS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return BS(e,t)}Xn(e,t){return function(r,i){let o=!1;return CU(r).Z(l=>vU(r,l,i).next(f=>(f&&(o=!0),te.resolve(!f)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(l,f)=>{if(f<=t){const g=this.Xn(e,l).next(v=>{if(!v)return o++,r.getEntry(e,l).next(()=>(r.removeEntry(l,at.min()),zd(e).delete([0,li(l.path)])))});i.push(g)}}).next(()=>te.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return BS(e,t)}Yn(e,t){const r=zd(e);let i,o=fs.ct;return r.X({index:"documentTargetsIndex"},([l,f],{path:g,sequenceNumber:v})=>{0===l?(o!==fs.ct&&t(new We(Qo(i)),o),o=v,i=g):o=fs.ct}).next(()=>{o!==fs.ct&&t(new We(Qo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function BS(n,e){return zd(n).put((r=n.currentSequenceNumber,{targetId:0,path:li(e.path),sequenceNumber:r}));var r}class TU{constructor(){this.changes=new $e(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class I7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Xp(e).put(r)}removeEntry(e,t,r){return Xp(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],OS(o),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=An.newInvalidDocument(t);return Xp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(rE(t))},(i,o)=>{r=this.ts(t,o)}).next(()=>r)}es(e,t){let r={size:0,document:An.newInvalidDocument(t)};return Xp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(rE(t))},(i,o)=>{r={document:this.ts(t,o),size:LS(o)}}).next(()=>r)}getEntries(e,t){let r=fe();return this.ns(e,t,(i,o)=>{const l=this.ts(i,o);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=fe(),i=new Mn(We.comparator);return this.ns(e,t,(o,l)=>{const f=this.ts(o,l);r=r.insert(o,f),i=i.insert(o,LS(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return te.resolve();let i=new mn(AU);t.forEach(g=>i=i.add(g));const o=IDBKeyRange.bound(rE(i.first()),rE(i.last())),l=i.getIterator();let f=l.getNext();return Xp(e).X({index:"documentKeyIndex",range:o},(g,v,E)=>{const T=We.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&AU(f,T)<0;)r(f,null),f=l.getNext();f&&f.isEqual(T)&&(r(f,v),f=l.hasNext()?l.getNext():null),f?E.G(rE(f)):E.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,l=[o.popLast().toArray(),o.lastSegment(),OS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xp(e).j(IDBKeyRange.bound(l,f,!0)).next(g=>{let v=fe();for(const E of g){const T=this.ts(We.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(q(t,T)||i.has(T.key))&&(v=v.insert(T.key,T))}return v})}getAllFromCollectionGroup(e,t,r,i){let o=fe();const l=MU(t,r),f=MU(t,hs.max());return Xp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(g,v,E)=>{const T=this.ts(We.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);o=o.insert(T.key,T),o.size===i&&E.done()}).next(()=>o)}newChangeBuffer(e){return new E7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return SU(e).get("remoteDocumentGlobalKey").next(t=>(rt(!!t),t))}Zn(e,t){return SU(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function c7(n,e){let t;if(e.document)t=Q4(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=Zp(e.noDocument.readTime);t=An.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=We.fromSegments(e.unknownDocument.path),i=Zp(e.unknownDocument.version);t=An.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ln(r[0],r[1]);return at.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(at.min()))return r}return An.newInvalidDocument(e)}}function DU(n){return new I7(n)}class E7 extends TU{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new $e(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new mn((o,l)=>Et(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const f=this.us.get(o);if(t.push(this.os.removeEntry(e,o,f.readTime)),l.isValidDocument()){const g=iU(this.os.serializer,l);i=i.add(o.path.popLast());const v=LS(g);r+=v-f.size,t.push(this.os.addEntry(e,o,g))}else if(r-=f.size,this.trackRemovals){const g=iU(this.os.serializer,l.convertToNoDocument(at.min()));t.push(this.os.addEntry(e,o,g))}}),i.forEach(o=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.os.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((o,l)=>{this.us.set(o,{size:l,readTime:r.get(o).readTime})}),r))}}function SU(n){return Gr(n,"remoteDocumentGlobal")}function Xp(n){return Gr(n,"remoteDocumentsV14")}function rE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function MU(n,e){const t=e.documentKey.path.toArray();return[n,OS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function AU(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Et(t[o],r[o]),i)return i;return i=Et(t.length,r.length),i||(i=Et(t[t.length-2],r[r.length-2]),i||Et(t[t.length-1],r[r.length-1]))}class b7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&GI(r.mutation,i,Ui.empty(),Ln.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pt()){const i=Kn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=Mt();return o.forEach((f,g)=>{l=l.insert(f,g.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Kn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let o=fe();const l=ea(),f=ea();return t.forEach((g,v)=>{const E=r.get(v.key);i.has(v.key)&&(void 0===E||E.mutation instanceof Ql)?o=o.insert(v.key,v):void 0!==E?(l.set(v.key,E.mutation.getFieldMask()),GI(E.mutation,v,E.mutation.getFieldMask(),Ln.now())):l.set(v.key,Ui.empty())}),this.recalculateAndSaveOverlays(e,o).next(g=>(g.forEach((v,E)=>l.set(v,E)),t.forEach((v,E)=>{var T;return f.set(v,new b7(E,null!==(T=l.get(v))&&void 0!==T?T:null))}),f))}recalculateAndSaveOverlays(e,t){const r=ea();let i=new Mn((l,f)=>l-f),o=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let E=r.get(g)||Ui.empty();E=f.applyToLocalView(v,E),r.set(g,E);const T=(i.get(f.batchId)||Pt()).add(g);i=i.insert(f.batchId,T)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,E=g.value,T=Xo();E.forEach(M=>{if(!o.has(M)){const R=P4(t.get(M),r.get(M));null!==R&&T.set(M,R),o=o.add(M)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,T))}return te.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):h(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):te.resolve(Kn());let f=-1,g=o;return l.next(v=>te.forEach(v,(E,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),o.get(E)?te.resolve():this.remoteDocumentCache.getEntry(e,E).next(M=>{g=g.insert(E,M)}))).next(()=>this.populateOverlays(e,v,o)).next(()=>this.computeViews(e,g,v,Pt())).next(E=>({batchId:f,changes:cn(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let i=Mt();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=Mt();return this.indexManager.getCollectionParents(e,i).next(l=>te.forEach(l,f=>{const g=(v=t,E=f.child(i),new ka(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,E;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(v=>{v.forEach((E,T)=>{o=o.insert(E,T)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((f,g)=>{const v=g.getKey();null===o.get(v)&&(o=o.insert(v,An.newInvalidDocument(v)))});let l=Mt();return o.forEach((f,g)=>{const v=i.get(f);void 0!==v&&GI(v.mutation,g,Ui.empty(),Ln.now()),q(t,g)&&(l=l.insert(f,g))}),l})}}class T7{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return te.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:Pk(r.bundledQuery),readTime:kr(r.readTime)}),te.resolve();var r}}class D7{constructor(){this.overlays=new Mn(We.comparator),this.ls=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Kn();return te.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const i=Kn(),o=t.length+1,l=new We(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===o&&g.largestBatchId>r&&i.set(g.getKey(),g)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Mn((v,E)=>v-E);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let E=o.get(v.largestBatchId);null===E&&(E=Kn(),o=o.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const f=Kn(),g=o.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,E)=>f.set(v,E)),!(f.size()>=i)););return te.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Ek(t,r));let o=this.ls.get(t);void 0===o&&(o=Pt(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class Uk{constructor(){this.fs=new mn(Ei.ds),this.ws=new mn(Ei._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ei(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ei(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new We(new Wt([])),r=new Ei(t,e),i=new Ei(t,e+1),o=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),o.push(l.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new We(new Wt([])),r=new Ei(t,e),i=new Ei(t,e+1);let o=Pt();return this.ws.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Ei(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ei{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return We.comparator(e.key,t.key)||Et(e.As,t.As)}static _s(e,t){return Et(e.As,t.As)||We.comparator(e.key,t.key)}}class S7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new mn(Ei.ds)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const l=new wk(o,t,r,i);this.mutationQueue.push(l);for(const f of i)this.Rs=this.Rs.add(new Ei(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,t){return te.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ei(t,0),i=new Ei(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],l=>{const f=this.Ps(l.As);o.push(f)}),te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Et);return t.forEach(i=>{const o=new Ei(i,0),l=new Ei(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,l],f=>{r=r.add(f.As)})}),te.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;We.isDocumentKey(o)||(o=o.child(""));const l=new Ei(new We(o),0);let f=new mn(Et);return this.Rs.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(g.As)),!0)},l),te.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){rt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return te.forEach(t.mutations,i=>{const o=new Ei(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ei(t,0),i=this.Rs.firstAfterOrEqual(r);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return te.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class M7{constructor(e){this.Ds=e,this.docs=new Mn(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let r=fe();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():An.newInvalidDocument(i))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=fe();const l=t.path,f=new We(l.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:E}}=g.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||_y(aS(E),r)<=0||(i.has(E.key)||q(t,E))&&(o=o.insert(E.key,E.mutableCopy()))}return te.resolve(o)}getAllFromCollectionGroup(e,t,r,i){et()}Cs(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new A7(this)}getSize(e){return te.resolve(this.size)}}class A7 extends TU{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class x7{constructor(e){this.persistence=e,this.xs=new $e(t=>Yl(t),Ay),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Uk,this.targetCount=0,this.Ms=Jp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),te.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Jp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Fn(t),te.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(l),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),te.waitFor(o).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),te.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.ks.containsKey(t))}}class Bk{constructor(e,t){this.$s={},this.overlays={},this.Os=new fs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new x7(this),this.indexManager=new m7,this.remoteDocumentCache=new M7(r=>this.referenceDelegate.Ls(r)),this.serializer=new rU(t),this.qs=new T7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new D7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new S7(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new P7(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return te.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class P7 extends ZO{constructor(e){super(),this.currentSequenceNumber=e}}class VS{constructor(e){this.persistence=e,this.Qs=new Uk,this.js=null}static zs(e){return new VS(e)}get Ws(){if(this.js)return this.js;throw et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),te.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Ws,r=>{const i=We.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,at.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return te.or([()=>te.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class O7{constructor(e){this.serializer=e}O(e,t,r,i){const o=new vy("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TI,{unique:!0}),f.createObjectStore("documentMutations"),PU(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=te.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),PU(e)),l=l.next(()=>function(f){const g=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:at.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(o))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,g){return g.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TI,{unique:!0});const E=g.store("mutations"),T=v.map(M=>E.put(M));return te.waitFor(T)})}(e,o))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(o))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(o))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,o))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(o))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const g=f.createObjectStore("documentOverlays",{keyPath:_S});g.createIndex("collectionPathOverlayIndex",XO,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",ek,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const g=f.createObjectStore("remoteDocumentsV14",{keyPath:hS});g.createIndex("documentKeyIndex",YO),g.createIndex("collectionGroupIndex",fS)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,o))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:mS}).createIndex("sequenceNumberIndex",QO,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:JO}).createIndex("documentKeyIndex",g4,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=LS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>te.forEach(i,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(f=>te.forEach(f,g=>{rt(g.userId===o.userId);const v=Kp(this.serializer,g);return yU(e,o.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((l,f)=>{const g=new Wt(l),v=[0,li(g)];o.push(t.get(v).next(E=>E?te.resolve():t.put({targetId:0,path:li(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>te.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:gS});const r=t.store("collectionParents"),i=new Lk,o=l=>{if(i.add(l)){const f=l.lastSegment(),g=l.popLast();return r.put({collectionId:f,parent:li(g)})}};return t.store("remoteDocuments").X({Y:!0},(l,f)=>{const g=new Wt(l);return o(g.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,f,g],v)=>{const E=Qo(f);return o(E.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const o=JI(i),l=sU(this.serializer,o);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,l)=>{const f=t.store("remoteDocumentsV14"),g=(v=l,v.document?new We(Wt.fromString(v.document.name).popFirst(5)):v.noDocument?We.fromSegments(v.noDocument.path):v.unknownDocument?We.fromSegments(v.unknownDocument.path):et()).path.toArray();var v;const E={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(E))}).next(()=>te.waitFor(i))}si(e,t){const r=t.store("mutations"),i=DU(this.serializer),o=new Bk(VS.zs,this.serializer.fe);return r.j().next(l=>{const f=new Map;return l.forEach(g=>{var v;let E=null!==(v=f.get(g.userId))&&void 0!==v?v:Pt();Kp(this.serializer,g).keys().forEach(T=>E=E.add(T)),f.set(g.userId,E)}),te.forEach(f,(g,v)=>{const E=new Pr(v),T=kS.de(this.serializer,E),M=o.getIndexManager(E),R=US.de(E,this.serializer,M,o.referenceDelegate);return new xU(i,R,T,M).recalculateAndSaveOverlaysForDocumentKeys(new MI(t,fs.ct),g).next()})})}}function PU(n){n.createObjectStore("targetDocuments",{keyPath:Nd}).createIndex("documentTargetsIndex",Iy,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pS,{unique:!0}),n.createObjectStore("targetGlobal")}const Vk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jk{constructor(e,t,r,i,o,l,f,g,v,E,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=o,this.window=l,this.document=f,this.ri=v,this.oi=E,this.ui=T,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=M=>Promise.resolve(),!jk.D())throw new ye(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new w7(this,i),this.di=t+"main",this.serializer=new rU(g),this.wi=new Ls(this.di,this.ui,new O7(this.serializer)),this.Bs=new y7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DU(this.serializer),this.qs=new l7,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===E&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ye(ae.FAILED_PRECONDITION,Vk);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new fs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,U.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,U.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,U.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$S(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Li(e))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return iE(e).get("owner").next(t=>te.resolve(this.Ri(t)))}Pi(e){return $S(e).delete(this.clientId)}bi(){var e=this;return(0,U.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Gr(r,"clientMetadata");return i.j().next(o=>{const l=e.Si(o,18e5),f=o.filter(g=>-1===l.indexOf(g));return te.forEach(f,g=>i.delete(g.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?te.resolve(!0):iE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new ye(ae.FAILED_PRECONDITION,Vk);return!1}}return!(!this.networkEnabled||!this.inForeground)||$S(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,U.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new MI(t,fs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>$S(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return US.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _7(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return kS.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ae("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(l=this.ui)?rk:14===l?SI:13===l?nk:12===l?m4:11===l?tk:void et();var l;let f;return this.wi.runTransaction(e,i,o,g=>(f=new MI(g,this.Os?this.Os.next():fs.ct),"readwrite-primary"===t?this.Ti(f).next(v=>!!v||this.Ei(f)).next(v=>{if(!v)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new ye(ae.FAILED_PRECONDITION,II);return r(f)}).next(v=>this.vi(f).next(()=>v)):this.Oi(f).next(()=>r(f)))).then(g=>(f.raiseOnCommittedEvent(),g))}Oi(e){return iE(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ye(ae.FAILED_PRECONDITION,Vk)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return iE(e).put("owner",t)}static D(){return Ls.D()}Ai(e){const t=iE(e);return t.get("owner").next(r=>this.Ri(r)?(Ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,z.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ae("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function iE(n){return Gr(n,"owner")}function $S(n){return Gr(n,"clientMetadata")}function $k(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Hk{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Pt(),i=Pt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Hk(e,t.fromCache,r,i)}}class OU{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(a(t))return te.resolve(null);let r=y(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=b(t,null,"F"),r=y(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Pt(...o);return this.Ui.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.ji(t,f);return this.zi(t,v,l,g.readTime)?this.Ki(e,b(t,null,"F")):this.Wi(e,v,t,g)}))})))}Gi(e,t,r,i){return a(t)||i.isEqual(at.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const l=this.ji(t,o);return this.zi(t,l,r,i)?this.Qi(e,t):(nS()<=ki.in.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),N(t)),this.Wi(e,l,t,my(i,-1)))})}ji(e,t){let r=new mn(ue(e));return t.forEach((i,o)=>{q(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return nS()<=ki.in.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",N(t)),this.Ui.getDocumentsMatchingQuery(e,t,hs.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}class k7{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Mn(Et),this.Yi=new $e(o=>Yl(o),Ay),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xU(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function kU(n,e,t,r){return new k7(n,e,t,r)}function RU(n,e){return zk.apply(this,arguments)}function zk(){return zk=(0,U.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],f=[];let g=Pt();for(const v of i){l.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of o){f.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(r,g).next(v=>({er:v,removedBatchIds:l,addedBatchIds:f}))})})}),zk.apply(this,arguments)}function NU(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function FU(n,e,t){let r=Pt(),i=Pt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=fe();return t.forEach((f,g)=>{const v=o.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),g.isNoDocument()&&g.version.isEqual(at.min())?(e.removeEntry(f,g.readTime),l=l.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),l=l.insert(f,g)):Ae("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)}),{nr:l,sr:i}})}function F7(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Uy(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,te.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Jl(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function By(n,e,t){return Gk.apply(this,arguments)}function Gk(){return Gk=(0,U.Z)(function*(n,e,t){const r=qe(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Li(l))throw l;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),Gk.apply(this,arguments)}function HS(n,e,t){const r=qe(n);let i=at.min(),o=Pt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,g,v){const E=qe(f),T=E.Yi.get(v);return void 0!==T?te.resolve(E.Ji.get(T)):E.Bs.getTargetData(g,v)}(r,l,y(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,f.targetId).next(g=>{o=g})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:at.min(),t?o:Pt())).next(f=>(BU(r,Y(e),f),{documents:f,ir:o})))}function LU(n,e){const t=qe(n),r=qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.le(o,e).next(l=>l?l.target:null))}function UU(n,e){const t=qe(n),r=t.Xi.get(e)||at.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,my(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(BU(t,e,i),i))}function BU(n,e,t){let r=n.Xi.get(e)||at.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}function Wk(){return Wk=(0,U.Z)(function*(n,e,t,r){const i=qe(n);let o=Pt(),l=fe();for(const v of t){const E=e.rr(v.metadata.name);v.document&&(o=o.add(E));const T=e.ur(v);T.setReadTime(e.cr(v.metadata.readTime)),l=l.insert(E,T)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),g=yield Uy(i,(v=r,y(s(Wt.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>FU(v,f,l).next(E=>(f.apply(v),E)).next(E=>i.Bs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.Bs.addMatchingKeys(v,o,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,E.nr,E.sr)).next(()=>E.nr)))}),Wk.apply(this,arguments)}function U7(n,e){return qk.apply(this,arguments)}function qk(){return qk=(0,U.Z)(function*(n,e,t=Pt()){const r=yield Uy(n,y(Pk(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const l=kr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(o,e);const f=r.withResumeToken(dr.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(o,f).next(()=>i.Bs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Bs.addMatchingKeys(o,t,r.targetId)).next(()=>i.qs.saveNamedQuery(o,e))})}),qk.apply(this,arguments)}function VU(n,e){return`firestore_clients_${n}_${e}`}function jU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Zk(n,e){return`firestore_targets_${n}_${e}`}class zS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let o,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(o=new ye(i.error.code,i.error.message))),l?new zS(e,t,i.state,o):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ye(r.error.code,r.error.message))),o?new sE(e,r.state,i):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class GS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=vk();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=uS(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return i?new GS(e,o):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Kk{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Kk(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yk{constructor(){this.activeTargetIds=vk()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qk{constructor(e,t,r,i,o){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Mn(Et),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.pr=VU(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Yk),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,U.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const o=e.getItem(VU(e.persistenceKey,i));if(o){const l=GS.ar(i,o);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Zk(this.persistenceKey,e));if(r){const i=sE.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zk(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae("SharedClientState","READ",e,t),t}setItem(e,t){Ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ae("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,U.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(o){let l=fs.ct;if(null!=o)try{const f=JSON.parse(o);rt("number"==typeof f),l=f}catch(f){wr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==fs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Qr(o)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new zS(this.currentUser,e,t,r),o=jU(this.persistenceKey,this.currentUser,e);this.setItem(o,i.hr())}Cr(e){const t=jU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=Zk(this.persistenceKey,e),o=new sE(e,t,r);this.setItem(i,o.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return GS.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return zS.ar(new Pr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return sE.ar(i,t)}br(e){return Kk.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,U.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),o=this.Sr(r),l=[],f=[];return o.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{o.has(g)||f.push(g)}),this.syncEngine.Wr(l,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=vk();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class $U{constructor(){this.Hr=new Yk,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Yk,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class B7{Yr(e){}shutdown(){}}class HU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let WS=null;function Jk(){return null===WS?WS=268435456+Math.round(2147483648*Math.random()):WS++,"0x"+WS.toString(16)}const V7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j7{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ts="WebChannelConnection";class $7 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const l=Jk(),f=this.To(e,t);Ae("RestConnection",`Sending RPC '${e}' ${l}:`,f,r);const g={};return this.Eo(g,i,o),this.Ao(e,f,g,r).then(v=>(Ae("RestConnection",`Received RPC '${e}' ${l}: `,v),v),v=>{throw mo("RestConnection",`RPC '${e}' ${l} failed with error: `,v,"url: ",f,"request:",r),v})}vo(e,t,r,i,o,l){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Up,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${V7[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=Jk();return new Promise((l,f)=>{const g=new tS;g.setWithCredentials(!0),g.listenOnce(XD.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case yI.NO_ERROR:const E=g.getResponseJson();Ae(ts,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(E)),l(E);break;case yI.TIMEOUT:Ae(ts,`RPC '${e}' ${o} timed out`),f(new ye(ae.DEADLINE_EXCEEDED,"Request time out"));break;case yI.HTTP_ERROR:const T=g.getStatus();if(Ae(ts,`RPC '${e}' ${o} failed with status:`,T,"response text:",g.getResponseText()),T>0){let M=g.getResponseJson();Array.isArray(M)&&(M=M[0]);const R=M?.error;if(R&&R.status&&R.message){const W=function(Q){const J=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(J)>=0?J:ae.UNKNOWN}(R.status);f(new ye(W,R.message))}else f(new ye(ae.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ye(ae.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Ae(ts,`RPC '${e}' ${o} completed.`)}});const v=JSON.stringify(i);Ae(ts,`RPC '${e}' ${o} sending request:`,i),g.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=Jk(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=JD(),f=LO(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.xmlHttpFactory=new eS({})),this.Eo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const E=o.join("");Ae(ts,`Creating RPC '${e}' stream ${i}: ${E}`,g);const T=l.createWebChannel(E,g);let M=!1,R=!1;const W=new j7({ro:J=>{R?Ae(ts,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(M||(Ae(ts,`Opening RPC '${e}' stream ${i} transport.`),T.open(),M=!0),Ae(ts,`RPC '${e}' stream ${i} sending:`,J),T.send(J))},oo:()=>T.close()}),Q=(J,be,ze)=>{J.listen(be,Re=>{try{ze(Re)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return Q(T,Lp.EventType.OPEN,()=>{R||Ae(ts,`RPC '${e}' stream ${i} transport opened.`)}),Q(T,Lp.EventType.CLOSE,()=>{R||(R=!0,Ae(ts,`RPC '${e}' stream ${i} transport closed`),W.wo())}),Q(T,Lp.EventType.ERROR,J=>{R||(R=!0,mo(ts,`RPC '${e}' stream ${i} transport errored:`,J),W.wo(new ye(ae.UNAVAILABLE,"The operation could not be completed")))}),Q(T,Lp.EventType.MESSAGE,J=>{var be;if(!R){const ze=J.data[0];rt(!!ze);const Ye=ze.error||(null===(be=ze[0])||void 0===be?void 0:be.error);if(Ye){Ae(ts,`RPC '${e}' stream ${i} received error:`,Ye);const gt=Ye.status;let At=function(Vs){const Dv=qr[Vs];if(void 0!==Dv)return L4(Dv)}(gt),Fr=Ye.message;void 0===At&&(At=ae.INTERNAL,Fr="Unknown error status: "+gt+" with message "+Ye.message),R=!0,W.wo(new ye(At,Fr)),T.close()}else Ae(ts,`RPC '${e}' stream ${i} received:`,ze),W._o(ze)}}),Q(f,UO.STAT_EVENT,J=>{J.stat===vI.PROXY?Ae(ts,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===vI.NOPROXY&&Ae(ts,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{W.fo()},0),W}}function zU(){return typeof window<"u"?window:null}function qS(){return typeof document<"u"?document:null}function oE(n){return new Jj(n,!0)}class Xk{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class GU{constructor(e,t,r,i,o,l,f,g){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Xk(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,U.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,U.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,U.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new ye(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,U.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class H7 extends GU{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function t7(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:et(),i=e.targetChange.targetIds||[],o=function(g,v){return g.useProto3Json?(rt(void 0===v||"string"==typeof v),dr.fromBase64String(v||"")):(rt(void 0===v||v instanceof Uint8Array),dr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(g){const v=void 0===g.code?ae.UNKNOWN:L4(g.code);return new ye(v,g.message||"")}(l);t=new $4(r,i,o,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ec(n,r.document.name),o=kr(r.document.updateTime),l=r.document.createTime?kr(r.document.createTime):at.min(),f=new Wr({mapValue:{fields:r.document.fields}}),g=An.newFoundDocument(i,o,l,f);t=new PS(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=Ec(n,r.document),o=r.readTime?kr(r.readTime):at.min(),l=An.newNoDocument(i,o);t=new PS([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ec(n,r.document);t=new PS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,{count:i=0,unchangedNames:o}=r,l=new Wj(i,o);t=new j4(r.targetId,l)}}var g;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return at.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?at.min():o.readTime?kr(o.readTime):at.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=YI(this.serializer),t.addTarget=function(i,o){let l;const f=o.target;if(l=jI(f)?{documents:J4(i,f)}:{query:xk(i,f)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=W4(i,o.resumeToken);const g=Dk(i,o.expectedCount);null!==g&&(l.expectedCount=g)}else if(o.snapshotVersion.compareTo(at.min())>0){l.readTime=Ry(i,o.snapshotVersion.toTimestamp());const g=Dk(i,o.expectedCount);null!==g&&(l.expectedCount=g)}return l}(this.serializer,e);const r=function r7(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=YI(this.serializer),t.removeTarget=e,this.Wo(t)}}class z7 extends GU{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function n7(n,e){return n&&n.length>0?(rt(void 0!==e),n.map(t=>function(r,i){let o=kr(r.updateTime?r.updateTime:i);return o.isEqual(at.min())&&(o=kr(i)),new $j(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.cu(r,t)}return rt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=YI(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>QI(this.serializer,r))};this.Wo(t)}}class G7 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ye(ae.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.vo(e,t,r,o,l,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ae.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class q7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(wr(t),this.mu=!1):Ae("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Z7{constructor(e,t,r,i,o){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(f=>{r.enqueueAndForget((0,U.Z)(function*(){var g;Gd(l)&&(Ae("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,U.Z)(function*(v){const E=qe(v);E.vu.add(4),yield Vy(E),E.bu.set("Unknown"),E.vu.delete(4),yield aE(E)}),function(v){return g.apply(this,arguments)})(l))}))}),this.bu=new q7(r,i)}}function aE(n){return tR.apply(this,arguments)}function tR(){return tR=(0,U.Z)(function*(n){if(Gd(n))for(const e of n.Ru)yield e(!0)}),tR.apply(this,arguments)}function Vy(n){return nR.apply(this,arguments)}function nR(){return nR=(0,U.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),nR.apply(this,arguments)}function ZS(n,e){const t=qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),sR(t)?iR(t):$y(t).Ko()&&rR(t,e))}function cE(n,e){const t=qe(n),r=$y(t);t.Au.delete(e),r.Ko()&&WU(t,e),0===t.Au.size&&(r.Ko()?r.jo():Gd(t)&&t.bu.set("Unknown"))}function rR(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$y(n).su(e)}function WU(n,e){n.Vu.qt(e),$y(n).iu(e)}function iR(n){n.Vu=new Zj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),$y(n).start(),n.bu.gu()}function sR(n){return Gd(n)&&!$y(n).Uo()&&n.Au.size>0}function Gd(n){return 0===qe(n).vu.size}function qU(n){n.Vu=void 0}function K7(n){return oR.apply(this,arguments)}function oR(){return oR=(0,U.Z)(function*(n){n.Au.forEach((e,t)=>{rR(n,e)})}),oR.apply(this,arguments)}function Y7(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,U.Z)(function*(n,e){qU(n),sR(n)?(n.bu.Iu(e),iR(n)):n.bu.set("Unknown")}),aR.apply(this,arguments)}function Q7(n,e,t){return cR.apply(this,arguments)}function cR(){return cR=(0,U.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof $4&&2===e.state&&e.cause)try{yield(r=(0,U.Z)(function*(i,o){const l=o.cause;for(const f of o.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield KS(n,r)}else if(e instanceof PS?n.Vu.Ht(e):e instanceof j4?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(at.min()))try{const r=yield NU(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const l=i.Vu.ce(o);return l.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.Au.get(g);v&&i.Au.set(g,v.withResumeToken(f.resumeToken,o))}}),l.targetMismatches.forEach((f,g)=>{const v=i.Au.get(f);if(!v)return;i.Au.set(f,v.withResumeToken(dr.EMPTY_BYTE_STRING,v.snapshotVersion)),WU(i,f);const E=new Jl(v.target,f,g,v.sequenceNumber);rR(i,E)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ae("RemoteStore","Failed to raise snapshot:",r),yield KS(n,r)}var r}),cR.apply(this,arguments)}function KS(n,e,t){return lR.apply(this,arguments)}function lR(){return lR=(0,U.Z)(function*(n,e,t){if(!Li(e))throw e;n.vu.add(1),yield Vy(n),n.bu.set("Offline"),t||(t=()=>NU(n.localStore)),n.asyncQueue.enqueueRetryable((0,U.Z)(function*(){Ae("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield aE(n)}))}),lR.apply(this,arguments)}function ZU(n,e){return e().catch(t=>KS(n,t,e))}function jy(n){return uR.apply(this,arguments)}function uR(){return uR=(0,U.Z)(function*(n){const e=qe(n),t=Wd(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;J7(e);)try{const i=yield F7(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,X7(e,i)}catch(i){yield KS(e,i)}KU(e)&&YU(e)}),uR.apply(this,arguments)}function J7(n){return Gd(n)&&n.Eu.length<10}function X7(n,e){n.Eu.push(e);const t=Wd(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function KU(n){return Gd(n)&&!Wd(n).Uo()&&n.Eu.length>0}function YU(n){Wd(n).start()}function e$(n){return dR.apply(this,arguments)}function dR(){return dR=(0,U.Z)(function*(n){Wd(n).hu()}),dR.apply(this,arguments)}function t$(n){return hR.apply(this,arguments)}function hR(){return hR=(0,U.Z)(function*(n){const e=Wd(n);for(const t of n.Eu)e.uu(t.mutations)}),hR.apply(this,arguments)}function n$(n,e,t){return fR.apply(this,arguments)}function fR(){return fR=(0,U.Z)(function*(n,e,t){const r=n.Eu.shift(),i=Ik.from(r,e,t);yield ZU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield jy(n)}),fR.apply(this,arguments)}function r$(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,U.Z)(function*(n,e){var t;e&&Wd(n).ou&&(yield(t=(0,U.Z)(function*(r,i){if(F4(o=i.code)&&o!==ae.ABORTED){const l=r.Eu.shift();Wd(r).Qo(),yield ZU(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield jy(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),KU(n)&&YU(n)}),pR.apply(this,arguments)}function QU(n,e){return gR.apply(this,arguments)}function gR(){return gR=(0,U.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const r=Gd(t);t.vu.add(3),yield Vy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield aE(t)}),gR.apply(this,arguments)}function mR(n,e){return _R.apply(this,arguments)}function _R(){return _R=(0,U.Z)(function*(n,e){const t=qe(n);e?(t.vu.delete(2),yield aE(t)):e||(t.vu.add(2),yield Vy(t),t.bu.set("Unknown"))}),_R.apply(this,arguments)}function $y(n){return n.Su||(n.Su=function(e,t,r){const i=qe(e);return i.fu(),new H7(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:K7.bind(null,n),ao:Y7.bind(null,n),nu:Q7.bind(null,n)}),n.Ru.push(function(){var e=(0,U.Z)(function*(t){t?(n.Su.Qo(),sR(n)?iR(n):n.bu.set("Unknown")):(yield n.Su.stop(),qU(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Wd(n){return n.Du||(n.Du=function(e,t,r){const i=qe(e);return i.fu(),new z7(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:e$.bind(null,n),ao:r$.bind(null,n),au:t$.bind(null,n),cu:n$.bind(null,n)}),n.Ru.push(function(){var e=(0,U.Z)(function*(t){t?(n.Du.Qo(),yield jy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ae("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class yR{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,f=new yR(e,t,l,i,o);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ye(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hy(n,e){if(wr("AsyncQueue",`${e}: ${n}`),Li(n))return new ye(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class zy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=Mt(),this.sortedSet=new Mn(this.comparator)}static emptySet(e){return new zy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new zy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class JU{constructor(){this.Cu=new Mn(We.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Gy{constructor(e,t,r,i,o,l,f,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new Gy(e,t,zy.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&D(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class i${constructor(){this.Nu=void 0,this.listeners=[]}}class s${constructor(){this.queries=new $e(e=>A(e),D),this.onlineState="Unknown",this.ku=new Set}}function vR(n,e){return CR.apply(this,arguments)}function CR(){return CR=(0,U.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new i$),i)try{o.Nu=yield t.onListen(r)}catch(l){const f=Hy(l,`Initialization of query '${N(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&ER(t)}),CR.apply(this,arguments)}function wR(n,e){return IR.apply(this,arguments)}function IR(){return IR=(0,U.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),IR.apply(this,arguments)}function o$(n,e){const t=qe(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.$u(i)&&(r=!0);l.Nu=i}}r&&ER(t)}function a$(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function ER(n){n.ku.forEach(e=>{e.next()})}class bR{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Gy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Gy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class c${constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class XU{constructor(e){this.serializer=e}rr(e){return Ec(this.serializer,e)}ur(e){return e.metadata.exists?Q4(this.serializer,e.document,!1):An.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return kr(e)}}class l${constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=e3(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Wt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new XU(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.rr(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Pt()).add(o);t.set(l,f)}}return t}complete(){var e=this;return(0,U.Z)(function*(){const t=yield function L7(n,e,t,r){return Wk.apply(this,arguments)}(e.localStore,new XU(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield U7(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function e3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class t3{constructor(e){this.key=e}}class n3{constructor(e){this.key=e}}class r3{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Pt(),this.mutatedKeys=Pt(),this.tc=ue(e),this.ec=new zy(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new JU,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,T)=>{const M=i.get(E),R=q(this.query,T)?T:null,W=!!M&&this.mutatedKeys.has(M.key),Q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let J=!1;M&&R?M.data.isEqual(R.data)?W!==Q&&(r.track({type:3,doc:R}),J=!0):this.rc(M,R)||(r.track({type:2,doc:R}),J=!0,(g&&this.tc(R,g)>0||v&&this.tc(R,v)<0)&&(f=!0)):!M&&R?(r.track({type:0,doc:R}),J=!0):M&&!R&&(r.track({type:1,doc:M}),J=!0,(g||v)&&(f=!0)),J&&(R?(l=l.add(R),o=Q?o.add(E):o.delete(E)):(l=l.delete(E),o=o.delete(E)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const E="F"===this.query.limitType?l.last():l.first();l=l.delete(E.key),o=o.delete(E.key),r.track({type:1,doc:E})}return{ec:l,ic:r,zi:f,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((v,E)=>function(T,M){const R=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return R(T)-R(M)}(v.type,E.type)||this.tc(v.doc,E.doc)),this.oc(r);const l=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,g=f!==this.Xu;return this.Xu=f,0!==o.length||g?{snapshot:new Gy(this.query,e.ec,i,o,e.mutatedKeys,0===f,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new JU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Pt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new n3(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new t3(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Pt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Gy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class u${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class d${constructor(e){this.key=e,this.fc=!1}}class h${constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new $e(f=>A(f),D),this._c=new Map,this.mc=new Set,this.gc=new Mn(We.comparator),this.yc=new Map,this.Ic=new Uk,this.Tc={},this.Ec=new Map,this.Ac=Jp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function f$(n,e){return TR.apply(this,arguments)}function TR(){return TR=(0,U.Z)(function*(n,e){const t=ZR(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const l=yield Uy(t.localStore,y(e)),f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield DR(t,e,r,"current"===f,l.resumeToken),t.isPrimaryClient&&ZS(t.remoteStore,l)}return i}),TR.apply(this,arguments)}function DR(n,e,t,r,i){return SR.apply(this,arguments)}function SR(){return SR=(0,U.Z)(function*(n,e,t,r,i){n.Rc=(T,M,R)=>{return(W=(0,U.Z)(function*(Q,J,be,ze){let Re=J.view.sc(be);Re.zi&&(Re=yield HS(Q.localStore,J.query,!1).then(({documents:At})=>J.view.sc(At,Re)));const Ye=ze&&ze.targetChanges.get(J.targetId),gt=J.view.applyChanges(Re,Q.isPrimaryClient,Ye);return LR(Q,J.targetId,gt.cc),gt.snapshot}),function(Q,J,be,ze){return W.apply(this,arguments)})(n,T,M,R);var W};const o=yield HS(n.localStore,e,!0),l=new r3(e,o.ir),f=l.sc(o.documents),g=ZI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(f,n.isPrimaryClient,g);LR(n,t,v.cc);const E=new u$(e,t,l);return n.wc.set(e,E),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),SR.apply(this,arguments)}function p$(n,e){return MR.apply(this,arguments)}function MR(){return MR=(0,U.Z)(function*(n,e){const t=qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!D(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield By(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),cE(t.remoteStore,r.targetId),Wy(t,r.targetId)}).catch(ur))):(Wy(t,r.targetId),yield By(t.localStore,r.targetId,!0))}),MR.apply(this,arguments)}function AR(){return AR=(0,U.Z)(function*(n,e,t){const r=KR(n);try{const i=yield function(o,l){const f=qe(o),g=Ln.now(),v=l.reduce((M,R)=>M.add(R.key),Pt());let E,T;return f.persistence.runTransaction("Locally write mutations","readwrite",M=>{let R=fe(),W=Pt();return f.Zi.getEntries(M,v).next(Q=>{R=Q,R.forEach((J,be)=>{be.isValidDocument()||(W=W.add(J))})}).next(()=>f.localDocuments.getOverlayedDocuments(M,R)).next(Q=>{E=Q;const J=[];for(const be of l){const ze=zj(be,E.get(be.key).overlayedDocument);null!=ze&&J.push(new Ql(be.key,ze,RI(ze.value.mapValue),nr.exists(!0)))}return f.mutationQueue.addMutationBatch(M,g,J,l)}).next(Q=>{T=Q;const J=Q.applyToLocalDocumentSet(E,W);return f.documentOverlayCache.saveOverlays(M,Q.batchId,J)})}).then(()=>({batchId:T.batchId,changes:cn(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,f){let g=o.Tc[o.currentUser.toKey()];g||(g=new Mn(Et)),g=g.insert(l,f),o.Tc[o.currentUser.toKey()]=g}(r,i.batchId,t),yield Xl(r,i.changes),yield jy(r.remoteStore)}catch(i){const o=Hy(i,"Failed to persist write");t.reject(o)}}),AR.apply(this,arguments)}function i3(n,e){return xR.apply(this,arguments)}function xR(){return xR=(0,U.Z)(function*(n,e){const t=qe(n);try{const r=yield function N7(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((E,T)=>{const M=i.get(T);if(!M)return;f.push(t.Bs.removeMatchingKeys(o,E.removedDocuments,T).next(()=>t.Bs.addMatchingKeys(o,E.addedDocuments,T)));let R=M.withSequenceNumber(o.currentSequenceNumber);var W,Q,J;null!==e.targetMismatches.get(T)?R=R.withResumeToken(dr.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):E.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(E.resumeToken,r)),i=i.insert(T,R),Q=R,J=E,(0===(W=M).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(o,R))});let g=fe(),v=Pt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,E))}),f.push(FU(o,l,e.documentUpdates).next(E=>{g=E.nr,v=E.sr})),!r.isEqual(at.min())){const E=t.Bs.getLastRemoteSnapshotVersion(o).next(T=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));f.push(E)}return te.waitFor(f).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,g,v)).next(()=>g)}).then(o=>(t.Ji=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.yc.get(o);l&&(rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?rt(l.fc):i.removedDocuments.size>0&&(rt(l.fc),l.fc=!1))}),yield Xl(t,r,e)}catch(r){yield ur(r)}}),xR.apply(this,arguments)}function s3(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,l)=>{const f=l.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(o,l){const f=qe(o);f.onlineState=l;let g=!1;f.queries.forEach((v,E)=>{for(const T of E.listeners)T.Mu(l)&&(g=!0)}),g&&ER(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function m$(n,e,t){return PR.apply(this,arguments)}function PR(){return PR=(0,U.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let l=new Mn(We.comparator);l=l.insert(o,An.newNoDocument(o,at.min()));const f=Pt().add(o),g=new qI(at.min(),new Map,new Mn(Et),l,f);yield i3(r,g),r.gc=r.gc.remove(o),r.yc.delete(e),UR(r)}else yield By(r.localStore,e,!1).then(()=>Wy(r,e,t)).catch(ur)}),PR.apply(this,arguments)}function _$(n,e){return OR.apply(this,arguments)}function OR(){return OR=(0,U.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield function R7(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,f,g,v){const E=g.batch,T=E.keys();let M=te.resolve();return T.forEach(R=>{M=M.next(()=>v.getEntry(f,R)).next(W=>{const Q=g.docVersions.get(R);rt(null!==Q),W.version.compareTo(Q)<0&&(E.applyToRemoteDocument(W,g),W.isValidDocument()&&(W.setReadTime(g.commitVersion),v.addEntry(W)))})}),M.next(()=>l.mutationQueue.removeMutationBatch(f,E))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Pt();for(let g=0;g<l.mutationResults.length;++g)l.mutationResults[g].transformResults.length>0&&(f=f.add(l.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);FR(t,r,null),NR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xl(t,i)}catch(i){yield ur(i)}}),OR.apply(this,arguments)}function y$(n,e,t){return kR.apply(this,arguments)}function kR(){return kR=(0,U.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(o,l){const f=qe(o);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return f.mutationQueue.lookupMutationBatch(g,l).next(E=>(rt(null!==E),v=E.keys(),f.mutationQueue.removeMutationBatch(g,E))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,v,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>f.localDocuments.getDocuments(g,v))})}(r.localStore,e);FR(r,e,t),NR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xl(r,i)}catch(i){yield ur(i)}}),kR.apply(this,arguments)}function RR(){return RR=(0,U.Z)(function*(n,e){const t=qe(n);Gd(t.remoteStore)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const l=qe(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Hy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),RR.apply(this,arguments)}function NR(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function FR(n,e,t){const r=qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Wy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||o3(n,r)})}function o3(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(cE(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),UR(n))}function LR(n,e,t){for(const r of t)r instanceof t3?(n.Ic.addReference(r.key,e),C$(n,r)):r instanceof n3?(Ae("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||o3(n,r.key)):et()}function C$(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ae("SyncEngine","New document in limbo: "+t),n.mc.add(r),UR(n))}function UR(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new We(Wt.fromString(e)),r=n.Ac.next();n.yc.set(r,new d$(t)),n.gc=n.gc.insert(t,r),ZS(n.remoteStore,new Jl(y(s(t.path)),r,"TargetPurposeLimboResolution",fs.ct))}}function Xl(n,e,t){return BR.apply(this,arguments)}function BR(){return BR=(0,U.Z)(function*(n,e,t){const r=qe(n),i=[],o=[],l=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,g)=>{l.push(r.Rc(g,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const E=Hk.Li(g.targetId,v);o.push(E)}}))}),yield Promise.all(l),r.dc.nu(i),yield(f=(0,U.Z)(function*(g,v){const E=qe(g);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>te.forEach(v,M=>te.forEach(M.Fi,R=>E.persistence.referenceDelegate.addReference(T,M.targetId,R)).next(()=>te.forEach(M.Bi,R=>E.persistence.referenceDelegate.removeReference(T,M.targetId,R)))))}catch(T){if(!Li(T))throw T;Ae("LocalStore","Failed to update sequence numbers: "+T)}for(const T of v){const M=T.targetId;if(!T.fromCache){const R=E.Ji.get(M),Q=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);E.Ji=E.Ji.insert(M,Q)}}}),function(g,v){return f.apply(this,arguments)})(r.localStore,o))}),BR.apply(this,arguments)}function w$(n,e){return VR.apply(this,arguments)}function VR(){return VR=(0,U.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const r=yield RU(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(f=>{f.reject(new ye(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xl(t,r.er)}var i}),VR.apply(this,arguments)}function I$(n,e){const t=qe(n),r=t.yc.get(e);if(r&&r.fc)return Pt().add(r.key);{let i=Pt();const o=t._c.get(e);if(!o)return i;for(const l of o){const f=t.wc.get(l);i=i.unionWith(f.view.nc)}return i}}function E$(n,e){return jR.apply(this,arguments)}function jR(){return jR=(0,U.Z)(function*(n,e){const t=qe(n),r=yield HS(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&LR(t,e.targetId,i.cc),i}),jR.apply(this,arguments)}function b$(n,e){return $R.apply(this,arguments)}function $R(){return $R=(0,U.Z)(function*(n,e){const t=qe(n);return UU(t.localStore,e).then(r=>Xl(t,r))}),$R.apply(this,arguments)}function T$(n,e,t,r){return HR.apply(this,arguments)}function HR(){return HR=(0,U.Z)(function*(n,e,t,r){const i=qe(n),o=yield function(l,f){const g=qe(l),v=qe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",E=>v.Sn(E,f).next(T=>T?g.localDocuments.getDocuments(E,T):te.resolve(null)))}(i.localStore,e);var f;null!==o?("pending"===t?yield jy(i.remoteStore):"acknowledged"===t||"rejected"===t?(FR(i,e,r||null),NR(i,e),f=e,qe(qe(i.localStore).mutationQueue).Cn(f)):et(),yield Xl(i,o)):Ae("SyncEngine","Cannot apply mutation batch with id: "+e)}),HR.apply(this,arguments)}function zR(){return zR=(0,U.Z)(function*(n,e){const t=qe(n);if(ZR(t),KR(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield a3(t,r.toArray());t.vc=!0,yield mR(t.remoteStore,!0);for(const o of i)ZS(t.remoteStore,o)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Wy(t,l),By(t.localStore,l,!0))),cE(t.remoteStore,l)}),yield i,yield a3(t,r),function(o){const l=qe(o);l.yc.forEach((f,g)=>{cE(l.remoteStore,g)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Mn(We.comparator)}(t),t.vc=!1,yield mR(t.remoteStore,!1)}}),zR.apply(this,arguments)}function a3(n,e,t){return GR.apply(this,arguments)}function GR(){return GR=(0,U.Z)(function*(n,e,t){const r=qe(n),i=[],o=[];for(const l of e){let f;const g=r._c.get(l);if(g&&0!==g.length){f=yield Uy(r.localStore,y(g[0]));for(const v of g){const E=r.wc.get(v),T=yield E$(r,E);T.snapshot&&o.push(T.snapshot)}}else{const v=yield LU(r.localStore,l);f=yield Uy(r.localStore,v),yield DR(r,c3(v),l,!1,f.resumeToken)}i.push(f)}return r.dc.nu(o),i}),GR.apply(this,arguments)}function c3(n){return _k(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function S$(n){const e=qe(n);return qe(qe(e.localStore).persistence).$i()}function M$(n,e,t,r){return WR.apply(this,arguments)}function WR(){return WR=(0,U.Z)(function*(n,e,t,r){const i=qe(n);if(i.vc)return void Ae("SyncEngine","Ignoring unexpected query state notification.");const o=i._c.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=yield UU(i.localStore,Y(o[0])),f=qI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,dr.EMPTY_BYTE_STRING);yield Xl(i,l,f);break}case"rejected":yield By(i.localStore,e,!0),Wy(i,e,r);break;default:et()}}),WR.apply(this,arguments)}function A$(n,e,t){return qR.apply(this,arguments)}function qR(){return qR=(0,U.Z)(function*(n,e,t){const r=ZR(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ae("SyncEngine","Adding an already active target "+i);continue}const o=yield LU(r.localStore,i),l=yield Uy(r.localStore,o);yield DR(r,c3(o),l.targetId,!1,l.resumeToken),ZS(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield By(r.localStore,i,!1).then(()=>{cE(r.remoteStore,i),Wy(r,i)}).catch(ur))}}),qR.apply(this,arguments)}function ZR(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=i3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m$.bind(null,e),e.dc.nu=o$.bind(null,e.eventManager),e.dc.Pc=a$.bind(null,e.eventManager),e}function KR(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y$.bind(null,e),e}class lE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,U.Z)(function*(){t.serializer=oE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return kU(this.persistence,new OU,e.initialUser,this.serializer)}createPersistence(e){return new Bk(VS.zs,this.serializer)}createSharedClientState(e){return new $U}terminate(){var e=this;return(0,U.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YR extends lE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,U.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield KR(r.Vc.syncEngine),yield jy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return kU(this.persistence,new OU,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new EU(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new lS(t,this.persistence);return new f4(e.asyncQueue,r)}createPersistence(e){const t=$k(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?es.withCacheSize(this.cacheSizeBytes):es.DEFAULT;return new jk(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,zU(),qS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $U}}class l3 extends YR{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,U.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof Qk&&(r.sharedClientState.syncEngine={jr:T$.bind(null,i),zr:M$.bind(null,i),Wr:A$.bind(null,i),$i:S$.bind(null,i),Qr:b$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var o=(0,U.Z)(function*(l){yield function D$(n,e){return zR.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=zU();if(!Qk.D(t))throw new ye(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$k(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qk(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class qy{initialize(e,t){var r=this;return(0,U.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>s3(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=w$.bind(null,r.syncEngine),yield mR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new s$}createDatastore(e){const t=oE(e.databaseInfo.databaseId),r=new $7(e.databaseInfo);return new G7(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=f=>s3(this.syncEngine,f,0),l=HU.D()?new HU:new B7,new Z7(t,r,i,o,l);var t,r,i,o,l}createSyncEngine(e,t){return function(r,i,o,l,f,g,v){const E=new h$(r,i,o,l,f,g);return v&&(E.vc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,U.Z)(function*(t){const r=qe(t);Ae("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Vy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function u3(n,e=10240){let t=0;return{read:()=>(0,U.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,U.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class YS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class O${constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Or,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,U.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,U.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,U.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const o=yield e.$c(i);return new c$(JSON.parse(o),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,U.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,U.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,U.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class k${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,U.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ye(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,U.Z)(function*(o,l){const f=qe(o),g=YI(f.serializer)+"/documents",v={documents:l.map(R=>KI(f.serializer,R))},E=yield f.vo("BatchGetDocuments",g,v,l.length),T=new Map;E.forEach(R=>{const W=function e7(n,e){return"found"in e?function(t,r){rt(!!r.found);const i=Ec(t,r.found.name),o=kr(r.found.updateTime),l=r.found.createTime?kr(r.found.createTime):at.min(),f=new Wr({mapValue:{fields:r.found.fields}});return An.newFoundDocument(i,o,l,f)}(n,e):"missing"in e?function(t,r){rt(!!r.missing),rt(!!r.readTime);const i=Ec(t,r.missing),o=kr(r.readTime);return An.newNoDocument(i,o)}(n,e):et()}(f.serializer,R);T.set(W.key.toString(),W)});const M=[];return l.forEach(R=>{const W=T.get(R.toString());rt(!!W),M.push(W)}),M}),function(o,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ky(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,U.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=We.fromPath(i);e.mutations.push(new Ck(o,e.precondition(o)))}),yield(r=(0,U.Z)(function*(i,o){const l=qe(i),f=YI(l.serializer)+"/documents",g={writes:o.map(v=>QI(l.serializer,v))};yield l.Io("Commit",f,g)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=at.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ye(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(at.min())?nr.exists(!1):nr.updateTime(t):nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(at.min()))throw new ye(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nr.updateTime(t)}return nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class R${constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Bc=r.maxAttempts,this.qo=new Xk(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,U.Z)(function*(){const t=new k$(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Uc(o)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!$p(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!F4(t)}return!1}}class N${constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pr.UNAUTHENTICATED,this.clientId=Vp.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,U.Z)(function*(f){Ae("FirestoreClient","Received user=",f.uid),yield o.authCredentialListener(f),o.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ae("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,U.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,U.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Hy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function QS(n,e){return QR.apply(this,arguments)}function QR(){return QR=(0,U.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,U.Z)(function*(o){r.isEqual(o)||(yield RU(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),QR.apply(this,arguments)}function JR(n,e){return XR.apply(this,arguments)}function XR(){return XR=(0,U.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield eN(n);Ae("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>QU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>QU(e.remoteStore,o)),n._onlineComponents=e}),XR.apply(this,arguments)}function d3(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function eN(n){return tN.apply(this,arguments)}function tN(){return tN=(0,U.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield QS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!d3(t))throw t;mo("Error using user provided cache. Falling back to memory cache: "+t),yield QS(n,new lE)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),yield QS(n,new lE);return n._offlineComponents}),tN.apply(this,arguments)}function JS(n){return nN.apply(this,arguments)}function nN(){return nN=(0,U.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield JR(n,n._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),yield JR(n,new qy))),n._onlineComponents}),nN.apply(this,arguments)}function h3(n){return eN(n).then(e=>e.persistence)}function XS(n){return eN(n).then(e=>e.localStore)}function f3(n){return JS(n).then(e=>e.remoteStore)}function rN(n){return JS(n).then(e=>e.syncEngine)}function Zy(n){return iN.apply(this,arguments)}function iN(){return iN=(0,U.Z)(function*(n){const e=yield JS(n),t=e.eventManager;return t.onListen=f$.bind(null,e.syncEngine),t.onUnlisten=p$.bind(null,e.syncEngine),t}),iN.apply(this,arguments)}function g3(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function(i,o,l,f,g){const v=new YS({next:T=>{o.enqueueAndForget(()=>wR(i,E));const M=T.docs.has(l);!M&&T.fromCache?g.reject(new ye(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&T.fromCache&&f&&"server"===f.source?g.reject(new ye(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new bR(s(l.path),v,{includeMetadataChanges:!0,Ku:!0});return vR(i,E)}(yield Zy(n),n.asyncQueue,e,t,r)})),r.promise}function m3(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function(i,o,l,f,g){const v=new YS({next:T=>{o.enqueueAndForget(()=>wR(i,E)),T.fromCache&&"server"===f.source?g.reject(new ye(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new bR(l,v,{includeMetadataChanges:!0,Ku:!0});return vR(i,E)}(yield Zy(n),n.asyncQueue,e,t,r)})),r.promise}function _3(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const y3=new Map;function sN(n,e,t){if(!t)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function v3(n,e,t,r){if(!0===e&&!0===r)throw new ye(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function C3(n){if(!We.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function w3(n){if(We.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eM(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eM(n);throw new ye(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function I3(n,e){if(e<=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class E3{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ye(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ye(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=_3(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new E3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ye(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new E3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new u4;switch(t.type){case"firstParty":return new zO(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ye(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=y3.get(e);t&&(Ae("ComponentProvider","Removing Datastore"),y3.delete(e),t.terminate())}(this),Promise.resolve()}}function b3(n,e,t,r={}){var i;const o=(n=Jt(n,uE))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==l&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let f,g;if("string"==typeof r.mockUserToken)f=r.mockUserToken,g=Pr.MOCK_USER;else{f=(0,z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ye(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Pr(v)}n._authCredentials=new $O(new jO(f,g))}}class Yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}}class Bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class bc extends Bi{constructor(e,t,r){super(e,t,s(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new We(e))}withConverter(e){return new bc(this.firestore,e,this._path)}}function T3(n,e,...t){if(n=(0,z.m9)(n),sN("collection","path",e),n instanceof uE){const r=Wt.fromString(e,...t);return w3(r),new bc(n,null,r)}{if(!(n instanceof Yn||n instanceof bc))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return w3(r),new bc(n.firestore,null,r)}}function tM(n,e,...t){if(n=(0,z.m9)(n),1===arguments.length&&(e=Vp.A()),sN("doc","path",e),n instanceof uE){const r=Wt.fromString(e,...t);return C3(r),new Yn(n,null,new We(r))}{if(!(n instanceof Yn||n instanceof bc))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return C3(r),new Yn(n.firestore,n instanceof bc?n.converter:null,new We(r))}}function D3(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),(n instanceof Yn||n instanceof bc)&&(e instanceof Yn||e instanceof bc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function oN(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),n instanceof Bi&&e instanceof Bi&&n.firestore===e.firestore&&D(n._query,e._query)&&n.converter===e.converter}class G${constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Xk(this,"async_queue_retry"),this.Xc=()=>{const t=qS();t&&Ae("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=qS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=qS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Or;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,U.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Li(t))throw t;Ae("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,wr("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=yR.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&et()}verifyOperationInProgress(){}sa(){var e=this;return(0,U.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function aN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class W${constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qn extends uE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new G$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||S3(this),this._firestoreClient.terminate()}}function Z$(n,e){const t="object"==typeof n?n:(0,Dn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Dn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(0,z.P0)("firestore");o&&b3(i,...o)}return i}function Rr(n){return n._firestoreClient||S3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function S3(n){var e,t,r;const i=n._freezeSettings(),o=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _4(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,_3(v.experimentalLongPollingOptions),v.useFetchStreams));var f,v;n._firestoreClient=new N$(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function M3(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,U.Z)(function*(){try{yield QS(n,t),yield JR(n,e),r.resolve()}catch(i){const o=i;if(!d3(o))throw o;mo("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function A3(n){if(n._initialized||n._terminated)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Tc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tc(dr.fromBase64String(e))}catch(t){throw new ye(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tc(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class eu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ye(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class eg{constructor(e){this._methodName=e}}class nM{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}}const i8=/^__.*__$/;class s8{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ql(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oy(e,this.data,t,this.fieldTransforms)}}class x3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ql(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function P3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class rM{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new rM(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return oM(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(P3(this.ca)&&i8.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class o8{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||oE(e)}ya(e,t,r,i=!1){return new rM({ca:e,methodName:t,ga:r,path:tr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tg(n){const e=n._freezeSettings(),t=oE(n._databaseId);return new o8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iM(n,e,t,r,i,o={}){const l=n.ya(o.merge||o.mergeFields?2:0,e,t,i);dN("Data must be an object, but it was:",l,r);const f=R3(r,l);let g,v;if(o.merge)g=new Ui(l.fieldMask),v=l.fieldTransforms;else if(o.mergeFields){const E=[];for(const T of o.mergeFields){const M=fE(e,T,t);if(!l.contains(M))throw new ye(ae.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);F3(E,M)||E.push(M)}g=new Ui(E),v=l.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,v=l.fieldTransforms;return new s8(new Wr(f),g,v)}class hE extends eg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hE}}function O3(n,e,t){return new rM({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cN extends eg{_toFieldTransform(e){return new zI(e.path,new xy)}isEqual(e){return e instanceof cN}}class a8 extends eg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=O3(this,e,!0),r=this.pa.map(o=>ng(o,t)),i=new Gp(r);return new zI(e.path,i)}isEqual(e){return this===e}}class c8 extends eg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=O3(this,e,!0),r=this.pa.map(o=>ng(o,t)),i=new Wp(r);return new zI(e.path,i)}isEqual(e){return this===e}}class l8 extends eg{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Py(e.serializer,T4(e.serializer,this.Ia));return new zI(e.path,t)}isEqual(e){return this===e}}function lN(n,e,t,r){const i=n.ya(1,e,t);dN("Data must be an object, but it was:",i,r);const o=[],l=Wr.empty();Zl(r,(g,v)=>{const E=sM(e,g,t);v=(0,z.m9)(v);const T=i.da(E);if(v instanceof hE)o.push(E);else{const M=ng(v,T);null!=M&&(o.push(E),l.set(E,M))}});const f=new Ui(o);return new x3(l,f,i.fieldTransforms)}function uN(n,e,t,r,i,o){const l=n.ya(1,e,t),f=[fE(e,r,t)],g=[i];if(o.length%2!=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<o.length;M+=2)f.push(fE(e,o[M])),g.push(o[M+1]);const v=[],E=Wr.empty();for(let M=f.length-1;M>=0;--M)if(!F3(v,f[M])){const R=f[M];let W=g[M];W=(0,z.m9)(W);const Q=l.da(R);if(W instanceof hE)v.push(R);else{const J=ng(W,Q);null!=J&&(v.push(R),E.set(R,J))}}const T=new Ui(v);return new x3(E,T,l.fieldTransforms)}function k3(n,e,t,r=!1){return ng(t,n.ya(r?4:3,e))}function ng(n,e){if(N3(n=(0,z.m9)(n)))return dN("Unsupported field value:",e,n),R3(n,e);if(n instanceof eg)return function(t,r){if(!P3(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const l of t){let f=ng(l,r.wa(o));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return T4(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ln.fromDate(t);return{timestampValue:Ry(r.serializer,i)}}if(t instanceof Ln){const i=new Ln(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ry(r.serializer,i)}}if(t instanceof nM)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tc)return{bytesValue:W4(r.serializer,t._byteString)};if(t instanceof Yn){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sk(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${eM(t)}`)}(n,e)}function R3(n,e){const t={};return sk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zl(n,(r,i)=>{const o=ng(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function N3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof nM||n instanceof Tc||n instanceof Yn||n instanceof eg)}function dN(n,e,t){if(!N3(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=eM(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function fE(n,e,t){if((e=(0,z.m9)(e))instanceof eu)return e._internalPath;if("string"==typeof e)return sM(n,e);throw oM("Field path arguments must be of type string or ",n,!1,void 0,t)}const u8=new RegExp("[~\\*/\\[\\]]");function sM(n,e,t){if(e.search(u8)>=0)throw oM(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new eu(...e.split("."))._internalPath}catch{throw oM(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function oM(n,e,t,r,i){const o=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(o||l)&&(g+=" (found",o&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new ye(ae.INVALID_ARGUMENT,f+n+g)}function F3(n,e){return n.some(t=>t.isEqual(e))}class pE{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new d8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(aM("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class d8 extends pE{data(){return super.data()}}function aM(n,e){return"string"==typeof e?sM(n,e):e instanceof eu?e._internalPath:e._delegate._internalPath}function L3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ye(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hN{}class gE extends hN{}function qd(n,e,...t){let r=[];e instanceof hN&&r.push(e),r=r.concat(t),function(i){const o=i.filter(f=>f instanceof Ky).length,l=i.filter(f=>f instanceof mE).length;if(o>1||o>0&&l>0)throw new ye(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class mE extends gE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new mE(e,t,r)}_apply(e){const t=this._parse(e);return j3(e._query,t),new Bi(e.firestore,e.converter,C(e._query,t))}_parse(e){const t=tg(e.firestore);return function(i,o,l,f,g,v,E){let T;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){V3(E,v);const M=[];for(const R of E)M.push(B3(f,i,R));T={arrayValue:{values:M}}}else T=B3(f,i,E)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||V3(E,v),T=k3(l,"where",E,"in"===v||"not-in"===v);return $t.create(g,v,T)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ky extends hN{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ky(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:dn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const f of l)j3(o,f),o=C(o,f)}(e._query,t),new Bi(e.firestore,e.converter,C(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fN extends gE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fN(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Vd(i,o);return function(f,g){if(null===c(f)){const v=d(f);null!==v&&$3(0,v,g.field)}}(r,l),l}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new ka(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class cM extends gE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new cM(e,t,r)}_apply(e){return new Bi(e.firestore,e.converter,b(e._query,this._limit,this._limitType))}}class lM extends gE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new lM(e,t,r)}_apply(e){const t=U3(e,this.type,this._docOrFields,this._inclusive);return new Bi(e.firestore,e.converter,(i=t,new ka((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class uM extends gE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new uM(e,t,r)}_apply(e){const t=U3(e,this.type,this._docOrFields,this._inclusive);return new Bi(e.firestore,e.converter,(i=t,new ka((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function U3(n,e,t,r){if(t[0]=(0,z.m9)(t[0]),t[0]instanceof pE)return function(i,o,l,f,g){if(!f)throw new ye(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const E of p(i))if(E.field.isKeyField())v.push(xa(o,f.key));else{const T=f.data.field(E.field);if(Kl(T))throw new ye(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const M=E.field.canonicalString();throw new ye(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}v.push(T)}return new Pa(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=tg(n.firestore);return function(o,l,f,g,v,E){const T=o.explicitOrderBy;if(v.length>T.length)throw new ye(ae.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let R=0;R<v.length;R++){const W=v[R];if(T[R].field.isKeyField()){if("string"!=typeof W)throw new ye(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof W}`);if(!h(o)&&-1!==W.indexOf("/"))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${W}' contains a slash.`);const Q=o.path.child(Wt.fromString(W));if(!We.isDocumentKey(Q))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const J=new We(Q);M.push(xa(l,J))}else{const Q=k3(f,g,W);M.push(Q)}}return new Pa(M,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function B3(n,e,t){if("string"==typeof(t=(0,z.m9)(t))){if(""===t)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h(e)&&-1!==t.indexOf("/"))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Wt.fromString(t));if(!We.isDocumentKey(r))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xa(n,new We(r))}if(t instanceof Yn)return xa(n,t._key);throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eM(t)}.`)}function V3(n,e){if(!Array.isArray(n)||0===n.length)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j3(n,e){if(e.isInequality()){const r=d(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=c(n);null!==o&&$3(0,i,o)}const t=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ye(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function $3(n,e,t){if(!t.isEqual(e))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class pN{convertValue(e,t="none"){switch(Ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Zl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new nM(Un(e.latitude),Un(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=PI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ey(e));default:return null}}convertTimestamp(e){const t=Cc(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Wt.fromString(e);rt(nU(r));const i=new Ma(r.get(1),r.get(3)),o=new We(r.popFirst(5));return i.isEqual(t)||wr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function dM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class C8 extends pN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}class rg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tu extends pE{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _E(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(aM("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class _E extends tu{data(e={}){return super.data(e)}}class Zd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new rg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _E(this._firestore,this._userDataWriter,r.key,r,new rg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new _E(r._firestore,r._userDataWriter,l.doc.key,l.doc,new rg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new _E(r._firestore,r._userDataWriter,l.doc.key,l.doc,new rg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==l.type&&(g=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),v=o.indexOf(l.doc.key)),{type:I8(l.type),doc:f,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function I8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function z3(n,e){return n instanceof tu&&e instanceof tu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Zd&&e instanceof Zd&&n._firestore===e._firestore&&oN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Kd extends pN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}function G3(n,e,t){n=Jt(n,Yn);const r=Jt(n.firestore,Qn),i=dM(n.converter,e,t);return Yy(r,[iM(tg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,nr.none())])}function W3(n,e,t,...r){n=Jt(n,Yn);const i=Jt(n.firestore,Qn),o=tg(i);let l;return l="string"==typeof(e=(0,z.m9)(e))||e instanceof eu?uN(o,"updateDoc",n._key,e,t,r):lN(o,"updateDoc",n._key,e),Yy(i,[l.toMutation(n._key,nr.exists(!0))])}function q3(n,...e){var t,r,i;n=(0,z.m9)(n);let o={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||aN(e[l])||(o=e[l],l++);const f={includeMetadataChanges:o.includeMetadataChanges};if(aN(e[l])){const T=e[l];e[l]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[l+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[l+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let g,v,E;if(n instanceof Yn)v=Jt(n.firestore,Qn),E=s(n._key.path),g={next:T=>{e[l]&&e[l](gN(v,n,T))},error:e[l+1],complete:e[l+2]};else{const T=Jt(n,Bi);v=Jt(T.firestore,Qn),E=T._query;const M=new Kd(v);g={next:R=>{e[l]&&e[l](new Zd(v,M,T,R))},error:e[l+1],complete:e[l+2]},L3(n._query)}return function(T,M,R,W){const Q=new YS(W),J=new bR(M,Q,R);return T.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return vR(yield Zy(T),J)})),()=>{Q.Dc(),T.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return wR(yield Zy(T),J)}))}}(Rr(v),E,f,g)}function Yy(n,e){return function(t,r){const i=new Or;return t.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function g$(n,e,t){return AR.apply(this,arguments)}(yield rN(t),r,i)})),i.promise}(Rr(n),e)}function gN(n,e,t){const r=t.docs.get(e._key),i=new Kd(n);return new tu(n,i,e._key,r,new rg(t.hasPendingWrites,t.fromCache),e.converter)}const V8={maxAttempts:5};class Z3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tg(e)}set(e,t,r){this._verifyNotCommitted();const i=Yd(e,this._firestore),o=dM(i.converter,t,r),l=iM(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,nr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Yd(e,this._firestore);let l;return l="string"==typeof(t=(0,z.m9)(t))||t instanceof eu?uN(this._dataReader,"WriteBatch.update",o._key,t,r,i):lN(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yd(e,this._firestore);return this._mutations=this._mutations.concat(new ky(t._key,nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yd(n,e){if((n=(0,z.m9)(n)).firestore!==e)throw new ye(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class j8 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=tg(e)}get(e){const t=Yd(e,this._firestore),r=new C8(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const o=i[0];if(o.isFoundDocument())return new pE(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new pE(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=Yd(e,this._firestore),o=dM(i.converter,t,r),l=iM(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const o=Yd(e,this._firestore);let l;return l="string"==typeof(t=(0,z.m9)(t))||t instanceof eu?uN(this._dataReader,"Transaction.update",o._key,t,r,i):lN(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=Yd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yd(e,this._firestore),r=new Kd(this._firestore);return super.get(e).then(i=>new tu(this._firestore,r,t._key,i._document,new rg(!1,!1),t.converter))}}function mN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ye("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Y3(){if(typeof Uint8Array>"u")throw new ye("unimplemented","Uint8Arrays are not available in this environment.")}function Q3(){if(!function vS(){return typeof atob<"u"}())throw new ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Up=Dn.SDK_VERSION,(0,Dn._registerComponent)(new yr.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),l=new Qn(new iS(t.getProvider("auth-internal")),new d4(t.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ye(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ma(f.options.projectId,g)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Dn.registerVersion)(VO,"3.13.0",n),(0,Dn.registerVersion)(VO,"3.13.0","esm2017")}();class yE{constructor(e){this._delegate=e}static fromBase64String(e){return Q3(),new yE(Tc.fromBase64String(e))}static fromUint8Array(e){return Y3(),new yE(Tc.fromUint8Array(e))}toBase64(){return Q3(),this._delegate.toBase64()}toUint8Array(){return Y3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _N(n){return function Y8(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Q8{enableIndexedDbPersistence(e,t){return function K$(n,e){A3(n=Jt(n,Qn));const t=Rr(n);if(t._uninitializedComponentsProvider)throw new ye(ae.FAILED_PRECONDITION,"SDK cache is already specified.");mo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new qy;return M3(t,i,new YR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Y$(n){A3(n=Jt(n,Qn));const e=Rr(n);if(e._uninitializedComponentsProvider)throw new ye(ae.FAILED_PRECONDITION,"SDK cache is already specified.");mo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new qy;return M3(e,r,new l3(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Q$(n){if(n._initialized&&!n._terminated)throw new ye(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,U.Z)(function*(){try{yield(t=(0,U.Z)(function*(r){if(!Ls.D())return Promise.resolve();const i=r+"main";yield Ls.delete(i)}),function(r){return t.apply(this,arguments)})($k(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class J3{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ma||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){b3(this._delegate,e,t,r)}enableNetwork(){return function X$(n){return function F$(n){return n.asyncQueue.enqueue((0,U.Z)(function*(){const e=yield h3(n),t=yield f3(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.vu.delete(0),aE(i)}(t)}))}(Rr(n=Jt(n,Qn)))}(this._delegate)}disableNetwork(){return function e8(n){return function L$(n){return n.asyncQueue.enqueue((0,U.Z)(function*(){const e=yield h3(n),t=yield f3(n);return e.setNetworkEnabled(!1),(r=(0,U.Z)(function*(i){const o=qe(i);o.vu.add(0),yield Vy(o),o.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Rr(n=Jt(n,Qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,v3("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function J$(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return function v$(n,e){return RR.apply(this,arguments)}(yield rN(e),t)})),t.promise}(Rr(n=Jt(n,Qn)))}(this._delegate)}onSnapshotsInSync(e){return function P8(n,e){return function V$(n,e){const t=new YS(e);return n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return r=yield Zy(n),i=t,qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return r=yield Zy(n),i=t,void qe(r).ku.delete(i);var r,i}))}}(Rr(n=Jt(n,Qn)),aN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qy(this,T3(this._delegate,e))}catch(t){throw ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new ta(this,tM(this._delegate,e))}catch(t){throw ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gs(this,function z$(n,e){if(n=Jt(n,uE),sN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bi(n,null,(t=e,new ka(Wt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function $8(n,e,t){n=Jt(n,Qn);const r=Object.assign(Object.assign({},V8),t);return function(i){if(i.maxAttempts<1)throw new ye(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,l){const f=new Or;return i.asyncQueue.enqueueAndForget((0,U.Z)(function*(){const g=yield function p3(n){return JS(n).then(e=>e.datastore)}(i);new R$(i.asyncQueue,g,l,o,f).run()})),f.promise}(Rr(n),i=>e(new j8(n,i)),r)}(this._delegate,t=>e(new X3(this,t)))}batch(){return Rr(this._delegate),new e6(new Z3(this._delegate,e=>Yy(this._delegate,e)))}loadBundle(e){return function t8(n,e){const t=Rr(n=Jt(n,Qn)),r=new W$;return function j$(n,e,t,r){const i=function(o,l){let f;return f="string"==typeof o?U4().encode(o):o,g=function(g,v){if(g instanceof Uint8Array)return u3(g,v);if(g instanceof ArrayBuffer)return u3(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new O$(g,l);var g}(t,oE(e));n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){!function x$(n,e,t){const r=qe(n);var i;(i=(0,U.Z)(function*(o,l,f){try{const g=yield l.getMetadata();if(yield function(M,R){const W=qe(M),Q=kr(R.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",J=>W.qs.getBundleMetadata(J,R.id)).then(J=>!!J&&J.createTime.compareTo(Q)>=0)}(o.localStore,g))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(M=g).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);f._updateProgress(e3(g));const v=new l$(g,o.localStore,l.serializer);let E=yield l.bc();for(;E;){const M=yield v.zu(E);M&&f._updateProgress(M),E=yield l.bc()}const T=yield v.complete();return yield Xl(o,T.Ju,void 0),yield function(M,R){const W=qe(M);return W.persistence.runTransaction("Save bundle","readwrite",Q=>W.qs.saveBundleMetadata(Q,R))}(o.localStore,g),f._completeWith(T.progress),Promise.resolve(T.Hu)}catch(g){return mo("SyncEngine",`Loading bundle failed with ${g}`),f._failWith(g),Promise.resolve(new Set)}var M}),function(o,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield rN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function n8(n,e){return function $$(n,e){return n.asyncQueue.enqueue((0,U.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.qs.getNamedQuery(o,r))}(yield XS(n),e)}))}(Rr(n=Jt(n,Qn)),e).then(t=>t?new Bi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new gs(this,t):null)}}class hM extends pN{constructor(e){super(),this.firestore=e}convertBytes(e){return new yE(new Tc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ta.forKey(t,this.firestore,null)}}class X3{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hM(e)}get(e){const t=sg(e);return this._delegate.get(t).then(r=>new vE(this._firestore,new tu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=sg(e);return r?(mN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=sg(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=sg(e);return this._delegate.delete(t),this}}class e6{constructor(e){this._delegate=e}set(e,t,r){const i=sg(e);return r?(mN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=sg(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=sg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ig{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _E(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new CE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ig.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new ig(e,new hM(e),t),i.set(t,o)),o}}ig.INSTANCES=new WeakMap;class ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hM(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ta(t,new Yn(t._delegate,r,new We(e)))}static forKey(e,t,r){return new ta(t,new Yn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Qy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qy(this.firestore,T3(this._delegate,e))}catch(t){throw ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,z.m9)(e))instanceof Yn&&D3(this._delegate,e)}set(e,t){t=mN("DocumentReference.set",t);try{return t?G3(this._delegate,e,t):G3(this._delegate,e)}catch(r){throw ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?W3(this._delegate,e):W3(this._delegate,e,t,...r)}catch(i){throw ps(i,"updateDoc()","DocumentReference.update()")}}delete(){return function A8(n){return Yy(Jt(n.firestore,Qn),[new ky(n._key,nr.none())])}(this._delegate)}onSnapshot(...e){const t=t6(e),r=n6(e,i=>new vE(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return q3(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function b8(n){n=Jt(n,Yn);const e=Jt(n.firestore,Qn),t=Rr(e),r=new Kd(e);return function U$(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return(r=(0,U.Z)(function*(i,o,l){try{const f=yield function(g,v){const E=qe(g);return E.persistence.runTransaction("read document","readonly",T=>E.localDocuments.getDocument(T,v))}(i,o);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new ye(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const g=Hy(f,`Failed to get document '${o} from cache`);l.reject(g)}}),function(i,o,l){return r.apply(this,arguments)})(yield XS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new tu(e,r,n._key,i,new rg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function T8(n){n=Jt(n,Yn);const e=Jt(n.firestore,Qn);return g3(Rr(e),n._key,{source:"server"}).then(t=>gN(e,n,t))}(this._delegate):function E8(n){n=Jt(n,Yn);const e=Jt(n.firestore,Qn);return g3(Rr(e),n._key).then(t=>gN(e,n,t))}(this._delegate),t.then(r=>new vE(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ta(this.firestore,this._delegate.withConverter(e?ig.getInstance(this.firestore,e):null))}}function ps(n,e,t){return n.message=n.message.replace(e,t),n}function t6(n){for(const e of n)if("object"==typeof e&&!_N(e))return e;return{}}function n6(n,e){var t,r;let i;return i=_N(n[0])?n[0]:_N(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class vE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return z3(this._delegate,e._delegate)}}class CE extends vE{data(e){const t=this._delegate.data(e);return function CI(n,e){n||et()}(void 0!==t),t}}class gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hM(e)}where(e,t,r){try{return new gs(this.firestore,qd(this._delegate,function h8(n,e,t){const r=e,i=aM("where",n);return mE._create(i,r,t)}(e,t,r)))}catch(i){throw ps(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gs(this.firestore,qd(this._delegate,function f8(n,e="asc"){const t=e,r=aM("orderBy",n);return fN._create(r,t)}(e,t)))}catch(r){throw ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gs(this.firestore,qd(this._delegate,function p8(n){return I3("limit",n),cM._create("limit",n,"F")}(e)))}catch(t){throw ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gs(this.firestore,qd(this._delegate,function g8(n){return I3("limitToLast",n),cM._create("limitToLast",n,"L")}(e)))}catch(t){throw ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gs(this.firestore,qd(this._delegate,function m8(...n){return lM._create("startAt",n,!0)}(...e)))}catch(t){throw ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gs(this.firestore,qd(this._delegate,function _8(...n){return lM._create("startAfter",n,!1)}(...e)))}catch(t){throw ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gs(this.firestore,qd(this._delegate,function y8(...n){return uM._create("endBefore",n,!1)}(...e)))}catch(t){throw ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gs(this.firestore,qd(this._delegate,function v8(...n){return uM._create("endAt",n,!0)}(...e)))}catch(t){throw ps(t,"endAt()","Query.endAt()")}}isEqual(e){return oN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function S8(n){n=Jt(n,Bi);const e=Jt(n.firestore,Qn),t=Rr(e),r=new Kd(e);return function B$(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,U.Z)(function*(){return(r=(0,U.Z)(function*(i,o,l){try{const f=yield HS(i,o,!0),g=new r3(o,f.ir),v=g.sc(f.documents),E=g.applyChanges(v,!1);l.resolve(E.snapshot)}catch(f){const g=Hy(f,`Failed to execute query '${o} against cache`);l.reject(g)}}),function(i,o,l){return r.apply(this,arguments)})(yield XS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Zd(e,r,n,i))}(this._delegate):"server"===e?.source?function M8(n){n=Jt(n,Bi);const e=Jt(n.firestore,Qn),t=Rr(e),r=new Kd(e);return m3(t,n._query,{source:"server"}).then(i=>new Zd(e,r,n,i))}(this._delegate):function D8(n){n=Jt(n,Bi);const e=Jt(n.firestore,Qn),t=Rr(e),r=new Kd(e);return L3(n._query),m3(t,n._query).then(i=>new Zd(e,r,n,i))}(this._delegate),t.then(r=>new yN(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=t6(e),r=n6(e,i=>new yN(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return q3(this._delegate,t,r)}withConverter(e){return new gs(this.firestore,this._delegate.withConverter(e?ig.getInstance(this.firestore,e):null))}}class X8{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new CE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new CE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new X8(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new CE(this._firestore,r))})}isEqual(e){return z3(this._delegate,e._delegate)}}class Qy extends gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ta(this.firestore,e):null}doc(e){try{return new ta(this.firestore,void 0===e?tM(this._delegate):tM(this._delegate,e))}catch(t){throw ps(t,"doc()","CollectionReference.doc()")}}add(e){return function x8(n,e){const t=Jt(n.firestore,Qn),r=tM(n),i=dM(n.converter,e);return Yy(t,[iM(tg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ta(this.firestore,t))}isEqual(e){return D3(this._delegate,e._delegate)}withConverter(e){return new Qy(this.firestore,this._delegate.withConverter(e?ig.getInstance(this.firestore,e):null))}}function sg(n){return Jt(n,Yn)}class vN{constructor(...e){this._delegate=new eu(...e)}static documentId(){return new vN(tr.keyField().canonicalString())}isEqual(e){return(e=(0,z.m9)(e))instanceof eu&&this._delegate._internalPath.isEqual(e._internalPath)}}class og{constructor(e){this._delegate=e}static serverTimestamp(){const e=function z8(){return new cN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new og(e)}static delete(){const e=function H8(){return new hE("deleteField")}();return e._methodName="FieldValue.delete",new og(e)}static arrayUnion(...e){const t=function G8(...n){return new a8("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new og(t)}static arrayRemove(...e){const t=function W8(...n){return new c8("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new og(t)}static increment(e){const t=function q8(n){return new l8("increment",n)}(e);return t._methodName="FieldValue.increment",new og(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const eH={Firestore:J3,GeoPoint:nM,Timestamp:Ln,Blob:yE,Transaction:X3,WriteBatch:e6,DocumentReference:ta,DocumentSnapshot:vE,Query:gs,QueryDocumentSnapshot:CE,QuerySnapshot:yN,CollectionReference:Qy,FieldPath:vN,FieldValue:og,setLogLevel:function J8(n){!function l4(n){Gl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function nH(n){(function tH(n,e){n.INTERNAL.registerComponent(new yr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},eH)))})(n,(e,t)=>new J3(e,t,new Q8)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Ji.Z);var rH=F(3019);class iH extends Pi.x{constructor(e=1/0,t=1/0,r=Df){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:l}=this;t||(r.push(e),!i&&r.push(o.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let l=0;l<o.length&&!e.closed;l+=r?1:2)e.next(o[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const l=t.now();let f=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)f=g;f&&r.splice(0,f+1)}}}var sH=F(3020);function r6(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,sH.B)({connector:()=>new iH(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function i6(n,e){return(0,Xs.m)(e)?(0,En.w)(()=>n,e):(0,En.w)(()=>n)}class nu{constructor(e){return e}}class Jy{constructor(){return(0,Dn.getApps)()}}const CN=new u.OlP("angularfire2._apps"),aH={provide:nu,useFactory:function oH(n){return n&&1===n.length?n[0]:new nu((0,Dn.getApp)())},deps:[[new u.FiY,CN]]},cH={provide:Jy,deps:[[new u.FiY,CN]]};function lH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new nu(r)}}let uH=(()=>{class n{constructor(t){(0,Dn.registerVersion)("angularfire",Pl.full,"core"),(0,Dn.registerVersion)("angularfire",Pl.full,"app"),(0,Dn.registerVersion)("angular",u.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[aH,cH]}),n})();function dH(n,...e){return{ngModule:uH,providers:[{provide:CN,useFactory:lH(n),multi:!0,deps:[u.R0b,u.zs3,kl,...e]}]}}const hH=Ed(Dn.initializeApp,!0),wN=new Map,s6={activated:!1,tokenObservers:[]},fH={initialized:!1,enabled:!1};function Ir(n){return wN.get(n)||Object.assign({},s6)}function fM(){return fH}const IN="https://content-firebaseappcheck.googleapis.com/v1",_H="exchangeDebugToken",o6={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class vH{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,U.Z)(function*(){t.stop();try{t.pending=new z.BH,yield function CH(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Vi=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function EN(n){if(!Ir(n).activated)throw Vi.create("use-before-activation",{appName:n.name})}function mM(n,e){return TN.apply(this,arguments)}function TN(){return TN=(0,U.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const o={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,o)}catch(T){throw Vi.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==l.status)throw Vi.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(T){throw Vi.create("fetch-parse-error",{originalErrorMessage:T?.message})}const g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Vi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(g[1]),E=Date.now();return{token:f.token,expireTimeMillis:E+v,issuedAtTimeMillis:E}}),TN.apply(this,arguments)}function a6(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${IN}/projects/${t}/apps/${r}:${_H}?key=${i}`,body:{debug_token:e}}}const bH="firebase-app-check-database",TH=1,wE="firebase-app-check-store";let _M=null;function DN(){return DN=(0,U.Z)(function*(n,e){const r=(yield function l6(){return _M||(_M=new Promise((n,e)=>{try{const t=indexedDB.open(bH,TH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Vi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(wE,{keyPath:"compositeKey"})}}catch(t){e(Vi.create("storage-open",{originalErrorMessage:t?.message}))}}),_M)}()).transaction(wE,"readwrite"),o=r.objectStore(wE).put({compositeKey:n,value:e});return new Promise((l,f)=>{o.onsuccess=g=>{l()},r.onerror=g=>{var v;f(Vi.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})}),DN.apply(this,arguments)}const IE=new ki.Yd("@firebase/app-check");function AN(n,e){return(0,z.hl)()?function SH(n,e){return function u6(n,e){return DN.apply(this,arguments)}(function h6(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{IE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PN(){return fM().enabled}function ON(){return kN.apply(this,arguments)}function kN(){return kN=(0,U.Z)(function*(){const n=fM();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),kN.apply(this,arguments)}const kH={error:"UNKNOWN_ERROR"};function RH(n){return z.US.encodeString(JSON.stringify(n),!1)}function yM(n){return RN.apply(this,arguments)}function RN(){return RN=(0,U.Z)(function*(n,e=!1){const t=n.app;EN(t);const r=Ir(t);let o,i=r.token;if(i&&!Xy(i)&&(r.token=void 0,i=void 0),!i){const g=yield r.cachedTokenPromise;g&&(Xy(g)?i=g:yield AN(t,void 0))}if(!e&&i&&Xy(i))return{token:i.token};let f,l=!1;if(PN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=mM(a6(t,yield ON()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const g=yield r.exchangeTokenPromise;return yield AN(t,g),r.token=g,{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Ir(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?IE.warn(g.message):IE.error(g),o=g}return i?o?f=Xy(i)?{token:i.token,internalError:o}:m6(o):(f={token:i.token},r.token=i,yield AN(t,i)):f=m6(o),l&&function g6(n,e){const t=Ir(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),RN.apply(this,arguments)}function NN(){return NN=(0,U.Z)(function*(n){const e=n.app;EN(e);const{provider:t}=Ir(e);if(PN()){const r=yield ON(),{token:i}=yield mM(a6(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),NN.apply(this,arguments)}function LN(n,e){const t=Ir(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function p6(n){const{app:e}=n,t=Ir(e);let r=t.tokenRefresher;r||(r=function NH(n){const{app:e}=n;return new vH((0,U.Z)(function*(){let r;if(r=Ir(e).token?yield yM(n,!0):yield yM(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ir(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},o6.RETRIAL_MIN_WAIT,o6.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Xy(n){return n.expireTimeMillis-Date.now()>0}function m6(n){return{token:RH(kH),error:n}}class FH{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ir(this.app);for(const t of e)LN(this.app,t.next);return Promise.resolve()}}const b6="app-check-internal";!function YH(){Yi(new yr.wA("app-check",n=>function LH(n,e){return new FH(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(b6).initialize()})),Yi(new yr.wA(b6,n=>function UH(n){return{getToken:e=>yM(n,e),getLimitedUseToken:()=>function f6(n){return NN.apply(this,arguments)}(n),addTokenListener:e=>function FN(n,e,t,r){const{app:i}=n,o=Ir(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&Xy(o.token)){const f=o.token;Promise.resolve().then(()=>{t({token:f.token}),p6(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>p6(n))}(n,"INTERNAL",e),removeTokenListener:e=>LN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Ri("@firebase/app-check","0.8.0")}();class ag{constructor(){return ks("app-check")}}typeof window<"u"&&window,F(120);const D6=new u.OlP("angularfire2.auth.use-emulator"),S6=new u.OlP("angularfire2.auth.settings"),M6=new u.OlP("angularfire2.auth.tenant-id"),A6=new u.OlP("angularfire2.auth.langugage-code"),x6=new u.OlP("angularfire2.auth.use-device-language"),P6=new u.OlP("angularfire.auth.persistence"),O6=(n,e,t,r,i,o,l,f)=>(0,Qi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,o&&g.useDeviceLanguage(),l)for(const[v,E]of Object.entries(l))g.settings[v]=E;return f&&g.setPersistence(f),g},[t,r,i,o,l,f]);let $N=(()=>{class n{constructor(t,r,i,o,l,f,g,v,E,T,M,R){const W=new Pi.x,Q=(0,ut.of)(void 0).pipe((0,Cd.Q)(l.outsideAngular),(0,En.w)(()=>o.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8661)))),(0,wt.U)(()=>(0,Qi.on)(t,o,r)),(0,wt.U)(J=>O6(J,o,f,v,E,T,g,M)),r6({bufferSize:1,refCount:!1}));if(Ai(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ut.of)(null);else{Q.pipe(ar()).subscribe();const be=Q.pipe((0,En.w)(Ye=>Ye.getRedirectResult().then(gt=>gt,()=>null)),Hr,r6({bufferSize:1,refCount:!1})),ze=Q.pipe((0,En.w)(Ye=>new gi.y(gt=>({unsubscribe:o.runOutsideAngular(()=>Ye.onAuthStateChanged(At=>gt.next(At),At=>gt.error(At),()=>gt.complete()))})))),Re=Q.pipe((0,En.w)(Ye=>new gi.y(gt=>({unsubscribe:o.runOutsideAngular(()=>Ye.onIdTokenChanged(At=>gt.next(At),At=>gt.error(At),()=>gt.complete()))}))));this.authState=be.pipe(i6(ze),(0,ap.R)(l.outsideAngular),(0,Cd.Q)(l.insideAngular)),this.user=be.pipe(i6(Re),(0,ap.R)(l.outsideAngular),(0,Cd.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,En.w)(Ye=>Ye?(0,pn.D)(Ye.getIdToken()):(0,ut.of)(null))),this.idTokenResult=this.user.pipe((0,En.w)(Ye=>Ye?(0,pn.D)(Ye.getIdTokenResult()):(0,ut.of)(null))),this.credential=(0,rH.T)(be,W,this.authState.pipe(Mr(Ye=>!Ye))).pipe((0,wt.U)(Ye=>Ye?.user?Ye:null),(0,ap.R)(l.outsideAngular),(0,Cd.Q)(l.insideAngular))}return(0,Qi.pX)(this,Q,o,{spy:{apply:(J,be,ze)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&ze.then(Re=>W.next(Re))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Qi.Dh),u.LFG(Qi.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(kl),u.LFG(D6,8),u.LFG(S6,8),u.LFG(M6,8),u.LFG(A6,8),u.LFG(x6,8),u.LFG(P6,8),u.LFG(ag,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function k6(n,e){return function nz(n,e=V0){return new gi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function HN(n,e){return k6(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function CM(n,e){return HN(n,e).pipe(Xa(void 0),_c(),(0,wt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const g=i.find(E=>E.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(E=>E.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||o.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),o}))}function R6(n,e,t){return CM(n,t).pipe(la((r,i)=>function iz(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function sz(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),(0,uO.x)(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function zN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function N6(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class F6{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=CM(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Xa(void 0),_c(),Mr(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),Hr)}auditTrail(e){return this.stateChanges(e).pipe(la((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=N6(e);return R6(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return HN(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Hr)}get(e){return(0,pn.D)(this.query.get(e)).pipe(Hr)}add(e){return this.ref.add(e)}doc(e){return new L6(this.ref.doc(e),this.afs)}}class L6{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=U6(r,t);return new F6(i,o,this.afs)}snapshotChanges(){return function rz(n,e){return k6(n,e).pipe(Xa(void 0),_c(),(0,wt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(Hr)}}class oz{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?CM(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Mr(t=>t.length>0),Hr):CM(this.query,this.afs.schedulers.outsideAngular).pipe(Hr)}auditTrail(e){return this.stateChanges(e).pipe(la((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=N6(e);return R6(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return HN(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Hr)}get(e){return(0,pn.D)(this.query.get(e)).pipe(Hr)}}const az=new u.OlP("angularfire2.enableFirestorePersistence"),cz=new u.OlP("angularfire2.firestore.persistenceSettings"),lz=new u.OlP("angularfire2.firestore.settings"),uz=new u.OlP("angularfire2.firestore.use-emulator");function U6(n,e=(t=>t)){return{query:e(n),ref:n}}let wM=(()=>{class n{constructor(t,r,i,o,l,f,g,v,E,T,M,R,W,Q,J,be,ze){this.schedulers=g;const Re=(0,Qi.on)(t,f,r),Ye=E;T&&O6(Re,f,M,W,Q,J,R,be),[this.firestore,this.persistenceEnabled$]=(0,Qi.cc)(`${Re.name}.firestore`,"AngularFirestore",Re.name,()=>{const gt=f.runOutsideAngular(()=>Re.firestore());if(o&&gt.settings(o),Ye&&gt.useEmulator(...Ye),i&&!Ai(l)){const At=()=>{try{return(0,pn.D)(gt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Fr){return typeof console<"u"&&console.warn(Fr),(0,ut.of)(!1)}};return[gt,f.runOutsideAngular(At)]}return[gt,(0,ut.of)(!1)]},[o,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:l}=U6(i,r),f=this.schedulers.ngZone.run(()=>o);return new F6(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),o=this.firestore.collectionGroup(t);return new oz(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new L6(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Qi.Dh),u.LFG(Qi.xv,8),u.LFG(az,8),u.LFG(lz,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(kl),u.LFG(cz,8),u.LFG(uz,8),u.LFG($N,8),u.LFG(D6,8),u.LFG(S6,8),u.LFG(M6,8),u.LFG(A6,8),u.LFG(x6,8),u.LFG(P6,8),u.LFG(ag,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var B6=F(6710);let Nr=(()=>{class n{constructor(t,r){this.afAuth=t,this.db=r,this._loggedInUser$=new _r.X(document.cookie.match(/loggedInUser=(.*)/)?JSON.parse(document.cookie.match(/loggedInUser=(.*)/)[1]):null),this.loggedInUser$=this._loggedInUser$.asObservable()}logInWithGoogle(){var t=this;return(0,U.Z)(function*(){try{const r=yield t.afAuth.signInWithPopup(new B6.V);yield t._createOrUpdateUserOnDB(r);const i=yield t.afAuth.currentUser;i&&(document.cookie=`loggedInUser=${JSON.stringify(i)}; max-age=999999999999; path=/`,t._loggedInUser$.next(i))}catch(r){throw console.error(r.message),r.message}})()}logInWithEmailAndPassword(t){var r=this;return(0,U.Z)(function*(){try{const i=yield r.afAuth.signInWithEmailAndPassword(t.email,t.password);yield r._createOrUpdateUserOnDB(i,t);const o=yield r.afAuth.currentUser;o&&(document.cookie=`loggedInUser=${JSON.stringify(o)}; max-age=999999999999; path=/`,r._loggedInUser$.next(o))}catch(i){throw console.error(i.message),i.message}})()}registerWithEmailAndPassword(t){var r=this;return(0,U.Z)(function*(){try{const i=yield r.afAuth.createUserWithEmailAndPassword(t.email,t.password);yield r._createOrUpdateUserOnDB(i,t);const o=yield r.afAuth.currentUser;o&&(document.cookie=`loggedInUser=${JSON.stringify(o)}; max-age=999999999999; path=/`,r._loggedInUser$.next(o))}catch(i){throw console.error(i.message),i.message}})()}logOut(){var t=this;return(0,U.Z)(function*(){try{yield t.afAuth.signOut(),document.cookie=`loggedInUser=${JSON.stringify(null)}; max-age=0; path=/`,t._loggedInUser$.next(null)}catch(r){throw console.error(r.message),r.message}})()}getUserById(t){return this.db.collection("users").doc(t).valueChanges()}getLoggedInUser(){return this._loggedInUser$.value}_createOrUpdateUserOnDB(t,r=null){var i=this;return(0,U.Z)(function*(){var o;i.db.collection("users").doc(t.user.uid).get().pipe(jt(1)).subscribe({next:(o=(0,U.Z)(function*(l){if(l.exists){const f=l.data();f._id||(yield i.db.collection("users").doc(t.user.uid).update({_id:t.user.uid})),f.fullName||(yield i.db.collection("users").doc(t.user.uid).update({fullName:r?.fullName||t.user?.displayName})),f.imgUrl||(yield i.db.collection("users").doc(t.user.uid).update({imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png"})),f.followedByUsers||(yield i.db.collection("users").doc(t.user.uid).update({followedByUsers:[]})),f.followingUsers||(yield i.db.collection("users").doc(t.user.uid).update({followingUsers:[]}))}else yield i.db.collection("users").doc(t.user.uid).set({_id:t.user.uid,fullName:r?.fullName||t.user?.displayName,imgUrl:t.user.photoURL||"https://res.cloudinary.com/dpbcaizq9/image/upload/v1686066256/user_jsqpzw.png",followedByUsers:[],followingUsers:[]})}),function(f){return o.apply(this,arguments)}),error:o=>{console.error(o)}})})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG($N),u.LFG(wM))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yo=function(n){return n[n.Up=1]="Up",n[n.Down=3]="Down",n[n.Right=6]="Right",n[n.Left=8]="Left",n[n.UpMirrored=2]="UpMirrored",n[n.DownMirrored=4]="DownMirrored",n[n.LeftMirrored=5]="LeftMirrored",n[n.RightMirrored=7]="RightMirrored",n[n.Default=0]="Default",n[n.NotJpeg=-1]="NotJpeg",n[n.NotDefined=-2]="NotDefined",n}(yo||{});class Bn{}Bn.getOrientation=n=>new Promise((e,t)=>{try{const r=new FileReader;r.onload=()=>{const i=new DataView(r.result);if(!i.byteLength||65496!==i.getUint16(0,!1))return e(yo.NotDefined);const o=i.byteLength;let l=2;for(;l<o;){const f=i.getUint16(l,!1);if(l+=2,65505===f){if(1165519206!==i.getUint32(l+=2,!1))return e(yo.NotJpeg);const g=18761===i.getUint16(l+=6,!1);l+=i.getUint32(l+4,g);const v=i.getUint16(l,g);l+=2;for(let E=0;E<v;E++)if(274===i.getUint16(l+12*E,g))return e(i.getUint16(l+12*E+8,g))}else{if(65280!=(65280&f))break;l+=i.getUint16(l,!1)}}return e(yo.NotJpeg)},r.readAsArrayBuffer(n)}catch{return t(yo.Default)}}),Bn.uploadFile=(n,e=!0,t=!1)=>new Promise(function(r,i){const o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),l=/iPad|iPhone|iPod/i.test(navigator.userAgent);Promise.resolve(o||l).then(f=>f?Bn.generateUploadInputNative(window.document,e,t):Bn.generateUploadInputRenderer(n,e,t)).then(f=>{const g=f?Array.from(f):[],v=g.map(M=>Bn.getOrientation(M)),E=g.map(M=>Bn.fileToDataURL(M));let T=[];Promise.all(v).then(M=>(T=M,Promise.all(E))).then(M=>{const R=M.map((W,Q)=>({image:W.dataUrl,orientation:T[Q],fileName:W.fileName}));r(e?R:R[0])})}).catch(f=>i(f))}),Bn.fileToDataURL=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=i=>{e({dataUrl:i.target.result,fileName:n.name})};try{r.readAsDataURL(n)}catch(i){t(`ngx-image-compress - probably no file have been selected: ${i}`)}}),Bn.generateUploadInputRenderer=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,o)=>{const l=n.createElement("input");n.setStyle(l,"display","none"),n.setProperty(l,"type","file"),n.setProperty(l,"accept","image/*"),e&&n.setProperty(l,"multiple","true"),n.listen(l,"click",f=>{f.target.value=""}),n.listen(l,"change",f=>{r=!0,i(f.target.files)}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{r||o(new Error("file upload on blur - no file selected"))},300)},{once:!0}),l.click()})},Bn.generateUploadInputNative=(n,e=!0,t=!1)=>{let r=!1;return new Promise((i,o)=>{const l=n.createElement("input");l.id="upload-input"+new Date,l.style.display="none",l.setAttribute("type","file"),l.setAttribute("accept","image/*"),e&&l.setAttribute("multiple","true"),n.body.appendChild(l),l.addEventListener("change",()=>{r=!0,i(l.files),n.body.removeChild(n.getElementById(l.id))},{once:!0}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{!r&&n.getElementById(l.id)&&(o(new Error("file upload on blur - no file selected")),n.body.removeChild(n.getElementById(l.id)))},300)},{once:!0}),l.click()})},Bn.compress=(n,e,t,r=50,i=50,o=0,l=0)=>new Promise(function(f,g){i/=100,r/=100;const v=new Image;v.onload=()=>{const E=t.createElement("canvas"),T=E.getContext("2d");if(!T)return g("No canvas context available");let M=v.naturalWidth,R=v.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(e===yo.Right||e===yo.Left)){const Re=M;M=R,R=Re}r=Math.min(r,o?o/M:1,l?l/R:1),E.width=M*r,E.height=R*r;const J=Math.PI/180;CSS.supports("image-orientation","from-image")||e===yo.Up?T.drawImage(v,0,0,E.width,E.height):e===yo.Right?(T.save(),T.rotate(90*J),T.translate(0,-E.width),T.drawImage(v,0,0,E.height,E.width),T.restore()):e===yo.Left?(T.save(),T.rotate(-90*J),T.translate(-E.width,0),T.drawImage(v,0,0,E.height,E.width),T.restore()):e===yo.Down?(T.save(),T.rotate(180*J),T.translate(-E.width,-E.height),T.drawImage(v,0,0,E.width,E.height),T.restore()):T.drawImage(v,0,0,E.width,E.height);const be=n.substr(5,n.split(";")[0].length-5),ze=E.toDataURL(be,i);f(ze)},v.onerror=E=>g(E),v.src=n}),Bn.byteCount=n=>encodeURI(n).split(/%..|./).length-1,Bn.getImageMaxSize=function(){var n=(0,U.Z)(function*(e,t,r,i=!1){const l=v=>(v/1024/1024).toFixed(2);t&&console.debug("NgxImageCompress - Opening upload window");const f=yield Bn.uploadFile(r,!1,i);let g;for(let v=0;v<10;v++){const E=Bn.byteCount(f.image);g=yield Bn.compress(f.image,f.orientation,r,50,100);const T=Bn.byteCount(g);if(console.debug("NgxImageCompress -","Compression from",l(E),"MB to",l(T),"MB"),T>=E)throw 0===v?(t&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",l(E),"MB large"),{...f,image:g}):(t&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",l(E),"MB large"),{...f,image:g});if(T<1024*e*1024)return t&&console.debug("NgxImageCompress -","Here your file",l(T),"MB large"),{...f,image:g};if(9===v)throw t&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",l(E),"MB large"),{...f,image:g};t&&console.debug("NgxImageCompress -","Reached",l(T),"MB large. Trying another time after",v+1,"times"),f.image=g}throw t&&console.debug("NgxImageCompress - Unexpected error"),{}});return function(e,t,r){return n.apply(this,arguments)}}();let hz=(()=>{class n{constructor(t){this.DOC_ORIENTATION=yo,this.render=t.createRenderer(null,null)}byteCount(t){return Bn.byteCount(t)}getOrientation(t){return Bn.getOrientation(t)}uploadFile(){return Bn.uploadFile(this.render,!1)}uploadMultipleFiles(){return Bn.uploadFile(this.render,!0)}uploadFileOrReject(){return Bn.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return Bn.uploadFile(this.render,!0,!0)}compressFile(t,r,i=50,o=50,l=0,f=0){return Bn.compress(t,r,this.render,i,o,l,f)}uploadAndGetImageWithMaxSize(t=1,r=!1,i=!1){return Bn.getImageMaxSize(t,r,this.render,i).then(o=>o.image).catch(o=>{throw o.image})}uploadAndGetImageWithMaxSizeAndMetas(t=1,r=!1,i=!1){return Bn.getImageMaxSize(t,r,this.render,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qd=(()=>{class n{constructor(t,r,i){this.db=t,this.authService=r,this.imageCompress=i,this._posts$=new _r.X([]),this.posts$=this._posts$.asObservable()}getPosts(){var t=this;return(0,U.Z)(function*(){const r=t.authService.getLoggedInUser();if(!r)return;const i=t.db.collection("users").doc(r.uid).valueChanges().pipe(jt(1)),o=yield Vr(i);return t.db.collection("posts",f=>f.where("creatorId","in",[r.uid,...o.followingUsers]).orderBy("createdAt","desc")).valueChanges().pipe(bn(function(){var f=(0,U.Z)(function*(g){t._posts$.next([...g])});return function(g){return f.apply(this,arguments)}}()))})()}toggleLike(t,r){var i=this;return(0,U.Z)(function*(){return t?yield i.addLike(r):yield i.removeLike(r)})()}addLike(t){var r=this;return(0,U.Z)(function*(){return new Promise(function(){var i=(0,U.Z)(function*(o,l){try{const f=r.authService.getLoggedInUser();t.likedByUsers=t.likedByUsers.map(g=>g._id),t.likedByUsers.push(f.uid),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...t.likedByUsers]}),o("Add like done")}catch(f){throw l("Add like failed:"),f}});return function(o,l){return i.apply(this,arguments)}}())})()}getPostsForUser(t){return this.db.collection("posts",i=>i.where("creatorId","==",t).orderBy("createdAt","desc")).valueChanges()}removeLike(t){var r=this;return(0,U.Z)(function*(){return new Promise(function(){var i=(0,U.Z)(function*(o,l){try{const g=r.authService.getLoggedInUser().uid;t.likedByUsers=t.likedByUsers.map(E=>E._id);const v=t.likedByUsers.findIndex(E=>E===g);t.likedByUsers.splice(v,1),yield r.db.collection("posts").doc(t._id).update({likedByUsers:[...t.likedByUsers]}),o("Remove like done")}catch(f){throw o("Remove like failed!"),f}});return function(o,l){return i.apply(this,arguments)}}())})()}uploadMedia(){var t=this;return(0,U.Z)(function*(){try{const{image:r,orientation:i}=yield t.imageCompress.uploadFile();return yield t.imageCompress.compressFile(r,i,50,50)}catch(r){return console.error(r),null}})()}createPost(t){var r=this;return(0,U.Z)(function*(){const i=r.authService.getLoggedInUser();t.creatorId=i.uid;const o=r.db.collection("users").doc(i.uid).valueChanges().pipe(jt(1)),l=yield Vr(o);t.creatorFullName=i.displayName||l.fullName,t.createdAt=Date.now();const f=yield r.db.collection("posts").add(t);yield r.db.collection("posts").doc(f.id).update({_id:f.id})})()}getCommentsByPostId(t){return this.db.collection("comments",i=>i.where("postId","==",t).where("isTopLevel","==",!0).orderBy("createdAt","desc")).valueChanges()}getRepliesForComment(t){return t.replies?.length||(t.replies=[""]),this.db.collection("comments",i=>i.where("isTopLevel","==",!1).where("_id","in",t.replies).orderBy("createdAt","desc")).valueChanges()}addComment(t,r){var i=this;return(0,U.Z)(function*(){t.createdAt=Date.now(),t.isTopLevel=!0;const o=yield i.db.collection("comments").add(t);yield i.db.collection("comments").doc(o.id).update({_id:o.id,parentId:o.id})})()}addReply(t){var r=this;return(0,U.Z)(function*(){t.createdAt=Date.now(),t.createdByUserId=t.createdByUserId._id,t.isTopLevel=!1;const i=r.db.collection("comments").doc(t.parentId).valueChanges().pipe(jt(1)),o=yield Vr(i);o.replies||(o.replies=[]);const l=yield r.db.collection("comments").add(t);yield r.db.collection("comments").doc(l.id).update({_id:l.id}),yield r.db.collection("comments").doc(t.parentId).update({replies:[...o.replies,l.id]})})()}getCommentById(t){return this.db.collection("comments").doc(t).valueChanges()}_makeId(t=5){let r="";for(let o=0;o<t;o++)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return r}_handleError(t){return console.log("err:",t),ca(()=>t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(wM),u.LFG(Nr),u.LFG(hz))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IM(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let l,o=!1;n.subscribe({next:f=>{l=f,o=!0},error:i,complete:()=>{o?r(l):t?r(e.defaultValue):i(new ro)}})})}const V6=function gz(n,e){return n===e||n!=n&&e!=e},EM=function mz(n,e){for(var t=n.length;t--;)if(V6(n[t][0],e))return t;return-1};var yz=Array.prototype.splice;function ev(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ev.prototype.clear=function fz(){this.__data__=[],this.size=0},ev.prototype.delete=function vz(n){var e=this.__data__,t=EM(e,n);return!(t<0||(t==e.length-1?e.pop():yz.call(e,t,1),--this.size,0))},ev.prototype.get=function wz(n){var e=this.__data__,t=EM(e,n);return t<0?void 0:e[t][1]},ev.prototype.has=function Ez(n){return EM(this.__data__,n)>-1},ev.prototype.set=function Tz(n,e){var t=this.__data__,r=EM(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};const bM=ev,j6="object"==typeof global&&global&&global.Object===Object&&global;var Fz="object"==typeof self&&self&&self.Object===Object&&self;const Dc=j6||Fz||Function("return this")(),tv=Dc.Symbol;var $6=Object.prototype,Bz=$6.hasOwnProperty,Vz=$6.toString,EE=tv?tv.toStringTag:void 0;var zz=Object.prototype.toString;var H6=tv?tv.toStringTag:void 0;const bE=function Kz(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":H6&&H6 in Object(n)?function jz(n){var e=Bz.call(n,EE),t=n[EE];try{n[EE]=void 0;var r=!0}catch{}var i=Vz.call(n);return r&&(e?n[EE]=t:delete n[EE]),i}(n):function Gz(n){return zz.call(n)}(n)},TE=function Yz(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)},z6=function tG(n){if(!TE(n))return!1;var e=bE(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},GN=Dc["__core-js_shared__"];var G6=function(){var n=/[^.]+$/.exec(GN&&GN.keys&&GN.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();var oG=Function.prototype.toString;const cg=function aG(n){if(null!=n){try{return oG.call(n)}catch{}try{return n+""}catch{}}return""};var lG=/^\[object .+?Constructor\]$/,pG=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const mG=function gG(n){return!(!TE(n)||function rG(n){return!!G6&&G6 in n}(n))&&(z6(n)?pG:lG).test(cg(n))},lg=function vG(n,e){var t=function _G(n,e){return n?.[e]}(n,e);return mG(t)?t:void 0},DE=lg(Dc,"Map"),SE=lg(Object,"create");var MG=Object.prototype.hasOwnProperty;var OG=Object.prototype.hasOwnProperty;function nv(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}nv.prototype.clear=function IG(){this.__data__=SE?SE(null):{},this.size=0},nv.prototype.delete=function bG(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},nv.prototype.get=function AG(n){var e=this.__data__;if(SE){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return MG.call(e,n)?e[n]:void 0},nv.prototype.has=function kG(n){var e=this.__data__;return SE?void 0!==e[n]:OG.call(e,n)},nv.prototype.set=function FG(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=SE&&void 0===e?"__lodash_hash_undefined__":e,this};const W6=nv,TM=function $G(n,e){var t=n.__data__;return function VG(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}(e)?t["string"==typeof e?"string":"hash"]:t.map};function rv(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}rv.prototype.clear=function UG(){this.size=0,this.__data__={hash:new W6,map:new(DE||bM),string:new W6}},rv.prototype.delete=function HG(n){var e=TM(this,n).delete(n);return this.size-=e?1:0,e},rv.prototype.get=function GG(n){return TM(this,n).get(n)},rv.prototype.has=function qG(n){return TM(this,n).has(n)},rv.prototype.set=function KG(n,e){var t=TM(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};const QG=rv;function iv(n){var e=this.__data__=new bM(n);this.size=e.size}iv.prototype.clear=function Sz(){this.__data__=new bM,this.size=0},iv.prototype.delete=function Az(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},iv.prototype.get=function Pz(n){return this.__data__.get(n)},iv.prototype.has=function kz(n){return this.__data__.has(n)},iv.prototype.set=function XG(n,e){var t=this.__data__;if(t instanceof bM){var r=t.__data__;if(!DE||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new QG(r)}return t.set(n,e),this.size=t.size,this};const tW=iv;var iW=function(){try{var n=lg(Object,"defineProperty");return n({},"",{}),n}catch{}}();const q6=iW,Z6=function sW(n,e,t){"__proto__"==e&&q6?q6(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t};var aW=Object.prototype.hasOwnProperty;const K6=function cW(n,e,t){var r=n[e];(!aW.call(n,e)||!V6(r,t)||void 0===t&&!(e in n))&&Z6(n,e,t)},DM=function lW(n,e,t,r){var i=!t;t||(t={});for(var o=-1,l=e.length;++o<l;){var f=e[o],g=r?r(t[f],n[f],f,t,n):void 0;void 0===g&&(g=n[f]),i?Z6(t,f,g):K6(t,f,g)}return t},ME=function hW(n){return null!=n&&"object"==typeof n},Y6=function pW(n){return ME(n)&&"[object Arguments]"==bE(n)};var Q6=Object.prototype,gW=Q6.hasOwnProperty,mW=Q6.propertyIsEnumerable,_W=Y6(function(){return arguments}())?Y6:function(n){return ME(n)&&gW.call(n,"callee")&&!mW.call(n,"callee")};const yW=_W,WN=Array.isArray;var J6="object"==typeof exports&&exports&&!exports.nodeType&&exports,X6=J6&&"object"==typeof module&&module&&!module.nodeType&&module,e5=X6&&X6.exports===J6?Dc.Buffer:void 0;const t5=(e5?e5.isBuffer:void 0)||function CW(){return!1};var DW=/^(?:0|[1-9]\d*)$/;const MW=function SW(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&("number"==t||"symbol"!=t&&DW.test(n))&&n>-1&&n%1==0&&n<e},n5=function xW(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991};var Jn={};Jn["[object Float32Array]"]=Jn["[object Float64Array]"]=Jn["[object Int8Array]"]=Jn["[object Int16Array]"]=Jn["[object Int32Array]"]=Jn["[object Uint8Array]"]=Jn["[object Uint8ClampedArray]"]=Jn["[object Uint16Array]"]=Jn["[object Uint32Array]"]=!0,Jn["[object Arguments]"]=Jn["[object Array]"]=Jn["[object ArrayBuffer]"]=Jn["[object Boolean]"]=Jn["[object DataView]"]=Jn["[object Date]"]=Jn["[object Error]"]=Jn["[object Function]"]=Jn["[object Map]"]=Jn["[object Number]"]=Jn["[object Object]"]=Jn["[object RegExp]"]=Jn["[object Set]"]=Jn["[object String]"]=Jn["[object WeakMap]"]=!1;const qN=function rq(n){return function(e){return n(e)}};var r5="object"==typeof exports&&exports&&!exports.nodeType&&exports,AE=r5&&"object"==typeof module&&module&&!module.nodeType&&module,ZN=AE&&AE.exports===r5&&j6.process;const sv=function(){try{return AE&&AE.require&&AE.require("util").types||ZN&&ZN.binding&&ZN.binding("util")}catch{}}();var i5=sv&&sv.isTypedArray;const aq=i5?qN(i5):function tq(n){return ME(n)&&n5(n.length)&&!!Jn[bE(n)]};var lq=Object.prototype.hasOwnProperty;const s5=function uq(n,e){var t=WN(n),r=!t&&yW(n),i=!t&&!r&&t5(n),o=!t&&!r&&!i&&aq(n),l=t||r||i||o,f=l?function uW(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}(n.length,String):[],g=f.length;for(var v in n)(e||lq.call(n,v))&&(!l||!("length"==v||i&&("offset"==v||"parent"==v)||o&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||MW(v,g)))&&f.push(v);return f};var dq=Object.prototype;const KN=function hq(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||dq)},o5=function fq(n,e){return function(t){return n(e(t))}},gq=o5(Object.keys,Object);var _q=Object.prototype.hasOwnProperty;const a5=function Cq(n){return null!=n&&n5(n.length)&&!z6(n)},YN=function wq(n){return a5(n)?s5(n):function yq(n){if(!KN(n))return gq(n);var e=[];for(var t in Object(n))_q.call(n,t)&&"constructor"!=t&&e.push(t);return e}(n)};var Sq=Object.prototype.hasOwnProperty;const Aq=function Mq(n){if(!TE(n))return function bq(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}(n);var e=KN(n),t=[];for(var r in n)"constructor"==r&&(e||!Sq.call(n,r))||t.push(r);return t},QN=function xq(n){return a5(n)?s5(n,!0):Aq(n)};var c5="object"==typeof exports&&exports&&!exports.nodeType&&exports,l5=c5&&"object"==typeof module&&module&&!module.nodeType&&module,u5=l5&&l5.exports===c5?Dc.Buffer:void 0,d5=u5?u5.allocUnsafe:void 0;const h5=function Vq(){return[]};var $q=Object.prototype.propertyIsEnumerable,f5=Object.getOwnPropertySymbols,Hq=f5?function(n){return null==n?[]:(n=Object(n),function Uq(n,e){for(var t=-1,r=null==n?0:n.length,i=0,o=[];++t<r;){var l=n[t];e(l,t,n)&&(o[i++]=l)}return o}(f5(n),function(e){return $q.call(n,e)}))}:h5;const JN=Hq,p5=function Wq(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n},g5=o5(Object.getPrototypeOf,Object);var Kq=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)p5(e,JN(n)),n=g5(n);return e}:h5;const m5=Kq,_5=function Jq(n,e,t){var r=e(n);return WN(n)?r:p5(r,t(n))},eZ=function Xq(n){return _5(n,YN,JN)},nZ=function tZ(n){return _5(n,QN,m5)},XN=lg(Dc,"DataView"),e2=lg(Dc,"Promise"),t2=lg(Dc,"Set"),n2=lg(Dc,"WeakMap");var y5="[object Map]",v5="[object Promise]",C5="[object Set]",w5="[object WeakMap]",I5="[object DataView]",cZ=cg(XN),lZ=cg(DE),uZ=cg(e2),dZ=cg(t2),hZ=cg(n2),ug=bE;(XN&&ug(new XN(new ArrayBuffer(1)))!=I5||DE&&ug(new DE)!=y5||e2&&ug(e2.resolve())!=v5||t2&&ug(new t2)!=C5||n2&&ug(new n2)!=w5)&&(ug=function(n){var e=bE(n),t="[object Object]"==e?n.constructor:void 0,r=t?cg(t):"";if(r)switch(r){case cZ:return I5;case lZ:return y5;case uZ:return v5;case dZ:return C5;case hZ:return w5}return e});const r2=ug;var pZ=Object.prototype.hasOwnProperty;const E5=Dc.Uint8Array,i2=function yZ(n){var e=new n.constructor(n.byteLength);return new E5(e).set(new E5(n)),e};var wZ=/\w*$/;var b5=tv?tv.prototype:void 0,T5=b5?b5.valueOf:void 0;const ZZ=function qZ(n,e,t){var r=n.constructor;switch(e){case"[object ArrayBuffer]":return i2(n);case"[object Boolean]":case"[object Date]":return new r(+n);case"[object DataView]":return function vZ(n,e){var t=e?i2(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function DZ(n,e){var t=e?i2(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}(n,t);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(n);case"[object RegExp]":return function IZ(n){var e=new n.constructor(n.source,wZ.exec(n));return e.lastIndex=n.lastIndex,e}(n);case"[object Symbol]":return function bZ(n){return T5?Object(T5.call(n)):{}}(n)}};var D5=Object.create,KZ=function(){function n(){}return function(e){if(!TE(e))return{};if(D5)return D5(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const YZ=KZ;var S5=sv&&sv.isMap;const rK=S5?qN(S5):function eK(n){return ME(n)&&"[object Map]"==r2(n)};var M5=sv&&sv.isSet;const cK=M5?qN(M5):function sK(n){return ME(n)&&"[object Set]"==r2(n)};var A5="[object Arguments]",x5="[object Function]",P5="[object Object]",Vn={};Vn[A5]=Vn["[object Array]"]=Vn["[object ArrayBuffer]"]=Vn["[object DataView]"]=Vn["[object Boolean]"]=Vn["[object Date]"]=Vn["[object Float32Array]"]=Vn["[object Float64Array]"]=Vn["[object Int8Array]"]=Vn["[object Int16Array]"]=Vn["[object Int32Array]"]=Vn["[object Map]"]=Vn["[object Number]"]=Vn[P5]=Vn["[object RegExp]"]=Vn["[object Set]"]=Vn["[object String]"]=Vn["[object Symbol]"]=Vn["[object Uint8Array]"]=Vn["[object Uint8ClampedArray]"]=Vn["[object Uint16Array]"]=Vn["[object Uint32Array]"]=!0,Vn["[object Error]"]=Vn[x5]=Vn["[object WeakMap]"]=!1;const NK=function SM(n,e,t,r,i,o){var l,f=1&e,g=2&e,v=4&e;if(t&&(l=i?t(n,r,i,o):t(n)),void 0!==l)return l;if(!TE(n))return n;var E=WN(n);if(E){if(l=function gZ(n){var e=n.length,t=new n.constructor(e);return e&&"string"==typeof n[0]&&pZ.call(n,"index")&&(t.index=n.index,t.input=n.input),t}(n),!f)return function Fq(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}(n,l)}else{var T=r2(n),M=T==x5||"[object GeneratorFunction]"==T;if(t5(n))return function Rq(n,e){if(e)return n.slice();var t=n.length,r=d5?d5(t):new n.constructor(t);return n.copy(r),r}(n,f);if(T==P5||T==A5||M&&!i){if(l=g||M?{}:function QZ(n){return"function"!=typeof n.constructor||KN(n)?{}:YZ(g5(n))}(n),!f)return g?function Yq(n,e){return DM(n,m5(n),e)}(n,function Pq(n,e){return n&&DM(e,QN(e),n)}(l,n)):function zq(n,e){return DM(n,JN(n),e)}(n,function Iq(n,e){return n&&DM(e,YN(e),n)}(l,n))}else{if(!Vn[T])return i?n:{};l=ZZ(n,T,f)}}o||(o=new tW);var R=o.get(n);if(R)return R;o.set(n,l),cK(n)?n.forEach(function(J){l.add(SM(J,e,t,J,n,o))}):rK(n)&&n.forEach(function(J,be){l.set(be,SM(J,e,t,be,n,o))});var Q=E?void 0:(v?g?nZ:eZ:g?QN:YN)(n);return function nW(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););}(Q||n,function(J,be){Q&&(J=n[be=J]),K6(l,be,SM(J,e,t,be,n,o))}),l},s2=function UK(n){return NK(n,5)};let dg=(()=>{class n{constructor(t,r){this.authService=t,this.db=r,this._isSearchModalShown$=new _r.X(!1),this.isSearchModalShown$=this._isSearchModalShown$.asObservable()}toggleFollow(t,r){var i=this;return(0,U.Z)(function*(){return new Promise(t?function(){var o=(0,U.Z)(function*(l){yield i.addFollow(r),l("Add follow completed successfully!")});return function(l){return o.apply(this,arguments)}}():function(){var o=(0,U.Z)(function*(l){yield i.removeFollow(r),l("Remove follow completed successfully!")});return function(l){return o.apply(this,arguments)}}())})()}addFollow(t){var r=this;return(0,U.Z)(function*(){var g;r.authService.loggedInUser$.pipe(jt(1)).subscribe({next:(g=(0,U.Z)(function*(v){yield r.db.collection("users").doc(t._id).update({followedByUsers:[...t.followedByUsers,v?.uid]})}),function(E){return g.apply(this,arguments)})});const i=r.authService.loggedInUser$.pipe(jt(1)),o=yield IM(i),l=r.db.collection("users").doc(o.uid).valueChanges().pipe(jt(1)),f=yield IM(l);yield r.db.collection("users").doc(f._id).update({followingUsers:[...f.followingUsers,t._id]})})()}removeFollow(t){var r=this;return(0,U.Z)(function*(){const i=r.authService.loggedInUser$.pipe(jt(1)),o=yield IM(i),l=r.db.collection("users").doc(o.uid).valueChanges().pipe(jt(1)),f=yield IM(l),g=s2(t.followedByUsers),v=g.findIndex(T=>T===o.uid);if(-1===v)return;g.splice(v,1),yield r.db.collection("users").doc(t._id).update({followedByUsers:g});const E=f.followingUsers.findIndex(T=>T===t._id);f.followingUsers.splice(E,1),yield r.db.collection("users").doc(f._id).update({followingUsers:f.followingUsers})})()}getUsers(t){var r=this;return(0,U.Z)(function*(){if(t.account){const i=r.db.collection("users").valueChanges();let o=yield Vr(i);const l=new RegExp(t.account,"i");return o=o.filter(f=>l.test(f.fullName)),(0,ut.of)(o)}return r.db.collection("users").valueChanges()})()}setIsSearchModalShown(t){this._isSearchModalShown$.next(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Nr),u.LFG(wM))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),O5=(()=>{class n{constructor(t){this.db=t}addNotification(t,r){var i=this;return(0,U.Z)(function*(){"likeAction"===r&&(t.message="liked your post"),t.createdAt=Date.now();const o=yield i.db.collection("notifications").add(t);yield i.db.collection("notifications").doc(o.id).update({_id:o.id})})()}getNotificationsForUser(t){return this.db.collection("notifications",r=>r.where("recipient","==",t).orderBy("createdAt","desc")).valueChanges()}markAsRead(t){var r=this;return(0,U.Z)(function*(){yield r.db.doc(`notifications/${t}`).update({read:!0})})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(wM))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",3),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleFollow())}),u._uU(1),u.qZA()}if(2&n){const t=u.oxw(2);u.xp6(1),u.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function VK(n,e){if(1&n&&(u.TgZ(0,"div",1)(1,"ul"),u.YNc(2,BK,2,1,"li",2),u.qZA()()),2&n){const t=u.oxw();u.xp6(2),u.Q6J("ngIf",t.creator._id!==t.loggedInUser.uid)}}let jK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new u.vpe,this.isFollowClicked=!1,this.isMoreOptionsModalInited=!1}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=t.authService.getUserById(t.creator._id),i=yield Vr(r),o=t.authService.getLoggedInUser();t.loggedInUser=o,t.isFollowClicked=!!i.followedByUsers.find(l=>l===o.uid),t.isMoreOptionsModalInited=!0})()}toggleFollow(){this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({post:this.post,user:this.creator,isFollowClicked:this.isFollowClicked})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Nr))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["more-options-modal"]],inputs:{post:"post",creator:"creator"},outputs:{onToggleFollow:"onToggleFollow"},decls:1,vars:1,consts:[["class","more-options-modal",4,"ngIf"],[1,"more-options-modal"],[3,"click",4,"ngIf"],[3,"click"]],template:function(r,i){1&r&&u.YNc(0,VK,3,1,"div",0),2&r&&u.Q6J("ngIf",i.loggedInUser)},dependencies:[Wn],styles:["[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;right:0;top:30px;z-index:20;background-color:#262626;width:-moz-fit-content;width:fit-content;min-height:50px;padding-inline:1.5em;padding-block:1em;color:#f5f5f5;font-size:17px;border-radius:.4em}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   .more-options-modal[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:#868686}"]})}return n})(),MM=(()=>{class n{transform(t){const i=Math.floor(Date.now()/1e3)-t/1e3;return i<60?"just now":i<3600?`${Math.floor(i/60)}m`:i<86400?`${Math.floor(i/3600)}h`:`${Math.floor(i/86400)}d`}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=u.Yjl({name:"timeAgo",type:n,pure:!0})}return n})();function $K(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"more-options-modal",10),u.NdJ("onToggleFollow",function(i){u.CHM(t);const o=u.oxw(2);return u.KtG(o.onToggleFollow.emit(i))}),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("post",t.post)("creator",t.creator)}}function HK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",1)(1,"div",2),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onClickUserImg.emit(i.creator._id))}),u._UZ(2,"img",3),u.TgZ(3,"h5"),u._uU(4),u.TgZ(5,"span"),u._uU(6),u.ALo(7,"timeAgo"),u.qZA()()(),u.TgZ(8,"button",4),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.isMoreOptionsModalShown=!i.isMoreOptionsModalShown)}),u.O4$(),u.TgZ(9,"svg",5),u._UZ(10,"circle",6)(11,"circle",7)(12,"circle",8),u.qZA(),u.YNc(13,$K,1,2,"more-options-modal",9),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(2),u.Q6J("src",t.creator.imgUrl,u.LSH),u.xp6(2),u.hij(" ",t.creator.fullName," "),u.xp6(2),u.hij("\u2022 ",u.lcZ(7,4,t.post.createdAt),""),u.xp6(7),u.Q6J("ngIf",t.isMoreOptionsModalShown)}}let zK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new u.vpe,this.onClickUserImg=new u.vpe,this.isMoreOptionsModalShown=!1}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Nr))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["post-header"]],inputs:{creator:"creator",post:"post",isComponentInitialized:"isComponentInitialized"},outputs:{onToggleFollow:"onToggleFollow",onClickUserImg:"onClickUserImg"},decls:1,vars:1,consts:[["class","post-header",4,"ngIf"],[1,"post-header"],[1,"creator",3,"click"],["alt","creator",3,"src"],["title","More options",1,"btn-more-options",3,"click"],["aria-label","More options","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["cx","12","cy","12","r","1.5"],["cx","6","cy","12","r","1.5"],["cx","18","cy","12","r","1.5"],[3,"post","creator","onToggleFollow",4,"ngIf"],[3,"post","creator","onToggleFollow"]],template:function(r,i){1&r&&u.YNc(0,HK,14,6,"div",0),2&r&&u.Q6J("ngIf",i.creator&&i.isComponentInitialized)},dependencies:[Wn,jK,MM],styles:["[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em;color:#f5f5f5;padding-inline:1.5em}@media (min-width: 600px){[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:40px;border:none}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#919191;font-weight:400}[_nghost-%COMP%]   .post-header[_ngcontent-%COMP%]   .btn-more-options[_ngcontent-%COMP%]{background-color:transparent;border:none;display:flex;align-items:center;position:relative}"]})}return n})();const GK=function(n,e){return{"btn-toggle-follow":!0,following:n,disabled:e}};function WK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",4),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleFollow())}),u._uU(1),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("ngClass",u.WLB(3,GK,t.isFollowClicked,t.isToggleFollowProcessing))("disabled",t.isToggleFollowProcessing),u.xp6(1),u.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function qK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li")(1,"img",1),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onClickUserImg.emit(i.user._id))}),u.qZA(),u.TgZ(2,"h4",2),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onClickUserImg.emit(i.user._id))}),u._uU(3),u.qZA(),u.YNc(4,WK,2,6,"button",3),u.qZA()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("src",t.user.imgUrl,u.LSH),u.xp6(2),u.Oqu(t.user.fullName),u.xp6(1),u.Q6J("ngIf",t.user._id!==t.loggedInUser.uid)}}let ZK=(()=>{class n{constructor(t){this.authService=t,this.onToggleFollow=new u.vpe,this.onClickUserImg=new u.vpe,this.isFollowClicked=!1,this.isComponentInitialized=!1,this.isToggleFollowProcessing=!1}ngOnInit(){var t=this;return(0,U.Z)(function*(){console.log("user",t.user);const r=t.authService.getUserById(t.user._id),i=yield Vr(r),o=t.authService.getLoggedInUser();t.loggedInUser=o,t.isFollowClicked=!!i.followedByUsers.find(l=>l===o.uid),t.isComponentInitialized=!0})()}toggleFollow(){this.isToggleFollowProcessing||(this.isToggleFollowProcessing=!0,this.isFollowClicked=!this.isFollowClicked,this.onToggleFollow.emit({user:this.user,isFollowClicked:this.isFollowClicked}),this.isToggleFollowProcessing=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Nr))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["liked-by-user-row"]],inputs:{post:"post",user:"user"},outputs:{onToggleFollow:"onToggleFollow",onClickUserImg:"onClickUserImg"},decls:1,vars:1,consts:[[4,"ngIf"],["alt","loggedInUser",3,"src","click"],[3,"click"],[3,"ngClass","disabled","click",4,"ngIf"],[3,"ngClass","disabled","click"]],template:function(r,i){1&r&&u.YNc(0,qK,5,3,"li",0),2&r&&u.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Eo,Wn],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:45px;border-radius:50%;flex:1}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{cursor:pointer;border:none;background-color:#0095f6;color:#f5f5f5;border-radius:.5em;padding-inline:1.5em;height:2.5em;font-size:14px;font-weight:bolder;transition:all .2s ease-in-out;flex:2}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]:hover{background-color:#0284d5}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.following[_ngcontent-%COMP%]{background-color:#555555b3}"]})}return n})();function KK(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"liked-by-user-row",7),u.NdJ("onToggleFollow",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onToggleFollow.emit(i))})("onClickUserImg",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onClickUserImg.emit(i))}),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw();u.Q6J("post",r.post)("user",t)}}let YK=(()=>{class n{constructor(t){this.renderer=t,this.onToggleLikedByUsersModal=new u.vpe,this.onToggleFollow=new u.vpe,this.onCloseLikedByUsers=new u.vpe,this.onClickUserImg=new u.vpe}ngOnInit(){this.renderer.addClass(document.body,"body-unscrollable")}toggleLikedByUsersModal(){this.onToggleLikedByUsersModal.emit(!this.isLikedByUsersModalShown)}trackByUserId(t,r){return r._id}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["liked-by-users-list"]],inputs:{post:"post",isLikedByUsersModalShown:"isLikedByUsersModalShown"},outputs:{onToggleLikedByUsersModal:"onToggleLikedByUsersModal",onToggleFollow:"onToggleFollow",onCloseLikedByUsers:"onCloseLikedByUsers",onClickUserImg:"onClickUserImg"},decls:12,vars:2,consts:[[1,"liked-by-users-list"],[1,"header"],[1,"btn-close-liked-by-users-list",3,"click"],["aria-label","Close","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","18","role","img","viewBox","0 0 24 24","width","18",1,"x1lliihq","x1n2onr6"],["fill","none","points","20.643 3.357 12 12 3.353 20.647","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","3","x1","20.649","x2","3.354","y1","20.649","y2","3.354"],[3,"post","user","onToggleFollow","onClickUserImg",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","user","onToggleFollow","onClickUserImg"]],template:function(r,i){1&r&&(u.TgZ(0,"article",0)(1,"div",1)(2,"h3"),u._uU(3,"Likes"),u.qZA(),u.TgZ(4,"button",2),u.NdJ("click",function(){return i.toggleLikedByUsersModal(),i.onCloseLikedByUsers.emit(!1)}),u.O4$(),u.TgZ(5,"svg",3)(6,"title"),u._uU(7,"Close"),u.qZA(),u._UZ(8,"polyline",4)(9,"line",5),u.qZA()()(),u.kcU(),u.TgZ(10,"ul"),u.YNc(11,KK,1,2,"liked-by-user-row",6),u.qZA()()),2&r&&(u.xp6(11),u.Q6J("ngForOf",i.post.likedByUsers)("ngForTrackBy",i.trackByUserId))},dependencies:[os,ZK],styles:["[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;background-color:#262626;border-radius:1em;width:calc(100vw - 70px);max-width:27em;display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-block-end:1px solid rgba(252,252,252,.11);height:3.5em;position:relative}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-close-liked-by-users-list[_ngcontent-%COMP%]{position:absolute;right:1.2em;top:50%;transform:translateY(-50%);cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .liked-by-users-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;padding-inline:1em;padding-block-end:1em;max-height:16.8em;overflow:auto}"]})}return n})(),k5=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj),u.Y36(u.SBq))};static#t=this.\u0275dir=u.lG2({type:n})}return n})(),hg=(()=>{class n extends k5{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=u.n5z(n)))(i||n)}}();static#t=this.\u0275dir=u.lG2({type:n,features:[u.qOj]})}return n})();const Sc=new u.OlP("NgValueAccessor"),XK={provide:Sc,useExisting:(0,u.Gpc)(()=>Jd),multi:!0},tY=new u.OlP("CompositionEventMode");let Jd=(()=>{class n extends k5{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function eY(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(tY,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&u.NdJ("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[u._Bn([XK]),u.qOj]})}return n})();const ns=new u.OlP("NgValidators"),eh=new u.OlP("NgAsyncValidators");function z5(n){return null!=n}function G5(n){return(0,u.QGY)(n)?(0,pn.D)(n):n}function W5(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function q5(n,e){return e.map(t=>t(n))}function Z5(n){return n.map(e=>function rY(n){return!n.validate}(e)?e:t=>e.validate(t))}function o2(n){return null!=n?function K5(n){if(!n)return null;const e=n.filter(z5);return 0==e.length?null:function(t){return W5(q5(t,e))}}(Z5(n)):null}function a2(n){return null!=n?function Y5(n){if(!n)return null;const e=n.filter(z5);return 0==e.length?null:function(t){return function QK(...n){const e=(0,to.jO)(n),{args:t,keys:r}=vn(n),i=new gi.y(o=>{const{length:l}=t;if(!l)return void o.complete();const f=new Array(l);let g=l,v=l;for(let E=0;E<l;E++){let T=!1;(0,ku.Xf)(t[E]).subscribe((0,mi.x)(o,M=>{T||(T=!0,v--),f[E]=M},()=>g--,void 0,()=>{(!g||!T)&&(v||o.next(r?no(r,f):f),o.complete())}))}});return e?i.pipe(Qc(e)):i}(q5(t,e).map(G5)).pipe((0,wt.U)(W5))}}(Z5(n)):null}function Q5(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function c2(n){return n?Array.isArray(n)?n:[n]:[]}function xM(n,e){return Array.isArray(n)?n.includes(e):n===e}function eB(n,e){const t=c2(e);return c2(n).forEach(i=>{xM(t,i)||t.push(i)}),t}function tB(n,e){return c2(e).filter(t=>!xM(n,t))}class nB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=o2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=a2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ms extends nB{get formDirective(){return null}get path(){return null}}class th extends nB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ov=(()=>{class n extends rB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(th,2))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[u.qOj]})}return n})(),xE=(()=>{class n extends rB{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ms,10))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[u.qOj]})}return n})();const PE="VALID",OM="INVALID",av="PENDING",OE="DISABLED";function d2(n){return(kM(n)?n.validators:n)||null}function h2(n,e){return(kM(e)?e.asyncValidators:n)||null}function kM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class aB{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===PE}get invalid(){return this.status===OM}get pending(){return this.status==av}get disabled(){return this.status===OE}get enabled(){return this.status!==OE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(eB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tB(e,this._rawAsyncValidators))}hasValidator(e){return xM(this._rawValidators,e)}hasAsyncValidator(e){return xM(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=av,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=OE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=PE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===PE||this.status===av)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?OE:PE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=av,this._hasOwnPendingAsyncValidator=!0;const t=G5(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?OE:this.errors?OM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(av)?av:this._anyControlsHaveStatus(OM)?OM:PE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kM(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function aY(n){return Array.isArray(n)?o2(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function cY(n){return Array.isArray(n)?a2(n):n||null}(this._rawAsyncValidators)}}class f2 extends aB{constructor(e,t,r){super(d2(t),h2(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function oB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function sB(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[t])throw new u.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const fg=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>kE}),kE="always";function RE(n,e,t=kE){p2(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function dY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&cB(n,e)})}(n,e),function fY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function hY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&cB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function uY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function FM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function p2(n,e){const t=function J5(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Q5(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function X5(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Q5(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();FM(e._rawValidators,i),FM(e._rawAsyncValidators,i)}function cB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const yY={provide:ms,useExisting:(0,u.Gpc)(()=>pg)},NE=(()=>Promise.resolve())();let pg=(()=>{class n extends ms{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new f2({},o2(t),a2(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){NE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),RE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){NE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){NE.then(()=>{const r=this._findContainer(t.path),i=new f2({});(function lB(n,e){p2(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){NE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){NE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function uB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ns,10),u.Y36(eh,10),u.Y36(fg,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&u.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([yY]),u.qOj]})}return n})();function dB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function hB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const fB=class extends aB{constructor(e=null,t,r){super(d2(t),h2(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kM(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=hB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){hB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wY={provide:th,useExisting:(0,u.Gpc)(()=>gg)},mB=(()=>Promise.resolve())();let gg=(()=>{class n extends th{constructor(t,r,i,o,l,f){super(),this._changeDetectorRef=l,this.callSetDisabledState=f,this.control=new fB,this._registered=!1,this.name="",this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function _2(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Jd?t=o:function mY(n){return Object.getPrototypeOf(n.constructor)===hg}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function m2(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){RE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){mB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,u.VuI)(r);mB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function RM(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(ms,9),u.Y36(ns,10),u.Y36(eh,10),u.Y36(Sc,10),u.Y36(u.sBO,8),u.Y36(fg,8))};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([wY]),u.qOj,u.TTD]})}return n})(),FE=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),yB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({})}return n})();const y2=new u.OlP("NgModelWithFormControlWarning");let NB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[yB]})}return n})(),WY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fg,useValue:t.callSetDisabledState??kE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[NB]})}return n})(),qY=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:y2,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:fg,useValue:t.callSetDisabledState??kE}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[NB]})}return n})();function ZY(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"form",1),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.addReply())}),u._UZ(1,"img",2),u.TgZ(2,"input",3),u.NdJ("ngModelChange",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.reply.message=i)}),u.qZA(),u.TgZ(3,"button",4),u._uU(4,"Post"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("src",t.reply.createdByUserId.imgUrl,u.LSH),u.xp6(1),u.MGl("placeholder","Add a reply to ",t.comment.createdByUserId.fullName,"..."),u.Q6J("ngModel",t.reply.message)}}let KY=(()=>{class n{constructor(t,r){this.postService=t,this.authService=r,this.onAddReply=new u.vpe,this.reply={_id:"",parentId:"",isTopLevel:!1,postId:"",createdByUserId:this.authService.getLoggedInUser().uid,message:"",createdAt:0},this.isComponentInitialized=!1}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=t.postService.getCommentById(t.comment._id).pipe(jt(1));t.comment=yield Vr(r);const i=t.authService.getUserById(t.comment.createdByUserId);t.comment.createdByUserId=yield Vr(i),t.reply.postId=t.comment.postId,t.reply.parentId=t.comment.parentId;const o=t.authService.getUserById(t.reply.createdByUserId);t.reply.createdByUserId=yield Vr(o),t.isComponentInitialized=!0})()}addReply(){this.reply.message&&(this.onAddReply.emit({...this.reply}),this.reply.message="")}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Qd),u.Y36(Nr))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["reply-form"]],inputs:{comment:"comment"},outputs:{onAddReply:"onAddReply"},decls:1,vars:1,consts:[[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["alt","",3,"src"],["type","text","name","reply-message",3,"ngModel","placeholder","ngModelChange"],["type","submit"]],template:function(r,i){1&r&&u.YNc(0,ZY,5,3,"form",0),2&r&&u.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Wn,FE,Jd,ov,xE,gg,pg],styles:["[_nghost-%COMP%]{position:fixed;bottom:59px;left:0;z-index:99;background-color:#000;height:3.5em;width:100%;padding-inline:1.5em}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;height:100%}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;color:#f5f5f5;height:100%;background-color:#000;border:none;flex:3}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f5f5f5}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:100%;border:none;cursor:pointer;background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;text-align:right;flex:1}"]})}return n})(),YY=(()=>{class n{constructor(t){this.router=t}navigateToUserProfile(){this.router.navigateByUrl(`profile/${this.reply.createdByUserId._id}`)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Tn))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["reply-preview"]],inputs:{reply:"reply"},decls:11,vars:6,consts:[["alt","user",3,"src","click"],[1,"content"],[1,"inner-container"],[1,"fullname",3,"click"],[1,"created-at"]],template:function(r,i){1&r&&(u.TgZ(0,"li")(1,"img",0),u.NdJ("click",function(){return i.navigateToUserProfile()}),u.qZA(),u.TgZ(2,"div",1)(3,"div",2)(4,"span",3),u.NdJ("click",function(){return i.navigateToUserProfile()}),u._uU(5),u.qZA(),u.TgZ(6,"span",4),u._uU(7),u.ALo(8,"timeAgo"),u.qZA()(),u.TgZ(9,"p"),u._uU(10),u.qZA()()()),2&r&&(u.xp6(1),u.Q6J("src",i.reply.createdByUserId.imgUrl,u.LSH),u.xp6(4),u.Oqu(i.reply.createdByUserId.fullName),u.xp6(2),u.Oqu(u.lcZ(8,4,i.reply.createdAt)),u.xp6(3),u.hij(" ",i.reply.message," "))},dependencies:[MM],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.6em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;border-radius:50%}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#919191;font-size:13px}"]})}return n})();function QY(n,e){1&n&&u._UZ(0,"reply-preview",3),2&n&&u.Q6J("reply",e.$implicit)}function JY(n,e){if(1&n&&(u.TgZ(0,"ul",1),u.YNc(1,QY,1,1,"reply-preview",2),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngForOf",t.replies)("ngForTrackBy",t.trackByReplyId)}}let XY=(()=>{class n{trackByReplyId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["reply-list"]],inputs:{replies:"replies"},decls:1,vars:1,consts:[["class","replies",4,"ngIf"],[1,"replies"],[3,"reply",4,"ngFor","ngForOf","ngForTrackBy"],[3,"reply"]],template:function(r,i){1&r&&u.YNc(0,JY,2,2,"ul",0),2&r&&u.Q6J("ngIf",null==i.replies?null:i.replies.length)},dependencies:[os,Wn,YY],styles:["[_nghost-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.3em;padding-inline-start:2.7em}"]})}return n})();function eQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onClickReply())}),u._uU(1," Reply "),u.qZA()}}function tQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"p",13),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.isReplyListShown=!i.isReplyListShown)}),u._uU(1),u.qZA()}if(2&n){const t=u.oxw();u.xp6(1),u.lnq(" ",t.isReplyListShown?"Hide":"Show"," ",t.replies.length," ",1===t.replies.length?"reply":"replies"," ")}}function nQ(n,e){if(1&n&&u._UZ(0,"reply-list",14),2&n){const t=u.oxw();u.Q6J("replies",t.replies)}}function rQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"reply-form",15),u.NdJ("onAddReply",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.addReply(i))}),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("comment",t.comment)}}let iQ=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.router=i,this.onAddReply=new u.vpe,this.isReplyFormShown=!1,this.replies=[],this.isReplyListShown=!1}ngOnInit(){var t=this;document.body.addEventListener("click",this.handleOutsideClick.bind(this)),this.comment.replies?.length&&this.postService.getRepliesForComment(this.comment).pipe(jt(1),(0,En.w)(function(){var r=(0,U.Z)(function*(i){const o=i.map(function(){var l=(0,U.Z)(function*(f){const g=t.authService.getUserById(f.createdByUserId),v=yield Vr(g);return{...f,createdByUserId:v}});return function(f){return l.apply(this,arguments)}}());return yield Promise.all(o)});return function(i){return r.apply(this,arguments)}}())).subscribe({next:r=>{this.replies=r}})}ngOnChanges(t){var r=this;t.comment.firstChange||t.comment.currentValue.replies.length&&this.postService.getRepliesForComment(this.comment).pipe(jt(1),(0,En.w)(function(){var i=(0,U.Z)(function*(o){const l=o.map(function(){var f=(0,U.Z)(function*(g){const v=r.authService.getUserById(g.createdByUserId),E=yield Vr(v);return{...g,createdByUserId:E}});return function(g){return f.apply(this,arguments)}}());return yield Promise.all(l)});return function(o){return i.apply(this,arguments)}}())).subscribe({next:i=>{this.replies=i}})}addReply(t){this.onAddReply.emit(t),this.isReplyFormShown=!1}onClickReply(){this.isReplyFormShown=!0}handleOutsideClick(t){const r=t.target;!r.closest(".reply-form")&&!r.classList.contains("btn-reply")&&(this.isReplyFormShown=!1)}navigateToUserProfile(){this.router.navigateByUrl(`/profile/${this.comment.createdByUserId._id}`)}ngOnDestroy(){document.body.removeEventListener("click",this.handleOutsideClick)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Qd),u.Y36(Nr),u.Y36(Tn))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["comment-cmp"]],inputs:{comment:"comment"},outputs:{onAddReply:"onAddReply"},features:[u.TTD],decls:17,vars:10,consts:[[1,"comment"],[1,"meter"],[1,"comment-top-level"],["alt","user",3,"src","click"],[1,"content"],[1,"inner-container"],[1,"fullname",3,"click"],[1,"created-at"],["class","btn-reply",3,"click",4,"ngIf"],["class","btn-toggle-replies",3,"click",4,"ngIf"],[3,"replies",4,"ngIf"],["class","reply-form",3,"comment","onAddReply",4,"ngIf"],[1,"btn-reply",3,"click"],[1,"btn-toggle-replies",3,"click"],[3,"replies"],[1,"reply-form",3,"comment","onAddReply"]],template:function(r,i){1&r&&(u.TgZ(0,"li",0),u._UZ(1,"div",1),u.TgZ(2,"div",2)(3,"img",3),u.NdJ("click",function(){return i.navigateToUserProfile()}),u.qZA(),u.TgZ(4,"div",4)(5,"div",5)(6,"span",6),u.NdJ("click",function(){return i.navigateToUserProfile()}),u._uU(7),u.qZA(),u.TgZ(8,"span",7),u._uU(9),u.ALo(10,"timeAgo"),u.qZA()(),u.TgZ(11,"p"),u._uU(12),u.qZA(),u.YNc(13,eQ,2,0,"button",8),u.qZA()(),u.YNc(14,tQ,2,3,"p",9),u.YNc(15,nQ,1,1,"reply-list",10),u.YNc(16,rQ,1,1,"reply-form",11),u.qZA()),2&r&&(u.xp6(3),u.Q6J("src",i.comment.createdByUserId.imgUrl,u.LSH),u.xp6(4),u.Oqu(i.comment.createdByUserId.fullName),u.xp6(2),u.Oqu(u.lcZ(10,8,i.comment.createdAt)),u.xp6(3),u.hij(" ",i.comment.message," "),u.xp6(1),u.Q6J("ngIf",i.comment.isTopLevel),u.xp6(1),u.Q6J("ngIf",i.replies.length),u.xp6(1),u.Q6J("ngIf",i.isReplyListShown&&i.replies.length),u.xp6(1),u.Q6J("ngIf",i.isReplyFormShown))},dependencies:[Wn,KY,XY,MM],styles:["[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em;position:relative}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .meter[_ngcontent-%COMP%]{position:absolute;z-index:-10;width:1px;height:100%;background-color:#ffffff82;left:17px;top:1px}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .btn-toggle-replies[_ngcontent-%COMP%]{font-size:13px;padding-inline-start:2.7em;cursor:pointer}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.8em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;border-radius:50%}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4em}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:12px;font-weight:bolder}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#919191;font-size:13px}[_nghost-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-top-level[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .btn-reply[_ngcontent-%COMP%]{background-color:#000;border:none;color:#f5f5f5;width:-moz-fit-content;width:fit-content;padding-inline-end:.8em;font-size:12px;cursor:pointer}"]})}return n})();function sQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"comment-cmp",8),u.NdJ("onAddReply",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onAddReply.emit(i))}),u.qZA()}2&n&&u.Q6J("comment",e.$implicit)}function oQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"form",9),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.addComment())}),u._UZ(1,"img",10),u.TgZ(2,"input",11),u.NdJ("ngModelChange",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.comment.message=i)}),u.qZA(),u.TgZ(3,"button",12),u._uU(4,"Post"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("src",t.loggedInUserFromDB.imgUrl,u.LSH),u.xp6(1),u.Q6J("ngModel",t.comment.message)}}let aQ=(()=>{class n{constructor(t,r,i){this.postService=t,this.authService=r,this.renderer=i,this.onAddComment=new u.vpe,this.onAddReply=new u.vpe,this.onToggleCommentsModal=new u.vpe,this.onGetCommentsLength=new u.vpe,this.comment={_id:"",parentId:"",isTopLevel:!0,postId:"",createdByUserId:"",message:"",createdAt:0,replies:[]}}ngOnInit(){var t=this;return(0,U.Z)(function*(){t.renderer.addClass(document.body,"body-unscrollable");const r=t.authService.getUserById(t.loggedInUser.uid),i=yield Vr(r);t.loggedInUserFromDB=i,t.comment.postId=t.post._id,t.comment.createdByUserId=i._id,t.commentsSubscription=t.postService.getCommentsByPostId(t.post._id).pipe((0,En.w)(function(){var o=(0,U.Z)(function*(l){const f=l.map(function(){var g=(0,U.Z)(function*(v){const E=t.authService.getUserById(v.createdByUserId),T=yield Vr(E);return{...v,createdByUserId:T}});return function(v){return g.apply(this,arguments)}}());return yield Promise.all(f)});return function(l){return o.apply(this,arguments)}}())).subscribe({next:o=>{t.comments=o,t.onGetCommentsLength.emit(t.comments.length)}})})()}addComment(){this.onAddComment.emit({comment:this.comment,post:this.post}),this.comment.message=""}trackByCommentId(t,r){return r._id}ngOnDestroy(){this.commentsSubscription?.unsubscribe(),this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Qd),u.Y36(Nr),u.Y36(u.Qsj))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["comments-modal"]],inputs:{post:"post",loggedInUser:"loggedInUser"},outputs:{onAddComment:"onAddComment",onAddReply:"onAddReply",onToggleCommentsModal:"onToggleCommentsModal",onGetCommentsLength:"onGetCommentsLength"},decls:9,vars:3,consts:[[1,"comment-modal"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[1,"comments"],[1,"comment-list"],[3,"comment","onAddReply",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngSubmit",4,"ngIf"],[3,"comment","onAddReply"],[3,"ngSubmit"],["alt","",3,"src"],["type","text","name","message","id","comment","placeholder","Add a comment...",3,"ngModel","ngModelChange"],[1,"btn-add-comment"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0)(1,"button",1),u.NdJ("click",function(){return i.onToggleCommentsModal.emit()}),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"path",3),u.qZA()(),u.kcU(),u.TgZ(4,"div",4)(5,"div",5)(6,"ul"),u.YNc(7,sQ,1,1,"comment-cmp",6),u.qZA()()(),u.YNc(8,oQ,5,2,"form",7),u.qZA()),2&r&&(u.xp6(7),u.Q6J("ngForOf",i.comments)("ngForTrackBy",i.trackByCommentId),u.xp6(1),u.Q6J("ngIf",i.loggedInUserFromDB))},dependencies:[os,Wn,FE,Jd,ov,xE,gg,pg,iQ],styles:["[_nghost-%COMP%]{position:fixed;top:0;z-index:99;width:100%;height:100%;background-color:#000;padding-block-start:3.8em;overflow:auto}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]{position:relative;padding-block-start:1.5em;height:100%;display:grid;grid-template-columns:25px 1fr 25px;grid-template-rows:1fr auto}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:fixed;background-color:#000;cursor:pointer;border:none;padding-inline:.5em;padding-block-end:.5em;right:20px;top:85px;z-index:40}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   .comment-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.5em;padding-block-end:5.5em;height:100%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;height:3.5em;position:sticky;bottom:60px;background-color:#000;border-block-start:1px solid rgba(255,255,255,.24);grid-column:1/-1;padding-inline:25px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2em;border-radius:50%}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:3;height:100%;border:none;color:#f5f5f5;background-color:#000;font-size:16px}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f5f5f5;font-family:Arial,sans-serif;background-color:#000}[_nghost-%COMP%]   .comment-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:100%;border:none;cursor:pointer;background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;text-align:right}"]})}return n})();function cQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",22),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleLike())}),u.O4$(),u.TgZ(1,"svg",23)(2,"title"),u._uU(3,"Like"),u.qZA(),u._UZ(4,"path",24),u.qZA()()}}function lQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",22),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.toggleLike())}),u.O4$(),u.TgZ(1,"svg",25)(2,"title"),u._uU(3,"Unlike"),u.qZA(),u._UZ(4,"path",26),u.qZA()()}}function uQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"span"),u._uU(1," and "),u.TgZ(2,"span",32),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(3);return i.isLikedByUsersModalShown=!0,u.KtG(i.onClickLikedByUsers.emit(!0))}),u._uU(3),u.ALo(4,"number"),u.qZA()()}if(2&n){const t=u.oxw(3);u.xp6(3),u.AsE("",u.lcZ(4,2,t.post.likedByUsers.length-1)," ",t.post.likedByUsers.length>2?"others":"other","")}}function dQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"liked-by-users-list",33),u.NdJ("onToggleLikedByUsersModal",function(i){u.CHM(t);const o=u.oxw(3);return u.KtG(o.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){u.CHM(t);const o=u.oxw(3);return u.KtG(o.onToggleFollow.emit(i))})("onCloseLikedByUsers",function(i){u.CHM(t);const o=u.oxw(3);return u.KtG(o.onCloseLikedByUsers.emit(i))})("onClickUserImg",function(i){u.CHM(t);const o=u.oxw(3);return u.KtG(o.onClickUserImg.emit(i))}),u.qZA()}if(2&n){const t=u.oxw(3);u.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function hQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"div",27)(1,"img",28),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onClickUserImg.emit(i.post.likedByUsers[0]._id))}),u.qZA(),u.TgZ(2,"p"),u._uU(3," Liked by "),u.TgZ(4,"span",29),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onClickUserImg.emit(i.post.likedByUsers[0]._id))}),u._uU(5),u.qZA(),u.YNc(6,uQ,5,4,"span",30),u.qZA(),u.YNc(7,dQ,1,2,"liked-by-users-list",31),u.qZA()}if(2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("src",t.post.likedByUsers[0].imgUrl,u.LSH),u.xp6(4),u.Oqu(t.post.likedByUsers[0].fullName),u.xp6(1),u.Q6J("ngIf",t.post.likedByUsers.length>1),u.xp6(1),u.Q6J("ngIf",t.isLikedByUsersModalShown)}}function fQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"span"),u._uU(1," and "),u.TgZ(2,"span",32),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(3);return u.KtG(i.isLikedByUsersModalShown=!i.isLikedByUsersModalShown)}),u._uU(3),u.ALo(4,"number"),u.qZA()()}if(2&n){const t=u.oxw(3);u.xp6(3),u.AsE("",u.lcZ(4,2,t.likedByUsersCloneDeep.length-1)," ",t.likedByUsersCloneDeep.length>2?"others":"other","")}}function pQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"liked-by-users-list",38),u.NdJ("onToggleLikedByUsersModal",function(i){u.CHM(t);const o=u.oxw(3);return u.KtG(o.toggleLikedByUsersModal(i))})("onToggleFollow",function(i){u.CHM(t);const o=u.oxw(3);return u.KtG(o.onToggleFollow.emit(i))}),u.qZA()}if(2&n){const t=u.oxw(3);u.Q6J("post",t.post)("isLikedByUsersModalShown",t.isLikedByUsersModalShown)}}function gQ(n,e){if(1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div",34),u._UZ(1,"img",35),u.TgZ(2,"p"),u._uU(3," Liked by "),u.TgZ(4,"span",36),u._uU(5),u.qZA(),u.YNc(6,fQ,5,4,"span",30),u.qZA(),u.YNc(7,pQ,1,2,"liked-by-users-list",37),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("src",t.likedByUsersCloneDeep[0].imgUrl,u.LSH),u.xp6(4),u.Oqu(t.likedByUsersCloneDeep[0].fullName),u.xp6(1),u.Q6J("ngIf",t.likedByUsersCloneDeep.length>1),u.xp6(1),u.Q6J("ngIf",t.isLikedByUsersModalShown)}}function mQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",43),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(4);return u.KtG(i.isMoreClicked=!i.isMoreClicked)}),u._uU(1," more "),u.qZA()}}function _Q(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"p")(1,"span",41),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(3);return u.KtG(i.onClickUserImg.emit(i.creator._id))}),u._uU(2),u.qZA(),u._uU(3),u.ALo(4,"slice"),u.YNc(5,mQ,2,0,"button",42),u.qZA()}if(2&n){const t=u.oxw(3);u.xp6(2),u.Oqu(t.creator.fullName),u.xp6(1),u.AsE(" ",u.Dn7(4,4,t.post.content,0,120)," ",t.post.content.length>=120?"...":""," "),u.xp6(2),u.Q6J("ngIf",t.post.content.length>=120)}}function yQ(n,e){if(1&n&&(u.TgZ(0,"p")(1,"span",44),u._uU(2),u.qZA(),u._uU(3),u.qZA()),2&n){const t=u.oxw(3);u.xp6(2),u.Oqu(t.creator.fullName),u.xp6(1),u.hij(" ",t.post.content," ")}}function vQ(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw(3);u.xp6(1),u.hij("View ",t.commentsLength," comment")}}function CQ(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw(3);u.xp6(1),u.hij("View all ",t.commentsLength," comments")}}function wQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"div",39),u.YNc(1,_Q,6,8,"p",30),u.YNc(2,yQ,4,2,"p",30),u.TgZ(3,"p",40),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onToggleCommentModal())}),u.YNc(4,vQ,2,1,"span",30),u.YNc(5,CQ,2,1,"span",30),u.qZA()()}if(2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("ngIf",!t.isMoreClicked),u.xp6(1),u.Q6J("ngIf",t.isMoreClicked),u.xp6(2),u.Q6J("ngIf",1===t.commentsLength),u.xp6(1),u.Q6J("ngIf",t.commentsLength>=2)}}function IQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"comments-modal",45),u.NdJ("onAddComment",function(i){u.CHM(t);const o=u.oxw(2);return u.KtG(o.onAddComment.emit(i))})("onToggleCommentsModal",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onToggleCommentModal())})("onGetCommentsLength",function(i){u.CHM(t);const o=u.oxw(2);return u.KtG(o.commentsLength=i)})("onAddReply",function(i){u.CHM(t);const o=u.oxw(2);return u.KtG(o.onAddReply.emit(i))}),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("post",t.post)("loggedInUser",t.loggedInUser)}}function EQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",1)(1,"post-header",2),u.NdJ("onToggleFollow",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onToggleFollow.emit(i))})("onClickUserImg",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onClickUserImg.emit(i))}),u.qZA(),u._UZ(2,"img",3),u.TgZ(3,"div",4)(4,"div",5)(5,"div",6),u.YNc(6,cQ,5,0,"button",7),u.YNc(7,lQ,5,0,"button",7),u.TgZ(8,"button",8),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onToggleCommentModal())}),u.O4$(),u.TgZ(9,"svg",9)(10,"title"),u._uU(11,"CommentModel"),u.qZA(),u._UZ(12,"path",10),u.qZA()(),u.kcU(),u.TgZ(13,"button",11),u.O4$(),u.TgZ(14,"svg",12)(15,"title"),u._uU(16,"Share PostModel"),u.qZA(),u._UZ(17,"line",13)(18,"polygon",14),u.qZA()()(),u.kcU(),u.TgZ(19,"button",15),u.O4$(),u.TgZ(20,"svg",16)(21,"title"),u._uU(22,"Save"),u.qZA(),u._UZ(23,"polygon",17),u.qZA()()(),u.YNc(24,hQ,8,4,"div",18),u.YNc(25,gQ,8,4,"div",19),u.YNc(26,wQ,6,4,"div",20),u.qZA(),u.YNc(27,IQ,1,2,"comments-modal",21),u.qZA()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("post",t.post)("creator",t.creator)("isComponentInitialized",t.isComponentInitialized),u.xp6(1),u.Tol(t.post.filterSelected),u.Q6J("src",t.post.imgUrl,u.LSH),u.xp6(4),u.Q6J("ngIf",!t.isLikeClicked),u.xp6(1),u.Q6J("ngIf",t.isLikeClicked),u.xp6(17),u.Q6J("ngIf",t.post.likedByUsers.length&&"object"===t.getTypeOfLikedByUsers()),u.xp6(1),u.Q6J("ngIf",t.likedByUsersCloneDeep[0]&&"string"===t.getTypeOfLikedByUsers()),u.xp6(1),u.Q6J("ngIf",t.creator),u.xp6(1),u.Q6J("ngIf",t.isCommentModalShown)}}let FB=(()=>{class n{constructor(t,r){this.authService=t,this.postService=r,this.onToggleLike=new u.vpe,this.onToggleFollow=new u.vpe,this.onAddNotification=new u.vpe,this.onAddComment=new u.vpe,this.onAddReply=new u.vpe,this.onClickUserImg=new u.vpe,this.onClickLikedByUsers=new u.vpe,this.onCloseLikedByUsers=new u.vpe,this.isMoreClicked=!1,this.isLikedByUsersModalShown=!1,this.loggedInUser=this.authService.getLoggedInUser(),this.isLikeClicked=!1,this.isComponentInitialized=!1,this.isCommentModalShown=!1,this.commentsLength=0}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=t.post.likedByUsers?.map(function(){var i=(0,U.Z)(function*(o){"string"!=typeof o&&(o=o._id);const l=t.authService.getUserById(o).pipe(jt(1));return yield Vr(l)});return function(o){return i.apply(this,arguments)}}());if(t.post.likedByUsers=yield Promise.all(r),"object"!=typeof t.post.likedByUsers?.[0]){const i=t.post.likedByUsers?.map(function(){var o=(0,U.Z)(function*(l){"string"!=typeof l&&(l=l._id);const f=t.authService.getUserById(l).pipe(jt(1));return yield Vr(f)});return function(l){return o.apply(this,arguments)}}());t.post.likedByUsers=yield Promise.all(i)}t.likedByUsersCloneDeep=s2(t.post.likedByUsers),t.postService.getCommentsByPostId(t.post._id).pipe(jt(1)).subscribe({next:i=>{t.commentsLength=i.length}}),t.authService.getUserById(t.post.creatorId).pipe(jt(1)).subscribe({next:i=>{t.creator=i,t.post.likedByUsers.find(l=>l._id===t.loggedInUser.uid||l===t.loggedInUser.uid)&&(t.isLikeClicked=!0),t.isComponentInitialized=!0}})})()}ngOnChanges(t){var r=this;return(0,U.Z)(function*(){if(r.isComponentInitialized&&t.post)try{const i=r.post.likedByUsers.map(function(){var l=(0,U.Z)(function*(f){const g=r.authService.getUserById(f).pipe(jt(1));return yield Vr(g)});return function(f){return l.apply(this,arguments)}}());r.post.likedByUsers=yield Promise.all(i);let o=0;r.post.likedByUsers.forEach(l=>{"object"==typeof l&&o++}),o===r.post.likedByUsers.length&&(r.likedByUsersCloneDeep=s2(r.post.likedByUsers))}catch(i){console.error(i)}})()}toggleLike(){this.isLikeClicked=!this.isLikeClicked,this.onToggleLike.emit({post:this.post,isLikeClicked:this.isLikeClicked}),this.loggedInUser.uid!==this.creator._id&&this.isLikeClicked&&this.onAddNotification.emit(this.post)}toggleLikedByUsersModal(t){this.isLikedByUsersModalShown=t}onToggleCommentModal(){this.isCommentModalShown=!this.isCommentModalShown}getTypeOfLikedByUsers(){return typeof this.post.likedByUsers[0]}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Nr),u.Y36(Qd))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["post-card"]],inputs:{post:"post"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment",onAddReply:"onAddReply",onClickUserImg:"onClickUserImg",onClickLikedByUsers:"onClickLikedByUsers",onCloseLikedByUsers:"onCloseLikedByUsers"},features:[u.TTD],decls:1,vars:1,consts:[["class","post-card",4,"ngIf"],[1,"post-card"],[3,"post","creator","isComponentInitialized","onToggleFollow","onClickUserImg"],["alt","post",3,"src"],[1,"post-card-inner-container"],[1,"actions"],[1,"like-comment-share"],["class","btn-like",3,"click",4,"ngIf"],[1,"btn-comment",3,"click"],["aria-label","CommentModel","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"btn-share"],["aria-label","Share","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2","x1","22","x2","9.218","y1","3","y2","10.083"],["fill","none","points","11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],[1,"save"],["aria-label","Save","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["fill","none","points","20 21 12 13.44 4 21 4 3 20 3 20 21","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["class","liked-by-users",4,"ngIf"],["class","likedByUsersCloneDeep",4,"ngIf"],["class","content",4,"ngIf"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength","onAddReply",4,"ngIf"],[1,"btn-like",3,"click"],["aria-label","Like","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["aria-label","Unlike","color","rgb(255, 48, 64)","fill","rgb(255, 48, 64)","height","24","role","img","viewBox","0 0 48 48","width","24",1,"x1lliihq","x1n2onr6"],["d","M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"],[1,"liked-by-users"],["alt","user",3,"src","click"],[1,"username",3,"click"],[4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow","onCloseLikedByUsers","onClickUserImg",4,"ngIf"],[1,"other-users",3,"click"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow","onCloseLikedByUsers","onClickUserImg"],[1,"likedByUsersCloneDeep"],["alt","user",3,"src"],[1,"username"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow",4,"ngIf"],[3,"post","isLikedByUsersModalShown","onToggleLikedByUsersModal","onToggleFollow"],[1,"content"],[1,"comments-length",3,"click"],[1,"creatorFullName",3,"click"],["class","btn-more",3,"click",4,"ngIf"],[1,"btn-more",3,"click"],[1,"creatorFullName"],[3,"post","loggedInUser","onAddComment","onToggleCommentsModal","onGetCommentsLength","onAddReply"]],template:function(r,i){1&r&&u.YNc(0,EQ,28,12,"li",0),2&r&&u.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Wn,zK,YK,aQ,Tr,je],styles:["[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1em;position:relative}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:1.5em;display:flex;flex-direction:column;gap:.8em}@media (min-width: 600px){[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]{padding-inline:unset}}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-comment[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .like-comment-share[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{cursor:pointer;background-color:transparent;border:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .liked-by-users[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em;font-size:14px}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;border-radius:50%;border:none}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-card-inner-container[_ngcontent-%COMP%]   .likedByUsersCloneDeep[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .other-users[_ngcontent-%COMP%]{cursor:pointer;font-weight:bolder}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .creatorFullName[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#f5f5f5;cursor:pointer;margin-inline-end:.4em}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .btn-more[_ngcontent-%COMP%]{border:none;background-color:transparent;color:#919191;font-size:14px;cursor:pointer}[_nghost-%COMP%]   .post-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .comments-length[_ngcontent-%COMP%]{font-size:14px;color:#919191;cursor:pointer}"]})}return n})();function bQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"post-card",2),u.NdJ("onToggleLike",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onToggleLike.emit(i))})("onToggleFollow",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onToggleFollow.emit(i))})("onAddNotification",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onAddNotification.emit(i))})("onAddComment",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onAddComment.emit(i))})("onAddReply",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onAddReply.emit(i))})("onClickUserImg",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onClickUserImg.emit(i))}),u.qZA()}2&n&&u.Q6J("post",e.$implicit)}let TQ=(()=>{class n{constructor(){this.onToggleLike=new u.vpe,this.onToggleFollow=new u.vpe,this.onAddNotification=new u.vpe,this.onAddComment=new u.vpe,this.onAddReply=new u.vpe,this.onClickUserImg=new u.vpe}trackByPostId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["post-list"]],inputs:{posts:"posts"},outputs:{onToggleLike:"onToggleLike",onToggleFollow:"onToggleFollow",onAddNotification:"onAddNotification",onAddComment:"onAddComment",onAddReply:"onAddReply",onClickUserImg:"onClickUserImg"},decls:3,vars:2,consts:[[1,"post-list"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0)(1,"ul"),u.YNc(2,bQ,1,1,"post-card",1),u.qZA()()),2&r&&(u.xp6(2),u.Q6J("ngForOf",i.posts)("ngForTrackBy",i.trackByPostId))},dependencies:[os,FB],styles:["[_nghost-%COMP%]   .post-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em}"]})}return n})();function DQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"post-list",4),u.NdJ("onToggleLike",function(i){u.CHM(t);const o=u.oxw(2);return u.KtG(o.onToggleLike(i))})("onToggleFollow",function(i){u.CHM(t);const o=u.oxw(2);return u.KtG(o.onToggleFollow(i))})("onAddNotification",function(i){u.CHM(t);const o=u.oxw(2);return u.KtG(o.onAddNotification(i))})("onAddComment",function(i){u.CHM(t);const o=u.oxw(2);return u.KtG(o.onAddComment(i))})("onAddReply",function(i){u.CHM(t);const o=u.oxw(2);return u.KtG(o.onAddReply(i))})("onClickUserImg",function(i){u.CHM(t);const o=u.oxw(2);return u.KtG(o.navigateToUserProfile(i))}),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("posts",t.posts)}}function SQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5)(1,"p"),u._uU(2," No posts to show! "),u._UZ(3,"br"),u.TgZ(4,"span",6),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.navigateToCreatePost())}),u._uU(5,"Let's upload your first post."),u.qZA()()()}}function MQ(n,e){if(1&n&&(u.TgZ(0,"section",1),u.YNc(1,DQ,1,1,"post-list",2),u.YNc(2,SQ,6,0,"ng-template",null,3,u.W1O),u.qZA()),2&n){const t=u.MAs(3),r=u.oxw();u.xp6(1),u.Q6J("ngIf",r.posts.length)("ngIfElse",t)}}let AQ=(()=>{class n{constructor(t,r,i,o,l){this.postService=t,this.authService=r,this.userService=i,this.notificationService=o,this.router=l,this.isToggleLikeProcessing=!1,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=yield t.postService.getPosts();r&&(t.postsSubscription=r.subscribe({next:i=>{t.posts=i},error:i=>{console.error(i)}}))})()}onToggleLike(t){var r=this;return(0,U.Z)(function*(){r.isToggleLikeProcessing||(r.isToggleLikeProcessing=!0,yield r.postService.toggleLike(t.isLikeClicked,t.post),r.isToggleLikeProcessing=!1)})()}onToggleFollow({isFollowClicked:t,user:r}){var i=this;this.authService.getUserById(r._id).pipe(jt(1)).subscribe(function(){var o=(0,U.Z)(function*(l){r=l,yield i.userService.toggleFollow(t,r)});return function(l){return o.apply(this,arguments)}}())}onAddNotification(t){var r=this;return(0,U.Z)(function*(){const i={sender:r.authService.getLoggedInUser().uid,recipient:t.creatorId,message:"",createdAt:0,madeAt:t,read:!1};yield r.notificationService.addNotification(i,"likeAction")})()}onAddComment({comment:t,post:r}){var i=this;return(0,U.Z)(function*(){yield i.postService.addComment(t,r)})()}onAddReply(t){var r=this;return(0,U.Z)(function*(){yield r.postService.addReply(t)})()}navigateToUserProfile(t){console.log("creatorId",t),this.router.navigateByUrl(`profile/${t}`)}navigateToCreatePost(){this.router.navigateByUrl("/create-post")}ngOnDestroy(){this.postsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Qd),u.Y36(Nr),u.Y36(dg),u.Y36(O5),u.Y36(Tn))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["home-page"]],decls:1,vars:1,consts:[["class","home-page",4,"ngIf"],[1,"home-page"],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg",4,"ngIf","ngIfElse"],["noPostsTemplate",""],[3,"posts","onToggleLike","onToggleFollow","onAddNotification","onAddComment","onAddReply","onClickUserImg"],[1,"page-cmp-layout"],[3,"click"]],template:function(r,i){1&r&&u.YNc(0,MQ,4,2,"section",0),2&r&&u.Q6J("ngIf",i.posts)},dependencies:[Wn,TQ],styles:["[_nghost-%COMP%]{display:block;padding-block:1em}"]})}return n})();function xQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"form",12),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onLogInWithEmailAndPassword())}),u.TgZ(1,"input",13),u.NdJ("ngModelChange",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.userCred.email=i)}),u.qZA(),u.TgZ(2,"input",14),u.NdJ("ngModelChange",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.userCred.password=i)}),u.qZA(),u.TgZ(3,"button",15),u._uU(4,"Log in"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngModel",t.userCred.email),u.xp6(1),u.Q6J("ngModel",t.userCred.password)}}function PQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"form",12),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onRegisterWithEmailAndPassword())}),u.TgZ(1,"input",16),u.NdJ("ngModelChange",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.userCred.fullName=i)}),u.qZA(),u.TgZ(2,"input",13),u.NdJ("ngModelChange",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.userCred.email=i)}),u.qZA(),u.TgZ(3,"input",14),u.NdJ("ngModelChange",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.userCred.password=i)}),u.qZA(),u.TgZ(4,"button",17),u._uU(5,"Register"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngModel",t.userCred.fullName),u.xp6(1),u.Q6J("ngModel",t.userCred.email),u.xp6(1),u.Q6J("ngModel",t.userCred.password)}}let OQ=(()=>{class n{constructor(t,r,i,o){this.authService=t,this.postService=r,this.router=i,this.userService=o,this.userCred={fullName:"",email:"",password:""},this.isLogInFormShown=!0,this.userService.setIsSearchModalShown(!1)}onLogInWithGoogle(){var t=this;return(0,U.Z)(function*(){try{yield t.authService.logInWithGoogle(),t.authService.loggedInUser$.pipe(jt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r)}})()}onLogInWithEmailAndPassword(){var t=this;return(0,U.Z)(function*(){try{yield t.authService.logInWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(jt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}onRegisterWithEmailAndPassword(){var t=this;return(0,U.Z)(function*(){try{yield t.authService.registerWithEmailAndPassword(t.userCred),t.authService.loggedInUser$.pipe(jt(1)).subscribe({next:r=>{r&&t.router.navigateByUrl("/")},error:r=>{console.error(r)}})}catch(r){console.error(r.message)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Nr),u.Y36(Qd),u.Y36(Tn),u.Y36(dg))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["login-page"]],decls:16,vars:2,consts:[[1,"login"],[1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[3,"ngSubmit",4,"ngIf"],[3,"click"],[1,"btn-google-login",3,"click"],["height","35px","viewBox","0 0 48 48","width","35px","xmlns","http://www.w3.org/2000/svg"],["d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z","fill","#FFC107"],["d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z","fill","#FF3D00"],["d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z","fill","#4CAF50"],["d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z","fill","#1976D2"],[3,"ngSubmit"],["name","email","placeholder","Enter email","type","email",3,"ngModel","ngModelChange"],["name","password","placeholder","Enter password","type","password",3,"ngModel","ngModelChange"],[1,"btn-login-with-email-password"],["name","fullName","placeholder","Enter full name","type","text",3,"ngModel","ngModelChange"],[1,"btn-register-with-email-password"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0)(1,"div",1),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"path",3),u.qZA()(),u.YNc(4,xQ,5,2,"form",4),u.YNc(5,PQ,6,3,"form",4),u.kcU(),u.TgZ(6,"p",5),u.NdJ("click",function(){return i.isLogInFormShown=!i.isLogInFormShown}),u._uU(7," Don't you have a user? Register here "),u.qZA(),u.TgZ(8,"button",6),u.NdJ("click",function(){return i.onLogInWithGoogle()}),u.O4$(),u.TgZ(9,"svg",7),u._UZ(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),u.qZA(),u.kcU(),u.TgZ(14,"span"),u._uU(15,"Log in with Google"),u.qZA()()()),2&r&&(u.xp6(4),u.Q6J("ngIf",i.isLogInFormShown),u.xp6(1),u.Q6J("ngIf",!i.isLogInFormShown))},dependencies:[Wn,FE,Jd,ov,xE,gg,pg],styles:["[_nghost-%COMP%]   .login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-inline:.6em;height:3em;border:none;border-radius:.3em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:placeholder-shown{font-style:italic}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.5em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-login-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]{height:2.5em;cursor:pointer;border:none;border-radius:.3em;font-size:16px;color:#222;margin-block-start:.8em}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-register-with-email-password[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#b2b2b2}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]{background-color:#f5f5f5;display:flex;align-items:center;gap:.5em;padding-inline:.8em;height:3.5em;border-radius:.4em;border:none;cursor:pointer;color:#222;margin-block-start:1.5em;font-size:16px}[_nghost-%COMP%]   .login[_ngcontent-%COMP%]   .btn-google-login[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})}return n})(),kQ=(()=>{class n{constructor(t){this.userService=t,this.userService.setIsSearchModalShown(!1)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(dg))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["message-page"]],hostAttrs:[1,"page-cmp-layout"],decls:2,vars:0,template:function(r,i){1&r&&(u.TgZ(0,"p"),u._uU(1,"message-page works!"),u.qZA())}})}return n})();function RQ(n,e){if(1&n&&(u.TgZ(0,"li",1)(1,"div",2),u._UZ(2,"img",3),u.TgZ(3,"p")(4,"span",4),u._uU(5),u.qZA(),u._uU(6),u.qZA(),u.TgZ(7,"span",5),u._uU(8),u.ALo(9,"timeAgo"),u.qZA()(),u._UZ(10,"img",6),u.qZA()),2&n){const t=u.oxw();u.xp6(2),u.s9C("src",t.sender.imgUrl,u.LSH),u.xp6(3),u.Oqu(t.sender.fullName),u.xp6(1),u.hij(" ",t.notification.message," "),u.xp6(2),u.hij(" ",u.lcZ(9,5,t.notification.createdAt),""),u.xp6(2),u.s9C("src",t.notification.madeAt.imgUrl,u.LSH)}}let NQ=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.getUserById(this.notification.sender).pipe(jt(1)).subscribe({next:t=>{this.sender=t}})}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Nr))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["notification-preview"]],inputs:{notification:"notification"},decls:1,vars:1,consts:[["class","notification-preview",4,"ngIf"],[1,"notification-preview"],[1,"inner-container"],["alt","sender",1,"img-sender",3,"src"],[1,"full-name"],[1,"created-at"],["alt","content",1,"img-made-at",3,"src"]],template:function(r,i){1&r&&u.YNc(0,RQ,11,7,"li",0),2&r&&u.Q6J("ngIf",i.sender)},dependencies:[Wn,MM],styles:["[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:3em;gap:1em;font-size:15px}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .img-sender[_ngcontent-%COMP%]{width:40px;border-radius:50%}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .full-name[_ngcontent-%COMP%]{font-size:13px;font-weight:bolder}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .inner-container[_ngcontent-%COMP%]   .created-at[_ngcontent-%COMP%]{font-size:13.5px;color:#a8a8a8}[_nghost-%COMP%]   .notification-preview[_ngcontent-%COMP%]   .img-made-at[_ngcontent-%COMP%]{aspect-ratio:1/1;object-fit:cover;width:3em}"]})}return n})();function FQ(n,e){1&n&&u._UZ(0,"notification-preview",2),2&n&&u.Q6J("notification",e.$implicit)}let LQ=(()=>{class n{trackByNotificationId(t,r){return r.id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["notification-list"]],inputs:{notifications:"notifications"},decls:3,vars:2,consts:[[1,"notification-list"],[3,"notification",4,"ngFor","ngForOf","ngForTrackBy"],[3,"notification"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0)(1,"ul"),u.YNc(2,FQ,1,1,"notification-preview",1),u.qZA()()),2&r&&(u.xp6(2),u.Q6J("ngForOf",i.notifications)("ngForTrackBy",i.trackByNotificationId))},dependencies:[os,NQ],styles:["[_nghost-%COMP%]   .notification-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}"]})}return n})();function UQ(n,e){1&n&&(u.TgZ(0,"p"),u._uU(1,"You dont have notifications yet!"),u.qZA())}function BQ(n,e){if(1&n&&(u.TgZ(0,"section",1),u._UZ(1,"notification-list",2),u.YNc(2,UQ,2,0,"p",3),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("notifications",t.notifications),u.xp6(1),u.Q6J("ngIf",!t.notifications.length)}}let VQ=(()=>{class n{constructor(t,r,i){this.notificationService=t,this.authService=r,this.userService=i,this.userService.setIsSearchModalShown(!1)}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=t.authService.getLoggedInUser();r&&t.notificationService.getNotificationsForUser(r.uid).pipe(jt(1)).subscribe({next:i=>{t.notifications=i}})})()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(O5),u.Y36(Nr),u.Y36(dg))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["notification-page"]],hostAttrs:[1,"page-cmp-layout"],decls:1,vars:1,consts:[["class","notifications-page",4,"ngIf"],[1,"notifications-page"],[3,"notifications"],[4,"ngIf"]],template:function(r,i){1&r&&u.YNc(0,BQ,3,2,"section",0),2&r&&u.Q6J("ngIf",i.notifications)},dependencies:[Wn,LQ],styles:["[_nghost-%COMP%]{padding-block:2em}"]})}return n})();function jQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",4)(1,"button",5),u.NdJ("click",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onMediaSelected(i))}),u.TgZ(2,"span"),u._uU(3," Upload photos and videos here "),u.qZA(),u.TgZ(4,"div"),u.O4$(),u.TgZ(5,"svg",6),u._UZ(6,"path",7)(7,"path",8)(8,"path",9),u.qZA()()()()}}const $Q=function(n){return{active:n}};function HQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"article",21),u.NdJ("click",function(){const o=u.CHM(t).$implicit,l=u.oxw(2);return u.KtG(l.onSelectFilterPreview(o.value))}),u.TgZ(1,"span"),u._uU(2),u.qZA(),u._UZ(3,"img",22),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw(2);u.Q6J("ngClass",u.VKq(6,$Q,t.value===r.post.filterSelected)),u.xp6(2),u.Oqu(t.name),u.xp6(1),u.Tol(t.value),u.MGl("alt","",t," - filter preview"),u.Q6J("src",r.post.imgUrl,u.LSH)}}function zQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",10)(1,"div",11)(2,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.isFilterMediaShown=!1,u.KtG(i.isSelectMediaShown=!0)}),u.O4$(),u.TgZ(3,"svg",13),u._UZ(4,"line",14)(5,"polyline",15),u.qZA()(),u.kcU(),u.TgZ(6,"button",16),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.isFilterMediaShown=!1,u.KtG(i.isFormMediaShown=!0)}),u._uU(7," Next "),u.qZA()(),u.TgZ(8,"article",17),u._UZ(9,"img",18),u.qZA(),u.TgZ(10,"div",19),u.YNc(11,HQ,4,8,"article",20),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(9),u.Tol(t.post.filterSelected),u.s9C("src",t.post.imgUrl,u.LSH),u.xp6(2),u.Q6J("ngForOf",t.filterPreviews)("ngForTrackBy",t.trackByFilterName)}}function GQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",23)(1,"div",11)(2,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.isFormMediaShown=!1,u.KtG(i.isFilterMediaShown=!0)}),u.O4$(),u.TgZ(3,"svg",13),u._UZ(4,"line",14)(5,"polyline",15),u.qZA()(),u.kcU(),u.TgZ(6,"button",24),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.onCreatePost())}),u._uU(7," Share "),u.qZA()(),u.TgZ(8,"form")(9,"div",25),u._UZ(10,"img",26),u.TgZ(11,"textarea",27),u.NdJ("ngModelChange",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.post.content=i)}),u.qZA()()()()}if(2&n){const t=u.oxw();u.xp6(10),u.Tol(t.post.filterSelected),u.Q6J("src",t.post.imgUrl,u.LSH),u.xp6(1),u.Q6J("ngModel",t.post.content)}}let WQ=(()=>{class n{constructor(t,r,i){this.postService=t,this.router=r,this.userService=i,this.isSelectMediaShown=!0,this.isFilterMediaShown=!1,this.isFormMediaShown=!1,this.filterPreviews=[{name:"Normal",value:"normal"},{name:"Paris",value:"paris"},{name:"Los Angeles",value:"los-angeles"},{name:"Oslo",value:"oslo"},{name:"Abu Dhabi",value:"abu-dhabi"},{name:"Tokyo",value:"tokyo"}],this.post={_id:"",creatorFullName:"",creatorId:"",createdAt:0,imgUrl:"",content:"",likedByUsers:[],filterSelected:"normal"},this.userService.setIsSearchModalShown(!1)}onMediaSelected(t){var r=this;return(0,U.Z)(function*(){try{const i=yield r.postService.uploadMedia();i?r.post.imgUrl=i:console.error(null),r.isSelectMediaShown=!1,r.isFilterMediaShown=!0}catch(i){console.error("Error:",i)}})()}onSelectFilterPreview(t){this.post.filterSelected=t}onCreatePost(){var t=this;return(0,U.Z)(function*(){yield t.postService.createPost(t.post),yield t.router.navigateByUrl("/")})()}trackByFilterName(t,r){return r.name}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Qd),u.Y36(Tn),u.Y36(dg))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["create-post-page"]],hostAttrs:[1,"page-cmp-layout"],decls:4,vars:3,consts:[[1,"create-post-page"],["class","select-media",4,"ngIf"],["class","filter-media",4,"ngIf"],["class","form-media",4,"ngIf"],[1,"select-media"],[3,"click"],["aria-label","Icon to represent media such as images or videos","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","77","role","img","viewBox","0 0 97.6 77.3","width","96",1,"x1lliihq","x1n2onr6"],["d","M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z","fill","currentColor"],["d","M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z","fill","currentColor"],["d","M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z","fill","currentColor"],[1,"filter-media"],[1,"actions"],["title","Back",1,"btn-back",3,"click"],["aria-label","Back","fill","currentColor","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6","x5n08af"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","2.909","x2","22.001","y1","12.004","y2","12.004"],["fill","none","points","9.276 4.726 2.001 12.004 9.276 19.274","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["title","Next",1,"btn-next",3,"click"],[1,"media-preview"],["alt","media preview",3,"src"],[1,"filter-list"],["class","filter-preview",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"filter-preview",3,"ngClass","click"],[3,"src","alt"],[1,"form-media"],["title","Share",1,"btn-share",3,"click"],[1,"content"],["alt","post image",3,"src"],["name","content","placeholder","Write your caption...",3,"ngModel","ngModelChange"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0),u.YNc(1,jQ,9,0,"div",1),u.YNc(2,zQ,12,5,"div",2),u.YNc(3,GQ,12,4,"div",3),u.qZA()),2&r&&(u.xp6(1),u.Q6J("ngIf",i.isSelectMediaShown),u.xp6(1),u.Q6J("ngIf",i.isFilterMediaShown),u.xp6(1),u.Q6J("ngIf",i.isFormMediaShown))},dependencies:[Eo,os,Wn,FE,Jd,ov,xE,gg,pg],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]{height:100%;width:100%;position:relative}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .select-media[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#f5f5f5;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1em;width:100%;height:100%;font-size:17px;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;gap:2em;position:relative;padding-block-end:1em}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:3.5em;z-index:10;background-color:#000}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .media-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]{width:calc(100vw - 50px);display:flex;align-items:center;gap:1em;overflow-x:auto;white-space:nowrap}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.4em;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#d3d3d369;font-size:12px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:5em;height:5em;aspect-ratio:1/1}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .filter-media[_ngcontent-%COMP%]   .filter-list[_ngcontent-%COMP%]   .filter-preview[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:sticky;top:61px;height:3.5em;z-index:10;background-color:#000}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   polyline[_ngcontent-%COMP%]{stroke:#f5f5f5}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%]{background-color:transparent;color:#0095f6;font-size:17px;font-weight:bolder;border:none;cursor:pointer}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7em;height:70px}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:unset;aspect-ratio:1/1;object-fit:cover}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.paris[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.2) saturate(1.3) hue-rotate(10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.los-angeles[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.1) hue-rotate(5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.oslo[_ngcontent-%COMP%]{filter:contrast(1.3) brightness(.9) saturate(1.1) hue-rotate(-5deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.abu-dhabi[_ngcontent-%COMP%]{filter:contrast(1.2) brightness(1.1) saturate(1.2) hue-rotate(15deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img.tokyo[_ngcontent-%COMP%]{filter:contrast(1.1) brightness(1.1) saturate(1.1) hue-rotate(-10deg)}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100%;resize:none;background-color:transparent;border:none;color:#f5f5f5;font-size:16px;font-family:Arial,sans-serif}[_nghost-%COMP%]   .create-post-page[_ngcontent-%COMP%]   .form-media[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#f5f5f5d9;font-style:italic;font-size:14px;font-family:Arial,sans-serif;font-weight:400}"]})}return n})();const LE=()=>!!(0,u.f3M)(Nr).getLoggedInUser()||(console.error("LoggedInUser doesnt exists - no access to that page!"),(0,u.f3M)(Tn).navigateByUrl("/login"),!1);function qQ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"post-card",5),u.NdJ("onClickLikedByUsers",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.isLikedByUsersClicked=i)})("onCloseLikedByUsers",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.isLikedByUsersClicked=i)}),u.qZA()}2&n&&u.Q6J("post",e.$implicit)}const ZQ=function(n){return{unscrollable:n}};let KQ=(()=>{class n{constructor(){this.onClosePostsModal=new u.vpe,this.isLikedByUsersClicked=!1}ngOnInit(){}trackByPostId(t,r){return r._id}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["posts-modal"]],inputs:{userPosts:"userPosts"},outputs:{onClosePostsModal:"onClosePostsModal"},decls:6,vars:5,consts:[[1,"posts-modal",3,"ngClass"],[1,"btn-close",3,"click"],["_ngcontent-ng-c463896771","","xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["_ngcontent-ng-c463896771","","d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[3,"post","onClickLikedByUsers","onCloseLikedByUsers",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post","onClickLikedByUsers","onCloseLikedByUsers"]],template:function(r,i){1&r&&(u.TgZ(0,"section",0)(1,"ul")(2,"button",1),u.NdJ("click",function(){return i.onClosePostsModal.emit(!1)}),u.O4$(),u.TgZ(3,"svg",2),u._UZ(4,"path",3),u.qZA()(),u.YNc(5,qQ,1,1,"post-card",4),u.qZA()()),2&r&&(u.Q6J("ngClass",u.VKq(3,ZQ,i.isLikedByUsersClicked)),u.xp6(5),u.Q6J("ngForOf",i.userPosts)("ngForTrackBy",i.trackByPostId))},dependencies:[Eo,os,FB],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;background-color:#000;height:100%}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]{overflow:auto;height:100%}[_nghost-%COMP%]   .posts-modal.unscrollable[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3em;position:relative;padding-block:4.7em}[_nghost-%COMP%]   .posts-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{border:none;width:-moz-fit-content;width:fit-content;background-color:transparent;position:fixed;z-index:99;top:85px;right:27px;cursor:pointer}"]})}return n})();function YQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"article",15),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.isPostsModalShown=!0)}),u._UZ(1,"img",16),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(1),u.Tol(t.filterSelected),u.Q6J("src",t.imgUrl,u.LSH)}}function QQ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"posts-modal",17),u.NdJ("onClosePostsModal",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.isPostsModalShown=!1)}),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("userPosts",t.userPosts)}}function JQ(n,e){if(1&n&&(u.TgZ(0,"section",1)(1,"div",2)(2,"div",3),u._UZ(3,"img",4),u.TgZ(4,"span"),u._uU(5),u.qZA()(),u.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"span"),u._uU(10),u.qZA(),u.TgZ(11,"span"),u._uU(12,"Posts"),u.qZA()(),u.TgZ(13,"div",8)(14,"span"),u._uU(15),u.qZA(),u.TgZ(16,"span"),u._uU(17,"Followers"),u.qZA()(),u.TgZ(18,"div",9)(19,"span"),u._uU(20),u.qZA(),u.TgZ(21,"span"),u._uU(22,"Following"),u.qZA()()(),u.TgZ(23,"div",10)(24,"button",11),u._uU(25,"Edit profile"),u.qZA()()()(),u.TgZ(26,"div",12),u.YNc(27,YQ,2,3,"article",13),u.qZA(),u.YNc(28,QQ,1,1,"posts-modal",14),u.qZA()),2&n){const t=u.oxw();u.xp6(3),u.Q6J("src",t.userFromDB.imgUrl,u.LSH),u.xp6(2),u.Oqu(t.userFromDB.fullName),u.xp6(5),u.Oqu(t.userPosts.length),u.xp6(5),u.Oqu(t.userFromDB.followedByUsers.length),u.xp6(5),u.Oqu(t.userFromDB.followingUsers.length),u.xp6(7),u.Q6J("ngForOf",t.userPosts)("ngForTrackBy",t.trackByPostId),u.xp6(1),u.Q6J("ngIf",t.isPostsModalShown)}}let XQ=(()=>{class n{constructor(t,r,i,o,l,f){this.userService=t,this.authService=r,this.postService=i,this.router=o,this.route=l,this.location=f,this.isPostsModalShown=!1,this.isProfilePageInitialized=!1,this.userService.setIsSearchModalShown(!1)}ngOnInit(){this.dataSubscription=this.route.data.pipe((0,wt.U)(t=>t.user)).subscribe({next:t=>{this.isProfilePageInitialized=!1,t?this.userFromDB=t:this.location.back(),this.getPostsForUser()}})}getPostsForUser(){const t=this.postService.getPostsForUser(this.userFromDB._id);this.userPostsSubscription=t.subscribe({next:r=>{this.userPosts=r,this.isProfilePageInitialized=!0},error:r=>{console.error(r)}})}trackByPostId(t,r){return r._id}ngOnDestroy(){console.log("unmounted"),this.userPostsSubscription?.unsubscribe(),this.dataSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(dg),u.Y36(Nr),u.Y36(Qd),u.Y36(Tn),u.Y36(ac),u.Y36(Se))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["profile"]],decls:1,vars:1,consts:[["class","user-profile",4,"ngIf"],[1,"user-profile"],[1,"user-info"],[1,"user-image-profile"],["alt","loggedin user",3,"src"],[1,"user-data"],[1,"user-data-inner-container"],[1,"posts-count"],[1,"followers-count"],[1,"following-count"],[1,"actions-profile"],[1,"btn-edit-profile"],[1,"user-posts"],["class","post-preview",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"userPosts","onClosePostsModal",4,"ngIf"],[1,"post-preview",3,"click"],["alt","post-preview",3,"src"],[3,"userPosts","onClosePostsModal"]],template:function(r,i){1&r&&u.YNc(0,JQ,29,8,"section",0),2&r&&u.Q6J("ngIf",i.isProfilePageInitialized&&i.userFromDB&&i.userPosts)},dependencies:[os,Wn,KQ],styles:["[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]{padding-block:2em;display:flex;flex-direction:column;gap:2em;height:100%;position:relative}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding-inline:25px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5em;border-radius:50%}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-image-profile[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]{display:flex;gap:1.5em}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .posts-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .followers-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-data-inner-container[_ngcontent-%COMP%]   .following-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){font-size:14px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .actions-profile[_ngcontent-%COMP%]   .btn-edit-profile[_ngcontent-%COMP%]{border:none;height:2.1em;padding-inline:2em;border-radius:.4em;color:#f5f5f5;background-color:#363636;font-size:15px;font-weight:bolder}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:1px}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]   .post-preview[_ngcontent-%COMP%]{display:flex;cursor:pointer}[_nghost-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-posts[_ngcontent-%COMP%]   .post-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:1/1;object-fit:cover}"]})}return n})();const nJ=[{path:"message",component:kQ,canActivate:[LE]},{path:"notification",component:VQ,canActivate:[LE]},{path:"create-post",component:WQ,canActivate:[LE]},{path:"profile/:userId",component:XQ,canActivate:[LE],resolve:{user:function tJ(n){const e=n.params.userId;return(0,u.f3M)(Nr).getUserById(e)}}},{path:"login",component:OQ,canActivate:[()=>!(0,u.f3M)(Nr).getLoggedInUser()||(console.error("LoggedInUser exists - no access to login page!"),(0,u.f3M)(Tn).navigateByUrl("/"),!1)]},{path:"",component:AQ,canActivate:[LE]}];let rJ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({imports:[km.forRoot(nJ,{useHash:!0}),km]})}return n})();function iJ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",30),u._UZ(1,"path",31),u.qZA())}function sJ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",30),u._UZ(1,"path",32),u.qZA())}function oJ(n,e){if(1&n&&u._UZ(0,"img",33),2&n){const t=u.oxw(2);u.Q6J("src",t.user.providerData[0].photoURL,u.LSH)}}function aJ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",34),u._UZ(1,"path",35)(2,"circle",36),u.qZA())}function cJ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"div",37)(1,"ul")(2,"li",38),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onLogOut())}),u._uU(3,"Log out"),u.qZA()()()}}const lJ=function(){return{exact:!0}};function uJ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"section",1)(1,"div",2)(2,"div",3),u.O4$(),u.TgZ(3,"svg",4),u._UZ(4,"path",5),u.qZA()(),u.kcU(),u.TgZ(5,"nav")(6,"ul")(7,"li",6),u.O4$(),u.TgZ(8,"svg",7),u._UZ(9,"path",8),u.qZA()(),u.kcU(),u.TgZ(10,"li",9),u.O4$(),u.TgZ(11,"svg",10),u._UZ(12,"path",11)(13,"path",12),u.qZA()(),u.kcU(),u.TgZ(14,"li",13,14),u.YNc(16,iJ,2,0,"svg",15),u.YNc(17,sJ,2,0,"svg",15),u.qZA(),u.TgZ(18,"li",16),u.O4$(),u.TgZ(19,"svg",17),u._UZ(20,"path",18)(21,"line",19)(22,"line",20),u.qZA()(),u.kcU(),u.TgZ(23,"li",21),u.YNc(24,oJ,1,1,"img",22),u.YNc(25,aJ,3,0,"ng-template",null,23,u.W1O),u.qZA()()()(),u.TgZ(27,"div",24),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),u.O4$(),u.TgZ(28,"svg",25),u._UZ(29,"line",26)(30,"line",27)(31,"line",28),u.qZA(),u.YNc(32,cJ,4,0,"div",29),u.qZA()()}if(2&n){const t=u.MAs(15),r=u.MAs(26),i=u.oxw();u.xp6(7),u.Q6J("routerLinkActiveOptions",u.DdM(7,lJ)),u.xp6(9),u.Q6J("ngIf",!t.classList.contains("active")),u.xp6(1),u.Q6J("ngIf",t.classList.contains("active")),u.xp6(6),u.MGl("routerLink","/profile/",i.user.uid,""),u.xp6(1),u.Q6J("ngIf",i.user.providerData[0].photoURL)("ngIfElse",r),u.xp6(8),u.Q6J("ngIf",i.isExtraMenuOpen)}}let dJ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.user=t:(this.user=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,U.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Nr),u.Y36(Tn))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["aside-menu"]],decls:1,vars:1,consts:[["class","aside-menu",4,"ngIf"],[1,"aside-menu"],[1,"aside-menu-inner-container"],["routerLink","/","title","instagram",1,"logo"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLinkActive","active","title","Profile",1,"profile",3,"routerLink"],["alt","loggedInUser",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","loggedInUser",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&u.YNc(0,uJ,33,8,"section",0),2&r&&u.Q6J("ngIf",i.user)},dependencies:[Wn,Om,wf],styles:["[_nghost-%COMP%]{position:relative;grid-column:1;width:75px;display:none}@media (min-width: 600px){[_nghost-%COMP%]{display:block}}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]{height:100vh;position:sticky;top:0;left:0;z-index:99;display:flex;flex-direction:column;justify-content:space-between;align-items:center;border-inline-end:1px solid rgba(245,245,245,.19);padding-block:1.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3.5em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1em;width:100%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:.8em;display:flex;border-radius:.4em;justify-content:center;align-items:center;width:70%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#f5f5f5}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:1px solid rgba(245,245,245,.46)}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .aside-menu-inner-container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;padding:.8em;border-radius:.4em;position:relative}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{background-color:#343434;color:#f5f5f5;padding:.5em;border-radius:1em;position:absolute;bottom:0;left:55px;width:250px}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4em;border-radius:.4em}[_nghost-%COMP%]   .aside-menu[_ngcontent-%COMP%]   .extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5e5e51c}"]})}return n})();function hJ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",27),u._UZ(1,"path",28),u.qZA())}function fJ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",27),u._UZ(1,"path",29),u.qZA())}function pJ(n,e){if(1&n&&u._UZ(0,"img",30),2&n){const t=u.oxw(2);u.Q6J("src",t.loggedInUser.photoURL,u.LSH)}}function gJ(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",31),u._UZ(1,"path",32)(2,"circle",33),u.qZA())}function mJ(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"div",34)(1,"ul")(2,"li",35),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onLogOut())}),u._uU(3," Log out "),u.qZA()()()}}const _J=function(){return{exact:!0}};function yJ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"section",1)(1,"div",2)(2,"nav")(3,"ul")(4,"li",3),u.O4$(),u.TgZ(5,"svg",4),u._UZ(6,"path",5),u.qZA()(),u.kcU(),u.TgZ(7,"li",6),u.O4$(),u.TgZ(8,"svg",7),u._UZ(9,"path",8)(10,"path",9),u.qZA()(),u.kcU(),u.TgZ(11,"li",10,11),u.YNc(13,hJ,2,0,"svg",12),u.YNc(14,fJ,2,0,"svg",12),u.qZA(),u.TgZ(15,"li",13),u.O4$(),u.TgZ(16,"svg",14),u._UZ(17,"path",15)(18,"line",16)(19,"line",17),u.qZA()(),u.kcU(),u.TgZ(20,"li",18),u.YNc(21,pJ,1,1,"img",19),u.YNc(22,gJ,3,0,"ng-template",null,20,u.W1O),u.qZA(),u.TgZ(24,"li",21),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.isExtraMenuOpen=!i.isExtraMenuOpen)}),u.O4$(),u.TgZ(25,"svg",22),u._UZ(26,"line",23)(27,"line",24)(28,"line",25),u.qZA(),u.YNc(29,mJ,4,0,"div",26),u.qZA()()()()()}if(2&n){const t=u.MAs(12),r=u.MAs(23),i=u.oxw();u.xp6(4),u.Q6J("routerLinkActiveOptions",u.DdM(7,_J)),u.xp6(9),u.Q6J("ngIf",!t.classList.contains("active")),u.xp6(1),u.Q6J("ngIf",t.classList.contains("active")),u.xp6(6),u.MGl("routerLink","/profile/",i.loggedInUser.uid,""),u.xp6(1),u.Q6J("ngIf",i.loggedInUser.photoURL)("ngIfElse",r),u.xp6(8),u.Q6J("ngIf",i.isExtraMenuOpen)}}let vJ=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isExtraMenuOpen=!1}ngOnInit(){this.userSubscription=this.authService.loggedInUser$.subscribe({next:t=>{t?this.loggedInUser=t:(this.loggedInUser=t,this.router.navigateByUrl("login"))}})}onLogOut(){var t=this;return(0,U.Z)(function*(){try{yield t.authService.logOut()}catch(r){console.error(r.message)}})()}ngOnDestroy(){this.userSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Nr),u.Y36(Tn))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["menu-mobile"]],decls:1,vars:1,consts:[["class","menu-mobile",4,"ngIf"],[1,"menu-mobile"],[1,"menu-mobile-inner-container"],["routerLink","/","routerLinkActive","active","title","Home",1,"home",3,"routerLinkActiveOptions"],["aria-label","Home","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z","fill","none","stroke","currentColor","stroke-linejoin","round","stroke-width","2"],["routerLink","/message","routerLinkActive","active","title","Messages",1,"messages"],["aria-label","Messenger","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M12.003 2.001a9.705 9.705 0 1 1 0 19.4 10.876 10.876 0 0 1-2.895-.384.798.798 0 0 0-.533.04l-1.984.876a.801.801 0 0 1-1.123-.708l-.054-1.78a.806.806 0 0 0-.27-.569 9.49 9.49 0 0 1-3.14-7.175 9.65 9.65 0 0 1 10-9.7Z","fill","none","stroke","currentColor","stroke-miterlimit","10","stroke-width","1.739"],["d","M17.79 10.132a.659.659 0 0 0-.962-.873l-2.556 2.05a.63.63 0 0 1-.758.002L11.06 9.47a1.576 1.576 0 0 0-2.277.42l-2.567 3.98a.659.659 0 0 0 .961.875l2.556-2.049a.63.63 0 0 1 .759-.002l2.452 1.84a1.576 1.576 0 0 0 2.278-.42Z","fill-rule","evenodd"],["routerLink","/notification","routerLinkActive","active","title","Notifications",1,"notifications"],["notifications",""],["aria-label","Notifications","class","x1lliihq x1n2onr6","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",4,"ngIf"],["routerLink","/create-post","routerLinkActive","active","title","Create",1,"create-post"],["aria-label","New post","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["d","M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","6.545","x2","17.455","y1","12.001","y2","12.001"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","12.003","x2","12.003","y1","6.545","y2","17.455"],["routerLinkActive","active","title","Profile",1,"profile",3,"routerLink"],["alt","loggedInUser",3,"src",4,"ngIf","ngIfElse"],["profile",""],["title","More",1,"extra-menu",3,"click"],["aria-label","Settings","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"_ab6-"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","4","y2","4"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","12","y2","12"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","3","x2","21","y1","20","y2","20"],["class","extra-menu-modal",4,"ngIf"],["aria-label","Notifications","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","24","role","img","viewBox","0 0 24 24","width","24",1,"x1lliihq","x1n2onr6"],["d","M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"],["d","M17.075 1.987a5.852 5.852 0 0 0-5.07 2.66l-.008.012-.01-.014a5.878 5.878 0 0 0-5.062-2.658A6.719 6.719 0 0 0 .5 8.952c0 3.514 2.581 5.757 5.077 7.927.302.262.607.527.91.797l1.089.973c2.112 1.89 3.149 2.813 3.642 3.133a1.438 1.438 0 0 0 1.564 0c.472-.306 1.334-1.07 3.755-3.234l.978-.874c.314-.28.631-.555.945-.827 2.478-2.15 5.04-4.372 5.04-7.895a6.719 6.719 0 0 0-6.425-6.965Z"],["alt","loggedInUser",3,"src"],["color","white","fill","none","height","24px","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24","width","24px","xmlns","http://www.w3.org/2000/svg",1,"feather","feather-user"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"extra-menu-modal"],[1,"log-out",3,"click"]],template:function(r,i){1&r&&u.YNc(0,yJ,30,8,"section",0),2&r&&u.Q6J("ngIf",i.loggedInUser)},dependencies:[Wn,Om,wf],styles:["[_nghost-%COMP%]{position:sticky;bottom:0;z-index:199;grid-column:1/-1;height:60px;width:100%;background-color:#000;display:grid;grid-template-columns:25px 1fr 25px;align-items:center;border-block-start:1px solid rgba(255,255,255,.24)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;width:30px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(1){fill:#fff}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:nth-child(2){fill:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{stroke:#000}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.profile.active[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.66);border-radius:50%}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]{position:absolute;bottom:50px;right:10px;z-index:98;background-color:#262626;width:200px;border-radius:.4em;padding-block:.5em;color:#f5f5f5;font-size:18px;font-weight:400}[_nghost-%COMP%]   .menu-mobile[_ngcontent-%COMP%]   .menu-mobile-inner-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.extra-menu[_ngcontent-%COMP%]   .extra-menu-modal[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1em}"]})}return n})();const CJ=function(n,e){return{"btn-toggle-follow-following":n,disabled:e}};function wJ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onToggleFollow())}),u._uU(1),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("ngClass",u.WLB(3,CJ,t.isFollowClicked,t.isToggleFollowProcessing))("disabled",t.isToggleFollowProcessing),u.xp6(1),u.hij(" ",t.isFollowClicked?"Following":"Follow"," ")}}function IJ(n,e){if(1&n&&(u.TgZ(0,"li")(1,"div",1),u._UZ(2,"img",2),u.TgZ(3,"div",3)(4,"span"),u._uU(5),u.qZA()()(),u.YNc(6,wJ,2,6,"button",4),u.qZA()),2&n){const t=u.oxw();u.xp6(2),u.Q6J("src",t.user.imgUrl,u.LSH),u.xp6(3),u.Oqu(t.user.fullName),u.xp6(1),u.Q6J("ngIf",t.loggedInUser._id!==t.user._id)}}let EJ=(()=>{class n{constructor(t){this.authService=t,this.toggleFollow=new u.vpe,this.isComponentInitialized=!1,this.isToggleFollowProcessing=!1}ngOnInit(){var t=this;return(0,U.Z)(function*(){const r=t.authService.getLoggedInUser(),i=t.authService.getUserById(r.uid).pipe(jt(1));t.loggedInUser=yield Vr(i),t.isFollowClicked=!!t.loggedInUser.followingUsers.find(o=>o===t.user._id),t.isComponentInitialized=!0})()}onToggleFollow(){this.isToggleFollowProcessing||(this.isToggleFollowProcessing=!0,this.isFollowClicked=!this.isFollowClicked,this.toggleFollow.emit({isFollowClicked:this.isFollowClicked,user:this.user}),this.isToggleFollowProcessing=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Nr))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["user-row-search-modal"]],inputs:{user:"user"},outputs:{toggleFollow:"toggleFollow"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"user-content"],["alt","loggedInUser",3,"src"],[1,"content"],["class","btn-toggle-follow",3,"ngClass","disabled","click",4,"ngIf"],[1,"btn-toggle-follow",3,"ngClass","disabled","click"]],template:function(r,i){1&r&&u.YNc(0,IJ,7,3,"li",0),2&r&&u.Q6J("ngIf",i.isComponentInitialized)},dependencies:[Eo,Wn],styles:["[_nghost-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5em;border-radius:50%}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow[_ngcontent-%COMP%]{border:none;font-size:16px;height:2em;padding-inline:1em;border-radius:.3em;background-color:#0095f6;color:#f5f5f5;font-weight:bolder;cursor:pointer}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow.disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   li[_ngcontent-%COMP%]   .btn-toggle-follow-following[_ngcontent-%COMP%]{background-color:#919191}"]})}return n})();function bJ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"user-row-search-modal",5),u.NdJ("toggleFollow",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.toggleFollow.emit(i))}),u.qZA()}2&n&&u.Q6J("user",e.$implicit)}let TJ=(()=>{class n{constructor(t){this.renderer=t,this.closeModal=new u.vpe,this.getUsers=new u.vpe,this.toggleFollow=new u.vpe}ngOnInit(){this.renderer.addClass(document.body,"body-unscrollable"),this.getUsers.emit()}onCloseModal(){this.closeModal.emit(!1)}trackByUserId(t,r){return r._id}ngOnDestroy(){this.renderer.removeClass(document.body,"body-unscrollable")}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(u.Qsj))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["search-modal"]],inputs:{users:"users"},outputs:{closeModal:"closeModal",getUsers:"getUsers",toggleFollow:"toggleFollow"},decls:6,vars:2,consts:[[1,"search-modal"],[3,"user","toggleFollow",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn-close",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#ffffff","height","15px","width","15px","id","Capa_1","viewBox","0 0 460.775 460.775"],["d","M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"],[3,"user","toggleFollow"]],template:function(r,i){1&r&&(u.TgZ(0,"div",0)(1,"ul"),u.YNc(2,bJ,1,1,"user-row-search-modal",1),u.qZA(),u.TgZ(3,"button",2),u.NdJ("click",function(){return i.onCloseModal()}),u.O4$(),u.TgZ(4,"svg",3),u._UZ(5,"path",4),u.qZA()()()),2&r&&(u.xp6(2),u.Q6J("ngForOf",i.users)("ngForTrackBy",i.trackByUserId))},dependencies:[os,EJ],styles:["[_nghost-%COMP%]{position:fixed;top:61px;left:0;width:100%;height:100%;background-color:#000;overflow:auto;display:grid;grid-template-columns:25px 1fr 25px}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]{grid-column:2;padding-block:1.5em}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.3em;position:relative;padding-block-end:8em;padding-block-start:2em}[_nghost-%COMP%]   .search-modal[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:fixed;top:88px;right:29px;border:none;width:-moz-fit-content;width:fit-content;background-color:transparent;display:flex;align-items:center;padding-inline-start:.8em;padding-block-end:.8em;align-self:end}"]})}return n})();function DJ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"search-modal",10),u.NdJ("closeModal",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onToggleSearchModal(i))})("getUsers",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.getUsers())})("toggleFollow",function(i){u.CHM(t);const o=u.oxw();return u.KtG(o.onToggleFollow(i))}),u.ALo(1,"async"),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("users",u.lcZ(1,1,t.users$))}}let SJ=(()=>{class n{constructor(t,r,i){this.router=t,this.userService=r,this.authService=i,this.filterBy={account:""}}ngOnInit(){this.searchModalSubscription=this.userService.isSearchModalShown$.subscribe({next:t=>{this.isSearchModalShown=t,this.filterBy.account=""}})}onClickLogo(){this.router.navigateByUrl("/")}getUsers(){var t=this;return(0,U.Z)(function*(){t.users$=yield t.userService.getUsers(t.filterBy)})()}onToggleSearchModal(t){this.userService.setIsSearchModalShown(t)}onToggleFollow({isFollowClicked:t,user:r}){var i=this;return(0,U.Z)(function*(){const o=i.authService.getUserById(r._id).pipe(jt(1));r=yield Vr(o),yield i.userService.toggleFollow(t,r)})()}ngOnDestroy(){this.searchModalSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Tn),u.Y36(dg),u.Y36(Nr))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-header-mobile"]],decls:12,vars:2,consts:[[1,"app-header-mobile"],[1,"logo",3,"click"],["aria-label","Instagram","color","rgb(245, 245, 245)","fill","rgb(245, 245, 245)","height","29","role","img","viewBox","32 4 113 32","width","103",1,"_ab6-"],["clip-rule","evenodd","d","M37.82 4.11c-2.32.97-4.86 3.7-5.66 7.13-1.02 4.34 3.21 6.17 3.56 5.57.4-.7-.76-.94-1-3.2-.3-2.9 1.05-6.16 2.75-7.58.32-.27.3.1.3.78l-.06 14.46c0 3.1-.13 4.07-.36 5.04-.23.98-.6 1.64-.33 1.9.32.28 1.68-.4 2.46-1.5a8.13 8.13 0 0 0 1.33-4.58c.07-2.06.06-5.33.07-7.19 0-1.7.03-6.71-.03-9.72-.02-.74-2.07-1.51-3.03-1.1Zm82.13 14.48a9.42 9.42 0 0 1-.88 3.75c-.85 1.72-2.63 2.25-3.39-.22-.4-1.34-.43-3.59-.13-5.47.3-1.9 1.14-3.35 2.53-3.22 1.38.13 2.02 1.9 1.87 5.16ZM96.8 28.57c-.02 2.67-.44 5.01-1.34 5.7-1.29.96-3 .23-2.65-1.72.31-1.72 1.8-3.48 4-5.64l-.01 1.66Zm-.35-10a10.56 10.56 0 0 1-.88 3.77c-.85 1.72-2.64 2.25-3.39-.22-.5-1.69-.38-3.87-.13-5.25.33-1.78 1.12-3.44 2.53-3.44 1.38 0 2.06 1.5 1.87 5.14Zm-13.41-.02a9.54 9.54 0 0 1-.87 3.8c-.88 1.7-2.63 2.24-3.4-.23-.55-1.77-.36-4.2-.13-5.5.34-1.95 1.2-3.32 2.53-3.2 1.38.14 2.04 1.9 1.87 5.13Zm61.45 1.81c-.33 0-.49.35-.61.93-.44 2.02-.9 2.48-1.5 2.48-.66 0-1.26-1-1.42-3-.12-1.58-.1-4.48.06-7.37.03-.59-.14-1.17-1.73-1.75-.68-.25-1.68-.62-2.17.58a29.65 29.65 0 0 0-2.08 7.14c0 .06-.08.07-.1-.06-.07-.87-.26-2.46-.28-5.79 0-.65-.14-1.2-.86-1.65-.47-.3-1.88-.81-2.4-.2-.43.5-.94 1.87-1.47 3.48l-.74 2.2.01-4.88c0-.5-.34-.67-.45-.7a9.54 9.54 0 0 0-1.8-.37c-.48 0-.6.27-.6.67 0 .05-.08 4.65-.08 7.87v.46c-.27 1.48-1.14 3.49-2.09 3.49s-1.4-.84-1.4-4.68c0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81-.01-.5-.87-.75-1.27-.85-.4-.09-.76-.13-1.03-.11-.4.02-.67.27-.67.62v.55a3.71 3.71 0 0 0-1.83-1.49c-1.44-.43-2.94-.05-4.07 1.53a9.31 9.31 0 0 0-1.66 4.73c-.16 1.5-.1 3.01.17 4.3-.33 1.44-.96 2.04-1.64 2.04-.99 0-1.7-1.62-1.62-4.4.06-1.84.42-3.13.82-4.99.17-.8.04-1.2-.31-1.6-.32-.37-1-.56-1.99-.33-.7.16-1.7.34-2.6.47 0 0 .05-.21.1-.6.23-2.03-1.98-1.87-2.69-1.22-.42.39-.7.84-.82 1.67-.17 1.3.9 1.91.9 1.91a22.22 22.22 0 0 1-3.4 7.23v-.7c-.01-3.36.03-6 .05-6.95.02-.94.06-1.63.06-1.8 0-.36-.22-.5-.66-.67-.4-.16-.86-.26-1.34-.3-.6-.05-.97.27-.96.65v.52a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.94-.05-4.07 1.53a10.1 10.1 0 0 0-1.66 4.72c-.15 1.57-.13 2.9.09 4.04-.23 1.13-.89 2.3-1.63 2.3-.95 0-1.5-.83-1.5-4.67 0-2.24.07-3.21.1-4.83.02-.94.06-1.65.06-1.81 0-.5-.87-.75-1.27-.85-.42-.1-.79-.13-1.06-.1-.37.02-.63.35-.63.6v.56a3.7 3.7 0 0 0-1.84-1.49c-1.44-.43-2.93-.04-4.07 1.53-.75 1.03-1.35 2.17-1.66 4.7a15.8 15.8 0 0 0-.12 2.04c-.3 1.81-1.61 3.9-2.68 3.9-.63 0-1.23-1.21-1.23-3.8 0-3.45.22-8.36.25-8.83l1.62-.03c.68 0 1.29.01 2.19-.04.45-.02.88-1.64.42-1.84-.21-.09-1.7-.17-2.3-.18-.5-.01-1.88-.11-1.88-.11s.13-3.26.16-3.6c.02-.3-.35-.44-.57-.53a7.77 7.77 0 0 0-1.53-.44c-.76-.15-1.1 0-1.17.64-.1.97-.15 3.82-.15 3.82-.56 0-2.47-.11-3.02-.11-.52 0-1.08 2.22-.36 2.25l3.2.09-.03 6.53v.47c-.53 2.73-2.37 4.2-2.37 4.2.4-1.8-.42-3.15-1.87-4.3-.54-.42-1.6-1.22-2.79-2.1 0 0 .69-.68 1.3-2.04.43-.96.45-2.06-.61-2.3-1.75-.41-3.2.87-3.63 2.25a2.61 2.61 0 0 0 .5 2.66l.15.19c-.4.76-.94 1.78-1.4 2.58-1.27 2.2-2.24 3.95-2.97 3.95-.58 0-.57-1.77-.57-3.43 0-1.43.1-3.58.19-5.8.03-.74-.34-1.16-.96-1.54a4.33 4.33 0 0 0-1.64-.69c-.7 0-2.7.1-4.6 5.57-.23.69-.7 1.94-.7 1.94l.04-6.57c0-.16-.08-.3-.27-.4a4.68 4.68 0 0 0-1.93-.54c-.36 0-.54.17-.54.5l-.07 10.3c0 .78.02 1.69.1 2.09.08.4.2.72.36.91.15.2.33.34.62.4.28.06 1.78.25 1.86-.32.1-.69.1-1.43.89-4.2 1.22-4.31 2.82-6.42 3.58-7.16.13-.14.28-.14.27.07l-.22 5.32c-.2 5.37.78 6.36 2.17 6.36 1.07 0 2.58-1.06 4.2-3.74l2.7-4.5 1.58 1.46c1.28 1.2 1.7 2.36 1.42 3.45-.21.83-1.02 1.7-2.44.86-.42-.25-.6-.44-1.01-.71-.23-.15-.57-.2-.78-.04-.53.4-.84.92-1.01 1.55-.17.61.45.94 1.09 1.22.55.25 1.74.47 2.5.5 2.94.1 5.3-1.42 6.94-5.34.3 3.38 1.55 5.3 3.72 5.3 1.45 0 2.91-1.88 3.55-3.72.18.75.45 1.4.8 1.96 1.68 2.65 4.93 2.07 6.56-.18.5-.69.58-.94.58-.94a3.07 3.07 0 0 0 2.94 2.87c1.1 0 2.23-.52 3.03-2.31.09.2.2.38.3.56 1.68 2.65 4.93 2.07 6.56-.18l.2-.28.05 1.4-1.5 1.37c-2.52 2.3-4.44 4.05-4.58 6.09-.18 2.6 1.93 3.56 3.53 3.69a4.5 4.5 0 0 0 4.04-2.11c.78-1.15 1.3-3.63 1.26-6.08l-.06-3.56a28.55 28.55 0 0 0 5.42-9.44s.93.01 1.92-.05c.32-.02.41.04.35.27-.07.28-1.25 4.84-.17 7.88.74 2.08 2.4 2.75 3.4 2.75 1.15 0 2.26-.87 2.85-2.17l.23.42c1.68 2.65 4.92 2.07 6.56-.18.37-.5.58-.94.58-.94.36 2.2 2.07 2.88 3.05 2.88 1.02 0 2-.42 2.78-2.28.03.82.08 1.49.16 1.7.05.13.34.3.56.37.93.34 1.88.18 2.24.11.24-.05.43-.25.46-.75.07-1.33.03-3.56.43-5.21.67-2.79 1.3-3.87 1.6-4.4.17-.3.36-.35.37-.03.01.64.04 2.52.3 5.05.2 1.86.46 2.96.65 3.3.57 1 1.27 1.05 1.83 1.05.36 0 1.12-.1 1.05-.73-.03-.31.02-2.22.7-4.96.43-1.79 1.15-3.4 1.41-4 .1-.21.15-.04.15 0-.06 1.22-.18 5.25.32 7.46.68 2.98 2.65 3.32 3.34 3.32 1.47 0 2.67-1.12 3.07-4.05.1-.7-.05-1.25-.48-1.25Z","fill","currentColor","fill-rule","evenodd"],[1,"search-container"],["aria-label","Search","fill","currentColor","height","16","role","img","viewBox","0 0 24 24","width","16",1,"x1lliihq","x1n2onr6","x1cp0k07"],["d","M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z","fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","x1","16.511","x2","22","y1","16.511","y2","22"],["type","search","name","search","id","search","placeholder","Search",3,"ngModel","ngModelChange","input","click"],[3,"users","closeModal","getUsers","toggleFollow",4,"ngIf"],[3,"users","closeModal","getUsers","toggleFollow"]],template:function(r,i){1&r&&(u.TgZ(0,"header",0)(1,"div",1),u.NdJ("click",function(){return i.onClickLogo()}),u.O4$(),u.TgZ(2,"svg",2),u._UZ(3,"path",3),u.qZA()(),u.kcU(),u.TgZ(4,"div",4),u.O4$(),u.TgZ(5,"svg",5)(6,"title"),u._uU(7,"Search"),u.qZA(),u._UZ(8,"path",6)(9,"line",7),u.qZA(),u.kcU(),u.TgZ(10,"input",8),u.NdJ("ngModelChange",function(l){return i.filterBy.account=l})("input",function(){return i.getUsers()})("click",function(){return i.onToggleSearchModal(!0)}),u.qZA(),u.YNc(11,DJ,2,3,"search-modal",9),u.qZA()()),2&r&&(u.xp6(10),u.Q6J("ngModel",i.filterBy.account),u.xp6(1),u.Q6J("ngIf",i.isSearchModalShown))},dependencies:[Wn,Jd,ov,gg,TJ,hu],styles:["[_nghost-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:25px 1fr 25px;position:sticky;z-index:199;top:0;border-block-end:1px solid rgba(255,255,255,.27);background-color:#000}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{grid-column:2}@media (min-width: 600px){[_nghost-%COMP%]{display:none}}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:60px;gap:1em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8em;background-color:#262626;height:2.5em;padding-inline:1em;border-radius:.5em}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.2)}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]{color:#919191}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]{background-color:transparent;border:none;height:100%;color:#f5f5f5;font-size:16px;width:100%}[_nghost-%COMP%]   .app-header-mobile[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   #search[_ngcontent-%COMP%]::placeholder{font-size:16px;font-style:italic;color:#919191}"]})}return n})();function MJ(n,e){1&n&&u._UZ(0,"router-outlet")}function AJ(n,e){1&n&&u._UZ(0,"app-header-mobile")}function xJ(n,e){1&n&&u._UZ(0,"aside-menu")}function PJ(n,e){1&n&&(u.TgZ(0,"main",2),u._UZ(1,"router-outlet"),u.qZA())}function OJ(n,e){1&n&&u._UZ(0,"menu-mobile")}let kJ=(()=>{class n{constructor(t){this.router=t,this.routerUrl=this.router.url}ngOnInit(){var t=this;return(0,U.Z)(function*(){t.routerUrlSubscription=t.router.events.subscribe(r=>{r instanceof ao&&(t.routerUrl=t.router.url)})})()}ngOnDestroy(){this.routerUrlSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(u.Y36(Tn))};static#t=this.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:7,consts:[[4,"ngIf"],["class","main-layout",4,"ngIf"],[1,"main-layout"]],template:function(r,i){1&r&&(u.TgZ(0,"section"),u.YNc(1,MJ,1,0,"router-outlet",0),u.YNc(2,AJ,1,0,"app-header-mobile",0),u.YNc(3,xJ,1,0,"aside-menu",0),u.YNc(4,PJ,2,0,"main",1),u.YNc(5,OJ,1,0,"menu-mobile",0),u.qZA()),2&r&&(u.Tol("/login"===i.routerUrl?"main-app login-layout":"main-app app-layout"),u.xp6(1),u.Q6J("ngIf","/login"===i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl),u.xp6(1),u.Q6J("ngIf","/login"!==i.routerUrl))},dependencies:[Wn,af,dJ,vJ,SJ]})}return n})();class UM{}class BM{}class Mc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(l):this.headers.set(o,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Mc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Mc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Mc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let l=this.headers.get(t);if(!l)return;l=l.filter(f=>-1===o.indexOf(f)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class RJ{encodeKey(e){return LB(e)}encodeValue(e){return LB(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const FJ=/%(\d[a-f0-9])/gi,LJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function LB(n){return encodeURIComponent(n).replace(FJ,(e,t)=>LJ[t]??e)}function VM(n){return`${n}`}class nh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new RJ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function NJ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[l,f]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],g=t.get(l)||[];g.push(f),t.set(l,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(VM):[VM(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new nh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(VM(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(VM(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class UJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function UB(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function BB(n){return typeof Blob<"u"&&n instanceof Blob}function VB(n){return typeof FormData<"u"&&n instanceof FormData}class UE{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function BJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Mc),this.context||(this.context=new UJ),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+l}}else this.params=new nh,this.urlWithParams=t}serializeBody(){return null===this.body?null:UB(this.body)||BB(this.body)||VB(this.body)||function VJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof nh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||VB(this.body)?null:BB(this.body)?this.body.type||null:UB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let g=e.headers||this.headers,v=e.params||this.params;const E=e.context??this.context;return void 0!==e.setHeaders&&(g=Object.keys(e.setHeaders).reduce((T,M)=>T.set(M,e.setHeaders[M]),g)),e.setParams&&(v=Object.keys(e.setParams).reduce((T,M)=>T.set(M,e.setParams[M]),v)),new UE(t,r,o,{params:v,headers:g,context:E,reportProgress:f,responseType:i,withCredentials:l})}}var cv=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(cv||{});class T2{constructor(e,t=200,r="OK"){this.headers=e.headers||new Mc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class D2 extends T2{constructor(e={}){super(e),this.type=cv.ResponseHeader}clone(e={}){return new D2({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class lv extends T2{constructor(e={}){super(e),this.type=cv.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new lv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class jB extends T2{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function S2(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let jJ=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof UE)o=t;else{let g,v;g=i.headers instanceof Mc?i.headers:new Mc(i.headers),i.params&&(v=i.params instanceof nh?i.params:new nh({fromObject:i.params})),o=new UE(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=(0,ut.of)(o).pipe(ko(g=>this.handler.handle(g)));if(t instanceof UE||"events"===i.observe)return l;const f=l.pipe(Mr(g=>g instanceof lv));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe((0,wt.U)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new nh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,S2(i,r))}post(t,r,i={}){return this.request("POST",t,S2(i,r))}put(t,r,i={}){return this.request("PUT",t,S2(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(UM))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function zB(n,e){return e(n)}function HJ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const GJ=new u.OlP(""),BE=new u.OlP(""),GB=new u.OlP("");function WJ(){let n=null;return(e,t)=>{null===n&&(n=((0,u.f3M)(GJ,{optional:!0})??[]).reduceRight(HJ,zB));const r=(0,u.f3M)(u.HDt),i=r.add();return n(e,t).pipe(tc(()=>r.remove(i)))}}let WB=(()=>{class n extends UM{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,u.f3M)(u.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(BE),...this.injector.get(GB,[])]));this.chain=i.reduceRight((o,l)=>function zJ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,o=>n(o,i)))}(o,l,this.injector),zB)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(tc(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(BM),u.LFG(u.lqb))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const YJ=/^\)\]\}',?\n/;let ZB=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new u.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,pn.D)(r.\u0275loadImpl()):(0,ut.of)(null)).pipe((0,En.w)(()=>new gi.y(o=>{const l=r.build();if(l.open(t.method,t.urlWithParams),t.withCredentials&&(l.withCredentials=!0),t.headers.forEach((Q,J)=>l.setRequestHeader(Q,J.join(","))),t.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Q=t.detectContentTypeHeader();null!==Q&&l.setRequestHeader("Content-Type",Q)}if(t.responseType){const Q=t.responseType.toLowerCase();l.responseType="json"!==Q?Q:"text"}const f=t.serializeBody();let g=null;const v=()=>{if(null!==g)return g;const Q=l.statusText||"OK",J=new Mc(l.getAllResponseHeaders()),be=function QJ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||t.url;return g=new D2({headers:J,status:l.status,statusText:Q,url:be}),g},E=()=>{let{headers:Q,status:J,statusText:be,url:ze}=v(),Re=null;204!==J&&(Re=typeof l.response>"u"?l.responseText:l.response),0===J&&(J=Re?200:0);let Ye=J>=200&&J<300;if("json"===t.responseType&&"string"==typeof Re){const gt=Re;Re=Re.replace(YJ,"");try{Re=""!==Re?JSON.parse(Re):null}catch(At){Re=gt,Ye&&(Ye=!1,Re={error:At,text:Re})}}Ye?(o.next(new lv({body:Re,headers:Q,status:J,statusText:be,url:ze||void 0})),o.complete()):o.error(new jB({error:Re,headers:Q,status:J,statusText:be,url:ze||void 0}))},T=Q=>{const{url:J}=v(),be=new jB({error:Q,status:l.status||0,statusText:l.statusText||"Unknown Error",url:J||void 0});o.error(be)};let M=!1;const R=Q=>{M||(o.next(v()),M=!0);let J={type:cv.DownloadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),"text"===t.responseType&&l.responseText&&(J.partialText=l.responseText),o.next(J)},W=Q=>{let J={type:cv.UploadProgress,loaded:Q.loaded};Q.lengthComputable&&(J.total=Q.total),o.next(J)};return l.addEventListener("load",E),l.addEventListener("error",T),l.addEventListener("timeout",T),l.addEventListener("abort",T),t.reportProgress&&(l.addEventListener("progress",R),null!==f&&l.upload&&l.upload.addEventListener("progress",W)),l.send(f),o.next({type:cv.Sent}),()=>{l.removeEventListener("error",T),l.removeEventListener("abort",T),l.removeEventListener("load",E),l.removeEventListener("timeout",T),t.reportProgress&&(l.removeEventListener("progress",R),null!==f&&l.upload&&l.upload.removeEventListener("progress",W)),l.readyState!==l.DONE&&l.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Is))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();const M2=new u.OlP("XSRF_ENABLED"),KB=new u.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),YB=new u.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class QB{}let eX=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Va(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(u.LFG(Ie),u.LFG(u.Lbi),u.LFG(KB))};static#t=this.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac})}return n})();function tX(n,e){const t=n.url.toLowerCase();if(!(0,u.f3M)(M2)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,u.f3M)(QB).getToken(),i=(0,u.f3M)(YB);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var rh=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(rh||{});function nX(...n){const e=[jJ,ZB,WB,{provide:UM,useExisting:WB},{provide:BM,useExisting:ZB},{provide:BE,useValue:tX,multi:!0},{provide:M2,useValue:!0},{provide:QB,useClass:eX}];for(const t of n)e.push(...t.\u0275providers);return(0,u.MR2)(e)}const JB=new u.OlP("LEGACY_INTERCEPTOR_FN");function rX(){return function _g(n,e){return{\u0275kind:n,\u0275providers:e}}(rh.LegacyInterceptors,[{provide:JB,useFactory:WJ},{provide:BE,useExisting:JB,multi:!0}])}let iX=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n});static#n=this.\u0275inj=u.cJS({providers:[nX(rX())]})}return n})();class A2{constructor(e){return e}}class $M{constructor(){return ks("auth")}}const x2=new u.OlP("angularfire2.auth-instances");function dX(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new A2(r)}}const hX={provide:$M,deps:[[new u.FiY,x2]]},fX={provide:A2,useFactory:function uX(n,e){const t=Ol("auth",n,e);return t&&new A2(t)},deps:[[new u.FiY,x2],nu]};let pX=(()=>{class n{constructor(){(0,Dn.registerVersion)("angularfire",Pl.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[fX,hX]}),n})();function gX(n,...e){return{ngModule:pX,providers:[{provide:x2,useFactory:dX(n),multi:!0,deps:[u.R0b,u.zs3,kl,Jy,[new u.FiY,ag],...e]}]}}const mX=Ed(B6.o,!0);class P2{constructor(e){return e}}const eV="firestore",O2=new u.OlP("angularfire2.firestore-instances");function vX(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new P2(r)}}const CX={provide:class _X{constructor(){return ks(eV)}},deps:[[new u.FiY,O2]]},wX={provide:P2,useFactory:function yX(n,e){const t=Ol(eV,n,e);return t&&new P2(t)},deps:[[new u.FiY,O2],nu]};let IX=(()=>{class n{constructor(){(0,Dn.registerVersion)("angularfire",Pl.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[wX,CX]}),n})();function EX(n,...e){return{ngModule:IX,providers:[{provide:O2,useFactory:vX(n),multi:!0,deps:[u.R0b,u.zs3,kl,Jy,[new u.FiY,$M],[new u.FiY,ag],...e]}]}}const bX=Ed(Z$,!0),tV="@firebase/database";let k2="";class DX{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,z.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class SX{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const rV=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new DX(e)}}catch{}return new SX},yg=rV("localStorage"),R2=rV("sessionStorage"),uv=new ki.Yd("@firebase/database"),iV=function(){let n=1;return function(){return n++}}(),sV=function(n){const e=(0,z.dS)(n),t=new z.gQ;t.update(e);const r=t.digest();return z.US.encodeByteArray(r)},VE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=VE.apply(null,r):e+="object"==typeof r?(0,z.Wl)(r):r,e+=" "}return e};let vg=null,oV=!0;const bi=function(...n){if(!0===oV&&(oV=!1,null===vg&&!0===R2.get("logging_enabled")&&function(n,e){(0,z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(uv.logLevel=ki.in.VERBOSE,vg=uv.log.bind(uv),e&&R2.set("logging_enabled",!0)):"function"==typeof n?vg=n:(vg=null,R2.remove("logging_enabled"))}(!0)),vg){const e=VE.apply(null,n);vg(e)}},jE=function(n){return function(...e){bi(n,...e)}},N2=function(...n){const e="FIREBASE INTERNAL ERROR: "+VE(...n);uv.error(e)},Ac=function(...n){const e=`FIREBASE FATAL ERROR: ${VE(...n)}`;throw uv.error(e),new Error(e)},rs=function(...n){const e="FIREBASE WARNING: "+VE(...n);uv.warn(e)},HM=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ih="[MIN_NAME]",ru="[MAX_NAME]",Cg=function(n,e){if(n===e)return 0;if(n===ih||e===ru)return-1;if(e===ih||n===ru)return 1;{const t=uV(n),r=uV(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},xX=function(n,e){return n===e?0:n<e?-1:1},$E=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,z.Wl)(e))},F2=function(n){if("object"!=typeof n||null===n)return(0,z.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,z.Wl)(e[r]),t+=":",t+=F2(n[e[r]]);return t+="}",t},cV=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const lV=function(n){(0,z.hu)(!HM(n),"Invalid JSON number");const r=1023;let i,o,l,f,g;0===n?(o=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)v.push(o%2?1:0),o=Math.floor(o/2);v.push(i?1:0),v.reverse();const E=v.join("");let T="";for(g=0;g<64;g+=8){let M=parseInt(E.substr(g,8),2).toString(16);1===M.length&&(M="0"+M),T+=M}return T.toLowerCase()},RX=new RegExp("^-?(0*)\\d{1,10}$"),uV=function(n){if(RX.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},dv=function(n){try{n()}catch(e){setTimeout(()=>{throw rs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},HE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class UX{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){rs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class BX{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(bi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rs(e)}}let zE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const gV=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yV="websocket",vV="long_polling";class U2{constructor(e,t,r,i,o=!1,l="",f=!1,g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function CV(n,e,t){let r;if((0,z.hu)("string"==typeof e,"typeof type must == string"),(0,z.hu)("object"==typeof t,"typeof params must == object"),e===yV)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==vV)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function VX(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ti(t,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}class jX{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,z.p$)(this.counters_)}}const B2={},V2={};function j2(n){const e=n.toString();return B2[e]||(B2[e]=new jX),B2[e]}class HX{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&dv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class sh{constructor(e,t,r,i,o,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jE(e),this.stats_=j2(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),CV(t,vV,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new HX(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $2((...o)=>{const[l,f,g,v,E]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,f]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&gV.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){sh.forceAllow_=!0}static forceDisallow(){sh.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!sh.forceAllow_&&(sh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,z.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,z.h$)(t),i=cV(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,z.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class $2{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=iV(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=$2.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){bi("frame writing exception"),f.stack&&bi(f.stack),bi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||bi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{bi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let GM=null;typeof MozWebSocket<"u"?GM=MozWebSocket:typeof WebSocket<"u"&&(GM=WebSocket);let hv=(()=>{class n{constructor(t,r,i,o,l,f,g){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jE(this.connId),this.stats_=j2(r),this.connURL=n.connectionURL_(r,f,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,l){const f={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&gV.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),o&&(f.ac=o),l&&(f.p=l),CV(t,yV,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yg.set("previous_websocket_failure",!0);try{let i;if((0,z.Yr)()){i={headers:{"User-Agent":`Firebase/5/${k2}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new GM(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==GM&&!n.forceDisallow_}static previouslyFailed(){return yg.isInMemoryStorage||!0===yg.get("previous_websocket_failure")}markConnectionHealthy(){yg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,z.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=cV(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),SV=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[sh,hv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=hv&&hv.isAvailable();let i=r&&!hv.previouslyFailed();if(t.webSocketOnly&&(r||rs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[hv];else{const o=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class RV{constructor(e,t,r,i,o,l,f,g,v,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jE("c:"+this.id+":"),this.transportManager_=new SV(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=HE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=$E("t",e),r=$E("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=$E("t",e),r=$E("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=$E("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?N2("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):N2("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&rs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),HE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):HE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class NV{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class FV{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class WM extends FV{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new WM}getInitialEvent(e){return(0,z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class _n{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ln(){return new _n("")}function Ht(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function oh(n){return n.pieces_.length-n.pieceNum_}function xn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new _n(n.pieces_,e)}function z2(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function GE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function BV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new _n(e,0)}function rr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof _n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new _n(t,0)}function zt(n){return n.pieceNum_>=n.pieces_.length}function _s(n,e){const t=Ht(n),r=Ht(e);if(null===t)return e;if(t===r)return _s(xn(n),xn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function G2(n,e){if(oh(n)!==oh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function na(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(oh(n)>oh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class hee{constructor(e,t){this.errorPrefix_=t,this.parts_=GE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,z.ug)(this.parts_[r]);VV(this)}}function VV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wg(n))}function wg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class W2 extends FV{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new W2}getInitialEvent(e){return(0,z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const WE=1e3;let ZM,Ig=(()=>{class n extends NV{constructor(t,r,i,o,l,f,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=jE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=WE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");W2.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&WM.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,l={r:o,a:t,b:r};this.log_((0,z.Wl)(l)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new z.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const g=f.d;"ok"===f.s?r.resolve(g):r.reject(g)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const g={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const v=g.d,E=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",g),"ok"!==E&&this.removeListen_(i,o),t.onComplete&&t.onComplete(E,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,z.r3)(t,"w")){const i=(0,z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();rs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const l=o.s,f=o.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const l={p:t};o&&(l.q=i,l.t=o),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,z.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):N2("Unrecognized action received from server: "+(0,z.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=WE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=WE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=WE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,U.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let g=!1,v=null;const E=function(){v?v.close():(g=!0,o())};t.realtime_={close:E,sendRequest:function(R){(0,z.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(R)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[R,W]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);g?bi("getToken() completed but was canceled"):(bi("getToken() completed. Creating connection."),t.authToken_=R&&R.accessToken,t.appCheckToken_=W&&W.token,v=new RV(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,Q=>{rs(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(R){t.log_("Failed to get token: "+R),g||(t.repoInfo_.nodeAdmin&&rs(R),E())}}})()}interrupt(t){bi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){bi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=WE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>F2(l)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new _n(t).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){bi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){bi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+k2.replace(/\./g,"-")]=1,(0,z.uI)()?t["framework.cordova"]=1:(0,z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=WM.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class qt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new qt(e,t)}}class qM{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new qt(ih,e),i=new qt(ih,t);return 0!==this.compare(r,i)}minPost(){return qt.MIN}}class HV extends qM{static get __EMPTY_NODE(){return ZM}static set __EMPTY_NODE(e){ZM=e}compare(e,t){return Cg(e.name,t.name)}isDefinedOn(e){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return qt.MIN}maxPost(){return new qt(ru,ZM)}makePost(e,t){return(0,z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new qt(e,ZM)}toString(){return".key"}}const xc=new HV;class KM{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Z2,Ra=(()=>{class n{constructor(t,r,i,o,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Us.EMPTY_NODE,this.right=l??Us.EMPTY_NODE}copy(t,r,i,o,l){return new n(t??this.key,r??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const l=i(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===l?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Us.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Us.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Us{constructor(e,t=Us.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Us(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ra.BLACK,null,null))}remove(e){return new Us(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ra.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new KM(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new KM(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new KM(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new KM(this.root_,null,this.comparator_,!0,e)}}function Cee(n,e){return Cg(n.name,e.name)}function q2(n,e){return Cg(n,e)}Us.EMPTY_NODE=new class vee{copy(e,t,r,i,o){return this}insert(e,t,r){return new Ra(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const zV=function(n){return"number"==typeof n?"number:"+lV(n):"string:"+n},GV=function(n){if(n.isLeafNode()){const e=n.val();(0,z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,z.hu)(n===Z2||n.isEmpty(),"priority of unexpected type.");(0,z.hu)(n===Z2||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let WV,qV,ZV,fv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),GV(this.priorityNode_)}static set __childrenNodeConstructor(t){WV=t}static get __childrenNodeConstructor(){return WV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return zt(t)?this:".priority"===Ht(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ht(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,z.hu)(".priority"!==i||1===oh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(xn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+zV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?lV(this.value_):this.value_,this.lazyHash_=sV(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,z.hu)(o>=0,"Unknown leaf type: "+r),(0,z.hu)(l>=0,"Unknown leaf type: "+i),o===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const jn=new class bee extends qM{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Cg(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return qt.MIN}maxPost(){return new qt(ru,new fv("[PRIORITY-POST]",ZV))}makePost(e,t){const r=qV(e);return new qt(t,new fv("[PRIORITY-POST]",r))}toString(){return".priority"}},Tee=Math.log(2);class Dee{constructor(e){this.count=parseInt(Math.log(e+1)/Tee,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const YM=function(n,e,t,r){n.sort(e);const i=function(g,v){const E=v-g;let T,M;if(0===E)return null;if(1===E)return T=n[g],M=t?t(T):T,new Ra(M,T.node,Ra.BLACK,null,null);{const R=parseInt(E/2,10)+g,W=i(g,R),Q=i(R+1,v);return T=n[R],M=t?t(T):T,new Ra(M,T.node,Ra.BLACK,W,Q)}},f=function(g){let v=null,E=null,T=n.length;const M=function(W,Q){const J=T-W,be=T;T-=W;const ze=i(J+1,be),Re=n[J],Ye=t?t(Re):Re;R(new Ra(Ye,Re.node,Q,null,ze))},R=function(W){v?(v.left=W,v=W):(E=W,v=W)};for(let W=0;W<g.count;++W){const Q=g.nextBitIsOne(),J=Math.pow(2,g.count-(W+1));Q?M(J,Ra.BLACK):(M(J,Ra.BLACK),M(J,Ra.RED))}return E}(new Dee(n.length));return new Us(r||e,f)};let K2;const pv={};class iu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,z.hu)(pv&&jn,"ChildrenNode.ts has not been loaded"),K2=K2||new iu({".priority":pv},{".priority":jn}),K2}get(e){const t=(0,z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Us?t:null}hasIndex(e){return(0,z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,z.hu)(e!==xc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(qt.Wrap);let f,l=o.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=o.getNext();f=i?YM(r,e.getCompare()):pv;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const E=Object.assign({},this.indexes_);return E[g]=f,new iu(E,v)}addToIndexes(e,t){const r=(0,z.UI)(this.indexes_,(i,o)=>{const l=(0,z.DV)(this.indexSet_,o);if((0,z.hu)(l,"Missing index implementation for "+o),i===pv){if(l.isDefinedOn(e.node)){const f=[],g=t.getIterator(qt.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&f.push(v),v=g.getNext();return f.push(e),YM(f,l.getCompare())}return pv}{const f=t.get(e.name);let g=i;return f&&(g=g.remove(new qt(e.name,f))),g.insert(e,e.node)}});return new iu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,z.UI)(this.indexes_,i=>{if(i===pv)return i;{const o=t.get(e.name);return o?i.remove(new qt(e.name,o)):i}});return new iu(r,this.indexSet_)}}let qE,Ot=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&GV(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qE||(qE=new n(new Us(q2),null,iu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?qE:r}}getChild(t){const r=Ht(t);return null===r?this:this.getImmediateChild(r).getChild(xn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new qt(t,r);let o,l;r.isEmpty()?(o=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=o.isEmpty()?qE:this.priorityNode_;return new n(o,f,l)}}updateChild(t,r){const i=Ht(t);if(null===i)return r;{(0,z.hu)(".priority"!==Ht(t)||1===oh(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(xn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,l=!0;if(this.forEachChild(jn,(f,g)=>{r[f]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):l=!1}),!t&&l&&o<2*i){const f=[];for(const g in r)f[g]=r[g];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+zV(this.getPriority().val())+":"),this.forEachChild(jn,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":sV(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new qt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new qt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new qt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,qt.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,qt.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)>0;)o.getNext(),l=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ZE?-1:0}withIndex(t){if(t===xc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===xc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(jn),o=r.getIterator(jn);let l=i.getNext(),f=o.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=o.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===xc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ZE=new class See extends Ot{constructor(){super(new Us(q2),Ot.EMPTY_NODE,iu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ot.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(qt,{MIN:{value:new qt(ih,Ot.EMPTY_NODE)},MAX:{value:new qt(ru,ZE)}}),HV.__EMPTY_NODE=Ot.EMPTY_NODE,fv.__childrenNodeConstructor=Ot,function wee(n){Z2=n}(ZE),function Eee(n){ZV=n}(ZE);const Mee=!0;function hr(n,e=null){if(null===n)return Ot.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new fv(n,hr(e));if(n instanceof Array||!Mee){let t=Ot.EMPTY_NODE;return Ti(n,(r,i)=>{if((0,z.r3)(n,r)&&"."!==r.substring(0,1)){const o=hr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(hr(e))}{const t=[];let r=!1;if(Ti(n,(l,f)=>{if("."!==l.substring(0,1)){const g=hr(f);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new qt(l,g)))}}),0===t.length)return Ot.EMPTY_NODE;const o=YM(t,Cee,l=>l.name,q2);if(r){const l=YM(t,jn.getCompare());return new Ot(o,hr(e),new iu({".priority":l},{".priority":jn}))}return new Ot(o,hr(e),iu.Default)}}!function Iee(n){qV=n}(hr);class Y2 extends qM{constructor(e){super(),this.indexPath_=e,(0,z.hu)(!zt(e)&&".priority"!==Ht(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Cg(e.name,t.name):o}makePost(e,t){const r=hr(e),i=Ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new qt(t,i)}maxPost(){const e=Ot.EMPTY_NODE.updateChild(this.indexPath_,ZE);return new qt(ru,e)}toString(){return GE(this.indexPath_,0).join("/")}}const Q2=new class Aee extends qM{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Cg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return qt.MIN}maxPost(){return qt.MAX}makePost(e,t){const r=hr(e);return new qt(t,r)}toString(){return".value"}};function YE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class X2{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ih}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ru}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===jn}copy(){const e=new X2;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function YV(n){const e={};if(n.isDefault())return e;let t;if(n.index_===jn?t="$priority":n.index_===Q2?t="$value":n.index_===xc?t="$key":((0,z.hu)(n.index_ instanceof Y2,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,z.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,z.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,z.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function QV(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==jn&&(e.i=n.index_.toString()),e}class JM extends NV{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=jE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=JM.getListenId_(e,r),f={};this.listens_[l]=f;const g=YV(e._queryParams);this.restRequest_(o+".json",g,(v,E)=>{let T=E;if(404===v&&(T=null,v=null),null===v&&this.onDataUpdate_(o,T,!1,r),(0,z.DV)(this.listens_,l)===f){let M;M=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(M,null)}})}unlisten(e,t){const r=JM.getListenId_(e,t);delete this.listens_[r]}get(e){const t=YV(e._queryParams),r=e._path.toString(),i=new z.BH;return this.restRequest_(r+".json",t,(o,l)=>{let f=l;404===o&&(f=null,o=null),null===o?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,z.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let g=null;if(f.status>=200&&f.status<300){try{g=(0,z.cI)(f.responseText)}catch{rs("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,g)}else 401!==f.status&&404!==f.status&&rs("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class Lee{constructor(){this.rootNode_=Ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function XM(){return{value:null,children:new Map}}function mv(n,e,t){if(zt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ht(e);n.children.has(r)||n.children.set(r,XM()),mv(n.children.get(r),e=xn(e),t)}}function rF(n,e,t){null!==n.value?t(e,n.value):function Uee(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{rF(i,new _n(e.toString()+"/"+r),t)})}class Bee{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ti(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class $ee{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Bee(e);const r=1e4+2e4*Math.random();HE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ti(e,(i,o)=>{o>0&&(0,z.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),HE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Pc=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Pc||{});function oF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class eA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Pc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(zt(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new _n(e));return new eA(ln(),t,this.revert)}}return(0,z.hu)(Ht(this.path)===e,"operationForChild called for unrelated child."),new eA(xn(this.path),this.affectedTree,this.revert)}}class Eg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Pc.OVERWRITE}operationForChild(e){return zt(this.path)?new Eg(this.source,ln(),this.snap.getImmediateChild(e)):new Eg(this.source,xn(this.path),this.snap)}}class _v{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Pc.MERGE}operationForChild(e){if(zt(this.path)){const t=this.children.subtree(new _n(e));return t.isEmpty()?null:t.value?new Eg(this.source,ln(),t.value):new _v(this.source,ln(),t)}return(0,z.hu)(Ht(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _v(this.source,xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ah{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(zt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ht(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function XE(n,e,t,r,i,o){const l=r.filter(f=>f.type===t);l.sort((f,g)=>function Wee(n,e,t){if(null==e.childName||null==t.childName)throw(0,z.g5)("Should only compare child_ events.");const r=new qt(e.childName,e.snapshotNode),i=new qt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,g)),l.forEach(f=>{const g=function Gee(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,o);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(g,n.query_))})})}function tA(n,e){return{eventCache:n,serverCache:e}}function eb(n,e,t,r){return tA(new ah(e,t,r),n.serverCache)}function XV(n,e,t,r){return tA(n.eventCache,new ah(e,t,r))}function nA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function bg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let aF;class $n{constructor(e,t=(()=>(aF||(aF=new Us(xX)),aF))()){this.value=e,this.children=t}static fromObject(e){let t=new $n(null);return Ti(e,(r,i)=>{t=t.set(new _n(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ln(),value:this.value};if(zt(e))return null;{const r=Ht(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(xn(e),t);return null!=o?{path:rr(new _n(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(zt(e))return this;{const t=Ht(e),r=this.children.get(t);return null!==r?r.subtree(xn(e)):new $n(null)}}set(e,t){if(zt(e))return new $n(t,this.children);{const r=Ht(e),o=(this.children.get(r)||new $n(null)).set(xn(e),t),l=this.children.insert(r,o);return new $n(this.value,l)}}remove(e){if(zt(e))return this.children.isEmpty()?new $n(null):new $n(null,this.children);{const t=Ht(e),r=this.children.get(t);if(r){const i=r.remove(xn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new $n(null):new $n(this.value,o)}return this}}get(e){if(zt(e))return this.value;{const t=Ht(e),r=this.children.get(t);return r?r.get(xn(e)):null}}setTree(e,t){if(zt(e))return t;{const r=Ht(e),o=(this.children.get(r)||new $n(null)).setTree(xn(e),t);let l;return l=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new $n(this.value,l)}}fold(e){return this.fold_(ln(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(rr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ln(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(zt(e))return null;{const o=Ht(e),l=this.children.get(o);return l?l.findOnPath_(xn(e),rr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ln(),t)}foreachOnPath_(e,t,r){if(zt(e))return this;{this.value&&r(t,this.value);const i=Ht(e),o=this.children.get(i);return o?o.foreachOnPath_(xn(e),rr(t,i),r):new $n(null)}}foreach(e){this.foreach_(ln(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(rr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Na{constructor(e){this.writeTree_=e}static empty(){return new Na(new $n(null))}}function tb(n,e,t){if(zt(e))return new Na(new $n(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const l=_s(i,e);return o=o.updateChild(l,t),new Na(n.writeTree_.set(i,o))}{const i=new $n(t),o=n.writeTree_.setTree(e,i);return new Na(o)}}}function cF(n,e,t){let r=n;return Ti(t,(i,o)=>{r=tb(r,rr(e,i),o)}),r}function e9(n,e){if(zt(e))return Na.empty();{const t=n.writeTree_.setTree(e,new $n(null));return new Na(t)}}function lF(n,e){return null!=Tg(n,e)}function Tg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(_s(t.path,e)):null}function t9(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(jn,(r,i)=>{e.push(new qt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new qt(r,i.value))}),e}function ch(n,e){if(zt(e))return n;{const t=Tg(n,e);return new Na(null!=t?new $n(t):n.writeTree_.subtree(e))}}function uF(n){return n.writeTree_.isEmpty()}function yv(n,e){return n9(ln(),n.writeTree_,e)}function n9(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,z.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=n9(rr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(rr(n,".priority"),r)),t}}function rA(n,e){return a9(e,n)}function Jee(n,e){if(n.snap)return na(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&na(rr(n.path,t),e))return!0;return!1}function ete(n){return n.visible}function r9(n,e,t){let r=Na.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const l=o.path;let f;if(o.snap)na(t,l)?(f=_s(t,l),r=tb(r,f,o.snap)):na(l,t)&&(f=_s(l,t),r=tb(r,ln(),o.snap.getChild(f)));else{if(!o.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(na(t,l))f=_s(t,l),r=cF(r,f,o.children);else if(na(l,t))if(f=_s(l,t),zt(f))r=cF(r,ln(),o.children);else{const g=(0,z.DV)(o.children,Ht(f));if(g){const v=g.getChild(xn(f));r=tb(r,ln(),v)}}}}}return r}function i9(n,e,t,r,i){if(r||i){const o=ch(n.visibleWrites,e);return!i&&uF(o)?t:i||null!=t||lF(o,ln())?yv(r9(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(na(v.path,e)||na(e,v.path))},e),t||Ot.EMPTY_NODE):null}{const o=Tg(n.visibleWrites,e);if(null!=o)return o;{const l=ch(n.visibleWrites,e);return uF(l)?t:null!=t||lF(l,ln())?yv(l,t||Ot.EMPTY_NODE):null}}}function iA(n,e,t,r){return i9(n.writeTree,n.treePath,e,t,r)}function dF(n,e){return function tte(n,e,t){let r=Ot.EMPTY_NODE;const i=Tg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(jn,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=ch(n.visibleWrites,e);return t.forEachChild(jn,(l,f)=>{const g=yv(ch(o,new _n(l)),f);r=r.updateImmediateChild(l,g)}),t9(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return t9(ch(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function s9(n,e,t,r){return function nte(n,e,t,r,i){(0,z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=rr(e,t);if(lF(n.visibleWrites,o))return null;{const l=ch(n.visibleWrites,o);return uF(l)?i.getChild(t):yv(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function sA(n,e){return function ite(n,e){return Tg(n.visibleWrites,e)}(n.writeTree,rr(n.treePath,e))}function hF(n,e,t){return function rte(n,e,t,r){const i=rr(e,t),o=Tg(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?yv(ch(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function o9(n,e){return a9(rr(n.treePath,e),n.writeTree)}function a9(n,e){return{treePath:n,writeTree:e}}class cte{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,YE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,function KE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,function gv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,YE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const c9=new class lte{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class fF{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ah(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hF(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:bg(this.viewCache_),o=function ate(n,e,t,r,i,o){return function ste(n,e,t,r,i,o,l){let f;const g=ch(n.visibleWrites,e),v=Tg(g,ln());if(null!=v)f=v;else{if(null==t)return[];f=yv(g,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const E=[],T=l.getCompare(),M=o?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let R=M.getNext();for(;R&&E.length<i;)0!==T(R,r)&&E.push(R),R=M.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function l9(n,e,t,r,i,o){const l=e.eventCache;if(null!=sA(r,t))return e;{let f,g;if(zt(t))if((0,z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=bg(e),T=dF(r,v instanceof Ot?v:Ot.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),T,o)}else{const v=iA(r,bg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const v=Ht(t);if(".priority"===v){(0,z.hu)(1===oh(t),"Can't have a priority with additional path components");const E=l.getNode();g=e.serverCache.getNode();const T=s9(r,t,E,g);f=null!=T?n.filter.updatePriority(E,T):l.getNode()}else{const E=xn(t);let T;if(l.isCompleteForChild(v)){g=e.serverCache.getNode();const M=s9(r,t,l.getNode(),g);T=null!=M?l.getNode().getImmediateChild(v).updateChild(E,M):l.getNode().getImmediateChild(v)}else T=hF(r,v,e.serverCache);f=null!=T?n.filter.updateChild(l.getNode(),v,T,E,i,o):l.getNode()}}return eb(e,f,l.isFullyInitialized()||zt(t),n.filter.filtersNodes())}}function oA(n,e,t,r,i,o,l,f){const g=e.serverCache;let v;const E=l?n.filter:n.filter.getIndexedFilter();if(zt(t))v=E.updateFullNode(g.getNode(),r,null);else if(E.filtersNodes()&&!g.isFiltered()){const R=g.getNode().updateChild(t,r);v=E.updateFullNode(g.getNode(),R,null)}else{const R=Ht(t);if(!g.isCompleteForPath(t)&&oh(t)>1)return e;const W=xn(t),J=g.getNode().getImmediateChild(R).updateChild(W,r);v=".priority"===R?E.updatePriority(g.getNode(),J):E.updateChild(g.getNode(),R,J,W,c9,null)}const T=XV(e,v,g.isFullyInitialized()||zt(t),E.filtersNodes());return l9(n,T,t,i,new fF(i,T,o),f)}function pF(n,e,t,r,i,o,l){const f=e.eventCache;let g,v;const E=new fF(i,e,o);if(zt(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=eb(e,v,!0,n.filter.filtersNodes());else{const T=Ht(t);if(".priority"===T)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=eb(e,v,f.isFullyInitialized(),f.isFiltered());else{const M=xn(t),R=f.getNode().getImmediateChild(T);let W;if(zt(M))W=r;else{const Q=E.getCompleteChild(T);W=null!=Q?".priority"===z2(M)&&Q.getChild(BV(M)).isEmpty()?Q:Q.updateChild(M,r):Ot.EMPTY_NODE}g=R.equals(W)?e:eb(e,n.filter.updateChild(f.getNode(),T,W,M,E,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return g}function u9(n,e){return n.eventCache.isCompleteForChild(e)}function d9(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function gF(n,e,t,r,i,o,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=zt(t)?r:new $n(null).setTree(t,r);const E=e.serverCache.getNode();return v.children.inorderTraversal((T,M)=>{if(E.hasChild(T)){const W=d9(0,e.serverCache.getNode().getImmediateChild(T),M);g=oA(n,g,new _n(T),W,i,o,l,f)}}),v.children.inorderTraversal((T,M)=>{const R=!e.serverCache.isCompleteForChild(T)&&null===M.value;if(!E.hasChild(T)&&!R){const Q=d9(0,e.serverCache.getNode().getImmediateChild(T),M);g=oA(n,g,new _n(T),Q,i,o,l,f)}}),g}function wte(n,e){const t=bg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!zt(e)&&!t.getImmediateChild(Ht(e)).isEmpty())?t.getChild(e):null}function p9(n,e,t,r){e.type===Pc.MERGE&&null!==e.source.queryId&&((0,z.hu)(bg(n.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(nA(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function hte(n,e,t,r,i){const o=new cte;let l,f;if(t.type===Pc.OVERWRITE){const v=t;v.source.fromUser?l=pF(n,e,v.path,v.snap,r,i,o):((0,z.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!zt(v.path),l=oA(n,e,v.path,v.snap,r,i,f,o))}else if(t.type===Pc.MERGE){const v=t;v.source.fromUser?l=function pte(n,e,t,r,i,o,l){let f=e;return r.foreach((g,v)=>{const E=rr(t,g);u9(e,Ht(E))&&(f=pF(n,f,E,v,i,o,l))}),r.foreach((g,v)=>{const E=rr(t,g);u9(e,Ht(E))||(f=pF(n,f,E,v,i,o,l))}),f}(n,e,v.path,v.children,r,i,o):((0,z.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),l=gF(n,e,v.path,v.children,r,i,f,o))}else if(t.type===Pc.ACK_USER_WRITE){const v=t;l=v.revert?function _te(n,e,t,r,i,o){let l;if(null!=sA(r,t))return e;{const f=new fF(r,e,i),g=e.eventCache.getNode();let v;if(zt(t)||".priority"===Ht(t)){let E;if(e.serverCache.isFullyInitialized())E=iA(r,bg(e));else{const T=e.serverCache.getNode();(0,z.hu)(T instanceof Ot,"serverChildren would be complete if leaf node"),E=dF(r,T)}v=n.filter.updateFullNode(g,E,o)}else{const E=Ht(t);let T=hF(r,E,e.serverCache);null==T&&e.serverCache.isCompleteForChild(E)&&(T=g.getImmediateChild(E)),v=null!=T?n.filter.updateChild(g,E,T,xn(t),f,o):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(g,E,Ot.EMPTY_NODE,xn(t),f,o):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=iA(r,bg(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,o)))}return l=e.serverCache.isFullyInitialized()||null!=sA(r,ln()),eb(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,o):function gte(n,e,t,r,i,o,l){if(null!=sA(i,t))return e;const f=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(zt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return oA(n,e,t,g.getNode().getChild(t),i,o,f,l);if(zt(t)){let v=new $n(null);return g.getNode().forEachChild(xc,(E,T)=>{v=v.set(new _n(E),T)}),gF(n,e,t,v,i,o,f,l)}return e}{let v=new $n(null);return r.foreach((E,T)=>{const M=rr(t,E);g.isCompleteForPath(M)&&(v=v.set(E,g.getNode().getChild(M)))}),gF(n,e,t,v,i,o,f,l)}}(n,e,v.path,v.affectedTree,r,i,o)}else{if(t.type!==Pc.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+t.type);l=function mte(n,e,t,r,i){const o=e.serverCache;return l9(n,XV(e,o.getNode(),o.isFullyInitialized()||zt(t),o.isFiltered()),t,r,c9,i)}(n,e,t.path,r,o)}const g=o.getChanges();return function fte(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=nA(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(function KV(n){return{type:"value",snapshotNode:n}}(nA(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function dte(n,e){(0,z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,z.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,function g9(n,e,t,r){return function zee(n,e,t,r){const i=[],o=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function xee(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),XE(n,i,"child_removed",e,r,t),XE(n,i,"child_added",e,r,t),XE(n,i,"child_moved",o,r,t),XE(n,i,"child_changed",e,r,t),XE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,o.changes,o.viewCache.eventCache.getNode(),null)}let aA,lA;function mF(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,z.hu)(null!=o,"SyncTree gave us an op for an invalid query."),p9(o,e,t,r)}{let o=[];for(const l of n.views.values())o=o.concat(p9(l,e,t,r));return o}}function lh(n,e){let t=null;for(const r of n.views.values())t=t||wte(r,e);return t}class w9{constructor(e){this.listenProvider_=e,this.syncPointTree_=new $n(null),this.pendingWriteTree_=function ote(){return{visibleWrites:Na.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function _F(n,e,t,r,i){return function Zee(n,e,t,r,i){(0,z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=tb(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?vv(n,new Eg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function dh(n,e,t=!1){const r=function Yee(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Qee(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&Jee(f,r.path)?i=!1:na(r.path,f.path)&&(o=!0)),l--}return!!i&&(o?(function Xee(n){n.visibleWrites=r9(n.allWrites,ete,ln()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=e9(n.visibleWrites,r.path):Ti(r.children,g=>{n.visibleWrites=e9(n.visibleWrites,rr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let o=new $n(null);return null!=r.snap?o=o.set(ln(),!0):Ti(r.children,l=>{o=o.set(new _n(l),!0)}),vv(n,new eA(r.path,o,t))}return[]}function nb(n,e,t){return vv(n,new Eg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function dA(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,f)=>{const v=lh(f,_s(l,e));if(v)return v});return i9(i,e,o,t,!0)}function vv(n,e){return E9(e,n.syncPointTree_,null,rA(n.pendingWriteTree_,ln()))}function E9(n,e,t,r){if(zt(n.path))return b9(n,e,t,r);{const i=e.get(ln());null==t&&null!=i&&(t=lh(i,ln()));let o=[];const l=Ht(n.path),f=n.operationForChild(l),g=e.children.get(l);if(g&&f){const v=t?t.getImmediateChild(l):null,E=o9(r,l);o=o.concat(E9(f,g,v,E))}return i&&(o=o.concat(mF(i,n,r,t))),o}}function b9(n,e,t,r){const i=e.get(ln());null==t&&null!=i&&(t=lh(i,ln()));let o=[];return e.children.inorderTraversal((l,f)=>{const g=t?t.getImmediateChild(l):null,v=o9(r,l),E=n.operationForChild(l);E&&(o=o.concat(b9(E,f,g,v)))}),i&&(o=o.concat(mF(i,n,r,t))),o}function vF(n,e){return n.tagToQueryMap.get(e)}function CF(n){const e=n.indexOf("$");return(0,z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new _n(n.substr(0,e))}}function wF(n,e,t){const r=n.syncPointTree_.get(e);return(0,z.hu)(r,"Missing sync point for query tag that we're tracking"),mF(r,t,rA(n.pendingWriteTree_,e),null)}class IF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new IF(t)}node(){return this.node_}}class EF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=rr(this.path_,e);return new EF(this.syncTree_,t)}node(){return dA(this.syncTree_,this.path_)}}const $te=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},D9=function(n,e,t){return n&&"object"==typeof n?((0,z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Hte(n[".sv"],e,t):"object"==typeof n[".sv"]?zte(n[".sv"],e):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Hte=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,z.hu)(!1,"Unexpected server value: "+n)},zte=function(n,e,t){n.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,z.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},S9=function(n,e,t,r){return TF(e,new EF(t,n),r)},bF=function(n,e,t){return TF(n,new IF(e),t)};function TF(n,e,t){const r=n.getPriority().val(),i=D9(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,f=D9(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new fv(f,hr(i)):n}{const l=n;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new fv(i))),l.forEachChild(jn,(f,g)=>{const v=TF(g,e.getImmediateChild(f),t);v!==g&&(o=o.updateImmediateChild(f,v))}),o}}class DF{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function fA(n,e){let t=e instanceof _n?e:new _n(e),r=n,i=Ht(t);for(;null!==i;){const o=(0,z.DV)(r.node.children,i)||{children:{},childCount:0};r=new DF(i,r,o),t=xn(t),i=Ht(t)}return r}function Dg(n){return n.node.value}function SF(n,e){n.node.value=e,MF(n)}function M9(n){return n.node.childCount>0}function pA(n,e){Ti(n.node.children,(t,r)=>{e(new DF(t,n,r))})}function A9(n,e,t,r){t&&!r&&e(n),pA(n,i=>{A9(i,e,!0,r)}),t&&r&&e(n)}function sb(n){return new _n(null===n.parent?n.name:sb(n.parent)+"/"+n.name)}function MF(n){null!==n.parent&&function qte(n,e,t){const r=function Gte(n){return void 0===Dg(n)&&!M9(n)}(t),i=(0,z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,MF(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,MF(n))}(n.parent,n.name,n)}const Zte=/[\[\].#$\/\u0000-\u001F\u007F]/,Kte=/[\[\].#$\u0000-\u001F\u007F]/,AF=10485760,gA=function(n){return"string"==typeof n&&0!==n.length&&!Zte.test(n)},ab=function(n,e,t){const r=t instanceof _n?new hee(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+wg(r));if("function"==typeof e)throw new Error(n+"contains a function "+wg(r)+" with contents = "+e.toString());if(HM(e))throw new Error(n+"contains "+e.toString()+" "+wg(r));if("string"==typeof e&&e.length>AF/3&&(0,z.ug)(e)>AF)throw new Error(n+"contains a string greater than "+AF+" utf8 bytes "+wg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Ti(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!gA(l)))throw new Error(n+" contains an invalid key ("+l+") "+wg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function fee(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,z.ug)(e),VV(n)})(r,l),ab(n,f,r),function pee(n){const e=n.parts_.pop();n.byteLength_-=(0,z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+wg(r)+" in addition to actual children.")}},O9=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!gA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!Kte.test(n)}(n)}(t))throw new Error((0,z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Xte{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vo(n,e,t){(function mA(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!G2(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function R9(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(ene(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>na(r,e)||na(e,r))}function ene(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();vg&&bi("event: "+t.toString()),dv(r)}}}const tne=25;class nne{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xte,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=XM(),this.transactionQueueTree_=new DF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function F9(n){const t=n.infoData_.getNode(new _n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function lb(n){return $te({timestamp:F9(n)})}function L9(n,e,t,r,i){n.dataUpdateCount++;const o=new _n(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,z.UI)(t,v=>hr(v));l=function Fte(n,e,t,r){const i=vF(n,r);if(i){const o=CF(i),l=o.path,f=o.queryId,g=_s(l,e),v=$n.fromObject(t);return wF(n,l,new _v(oF(f),g,v))}return[]}(n.serverSyncTree_,o,g,i)}else{const g=hr(t);l=function I9(n,e,t,r){const i=vF(n,r);if(null!=i){const o=CF(i),l=o.path,f=o.queryId,g=_s(l,e);return wF(n,l,new Eg(oF(f),g,t))}return[]}(n.serverSyncTree_,o,g,i)}else if(r){const g=(0,z.UI)(t,v=>hr(v));l=function kte(n,e,t){const r=$n.fromObject(t);return vv(n,new _v({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,g)}else{const g=hr(t);l=nb(n.serverSyncTree_,o,g)}let f=o;l.length>0&&(f=wv(n,o)),vo(n.eventQueue_,f,l)}function U9(n,e){OF(n,"connected",e),!1===e&&function ane(n){Cv(n,"onDisconnectEvents");const e=lb(n),t=XM();rF(n.onDisconnect_,ln(),(i,o)=>{const l=S9(i,o,n.serverSyncTree_,e);mv(t,i,l)});let r=[];rF(t,ln(),(i,o)=>{r=r.concat(nb(n.serverSyncTree_,i,o));const l=function FF(n,e){const t=sb(j9(n,e)),r=fA(n.transactionQueueTree_,e);return function Wte(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{LF(n,i)}),LF(n,r),A9(r,i=>{LF(n,i)}),t}(n,i);wv(n,l)}),n.onDisconnect_=XM(),vo(n.eventQueue_,ln(),r)}(n)}function OF(n,e,t){const r=new _n("/.info/"+e),i=hr(t);n.infoData_.updateSnapshot(r,i);const o=nb(n.infoSyncTree_,r,i);vo(n.eventQueue_,r,o)}function _A(n){return n.nextWriteId_++}function Cv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),bi(t,...e)}function NF(n,e,t){return dA(n.serverSyncTree_,e,t)||Ot.EMPTY_NODE}function yA(n,e=n.transactionQueueTree_){if(e||vA(n,e),Dg(e)){const t=$9(n,e);(0,z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function pne(n,e,t){const r=t.map(v=>v.currentWriteId),i=NF(n,e,r);let o=i;const l=i.hash();for(let v=0;v<t.length;v++){const E=t[v];(0,z.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=_s(e,E.path);o=o.updateChild(T,E.currentOutputSnapshotRaw)}const f=o.val(!0),g=e;n.server_.put(g.toString(),f,v=>{Cv(n,"transaction put response",{path:g.toString(),status:v});let E=[];if("ok"===v){const T=[];for(let M=0;M<t.length;M++)t[M].status=2,E=E.concat(dh(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&T.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();vA(n,fA(n.transactionQueueTree_,e)),yA(n,n.transactionQueueTree_),vo(n.eventQueue_,e,E);for(let M=0;M<T.length;M++)dv(T[M])}else{if("datastale"===v)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{rs("transaction at "+g.toString()+" failed: "+v);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=v}wv(n,e)}},l)}(n,sb(e),t)}else M9(e)&&pA(e,t=>{yA(n,t)})}function wv(n,e){const t=j9(n,e),r=sb(t);return function gne(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const g=e[f],v=_s(t,g.path);let T,E=!1;if((0,z.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)E=!0,T=g.abortReason,i=i.concat(dh(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=tne)E=!0,T="maxretry",i=i.concat(dh(n.serverSyncTree_,g.currentWriteId,!0));else{const M=NF(n,g.path,l);g.currentInputSnapshot=M;const R=e[f].update(M.val());if(void 0!==R){ab("transaction failed: Data returned ",R,g.path);let W=hr(R);"object"==typeof R&&null!=R&&(0,z.r3)(R,".priority")||(W=W.updatePriority(M.getPriority()));const J=g.currentWriteId,be=lb(n),ze=bF(W,M,be);g.currentOutputSnapshotRaw=W,g.currentOutputSnapshotResolved=ze,g.currentWriteId=_A(n),l.splice(l.indexOf(J),1),i=i.concat(_F(n.serverSyncTree_,g.path,ze,g.currentWriteId,g.applyLocally)),i=i.concat(dh(n.serverSyncTree_,J,!0))}else E=!0,T="nodata",i=i.concat(dh(n.serverSyncTree_,g.currentWriteId,!0))}vo(n.eventQueue_,t,i),i=[],E&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===T?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(T),!1,null)))}vA(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)dv(r[f]);yA(n,n.transactionQueueTree_)}(n,$9(n,t),r),r}function j9(n,e){let t,r=n.transactionQueueTree_;for(t=Ht(e);null!==t&&void 0===Dg(r);)r=fA(r,t),t=Ht(e=xn(e));return r}function $9(n,e){const t=[];return H9(n,e,t),t.sort((r,i)=>r.order-i.order),t}function H9(n,e,t){const r=Dg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);pA(e,i=>{H9(n,i,t)})}function vA(n,e){const t=Dg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,SF(e,t.length>0?t:void 0)}pA(e,r=>{vA(n,r)})}function LF(n,e){const t=Dg(e);if(t){const r=[];let i=[],o=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,z.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):((0,z.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(dh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?SF(e,void 0):t.length=o+1,vo(n.eventQueue_,sb(e),i);for(let l=0;l<r.length;l++)dv(r[l])}}const UF=function(n,e){const t=yne(n),r=t.namespace;return"firebase.com"===t.domain&&Ac(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ac("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new U2(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new _n(t.pathString)}},yne=function(n){let e="",t="",r="",i="",o="",l=!0,f="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let E=n.indexOf("/");-1===E&&(E=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(E,T)),E<T&&(i=function mne(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(E,T)));const M=function _ne(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):rs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));v=e.indexOf(":"),v>=0?(l="https"===f||"wss"===f,g=parseInt(e.substring(v+1),10)):v=e.length;const R=e.slice(0,v);if("localhost"===R.toLowerCase())t="localhost";else if(R.split(".").length<=2)t=R;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),o=r}"ns"in M&&(o=M.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:o}};class Co{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return zt(this._path)?null:z2(this._path)}get ref(){return new Fa(this._repo,this._path)}get _queryIdentifier(){const e=QV(this._queryParams),t=F2(e);return"{}"===t?"default":t}get _queryObject(){return QV(this._queryParams)}isEqual(e){if(!((e=(0,z.m9)(e))instanceof Co))return!1;const t=this._repo===e._repo,r=G2(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function uee(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Fa extends Co{constructor(e,t){super(e,t,new X2,!1)}get parent(){const e=BV(this._path);return null===e?null:new Fa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function bte(n){(0,z.hu)(!aA,"__referenceConstructor has already been defined"),aA=n})(Fa),function Ate(n){(0,z.hu)(!lA,"__referenceConstructor has already been defined"),lA=n}(Fa);const VF={};class Une{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function rne(n,e,t){if(n.stats_=j2(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new JM(n.repoInfo_,(r,i,o,l)=>{L9(n,r,i,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>U9(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ig(n.repoInfo_,e,(r,i,o,l)=>{L9(n,r,i,o,l)},r=>{U9(n,r)},r=>{!function ine(n,e){Ti(e,(t,r)=>{OF(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function $X(n,e){const t=n.toString();return V2[t]||(V2[t]=e()),V2[t]}(n.repoInfo_,()=>new $ee(n.stats_,n.server_)),n.infoData_=new Lee,n.infoSyncTree_=new w9({startListening:(r,i,o,l)=>{let f=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(f=nb(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),OF(n,"connected",!1),n.serverSyncTree_=new w9({startListening:(r,i,o,l)=>(n.server_.listen(r,o,i,(f,g)=>{const v=l(f,g);vo(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fa(this._repo,ln())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Nne(n,e){const t=VF[e];(!t||t[n.key]!==n)&&Ac(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function V9(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ac("Cannot call "+e+" on a deleted database.")}}function Bne(n=(0,Dn.getApp)(),e){const t=(0,Dn._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,z.P0)("database");r&&function Vne(n,e,t,r={}){(n=(0,z.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ac("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ac('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new zE(zE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,z.Sg)(r.mockUserToken,n.app.options.projectId);o=new zE(l)}!function kne(n,e,t,r){n.repoInfo_=new U2(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(t,...r)}return t}Ig.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ig.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function jne(n){(function TX(n){k2=n})(Dn.SDK_VERSION),(0,Dn._registerComponent)(new yr.wA("database",(e,{instanceIdentifier:t})=>function Rne(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Ac("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bi("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,l=UF(o,i),f=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,o=`http://${v}?ns=${f.namespace}`,l=UF(o,i),f=l.repoInfo):g=!l.repoInfo.secure;const E=i&&g?new zE(zE.OWNER):new BX(n.name,n.options,e);O9("Invalid Firebase Database URL",l),zt(l.path)||Ac("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function Fne(n,e,t,r){let i=VF[e.name];i||(i={},VF[e.name]=i);let o=i[n.toURLString()];return o&&Ac("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new nne(n,!1,t,r),i[n.toURLString()]=o,o}(f,n,E,new UX(n.name,t));return new Une(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Dn.registerVersion)(tV,"0.14.4",n),(0,Dn.registerVersion)(tV,"0.14.4","esm2017")}();class jF{constructor(e){return e}}const J9="database",$F=new u.OlP("angularfire2.database-instances");function Wne(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new jF(r)}}const qne={provide:class zne{constructor(){return ks(J9)}},deps:[[new u.FiY,$F]]},Zne={provide:jF,useFactory:function Gne(n,e){const t=Ol(J9,n,e);return t&&new jF(t)},deps:[[new u.FiY,$F],nu]};let Kne=(()=>{class n{constructor(){(0,Dn.registerVersion)("angularfire",Pl.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Zne,qne]}),n})();function Yne(n,...e){return{ngModule:Kne,providers:[{provide:$F,useFactory:Wne(n),multi:!0,deps:[u.R0b,u.zs3,kl,Jy,[new u.FiY,$M],[new u.FiY,ag],...e]}]}}const Qne=Ed(Bne,!0);class HF{constructor(e){return e}}const X9="messaging",zF=new u.OlP("angularfire2.messaging-instances");function ere(n){return(e,t)=>{if(!cp.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new HF(r)}}const tre={provide:class Jne{constructor(){return ks(X9)}},deps:[[new u.FiY,zF]]},nre={provide:HF,useFactory:function Xne(n,e){if(!cp.sync())return null;const t=Ol(X9,n,e);return t&&new HF(t)},deps:[[new u.FiY,zF],nu]};let rre=(()=>{class n{constructor(){(0,Dn.registerVersion)("angularfire",Pl.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[nre,tre,{provide:u.ip1,useValue:cp.async,multi:!0}]}),n})();function ire(n,...e){return{ngModule:rre,providers:[{provide:zF,useFactory:ere(n),multi:!0,deps:[u.R0b,u.zs3,kl,Jy,...e]}]}}const sre=Ed(xT,!0),ej="firebasestorage.googleapis.com";class fr extends z.ZR{constructor(e,t,r=0){super(GF(e),`Firebase Storage: ${t} (${GF(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return GF(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ir=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(ir||{});function GF(n){return"storage/"+n}function qF(n){return new fr(ir.INVALID_ARGUMENT,n)}function sj(){return new fr(ir.APP_DELETED,"The Firebase app was deleted.")}class ys{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ys.makeFromUrl(e,t)}catch{return new ys(e,"")}if(""===r.path)return r;throw function gre(n){return new fr(ir.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Ye){Ye.path_=decodeURIComponent(Ye.path)}const T=t.replace(/[.]/g,"\\."),Re=[{regex:f,indices:{bucket:1,path:3},postModify:function o(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===ej?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Ye=0;Ye<Re.length;Ye++){const gt=Re[Ye],At=gt.regex.exec(e);if(At){let Vs=At[gt.indices.path];Vs||(Vs=""),r=new ys(At[gt.indices.bucket],Vs),gt.postModify(r);break}}if(null==r)throw function pre(n){return new fr(ir.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class wre{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function KF(n,e,t,r){if(r<e)throw qF(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw qF(`Invalid value for '${n}'. Expected ${t} or less.`)}var Ev=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Ev||{});class Sre{constructor(e,t,r,i,o,l,f,g,v,E,T,M=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=E,this.connectionFactory_=T,this.retry=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,W)=>{this.resolve_=R,this.reject_=W,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());!function bre(n){return void 0!==n}(g)?o():o(g)}catch(g){l(g)}else if(null!==f){const g=function WF(){return new fr(ir.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();g.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,g):g)}else l(i.canceled?this.appDelete_?sj():function rj(){return new fr(ir.CANCELED,"User canceled the upload/download.")}():function nj(){return new fr(ir.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new bA(!1,null,!0)):this.backoffId_=function Ire(n,e,t){let r=1,i=null,o=null,l=!1,f=0;function g(){return 2===f}let v=!1;function E(...J){v||(v=!0,e.apply(null,J))}function T(J){i=setTimeout(()=>{i=null,n(R,g())},J)}function M(){o&&clearTimeout(o)}function R(J,...be){if(v)return void M();if(J)return M(),void E.call(null,J,...be);if(g()||l)return M(),void E.call(null,J,...be);let Re;r<64&&(r*=2),1===f?(f=2,Re=0):Re=1e3*(r+Math.random()),T(Re)}let W=!1;function Q(J){W||(W=!0,M(),!v&&(null!==i?(J||(f=2),clearTimeout(i),T(0)):J||(f=1)))}return T(0),o=setTimeout(()=>{l=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new bA(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const f=o.getErrorCode()===Ev.NO_ERROR,g=o.getStatus();if(!f||function cj(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}(g,this.additionalRetryCodes_)&&this.retry){const E=o.getErrorCode()===Ev.ABORT;return void r(!1,new bA(!1,null,E))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new bA(v,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Ere(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class bA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Mg{constructor(e,t){this._service=e,this._location=t instanceof ys?t:ys.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Mg(e,t)}get root(){const e=new ys(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function fj(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function jre(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ys(this._location.bucket,e);return new Mg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function Cre(n){return new fr(ir.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Mj(n,e){const t=e?.storageBucket;return null==t?null:ys.makeFromBucketSpec(t,n)}class nL{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=ej,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ys.makeFromBucketSpec(i,this._host):Mj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ys.makeFromBucketSpec(this._url,e):Mj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,U.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,U.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mg(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new wre(sj());{const l=function Ore(n,e,t,r,i,o,l=!0){const f=function aj(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),g=n.url+f,v=Object.assign({},n.headers);return function xre(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function Mre(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function Are(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,o),function Pre(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new Sre(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,U.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const Aj="@firebase/storage",Pj="storage";function Die(n=Pf(),e){const r=yl(n=(0,z.m9)(n),Pj).getImmediate({identifier:e}),i=(0,z.P0)("storage");return i&&function Sie(n,e,t,r={}){!function Tie(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,z.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function Mie(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new nL(t,r,i,e,"10.5.0")}!function Aie(){Yi(new yr.wA(Pj,Mie,"PUBLIC").setMultipleInstances(!0)),Ri(Aj,"0.11.2",""),Ri(Aj,"0.11.2","esm2017")}();class rL{constructor(e){return e}}const Oj="storage",iL=new u.OlP("angularfire2.storage-instances");function Oie(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new rL(r)}}const kie={provide:class xie{constructor(){return ks(Oj)}},deps:[[new u.FiY,iL]]},Rie={provide:rL,useFactory:function Pie(n,e){const t=Ol(Oj,n,e);return t&&new rL(t)},deps:[[new u.FiY,iL],nu]};let Nie=(()=>{class n{constructor(){(0,Dn.registerVersion)("angularfire",Pl.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Rie,kie]}),n})();function Fie(n,...e){return{ngModule:Nie,providers:[{provide:iL,useFactory:Oie(n),multi:!0,deps:[u.R0b,u.zs3,kl,Jy,[new u.FiY,$M],[new u.FiY,ag],...e]}]}}const Lie=Ed(Die,!0),sL={firebase:{projectId:"instagram-clone-gilshaashua",appId:"1:827870472031:web:e39968f5559a9f2832b8ea",databaseURL:"https://instagram-clone-gilshaashua-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"instagram-clone-gilshaashua.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBzQGVn0KY8RifDoGX3L7W_oxejQG0tHhs",authDomain:"instagram-clone-gilshaashua.firebaseapp.com",messagingSenderId:"827870472031",measurementId:"G-FPQPXYYP3N"}};Ri("firebase","10.5.0","app"),M1(sL.firebase);let Vie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=u.oAB({type:n,bootstrap:[kJ]});static#n=this.\u0275inj=u.cJS({providers:[{provide:Qi.Dh,useValue:sL.firebase}],imports:[Zc,rJ,iX,WY,qY,dH(()=>hH(sL.firebase)),gX(()=>mX()),EX(()=>bX()),Fie(()=>Lie()),Yne(()=>Qne()),ire(()=>sre())]})}return n})();Kg().bootstrapModule(Vie).catch(n=>console.error(n))},5619:(st,Ee,F)=>{F.d(Ee,{X:()=>V});var u=F(8645);class V extends u.x{constructor(ne){super(),this._value=ne}get value(){return this.getValue()}_subscribe(ne){const ge=super._subscribe(ne);return!ge.closed&&ne.next(this._value),ge}getValue(){const{hasError:ne,thrownError:ge,_value:Ie}=this;if(ne)throw ge;return this._throwIfClosed(),Ie}next(ne){super.next(this._value=ne)}}},5592:(st,Ee,F)=>{F.d(Ee,{y:()=>Fe});var u=F(305),V=F(7394),L=F(4850),ne=F(8407),ge=F(2653),Ie=F(4674),Pe=F(1441);let Fe=(()=>{class X{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const Je=new X;return Je.source=this,Je.operator=xe,Je}subscribe(xe,Je,Ce){const Se=function G(X){return X&&X instanceof u.Lv||function B(X){return X&&(0,Ie.m)(X.next)&&(0,Ie.m)(X.error)&&(0,Ie.m)(X.complete)}(X)&&(0,V.Nn)(X)}(xe)?xe:new u.Hp(xe,Je,Ce);return(0,Pe.x)(()=>{const{operator:Te,source:tt}=this;Se.add(Te?Te.call(Se,tt):tt?this._subscribe(Se):this._trySubscribe(Se))}),Se}_trySubscribe(xe){try{return this._subscribe(xe)}catch(Je){xe.error(Je)}}forEach(xe,Je){return new(Je=De(Je))((Ce,Se)=>{const Te=new u.Hp({next:tt=>{try{xe(tt)}catch(ot){Se(ot),Te.unsubscribe()}},error:Se,complete:Ce});this.subscribe(Te)})}_subscribe(xe){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(xe)}[L.L](){return this}pipe(...xe){return(0,ne.U)(xe)(this)}toPromise(xe){return new(xe=De(xe))((Je,Ce)=>{let Se;this.subscribe(Te=>Se=Te,Te=>Ce(Te),()=>Je(Se))})}}return X.create=Oe=>new X(Oe),X})();function De(X){var Oe;return null!==(Oe=X??ge.config.Promise)&&void 0!==Oe?Oe:Promise}},8645:(st,Ee,F)=>{F.d(Ee,{x:()=>Pe});var u=F(5592),V=F(7394);const ne=(0,F(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=F(9039),Ie=F(1441);let Pe=(()=>{class De extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new Fe(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new ne}next(G){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(G)}})}error(G){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:Oe,observers:xe}=this;return X||Oe?V.Lc:(this.currentObservers=null,xe.push(G),new V.w0(()=>{this.currentObservers=null,(0,ge.P)(xe,G)}))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:Oe,isStopped:xe}=this;X?G.error(Oe):xe&&G.complete()}asObservable(){const G=new u.y;return G.source=this,G}}return De.create=(B,G)=>new Fe(B,G),De})();class Fe extends Pe{constructor(B,G){super(),this.destination=B,this.source=G}next(B){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,B)}error(B){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,B)}complete(){var B,G;null===(G=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===G||G.call(B)}_subscribe(B){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(B))&&void 0!==X?X:V.Lc}}},305:(st,Ee,F)=>{F.d(Ee,{Hp:()=>Ce,Lv:()=>X});var u=F(4674),V=F(7394),L=F(2653),ne=F(3894),ge=F(2420);const Ie=De("C",void 0,void 0);function De(ee,de,re){return{kind:ee,value:de,error:re}}var B=F(7599),G=F(1441);class X extends V.w0{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,V.Nn)(de)&&de.add(this)):this.destination=ot}static create(de,re,he){return new Ce(de,re,he)}next(de){this.isStopped?tt(function Fe(ee){return De("N",ee,void 0)}(de),this):this._next(de)}error(de){this.isStopped?tt(function Pe(ee){return De("E",void 0,ee)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?tt(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function xe(ee,de){return Oe.call(ee,de)}class Je{constructor(de){this.partialObserver=de}next(de){const{partialObserver:re}=this;if(re.next)try{re.next(de)}catch(he){Se(he)}}error(de){const{partialObserver:re}=this;if(re.error)try{re.error(de)}catch(he){Se(he)}else Se(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(re){Se(re)}}}class Ce extends X{constructor(de,re,he){let Ne;if(super(),(0,u.m)(de)||!de)Ne={next:de??void 0,error:re??void 0,complete:he??void 0};else{let j;this&&L.config.useDeprecatedNextContext?(j=Object.create(de),j.unsubscribe=()=>this.unsubscribe(),Ne={next:de.next&&xe(de.next,j),error:de.error&&xe(de.error,j),complete:de.complete&&xe(de.complete,j)}):Ne=de}this.destination=new Je(Ne)}}function Se(ee){L.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(ee):(0,ne.h)(ee)}function tt(ee,de){const{onStoppedNotification:re}=L.config;re&&B.z.setTimeout(()=>re(ee,de))}const ot={closed:!0,next:ge.Z,error:function Te(ee){throw ee},complete:ge.Z}},7394:(st,Ee,F)=>{F.d(Ee,{Lc:()=>Ie,w0:()=>ge,Nn:()=>Pe});var u=F(4674);const L=(0,F(2306).d)(De=>function(G){De(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,Oe)=>`${Oe+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ne=F(9039);class ge{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const xe of G)xe.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,u.m)(X))try{X()}catch(xe){B=xe instanceof L?xe.errors:[xe]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const xe of Oe)try{Fe(xe)}catch(Je){B=B??[],Je instanceof L?B=[...B,...Je.errors]:B.push(Je)}}if(B)throw new L(B)}}add(B){var G;if(B&&B!==this)if(this.closed)Fe(B);else{if(B instanceof ge){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(B)}}_hasParent(B){const{_parentage:G}=this;return G===B||Array.isArray(G)&&G.includes(B)}_addParent(B){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(B),G):G?[G,B]:B}_removeParent(B){const{_parentage:G}=this;G===B?this._parentage=null:Array.isArray(G)&&(0,ne.P)(G,B)}remove(B){const{_finalizers:G}=this;G&&(0,ne.P)(G,B),B instanceof ge&&B._removeParent(this)}}ge.EMPTY=(()=>{const De=new ge;return De.closed=!0,De})();const Ie=ge.EMPTY;function Pe(De){return De instanceof ge||De&&"closed"in De&&(0,u.m)(De.remove)&&(0,u.m)(De.add)&&(0,u.m)(De.unsubscribe)}function Fe(De){(0,u.m)(De)?De():De.unsubscribe()}},2653:(st,Ee,F)=>{F.d(Ee,{config:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(st,Ee,F)=>{F.d(Ee,{E:()=>V});const V=new(F(5592).y)(ge=>ge.complete())},2459:(st,Ee,F)=>{F.d(Ee,{D:()=>de});var u=F(4829),V=F(3093),L=F(5137),Ie=F(5592),Fe=F(4971),De=F(4674),B=F(7103);function X(re,he){if(!re)throw new Error("Iterable cannot be null");return new Ie.y(Ne=>{(0,B.f)(Ne,he,()=>{const j=re[Symbol.asyncIterator]();(0,B.f)(Ne,he,()=>{j.next().then(we=>{we.done?Ne.complete():Ne.next(we.value)})},0,!0)})})}var Oe=F(8382),xe=F(4026),Je=F(4266),Ce=F(3664),Se=F(5726),Te=F(9853),tt=F(541);function de(re,he){return he?function ee(re,he){if(null!=re){if((0,Oe.c)(re))return function ne(re,he){return(0,u.Xf)(re).pipe((0,L.R)(he),(0,V.Q)(he))}(re,he);if((0,Je.z)(re))return function Pe(re,he){return new Ie.y(Ne=>{let j=0;return he.schedule(function(){j===re.length?Ne.complete():(Ne.next(re[j++]),Ne.closed||this.schedule())})})}(re,he);if((0,xe.t)(re))return function ge(re,he){return(0,u.Xf)(re).pipe((0,L.R)(he),(0,V.Q)(he))}(re,he);if((0,Se.D)(re))return X(re,he);if((0,Ce.T)(re))return function G(re,he){return new Ie.y(Ne=>{let j;return(0,B.f)(Ne,he,()=>{j=re[Fe.h](),(0,B.f)(Ne,he,()=>{let we,Ue;try{({value:we,done:Ue}=j.next())}catch(lt){return void Ne.error(lt)}Ue?Ne.complete():Ne.next(we)},0,!0)}),()=>(0,De.m)(j?.return)&&j.return()})}(re,he);if((0,tt.L)(re))return function ot(re,he){return X((0,tt.Q)(re),he)}(re,he)}throw(0,Te.z)(re)}(re,he):(0,u.Xf)(re)}},4829:(st,Ee,F)=>{F.d(Ee,{Xf:()=>Oe});var u=F(7582),V=F(4266),L=F(4026),ne=F(5592),ge=F(8382),Ie=F(5726),Pe=F(9853),Fe=F(3664),De=F(541),B=F(4674),G=F(3894),X=F(4850);function Oe(ee){if(ee instanceof ne.y)return ee;if(null!=ee){if((0,ge.c)(ee))return function xe(ee){return new ne.y(de=>{const re=ee[X.L]();if((0,B.m)(re.subscribe))return re.subscribe(de);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,V.z)(ee))return function Je(ee){return new ne.y(de=>{for(let re=0;re<ee.length&&!de.closed;re++)de.next(ee[re]);de.complete()})}(ee);if((0,L.t)(ee))return function Ce(ee){return new ne.y(de=>{ee.then(re=>{de.closed||(de.next(re),de.complete())},re=>de.error(re)).then(null,G.h)})}(ee);if((0,Ie.D)(ee))return Te(ee);if((0,Fe.T)(ee))return function Se(ee){return new ne.y(de=>{for(const re of ee)if(de.next(re),de.closed)return;de.complete()})}(ee);if((0,De.L)(ee))return function tt(ee){return Te((0,De.Q)(ee))}(ee)}throw(0,Pe.z)(ee)}function Te(ee){return new ne.y(de=>{(function ot(ee,de){var re,he,Ne,j;return(0,u.mG)(this,void 0,void 0,function*(){try{for(re=(0,u.KL)(ee);!(he=yield re.next()).done;)if(de.next(he.value),de.closed)return}catch(we){Ne={error:we}}finally{try{he&&!he.done&&(j=re.return)&&(yield j.call(re))}finally{if(Ne)throw Ne.error}}de.complete()})})(ee,de).catch(re=>de.error(re))})}},3019:(st,Ee,F)=>{F.d(Ee,{T:()=>Ie});var u=F(7537),V=F(4829),L=F(6232),ne=F(4564),ge=F(2459);function Ie(...Pe){const Fe=(0,ne.yG)(Pe),De=(0,ne._6)(Pe,1/0),B=Pe;return B.length?1===B.length?(0,V.Xf)(B[0]):(0,u.J)(De)((0,ge.D)(B,Fe)):L.E}},2096:(st,Ee,F)=>{F.d(Ee,{of:()=>L});var u=F(4564),V=F(2459);function L(...ne){const ge=(0,u.yG)(ne);return(0,V.D)(ne,ge)}},8251:(st,Ee,F)=>{F.d(Ee,{x:()=>V});var u=F(305);function V(ne,ge,Ie,Pe,Fe){return new L(ne,ge,Ie,Pe,Fe)}class L extends u.Lv{constructor(ge,Ie,Pe,Fe,De,B){super(ge),this.onFinalize=De,this.shouldUnsubscribe=B,this._next=Ie?function(G){try{Ie(G)}catch(X){ge.error(X)}}:super._next,this._error=Fe?function(G){try{Fe(G)}catch(X){ge.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(G){ge.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},3997:(st,Ee,F)=>{F.d(Ee,{x:()=>ne});var u=F(2737),V=F(9360),L=F(8251);function ne(Ie,Pe=u.y){return Ie=Ie??ge,(0,V.e)((Fe,De)=>{let B,G=!0;Fe.subscribe((0,L.x)(De,X=>{const Oe=Pe(X);(G||!Ie(B,Oe))&&(G=!1,B=Oe,De.next(X))}))})}function ge(Ie,Pe){return Ie===Pe}},7398:(st,Ee,F)=>{F.d(Ee,{U:()=>L});var u=F(9360),V=F(8251);function L(ne,ge){return(0,u.e)((Ie,Pe)=>{let Fe=0;Ie.subscribe((0,V.x)(Pe,De=>{Pe.next(ne.call(ge,De,Fe++))}))})}},7537:(st,Ee,F)=>{F.d(Ee,{J:()=>L});var u=F(1631),V=F(2737);function L(ne=1/0){return(0,u.z)(V.y,ne)}},1631:(st,Ee,F)=>{F.d(Ee,{z:()=>Fe});var u=F(7398),V=F(4829),L=F(9360),ne=F(7103),ge=F(8251),Pe=F(4674);function Fe(De,B,G=1/0){return(0,Pe.m)(B)?Fe((X,Oe)=>(0,u.U)((xe,Je)=>B(X,xe,Oe,Je))((0,V.Xf)(De(X,Oe))),G):("number"==typeof B&&(G=B),(0,L.e)((X,Oe)=>function Ie(De,B,G,X,Oe,xe,Je,Ce){const Se=[];let Te=0,tt=0,ot=!1;const ee=()=>{ot&&!Se.length&&!Te&&B.complete()},de=he=>Te<X?re(he):Se.push(he),re=he=>{xe&&B.next(he),Te++;let Ne=!1;(0,V.Xf)(G(he,tt++)).subscribe((0,ge.x)(B,j=>{Oe?.(j),xe?de(j):B.next(j)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(Te--;Se.length&&Te<X;){const j=Se.shift();Je?(0,ne.f)(B,Je,()=>re(j)):re(j)}ee()}catch(j){B.error(j)}}))};return De.subscribe((0,ge.x)(B,de,()=>{ot=!0,ee()})),()=>{Ce?.()}}(X,Oe,De,G)))}},3093:(st,Ee,F)=>{F.d(Ee,{Q:()=>ne});var u=F(7103),V=F(9360),L=F(8251);function ne(ge,Ie=0){return(0,V.e)((Pe,Fe)=>{Pe.subscribe((0,L.x)(Fe,De=>(0,u.f)(Fe,ge,()=>Fe.next(De),Ie),()=>(0,u.f)(Fe,ge,()=>Fe.complete(),Ie),De=>(0,u.f)(Fe,ge,()=>Fe.error(De),Ie)))})}},3020:(st,Ee,F)=>{F.d(Ee,{B:()=>ge});var u=F(4829),V=F(8645),L=F(305),ne=F(9360);function ge(Pe={}){const{connector:Fe=(()=>new V.x),resetOnError:De=!0,resetOnComplete:B=!0,resetOnRefCountZero:G=!0}=Pe;return X=>{let Oe,xe,Je,Ce=0,Se=!1,Te=!1;const tt=()=>{xe?.unsubscribe(),xe=void 0},ot=()=>{tt(),Oe=Je=void 0,Se=Te=!1},ee=()=>{const de=Oe;ot(),de?.unsubscribe()};return(0,ne.e)((de,re)=>{Ce++,!Te&&!Se&&tt();const he=Je=Je??Fe();re.add(()=>{Ce--,0===Ce&&!Te&&!Se&&(xe=Ie(ee,G))}),he.subscribe(re),!Oe&&Ce>0&&(Oe=new L.Hp({next:Ne=>he.next(Ne),error:Ne=>{Te=!0,tt(),xe=Ie(ot,De,Ne),he.error(Ne)},complete:()=>{Se=!0,tt(),xe=Ie(ot,B),he.complete()}}),(0,u.Xf)(de).subscribe(Oe))})(X)}}function Ie(Pe,Fe,...De){if(!0===Fe)return void Pe();if(!1===Fe)return;const B=new L.Hp({next:()=>{B.unsubscribe(),Pe()}});return(0,u.Xf)(Fe(...De)).subscribe(B)}},5137:(st,Ee,F)=>{F.d(Ee,{R:()=>V});var u=F(9360);function V(L,ne=0){return(0,u.e)((ge,Ie)=>{Ie.add(L.schedule(()=>ge.subscribe(Ie),ne))})}},4664:(st,Ee,F)=>{F.d(Ee,{w:()=>ne});var u=F(4829),V=F(9360),L=F(8251);function ne(ge,Ie){return(0,V.e)((Pe,Fe)=>{let De=null,B=0,G=!1;const X=()=>G&&!De&&Fe.complete();Pe.subscribe((0,L.x)(Fe,Oe=>{De?.unsubscribe();let xe=0;const Je=B++;(0,u.Xf)(ge(Oe,Je)).subscribe(De=(0,L.x)(Fe,Ce=>Fe.next(Ie?Ie(Oe,Ce,Je,xe++):Ce),()=>{De=null,X()}))},()=>{G=!0,X()}))})}},7599:(st,Ee,F)=>{F.d(Ee,{z:()=>u});const u={setTimeout(V,L,...ne){const{delegate:ge}=u;return ge?.setTimeout?ge.setTimeout(V,L,...ne):setTimeout(V,L,...ne)},clearTimeout(V){const{delegate:L}=u;return(L?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4971:(st,Ee,F)=>{F.d(Ee,{h:()=>V});const V=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(st,Ee,F)=>{F.d(Ee,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(st,Ee,F)=>{F.d(Ee,{_6:()=>Ie,jO:()=>ne,yG:()=>ge});var u=F(4674);function L(Pe){return Pe[Pe.length-1]}function ne(Pe){return(0,u.m)(L(Pe))?Pe.pop():void 0}function ge(Pe){return function V(Pe){return Pe&&(0,u.m)(Pe.schedule)}(L(Pe))?Pe.pop():void 0}function Ie(Pe,Fe){return"number"==typeof L(Pe)?Pe.pop():Fe}},9039:(st,Ee,F)=>{function u(V,L){if(V){const ne=V.indexOf(L);0<=ne&&V.splice(ne,1)}}F.d(Ee,{P:()=>u})},2306:(st,Ee,F)=>{function u(V){const ne=V(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}F.d(Ee,{d:()=>u})},1441:(st,Ee,F)=>{F.d(Ee,{O:()=>ne,x:()=>L});var u=F(2653);let V=null;function L(ge){if(u.config.useDeprecatedSynchronousErrorHandling){const Ie=!V;if(Ie&&(V={errorThrown:!1,error:null}),ge(),Ie){const{errorThrown:Pe,error:Fe}=V;if(V=null,Pe)throw Fe}}else ge()}function ne(ge){u.config.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ge)}},7103:(st,Ee,F)=>{function u(V,L,ne,ge=0,Ie=!1){const Pe=L.schedule(function(){ne(),Ie?V.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(V.add(Pe),!Ie)return Pe}F.d(Ee,{f:()=>u})},2737:(st,Ee,F)=>{function u(V){return V}F.d(Ee,{y:()=>u})},4266:(st,Ee,F)=>{F.d(Ee,{z:()=>u});const u=V=>V&&"number"==typeof V.length&&"function"!=typeof V},5726:(st,Ee,F)=>{F.d(Ee,{D:()=>V});var u=F(4674);function V(L){return Symbol.asyncIterator&&(0,u.m)(L?.[Symbol.asyncIterator])}},4674:(st,Ee,F)=>{function u(V){return"function"==typeof V}F.d(Ee,{m:()=>u})},8382:(st,Ee,F)=>{F.d(Ee,{c:()=>L});var u=F(4850),V=F(4674);function L(ne){return(0,V.m)(ne[u.L])}},3664:(st,Ee,F)=>{F.d(Ee,{T:()=>L});var u=F(4971),V=F(4674);function L(ne){return(0,V.m)(ne?.[u.h])}},4026:(st,Ee,F)=>{F.d(Ee,{t:()=>V});var u=F(4674);function V(L){return(0,u.m)(L?.then)}},541:(st,Ee,F)=>{F.d(Ee,{L:()=>ne,Q:()=>L});var u=F(7582),V=F(4674);function L(ge){return(0,u.FC)(this,arguments,function*(){const Pe=ge.getReader();try{for(;;){const{value:Fe,done:De}=yield(0,u.qq)(Pe.read());if(De)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(Fe)}}finally{Pe.releaseLock()}})}function ne(ge){return(0,V.m)(ge?.getReader)}},9360:(st,Ee,F)=>{F.d(Ee,{A:()=>V,e:()=>L});var u=F(4674);function V(ne){return(0,u.m)(ne?.lift)}function L(ne){return ge=>{if(V(ge))return ge.lift(function(Ie){try{return ne(Ie,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(st,Ee,F)=>{function u(){}F.d(Ee,{Z:()=>u})},8407:(st,Ee,F)=>{F.d(Ee,{U:()=>L,z:()=>V});var u=F(2737);function V(...ne){return L(ne)}function L(ne){return 0===ne.length?u.y:1===ne.length?ne[0]:function(Ie){return ne.reduce((Pe,Fe)=>Fe(Pe),Ie)}}},3894:(st,Ee,F)=>{F.d(Ee,{h:()=>L});var u=F(2653),V=F(7599);function L(ne){V.z.setTimeout(()=>{const{onUnhandledError:ge}=u.config;if(!ge)throw ne;ge(ne)})}},9853:(st,Ee,F)=>{function u(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ee,{z:()=>u})},5879:(st,Ee,F)=>{F.d(Ee,{$8M:()=>Uu,$WT:()=>ja,$Z:()=>z1,AFp:()=>ki,ALo:()=>yc,AaK:()=>X,AsE:()=>GT,CHM:()=>as,CRH:()=>iy,DdM:()=>Y_,Dn7:()=>bp,EJc:()=>Or,EpF:()=>ET,F4k:()=>bT,FYo:()=>Px,FiY:()=>oe,GfV:()=>sd,Gpc:()=>Je,HDt:()=>iS,JOm:()=>sf,KtG:()=>Gh,LFG:()=>Ve,LSH:()=>Ef,Lbi:()=>j0,Lck:()=>EO,MAs:()=>XC,MGl:()=>h_,MMx:()=>Md,MR2:()=>L0,NdJ:()=>ow,O4$:()=>Po,Ojb:()=>E1,OlP:()=>an,Oqu:()=>Os,P3R:()=>yx,PXZ:()=>$p,Q6J:()=>ew,QGY:()=>np,Qsj:()=>OL,R0b:()=>jr,RDi:()=>Xb,Rgc:()=>Ns,SBq:()=>vl,Sil:()=>zO,Suo:()=>dI,TTD:()=>Lh,TgZ:()=>c_,Tol:()=>__,VKq:()=>Zw,VuI:()=>fk,W1O:()=>Op,WLB:()=>Kw,X6Q:()=>ek,XFs:()=>dt,Xpm:()=>uu,Xq5:()=>aT,Xts:()=>td,Y36:()=>wl,YKP:()=>Fl,YNc:()=>o_,Yjl:()=>gu,Yz7:()=>ft,Z0I:()=>rn,ZZ4:()=>xa,_Bn:()=>wD,_UZ:()=>nw,_c5:()=>ak,_uU:()=>Ew,aQg:()=>Ty,c2e:()=>qe,cJS:()=>Pn,cg1:()=>wa,dDg:()=>vy,dqk:()=>Rt,eFA:()=>bI,eJc:()=>cy,ekj:()=>_w,eoX:()=>Ls,f3M:()=>Ke,g9A:()=>w1,h0i:()=>Nl,hGG:()=>ck,hij:()=>vd,iGM:()=>uI,ifc:()=>$s,ip1:()=>rt,jDz:()=>Ii,kL8:()=>mc,kcU:()=>wt,lG2:()=>pu,lcZ:()=>eI,lnq:()=>bw,lqb:()=>jo,lri:()=>yy,n5z:()=>um,oAB:()=>hu,oxw:()=>MT,q4F:()=>Vm,qFp:()=>ka,qLn:()=>lc,qOj:()=>Ca,qZA:()=>ep,rWj:()=>te,rg0:()=>Fh,s9C:()=>rp,sBO:()=>rk,s_b:()=>ty,soG:()=>ye,tb:()=>Cy,tp0:()=>He,uIk:()=>qf,vHH:()=>ee,vpe:()=>$o,wAp:()=>Hr,xp6:()=>uc,z2F:()=>Nd,zSh:()=>U,zs3:()=>co});var u=F(8645),V=F(7394),L=F(5592),ne=F(3019),ge=F(5619),Ie=F(2096),Pe=F(3020),Fe=F(4664),De=F(3997);function B(s){for(let a in s)if(s[a]===B)return a;throw Error("Could not find renamed property on target object.")}function G(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function X(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(X).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function Oe(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const xe=B({__forward_ref__:B});function Je(s){return s.__forward_ref__=Je,s.toString=function(){return X(this())},s}function Ce(s){return Se(s)?s():s}function Se(s){return"function"==typeof s&&s.hasOwnProperty(xe)&&s.__forward_ref__===Je}function Te(s){return s&&!!s.\u0275providers}const ot="https://g.co/ng/security#xss";class ee extends Error{constructor(a,c){super(function de(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,c)),this.code=a}}function re(s){return"string"==typeof s?s:null==s?"":String(s)}function Ue(s,a){throw new ee(-201,!1)}function Qe(s,a){null==s&&function Be(s,a,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function ft(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Pn(s){return{providers:s.providers||[],imports:s.imports||[]}}function wn(s){return zn(s,pr)||zn(s,Kr)}function rn(s){return null!==wn(s)}function zn(s,a){return s.hasOwnProperty(a)?s[a]:null}function Lr(s){return s&&(s.hasOwnProperty(Gn)||s.hasOwnProperty(Cs))?s[Gn]:null}const pr=B({\u0275prov:B}),Gn=B({\u0275inj:B}),Kr=B({ngInjectableDef:B}),Cs=B({ngInjectorDef:B});var dt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(dt||{});let mt;function sn(s){const a=mt;return mt=s,a}function di(s,a,c){const d=wn(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&dt.Optional?null:void 0!==a?a:void Ue(X(s))}const Rt=globalThis,it={},Nt="__NG_DI_FLAG__",Bt="ngTempTokenPath",H=/\n/gm,O="__source";let k;function K(s){const a=k;return k=s,a}function me(s,a=dt.Default){if(void 0===k)throw new ee(-203,!1);return null===k?di(s,void 0,a):k.get(s,a&dt.Optional?null:void 0,a)}function Ve(s,a=dt.Default){return(function Tt(){return mt}()||me)(Ce(s),a)}function Ke(s,a=dt.Default){return Ve(s,Qt(a))}function Qt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Ct(s){const a=[];for(let c=0;c<s.length;c++){const d=Ce(s[c]);if(Array.isArray(d)){if(0===d.length)throw new ee(900,!1);let h,p=dt.Default;for(let y=0;y<d.length;y++){const C=d[y],b=xt(C);"number"==typeof b?-1===b?h=C.token:p|=b:h=C}a.push(Ve(h,p))}else a.push(Ve(d))}return a}function hn(s,a){return s[Nt]=a,s.prototype[Nt]=a,s}function xt(s){return s[Nt]}function js(s){return{toString:s}.toString()}var Io=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(Io||{}),$s=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}($s||{});const Hi={},Kt=[],ra=B({\u0275cmp:B}),Ba=B({\u0275dir:B}),au=B({\u0275pipe:B}),cu=B({\u0275mod:B}),Hs=B({\u0275fac:B}),Va=B({__NG_ELEMENT_ID__:B}),lu=B({__NG_ENV_ID__:B});function ph(s,a,c){let d=s.length;for(;;){const h=s.indexOf(a,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=a.length;if(h+p===d||s.charCodeAt(h+p)<=32)return h}c=h+1}}function Eo(s,a,c){let d=0;for(;d<c.length;){const h=c[d];if("number"==typeof h){if(0!==h)break;d++;const p=c[d++],y=c[d++],C=c[d++];s.setAttribute(a,y,C,p)}else{const p=h,y=c[++d];Lc(p)?s.setProperty(a,p,y):s.setAttribute(a,p,y),d++}}return d}function zs(s){return 3===s||4===s||6===s}function Lc(s){return 64===s.charCodeAt(0)}function Uc(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const h=a[d];"number"==typeof h?c=h:0===c||os(s,c,h,null,-1===c||2===c?a[++d]:null)}}return s}function os(s,a,c,d,h){let p=0,y=s.length;if(-1===a)y=-1;else for(;p<s.length;){const C=s[p++];if("number"==typeof C){if(C===a){y=-1;break}if(C>a){y=p-1;break}}}for(;p<s.length;){const C=s[p];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==h&&(s[p+1]=h));if(d===s[p+1])return void(s[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,a),p=y+1),s.splice(p++,0,c),null!==d&&s.splice(p++,0,d),null!==h&&s.splice(p++,0,h)}const Rn="ng-template";function Sv(s,a,c){let d=0,h=!0;for(;d<s.length;){let p=s[d++];if("string"==typeof p&&h){const y=s[d++];if(c&&"class"===p&&-1!==ph(y.toLowerCase(),a,0))return!0}else{if(1===p){for(;d<s.length&&"string"==typeof(p=s[d++]);)if(p.toLowerCase()===a)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function Wn(s){return 4===s.type&&s.value!==Rn}function Mv(s,a,c){return a===(4!==s.type||c?s.value:Rn)}function gh(s,a,c){let d=4;const h=s.attrs||[],p=function Bc(s){for(let a=0;a<s.length;a++)if(zs(s[a]))return a;return s.length}(h);let y=!1;for(let C=0;C<a.length;C++){const b=a[C];if("number"!=typeof b){if(!y)if(4&d){if(d=2|1&d,""!==b&&!Mv(s,b,c)||""===b&&1===a.length){if(hi(d))return!1;y=!0}}else{const D=8&d?b:a[++C];if(8&d&&null!==s.attrs){if(!Sv(s.attrs,D,c)){if(hi(d))return!1;y=!0}continue}const N=mh(8&d?"class":b,h,Wn(s),c);if(-1===N){if(hi(d))return!1;y=!0;continue}if(""!==D){let q;q=N>p?"":h[N+1].toLowerCase();const Y=8&d?q:null;if(Y&&-1!==ph(Y,D,0)||2&d&&D!==q){if(hi(d))return!1;y=!0}}}}else{if(!y&&!hi(d)&&!hi(b))return!1;if(y&&hi(b))continue;y=!1,d=b|1&d}}return hi(d)||y}function hi(s){return 0==(1&s)}function mh(s,a,c,d){if(null===a)return-1;let h=0;if(d||!c){let p=!1;for(;h<a.length;){const y=a[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let C=a[++h];for(;"string"==typeof C;)C=a[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function yh(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,s)}function _h(s,a,c=!1){for(let d=0;d<a.length;d++)if(gh(s,a[d],c))return!0;return!1}function xg(s,a){return s?":not("+a.trim()+")":a}function Pg(s){let a=s[0],c=1,d=2,h="",p=!1;for(;c<s.length;){let y=s[c];if("string"==typeof y)if(2&d){const C=s[++c];h+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!hi(y)&&(a+=xg(p,h),h=""),d=y,p=p||!hi(d);c++}return""!==h&&(a+=xg(p,h)),a}function uu(s){return js(()=>{const a=Og(s),c={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Io.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||$s.Emulated,styles:s.styles||Kt,_:null,schemas:s.schemas||null,tView:null,id:""};mu(c);const d=s.dependencies;return c.directiveDefs=bo(d,!1),c.pipeDefs=bo(d,!0),c.id=function Ih(s){let a=0;const c=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const h of c)a=Math.imul(31,a)+h.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(c),c})}function du(s){return Ft(s)||Er(s)}function Ch(s){return null!==s}function hu(s){return js(()=>({type:s.type,bootstrap:s.bootstrap||Kt,declarations:s.declarations||Kt,imports:s.imports||Kt,exports:s.exports||Kt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function fu(s,a){if(null==s)return Hi;const c={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),c[h]=d,a&&(a[h]=p)}return c}function pu(s){return js(()=>{const a=Og(s);return mu(a),a})}function gu(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ft(s){return s[ra]||null}function Er(s){return s[Ba]||null}function br(s){return s[au]||null}function ja(s){const a=Ft(s)||Er(s)||br(s);return null!==a&&a.standalone}function Qr(s,a){const c=s[cu]||null;if(!c&&!0===a)throw new Error(`Type ${X(s)} does not have '\u0275mod' property.`);return c}function Og(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:s.inputs||Hi,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Kt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fu(s.inputs,a),outputs:fu(s.outputs)}}function mu(s){s.features?.forEach(a=>a(s))}function bo(s,a){if(!s)return null;const c=a?br:du;return()=>("function"==typeof s?s():s).map(d=>c(d)).filter(Ch)}const In=0,je=1,bt=2,fn=3,Mi=4,Ws=5,Tr=6,ia=7,qn=8,qs=9,To=10,pt=11,Vc=12,xv=13,Ai=14,sr=15,$a=16,xi=17,Jr=18,Zs=19,kg=20,sa=21,Is=22,_u=23,zi=24,Lt=25,bh=1,jc=2,Xr=7,Ha=9,or=11;function fi(s){return Array.isArray(s)&&"object"==typeof s[bh]}function Ur(s){return Array.isArray(s)&&!0===s[bh]}function Th(s){return 0!=(4&s.flags)}function Ks(s){return s.componentOffset>-1}function Hc(s){return 1==(1&s.flags)}function Gi(s){return!!s.template}function za(s){return 0!=(512&s[bt])}function Ys(s,a){return s.hasOwnProperty(Hs)?s[Hs]:null}let mr=null,xh=!1;function ti(s){const a=mr;return mr=s,a}const Ph={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Vv(s){if(!wu(s)||s.dirty){if(!s.producerMustRecompute(s)&&!$v(s))return void(s.dirty=!1);s.producerRecomputeValue(s),s.dirty=!1}}function jv(s){s.dirty=!0,function Lg(s){if(void 0===s.liveConsumerNode)return;const a=xh;xh=!0;try{for(const c of s.liveConsumerNode)c.dirty||jv(c)}finally{xh=a}}(s),s.consumerMarkedDirty?.(s)}function Ug(s){return s&&(s.nextProducerIndex=0),ti(s)}function Cu(s,a){if(ti(a),s&&void 0!==s.producerNode&&void 0!==s.producerIndexOfThis&&void 0!==s.producerLastReadVersion){if(wu(s))for(let c=s.nextProducerIndex;c<s.producerNode.length;c++)Gc(s.producerNode[c],s.producerIndexOfThis[c]);for(;s.producerNode.length>s.nextProducerIndex;)s.producerNode.pop(),s.producerLastReadVersion.pop(),s.producerIndexOfThis.pop()}}function $v(s){So(s);for(let a=0;a<s.producerNode.length;a++){const c=s.producerNode[a],d=s.producerLastReadVersion[a];if(d!==c.version||(Vv(c),d!==c.version))return!0}return!1}function kh(s){if(So(s),wu(s))for(let a=0;a<s.producerNode.length;a++)Gc(s.producerNode[a],s.producerIndexOfThis[a]);s.producerNode.length=s.producerLastReadVersion.length=s.producerIndexOfThis.length=0,s.liveConsumerNode&&(s.liveConsumerNode.length=s.liveConsumerIndexOfThis.length=0)}function Gc(s,a){if(function zv(s){s.liveConsumerNode??=[],s.liveConsumerIndexOfThis??=[]}(s),So(s),1===s.liveConsumerNode.length)for(let d=0;d<s.producerNode.length;d++)Gc(s.producerNode[d],s.producerIndexOfThis[d]);const c=s.liveConsumerNode.length-1;if(s.liveConsumerNode[a]=s.liveConsumerNode[c],s.liveConsumerIndexOfThis[a]=s.liveConsumerIndexOfThis[c],s.liveConsumerNode.length--,s.liveConsumerIndexOfThis.length--,a<s.liveConsumerNode.length){const d=s.liveConsumerIndexOfThis[a],h=s.liveConsumerNode[a];So(h),h.producerIndexOfThis[d]=a}}function wu(s){return s.consumerIsAlwaysLive||(s?.liveConsumerNode?.length??0)>0}function So(s){s.producerNode??=[],s.producerIndexOfThis??=[],s.producerLastReadVersion??=[]}let Wv=null;function Fh(s){const a=ti(null);try{return s()}finally{ti(a)}}const zg=()=>{},Ib=(()=>({...Ph,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:s=>{s.schedule(s.ref)},hasRun:!1,cleanupFn:zg}))();class Yv{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function Lh(){return Uh}function Uh(s){return s.type.prototype.ngOnChanges&&(s.setInput=Qs),bu}function bu(){const s=Bh(this),a=s?.current;if(a){const c=s.previous;if(c===Hi)s.previous=a;else for(let d in a)c[d]=a[d];s.current=null,this.ngOnChanges(a)}}function Qs(s,a,c,d){const h=this.declaredInputs[c],p=Bh(s)||function Qv(s,a){return s[qa]=a}(s,{previous:Hi,current:null}),y=p.current||(p.current={}),C=p.previous,b=C[h];y[h]=new Yv(b&&b.currentValue,a,C===Hi),s[d]=a}Lh.ngInherit=!0;const qa="__ngSimpleChanges__";function Bh(s){return s[qa]||null}const Es=function(s,a,c){},Gg="svg";function on(s){for(;Array.isArray(s);)s=s[In];return s}function Js(s,a){return on(a[s])}function ni(s,a){return on(a[s.index])}function jh(s,a){return s.data[a]}function Za(s,a){return s[a]}function pi(s,a){const c=a[s];return fi(c)?c:c[In]}function Mo(s,a){return null==a?null:s[a]}function Wg(s){s[xi]=0}function qc(s){1024&s[bt]||(s[bt]|=1024,er(s,1))}function Jv(s){1024&s[bt]&&(s[bt]&=-1025,er(s,-1))}function er(s,a){let c=s[fn];if(null===c)return;c[Ws]+=a;let d=c;for(c=c[fn];null!==c&&(1===a&&1===d[Ws]||-1===a&&0===d[Ws]);)c[Ws]+=a,d=c,c=c[fn]}const _t={lFrame:im(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ka(){return _t.bindingsEnabled}function ve(){return _t.lFrame.lView}function Vt(){return _t.lFrame.tView}function as(s){return _t.lFrame.contextLView=s,s[qn]}function Gh(s){return _t.lFrame.contextLView=null,s}function Dr(){let s=Au();for(;null!==s&&64===s.type;)s=s.parent;return s}function Au(){return _t.lFrame.currentTNode}function bs(s,a){const c=_t.lFrame;c.currentTNode=s,c.isParent=a}function Jg(){return _t.lFrame.isParent}function Sr(){const s=_t.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function xo(){return _t.lFrame.bindingIndex}function Yc(){return _t.lFrame.bindingIndex++}function Ts(s){const a=_t.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}function tm(s,a){const c=_t.lFrame;c.bindingIndex=c.bindingRootIndex=s,nm(a)}function nm(s){_t.lFrame.currentDirectiveIndex=s}function s0(){return _t.lFrame.currentQueryIndex}function rm(s){_t.lFrame.currentQueryIndex=s}function Ab(s){const a=s[je];return 2===a.type?a.declTNode:1===a.type?s[Tr]:null}function qh(s,a,c){if(c&dt.SkipSelf){let h=a,p=s;for(;!(h=h.parent,null!==h||c&dt.Host||(h=Ab(p),null===h||(p=p[Ai],10&h.type))););if(null===h)return!1;a=h,s=p}const d=_t.lFrame=Xs();return d.currentTNode=a,d.lView=s,!0}function gi(s){const a=Xs(),c=s[je];_t.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Xs(){const s=_t.lFrame,a=null===s?null:s.child;return null===a?im(s):a}function im(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function pn(){const s=_t.lFrame;return _t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const ut=pn;function _r(){const s=pn();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ri(){return _t.lFrame.selectedIndex}function eo(s){_t.lFrame.selectedIndex=s}function vn(){const s=_t.lFrame;return jh(s.tView,s.selectedIndex)}function Po(){_t.lFrame.currentNamespace=Gg}function wt(){!function o0(){_t.lFrame.currentNamespace=null}()}let Qc=!0;function to(){return Qc}function no(s){Qc=s}function Ya(s,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const p=s.data[c].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:D,ngOnDestroy:A}=p;y&&(s.contentHooks??=[]).push(-c,y),C&&((s.contentHooks??=[]).push(c,C),(s.contentCheckHooks??=[]).push(c,C)),b&&(s.viewHooks??=[]).push(-c,b),D&&((s.viewHooks??=[]).push(c,D),(s.viewCheckHooks??=[]).push(c,D)),null!=A&&(s.destroyHooks??=[]).push(c,A)}}function Qa(s,a,c){Ou(s,a,3,c)}function Ja(s,a,c,d){(3&s[bt])===c&&Ou(s,a,c,d)}function Pu(s,a){let c=s[bt];(3&c)===a&&(c&=8191,c+=1,s[bt]=c)}function Ou(s,a,c,d){const p=d??-1,y=a.length-1;let C=0;for(let b=void 0!==d?65535&s[xi]:0;b<y;b++)if("number"==typeof a[b+1]){if(C=a[b],null!=d&&C>=d)break}else a[b]<0&&(s[xi]+=65536),(C<p||-1==p)&&(Jc(s,c,a,b),s[xi]=(4294901760&s[xi])+b+2),b++}function ro(s,a){Es(4,s,a);const c=ti(null);try{a.call(s)}finally{ti(c),Es(5,s,a)}}function Jc(s,a,c,d){const h=c[d]<0,p=c[d+1],C=s[h?-c[d]:c[d]];h?s[bt]>>13<s[xi]>>16&&(3&s[bt])===a&&(s[bt]+=8192,ro(C,p)):ro(C,p)}const Ds=-1;class aa{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Ru(s){return s!==Ds}function Pi(s){return 32767&s}function jt(s,a){let c=function En(s){return s>>16}(s),d=a;for(;c>0;)d=d[Ai],c--;return d}let Xa=!0;function Mr(s){const a=Xa;return Xa=s,a}const tl=255,nl=5;let a0=0;const ar={};function bn(s,a){const c=Nu(s,a);if(-1!==c)return c;const d=a[je];d.firstCreatePass&&(s.injectorIndex=a.length,Ss(d.data,s),Ss(a,null),Ss(d.blueprint,null));const h=la(s,a),p=s.injectorIndex;if(Ru(h)){const y=Pi(h),C=jt(h,a),b=C[je].data;for(let D=0;D<8;D++)a[p+D]=C[y+D]|b[y+D]}return a[p+8]=h,p}function Ss(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Nu(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function la(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,h=a;for(;null!==h;){if(d=hm(h),null===d)return Ds;if(c++,h=h[Ai],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return Ds}function ec(s,a,c){!function ko(s,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Va)&&(d=c[Va]),null==d&&(d=c[Va]=a0++);const h=d&tl;a.data[s+(h>>nl)]|=1<<h}(s,a,c)}function Qh(s,a,c){if(c&dt.Optional||void 0!==s)return s;Ue()}function tc(s,a,c,d){if(c&dt.Optional&&void 0===d&&(d=null),!(c&(dt.Self|dt.Host))){const h=s[qs],p=sn(void 0);try{return h?h.get(a,d,c&dt.Optional):di(a,d,c&dt.Optional)}finally{sn(p)}}return Qh(d,0,c)}function Jh(s,a,c,d=dt.Default,h){if(null!==s){if(2048&a[bt]&&!(d&dt.Self)){const y=function dm(s,a,c,d,h){let p=s,y=a;for(;null!==p&&null!==y&&2048&y[bt]&&!(512&y[bt]);){const C=Fu(p,y,c,d|dt.Self,ar);if(C!==ar)return C;let b=p.parent;if(!b){const D=y[kg];if(D){const A=D.get(c,ar,d);if(A!==ar)return A}b=hm(y),y=y[Ai]}p=b}return h}(s,a,c,d,ar);if(y!==ar)return y}const p=Fu(s,a,c,d,ar);if(p!==ar)return p}return tc(a,c,d,h)}function Fu(s,a,c,d,h){const p=function No(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Va)?s[Va]:void 0;return"number"==typeof a?a>=0?a&tl:Fo:a}(c);if("function"==typeof p){if(!qh(a,s,d))return d&dt.Host?Qh(h,0,d):tc(a,c,d,h);try{let y;if(y=p(d),null!=y||d&dt.Optional)return y;Ue()}finally{ut()}}else if("number"==typeof p){let y=null,C=Nu(s,a),b=Ds,D=d&dt.Host?a[sr][Tr]:null;for((-1===C||d&dt.SkipSelf)&&(b=-1===C?la(s,a):a[C+8],b!==Ds&&cm(d,!1)?(y=a[je],C=Pi(b),a=jt(b,a)):C=-1);-1!==C;){const A=a[je];if(am(p,C,A.data)){const N=Dt(C,a,c,y,d,D);if(N!==ar)return N}b=a[C+8],b!==Ds&&cm(d,a[je].data[C+8]===D)&&am(p,C,a)?(y=A,C=Pi(b),a=jt(b,a)):C=-1}}return h}function Dt(s,a,c,d,h,p){const y=a[je],C=y.data[s+8],A=Ro(C,y,c,null==d?Ks(C)&&Xa:d!=y&&0!=(3&C.type),h&dt.Host&&p===C);return null!==A?ua(a,y,A,C):ar}function Ro(s,a,c,d,h){const p=s.providerIndexes,y=a.data,C=1048575&p,b=s.directiveStart,A=p>>20,q=h?C+A:s.directiveEnd;for(let Y=d?C:C+A;Y<q;Y++){const ue=y[Y];if(Y<b&&c===ue||Y>=b&&ue.type===c)return Y}if(h){const Y=y[b];if(Y&&Gi(Y)&&Y.type===c)return b}return null}function ua(s,a,c,d){let h=s[c];const p=a.data;if(function ku(s){return s instanceof aa}(h)){const y=h;y.resolving&&function Ne(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new ee(-200,`Circular dependency in DI detected for ${s}${c}`)}(function he(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():re(s)}(p[c]));const C=Mr(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?sn(y.injectImpl):null;qh(s,d,dt.Default);try{h=s[c]=y.factory(void 0,p,s,d),a.firstCreatePass&&c>=d.directiveStart&&function mi(s,a,c){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=a.type.prototype;if(d){const y=Uh(a);(c.preOrderHooks??=[]).push(s,y),(c.preOrderCheckHooks??=[]).push(s,y)}h&&(c.preOrderHooks??=[]).push(0-s,h),p&&((c.preOrderHooks??=[]).push(s,p),(c.preOrderCheckHooks??=[]).push(s,p))}(c,p[c],a)}finally{null!==D&&sn(D),Mr(C),y.resolving=!1,ut()}}return h}function am(s,a,c){return!!(c[a+(s>>nl)]&1<<s)}function cm(s,a){return!(s&dt.Self||s&dt.Host&&a)}class cr{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return Jh(this._tNode,this._lView,a,Qt(d),c)}}function Fo(){return new cr(Dr(),ve())}function um(s){return js(()=>{const a=s.prototype.constructor,c=a[Hs]||Lu(a),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const p=h[Hs]||Lu(h);if(p&&p!==c)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Lu(s){return Se(s)?()=>{const a=Lu(Ce(s));return a&&a()}:Ys(s)}function hm(s){const a=s[je],c=a.type;return 2===c?a.declTNode:1===c?s[Tr]:null}function Uu(s){return function om(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const d=c.length;let h=0;for(;h<d;){const p=c[h];if(zs(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof c[h];)h++;else{if(p===a)return c[h+1];h+=2}}}return null}(Dr(),s)}const da="__parameters__";function Gt(s,a,c){return js(()=>{const d=function Lo(s){return function(...c){if(s){const d=s(...c);for(const h in d)this[h]=d[h]}}}(a);function h(...p){if(this instanceof h)return d.apply(this,p),this;const y=new h(...p);return C.annotation=y,C;function C(b,D,A){const N=b.hasOwnProperty(da)?b[da]:Object.defineProperty(b,da,{value:[]})[da];for(;N.length<=A;)N.push(null);return(N[A]=N[A]||[]).push(y),b}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}function rc(s,a){s.forEach(c=>Array.isArray(c)?rc(c,a):a(c))}function l0(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function ic(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Oi(s,a,c){let d=sc(s,a);return d>=0?s[1|d]=c:(d=~d,function gm(s,a,c,d){let h=s.length;if(h==a)s.push(c,d);else if(1===h)s.push(d,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>a;)s[h]=s[h-2],h--;s[a]=c,s[a+1]=d}}(s,d,a,c)),d}function tf(s,a){const c=sc(s,a);if(c>=0)return s[1|c]}function sc(s,a){return function zu(s,a,c){let d=0,h=s.length>>c;for(;h!==d;){const p=d+(h-d>>1),y=s[p<<c];if(a===y)return p<<c;y>a?h=p:d=p+1}return~(h<<c)}(s,a,1)}const oe=hn(Gt("Optional"),8),He=hn(Gt("SkipSelf"),4);function ym(s){return 128==(128&s.flags)}var sf=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(sf||{});const af=new Map;let UA=0;const wm="__ngContext__";function vi(s,a){fi(a)?(s[wm]=a[Zs],function Ub(s){af.set(s[Zs],s)}(a)):s[wm]=a}let uf;function cs(s,a){return uf(s,a)}function ma(s){const a=s[fn];return Ur(a)?a[fn]:a}function jb(s){return df(s[Vc])}function I0(s){return df(s[Mi])}function df(s){for(;null!==s&&!Ur(s);)s=s[Mi];return s}function Yu(s,a,c,d,h){if(null!=d){let p,y=!1;Ur(d)?p=d:fi(d)&&(y=!0,d=d[In]);const C=on(d);0===s&&null!==c?null==h?Gb(a,c,C):hl(a,c,C,h||null,!0):1===s&&null!==c?hl(a,c,C,h||null,!0):2===s?function Dm(s,a,c){const d=Tm(s,a);d&&function XA(s,a,c,d){s.removeChild(a,c,d)}(s,d,a,c)}(a,C,y):3===s&&a.destroyNode(C),null!=p&&function tx(s,a,c,d,h){const p=c[Xr];p!==on(c)&&Yu(a,s,d,p,h);for(let C=or;C<c.length;C++){const b=c[C];_f(b[je],b,s,a,d,p)}}(a,s,p,c,h)}}function Em(s,a,c){return s.createElement(a,c)}function $b(s,a){const c=s[Ha],d=c.indexOf(a);Jv(a),c.splice(d,1)}function bm(s,a){if(s.length<=or)return;const c=or+a,d=s[c];if(d){const h=d[$a];null!==h&&h!==s&&$b(h,d),a>0&&(s[c-1][Mi]=d[Mi]);const p=ic(s,or+a);!function ZA(s,a){_f(s,a,a[pt],2,null,null),a[In]=null,a[Tr]=null}(d[je],d);const y=p[Jr];null!==y&&y.detachView(p[je]),d[fn]=null,d[Mi]=null,d[bt]&=-129}return d}function E0(s,a){if(!(256&a[bt])){const c=a[pt];a[_u]&&kh(a[_u]),a[zi]&&kh(a[zi]),c.destroyNode&&_f(s,a,c,3,null,null),function KA(s){let a=s[Vc];if(!a)return Hb(s[je],s);for(;a;){let c=null;if(fi(a))c=a[Vc];else{const d=a[or];d&&(c=d)}if(!c){for(;a&&!a[Mi]&&a!==s;)fi(a)&&Hb(a[je],a),a=a[fn];null===a&&(a=s),fi(a)&&Hb(a[je],a),c=a&&a[Mi]}a=c}}(a)}}function Hb(s,a){if(!(256&a[bt])){a[bt]&=-129,a[bt]|=256,function zb(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const h=a[c[d]];if(!(h instanceof aa)){const p=c[d+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const C=h[p[y]],b=p[y+1];Es(4,C,b);try{b.call(C)}finally{Es(5,C,b)}}else{Es(4,h,p);try{p.call(h)}finally{Es(5,h,p)}}}}}(s,a),function JA(s,a){const c=s.cleanup,d=a[ia];if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const y=c[p+3];y>=0?d[y]():d[-y].unsubscribe(),p+=2}else c[p].call(d[c[p+1]]);null!==d&&(a[ia]=null);const h=a[sa];if(null!==h){a[sa]=null;for(let p=0;p<h.length;p++)(0,h[p])()}}(s,a),1===a[je].type&&a[pt].destroy();const c=a[$a];if(null!==c&&Ur(a[fn])){c!==a[fn]&&$b(c,a);const d=a[Jr];null!==d&&d.detachView(s)}!function cf(s){af.delete(s[Zs])}(a)}}function Qu(s,a,c){return function dl(s,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[In];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:p}=s.data[d.directiveStart+h];if(p===$s.None||p===$s.Emulated)return null}return ni(d,c)}}(s,a.parent,c)}function hl(s,a,c,d,h){s.insertBefore(a,c,d,h)}function Gb(s,a,c){s.appendChild(a,c)}function Wb(s,a,c,d,h){null!==d?hl(s,a,c,d,h):Gb(s,a,c)}function Tm(s,a){return s.parentNode(a)}let T0,Jb,Mm,b0=function Zb(s,a,c){return 40&s.type?ni(s,c):null};function gf(s,a,c,d){const h=Qu(s,d,a),p=a[pt],C=function qb(s,a,c){return b0(s,a,c)}(d.parent||a[Tr],d,a);if(null!=h)if(Array.isArray(c))for(let b=0;b<c.length;b++)Wb(p,h,c[b],C,!1);else Wb(p,h,c,C,!1);void 0!==T0&&T0(p,d,a,c,h)}function Vo(s,a){if(null!==a){const c=a.type;if(3&c)return ni(a,s);if(4&c)return S0(-1,s[a.index]);if(8&c){const d=a.child;if(null!==d)return Vo(s,d);{const h=s[a.index];return Ur(h)?S0(-1,h):on(h)}}if(32&c)return cs(a,s)()||on(s[a.index]);{const d=D0(s,a);return null!==d?Array.isArray(d)?d[0]:Vo(ma(s[sr]),d):Vo(s,a.next)}}return null}function D0(s,a){return null!==a?s[sr][Tr].projection[a.projection]:null}function S0(s,a){const c=or+s+1;if(c<a.length){const d=a[c],h=d[je].firstChild;if(null!==h)return Vo(d,h)}return a[Xr]}function mf(s,a,c,d,h,p,y){for(;null!=c;){const C=d[c.index],b=c.type;if(y&&0===a&&(C&&vi(on(C),d),c.flags|=2),32!=(32&c.flags))if(8&b)mf(s,a,c.child,d,h,p,!1),Yu(a,s,h,C,p);else if(32&b){const D=cs(c,d);let A;for(;A=D();)Yu(a,s,h,A,p);Yu(a,s,h,C,p)}else 16&b?A0(s,a,d,c,h,p):Yu(a,s,h,C,p);c=y?c.projectionNext:c.next}}function _f(s,a,c,d,h,p){mf(c,d,s.firstChild,a,h,p,!1)}function A0(s,a,c,d,h,p){const y=c[sr],b=y[Tr].projection[d.projection];if(Array.isArray(b))for(let D=0;D<b.length;D++)Yu(a,s,h,b[D],p);else{let D=b;const A=y[fn];ym(d)&&(D.flags|=128),mf(s,a,D,A,h,p,!0)}}function Yb(s,a,c){""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c)}function yf(s,a,c){const{mergedAttrs:d,classes:h,styles:p}=c;null!==d&&Eo(s,a,d),null!==h&&Yb(s,a,h),null!==p&&function rx(s,a,c){s.setAttribute(a,"style",c)}(s,a,p)}function Xb(s){Jb=s}function n1(s){return function P0(){if(void 0===Mm&&(Mm=null,Rt.trustedTypes))try{Mm=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Mm}()?.createScriptURL(s)||s}class r1{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function cc(s){return s instanceof r1?s.changingThisBreaksApplicationSecurity:s}function ed(s,a){const c=function Am(s){return s instanceof r1&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${ot})`)}return c===a}const vf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var If=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(If||{});function Ef(s){const a=bf();return a?a.sanitize(If.URL,s)||"":ed(s,"URL")?cc(s):function Pm(s){return(s=String(s)).match(vf)?s:"unsafe:"+s}(re(s))}function f1(s){const a=bf();if(a)return n1(a.sanitize(If.RESOURCE_URL,s)||"");if(ed(s,"ResourceURL"))return n1(cc(s));throw new ee(904,!1)}function yx(s,a,c){return function _x(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?f1:Ef}(a,c)(s)}function bf(){const s=ve();return s&&s[To].sanitizer}class an{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=ft({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const td=new an("ENVIRONMENT_INITIALIZER"),g1=new an("INJECTOR",-1),m1=new an("INJECTOR_DEF_TYPES");class km{get(a,c=it){if(c===it){const d=new Error(`NullInjectorError: No provider for ${X(a)}!`);throw d.name="NullInjectorError",d}return c}}function L0(s){return{\u0275providers:s}}function vx(...s){return{\u0275providers:_1(0,s),\u0275fromNgModule:!0}}function _1(s,...a){const c=[],d=new Set;let h;const p=y=>{c.push(y)};return rc(a,y=>{const C=y;Rm(C,p,[],d)&&(h||=[],h.push(C))}),void 0!==h&&y1(h,p),c}function y1(s,a){for(let c=0;c<s.length;c++){const{ngModule:d,providers:h}=s[c];U0(h,p=>{a(p,d)})}}function Rm(s,a,c,d){if(!(s=Ce(s)))return!1;let h=null,p=Lr(s);const y=!p&&Ft(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const b=s.ngModule;if(p=Lr(b),!p)return!1;h=b}const C=d.has(h);if(y){if(C)return!1;if(d.add(h),y.dependencies){const b="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const D of b)Rm(D,a,c,d)}}else{if(!p)return!1;{if(null!=p.imports&&!C){let D;d.add(h);try{rc(p.imports,A=>{Rm(A,a,c,d)&&(D||=[],D.push(A))})}finally{}void 0!==D&&y1(D,a)}if(!C){const D=Ys(h)||(()=>new h);a({provide:h,useFactory:D,deps:Kt},h),a({provide:m1,useValue:h,multi:!0},h),a({provide:td,useValue:()=>Ve(h),multi:!0},h)}const b=p.providers;if(null!=b&&!C){const D=s;U0(b,A=>{a(A,D)})}}}return h!==s&&void 0!==s.providers}function U0(s,a){for(let c of s)Te(c)&&(c=c.\u0275providers),Array.isArray(c)?U0(c,a):a(c)}const IL=B({provide:String,useValue:B});function v1(s){return null!==s&&"object"==typeof s&&IL in s}function nd(s){return"function"==typeof s}const U=new an("Set Injector scope."),Nm={},Vr={};let B0;function pl(){return void 0===B0&&(B0=new km),B0}class jo{}class Tf extends jo{get destroyed(){return this._destroyed}constructor(a,c,d,h){super(),this.parent=c,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yr(a,y=>this.processProvider(y)),this.records.set(g1,Mf(void 0,this)),h.has("environment")&&this.records.set(jo,Mf(void 0,this));const p=this.records.get(U);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(m1.multi,Kt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const c=K(this),d=sn(void 0);try{return a()}finally{K(c),sn(d)}}get(a,c=it,d=dt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(lu))return a[lu](this);d=Qt(d);const p=K(this),y=sn(void 0);try{if(!(d&dt.SkipSelf)){let b=this.records.get(a);if(void 0===b){const D=function bx(s){return"function"==typeof s||"object"==typeof s&&s instanceof an}(a)&&wn(a);b=D&&this.injectableDefInScope(D)?Mf(Df(a),Nm):null,this.records.set(a,b)}if(null!=b)return this.hydrate(a,b)}return(d&dt.Self?pl():this.parent).get(a,c=d&dt.Optional&&c===it?null:c)}catch(C){if("NullInjectorError"===C.name){if((C[Bt]=C[Bt]||[]).unshift(X(a)),p)throw C;return function $i(s,a,c,d){const h=s[Bt];throw a[O]&&h.unshift(a[O]),s.message=function Fc(s,a,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=X(a);if(Array.isArray(a))h=a.map(X).join(" -> ");else if("object"==typeof a){let p=[];for(let y in a)if(a.hasOwnProperty(y)){let C=a[y];p.push(y+":"+("string"==typeof C?JSON.stringify(C):X(C)))}h=`{${p.join(", ")}}`}return`${c}${d?"("+d+")":""}[${h}]: ${s.replace(H,"\n  ")}`}("\n"+s.message,h,c,d),s.ngTokenPath=h,s[Bt]=null,s}(C,a,"R3InjectorError",this.source)}throw C}finally{sn(y),K(p)}}resolveInjectorInitializers(){const a=K(this),c=sn(void 0);try{const h=this.get(td.multi,Kt,dt.Self);for(const p of h)p()}finally{K(a),sn(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(X(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(a){let c=nd(a=Ce(a))?a:Ce(a&&a.provide);const d=function C1(s){return v1(s)?Mf(void 0,s.useValue):Mf(V0(s),Nm)}(a);if(nd(a)||!0!==a.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=Mf(void 0,Nm,!0),h.factory=()=>Ct(h.multi),this.records.set(c,h)),c=a,h.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===Nm&&(c.value=Vr,c.value=c.factory()),"object"==typeof c.value&&c.value&&function Ex(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Ce(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(a){const c=this._onDestroyHooks.indexOf(a);-1!==c&&this._onDestroyHooks.splice(c,1)}}function Df(s){const a=wn(s),c=null!==a?a.factory:Ys(s);if(null!==c)return c;if(s instanceof an)throw new ee(204,!1);if(s instanceof Function)return function Sf(s){const a=s.length;if(a>0)throw function Uo(s,a){const c=[];for(let d=0;d<s;d++)c.push(a);return c}(a,"?"),new ee(204,!1);const c=function Di(s){return s&&(s[pr]||s[Kr])||null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new ee(204,!1)}function V0(s,a,c){let d;if(nd(s)){const h=Ce(s);return Ys(h)||Df(h)}if(v1(s))d=()=>Ce(s.useValue);else if(function Ix(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Ct(s.deps||[]));else if(function wx(s){return!(!s||!s.useExisting)}(s))d=()=>Ve(Ce(s.useExisting));else{const h=Ce(s&&(s.useClass||s.provide));if(!function Dn(s){return!!s.deps}(s))return Ys(h)||Df(h);d=()=>new h(...Ct(s.deps))}return d}function Mf(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function yr(s,a){for(const c of s)Array.isArray(c)?yr(c,a):c&&Te(c)?yr(c.\u0275providers,a):a(c)}const ki=new an("AppId",{providedIn:"root",factory:()=>z}),z="ng",w1=new an("Platform Initializer"),j0=new an("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),E1=new an("CSP nonce",{providedIn:"root",factory:()=>function fl(){if(void 0!==Jb)return Jb;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let b1=(s,a,c)=>null;function K0(s,a,c=!1){return b1(s,a,c)}class xL{}class D1{}class M1{resolveComponentFactory(a){throw function ya(s){const a=Error(`No component factory found for ${X(s)}.`);return a.ngComponent=s,a}(a)}}let Pf=(()=>{class s{static#e=this.NULL=new M1}return s})();function PL(){return Of(Dr(),ve())}function Of(s,a){return new vl(ni(s,a))}let vl=(()=>{class s{constructor(c){this.nativeElement=c}static#e=this.__NG_ELEMENT_ID__=PL}return s})();function Ri(s){return s instanceof vl?s.nativeElement:s}class Px{}let OL=(()=>{class s{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Ox(){const s=ve(),c=pi(Dr().index,s);return(fi(c)?c:s)[pt]}()}return s})(),kx=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>null})}return s})();class sd{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Vm=new sd("16.2.9"),jm={};function eC(s,a=null,c=null,d){const h=k1(s,a,c,d);return h.resolveInjectorInitializers(),h}function k1(s,a=null,c=null,d,h=new Set){const p=[c||Kt,vx(s)];return d=d||("object"==typeof s?void 0:X(s)),new Tf(p,a||pl(),d||null,h)}let co=(()=>{class s{static#e=this.THROW_IF_NOT_FOUND=it;static#t=this.NULL=new km;static create(c,d){if(Array.isArray(c))return eC({name:""},d,c,"");{const h=c.name??"";return eC({name:h},c.parent,c.providers,h)}}static#n=this.\u0275prov=ft({token:s,providedIn:"any",factory:()=>Ve(g1)});static#r=this.__NG_ELEMENT_ID__=-1}return s})();function nC(s){return s.ngOriginalError}class lc{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&nC(a);for(;c&&nC(c);)c=nC(c);return c||null}}function Rf(s){return a=>{setTimeout(s,void 0,a)}}const $o=class iC extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let h=a,p=c||(()=>null),y=d;if(a&&"object"==typeof a){const b=a;h=b.next?.bind(b),p=b.error?.bind(b),y=b.complete?.bind(b)}this.__isAsync&&(p=Rf(p),h&&(h=Rf(h)),y&&(y=Rf(y)));const C=super.subscribe({next:h,error:p,complete:y});return a instanceof V.w0&&a.add(C),C}};function R1(...s){}class jr{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $o(!1),this.onMicrotaskEmpty=new $o(!1),this.onStable=new $o(!1),this.onError=new $o(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&c,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function sC(){const s="function"==typeof Rt.requestAnimationFrame;let a=Rt[s?"requestAnimationFrame":"setTimeout"],c=Rt[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&c){const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d);const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function Bx(s){const a=()=>{!function oC(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Rt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,N1(s),s.isCheckStableRunning=!0,Ho(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),N1(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,h,p,y,C)=>{if(function uC(s){return!(!Array.isArray(s)||1!==s.length)&&!0===s[0].data?.__ignore_ng_zone__}(C))return c.invokeTask(h,p,y,C);try{return F1(s),c.invokeTask(h,p,y,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&a(),L1(s)}},onInvoke:(c,d,h,p,y,C,b)=>{try{return F1(s),c.invoke(h,p,y,C,b)}finally{s.shouldCoalesceRunChangeDetection&&a(),L1(s)}},onHasTask:(c,d,h,p)=>{c.hasTask(h,p),d===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,N1(s),Ho(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,d,h,p)=>(c.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!jr.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(jr.isInAngularZone())throw new ee(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,a,Ux,R1,R1);try{return p.runTask(y,c,d)}finally{p.cancelTask(y)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const Ux={};function Ho(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function N1(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function F1(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function L1(s){s._nesting--,Ho(s)}class aC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $o,this.onMicrotaskEmpty=new $o,this.onStable=new $o,this.onError=new $o}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,h){return a.apply(c,d)}}const cC=new an("",{providedIn:"root",factory:lC});function lC(){const s=Ke(jr);let a=!0;const c=new L.y(h=>{a=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{h.next(a),h.complete()})}),d=new L.y(h=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{jr.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(a=!0,h.next(!0))})})});const y=s.onUnstable.subscribe(()=>{jr.assertInAngularZone(),a&&(a=!1,s.runOutsideAngular(()=>{h.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,ne.T)(c,d.pipe((0,Pe.B)()))}function va(s){return s instanceof Function?s():s}let Nf=(()=>{class s{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function cd(s){for(;s;){s[bt]|=64;const a=ma(s);if(za(s)&&!a)return s;s=a}return null}const fC=new an("",{providedIn:"root",factory:()=>!1});let Gm=null;function Cl(s,a){return s[a]??yC()}function _C(s,a){const c=yC();c.producerNode?.length&&(s[a]=Gm,c.lView=s,Gm=H1())}const zx={...Ph,consumerIsAlwaysLive:!0,consumerMarkedDirty:s=>{cd(s.lView)},lView:null};function H1(){return Object.create(zx)}function yC(){return Gm??=H1(),Gm}const St={};function uc(s){vC(Vt(),ve(),ri()+s,!1)}function vC(s,a,c,d){if(!d)if(3==(3&a[bt])){const p=s.preOrderCheckHooks;null!==p&&Qa(a,p,c)}else{const p=s.preOrderHooks;null!==p&&Ja(a,p,0,c)}eo(c)}function wl(s,a=dt.Default){const c=ve();return null===c?Ve(s,a):Jh(Dr(),c,Ce(s),a)}function z1(){throw new Error("invalid")}function Go(s,a,c,d,h,p,y,C,b,D,A){const N=a.blueprint.slice();return N[In]=h,N[bt]=140|d,(null!==D||s&&2048&s[bt])&&(N[bt]|=2048),Wg(N),N[fn]=N[Ai]=s,N[qn]=c,N[To]=y||s&&s[To],N[pt]=C||s&&s[pt],N[qs]=b||s&&s[qs]||null,N[Tr]=p,N[Zs]=function Cm(){return UA++}(),N[Is]=A,N[kg]=D,N[sr]=2==a.type?s[sr]:N,N}function dc(s,a,c,d,h){let p=s.data[a];if(null===p)p=function Lf(s,a,c,d,h){const p=Au(),y=Jg(),b=s.data[a]=function W1(s,a,c,d,h,p){let y=a?a.injectorIndex:-1,C=0;return function Ao(){return null!==_t.skipHydrationRootTNode}()&&(C|=128),{type:c,index:d,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,c,a,d,h);return null===s.firstChild&&(s.firstChild=b),null!==p&&(y?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(s,a,c,d,h),function Sb(){return _t.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=c,p.value=d,p.attrs=h;const y=function Kc(){const s=_t.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return bs(p,!0),p}function hc(s,a,c,d){if(0===c)return-1;const h=a.length;for(let p=0;p<c;p++)a.push(d),s.blueprint.push(d),s.data.push(null);return h}function Wm(s,a,c,d,h){const p=Cl(a,_u),y=ri(),C=2&d;try{eo(-1),C&&a.length>Lt&&vC(s,a,Lt,!1),Es(C?2:0,h);const D=C?p:null,A=Ug(D);try{null!==D&&(D.dirty=!1),c(d,h)}finally{Cu(D,A)}}finally{C&&null===a[_u]&&_C(a,_u),eo(y),Es(C?3:1,h)}}function Uf(s,a,c){if(Th(a)){const d=ti(null);try{const p=a.directiveEnd;for(let y=a.directiveStart;y<p;y++){const C=s.data[y];C.contentQueries&&C.contentQueries(1,c[y],y)}}finally{ti(d)}}}function Bf(s,a,c){Ka()&&(function Z1(s,a,c,d){const h=c.directiveStart,p=c.directiveEnd;Ks(c)&&function tP(s,a,c){const d=ni(a,s),h=qm(c);let y=16;c.signals?y=4096:c.onPush&&(y=64);const C=RC(s,Go(s,h,null,y,d,a,null,s[To].rendererFactory.createRenderer(d,c),null,null,null));s[a.index]=C}(a,c,s.data[h+c.componentOffset]),s.firstCreatePass||bn(c,a),vi(d,a);const y=c.initialInputs;for(let C=h;C<p;C++){const b=s.data[C],D=ua(a,s,C,c);vi(D,a),null!==y&&kC(0,C-h,D,b,0,y),Gi(b)&&(pi(c.index,a)[qn]=ua(a,s,C,c))}}(s,a,c,ni(c,a)),64==(64&c.flags)&&K1(s,a,c))}function Il(s,a,c=ni){const d=a.localNames;if(null!==d){let h=a.index+1;for(let p=0;p<d.length;p+=2){const y=d[p+1],C=-1===y?c(a,s):s[y];s[h++]=C}}}function qm(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Vf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):a}function Vf(s,a,c,d,h,p,y,C,b,D,A){const N=Lt+d,q=N+h,Y=function CC(s,a){const c=[];for(let d=0;d<a;d++)c.push(d<s?null:St);return c}(N,q),ue="function"==typeof D?D():D;return Y[je]={type:s,blueprint:Y,template:c,queries:null,viewQuery:C,declTNode:a,data:Y.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:ue,incompleteFirstPass:!1,ssrId:A}}let G1=s=>null;function EC(s,a,c,d){for(let h in s)if(s.hasOwnProperty(h)){c=null===c?{}:c;const p=s[h];null===d?q1(c,a,h,p):d.hasOwnProperty(h)&&q1(c,a,d[h],p)}return c}function q1(s,a,c,d){s.hasOwnProperty(c)?s[c].push(a,d):s[c]=[a,d]}function ls(s,a,c,d,h,p,y,C){const b=ni(a,c);let A,D=a.inputs;!C&&null!=D&&(A=D[d])?(LC(s,c,A,d,h),Ks(a)&&function TC(s,a){const c=pi(a,s);16&c[bt]||(c[bt]|=64)}(c,a.index)):3&a.type&&(d=function bC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,a.value||"",d):h,p.setProperty(b,d,h))}function jf(s,a,c,d){if(Ka()){const h=null===d?null:{"":-1},p=function Jx(s,a){const c=s.directiveRegistry;let d=null,h=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];if(_h(a,y.selectors,!1))if(d||(d=[]),Gi(y))if(null!==y.findHostDirectiveDefs){const C=[];h=h||new Map,y.findHostDirectiveDefs(y,C,h),d.unshift(...C,y),AC(s,a,C.length)}else d.unshift(y),AC(s,a,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,d,h),d.push(y)}return null===d?null:[d,h]}(s,c);let y,C;null===p?y=C=null:[y,C]=p,null!==y&&SC(s,a,c,y,h,C),h&&function Xx(s,a,c){if(a){const d=s.localNames=[];for(let h=0;h<a.length;h+=2){const p=c[a[h+1]];if(null==p)throw new ee(-301,!1);d.push(a[h],p)}}}(c,d,h)}c.mergedAttrs=Uc(c.mergedAttrs,c.attrs)}function SC(s,a,c,d,h,p){for(let D=0;D<d.length;D++)ec(bn(c,a),s,d[D].type);!function eP(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}(c,s.data.length,d.length);for(let D=0;D<d.length;D++){const A=d[D];A.providersResolver&&A.providersResolver(A)}let y=!1,C=!1,b=hc(s,a,d.length,null);for(let D=0;D<d.length;D++){const A=d[D];c.mergedAttrs=Uc(c.mergedAttrs,A.hostAttrs),PC(s,c,a,b,A),xC(b,A,h),null!==A.contentQueries&&(c.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(c.flags|=64);const N=A.type.prototype;!y&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((s.preOrderHooks??=[]).push(c.index),y=!0),!C&&(N.ngOnChanges||N.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(c.index),C=!0),b++}!function Kx(s,a,c){const h=a.directiveEnd,p=s.data,y=a.attrs,C=[];let b=null,D=null;for(let A=a.directiveStart;A<h;A++){const N=p[A],q=c?c.get(N):null,ue=q?q.outputs:null;b=EC(N.inputs,A,b,q?q.inputs:null),D=EC(N.outputs,A,D,ue);const Me=null===b||null===y||Wn(a)?null:VL(b,A,y);C.push(Me)}null!==b&&(b.hasOwnProperty("class")&&(a.flags|=8),b.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=b,a.outputs=D}(s,c,p)}function K1(s,a,c){const d=c.directiveStart,h=c.directiveEnd,p=c.index,y=function Mb(){return _t.lFrame.currentDirectiveIndex}();try{eo(p);for(let C=d;C<h;C++){const b=s.data[C],D=a[C];nm(C),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Qx(b,D)}}finally{eo(-1),nm(y)}}function Qx(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function AC(s,a,c){a.componentOffset=c,(s.components??=[]).push(a.index)}function xC(s,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=s;Gi(a)&&(c[""]=s)}}function PC(s,a,c,d,h){s.data[d]=h;const p=h.factory||(h.factory=Ys(h.type)),y=new aa(p,Gi(h),wl);s.blueprint[d]=y,c[d]=y,function Yx(s,a,c,d,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const C=~a.index;(function MC(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(y)!=C&&y.push(C),y.push(c,d,p)}}(s,a,d,hc(s,c,h.hostVars,St),h)}function xs(s,a,c,d,h,p){const y=ni(s,a);!function OC(s,a,c,d,h,p,y){if(null==p)s.removeAttribute(a,h,c);else{const C=null==y?re(p):y(p,d||"",h);s.setAttribute(a,h,C,c)}}(a[pt],y,p,s.value,c,d,h)}function kC(s,a,c,d,h,p){const y=p[a];if(null!==y)for(let C=0;C<y.length;)Y1(d,c,y[C++],y[C++],y[C++])}function Y1(s,a,c,d,h){const p=ti(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(d)&&(h=y[d].call(a,h)),null!==s.setInput?s.setInput(a,h,c,d):a[d]=h}finally{ti(p)}}function VL(s,a,c){let d=null,h=0;for(;h<c.length;){const p=c[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===d&&(d=[]);const y=s[p];for(let C=0;C<y.length;C+=2)if(y[C]===a){d.push(p,y[C+1],c[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function Zm(s,a,c,d){return[s,!0,!1,a,null,0,d,c,null,null,null]}function nP(s,a){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const p=c[d+1];if(-1!==p){const y=s.data[p];rm(c[d]),y.contentQueries(2,a[p],p)}}}function RC(s,a){return s[Vc]?s[xv][Mi]=a:s[Vc]=a,s[xv]=a,a}function NC(s,a,c){rm(0);const d=ti(null);try{a(s,c)}finally{ti(d)}}function FC(s){return s[ia]||(s[ia]=[])}function J1(s){return s.cleanup||(s.cleanup=[])}function eT(s,a){const c=s[qs],d=c?c.get(lc,null):null;d&&d.handleError(a)}function LC(s,a,c,d,h){for(let p=0;p<c.length;){const y=c[p++],C=c[p++];Y1(s.data[y],a[y],d,C,h)}}function lo(s,a,c){const d=Js(a,s);!function ll(s,a,c){s.setValue(a,c)}(s[pt],d,c)}function tT(s,a){const c=pi(a,s),d=c[je];!function rP(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])}(d,c);const h=c[In];null!==h&&null===c[Is]&&(c[Is]=K0(h,c[qs])),Km(d,c,c[qn])}function Km(s,a,c){gi(a);try{const d=s.viewQuery;null!==d&&NC(1,d,c);const h=s.template;null!==h&&Wm(s,a,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&nP(s,a),s.staticViewQueries&&NC(2,s.viewQuery,c);const p=s.components;null!==p&&function iP(s,a){for(let c=0;c<a.length;c++)tT(s,a[c])}(a,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[bt]&=-5,_r()}}let Ni=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(c,d,h){const p=typeof Zone>"u"?null:Zone.current,y=function Zv(s,a,c){const d=Object.create(Ib);c&&(d.consumerAllowSignalWrites=!0),d.fn=s,d.schedule=a;const h=y=>{d.cleanupFn=y};return d.ref={notify:()=>jv(d),run:()=>{if(d.dirty=!1,d.hasRun&&!$v(d))return;d.hasRun=!0;const y=Ug(d);try{d.cleanupFn(),d.cleanupFn=zg,d.fn(h)}finally{Cu(d,y)}},cleanup:()=>d.cleanupFn()},d.ref}(c,D=>{this.all.has(D)&&this.queue.set(D,p)},h);let C;this.all.add(y),y.notify();const b=()=>{y.cleanup(),C?.(),this.all.delete(y),this.queue.delete(y)};return C=d?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[c,d]of this.queue)this.queue.delete(c),d?d.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:()=>new s})}return s})();function Ym(s,a,c){let d=c?s.styles:null,h=c?s.classes:null,p=0;if(null!==a)for(let y=0;y<a.length;y++){const C=a[y];"number"==typeof C?p=C:1==p?h=Oe(h,C):2==p&&(d=Oe(d,C+": "+a[++y]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=h:s.classesWithoutHost=h}function $f(s,a,c,d,h=!1){for(;null!==c;){const p=a[c.index];null!==p&&d.push(on(p)),Ur(p)&&UC(p,d);const y=c.type;if(8&y)$f(s,a,c.child,d);else if(32&y){const C=cs(c,a);let b;for(;b=C();)d.push(b)}else if(16&y){const C=D0(a,c);if(Array.isArray(C))d.push(...C);else{const b=ma(a[sr]);$f(b[je],b,C,d,!0)}}c=h?c.projectionNext:c.next}return d}function UC(s,a){for(let c=or;c<s.length;c++){const d=s[c],h=d[je].firstChild;null!==h&&$f(d[je],d,h,a)}s[Xr]!==s[In]&&a.push(s[Xr])}function Qm(s,a,c,d=!0){const h=a[To],p=h.rendererFactory,y=h.afterRenderEventManager;p.begin?.(),y?.begin();try{rT(s,a,s.template,c)}catch(b){throw d&&eT(a,b),b}finally{p.end?.(),h.effectManager?.flush(),y?.end()}}function rT(s,a,c,d){const h=a[bt];if(256!=(256&h)){a[To].effectManager?.flush(),gi(a);try{Wg(a),function r0(s){return _t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&Wm(s,a,c,2,d);const y=3==(3&h);if(y){const D=s.preOrderCheckHooks;null!==D&&Qa(a,D,null)}else{const D=s.preOrderHooks;null!==D&&Ja(a,D,0,null),Pu(a,0)}if(function oP(s){for(let a=jb(s);null!==a;a=I0(a)){if(!a[jc])continue;const c=a[Ha];for(let d=0;d<c.length;d++){qc(c[d])}}}(a),Jm(a,2),null!==s.contentQueries&&nP(s,a),y){const D=s.contentCheckHooks;null!==D&&Qa(a,D)}else{const D=s.contentHooks;null!==D&&Ja(a,D,1),Pu(a,1)}!function Gx(s,a){const c=s.hostBindingOpCodes;if(null===c)return;const d=Cl(a,zi);try{for(let h=0;h<c.length;h++){const p=c[h];if(p<0)eo(~p);else{const y=p,C=c[++h],b=c[++h];tm(C,y),d.dirty=!1;const D=Ug(d);try{b(2,a[y])}finally{Cu(d,D)}}}}finally{null===a[zi]&&_C(a,zi),eo(-1)}}(s,a);const C=s.components;null!==C&&cP(a,C,0);const b=s.viewQuery;if(null!==b&&NC(2,b,d),y){const D=s.viewCheckHooks;null!==D&&Qa(a,D)}else{const D=s.viewHooks;null!==D&&Ja(a,D,2),Pu(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[bt]&=-73,Jv(a)}finally{_r()}}}function Jm(s,a){for(let c=jb(s);null!==c;c=I0(c))for(let d=or;d<c.length;d++)Xm(c[d],a)}function aP(s,a,c){Xm(pi(a,s),c)}function Xm(s,a){if(!function Tb(s){return 128==(128&s[bt])}(s))return;const c=s[je],d=s[bt];if(80&d&&0===a||1024&d||2===a)rT(c,s,c.template,s[qn]);else if(s[Ws]>0){Jm(s,1);const h=c.components;null!==h&&cP(s,h,1)}}function cP(s,a,c){for(let d=0;d<a.length;d++)aP(s,a[d],c)}class e_{get rootNodes(){const a=this._lView,c=a[je];return $f(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[qn]}set context(a){this._lView[qn]=a}get destroyed(){return 256==(256&this._lView[bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[fn];if(Ur(a)){const c=a[8],d=c?c.indexOf(this):-1;d>-1&&(bm(a,d),ic(c,d))}this._attachedToViewContainer=!1}E0(this._lView[je],this._lView)}onDestroy(a){!function Hh(s,a){if(256==(256&s[bt]))throw new ee(911,!1);null===s[sa]&&(s[sa]=[]),s[sa].push(a)}(this._lView,a)}markForCheck(){cd(this._cdRefInjectingView||this._lView)}detach(){this._lView[bt]&=-129}reattach(){this._lView[bt]|=128}detectChanges(){Qm(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ff(s,a){_f(s,a,a[pt],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=a}}class $L extends e_{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Qm(a[je],a,a[qn],!1)}checkNoChanges(){}get context(){return null}}class lP extends Pf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=Ft(a);return new zf(c,this.ngModule)}}function Hf(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}class uP{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){d=Qt(d);const h=this.injector.get(a,jm,d);return h!==jm||c===jm?h:this.parentInjector.get(a,c,d)}}class zf extends D1{get inputs(){const a=this.componentDef,c=a.inputTransforms,d=Hf(a.inputs);if(null!==c)for(const h of d)c.hasOwnProperty(h.propName)&&(h.transform=c[h.propName]);return d}get outputs(){return Hf(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function mb(s){return s.map(Pg).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,d,h){let p=(h=h||this.ngModule)instanceof jo?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new uP(a,p):a,C=y.get(Px,null);if(null===C)throw new ee(407,!1);const N={rendererFactory:C,sanitizer:y.get(kx,null),effectManager:y.get(Ni,null),afterRenderEventManager:y.get(Nf,null)},q=C.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",ue=d?function Wx(s,a,c,d){const p=d.get(fC,!1)||c===$s.ShadowDom,y=s.selectRootElement(a,p);return function qx(s){G1(s)}(y),y}(q,d,this.componentDef.encapsulation,y):Em(q,Y,function HL(s){const a=s.toLowerCase();return"svg"===a?Gg:"math"===a?"math":null}(Y)),ct=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let fe=null;null!==ue&&(fe=K0(ue,y,!0));const vt=Vf(0,null,null,1,0,null,null,null,null,null,null),Mt=Go(null,vt,null,ct,null,null,N,q,y,null,fe);let cn,Kn;gi(Mt);try{const Xo=this.componentDef;let ea,HI=null;Xo.findHostDirectiveDefs?(ea=[],HI=new Map,Xo.findHostDirectiveDefs(Xo,ea,HI),ea.push(Xo)):ea=[Xo];const yk=function hP(s,a){const c=s[je],d=Lt;return s[d]=a,dc(c,d,2,"#host",null)}(Mt,ue),Pt=function fP(s,a,c,d,h,p,y){const C=h[je];!function pP(s,a,c,d){for(const h of s)a.mergedAttrs=Uc(a.mergedAttrs,h.hostAttrs);null!==a.mergedAttrs&&(Ym(a,a.mergedAttrs,!0),null!==c&&yf(d,c,a))}(d,s,a,y);let b=null;null!==a&&(b=K0(a,h[qs]));const D=p.rendererFactory.createRenderer(a,c);let A=16;c.signals?A=4096:c.onPush&&(A=64);const N=Go(h,qm(c),null,A,h[s.index],s,p,D,null,null,b);return C.firstCreatePass&&AC(C,s,d.length-1),RC(h,N),h[s.index]=N}(yk,ue,Xo,ea,Mt,N,q);Kn=jh(vt,Lt),ue&&function mP(s,a,c,d){if(d)Eo(s,c,["ng-version",Vm.full]);else{const{attrs:h,classes:p}=function Si(s){const a=[],c=[];let d=1,h=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===h?""!==p&&a.push(p,s[++d]):8===h&&c.push(p);else{if(!hi(h))break;h=p}d++}return{attrs:a,classes:c}}(a.selectors[0]);h&&Eo(s,c,h),p&&p.length>0&&Yb(s,c,p.join(" "))}}(q,Xo,ue,d),void 0!==c&&function _P(s,a,c){const d=s.projection=[];for(let h=0;h<a.length;h++){const p=c[h];d.push(null!=p?Array.from(p):null)}}(Kn,this.ngContentSelectors,c),cn=function gP(s,a,c,d,h,p){const y=Dr(),C=h[je],b=ni(y,h);SC(C,h,y,c,null,d);for(let A=0;A<c.length;A++)vi(ua(h,C,y.directiveStart+A,y),h);K1(C,h,y),b&&vi(b,h);const D=ua(h,C,y.directiveStart+y.componentOffset,y);if(s[qn]=h[qn]=D,null!==p)for(const A of p)A(D,a);return Uf(C,y,s),D}(Pt,Xo,ea,HI,Mt,[yP]),Km(vt,Mt,null)}finally{_r()}return new dP(this.componentType,cn,Of(Kn,Mt),Mt,Kn)}}class dP extends xL{constructor(a,c,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new $L(h),this.componentType=a}setInput(a,c){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),c))return;const p=this._rootLView;LC(p[je],p,h,a,c),this.previousInputValues.set(a,c),cd(pi(this._tNode.index,p))}}get injector(){return new cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function yP(){const s=Dr();Ya(ve()[je],s)}function Ca(s){let a=function Gf(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const d=[s];for(;a;){let h;if(Gi(s))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ee(903,!1);h=a.\u0275dir}if(h){if(c){d.push(h);const y=s;y.inputs=t_(s.inputs),y.inputTransforms=t_(s.inputTransforms),y.declaredInputs=t_(s.declaredInputs),y.outputs=t_(s.outputs);const C=h.hostBindings;C&&IP(s,C);const b=h.viewQuery,D=h.contentQueries;if(b&&CP(s,b),D&&wP(s,D),G(s.inputs,h.inputs),G(s.declaredInputs,h.declaredInputs),G(s.outputs,h.outputs),null!==h.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),G(y.inputTransforms,h.inputTransforms)),Gi(h)&&h.data.animation){const A=s.data;A.animation=(A.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const C=p[y];C&&C.ngInherit&&C(s),C===Ca&&(c=!1)}}a=Object.getPrototypeOf(a)}!function vP(s){let a=0,c=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=a+=h.hostVars,h.hostAttrs=Uc(h.hostAttrs,c=Uc(c,h.hostAttrs))}}(d)}function t_(s){return s===Hi?{}:s===Kt?[]:s}function CP(s,a){const c=s.viewQuery;s.viewQuery=c?(d,h)=>{a(d,h),c(d,h)}:a}function wP(s,a){const c=s.contentQueries;s.contentQueries=c?(d,h,p)=>{a(d,h,p),c(d,h,p)}:a}function IP(s,a){const c=s.hostBindings;s.hostBindings=c?(d,h)=>{a(d,h),c(d,h)}:a}function aT(s){const a=s.inputConfig,c={};for(const d in a)if(a.hasOwnProperty(d)){const h=a[d];Array.isArray(h)&&h[2]&&(c[d]=h[2])}s.inputTransforms=c}function ud(s){return!!Wf(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Wf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Wo(s,a,c){return s[a]=c}function Ci(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function bl(s,a,c,d){const h=Ci(s,a,c);return Ci(s,a+1,d)||h}function r_(s,a,c,d,h){const p=bl(s,a,c,d);return Ci(s,a+2,h)||p}function qf(s,a,c,d){const h=ve();return Ci(h,Yc(),a)&&(Vt(),xs(vn(),h,s,a,c,d)),qf}function fc(s,a,c,d){return Ci(s,Yc(),c)?a+re(c)+d:St}function o_(s,a,c,d,h,p,y,C){const b=ve(),D=Vt(),A=s+Lt,N=D.firstCreatePass?function RP(s,a,c,d,h,p,y,C,b){const D=a.consts,A=dc(a,s,4,y||null,Mo(D,C));jf(a,c,A,Mo(D,b)),Ya(a,A);const N=A.tView=Vf(2,A,d,h,p,a.directiveRegistry,a.pipeRegistry,null,a.schemas,D,null);return null!==a.queries&&(a.queries.template(a,A),N.queries=a.queries.embeddedTView(A)),A}(A,D,b,a,c,d,h,p,y):D.data[A];bs(N,!1);const q=QC(D,b,N,s);to()&&gf(D,b,q,N),vi(q,b),RC(b,b[A]=Zm(q,b,q,N)),Hc(N)&&Bf(D,b,N),null!=y&&Il(b,N,C)}let QC=function a_(s,a,c,d){return no(!0),a[pt].createComment("")};function XC(s){return Za(function t0(){return _t.lFrame.contextLView}(),Lt+s)}function ew(s,a,c){const d=ve();return Ci(d,Yc(),a)&&ls(Vt(),vn(),d,s,a,d[pt],c,!1),ew}function tw(s,a,c,d,h){const y=h?"class":"style";LC(s,c,a.inputs[y],y,d)}function c_(s,a,c,d){const h=ve(),p=Vt(),y=Lt+s,C=h[pt],b=p.firstCreatePass?function LP(s,a,c,d,h,p){const y=a.consts,b=dc(a,s,2,d,Mo(y,h));return jf(a,c,b,Mo(y,p)),null!==b.attrs&&Ym(b,b.attrs,!1),null!==b.mergedAttrs&&Ym(b,b.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,b),b}(y,p,h,a,c,d):p.data[y],D=l_(p,h,b,C,a,s);h[y]=D;const A=Hc(b);return bs(b,!0),yf(C,D,b),32!=(32&b.flags)&&to()&&gf(p,h,D,b),0===function Zg(){return _t.lFrame.elementDepthCount}()&&vi(D,h),function Kg(){_t.lFrame.elementDepthCount++}(),A&&(Bf(p,h,b),Uf(p,b,h)),null!==d&&Il(h,b),c_}function ep(){let s=Dr();Jg()?function Xg(){_t.lFrame.isParent=!1}():(s=s.parent,bs(s,!1));const a=s;(function Zc(s){return _t.skipHydrationRootTNode===s})(a)&&function Qg(){_t.skipHydrationRootTNode=null}(),function Xv(){_t.lFrame.elementDepthCount--}();const c=Vt();return c.firstCreatePass&&(Ya(c,s),Th(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Oo(s){return 0!=(8&s.flags)}(a)&&tw(c,a,ve(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function el(s){return 0!=(16&s.flags)}(a)&&tw(c,a,ve(),a.stylesWithoutHost,!1),ep}function nw(s,a,c,d){return c_(s,a,c,d),ep(),nw}let l_=(s,a,c,d,h,p)=>(no(!0),Em(d,h,function sm(){return _t.lFrame.currentNamespace}()));function ET(){return ve()}function np(s){return!!s&&"function"==typeof s.then}function bT(s){return!!s&&"function"==typeof s.subscribe}function ow(s,a,c,d){const h=ve(),p=Vt(),y=Dr();return function aw(s,a,c,d,h,p,y){const C=Hc(d),D=s.firstCreatePass&&J1(s),A=a[qn],N=FC(a);let q=!0;if(3&d.type||y){const Me=ni(d,a),$e=y?y(Me):Me,ct=N.length,fe=y?Mt=>y(on(Mt[d.index])):d.index;let vt=null;if(!y&&C&&(vt=function TT(s,a,c,d){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===c&&h[p+1]===d){const C=a[ia],b=h[p+2];return C.length>b?C[b]:null}"string"==typeof y&&(p+=2)}return null}(s,a,h,d.index)),null!==vt)(vt.__ngLastListenerFn__||vt).__ngNextListenerFn__=p,vt.__ngLastListenerFn__=p,q=!1;else{p=ST(d,a,A,p,!1);const Mt=c.listen($e,h,p);N.push(p,Mt),D&&D.push(h,fe,ct,ct+1)}}else p=ST(d,a,A,p,!1);const Y=d.outputs;let ue;if(q&&null!==Y&&(ue=Y[h])){const Me=ue.length;if(Me)for(let $e=0;$e<Me;$e+=2){const cn=a[ue[$e]][ue[$e+1]].subscribe(p),Kn=N.length;N.push(p,cn),D&&D.push(h,d.index,Kn,-(Kn+1))}}}(p,h,h[pt],y,s,a,d),ow}function DT(s,a,c,d){try{return Es(6,a,c),!1!==c(d)}catch(h){return eT(s,h),!1}finally{Es(7,a,c)}}function ST(s,a,c,d,h){return function p(y){if(y===Function)return d;cd(s.componentOffset>-1?pi(s.index,a):a);let b=DT(a,c,d,y),D=p.__ngNextListenerFn__;for(;D;)b=DT(a,c,D,y)&&b,D=D.__ngNextListenerFn__;return h&&!1===b&&y.preventDefault(),b}}function MT(s=1){return function xu(s){return(_t.lFrame.contextLView=function Zh(s,a){for(;s>0;)a=a[Ai],s--;return a}(s,_t.lFrame.contextLView))[qn]}(s)}function rp(s,a,c){return h_(s,"",a,"",c),rp}function h_(s,a,c,d,h){const p=ve(),y=fc(p,a,c,d);return y!==St&&ls(Vt(),vn(),p,s,y,p[pt],h,!1),h_}function p_(s,a){return s<<17|a<<2}function gc(s){return s>>17&32767}function uw(s){return 2|s}function lr(s){return(131068&s)>>2}function dw(s,a){return-131069&s|a<<2}function hw(s){return 1|s}function RT(s,a,c,d,h){const p=s[c+1],y=null===a;let C=d?gc(p):lr(p),b=!1;for(;0!==C&&(!1===b||y);){const A=s[C+1];pw(s[C],a)&&(b=!0,s[C+1]=d?hw(A):uw(A)),C=d?gc(A):lr(A)}b&&(s[c+1]=d?uw(p):hw(p))}function pw(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&sc(s,a)>=0}const Ar={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function NT(s){return s.substring(Ar.key,Ar.keyEnd)}function FT(s,a){const c=Ar.textEnd;return c===a?-1:(a=Ar.keyEnd=function mw(s,a,c){for(;a<c&&s.charCodeAt(a)>32;)a++;return a}(s,Ar.key=a,c),yd(s,a,c))}function yd(s,a,c){for(;a<c&&s.charCodeAt(a)<=32;)a++;return a}function _w(s,a){return function us(s,a,c,d){const h=ve(),p=Vt(),y=Ts(2);p.firstUpdatePass&&VT(p,s,y,d),a!==St&&Ci(h,y,a)&&$T(p,p.data[ri()],h,h[pt],s,h[y+1]=function Ko(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=X(cc(s)))),s}(a,c),d,y)}(s,a,null,!0),_w}function __(s){!function uo(s,a,c,d){const h=Vt(),p=Ts(2);h.firstUpdatePass&&VT(h,null,p,d);const y=ve();if(c!==St&&Ci(y,p,c)){const C=h.data[ri()];if(Iw(C,d)&&!y_(h,p)){let b=d?C.classesWithoutHost:C.stylesWithoutHost;null!==b&&(c=Oe(b,c||"")),tw(h,C,y,c,d)}else!function ww(s,a,c,d,h,p,y,C){h===St&&(h=Kt);let b=0,D=0,A=0<h.length?h[0]:null,N=0<p.length?p[0]:null;for(;null!==A||null!==N;){const q=b<h.length?h[b+1]:void 0,Y=D<p.length?p[D+1]:void 0;let Me,ue=null;A===N?(b+=2,D+=2,q!==Y&&(ue=N,Me=Y)):null===N||null!==A&&A<N?(b+=2,ue=A):(D+=2,ue=N,Me=Y),null!==ue&&$T(s,a,c,d,ue,Me,y,C),A=b<h.length?h[b]:null,N=D<p.length?p[D]:null}}(h,C,y,y[pt],y[p+1],y[p+1]=function jT(s,a,c){if(null==c||""===c)return Kt;const d=[],h=cc(c);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(d,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(d,p,h[p]);else"string"==typeof h&&a(d,h);return d}(s,a,c),d,p)}}(QP,Zo,s,!0)}function Zo(s,a){for(let c=function GP(s){return function LT(s){Ar.key=0,Ar.keyEnd=0,Ar.value=0,Ar.valueEnd=0,Ar.textEnd=s.length}(s),FT(s,yd(s,0,Ar.textEnd))}(a);c>=0;c=FT(a,c))Oi(s,NT(a),!0)}function y_(s,a){return a>=s.expandoStartIndex}function VT(s,a,c,d){const h=s.data;if(null===h[c+1]){const p=h[ri()],y=y_(s,c);Iw(p,d)&&null===a&&!y&&(a=!1),a=function yw(s,a,c,d){const h=function Wh(s){const a=_t.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let p=d?a.residualClasses:a.residualStyles;if(null===h)0===(d?a.classBindings:a.styleBindings)&&(c=xl(c=sp(null,s,a,c,d),a.attrs,d),p=null);else{const y=a.directiveStylingLast;if(-1===y||s[y]!==h)if(c=sp(h,s,a,c,d),null===p){let b=function KP(s,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==lr(d))return s[gc(d)]}(s,a,d);void 0!==b&&Array.isArray(b)&&(b=sp(null,s,a,b[1],d),b=xl(b,a.attrs,d),function vw(s,a,c,d){s[gc(c?a.classBindings:a.styleBindings)]=d}(s,a,d,b))}else p=function YP(s,a,c){let d;const h=a.directiveEnd;for(let p=1+a.directiveStylingLast;p<h;p++)d=xl(d,s[p].hostAttrs,c);return xl(d,a.attrs,c)}(s,a,d)}return void 0!==p&&(d?a.residualClasses=p:a.residualStyles=p),c}(h,p,a,d),function HP(s,a,c,d,h,p){let y=p?a.classBindings:a.styleBindings,C=gc(y),b=lr(y);s[d]=c;let A,D=!1;if(Array.isArray(c)?(A=c[1],(null===A||sc(c,A)>0)&&(D=!0)):A=c,h)if(0!==b){const q=gc(s[C+1]);s[d+1]=p_(q,C),0!==q&&(s[q+1]=dw(s[q+1],d)),s[C+1]=function $r(s,a){return 131071&s|a<<17}(s[C+1],d)}else s[d+1]=p_(C,0),0!==C&&(s[C+1]=dw(s[C+1],d)),C=d;else s[d+1]=p_(b,0),0===C?C=d:s[b+1]=dw(s[b+1],d),b=d;D&&(s[d+1]=uw(s[d+1])),RT(s,A,d,!0),RT(s,A,d,!1),function fw(s,a,c,d,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof a&&sc(p,a)>=0&&(c[d+1]=hw(c[d+1]))}(a,A,s,d,p),y=p_(C,b),p?a.classBindings=y:a.styleBindings=y}(h,p,a,c,y,d)}}function sp(s,a,c,d,h){let p=null;const y=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<y&&(p=a[C],d=xl(d,p.hostAttrs,h),p!==s);)C++;return null!==s&&(c.directiveStylingLast=C),d}function xl(s,a,c){const d=c?1:2;let h=-1;if(null!==a)for(let p=0;p<a.length;p++){const y=a[p];"number"==typeof y?h=y:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Oi(s,y,!!c||a[++p]))}return void 0===s?null:s}function QP(s,a,c){const d=String(a);""!==d&&!d.includes(" ")&&Oi(s,d,c)}function $T(s,a,c,d,h,p,y,C){if(!(3&a.type))return;const b=s.data,D=b[C+1],A=function kT(s){return 1==(1&s)}(D)?v_(b,a,c,h,lr(D),y):void 0;C_(A)||(C_(p)||function lw(s){return 2==(2&s)}(D)&&(p=v_(b,null,c,h,C,y)),function nx(s,a,c,d,h){if(a)h?s.addClass(c,d):s.removeClass(c,d);else{let p=-1===d.indexOf("-")?void 0:sf.DashCase;null==h?s.removeStyle(c,d,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=sf.Important),s.setStyle(c,d,h,p))}}(d,y,Js(ri(),c),h,p))}function v_(s,a,c,d,h,p){const y=null===a;let C;for(;h>0;){const b=s[h],D=Array.isArray(b),A=D?b[1]:b,N=null===A;let q=c[h+1];q===St&&(q=N?Kt:void 0);let Y=N?tf(q,d):A===d?q:void 0;if(D&&!C_(Y)&&(Y=tf(b,d)),C_(Y)&&(C=Y,y))return C;const ue=s[h+1];h=y?gc(ue):lr(ue)}if(null!==a){let b=p?a.residualClasses:a.residualStyles;null!=b&&(C=tf(b,d))}return C}function C_(s){return void 0!==s}function Iw(s,a){return 0!=(s.flags&(a?8:16))}function Ew(s,a=""){const c=ve(),d=Vt(),h=s+Lt,p=d.firstCreatePass?dc(d,h,1,a,null):d.data[h],y=op(d,c,p,a,s);c[h]=y,to()&&gf(d,c,y,p),bs(p,!1)}let op=(s,a,c,d,h)=>(no(!0),function Im(s,a){return s.createText(a)}(a[pt],d));function Os(s){return vd("",s,""),Os}function vd(s,a,c){const d=ve(),h=fc(d,s,a,c);return h!==St&&lo(d,ri(),h),vd}function GT(s,a,c,d,h){const p=ve(),y=function dd(s,a,c,d,h,p){const C=bl(s,xo(),c,h);return Ts(2),C?a+re(c)+d+re(h)+p:St}(p,s,a,c,d,h);return y!==St&&lo(p,ri(),y),GT}function bw(s,a,c,d,h,p,y){const C=ve(),b=function hd(s,a,c,d,h,p,y,C){const D=r_(s,xo(),c,h,y);return Ts(3),D?a+re(c)+d+re(h)+p+re(y)+C:St}(C,s,a,c,d,h,p,y);return b!==St&&lo(C,ri(),b),bw}const ks=void 0;var QT=["en",[["a","p"],["AM","PM"],ks],[["AM","PM"],ks,ks],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ks,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ks,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ks,"{1} 'at' {0}",ks],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wd(s){const c=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Id={};function wa(s){const a=function cO(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=aO(a);if(c)return c;const d=a.split("-")[0];if(c=aO(d),c)return c;if("en"===d)return QT;throw new ee(701,!1)}function mc(s){return wa(s)[Hr.PluralCase]}function aO(s){return s in Id||(Id[s]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[s]),Id[s]}var Hr=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Hr||{});const _c="en-US";let Rs=_c;function _p(s,a,c,d,h){if(s=Ce(s),Array.isArray(s))for(let p=0;p<s.length;p++)_p(s[p],a,c,d,h);else{const p=Vt(),y=ve(),C=Dr();let b=nd(s)?s:Ce(s.provide);const D=V0(s),A=1048575&C.providerIndexes,N=C.directiveStart,q=C.providerIndexes>>20;if(nd(s)||!s.multi){const Y=new aa(D,h,wl),ue=Rl(b,a,h?A:A+q,N);-1===ue?(ec(bn(C,y),p,b),j_(p,s,a.length),a.push(b),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),c.push(Y),y.push(Y)):(c[ue]=Y,y[ue]=Y)}else{const Y=Rl(b,a,A+q,N),ue=Rl(b,a,A,A+q),$e=ue>=0&&c[ue];if(h&&!$e||!h&&!(Y>=0&&c[Y])){ec(bn(C,y),p,b);const ct=function H_(s,a,c,d,h){const p=new aa(s,c,wl);return p.multi=[],p.index=a,p.componentProviders=0,yD(p,h,d&&!c),p}(h?CD:vD,c.length,h,d,D);!h&&$e&&(c[ue].providerFactory=ct),j_(p,s,a.length,0),a.push(b),C.directiveStart++,C.directiveEnd++,h&&(C.providerIndexes+=1048576),c.push(ct),y.push(ct)}else j_(p,s,Y>-1?Y:ue,yD(c[h?ue:Y],D,!h&&d));!h&&d&&$e&&c[ue].componentProviders++}}}function j_(s,a,c,d){const h=nd(a),p=function EL(s){return!!s.useClass}(a);if(h||p){const b=(p?Ce(a.useClass):a).prototype.ngOnDestroy;if(b){const D=s.destroyHooks||(s.destroyHooks=[]);if(!h&&a.multi){const A=D.indexOf(c);-1===A?D.push(c,[d,b]):D[A+1].push(d,b)}else D.push(c,b)}}}function yD(s,a,c){return c&&s.componentProviders++,s.multi.push(a)-1}function Rl(s,a,c,d){for(let h=c;h<d;h++)if(a[h]===s)return h;return-1}function vD(s,a,c,d){return $_(this.multi,[])}function CD(s,a,c,d){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=ua(c,c[je],this.providerFactory.index,d);p=C.slice(0,y),$_(h,p);for(let b=y;b<C.length;b++)p.push(C[b])}else p=[],$_(h,p);return p}function $_(s,a){for(let c=0;c<s.length;c++)a.push((0,s[c])());return a}function wD(s,a=[]){return c=>{c.providersResolver=(d,h)=>function Hw(s,a,c){const d=Vt();if(d.firstCreatePass){const h=Gi(s);_p(c,d.data,d.blueprint,h,!0),_p(a,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,a)}}class Nl{}class Fl{}function EO(s,a){return new Ea(s,a??null,[])}class Ea extends Nl{constructor(a,c,d){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new lP(this);const h=Qr(a);this._bootstrapComponents=va(h.bootstrap),this._r3Injector=k1(a,c,[{provide:Nl,useValue:this},{provide:Pf,useValue:this.componentFactoryResolver},...d],X(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class z_ extends Fl{constructor(a){super(),this.moduleType=a}create(a){return new Ea(this.moduleType,a,[])}}class zw extends Nl{constructor(a){super(),this.componentFactoryResolver=new lP(this),this.instance=null;const c=new Tf([...a.providers,{provide:Nl,useValue:this},{provide:Pf,useValue:this.componentFactoryResolver}],a.parent||pl(),a.debugName,new Set(["environment"]));this.injector=c,a.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Md(s,a,c=null){return new zw({providers:s,parent:a,debugName:c,runEnvironmentInitializers:!0}).injector}let ID=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const d=_1(0,c.type),h=d.length>0?Md([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,h)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ft({token:s,providedIn:"environment",factory:()=>new s(Ve(jo))})}return s})();function Ii(s){s.getStandaloneInjector=a=>a.get(ID).getOrCreateStandaloneInjector(s)}function Y_(s,a,c){const d=Sr()+s,h=ve();return h[d]===St?Wo(h,d,c?a.call(c):a()):function El(s,a){return s[a]}(h,d)}function Zw(s,a,c,d){return AD(ve(),Sr(),s,a,c,d)}function Kw(s,a,c,d,h){return function xD(s,a,c,d,h,p,y){const C=a+c;return bl(s,C,h,p)?Wo(s,C+2,y?d.call(y,h,p):d(h,p)):Ul(s,C+2)}(ve(),Sr(),s,a,c,d,h)}function Ul(s,a){const c=s[a];return c===St?void 0:c}function AD(s,a,c,d,h,p){const y=a+c;return Ci(s,y,h)?Wo(s,y+1,p?d.call(p,h):d(h)):Ul(s,y+1)}function yc(s,a){const c=Vt();let d;const h=s+Lt;c.firstCreatePass?(d=function ba(s,a){if(a)for(let c=a.length-1;c>=0;c--){const d=a[c];if(s===d.name)return d}}(a,c.pipeRegistry),c.data[h]=d,d.onDestroy&&(c.destroyHooks??=[]).push(h,d.onDestroy)):d=c.data[h];const p=d.factory||(d.factory=Ys(d.type)),C=sn(wl);try{const b=Mr(!1),D=p();return Mr(b),function FP(s,a,c,d){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),a[c]=d}(c,ve(),h,D),D}finally{sn(C)}}function eI(s,a,c){const d=s+Lt,h=ve(),p=Za(h,d);return Sp(h,d)?AD(h,Sr(),a,p.transform,c,p):p.transform(c)}function bp(s,a,c,d,h){const p=s+Lt,y=ve(),C=Za(y,p);return Sp(y,p)?function Yw(s,a,c,d,h,p,y,C){const b=a+c;return r_(s,b,h,p,y)?Wo(s,b+3,C?d.call(C,h,p,y):d(h,p,y)):Ul(s,b+3)}(y,Sr(),a,C.transform,c,d,h,C):C.transform(c,d,h)}function Sp(s,a){return s[je].data[a].pure}function OD(){return this._results[Symbol.iterator]()}class tI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new $o)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=tI.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=OD)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const h=function si(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function pm(s,a,c){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],p=a[d];if(c&&(h=c(h),p=c(p)),p!==h)return!1}return!0}(d._results,h,c))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function DO(s,a,c,d=!0){const h=a[je];if(function YA(s,a,c,d){const h=or+d,p=c.length;d>0&&(c[h-1][Mi]=a),d<p-or?(a[Mi]=c[h],l0(c,or+d,a)):(c.push(a),a[Mi]=null),a[fn]=c;const y=a[$a];null!==y&&c!==y&&function QA(s,a){const c=s[Ha];a[sr]!==a[fn][fn][sr]&&(s[jc]=!0),null===c?s[Ha]=[a]:c.push(a)}(y,a);const C=a[Jr];null!==C&&C.insertView(s),a[bt]|=128}(h,a,s,c),d){const p=S0(c,s),y=a[pt],C=Tm(y,s[Xr]);null!==C&&function hf(s,a,c,d,h,p){d[In]=h,d[Tr]=a,_f(s,d,c,1,h,p)}(h,s[Tr],y,a,C,p)}}let Ns=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=ND}return s})();const kD=Ns,RD=class extends kD{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,c){return this.createEmbeddedViewImpl(a,c)}createEmbeddedViewImpl(a,c,d){const h=function TO(s,a,c,d){const h=a.tView,C=Go(s,h,c,4096&s[bt]?4096:16,null,a,null,null,null,d?.injector??null,d?.hydrationInfo??null);C[$a]=s[a.index];const D=s[Jr];return null!==D&&(C[Jr]=D.createEmbeddedView(h)),Km(h,C,c),C}(this._declarationLView,this._declarationTContainer,a,{injector:c,hydrationInfo:d});return new e_(h)}};function ND(){return Ta(Dr(),ve())}function Ta(s,a){return 4&s.type?new RD(a,s,Of(s,a)):null}let ty=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=MO}return s})();function MO(){return Ap(Dr(),ve())}const AO=ty,VD=class extends AO{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return Of(this._hostTNode,this._hostLView)}get injector(){return new cr(this._hostTNode,this._hostLView)}get parentInjector(){const a=la(this._hostTNode,this._hostLView);if(Ru(a)){const c=jt(a,this._hostLView),d=Pi(a);return new cr(c[je].data[d+8],c)}return new cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=Mp(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-or}createEmbeddedView(a,c,d){let h,p;"number"==typeof d?h=d:null!=d&&(h=d.index,p=d.injector);const C=a.createEmbeddedViewImpl(c||{},p,null);return this.insertImpl(C,h,false),C}createComponent(a,c,d,h,p){const y=a&&!function so(s){return"function"==typeof s}(a);let C;if(y)C=c;else{const Me=c||{};C=Me.index,d=Me.injector,h=Me.projectableNodes,p=Me.environmentInjector||Me.ngModuleRef}const b=y?a:new zf(Ft(a)),D=d||this.parentInjector;if(!p&&null==b.ngModule){const $e=(y?D:this.parentInjector).get(jo,null);$e&&(p=$e)}Ft(b.componentType??{});const Y=b.create(D,h,null,p);return this.insertImpl(Y.hostView,C,false),Y}insert(a,c){return this.insertImpl(a,c,!1)}insertImpl(a,c,d){const h=a._lView;if(function Su(s){return Ur(s[fn])}(h)){const b=this.indexOf(a);if(-1!==b)this.detach(b);else{const D=h[fn],A=new VD(D,D[Tr],D[fn]);A.detach(A.indexOf(a))}}const y=this._adjustIndex(c),C=this._lContainer;return DO(C,h,y,!d),a.attachToViewContainerRef(),l0(Bl(C),y,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=Mp(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=bm(this._lContainer,c);d&&(ic(Bl(this._lContainer),c),E0(d[je],d))}detach(a){const c=this._adjustIndex(a,-1),d=bm(this._lContainer,c);return d&&null!=ic(Bl(this._lContainer),c)?new e_(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function Mp(s){return s[8]}function Bl(s){return s[8]||(s[8]=[])}function Ap(s,a){let c;const d=a[s.index];return Ur(d)?c=d:(c=Zm(d,a,null,s),a[s.index]=c,RC(a,c)),oI(c,a,s,d),new VD(c,s,a)}let oI=function xd(s,a,c,d){if(s[Xr])return;let h;h=8&c.type?on(d):function sI(s,a){const c=s[pt],d=c.createComment(""),h=ni(a,s);return hl(c,Tm(c,h),d,function ex(s,a){return s.nextSibling(a)}(c,h),!1),d}(a,c),s[Xr]=h};class Fn{constructor(a){this.queryList=a,this.matches=null}clone(){return new Fn(this.queryList)}setDirty(){this.queryList.setDirty()}}class ny{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,h=[];for(let p=0;p<d;p++){const y=c.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new ny(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==fI(a,c).matches&&this.queries[c].setDirty()}}class jD{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class aI{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const h=null!==c?c.length:0,p=this.getByIndex(d).embeddedTView(a,h);p&&(p.indexInDeclarationView=d,null!==c?c.push(p):c=[p])}return null!==c?new aI(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class cI{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new cI(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(a,c,$D(c,p)),this.matchTNodeWithReadOption(a,c,Ro(c,a,p,!1,!1))}else d===Ns?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Ro(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===vl||h===ty||h===Ns&&4&c.type)this.addMatch(c.index,-2);else{const p=Ro(c,a,h,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function $D(s,a){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function zD(s,a,c,d){return-1===c?function HD(s,a){return 11&s.type?Of(s,a):4&s.type?Ta(s,a):null}(a,s):-2===c?function ry(s,a,c){return c===vl?Of(a,s):c===Ns?Ta(a,s):c===ty?Ap(a,s):void 0}(s,a,d):ua(s,s[je],c,a)}function lI(s,a,c,d){const h=a[Jr].queries[d];if(null===h.matches){const p=s.data,y=c.matches,C=[];for(let b=0;b<y.length;b+=2){const D=y[b];C.push(D<0?null:zD(a,p[D],y[b+1],c.metadata.read))}h.matches=C}return h.matches}function Fs(s,a,c,d){const h=s.queries.getByIndex(c),p=h.matches;if(null!==p){const y=lI(s,a,h,c);for(let C=0;C<p.length;C+=2){const b=p[C];if(b>0)d.push(y[C/2]);else{const D=p[C+1],A=a[-b];for(let N=or;N<A.length;N++){const q=A[N];q[$a]===q[fn]&&Fs(q[je],q,D,d)}if(null!==A[Ha]){const N=A[Ha];for(let q=0;q<N.length;q++){const Y=N[q];Fs(Y[je],Y,D,d)}}}}}return d}function uI(s){const a=ve(),c=Vt(),d=s0();rm(d+1);const h=fI(c,d);if(s.dirty&&function $h(s){return 4==(4&s[bt])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Fs(c,a,d,[]):lI(c,a,h,d);s.reset(p,Ri),s.notifyOnChanges()}return!0}return!1}function dI(s,a,c,d){const h=Vt();if(h.firstCreatePass){const p=Dr();(function sy(s,a,c){null===s.queries&&(s.queries=new aI),s.queries.track(new cI(a,c))})(h,new jD(a,c,d),p.index),function oy(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}!function hI(s,a,c){const d=new tI(4==(4&c));(function IC(s,a,c,d){const h=FC(a);h.push(c),s.firstCreatePass&&J1(s).push(d,h.length-1)})(s,a,d,d.destroy),null===a[Jr]&&(a[Jr]=new ny),a[Jr].queries.push(new Fn(d))}(h,ve(),c)}function iy(){return function Pp(s,a){return s[Jr].queries[a].queryList}(ve(),s0())}function fI(s,a){return s.queries.getByIndex(a)}function Op(s,a){return Ta(s,a)}function cy(s){return!!Qr(s)}const rt=new an("Application Initializer");let CI=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d}),this.appInits=Ke(rt,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const h of this.appInits){const p=h();if(np(p))c.push(p);else if(bT(p)){const y=new Promise((C,b)=>{p.subscribe({complete:C,error:b})});c.push(y)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{d()}).catch(h=>{this.reject(h)}),0===c.length&&d(),this.initialized=!0}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),qe=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();const ye=new an("LocaleId",{providedIn:"root",factory:()=>Ke(ye,dt.Optional|dt.SkipSelf)||function ae(){return typeof $localize<"u"&&$localize.locale||_c}()}),Or=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let iS=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();class HO{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let zO=(()=>{class s{compileModuleSync(c){return new z_(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),p=va(Qr(c).declarations).reduce((y,C)=>{const b=Ft(C);return b&&y.push(new zf(b)),y},[]);return new HO(d,p)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const yy=new an(""),te=new an("");let ql,vy=(()=>{class s{constructor(c,d,h){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ql||(function KO(s){ql=s}(h),h.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{jr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:h})}whenStable(c,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,h){return[]}static#e=this.\u0275fac=function(d){return new(d||s)(Ve(jr),Ve(Ls),Ve(te))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac})}return s})(),Ls=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return ql?.findTestabilityInTree(this,c,d)??null}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})(),Li=null;const cS=new an("AllowMultipleToken"),Sa=new an("PlatformDestroyListeners"),Cy=new an("appBootstrapListener");class $p{constructor(a,c){this.name=a,this.token=c}}function bI(s,a,c=[]){const d=`Platform: ${a}`,h=new an(d);return(p=[])=>{let y=wy();if(!y||y.injector.get(cS,!1)){const C=[...c,...p,{provide:h,useValue:!0}];s?s(C):function Hp(s){if(Li&&!Li.get(cS,!1))throw new ee(400,!1);(function lS(){!function jg(s){Wv=s}(()=>{throw new ee(600,!1)})})(),Li=s;const a=s.get(dS);(function li(s){s.get(w1,null)?.forEach(c=>c())})(s)}(function TI(s=[],a){return co.create({name:a,providers:[{provide:U,useValue:"platform"},{provide:Sa,useValue:new Set([()=>Li=null])},...s]})}(C,d))}return function Qo(s){const a=wy();if(!a)throw new ee(401,!1);return a}()}}function wy(){return Li?.get(dS)??null}let dS=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const h=function YO(s="zone.js",a){return"noop"===s?new aC:"zone.js"===s?new jr(a):s}(d?.ngZone,function hS(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return h.run(()=>{const p=function G_(s,a,c){return new Ea(s,a,c)}(c.moduleType,this.injector,function _S(s){return[{provide:jr,useFactory:s},{provide:td,multi:!0,useFactory:()=>{const a=Ke(JO,{optional:!0});return()=>a.initialize()}},{provide:mS,useFactory:QO},{provide:cC,useFactory:lC}]}(()=>h)),y=p.injector.get(lc,null);return h.runOutsideAngular(()=>{const C=h.onError.subscribe({next:b=>{y.handleError(b)}});p.onDestroy(()=>{Iy(this._modules,p),C.unsubscribe()})}),function fS(s,a,c){try{const d=c();return np(d)?d.catch(h=>{throw a.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(y,h,()=>{const C=p.injector.get(CI);return C.runInitializers(),C.donePromise.then(()=>(function Ze(s){Qe(s,"Expected localeId to be defined"),"string"==typeof s&&(Rs=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(ye,_c)||_c),this._moduleDoBootstrap(p),p))})})}bootstrapModule(c,d=[]){const h=pS({},d);return function EI(s,a,c){const d=new z_(c);return Promise.resolve(d)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(c){const d=c.injector.get(Nd);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new ee(-403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Sa,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(d){return new(d||s)(Ve(co))};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"platform"})}return s})();function pS(s,a){return Array.isArray(a)?a.reduce(pS,s):{...s,...a}}let Nd=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ke(mS),this.zoneIsStable=Ke(cC),this.componentTypes=[],this.components=[],this.isStable=Ke(iS).hasPendingTasks.pipe((0,Fe.w)(c=>c?(0,Ie.of)(!1):this.zoneIsStable),(0,De.x)(),(0,Pe.B)()),this._injector=Ke(jo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const h=c instanceof D1;if(!this._injector.get(CI).done)throw!h&&ja(c),new ee(405,!1);let y;y=h?c:this._injector.get(Pf).resolveComponentFactory(c),this.componentTypes.push(y.componentType);const C=function fs(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Nl),D=y.create(co.NULL,[],d||y.selector,C),A=D.location.nativeElement,N=D.injector.get(yy,null);return N?.registerApplication(A),D.onDestroy(()=>{this.detachView(D.hostView),Iy(this.components,D),N?.unregisterApplication(A)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;Iy(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const d=this._injector.get(Cy,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Iy(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ee(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function Iy(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}const mS=new an("",{providedIn:"root",factory:()=>Ke(lc).handleError.bind(void 0)});function QO(){const s=Ke(jr),a=Ke(lc);return c=>s.runOutsideAngular(()=>a.handleError(c))}let JO=(()=>{class s{constructor(){this.zone=Ke(jr),this.applicationRef=Ke(Nd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||s)};static#t=this.\u0275prov=ft({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function ek(){return!1}let rk=(()=>{class s{static#e=this.__NG_ELEMENT_ID__=MI}return s})();function MI(s){return function Gr(s,a,c){if(Ks(s)&&!c){const d=pi(s.index,a);return new e_(d,d)}return 47&s.type?new e_(a[sr],a):null}(Dr(),ve(),16==(16&s))}class Ma{constructor(){}supports(a){return ud(a)}create(a){return new by(a)}}const wc=(s,a)=>a;class by{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||wc}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,h=0,p=null;for(;c||d;){const y=!d||c&&c.currentIndex<Aa(d,h,p)?c:d,C=Aa(y,h,p),b=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(c=c._next,null==y.previousIndex)h++;else{p||(p=[]);const D=C-h,A=b-h;if(D!=A){for(let q=0;q<D;q++){const Y=q<p.length?p[q]:p[q]=0,ue=Y+q;A<=ue&&ue<D&&(p[q]=Y+1)}p[y.previousIndex]=A-D}}C!==b&&a(y,C,b)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!ud(a))throw new ee(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,p,y,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)p=a[C],y=this._trackByFn(C,p),null!==c&&Object.is(c.trackById,y)?(d&&(c=this._verifyReinsertion(c,p,y,C)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,y,C),d=!0),c=c._next}else h=0,function VC(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[Symbol.iterator]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,C=>{y=this._trackByFn(h,C),null!==c&&Object.is(c.trackById,y)?(d&&(c=this._verifyReinsertion(c,C,y,h)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,y,h),d=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,h){let p;return null===a?p=this._itTail:(p=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,p,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,p,h)):a=this._addAfter(new Ic(c,d),p,h),a}_verifyReinsertion(a,c,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?a=this._reinsertAfter(p,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,p=a._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const h=null===c?this._itHead:c._next;return a._next=h,a._prev=c,null===h?this._itTail=a:h._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new Ld),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ld),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Ic{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Jo{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class Ld{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new Jo,this.map.set(c,d)),d.add(a)}get(a,c){const h=this.map.get(a);return h?h.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Aa(s,a,c){const d=s.previousIndex;if(null===d)return d;let h=0;return c&&d<c.length&&(h=c[d]),d+a+h}class OI{constructor(){}supports(a){return a instanceof Map||Wf(a)}create(){return new Ud}}class Ud{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||Wf(a)))throw new ee(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(h,d);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,c);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const d=new kI(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class kI{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zp(){return new xa([new Ma])}let xa=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:zp});constructor(c){this.factories=c}static create(c,d){if(null!=d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||zp()),deps:[[s,new He,new oe]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(null!=d)return d;throw new ee(901,!1)}}return s})();function Bd(){return new Ty([new OI])}let Ty=(()=>{class s{static#e=this.\u0275prov=ft({token:s,providedIn:"root",factory:Bd});constructor(c){this.factories=c}static create(c,d){if(d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||Bd()),deps:[[s,new He,new oe]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(d)return d;throw new ee(901,!1)}}return s})();const ak=bI(null,"core",[]);let ck=(()=>{class s{constructor(c){}static#e=this.\u0275fac=function(d){return new(d||s)(Ve(Nd))};static#t=this.\u0275mod=hu({type:s});static#n=this.\u0275inj=Pn({})}return s})();function fk(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function ka(s){const a=Ft(s);if(!a)return null;const c=new zf(a);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},3399:(st,Ee,F)=>{F.d(Ee,{Z:()=>Je});var u=F(9058),V=F(4537),L=F(7592),ne=F(7879);class ge{constructor(Se,Te){this._delegate=Se,this.firebase=Te,(0,L._addComponent)(Se,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=Se.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this._delegate.automaticDataCollectionEnabled=Se}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Se=>{this._delegate.checkDestroyed(),Se()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Se,Te=L._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(Se);return!ot.isInitialized()&&"EXPLICIT"===(null===(tt=ot.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:Te})}_removeServiceInstance(Se,Te=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Se).clearInstance(Te)}_addComponent(Se){(0,L._addComponent)(this._delegate,Se)}_addOrOverwriteComponent(Se){(0,L._addOrOverwriteComponent)(this._delegate,Se)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function De(){const Ce=function Fe(Ce){const Se={},Te={__esModule:!0,initializeApp:function ee(Ne,j={}){const we=L.initializeApp(Ne,j);if((0,u.r3)(Se,we.name))return Se[we.name];const Ue=new Ce(we,Te);return Se[we.name]=Ue,Ue},app:ot,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function re(Ne){const j=Ne.name,we=j.replace("-compat","");if(L._registerComponent(Ne)&&"PUBLIC"===Ne.type){const Ue=(lt=ot())=>{if("function"!=typeof lt[we])throw Pe.create("invalid-app-argument",{appName:j});return lt[we]()};void 0!==Ne.serviceProps&&(0,u.ZB)(Ue,Ne.serviceProps),Te[we]=Ue,Ce.prototype[we]=function(...lt){return this._getService.bind(this,j).apply(this,Ne.multipleInstances?lt:[])}}return"PUBLIC"===Ne.type?Te[we]:null},removeApp:function tt(Ne){delete Se[Ne]},useAsService:function he(Ne,j){return"serverAuth"===j?null:j},modularAPIs:L}};function ot(Ne){if(!(0,u.r3)(Se,Ne=Ne||L._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:Ne});return Se[Ne]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function de(){return Object.keys(Se).map(Ne=>Se[Ne])}}),ot.App=Ce,Te}(ge);return Ce.INTERNAL=Object.assign(Object.assign({},Ce.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function Se(Te){(0,u.ZB)(Ce,Te)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Ce}(),G=new ne.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ce=self.firebase.SDK_VERSION;Ce&&Ce.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=B;!function xe(Ce){(0,L.registerVersion)("@firebase/app-compat","0.2.13",Ce)}()},7592:(st,Ee,F)=>{F.r(Ee),F.d(Ee,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Pn,_DEFAULT_ENTRY_NAME:()=>ie,_addComponent:()=>pe,_addOrOverwriteComponent:()=>ke,_apps:()=>le,_clearComponents:()=>ht,_components:()=>se,_getProvider:()=>Be,_registerComponent:()=>Qe,_removeServiceInstance:()=>tn,deleteApp:()=>Di,getApp:()=>rn,getApps:()=>zn,initializeApp:()=>wn,onLog:()=>Gn,registerVersion:()=>pr,setLogLevel:()=>Kr});var u=F(5861),V=F(4537),L=F(7879),ne=F(9058),ge=F(1878);class Ie{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function Pe(Ge){const _e=Ge.getComponent();return"VERSION"===_e?.type}(Xe)){const it=Xe.getImmediate();return`${it.library}/${it.version}`}return null}).filter(Xe=>Xe).join(" ")}}const Fe="@firebase/app",B=new L.Yd("@firebase/app"),ie="[DEFAULT]",ce={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},le=new Map,se=new Map;function pe(Ge,_e){try{Ge.container.addComponent(_e)}catch(Xe){B.debug(`Component ${_e.name} failed to register with FirebaseApp ${Ge.name}`,Xe)}}function ke(Ge,_e){Ge.container.addOrOverwriteComponent(_e)}function Qe(Ge){const _e=Ge.name;if(se.has(_e))return B.debug(`There were multiple attempts to register component ${_e}.`),!1;se.set(_e,Ge);for(const Xe of le.values())pe(Xe,Ge);return!0}function Be(Ge,_e){const Xe=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),Ge.container.getProvider(_e)}function tn(Ge,_e,Xe=ie){Be(Ge,_e).clearInstance(Xe)}function ht(){se.clear()}const ft=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nn{constructor(_e,Xe,it){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=it,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}const Pn="9.23.0";function wn(Ge,_e={}){let Xe=Ge;"object"!=typeof _e&&(_e={name:_e});const it=Object.assign({name:ie,automaticDataCollectionEnabled:!1},_e),Nt=it.name;if("string"!=typeof Nt||!Nt)throw ft.create("bad-app-name",{appName:String(Nt)});if(Xe||(Xe=(0,ne.aH)()),!Xe)throw ft.create("no-options");const Bt=le.get(Nt);if(Bt){if((0,ne.vZ)(Xe,Bt.options)&&(0,ne.vZ)(it,Bt.config))return Bt;throw ft.create("duplicate-app",{appName:Nt})}const Xn=new V.H0(Nt);for(const $ of se.values())Xn.addComponent($);const H=new nn(Xe,it,Xn);return le.set(Nt,H),H}function rn(Ge=ie){const _e=le.get(Ge);if(!_e&&Ge===ie&&(0,ne.aH)())return wn();if(!_e)throw ft.create("no-app",{appName:Ge});return _e}function zn(){return Array.from(le.values())}function Di(Ge){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,u.Z)(function*(Ge){const _e=Ge.name;le.has(_e)&&(le.delete(_e),yield Promise.all(Ge.container.getProviders().map(Xe=>Xe.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function pr(Ge,_e,Xe){var it;let Nt=null!==(it=ce[Ge])&&void 0!==it?it:Ge;Xe&&(Nt+=`-${Xe}`);const Bt=Nt.match(/\s|\//),Xn=_e.match(/\s|\//);if(Bt||Xn){const H=[`Unable to register library "${Nt}" with version "${_e}":`];return Bt&&H.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),Bt&&Xn&&H.push("and"),Xn&&H.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void B.warn(H.join(" "))}Qe(new V.wA(`${Nt}-version`,()=>({library:Nt,version:_e}),"VERSION"))}function Gn(Ge,_e){if(null!==Ge&&"function"!=typeof Ge)throw ft.create("invalid-log-argument");(0,L.Am)(Ge,_e)}function Kr(Ge){(0,L.Ub)(Ge)}const Cs="firebase-heartbeat-database",dt=1,mt="firebase-heartbeat-store";let Tt=null;function sn(){return Tt||(Tt=(0,ge.X3)(Cs,dt,{upgrade:(Ge,_e)=>{0===_e&&Ge.createObjectStore(mt)}}).catch(Ge=>{throw ft.create("idb-open",{originalErrorMessage:Ge.message})})),Tt}function Yr(){return(Yr=(0,u.Z)(function*(Ge){try{return yield(yield sn()).transaction(mt).objectStore(mt).get(ws(Ge))}catch(_e){if(_e instanceof ne.ZR)B.warn(_e.message);else{const Xe=ft.create("idb-get",{originalErrorMessage:_e?.message});B.warn(Xe.message)}}})).apply(this,arguments)}function Rt(Ge,_e){return On.apply(this,arguments)}function On(){return(On=(0,u.Z)(function*(Ge,_e){try{const it=(yield sn()).transaction(mt,"readwrite");yield it.objectStore(mt).put(_e,ws(Ge)),yield it.done}catch(Xe){if(Xe instanceof ne.ZR)B.warn(Xe.message);else{const it=ft.create("idb-set",{originalErrorMessage:Xe?.message});B.warn(it.message)}}})).apply(this,arguments)}function ws(Ge){return`${Ge.name}!${Ge.options.appId}`}class Ut{constructor(_e){this.container=_e,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new is(Xe),this._heartbeatsCachePromise=this._storage.read().then(it=>(this._heartbeatsCache=it,it))}triggerHeartbeat(){var _e=this;return(0,u.Z)(function*(){const it=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=kn();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),_e._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!_e._heartbeatsCache.heartbeats.some(Bt=>Bt.date===Nt))return _e._heartbeatsCache.heartbeats.push({date:Nt,agent:it}),_e._heartbeatsCache.heartbeats=_e._heartbeatsCache.heartbeats.filter(Bt=>{const Xn=new Date(Bt.date).valueOf();return Date.now()-Xn<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,u.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache||0===_e._heartbeatsCache.heartbeats.length)return"";const Xe=kn(),{heartbeatsToSend:it,unsentEntries:Nt}=function ji(Ge,_e=1024){const Xe=[];let it=Ge.slice();for(const Nt of Ge){const Bt=Xe.find(Xn=>Xn.agent===Nt.agent);if(Bt){if(Bt.dates.push(Nt.date),ss(Xe)>_e){Bt.dates.pop();break}}else if(Xe.push({agent:Nt.agent,dates:[Nt.date]}),ss(Xe)>_e){Xe.pop();break}it=it.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:it}}(_e._heartbeatsCache.heartbeats),Bt=(0,ne.L)(JSON.stringify({version:2,heartbeats:it}));return _e._heartbeatsCache.lastSentHeartbeatDate=Xe,Nt.length>0?(_e._heartbeatsCache.heartbeats=Nt,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache.heartbeats=[],_e._storage.overwrite(_e._heartbeatsCache)),Bt})()}}function kn(){return(new Date).toISOString().substring(0,10)}class is{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,u.Z)(function*(){return(yield _e._canUseIndexedDBPromise)&&(yield function di(Ge){return Yr.apply(this,arguments)}(_e.app))||{heartbeats:[]}})()}overwrite(_e){var Xe=this;return(0,u.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Bt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(it=_e.lastSentHeartbeatDate)&&void 0!==it?it:Bt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}})()}add(_e){var Xe=this;return(0,u.Z)(function*(){var it;if(yield Xe._canUseIndexedDBPromise){const Bt=yield Xe.read();return Rt(Xe.app,{lastSentHeartbeatDate:null!==(it=_e.lastSentHeartbeatDate)&&void 0!==it?it:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,..._e.heartbeats]})}})()}}function ss(Ge){return(0,ne.L)(JSON.stringify({version:2,heartbeats:Ge})).length}!function gr(Ge){Qe(new V.wA("platform-logger",_e=>new Ie(_e),"PRIVATE")),Qe(new V.wA("heartbeat",_e=>new Ut(_e),"PRIVATE")),pr(Fe,"0.9.13",Ge),pr(Fe,"0.9.13","esm2017"),pr("fire-js","")}("")},120:(st,Ee,F)=>{F.d(Ee,{Z:()=>u.Z});var u=F(3399);u.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(st,Ee,F)=>{F.r(Ee);var u=F(5861),V=F(3399),L=F(6710),ne=F(9058),Pe=(F(7592),F(7879),F(4537));function Fe(){return window}function G(){return G=(0,u.Z)(function*(O,k,x){var K;const{BuildInfo:me}=Fe();(0,L.as)(k.sessionId,"AuthEvent did not contain a session ID");const Ve=yield function Te(O){return tt.apply(this,arguments)}(k.sessionId),yt={};return(0,L.at)()?yt.ibi=me.packageName:(0,L.au)()?yt.apn=me.packageName:(0,L.av)(O,"operation-not-supported-in-this-environment"),me.displayName&&(yt.appDisplayName=me.displayName),yt.sessionId=Ve,(0,L.aw)(O,x,k.type,void 0,null!==(K=k.eventId)&&void 0!==K?K:void 0,yt)}),G.apply(this,arguments)}function Oe(){return(Oe=(0,u.Z)(function*(O){const{BuildInfo:k}=Fe(),x={};(0,L.at)()?x.iosBundleId=k.packageName:(0,L.au)()?x.androidPackageName=k.packageName:(0,L.av)(O,"operation-not-supported-in-this-environment"),yield(0,L.ax)(O,x)})).apply(this,arguments)}function Ce(){return(Ce=(0,u.Z)(function*(O,k,x){const{cordova:K}=Fe();let me=()=>{};try{yield new Promise((Ve,yt)=>{let Ke=null;function Qt(){var xt;Ve();const $i=null===(xt=K.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof $i&&$i(),"function"==typeof x?.close&&x.close()}function Ct(){Ke||(Ke=window.setTimeout(()=>{yt((0,L.az)(O,"redirect-cancelled-by-user"))},2e3))}function hn(){"visible"===document?.visibilityState&&Ct()}k.addPassiveListener(Qt),document.addEventListener("resume",Ct,!1),(0,L.au)()&&document.addEventListener("visibilitychange",hn,!1),me=()=>{k.removePassiveListener(Qt),document.removeEventListener("resume",Ct,!1),document.removeEventListener("visibilitychange",hn,!1),Ke&&window.clearTimeout(Ke)}})}finally{me()}})).apply(this,arguments)}function tt(){return(tt=(0,u.Z)(function*(O){const k=function ot(O){if((0,L.as)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(O);const k=new ArrayBuffer(O.length),x=new Uint8Array(k);for(let K=0;K<O.length;K++)x[K]=O.charCodeAt(K);return x}(O),x=yield crypto.subtle.digest("SHA-256",k);return Array.from(new Uint8Array(x)).map(me=>me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class de extends L.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(k=>{this.resolveInialized=k})}addPassiveListener(k){this.passiveListeners.add(k)}removePassiveListener(k){this.passiveListeners.delete(k)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(k){return this.resolveInialized(),this.passiveListeners.forEach(x=>x(k)),super.onEvent(k)}initialized(){var k=this;return(0,u.Z)(function*(){yield k.initPromise})()}}function Ne(O){return j.apply(this,arguments)}function j(){return(j=(0,u.Z)(function*(O){const k=yield lt()._get(en(O));return k&&(yield lt()._remove(en(O))),k})).apply(this,arguments)}function Ue(){const O=[];for(let x=0;x<20;x++){const K=Math.floor(62*Math.random());O.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(K))}return O.join("")}function lt(){return(0,L.aC)(L.b)}function en(O){return(0,L.aD)("authEvent",O.config.apiKey,O.name)}function Cn(O){if(!O?.includes("?"))return{};const[k,...x]=O.split("?");return(0,ne.zd)(x.join("?"))}const ie=class Zr{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aE,this._overrideRedirectResult=L.aF}_initialize(k){var x=this;return(0,u.Z)(function*(){const K=k._key();let me=x.eventManagers.get(K);return me||(me=new de(k),x.eventManagers.set(K,me),x.attachCallbackListeners(k,me)),me})()}_openPopup(k){(0,L.av)(k,"operation-not-supported-in-this-environment")}_openRedirect(k,x,K,me){var Ve=this;return(0,u.Z)(function*(){!function Se(O){var k,x,K,me,Ve,yt,Ke,Qt,Ct,hn;const xt=Fe();(0,L.aA)("function"==typeof(null===(k=xt?.universalLinks)||void 0===k?void 0:k.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aA)(typeof(null===(x=xt?.BuildInfo)||void 0===x?void 0:x.packageName)<"u",O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aA)("function"==typeof(null===(Ve=null===(me=null===(K=xt?.cordova)||void 0===K?void 0:K.plugins)||void 0===me?void 0:me.browsertab)||void 0===Ve?void 0:Ve.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aA)("function"==typeof(null===(Qt=null===(Ke=null===(yt=xt?.cordova)||void 0===yt?void 0:yt.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===Qt?void 0:Qt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aA)("function"==typeof(null===(hn=null===(Ct=xt?.cordova)||void 0===Ct?void 0:Ct.InAppBrowser)||void 0===hn?void 0:hn.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(k);const yt=yield Ve._initialize(k);yield yt.initialized(),yt.resetRedirect(),(0,L.aG)(),yield Ve._originValidation(k);const Ke=function re(O,k,x=null){return{type:k,eventId:x,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:O.tenantId,error:(0,L.az)(O,"no-auth-event")}}(k,K,me);yield function he(O,k){return lt()._set(en(O),k)}(k,Ke);const Qt=yield function B(O,k,x){return G.apply(this,arguments)}(k,Ke,x),Ct=yield function xe(O){const{cordova:k}=Fe();return new Promise(x=>{k.plugins.browsertab.isAvailable(K=>{let me=null;K?k.plugins.browsertab.openUrl(O):me=k.InAppBrowser.open(O,(0,L.ay)()?"_blank":"_system","location=yes"),x(me)})})}(Qt);return function Je(O,k,x){return Ce.apply(this,arguments)}(k,yt,Ct)})()}_isIframeWebStorageSupported(k,x){throw new Error("Method not implemented.")}_originValidation(k){const x=k._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function X(O){return Oe.apply(this,arguments)}(k)),this.originValidationPromises[x]}attachCallbackListeners(k,x){const{universalLinks:K,handleOpenURL:me,BuildInfo:Ve}=Fe(),yt=setTimeout((0,u.Z)(function*(){yield Ne(k),x.onEvent(ce())}),500),Ke=function(){var hn=(0,u.Z)(function*(xt){clearTimeout(yt);const $i=yield Ne(k);let Fc=null;$i&&xt?.url&&(Fc=function we(O,k){var x,K;const me=function yn(O){const k=Cn(O),x=k.link?decodeURIComponent(k.link):void 0,K=Cn(x).link,me=k.deep_link_id?decodeURIComponent(k.deep_link_id):void 0;return Cn(me).link||me||K||x||O}(k);if(me.includes("/__/auth/callback")){const Ve=Cn(me),yt=Ve.firebaseError?function Hn(O){try{return JSON.parse(O)}catch{return null}}(decodeURIComponent(Ve.firebaseError)):null,Ke=null===(K=null===(x=yt?.code)||void 0===x?void 0:x.split("auth/"))||void 0===K?void 0:K[1],Qt=Ke?(0,L.az)(Ke):null;return Qt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Qt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:me,postBody:null}}return null}($i,xt.url)),x.onEvent(Fc||ce())});return function($i){return hn.apply(this,arguments)}}();typeof K<"u"&&"function"==typeof K.subscribe&&K.subscribe(null,Ke);const Qt=me,Ct=`${Ve.packageName.toLowerCase()}://`;Fe().handleOpenURL=function(){var hn=(0,u.Z)(function*(xt){if(xt.toLowerCase().startsWith(Ct)&&Ke({url:xt}),"function"==typeof Qt)try{Qt(xt)}catch($i){console.error($i)}});return function(xt){return hn.apply(this,arguments)}}()}};function ce(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.az)("no-auth-event")}}function Qe(){var O;return(null===(O=self?.location)||void 0===O?void 0:O.protocol)||null}function tn(O=(0,ne.z$)()){return!("file:"!==Qe()&&"ionic:"!==Qe()&&"capacitor:"!==Qe()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pn(){try{const O=self.localStorage,k=L.aL();if(O)return O.setItem(k,"1"),O.removeItem(k),!function nn(O=(0,ne.z$)()){return function Yt(){return(0,ne.w1)()&&11===document?.documentMode}()||function ft(O=(0,ne.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,ne.hl)()}catch{return wn()&&(0,ne.hl)()}return!1}function wn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function rn(){return(function Be(){return"http:"===Qe()||"https:"===Qe()}()||(0,ne.ru)()||tn())&&!function ht(){return(0,ne.b$)()||(0,ne.UG)()}()&&Pn()&&!wn()}function zn(){return tn()&&typeof document<"u"}function Lr(){return(Lr=(0,u.Z)(function*(){return!!zn()&&new Promise(O=>{const k=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(k),O(!0)})})})).apply(this,arguments)}const Gn={LOCAL:"local",NONE:"none",SESSION:"session"},Kr=L.aA,Cs="persistence";function mt(O){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,u.Z)(function*(O){yield O._initializationPromise;const k=di(),x=L.aD(Cs,O.config.apiKey,O.name);k&&k.setItem(x,O._getPersistence())})).apply(this,arguments)}function di(){var O;try{return(null===(O=function pr(){return typeof window<"u"?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch{return null}}const Yr=L.aA;class Rt{constructor(){this.browserResolver=L.aC(L.k),this.cordovaResolver=L.aC(ie),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aE,this._overrideRedirectResult=L.aF}_initialize(k){var x=this;return(0,u.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._initialize(k)})()}_openPopup(k,x,K,me){var Ve=this;return(0,u.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openPopup(k,x,K,me)})()}_openRedirect(k,x,K,me){var Ve=this;return(0,u.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openRedirect(k,x,K,me)})()}_isIframeWebStorageSupported(k,x){this.assertedUnderlyingResolver._isIframeWebStorageSupported(k,x)}_originValidation(k){return this.assertedUnderlyingResolver._originValidation(k)}get _shouldInitProactively(){return zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var k=this;return(0,u.Z)(function*(){if(k.underlyingResolver)return;const x=yield function Di(){return Lr.apply(this,arguments)}();k.underlyingResolver=x?k.cordovaResolver:k.browserResolver})()}}function On(O){return O.unwrap()}function Zt(O){return Ut(O)}function Ut(O){const{_tokenResponse:k}=O instanceof ne.ZR?O.customData:O;if(!k)return null;if(!(O instanceof ne.ZR)&&"temporaryProof"in k&&"phoneNumber"in k)return L.P.credentialFromResult(O);const x=k.providerId;if(!x||x===L.p.PASSWORD)return null;let K;switch(x){case L.p.GOOGLE:K=L.V;break;case L.p.FACEBOOK:K=L.U;break;case L.p.GITHUB:K=L.W;break;case L.p.TWITTER:K=L.Z;break;default:const{oauthIdToken:me,oauthAccessToken:Ve,oauthTokenSecret:yt,pendingToken:Ke,nonce:Qt}=k;return Ve||yt||me||Ke?Ke?x.startsWith("saml.")?L.aO._create(x,Ke):L.L._fromParams({providerId:x,signInMethod:x,pendingToken:Ke,idToken:me,accessToken:Ve}):new L.X(x).credential({idToken:me,accessToken:Ve,rawNonce:Qt}):null}return O instanceof ne.ZR?K.credentialFromError(O):K.credentialFromResult(O)}function kn(O,k){return k.catch(x=>{throw x instanceof ne.ZR&&function wo(O,k){var x;const K=null===(x=k.customData)||void 0===x?void 0:x._tokenResponse;if("auth/multi-factor-auth-required"===k?.code)k.resolver=new ss(O,L.aq(O,k));else if(K){const me=Ut(k),Ve=k;me&&(Ve.credential=me,Ve.tenantId=K.tenantId||void 0,Ve.email=K.email||void 0,Ve.phoneNumber=K.phoneNumber||void 0)}}(O,x),x}).then(x=>{const me=x.user;return{operationType:x.operationType,credential:Zt(x),additionalUserInfo:L.ao(x),user:gr.getOrCreate(me)}})}function ji(O,k){return is.apply(this,arguments)}function is(){return(is=(0,u.Z)(function*(O,k){const x=yield k;return{verificationId:x.verificationId,confirm:K=>kn(O,x.confirm(K))}})).apply(this,arguments)}class ss{constructor(k,x){this.resolver=x,this.auth=function ws(O){return O.wrapped()}(k)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(k){return kn(On(this.auth),this.resolver.resolveSignIn(k))}}class gr{constructor(k){this._delegate=k,this.multiFactor=L.ar(k)}static getOrCreate(k){return gr.USER_MAP.has(k)||gr.USER_MAP.set(k,new gr(k)),gr.USER_MAP.get(k)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(k){return this._delegate.getIdTokenResult(k)}getIdToken(k){return this._delegate.getIdToken(k)}linkAndRetrieveDataWithCredential(k){return this.linkWithCredential(k)}linkWithCredential(k){var x=this;return(0,u.Z)(function*(){return kn(x.auth,L.a0(x._delegate,k))})()}linkWithPhoneNumber(k,x){var K=this;return(0,u.Z)(function*(){return ji(K.auth,L.l(K._delegate,k,x))})()}linkWithPopup(k){var x=this;return(0,u.Z)(function*(){return kn(x.auth,L.d(x._delegate,k,Rt))})()}linkWithRedirect(k){var x=this;return(0,u.Z)(function*(){return yield mt(L.aH(x.auth)),L.g(x._delegate,k,Rt)})()}reauthenticateAndRetrieveDataWithCredential(k){return this.reauthenticateWithCredential(k)}reauthenticateWithCredential(k){var x=this;return(0,u.Z)(function*(){return kn(x.auth,L.a1(x._delegate,k))})()}reauthenticateWithPhoneNumber(k,x){return ji(this.auth,L.r(this._delegate,k,x))}reauthenticateWithPopup(k){return kn(this.auth,L.e(this._delegate,k,Rt))}reauthenticateWithRedirect(k){var x=this;return(0,u.Z)(function*(){return yield mt(L.aH(x.auth)),L.h(x._delegate,k,Rt)})()}sendEmailVerification(k){return L.ae(this._delegate,k)}unlink(k){var x=this;return(0,u.Z)(function*(){return yield L.an(x._delegate,k),x})()}updateEmail(k){return L.aj(this._delegate,k)}updatePassword(k){return L.ak(this._delegate,k)}updatePhoneNumber(k){return L.u(this._delegate,k)}updateProfile(k){return L.ai(this._delegate,k)}verifyBeforeUpdateEmail(k,x){return L.af(this._delegate,k,x)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}gr.USER_MAP=new WeakMap;const Ge=L.aA;let _e=(()=>{class O{constructor(x,K){if(this.app=x,K.isInitialized())return this._delegate=K.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:me}=x.options;Ge(me,"invalid-api-key",{appName:x.name}),Ge(me,"invalid-api-key",{appName:x.name});const Ve=typeof window<"u"?Rt:void 0;this._delegate=K.initialize({options:{persistence:it(me,x.name),popupRedirectResolver:Ve}}),this._delegate._updateErrorMap(L.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?gr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(x){this._delegate.languageCode=x}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(x){this._delegate.tenantId=x}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(x,K){L.I(this._delegate,x,K)}applyActionCode(x){return L.a5(this._delegate,x)}checkActionCode(x){return L.a6(this._delegate,x)}confirmPasswordReset(x,K){return L.a4(this._delegate,x,K)}createUserWithEmailAndPassword(x,K){var me=this;return(0,u.Z)(function*(){return kn(me._delegate,L.a8(me._delegate,x,K))})()}fetchProvidersForEmail(x){return this.fetchSignInMethodsForEmail(x)}fetchSignInMethodsForEmail(x){return L.ad(this._delegate,x)}isSignInWithEmailLink(x){return L.ab(this._delegate,x)}getRedirectResult(){var x=this;return(0,u.Z)(function*(){Ge(rn(),x._delegate,"operation-not-supported-in-this-environment");const K=yield L.j(x._delegate,Rt);return K?kn(x._delegate,Promise.resolve(K)):{credential:null,user:null}})()}addFrameworkForLogging(x){!function le(O,k){(0,L.aH)(O)._logFramework(k)}(this._delegate,x)}onAuthStateChanged(x,K,me){const{next:Ve,error:yt,complete:Ke}=Xe(x,K,me);return this._delegate.onAuthStateChanged(Ve,yt,Ke)}onIdTokenChanged(x,K,me){const{next:Ve,error:yt,complete:Ke}=Xe(x,K,me);return this._delegate.onIdTokenChanged(Ve,yt,Ke)}sendSignInLinkToEmail(x,K){return L.aa(this._delegate,x,K)}sendPasswordResetEmail(x,K){return L.a3(this._delegate,x,K||void 0)}setPersistence(x){var K=this;return(0,u.Z)(function*(){let me;switch(function dt(O,k){Kr(Object.values(Gn).includes(k),O,"invalid-persistence-type"),(0,ne.b$)()?Kr(k!==Gn.SESSION,O,"unsupported-persistence-type"):(0,ne.UG)()?Kr(k===Gn.NONE,O,"unsupported-persistence-type"):wn()?Kr(k===Gn.NONE||k===Gn.LOCAL&&(0,ne.hl)(),O,"unsupported-persistence-type"):Kr(k===Gn.NONE||Pn(),O,"unsupported-persistence-type")}(K._delegate,x),x){case Gn.SESSION:me=L.a;break;case Gn.LOCAL:me=(yield L.aC(L.i)._isAvailable())?L.i:L.b;break;case Gn.NONE:me=L.N;break;default:return L.av("argument-error",{appName:K._delegate.name})}return K._delegate.setPersistence(me)})()}signInAndRetrieveDataWithCredential(x){return this.signInWithCredential(x)}signInAnonymously(){return kn(this._delegate,L._(this._delegate))}signInWithCredential(x){return kn(this._delegate,L.$(this._delegate,x))}signInWithCustomToken(x){return kn(this._delegate,L.a2(this._delegate,x))}signInWithEmailAndPassword(x,K){return kn(this._delegate,L.a9(this._delegate,x,K))}signInWithEmailLink(x,K){return kn(this._delegate,L.ac(this._delegate,x,K))}signInWithPhoneNumber(x,K){return ji(this._delegate,L.s(this._delegate,x,K))}signInWithPopup(x){var K=this;return(0,u.Z)(function*(){return Ge(rn(),K._delegate,"operation-not-supported-in-this-environment"),kn(K._delegate,L.c(K._delegate,x,Rt))})()}signInWithRedirect(x){var K=this;return(0,u.Z)(function*(){return Ge(rn(),K._delegate,"operation-not-supported-in-this-environment"),yield mt(K._delegate),L.f(K._delegate,x,Rt)})()}updateCurrentUser(x){return this._delegate.updateCurrentUser(x)}verifyPasswordResetCode(x){return L.a7(this._delegate,x)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=Gn,O})();function Xe(O,k,x){let K=O;"function"!=typeof O&&({next:K,error:k,complete:x}=O);const me=K;return{next:yt=>me(yt&&gr.getOrCreate(yt)),error:k,complete:x}}function it(O,k){const x=function sn(O,k){const x=di();if(!x)return[];const K=L.aD(Cs,O,k);switch(x.getItem(K)){case Gn.NONE:return[L.N];case Gn.LOCAL:return[L.i,L.a];case Gn.SESSION:return[L.a];default:return[]}}(O,k);if(typeof self<"u"&&!x.includes(L.i)&&x.push(L.i),typeof window<"u")for(const K of[L.b,L.a])x.includes(K)||x.push(K);return x.includes(L.N)||x.push(L.N),x}class Nt{constructor(){this.providerId="phone",this._delegate=new L.P(On(V.Z.auth()))}static credential(k,x){return L.P.credential(k,x)}verifyPhoneNumber(k,x){return this._delegate.verifyPhoneNumber(k,x)}unwrap(){return this._delegate}}Nt.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,Nt.PROVIDER_ID=L.P.PROVIDER_ID;const Bt=L.aA;class Xn{constructor(k,x,K=V.Z.app()){var me;Bt(null===(me=K.options)||void 0===me?void 0:me.apiKey,"invalid-api-key",{appName:K.name}),this._delegate=new L.R(k,x,K.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $(O){O.INTERNAL.registerComponent(new Pe.wA("auth-compat",k=>{const x=k.getProvider("app-compat").getImmediate(),K=k.getProvider("auth");return new _e(x,K)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.Q,FacebookAuthProvider:L.U,GithubAuthProvider:L.W,GoogleAuthProvider:L.V,OAuthProvider:L.X,SAMLAuthProvider:L.Y,PhoneAuthProvider:Nt,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:Xn,TwitterAuthProvider:L.Z,Auth:_e,AuthCredential:L.J,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},4537:(st,Ee,F)=>{F.d(Ee,{H0:()=>Fe,wA:()=>L});var u=F(5861),V=F(9058);class L{constructor(B,G,X){this.name=B,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ne="[DEFAULT]";class ge{constructor(B,G){this.name=B,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const G=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(G)){const X=new V.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:G});Oe&&X.resolve(Oe)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(B){var G;const X=this.normalizeInstanceIdentifier(B?.identifier),Oe=null!==(G=B?.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(xe){if(Oe)return null;throw xe}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function Pe(De){return"EAGER"===De.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[G,X]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(G);try{const xe=this.getOrInitializeService({instanceIdentifier:Oe});X.resolve(xe)}catch{}}}}clearInstance(B=ne){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,u.Z)(function*(){const G=Array.from(B.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ne){return this.instances.has(B)}getOptions(B=ne){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:G={}}=B,X=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[xe,Je]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(xe)&&Je.resolve(Oe);return Oe}onInit(B,G){var X;const Oe=this.normalizeInstanceIdentifier(G),xe=null!==(X=this.onInitCallbacks.get(Oe))&&void 0!==X?X:new Set;xe.add(B),this.onInitCallbacks.set(Oe,xe);const Je=this.instances.get(Oe);return Je&&B(Je,Oe),()=>{xe.delete(B)}}invokeOnInitCallbacks(B,G){const X=this.onInitCallbacks.get(G);if(X)for(const Oe of X)try{Oe(B,G)}catch{}}getOrInitializeService({instanceIdentifier:B,options:G={}}){let X=this.instances.get(B);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(De=B,De===ne?void 0:De),options:G}),this.instances.set(B,X),this.instancesOptions.set(B,G),this.invokeOnInitCallbacks(X,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,X)}catch{}var De;return X||null}normalizeInstanceIdentifier(B=ne){return this.component?this.component.multipleInstances?B:ne:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const G=this.getProvider(B.name);if(G.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);G.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const G=new ge(B,this);return this.providers.set(B,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(st,Ee,F)=>{F.d(Ee,{Am:()=>De,Ub:()=>Fe,Yd:()=>Pe,in:()=>V});const u=[];var V=function(B){return B[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",B}(V||{});const L={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ne=V.INFO,ge={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},Ie=(B,G,...X)=>{if(G<B.logLevel)return;const Oe=(new Date).toISOString(),xe=ge[G];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[xe](`[${Oe}]  ${B.name}:`,...X)};class Pe{constructor(G){this.name=G,this._logLevel=ne,this._logHandler=Ie,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in V))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...G),this._logHandler(this,V.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...G),this._logHandler(this,V.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,V.INFO,...G),this._logHandler(this,V.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,V.WARN,...G),this._logHandler(this,V.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...G),this._logHandler(this,V.ERROR,...G)}}function Fe(B){u.forEach(G=>{G.setLogLevel(B)})}function De(B,G){for(const X of u){let Oe=null;G&&G.level&&(Oe=L[G.level]),X.userLogHandler=null===B?null:(xe,Je,...Ce)=>{const Se=Ce.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch{return null}}).filter(Te=>Te).join(" ");Je>=(Oe??xe.logLevel)&&B({level:V[Je].toLowerCase(),message:Se,args:Ce,type:xe.name})}}}},1878:(st,Ee,F)=>{F.d(Ee,{X3:()=>ot});var u=F(5861);const V=(j,we)=>we.some(Ue=>j instanceof Ue);let L,ne;const Pe=new WeakMap,Fe=new WeakMap,De=new WeakMap,B=new WeakMap,G=new WeakMap;let xe={get(j,we,Ue){if(j instanceof IDBTransaction){if("done"===we)return Fe.get(j);if("objectStoreNames"===we)return j.objectStoreNames||De.get(j);if("store"===we)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return Te(j[we])},set:(j,we,Ue)=>(j[we]=Ue,!0),has:(j,we)=>j instanceof IDBTransaction&&("done"===we||"store"===we)||we in j};function Se(j){return"function"==typeof j?function Ce(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ie(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...we){return j.apply(tt(this),we),Te(Pe.get(this))}:function(...we){return Te(j.apply(tt(this),we))}:function(we,...Ue){const lt=j.call(tt(this),we,...Ue);return De.set(lt,we.sort?we.sort():[we]),Te(lt)}}(j):(j instanceof IDBTransaction&&function Oe(j){if(Fe.has(j))return;const we=new Promise((Ue,lt)=>{const en=()=>{j.removeEventListener("complete",Hn),j.removeEventListener("error",yn),j.removeEventListener("abort",yn)},Hn=()=>{Ue(),en()},yn=()=>{lt(j.error||new DOMException("AbortError","AbortError")),en()};j.addEventListener("complete",Hn),j.addEventListener("error",yn),j.addEventListener("abort",yn)});Fe.set(j,we)}(j),V(j,function ge(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,xe):j)}function Te(j){if(j instanceof IDBRequest)return function X(j){const we=new Promise((Ue,lt)=>{const en=()=>{j.removeEventListener("success",Hn),j.removeEventListener("error",yn)},Hn=()=>{Ue(Te(j.result)),en()},yn=()=>{lt(j.error),en()};j.addEventListener("success",Hn),j.addEventListener("error",yn)});return we.then(Ue=>{Ue instanceof IDBCursor&&Pe.set(Ue,j)}).catch(()=>{}),G.set(we,j),we}(j);if(B.has(j))return B.get(j);const we=Se(j);return we!==j&&(B.set(j,we),G.set(we,j)),we}const tt=j=>G.get(j);function ot(j,we,{blocked:Ue,upgrade:lt,blocking:en,terminated:Hn}={}){const yn=indexedDB.open(j,we),Cn=Te(yn);return lt&&yn.addEventListener("upgradeneeded",un=>{lt(Te(yn.result),un.oldVersion,un.newVersion,Te(yn.transaction),un)}),Ue&&yn.addEventListener("blocked",un=>Ue(un.oldVersion,un.newVersion,un)),Cn.then(un=>{Hn&&un.addEventListener("close",()=>Hn()),en&&un.addEventListener("versionchange",Zr=>en(Zr.oldVersion,Zr.newVersion,Zr))}).catch(()=>{}),Cn}const de=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],he=new Map;function Ne(j,we){if(!(j instanceof IDBDatabase)||we in j||"string"!=typeof we)return;if(he.get(we))return he.get(we);const Ue=we.replace(/FromIndex$/,""),lt=we!==Ue,en=re.includes(Ue);if(!(Ue in(lt?IDBIndex:IDBObjectStore).prototype)||!en&&!de.includes(Ue))return;const Hn=function(){var yn=(0,u.Z)(function*(Cn,...un){const Zr=this.transaction(Cn,en?"readwrite":"readonly");let ie=Zr.store;return lt&&(ie=ie.index(un.shift())),(yield Promise.all([ie[Ue](...un),en&&Zr.done]))[0]});return function(un){return yn.apply(this,arguments)}}();return he.set(we,Hn),Hn}!function Je(j){xe=j(xe)}(j=>({...j,get:(we,Ue,lt)=>Ne(we,Ue)||j.get(we,Ue,lt),has:(we,Ue)=>!!Ne(we,Ue)||j.has(we,Ue)}))},5861:(st,Ee,F)=>{function u(L,ne,ge,Ie,Pe,Fe,De){try{var B=L[Fe](De),G=B.value}catch(X){return void ge(X)}B.done?ne(G):Promise.resolve(G).then(Ie,Pe)}function V(L){return function(){var ne=this,ge=arguments;return new Promise(function(Ie,Pe){var Fe=L.apply(ne,ge);function De(G){u(Fe,Ie,Pe,De,B,"next",G)}function B(G){u(Fe,Ie,Pe,De,B,"throw",G)}De(void 0)})}}F.d(Ee,{Z:()=>V})},7582:(st,Ee,F)=>{function ne(ie,ce){var le={};for(var se in ie)Object.prototype.hasOwnProperty.call(ie,se)&&ce.indexOf(se)<0&&(le[se]=ie[se]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(se=Object.getOwnPropertySymbols(ie);pe<se.length;pe++)ce.indexOf(se[pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,se[pe])&&(le[se[pe]]=ie[se[pe]])}return le}function X(ie,ce,le,se){return new(le||(le=Promise))(function(ke,Qe){function Be(Yt){try{ht(se.next(Yt))}catch(ft){Qe(ft)}}function tn(Yt){try{ht(se.throw(Yt))}catch(ft){Qe(ft)}}function ht(Yt){Yt.done?ke(Yt.value):function pe(ke){return ke instanceof le?ke:new le(function(Qe){Qe(ke)})}(Yt.value).then(Be,tn)}ht((se=se.apply(ie,ce||[])).next())})}function ee(ie){return this instanceof ee?(this.v=ie,this):new ee(ie)}function de(ie,ce,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,se=le.apply(ie,ce||[]),ke=[];return pe={},Qe("next"),Qe("throw"),Qe("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function Qe(nn){se[nn]&&(pe[nn]=function(Pn){return new Promise(function(wn,rn){ke.push([nn,Pn,wn,rn])>1||Be(nn,Pn)})})}function Be(nn,Pn){try{!function tn(nn){nn.value instanceof ee?Promise.resolve(nn.value.v).then(ht,Yt):ft(ke[0][2],nn)}(se[nn](Pn))}catch(wn){ft(ke[0][3],wn)}}function ht(nn){Be("next",nn)}function Yt(nn){Be("throw",nn)}function ft(nn,Pn){nn(Pn),ke.shift(),ke.length&&Be(ke[0][0],ke[0][1])}}function he(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ce=ie[Symbol.asyncIterator];return ce?ce.call(ie):(ie=function Ce(ie){var ce="function"==typeof Symbol&&Symbol.iterator,le=ce&&ie[ce],se=0;if(le)return le.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&se>=ie.length&&(ie=void 0),{value:ie&&ie[se++],done:!ie}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),le={},se("next"),se("throw"),se("return"),le[Symbol.asyncIterator]=function(){return this},le);function se(ke){le[ke]=ie[ke]&&function(Qe){return new Promise(function(Be,tn){!function pe(ke,Qe,Be,tn){Promise.resolve(tn).then(function(ht){ke({value:ht,done:Be})},Qe)}(Be,tn,(Qe=ie[ke](Qe)).done,Qe.value)})}}}F.d(Ee,{FC:()=>de,KL:()=>he,_T:()=>ne,mG:()=>X,qq:()=>ee}),"function"==typeof SuppressedError&&SuppressedError}},st=>{st(st.s=4433)}]);